From MAILER-DAEMON Thu Feb  2 05:05:51 2006
Return-Path: 
 <hadoop-dev-return-2-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78613 invoked from network); 2 Feb 2006 05:05:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Feb 2006 05:05:51 -0000
Received: (qmail 43090 invoked by uid 500); 2 Feb 2006 05:05:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 43072 invoked by uid 500); 2 Feb 2006 05:05:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Delivered-To: moderator for hadoop-dev@lucene.apache.org
Received: (qmail 38751 invoked by uid 99); 2 Feb 2006 05:01:11 -0000
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=received:mime-version:
	content-transfer-encoding:message-id:content-type:to:from:subject:date:x-mailer:
	return-path:x-originalarrivaltime;
	b=qwC9v6PwCiM6Nalo12Jr4UhMiqSzFrWrGOPZehYoMa3+Cf1v7IQ3gBSFjirhjFtA
Mime-Version: 1.0 (Apple Message framework v746.2)
Content-Transfer-Encoding: 7bit
Message-Id: <1613C755-464F-4F2B-A68B-8BCC3F524274@yahoo-inc.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
To: hadoop-dev@lucene.apache.org
From: Eric Baldeschwieler <eric14@yahoo-inc.com>
Subject: is there ... anybody ... out there?
Date: Wed, 1 Feb 2006 20:58:35 -0800
X-Mailer: Apple Mail (2.746.2)
X-OriginalArrivalTime: 02 Feb 2006 04:58:39.0449 (UTC)
 FILETIME=[54F42C90:01C627B5]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

testing, 1, 2, 3, testing

From MAILER-DAEMON Thu Feb  2 05:07:50 2006
Return-Path: 
 <hadoop-dev-return-3-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 79078 invoked from network); 2 Feb 2006 05:07:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Feb 2006 05:07:50 -0000
Received: (qmail 45030 invoked by uid 500); 2 Feb 2006 05:07:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 45010 invoked by uid 500); 2 Feb 2006 05:07:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 45001 invoked by uid 99); 2 Feb 2006 05:07:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Feb 2006 21:07:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.115.57.74] (HELO ylpvm43.prodigy.net) (207.115.57.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Feb 2006 21:07:49 -0800
Received: from pimout1-ext.prodigy.net (pimout1-int.prodigy.net
 [207.115.5.65])
	by ylpvm43.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id
 k1257Vap031664
	for <hadoop-dev@lucene.apache.org>; Thu, 2 Feb 2006 00:07:31 -0500
X-ORBL: [69.228.232.128]
Received: from [192.168.168.15] (adsl-69-228-232-128.dsl.pltn13.pacbell.net
 [69.228.232.128])
	by pimout1-ext.prodigy.net (8.13.4 outbound domainkey aix/8.13.4) with ESMTP
 id k1257RdE034418;
	Thu, 2 Feb 2006 00:07:28 -0500
Message-ID: <43E19396.6020103@apache.org>
Date: Wed, 01 Feb 2006 21:07:34 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: is there ... anybody ... out there?
References: <1613C755-464F-4F2B-A68B-8BCC3F524274@yahoo-inc.com>
In-Reply-To: <1613C755-464F-4F2B-A68B-8BCC3F524274@yahoo-inc.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I'm here!  And everything's being logged for posterity:

http://www.mail-archive.com/hadoop-dev%40lucene.apache.org/

Doug

From MAILER-DAEMON Thu Feb  2 07:25:31 2006
Return-Path: 
 <hadoop-dev-return-4-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33346 invoked from network); 2 Feb 2006 07:25:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Feb 2006 07:25:31 -0000
Received: (qmail 84407 invoked by uid 500); 2 Feb 2006 07:25:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 84386 invoked by uid 500); 2 Feb 2006 07:25:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 84377 invoked by uid 99); 2 Feb 2006 07:25:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Feb 2006 23:25:30 -0800
X-ASF-Spam-Status: No, hits=1.7 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD,MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.39.214] (HELO web50312.mail.yahoo.com)
 (206.190.39.214)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 01 Feb 2006 23:25:29 -0800
Received: (qmail 90625 invoked by uid 60001); 2 Feb 2006 07:25:09 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=1nQ71m22vRjRouOV4+ubBfDZGom8uUtHpxthSyTvfmh2w1qlEClqdw8GNJGY9dMb/IgI+Z0F4aEtYq62kSA/DbF16QI7YBNckpM3Bdy0sOX2hd6g9bSw5d5FVOpRIZeyOhRlqvOJvqMUIMjBWjZ1ifEv1KgLkBJpBtKqD3Sk4l4=
  ;
Message-ID: <20060202072509.90623.qmail@web50312.mail.yahoo.com>
Date: Thu, 2 Feb 2006 07:25:09 +0000 (GMT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: is there ... anybody ... out there?
To: hadoop-dev@lucene.apache.org
In-Reply-To: <1613C755-464F-4F2B-A68B-8BCC3F524274@yahoo-inc.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

here here

Otis

----- Original Message ----
From: Eric Baldeschwieler <eric14@yahoo-inc.com>
To: hadoop-dev@lucene.apache.org
Sent: Wed 01 Feb 2006 11:58:35 PM EST
Subject: is there ... anybody ... out there?

testing, 1, 2, 3, testing




From MAILER-DAEMON Thu Feb  2 16:32:08 2006
Return-Path: 
 <hadoop-dev-return-5-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 42352 invoked from network); 2 Feb 2006 16:32:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Feb 2006 16:32:08 -0000
Received: (qmail 71424 invoked by uid 500); 2 Feb 2006 16:32:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 71404 invoked by uid 500); 2 Feb 2006 16:32:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 71395 invoked by uid 99); 2 Feb 2006 16:32:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Feb 2006 08:32:08 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of kangas@gmail.com designates
 64.233.184.198 as permitted sender)
Received: from [64.233.184.198] (HELO wproxy.gmail.com) (64.233.184.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Feb 2006 08:32:07 -0800
Received: by wproxy.gmail.com with SMTP id i31so430379wra
        for <hadoop-dev@lucene.apache.org>;
 Thu, 02 Feb 2006 08:31:46 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=dv1Ob7hTGA3cO5VPjVNWsLqpNXvFrpSA2qMrpNaQEtAXXfjwfVuMW3rPHRDF6xVxFs3R/7czU96m2/23UqFXOMgmoIzA1AbRKbyPMy7jaTNn58ympPtSnDIrEo/+osUDe16bQy1Eluc0U56LSbD/dd3yMdBstX7Uv6grIGgRjcg=
Received: by 10.54.127.19 with SMTP id z19mr1212201wrc;
        Thu, 02 Feb 2006 08:31:42 -0800 (PST)
Received: from ?192.168.1.101? ( [66.108.32.4])
        by mx.gmail.com with ESMTP id 45sm2231992wri.2006.02.02.08.31.42;
        Thu, 02 Feb 2006 08:31:42 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <1613C755-464F-4F2B-A68B-8BCC3F524274@yahoo-inc.com>
References: <1613C755-464F-4F2B-A68B-8BCC3F524274@yahoo-inc.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <BE558609-5C7F-40B0-BEF3-13CBCD4EA058@gmail.com>
Content-Transfer-Encoding: 7bit
From: Matt Kangas <kangas@gmail.com>
Subject: Re: is there ... anybody ... out there?
Date: Thu, 2 Feb 2006 11:31:46 -0500
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

ack. (another lurker waiting to see what happens here. :)

On Feb 1, 2006, at 11:58 PM, Eric Baldeschwieler wrote:

> testing, 1, 2, 3, testing

--
Matt Kangas / kangas@gmail.com



From MAILER-DAEMON Thu Feb  2 22:52:46 2006
Return-Path: 
 <hadoop-dev-return-6-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 58405 invoked from network); 2 Feb 2006 22:52:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Feb 2006 22:52:46 -0000
Received: (qmail 94376 invoked by uid 500); 2 Feb 2006 22:52:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94345 invoked by uid 500); 2 Feb 2006 22:52:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94336 invoked by uid 99); 2 Feb 2006 22:52:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Feb 2006 14:52:45 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.122.60.61] (HELO mslinux.media-style.com) (212.122.60.61)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Feb 2006 14:52:44 -0800
Received: from localhost (localhost [127.0.0.1])
	by mslinux.media-style.com (Postfix) with ESMTP id A9E381444E3
	for <hadoop-dev@lucene.apache.org>; Thu,  2 Feb 2006 23:50:13 +0100 (CET)
Received: from mslinux.media-style.com ([127.0.0.1])
	by localhost (mslinux.media-style.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 09772-07 for <hadoop-dev@lucene.apache.org>;
	Thu, 2 Feb 2006 23:50:13 +0100 (CET)
Received: from [192.168.8.2] (dslb-084-059-198-200.pools.arcor-ip.net
 [84.59.198.200])
	by mslinux.media-style.com (Postfix) with ESMTP id 26BE11444DE
	for <hadoop-dev@lucene.apache.org>; Thu,  2 Feb 2006 23:50:12 +0100 (CET)
Mime-Version: 1.0 (Apple Message framework v746.2)
Content-Transfer-Encoding: 7bit
Message-Id: <F7E45461-68A6-4469-B544-CA8C09DA46C8@media-style.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: hadoop-dev@lucene.apache.org
From: Stefan Groschupf <sg@media-style.com>
Subject: automatically build
Date: Thu, 2 Feb 2006 23:52:19 +0100
X-Mailer: Apple Mail (2.746.2)
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at media-style.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi together,

I would love to offer help setting up a maven based build (http:// 
maven.apache.org/what-is-maven.html) and a cruise control setup  
(http://cruisecontrol.sourceforge.net/) may on a apache box (?).
I used maven now since more than 2 years and I really love it, I can  
understand people love to use proved tools, however since hadoop is  
freshly born is may a good time to try maven and I only made very  
good experience.
The best point of maven are the quality project information it provides.
Any interests?

Stefan 

From MAILER-DAEMON Fri Feb  3 20:55:27 2006
Return-Path: 
 <hadoop-dev-return-7-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 48864 invoked from network); 3 Feb 2006 20:55:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Feb 2006 20:55:27 -0000
Received: (qmail 12718 invoked by uid 500); 3 Feb 2006 20:55:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 12693 invoked by uid 500); 3 Feb 2006 20:55:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 12684 invoked by uid 99); 3 Feb 2006 20:55:26 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Feb 2006 12:55:24 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 8E56EDE
	for <hadoop-dev@lucene.apache.org>; Fri,  3 Feb 2006 21:55:03 +0100 (CET)
Message-ID: <361890767.1139000103581.JavaMail.jira@ajax.apache.org>
Date: Fri, 3 Feb 2006 21:55:03 +0100 (CET)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-2) Reused Keys and Values fail with a
 Combiner
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Reused Keys and Values fail with a Combiner
-------------------------------------------

         Key: HADOOP-2
         URL: http://issues.apache.org/jira/browse/HADOOP-2
     Project: Hadoop
        Type: Bug
  Components: mapred  
    Reporter: Owen O'Malley


If the map function reuses the key or value by destructively modifying it after the output.collect(key,value) call and your application uses a combiner, the data is corrupted by having lots of instances with the last key or value.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Feb  3 20:59:52 2006
Return-Path: 
 <hadoop-dev-return-8-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50745 invoked from network); 3 Feb 2006 20:59:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Feb 2006 20:59:52 -0000
Received: (qmail 19768 invoked by uid 500); 3 Feb 2006 20:59:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 19746 invoked by uid 500); 3 Feb 2006 20:59:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 19737 invoked by uid 99); 3 Feb 2006 20:59:52 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Feb 2006 12:59:51 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 877FEC9
	for <hadoop-dev@lucene.apache.org>; Fri,  3 Feb 2006 21:59:30 +0100 (CET)
Message-ID: <1479128257.1139000369818.JavaMail.jira@ajax.apache.org>
Date: Fri, 3 Feb 2006 21:59:29 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-1) initial import of code from Nutch
In-Reply-To: <973704829.1138730132730.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-1?page=all ]
     
Doug Cutting resolved HADOOP-1:
-------------------------------

    Resolution: Fixed

The relevant code from Nutch has now been moved to Hadoop's svn.

> initial import of code from Nutch
> ---------------------------------
>
>          Key: HADOOP-1
>          URL: http://issues.apache.org/jira/browse/HADOOP-1
>      Project: Hadoop
>         Type: Task
>     Reporter: Doug Cutting
>     Assignee: Doug Cutting

>
> The initial code for Hadoop will be copied from Nutch.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Feb  3 20:59:58 2006
Return-Path: 
 <hadoop-dev-return-9-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50797 invoked from network); 3 Feb 2006 20:59:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Feb 2006 20:59:58 -0000
Received: (qmail 19822 invoked by uid 500); 3 Feb 2006 20:59:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 19787 invoked by uid 500); 3 Feb 2006 20:59:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 19776 invoked by uid 99); 3 Feb 2006 20:59:54 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Feb 2006 12:59:53 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 19B86DF
	for <hadoop-dev@lucene.apache.org>; Fri,  3 Feb 2006 21:59:32 +0100 (CET)
Message-ID: <859498351.1139000372103.JavaMail.jira@ajax.apache.org>
Date: Fri, 3 Feb 2006 21:59:32 +0100 (CET)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-3) Output directories are not cleaned up
 before the reduces run
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Output directories are not cleaned up before the reduces run
------------------------------------------------------------

         Key: HADOOP-3
         URL: http://issues.apache.org/jira/browse/HADOOP-3
     Project: Hadoop
        Type: Bug
  Components: mapred  
    Reporter: Owen O'Malley
    Priority: Minor


The output directory for the reduces is not cleaned up and therefore if you can see left overs from previous runs, if they had more reduces. For example, if you run the application once with reduces=10 and then rerun with reduces=8, your output directory will have frag00000 to frag00009 with the first 8 fragments from the second run and the last 2 fragments from the first run.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Sat Feb  4 18:56:26 2006
Return-Path: 
 <hadoop-dev-return-10-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 41355 invoked from network); 4 Feb 2006 18:56:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Feb 2006 18:56:26 -0000
Received: (qmail 45868 invoked by uid 500); 4 Feb 2006 18:56:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 45842 invoked by uid 500); 4 Feb 2006 18:56:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 45833 invoked by uid 99); 4 Feb 2006 18:56:25 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Feb 2006 10:56:24 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id C7E27CB
	for <hadoop-dev@lucene.apache.org>; Sat,  4 Feb 2006 19:56:03 +0100 (CET)
Message-ID: <1520733599.1139079363816.JavaMail.jira@ajax.apache.org>
Date: Sat, 4 Feb 2006 19:56:03 +0100 (CET)
From: "John Xing (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-4) tool to mount dfs on linux
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

tool to mount dfs on linux
--------------------------

         Key: HADOOP-4
         URL: http://issues.apache.org/jira/browse/HADOOP-4
     Project: Hadoop
        Type: Improvement
 Environment: linux only
    Reporter: John Xing


tool to mount dfs on linux

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Sat Feb  4 19:07:28 2006
Return-Path: 
 <hadoop-dev-return-11-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 44594 invoked from network); 4 Feb 2006 19:07:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Feb 2006 19:07:28 -0000
Received: (qmail 52763 invoked by uid 500); 4 Feb 2006 19:07:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 52746 invoked by uid 500); 4 Feb 2006 19:07:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 52737 invoked by uid 99); 4 Feb 2006 19:07:27 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Feb 2006 11:07:25 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id BD897CB
	for <hadoop-dev@lucene.apache.org>; Sat,  4 Feb 2006 20:07:04 +0100 (CET)
Message-ID: <2087582488.1139080024774.JavaMail.jira@ajax.apache.org>
Date: Sat, 4 Feb 2006 20:07:04 +0100 (CET)
From: "John Xing (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-4) tool to mount dfs on linux
In-Reply-To: <1520733599.1139079363816.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-4?page=all ]

John Xing updated HADOOP-4:
---------------------------

    Attachment: fuse-hadoop-0.1.1.tar.gz

It works with new hadoop project now (tarball attached).
The intended commit location is http://svn.apache.org/repos/asf/lucene/hadoop/trunk/contrib/fuse
Please vote on this issue.

> tool to mount dfs on linux
> --------------------------
>
>          Key: HADOOP-4
>          URL: http://issues.apache.org/jira/browse/HADOOP-4
>      Project: Hadoop
>         Type: Improvement
>  Environment: linux only
>     Reporter: John Xing
>  Attachments: fuse-hadoop-0.1.1.tar.gz
>
> tool to mount dfs on linux

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb  6 18:05:36 2006
Return-Path: 
 <hadoop-dev-return-12-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 28564 invoked from network); 6 Feb 2006 18:05:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 18:05:36 -0000
Received: (qmail 72287 invoked by uid 500); 6 Feb 2006 18:05:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72265 invoked by uid 500); 6 Feb 2006 18:05:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72256 invoked by uid 99); 6 Feb 2006 18:05:35 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 10:05:33 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 407CBCB
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Feb 2006 19:05:12 +0100 (CET)
Message-ID: <383609575.1139249112261.JavaMail.jira@ajax.apache.org>
Date: Mon, 6 Feb 2006 19:05:12 +0100 (CET)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-5) need commons-logging-api jar file
Mime-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

need commons-logging-api jar file
---------------------------------

         Key: HADOOP-5
         URL: http://issues.apache.org/jira/browse/HADOOP-5
     Project: Hadoop
        Type: Bug
    Reporter: Owen O'Malley
    Priority: Minor


The hadoop lib directory needs a copy of the commons-logging-api jar file from nutch's lib directory.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb  6 18:20:27 2006
Return-Path: 
 <hadoop-dev-return-13-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 36813 invoked from network); 6 Feb 2006 18:20:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 18:20:27 -0000
Received: (qmail 96021 invoked by uid 500); 6 Feb 2006 18:20:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95995 invoked by uid 500); 6 Feb 2006 18:20:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95963 invoked by uid 99); 6 Feb 2006 18:20:26 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 10:20:24 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 20F79CB
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Feb 2006 19:20:03 +0100 (CET)
Message-ID: <189115709.1139250003132.JavaMail.jira@ajax.apache.org>
Date: Mon, 6 Feb 2006 19:20:03 +0100 (CET)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-6) missing build directory in classpath
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

missing build directory in classpath
------------------------------------

         Key: HADOOP-6
         URL: http://issues.apache.org/jira/browse/HADOOP-6
     Project: Hadoop
        Type: Bug
    Reporter: Owen O'Malley
    Priority: Minor


When running a developer build, the hadoop script needs the build directory on the classpath so that the job tracker can find the webapps directory.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb  6 18:22:25 2006
Return-Path: 
 <hadoop-dev-return-14-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37930 invoked from network); 6 Feb 2006 18:22:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 18:22:25 -0000
Received: (qmail 98368 invoked by uid 500); 6 Feb 2006 18:22:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98343 invoked by uid 500); 6 Feb 2006 18:22:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98333 invoked by uid 99); 6 Feb 2006 18:22:24 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 10:22:22 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id C2F6ACB
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Feb 2006 19:22:01 +0100 (CET)
Message-ID: <252742680.1139250121795.JavaMail.jira@ajax.apache.org>
Date: Mon, 6 Feb 2006 19:22:01 +0100 (CET)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-6) missing build directory in classpath
In-Reply-To: <189115709.1139250003132.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-6?page=all ]

Owen O'Malley updated HADOOP-6:
-------------------------------

    Attachment: build-in-path.patch

> missing build directory in classpath
> ------------------------------------
>
>          Key: HADOOP-6
>          URL: http://issues.apache.org/jira/browse/HADOOP-6
>      Project: Hadoop
>         Type: Bug
>     Reporter: Owen O'Malley
>     Priority: Minor
>  Attachments: build-in-path.patch
>
> When running a developer build, the hadoop script needs the build directory on the classpath so that the job tracker can find the webapps directory.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb  6 18:35:24 2006
Return-Path: 
 <hadoop-dev-return-15-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 45844 invoked from network); 6 Feb 2006 18:35:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 18:35:24 -0000
Received: (qmail 13516 invoked by uid 500); 6 Feb 2006 18:35:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13499 invoked by uid 500); 6 Feb 2006 18:35:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13490 invoked by uid 99); 6 Feb 2006 18:35:24 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 10:35:22 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id E87A0CB
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Feb 2006 19:35:01 +0100 (CET)
Message-ID: <1927859348.1139250901949.JavaMail.jira@ajax.apache.org>
Date: Mon, 6 Feb 2006 19:35:01 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-6) missing build directory in classpath
In-Reply-To: <189115709.1139250003132.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-6?page=all ]
     
Doug Cutting resolved HADOOP-6:
-------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Owen!

> missing build directory in classpath
> ------------------------------------
>
>          Key: HADOOP-6
>          URL: http://issues.apache.org/jira/browse/HADOOP-6
>      Project: Hadoop
>         Type: Bug
>     Reporter: Owen O'Malley
>     Priority: Minor
>  Attachments: build-in-path.patch
>
> When running a developer build, the hadoop script needs the build directory on the classpath so that the job tracker can find the webapps directory.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb  6 18:40:19 2006
Return-Path: 
 <hadoop-dev-return-16-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 47293 invoked from network); 6 Feb 2006 18:40:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 18:40:19 -0000
Received: (qmail 17668 invoked by uid 500); 6 Feb 2006 18:40:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17647 invoked by uid 500); 6 Feb 2006 18:40:18 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17638 invoked by uid 99); 6 Feb 2006 18:40:18 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 10:40:18 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 2681DC9
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Feb 2006 19:39:57 +0100 (CET)
Message-ID: <1057210541.1139251197149.JavaMail.jira@ajax.apache.org>
Date: Mon, 6 Feb 2006 19:39:57 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Moved: (HADOOP-7) MapReduce has a series of problems
 concerning task-allocation to worker nodes
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-7?page=all ]

Doug Cutting moved NUTCH-183 to HADOOP-7:
-----------------------------------------

       Project: Hadoop  (was: Nutch)
           Key: HADOOP-7  (was: NUTCH-183)
    Issue Type: Bug  (was: Improvement)

> MapReduce has a series of problems concerning task-allocation to worker nodes
> -----------------------------------------------------------------------------
>
>          Key: HADOOP-7
>          URL: http://issues.apache.org/jira/browse/HADOOP-7
>      Project: Hadoop
>         Type: Bug
>  Environment: All
>     Reporter: Mike Cafarella
>  Attachments: jobtracker.patch
>
> The MapReduce JobTracker is not great at allocating tasks to TaskTracker worker nodes.
> Here are the problems:
> 1) There is no speculative execution of tasks
> 2) Reduce tasks must wait until all map tasks are completed before doing any work
> 3) TaskTrackers don't distinguish between Map and Reduce jobs.  Also, the number of
> tasks at a single node is limited to some constant.  That means you can get weird deadlock
> problems upon machine failure.  The reduces take up all the available execution slots, but they
> don't do productive work, because they're waiting for a map task to complete.  Of course, that
> map task won't even be started until the reduce tasks finish, so you can see the problem...
> 4) The JobTracker is so complicated that it's hard to fix any of these.
> The right solution is a rewrite of the JobTracker to be a lot more flexible in task handling.
> It has to be a lot simpler.  One way to make it simpler is to add an abstraction I'll call
> "TaskInProgress".  Jobs are broken into chunks called TasksInProgress.  All the TaskInProgress
> objects must be complete, somehow, before the Job is complete.
> A single TaskInProgress can be executed by one or more Tasks.  TaskTrackers are assigned Tasks.
> If a Task fails, we report it back to the JobTracker, where the TaskInProgress lives.  The TIP can then
> decide whether to launch additional  Tasks or not.
> Speculative execution is handled within the TIP.  It simply launches multiple Tasks in parallel.  The
> TaskTrackers have no idea that these Tasks are actually doing the same chunk of work.  The TIP
> is complete when any one of its Tasks are complete.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb  6 18:40:23 2006
Return-Path: 
 <hadoop-dev-return-17-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 47347 invoked from network); 6 Feb 2006 18:40:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 18:40:23 -0000
Received: (qmail 18426 invoked by uid 500); 6 Feb 2006 18:40:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17704 invoked by uid 500); 6 Feb 2006 18:40:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17683 invoked by uid 99); 6 Feb 2006 18:40:20 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 10:40:19 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 474BCE1
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Feb 2006 19:39:58 +0100 (CET)
Message-ID: <195112228.1139251198286.JavaMail.jira@ajax.apache.org>
Date: Mon, 6 Feb 2006 19:39:58 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Moved: (HADOOP-8) NDFS DataNode advertises localhost as it's
 address
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-8?page=3Dall ]

Doug Cutting moved NUTCH-76 to HADOOP-8:
----------------------------------------

    Project: Hadoop  (was: Nutch)
        Key: HADOOP-8  (was: NUTCH-76)

> NDFS DataNode advertises localhost as it's address
> --------------------------------------------------
>
>          Key: HADOOP-8
>          URL: http://issues.apache.org/jira/browse/HADOOP-8
>      Project: Hadoop
>         Type: Bug
>  Environment: Linux
>     Reporter: Peter Sandstr=C3=B6m
>  Attachments: ndfs-datanode-fix.patch
>


--=20
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb  6 18:40:24 2006
Return-Path: 
 <hadoop-dev-return-18-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 47385 invoked from network); 6 Feb 2006 18:40:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 18:40:24 -0000
Received: (qmail 18485 invoked by uid 500); 6 Feb 2006 18:40:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 18458 invoked by uid 500); 6 Feb 2006 18:40:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 18435 invoked by uid 99); 6 Feb 2006 18:40:23 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 10:40:20 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 7F4B7126
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Feb 2006 19:39:59 +0100 (CET)
Message-ID: <999171191.1139251199518.JavaMail.jira@ajax.apache.org>
Date: Mon, 6 Feb 2006 19:39:59 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-7) MapReduce has a series of problems
 concerning task-allocation to worker nodes
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-7?page=all ]
     
Doug Cutting resolved HADOOP-7:
-------------------------------

    Resolution: Fixed

Mike committed this last week.

> MapReduce has a series of problems concerning task-allocation to worker nodes
> -----------------------------------------------------------------------------
>
>          Key: HADOOP-7
>          URL: http://issues.apache.org/jira/browse/HADOOP-7
>      Project: Hadoop
>         Type: Bug
>  Environment: All
>     Reporter: Mike Cafarella
>  Attachments: jobtracker.patch
>
> The MapReduce JobTracker is not great at allocating tasks to TaskTracker worker nodes.
> Here are the problems:
> 1) There is no speculative execution of tasks
> 2) Reduce tasks must wait until all map tasks are completed before doing any work
> 3) TaskTrackers don't distinguish between Map and Reduce jobs.  Also, the number of
> tasks at a single node is limited to some constant.  That means you can get weird deadlock
> problems upon machine failure.  The reduces take up all the available execution slots, but they
> don't do productive work, because they're waiting for a map task to complete.  Of course, that
> map task won't even be started until the reduce tasks finish, so you can see the problem...
> 4) The JobTracker is so complicated that it's hard to fix any of these.
> The right solution is a rewrite of the JobTracker to be a lot more flexible in task handling.
> It has to be a lot simpler.  One way to make it simpler is to add an abstraction I'll call
> "TaskInProgress".  Jobs are broken into chunks called TasksInProgress.  All the TaskInProgress
> objects must be complete, somehow, before the Job is complete.
> A single TaskInProgress can be executed by one or more Tasks.  TaskTrackers are assigned Tasks.
> If a Task fails, we report it back to the JobTracker, where the TaskInProgress lives.  The TIP can then
> decide whether to launch additional  Tasks or not.
> Speculative execution is handled within the TIP.  It simply launches multiple Tasks in parallel.  The
> TaskTrackers have no idea that these Tasks are actually doing the same chunk of work.  The TIP
> is complete when any one of its Tasks are complete.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb  6 18:42:22 2006
Return-Path: 
 <hadoop-dev-return-19-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 48227 invoked from network); 6 Feb 2006 18:42:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 18:42:22 -0000
Received: (qmail 21811 invoked by uid 500); 6 Feb 2006 18:42:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 21795 invoked by uid 500); 6 Feb 2006 18:42:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 21779 invoked by uid 99); 6 Feb 2006 18:42:21 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 10:42:19 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 30F45DF
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Feb 2006 19:41:58 +0100 (CET)
Message-ID: <1492002121.1139251318198.JavaMail.jira@ajax.apache.org>
Date: Mon, 6 Feb 2006 19:41:58 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Moved: (HADOOP-9) mapred.local.dir  temp dir. space
 allocation limited by smallest area
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-9?page=all ]

Doug Cutting moved NUTCH-181 to HADOOP-9:
-----------------------------------------

    Project: Hadoop  (was: Nutch)
        Key: HADOOP-9  (was: NUTCH-181)
    Version:     (was: 0.8-dev)

> mapred.local.dir  temp dir. space allocation limited by smallest area
> ---------------------------------------------------------------------
>
>          Key: HADOOP-9
>          URL: http://issues.apache.org/jira/browse/HADOOP-9
>      Project: Hadoop
>         Type: Bug
>   Components: indexer
>  Environment: all
>     Reporter: Paul Baclace

>
> When mapred.local.dir is used to specify multiple  temp dir. areas, space allocation limited by smallest area because the temp dir. selection algorithm is "round robin starting from a randomish point".   When round robin is used with approximately constant sized chunks, the smallest area runs out of space first, and this is a fatal error. 
> Workaround: only list local fs dirs in mapred.local.dir with similarly-sized available areas.
> I wrote a patch to JobConf (currenly being tested) which uses df to check available space (once a minute or less often) and then uses an efficient roulette selection to do allocation weighted by magnitude of available space. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb  6 18:44:20 2006
Return-Path: 
 <hadoop-dev-return-21-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 49039 invoked from network); 6 Feb 2006 18:44:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 18:44:20 -0000
Received: (qmail 23552 invoked by uid 500); 6 Feb 2006 18:44:19 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23522 invoked by uid 500); 6 Feb 2006 18:44:19 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23512 invoked by uid 99); 6 Feb 2006 18:44:19 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 10:44:19 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id BD78BDF
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Feb 2006 19:43:57 +0100 (CET)
Message-ID: <1620812446.1139251437773.JavaMail.jira@ajax.apache.org>
Date: Mon, 6 Feb 2006 19:43:57 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Moved: (HADOOP-12) InputFormat used in job must be in
 JobTracker classpath (not loaded from job JAR)
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-12?page=all ]

Doug Cutting moved NUTCH-191 to HADOOP-11:
------------------------------------------

    Project: Hadoop  (was: Nutch)
        Key: HADOOP-11  (was: NUTCH-191)
    Version:     (was: 0.8-dev)

> InputFormat used in job must be in JobTracker classpath (not loaded from job JAR)
> ---------------------------------------------------------------------------------
>
>          Key: HADOOP-12
>          URL: http://issues.apache.org/jira/browse/HADOOP-12
>      Project: Hadoop
>         Type: Bug
>  Environment: ~20 node nutch mapreduce environment, running SVN trunk, on Linux
>     Reporter: Bryan Pendleton
>     Priority: Minor

>
> During development, I've been creating/tweaking custom InputFormat implementations. However, when you try to run a job against a running cluster, you get:
>   Exception in thread "main" java.io.IOException: java.lang.RuntimeException: java.lang.RuntimeException: java.lang.ClassNotFoundException: my.custom.InputFormat
>           at org.apache.nutch.ipc.Client.call(Client.java:294)
>           at org.apache.nutch.ipc.RPC$Invoker.invoke(RPC.java:127)
>           at $Proxy0.submitJob(Unknown Source)
>           at org.apache.nutch.mapred.JobClient.submitJob(JobClient.java:259)
>           at org.apache.nutch.mapred.JobClient.runJob(JobClient.java:288)
>           at com.parc.uir.wikipedia.WikipediaJob.main(WikipediaJob.java:85)
> This error goes away if I restart the TaskTrackers/JobTracker with a classpath which includes the needed code. Other classes (Mapper, Reducer) appear to be available out of the jar file specified in the JobConf, but not the InputFormat. Obviously, it's less than idea to have to restart the JobTracker whenever there's a change to a job-specific class.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb  6 18:44:19 2006
Return-Path: 
 <hadoop-dev-return-20-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 49013 invoked from network); 6 Feb 2006 18:44:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 18:44:19 -0000
Received: (qmail 23504 invoked by uid 500); 6 Feb 2006 18:44:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23475 invoked by uid 500); 6 Feb 2006 18:44:18 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23466 invoked by uid 99); 6 Feb 2006 18:44:18 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 10:44:18 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 6534CCB
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Feb 2006 19:43:57 +0100 (CET)
Message-ID: <1342944003.1139251437412.JavaMail.jira@ajax.apache.org>
Date: Mon, 6 Feb 2006 19:43:57 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Moved: (HADOOP-10) ndfs.replication is not documented within
 the nutch-default.xml configuration file.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-10?page=all ]

Doug Cutting moved NUTCH-111 to HADOOP-10:
------------------------------------------

    Project: Hadoop  (was: Nutch)
        Key: HADOOP-10  (was: NUTCH-111)
    Version:     (was: 0.8-dev)

> ndfs.replication is not documented within the nutch-default.xml configuration file.
> -----------------------------------------------------------------------------------
>
>          Key: HADOOP-10
>          URL: http://issues.apache.org/jira/browse/HADOOP-10
>      Project: Hadoop
>         Type: Bug
>     Reporter: Rod Taylor
>     Priority: Trivial

>
> ndfs.replication is not documented within the nutch-default.xml configuration file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb  6 18:44:22 2006
Return-Path: 
 <hadoop-dev-return-22-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 49059 invoked from network); 6 Feb 2006 18:44:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 18:44:22 -0000
Received: (qmail 23601 invoked by uid 500); 6 Feb 2006 18:44:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23578 invoked by uid 500); 6 Feb 2006 18:44:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23569 invoked by uid 99); 6 Feb 2006 18:44:20 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 10:44:19 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 0E8ADE1
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Feb 2006 19:43:58 +0100 (CET)
Message-ID: <304416706.1139251438057.JavaMail.jira@ajax.apache.org>
Date: Mon, 6 Feb 2006 19:43:58 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Moved: (HADOOP-12) InputFormat used in job must be in
 JobTracker classpath (not loaded from job JAR)
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-12?page=all ]

Doug Cutting moved HADOOP-11 to HADOOP-12:
------------------------------------------

       Project: Hadoop  (was: Nutch)
           Key: HADOOP-12  (was: HADOOP-11)
    Issue Type: Bug  (was: Improvement)

> InputFormat used in job must be in JobTracker classpath (not loaded from job JAR)
> ---------------------------------------------------------------------------------
>
>          Key: HADOOP-12
>          URL: http://issues.apache.org/jira/browse/HADOOP-12
>      Project: Hadoop
>         Type: Bug
>  Environment: ~20 node nutch mapreduce environment, running SVN trunk, on Linux
>     Reporter: Bryan Pendleton
>     Priority: Minor

>
> During development, I've been creating/tweaking custom InputFormat implementations. However, when you try to run a job against a running cluster, you get:
>   Exception in thread "main" java.io.IOException: java.lang.RuntimeException: java.lang.RuntimeException: java.lang.ClassNotFoundException: my.custom.InputFormat
>           at org.apache.nutch.ipc.Client.call(Client.java:294)
>           at org.apache.nutch.ipc.RPC$Invoker.invoke(RPC.java:127)
>           at $Proxy0.submitJob(Unknown Source)
>           at org.apache.nutch.mapred.JobClient.submitJob(JobClient.java:259)
>           at org.apache.nutch.mapred.JobClient.runJob(JobClient.java:288)
>           at com.parc.uir.wikipedia.WikipediaJob.main(WikipediaJob.java:85)
> This error goes away if I restart the TaskTrackers/JobTracker with a classpath which includes the needed code. Other classes (Mapper, Reducer) appear to be available out of the jar file specified in the JobConf, but not the InputFormat. Obviously, it's less than idea to have to restart the JobTracker whenever there's a change to a job-specific class.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb  6 18:48:19 2006
Return-Path: 
 <hadoop-dev-return-23-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50910 invoked from network); 6 Feb 2006 18:48:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 18:48:19 -0000
Received: (qmail 28160 invoked by uid 500); 6 Feb 2006 18:48:19 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28103 invoked by uid 500); 6 Feb 2006 18:48:19 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28083 invoked by uid 99); 6 Feb 2006 18:48:18 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 10:48:18 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 22BF8C9
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Feb 2006 19:47:57 +0100 (CET)
Message-ID: <1362487169.1139251677061.JavaMail.jira@ajax.apache.org>
Date: Mon, 6 Feb 2006 19:47:57 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Moved: (HADOOP-16) RPC call times out while indexing map
 task is computing splits
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-16?page=all ]

Doug Cutting moved NUTCH-195 to HADOOP-14:
------------------------------------------

      Project: Hadoop  (was: Nutch)
          Key: HADOOP-14  (was: NUTCH-195)
    Component: mapred
                   (was: indexer)
      Version:     (was: 0.8-dev)

> RPC call times out while indexing map task is computing splits
> --------------------------------------------------------------
>
>          Key: HADOOP-16
>          URL: http://issues.apache.org/jira/browse/HADOOP-16
>      Project: Hadoop
>         Type: Bug
>   Components: mapred
>  Environment: MapReduce multi-computer crawl environment: 11 machines (1 master with JobTracker/NameNode, 10 slaves with TaskTrackers/DataNodes)
>     Reporter: Chris Schneider

>
> We've been using Nutch 0.8 (MapReduce) to perform some internet crawling. Things seemed to be going well until...
> 060129 222409 Lost tracker 'tracker_56288'
> 060129 222409 Task 'task_m_10gs5f' has been lost.
> 060129 222409 Task 'task_m_10qhzr' has been lost.
>    ........
>    ........
> 060129 222409 Task 'task_r_zggbwu' has been lost.
> 060129 222409 Task 'task_r_zh8dao' has been lost.
> 060129 222455 Server handler 8 on 8010 caught: java.net.SocketException: Socket closed
> java.net.SocketException: Socket closed
>         at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:99)
>         at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
>         at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
>         at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
>         at java.io.DataOutputStream.flush(DataOutputStream.java:106)
>         at org.apache.nutch.ipc.Server$Handler.run(Server.java:216)
> 060129 222455 Adding task 'task_m_cia5po' to set for tracker 'tracker_56288'
> 060129 223711 Adding task 'task_m_ffv59i' to set for tracker 'tracker_25647'
> I'm hoping that someone could explain why task_m_cia5po got added to tracker_56288 after this tracker was lost.
> The Crawl .main process died with the following output:
> 060129 221129 Indexer: adding segment: /user/crawler/crawl-20060129091444/segments/20060129200246
> Exception in thread "main" java.io.IOException: timed out waiting for response
>     at org.apache.nutch.ipc.Client.call(Client.java:296)
>     at org.apache.nutch.ipc.RPC$Invoker.invoke(RPC.java:127)
>     at $Proxy1.submitJob(Unknown Source)
>     at org.apache.nutch.mapred.JobClient.submitJob(JobClient.java:259)
>     at org.apache.nutch.mapred.JobClient.runJob(JobClient.java:288)
>     at org.apache.nutch.indexer.Indexer.index(Indexer.java:263)
>     at org.apache.nutch.crawl.Crawl.main(Crawl.java:127)
> However, it definitely seems as if the JobTracker is still waiting for the job to finish (no failed jobs).
> Doug Cutting's response:
> The bug here is that the RPC call times out while the map task is computing splits.  The fix is that the job tracker should not compute splits until after it has returned from the submitJob RPC.  Please submit a bug in Jira to help remind us to fix this.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb  6 18:48:38 2006
Return-Path: 
 <hadoop-dev-return-25-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51052 invoked from network); 6 Feb 2006 18:48:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 18:48:38 -0000
Received: (qmail 28555 invoked by uid 500); 6 Feb 2006 18:48:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28500 invoked by uid 500); 6 Feb 2006 18:48:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28431 invoked by uid 99); 6 Feb 2006 18:48:21 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 10:48:19 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id DA190E0
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Feb 2006 19:47:57 +0100 (CET)
Message-ID: <1730564609.1139251677891.JavaMail.jira@ajax.apache.org>
Date: Mon, 6 Feb 2006 19:47:57 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Moved: (HADOOP-16) RPC call times out while indexing map
 task is computing splits
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-16?page=all ]

Doug Cutting moved HADOOP-15 to HADOOP-16:
------------------------------------------

       Project: Hadoop  (was: Nutch)
           Key: HADOOP-16  (was: HADOOP-15)
    Issue Type: Bug  (was: New Feature)

> RPC call times out while indexing map task is computing splits
> --------------------------------------------------------------
>
>          Key: HADOOP-16
>          URL: http://issues.apache.org/jira/browse/HADOOP-16
>      Project: Hadoop
>         Type: Bug
>   Components: mapred
>  Environment: MapReduce multi-computer crawl environment: 11 machines (1 master with JobTracker/NameNode, 10 slaves with TaskTrackers/DataNodes)
>     Reporter: Chris Schneider

>
> We've been using Nutch 0.8 (MapReduce) to perform some internet crawling. Things seemed to be going well until...
> 060129 222409 Lost tracker 'tracker_56288'
> 060129 222409 Task 'task_m_10gs5f' has been lost.
> 060129 222409 Task 'task_m_10qhzr' has been lost.
>    ........
>    ........
> 060129 222409 Task 'task_r_zggbwu' has been lost.
> 060129 222409 Task 'task_r_zh8dao' has been lost.
> 060129 222455 Server handler 8 on 8010 caught: java.net.SocketException: Socket closed
> java.net.SocketException: Socket closed
>         at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:99)
>         at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
>         at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
>         at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
>         at java.io.DataOutputStream.flush(DataOutputStream.java:106)
>         at org.apache.nutch.ipc.Server$Handler.run(Server.java:216)
> 060129 222455 Adding task 'task_m_cia5po' to set for tracker 'tracker_56288'
> 060129 223711 Adding task 'task_m_ffv59i' to set for tracker 'tracker_25647'
> I'm hoping that someone could explain why task_m_cia5po got added to tracker_56288 after this tracker was lost.
> The Crawl .main process died with the following output:
> 060129 221129 Indexer: adding segment: /user/crawler/crawl-20060129091444/segments/20060129200246
> Exception in thread "main" java.io.IOException: timed out waiting for response
>     at org.apache.nutch.ipc.Client.call(Client.java:296)
>     at org.apache.nutch.ipc.RPC$Invoker.invoke(RPC.java:127)
>     at $Proxy1.submitJob(Unknown Source)
>     at org.apache.nutch.mapred.JobClient.submitJob(JobClient.java:259)
>     at org.apache.nutch.mapred.JobClient.runJob(JobClient.java:288)
>     at org.apache.nutch.indexer.Indexer.index(Indexer.java:263)
>     at org.apache.nutch.crawl.Crawl.main(Crawl.java:127)
> However, it definitely seems as if the JobTracker is still waiting for the job to finish (no failed jobs).
> Doug Cutting's response:
> The bug here is that the RPC call times out while the map task is computing splits.  The fix is that the job tracker should not compute splits until after it has returned from the submitJob RPC.  Please submit a bug in Jira to help remind us to fix this.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb  6 18:48:19 2006
Return-Path: 
 <hadoop-dev-return-24-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50908 invoked from network); 6 Feb 2006 18:48:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 18:48:19 -0000
Received: (qmail 28159 invoked by uid 500); 6 Feb 2006 18:48:19 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28106 invoked by uid 500); 6 Feb 2006 18:48:19 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28085 invoked by uid 99); 6 Feb 2006 18:48:18 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 10:48:18 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 984A7DE
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Feb 2006 19:47:57 +0100 (CET)
Message-ID: <1253495525.1139251677621.JavaMail.jira@ajax.apache.org>
Date: Mon, 6 Feb 2006 19:47:57 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Moved: (HADOOP-16) RPC call times out while indexing map
 task is computing splits
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-16?page=all ]

Doug Cutting moved HADOOP-14 to HADOOP-15:
------------------------------------------

    Project: Hadoop  (was: Nutch)
        Key: HADOOP-15  (was: HADOOP-14)

> RPC call times out while indexing map task is computing splits
> --------------------------------------------------------------
>
>          Key: HADOOP-16
>          URL: http://issues.apache.org/jira/browse/HADOOP-16
>      Project: Hadoop
>         Type: Bug
>   Components: mapred
>  Environment: MapReduce multi-computer crawl environment: 11 machines (1 master with JobTracker/NameNode, 10 slaves with TaskTrackers/DataNodes)
>     Reporter: Chris Schneider

>
> We've been using Nutch 0.8 (MapReduce) to perform some internet crawling. Things seemed to be going well until...
> 060129 222409 Lost tracker 'tracker_56288'
> 060129 222409 Task 'task_m_10gs5f' has been lost.
> 060129 222409 Task 'task_m_10qhzr' has been lost.
>    ........
>    ........
> 060129 222409 Task 'task_r_zggbwu' has been lost.
> 060129 222409 Task 'task_r_zh8dao' has been lost.
> 060129 222455 Server handler 8 on 8010 caught: java.net.SocketException: Socket closed
> java.net.SocketException: Socket closed
>         at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:99)
>         at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
>         at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
>         at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
>         at java.io.DataOutputStream.flush(DataOutputStream.java:106)
>         at org.apache.nutch.ipc.Server$Handler.run(Server.java:216)
> 060129 222455 Adding task 'task_m_cia5po' to set for tracker 'tracker_56288'
> 060129 223711 Adding task 'task_m_ffv59i' to set for tracker 'tracker_25647'
> I'm hoping that someone could explain why task_m_cia5po got added to tracker_56288 after this tracker was lost.
> The Crawl .main process died with the following output:
> 060129 221129 Indexer: adding segment: /user/crawler/crawl-20060129091444/segments/20060129200246
> Exception in thread "main" java.io.IOException: timed out waiting for response
>     at org.apache.nutch.ipc.Client.call(Client.java:296)
>     at org.apache.nutch.ipc.RPC$Invoker.invoke(RPC.java:127)
>     at $Proxy1.submitJob(Unknown Source)
>     at org.apache.nutch.mapred.JobClient.submitJob(JobClient.java:259)
>     at org.apache.nutch.mapred.JobClient.runJob(JobClient.java:288)
>     at org.apache.nutch.indexer.Indexer.index(Indexer.java:263)
>     at org.apache.nutch.crawl.Crawl.main(Crawl.java:127)
> However, it definitely seems as if the JobTracker is still waiting for the job to finish (no failed jobs).
> Doug Cutting's response:
> The bug here is that the RPC call times out while the map task is computing splits.  The fix is that the job tracker should not compute splits until after it has returned from the submitJob RPC.  Please submit a bug in Jira to help remind us to fix this.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb  6 18:48:40 2006
Return-Path: 
 <hadoop-dev-return-26-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51191 invoked from network); 6 Feb 2006 18:48:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 18:48:40 -0000
Received: (qmail 31276 invoked by uid 500); 6 Feb 2006 18:48:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 31262 invoked by uid 500); 6 Feb 2006 18:48:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31253 invoked by uid 99); 6 Feb 2006 18:48:39 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 10:48:39 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 77234183
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Feb 2006 19:47:59 +0100 (CET)
Message-ID: <2065325361.1139251679485.JavaMail.jira@ajax.apache.org>
Date: Mon, 6 Feb 2006 19:47:59 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Moved: (HADOOP-17) tool to mount ndfs on linux
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-17?page=all ]

Doug Cutting moved NUTCH-199 to HADOOP-17:
------------------------------------------

      Project: Hadoop  (was: Nutch)
          Key: HADOOP-17  (was: NUTCH-199)
    Component: fs
                   (was: ndfs)
    Assign To:     (was: John Xing)

> tool to mount ndfs on linux
> ---------------------------
>
>          Key: HADOOP-17
>          URL: http://issues.apache.org/jira/browse/HADOOP-17
>      Project: Hadoop
>         Type: New Feature
>   Components: fs
>  Environment: linux only
>     Reporter: John Xing
>  Attachments: fuse-hadoop-0.1.0.tar.gz
>
> tool to mount ndfs on linux. It depends on fuse and fuse-j.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb  6 18:50:21 2006
Return-Path: 
 <hadoop-dev-return-28-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51764 invoked from network); 6 Feb 2006 18:50:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 18:50:21 -0000
Received: (qmail 32058 invoked by uid 500); 6 Feb 2006 18:50:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 32017 invoked by uid 500); 6 Feb 2006 18:50:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31998 invoked by uid 99); 6 Feb 2006 18:50:20 -0000
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=INFO_TLD
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 10:50:19 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id DADA1E1
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Feb 2006 19:49:57 +0100 (CET)
Message-ID: <796051471.1139251797894.JavaMail.jira@ajax.apache.org>
Date: Mon, 6 Feb 2006 19:49:57 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Moved: (HADOOP-20) Mapper, Reducer need an occasion to
 cleanup after the last record is processed.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-20?page=all ]

Doug Cutting moved NUTCH-202 to HADOOP-20:
------------------------------------------

    Project: Hadoop  (was: Nutch)
        Key: HADOOP-20  (was: NUTCH-202)

> Mapper, Reducer need an occasion to cleanup after the last record is processed.
> -------------------------------------------------------------------------------
>
>          Key: HADOOP-20
>          URL: http://issues.apache.org/jira/browse/HADOOP-20
>      Project: Hadoop
>         Type: Improvement
>  Environment: Linux
>     Reporter: Michel Tourn
>  Attachments: mapredfinished.log
>
> Mapper, Reducer need an occasion to do some cleanup after the last record is processed.
> Proposal (patch attached)
> in interface Mapper:
>  add method void finished();
> in interface Reducer:
>  add method void finished();
> finished() methods are called from MapTask, CombiningCollector, ReduceTask.
> ------------
> Known limitation: Fetcher (a multithreaded MapRunnable) does not call finished().
> This is not currently a problem bec. fetcher Map/Reduce modules do not do anything in finished().
> The right way to add finished() support to Fetcher would be to wait for all threads to finish, 
> then do:
>      if (collector instanceof CombiningCollector) ((CombiningCollector)collector).finished();
> ------------
> patch begins: (svn trunk)
> Index: src/test/org/apache/nutch/mapred/MapredLoadTest.java
> ===================================================================
> --- src/test/org/apache/nutch/mapred/MapredLoadTest.java	(revision 374781)
> +++ src/test/org/apache/nutch/mapred/MapredLoadTest.java	(working copy)
> @@ -69,6 +69,8 @@
>                  out.collect(new IntWritable(Math.abs(r.nextInt())), new IntWritable(randomVal));
>              }
>          }
> +        public void finished() {
> +        }
>      }
>      static class RandomGenReducer implements Reducer {
>          public void configure(JobConf job) {
> @@ -81,6 +83,8 @@
>                  out.collect(new UTF8("" + val), new UTF8(""));
>              }
>          }
> +        public void finished() {
> +        }
>      }
>      static class RandomCheckMapper implements Mapper {
>          public void configure(JobConf job) {
> @@ -92,6 +96,8 @@
>  
>              out.collect(new IntWritable(Integer.parseInt(str.toString().trim())), new IntWritable(1));
>          }
> +        public void finished() {
> +        }
>      }
>      static class RandomCheckReducer implements Reducer {
>          public void configure(JobConf job) {
> @@ -106,6 +112,8 @@
>              }
>              out.collect(new IntWritable(keyint), new IntWritable(count));
>          }
> +        public void finished() {
> +        }
>      }
>  
>      int range;
> Index: src/test/org/apache/nutch/fs/TestNutchFileSystem.java
> ===================================================================
> --- src/test/org/apache/nutch/fs/TestNutchFileSystem.java	(revision 374783)
> +++ src/test/org/apache/nutch/fs/TestNutchFileSystem.java	(working copy)
> @@ -155,6 +155,8 @@
>  
>        reporter.setStatus("wrote " + name);
>      }
> +    
> +    public void finished() {}
>    }
>  
>    public static void writeTest(NutchFileSystem fs, boolean fastCheck)
> @@ -247,6 +249,9 @@
>  
>        reporter.setStatus("read " + name);
>      }
> +    
> +    public void finished() {}
> +    
>    }
>  
>    public static void readTest(NutchFileSystem fs, boolean fastCheck)
> @@ -339,6 +344,9 @@
>          in.close();
>        }
>      }
> +    
> +    public void finished() {}
> +    
>    }
>  
>    public static void seekTest(NutchFileSystem fs, boolean fastCheck)
> Index: src/java/org/apache/nutch/indexer/DeleteDuplicates.java
> ===================================================================
> --- src/java/org/apache/nutch/indexer/DeleteDuplicates.java	(revision 374776)
> +++ src/java/org/apache/nutch/indexer/DeleteDuplicates.java	(working copy)
> @@ -225,6 +225,7 @@
>          }
>        }
>      }
> +    public void finished() {}
>    }
>      
>    private NutchFileSystem fs;
> @@ -265,6 +266,8 @@
>        reader.close();
>      }
>    }
> +  
> +  public void finished() {}
>  
>    /** Write nothing. */
>    public RecordWriter getRecordWriter(final NutchFileSystem fs,
> Index: src/java/org/apache/nutch/indexer/Indexer.java
> ===================================================================
> --- src/java/org/apache/nutch/indexer/Indexer.java	(revision 374778)
> +++ src/java/org/apache/nutch/indexer/Indexer.java	(working copy)
> @@ -227,6 +227,8 @@
>  
>      output.collect(key, new ObjectWritable(doc));
>    }
> +  
> +  public void finished() {}
>  
>    public void index(File indexDir, File crawlDb, File linkDb, File[] segments)
>      throws IOException {
> Index: src/java/org/apache/nutch/segment/SegmentReader.java
> ===================================================================
> --- src/java/org/apache/nutch/segment/SegmentReader.java	(revision 374778)
> +++ src/java/org/apache/nutch/segment/SegmentReader.java	(working copy)
> @@ -143,7 +143,9 @@
>      }
>      output.collect(key, new ObjectWritable(dump.toString()));
>    }
> -
> +  
> +  public void finished() {}
> +  
>    public void reader(File segment) throws IOException {
>      LOG.info("Reader: segment: " + segment);
>  
> Index: src/java/org/apache/nutch/mapred/Mapper.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/Mapper.java	(revision 374737)
> +++ src/java/org/apache/nutch/mapred/Mapper.java	(working copy)
> @@ -39,4 +39,9 @@
>    void map(WritableComparable key, Writable value,
>             OutputCollector output, Reporter reporter)
>      throws IOException;
> +
> +  /** Called after the last {@link #map} call on this Mapper object.
> +      Typical implementations do nothing.
> +  */
> +  void finished();
>  }
> Index: src/java/org/apache/nutch/mapred/lib/RegexMapper.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/lib/RegexMapper.java	(revision 374737)
> +++ src/java/org/apache/nutch/mapred/lib/RegexMapper.java	(working copy)
> @@ -53,4 +53,5 @@
>        output.collect(new UTF8(matcher.group(group)), new LongWritable(1));
>      }
>    }
> +  public void finished() {}
>  }
> Index: src/java/org/apache/nutch/mapred/lib/InverseMapper.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/lib/InverseMapper.java	(revision 374737)
> +++ src/java/org/apache/nutch/mapred/lib/InverseMapper.java	(working copy)
> @@ -38,4 +38,6 @@
>      throws IOException {
>      output.collect((WritableComparable)value, key);
>    }
> +
> +  public void finished() {}
>  }
> Index: src/java/org/apache/nutch/mapred/lib/IdentityReducer.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/lib/IdentityReducer.java	(revision 374737)
> +++ src/java/org/apache/nutch/mapred/lib/IdentityReducer.java	(working copy)
> @@ -42,4 +42,5 @@
>      }
>    }
>  
> +  public void finished() {}
>  }
> Index: src/java/org/apache/nutch/mapred/lib/IdentityMapper.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/lib/IdentityMapper.java	(revision 374737)
> +++ src/java/org/apache/nutch/mapred/lib/IdentityMapper.java	(working copy)
> @@ -39,4 +39,5 @@
>      output.collect(key, val);
>    }
>  
> +  public void finished() {}
>  }
> Index: src/java/org/apache/nutch/mapred/lib/LongSumReducer.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/lib/LongSumReducer.java	(revision 374737)
> +++ src/java/org/apache/nutch/mapred/lib/LongSumReducer.java	(working copy)
> @@ -47,4 +47,6 @@
>      // output sum
>      output.collect(key, new LongWritable(sum));
>    }
> +
> +  public void finished() {}
>  }
> Index: src/java/org/apache/nutch/mapred/lib/TokenCountMapper.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/lib/TokenCountMapper.java	(revision 374737)
> +++ src/java/org/apache/nutch/mapred/lib/TokenCountMapper.java	(working copy)
> @@ -50,4 +50,6 @@
>        output.collect(new UTF8(st.nextToken()), new LongWritable(1));
>      }
>    }
> +
> +  public void finished() {}
>  }
> Index: src/java/org/apache/nutch/mapred/ReduceTask.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/ReduceTask.java	(revision 374781)
> +++ src/java/org/apache/nutch/mapred/ReduceTask.java	(working copy)
> @@ -275,6 +275,7 @@
>        }
>  
>      } finally {
> +      reducer.finished();
>        in.close();
>        lfs.delete(new File(sortedFile));           // remove sorted
>        out.close(reporter);
> Index: src/java/org/apache/nutch/mapred/MapTask.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/MapTask.java	(revision 374737)
> +++ src/java/org/apache/nutch/mapred/MapTask.java	(working copy)
> @@ -50,7 +50,7 @@
>    public void write(DataOutput out) throws IOException {
>      super.write(out);
>      split.write(out);
> -    
> +
>    }
>    public void readFields(DataInput in) throws IOException {
>      super.readFields(in);
> @@ -126,6 +126,10 @@
>          }
>  
>        } finally {
> +        if (combining) {
> +          ((CombiningCollector)collector).finished();
> +        }
> +
>          in.close();                               // close input
>        }
>      } finally {
> @@ -147,5 +151,5 @@
>    public NutchConf getConf() {
>      return this.nutchConf;
>    }
> -  
> +
>  }
> Index: src/java/org/apache/nutch/mapred/MapRunner.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/MapRunner.java	(revision 374737)
> +++ src/java/org/apache/nutch/mapred/MapRunner.java	(working copy)
> @@ -38,18 +38,22 @@
>    public void run(RecordReader input, OutputCollector output,
>                    Reporter reporter)
>      throws IOException {
> -    while (true) {
> -      // allocate new key & value instances
> -      WritableComparable key =
> -        (WritableComparable)job.newInstance(inputKeyClass);
> -      Writable value = (Writable)job.newInstance(inputValueClass);
> +    try {
> +      while (true) {
> +        // allocate new key & value instances
> +        WritableComparable key =
> +          (WritableComparable)job.newInstance(inputKeyClass);
> +        Writable value = (Writable)job.newInstance(inputValueClass);
>  
> -      // read next key & value
> -      if (!input.next(key, value))
> -        return;
> +        // read next key & value
> +        if (!input.next(key, value))
> +          return;
>  
> -      // map pair to output
> -      mapper.map(key, value, output, reporter);
> +        // map pair to output
> +        mapper.map(key, value, output, reporter);
> +      }
> +    } finally {
> +        mapper.finished();
>      }
>    }
>  
> Index: src/java/org/apache/nutch/mapred/CombiningCollector.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/CombiningCollector.java	(revision 374780)
> +++ src/java/org/apache/nutch/mapred/CombiningCollector.java	(working copy)
> @@ -78,4 +78,9 @@
>      count = 0;
>    }
>  
> +  public synchronized void finished()
> +  {
> +    combiner.finished();
> +  }
> +
>  }
> Index: src/java/org/apache/nutch/mapred/Reducer.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/Reducer.java	(revision 374737)
> +++ src/java/org/apache/nutch/mapred/Reducer.java	(working copy)
> @@ -38,4 +38,10 @@
>    void reduce(WritableComparable key, Iterator values,
>                OutputCollector output, Reporter reporter)
>      throws IOException;
> +
> +  /** Called after the last {@link #reduce} call on this Reducer object.
> +      Typical implementations do nothing.
> +  */
> +  void finished();
> +
>  }
> Index: src/java/org/apache/nutch/crawl/CrawlDbReader.java
> ===================================================================
> --- src/java/org/apache/nutch/crawl/CrawlDbReader.java	(revision 374737)
> +++ src/java/org/apache/nutch/crawl/CrawlDbReader.java	(working copy)
> @@ -50,9 +50,9 @@
>  
>  /**
>   * Read utility for the CrawlDB.
> - * 
> + *
>   * @author Andrzej Bialecki
> - * 
> + *
>   */
>  public class CrawlDbReader {
>  
> @@ -68,6 +68,7 @@
>        output.collect(new UTF8("retry"), new LongWritable(cd.getRetriesSinceFetch()));
>        output.collect(new UTF8("score"), new LongWritable((long) (cd.getScore() * 1000.0)));
>      }
> +    public void finished() {}
>    }
>  
>    public static class CrawlDbStatReducer implements Reducer {
> @@ -121,6 +122,7 @@
>          output.collect(new UTF8("avg score"), new LongWritable(total / cnt));
>        }
>      }
> +    public void finished() {}
>    }
>  
>    public static class CrawlDbDumpReducer implements Reducer {
> @@ -133,8 +135,11 @@
>  
>      public void configure(JobConf job) {
>      }
> +
> +    public void finished() {
> +    }
>    }
> -  
> +
>    public void processStatJob(String crawlDb, NutchConf config) throws IOException {
>      LOG.info("CrawlDb statistics start: " + crawlDb);
>      File tmpFolder = new File(crawlDb, "stat_tmp" + System.currentTimeMillis());
> @@ -219,7 +224,7 @@
>        System.out.println("not found");
>      }
>    }
> -  
> +
>    public void processDumpJob(String crawlDb, String output, NutchConf config) throws IOException {
>  
>      LOG.info("CrawlDb dump: starting");
> @@ -270,4 +275,5 @@
>      }
>      return;
>    }
> +
>  }
> Index: src/java/org/apache/nutch/crawl/LinkDb.java
> ===================================================================
> --- src/java/org/apache/nutch/crawl/LinkDb.java	(revision 374779)
> +++ src/java/org/apache/nutch/crawl/LinkDb.java	(working copy)
> @@ -118,7 +118,8 @@
>      output.collect(key, result);
>    }
>  
> -
> +  public void finished() {}
> +	
>    public void invert(File linkDb, File segmentsDir) throws IOException {
>      LOG.info("LinkDb: starting");
>      LOG.info("LinkDb: linkdb: " + linkDb);
> Index: src/java/org/apache/nutch/crawl/Injector.java
> ===================================================================
> --- src/java/org/apache/nutch/crawl/Injector.java	(revision 374779)
> +++ src/java/org/apache/nutch/crawl/Injector.java	(working copy)
> @@ -65,6 +65,8 @@
>                                               interval));
>        }
>      }
> +    
> +    public void finished() {}
>    }
>  
>    /** Combine multiple new entries for a url. */
> @@ -76,6 +78,7 @@
>        throws IOException {
>        output.collect(key, (Writable)values.next()); // just collect first value
>      }
> +    public void finished() {}
>    }
>  
>    /** Construct an Injector. */
> Index: src/java/org/apache/nutch/crawl/Generator.java
> ===================================================================
> --- src/java/org/apache/nutch/crawl/Generator.java	(revision 374779)
> +++ src/java/org/apache/nutch/crawl/Generator.java	(working copy)
> @@ -63,6 +63,8 @@
>        output.collect(crawlDatum, key);          // invert for sort by score
>      }
>  
> +    public void finished() {}
> +    
>      /** Partition by host (value). */
>      public int getPartition(WritableComparable key, Writable value,
>                              int numReduceTasks) {
> Index: src/java/org/apache/nutch/crawl/CrawlDbReducer.java
> ===================================================================
> --- src/java/org/apache/nutch/crawl/CrawlDbReducer.java	(revision 374781)
> +++ src/java/org/apache/nutch/crawl/CrawlDbReducer.java	(working copy)
> @@ -115,4 +115,5 @@
>      }
>    }
>  
> +  public void finished() {}
>  }
> Index: src/java/org/apache/nutch/parse/ParseSegment.java
> ===================================================================
> --- src/java/org/apache/nutch/parse/ParseSegment.java	(revision 374776)
> +++ src/java/org/apache/nutch/parse/ParseSegment.java	(working copy)
> @@ -78,6 +78,8 @@
>      throws IOException {
>      output.collect(key, (Writable)values.next()); // collect first value
>    }
> +  
> +  public void finished() {}
>  
>    public void parse(File segment) throws IOException {
>      LOG.info("Parse: starting");

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb  6 18:50:21 2006
Return-Path: 
 <hadoop-dev-return-29-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51770 invoked from network); 6 Feb 2006 18:50:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 18:50:21 -0000
Received: (qmail 32082 invoked by uid 500); 6 Feb 2006 18:50:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 32041 invoked by uid 500); 6 Feb 2006 18:50:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 32021 invoked by uid 99); 6 Feb 2006 18:50:20 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 10:50:18 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 562A8CB
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Feb 2006 19:49:57 +0100 (CET)
Message-ID: <1323915811.1139251797350.JavaMail.jira@ajax.apache.org>
Date: Mon, 6 Feb 2006 19:49:57 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Moved: (HADOOP-18) Crash with multiple temp directories
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-18?page=all ]

Doug Cutting moved NUTCH-170 to HADOOP-18:
------------------------------------------

    Project: Hadoop  (was: Nutch)
        Key: HADOOP-18  (was: NUTCH-170)

> Crash with multiple temp directories
> ------------------------------------
>
>          Key: HADOOP-18
>          URL: http://issues.apache.org/jira/browse/HADOOP-18
>      Project: Hadoop
>         Type: Bug
>     Reporter: Rod Taylor
>     Priority: Critical

>
> A brief read of the code indicated it may be possible to use multiple local directories using something like the below:
>   <property>
>     <name>mapred.local.dir</name>
>     <value>/local,/local1,/local2</value>
>     <description>The local directory where MapReduce stores intermediate
>     data files.
>     </description>
>   </property>
> This failed with the below exception during either the generate or update phase (not entirely sure which).
> java.lang.ArrayIndexOutOfBoundsException
>         at java.util.zip.CRC32.update(CRC32.java:51)
>         at org.apache.nutch.fs.NFSDataInputStream$Checker.read(NFSDataInputStream.java:92)
>         at org.apache.nutch.fs.NFSDataInputStream$PositionCache.read(NFSDataInputStream.java:156)
>         at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
>         at java.io.BufferedInputStream.read1(BufferedInputStream.java:256)
>         at java.io.BufferedInputStream.read(BufferedInputStream.java:313)
>         at java.io.DataInputStream.readFully(DataInputStream.java:176)
>         at org.apache.nutch.io.DataOutputBuffer$Buffer.write(DataOutputBuffer.java:55)
>         at org.apache.nutch.io.DataOutputBuffer.write(DataOutputBuffer.java:89)
>         at org.apache.nutch.io.SequenceFile$Reader.next(SequenceFile.java:378)
>         at org.apache.nutch.io.SequenceFile$Reader.next(SequenceFile.java:301)
>         at org.apache.nutch.io.SequenceFile$Reader.next(SequenceFile.java:323)
>         at org.apache.nutch.mapred.SequenceFileRecordReader.next(SequenceFileRecordReader.java:60)
>         at org.apache.nutch.segment.SegmentReader$InputFormat$1.next(SegmentReader.java:80)
>         at org.apache.nutch.mapred.MapTask$2.next(MapTask.java:106)
>         at org.apache.nutch.mapred.MapRunner.run(MapRunner.java:48)
>         at org.apache.nutch.mapred.MapTask.run(MapTask.java:116)
>         at org.apache.nutch.mapred.TaskTracker$Child.main(TaskTracker.java:604)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb  6 18:50:19 2006
Return-Path: 
 <hadoop-dev-return-27-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51729 invoked from network); 6 Feb 2006 18:50:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 18:50:19 -0000
Received: (qmail 31985 invoked by uid 500); 6 Feb 2006 18:50:19 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 31959 invoked by uid 500); 6 Feb 2006 18:50:18 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31950 invoked by uid 99); 6 Feb 2006 18:50:18 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 10:50:18 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 9972CDF
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Feb 2006 19:49:57 +0100 (CET)
Message-ID: <1002243760.1139251797626.JavaMail.jira@ajax.apache.org>
Date: Mon, 6 Feb 2006 19:49:57 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Moved: (HADOOP-19) Datanode corruption
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-19?page=all ]

Doug Cutting moved NUTCH-106 to HADOOP-19:
------------------------------------------

    Project: Hadoop  (was: Nutch)
        Key: HADOOP-19  (was: NUTCH-106)
    Version:     (was: 0.8-dev)

> Datanode corruption
> -------------------
>
>          Key: HADOOP-19
>          URL: http://issues.apache.org/jira/browse/HADOOP-19
>      Project: Hadoop
>         Type: Bug
>     Reporter: Rod Taylor
>     Priority: Critical

>
> Our admins accidentally started a second nutch datanode pointing to the same directories as one already running (same machine) which in turn caused the entire contents of the datanode to go disappear.
> This happened because the blocking was based on the username (since fixed in our start scripts) and it was started as two different users.
> The ndfs.name.dir and ndfs.data.dir directories were both completely devoid of content, where they had about 150GB not all that much earlier.
> I think the solution is improved interlocking within the data directory itself (file locked with flock or something similar).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb  6 18:53:19 2006
Return-Path: 
 <hadoop-dev-return-30-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52505 invoked from network); 6 Feb 2006 18:53:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 18:53:19 -0000
Received: (qmail 32781 invoked by uid 500); 6 Feb 2006 18:53:19 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 32764 invoked by uid 500); 6 Feb 2006 18:53:19 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 32755 invoked by uid 99); 6 Feb 2006 18:53:19 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 10:53:19 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 50431CB
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Feb 2006 19:52:58 +0100 (CET)
Message-ID: <397272860.1139251978326.JavaMail.jira@ajax.apache.org>
Date: Mon, 6 Feb 2006 19:52:58 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-8) NDFS DataNode advertises localhost as
 it's address
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-8?page=3Dall ]

Doug Cutting updated HADOOP-8:
------------------------------

    Component: dfs

> NDFS DataNode advertises localhost as it's address
> --------------------------------------------------
>
>          Key: HADOOP-8
>          URL: http://issues.apache.org/jira/browse/HADOOP-8
>      Project: Hadoop
>         Type: Bug
>   Components: dfs
>  Environment: Linux
>     Reporter: Peter Sandstr=C3=B6m
>  Attachments: ndfs-datanode-fix.patch
>


--=20
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb  6 18:53:21 2006
Return-Path: 
 <hadoop-dev-return-31-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52521 invoked from network); 6 Feb 2006 18:53:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 18:53:21 -0000
Received: (qmail 32832 invoked by uid 500); 6 Feb 2006 18:53:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 32807 invoked by uid 500); 6 Feb 2006 18:53:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 32798 invoked by uid 99); 6 Feb 2006 18:53:20 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 10:53:20 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 682E2DF
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Feb 2006 19:52:59 +0100 (CET)
Message-ID: <1608063610.1139251979424.JavaMail.jira@ajax.apache.org>
Date: Mon, 6 Feb 2006 19:52:59 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-10) ndfs.replication is not documented
 within the nutch-default.xml configuration file.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-10?page=all ]

Doug Cutting updated HADOOP-10:
-------------------------------

    Component: dfs

> ndfs.replication is not documented within the nutch-default.xml configuration file.
> -----------------------------------------------------------------------------------
>
>          Key: HADOOP-10
>          URL: http://issues.apache.org/jira/browse/HADOOP-10
>      Project: Hadoop
>         Type: Bug
>   Components: dfs
>     Reporter: Rod Taylor
>     Priority: Trivial

>
> ndfs.replication is not documented within the nutch-default.xml configuration file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb  6 18:53:24 2006
Return-Path: 
 <hadoop-dev-return-32-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52553 invoked from network); 6 Feb 2006 18:53:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 18:53:24 -0000
Received: (qmail 32881 invoked by uid 500); 6 Feb 2006 18:53:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 32854 invoked by uid 500); 6 Feb 2006 18:53:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 32843 invoked by uid 99); 6 Feb 2006 18:53:23 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 10:53:21 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 65177E1
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Feb 2006 19:53:00 +0100 (CET)
Message-ID: <877304523.1139251980410.JavaMail.jira@ajax.apache.org>
Date: Mon, 6 Feb 2006 19:53:00 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-19) Datanode corruption
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-19?page=all ]

Doug Cutting updated HADOOP-19:
-------------------------------

    Component: dfs

> Datanode corruption
> -------------------
>
>          Key: HADOOP-19
>          URL: http://issues.apache.org/jira/browse/HADOOP-19
>      Project: Hadoop
>         Type: Bug
>   Components: dfs
>     Reporter: Rod Taylor
>     Priority: Critical

>
> Our admins accidentally started a second nutch datanode pointing to the same directories as one already running (same machine) which in turn caused the entire contents of the datanode to go disappear.
> This happened because the blocking was based on the username (since fixed in our start scripts) and it was started as two different users.
> The ndfs.name.dir and ndfs.data.dir directories were both completely devoid of content, where they had about 150GB not all that much earlier.
> I think the solution is improved interlocking within the data directory itself (file locked with flock or something similar).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb  6 18:55:19 2006
Return-Path: 
 <hadoop-dev-return-33-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 53142 invoked from network); 6 Feb 2006 18:55:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 18:55:19 -0000
Received: (qmail 33555 invoked by uid 500); 6 Feb 2006 18:55:19 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 33538 invoked by uid 500); 6 Feb 2006 18:55:19 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 33529 invoked by uid 99); 6 Feb 2006 18:55:19 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 10:55:19 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 414B6CB
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Feb 2006 19:54:58 +0100 (CET)
Message-ID: <574580994.1139252098264.JavaMail.jira@ajax.apache.org>
Date: Mon, 6 Feb 2006 19:54:58 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-12) InputFormat used in job must be in
 JobTracker classpath (not loaded from job JAR)
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-12?page=all ]

Doug Cutting updated HADOOP-12:
-------------------------------

    Component: mapred

> InputFormat used in job must be in JobTracker classpath (not loaded from job JAR)
> ---------------------------------------------------------------------------------
>
>          Key: HADOOP-12
>          URL: http://issues.apache.org/jira/browse/HADOOP-12
>      Project: Hadoop
>         Type: Bug
>   Components: mapred
>  Environment: ~20 node nutch mapreduce environment, running SVN trunk, on Linux
>     Reporter: Bryan Pendleton
>     Priority: Minor

>
> During development, I've been creating/tweaking custom InputFormat implementations. However, when you try to run a job against a running cluster, you get:
>   Exception in thread "main" java.io.IOException: java.lang.RuntimeException: java.lang.RuntimeException: java.lang.ClassNotFoundException: my.custom.InputFormat
>           at org.apache.nutch.ipc.Client.call(Client.java:294)
>           at org.apache.nutch.ipc.RPC$Invoker.invoke(RPC.java:127)
>           at $Proxy0.submitJob(Unknown Source)
>           at org.apache.nutch.mapred.JobClient.submitJob(JobClient.java:259)
>           at org.apache.nutch.mapred.JobClient.runJob(JobClient.java:288)
>           at com.parc.uir.wikipedia.WikipediaJob.main(WikipediaJob.java:85)
> This error goes away if I restart the TaskTrackers/JobTracker with a classpath which includes the needed code. Other classes (Mapper, Reducer) appear to be available out of the jar file specified in the JobConf, but not the InputFormat. Obviously, it's less than idea to have to restart the JobTracker whenever there's a change to a job-specific class.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb  6 18:55:22 2006
Return-Path: 
 <hadoop-dev-return-34-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 53172 invoked from network); 6 Feb 2006 18:55:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 18:55:22 -0000
Received: (qmail 33634 invoked by uid 500); 6 Feb 2006 18:55:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 33585 invoked by uid 500); 6 Feb 2006 18:55:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 33573 invoked by uid 99); 6 Feb 2006 18:55:21 -0000
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=INFO_TLD
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 10:55:20 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 27A30DF
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Feb 2006 19:54:59 +0100 (CET)
Message-ID: <1988194826.1139252099159.JavaMail.jira@ajax.apache.org>
Date: Mon, 6 Feb 2006 19:54:59 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-20) Mapper, Reducer need an occasion to
 cleanup after the last record is processed.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-20?page=all ]

Doug Cutting updated HADOOP-20:
-------------------------------

    Component: mapred

> Mapper, Reducer need an occasion to cleanup after the last record is processed.
> -------------------------------------------------------------------------------
>
>          Key: HADOOP-20
>          URL: http://issues.apache.org/jira/browse/HADOOP-20
>      Project: Hadoop
>         Type: Improvement
>   Components: mapred
>  Environment: Linux
>     Reporter: Michel Tourn
>  Attachments: mapredfinished.log
>
> Mapper, Reducer need an occasion to do some cleanup after the last record is processed.
> Proposal (patch attached)
> in interface Mapper:
>  add method void finished();
> in interface Reducer:
>  add method void finished();
> finished() methods are called from MapTask, CombiningCollector, ReduceTask.
> ------------
> Known limitation: Fetcher (a multithreaded MapRunnable) does not call finished().
> This is not currently a problem bec. fetcher Map/Reduce modules do not do anything in finished().
> The right way to add finished() support to Fetcher would be to wait for all threads to finish, 
> then do:
>      if (collector instanceof CombiningCollector) ((CombiningCollector)collector).finished();
> ------------
> patch begins: (svn trunk)
> Index: src/test/org/apache/nutch/mapred/MapredLoadTest.java
> ===================================================================
> --- src/test/org/apache/nutch/mapred/MapredLoadTest.java	(revision 374781)
> +++ src/test/org/apache/nutch/mapred/MapredLoadTest.java	(working copy)
> @@ -69,6 +69,8 @@
>                  out.collect(new IntWritable(Math.abs(r.nextInt())), new IntWritable(randomVal));
>              }
>          }
> +        public void finished() {
> +        }
>      }
>      static class RandomGenReducer implements Reducer {
>          public void configure(JobConf job) {
> @@ -81,6 +83,8 @@
>                  out.collect(new UTF8("" + val), new UTF8(""));
>              }
>          }
> +        public void finished() {
> +        }
>      }
>      static class RandomCheckMapper implements Mapper {
>          public void configure(JobConf job) {
> @@ -92,6 +96,8 @@
>  
>              out.collect(new IntWritable(Integer.parseInt(str.toString().trim())), new IntWritable(1));
>          }
> +        public void finished() {
> +        }
>      }
>      static class RandomCheckReducer implements Reducer {
>          public void configure(JobConf job) {
> @@ -106,6 +112,8 @@
>              }
>              out.collect(new IntWritable(keyint), new IntWritable(count));
>          }
> +        public void finished() {
> +        }
>      }
>  
>      int range;
> Index: src/test/org/apache/nutch/fs/TestNutchFileSystem.java
> ===================================================================
> --- src/test/org/apache/nutch/fs/TestNutchFileSystem.java	(revision 374783)
> +++ src/test/org/apache/nutch/fs/TestNutchFileSystem.java	(working copy)
> @@ -155,6 +155,8 @@
>  
>        reporter.setStatus("wrote " + name);
>      }
> +    
> +    public void finished() {}
>    }
>  
>    public static void writeTest(NutchFileSystem fs, boolean fastCheck)
> @@ -247,6 +249,9 @@
>  
>        reporter.setStatus("read " + name);
>      }
> +    
> +    public void finished() {}
> +    
>    }
>  
>    public static void readTest(NutchFileSystem fs, boolean fastCheck)
> @@ -339,6 +344,9 @@
>          in.close();
>        }
>      }
> +    
> +    public void finished() {}
> +    
>    }
>  
>    public static void seekTest(NutchFileSystem fs, boolean fastCheck)
> Index: src/java/org/apache/nutch/indexer/DeleteDuplicates.java
> ===================================================================
> --- src/java/org/apache/nutch/indexer/DeleteDuplicates.java	(revision 374776)
> +++ src/java/org/apache/nutch/indexer/DeleteDuplicates.java	(working copy)
> @@ -225,6 +225,7 @@
>          }
>        }
>      }
> +    public void finished() {}
>    }
>      
>    private NutchFileSystem fs;
> @@ -265,6 +266,8 @@
>        reader.close();
>      }
>    }
> +  
> +  public void finished() {}
>  
>    /** Write nothing. */
>    public RecordWriter getRecordWriter(final NutchFileSystem fs,
> Index: src/java/org/apache/nutch/indexer/Indexer.java
> ===================================================================
> --- src/java/org/apache/nutch/indexer/Indexer.java	(revision 374778)
> +++ src/java/org/apache/nutch/indexer/Indexer.java	(working copy)
> @@ -227,6 +227,8 @@
>  
>      output.collect(key, new ObjectWritable(doc));
>    }
> +  
> +  public void finished() {}
>  
>    public void index(File indexDir, File crawlDb, File linkDb, File[] segments)
>      throws IOException {
> Index: src/java/org/apache/nutch/segment/SegmentReader.java
> ===================================================================
> --- src/java/org/apache/nutch/segment/SegmentReader.java	(revision 374778)
> +++ src/java/org/apache/nutch/segment/SegmentReader.java	(working copy)
> @@ -143,7 +143,9 @@
>      }
>      output.collect(key, new ObjectWritable(dump.toString()));
>    }
> -
> +  
> +  public void finished() {}
> +  
>    public void reader(File segment) throws IOException {
>      LOG.info("Reader: segment: " + segment);
>  
> Index: src/java/org/apache/nutch/mapred/Mapper.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/Mapper.java	(revision 374737)
> +++ src/java/org/apache/nutch/mapred/Mapper.java	(working copy)
> @@ -39,4 +39,9 @@
>    void map(WritableComparable key, Writable value,
>             OutputCollector output, Reporter reporter)
>      throws IOException;
> +
> +  /** Called after the last {@link #map} call on this Mapper object.
> +      Typical implementations do nothing.
> +  */
> +  void finished();
>  }
> Index: src/java/org/apache/nutch/mapred/lib/RegexMapper.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/lib/RegexMapper.java	(revision 374737)
> +++ src/java/org/apache/nutch/mapred/lib/RegexMapper.java	(working copy)
> @@ -53,4 +53,5 @@
>        output.collect(new UTF8(matcher.group(group)), new LongWritable(1));
>      }
>    }
> +  public void finished() {}
>  }
> Index: src/java/org/apache/nutch/mapred/lib/InverseMapper.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/lib/InverseMapper.java	(revision 374737)
> +++ src/java/org/apache/nutch/mapred/lib/InverseMapper.java	(working copy)
> @@ -38,4 +38,6 @@
>      throws IOException {
>      output.collect((WritableComparable)value, key);
>    }
> +
> +  public void finished() {}
>  }
> Index: src/java/org/apache/nutch/mapred/lib/IdentityReducer.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/lib/IdentityReducer.java	(revision 374737)
> +++ src/java/org/apache/nutch/mapred/lib/IdentityReducer.java	(working copy)
> @@ -42,4 +42,5 @@
>      }
>    }
>  
> +  public void finished() {}
>  }
> Index: src/java/org/apache/nutch/mapred/lib/IdentityMapper.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/lib/IdentityMapper.java	(revision 374737)
> +++ src/java/org/apache/nutch/mapred/lib/IdentityMapper.java	(working copy)
> @@ -39,4 +39,5 @@
>      output.collect(key, val);
>    }
>  
> +  public void finished() {}
>  }
> Index: src/java/org/apache/nutch/mapred/lib/LongSumReducer.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/lib/LongSumReducer.java	(revision 374737)
> +++ src/java/org/apache/nutch/mapred/lib/LongSumReducer.java	(working copy)
> @@ -47,4 +47,6 @@
>      // output sum
>      output.collect(key, new LongWritable(sum));
>    }
> +
> +  public void finished() {}
>  }
> Index: src/java/org/apache/nutch/mapred/lib/TokenCountMapper.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/lib/TokenCountMapper.java	(revision 374737)
> +++ src/java/org/apache/nutch/mapred/lib/TokenCountMapper.java	(working copy)
> @@ -50,4 +50,6 @@
>        output.collect(new UTF8(st.nextToken()), new LongWritable(1));
>      }
>    }
> +
> +  public void finished() {}
>  }
> Index: src/java/org/apache/nutch/mapred/ReduceTask.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/ReduceTask.java	(revision 374781)
> +++ src/java/org/apache/nutch/mapred/ReduceTask.java	(working copy)
> @@ -275,6 +275,7 @@
>        }
>  
>      } finally {
> +      reducer.finished();
>        in.close();
>        lfs.delete(new File(sortedFile));           // remove sorted
>        out.close(reporter);
> Index: src/java/org/apache/nutch/mapred/MapTask.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/MapTask.java	(revision 374737)
> +++ src/java/org/apache/nutch/mapred/MapTask.java	(working copy)
> @@ -50,7 +50,7 @@
>    public void write(DataOutput out) throws IOException {
>      super.write(out);
>      split.write(out);
> -    
> +
>    }
>    public void readFields(DataInput in) throws IOException {
>      super.readFields(in);
> @@ -126,6 +126,10 @@
>          }
>  
>        } finally {
> +        if (combining) {
> +          ((CombiningCollector)collector).finished();
> +        }
> +
>          in.close();                               // close input
>        }
>      } finally {
> @@ -147,5 +151,5 @@
>    public NutchConf getConf() {
>      return this.nutchConf;
>    }
> -  
> +
>  }
> Index: src/java/org/apache/nutch/mapred/MapRunner.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/MapRunner.java	(revision 374737)
> +++ src/java/org/apache/nutch/mapred/MapRunner.java	(working copy)
> @@ -38,18 +38,22 @@
>    public void run(RecordReader input, OutputCollector output,
>                    Reporter reporter)
>      throws IOException {
> -    while (true) {
> -      // allocate new key & value instances
> -      WritableComparable key =
> -        (WritableComparable)job.newInstance(inputKeyClass);
> -      Writable value = (Writable)job.newInstance(inputValueClass);
> +    try {
> +      while (true) {
> +        // allocate new key & value instances
> +        WritableComparable key =
> +          (WritableComparable)job.newInstance(inputKeyClass);
> +        Writable value = (Writable)job.newInstance(inputValueClass);
>  
> -      // read next key & value
> -      if (!input.next(key, value))
> -        return;
> +        // read next key & value
> +        if (!input.next(key, value))
> +          return;
>  
> -      // map pair to output
> -      mapper.map(key, value, output, reporter);
> +        // map pair to output
> +        mapper.map(key, value, output, reporter);
> +      }
> +    } finally {
> +        mapper.finished();
>      }
>    }
>  
> Index: src/java/org/apache/nutch/mapred/CombiningCollector.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/CombiningCollector.java	(revision 374780)
> +++ src/java/org/apache/nutch/mapred/CombiningCollector.java	(working copy)
> @@ -78,4 +78,9 @@
>      count = 0;
>    }
>  
> +  public synchronized void finished()
> +  {
> +    combiner.finished();
> +  }
> +
>  }
> Index: src/java/org/apache/nutch/mapred/Reducer.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/Reducer.java	(revision 374737)
> +++ src/java/org/apache/nutch/mapred/Reducer.java	(working copy)
> @@ -38,4 +38,10 @@
>    void reduce(WritableComparable key, Iterator values,
>                OutputCollector output, Reporter reporter)
>      throws IOException;
> +
> +  /** Called after the last {@link #reduce} call on this Reducer object.
> +      Typical implementations do nothing.
> +  */
> +  void finished();
> +
>  }
> Index: src/java/org/apache/nutch/crawl/CrawlDbReader.java
> ===================================================================
> --- src/java/org/apache/nutch/crawl/CrawlDbReader.java	(revision 374737)
> +++ src/java/org/apache/nutch/crawl/CrawlDbReader.java	(working copy)
> @@ -50,9 +50,9 @@
>  
>  /**
>   * Read utility for the CrawlDB.
> - * 
> + *
>   * @author Andrzej Bialecki
> - * 
> + *
>   */
>  public class CrawlDbReader {
>  
> @@ -68,6 +68,7 @@
>        output.collect(new UTF8("retry"), new LongWritable(cd.getRetriesSinceFetch()));
>        output.collect(new UTF8("score"), new LongWritable((long) (cd.getScore() * 1000.0)));
>      }
> +    public void finished() {}
>    }
>  
>    public static class CrawlDbStatReducer implements Reducer {
> @@ -121,6 +122,7 @@
>          output.collect(new UTF8("avg score"), new LongWritable(total / cnt));
>        }
>      }
> +    public void finished() {}
>    }
>  
>    public static class CrawlDbDumpReducer implements Reducer {
> @@ -133,8 +135,11 @@
>  
>      public void configure(JobConf job) {
>      }
> +
> +    public void finished() {
> +    }
>    }
> -  
> +
>    public void processStatJob(String crawlDb, NutchConf config) throws IOException {
>      LOG.info("CrawlDb statistics start: " + crawlDb);
>      File tmpFolder = new File(crawlDb, "stat_tmp" + System.currentTimeMillis());
> @@ -219,7 +224,7 @@
>        System.out.println("not found");
>      }
>    }
> -  
> +
>    public void processDumpJob(String crawlDb, String output, NutchConf config) throws IOException {
>  
>      LOG.info("CrawlDb dump: starting");
> @@ -270,4 +275,5 @@
>      }
>      return;
>    }
> +
>  }
> Index: src/java/org/apache/nutch/crawl/LinkDb.java
> ===================================================================
> --- src/java/org/apache/nutch/crawl/LinkDb.java	(revision 374779)
> +++ src/java/org/apache/nutch/crawl/LinkDb.java	(working copy)
> @@ -118,7 +118,8 @@
>      output.collect(key, result);
>    }
>  
> -
> +  public void finished() {}
> +	
>    public void invert(File linkDb, File segmentsDir) throws IOException {
>      LOG.info("LinkDb: starting");
>      LOG.info("LinkDb: linkdb: " + linkDb);
> Index: src/java/org/apache/nutch/crawl/Injector.java
> ===================================================================
> --- src/java/org/apache/nutch/crawl/Injector.java	(revision 374779)
> +++ src/java/org/apache/nutch/crawl/Injector.java	(working copy)
> @@ -65,6 +65,8 @@
>                                               interval));
>        }
>      }
> +    
> +    public void finished() {}
>    }
>  
>    /** Combine multiple new entries for a url. */
> @@ -76,6 +78,7 @@
>        throws IOException {
>        output.collect(key, (Writable)values.next()); // just collect first value
>      }
> +    public void finished() {}
>    }
>  
>    /** Construct an Injector. */
> Index: src/java/org/apache/nutch/crawl/Generator.java
> ===================================================================
> --- src/java/org/apache/nutch/crawl/Generator.java	(revision 374779)
> +++ src/java/org/apache/nutch/crawl/Generator.java	(working copy)
> @@ -63,6 +63,8 @@
>        output.collect(crawlDatum, key);          // invert for sort by score
>      }
>  
> +    public void finished() {}
> +    
>      /** Partition by host (value). */
>      public int getPartition(WritableComparable key, Writable value,
>                              int numReduceTasks) {
> Index: src/java/org/apache/nutch/crawl/CrawlDbReducer.java
> ===================================================================
> --- src/java/org/apache/nutch/crawl/CrawlDbReducer.java	(revision 374781)
> +++ src/java/org/apache/nutch/crawl/CrawlDbReducer.java	(working copy)
> @@ -115,4 +115,5 @@
>      }
>    }
>  
> +  public void finished() {}
>  }
> Index: src/java/org/apache/nutch/parse/ParseSegment.java
> ===================================================================
> --- src/java/org/apache/nutch/parse/ParseSegment.java	(revision 374776)
> +++ src/java/org/apache/nutch/parse/ParseSegment.java	(working copy)
> @@ -78,6 +78,8 @@
>      throws IOException {
>      output.collect(key, (Writable)values.next()); // collect first value
>    }
> +  
> +  public void finished() {}
>  
>    public void parse(File segment) throws IOException {
>      LOG.info("Parse: starting");

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb  6 18:55:23 2006
Return-Path: 
 <hadoop-dev-return-35-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 53187 invoked from network); 6 Feb 2006 18:55:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 18:55:23 -0000
Received: (qmail 33679 invoked by uid 500); 6 Feb 2006 18:55:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 33604 invoked by uid 500); 6 Feb 2006 18:55:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 33586 invoked by uid 99); 6 Feb 2006 18:55:21 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 10:55:21 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 3339AE1
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Feb 2006 19:55:00 +0100 (CET)
Message-ID: <2099883781.1139252100203.JavaMail.jira@ajax.apache.org>
Date: Mon, 6 Feb 2006 19:55:00 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-18) Crash with multiple temp directories
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-18?page=all ]

Doug Cutting updated HADOOP-18:
-------------------------------

    Component: mapred

> Crash with multiple temp directories
> ------------------------------------
>
>          Key: HADOOP-18
>          URL: http://issues.apache.org/jira/browse/HADOOP-18
>      Project: Hadoop
>         Type: Bug
>   Components: mapred
>     Reporter: Rod Taylor
>     Priority: Critical

>
> A brief read of the code indicated it may be possible to use multiple local directories using something like the below:
>   <property>
>     <name>mapred.local.dir</name>
>     <value>/local,/local1,/local2</value>
>     <description>The local directory where MapReduce stores intermediate
>     data files.
>     </description>
>   </property>
> This failed with the below exception during either the generate or update phase (not entirely sure which).
> java.lang.ArrayIndexOutOfBoundsException
>         at java.util.zip.CRC32.update(CRC32.java:51)
>         at org.apache.nutch.fs.NFSDataInputStream$Checker.read(NFSDataInputStream.java:92)
>         at org.apache.nutch.fs.NFSDataInputStream$PositionCache.read(NFSDataInputStream.java:156)
>         at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
>         at java.io.BufferedInputStream.read1(BufferedInputStream.java:256)
>         at java.io.BufferedInputStream.read(BufferedInputStream.java:313)
>         at java.io.DataInputStream.readFully(DataInputStream.java:176)
>         at org.apache.nutch.io.DataOutputBuffer$Buffer.write(DataOutputBuffer.java:55)
>         at org.apache.nutch.io.DataOutputBuffer.write(DataOutputBuffer.java:89)
>         at org.apache.nutch.io.SequenceFile$Reader.next(SequenceFile.java:378)
>         at org.apache.nutch.io.SequenceFile$Reader.next(SequenceFile.java:301)
>         at org.apache.nutch.io.SequenceFile$Reader.next(SequenceFile.java:323)
>         at org.apache.nutch.mapred.SequenceFileRecordReader.next(SequenceFileRecordReader.java:60)
>         at org.apache.nutch.segment.SegmentReader$InputFormat$1.next(SegmentReader.java:80)
>         at org.apache.nutch.mapred.MapTask$2.next(MapTask.java:106)
>         at org.apache.nutch.mapred.MapRunner.run(MapRunner.java:48)
>         at org.apache.nutch.mapred.MapTask.run(MapTask.java:116)
>         at org.apache.nutch.mapred.TaskTracker$Child.main(TaskTracker.java:604)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb  6 18:55:24 2006
Return-Path: 
 <hadoop-dev-return-36-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 53213 invoked from network); 6 Feb 2006 18:55:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 18:55:24 -0000
Received: (qmail 33708 invoked by uid 500); 6 Feb 2006 18:55:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 33691 invoked by uid 500); 6 Feb 2006 18:55:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 33682 invoked by uid 99); 6 Feb 2006 18:55:24 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 10:55:22 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 18710180
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Feb 2006 19:55:01 +0100 (CET)
Message-ID: <1228723642.1139252101097.JavaMail.jira@ajax.apache.org>
Date: Mon, 6 Feb 2006 19:55:01 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-4) tool to mount dfs on linux
In-Reply-To: <1520733599.1139079363816.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-4?page=all ]

Doug Cutting updated HADOOP-4:
------------------------------

    Component: fs

> tool to mount dfs on linux
> --------------------------
>
>          Key: HADOOP-4
>          URL: http://issues.apache.org/jira/browse/HADOOP-4
>      Project: Hadoop
>         Type: Improvement
>   Components: fs
>  Environment: linux only
>     Reporter: John Xing
>  Attachments: fuse-hadoop-0.1.1.tar.gz
>
> tool to mount dfs on linux

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb  6 19:14:23 2006
Return-Path: 
 <hadoop-dev-return-37-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 62946 invoked from network); 6 Feb 2006 19:14:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 19:14:23 -0000
Received: (qmail 60339 invoked by uid 500); 6 Feb 2006 19:14:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 60301 invoked by uid 500); 6 Feb 2006 19:14:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 60275 invoked by uid 99); 6 Feb 2006 19:14:21 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 11:14:19 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 429CDCB
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Feb 2006 20:13:58 +0100 (CET)
Message-ID: <1903777814.1139253238270.JavaMail.jira@ajax.apache.org>
Date: Mon, 6 Feb 2006 20:13:58 +0100 (CET)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-21) the webapps need to be updated for the
 move from nutch
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

the webapps need to be updated for the move from nutch
------------------------------------------------------

         Key: HADOOP-21
         URL: http://issues.apache.org/jira/browse/HADOOP-21
     Project: Hadoop
        Type: Bug
  Components: mapred  
    Reporter: Owen O'Malley
    Priority: Minor


The webapp files need to be updated so that the reference the new packages. I'll include a patch to fix it.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb  6 19:16:35 2006
Return-Path: 
 <hadoop-dev-return-38-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 64318 invoked from network); 6 Feb 2006 19:16:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 19:16:35 -0000
Received: (qmail 63407 invoked by uid 500); 6 Feb 2006 19:16:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63390 invoked by uid 500); 6 Feb 2006 19:16:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63381 invoked by uid 99); 6 Feb 2006 19:16:35 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 11:16:21 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 1895BE0
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Feb 2006 20:16:00 +0100 (CET)
Message-ID: <2100136673.1139253360098.JavaMail.jira@ajax.apache.org>
Date: Mon, 6 Feb 2006 20:16:00 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-10) ndfs.replication is not documented
 within the nutch-default.xml configuration file.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-10?page=all ]
     
Doug Cutting resolved HADOOP-10:
--------------------------------

    Resolution: Fixed

This has been fixed.  The paramter is now dfs.replication in hadoop-default.xml.

> ndfs.replication is not documented within the nutch-default.xml configuration file.
> -----------------------------------------------------------------------------------
>
>          Key: HADOOP-10
>          URL: http://issues.apache.org/jira/browse/HADOOP-10
>      Project: Hadoop
>         Type: Bug
>   Components: dfs
>     Reporter: Rod Taylor
>     Priority: Trivial

>
> ndfs.replication is not documented within the nutch-default.xml configuration file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb  6 19:20:34 2006
Return-Path: 
 <hadoop-dev-return-39-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67004 invoked from network); 6 Feb 2006 19:20:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 19:20:34 -0000
Received: (qmail 72506 invoked by uid 500); 6 Feb 2006 19:20:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72477 invoked by uid 500); 6 Feb 2006 19:20:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72460 invoked by uid 99); 6 Feb 2006 19:20:24 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 11:20:22 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 06FBBCB
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Feb 2006 20:20:01 +0100 (CET)
Message-ID: <1448768043.1139253601026.JavaMail.jira@ajax.apache.org>
Date: Mon, 6 Feb 2006 20:20:01 +0100 (CET)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-21) the webapps need to be updated for the
 move from nutch
In-Reply-To: <1903777814.1139253238270.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-21?page=all ]

Owen O'Malley updated HADOOP-21:
--------------------------------

    Attachment: webapps-move.patch

> the webapps need to be updated for the move from nutch
> ------------------------------------------------------
>
>          Key: HADOOP-21
>          URL: http://issues.apache.org/jira/browse/HADOOP-21
>      Project: Hadoop
>         Type: Bug
>   Components: mapred
>     Reporter: Owen O'Malley
>     Priority: Minor
>  Attachments: webapps-move.patch
>
> The webapp files need to be updated so that the reference the new packages. I'll include a patch to fix it.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb  6 19:20:45 2006
Return-Path: 
 <hadoop-dev-return-40-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67303 invoked from network); 6 Feb 2006 19:20:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 19:20:45 -0000
Received: (qmail 74277 invoked by uid 500); 6 Feb 2006 19:20:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 74262 invoked by uid 500); 6 Feb 2006 19:20:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 74253 invoked by uid 99); 6 Feb 2006 19:20:45 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 11:20:45 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 647B1182
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Feb 2006 20:20:04 +0100 (CET)
Message-ID: <1014294641.1139253604408.JavaMail.jira@ajax.apache.org>
Date: Mon, 6 Feb 2006 20:20:04 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Closed: (HADOOP-17) tool to mount ndfs on linux
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-17?page=all ]
     
Doug Cutting closed HADOOP-17:
------------------------------

    Resolution: Duplicate

> tool to mount ndfs on linux
> ---------------------------
>
>          Key: HADOOP-17
>          URL: http://issues.apache.org/jira/browse/HADOOP-17
>      Project: Hadoop
>         Type: New Feature
>   Components: fs
>  Environment: linux only
>     Reporter: John Xing
>  Attachments: fuse-hadoop-0.1.0.tar.gz
>
> tool to mount ndfs on linux. It depends on fuse and fuse-j.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb  6 19:22:23 2006
Return-Path: 
 <hadoop-dev-return-41-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68061 invoked from network); 6 Feb 2006 19:22:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 19:22:23 -0000
Received: (qmail 75186 invoked by uid 500); 6 Feb 2006 19:22:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75166 invoked by uid 500); 6 Feb 2006 19:22:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75155 invoked by uid 99); 6 Feb 2006 19:22:22 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 11:22:20 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id D38F8CB
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Feb 2006 20:21:59 +0100 (CET)
Message-ID: <1502358704.1139253719863.JavaMail.jira@ajax.apache.org>
Date: Mon, 6 Feb 2006 20:21:59 +0100 (CET)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-21) the webapps need to be updated for the
 move from nutch
In-Reply-To: <1903777814.1139253238270.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-21?page=all ]

Owen O'Malley updated HADOOP-21:
--------------------------------

    Attachment: webapps-move-2.patch

I forgot to change the title line too. This patch fixes both problems.

> the webapps need to be updated for the move from nutch
> ------------------------------------------------------
>
>          Key: HADOOP-21
>          URL: http://issues.apache.org/jira/browse/HADOOP-21
>      Project: Hadoop
>         Type: Bug
>   Components: mapred
>     Reporter: Owen O'Malley
>     Priority: Minor
>  Attachments: webapps-move-2.patch, webapps-move.patch
>
> The webapp files need to be updated so that the reference the new packages. I'll include a patch to fix it.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb  6 19:30:45 2006
Return-Path: 
 <hadoop-dev-return-42-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 72853 invoked from network); 6 Feb 2006 19:30:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 19:30:45 -0000
Received: (qmail 82339 invoked by uid 500); 6 Feb 2006 19:30:43 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 82314 invoked by uid 500); 6 Feb 2006 19:30:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 82300 invoked by uid 99); 6 Feb 2006 19:30:42 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 11:30:40 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 8495BCB
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Feb 2006 20:30:19 +0100 (CET)
Message-ID: <1924570019.1139254219540.JavaMail.jira@ajax.apache.org>
Date: Mon, 6 Feb 2006 20:30:19 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-5) need commons-logging-api jar file
In-Reply-To: <383609575.1139249112261.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-5?page=all ]
     
Doug Cutting resolved HADOOP-5:
-------------------------------

    Resolution: Fixed

You're right, this is needed to start the jobtracker, which is not tested by current unit tests.  We really need a unit test that uses the jobtracker and tasktracker.  Thanks for catching this, Owen!

> need commons-logging-api jar file
> ---------------------------------
>
>          Key: HADOOP-5
>          URL: http://issues.apache.org/jira/browse/HADOOP-5
>      Project: Hadoop
>         Type: Bug
>     Reporter: Owen O'Malley
>     Priority: Minor

>
> The hadoop lib directory needs a copy of the commons-logging-api jar file from nutch's lib directory.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb  6 19:34:29 2006
Return-Path: 
 <hadoop-dev-return-43-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75448 invoked from network); 6 Feb 2006 19:34:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 19:34:29 -0000
Received: (qmail 88302 invoked by uid 500); 6 Feb 2006 19:34:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 88277 invoked by uid 500); 6 Feb 2006 19:34:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88267 invoked by uid 99); 6 Feb 2006 19:34:28 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 11:34:27 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 13DB9DF
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Feb 2006 20:34:06 +0100 (CET)
Message-ID: <1779983253.1139254446079.JavaMail.jira@ajax.apache.org>
Date: Mon, 6 Feb 2006 20:34:06 +0100 (CET)
From: "Sami Siren (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-22) remove unused imports
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

remove unused imports
---------------------

         Key: HADOOP-22
         URL: http://issues.apache.org/jira/browse/HADOOP-22
     Project: Hadoop
        Type: Bug
    Reporter: Sami Siren
    Priority: Trivial


Following patch will remove unused imports from java source files

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb  6 19:36:20 2006
Return-Path: 
 <hadoop-dev-return-44-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77171 invoked from network); 6 Feb 2006 19:36:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 19:36:20 -0000
Received: (qmail 91217 invoked by uid 500); 6 Feb 2006 19:36:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 91191 invoked by uid 500); 6 Feb 2006 19:36:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 91182 invoked by uid 99); 6 Feb 2006 19:36:20 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 11:36:20 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 7920CCB
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Feb 2006 20:35:59 +0100 (CET)
Message-ID: <1016054829.1139254559493.JavaMail.jira@ajax.apache.org>
Date: Mon, 6 Feb 2006 20:35:59 +0100 (CET)
From: "Sami Siren (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-22) remove unused imports
In-Reply-To: <1779983253.1139254446079.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-22?page=all ]

Sami Siren updated HADOOP-22:
-----------------------------

    Attachment: hadoop-remove-imports.txt

> remove unused imports
> ---------------------
>
>          Key: HADOOP-22
>          URL: http://issues.apache.org/jira/browse/HADOOP-22
>      Project: Hadoop
>         Type: Bug
>     Reporter: Sami Siren
>     Priority: Trivial
>  Attachments: hadoop-remove-imports.txt
>
> Following patch will remove unused imports from java source files

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb  6 19:42:22 2006
Return-Path: 
 <hadoop-dev-return-45-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 80450 invoked from network); 6 Feb 2006 19:42:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 19:42:22 -0000
Received: (qmail 98674 invoked by uid 500); 6 Feb 2006 19:42:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98658 invoked by uid 500); 6 Feb 2006 19:42:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98649 invoked by uid 99); 6 Feb 2006 19:42:21 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 11:42:21 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id A18F1CB
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Feb 2006 20:42:00 +0100 (CET)
Message-ID: <1153328929.1139254920659.JavaMail.jira@ajax.apache.org>
Date: Mon, 6 Feb 2006 20:42:00 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-21) the webapps need to be updated for the
 move from nutch
In-Reply-To: <1903777814.1139253238270.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-21?page=all ]
     
Doug Cutting resolved HADOOP-21:
--------------------------------

    Resolution: Fixed

I applied the patch.  Thanks, again, Owen.

> the webapps need to be updated for the move from nutch
> ------------------------------------------------------
>
>          Key: HADOOP-21
>          URL: http://issues.apache.org/jira/browse/HADOOP-21
>      Project: Hadoop
>         Type: Bug
>   Components: mapred
>     Reporter: Owen O'Malley
>     Priority: Minor
>  Attachments: webapps-move-2.patch, webapps-move.patch
>
> The webapp files need to be updated so that the reference the new packages. I'll include a patch to fix it.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb  6 19:47:18 2006
Return-Path: 
 <hadoop-dev-return-46-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 82005 invoked from network); 6 Feb 2006 19:47:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 19:47:18 -0000
Received: (qmail 3273 invoked by uid 500); 6 Feb 2006 19:47:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3255 invoked by uid 500); 6 Feb 2006 19:47:18 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3246 invoked by uid 99); 6 Feb 2006 19:47:18 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 11:47:18 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 60724CB
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Feb 2006 20:46:57 +0100 (CET)
Message-ID: <311066960.1139255217392.JavaMail.jira@ajax.apache.org>
Date: Mon, 6 Feb 2006 20:46:57 +0100 (CET)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-23) single node cluster gets one reducer
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

single node cluster gets one reducer
------------------------------------

         Key: HADOOP-23
         URL: http://issues.apache.org/jira/browse/HADOOP-23
     Project: Hadoop
        Type: Bug
  Components: mapred  
    Reporter: Owen O'Malley
    Priority: Minor


Running on a single node cluster (it runs a job tracker and a single task tracker), even though my application asks for 7 reduces, it only gets one. I haven't tracked down what is happening yet.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb  6 19:51:21 2006
Return-Path: 
 <hadoop-dev-return-47-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84068 invoked from network); 6 Feb 2006 19:51:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 19:51:21 -0000
Received: (qmail 8252 invoked by uid 500); 6 Feb 2006 19:51:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 8234 invoked by uid 500); 6 Feb 2006 19:51:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 8225 invoked by uid 99); 6 Feb 2006 19:51:20 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 11:51:18 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id C99A7CB
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Feb 2006 20:50:57 +0100 (CET)
Message-ID: <787664364.1139255457823.JavaMail.jira@ajax.apache.org>
Date: Mon, 6 Feb 2006 20:50:57 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-22) remove unused imports
In-Reply-To: <1779983253.1139254446079.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-22?page=all ]
     
Doug Cutting resolved HADOOP-22:
--------------------------------

    Resolution: Fixed

I just applied this.  Thanks, Sami.  Sorry I messed this up the first time...

> remove unused imports
> ---------------------
>
>          Key: HADOOP-22
>          URL: http://issues.apache.org/jira/browse/HADOOP-22
>      Project: Hadoop
>         Type: Bug
>     Reporter: Sami Siren
>     Priority: Trivial
>  Attachments: hadoop-remove-imports.txt
>
> Following patch will remove unused imports from java source files

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb  6 19:53:22 2006
Return-Path: 
 <hadoop-dev-return-48-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84856 invoked from network); 6 Feb 2006 19:53:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 19:53:22 -0000
Received: (qmail 11495 invoked by uid 500); 6 Feb 2006 19:53:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 11480 invoked by uid 500); 6 Feb 2006 19:53:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 11471 invoked by uid 99); 6 Feb 2006 19:53:22 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 11:53:19 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id CFE15DF
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Feb 2006 20:52:58 +0100 (CET)
Message-ID: <168039428.1139255578849.JavaMail.jira@ajax.apache.org>
Date: Mon, 6 Feb 2006 20:52:58 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-23) single node cluster gets one reducer
In-Reply-To: <311066960.1139255217392.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-23?page=comments#action_12365335 ] 

Doug Cutting commented on HADOOP-23:
------------------------------------

Look closely at the order the config files are loaded.  This code has been in flux, and may have bugs.

> single node cluster gets one reducer
> ------------------------------------
>
>          Key: HADOOP-23
>          URL: http://issues.apache.org/jira/browse/HADOOP-23
>      Project: Hadoop
>         Type: Bug
>   Components: mapred
>     Reporter: Owen O'Malley
>     Priority: Minor

>
> Running on a single node cluster (it runs a job tracker and a single task tracker), even though my application asks for 7 reduces, it only gets one. I haven't tracked down what is happening yet.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb  6 20:10:51 2006
Return-Path: 
 <hadoop-dev-return-49-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92046 invoked from network); 6 Feb 2006 20:10:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 20:10:51 -0000
Received: (qmail 28480 invoked by uid 500); 6 Feb 2006 20:10:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28457 invoked by uid 500); 6 Feb 2006 20:10:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28445 invoked by uid 99); 6 Feb 2006 20:10:49 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 12:10:48 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 2C635DF
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Feb 2006 21:10:27 +0100 (CET)
Message-ID: <52371844.1139256627178.JavaMail.jira@ajax.apache.org>
Date: Mon, 6 Feb 2006 21:10:27 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-24) make Configuration an interface
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

make Configuration an interface
-------------------------------

         Key: HADOOP-24
         URL: http://issues.apache.org/jira/browse/HADOOP-24
     Project: Hadoop
        Type: Improvement
  Components: conf  
    Reporter: Doug Cutting


The Configuration class should become an interface, e.g.:

public interface Configuration {
  String get(String nam);
  String set(String name, String value);

  int getInt(String name);
  void setInt(String name, int value);
  float getFloat(String name);
  void setFloat(String name, float value);
  //... other utility methods based on get(String) and set(String,String) ...
}

An abstract class named ConfigurationBase should be implemented as follows:

public abstract class ConfigurationBase implements Configuration {
  abstract public String get(String nam);
  abstract public String set(String name, String value);

  public  int getInt(String name) { ... implementation in terms of get(String) ... }
  public void setInt(String name, int value) {... implementation in terms of set(String, String) ...}
  public float getFloat(String name)  { ... implementation in terms of get(String) ... }
  public void setFloat(String name, float value)  {... implementation in terms of set(String, String) ...}
  //... other utility methods based on get(String) and set(String,String) ...
}

A concrete, default implementation will be provided as follows:

public class ConfigurationImpl implements Writable extends ConfigurationBase {
  private Properties properties;

  // implement abstract methods from ConfigurationBase
  public String get(String name) { ... implemented in terms of props ...}
  public String set(String name, String value) { .. implemented in terms of props ... }

  // Writable methods
  public write(DataOutputStream out);
  public readFields(DataInputStream in);

  // permit chaining of configurations
  public Configuration getDefaults();
  public void setDefaults(Configuration defaults);
}

Only code which creates configurations should need to be updated, so this shouldn't be a huge change.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb  6 22:52:24 2006
Return-Path: 
 <hadoop-dev-return-50-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 65622 invoked from network); 6 Feb 2006 22:52:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 22:52:24 -0000
Received: (qmail 68301 invoked by uid 500); 6 Feb 2006 22:52:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68238 invoked by uid 500); 6 Feb 2006 22:52:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68200 invoked by uid 99); 6 Feb 2006 22:52:20 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 14:52:20 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 9A6C6184
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Feb 2006 23:51:59 +0100 (CET)
Message-ID: <1688832756.1139266319630.JavaMail.jira@ajax.apache.org>
Date: Mon, 6 Feb 2006 23:51:59 +0100 (CET)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-23) single node cluster gets one reducer
In-Reply-To: <311066960.1139255217392.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-23?page=comments#action_12365359 ] 

Owen O'Malley commented on HADOOP-23:
-------------------------------------

Ok, I found the problem and it was a config file ordering problem.

The problem is that the job's config file is loaded as a default resource and the site config file is a final resource and I had set the number of reduces to one in the site file, because on a single node cluster that seemed like a reasonable default.

Obviously, removing the default in the site file is necessary.

I realize now that is why you created the separate mapred-default.xml. It doesn't feel right to have a config file that is specific for map/reduce, but I think there should be some kind of default config file that the user can override in the job but that is editted by the site.

Things that probably belong there:
  fs.default.name
  mapred.job.tracker
  mapred.map.tasks
  mapred.reduce.tasks

> single node cluster gets one reducer
> ------------------------------------
>
>          Key: HADOOP-23
>          URL: http://issues.apache.org/jira/browse/HADOOP-23
>      Project: Hadoop
>         Type: Bug
>   Components: mapred
>     Reporter: Owen O'Malley
>     Priority: Minor

>
> Running on a single node cluster (it runs a job tracker and a single task tracker), even though my application asks for 7 reduces, it only gets one. I haven't tracked down what is happening yet.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb  6 23:17:23 2006
Return-Path: 
 <hadoop-dev-return-51-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 74023 invoked from network); 6 Feb 2006 23:17:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 23:17:23 -0000
Received: (qmail 98380 invoked by uid 500); 6 Feb 2006 23:17:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98361 invoked by uid 500); 6 Feb 2006 23:17:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98352 invoked by uid 99); 6 Feb 2006 23:17:20 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 15:17:18 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 51FDDCB
	for <hadoop-dev@lucene.apache.org>; Tue,  7 Feb 2006 00:16:57 +0100 (CET)
Message-ID: <187621972.1139267817333.JavaMail.jira@ajax.apache.org>
Date: Tue, 7 Feb 2006 00:16:57 +0100 (CET)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-25) a new map/reduce example and moving the
 examples from src/java to src/examples
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

a new map/reduce example and moving the examples from src/java to src/examples
------------------------------------------------------------------------------

         Key: HADOOP-25
         URL: http://issues.apache.org/jira/browse/HADOOP-25
     Project: Hadoop
        Type: Improvement
  Components: mapred  
    Reporter: Owen O'Malley
    Priority: Minor


The new example is the word count example from Google's paper. I moved the examples into a separate jar file to demonstrate how to run stand-alone application code.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb  6 23:24:33 2006
Return-Path: 
 <hadoop-dev-return-52-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75948 invoked from network); 6 Feb 2006 23:24:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 23:24:33 -0000
Received: (qmail 1778 invoked by uid 500); 6 Feb 2006 23:24:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 1748 invoked by uid 500); 6 Feb 2006 23:24:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 1738 invoked by uid 99); 6 Feb 2006 23:24:23 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 15:24:20 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 9A225DF
	for <hadoop-dev@lucene.apache.org>; Tue,  7 Feb 2006 00:23:59 +0100 (CET)
Message-ID: <1063269080.1139268239628.JavaMail.jira@ajax.apache.org>
Date: Tue, 7 Feb 2006 00:23:59 +0100 (CET)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-25) a new map/reduce example and moving the
 examples from src/java to src/examples
In-Reply-To: <187621972.1139267817333.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-25?page=all ]

Owen O'Malley updated HADOOP-25:
--------------------------------

    Attachment: examples.patch

> a new map/reduce example and moving the examples from src/java to src/examples
> ------------------------------------------------------------------------------
>
>          Key: HADOOP-25
>          URL: http://issues.apache.org/jira/browse/HADOOP-25
>      Project: Hadoop
>         Type: Improvement
>   Components: mapred
>     Reporter: Owen O'Malley
>     Priority: Minor
>  Attachments: examples.patch
>
> The new example is the word count example from Google's paper. I moved the examples into a separate jar file to demonstrate how to run stand-alone application code.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb  6 23:28:25 2006
Return-Path: 
 <hadoop-dev-return-53-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77749 invoked from network); 6 Feb 2006 23:28:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 23:28:25 -0000
Received: (qmail 14427 invoked by uid 500); 6 Feb 2006 23:28:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14391 invoked by uid 500); 6 Feb 2006 23:28:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 14366 invoked by uid 99); 6 Feb 2006 23:28:20 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 15:28:18 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id D12E8CB
	for <hadoop-dev@lucene.apache.org>; Tue,  7 Feb 2006 00:27:57 +0100 (CET)
Message-ID: <1117083149.1139268477854.JavaMail.jira@ajax.apache.org>
Date: Tue, 7 Feb 2006 00:27:57 +0100 (CET)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-25) a new map/reduce example and moving
 the examples from src/java to src/examples
In-Reply-To: <187621972.1139267817333.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-25?page=comments#action_12365363 ] 

Owen O'Malley commented on HADOOP-25:
-------------------------------------

In the patch, it looks like I just deleted Grep instead of moving it to src/examples/.../Grep.java. Please make sure it doesn't disappear.

> a new map/reduce example and moving the examples from src/java to src/examples
> ------------------------------------------------------------------------------
>
>          Key: HADOOP-25
>          URL: http://issues.apache.org/jira/browse/HADOOP-25
>      Project: Hadoop
>         Type: Improvement
>   Components: mapred
>     Reporter: Owen O'Malley
>     Priority: Minor
>  Attachments: examples.patch
>
> The new example is the word count example from Google's paper. I moved the examples into a separate jar file to demonstrate how to run stand-alone application code.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Feb  7 00:03:23 2006
Return-Path: 
 <hadoop-dev-return-54-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 89841 invoked from network); 7 Feb 2006 00:03:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Feb 2006 00:03:23 -0000
Received: (qmail 60253 invoked by uid 500); 7 Feb 2006 00:03:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 60239 invoked by uid 500); 7 Feb 2006 00:03:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 60230 invoked by uid 99); 7 Feb 2006 00:03:21 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 16:03:20 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id EB5CDCB
	for <hadoop-dev@lucene.apache.org>; Tue,  7 Feb 2006 01:02:58 +0100 (CET)
Message-ID: <70297703.1139270578961.JavaMail.jira@ajax.apache.org>
Date: Tue, 7 Feb 2006 01:02:58 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-25) a new map/reduce example and moving
 the examples from src/java to src/examples
In-Reply-To: <187621972.1139267817333.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-25?page=comments#action_12365365 ] 

Doug Cutting commented on HADOOP-25:
------------------------------------

A few comments:

I prefer 'ant compile' to do the minimum required for development, so it shouldn't build examples.  Similarly, I prefer 'ant jar' to build only the primary jar.  Examples, test code, javadoc, etc. should be out of the compile-debug loop.

This should probably go in org.apache.hadoop.examples rather than org.apache.hadoop.mapred.demo, no?

The mapper is missing a javadoc comment.

The usage string in the javadoc should probably instead propose something like: bin/hadoop org.apache.hadoop.examples.WordCount, and we should make sure that the examples jar goes on the classpath.

I also wonder whether we should encourage folks to explicitly set the number of map and reduce tasks for each job.  I prefer to think of this as normally a site configuration and/or automatic process.

Finally, since I'm already nitpicking, doesn't the 'try' block in your main() do the same thing as just permitting main() to throw IOException?  The JVM prints a stack trace, no?


> a new map/reduce example and moving the examples from src/java to src/examples
> ------------------------------------------------------------------------------
>
>          Key: HADOOP-25
>          URL: http://issues.apache.org/jira/browse/HADOOP-25
>      Project: Hadoop
>         Type: Improvement
>   Components: mapred
>     Reporter: Owen O'Malley
>     Priority: Minor
>  Attachments: examples.patch
>
> The new example is the word count example from Google's paper. I moved the examples into a separate jar file to demonstrate how to run stand-alone application code.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Feb  7 08:14:03 2006
Return-Path: 
 <hadoop-dev-return-55-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 73552 invoked from network); 7 Feb 2006 08:14:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Feb 2006 08:14:03 -0000
Received: (qmail 67071 invoked by uid 500); 7 Feb 2006 08:14:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 67045 invoked by uid 500); 7 Feb 2006 08:14:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 67036 invoked by uid 99); 7 Feb 2006 08:14:02 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Feb 2006 00:14:02 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id BBE2CDF
	for <hadoop-dev@lucene.apache.org>; Tue,  7 Feb 2006 08:59:58 +0100 (CET)
Message-ID: <2099790062.1139299198767.JavaMail.jira@ajax.apache.org>
Date: Tue, 7 Feb 2006 08:59:58 +0100 (CET)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-25) a new map/reduce example and moving
 the examples from src/java to src/examples
In-Reply-To: <187621972.1139267817333.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-25?page=comments#action_12365402 ] 

Owen O'Malley commented on HADOOP-25:
-------------------------------------

Ok, how about if I add a target for "examples" that builds the examples tar ball. Although compiling the examples is really fast and if they are compiled by default, there is one less thing for the new user tutorial to explain.

The new package name makes sense.

I guess we can use the hadoop script to set up the classpath, but the users are going to need to figure out the classpath when they write their own applications. I guess we could go one step further and modify the script to take a jar and run the "main" class of the jar. So it would look like:
% bin/hadoop run my-app.jar [args...]
For the example jar, we could use a driver that tested the next string for the class to run, so it would look like:
% bin/hadoop run build/hadoop-examples.jar (wordcount|grep|...) [args...]
Thoughts? 

I think that having the application set the number of maps and reduces is better than having it defined by the cluster. Certainly the number of reduces should be set by the user and/or application rather than the cluster since it controls the output fragmentation. But even the optimum number of map instances depends a lot on how resource hungry the map function is.

And finally, you are right that letting main throw out the exception is equivalent, but I bet the Java language spec doesn't require that the JVM print the exception that was thrown out of main. I'll change it. (Too much C++ coding where exceptions don't have stacks associated with them by the runtime system.)

> a new map/reduce example and moving the examples from src/java to src/examples
> ------------------------------------------------------------------------------
>
>          Key: HADOOP-25
>          URL: http://issues.apache.org/jira/browse/HADOOP-25
>      Project: Hadoop
>         Type: Improvement
>   Components: mapred
>     Reporter: Owen O'Malley
>     Priority: Minor
>  Attachments: examples.patch
>
> The new example is the word count example from Google's paper. I moved the examples into a separate jar file to demonstrate how to run stand-alone application code.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Feb  7 17:21:25 2006
Return-Path: 
 <hadoop-dev-return-56-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67218 invoked from network); 7 Feb 2006 17:21:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Feb 2006 17:21:25 -0000
Received: (qmail 57053 invoked by uid 500); 7 Feb 2006 17:21:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 57034 invoked by uid 500); 7 Feb 2006 17:21:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 57025 invoked by uid 99); 7 Feb 2006 17:21:21 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Feb 2006 09:21:21 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 05255CB
	for <hadoop-dev@lucene.apache.org>; Tue,  7 Feb 2006 18:21:00 +0100 (CET)
Message-ID: <1857935748.1139332860018.JavaMail.jira@ajax.apache.org>
Date: Tue, 7 Feb 2006 18:21:00 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-25) a new map/reduce example and moving
 the examples from src/java to src/examples
In-Reply-To: <187621972.1139267817333.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-25?page=comments#action_12365449 ] 

Doug Cutting commented on HADOOP-25:
------------------------------------

I don't feel that strongly in particular about "ant compile" compiling the examples.  It's more the principle of keeping that command, the default, minimal.  When the next person comes along and adds something optional that compiles to build.xml I don't want them to also add it to "ant compile".

On the other hand, "ant test" should be maximal, compiling and testing as much as possible.  My rule is that "ant clean test" should be run before every commit.

I like the idea of making bin/hadoop easily extensible with something like 'bin/hadoop run build/hadoop-examples.jar'.  We could by convention create executable jars whose default main() listed the commands that the jar supports.  We could even change hadoop.jar to be like this, moving the command selection logic out of the shell script and into a Java class.  +1

I really think it would be nice if for common MapReduce operations (e.g., sorting, inverting, etc.) on a well configured cluster one does not have to specify number of map tasks or reduce tasks.  That way one can run something on one cluster with 20 single-processor machines, and then turn and run it on another with 200 dual-processor machines with the system doing a reasonable job.  One should also be able to fine-tune things for a particular cluster if one likes, but that should be optional.  There are cases where the precise number of outputs is critical, but there are (in my experience) many more where the precise number of outputs does not matter.

One way to sidestep this might be to add a standard  '-D' option to bin/hadoop that permits one to specify any configuration option.  That way one could, e.g., always easily set the number of map or reduce tasks for each job, but also not be forced to.

And you're right: a JVM probably isn't required to print that stack, but I'm strongly in favor of things that make code smaller (easier to read, easier to maintain), especially example code.

> a new map/reduce example and moving the examples from src/java to src/examples
> ------------------------------------------------------------------------------
>
>          Key: HADOOP-25
>          URL: http://issues.apache.org/jira/browse/HADOOP-25
>      Project: Hadoop
>         Type: Improvement
>   Components: mapred
>     Reporter: Owen O'Malley
>     Priority: Minor
>  Attachments: examples.patch
>
> The new example is the word count example from Google's paper. I moved the examples into a separate jar file to demonstrate how to run stand-alone application code.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Feb  7 18:06:22 2006
Return-Path: 
 <hadoop-dev-return-57-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92400 invoked from network); 7 Feb 2006 18:06:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Feb 2006 18:06:22 -0000
Received: (qmail 42071 invoked by uid 500); 7 Feb 2006 18:06:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 42054 invoked by uid 500); 7 Feb 2006 18:06:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 42045 invoked by uid 99); 7 Feb 2006 18:06:21 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Feb 2006 10:06:19 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 96CFEC9
	for <hadoop-dev@lucene.apache.org>; Tue,  7 Feb 2006 19:05:57 +0100 (CET)
Message-ID: <1437738270.1139335557543.JavaMail.jira@ajax.apache.org>
Date: Tue, 7 Feb 2006 19:05:57 +0100 (CET)
From: "Mike Cafarella (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-26) DFS node choice doesn't take available
 space into account effectively
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

DFS node choice doesn't take available space into account effectively
---------------------------------------------------------------------

         Key: HADOOP-26
         URL: http://issues.apache.org/jira/browse/HADOOP-26
     Project: Hadoop
        Type: Bug
  Components: dfs  
    Reporter: Mike Cafarella
 Assigned to: Mike Cafarella 



  We used to have node-allocation be sensitive to available disk space.  It turned out that
this was a little accident-prone and hard to debug on then-available machines, so I removed it.

  DFS is mature enough now that this needs to come back and work properly.  A node with less
than X bytes should never accept a new block for allocation.


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Feb  7 18:08:26 2006
Return-Path: 
 <hadoop-dev-return-58-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93584 invoked from network); 7 Feb 2006 18:08:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Feb 2006 18:08:26 -0000
Received: (qmail 44356 invoked by uid 500); 7 Feb 2006 18:08:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 44325 invoked by uid 500); 7 Feb 2006 18:08:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 44315 invoked by uid 99); 7 Feb 2006 18:08:23 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Feb 2006 10:08:21 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 58486DE
	for <hadoop-dev@lucene.apache.org>; Tue,  7 Feb 2006 19:08:00 +0100 (CET)
Message-ID: <1424617142.1139335680270.JavaMail.jira@ajax.apache.org>
Date: Tue, 7 Feb 2006 19:08:00 +0100 (CET)
From: "Mike Cafarella (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-27) MapRed tries to allocate tasks to nodes
 that have no available disk space
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

MapRed tries to allocate tasks to nodes that have no available disk space
-------------------------------------------------------------------------

         Key: HADOOP-27
         URL: http://issues.apache.org/jira/browse/HADOOP-27
     Project: Hadoop
        Type: Bug
  Components: mapred  
    Reporter: Mike Cafarella



  What it says above.  MapRed TaskTrackers should not offer task service if the local disk
space is too constrained.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Feb  7 18:16:47 2006
Return-Path: 
 <hadoop-dev-return-59-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 98351 invoked from network); 7 Feb 2006 18:16:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Feb 2006 18:16:47 -0000
Received: (qmail 60201 invoked by uid 500); 7 Feb 2006 18:16:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 60170 invoked by uid 500); 7 Feb 2006 18:16:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 60160 invoked by uid 99); 7 Feb 2006 18:16:46 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Feb 2006 10:16:46 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 12AFEDE
	for <hadoop-dev@lucene.apache.org>; Tue,  7 Feb 2006 19:16:25 +0100 (CET)
Message-ID: <403688257.1139336185073.JavaMail.jira@ajax.apache.org>
Date: Tue, 7 Feb 2006 19:16:25 +0100 (CET)
From: "Mike Cafarella (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-26) DFS node choice doesn't take
 available space into account effectively
In-Reply-To: <1437738270.1139335557543.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-26?page=comments#action_12365457 ] 

Mike Cafarella commented on HADOOP-26:
--------------------------------------


  OK, the above comment is a little misleading.

  We used to have a difference space-management system in place, which would set
certain nodes off-limits if they didn't have enough space.  Now we choose nodes probabilistically,
with more weight given to nodes with more space.

  That's probably a little too cute than is necessary.  We should just have hard limits on how
much a given node will take before it complains and never receives further node allocations.

> DFS node choice doesn't take available space into account effectively
> ---------------------------------------------------------------------
>
>          Key: HADOOP-26
>          URL: http://issues.apache.org/jira/browse/HADOOP-26
>      Project: Hadoop
>         Type: Bug
>   Components: dfs
>     Reporter: Mike Cafarella
>     Assignee: Mike Cafarella

>
>   We used to have node-allocation be sensitive to available disk space.  It turned out that
> this was a little accident-prone and hard to debug on then-available machines, so I removed it.
>   DFS is mature enough now that this needs to come back and work properly.  A node with less
> than X bytes should never accept a new block for allocation.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Feb  8 00:45:23 2006
Return-Path: 
 <hadoop-dev-return-60-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 24619 invoked from network); 8 Feb 2006 00:45:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Feb 2006 00:45:23 -0000
Received: (qmail 61112 invoked by uid 500); 8 Feb 2006 00:45:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 61086 invoked by uid 500); 8 Feb 2006 00:45:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 61077 invoked by uid 99); 8 Feb 2006 00:45:22 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Feb 2006 16:45:22 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 76CDFE0
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Feb 2006 01:45:01 +0100 (CET)
Message-ID: <1939990814.1139359501484.JavaMail.jira@ajax.apache.org>
Date: Wed, 8 Feb 2006 01:45:01 +0100 (CET)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-25) a new map/reduce example and moving the
 examples from src/java to src/examples
In-Reply-To: <187621972.1139267817333.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-25?page=all ]

Owen O'Malley updated HADOOP-25:
--------------------------------

    Attachment: examples-2.patch

Ok, here is a new patch.

I added the generic "jar" option to bin/hadoop. 
To get it to work right, I couldn't use the -jar option to java because it ignores the -cp option, so I implemented a utility function that looks in a jar file to find the Main-Class attribute. (org.apache.hadoop.util.PrintJarMainClass)

I moved the examples to org.apache.hadoop.examples.

I created a example driver that you can give either 'wordcount' or 'grep' to run the appropriate class and made it the Main-Class of the example jar file.

I made the map and reduce arguments optional to WordCount. (I thought about using jakarta-common-cli, but it just cluttered up the example.)

I changed the Map class to MapClass so that it didn't conflict with java.utils.Map and put in a javadoc.

I pulled the examples out of the compile and jar targets and added it to the test target.

> a new map/reduce example and moving the examples from src/java to src/examples
> ------------------------------------------------------------------------------
>
>          Key: HADOOP-25
>          URL: http://issues.apache.org/jira/browse/HADOOP-25
>      Project: Hadoop
>         Type: Improvement
>   Components: mapred
>     Reporter: Owen O'Malley
>     Priority: Minor
>  Attachments: examples-2.patch, examples.patch
>
> The new example is the word count example from Google's paper. I moved the examples into a separate jar file to demonstrate how to run stand-alone application code.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Feb  8 17:33:29 2006
Return-Path: 
 <hadoop-dev-return-61-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 4348 invoked from network); 8 Feb 2006 17:33:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Feb 2006 17:33:29 -0000
Received: (qmail 79180 invoked by uid 500); 8 Feb 2006 17:32:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 78772 invoked by uid 500); 8 Feb 2006 17:32:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 78757 invoked by uid 99); 8 Feb 2006 17:32:50 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 09:32:50 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 7ECCDE0
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Feb 2006 18:32:29 +0100 (CET)
Message-ID: <301742956.1139419949517.JavaMail.jira@ajax.apache.org>
Date: Wed, 8 Feb 2006 18:32:29 +0100 (CET)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-25) a new map/reduce example and moving the
 examples from src/java to src/examples
In-Reply-To: <187621972.1139267817333.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-25?page=all ]

Owen O'Malley updated HADOOP-25:
--------------------------------

    Attachment: examples-3.patch

I realized that I should probably put the example jar file into the distribution. 

I also remove an incorrect javadoc attribute @date. (Why doesn't javadoc have a @date?)

> a new map/reduce example and moving the examples from src/java to src/examples
> ------------------------------------------------------------------------------
>
>          Key: HADOOP-25
>          URL: http://issues.apache.org/jira/browse/HADOOP-25
>      Project: Hadoop
>         Type: Improvement
>   Components: mapred
>     Reporter: Owen O'Malley
>     Priority: Minor
>  Attachments: examples-2.patch, examples-3.patch, examples.patch
>
> The new example is the word count example from Google's paper. I moved the examples into a separate jar file to demonstrate how to run stand-alone application code.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Feb  8 17:43:38 2006
Return-Path: 
 <hadoop-dev-return-62-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9923 invoked from network); 8 Feb 2006 17:43:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Feb 2006 17:43:38 -0000
Received: (qmail 98067 invoked by uid 500); 8 Feb 2006 17:43:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97992 invoked by uid 500); 8 Feb 2006 17:43:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97903 invoked by uid 99); 8 Feb 2006 17:43:35 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 09:43:33 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 06C96E0
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Feb 2006 18:43:12 +0100 (CET)
Message-ID: <2105821548.1139420592025.JavaMail.jira@ajax.apache.org>
Date: Wed, 8 Feb 2006 18:43:12 +0100 (CET)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-28) webapps broken
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

webapps broken
--------------

         Key: HADOOP-28
         URL: http://issues.apache.org/jira/browse/HADOOP-28
     Project: Hadoop
        Type: Bug
  Components: mapred  
    Reporter: Owen O'Malley


Changing the classes to private broke the webapps. 

The required public classes are:
org.apache.hadoop.mapred.JobInProgress
org.apache.hadoop.mapred.JobProfile
org.apache.hadoop.mapred.JobStatus
org.apache.hadoop.mapred.TaskTrackerStatus

To fix, we need one of:
  1. The classes need to be made public again
  2. The functionality needs to be made available through the classes that are public
  3. The webapps need to move into the mapred package.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Feb  8 18:03:23 2006
Return-Path: 
 <hadoop-dev-return-63-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20069 invoked from network); 8 Feb 2006 18:03:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Feb 2006 18:03:23 -0000
Received: (qmail 35734 invoked by uid 500); 8 Feb 2006 18:03:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 35713 invoked by uid 500); 8 Feb 2006 18:03:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 35704 invoked by uid 99); 8 Feb 2006 18:03:21 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 10:03:18 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id ECAB1CB
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Feb 2006 19:02:57 +0100 (CET)
Message-ID: <450028288.1139421777967.JavaMail.jira@ajax.apache.org>
Date: Wed, 8 Feb 2006 19:02:57 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-28) webapps broken
In-Reply-To: <2105821548.1139420592025.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-28?page=comments#action_12365602 ] 

Doug Cutting commented on HADOOP-28:
------------------------------------

Ugh.  I like (3).  We should really try to limit public classes to the user API we intend to support long-term.  The only way I can see to achieve this is to compile the jsp's to servlets offline using Ant's jspc task, where you can specify a package.

> webapps broken
> --------------
>
>          Key: HADOOP-28
>          URL: http://issues.apache.org/jira/browse/HADOOP-28
>      Project: Hadoop
>         Type: Bug
>   Components: mapred
>     Reporter: Owen O'Malley

>
> Changing the classes to private broke the webapps. 
> The required public classes are:
> org.apache.hadoop.mapred.JobInProgress
> org.apache.hadoop.mapred.JobProfile
> org.apache.hadoop.mapred.JobStatus
> org.apache.hadoop.mapred.TaskTrackerStatus
> To fix, we need one of:
>   1. The classes need to be made public again
>   2. The functionality needs to be made available through the classes that are public
>   3. The webapps need to move into the mapred package.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Feb  8 18:24:56 2006
Return-Path: 
 <hadoop-dev-return-64-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33519 invoked from network); 8 Feb 2006 18:24:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Feb 2006 18:24:56 -0000
Received: (qmail 99357 invoked by uid 500); 8 Feb 2006 18:24:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 99325 invoked by uid 500); 8 Feb 2006 18:24:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 99314 invoked by uid 99); 8 Feb 2006 18:24:53 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 10:24:53 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 50E19CB
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Feb 2006 19:24:32 +0100 (CET)
Message-ID: <1577051867.1139423072329.JavaMail.jira@ajax.apache.org>
Date: Wed, 8 Feb 2006 19:24:32 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-28) webapps broken
In-Reply-To: <2105821548.1139420592025.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-28?page=all ]

Doug Cutting updated HADOOP-28:
-------------------------------

    Attachment: jspc.patch

Here's something that will compile the jsp pages as servlets.  More changes are required to configure jetty to use them, but this is a proof of concept.

> webapps broken
> --------------
>
>          Key: HADOOP-28
>          URL: http://issues.apache.org/jira/browse/HADOOP-28
>      Project: Hadoop
>         Type: Bug
>   Components: mapred
>     Reporter: Owen O'Malley
>  Attachments: jspc.patch
>
> Changing the classes to private broke the webapps. 
> The required public classes are:
> org.apache.hadoop.mapred.JobInProgress
> org.apache.hadoop.mapred.JobProfile
> org.apache.hadoop.mapred.JobStatus
> org.apache.hadoop.mapred.TaskTrackerStatus
> To fix, we need one of:
>   1. The classes need to be made public again
>   2. The functionality needs to be made available through the classes that are public
>   3. The webapps need to move into the mapred package.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Feb  8 18:48:43 2006
Return-Path: 
 <hadoop-dev-return-65-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 45869 invoked from network); 8 Feb 2006 18:48:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Feb 2006 18:48:43 -0000
Received: (qmail 41466 invoked by uid 500); 8 Feb 2006 18:48:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 41448 invoked by uid 500); 8 Feb 2006 18:48:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 41439 invoked by uid 99); 8 Feb 2006 18:48:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 10:48:41 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.122.60.61] (HELO mslinux.media-style.com) (212.122.60.61)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 10:48:40 -0800
Received: from localhost (localhost [127.0.0.1])
	by mslinux.media-style.com (Postfix) with ESMTP id 6230D144469
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Feb 2006 19:45:10 +0100 (CET)
Received: from mslinux.media-style.com ([127.0.0.1])
	by localhost (mslinux.media-style.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 21392-06 for <hadoop-dev@lucene.apache.org>;
	Wed, 8 Feb 2006 19:45:10 +0100 (CET)
Received: from [192.168.200.55] (unknown [212.122.60.61])
	by mslinux.media-style.com (Postfix) with ESMTP id 0234614445E
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Feb 2006 19:45:09 +0100 (CET)
Mime-Version: 1.0 (Apple Message framework v746.2)
To: hadoop-dev@lucene.apache.org
Message-Id: <949FDE88-D958-4328-8DC7-EDFCCADD48C5@media-style.com>
Content-Type: multipart/alternative; boundary=Apple-Mail-1-55731835
From: Marko Bauhardt <mb@media-style.com>
Subject: can not start jobtracker
Date: Wed, 8 Feb 2006 19:43:25 +0100
X-Mailer: Apple Mail (2.746.2)
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at media-style.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--Apple-Mail-1-55731835
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	delsp=yes;
	format=flowed

Hi,
i checkout the latest sources an try to start the jobtracker and get  
the following exception.


org.xml.sax.SAXParseException: Elementtyp "web-app" ist nicht  
deklariert.
	at org.apache.crimson.parser.Parser2.error(Parser2.java:3354)
	at org.apache.crimson.parser.Parser2.maybeElement(Parser2.java:1502)
	at org.apache.crimson.parser.Parser2.parseInternal(Parser2.java:667)
	at org.apache.crimson.parser.Parser2.parse(Parser2.java:337)
	at org.apache.crimson.parser.XMLReaderImpl.parse(XMLReaderImpl.java: 
448)
	at javax.xml.parsers.SAXParser.parse(SAXParser.java:345)
	at org.mortbay.xml.XmlParser.parse(XmlParser.java:216)
	at org.mortbay.xml.XmlParser.parse(XmlParser.java:234)
	at org.mortbay.jetty.servlet.XMLConfiguration.configureDefaults 
(XMLConfiguration.java:159)
	at org.mortbay.jetty.servlet.WebApplicationContext.configureDefaults 
(WebApplicationContext.java:414)
	at org.mortbay.jetty.servlet.WebApplicationContext.doStart 
(WebApplicationContext.java:463)
	at org.mortbay.util.Container.start(Container.java:72)
	at org.mortbay.http.HttpServer.doStart(HttpServer.java:753)
	at org.mortbay.util.Container.start(Container.java:72)
	at org.apache.hadoop.mapred.JobTrackerInfoServer$HTTPStarter.run 
(JobTrackerInfoServer.java:87)
	at java.lang.Thread.run(Thread.java:552)

(Sounds like a missed or invalid web.xml?)

What am i doing wrong?

Thanks for any help.

Marko



--Apple-Mail-1-55731835--

From MAILER-DAEMON Wed Feb  8 19:00:30 2006
Return-Path: 
 <hadoop-dev-return-66-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50876 invoked from network); 8 Feb 2006 19:00:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Feb 2006 19:00:30 -0000
Received: (qmail 61382 invoked by uid 500); 8 Feb 2006 19:00:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 61354 invoked by uid 500); 8 Feb 2006 19:00:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 61345 invoked by uid 99); 8 Feb 2006 19:00:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 11:00:29 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of bpendleton@gmail.com designates
 64.233.162.204 as permitted sender)
Received: from [64.233.162.204] (HELO zproxy.gmail.com) (64.233.162.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 11:00:27 -0800
Received: by zproxy.gmail.com with SMTP id i11so1595017nzh
        for <hadoop-dev@lucene.apache.org>;
 Wed, 08 Feb 2006 11:00:06 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references;
        b=Hbghd/GJXD4seR0bWkP0VRTgu2ZOACmC3ww1Ecu7VIhxdjJBvjOqW4dZ1UBnhaKZPw/cIAAojTXbXYeVW8wx4xDzIY/CZXkiI8FNsUcUcwrCaCaTgBBp6G10Yc+tfY+NjW1KHWr6NYjZ3yU7mErK6mfGzYwmORo+OkMOyS8ZtOY=
Received: by 10.65.148.10 with SMTP id a10mr1820699qbo;
        Wed, 08 Feb 2006 11:00:04 -0800 (PST)
Received: by 10.65.232.5 with HTTP; Wed, 8 Feb 2006 11:00:04 -0800 (PST)
Message-ID: <1bf79d3e0602081100u753c8898xac25d4e8987c48f3@mail.gmail.com>
Date: Wed, 8 Feb 2006 11:00:04 -0800
From: "Bryan A. Pendleton" <bp@geekdom.net>
Sender: bpendleton@gmail.com
To: hadoop-dev@lucene.apache.org
Subject: Re: Some bugs I'm trying to characterize....
In-Reply-To: <1139336196.1325.18.camel@bacalao>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_Part_8181_26222063.1139425204455"
References: <1bf79d3e0602021206x4c9269f7w10c35cfcb22a71e8@mail.gmail.com>
	 <1139336196.1325.18.camel@bacalao>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_8181_26222063.1139425204455
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

KE1vdmVkIHJlcGx5IHRvIGhhZG9vcC1kZXYpCgpUaGFua3MgZm9yIHlvdXIgZm9sbG93dXAuIEkn
bSBtb3ZpbmcgdG8gdGhlIGxhdGVzdCBuaWdodGx5IGhhZG9vcCwgYW5kIEknbGwKc2VlIGhvdyB0
aGluZ3MgZmFyZSBuZXh0IHRpbWUgSSBydW4gaW50byB0aGVzZSBraW5kcyBvZiBwcm9ibGVtcy4g
TW9yZQpjb21tZW50cyBiZWxvdzoKCk9uIDA3IEZlYiAyMDA2IDEwOjE2OjM0IC0wODAwLCBNaWNo
YWVsIENhZmFyZWxsYSA8Cm1pY2hhZWxfY2FmYXJlbGxhQGNvbWNhc3QubmV0PiB3cm90ZToKPgo+
Cj4gICBIaSBCcnlhbiwKPgo+IE9uIFRodSwgMjAwNi0wMi0wMiBhdCAxMjowNiwgQnJ5YW4gQS4g
UGVuZGxldG9uIHdyb3RlOgo+ID4KPiA+IDEpIElmIHlvdSBmaWxsIHVwIHRoZSBzcGFjZSBvZiBh
IGRhdGFub2RlLCBpdCBhcHBlYXJzIHRvIGZhaWwgd2l0aCB0aGUKPiB3cm9uZwo+ID4gZXhjZXB0
aW9uIGFuZCByZWxvYWQuIFRoaXMsIGNvbWJpbmVkIHdpdGggdGhlIGN1cnJlbnRseSBzaW1wbGUK
PiA+IGJsb2NrLWFsbG9jYXRpb24gbWV0aG9kIChyYW5kb20pLCBtZWFucyB0aGF0IG9uZSAiZnVs
bCIgbm9kZSBjYW4gY2F1c2UgYQo+IGJpZwo+ID4gZHJvcG9mZiBpbiBOREZTIHdyaXRlIHBlcmZv
cm1hbmNlLCBhcyBjbGllbnRzIGVuZCB1cCB0aW1pbmcgb3V0IHNvbWUKPiBwZXJjZW50Cj4gPiBv
ZiB0aGUgdGltZSB3aGVuIGFza2VkIHRvIHRhbGsgdG8gdGhlICJmdWxsIiBub2RlLCB3aGlsZSB0
aGUgZnVsbCBub2RlCj4gaXMKPiA+IGJ1c3kgcmVsb2FkaW5nLgo+ID4KPgo+ICAgVGhlIGV4aXN0
aW5nIGNvZGUgY2hvb3NlcyBhIG5vZGUgcHJvYmFiaWxpc3RpY2FsbHksIHdpdGggbW9yZSB3ZWln
aHQKPiBnaXZlbiB0byBtYWNoaW5lcyB3aXRoIG1vcmUgc3BhY2UgYXZhaWxhYmxlLiAgSSBzaG91
bGQgcHJvYmFibHkgY2hhbmdlCj4gdGhpcyBzbyB0aGF0IG1hY2hpbmVzIHVuZGVyIGEgY2VydGFp
biBsaW1pdCBhcmUganVzdCBuZXZlciBjaG9zZW4uICBJCj4gZmlsZWQgYnVnIEhBRE9PUC0yNiBm
b3IgdGhpcy4KCgpIb3cgZG9lcyB0aGlzIHdvcmsvd2hlcmUgaXMgdGhpcyBjb2RlPyBJJ3ZlIGJl
ZW4gdHJ5aW5nIHRvIHRyYWNlIGhvdyBpdAp3b3JrcywgYW5kLCBzbyBmYXIsIEkgaGF2ZW4ndCBm
b3VuZCB0aGlzICJ3ZWlnaHRpbmciIGNvZGUuIElzIHRoaXMgd2hhdCB0aGUKbGFzdCAiZWxzZSIg
aW4gY2hvb3NlVGFyZ2V0KFRyZWVTZXQgZm9yYmlkZGVuMSwgVHJlZVNldCBmb3JiaWRkZW4yKSBp
cwpkb2luZz8gSSBhZG1pdCB0byBiZWluZyBhIGJpdCBjb25mdXNlZCBhcyB0byBob3cgdGhhdCBj
b2RlIGZsb3dzLi4uIEluIGFueQpjYXNlLCBJIHRoaW5rIHRoZSBkZWZhdWx0IGNvZGUgdXNlcyB0
aGUgcHJldmlvdXMgY2xhdXNlLCBhcwpkZnMuYXZhaWxhYmlsaXR5LmFsbG9jYXRpb24gc2VlbXMg
dG8gZGVmYXVsdCB0byAiZmFsc2UiLiBTaG91bGQgSSBiZSBzZXR0aW5nCmRmcy5hdmFpbGFiaWxp
dHkuYWxsb2NhdGlvbiB0byB0cnVlPwoKICBBcmUgeW91IHJ1bm5pbmcgb24gbm9kZXMgd2l0aCB2
YXJ5aW5nIGFtb3VudHMgb2YgZGlzayBzcGFjZSBvbiBlYWNoPwo+IEkndmUgYmVlbiBkb2luZyB0
ZXN0aW5nIG9uIHJlbGF0aXZlbHkgY2xlYW4gc2V0cyBvZiBtYWNoaW5lcywgc28KPiBJJ20gcHJv
YmFibHkgaGl0dGluZyB0aGlzIHByb2JsZW0gbGVzcyBvZnRlbiB0aGFuIEkgInNob3VsZCIgYmUu
CgoKWWVzLiBUaGVyZSBhcmUgc2V2ZXJhbCBkaWZmZXJlbnQgc2l6ZSBkcml2ZXMsIGFuZCBzb21l
IG9mIHRoZW0gaGF2ZSBvdGhlcgpkYXRhIHN0b3JlZCBvbiB0aGVtIGJlc2lkZXMgaGFkb29wL251
dGNoIHdvcmsuIE15IGNsdXN0ZXIgd2FzIGJ1aWx0IHVwIG92ZXIKYSBwZXJpb2Qgb2YgdGltZSwg
YW5kIGhhcyBoYWQgc2V2ZXJhbCBleHRyYSBkcml2ZXMgYWRkZWQgdG8gc2V2ZXJhbCBvZiB0aGUK
bWFjaGluZXMuIEFsbCBpbiBhbGwsIHRoZXJlJ3MgYSBwcmV0dHkgd2lkZSByYW5nZSBvZiBoYWRv
b3AtdXNhYmxlIHNwYWNlCmF2YWlsYWJsZSBwZXIgZGV2aWNlLi4uIGFueXdoZXJlIGZyb20gMTVn
YiB0byAyMDBnYi4KCiAgSSdtIHN1cnByaXNlZCBieSB0aGlzOyBhIHJlZHVjZSB0YXNrIHRoYXQg
ZmFpbHMgc2hvdWxkIGJlIHJlc2NoZWR1bGVkCj4gZWxzZXdoZXJlLiAgSWYgYSBtYXAgaXMgbG9z
dCwgaXQgdG9vIHNob3VsZCBiZSByZXNjaGVkdWxlZC4gIFdlIG1hZGUgYQo+IGZldyBtYWpvciBj
aGFuZ2VzIHRvIE1hcFJlZHVjZSBpbiB0aGUgbGFzdCB3ZWVrLiAgV2hlbiBkaWQgeW91IGxhc3Qg
ZG8KPiBhIGJyaW5nb3ZlciBmcm9tIHN2bj8KPgo+ICAgQnV0IEkgYWdyZWUgdGhhdCBhIG5vZGUg
d2l0aG91dCBzcGFjZSBzaG91bGQgbm8gbG9uZ2VyIG9mZmVyIHRhc2sKPiBzZXJ2aWNlIHRvIHRo
ZSBzeXN0ZW0uICBJIGZpbGVkIEhBRE9PUC0yNyBmb3IgdGhpcyBvbmUuCgoKSSB0aGluayBpdCBt
dXN0J3ZlIGJlZW4gYSBiYWRseS1oYW5kbGVkIGNvcm5lciBjYXNlLCBvciBzb21ldGhpbmcsIGFz
IEkKaGF2ZW4ndCBzZWVuIHRoYXQgcHJvYmxlbSBoYXBwZW4gZWxzZXdoZXJlIHNpbmNlLiBJdCBt
aWdodCBoYXZlIGJlZW4gc29tZQpvdGhlciBlcnJvciB0aGF0IGV4aGliaXRlZCBpdHNlbGYgdGhp
cyB3YXkuCgogIEl0J3Mgbm90IGVhc3kgdG8gcHJlZGljdCB0aGUgc2l6ZSBvZiBkYXRhIGVtaXR0
ZWQgYnkgZWl0aGVyIG1hcCBvcgo+IHJlZHVjZS4gIFRoZSB1c2VyIGNhbiBhbHdheXMgZW1pdCBp
bnNhbmUgc3RyaW5ncyBvZiBhcmJpdHJhcnkgbGVuZ3RoLgo+Cj4gICBJIHRoaW5rIHRoZSByaWdo
dCBzb2x1dGlvbiBpcyB0byBhbGxvdyB0aGUgYWRtaW5pc3RyYXRvciB0byBzZXQgYQo+ICJtaW5p
bXVtIHNpemUiIHBhcmFtZXRlci4gIEluZGVlZCwgSSBiZWxpZXZlIHRoaXMgcGFyYW0gaXMgc3Rp
bGwgaW4KPiBwbGFjZSBmcm9tIGVhcmxpZXIgREZTIHdvcmsuICBXaGlsZSB0aGlzIG1pZ2h0IGJl
IHRvbyBjb25zZXJ2YXRpdmUgaW4KPiBtYW55IGNhc2VzLCBhbiBhbG1vc3QtZnVsbCBkaXNrIHNo
b3VsZCBiZSBhIHJlbGF0aXZlbHkgcmFyZSBlZGdlIGNhc2UKPiB0aGF0IHNob3VsZG4ndCBiZSBv
cHRpbWl6ZWQgZm9yLgoKClRoYXQgd291bGQgYmUgaGVscGZ1bC4gSG93ZXZlciwgSSBkb24ndCB0
aGluayB5b3VyIHN0YXRlbWVudCBpcyBxdWl0ZSByaWdodAotIHRoZXJlJ3Mgbm8gd2F5IHRvIHRl
bGwgaG93IGxhcmdlIGEgbWFwJ3Mgb3V0cHV0IGlzIGdvaW5nIHRvIGJlLCBidXQKc2hvdWxkbid0
IHRoZSBzcGFjZSBuZWVkZWQgZm9yIGludGVybWVkaWFyeSBwcm9jZXNzaW5nIG9mIHJlZHVjZSBi
ZSB0b3RhbGx5CnByZWRpY3RhYmxlPyBJc24ndCBpdCB0aGUgc3VtIG9mIHRoZSBwYXJ0aXRpb24g
b3V0cHV0IGJlaW5nIGNvbWJpbmVkIGluIGEKZ2l2ZW4gcmVkdWNlLCBkb3VibGVkLCBzaW5jZSB0
aGVyZSdzIGEgInNvcnQiIGFmdGVyIHRoZSBjb3BpZWQtdG9nZXRoZXIKc3RhZ2U/CgpBbGwgdGhl
IHNhbWUsIHlvdSBjYW4gcHJvYmFibHkgZG8gYmV0dGVyIHdpdGggbWFwIG91dHB1dCBieSBkaXN0
cmlidXRpbmcKb3V0cHV0IGZpbGVzIHByb3BvcnRpb25hbCB0byB0aGUgc3BhY2UgYXZhaWxhYmxl
IG9uIHRoZSB0ZW1wIGRyaXZlcywgcmF0aGVyCnRoYW4gaW4gYSBtZXJlbHkgcm91bmQtcm9iaW5n
IGZhc2hpb24uIEknZCBzdWJtaXQgYSBwYXRjaCBmb3IgdGhpcywgYnV0IEkKZG9uJ3Qgc2VlIGFu
eSBlYXN5IHdheSB0byBmaW5kIGZyZWUgZGlzayBzcGFjZSBmcm9tIGEgTWFwVGFzay4KCiAgVGhp
cyAic3BlY3VsYXRpdmUgZXhlY3V0aW9uIiBpcyBleGFjdGx5IHdoYXQgaGFwcGVucyBpbiB0aGUg
bGF0ZXN0Cj4gdmVyc2lvbiBvZiBNYXBSZWR1Y2UuCgoKRXhjZWxsZW50LiBJJ2xsIGdldCBteXNl
bGYgb24gdGhlIGxhdGVzdCBjb2RlIGltbWVkaWF0ZWx5LCB0aGVuLgoKCi0tCkJyeWFuIEEuIFBl
bmRsZXRvbgpQaDogKDg3NykgZ2Vlay0xLWJwCg==
------=_Part_8181_26222063.1139425204455--

From MAILER-DAEMON Wed Feb  8 19:04:20 2006
Return-Path: 
 <hadoop-dev-return-67-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52459 invoked from network); 8 Feb 2006 19:04:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Feb 2006 19:04:20 -0000
Received: (qmail 65029 invoked by uid 500); 8 Feb 2006 19:04:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64987 invoked by uid 500); 8 Feb 2006 19:04:19 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64978 invoked by uid 99); 8 Feb 2006 19:04:19 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 11:04:19 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 83180C9
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Feb 2006 20:03:58 +0100 (CET)
Message-ID: <1131341961.1139425438365.JavaMail.jira@ajax.apache.org>
Date: Wed, 8 Feb 2006 20:03:58 +0100 (CET)
From: "Bryan Pendleton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-27) MapRed tries to allocate tasks to
 nodes that have no available disk space
In-Reply-To: <1424617142.1139335680270.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-27?page=comments#action_12365610 ] 

Bryan Pendleton commented on HADOOP-27:
---------------------------------------

Just to add specifics: since a task processor might've already completed previous tasks - when it runs out of space, it shouldn't be allocated new jobs, but it should stay available for serving map output to reduce jobs that need the completed output. Likewise, once such tasks have been cleared, and more space is available, the task runner should return to available status automatically.

> MapRed tries to allocate tasks to nodes that have no available disk space
> -------------------------------------------------------------------------
>
>          Key: HADOOP-27
>          URL: http://issues.apache.org/jira/browse/HADOOP-27
>      Project: Hadoop
>         Type: Bug
>   Components: mapred
>     Reporter: Mike Cafarella

>
>   What it says above.  MapRed TaskTrackers should not offer task service if the local disk
> space is too constrained.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Feb  8 19:25:05 2006
Return-Path: 
 <hadoop-dev-return-68-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 61599 invoked from network); 8 Feb 2006 19:25:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Feb 2006 19:25:05 -0000
Received: (qmail 94141 invoked by uid 500); 8 Feb 2006 19:25:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94120 invoked by uid 500); 8 Feb 2006 19:25:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94111 invoked by uid 99); 8 Feb 2006 19:25:04 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 11:25:02 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 9A694CB
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Feb 2006 20:24:41 +0100 (CET)
Message-ID: <398888932.1139426681630.JavaMail.jira@ajax.apache.org>
Date: Wed, 8 Feb 2006 20:24:41 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-25) a new map/reduce example and moving
 the examples from src/java to src/examples
In-Reply-To: <187621972.1139267817333.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-25?page=all ]
     
Doug Cutting resolved HADOOP-25:
--------------------------------

    Resolution: Fixed
     Assign To: Doug Cutting

I made a few changes and committed this.  In particular, I:
  - moved  the package.html to the examples package;
  - put  the examples javadoc in a separate group, so it's clear it's not part of the core API
  - put the version in the example jar file name
  - added Apache licenses to newly contributed files


> a new map/reduce example and moving the examples from src/java to src/examples
> ------------------------------------------------------------------------------
>
>          Key: HADOOP-25
>          URL: http://issues.apache.org/jira/browse/HADOOP-25
>      Project: Hadoop
>         Type: Improvement
>   Components: mapred
>     Reporter: Owen O'Malley
>     Assignee: Doug Cutting
>     Priority: Minor
>  Attachments: examples-2.patch, examples-3.patch, examples.patch
>
> The new example is the word count example from Google's paper. I moved the examples into a separate jar file to demonstrate how to run stand-alone application code.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Feb  8 19:57:36 2006
Return-Path: 
 <hadoop-dev-return-69-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76085 invoked from network); 8 Feb 2006 19:57:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Feb 2006 19:57:36 -0000
Received: (qmail 36016 invoked by uid 500); 8 Feb 2006 19:57:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 35965 invoked by uid 500); 8 Feb 2006 19:57:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 35769 invoked by uid 99); 8 Feb 2006 19:57:31 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 11:57:30 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id B61C1DF
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Feb 2006 20:57:09 +0100 (CET)
Message-ID: <358087211.1139428629743.JavaMail.jira@ajax.apache.org>
Date: Wed, 8 Feb 2006 20:57:09 +0100 (CET)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-25) a new map/reduce example and moving the
 examples from src/java to src/examples
In-Reply-To: <187621972.1139267817333.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-25?page=all ]

Owen O'Malley updated HADOOP-25:
--------------------------------

    Attachment: tar-name-fix.patch

When the example tarball was renamed, the package target was broken.

> a new map/reduce example and moving the examples from src/java to src/examples
> ------------------------------------------------------------------------------
>
>          Key: HADOOP-25
>          URL: http://issues.apache.org/jira/browse/HADOOP-25
>      Project: Hadoop
>         Type: Improvement
>   Components: mapred
>     Reporter: Owen O'Malley
>     Assignee: Doug Cutting
>     Priority: Minor
>  Attachments: examples-2.patch, examples-3.patch, examples.patch, tar-name-fix.patch
>
> The new example is the word count example from Google's paper. I moved the examples into a separate jar file to demonstrate how to run stand-alone application code.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Feb  8 20:42:11 2006
Return-Path: 
 <hadoop-dev-return-70-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 97617 invoked from network); 8 Feb 2006 20:42:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Feb 2006 20:42:11 -0000
Received: (qmail 94766 invoked by uid 500); 8 Feb 2006 20:42:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94741 invoked by uid 500); 8 Feb 2006 20:42:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94732 invoked by uid 99); 8 Feb 2006 20:42:04 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 12:42:04 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 498E9DF
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Feb 2006 21:41:43 +0100 (CET)
Message-ID: <986277918.1139431303299.JavaMail.jira@ajax.apache.org>
Date: Wed, 8 Feb 2006 21:41:43 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-28) webapps broken
In-Reply-To: <2105821548.1139420592025.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-28?page=all ]
     
Doug Cutting resolved HADOOP-28:
--------------------------------

    Resolution: Fixed

The JSP pages are now pre-compiled to servlets that can access package-private classes.

> webapps broken
> --------------
>
>          Key: HADOOP-28
>          URL: http://issues.apache.org/jira/browse/HADOOP-28
>      Project: Hadoop
>         Type: Bug
>   Components: mapred
>     Reporter: Owen O'Malley
>  Attachments: jspc.patch
>
> Changing the classes to private broke the webapps. 
> The required public classes are:
> org.apache.hadoop.mapred.JobInProgress
> org.apache.hadoop.mapred.JobProfile
> org.apache.hadoop.mapred.JobStatus
> org.apache.hadoop.mapred.TaskTrackerStatus
> To fix, we need one of:
>   1. The classes need to be made public again
>   2. The functionality needs to be made available through the classes that are public
>   3. The webapps need to move into the mapred package.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Feb  8 20:47:15 2006
Return-Path: 
 <hadoop-dev-return-71-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 764 invoked from network); 8 Feb 2006 20:47:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Feb 2006 20:47:15 -0000
Received: (qmail 3022 invoked by uid 500); 8 Feb 2006 20:46:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 2811 invoked by uid 500); 8 Feb 2006 20:46:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 2742 invoked by uid 99); 8 Feb 2006 20:46:49 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 12:46:47 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 7B8FFCB
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Feb 2006 21:46:26 +0100 (CET)
Message-ID: <201686756.1139431586503.JavaMail.jira@ajax.apache.org>
Date: Wed, 8 Feb 2006 21:46:26 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-25) a new map/reduce example and moving
 the examples from src/java to src/examples
In-Reply-To: <187621972.1139267817333.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-25?page=comments#action_12365626 ] 

Doug Cutting commented on HADOOP-25:
------------------------------------

Okay, I think I fixed that.  Thanks!

> a new map/reduce example and moving the examples from src/java to src/examples
> ------------------------------------------------------------------------------
>
>          Key: HADOOP-25
>          URL: http://issues.apache.org/jira/browse/HADOOP-25
>      Project: Hadoop
>         Type: Improvement
>   Components: mapred
>     Reporter: Owen O'Malley
>     Assignee: Doug Cutting
>     Priority: Minor
>  Attachments: examples-2.patch, examples-3.patch, examples.patch, tar-name-fix.patch
>
> The new example is the word count example from Google's paper. I moved the examples into a separate jar file to demonstrate how to run stand-alone application code.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Feb  8 21:49:36 2006
Return-Path: 
 <hadoop-dev-return-72-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 36449 invoked from network); 8 Feb 2006 21:49:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Feb 2006 21:49:36 -0000
Received: (qmail 21873 invoked by uid 500); 8 Feb 2006 21:49:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 21848 invoked by uid 500); 8 Feb 2006 21:49:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 21839 invoked by uid 99); 8 Feb 2006 21:49:20 -0000
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=INFO_TLD
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 13:49:19 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 73F79CB
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Feb 2006 22:48:58 +0100 (CET)
Message-ID: <1883009061.1139435338472.JavaMail.jira@ajax.apache.org>
Date: Wed, 8 Feb 2006 22:48:58 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-20) Mapper, Reducer need an occasion to
 cleanup after the last record is processed.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-20?page=comments#action_12365634 ] 

Doug Cutting commented on HADOOP-20:
------------------------------------

Michel,

Can you please re-generate this patch using the new hadoop packages?

Also, I'd prefer the method be named 'close()' instead of 'finished()'.

Finally, perhaps we should move this into a Closeable interface that is extended by both Mapper and Reducer?

Thanks!

Doug

> Mapper, Reducer need an occasion to cleanup after the last record is processed.
> -------------------------------------------------------------------------------
>
>          Key: HADOOP-20
>          URL: http://issues.apache.org/jira/browse/HADOOP-20
>      Project: Hadoop
>         Type: Improvement
>   Components: mapred
>  Environment: Linux
>     Reporter: Michel Tourn
>  Attachments: mapredfinished.log
>
> Mapper, Reducer need an occasion to do some cleanup after the last record is processed.
> Proposal (patch attached)
> in interface Mapper:
>  add method void finished();
> in interface Reducer:
>  add method void finished();
> finished() methods are called from MapTask, CombiningCollector, ReduceTask.
> ------------
> Known limitation: Fetcher (a multithreaded MapRunnable) does not call finished().
> This is not currently a problem bec. fetcher Map/Reduce modules do not do anything in finished().
> The right way to add finished() support to Fetcher would be to wait for all threads to finish, 
> then do:
>      if (collector instanceof CombiningCollector) ((CombiningCollector)collector).finished();
> ------------
> patch begins: (svn trunk)
> Index: src/test/org/apache/nutch/mapred/MapredLoadTest.java
> ===================================================================
> --- src/test/org/apache/nutch/mapred/MapredLoadTest.java	(revision 374781)
> +++ src/test/org/apache/nutch/mapred/MapredLoadTest.java	(working copy)
> @@ -69,6 +69,8 @@
>                  out.collect(new IntWritable(Math.abs(r.nextInt())), new IntWritable(randomVal));
>              }
>          }
> +        public void finished() {
> +        }
>      }
>      static class RandomGenReducer implements Reducer {
>          public void configure(JobConf job) {
> @@ -81,6 +83,8 @@
>                  out.collect(new UTF8("" + val), new UTF8(""));
>              }
>          }
> +        public void finished() {
> +        }
>      }
>      static class RandomCheckMapper implements Mapper {
>          public void configure(JobConf job) {
> @@ -92,6 +96,8 @@
>  
>              out.collect(new IntWritable(Integer.parseInt(str.toString().trim())), new IntWritable(1));
>          }
> +        public void finished() {
> +        }
>      }
>      static class RandomCheckReducer implements Reducer {
>          public void configure(JobConf job) {
> @@ -106,6 +112,8 @@
>              }
>              out.collect(new IntWritable(keyint), new IntWritable(count));
>          }
> +        public void finished() {
> +        }
>      }
>  
>      int range;
> Index: src/test/org/apache/nutch/fs/TestNutchFileSystem.java
> ===================================================================
> --- src/test/org/apache/nutch/fs/TestNutchFileSystem.java	(revision 374783)
> +++ src/test/org/apache/nutch/fs/TestNutchFileSystem.java	(working copy)
> @@ -155,6 +155,8 @@
>  
>        reporter.setStatus("wrote " + name);
>      }
> +    
> +    public void finished() {}
>    }
>  
>    public static void writeTest(NutchFileSystem fs, boolean fastCheck)
> @@ -247,6 +249,9 @@
>  
>        reporter.setStatus("read " + name);
>      }
> +    
> +    public void finished() {}
> +    
>    }
>  
>    public static void readTest(NutchFileSystem fs, boolean fastCheck)
> @@ -339,6 +344,9 @@
>          in.close();
>        }
>      }
> +    
> +    public void finished() {}
> +    
>    }
>  
>    public static void seekTest(NutchFileSystem fs, boolean fastCheck)
> Index: src/java/org/apache/nutch/indexer/DeleteDuplicates.java
> ===================================================================
> --- src/java/org/apache/nutch/indexer/DeleteDuplicates.java	(revision 374776)
> +++ src/java/org/apache/nutch/indexer/DeleteDuplicates.java	(working copy)
> @@ -225,6 +225,7 @@
>          }
>        }
>      }
> +    public void finished() {}
>    }
>      
>    private NutchFileSystem fs;
> @@ -265,6 +266,8 @@
>        reader.close();
>      }
>    }
> +  
> +  public void finished() {}
>  
>    /** Write nothing. */
>    public RecordWriter getRecordWriter(final NutchFileSystem fs,
> Index: src/java/org/apache/nutch/indexer/Indexer.java
> ===================================================================
> --- src/java/org/apache/nutch/indexer/Indexer.java	(revision 374778)
> +++ src/java/org/apache/nutch/indexer/Indexer.java	(working copy)
> @@ -227,6 +227,8 @@
>  
>      output.collect(key, new ObjectWritable(doc));
>    }
> +  
> +  public void finished() {}
>  
>    public void index(File indexDir, File crawlDb, File linkDb, File[] segments)
>      throws IOException {
> Index: src/java/org/apache/nutch/segment/SegmentReader.java
> ===================================================================
> --- src/java/org/apache/nutch/segment/SegmentReader.java	(revision 374778)
> +++ src/java/org/apache/nutch/segment/SegmentReader.java	(working copy)
> @@ -143,7 +143,9 @@
>      }
>      output.collect(key, new ObjectWritable(dump.toString()));
>    }
> -
> +  
> +  public void finished() {}
> +  
>    public void reader(File segment) throws IOException {
>      LOG.info("Reader: segment: " + segment);
>  
> Index: src/java/org/apache/nutch/mapred/Mapper.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/Mapper.java	(revision 374737)
> +++ src/java/org/apache/nutch/mapred/Mapper.java	(working copy)
> @@ -39,4 +39,9 @@
>    void map(WritableComparable key, Writable value,
>             OutputCollector output, Reporter reporter)
>      throws IOException;
> +
> +  /** Called after the last {@link #map} call on this Mapper object.
> +      Typical implementations do nothing.
> +  */
> +  void finished();
>  }
> Index: src/java/org/apache/nutch/mapred/lib/RegexMapper.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/lib/RegexMapper.java	(revision 374737)
> +++ src/java/org/apache/nutch/mapred/lib/RegexMapper.java	(working copy)
> @@ -53,4 +53,5 @@
>        output.collect(new UTF8(matcher.group(group)), new LongWritable(1));
>      }
>    }
> +  public void finished() {}
>  }
> Index: src/java/org/apache/nutch/mapred/lib/InverseMapper.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/lib/InverseMapper.java	(revision 374737)
> +++ src/java/org/apache/nutch/mapred/lib/InverseMapper.java	(working copy)
> @@ -38,4 +38,6 @@
>      throws IOException {
>      output.collect((WritableComparable)value, key);
>    }
> +
> +  public void finished() {}
>  }
> Index: src/java/org/apache/nutch/mapred/lib/IdentityReducer.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/lib/IdentityReducer.java	(revision 374737)
> +++ src/java/org/apache/nutch/mapred/lib/IdentityReducer.java	(working copy)
> @@ -42,4 +42,5 @@
>      }
>    }
>  
> +  public void finished() {}
>  }
> Index: src/java/org/apache/nutch/mapred/lib/IdentityMapper.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/lib/IdentityMapper.java	(revision 374737)
> +++ src/java/org/apache/nutch/mapred/lib/IdentityMapper.java	(working copy)
> @@ -39,4 +39,5 @@
>      output.collect(key, val);
>    }
>  
> +  public void finished() {}
>  }
> Index: src/java/org/apache/nutch/mapred/lib/LongSumReducer.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/lib/LongSumReducer.java	(revision 374737)
> +++ src/java/org/apache/nutch/mapred/lib/LongSumReducer.java	(working copy)
> @@ -47,4 +47,6 @@
>      // output sum
>      output.collect(key, new LongWritable(sum));
>    }
> +
> +  public void finished() {}
>  }
> Index: src/java/org/apache/nutch/mapred/lib/TokenCountMapper.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/lib/TokenCountMapper.java	(revision 374737)
> +++ src/java/org/apache/nutch/mapred/lib/TokenCountMapper.java	(working copy)
> @@ -50,4 +50,6 @@
>        output.collect(new UTF8(st.nextToken()), new LongWritable(1));
>      }
>    }
> +
> +  public void finished() {}
>  }
> Index: src/java/org/apache/nutch/mapred/ReduceTask.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/ReduceTask.java	(revision 374781)
> +++ src/java/org/apache/nutch/mapred/ReduceTask.java	(working copy)
> @@ -275,6 +275,7 @@
>        }
>  
>      } finally {
> +      reducer.finished();
>        in.close();
>        lfs.delete(new File(sortedFile));           // remove sorted
>        out.close(reporter);
> Index: src/java/org/apache/nutch/mapred/MapTask.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/MapTask.java	(revision 374737)
> +++ src/java/org/apache/nutch/mapred/MapTask.java	(working copy)
> @@ -50,7 +50,7 @@
>    public void write(DataOutput out) throws IOException {
>      super.write(out);
>      split.write(out);
> -    
> +
>    }
>    public void readFields(DataInput in) throws IOException {
>      super.readFields(in);
> @@ -126,6 +126,10 @@
>          }
>  
>        } finally {
> +        if (combining) {
> +          ((CombiningCollector)collector).finished();
> +        }
> +
>          in.close();                               // close input
>        }
>      } finally {
> @@ -147,5 +151,5 @@
>    public NutchConf getConf() {
>      return this.nutchConf;
>    }
> -  
> +
>  }
> Index: src/java/org/apache/nutch/mapred/MapRunner.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/MapRunner.java	(revision 374737)
> +++ src/java/org/apache/nutch/mapred/MapRunner.java	(working copy)
> @@ -38,18 +38,22 @@
>    public void run(RecordReader input, OutputCollector output,
>                    Reporter reporter)
>      throws IOException {
> -    while (true) {
> -      // allocate new key & value instances
> -      WritableComparable key =
> -        (WritableComparable)job.newInstance(inputKeyClass);
> -      Writable value = (Writable)job.newInstance(inputValueClass);
> +    try {
> +      while (true) {
> +        // allocate new key & value instances
> +        WritableComparable key =
> +          (WritableComparable)job.newInstance(inputKeyClass);
> +        Writable value = (Writable)job.newInstance(inputValueClass);
>  
> -      // read next key & value
> -      if (!input.next(key, value))
> -        return;
> +        // read next key & value
> +        if (!input.next(key, value))
> +          return;
>  
> -      // map pair to output
> -      mapper.map(key, value, output, reporter);
> +        // map pair to output
> +        mapper.map(key, value, output, reporter);
> +      }
> +    } finally {
> +        mapper.finished();
>      }
>    }
>  
> Index: src/java/org/apache/nutch/mapred/CombiningCollector.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/CombiningCollector.java	(revision 374780)
> +++ src/java/org/apache/nutch/mapred/CombiningCollector.java	(working copy)
> @@ -78,4 +78,9 @@
>      count = 0;
>    }
>  
> +  public synchronized void finished()
> +  {
> +    combiner.finished();
> +  }
> +
>  }
> Index: src/java/org/apache/nutch/mapred/Reducer.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/Reducer.java	(revision 374737)
> +++ src/java/org/apache/nutch/mapred/Reducer.java	(working copy)
> @@ -38,4 +38,10 @@
>    void reduce(WritableComparable key, Iterator values,
>                OutputCollector output, Reporter reporter)
>      throws IOException;
> +
> +  /** Called after the last {@link #reduce} call on this Reducer object.
> +      Typical implementations do nothing.
> +  */
> +  void finished();
> +
>  }
> Index: src/java/org/apache/nutch/crawl/CrawlDbReader.java
> ===================================================================
> --- src/java/org/apache/nutch/crawl/CrawlDbReader.java	(revision 374737)
> +++ src/java/org/apache/nutch/crawl/CrawlDbReader.java	(working copy)
> @@ -50,9 +50,9 @@
>  
>  /**
>   * Read utility for the CrawlDB.
> - * 
> + *
>   * @author Andrzej Bialecki
> - * 
> + *
>   */
>  public class CrawlDbReader {
>  
> @@ -68,6 +68,7 @@
>        output.collect(new UTF8("retry"), new LongWritable(cd.getRetriesSinceFetch()));
>        output.collect(new UTF8("score"), new LongWritable((long) (cd.getScore() * 1000.0)));
>      }
> +    public void finished() {}
>    }
>  
>    public static class CrawlDbStatReducer implements Reducer {
> @@ -121,6 +122,7 @@
>          output.collect(new UTF8("avg score"), new LongWritable(total / cnt));
>        }
>      }
> +    public void finished() {}
>    }
>  
>    public static class CrawlDbDumpReducer implements Reducer {
> @@ -133,8 +135,11 @@
>  
>      public void configure(JobConf job) {
>      }
> +
> +    public void finished() {
> +    }
>    }
> -  
> +
>    public void processStatJob(String crawlDb, NutchConf config) throws IOException {
>      LOG.info("CrawlDb statistics start: " + crawlDb);
>      File tmpFolder = new File(crawlDb, "stat_tmp" + System.currentTimeMillis());
> @@ -219,7 +224,7 @@
>        System.out.println("not found");
>      }
>    }
> -  
> +
>    public void processDumpJob(String crawlDb, String output, NutchConf config) throws IOException {
>  
>      LOG.info("CrawlDb dump: starting");
> @@ -270,4 +275,5 @@
>      }
>      return;
>    }
> +
>  }
> Index: src/java/org/apache/nutch/crawl/LinkDb.java
> ===================================================================
> --- src/java/org/apache/nutch/crawl/LinkDb.java	(revision 374779)
> +++ src/java/org/apache/nutch/crawl/LinkDb.java	(working copy)
> @@ -118,7 +118,8 @@
>      output.collect(key, result);
>    }
>  
> -
> +  public void finished() {}
> +	
>    public void invert(File linkDb, File segmentsDir) throws IOException {
>      LOG.info("LinkDb: starting");
>      LOG.info("LinkDb: linkdb: " + linkDb);
> Index: src/java/org/apache/nutch/crawl/Injector.java
> ===================================================================
> --- src/java/org/apache/nutch/crawl/Injector.java	(revision 374779)
> +++ src/java/org/apache/nutch/crawl/Injector.java	(working copy)
> @@ -65,6 +65,8 @@
>                                               interval));
>        }
>      }
> +    
> +    public void finished() {}
>    }
>  
>    /** Combine multiple new entries for a url. */
> @@ -76,6 +78,7 @@
>        throws IOException {
>        output.collect(key, (Writable)values.next()); // just collect first value
>      }
> +    public void finished() {}
>    }
>  
>    /** Construct an Injector. */
> Index: src/java/org/apache/nutch/crawl/Generator.java
> ===================================================================
> --- src/java/org/apache/nutch/crawl/Generator.java	(revision 374779)
> +++ src/java/org/apache/nutch/crawl/Generator.java	(working copy)
> @@ -63,6 +63,8 @@
>        output.collect(crawlDatum, key);          // invert for sort by score
>      }
>  
> +    public void finished() {}
> +    
>      /** Partition by host (value). */
>      public int getPartition(WritableComparable key, Writable value,
>                              int numReduceTasks) {
> Index: src/java/org/apache/nutch/crawl/CrawlDbReducer.java
> ===================================================================
> --- src/java/org/apache/nutch/crawl/CrawlDbReducer.java	(revision 374781)
> +++ src/java/org/apache/nutch/crawl/CrawlDbReducer.java	(working copy)
> @@ -115,4 +115,5 @@
>      }
>    }
>  
> +  public void finished() {}
>  }
> Index: src/java/org/apache/nutch/parse/ParseSegment.java
> ===================================================================
> --- src/java/org/apache/nutch/parse/ParseSegment.java	(revision 374776)
> +++ src/java/org/apache/nutch/parse/ParseSegment.java	(working copy)
> @@ -78,6 +78,8 @@
>      throws IOException {
>      output.collect(key, (Writable)values.next()); // collect first value
>    }
> +  
> +  public void finished() {}
>  
>    public void parse(File segment) throws IOException {
>      LOG.info("Parse: starting");

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Feb  9 01:20:32 2006
Return-Path: 
 <hadoop-dev-return-73-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 26306 invoked from network); 9 Feb 2006 01:20:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 01:20:32 -0000
Received: (qmail 22019 invoked by uid 500); 9 Feb 2006 01:20:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 21976 invoked by uid 500); 9 Feb 2006 01:20:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 21967 invoked by uid 99); 9 Feb 2006 01:20:31 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 17:20:31 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id C6988CB
	for <hadoop-dev@lucene.apache.org>; Thu,  9 Feb 2006 02:20:10 +0100 (CET)
Message-ID: <1078757184.1139448010811.JavaMail.jira@ajax.apache.org>
Date: Thu, 9 Feb 2006 02:20:10 +0100 (CET)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-25) a new map/reduce example and moving the
 examples from src/java to src/examples
In-Reply-To: <187621972.1139267817333.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-25?page=all ]

Owen O'Malley updated HADOOP-25:
--------------------------------

    Attachment: find-jar.patch

There is one more problem with the example jar with the version, the string of the jar name was being set in the JobConf.

Clearly that doesn't work if the version is in the jar filename.

Here is a patch to WordCount that finds the jar file that contains a given class.

If we want to go this way, it should probably be in hadoop.utils somewhere.

Thoughts?

> a new map/reduce example and moving the examples from src/java to src/examples
> ------------------------------------------------------------------------------
>
>          Key: HADOOP-25
>          URL: http://issues.apache.org/jira/browse/HADOOP-25
>      Project: Hadoop
>         Type: Improvement
>   Components: mapred
>     Reporter: Owen O'Malley
>     Assignee: Doug Cutting
>     Priority: Minor
>  Attachments: examples-2.patch, examples-3.patch, examples.patch, find-jar.patch, tar-name-fix.patch
>
> The new example is the word count example from Google's paper. I moved the examples into a separate jar file to demonstrate how to run stand-alone application code.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Feb  9 01:47:21 2006
Return-Path: 
 <hadoop-dev-return-74-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 35873 invoked from network); 9 Feb 2006 01:47:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 01:47:21 -0000
Received: (qmail 43804 invoked by uid 500); 9 Feb 2006 01:47:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 43787 invoked by uid 500); 9 Feb 2006 01:47:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 43776 invoked by uid 99); 9 Feb 2006 01:47:20 -0000
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=INFO_TLD
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 17:47:20 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id AE1FDCB
	for <hadoop-dev@lucene.apache.org>; Thu,  9 Feb 2006 02:46:58 +0100 (CET)
Message-ID: <470467228.1139449618710.JavaMail.jira@ajax.apache.org>
Date: Thu, 9 Feb 2006 02:46:58 +0100 (CET)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-20) Mapper, Reducer need an occasion to
 cleanup after the last record is processed.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-20?page=all ]

Michel Tourn updated HADOOP-20:
-------------------------------

    Attachment: mrclose.patch

Here is the updated patch:
right package names and close() instead of finished()


> Mapper, Reducer need an occasion to cleanup after the last record is processed.
> -------------------------------------------------------------------------------
>
>          Key: HADOOP-20
>          URL: http://issues.apache.org/jira/browse/HADOOP-20
>      Project: Hadoop
>         Type: Improvement
>   Components: mapred
>  Environment: Linux
>     Reporter: Michel Tourn
>  Attachments: mapredfinished.log, mrclose.patch
>
> Mapper, Reducer need an occasion to do some cleanup after the last record is processed.
> Proposal (patch attached)
> in interface Mapper:
>  add method void finished();
> in interface Reducer:
>  add method void finished();
> finished() methods are called from MapTask, CombiningCollector, ReduceTask.
> ------------
> Known limitation: Fetcher (a multithreaded MapRunnable) does not call finished().
> This is not currently a problem bec. fetcher Map/Reduce modules do not do anything in finished().
> The right way to add finished() support to Fetcher would be to wait for all threads to finish, 
> then do:
>      if (collector instanceof CombiningCollector) ((CombiningCollector)collector).finished();
> ------------
> patch begins: (svn trunk)
> Index: src/test/org/apache/nutch/mapred/MapredLoadTest.java
> ===================================================================
> --- src/test/org/apache/nutch/mapred/MapredLoadTest.java	(revision 374781)
> +++ src/test/org/apache/nutch/mapred/MapredLoadTest.java	(working copy)
> @@ -69,6 +69,8 @@
>                  out.collect(new IntWritable(Math.abs(r.nextInt())), new IntWritable(randomVal));
>              }
>          }
> +        public void finished() {
> +        }
>      }
>      static class RandomGenReducer implements Reducer {
>          public void configure(JobConf job) {
> @@ -81,6 +83,8 @@
>                  out.collect(new UTF8("" + val), new UTF8(""));
>              }
>          }
> +        public void finished() {
> +        }
>      }
>      static class RandomCheckMapper implements Mapper {
>          public void configure(JobConf job) {
> @@ -92,6 +96,8 @@
>  
>              out.collect(new IntWritable(Integer.parseInt(str.toString().trim())), new IntWritable(1));
>          }
> +        public void finished() {
> +        }
>      }
>      static class RandomCheckReducer implements Reducer {
>          public void configure(JobConf job) {
> @@ -106,6 +112,8 @@
>              }
>              out.collect(new IntWritable(keyint), new IntWritable(count));
>          }
> +        public void finished() {
> +        }
>      }
>  
>      int range;
> Index: src/test/org/apache/nutch/fs/TestNutchFileSystem.java
> ===================================================================
> --- src/test/org/apache/nutch/fs/TestNutchFileSystem.java	(revision 374783)
> +++ src/test/org/apache/nutch/fs/TestNutchFileSystem.java	(working copy)
> @@ -155,6 +155,8 @@
>  
>        reporter.setStatus("wrote " + name);
>      }
> +    
> +    public void finished() {}
>    }
>  
>    public static void writeTest(NutchFileSystem fs, boolean fastCheck)
> @@ -247,6 +249,9 @@
>  
>        reporter.setStatus("read " + name);
>      }
> +    
> +    public void finished() {}
> +    
>    }
>  
>    public static void readTest(NutchFileSystem fs, boolean fastCheck)
> @@ -339,6 +344,9 @@
>          in.close();
>        }
>      }
> +    
> +    public void finished() {}
> +    
>    }
>  
>    public static void seekTest(NutchFileSystem fs, boolean fastCheck)
> Index: src/java/org/apache/nutch/indexer/DeleteDuplicates.java
> ===================================================================
> --- src/java/org/apache/nutch/indexer/DeleteDuplicates.java	(revision 374776)
> +++ src/java/org/apache/nutch/indexer/DeleteDuplicates.java	(working copy)
> @@ -225,6 +225,7 @@
>          }
>        }
>      }
> +    public void finished() {}
>    }
>      
>    private NutchFileSystem fs;
> @@ -265,6 +266,8 @@
>        reader.close();
>      }
>    }
> +  
> +  public void finished() {}
>  
>    /** Write nothing. */
>    public RecordWriter getRecordWriter(final NutchFileSystem fs,
> Index: src/java/org/apache/nutch/indexer/Indexer.java
> ===================================================================
> --- src/java/org/apache/nutch/indexer/Indexer.java	(revision 374778)
> +++ src/java/org/apache/nutch/indexer/Indexer.java	(working copy)
> @@ -227,6 +227,8 @@
>  
>      output.collect(key, new ObjectWritable(doc));
>    }
> +  
> +  public void finished() {}
>  
>    public void index(File indexDir, File crawlDb, File linkDb, File[] segments)
>      throws IOException {
> Index: src/java/org/apache/nutch/segment/SegmentReader.java
> ===================================================================
> --- src/java/org/apache/nutch/segment/SegmentReader.java	(revision 374778)
> +++ src/java/org/apache/nutch/segment/SegmentReader.java	(working copy)
> @@ -143,7 +143,9 @@
>      }
>      output.collect(key, new ObjectWritable(dump.toString()));
>    }
> -
> +  
> +  public void finished() {}
> +  
>    public void reader(File segment) throws IOException {
>      LOG.info("Reader: segment: " + segment);
>  
> Index: src/java/org/apache/nutch/mapred/Mapper.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/Mapper.java	(revision 374737)
> +++ src/java/org/apache/nutch/mapred/Mapper.java	(working copy)
> @@ -39,4 +39,9 @@
>    void map(WritableComparable key, Writable value,
>             OutputCollector output, Reporter reporter)
>      throws IOException;
> +
> +  /** Called after the last {@link #map} call on this Mapper object.
> +      Typical implementations do nothing.
> +  */
> +  void finished();
>  }
> Index: src/java/org/apache/nutch/mapred/lib/RegexMapper.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/lib/RegexMapper.java	(revision 374737)
> +++ src/java/org/apache/nutch/mapred/lib/RegexMapper.java	(working copy)
> @@ -53,4 +53,5 @@
>        output.collect(new UTF8(matcher.group(group)), new LongWritable(1));
>      }
>    }
> +  public void finished() {}
>  }
> Index: src/java/org/apache/nutch/mapred/lib/InverseMapper.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/lib/InverseMapper.java	(revision 374737)
> +++ src/java/org/apache/nutch/mapred/lib/InverseMapper.java	(working copy)
> @@ -38,4 +38,6 @@
>      throws IOException {
>      output.collect((WritableComparable)value, key);
>    }
> +
> +  public void finished() {}
>  }
> Index: src/java/org/apache/nutch/mapred/lib/IdentityReducer.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/lib/IdentityReducer.java	(revision 374737)
> +++ src/java/org/apache/nutch/mapred/lib/IdentityReducer.java	(working copy)
> @@ -42,4 +42,5 @@
>      }
>    }
>  
> +  public void finished() {}
>  }
> Index: src/java/org/apache/nutch/mapred/lib/IdentityMapper.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/lib/IdentityMapper.java	(revision 374737)
> +++ src/java/org/apache/nutch/mapred/lib/IdentityMapper.java	(working copy)
> @@ -39,4 +39,5 @@
>      output.collect(key, val);
>    }
>  
> +  public void finished() {}
>  }
> Index: src/java/org/apache/nutch/mapred/lib/LongSumReducer.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/lib/LongSumReducer.java	(revision 374737)
> +++ src/java/org/apache/nutch/mapred/lib/LongSumReducer.java	(working copy)
> @@ -47,4 +47,6 @@
>      // output sum
>      output.collect(key, new LongWritable(sum));
>    }
> +
> +  public void finished() {}
>  }
> Index: src/java/org/apache/nutch/mapred/lib/TokenCountMapper.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/lib/TokenCountMapper.java	(revision 374737)
> +++ src/java/org/apache/nutch/mapred/lib/TokenCountMapper.java	(working copy)
> @@ -50,4 +50,6 @@
>        output.collect(new UTF8(st.nextToken()), new LongWritable(1));
>      }
>    }
> +
> +  public void finished() {}
>  }
> Index: src/java/org/apache/nutch/mapred/ReduceTask.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/ReduceTask.java	(revision 374781)
> +++ src/java/org/apache/nutch/mapred/ReduceTask.java	(working copy)
> @@ -275,6 +275,7 @@
>        }
>  
>      } finally {
> +      reducer.finished();
>        in.close();
>        lfs.delete(new File(sortedFile));           // remove sorted
>        out.close(reporter);
> Index: src/java/org/apache/nutch/mapred/MapTask.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/MapTask.java	(revision 374737)
> +++ src/java/org/apache/nutch/mapred/MapTask.java	(working copy)
> @@ -50,7 +50,7 @@
>    public void write(DataOutput out) throws IOException {
>      super.write(out);
>      split.write(out);
> -    
> +
>    }
>    public void readFields(DataInput in) throws IOException {
>      super.readFields(in);
> @@ -126,6 +126,10 @@
>          }
>  
>        } finally {
> +        if (combining) {
> +          ((CombiningCollector)collector).finished();
> +        }
> +
>          in.close();                               // close input
>        }
>      } finally {
> @@ -147,5 +151,5 @@
>    public NutchConf getConf() {
>      return this.nutchConf;
>    }
> -  
> +
>  }
> Index: src/java/org/apache/nutch/mapred/MapRunner.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/MapRunner.java	(revision 374737)
> +++ src/java/org/apache/nutch/mapred/MapRunner.java	(working copy)
> @@ -38,18 +38,22 @@
>    public void run(RecordReader input, OutputCollector output,
>                    Reporter reporter)
>      throws IOException {
> -    while (true) {
> -      // allocate new key & value instances
> -      WritableComparable key =
> -        (WritableComparable)job.newInstance(inputKeyClass);
> -      Writable value = (Writable)job.newInstance(inputValueClass);
> +    try {
> +      while (true) {
> +        // allocate new key & value instances
> +        WritableComparable key =
> +          (WritableComparable)job.newInstance(inputKeyClass);
> +        Writable value = (Writable)job.newInstance(inputValueClass);
>  
> -      // read next key & value
> -      if (!input.next(key, value))
> -        return;
> +        // read next key & value
> +        if (!input.next(key, value))
> +          return;
>  
> -      // map pair to output
> -      mapper.map(key, value, output, reporter);
> +        // map pair to output
> +        mapper.map(key, value, output, reporter);
> +      }
> +    } finally {
> +        mapper.finished();
>      }
>    }
>  
> Index: src/java/org/apache/nutch/mapred/CombiningCollector.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/CombiningCollector.java	(revision 374780)
> +++ src/java/org/apache/nutch/mapred/CombiningCollector.java	(working copy)
> @@ -78,4 +78,9 @@
>      count = 0;
>    }
>  
> +  public synchronized void finished()
> +  {
> +    combiner.finished();
> +  }
> +
>  }
> Index: src/java/org/apache/nutch/mapred/Reducer.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/Reducer.java	(revision 374737)
> +++ src/java/org/apache/nutch/mapred/Reducer.java	(working copy)
> @@ -38,4 +38,10 @@
>    void reduce(WritableComparable key, Iterator values,
>                OutputCollector output, Reporter reporter)
>      throws IOException;
> +
> +  /** Called after the last {@link #reduce} call on this Reducer object.
> +      Typical implementations do nothing.
> +  */
> +  void finished();
> +
>  }
> Index: src/java/org/apache/nutch/crawl/CrawlDbReader.java
> ===================================================================
> --- src/java/org/apache/nutch/crawl/CrawlDbReader.java	(revision 374737)
> +++ src/java/org/apache/nutch/crawl/CrawlDbReader.java	(working copy)
> @@ -50,9 +50,9 @@
>  
>  /**
>   * Read utility for the CrawlDB.
> - * 
> + *
>   * @author Andrzej Bialecki
> - * 
> + *
>   */
>  public class CrawlDbReader {
>  
> @@ -68,6 +68,7 @@
>        output.collect(new UTF8("retry"), new LongWritable(cd.getRetriesSinceFetch()));
>        output.collect(new UTF8("score"), new LongWritable((long) (cd.getScore() * 1000.0)));
>      }
> +    public void finished() {}
>    }
>  
>    public static class CrawlDbStatReducer implements Reducer {
> @@ -121,6 +122,7 @@
>          output.collect(new UTF8("avg score"), new LongWritable(total / cnt));
>        }
>      }
> +    public void finished() {}
>    }
>  
>    public static class CrawlDbDumpReducer implements Reducer {
> @@ -133,8 +135,11 @@
>  
>      public void configure(JobConf job) {
>      }
> +
> +    public void finished() {
> +    }
>    }
> -  
> +
>    public void processStatJob(String crawlDb, NutchConf config) throws IOException {
>      LOG.info("CrawlDb statistics start: " + crawlDb);
>      File tmpFolder = new File(crawlDb, "stat_tmp" + System.currentTimeMillis());
> @@ -219,7 +224,7 @@
>        System.out.println("not found");
>      }
>    }
> -  
> +
>    public void processDumpJob(String crawlDb, String output, NutchConf config) throws IOException {
>  
>      LOG.info("CrawlDb dump: starting");
> @@ -270,4 +275,5 @@
>      }
>      return;
>    }
> +
>  }
> Index: src/java/org/apache/nutch/crawl/LinkDb.java
> ===================================================================
> --- src/java/org/apache/nutch/crawl/LinkDb.java	(revision 374779)
> +++ src/java/org/apache/nutch/crawl/LinkDb.java	(working copy)
> @@ -118,7 +118,8 @@
>      output.collect(key, result);
>    }
>  
> -
> +  public void finished() {}
> +	
>    public void invert(File linkDb, File segmentsDir) throws IOException {
>      LOG.info("LinkDb: starting");
>      LOG.info("LinkDb: linkdb: " + linkDb);
> Index: src/java/org/apache/nutch/crawl/Injector.java
> ===================================================================
> --- src/java/org/apache/nutch/crawl/Injector.java	(revision 374779)
> +++ src/java/org/apache/nutch/crawl/Injector.java	(working copy)
> @@ -65,6 +65,8 @@
>                                               interval));
>        }
>      }
> +    
> +    public void finished() {}
>    }
>  
>    /** Combine multiple new entries for a url. */
> @@ -76,6 +78,7 @@
>        throws IOException {
>        output.collect(key, (Writable)values.next()); // just collect first value
>      }
> +    public void finished() {}
>    }
>  
>    /** Construct an Injector. */
> Index: src/java/org/apache/nutch/crawl/Generator.java
> ===================================================================
> --- src/java/org/apache/nutch/crawl/Generator.java	(revision 374779)
> +++ src/java/org/apache/nutch/crawl/Generator.java	(working copy)
> @@ -63,6 +63,8 @@
>        output.collect(crawlDatum, key);          // invert for sort by score
>      }
>  
> +    public void finished() {}
> +    
>      /** Partition by host (value). */
>      public int getPartition(WritableComparable key, Writable value,
>                              int numReduceTasks) {
> Index: src/java/org/apache/nutch/crawl/CrawlDbReducer.java
> ===================================================================
> --- src/java/org/apache/nutch/crawl/CrawlDbReducer.java	(revision 374781)
> +++ src/java/org/apache/nutch/crawl/CrawlDbReducer.java	(working copy)
> @@ -115,4 +115,5 @@
>      }
>    }
>  
> +  public void finished() {}
>  }
> Index: src/java/org/apache/nutch/parse/ParseSegment.java
> ===================================================================
> --- src/java/org/apache/nutch/parse/ParseSegment.java	(revision 374776)
> +++ src/java/org/apache/nutch/parse/ParseSegment.java	(working copy)
> @@ -78,6 +78,8 @@
>      throws IOException {
>      output.collect(key, (Writable)values.next()); // collect first value
>    }
> +  
> +  public void finished() {}
>  
>    public void parse(File segment) throws IOException {
>      LOG.info("Parse: starting");

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Feb  9 02:23:02 2006
Return-Path: 
 <hadoop-dev-return-75-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 55053 invoked from network); 9 Feb 2006 02:23:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 02:23:02 -0000
Received: (qmail 75421 invoked by uid 500); 9 Feb 2006 02:23:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75397 invoked by uid 500); 9 Feb 2006 02:23:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75388 invoked by uid 99); 9 Feb 2006 02:23:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 18:23:01 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of bpendleton@gmail.com designates
 64.233.162.195 as permitted sender)
Received: from [64.233.162.195] (HELO zproxy.gmail.com) (64.233.162.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 18:23:00 -0800
Received: by zproxy.gmail.com with SMTP id 13so50479nzn
        for <hadoop-dev@lucene.apache.org>;
 Wed, 08 Feb 2006 18:22:40 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references;
        b=mnH/feiJKO4dhB/aBLvFkm/3sS7zvsEUDkAp9r2iYkyrnuaKTOywQdFDkJdHNtHU2IqzMPdet3hZE9GiiSiTgBC0OW9+hi2RmZbtT7bFDAwNhzSKJUZTcV9igYdCS6fcquHVseCjYDpb/FilQJuK88Go07swKFh+7InwDMZTXak=
Received: by 10.65.252.17 with SMTP id e17mr444655qbs;
        Wed, 08 Feb 2006 18:22:40 -0800 (PST)
Received: by 10.65.232.5 with HTTP; Wed, 8 Feb 2006 18:22:39 -0800 (PST)
Message-ID: <1bf79d3e0602081822p68abaee2h3e6c52c94bce75c9@mail.gmail.com>
Date: Wed, 8 Feb 2006 18:22:39 -0800
From: "Bryan A. Pendleton" <bp@geekdom.net>
Sender: bpendleton@gmail.com
To: hadoop-dev@lucene.apache.org
Subject: Re: can not start jobtracker
In-Reply-To: <949FDE88-D958-4328-8DC7-EDFCCADD48C5@media-style.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_Part_12590_31437686.1139451759988"
References: <949FDE88-D958-4328-8DC7-EDFCCADD48C5@media-style.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_12590_31437686.1139451759988
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

SSdtIHN0dWNrIG9uIHRoaXMgdG9vLiBXaGVuIEkgaGl0IHRoZSB0b3AgbGV2ZWwgb2YgdGhlIHdl
YiBzdGF0dXMgcGFnZSwKdGhlcmUncyBhIHNlcnZlciBydW5uaW5nLCBidXQgaXQgc2F5cyB0aGlz
OgotLS0KRXJyb3IgNDA0IC0gTm90IEZvdW5kLiBObyBjb250ZXh0IG9uIHRoaXMgc2VydmVyIG1h
dGNoZWQgb3IgaGFuZGxlZCB0aGlzCnJlcXVlc3QuCkNvbnRleHRzIGtub3duIHRvIHRoaXMgc2Vy
dmVyIGFyZToKCiAgIC0gV2ViQXBwbGljYXRpb25Db250ZXh0Wy8sL10gPGh0dHA6Ly8vPgoKKlRo
ZSBsaW5rcyBhYm92ZSBtYXkgbm90IHdvcmsgaWYgYSB2aXJ0dWFsIGhvc3QgaXMgY29uZmlndXJl
ZAotLS0qCkFuZCB3aGVuIEkgdHJ5IHRvIGxvYWQgL2pvYnRyYWNrZXIuanNwOgotLS0KSFRUUCBF
UlJPUjogNDA0Cgovam9idHJhY2tlci5qc3AgTm90IEZvdW5kCgpSZXF1ZXN0VVJJPS9qb2J0cmFj
a2VyLmpzcAoKKlBvd2VyZWQgYnkgSmV0dHk6Ly8gPGh0dHA6Ly9qZXR0eS5tb3J0YmF5Lm9yZy8+
KgoKQWZ0ZXJ3YXJkLCBJIGdldCB0aGUgZm9sbG93aW5nIGVycm9yIG1lc3NhZ2Ugb25jZSBwZXIg
c2VjOgowNjAyMDggMTgxMzM3IFN0YXJ0aW5nIHRyYWNrZXIKamF2YS5uZXQuQmluZEV4Y2VwdGlv
bjogQWRkcmVzcyBhbHJlYWR5IGluIHVzZQogICAgICAgIGF0IGphdmEubmV0LlBsYWluU29ja2V0
SW1wbC5zb2NrZXRCaW5kKE5hdGl2ZSBNZXRob2QpCiAgICAgICAgYXQgamF2YS5uZXQuUGxhaW5T
b2NrZXRJbXBsLmJpbmQoUGxhaW5Tb2NrZXRJbXBsLmphdmE6MzMxKQogICAgICAgIGF0IGphdmEu
bmV0LlNlcnZlclNvY2tldC5iaW5kKFNlcnZlclNvY2tldC5qYXZhOjMxOCkKICAgICAgICBhdCBq
YXZhLm5ldC5TZXJ2ZXJTb2NrZXQuPGluaXQ+KFNlcnZlclNvY2tldC5qYXZhOjE4NSkKICAgICAg
ICBhdCBqYXZhLm5ldC5TZXJ2ZXJTb2NrZXQgLjxpbml0PihTZXJ2ZXJTb2NrZXQuamF2YTo5NykK
ICAgICAgICBhdCBvcmcuYXBhY2hlLmhhZG9vcC5pcGMuU2VydmVyJExpc3RlbmVyLjxpbml0PihT
ZXJ2ZXIuamF2YTo4MCkKICAgICAgICBhdCBvcmcuYXBhY2hlLmhhZG9vcC5pcGMuU2VydmVyLnN0
YXJ0KFNlcnZlci5qYXZhOjI0NCkKICAgICAgICBhdCBvcmcuYXBhY2hlLmhhZG9vcC5tYXByZWQu
Sm9iVHJhY2tlciAuPGluaXQ+KEpvYlRyYWNrZXIuamF2YToyOTQpCiAgICAgICAgYXQgb3JnLmFw
YWNoZS5oYWRvb3AubWFwcmVkLkpvYlRyYWNrZXIuc3RhcnRUcmFja2VyKEpvYlRyYWNrZXIuamF2
YQo6NTApCiAgICAgICAgYXQgb3JnLmFwYWNoZS5oYWRvb3AubWFwcmVkLkpvYlRyYWNrZXIubWFp
bihKb2JUcmFja2VyLmphdmE6ODEzKQoKCgpPbiAyLzgvMDYsIE1hcmtvIEJhdWhhcmR0IDxtYkBt
ZWRpYS1zdHlsZS5jb20+IHdyb3RlOgo+Cj4gSGksCj4gaSBjaGVja291dCB0aGUgbGF0ZXN0IHNv
dXJjZXMgYW4gdHJ5IHRvIHN0YXJ0IHRoZSBqb2J0cmFja2VyIGFuZCBnZXQKPiB0aGUgZm9sbG93
aW5nIGV4Y2VwdGlvbi4KPgo+Cj4gb3JnLnhtbC5zYXguU0FYUGFyc2VFeGNlcHRpb246IEVsZW1l
bnR0eXAgIndlYi1hcHAiIGlzdCBuaWNodAo+IGRla2xhcmllcnQuCj4gICAgICAgICBhdCBvcmcu
YXBhY2hlLmNyaW1zb24ucGFyc2VyLlBhcnNlcjIuZXJyb3IgKFBhcnNlcjIuamF2YTozMzU0KQo+
ICAgICAgICAgYXQgb3JnLmFwYWNoZS5jcmltc29uLnBhcnNlci5QYXJzZXIyLm1heWJlRWxlbWVu
dChQYXJzZXIyLmphdmEKPiA6MTUwMikKPiAgICAgICAgIGF0IG9yZy5hcGFjaGUuY3JpbXNvbi5w
YXJzZXIuUGFyc2VyMi5wYXJzZUludGVybmFsKFBhcnNlcjIuamF2YQo+IDo2NjcpCj4gICAgICAg
ICBhdCBvcmcuYXBhY2hlLmNyaW1zb24ucGFyc2VyLlBhcnNlcjIucGFyc2UgKFBhcnNlcjIuamF2
YTozMzcpCj4gICAgICAgICBhdCBvcmcuYXBhY2hlLmNyaW1zb24ucGFyc2VyLlhNTFJlYWRlcklt
cGwucGFyc2UoCj4gWE1MUmVhZGVySW1wbC5qYXZhOgo+IDQ0OCkKPiAgICAgICAgIGF0IGphdmF4
LnhtbC5wYXJzZXJzLlNBWFBhcnNlci5wYXJzZShTQVhQYXJzZXIuamF2YTozNDUpCj4gICAgICAg
ICBhdCBvcmcubW9ydGJheS54bWwuWG1sUGFyc2VyLnBhcnNlICggWG1sUGFyc2VyLmphdmE6MjE2
KQo+ICAgICAgICAgYXQgb3JnLm1vcnRiYXkueG1sLlhtbFBhcnNlci5wYXJzZShYbWxQYXJzZXIu
amF2YToyMzQpCj4gICAgICAgICBhdCBvcmcubW9ydGJheS5qZXR0eS5zZXJ2bGV0LlhNTENvbmZp
Z3VyYXRpb24uY29uZmlndXJlRGVmYXVsdHMKPiAoWE1MQ29uZmlndXJhdGlvbi5qYXZhOjE1OSkK
PiAgICAgICAgIGF0Cj4gb3JnLm1vcnRiYXkuamV0dHkuc2VydmxldC5XZWJBcHBsaWNhdGlvbkNv
bnRleHQuY29uZmlndXJlRGVmYXVsdHMKPiAoV2ViQXBwbGljYXRpb25Db250ZXh0LmphdmE6NDE0
KQo+ICAgICAgICAgYXQgb3JnLm1vcnRiYXkuamV0dHkuc2VydmxldC5XZWJBcHBsaWNhdGlvbkNv
bnRleHQuZG9TdGFydAo+IChXZWJBcHBsaWNhdGlvbkNvbnRleHQuamF2YTo0NjMpCj4gICAgICAg
ICBhdCBvcmcubW9ydGJheS51dGlsLkNvbnRhaW5lci5zdGFydChDb250YWluZXIuamF2YTo3MikK
PiAgICAgICAgIGF0IG9yZy5tb3J0YmF5Lmh0dHAuSHR0cFNlcnZlci5kb1N0YXJ0KEh0dHBTZXJ2
ZXIuamF2YTo3NTMpCj4gICAgICAgICBhdCBvcmcubW9ydGJheS51dGlsLkNvbnRhaW5lci5zdGFy
dChDb250YWluZXIuamF2YTo3MikKPiAgICAgICAgIGF0IG9yZy5hcGFjaGUuaGFkb29wLm1hcHJl
ZC5Kb2JUcmFja2VySW5mb1NlcnZlciRIVFRQU3RhcnRlci5ydW4KPiAoSm9iVHJhY2tlckluZm9T
ZXJ2ZXIuamF2YSA6ODcpCj4gICAgICAgICBhdCBqYXZhLmxhbmcuVGhyZWFkLnJ1bihUaHJlYWQu
amF2YTo1NTIpCj4KPiAoU291bmRzIGxpa2UgYSBtaXNzZWQgb3IgaW52YWxpZCB3ZWIueG1sPykK
Pgo+IFdoYXQgYW0gaSBkb2luZyB3cm9uZz8KPgo+IFRoYW5rcyBmb3IgYW55IGhlbHAuCj4KPiBN
YXJrbwo+Cj4KPgo+CgoKLS0KQnJ5YW4gQS4gUGVuZGxldG9uClBoOiAoODc3KSBnZWVrLTEtYnAK
------=_Part_12590_31437686.1139451759988--

From MAILER-DAEMON Thu Feb  9 03:18:14 2006
Return-Path: 
 <hadoop-dev-return-76-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 80394 invoked from network); 9 Feb 2006 03:18:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 03:18:14 -0000
Received: (qmail 27864 invoked by uid 500); 9 Feb 2006 03:18:14 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 27844 invoked by uid 500); 9 Feb 2006 03:18:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 27835 invoked by uid 99); 9 Feb 2006 03:18:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 19:18:13 -0800
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.115.57.43] (HELO ylpvm12.prodigy.net) (207.115.57.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 19:18:13 -0800
Received: from pimout6-ext.prodigy.net (pimout6-int.prodigy.net
 [207.115.4.22])
	by ylpvm12.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id
 k193Hk34026559
	for <hadoop-dev@lucene.apache.org>; Wed, 8 Feb 2006 22:17:46 -0500
X-ORBL: [69.228.232.128]
Received: from [192.168.168.15] (adsl-69-228-232-128.dsl.pltn13.pacbell.net
 [69.228.232.128])
	by pimout6-ext.prodigy.net (8.13.4 outbound domainkey aix/8.13.4) with ESMTP
 id k193HkF9014228;
	Wed, 8 Feb 2006 22:17:48 -0500
Message-ID: <43EAB46B.1070004@apache.org>
Date: Wed, 08 Feb 2006 19:18:03 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: can not start jobtracker
References: <949FDE88-D958-4328-8DC7-EDFCCADD48C5@media-style.com>
 <1bf79d3e0602081822p68abaee2h3e6c52c94bce75c9@mail.gmail.com>
In-Reply-To: <1bf79d3e0602081822p68abaee2h3e6c52c94bce75c9@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Bryan A. Pendleton wrote:
> I'm stuck on this too. When I hit the top level of the web status page,
> there's a server running, but it says this:
> ---
> Error 404 - Not Found. No context on this server matched or handled this

I think I fixed this today.  Are you running the nightly build, or have 
you updated from subversion?

> Afterward, I get the following error message once per sec:
> 060208 181337 Starting tracker
> java.net.BindException: Address already in use
>         at java.net.PlainSocketImpl.socketBind(Native Method)
>         at java.net.PlainSocketImpl.bind(PlainSocketImpl.java:331)
>         at java.net.ServerSocket.bind(ServerSocket.java:318)
>         at java.net.ServerSocket.<init>(ServerSocket.java:185)
>         at java.net.ServerSocket .<init>(ServerSocket.java:97)
>         at org.apache.hadoop.ipc.Server$Listener.<init>(Server.java:80)
>         at org.apache.hadoop.ipc.Server.start(Server.java:244)
>         at org.apache.hadoop.mapred.JobTracker .<init>(JobTracker.java:294)
>         at org.apache.hadoop.mapred.JobTracker.startTracker(JobTracker.java
> :50)
>         at org.apache.hadoop.mapred.JobTracker.main(JobTracker.java:813)

That looks like there's another jobtracker still running.  Are you sure 
you stopped the old daemon?

Doug

From MAILER-DAEMON Thu Feb  9 08:09:37 2006
Return-Path: 
 <hadoop-dev-return-77-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84776 invoked from network); 9 Feb 2006 08:09:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 08:09:37 -0000
Received: (qmail 27826 invoked by uid 500); 9 Feb 2006 08:09:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 27783 invoked by uid 500); 9 Feb 2006 08:09:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 27773 invoked by uid 99); 9 Feb 2006 08:09:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 00:09:36 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of bpendleton@gmail.com designates
 64.233.162.200 as permitted sender)
Received: from [64.233.162.200] (HELO zproxy.gmail.com) (64.233.162.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 00:09:36 -0800
Received: by zproxy.gmail.com with SMTP id 8so109017nzo
        for <hadoop-dev@lucene.apache.org>;
 Thu, 09 Feb 2006 00:09:15 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references;
        b=iPW6JHDh4dTtiUqWihMu6O3/ernwsadFz4Jr9hlT3rimx3sDBkPLgeaQKMHe4wdTBDeLbAa5PwKUif+yJGUrDIhILioPQx4B7rgIhN5ghnDxD+IVq0AQ4vBUcl+vMPFZeqnxcm+ms0HSYy4dn3xjRe0FnJRADP0/7L6wEeg6dKM=
Received: by 10.65.236.20 with SMTP id n20mr2166312qbr;
        Thu, 09 Feb 2006 00:09:14 -0800 (PST)
Received: by 10.65.232.5 with HTTP; Thu, 9 Feb 2006 00:09:14 -0800 (PST)
Message-ID: <1bf79d3e0602090009n55f76c97ve2e500dc39c8cf9f@mail.gmail.com>
Date: Thu, 9 Feb 2006 00:09:14 -0800
From: "Bryan A. Pendleton" <bp@geekdom.net>
Sender: bpendleton@gmail.com
To: hadoop-dev@lucene.apache.org
Subject: Re: can not start jobtracker
In-Reply-To: <43EAB46B.1070004@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_Part_15324_6168817.1139472554562"
References: <949FDE88-D958-4328-8DC7-EDFCCADD48C5@media-style.com>
	 <1bf79d3e0602081822p68abaee2h3e6c52c94bce75c9@mail.gmail.com>
	 <43EAB46B.1070004@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_15324_6168817.1139472554562
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

SSdtIHN0aWxsIGdldHRpbmcgdGhlIHNhbWUgcHJvYmxlbSB3aXRoIGxhdGVzdCBmcm9tIHN2bi4g
QmVmb3JlIHN0YXJ0aW5nCnRoaW5ncyB1cCwgSSBjaGVja2VkLCBhbmQgdGhlcmUgd2VyZSBubyBv
dGhlciBqYXZhIHRhc2tzIHJ1bm5pbmcuCgpPbiAyLzgvMDYsIERvdWcgQ3V0dGluZyA8Y3V0dGlu
Z0BhcGFjaGUub3JnPiB3cm90ZToKPgo+IEJyeWFuIEEuIFBlbmRsZXRvbiB3cm90ZToKPiA+IEkn
bSBzdHVjayBvbiB0aGlzIHRvby4gV2hlbiBJIGhpdCB0aGUgdG9wIGxldmVsIG9mIHRoZSB3ZWIg
c3RhdHVzIHBhZ2UsCj4gPiB0aGVyZSdzIGEgc2VydmVyIHJ1bm5pbmcsIGJ1dCBpdCBzYXlzIHRo
aXM6Cj4gPiAtLS0KPiA+IEVycm9yIDQwNCAtIE5vdCBGb3VuZC4gTm8gY29udGV4dCBvbiB0aGlz
IHNlcnZlciBtYXRjaGVkIG9yIGhhbmRsZWQgdGhpcwo+Cj4gSSB0aGluayBJIGZpeGVkIHRoaXMg
dG9kYXkuICBBcmUgeW91IHJ1bm5pbmcgdGhlIG5pZ2h0bHkgYnVpbGQsIG9yIGhhdmUKPiB5b3Ug
dXBkYXRlZCBmcm9tIHN1YnZlcnNpb24/Cj4KPiA+IEFmdGVyd2FyZCwgSSBnZXQgdGhlIGZvbGxv
d2luZyBlcnJvciBtZXNzYWdlIG9uY2UgcGVyIHNlYzoKPiA+IDA2MDIwOCAxODEzMzcgU3RhcnRp
bmcgdHJhY2tlcgo+ID4gamF2YS5uZXQuQmluZEV4Y2VwdGlvbjogQWRkcmVzcyBhbHJlYWR5IGlu
IHVzZQo+ID4gICAgICAgICBhdCBqYXZhLm5ldC5QbGFpblNvY2tldEltcGwuc29ja2V0QmluZChO
YXRpdmUgTWV0aG9kKQo+ID4gICAgICAgICBhdCBqYXZhLm5ldC5QbGFpblNvY2tldEltcGwuYmlu
ZChQbGFpblNvY2tldEltcGwuamF2YTozMzEpCj4gPiAgICAgICAgIGF0IGphdmEubmV0LlNlcnZl
clNvY2tldC5iaW5kKFNlcnZlclNvY2tldC5qYXZhOjMxOCkKPiA+ICAgICAgICAgYXQgamF2YS5u
ZXQuU2VydmVyU29ja2V0Ljxpbml0PihTZXJ2ZXJTb2NrZXQuamF2YToxODUpCj4gPiAgICAgICAg
IGF0IGphdmEubmV0LlNlcnZlclNvY2tldCAuPGluaXQ+KFNlcnZlclNvY2tldC5qYXZhOjk3KQo+
ID4gICAgICAgICBhdCBvcmcuYXBhY2hlLmhhZG9vcC5pcGMuU2VydmVyJExpc3RlbmVyLjxpbml0
PihTZXJ2ZXIuamF2YTo4MCkKPiA+ICAgICAgICAgYXQgb3JnLmFwYWNoZS5oYWRvb3AuaXBjLlNl
cnZlci5zdGFydChTZXJ2ZXIuamF2YToyNDQpCj4gPiAgICAgICAgIGF0IG9yZy5hcGFjaGUuaGFk
b29wLm1hcHJlZC5Kb2JUcmFja2VyIC48aW5pdD4oSm9iVHJhY2tlci5qYXZhCj4gOjI5NCkKPiA+
ICAgICAgICAgYXQgb3JnLmFwYWNoZS5oYWRvb3AubWFwcmVkLkpvYlRyYWNrZXIuc3RhcnRUcmFj
a2VyKAo+IEpvYlRyYWNrZXIuamF2YQo+ID4gOjUwKQo+ID4gICAgICAgICBhdCBvcmcuYXBhY2hl
LmhhZG9vcC5tYXByZWQuSm9iVHJhY2tlci5tYWluKEpvYlRyYWNrZXIuamF2YTo4MTMpCj4KPiBU
aGF0IGxvb2tzIGxpa2UgdGhlcmUncyBhbm90aGVyIGpvYnRyYWNrZXIgc3RpbGwgcnVubmluZy4g
IEFyZSB5b3Ugc3VyZQo+IHlvdSBzdG9wcGVkIHRoZSBvbGQgZGFlbW9uPwo+Cj4gRG91Zwo+CgoK
Ci0tCkJyeWFuIEEuIFBlbmRsZXRvbgpQaDogKDg3NykgZ2Vlay0xLWJwCg==
------=_Part_15324_6168817.1139472554562--

From MAILER-DAEMON Thu Feb  9 08:52:54 2006
Return-Path: 
 <hadoop-dev-return-78-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 7800 invoked from network); 9 Feb 2006 08:52:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 08:52:54 -0000
Received: (qmail 62393 invoked by uid 500); 9 Feb 2006 08:52:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62373 invoked by uid 500); 9 Feb 2006 08:52:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62364 invoked by uid 99); 9 Feb 2006 08:52:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 00:52:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.122.60.61] (HELO mslinux.media-style.com) (212.122.60.61)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 00:52:52 -0800
Received: from localhost (localhost [127.0.0.1])
	by mslinux.media-style.com (Postfix) with ESMTP id 42E3714447D
	for <hadoop-dev@lucene.apache.org>; Thu,  9 Feb 2006 09:49:17 +0100 (CET)
Received: from mslinux.media-style.com ([127.0.0.1])
	by localhost (mslinux.media-style.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 25458-05 for <hadoop-dev@lucene.apache.org>;
	Thu, 9 Feb 2006 09:49:17 +0100 (CET)
Received: from [192.168.200.55] (unknown [212.122.60.61])
	by mslinux.media-style.com (Postfix) with ESMTP id 119BA144474
	for <hadoop-dev@lucene.apache.org>; Thu,  9 Feb 2006 09:49:17 +0100 (CET)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <949FDE88-D958-4328-8DC7-EDFCCADD48C5@media-style.com>
References: <949FDE88-D958-4328-8DC7-EDFCCADD48C5@media-style.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <84919F4C-7A60-4725-95BE-71B0702E67B7@media-style.com>
Content-Transfer-Encoding: 7bit
From: Marko Bauhardt <mb@media-style.com>
Subject: Re: can not start jobtracker
Date: Thu, 9 Feb 2006 09:47:35 +0100
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at media-style.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Ok, i think i found a solution. If i copy the xerces jars from nutch/ 
lib (xerces-2_6_2-apis.jar and xerces-2_6_2.jar) into hadoop/lib, the  
jobtracker starts successfully.

Marko


Am 08.02.2006 um 19:43 schrieb Marko Bauhardt:

> Hi,
> i checkout the latest sources an try to start the jobtracker and  
> get the following exception.
>
>
> org.xml.sax.SAXParseException: Elementtyp "web-app" ist nicht  
> deklariert.
> 	at org.apache.crimson.parser.Parser2.error(Parser2.java:3354)
> 	at org.apache.crimson.parser.Parser2.maybeElement(Parser2.java:1502)
> 	at org.apache.crimson.parser.Parser2.parseInternal(Parser2.java:667)
> 	at org.apache.crimson.parser.Parser2.parse(Parser2.java:337)
> 	at org.apache.crimson.parser.XMLReaderImpl.parse 
> (XMLReaderImpl.java:448)
> 	at javax.xml.parsers.SAXParser.parse(SAXParser.java:345)
> 	at org.mortbay.xml.XmlParser.parse(XmlParser.java:216)
> 	at org.mortbay.xml.XmlParser.parse(XmlParser.java:234)
> 	at org.mortbay.jetty.servlet.XMLConfiguration.configureDefaults 
> (XMLConfiguration.java:159)
> 	at  
> org.mortbay.jetty.servlet.WebApplicationContext.configureDefaults 
> (WebApplicationContext.java:414)
> 	at org.mortbay.jetty.servlet.WebApplicationContext.doStart 
> (WebApplicationContext.java:463)
> 	at org.mortbay.util.Container.start(Container.java:72)
> 	at org.mortbay.http.HttpServer.doStart(HttpServer.java:753)
> 	at org.mortbay.util.Container.start(Container.java:72)
> 	at org.apache.hadoop.mapred.JobTrackerInfoServer$HTTPStarter.run 
> (JobTrackerInfoServer.java:87)
> 	at java.lang.Thread.run(Thread.java:552)
>
> (Sounds like a missed or invalid web.xml?)
>
> What am i doing wrong?
>
> Thanks for any help.
>
> Marko
>
>


From MAILER-DAEMON Thu Feb  9 13:30:21 2006
Return-Path: 
 <hadoop-dev-return-79-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34372 invoked from network); 9 Feb 2006 13:30:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 13:30:21 -0000
Received: (qmail 63788 invoked by uid 500); 9 Feb 2006 13:30:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63736 invoked by uid 500); 9 Feb 2006 13:30:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63716 invoked by uid 99); 9 Feb 2006 13:30:20 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 05:30:18 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 635C5CB
	for <hadoop-dev@lucene.apache.org>; Thu,  9 Feb 2006 14:29:57 +0100 (CET)
Message-ID: <1354135139.1139491797405.JavaMail.jira@ajax.apache.org>
Date: Thu, 9 Feb 2006 14:29:57 +0100 (CET)
From: "Jerome Charron (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-29) JobConf newInstance() method imposes a
 default constructor
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

JobConf newInstance() method imposes a default constructor
----------------------------------------------------------

         Key: HADOOP-29
         URL: http://issues.apache.org/jira/browse/HADOOP-29
     Project: Hadoop
        Type: Improvement
  Components: mapred  
    Reporter: Jerome Charron
    Priority: Minor


The Nutch parse command fails, because the ParseSegment class has no default constructor.
However, ParseSegment extends Configured, so it can be directly instanciated with a Configuration parameter.


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Feb  9 13:32:22 2006
Return-Path: 
 <hadoop-dev-return-80-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 35412 invoked from network); 9 Feb 2006 13:32:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 13:32:22 -0000
Received: (qmail 67255 invoked by uid 500); 9 Feb 2006 13:32:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 67235 invoked by uid 500); 9 Feb 2006 13:32:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 67222 invoked by uid 99); 9 Feb 2006 13:32:21 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 05:32:18 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 0F1C0CB
	for <hadoop-dev@lucene.apache.org>; Thu,  9 Feb 2006 14:31:58 +0100 (CET)
Message-ID: <2059782954.1139491918059.JavaMail.jira@ajax.apache.org>
Date: Thu, 9 Feb 2006 14:31:58 +0100 (CET)
From: "Jerome Charron (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-29) JobConf newInstance() method imposes a
 default constructor
In-Reply-To: <1354135139.1139491797405.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-29?page=all ]

Jerome Charron updated HADOOP-29:
---------------------------------

    Attachment: HADOOP-29.patch

The attached patch directly uses the constructor with Configuration parameter if the class to instanciate extends Configurable.
(Tested with Nutch).

> JobConf newInstance() method imposes a default constructor
> ----------------------------------------------------------
>
>          Key: HADOOP-29
>          URL: http://issues.apache.org/jira/browse/HADOOP-29
>      Project: Hadoop
>         Type: Improvement
>   Components: mapred
>     Reporter: Jerome Charron
>     Priority: Minor
>  Attachments: HADOOP-29.patch
>
> The Nutch parse command fails, because the ParseSegment class has no default constructor.
> However, ParseSegment extends Configured, so it can be directly instanciated with a Configuration parameter.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Feb  9 16:46:20 2006
Return-Path: 
 <hadoop-dev-return-81-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 53307 invoked from network); 9 Feb 2006 16:46:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 16:46:20 -0000
Received: (qmail 9721 invoked by uid 500); 9 Feb 2006 16:46:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9705 invoked by uid 500); 9 Feb 2006 16:46:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9694 invoked by uid 99); 9 Feb 2006 16:46:20 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 08:46:19 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 11D15CB
	for <hadoop-dev@lucene.apache.org>; Thu,  9 Feb 2006 17:45:59 +0100 (CET)
Message-ID: <64176290.1139503559071.JavaMail.jira@ajax.apache.org>
Date: Thu, 9 Feb 2006 17:45:59 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-25) a new map/reduce example and moving
 the examples from src/java to src/examples
In-Reply-To: <187621972.1139267817333.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-25?page=comments#action_12365758 ] 

Doug Cutting commented on HADOOP-25:
------------------------------------

Ah, I missed that.

I like the idea of adding findContainingJar() as a public utility method somewhere.  This could a jobConf method, since it is very relevant to jobs.  Can you imagine other Hadoop uses of this, that would motivate putting it in a class in the util package, or should we just put it on JobConf?

Thanks,

Doug

> a new map/reduce example and moving the examples from src/java to src/examples
> ------------------------------------------------------------------------------
>
>          Key: HADOOP-25
>          URL: http://issues.apache.org/jira/browse/HADOOP-25
>      Project: Hadoop
>         Type: Improvement
>   Components: mapred
>     Reporter: Owen O'Malley
>     Assignee: Doug Cutting
>     Priority: Minor
>  Attachments: examples-2.patch, examples-3.patch, examples.patch, find-jar.patch, tar-name-fix.patch
>
> The new example is the word count example from Google's paper. I moved the examples into a separate jar file to demonstrate how to run stand-alone application code.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Feb  9 17:01:24 2006
Return-Path: 
 <hadoop-dev-return-82-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 61384 invoked from network); 9 Feb 2006 17:01:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 17:01:24 -0000
Received: (qmail 48526 invoked by uid 500); 9 Feb 2006 17:01:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 48511 invoked by uid 500); 9 Feb 2006 17:01:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 48502 invoked by uid 99); 9 Feb 2006 17:01:24 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 09:01:22 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 3961BCB
	for <hadoop-dev@lucene.apache.org>; Thu,  9 Feb 2006 18:01:01 +0100 (CET)
Message-ID: <415792550.1139504461232.JavaMail.jira@ajax.apache.org>
Date: Thu, 9 Feb 2006 18:01:01 +0100 (CET)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-25) a new map/reduce example and moving
 the examples from src/java to src/examples
In-Reply-To: <187621972.1139267817333.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-25?page=comments#action_12365759 ] 

Owen O'Malley commented on HADOOP-25:
-------------------------------------

Until we come up with such a use, I'd go ahead and make it a static method of the JobConf.

I accidently left a println in the findContainingJar method that needs to be removed.

> a new map/reduce example and moving the examples from src/java to src/examples
> ------------------------------------------------------------------------------
>
>          Key: HADOOP-25
>          URL: http://issues.apache.org/jira/browse/HADOOP-25
>      Project: Hadoop
>         Type: Improvement
>   Components: mapred
>     Reporter: Owen O'Malley
>     Assignee: Doug Cutting
>     Priority: Minor
>  Attachments: examples-2.patch, examples-3.patch, examples.patch, find-jar.patch, tar-name-fix.patch
>
> The new example is the word count example from Google's paper. I moved the examples into a separate jar file to demonstrate how to run stand-alone application code.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Feb  9 17:23:25 2006
Return-Path: 
 <hadoop-dev-return-83-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 72025 invoked from network); 9 Feb 2006 17:23:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 17:23:25 -0000
Received: (qmail 95011 invoked by uid 500); 9 Feb 2006 17:23:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94987 invoked by uid 500); 9 Feb 2006 17:23:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94977 invoked by uid 99); 9 Feb 2006 17:23:22 -0000
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=INFO_TLD
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 09:23:21 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 03B43CB
	for <hadoop-dev@lucene.apache.org>; Thu,  9 Feb 2006 18:23:00 +0100 (CET)
Message-ID: <1478519826.1139505780013.JavaMail.jira@ajax.apache.org>
Date: Thu, 9 Feb 2006 18:23:00 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-20) Mapper, Reducer need an occasion to
 cleanup after the last record is processed.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-20?page=all ]
     
Doug Cutting resolved HADOOP-20:
--------------------------------

    Resolution: Fixed

I just committed this.  I changed it so that Mapper and Reducer extend a Closeable interface rather than both providing a close() method directly.

> Mapper, Reducer need an occasion to cleanup after the last record is processed.
> -------------------------------------------------------------------------------
>
>          Key: HADOOP-20
>          URL: http://issues.apache.org/jira/browse/HADOOP-20
>      Project: Hadoop
>         Type: Improvement
>   Components: mapred
>  Environment: Linux
>     Reporter: Michel Tourn
>  Attachments: mapredfinished.log, mrclose.patch
>
> Mapper, Reducer need an occasion to do some cleanup after the last record is processed.
> Proposal (patch attached)
> in interface Mapper:
>  add method void finished();
> in interface Reducer:
>  add method void finished();
> finished() methods are called from MapTask, CombiningCollector, ReduceTask.
> ------------
> Known limitation: Fetcher (a multithreaded MapRunnable) does not call finished().
> This is not currently a problem bec. fetcher Map/Reduce modules do not do anything in finished().
> The right way to add finished() support to Fetcher would be to wait for all threads to finish, 
> then do:
>      if (collector instanceof CombiningCollector) ((CombiningCollector)collector).finished();
> ------------
> patch begins: (svn trunk)
> Index: src/test/org/apache/nutch/mapred/MapredLoadTest.java
> ===================================================================
> --- src/test/org/apache/nutch/mapred/MapredLoadTest.java	(revision 374781)
> +++ src/test/org/apache/nutch/mapred/MapredLoadTest.java	(working copy)
> @@ -69,6 +69,8 @@
>                  out.collect(new IntWritable(Math.abs(r.nextInt())), new IntWritable(randomVal));
>              }
>          }
> +        public void finished() {
> +        }
>      }
>      static class RandomGenReducer implements Reducer {
>          public void configure(JobConf job) {
> @@ -81,6 +83,8 @@
>                  out.collect(new UTF8("" + val), new UTF8(""));
>              }
>          }
> +        public void finished() {
> +        }
>      }
>      static class RandomCheckMapper implements Mapper {
>          public void configure(JobConf job) {
> @@ -92,6 +96,8 @@
>  
>              out.collect(new IntWritable(Integer.parseInt(str.toString().trim())), new IntWritable(1));
>          }
> +        public void finished() {
> +        }
>      }
>      static class RandomCheckReducer implements Reducer {
>          public void configure(JobConf job) {
> @@ -106,6 +112,8 @@
>              }
>              out.collect(new IntWritable(keyint), new IntWritable(count));
>          }
> +        public void finished() {
> +        }
>      }
>  
>      int range;
> Index: src/test/org/apache/nutch/fs/TestNutchFileSystem.java
> ===================================================================
> --- src/test/org/apache/nutch/fs/TestNutchFileSystem.java	(revision 374783)
> +++ src/test/org/apache/nutch/fs/TestNutchFileSystem.java	(working copy)
> @@ -155,6 +155,8 @@
>  
>        reporter.setStatus("wrote " + name);
>      }
> +    
> +    public void finished() {}
>    }
>  
>    public static void writeTest(NutchFileSystem fs, boolean fastCheck)
> @@ -247,6 +249,9 @@
>  
>        reporter.setStatus("read " + name);
>      }
> +    
> +    public void finished() {}
> +    
>    }
>  
>    public static void readTest(NutchFileSystem fs, boolean fastCheck)
> @@ -339,6 +344,9 @@
>          in.close();
>        }
>      }
> +    
> +    public void finished() {}
> +    
>    }
>  
>    public static void seekTest(NutchFileSystem fs, boolean fastCheck)
> Index: src/java/org/apache/nutch/indexer/DeleteDuplicates.java
> ===================================================================
> --- src/java/org/apache/nutch/indexer/DeleteDuplicates.java	(revision 374776)
> +++ src/java/org/apache/nutch/indexer/DeleteDuplicates.java	(working copy)
> @@ -225,6 +225,7 @@
>          }
>        }
>      }
> +    public void finished() {}
>    }
>      
>    private NutchFileSystem fs;
> @@ -265,6 +266,8 @@
>        reader.close();
>      }
>    }
> +  
> +  public void finished() {}
>  
>    /** Write nothing. */
>    public RecordWriter getRecordWriter(final NutchFileSystem fs,
> Index: src/java/org/apache/nutch/indexer/Indexer.java
> ===================================================================
> --- src/java/org/apache/nutch/indexer/Indexer.java	(revision 374778)
> +++ src/java/org/apache/nutch/indexer/Indexer.java	(working copy)
> @@ -227,6 +227,8 @@
>  
>      output.collect(key, new ObjectWritable(doc));
>    }
> +  
> +  public void finished() {}
>  
>    public void index(File indexDir, File crawlDb, File linkDb, File[] segments)
>      throws IOException {
> Index: src/java/org/apache/nutch/segment/SegmentReader.java
> ===================================================================
> --- src/java/org/apache/nutch/segment/SegmentReader.java	(revision 374778)
> +++ src/java/org/apache/nutch/segment/SegmentReader.java	(working copy)
> @@ -143,7 +143,9 @@
>      }
>      output.collect(key, new ObjectWritable(dump.toString()));
>    }
> -
> +  
> +  public void finished() {}
> +  
>    public void reader(File segment) throws IOException {
>      LOG.info("Reader: segment: " + segment);
>  
> Index: src/java/org/apache/nutch/mapred/Mapper.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/Mapper.java	(revision 374737)
> +++ src/java/org/apache/nutch/mapred/Mapper.java	(working copy)
> @@ -39,4 +39,9 @@
>    void map(WritableComparable key, Writable value,
>             OutputCollector output, Reporter reporter)
>      throws IOException;
> +
> +  /** Called after the last {@link #map} call on this Mapper object.
> +      Typical implementations do nothing.
> +  */
> +  void finished();
>  }
> Index: src/java/org/apache/nutch/mapred/lib/RegexMapper.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/lib/RegexMapper.java	(revision 374737)
> +++ src/java/org/apache/nutch/mapred/lib/RegexMapper.java	(working copy)
> @@ -53,4 +53,5 @@
>        output.collect(new UTF8(matcher.group(group)), new LongWritable(1));
>      }
>    }
> +  public void finished() {}
>  }
> Index: src/java/org/apache/nutch/mapred/lib/InverseMapper.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/lib/InverseMapper.java	(revision 374737)
> +++ src/java/org/apache/nutch/mapred/lib/InverseMapper.java	(working copy)
> @@ -38,4 +38,6 @@
>      throws IOException {
>      output.collect((WritableComparable)value, key);
>    }
> +
> +  public void finished() {}
>  }
> Index: src/java/org/apache/nutch/mapred/lib/IdentityReducer.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/lib/IdentityReducer.java	(revision 374737)
> +++ src/java/org/apache/nutch/mapred/lib/IdentityReducer.java	(working copy)
> @@ -42,4 +42,5 @@
>      }
>    }
>  
> +  public void finished() {}
>  }
> Index: src/java/org/apache/nutch/mapred/lib/IdentityMapper.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/lib/IdentityMapper.java	(revision 374737)
> +++ src/java/org/apache/nutch/mapred/lib/IdentityMapper.java	(working copy)
> @@ -39,4 +39,5 @@
>      output.collect(key, val);
>    }
>  
> +  public void finished() {}
>  }
> Index: src/java/org/apache/nutch/mapred/lib/LongSumReducer.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/lib/LongSumReducer.java	(revision 374737)
> +++ src/java/org/apache/nutch/mapred/lib/LongSumReducer.java	(working copy)
> @@ -47,4 +47,6 @@
>      // output sum
>      output.collect(key, new LongWritable(sum));
>    }
> +
> +  public void finished() {}
>  }
> Index: src/java/org/apache/nutch/mapred/lib/TokenCountMapper.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/lib/TokenCountMapper.java	(revision 374737)
> +++ src/java/org/apache/nutch/mapred/lib/TokenCountMapper.java	(working copy)
> @@ -50,4 +50,6 @@
>        output.collect(new UTF8(st.nextToken()), new LongWritable(1));
>      }
>    }
> +
> +  public void finished() {}
>  }
> Index: src/java/org/apache/nutch/mapred/ReduceTask.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/ReduceTask.java	(revision 374781)
> +++ src/java/org/apache/nutch/mapred/ReduceTask.java	(working copy)
> @@ -275,6 +275,7 @@
>        }
>  
>      } finally {
> +      reducer.finished();
>        in.close();
>        lfs.delete(new File(sortedFile));           // remove sorted
>        out.close(reporter);
> Index: src/java/org/apache/nutch/mapred/MapTask.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/MapTask.java	(revision 374737)
> +++ src/java/org/apache/nutch/mapred/MapTask.java	(working copy)
> @@ -50,7 +50,7 @@
>    public void write(DataOutput out) throws IOException {
>      super.write(out);
>      split.write(out);
> -    
> +
>    }
>    public void readFields(DataInput in) throws IOException {
>      super.readFields(in);
> @@ -126,6 +126,10 @@
>          }
>  
>        } finally {
> +        if (combining) {
> +          ((CombiningCollector)collector).finished();
> +        }
> +
>          in.close();                               // close input
>        }
>      } finally {
> @@ -147,5 +151,5 @@
>    public NutchConf getConf() {
>      return this.nutchConf;
>    }
> -  
> +
>  }
> Index: src/java/org/apache/nutch/mapred/MapRunner.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/MapRunner.java	(revision 374737)
> +++ src/java/org/apache/nutch/mapred/MapRunner.java	(working copy)
> @@ -38,18 +38,22 @@
>    public void run(RecordReader input, OutputCollector output,
>                    Reporter reporter)
>      throws IOException {
> -    while (true) {
> -      // allocate new key & value instances
> -      WritableComparable key =
> -        (WritableComparable)job.newInstance(inputKeyClass);
> -      Writable value = (Writable)job.newInstance(inputValueClass);
> +    try {
> +      while (true) {
> +        // allocate new key & value instances
> +        WritableComparable key =
> +          (WritableComparable)job.newInstance(inputKeyClass);
> +        Writable value = (Writable)job.newInstance(inputValueClass);
>  
> -      // read next key & value
> -      if (!input.next(key, value))
> -        return;
> +        // read next key & value
> +        if (!input.next(key, value))
> +          return;
>  
> -      // map pair to output
> -      mapper.map(key, value, output, reporter);
> +        // map pair to output
> +        mapper.map(key, value, output, reporter);
> +      }
> +    } finally {
> +        mapper.finished();
>      }
>    }
>  
> Index: src/java/org/apache/nutch/mapred/CombiningCollector.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/CombiningCollector.java	(revision 374780)
> +++ src/java/org/apache/nutch/mapred/CombiningCollector.java	(working copy)
> @@ -78,4 +78,9 @@
>      count = 0;
>    }
>  
> +  public synchronized void finished()
> +  {
> +    combiner.finished();
> +  }
> +
>  }
> Index: src/java/org/apache/nutch/mapred/Reducer.java
> ===================================================================
> --- src/java/org/apache/nutch/mapred/Reducer.java	(revision 374737)
> +++ src/java/org/apache/nutch/mapred/Reducer.java	(working copy)
> @@ -38,4 +38,10 @@
>    void reduce(WritableComparable key, Iterator values,
>                OutputCollector output, Reporter reporter)
>      throws IOException;
> +
> +  /** Called after the last {@link #reduce} call on this Reducer object.
> +      Typical implementations do nothing.
> +  */
> +  void finished();
> +
>  }
> Index: src/java/org/apache/nutch/crawl/CrawlDbReader.java
> ===================================================================
> --- src/java/org/apache/nutch/crawl/CrawlDbReader.java	(revision 374737)
> +++ src/java/org/apache/nutch/crawl/CrawlDbReader.java	(working copy)
> @@ -50,9 +50,9 @@
>  
>  /**
>   * Read utility for the CrawlDB.
> - * 
> + *
>   * @author Andrzej Bialecki
> - * 
> + *
>   */
>  public class CrawlDbReader {
>  
> @@ -68,6 +68,7 @@
>        output.collect(new UTF8("retry"), new LongWritable(cd.getRetriesSinceFetch()));
>        output.collect(new UTF8("score"), new LongWritable((long) (cd.getScore() * 1000.0)));
>      }
> +    public void finished() {}
>    }
>  
>    public static class CrawlDbStatReducer implements Reducer {
> @@ -121,6 +122,7 @@
>          output.collect(new UTF8("avg score"), new LongWritable(total / cnt));
>        }
>      }
> +    public void finished() {}
>    }
>  
>    public static class CrawlDbDumpReducer implements Reducer {
> @@ -133,8 +135,11 @@
>  
>      public void configure(JobConf job) {
>      }
> +
> +    public void finished() {
> +    }
>    }
> -  
> +
>    public void processStatJob(String crawlDb, NutchConf config) throws IOException {
>      LOG.info("CrawlDb statistics start: " + crawlDb);
>      File tmpFolder = new File(crawlDb, "stat_tmp" + System.currentTimeMillis());
> @@ -219,7 +224,7 @@
>        System.out.println("not found");
>      }
>    }
> -  
> +
>    public void processDumpJob(String crawlDb, String output, NutchConf config) throws IOException {
>  
>      LOG.info("CrawlDb dump: starting");
> @@ -270,4 +275,5 @@
>      }
>      return;
>    }
> +
>  }
> Index: src/java/org/apache/nutch/crawl/LinkDb.java
> ===================================================================
> --- src/java/org/apache/nutch/crawl/LinkDb.java	(revision 374779)
> +++ src/java/org/apache/nutch/crawl/LinkDb.java	(working copy)
> @@ -118,7 +118,8 @@
>      output.collect(key, result);
>    }
>  
> -
> +  public void finished() {}
> +	
>    public void invert(File linkDb, File segmentsDir) throws IOException {
>      LOG.info("LinkDb: starting");
>      LOG.info("LinkDb: linkdb: " + linkDb);
> Index: src/java/org/apache/nutch/crawl/Injector.java
> ===================================================================
> --- src/java/org/apache/nutch/crawl/Injector.java	(revision 374779)
> +++ src/java/org/apache/nutch/crawl/Injector.java	(working copy)
> @@ -65,6 +65,8 @@
>                                               interval));
>        }
>      }
> +    
> +    public void finished() {}
>    }
>  
>    /** Combine multiple new entries for a url. */
> @@ -76,6 +78,7 @@
>        throws IOException {
>        output.collect(key, (Writable)values.next()); // just collect first value
>      }
> +    public void finished() {}
>    }
>  
>    /** Construct an Injector. */
> Index: src/java/org/apache/nutch/crawl/Generator.java
> ===================================================================
> --- src/java/org/apache/nutch/crawl/Generator.java	(revision 374779)
> +++ src/java/org/apache/nutch/crawl/Generator.java	(working copy)
> @@ -63,6 +63,8 @@
>        output.collect(crawlDatum, key);          // invert for sort by score
>      }
>  
> +    public void finished() {}
> +    
>      /** Partition by host (value). */
>      public int getPartition(WritableComparable key, Writable value,
>                              int numReduceTasks) {
> Index: src/java/org/apache/nutch/crawl/CrawlDbReducer.java
> ===================================================================
> --- src/java/org/apache/nutch/crawl/CrawlDbReducer.java	(revision 374781)
> +++ src/java/org/apache/nutch/crawl/CrawlDbReducer.java	(working copy)
> @@ -115,4 +115,5 @@
>      }
>    }
>  
> +  public void finished() {}
>  }
> Index: src/java/org/apache/nutch/parse/ParseSegment.java
> ===================================================================
> --- src/java/org/apache/nutch/parse/ParseSegment.java	(revision 374776)
> +++ src/java/org/apache/nutch/parse/ParseSegment.java	(working copy)
> @@ -78,6 +78,8 @@
>      throws IOException {
>      output.collect(key, (Writable)values.next()); // collect first value
>    }
> +  
> +  public void finished() {}
>  
>    public void parse(File segment) throws IOException {
>      LOG.info("Parse: starting");

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Feb  9 18:43:31 2006
Return-Path: 
 <hadoop-dev-return-84-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10757 invoked from network); 9 Feb 2006 18:43:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 18:43:31 -0000
Received: (qmail 48856 invoked by uid 500); 9 Feb 2006 18:43:19 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 48799 invoked by uid 500); 9 Feb 2006 18:43:19 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 48764 invoked by uid 99); 9 Feb 2006 18:43:19 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 10:43:18 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id EBE67CB
	for <hadoop-dev@lucene.apache.org>; Thu,  9 Feb 2006 19:42:57 +0100 (CET)
Message-ID: <283241628.1139510577941.JavaMail.jira@ajax.apache.org>
Date: Thu, 9 Feb 2006 19:42:57 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-25) a new map/reduce example and moving
 the examples from src/java to src/examples
In-Reply-To: <187621972.1139267817333.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-25?page=comments#action_12365776 ] 

Doug Cutting commented on HADOOP-25:
------------------------------------

Okay, I did this.  I also added a JobConf constructor that specifies this.

> a new map/reduce example and moving the examples from src/java to src/examples
> ------------------------------------------------------------------------------
>
>          Key: HADOOP-25
>          URL: http://issues.apache.org/jira/browse/HADOOP-25
>      Project: Hadoop
>         Type: Improvement
>   Components: mapred
>     Reporter: Owen O'Malley
>     Assignee: Doug Cutting
>     Priority: Minor
>  Attachments: examples-2.patch, examples-3.patch, examples.patch, find-jar.patch, tar-name-fix.patch
>
> The new example is the word count example from Google's paper. I moved the examples into a separate jar file to demonstrate how to run stand-alone application code.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Feb  9 20:00:59 2006
Return-Path: 
 <hadoop-dev-return-85-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 48935 invoked from network); 9 Feb 2006 20:00:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 20:00:59 -0000
Received: (qmail 66347 invoked by uid 500); 9 Feb 2006 20:00:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66324 invoked by uid 500); 9 Feb 2006 20:00:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66315 invoked by uid 99); 9 Feb 2006 20:00:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 12:00:59 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of bpendleton@gmail.com designates
 64.233.184.202 as permitted sender)
Received: from [64.233.184.202] (HELO wproxy.gmail.com) (64.233.184.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 12:00:58 -0800
Received: by wproxy.gmail.com with SMTP id i6so382219wra
        for <hadoop-dev@lucene.apache.org>;
 Thu, 09 Feb 2006 12:00:37 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references;
        b=EZU4AVL5yZeOpBv+Yej+Va1khj4hSrer061UAUNkl99u9NoWnYgf9OboNbz8QnfrEuSimnwA1RXAyx265oEJyhptrckJ79Yq3pERu+TgN2FPQvVB8FPQ1v3cxFlTa5UyEe83P0sX33MJDPPiZJw5+Oul2nspTKISENUsjSLRKtw=
Received: by 10.65.113.9 with SMTP id q9mr182524qbm;
        Thu, 09 Feb 2006 12:00:31 -0800 (PST)
Received: by 10.65.232.5 with HTTP; Thu, 9 Feb 2006 12:00:31 -0800 (PST)
Message-ID: <1bf79d3e0602091200w6d99e672jb467f79a81dbb7b3@mail.gmail.com>
Date: Thu, 9 Feb 2006 12:00:31 -0800
From: "Bryan A. Pendleton" <bp@geekdom.net>
Sender: bpendleton@gmail.com
To: hadoop-dev@lucene.apache.org
Subject: Re: can not start jobtracker
In-Reply-To: <84919F4C-7A60-4725-95BE-71B0702E67B7@media-style.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_Part_24910_4114034.1139515231484"
References: <949FDE88-D958-4328-8DC7-EDFCCADD48C5@media-style.com>
	 <84919F4C-7A60-4725-95BE-71B0702E67B7@media-style.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_24910_4114034.1139515231484
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

VGhhbmsgeW91LCB5ZXMsIHRoYXQgZml4ZXMgdGhlIHByb2JsZW0uIEknbSBhYmxlIHRvIHJ1biBt
eSBqb2JzIHVuZGVyIGhhZG9vcApub3csIGluc3RlYWQgb2YgdGhlIG9sZCBudXRjaCB3aXRoIG1h
cHJlZC4KCk9uIDIvOS8wNiwgTWFya28gQmF1aGFyZHQgPG1iQG1lZGlhLXN0eWxlLmNvbT4gd3Jv
dGU6Cj4KPiBPaywgaSB0aGluayBpIGZvdW5kIGEgc29sdXRpb24uIElmIGkgY29weSB0aGUgeGVy
Y2VzIGphcnMgZnJvbSBudXRjaC8KPiBsaWIgKHhlcmNlcy0yXzZfMi1hcGlzLmphciBhbmQgeGVy
Y2VzLTJfNl8yLmphcikgaW50byBoYWRvb3AvbGliLCB0aGUKPiBqb2J0cmFja2VyIHN0YXJ0cyBz
dWNjZXNzZnVsbHkuCj4KPiBNYXJrbwo+Cj4KPiBBbSAwOC4wMi4yMDA2IHVtIDE5OjQzIHNjaHJp
ZWIgTWFya28gQmF1aGFyZHQ6Cj4KPiA+IEhpLAo+ID4gaSBjaGVja291dCB0aGUgbGF0ZXN0IHNv
dXJjZXMgYW4gdHJ5IHRvIHN0YXJ0IHRoZSBqb2J0cmFja2VyIGFuZAo+ID4gZ2V0IHRoZSBmb2xs
b3dpbmcgZXhjZXB0aW9uLgo+ID4KPiA+Cj4gPiBvcmcueG1sLnNheC5TQVhQYXJzZUV4Y2VwdGlv
bjogRWxlbWVudHR5cCAid2ViLWFwcCIgaXN0IG5pY2h0Cj4gPiBkZWtsYXJpZXJ0Lgo+ID4gICAg
ICAgYXQgb3JnLmFwYWNoZS5jcmltc29uLnBhcnNlci5QYXJzZXIyLmVycm9yKFBhcnNlcjIuamF2
YTozMzU0KQo+ID4gICAgICAgYXQgb3JnLmFwYWNoZS5jcmltc29uLnBhcnNlci5QYXJzZXIyLm1h
eWJlRWxlbWVudChQYXJzZXIyLmphdmEKPiA6MTUwMikKPiA+ICAgICAgIGF0IG9yZy5hcGFjaGUu
Y3JpbXNvbi5wYXJzZXIuUGFyc2VyMi5wYXJzZUludGVybmFsIChQYXJzZXIyLmphdmEKPiA6NjY3
KQo+ID4gICAgICAgYXQgb3JnLmFwYWNoZS5jcmltc29uLnBhcnNlci5QYXJzZXIyLnBhcnNlKFBh
cnNlcjIuamF2YTozMzcpCj4gPiAgICAgICBhdCBvcmcuYXBhY2hlLmNyaW1zb24ucGFyc2VyLlhN
TFJlYWRlckltcGwucGFyc2UKPiA+IChYTUxSZWFkZXJJbXBsLmphdmE6NDQ4KQo+ID4gICAgICAg
YXQgamF2YXgueG1sLnBhcnNlcnMuU0FYUGFyc2VyLnBhcnNlIChTQVhQYXJzZXIuamF2YTozNDUp
Cj4gPiAgICAgICBhdCBvcmcubW9ydGJheS54bWwuWG1sUGFyc2VyLnBhcnNlKFhtbFBhcnNlci5q
YXZhOjIxNikKPiA+ICAgICAgIGF0IG9yZy5tb3J0YmF5LnhtbC5YbWxQYXJzZXIucGFyc2UoWG1s
UGFyc2VyLmphdmE6MjM0KQo+ID4gICAgICAgYXQgb3JnLm1vcnRiYXkuamV0dHkuc2VydmxldC5Y
TUxDb25maWd1cmF0aW9uLmNvbmZpZ3VyZURlZmF1bHRzCj4gPiAoWE1MQ29uZmlndXJhdGlvbi5q
YXZhOjE1OSkKPiA+ICAgICAgIGF0Cj4gPiBvcmcubW9ydGJheS5qZXR0eS5zZXJ2bGV0LldlYkFw
cGxpY2F0aW9uQ29udGV4dC5jb25maWd1cmVEZWZhdWx0cwo+ID4gKFdlYkFwcGxpY2F0aW9uQ29u
dGV4dC5qYXZhOjQxNCkKPiA+ICAgICAgIGF0IG9yZy5tb3J0YmF5LmpldHR5LnNlcnZsZXQuV2Vi
QXBwbGljYXRpb25Db250ZXh0LmRvU3RhcnQKPiA+IChXZWJBcHBsaWNhdGlvbkNvbnRleHQuamF2
YTo0NjMpCj4gPiAgICAgICBhdCBvcmcubW9ydGJheS51dGlsLkNvbnRhaW5lci5zdGFydChDb250
YWluZXIuamF2YTo3MikKPiA+ICAgICAgIGF0IG9yZy5tb3J0YmF5Lmh0dHAuSHR0cFNlcnZlci5k
b1N0YXJ0KEh0dHBTZXJ2ZXIuamF2YTo3NTMpCj4gPiAgICAgICBhdCBvcmcubW9ydGJheS51dGls
LkNvbnRhaW5lci5zdGFydCAoQ29udGFpbmVyLmphdmE6NzIpCj4gPiAgICAgICBhdCBvcmcuYXBh
Y2hlLmhhZG9vcC5tYXByZWQuSm9iVHJhY2tlckluZm9TZXJ2ZXIkSFRUUFN0YXJ0ZXIucnVuCj4g
PiAoSm9iVHJhY2tlckluZm9TZXJ2ZXIuamF2YTo4NykKPiA+ICAgICAgIGF0IGphdmEubGFuZy5U
aHJlYWQucnVuKFRocmVhZC5qYXZhOjU1MikKPiA+Cj4gPiAoU291bmRzIGxpa2UgYSBtaXNzZWQg
b3IgaW52YWxpZCB3ZWIueG1sPykKPiA+Cj4gPiBXaGF0IGFtIGkgZG9pbmcgd3Jvbmc/Cj4gPgo+
ID4gVGhhbmtzIGZvciBhbnkgaGVscC4KPiA+Cj4gPiBNYXJrbwo+ID4KPiA+Cj4KPgoKCi0tCkJy
eWFuIEEuIFBlbmRsZXRvbgpQaDogKDg3NykgZ2Vlay0xLWJwCg==
------=_Part_24910_4114034.1139515231484--

From MAILER-DAEMON Thu Feb  9 22:09:28 2006
Return-Path: 
 <hadoop-dev-return-86-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12207 invoked from network); 9 Feb 2006 22:09:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 22:09:28 -0000
Received: (qmail 44552 invoked by uid 500); 9 Feb 2006 22:09:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 44532 invoked by uid 500); 9 Feb 2006 22:09:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 44523 invoked by uid 99); 9 Feb 2006 22:09:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 14:09:24 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 14:09:22 -0800
Received: from [192.168.0.252] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id k19M9HA11153
	for <hadoop-dev@lucene.apache.org>; Thu, 9 Feb 2006 16:09:17 -0600
Message-ID: <43EBBD7F.5050202@getopt.org>
Date: Thu, 09 Feb 2006 23:09:03 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: svn commit: r376449 -
 /lucene/hadoop/trunk/src/java/org/apache/hadoop/mapred/TaskRunner.java
References: <20060209220253.8419.qmail@minotaur.apache.org>
In-Reply-To: <20060209220253.8419.qmail@minotaur.apache.org>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

cutting@apache.org wrote:
> Author: cutting
> Date: Thu Feb  9 14:02:45 2006
> New Revision: 376449
>
> URL: http://svn.apache.org/viewcvs?rev=376449&view=rev
> Log:
> Keep 'unzip' from prompting when overwriting (e.g., when archive
> contains same file twice).  Also make it less verbose.
>
> Modified:
>     lucene/hadoop/trunk/src/java/org/apache/hadoop/mapred/TaskRunner.java
>
> Modified: lucene/hadoop/trunk/src/java/org/apache/hadoop/mapred/TaskRunner.java
> URL: http://svn.apache.org/viewcvs/lucene/hadoop/trunk/src/java/org/apache/hadoop/mapred/TaskRunner.java?rev=376449&r1=376448&r2=376449&view=diff
> ==============================================================================
> --- lucene/hadoop/trunk/src/java/org/apache/hadoop/mapred/TaskRunner.java (original)
> +++ lucene/hadoop/trunk/src/java/org/apache/hadoop/mapred/TaskRunner.java Thu Feb  9 14:02:45 2006
> @@ -76,7 +76,7 @@
>        JobConf job = new JobConf(t.getJobFile());
>        String jar = job.getJar();
>        if (jar != null) {                      // if jar exists, it into workDir
> -        runChild(new String[] { "unzip", jar}, workDir);
> +        runChild(new String[] { "unzip", "-o", "-q", jar}, workDir);
>
>   

I think it would be better in this case to use the java.util.zip classes 
to unpack the JAR rather than build yet another dependency on an 
external utility... what do you think?


-- 
Best regards,
Andrzej Bialecki     <><
 ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com



From MAILER-DAEMON Thu Feb  9 22:36:51 2006
Return-Path: 
 <hadoop-dev-return-87-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 26612 invoked from network); 9 Feb 2006 22:36:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 22:36:51 -0000
Received: (qmail 14027 invoked by uid 500); 9 Feb 2006 22:36:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13999 invoked by uid 500); 9 Feb 2006 22:36:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13980 invoked by uid 99); 9 Feb 2006 22:36:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 14:36:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.122.60.61] (HELO mslinux.media-style.com) (212.122.60.61)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 14:36:47 -0800
Received: from localhost (localhost [127.0.0.1])
	by mslinux.media-style.com (Postfix) with ESMTP id 253221444B4
	for <hadoop-dev@lucene.apache.org>; Thu,  9 Feb 2006 23:33:03 +0100 (CET)
Received: from mslinux.media-style.com ([127.0.0.1])
	by localhost (mslinux.media-style.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 04167-07 for <hadoop-dev@lucene.apache.org>;
	Thu, 9 Feb 2006 23:33:03 +0100 (CET)
Received: from [192.168.8.2] (dslb-084-059-221-154.pools.arcor-ip.net
 [84.59.221.154])
	by mslinux.media-style.com (Postfix) with ESMTP id 398151444A0
	for <hadoop-dev@lucene.apache.org>; Thu,  9 Feb 2006 23:33:01 +0100 (CET)
Mime-Version: 1.0 (Apple Message framework v746.2)
Content-Transfer-Encoding: 7bit
Message-Id: <7FBC88D3-F118-4374-A308-10A41DB5FA7A@media-style.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
To: hadoop-dev@lucene.apache.org
From: Stefan Groschupf <sg@media-style.com>
Subject: not jdk 1.4 compatibility
Date: Thu, 9 Feb 2006 23:36:18 +0100
X-Mailer: Apple Mail (2.746.2)
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at media-style.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,
hadoop build not under jdk 1.4 anymore.
JobConf.java line: 305
      return url.getPath().replace("file:", "").replaceAll("!.*$", "");
may it would be better to use replaceAll or replaceFirst here.

Stefan 

From MAILER-DAEMON Thu Feb  9 22:46:39 2006
Return-Path: 
 <hadoop-dev-return-88-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32172 invoked from network); 9 Feb 2006 22:46:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 22:46:39 -0000
Received: (qmail 41495 invoked by uid 500); 9 Feb 2006 22:46:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 41475 invoked by uid 500); 9 Feb 2006 22:46:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 41466 invoked by uid 99); 9 Feb 2006 22:46:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 14:46:39 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.109.112.27] (HELO mrout1-b.corp.dcn.yahoo.com)
 (216.109.112.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 14:46:38 -0800
Received: from [207.126.231.161] (oom-mac.corp.yahoo.com [207.126.231.161])
	by mrout1-b.corp.dcn.yahoo.com (8.13.4/8.13.4/y.out) with ESMTP id
 k19MjpJu095305
	for <hadoop-dev@lucene.apache.org>; Thu, 9 Feb 2006 14:45:51 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=MJ3D2K9qwFDYuRKlYdlDYoTNIBmsF404OAqzNQLL6NIXJtlA7vyqpZWvgMgF/RwA
Mime-Version: 1.0 (Apple Message framework v623)
In-Reply-To: <7FBC88D3-F118-4374-A308-10A41DB5FA7A@media-style.com>
References: <7FBC88D3-F118-4374-A308-10A41DB5FA7A@media-style.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <9b1def14dad6a223d81bd58555a80111@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: "Owen O'Malley" <owen@yahoo-inc.com>
Subject: Re: not jdk 1.4 compatibility
Date: Thu, 9 Feb 2006 14:45:55 -0800
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.623)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Feb 9, 2006, at 2:36 PM, Stefan Groschupf wrote:

> Hi,
> hadoop build not under jdk 1.4 anymore.
> JobConf.java line: 305
>      return url.getPath().replace("file:", "").replaceAll("!.*$", "");
> may it would be better to use replaceAll or replaceFirst here.

You are right. Sorry about that. I guess I should install a 1.4 
compiler to make sure that it doesn't happen again.

-- Owen


From MAILER-DAEMON Thu Feb  9 23:02:25 2006
Return-Path: 
 <hadoop-dev-return-89-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 38787 invoked from network); 9 Feb 2006 23:02:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 23:02:25 -0000
Received: (qmail 62813 invoked by uid 500); 9 Feb 2006 23:02:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62753 invoked by uid 500); 9 Feb 2006 23:02:18 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62702 invoked by uid 99); 9 Feb 2006 23:02:18 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 15:02:17 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id DABBDDD
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Feb 2006 00:01:56 +0100 (CET)
Message-ID: <610307406.1139526116893.JavaMail.jira@ajax.apache.org>
Date: Fri, 10 Feb 2006 00:01:56 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-12) InputFormat used in job must be in
 JobTracker classpath (not loaded from job JAR)
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-12?page=all ]
     
Doug Cutting resolved HADOOP-12:
--------------------------------

    Resolution: Fixed

I fixed this by having the JobTracker load the InputFormat from the job's jar.

> InputFormat used in job must be in JobTracker classpath (not loaded from job JAR)
> ---------------------------------------------------------------------------------
>
>          Key: HADOOP-12
>          URL: http://issues.apache.org/jira/browse/HADOOP-12
>      Project: Hadoop
>         Type: Bug
>   Components: mapred
>  Environment: ~20 node nutch mapreduce environment, running SVN trunk, on Linux
>     Reporter: Bryan Pendleton
>     Priority: Minor

>
> During development, I've been creating/tweaking custom InputFormat implementations. However, when you try to run a job against a running cluster, you get:
>   Exception in thread "main" java.io.IOException: java.lang.RuntimeException: java.lang.RuntimeException: java.lang.ClassNotFoundException: my.custom.InputFormat
>           at org.apache.nutch.ipc.Client.call(Client.java:294)
>           at org.apache.nutch.ipc.RPC$Invoker.invoke(RPC.java:127)
>           at $Proxy0.submitJob(Unknown Source)
>           at org.apache.nutch.mapred.JobClient.submitJob(JobClient.java:259)
>           at org.apache.nutch.mapred.JobClient.runJob(JobClient.java:288)
>           at com.parc.uir.wikipedia.WikipediaJob.main(WikipediaJob.java:85)
> This error goes away if I restart the TaskTrackers/JobTracker with a classpath which includes the needed code. Other classes (Mapper, Reducer) appear to be available out of the jar file specified in the JobConf, but not the InputFormat. Obviously, it's less than idea to have to restart the JobTracker whenever there's a change to a job-specific class.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Feb  9 23:16:19 2006
Return-Path: 
 <hadoop-dev-return-90-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 45616 invoked from network); 9 Feb 2006 23:16:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 23:16:19 -0000
Received: (qmail 94304 invoked by uid 500); 9 Feb 2006 23:16:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94281 invoked by uid 500); 9 Feb 2006 23:16:18 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94272 invoked by uid 99); 9 Feb 2006 23:16:18 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 15:16:16 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id E7D5FDD
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Feb 2006 00:15:55 +0100 (CET)
Message-ID: <1717747145.1139526955947.JavaMail.jira@ajax.apache.org>
Date: Fri, 10 Feb 2006 00:15:55 +0100 (CET)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-30) DFS shell: support for ls -r and cat
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

DFS shell: support for ls -r and cat
------------------------------------

         Key: HADOOP-30
         URL: http://issues.apache.org/jira/browse/HADOOP-30
     Project: Hadoop
        Type: Improvement
    Reporter: Michel Tourn


patch attached

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Feb  9 23:18:20 2006
Return-Path: 
 <hadoop-dev-return-91-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46549 invoked from network); 9 Feb 2006 23:18:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 23:18:20 -0000
Received: (qmail 95958 invoked by uid 500); 9 Feb 2006 23:18:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95938 invoked by uid 500); 9 Feb 2006 23:18:19 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95929 invoked by uid 99); 9 Feb 2006 23:18:19 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 15:18:17 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 778B7DD
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Feb 2006 00:17:56 +0100 (CET)
Message-ID: <1115555959.1139527076487.JavaMail.jira@ajax.apache.org>
Date: Fri, 10 Feb 2006 00:17:56 +0100 (CET)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-30) DFS shell: support for ls -r and cat
In-Reply-To: <1717747145.1139526955947.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-30?page=all ]

Michel Tourn updated HADOOP-30:
-------------------------------

    Attachment: lsrcat.patch

Example combined usage:
bin/nutch ndfs -lsr /user/michel/ | cut -f 1 | xargs -i bin/nutch ndfs -cat {}

lists all files/dirs, writes them all to stdout



> DFS shell: support for ls -r and cat
> ------------------------------------
>
>          Key: HADOOP-30
>          URL: http://issues.apache.org/jira/browse/HADOOP-30
>      Project: Hadoop
>         Type: Improvement
>     Reporter: Michel Tourn
>  Attachments: lsrcat.patch
>
> patch attached

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Feb  9 23:19:02 2006
Return-Path: 
 <hadoop-dev-return-92-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46842 invoked from network); 9 Feb 2006 23:19:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 23:19:02 -0000
Received: (qmail 96563 invoked by uid 500); 9 Feb 2006 23:19:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 96548 invoked by uid 500); 9 Feb 2006 23:19:02 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 96538 invoked by uid 99); 9 Feb 2006 23:19:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 15:19:01 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of bpendleton@gmail.com designates
 64.233.184.196 as permitted sender)
Received: from [64.233.184.196] (HELO wproxy.gmail.com) (64.233.184.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 15:19:00 -0800
Received: by wproxy.gmail.com with SMTP id i32so223752wra
        for <hadoop-dev@lucene.apache.org>;
 Thu, 09 Feb 2006 15:18:40 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references;
        b=TI1SyIr2RXC3IOd8AzzlwEQQ4Pl5UpvrpQBgb4OmfPv9kJbOkYw61Ygjkj/3AUXE8F1NihPK+1BRdySYplf+VsIPnJdCd7Fvv35tNyk0jMEkWZajR9iJhwlq2u3UpB0VGK/McuJJ/ALkT6YVFcJfLcyrEQ6DmCvj5oYwrd9r1RA=
Received: by 10.65.141.20 with SMTP id t20mr234183qbn;
        Thu, 09 Feb 2006 15:18:39 -0800 (PST)
Received: by 10.65.232.5 with HTTP; Thu, 9 Feb 2006 15:18:39 -0800 (PST)
Message-ID: <1bf79d3e0602091518j703af2c3t5135c5acc4f516c@mail.gmail.com>
Date: Thu, 9 Feb 2006 15:18:39 -0800
From: "Bryan A. Pendleton" <bp@geekdom.net>
Sender: bpendleton@gmail.com
To: hadoop-dev@lucene.apache.org
Subject: Re: not jdk 1.4 compatibility
In-Reply-To: <9b1def14dad6a223d81bd58555a80111@yahoo-inc.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_Part_2353_25953142.1139527119731"
References: <7FBC88D3-F118-4374-A308-10A41DB5FA7A@media-style.com>
	 <9b1def14dad6a223d81bd58555a80111@yahoo-inc.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_2353_25953142.1139527119731
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

SGVyZSdzIGEgcGF0Y2ggZm9yIGJvdGggdGhlIDEuNCBwcm9ibGVtLCBhbmQgYWRkaW5nIHNvbWUg
ZGVmZW5zaXZlIGNvZGluZwp0aGF0IHByZXZlbnRzIGEgTlBFIGlmIHlvdSdyZSwgc2F5LCBydW5u
aW5nIGNvZGUgd2l0aCBubyBKQVJzIGluIHlvdXIKY2xhc3NwYXRoOgotLS0KSW5kZXg6CkM6L3Bh
cmMvZWNsaXBzZS53b3Jrc3BhY2UucHJlZnVzZS9oYWRvb3Avc3JjL2phdmEvb3JnL2FwYWNoZS9o
YWRvb3AvbWFwcmVkL0pvYkNvbmYuamF2YQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ci0tLQpDOi9wYXJjL2VjbGlwc2Uu
d29ya3NwYWNlLnByZWZ1c2UvaGFkb29wL3NyYy9qYXZhL29yZy9hcGFjaGUvaGFkb29wL21hcHJl
ZC9Kb2JDb25mLmphdmEKKHJldmlzaW9uIDM3NjM3OSkKKysrCkM6L3BhcmMvZWNsaXBzZS53b3Jr
c3BhY2UucHJlZnVzZS9oYWRvb3Avc3JjL2phdmEvb3JnL2FwYWNoZS9oYWRvb3AvbWFwcmVkL0pv
YkNvbmYuamF2YQood29ya2luZyBjb3B5KQpAQCAtNjksNyArNjksOSBAQAogICAgKi8KICAgcHVi
bGljIEpvYkNvbmYoQ29uZmlndXJhdGlvbiBjb25mLCBDbGFzcyBhQ2xhc3MpIHsKICAgICB0aGlz
KGNvbmYpOwotICAgIHNldEphcihmaW5kQ29udGFpbmluZ0phcihhQ2xhc3MpKTsKKyAgICBTdHJp
bmcgZm91bmQgPSBmaW5kQ29udGFpbmluZ0phcihhQ2xhc3MpOworICAgIGlmKGZvdW5kICE9IG51
bGwpCisgICAgICAgIHNldEphcihmb3VuZCk7CiAgIH0KCgpAQCAtMjk1LDE0ICsyOTcsMTcgQEAK
ICAgICogQHRocm93cyBJT0V4Y2VwdGlvbgogICAgKi8KICAgcHJpdmF0ZSBzdGF0aWMgU3RyaW5n
IGZpbmRDb250YWluaW5nSmFyKENsYXNzIG15X2NsYXNzKSB7Ci0gICAgQ2xhc3NMb2FkZXIgbG9h
ZGVyID0gbXlfY2xhc3MuZ2V0Q2xhc3NMb2FkZXIoKTsKKyAgICBDbGFzc0xvYWRlciBsb2FkZXIg
PSBteV9jbGFzcy5nZXRDbGFzc0xvYWRlcigpOwogICAgIFN0cmluZyBjbGFzc19maWxlID0gbXlf
Y2xhc3MuZ2V0TmFtZSgpLnJlcGxhY2VBbGwoIlxcLiIsICIvIikgKwoiLmNsYXNzIjsKICAgICB0
cnkgewogICAgICAgZm9yKEVudW1lcmF0aW9uIGl0ciA9IGxvYWRlci5nZXRSZXNvdXJjZXMoY2xh
c3NfZmlsZSk7CiAgICAgICAgICAgaXRyLmhhc01vcmVFbGVtZW50cygpOykgewogICAgICAgICBV
UkwgdXJsID0gKFVSTCkgaXRyLm5leHRFbGVtZW50KCk7CiAgICAgICAgIGlmICgiamFyIi5lcXVh
bHModXJsLmdldFByb3RvY29sKCkpKSB7Ci0gICAgICAgICAgcmV0dXJuIHVybC5nZXRQYXRoKCku
cmVwbGFjZSgiZmlsZToiLCAiIikucmVwbGFjZUFsbCgiIS4qJCIsICIiKTsKKyAgICAgICAgICAg
IFN0cmluZyB0b1JldHVybiA9IHVybC5nZXRQYXRoKCk7CisgICAgICAgICAgICBpZih0b1JldHVy
bi5zdGFydHNXaXRoKCJmaWxlOiIpKQorICAgICAgICAgICAgICAgIHRvUmV0dXJuID0gdG9SZXR1
cm4uc3Vic3RyaW5nKCJmaWxlOiIubGVuZ3RoKCkpOworICAgICAgICAgIHJldHVybiB0b1JldHVy
bi5yZXBsYWNlQWxsKCIhLiokIiwgIiIpOwogICAgICAgICB9CiAgICAgICB9CiAgICAgfSBjYXRj
aCAoSU9FeGNlcHRpb24gZSkgewotLS0KT24gMi85LzA2LCBPd2VuIE8nTWFsbGV5IDxvd2VuQHlh
aG9vLWluYy5jb20+IHdyb3RlOgo+Cj4KPiBPbiBGZWIgOSwgMjAwNiwgYXQgMjozNiBQTSwgU3Rl
ZmFuIEdyb3NjaHVwZiB3cm90ZToKPgo+ID4gSGksCj4gPiBoYWRvb3AgYnVpbGQgbm90IHVuZGVy
IGpkayAxLjQgYW55bW9yZS4KPiA+IEpvYkNvbmYuamF2YSBsaW5lOiAzMDUKPiA+ICAgICAgcmV0
dXJuIHVybC5nZXRQYXRoKCkucmVwbGFjZSgiZmlsZToiLCAiIikucmVwbGFjZUFsbCgiIS4qJCIs
ICIiKTsKPiA+IG1heSBpdCB3b3VsZCBiZSBiZXR0ZXIgdG8gdXNlIHJlcGxhY2VBbGwgb3IgcmVw
bGFjZUZpcnN0IGhlcmUuCj4KPiBZb3UgYXJlIHJpZ2h0LiBTb3JyeSBhYm91dCB0aGF0LiBJIGd1
ZXNzIEkgc2hvdWxkIGluc3RhbGwgYSAxLjQKPiBjb21waWxlciB0byBtYWtlIHN1cmUgdGhhdCBp
dCBkb2Vzbid0IGhhcHBlbiBhZ2Fpbi4KPgo+IC0tIE93ZW4KPgo+CgoKLS0KQnJ5YW4gQS4gUGVu
ZGxldG9uClBoOiAoODc3KSBnZWVrLTEtYnAK
------=_Part_2353_25953142.1139527119731--

From MAILER-DAEMON Thu Feb  9 23:33:41 2006
Return-Path: 
 <hadoop-dev-return-93-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52644 invoked from network); 9 Feb 2006 23:33:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 23:33:41 -0000
Received: (qmail 23102 invoked by uid 500); 9 Feb 2006 23:33:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23078 invoked by uid 500); 9 Feb 2006 23:33:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23069 invoked by uid 99); 9 Feb 2006 23:33:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 15:33:40 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.115.57.32] (HELO ylpvm01.prodigy.net) (207.115.57.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 15:33:39 -0800
Received: from pimout5-ext.prodigy.net (pimout5-int.prodigy.net
 [207.115.4.21])
	by ylpvm01.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id
 k19NXIa5025302
	for <hadoop-dev@lucene.apache.org>; Thu, 9 Feb 2006 18:33:19 -0500
X-ORBL: [69.228.232.128]
Received: from [192.168.168.15] (adsl-69-228-232-128.dsl.pltn13.pacbell.net
 [69.228.232.128])
	by pimout5-ext.prodigy.net (8.13.4 outbound domainkey aix/8.13.4) with ESMTP
 id k19NX7fd134894;
	Thu, 9 Feb 2006 18:33:11 -0500
Message-ID: <43EBD145.6050502@apache.org>
Date: Thu, 09 Feb 2006 15:33:25 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: svn commit: r376449 -
 /lucene/hadoop/trunk/src/java/org/apache/hadoop/mapred/TaskRunner.java
References: <20060209220253.8419.qmail@minotaur.apache.org>
 <43EBBD7F.5050202@getopt.org>
In-Reply-To: <43EBBD7F.5050202@getopt.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Andrzej Bialecki wrote:
> I think it would be better in this case to use the java.util.zip classes 
> to unpack the JAR rather than build yet another dependency on an 
> external utility... what do you think?

Yes, that makes sense.  I was trying to quickly fix the bug (tasks would 
hang when a jar contained the same entry twice), but that would indeed 
be a better solution.

Doug

From MAILER-DAEMON Thu Feb  9 23:51:56 2006
Return-Path: 
 <hadoop-dev-return-94-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 59831 invoked from network); 9 Feb 2006 23:51:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 23:51:56 -0000
Received: (qmail 46565 invoked by uid 500); 9 Feb 2006 23:51:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 46551 invoked by uid 500); 9 Feb 2006 23:51:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46542 invoked by uid 99); 9 Feb 2006 23:51:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 15:51:55 -0800
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.115.57.43] (HELO ylpvm12.prodigy.net) (207.115.57.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 15:51:54 -0800
Received: from pimout6-ext.prodigy.net (pimout6-int.prodigy.net
 [207.115.4.22])
	by ylpvm12.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id
 k19NpS34015423
	for <hadoop-dev@lucene.apache.org>; Thu, 9 Feb 2006 18:51:29 -0500
X-ORBL: [69.228.232.128]
Received: from [192.168.168.15] (adsl-69-228-232-128.dsl.pltn13.pacbell.net
 [69.228.232.128])
	by pimout6-ext.prodigy.net (8.13.4 outbound domainkey aix/8.13.4) with ESMTP
 id k19NpPAE014678;
	Thu, 9 Feb 2006 18:51:30 -0500
Message-ID: <43EBD590.7040901@apache.org>
Date: Thu, 09 Feb 2006 15:51:44 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: not jdk 1.4 compatibility
References: <7FBC88D3-F118-4374-A308-10A41DB5FA7A@media-style.com>
	 <9b1def14dad6a223d81bd58555a80111@yahoo-inc.com>
 <1bf79d3e0602091518j703af2c3t5135c5acc4f516c@mail.gmail.com>
In-Reply-To: <1bf79d3e0602091518j703af2c3t5135c5acc4f516c@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks, I just applied that.

In the future, please provide patches as attachments rather than inline, 
otherwise they can get linewrapped and otherwise mangled.

Doug

From MAILER-DAEMON Thu Feb  9 23:59:39 2006
Return-Path: 
 <hadoop-dev-return-95-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 63565 invoked from network); 9 Feb 2006 23:59:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 23:59:39 -0000
Received: (qmail 55970 invoked by uid 500); 9 Feb 2006 23:59:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55955 invoked by uid 500); 9 Feb 2006 23:59:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55946 invoked by uid 99); 9 Feb 2006 23:59:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 15:59:39 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,INFO_TLD
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.109.112.28] (HELO mrout2-b.corp.dcn.yahoo.com)
 (216.109.112.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 15:59:37 -0800
Received: from michel (michel.corp.yahoo.com [207.126.231.56])
	by mrout2-b.corp.dcn.yahoo.com (8.13.4/8.13.4/y.out) with SMTP id
 k19Nx7O1058420
	for <hadoop-dev@lucene.apache.org>; Thu, 9 Feb 2006 15:59:07 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=from:to:subject:date:message-id:mime-version:content-type:
	content-transfer-encoding:x-priority:x-msmail-priority:x-mailer:in-reply-to:importance:x-mimeole;
	b=ZwEqBmqWhtvmz4MSIXa9rijKSysNr8KPZwiao6aPoWFQHMiZ2c3xVfnbXBG3iYti
From: "Michel Tourn" <michel@yahoo-inc.com>
To: "Hadoop-Dev@Lucene. Apache. Org" <hadoop-dev@lucene.apache.org>
Subject: MapRed status information
Date: Thu, 9 Feb 2006 16:01:24 -0800
Message-ID: <PDEFIFNIPHNHGGMCIBNGKEDAFGAA.michel@yahoo-inc.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
In-Reply-To: <43EA79C0.4030405@yahoo-inc.com>
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1506
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Can somebody comment on the feasibility of this?

Currently the MapRed status information looks like:

060208 223641  map 0%  reduce 100%
060208 223641 Job complete: job_ityg9w

percentage complete for a given job.

This is nice but I would also like to see some absolute numbers:

060208 223641  map 50% (2456) reduce 100% (123)
060208 223641 Job complete: job_ityg9w

which tells me:
2456 inputs records is 50% of the Map job
123 output records is 100% of the Reduce job

In particular this is useful info when you get
your DFS paths or file wildcards wrong:
MapRed finds zero input files and happily processes
an empty job and completes with:

060208 223641  map 100% reduce 100%
..which is 100% of zero records.
Completing successfully for an empty job is the right behaviour.
But we need more a informative status.


This could be combined with work on:
 ETA estimation for the Job:

060208 223641  map 50% (2456) ETA: +3h20m 070208 015641
..
070208 010000 Job complete: job_ityg9w


Can somebody comment on the feasibility of this?
1. is it easy to get absolute number of records processed?
2. is it easy to get (an estimate(*) of) total number of records
   to be processed in the job.
3. Where should this be computed?
   Should it be computed by a client polling for status?
   Can the information also be made availalbe to the job.tracker.info Web UI
?

(*)extrapolation based on file fragments size and bytes/rec so far.


Thanks,
Michel



From MAILER-DAEMON Fri Feb 10 00:23:07 2006
Return-Path: 
 <hadoop-dev-return-99-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75586 invoked from network); 10 Feb 2006 00:23:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 00:23:07 -0000
Received: (qmail 81847 invoked by uid 500); 10 Feb 2006 00:23:07 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 81826 invoked by uid 500); 10 Feb 2006 00:23:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Delivered-To: moderator for hadoop-dev@lucene.apache.org
Received: (qmail 69580 invoked by uid 99); 10 Feb 2006 00:11:40 -0000
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jcalvert@gmail.com designates
 66.249.92.202 as permitted sender)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=XK7B/M87Ocf5FM7ZfnMwjjGED4Imqxwp2Ll2h9GgprHz7wX9r6agmb8Za0gWk1ZoUW1dw7LJ/PKKf5A/j+nzRtvS4g2awvQT9mmS4nEcavrNItZ4sRVhK2q+9V89EnEVEbdg/+7dKWEm40BSDDfI/UH9IWsmRI3UysLCuzFecac=
Message-ID: <cace32060602091611r7f2531dfmce0fb07a034c9476@mail.gmail.com>
Date: Thu, 9 Feb 2006 16:11:17 -0800
From: Jeremy Calvert <jcalvert@gmail.com>
To: hadoop-dev@lucene.apache.org
Subject: RE: Writable vs Externalizable
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

With the move to Hadoop, is moving from Writable to Externalizable
being considered?  (I'm of the same mind as Stefan's sentiment below.)

Jeremy

---------------------------------------------------------------
Stefan Groschupf  2005-08-08 14:49 wrote

> What do others think?

I think, RMI isn't a good idea. I waste a  lot of time with it. I
like the nutch rpc very much.
However I think usage of Externalizable is a good idea, first it is a
very small change.
Second many users use nutch for very custom things and usage of
Externalizable make customization more easily.
For example using caching frameworks, (what in some case makes a lot
of sense), post or pre processing data, experimental data storages etc.

For sure such a change is low priority but I would love to see it.

Stefan

From MAILER-DAEMON Fri Feb 10 00:12:50 2006
Return-Path: 
 <hadoop-dev-return-96-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 70918 invoked from network); 10 Feb 2006 00:12:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 00:12:50 -0000
Received: (qmail 72350 invoked by uid 500); 10 Feb 2006 00:12:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72294 invoked by uid 500); 10 Feb 2006 00:12:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72285 invoked by uid 99); 10 Feb 2006 00:12:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 16:12:49 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.145.54.172] (HELO mrout2.yahoo.com) (216.145.54.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 16:12:48 -0800
Received: from [207.126.231.161] (oom-mac.corp.yahoo.com [207.126.231.161])
	by mrout2.yahoo.com (8.13.4/8.13.4/y.out) with ESMTP id k1A0C06Q003935
	for <hadoop-dev@lucene.apache.org>; Thu, 9 Feb 2006 16:12:00 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=28IaqMTYzsV/hyMXDH9O9zG6Ts/CSI3GVomVxNLAsSJ3g0lZfWwbERaZrvyoyfzs
Mime-Version: 1.0 (Apple Message framework v623)
In-Reply-To: <20060209234941.58934.qmail@minotaur.apache.org>
References: <20060209234941.58934.qmail@minotaur.apache.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <3bdc26a3d818a4059098f821a9a7c5a9@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: "Owen O'Malley" <owen@yahoo-inc.com>
Subject: Re: svn commit: r376492 -
 /lucene/hadoop/trunk/src/java/org/apache/hadoop/mapred/JobConf.java
Date: Thu, 9 Feb 2006 16:12:03 -0800
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.623)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Actually, I liked the first fix for the java 1.4 problem better (489 
rather than 492), since it was shorter and more concise.

Furthermore, I think that it is a serious mistake to mask the problem 
of not finding the jar file. For map/reduce, the application will fail 
without the jar set. Having it fail at the right spot in the driver is 
much better than having it fail in the task tracker with Class Not 
Found.

-- Owen


From MAILER-DAEMON Fri Feb 10 00:17:21 2006
Return-Path: 
 <hadoop-dev-return-97-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 73651 invoked from network); 10 Feb 2006 00:17:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 00:17:21 -0000
Received: (qmail 77362 invoked by uid 500); 10 Feb 2006 00:17:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 77338 invoked by uid 500); 10 Feb 2006 00:17:16 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 77329 invoked by uid 99); 10 Feb 2006 00:17:16 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 16:17:16 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 9DE10DC
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Feb 2006 01:16:55 +0100 (CET)
Message-ID: <1434168117.1139530615612.JavaMail.jira@ajax.apache.org>
Date: Fri, 10 Feb 2006 01:16:55 +0100 (CET)
From: "stack@archive.org (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-31) Stipulate main class in a job jar when
 using 'hadoop jar JARNAME'
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Stipulate main class in a job jar when using 'hadoop jar JARNAME'
-----------------------------------------------------------------

         Key: HADOOP-31
         URL: http://issues.apache.org/jira/browse/HADOOP-31
     Project: Hadoop
        Type: New Feature
    Reporter: stack@archive.org
    Priority: Minor


One use case I forsee is building one jar but using this one jar running multiple jobs: E.g. A single nutch job jar would now be used to do indexing job, later same jar is used to do dedup, etc. Currently, the recently added hadoop 'jar' option just takes the jar name then looks in the jar MANIFEST.MF for the Main-Class, failing if not present. This is grand but for the scenario above, it means I have to create a jar per job I want to run -- each with a different MANIFEST.MF#Main-Class entry. 

Can we pass the Main-Class on the hadoop command-line as an (optional) argument to 'hadoop jar JAR_NAME'? (I can make a patch if wanted). 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Feb 10 00:22:01 2006
Return-Path: 
 <hadoop-dev-return-98-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75171 invoked from network); 10 Feb 2006 00:22:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 00:22:01 -0000
Received: (qmail 80704 invoked by uid 500); 10 Feb 2006 00:22:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 80690 invoked by uid 500); 10 Feb 2006 00:22:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 80671 invoked by uid 99); 10 Feb 2006 00:22:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 16:22:00 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of bpendleton@gmail.com designates
 64.233.162.206 as permitted sender)
Received: from [64.233.162.206] (HELO zproxy.gmail.com) (64.233.162.206)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 16:21:59 -0800
Received: by zproxy.gmail.com with SMTP id 12so300552nzp
        for <hadoop-dev@lucene.apache.org>;
 Thu, 09 Feb 2006 16:21:39 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references;
        b=ufdOFnZpYB53fiQiLiy56cpu+0aufUqTEgzhhesFaoEfBqYe27ErcgntwvlBgHz/rrKP9vsvbJL6uJjZxhOGiyNkBlW9Cqzj52uqg/gi61f5fHvm9U//sqVAuJcg8ozsuelxiHVtggzaWxCct9HghLh7VPj/SooKZvu8WSAkkZQ=
Received: by 10.65.248.3 with SMTP id a3mr248545qbs;
        Thu, 09 Feb 2006 16:21:36 -0800 (PST)
Received: by 10.65.232.5 with HTTP; Thu, 9 Feb 2006 16:21:36 -0800 (PST)
Message-ID: <1bf79d3e0602091621u382822c2q430c486ecbcf3bc9@mail.gmail.com>
Date: Thu, 9 Feb 2006 16:21:36 -0800
From: "Bryan A. Pendleton" <bp@geekdom.net>
Sender: bpendleton@gmail.com
To: hadoop-dev@lucene.apache.org
Subject: Re: svn commit: r376492 -
 /lucene/hadoop/trunk/src/java/org/apache/hadoop/mapred/JobConf.java
In-Reply-To: <3bdc26a3d818a4059098f821a9a7c5a9@yahoo-inc.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_Part_2997_18553637.1139530896422"
References: <20060209234941.58934.qmail@minotaur.apache.org>
	 <3bdc26a3d818a4059098f821a9a7c5a9@yahoo-inc.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_2997_18553637.1139530896422
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

SSBhZ3JlZSB0aGF0IHRoZSBmaXJzdCBmaXggaXMgYmV0dGVyIChoYW5kbGluZyB0aGUgZmlsZTog
cGFydCBvZiB0aGUgVVJMKS4KCkkgZG9uJ3QgcXVpdGUgYWdyZWUgYWJvdXQgbm90IHNldHRpbmcg
YSBKYXIgZmlsZSBtYXNraW5nIHRoZSBwcm9ibGVtIC0KY2VydGFpbmx5LCB0ZXN0aW5nIHRoaW5n
cyBvdXQgaW4gZGVidWdnaW5nIGVudmlyb25tZW50cyBtYWtlcyBpdCBub3QKZ3VhcmFudGVlZCB0
aGF0IHRoZXJlJ3MgYSBKYXIgdGhlcmUuIEluIGFueSBjYXNlLCBpdCB3b3VsZCBjZXJ0YWlubHkg
YmUKYmV0dGVyIHRvIGZhaWwtZmFzdCB0aGVyZSwgYnV0LCBhdCB0aGlzIHBvaW50LCBmYWlsLWZh
c3QgYnkgb2JzY3VyZSBOUEUKaXNuJ3QgbmVjZXNzYXJpbHkgYmV0dGVyLiBJcyB0aGVyZSBzb21l
dGhpbmcgYmV0dGVyPwoKT24gMi85LzA2LCBPd2VuIE8nTWFsbGV5IDxvd2VuQHlhaG9vLWluYy5j
b20+IHdyb3RlOgo+Cj4gQWN0dWFsbHksIEkgbGlrZWQgdGhlIGZpcnN0IGZpeCBmb3IgdGhlIGph
dmEgMS40IHByb2JsZW0gYmV0dGVyICg0ODkKPiByYXRoZXIgdGhhbiA0OTIpLCBzaW5jZSBpdCB3
YXMgc2hvcnRlciBhbmQgbW9yZSBjb25jaXNlLgo+Cj4gRnVydGhlcm1vcmUsIEkgdGhpbmsgdGhh
dCBpdCBpcyBhIHNlcmlvdXMgbWlzdGFrZSB0byBtYXNrIHRoZSBwcm9ibGVtCj4gb2Ygbm90IGZp
bmRpbmcgdGhlIGphciBmaWxlLiBGb3IgbWFwL3JlZHVjZSwgdGhlIGFwcGxpY2F0aW9uIHdpbGwg
ZmFpbAo+IHdpdGhvdXQgdGhlIGphciBzZXQuIEhhdmluZyBpdCBmYWlsIGF0IHRoZSByaWdodCBz
cG90IGluIHRoZSBkcml2ZXIgaXMKPiBtdWNoIGJldHRlciB0aGFuIGhhdmluZyBpdCBmYWlsIGlu
IHRoZSB0YXNrIHRyYWNrZXIgd2l0aCBDbGFzcyBOb3QKPiBGb3VuZC4KPgo+IC0tIE93ZW4KPgo+
CgoKLS0KQnJ5YW4gQS4gUGVuZGxldG9uClBoOiAoODc3KSBnZWVrLTEtYnAK
------=_Part_2997_18553637.1139530896422--

From MAILER-DAEMON Fri Feb 10 00:34:32 2006
Return-Path: 
 <hadoop-dev-return-100-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 80167 invoked from network); 10 Feb 2006 00:34:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 00:34:32 -0000
Received: (qmail 94266 invoked by uid 500); 10 Feb 2006 00:34:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94246 invoked by uid 500); 10 Feb 2006 00:34:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94231 invoked by uid 99); 10 Feb 2006 00:34:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 16:34:31 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.122.60.61] (HELO mslinux.media-style.com) (212.122.60.61)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 16:34:30 -0800
Received: from localhost (localhost [127.0.0.1])
	by mslinux.media-style.com (Postfix) with ESMTP id 6DFCC14445E
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Feb 2006 01:30:48 +0100 (CET)
Received: from mslinux.media-style.com ([127.0.0.1])
	by localhost (mslinux.media-style.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 04936-07 for <hadoop-dev@lucene.apache.org>;
	Fri, 10 Feb 2006 01:30:48 +0100 (CET)
Received: from [192.168.8.2] (dslb-084-059-221-154.pools.arcor-ip.net
 [84.59.221.154])
	by mslinux.media-style.com (Postfix) with ESMTP id 408F5144432
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Feb 2006 01:30:47 +0100 (CET)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <cace32060602091611r7f2531dfmce0fb07a034c9476@mail.gmail.com>
References: <cace32060602091611r7f2531dfmce0fb07a034c9476@mail.gmail.com>
Content-Type: multipart/alternative; boundary=Apple-Mail-3-163172348
Message-Id: <695F5AE1-9F2B-4F1C-A657-A3F62332EBE6@media-style.com>
From: Stefan Groschupf <sg@media-style.com>
Subject: Re: Writable vs Externalizable
Date: Fri, 10 Feb 2006 01:34:05 +0100
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at media-style.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--Apple-Mail-3-163172348
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	delsp=yes;
	format=flowed

Ohh thanks for finding this old posting. :)
Until last days I was thinking about if it may makes sense to  
retrigger this question.
Since Hadoop is focused to provide a basic for more 'users' than  
nutch, this may makes more sense than ever before.
However this would be a big step for hadoop and nutch since many  
things are very much coupled with this mechanism e.g. nutch rcp.
However the change wouldn't be difficult just a lot of typing work.

Well my voice isn't that powerful, but here is my vote: +1. :-)
Stefan





Am 10.02.2006 um 01:11 schrieb Jeremy Calvert:

> With the move to Hadoop, is moving from Writable to Externalizable
> being considered?  (I'm of the same mind as Stefan's sentiment below.)
>
> Jeremy
>
> ---------------------------------------------------------------
> Stefan Groschupf  2005-08-08 14:49 wrote
>
>> What do others think?
>
> I think, RMI isn't a good idea. I waste a  lot of time with it. I
> like the nutch rpc very much.
> However I think usage of Externalizable is a good idea, first it is a
> very small change.
> Second many users use nutch for very custom things and usage of
> Externalizable make customization more easily.
> For example using caching frameworks, (what in some case makes a lot
> of sense), post or pre processing data, experimental data storages  
> etc.
>
> For sure such a change is low priority but I would love to see it.
>
> Stefan
>

---------------------------------------------------------------
company:        http://www.media-style.com
forum:        http://www.text-mining.org
blog:            http://www.find23.net



--Apple-Mail-3-163172348--

From MAILER-DAEMON Fri Feb 10 00:56:36 2006
Return-Path: 
 <hadoop-dev-return-101-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 87699 invoked from network); 10 Feb 2006 00:56:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 00:56:36 -0000
Received: (qmail 15044 invoked by uid 500); 10 Feb 2006 00:56:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15027 invoked by uid 500); 10 Feb 2006 00:56:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 15018 invoked by uid 99); 10 Feb 2006 00:56:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 16:56:36 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.109.112.28] (HELO mrout2-b.corp.dcn.yahoo.com)
 (216.109.112.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 16:56:35 -0800
Received: from [207.126.231.161] (oom-mac.corp.yahoo.com [207.126.231.161])
	by mrout2-b.corp.dcn.yahoo.com (8.13.4/8.13.4/y.out) with ESMTP id
 k1A0thf4064985
	for <hadoop-dev@lucene.apache.org>; Thu, 9 Feb 2006 16:55:43 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=wgDin2tACTQmqvwNI6mNhbodL8SjAj1pwV1/oeDGSxDOi+1lJ9mrKwEFHtx1k1Vf
Mime-Version: 1.0 (Apple Message framework v623)
In-Reply-To: <1bf79d3e0602091621u382822c2q430c486ecbcf3bc9@mail.gmail.com>
References: <20060209234941.58934.qmail@minotaur.apache.org>
 <3bdc26a3d818a4059098f821a9a7c5a9@yahoo-inc.com>
 <1bf79d3e0602091621u382822c2q430c486ecbcf3bc9@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <8efb818abccec5573fa4bc1dc80a5b37@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: "Owen O'Malley" <owen@yahoo-inc.com>
Subject: Re: svn commit: r376492 -
 /lucene/hadoop/trunk/src/java/org/apache/hadoop/mapred/JobConf.java
Date: Thu, 9 Feb 2006 16:55:46 -0800
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.623)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Feb 9, 2006, at 4:21 PM, Bryan A. Pendleton wrote:

> I agree that the first fix is better (handling the file: part of the 
> URL).
>
> I don't quite agree about not setting a Jar file masking the problem -
> certainly, testing things out in debugging environments makes it not
> guaranteed that there's a Jar there. In any case, it would certainly be
> better to fail-fast there, but, at this point, fail-fast by obscure NPE
> isn't necessarily better. Is there something better?

Given the problems with error checking, I'd suggest making the 
findContainingJar a public static method of JobConf, and letting the 
user application call it explicitly. Otherwise, we would need to throw 
an exception (RuntimeException?) with a message about the class not 
being found in a jar file.

The only case where not having the jar file works is either that both 
your map and reduce class are in hadoop.jar, which is how Grep worked, 
or you are using the local runner. So, you should pretty much always 
have a jar. *smile*

-- Owen


From MAILER-DAEMON Fri Feb 10 01:04:17 2006
Return-Path: 
 <hadoop-dev-return-102-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 90286 invoked from network); 10 Feb 2006 01:04:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 01:04:17 -0000
Received: (qmail 21298 invoked by uid 500); 10 Feb 2006 01:04:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 21280 invoked by uid 500); 10 Feb 2006 01:04:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 21271 invoked by uid 99); 10 Feb 2006 01:04:17 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 17:04:16 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id DC667DC
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Feb 2006 02:03:55 +0100 (CET)
Message-ID: <264484764.1139533435869.JavaMail.jira@ajax.apache.org>
Date: Fri, 10 Feb 2006 02:03:55 +0100 (CET)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-31) Stipulate main class in a job jar
 when using 'hadoop jar JARNAME'
In-Reply-To: <1434168117.1139530615612.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-31?page=comments#action_12365807 ] 

Owen O'Malley commented on HADOOP-31:
-------------------------------------

I would argue that rather than creating more framework, you just use the arguments and dispatch on the first argument. If you need something generic you could do something like I did with the ExampleDriver.

> Stipulate main class in a job jar when using 'hadoop jar JARNAME'
> -----------------------------------------------------------------
>
>          Key: HADOOP-31
>          URL: http://issues.apache.org/jira/browse/HADOOP-31
>      Project: Hadoop
>         Type: New Feature
>     Reporter: stack@archive.org
>     Priority: Minor

>
> One use case I forsee is building one jar but using this one jar running multiple jobs: E.g. A single nutch job jar would now be used to do indexing job, later same jar is used to do dedup, etc. Currently, the recently added hadoop 'jar' option just takes the jar name then looks in the jar MANIFEST.MF for the Main-Class, failing if not present. This is grand but for the scenario above, it means I have to create a jar per job I want to run -- each with a different MANIFEST.MF#Main-Class entry. 
> Can we pass the Main-Class on the hadoop command-line as an (optional) argument to 'hadoop jar JAR_NAME'? (I can make a patch if wanted). 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Feb 10 01:15:18 2006
Return-Path: 
 <hadoop-dev-return-103-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 95690 invoked from network); 10 Feb 2006 01:15:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 01:15:18 -0000
Received: (qmail 37351 invoked by uid 500); 10 Feb 2006 01:15:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 37303 invoked by uid 500); 10 Feb 2006 01:15:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 37288 invoked by uid 99); 10 Feb 2006 01:15:17 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 17:15:16 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id E5318DC
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Feb 2006 02:14:55 +0100 (CET)
Message-ID: <1983448714.1139534095888.JavaMail.jira@ajax.apache.org>
Date: Fri, 10 Feb 2006 02:14:55 +0100 (CET)
From: "stack@archive.org (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-31) Stipulate main class in a job jar
 when using 'hadoop jar JARNAME'
In-Reply-To: <1434168117.1139530615612.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-31?page=comments#action_12365810 ] 

stack@archive.org commented on HADOOP-31:
-----------------------------------------

That will work.  Thanks.

(I'd close this issue but I don't have sufficent permissions).

> Stipulate main class in a job jar when using 'hadoop jar JARNAME'
> -----------------------------------------------------------------
>
>          Key: HADOOP-31
>          URL: http://issues.apache.org/jira/browse/HADOOP-31
>      Project: Hadoop
>         Type: New Feature
>     Reporter: stack@archive.org
>     Priority: Minor

>
> One use case I forsee is building one jar but using this one jar running multiple jobs: E.g. A single nutch job jar would now be used to do indexing job, later same jar is used to do dedup, etc. Currently, the recently added hadoop 'jar' option just takes the jar name then looks in the jar MANIFEST.MF for the Main-Class, failing if not present. This is grand but for the scenario above, it means I have to create a jar per job I want to run -- each with a different MANIFEST.MF#Main-Class entry. 
> Can we pass the Main-Class on the hadoop command-line as an (optional) argument to 'hadoop jar JAR_NAME'? (I can make a patch if wanted). 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Feb 10 02:09:11 2006
Return-Path: 
 <hadoop-dev-return-104-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 11609 invoked from network); 10 Feb 2006 02:09:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 02:09:11 -0000
Received: (qmail 76839 invoked by uid 500); 10 Feb 2006 02:09:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 76823 invoked by uid 500); 10 Feb 2006 02:09:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 76814 invoked by uid 99); 10 Feb 2006 02:09:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 18:09:10 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.145.54.172] (HELO mrout2.yahoo.com) (216.145.54.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 18:09:09 -0800
Received: from [66.228.175.136] (seemeight-dx.corp.yahoo.com [66.228.175.136])
	by mrout2.yahoo.com (8.13.4/8.13.4/y.out) with ESMTP id k1A27qAr030774
	for <hadoop-dev@lucene.apache.org>; Thu, 9 Feb 2006 18:07:52 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=message-id:date:from:user-agent:x-accept-language:
	mime-version:to:subject:content-type:content-transfer-encoding;
	b=aaqbVJUoCv+TZi2PBVIki3mOHNHjao6wfioGj/P6F6QfE1urfEzGgTkHV/3t71d5
Message-ID: <43EBF5E3.7040600@yahoo-inc.com>
Date: Thu, 09 Feb 2006 18:09:39 -0800
From: Konstantin Shvachko <shv@yahoo-inc.com>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: hadoop build fails in eclipse with last version of build.xml
Content-Type: text/plain; charset=windows-1251; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I am compiling hadoop under eclipse, and receiving a JasperException.
I understand this is some how related to transition from jspc to jasper,
since before the last update everything worked fine.
Anybody having the same problem?
Do I need to do something to get jasper work properly?

Here is the exact listing

----------------------------------------------------------
Buildfile: C:\Work\nutch-0.7.1\Hadoop\build.xml

init:

compile:

BUILD FAILED
C:\Work\nutch-0.7.1\Hadoop\build.xml:109: 
org.apache.jasper.JasperException: The -uriroot option must specify a 
pre-existing directory

Total time: 1 second
----------------------------------------------------------

Thanks,

Konstantin

From MAILER-DAEMON Fri Feb 10 07:09:18 2006
Return-Path: 
 <hadoop-dev-return-105-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31732 invoked from network); 10 Feb 2006 07:09:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 07:09:18 -0000
Received: (qmail 87453 invoked by uid 500); 10 Feb 2006 07:09:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 87435 invoked by uid 500); 10 Feb 2006 07:09:18 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 87418 invoked by uid 99); 10 Feb 2006 07:09:17 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 23:09:17 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 81FB5DD
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Feb 2006 08:08:56 +0100 (CET)
Message-ID: <1357310343.1139555336530.JavaMail.jira@ajax.apache.org>
Date: Fri, 10 Feb 2006 08:08:56 +0100 (CET)
From: "Bryan Pendleton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-32) Creating job with InputDir set to
 non-existant directory locks up jobtracker
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Creating job with InputDir set to non-existant directory locks up jobtracker
----------------------------------------------------------------------------

         Key: HADOOP-32
         URL: http://issues.apache.org/jira/browse/HADOOP-32
     Project: Hadoop
        Type: Bug
 Environment: hadoop-trunk, running distributed map reduce
    Reporter: Bryan Pendleton


This, in the very least, affects anything using the default listFiles() from InputFormatBase. If no files are enumerated, an exception is thrown... but the JobTracker keeps attempting to run listFiles() for this job. Trying to stop the job with hadoop job -kill job_name just results in timeouts, and further started jobs also don't progress. This happens every single time with, say, "wordcount", and a non-existent input path.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Feb 10 08:20:18 2006
Return-Path: 
 <hadoop-dev-return-106-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 58111 invoked from network); 10 Feb 2006 08:20:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 08:20:18 -0000
Received: (qmail 54303 invoked by uid 500); 10 Feb 2006 08:20:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 54256 invoked by uid 500); 10 Feb 2006 08:20:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 54247 invoked by uid 99); 10 Feb 2006 08:20:17 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 00:20:17 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id E9A3FDC
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Feb 2006 09:19:55 +0100 (CET)
Message-ID: <1033796213.1139559595934.JavaMail.jira@ajax.apache.org>
Date: Fri, 10 Feb 2006 09:19:55 +0100 (CET)
From: "Bryan Pendleton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-16) RPC call times out while indexing map
 task is computing splits
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-16?page=comments#action_12365857 ] 

Bryan Pendleton commented on HADOOP-16:
---------------------------------------

I'm seeing a similar problem with the latest code. I have a task that takes a lot of input files (currently ~1400, each several gigabytes each). The amount of time spent hitting hasTaskWithHit() for each task is exhorbitant, easily causing a timeout. This code does all of the work up front - if you had, say, 1400 tasks, and 2 taskrunners, you could easily dispatch the first 2xsimultaneous running tasks first, then go back and spend time calculating the rest of the matchups. Certainly, a lot of the steps in the job setup after listFiles() could be potentially slow for certain problem sizes.

> RPC call times out while indexing map task is computing splits
> --------------------------------------------------------------
>
>          Key: HADOOP-16
>          URL: http://issues.apache.org/jira/browse/HADOOP-16
>      Project: Hadoop
>         Type: Bug
>   Components: mapred
>  Environment: MapReduce multi-computer crawl environment: 11 machines (1 master with JobTracker/NameNode, 10 slaves with TaskTrackers/DataNodes)
>     Reporter: Chris Schneider

>
> We've been using Nutch 0.8 (MapReduce) to perform some internet crawling. Things seemed to be going well until...
> 060129 222409 Lost tracker 'tracker_56288'
> 060129 222409 Task 'task_m_10gs5f' has been lost.
> 060129 222409 Task 'task_m_10qhzr' has been lost.
>    ........
>    ........
> 060129 222409 Task 'task_r_zggbwu' has been lost.
> 060129 222409 Task 'task_r_zh8dao' has been lost.
> 060129 222455 Server handler 8 on 8010 caught: java.net.SocketException: Socket closed
> java.net.SocketException: Socket closed
>         at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:99)
>         at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
>         at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
>         at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
>         at java.io.DataOutputStream.flush(DataOutputStream.java:106)
>         at org.apache.nutch.ipc.Server$Handler.run(Server.java:216)
> 060129 222455 Adding task 'task_m_cia5po' to set for tracker 'tracker_56288'
> 060129 223711 Adding task 'task_m_ffv59i' to set for tracker 'tracker_25647'
> I'm hoping that someone could explain why task_m_cia5po got added to tracker_56288 after this tracker was lost.
> The Crawl .main process died with the following output:
> 060129 221129 Indexer: adding segment: /user/crawler/crawl-20060129091444/segments/20060129200246
> Exception in thread "main" java.io.IOException: timed out waiting for response
>     at org.apache.nutch.ipc.Client.call(Client.java:296)
>     at org.apache.nutch.ipc.RPC$Invoker.invoke(RPC.java:127)
>     at $Proxy1.submitJob(Unknown Source)
>     at org.apache.nutch.mapred.JobClient.submitJob(JobClient.java:259)
>     at org.apache.nutch.mapred.JobClient.runJob(JobClient.java:288)
>     at org.apache.nutch.indexer.Indexer.index(Indexer.java:263)
>     at org.apache.nutch.crawl.Crawl.main(Crawl.java:127)
> However, it definitely seems as if the JobTracker is still waiting for the job to finish (no failed jobs).
> Doug Cutting's response:
> The bug here is that the RPC call times out while the map task is computing splits.  The fix is that the job tracker should not compute splits until after it has returned from the submitJob RPC.  Please submit a bug in Jira to help remind us to fix this.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Feb 10 16:32:18 2006
Return-Path: 
 <hadoop-dev-return-107-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 26475 invoked from network); 10 Feb 2006 16:32:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 16:32:18 -0000
Received: (qmail 30520 invoked by uid 500); 10 Feb 2006 16:32:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 30486 invoked by uid 500); 10 Feb 2006 16:32:18 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 30477 invoked by uid 99); 10 Feb 2006 16:32:17 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 08:32:17 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id A44F9DC
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Feb 2006 17:31:56 +0100 (CET)
Message-ID: <434080336.1139589116649.JavaMail.jira@ajax.apache.org>
Date: Fri, 10 Feb 2006 17:31:56 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-31) Stipulate main class in a job jar when
 using 'hadoop jar JARNAME'
In-Reply-To: <1434168117.1139530615612.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-31?page=all ]
     
Doug Cutting resolved HADOOP-31:
--------------------------------

    Resolution: Won't Fix

Closing at  reporter's request.

> Stipulate main class in a job jar when using 'hadoop jar JARNAME'
> -----------------------------------------------------------------
>
>          Key: HADOOP-31
>          URL: http://issues.apache.org/jira/browse/HADOOP-31
>      Project: Hadoop
>         Type: New Feature
>     Reporter: stack@archive.org
>     Priority: Minor

>
> One use case I forsee is building one jar but using this one jar running multiple jobs: E.g. A single nutch job jar would now be used to do indexing job, later same jar is used to do dedup, etc. Currently, the recently added hadoop 'jar' option just takes the jar name then looks in the jar MANIFEST.MF for the Main-Class, failing if not present. This is grand but for the scenario above, it means I have to create a jar per job I want to run -- each with a different MANIFEST.MF#Main-Class entry. 
> Can we pass the Main-Class on the hadoop command-line as an (optional) argument to 'hadoop jar JAR_NAME'? (I can make a patch if wanted). 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Feb 10 17:06:57 2006
Return-Path: 
 <hadoop-dev-return-108-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 45440 invoked from network); 10 Feb 2006 17:06:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 17:06:57 -0000
Received: (qmail 23632 invoked by uid 500); 10 Feb 2006 17:06:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23580 invoked by uid 500); 10 Feb 2006 17:06:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23560 invoked by uid 99); 10 Feb 2006 17:06:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 09:06:43 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.109.112.27] (HELO mrout1-b.corp.dcn.yahoo.com)
 (216.109.112.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 09:06:42 -0800
Received: from [IPv6:::1] (proxy7.corp.yahoo.com [216.145.48.98])
	by mrout1-b.corp.dcn.yahoo.com (8.13.4/8.13.4/y.out) with ESMTP id
 k1AH6AU6052993
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Feb 2006 09:06:11 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:content-transfer-encoding:message-id:
	content-type:to:from:subject:date:x-mailer;
	b=msFCxpPhUvBn1MG4ELP1q5SDEmfPue0PfomJfsH9l3YlPeI9CeOfI6M+ZTCuf0Pc
Mime-Version: 1.0 (Apple Message framework v623)
Content-Transfer-Encoding: 7bit
Message-Id: <fe16018e45d03152c6b843508a40ea31@yahoo-inc.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
To: hadoop-dev@lucene.apache.org
From: "Owen O'Malley" <owen@yahoo-inc.com>
Subject: Adding MapperBase and ReduceBase
Date: Fri, 10 Feb 2006 09:06:15 -0800
X-Mailer: Apple Mail (2.623)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Looking over the examples with Michel's addition of close, I'd like to 
suggest creating abstract classes MapperBase and ReducerBase that 
implement Mapper and Reducer interfaces respectively and have empty 
configure and close methods.

By providing the default methods, developers will only have to 
implement map or reduce unless they need the additional functionality.

Thoughts?

-- Owen


From MAILER-DAEMON Fri Feb 10 17:39:20 2006
Return-Path: 
 <hadoop-dev-return-109-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 62711 invoked from network); 10 Feb 2006 17:39:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 17:39:20 -0000
Received: (qmail 95279 invoked by uid 500); 10 Feb 2006 17:39:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95254 invoked by uid 500); 10 Feb 2006 17:39:19 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95245 invoked by uid 99); 10 Feb 2006 17:39:19 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 09:39:17 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 84370DD
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Feb 2006 18:38:56 +0100 (CET)
Message-ID: <689393948.1139593136539.JavaMail.jira@ajax.apache.org>
Date: Fri, 10 Feb 2006 18:38:56 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-30) DFS shell: support for ls -r and cat
In-Reply-To: <1717747145.1139526955947.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-30?page=all ]
     
Doug Cutting resolved HADOOP-30:
--------------------------------

    Resolution: Fixed

I just applied this.  Thanks, Michel!

> DFS shell: support for ls -r and cat
> ------------------------------------
>
>          Key: HADOOP-30
>          URL: http://issues.apache.org/jira/browse/HADOOP-30
>      Project: Hadoop
>         Type: Improvement
>     Reporter: Michel Tourn
>  Attachments: lsrcat.patch
>
> patch attached

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Feb 10 17:53:18 2006
Return-Path: 
 <hadoop-dev-return-110-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68078 invoked from network); 10 Feb 2006 17:53:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 17:53:18 -0000
Received: (qmail 17062 invoked by uid 500); 10 Feb 2006 17:53:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17048 invoked by uid 500); 10 Feb 2006 17:53:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17039 invoked by uid 99); 10 Feb 2006 17:53:17 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 09:53:17 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 7A939DD
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Feb 2006 18:52:56 +0100 (CET)
Message-ID: <790135818.1139593976500.JavaMail.jira@ajax.apache.org>
Date: Fri, 10 Feb 2006 18:52:56 +0100 (CET)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-3) Output directories are not cleaned up
 before the reduces run
In-Reply-To: <859498351.1139000372103.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-3?page=all ]

Owen O'Malley updated HADOOP-3:
-------------------------------

    Attachment: clean-out-dir.patch

This patch makes the driver process delete the output directory before submitting the job.

> Output directories are not cleaned up before the reduces run
> ------------------------------------------------------------
>
>          Key: HADOOP-3
>          URL: http://issues.apache.org/jira/browse/HADOOP-3
>      Project: Hadoop
>         Type: Bug
>   Components: mapred
>     Reporter: Owen O'Malley
>     Priority: Minor
>  Attachments: clean-out-dir.patch
>
> The output directory for the reduces is not cleaned up and therefore if you can see left overs from previous runs, if they had more reduces. For example, if you run the application once with reduces=10 and then rerun with reduces=8, your output directory will have frag00000 to frag00009 with the first 8 fragments from the second run and the last 2 fragments from the first run.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Feb 10 18:05:18 2006
Return-Path: 
 <hadoop-dev-return-111-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77012 invoked from network); 10 Feb 2006 18:05:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 18:05:18 -0000
Received: (qmail 40998 invoked by uid 500); 10 Feb 2006 18:05:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40948 invoked by uid 500); 10 Feb 2006 18:05:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 40939 invoked by uid 99); 10 Feb 2006 18:05:17 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 10:05:17 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 97FBADD
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Feb 2006 19:04:56 +0100 (CET)
Message-ID: <1848528745.1139594696620.JavaMail.jira@ajax.apache.org>
Date: Fri, 10 Feb 2006 19:04:56 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-3) Output directories are not cleaned up
 before the reduces run
In-Reply-To: <859498351.1139000372103.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-3?page=comments#action_12365934 ] 

Doug Cutting commented on HADOOP-3:
-----------------------------------

An even safer way to fix this would be to have JobClient throw an exception if the output directory already exists.  That way folks won't inadvertantly overwrite things.

> Output directories are not cleaned up before the reduces run
> ------------------------------------------------------------
>
>          Key: HADOOP-3
>          URL: http://issues.apache.org/jira/browse/HADOOP-3
>      Project: Hadoop
>         Type: Bug
>   Components: mapred
>     Reporter: Owen O'Malley
>     Priority: Minor
>  Attachments: clean-out-dir.patch
>
> The output directory for the reduces is not cleaned up and therefore if you can see left overs from previous runs, if they had more reduces. For example, if you run the application once with reduces=10 and then rerun with reduces=8, your output directory will have frag00000 to frag00009 with the first 8 fragments from the second run and the last 2 fragments from the first run.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Feb 10 18:07:18 2006
Return-Path: 
 <hadoop-dev-return-112-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85530 invoked from network); 10 Feb 2006 18:07:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 18:07:18 -0000
Received: (qmail 43577 invoked by uid 500); 10 Feb 2006 18:07:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 43562 invoked by uid 500); 10 Feb 2006 18:07:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 43553 invoked by uid 99); 10 Feb 2006 18:07:17 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 10:07:17 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id EF848DC
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Feb 2006 19:06:55 +0100 (CET)
Message-ID: <1474563505.1139594815884.JavaMail.jira@ajax.apache.org>
Date: Fri, 10 Feb 2006 19:06:55 +0100 (CET)
From: "Gordon Mohr (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-31) Stipulate main class in a job jar
 when using 'hadoop jar JARNAME'
In-Reply-To: <1434168117.1139530615612.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-31?page=comments#action_12365935 ] 

Gordon Mohr commented on HADOOP-31:
-----------------------------------

Perhaps ExampleDriver could itself be renamed/moved to more general 'Launcher' that's documented as a framework convenience class for Hadoop users who have a single-Jar, many main()s usage?

> Stipulate main class in a job jar when using 'hadoop jar JARNAME'
> -----------------------------------------------------------------
>
>          Key: HADOOP-31
>          URL: http://issues.apache.org/jira/browse/HADOOP-31
>      Project: Hadoop
>         Type: New Feature
>     Reporter: stack@archive.org
>     Priority: Minor

>
> One use case I forsee is building one jar but using this one jar running multiple jobs: E.g. A single nutch job jar would now be used to do indexing job, later same jar is used to do dedup, etc. Currently, the recently added hadoop 'jar' option just takes the jar name then looks in the jar MANIFEST.MF for the Main-Class, failing if not present. This is grand but for the scenario above, it means I have to create a jar per job I want to run -- each with a different MANIFEST.MF#Main-Class entry. 
> Can we pass the Main-Class on the hadoop command-line as an (optional) argument to 'hadoop jar JAR_NAME'? (I can make a patch if wanted). 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Feb 10 18:29:10 2006
Return-Path: 
 <hadoop-dev-return-113-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 71349 invoked from network); 10 Feb 2006 18:29:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 18:29:10 -0000
Received: (qmail 13156 invoked by uid 500); 10 Feb 2006 18:29:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13134 invoked by uid 500); 10 Feb 2006 18:29:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13124 invoked by uid 99); 10 Feb 2006 18:29:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 10:29:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.115.57.32] (HELO ylpvm01.prodigy.net) (207.115.57.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 10:29:06 -0800
Received: from pimout5-ext.prodigy.net (pimout5-int.prodigy.net
 [207.115.4.21])
	by ylpvm01.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id
 k1AISja5031258
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Feb 2006 13:28:45 -0500
X-ORBL: [69.228.232.128]
Received: from [192.168.168.15] (adsl-69-228-232-128.dsl.pltn13.pacbell.net
 [69.228.232.128])
	by pimout5-ext.prodigy.net (8.13.4 outbound domainkey aix/8.13.4) with ESMTP
 id k1AISXGc066014;
	Fri, 10 Feb 2006 13:28:37 -0500
Message-ID: <43ECDB64.7020801@apache.org>
Date: Fri, 10 Feb 2006 10:28:52 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: Adding MapperBase and ReduceBase
References: <fe16018e45d03152c6b843508a40ea31@yahoo-inc.com>
In-Reply-To: <fe16018e45d03152c6b843508a40ea31@yahoo-inc.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Owen O'Malley wrote:
> Looking over the examples with Michel's addition of close, I'd like to 
> suggest creating abstract classes MapperBase and ReducerBase that 
> implement Mapper and Reducer interfaces respectively and have empty 
> configure and close methods.
> 
> By providing the default methods, developers will only have to implement 
> map or reduce unless they need the additional functionality.
> 
> Thoughts?

There are cases where I've used a single class to implement both map() 
and reduce().  For these a base class that implements Closeable and 
JobConfigurable would better than a MapperBase and ReducerBase.  It 
could also extend Configured, implementing Configurable.  We might call 
it JobConfigured:

public abstract class JobConfigured
   implements Closeable, JobConfigurable
   extends Configured {

   public JobConfigured() { super(null); }

   public JobConfigured(Configuration conf) { super(conf); }

   public void configure(JobConf conf) { setConf(conf); }

   public void close() {}
}

Then one can define mapred applications as simply as:

public class MyMapredApplication extends JobConfigured {
   public map(...) { ... };
   public reduce(...) { ... };

   public static void main(String[] args) throws Exception {
     Configuration conf = new Configuration();
     JobConf job = new JobConf(conf, MyMapredApplication.class);
     job.setMapper(MyMapredApplication.class);
     job.setReducer(MyMapredApplication.class);
     job.setInputDir(args[0]);
     job.setOutputDir(args[1]);
     JobClient.run(job);
   }
}

It would be nice to even remove the need for the calls to setMapper() 
and setReducer() above, i.e., to have JobConf default the mapper, 
reducer, etc. to things that are implemented by the class passed to its 
constructor.

Doug

From MAILER-DAEMON Fri Feb 10 19:51:40 2006
Return-Path: 
 <hadoop-dev-return-114-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30573 invoked from network); 10 Feb 2006 19:51:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 19:51:40 -0000
Received: (qmail 87289 invoked by uid 500); 10 Feb 2006 19:51:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 87266 invoked by uid 500); 10 Feb 2006 19:51:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 87257 invoked by uid 99); 10 Feb 2006 19:51:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 11:51:30 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of bpendleton@gmail.com designates
 64.233.162.194 as permitted sender)
Received: from [64.233.162.194] (HELO zproxy.gmail.com) (64.233.162.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 11:51:29 -0800
Received: by zproxy.gmail.com with SMTP id m22so537479nzf
        for <hadoop-dev@lucene.apache.org>;
 Fri, 10 Feb 2006 11:51:08 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references;
        b=XV19b8Lb4y6vrnrDyG2A7MphGB+5nk8hN4IlfrXJ6SjiqZxE+eXdhBmv3vHcaQF7BELubtyvwgEM6Sa54X5iu4uAcICfvU7tCKpdx2My3tyknbHFPmE6cW7VScLf7dO7QeFsrUqLEb2LrvYs18EbDomTTv2dJyCINcE3ahfHKl4=
Received: by 10.64.91.12 with SMTP id o12mr707699qbb;
        Fri, 10 Feb 2006 11:51:08 -0800 (PST)
Received: by 10.65.232.5 with HTTP; Fri, 10 Feb 2006 11:51:08 -0800 (PST)
Message-ID: <1bf79d3e0602101151o13f54e34teec9571eb278b665@mail.gmail.com>
Date: Fri, 10 Feb 2006 11:51:08 -0800
From: "Bryan A. Pendleton" <bp@geekdom.net>
Sender: bpendleton@gmail.com
To: hadoop-dev@lucene.apache.org
Subject: Re: svn commit: r376366 - in /lucene/hadoop/trunk: build.xml
 src/webapps/jobtracker/ src/webapps/mapred/
In-Reply-To: <20060209180604.91342.qmail@minotaur.apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_Part_517_15425184.1139601068290"
References: <20060209180604.91342.qmail@minotaur.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_517_15425184.1139601068290
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

V2hlbiBJIHVzZSB0aGUgbGF0ZXN0IGJ1aWxkLnhtbCwgdGhlIGphc3BlciB0YXNrIGRvZXNuJ3Qg
cnVuLgoKSXMgdGhlcmUgYSBtaXNzaW5nIGxpYnJhcnkgdGhhdCBzaG91bGQgYmUgYXZhaWxhYmxl
IHRvIG1ha2UgdGhpcyB3b3JrIGZvcgphbnQ/IEknbSB1c2luZyBhIGRlYmlhbi1pbnN0YWxsZWQg
YW50LCB3aXRoIHRoZSBhbnQtb3B0aW9uYWwgcGFja2FnZSBhbHNvCmluc3RhbGxlZC4gQWZ0ZXIg
YSBkZWZhdWx0ICJhbnQiIGJ1aWxkLCB0aGVyZSBhcmUgbm8ganNwcyBpbiBidWlsZC93ZWJhcHBz
LgpUaGUgICJjb21waWxlOiIgYW50IGpvYiBkb2Vzbid0IG1lbnRpb24gYSBqc3AtY29tcGlsZSB0
YXNrLCBlaXRoZXIsIGFsbCBvZgp0aGUgbGluZXMgb2Ygb3V0cHV0IGFyZSBwcmVmaXhlZCB3aXRo
ICJbamF2YWNdIi4gSGl0dGluZwpqb2J0cmFja2VyaG9zdDpwb3J0LyBnaXZlcyBhbiBpbmRleCwg
aGl0dGluZyAvam9idHJhY2tlci5qc3AgZ2l2ZXMgYSA0MDQuCkhpdHRpbmcgL2pvYnRyYWNrZXIv
am9idHJhY2tlci5qc3AgZ2l2ZXMgYSBidW5jaCBvZiBjb21waWxlIGVycm9ycywgdW5sZXNzIEkK
bWFrZSBhbGwgb2YgdGhlIEpvYiogY2xhc3NlcyB0aGF0IGFyZSB1c2VkIHB1YmxpYyAoaWUsIHRo
aXMgaXMgY2VydGFpbmx5IG5vdApydW5uaW5nIHRoZSBwcmVjb21waWxlZCBqc3BzIGFzIHNlcnZs
ZXRzKS4KCk9uIDIvOS8wNiwgY3V0dGluZ0BhcGFjaGUub3JnIDxjdXR0aW5nQGFwYWNoZS5vcmc+
IHdyb3RlOgo+Cj4gQXV0aG9yOiBjdXR0aW5nCj4gRGF0ZTogVGh1IEZlYiAgOSAxMDowNjowMiAy
MDA2Cj4gTmV3IFJldmlzaW9uOiAzNzYzNjYKPgo+IFVSTDogaHR0cDovL3N2bi5hcGFjaGUub3Jn
L3ZpZXdjdnM/cmV2PTM3NjM2NiZ2aWV3PXJldgo+IExvZzoKPiBTdG9wIHVzaW5nIGRlcHJlY2F0
ZWQgJ2pzcGMnIGFudCB0YXNrIGFuZCBpbnN0ZWFkIGNhbGwgamFzcGVyCj4gZGlyZWN0bHkuICBB
bHNvIHJlbmFtZSB3ZWJhcHAgZmlsZXMgdG8gYWxpZ24gd2l0aCBwYWNrYWdlIG5hbWUuCj4KPiBB
ZGRlZDoKPiAgICAgbHVjZW5lL2hhZG9vcC90cnVuay9zcmMvd2ViYXBwcy9tYXByZWQvCj4gICAg
ICAgLSBjb3BpZWQgZnJvbSByMzc2MDg1LCBsdWNlbmUvaGFkb29wL3RydW5rL3NyYy93ZWJhcHBz
L2pvYnRyYWNrZXIvCj4gUmVtb3ZlZDoKPiAgICAgbHVjZW5lL2hhZG9vcC90cnVuay9zcmMvd2Vi
YXBwcy9qb2J0cmFja2VyLwo+IE1vZGlmaWVkOgo+ICAgICBsdWNlbmUvaGFkb29wL3RydW5rL2J1
aWxkLnhtbAo+Cj4gTW9kaWZpZWQ6IGx1Y2VuZS9oYWRvb3AvdHJ1bmsvYnVpbGQueG1sCj4gVVJM
Ogo+IGh0dHA6Ly9zdm4uYXBhY2hlLm9yZy92aWV3Y3ZzL2x1Y2VuZS9oYWRvb3AvdHJ1bmsvYnVp
bGQueG1sP3Jldj0zNzYzNjYmcjE9Mzc2MzY1JnIyPTM3NjM2NiZ2aWV3PWRpZmYKPgo+ID09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PQo+IC0tLSBsdWNlbmUvaGFkb29wL3RydW5rL2J1aWxkLnhtbCAob3Jp
Z2luYWwpCj4gKysrIGx1Y2VuZS9oYWRvb3AvdHJ1bmsvYnVpbGQueG1sIFRodSBGZWIgIDkgMTA6
MDY6MDIgMjAwNgo+IEBAIC05NiwxNiArOTYsMTggQEAKPiAgICA8IS0tID09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAtLT4KPiAgICA8IS0tIENv
bXBpbGUgdGhlIEphdmEgZmlsZXMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLT4K
PiAgICA8IS0tID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PSAtLT4KPiArICA8dGFza2RlZiBjbGFzc25hbWU9Im9yZy5hcGFjaGUuamFzcGVyLkpz
cEMiIG5hbWU9ImpzcC1jb21waWxlIiA+Cj4gKyAgICAgIDxjbGFzc3BhdGggcmVmaWQ9ImNsYXNz
cGF0aCIvPgo+ICsgIDwvdGFza2RlZj4KPiArCj4gICAgPHRhcmdldCBuYW1lPSJjb21waWxlIiBk
ZXBlbmRzPSJpbml0Ij4KPiAtICAgIDxqc3BjCj4gLSAgICAgc3JjZGlyPSIke3NyYy53ZWJhcHBz
fSIKPiAtICAgICBpbmNsdWRlcz0iKiovKi5qc3AiCj4gLSAgICAgZGVzdGRpcj0iJHtidWlsZC5z
cmN9Igo+ICsKPiArICAgIDxqc3AtY29tcGlsZQo+ICsgICAgIHVyaXJvb3Q9IiR7c3JjLndlYmFw
cHN9L21hcHJlZCIKPiArICAgICBvdXRwdXRkaXI9IiR7YnVpbGQuc3JjfSIKPiAgICAgICBwYWNr
YWdlPSJvcmcuYXBhY2hlLmhhZG9vcC5tYXByZWQiCj4gLSAgICAgdXJpcm9vdD0iJHtzcmMud2Vi
YXBwc30vam9idHJhY2tlciIKPiAgICAgICB3ZWJ4bWw9IiR7YnVpbGQud2ViYXBwc30vV0VCLUlO
Ri93ZWIueG1sIj4KPiAtICAgICAgPGNsYXNzcGF0aCByZWZpZD0iY2xhc3NwYXRoIi8+Cj4gLSAg
ICA8L2pzcGM+Cj4gKyAgICA8L2pzcC1jb21waWxlPgo+Cj4gICAgICA8amF2YWMKPiAgICAgICBl
bmNvZGluZz0iJHtidWlsZC5lbmNvZGluZ30iCj4KPgo+CgoKLS0KQnJ5YW4gQS4gUGVuZGxldG9u
ClBoOiAoODc3KSBnZWVrLTEtYnAK
------=_Part_517_15425184.1139601068290--

From MAILER-DAEMON Fri Feb 10 21:26:48 2006
Return-Path: 
 <hadoop-dev-return-115-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 90696 invoked from network); 10 Feb 2006 21:26:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 21:26:48 -0000
Received: (qmail 47110 invoked by uid 500); 10 Feb 2006 21:26:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47049 invoked by uid 500); 10 Feb 2006 21:26:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47020 invoked by uid 99); 10 Feb 2006 21:26:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 13:26:38 -0800
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.115.57.43] (HELO ylpvm12.prodigy.net) (207.115.57.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 13:26:34 -0800
Received: from pimout6-ext.prodigy.net (pimout6-int.prodigy.net
 [207.115.4.22])
	by ylpvm12.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id
 k1ALQ634013263
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Feb 2006 16:26:07 -0500
X-ORBL: [69.228.232.128]
Received: from [192.168.168.15] (adsl-69-228-232-128.dsl.pltn13.pacbell.net
 [69.228.232.128])
	by pimout6-ext.prodigy.net (8.13.4 outbound domainkey aix/8.13.4) with ESMTP
 id k1ALQ4gu109840;
	Fri, 10 Feb 2006 16:26:08 -0500
Message-ID: <43ED0500.7000500@apache.org>
Date: Fri, 10 Feb 2006 13:26:24 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: Writable vs Externalizable
References: <cace32060602091611r7f2531dfmce0fb07a034c9476@mail.gmail.com>
In-Reply-To: <cace32060602091611r7f2531dfmce0fb07a034c9476@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Jeremy Calvert wrote:
> With the move to Hadoop, is moving from Writable to Externalizable
> being considered?

Let's consider it.

Externalizeable uses ObjectOutput and ObjectInput instead of the 
DataInput and DataOutput we currently use, so we'd need to switch to 
these everywhere.  This would not be too hard, since the 'Object' 
interfaces extend the 'Data' interfaces.

Then we could replace uses of ObjectWritable with writeObject() and 
readObject().  But we need to be careful with our use of 
ObjectOutputStream and ObjectInputStream.  We need to call reset() 
between each entry written so that we can randomly seek into the file. 
This will add a few bytes of overhead per entry (reset byte plus block 
header).

SequenceFile could call writeExternal() and readExternal() directly, 
rather than readObject() and writeObject(), since the classes are 
already known and we don't want to write the class name of each entry. 
But then we'd still need wrapper classes like IntWritable, LongWritable, 
FloatWritable, etc. for ints, floats, longs, strings, arrays, etc, since 
none of these implement Externalizeable.

Alternately, SequenceFile could use writeObject() and readObject(), and 
our files would get a *lot* bigger, since the class names would be 
written with each entry.  To avoid this, we could implement 
writeClassDescriptor() to use a table that we could pre-populate with 
common types, so that only a few bytes would be added to each key and 
value to indicate its class.  Then, at the expense of perhaps a total of 
ten bytes per entry, we'd be able to have polymorphic files, where keys 
and values are not all of the same type.  We'd also be able to directly 
use classes like Long, Integer and String as keys and values.  Do we 
need these features?

Switching to Externalizeable would also improve things for folks who 
implement Externalizeable anyway, saving them having to implement 
Writable.  And, finally, it would make Hadoop and Nutch objects more 
interoperable with other systems that use Externalizeable.  (One could, 
e.g., more efficiently use RMI to pass a Nutch CrawlDatum, since it 
would use Nutch's more efficient externalization rather than Java's 
default.)

In summary, I don't think I'd reject a patch that makes this change, but 
I also would not personally wish to spend a lot of effort implementing 
it, since I don't see a huge value.

Doug

From MAILER-DAEMON Fri Feb 10 21:36:14 2006
Return-Path: 
 <hadoop-dev-return-116-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94574 invoked from network); 10 Feb 2006 21:36:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 21:36:14 -0000
Received: (qmail 63160 invoked by uid 500); 10 Feb 2006 21:36:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63099 invoked by uid 500); 10 Feb 2006 21:36:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63088 invoked by uid 99); 10 Feb 2006 21:36:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 13:36:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.115.57.32] (HELO ylpvm01.prodigy.net) (207.115.57.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 13:36:11 -0800
Received: from pimout5-ext.prodigy.net (pimout5-int.prodigy.net
 [207.115.4.21])
	by ylpvm01.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id
 k1ALZoa5017029
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Feb 2006 16:35:51 -0500
X-ORBL: [69.228.232.128]
Received: from [192.168.168.15] (adsl-69-228-232-128.dsl.pltn13.pacbell.net
 [69.228.232.128])
	by pimout5-ext.prodigy.net (8.13.4 outbound domainkey aix/8.13.4) with ESMTP
 id k1ALZj5Z196456;
	Fri, 10 Feb 2006 16:35:47 -0500
Message-ID: <43ED0744.1050604@apache.org>
Date: Fri, 10 Feb 2006 13:36:04 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: svn commit: r376366 - in /lucene/hadoop/trunk: build.xml
 src/webapps/jobtracker/
 src/webapps/mapred/
References: <20060209180604.91342.qmail@minotaur.apache.org>
 <1bf79d3e0602101151o13f54e34teec9571eb278b665@mail.gmail.com>
In-Reply-To: <1bf79d3e0602101151o13f54e34teec9571eb278b665@mail.gmail.com>
Content-Type: multipart/mixed;
 boundary="------------070700080604070104000002"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--------------070700080604070104000002
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Bryan A. Pendleton wrote:
> When I use the latest build.xml, the jasper task doesn't run.
> 
> Is there a missing library that should be available to make this work for
> ant? I'm using a debian-installed ant, with the ant-optional package also
> installed. After a default "ant" build, there are no jsps in build/webapps.
> The  "compile:" ant job doesn't mention a jsp-compile task, either, all of
> the lines of output are prefixed with "[javac]". Hitting

I strongly recommend installing ant from Apache.  I've seen strange 
problems before with the debian install.  My ant shows:

ant -version
Apache Ant version 1.6.5 compiled on June 2 2005

Try the following:

svn co https://svn.apache.org/repos/asf/lucene/hadoop/trunk hadoop
cd hadoop
ant
.... copy attached hadoop-site.xml to conf ...
bin/start-all.sh
wget -O - http://localhost:50030/

Does that work for you?

Doug

--------------070700080604070104000002
Content-Type: text/xml;
 name="hadoop-site.xml"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="hadoop-site.xml"

<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>

<!-- Put site-specific property overrides in this file. -->

<configuration>

<property>
  <name>fs.default.name</name>
  <value>localhost:5555</value>
</property>

<property>
  <name>mapred.job.tracker</name>
  <value>localhost:6666</value>
</property>

<property>
  <name>dfs.replication</name>
  <value>1</value>
</property>

</configuration>

--------------070700080604070104000002--

From MAILER-DAEMON Fri Feb 10 22:45:03 2006
Return-Path: 
 <hadoop-dev-return-117-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 24330 invoked from network); 10 Feb 2006 22:45:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 22:45:03 -0000
Received: (qmail 92436 invoked by uid 500); 10 Feb 2006 22:44:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 92397 invoked by uid 500); 10 Feb 2006 22:44:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 92384 invoked by uid 99); 10 Feb 2006 22:44:58 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 14:44:56 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 105B7DF
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Feb 2006 23:44:35 +0100 (CET)
Message-ID: <922804577.1139611475063.JavaMail.jira@ajax.apache.org>
Date: Fri, 10 Feb 2006 23:44:35 +0100 (CET)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-33) DF enhancement: performance and win XP
 support
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

DF enhancement: performance and win XP support
----------------------------------------------

         Key: HADOOP-33
         URL: http://issues.apache.org/jira/browse/HADOOP-33
     Project: Hadoop
        Type: Improvement
  Components: fs, dfs  
 Environment: Unix, Cygwin, Win XP
    Reporter: Konstantin Shvachko
    Priority: Minor


1. DF is called twice for each heartbeat, which happens each 3 seconds.
There is a simple fix for that in the attached patch.

2. cygwin is required to run df program in windows environment.
There is a class org.apache.commons.io.FileSystemUtils, which can return disk free space
for different OSs, but it does not have means to get disk capacity.
In general in windows there is no efficient and uniform way to calculate disk capacity
using a shell command.
The choices are 'chkdsk' and 'defrag -a', but both of them are too slow to be called
every 3 seconds.
WinXP and 2003 server have a new tool called fsutil, which provides all necessary info.
I implemented a call to fsutil in case df fails, and the OS is right.
Other win versions should still run cygwin.
I tested this fetaure for linux, winXP and cygwin.
See attached patch.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Feb 10 22:46:20 2006
Return-Path: 
 <hadoop-dev-return-118-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 24780 invoked from network); 10 Feb 2006 22:46:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 22:46:20 -0000
Received: (qmail 93336 invoked by uid 500); 10 Feb 2006 22:46:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 93275 invoked by uid 500); 10 Feb 2006 22:46:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 93263 invoked by uid 99); 10 Feb 2006 22:46:20 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 14:46:17 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id D3782DD
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Feb 2006 23:45:56 +0100 (CET)
Message-ID: <88659452.1139611556863.JavaMail.jira@ajax.apache.org>
Date: Fri, 10 Feb 2006 23:45:56 +0100 (CET)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-33) DF enhancement: performance and win XP
 support
In-Reply-To: <922804577.1139611475063.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-33?page=all ]

Konstantin Shvachko updated HADOOP-33:
--------------------------------------

    Attachment: DFpatch.txt

> DF enhancement: performance and win XP support
> ----------------------------------------------
>
>          Key: HADOOP-33
>          URL: http://issues.apache.org/jira/browse/HADOOP-33
>      Project: Hadoop
>         Type: Improvement
>   Components: fs, dfs
>  Environment: Unix, Cygwin, Win XP
>     Reporter: Konstantin Shvachko
>     Priority: Minor
>  Attachments: DFpatch.txt
>
> 1. DF is called twice for each heartbeat, which happens each 3 seconds.
> There is a simple fix for that in the attached patch.
> 2. cygwin is required to run df program in windows environment.
> There is a class org.apache.commons.io.FileSystemUtils, which can return disk free space
> for different OSs, but it does not have means to get disk capacity.
> In general in windows there is no efficient and uniform way to calculate disk capacity
> using a shell command.
> The choices are 'chkdsk' and 'defrag -a', but both of them are too slow to be called
> every 3 seconds.
> WinXP and 2003 server have a new tool called fsutil, which provides all necessary info.
> I implemented a call to fsutil in case df fails, and the OS is right.
> Other win versions should still run cygwin.
> I tested this fetaure for linux, winXP and cygwin.
> See attached patch.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Feb 10 23:34:04 2006
Return-Path: 
 <hadoop-dev-return-119-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 63949 invoked from network); 10 Feb 2006 23:34:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 23:34:04 -0000
Received: (qmail 44287 invoked by uid 500); 10 Feb 2006 23:34:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 44267 invoked by uid 500); 10 Feb 2006 23:34:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 44257 invoked by uid 99); 10 Feb 2006 23:34:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 15:34:04 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.145.54.172] (HELO mrout2.yahoo.com) (216.145.54.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 15:34:03 -0800
Received: from [207.126.231.161] (oom-mac.corp.yahoo.com [207.126.231.161])
	by mrout2.yahoo.com (8.13.4/8.13.4/y.out) with ESMTP id k1ANXLJ2086751
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Feb 2006 15:33:21 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=ftN9clqbrIiVYSiJVIpr2vBRCfWmiFQ81cfXDOPXRxL88nOpjaPGzCYpt1rB8PLD
Mime-Version: 1.0 (Apple Message framework v623)
In-Reply-To: <43ECDB64.7020801@apache.org>
References: <fe16018e45d03152c6b843508a40ea31@yahoo-inc.com>
 <43ECDB64.7020801@apache.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <090f911c7d6559baac38e7c7c8fdaded@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: "Owen O'Malley" <owen@yahoo-inc.com>
Subject: Re: Adding MapperBase and ReduceBase
Date: Fri, 10 Feb 2006 15:33:26 -0800
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.623)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Feb 10, 2006, at 10:28 AM, Doug Cutting wrote:

> Owen O'Malley wrote:
>> Looking over the examples with Michel's addition of close, I'd like 
>> to suggest creating abstract classes MapperBase and ReducerBase that 
>> implement Mapper and Reducer interfaces respectively and have empty 
>> configure and close methods.
>> By providing the default methods, developers will only have to 
>> implement map or reduce unless they need the additional 
>> functionality.
>> Thoughts?
>
> There are cases where I've used a single class to implement both map() 
> and reduce().  For these a base class that implements Closeable and 
> JobConfigurable would better than a MapperBase and ReducerBase.  It 
> could also extend Configured, implementing Configurable.  We might 
> call it JobConfigured:

Is the Closable interface useful? How about a little renaming and 
simplifying to do:

public interface UserTask  extends Configurable {
    void close();
}

public class UserTaskBase implements UserTask extends Configured {
    ... default methods ...
}

public interface Mapper extends UserTask {
   void map(...);
}

public interface Reducer extends UserTask {
   void reduce(...);
}

public class WordCount implements Mapper, Reducer extends UserTaskBase {
   public void map(...)
   public void reduce(...)

   public static void main(...)
}

When looking through the code, the auto configuration in 
JobConf.newInstance is pretty confusing. Reading through the code, it 
looks like the Reducer objects are configured twice.

> It would be nice to even remove the need for the calls to setMapper() 
> and setReducer() above, i.e., to have JobConf default the mapper, 
> reducer, etc. to things that are implemented by the class passed to 
> its constructor.

Which constructor is doing this? The JobConfigured? I'd be worried 
about the different contexts that the JobConfs are created in. In 
particular, the only place they could meaningfully be set is the 
JobConf in the driver process, which doesn't have any Mapper or Reducer 
objects instantiated.

-- Owen


From MAILER-DAEMON Fri Feb 10 23:45:14 2006
Return-Path: 
 <hadoop-dev-return-120-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68810 invoked from network); 10 Feb 2006 23:45:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 23:45:14 -0000
Received: (qmail 57176 invoked by uid 500); 10 Feb 2006 23:45:14 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 57126 invoked by uid 500); 10 Feb 2006 23:45:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 57113 invoked by uid 99); 10 Feb 2006 23:45:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 15:45:13 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.145.54.172] (HELO mrout2.yahoo.com) (216.145.54.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 15:45:13 -0800
Received: from [207.126.231.161] (oom-mac.corp.yahoo.com [207.126.231.161])
	by mrout2.yahoo.com (8.13.4/8.13.4/y.out) with ESMTP id k1ANiQ17090279
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Feb 2006 15:44:26 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=rfJN4rFdXbrI+M/fabI5fUJu1ZvA8mb614o8yf6XrMAQ1MnqHtF4XaS1LdLfDt5h
Mime-Version: 1.0 (Apple Message framework v623)
In-Reply-To: <1848528745.1139594696620.JavaMail.jira@ajax.apache.org>
References: <1848528745.1139594696620.JavaMail.jira@ajax.apache.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <dc862a1de0f7170d7455c5027643e1ef@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: "Owen O'Malley" <owen@yahoo-inc.com>
Subject: Re: [jira] Commented: (HADOOP-3) Output directories are not cleaned
 up before the reduces run
Date: Fri, 10 Feb 2006 15:44:31 -0800
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.623)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Feb 10, 2006, at 10:04 AM, Doug Cutting (JIRA) wrote:

>     [  
> http://issues.apache.org/jira/browse/HADOOP-3? 
> page=comments#action_12365934 ]
>
> Doug Cutting commented on HADOOP-3:
> -----------------------------------
>
> An even safer way to fix this would be to have JobClient throw an  
> exception if the output directory already exists.  That way folks  
> won't inadvertantly overwrite things.

Jira seems to be broken and not taking comments.

What about having a clobber configuration variable  
(mapred.output.clobber?) that defaults to false?

-- Owen


From MAILER-DAEMON Sat Feb 11 19:20:51 2006
Return-Path: 
 <hadoop-dev-return-121-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 88578 invoked from network); 11 Feb 2006 19:20:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Feb 2006 19:20:51 -0000
Received: (qmail 1775 invoked by uid 500); 11 Feb 2006 19:20:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 1745 invoked by uid 500); 11 Feb 2006 19:20:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 1736 invoked by uid 99); 11 Feb 2006 19:20:50 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Feb 2006 11:20:49 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 40F77DC
	for <hadoop-dev@lucene.apache.org>; Sat, 11 Feb 2006 20:20:28 +0100 (CET)
Message-ID: <1243670982.1139685628218.JavaMail.jira@ajax.apache.org>
Date: Sat, 11 Feb 2006 20:20:28 +0100 (CET)
From: "Chris Schneider (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-16) RPC call times out while indexing map
 task is computing splits
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-16?page=comments#action_12366022 ] 

Chris Schneider commented on HADOOP-16:
---------------------------------------

Everyone should probably be made aware of the strange behavior we see during indexing, at least for a relatively large number of large segments (topN=500K, depth=20) with a relatively large crawldb (50M URLs). Note that this was all performed with ipc.client.timeout set to 30 minutes.

After launching the indexing job, the web UI shows all of the TaskTrackers, but the numbers in the "Secs since heartbeat" column just keep increasing. This goes on for about 10 minutes until the JobTracker finally loses all of them (and the tasks they were working on), as is shown in its log:

060210 224115 parsing file:/home/crawler/nutch/conf/nutch-site.xml
060210 225151 Lost tracker 'tracker_37064'
060210 225151 Task 'task_m_4ftk58' has been lost.
060210 225151 Task 'task_m_6ww2ri' has been lost.

...(snip)...

060210 225151 Task 'task_r_y6d190' has been lost.
060210 225151 Lost tracker 'tracker_92921'
060210 225151 Task 'task_m_9p24at' has been lost.

...(etc)...

At this point, the web UI is still up, the job shows 0% complete, and the TaskTrackers table is empty. It goes on for an hour or so like this, during which any rational person would probably want to kill the job and start over.

Don't do this! Keep the faith!!!

About an hour later, the JobTracker magically reestablishes its connection to the TaskTrackers (which now have new names), as is shown in its log:

060210 225151 Task 'task_r_yj3y3o' has been lost.
060210 235403 Adding task 'task_m_k9u9a8' to set for tracker 'tracker_85874'
060210 235404 Adding task 'task_m_pijt4q' to set for tracker 'tracker_61888'

...(etc)...

The web UI also shows that the TaskTrackers are back (with their new names).

There's nothing in the TaskTracker logs during the initial 10 minutes, then a bunch of exiting and closing messages, until finally the TaskTrackers start "Reinitializing local state":

060210 225403 Stopping server on 50050
060210 230102 Server handler 4 on 50050: exiting

...(snip)...

060210 230105 Server handler 7 on 50050: exiting
060210 232024 Server listener on port 50050: exiting
060210 232403 Stopping server on 50040
060210 234902 Server listener on port 50040: exiting
060210 234925 Server connection on port 50040 from 192.168.1.5: exiting

...(snip)...

060210 235009 Server connection on port 50040 from 192.168.1.10: exiting
060210 235013 Client connection to 192.168.1.4:50040: closing
060210 235014 Client connection to 192.168.1.7:50040: closing
060210 235015 Server connection on port 50040 from 192.168.1.7: exiting
060210 235016 Server handler 0 on 50040: exiting

...(snip)...

060210 235024 Server handler 2 on 50040: exiting
060210 235403 Reinitializing local state
060210 235403 Server listener on port 50050: starting
060210 235403 Server handler 0 on 50050: starting

...(etc)...

During the time that the TaskTrackers are lost, neither the master nor the slave machines seem to be using much of the CPU or RAM, and the DataNode logs are quiet. I suppose that it's probably I/O bound on the master machine, but even that seems mysterious to me. It would seem particularly inappropriate for the JobTracker to punt the TaskTrackers because the master was too busy to listen for their heartbeats.

At any rate, once the TaskTrackers go through the "Reinitializing local state" thing, the indexing job seems to proceed normally, and it eventually completes with no errors.


> RPC call times out while indexing map task is computing splits
> --------------------------------------------------------------
>
>          Key: HADOOP-16
>          URL: http://issues.apache.org/jira/browse/HADOOP-16
>      Project: Hadoop
>         Type: Bug
>   Components: mapred
>  Environment: MapReduce multi-computer crawl environment: 11 machines (1 master with JobTracker/NameNode, 10 slaves with TaskTrackers/DataNodes)
>     Reporter: Chris Schneider

>
> We've been using Nutch 0.8 (MapReduce) to perform some internet crawling. Things seemed to be going well until...
> 060129 222409 Lost tracker 'tracker_56288'
> 060129 222409 Task 'task_m_10gs5f' has been lost.
> 060129 222409 Task 'task_m_10qhzr' has been lost.
>    ........
>    ........
> 060129 222409 Task 'task_r_zggbwu' has been lost.
> 060129 222409 Task 'task_r_zh8dao' has been lost.
> 060129 222455 Server handler 8 on 8010 caught: java.net.SocketException: Socket closed
> java.net.SocketException: Socket closed
>         at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:99)
>         at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
>         at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
>         at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
>         at java.io.DataOutputStream.flush(DataOutputStream.java:106)
>         at org.apache.nutch.ipc.Server$Handler.run(Server.java:216)
> 060129 222455 Adding task 'task_m_cia5po' to set for tracker 'tracker_56288'
> 060129 223711 Adding task 'task_m_ffv59i' to set for tracker 'tracker_25647'
> I'm hoping that someone could explain why task_m_cia5po got added to tracker_56288 after this tracker was lost.
> The Crawl .main process died with the following output:
> 060129 221129 Indexer: adding segment: /user/crawler/crawl-20060129091444/segments/20060129200246
> Exception in thread "main" java.io.IOException: timed out waiting for response
>     at org.apache.nutch.ipc.Client.call(Client.java:296)
>     at org.apache.nutch.ipc.RPC$Invoker.invoke(RPC.java:127)
>     at $Proxy1.submitJob(Unknown Source)
>     at org.apache.nutch.mapred.JobClient.submitJob(JobClient.java:259)
>     at org.apache.nutch.mapred.JobClient.runJob(JobClient.java:288)
>     at org.apache.nutch.indexer.Indexer.index(Indexer.java:263)
>     at org.apache.nutch.crawl.Crawl.main(Crawl.java:127)
> However, it definitely seems as if the JobTracker is still waiting for the job to finish (no failed jobs).
> Doug Cutting's response:
> The bug here is that the RPC call times out while the map task is computing splits.  The fix is that the job tracker should not compute splits until after it has returned from the submitJob RPC.  Please submit a bug in Jira to help remind us to fix this.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Sun Feb 12 18:56:34 2006
Return-Path: 
 <hadoop-dev-return-122-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 64828 invoked from network); 12 Feb 2006 18:56:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Feb 2006 18:56:34 -0000
Received: (qmail 29692 invoked by uid 500); 12 Feb 2006 18:56:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 29634 invoked by uid 500); 12 Feb 2006 18:56:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 29625 invoked by uid 99); 12 Feb 2006 18:56:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Feb 2006 10:56:33 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of bpendleton@gmail.com designates
 64.233.184.207 as permitted sender)
Received: from [64.233.184.207] (HELO wproxy.gmail.com) (64.233.184.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Feb 2006 10:56:32 -0800
Received: by wproxy.gmail.com with SMTP id 36so885296wra
        for <hadoop-dev@lucene.apache.org>;
 Sun, 12 Feb 2006 10:56:11 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references;
        b=LksPkW+XKqY0+3vpzGhMb5N4/TC7clKrhRF684OMchxda/nzB9mcwwShlv+xfRYiNNuUs/XFZzukJbUa1DVR1OIqXpW/qL/KZnn5KwM44RPYuTONRGRjZ14dccYvzMeyEK5AJtTSEnFVn8EABvyUBhe9ByIVNPW4uiLswmfo398=
Received: by 10.65.115.3 with SMTP id s3mr646510qbm;
        Sun, 12 Feb 2006 10:56:11 -0800 (PST)
Received: by 10.65.232.5 with HTTP; Sun, 12 Feb 2006 10:56:11 -0800 (PST)
Message-ID: <1bf79d3e0602121056o4e46dd69t93cd8c1ca5a11c1c@mail.gmail.com>
Date: Sun, 12 Feb 2006 10:56:11 -0800
From: "Bryan A. Pendleton" <bp@geekdom.net>
Sender: bpendleton@gmail.com
To: hadoop-dev@lucene.apache.org
Subject: Re: svn commit: r376366 - in /lucene/hadoop/trunk: build.xml
 src/webapps/jobtracker/ src/webapps/mapred/
In-Reply-To: <43ED0744.1050604@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_Part_197_31787945.1139770571412"
References: <20060209180604.91342.qmail@minotaur.apache.org>
	 <1bf79d3e0602101151o13f54e34teec9571eb278b665@mail.gmail.com>
	 <43ED0744.1050604@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_197_31787945.1139770571412
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

SSBoYWQgdG8gd3JhbmdsZSBhIGZldyBvdGhlciBkZXRhaWxzIG91dCB0byBtYWtlIHRoaW5ncyBy
ZWFsbHkgYmUKaW5kZXBlbmRlbnQgb2YgbXkgcnVubmluZyBlbnZpcm9ubWVudCwgYnV0LCBubywg
aXQgZGlkbid0IHdvcmsuCgpJIGRpZCB0aGUgc3ZuIGNoZWNrb3V0IGludG8gYSBmcmVzaCBkaXJl
Y3RvcnkuIEkgcmFuIGFudCB1c2luZyB0aGUKZnJlc2hseS1kb3dubG9hZGVkIGFudCBmcm9tIGFw
YWNoZSwgdGhlIHNhbWUgdmVyc2lvbiB5b3Ugc2hvdyAoYW5kIHRoZSBzYW1lCnZlcnNpb24gdGhh
dCBkZWJpYW4gaW5zdGFsbGVkLCBtYW5nbGVkIG9yIG5vdCkuIFRoZW4gSSByYW4gYW50LiBJIGhh
ZCB0byBmaXgKdGhpbmdzIHVwIGJlY2F1c2UgdGhlcmUncyBub3QgZXF1aXZhbGVudCBvZiBoYWRv
b3Atc2l0ZS54bWwgZm9yIGVudmlyb25tZW50cwphbmQgc2xhdmVzIC0gd2h5IHVzZSBhIGRpcmVj
dG9yeS1kZXBlbmRlbnQgc2V0IG9mIGNvbmZpZ3VyYXRpb24gZmlsZXMsIGJ1dAp+Ly5zbGF2ZXMg
YnkgZGVmYXVsdD8gQW55d2F5LCBvbmNlIEkgZ290IEpBVkFfSE9NRSBmaXhlZCB1cCBhbmQgc3Rh
cnRlZCBhCnNpbmdsZSBzZXQgb2YgZGFlbW9ucywgSSBzdGlsbCBnZXQgdGhlIDQwNCBlcnJvci4K
CkFjdHVhbGx5LCBJIHRoaW5rIEknbGwgZ28gZmlsZSBhIGZlYXR1cmUgcmVxdWVzdCB0byB0aGlz
IGVmZmVjdCwgYnV0IGl0J2QgYmUKbmljZSBpZiBoYWRvb3AvbnV0Y2ggc3BlY2lmaWMgZW52aXJv
bm1lbnQgdmFyaWFibGVzIHdlcmUgc3RvcmVkIGluIHNvbWVwbGFjZQppbiBjb25mLCBhcyB3ZWxs
LiBQb3NzaWJseSBoYXZlIGFuIGVhc3kgd2F5IG9mIGhhdmluZyBhIGRpZmZlcmVudCBsaXN0IG9m
CmRhdGFub2RlcyBhbmQgdGFza25vZGVzLCB0b28sIHNpbmNlIHRoZXJlJ3JlIGRpZmZlcmVudCBy
ZXNvdXJjZSBjb25zdHJhaW50cwpvbiB0aG9zZSwgYW5kIG1hbnkgbWluZ2h0IGhhdmUgYSBzaW1p
bGFyIHNpdHVhdGlvbiB0byB0aGUgb25lIEknbQpkZXZlbG9waW5nLCB3aGVyZSBkYXRhbm9kZXMg
Y2FuIGJlIHJ1biBmYXIgbW9yZSB3aWRlbHkgdGhhbiB0YXNrbm9kZXMuCgpPbiAyLzEwLzA2LCBE
b3VnIEN1dHRpbmcgPGN1dHRpbmdAYXBhY2hlLm9yZz4gd3JvdGU6Cj4KPiBCcnlhbiBBLiBQZW5k
bGV0b24gd3JvdGU6Cj4gPiBXaGVuIEkgdXNlIHRoZSBsYXRlc3QgYnVpbGQueG1sLCB0aGUgamFz
cGVyIHRhc2sgZG9lc24ndCBydW4uCj4gPgo+ID4gSXMgdGhlcmUgYSBtaXNzaW5nIGxpYnJhcnkg
dGhhdCBzaG91bGQgYmUgYXZhaWxhYmxlIHRvIG1ha2UgdGhpcyB3b3JrCj4gZm9yCj4gPiBhbnQ/
IEknbSB1c2luZyBhIGRlYmlhbi1pbnN0YWxsZWQgYW50LCB3aXRoIHRoZSBhbnQtb3B0aW9uYWwg
cGFja2FnZQo+IGFsc28KPiA+IGluc3RhbGxlZC4gQWZ0ZXIgYSBkZWZhdWx0ICJhbnQiIGJ1aWxk
LCB0aGVyZSBhcmUgbm8ganNwcyBpbgo+IGJ1aWxkL3dlYmFwcHMuCj4gPiBUaGUgICJjb21waWxl
OiIgYW50IGpvYiBkb2Vzbid0IG1lbnRpb24gYSBqc3AtY29tcGlsZSB0YXNrLCBlaXRoZXIsIGFs
bAo+IG9mCj4gPiB0aGUgbGluZXMgb2Ygb3V0cHV0IGFyZSBwcmVmaXhlZCB3aXRoICJbamF2YWNd
Ii4gSGl0dGluZwo+Cj4gSSBzdHJvbmdseSByZWNvbW1lbmQgaW5zdGFsbGluZyBhbnQgZnJvbSBB
cGFjaGUuICBJJ3ZlIHNlZW4gc3RyYW5nZQo+IHByb2JsZW1zIGJlZm9yZSB3aXRoIHRoZSBkZWJp
YW4gaW5zdGFsbC4gIE15IGFudCBzaG93czoKPgo+IGFudCAtdmVyc2lvbgo+IEFwYWNoZSBBbnQg
dmVyc2lvbiAxLjYuNSBjb21waWxlZCBvbiBKdW5lIDIgMjAwNQo+Cj4gVHJ5IHRoZSBmb2xsb3dp
bmc6Cj4KPiBzdm4gY28gaHR0cHM6Ly9zdm4uYXBhY2hlLm9yZy9yZXBvcy9hc2YvbHVjZW5lL2hh
ZG9vcC90cnVuayBoYWRvb3AKPiBjZCBoYWRvb3AKPiBhbnQKPiAuLi4uIGNvcHkgYXR0YWNoZWQg
aGFkb29wLXNpdGUueG1sIHRvIGNvbmYgLi4uCj4gYmluL3N0YXJ0LWFsbC5zaAo+IHdnZXQgLU8g
LSBodHRwOi8vbG9jYWxob3N0OjUwMDMwLwo+Cj4gRG9lcyB0aGF0IHdvcmsgZm9yIHlvdT8KPgo+
IERvdWcKPgo+Cj4KCgotLQpCcnlhbiBBLiBQZW5kbGV0b24KUGg6ICg4NzcpIGdlZWstMS1icAo=
------=_Part_197_31787945.1139770571412--

From MAILER-DAEMON Mon Feb 13 07:24:21 2006
Return-Path: 
 <hadoop-dev-return-123-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 87047 invoked from network); 13 Feb 2006 07:24:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Feb 2006 07:24:21 -0000
Received: (qmail 6880 invoked by uid 500); 13 Feb 2006 07:24:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 6866 invoked by uid 500); 13 Feb 2006 07:24:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 6856 invoked by uid 99); 13 Feb 2006 07:24:20 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Feb 2006 23:24:20 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id B981BDC
	for <hadoop-dev@lucene.apache.org>; Mon, 13 Feb 2006 08:23:58 +0100 (CET)
Message-ID: <1837890678.1139815438556.JavaMail.jira@ajax.apache.org>
Date: Mon, 13 Feb 2006 08:23:58 +0100 (CET)
From: "Bryan Pendleton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-16) RPC call times out while indexing map
 task is computing splits
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-16?page=comments#action_12366155 ] 

Bryan Pendleton commented on HADOOP-16:
---------------------------------------

Looking further into my concern about hasTaskWithCacheHit overhead (called from obtainNewMapTask in JobInProgress).... it looks like obtainNewMapTask actually calls hasTaskWithCacheHit once for each map job, but always chooses the first choice - why even call the relatively expensive hasTaskWithCacheHit if you've already chosen a value for cacheTarget? Likewise, once you've filled in both cacheTarget and hasTarget, why not break out of that for loop entirely?

Am I following the code flow incorrectly, or is obtainNewMapTask essentially making maps^2 RPC calls in response to a single incoming RPC call? Even if the jobtracker and namenode are running on the same host, that could easily explain the sensitivity to timeouts in the current code.


> RPC call times out while indexing map task is computing splits
> --------------------------------------------------------------
>
>          Key: HADOOP-16
>          URL: http://issues.apache.org/jira/browse/HADOOP-16
>      Project: Hadoop
>         Type: Bug
>   Components: mapred
>  Environment: MapReduce multi-computer crawl environment: 11 machines (1 master with JobTracker/NameNode, 10 slaves with TaskTrackers/DataNodes)
>     Reporter: Chris Schneider

>
> We've been using Nutch 0.8 (MapReduce) to perform some internet crawling. Things seemed to be going well until...
> 060129 222409 Lost tracker 'tracker_56288'
> 060129 222409 Task 'task_m_10gs5f' has been lost.
> 060129 222409 Task 'task_m_10qhzr' has been lost.
>    ........
>    ........
> 060129 222409 Task 'task_r_zggbwu' has been lost.
> 060129 222409 Task 'task_r_zh8dao' has been lost.
> 060129 222455 Server handler 8 on 8010 caught: java.net.SocketException: Socket closed
> java.net.SocketException: Socket closed
>         at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:99)
>         at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
>         at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
>         at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
>         at java.io.DataOutputStream.flush(DataOutputStream.java:106)
>         at org.apache.nutch.ipc.Server$Handler.run(Server.java:216)
> 060129 222455 Adding task 'task_m_cia5po' to set for tracker 'tracker_56288'
> 060129 223711 Adding task 'task_m_ffv59i' to set for tracker 'tracker_25647'
> I'm hoping that someone could explain why task_m_cia5po got added to tracker_56288 after this tracker was lost.
> The Crawl .main process died with the following output:
> 060129 221129 Indexer: adding segment: /user/crawler/crawl-20060129091444/segments/20060129200246
> Exception in thread "main" java.io.IOException: timed out waiting for response
>     at org.apache.nutch.ipc.Client.call(Client.java:296)
>     at org.apache.nutch.ipc.RPC$Invoker.invoke(RPC.java:127)
>     at $Proxy1.submitJob(Unknown Source)
>     at org.apache.nutch.mapred.JobClient.submitJob(JobClient.java:259)
>     at org.apache.nutch.mapred.JobClient.runJob(JobClient.java:288)
>     at org.apache.nutch.indexer.Indexer.index(Indexer.java:263)
>     at org.apache.nutch.crawl.Crawl.main(Crawl.java:127)
> However, it definitely seems as if the JobTracker is still waiting for the job to finish (no failed jobs).
> Doug Cutting's response:
> The bug here is that the RPC call times out while the map task is computing splits.  The fix is that the job tracker should not compute splits until after it has returned from the submitJob RPC.  Please submit a bug in Jira to help remind us to fix this.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb 13 17:01:50 2006
Return-Path: 
 <hadoop-dev-return-124-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96187 invoked from network); 13 Feb 2006 17:01:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Feb 2006 17:01:50 -0000
Received: (qmail 89050 invoked by uid 500); 13 Feb 2006 17:01:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 89024 invoked by uid 500); 13 Feb 2006 17:01:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 89015 invoked by uid 99); 13 Feb 2006 17:01:49 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 09:01:47 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 2E3EBDE
	for <hadoop-dev@lucene.apache.org>; Mon, 13 Feb 2006 18:01:26 +0100 (CET)
Message-ID: <441910403.1139850086186.JavaMail.jira@ajax.apache.org>
Date: Mon, 13 Feb 2006 18:01:26 +0100 (CET)
From: "Jeremy Bensley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-34) Build Paths Relative to PWD in
 build.xml
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Build Paths Relative to PWD in build.xml
----------------------------------------

         Key: HADOOP-34
         URL: http://issues.apache.org/jira/browse/HADOOP-34
     Project: Hadoop
        Type: Bug
 Environment: Fedora Core 4
    Reporter: Jeremy Bensley
    Priority: Trivial


In the build.xml file, many paths are defined in terms of the present working directory (PWD) instead of relative to the location of the build.xml. Thus, whenever trying to compile from a directory other than the hadoop root, errors such as this appear:

BUILD FAILED
/home/jeremy/cvs/hadoop/build.xml:109: org.apache.jasper.JasperException: The -uriroot option must specify a pre-existing directory

I have scripts / vim parameters that connect to other machines for compiling using ssh, and am not necessarily always in the root whenever I compile.

I am attaching a patch which sets all paths relative to ${basedir}, and removes the override of ${basedir} to the PWD. Please let me know if there are reasons why the build environment must be relative to the working directory.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb 13 17:03:08 2006
Return-Path: 
 <hadoop-dev-return-125-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96625 invoked from network); 13 Feb 2006 17:03:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Feb 2006 17:03:08 -0000
Received: (qmail 95487 invoked by uid 500); 13 Feb 2006 17:03:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95466 invoked by uid 500); 13 Feb 2006 17:03:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95456 invoked by uid 99); 13 Feb 2006 17:03:07 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 09:03:05 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 6D22EDE
	for <hadoop-dev@lucene.apache.org>; Mon, 13 Feb 2006 18:02:44 +0100 (CET)
Message-ID: <1493309322.1139850164445.JavaMail.jira@ajax.apache.org>
Date: Mon, 13 Feb 2006 18:02:44 +0100 (CET)
From: "Jeremy Bensley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-34) Build Paths Relative to PWD in
 build.xml
In-Reply-To: <441910403.1139850086186.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-34?page=all ]

Jeremy Bensley updated HADOOP-34:
---------------------------------

    Attachment: hadoop.build.xml.patch

Proposed patch for issue

> Build Paths Relative to PWD in build.xml
> ----------------------------------------
>
>          Key: HADOOP-34
>          URL: http://issues.apache.org/jira/browse/HADOOP-34
>      Project: Hadoop
>         Type: Bug
>  Environment: Fedora Core 4
>     Reporter: Jeremy Bensley
>     Priority: Trivial
>  Attachments: hadoop.build.xml.patch
>
> In the build.xml file, many paths are defined in terms of the present working directory (PWD) instead of relative to the location of the build.xml. Thus, whenever trying to compile from a directory other than the hadoop root, errors such as this appear:
> BUILD FAILED
> /home/jeremy/cvs/hadoop/build.xml:109: org.apache.jasper.JasperException: The -uriroot option must specify a pre-existing directory
> I have scripts / vim parameters that connect to other machines for compiling using ssh, and am not necessarily always in the root whenever I compile.
> I am attaching a patch which sets all paths relative to ${basedir}, and removes the override of ${basedir} to the PWD. Please let me know if there are reasons why the build environment must be relative to the working directory.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb 13 17:15:58 2006
Return-Path: 
 <hadoop-dev-return-126-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 3699 invoked from network); 13 Feb 2006 17:15:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Feb 2006 17:15:58 -0000
Received: (qmail 34617 invoked by uid 500); 13 Feb 2006 17:15:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 34585 invoked by uid 500); 13 Feb 2006 17:15:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 34576 invoked by uid 99); 13 Feb 2006 17:15:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 09:15:57 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.191.14.28] (HELO reptile.netwurklabs.com) (64.191.14.28)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 13 Feb 2006 09:15:57 -0800
Received: (qmail 11015 invoked from network); 13 Feb 2006 17:15:27 -0000
Received: from localhost (HELO ?127.0.0.1?) (127.0.0.1)
  by reptile.netwurklabs.com with SMTP; 13 Feb 2006 17:15:27 -0000
Message-ID: <43F0BE9A.4050908@netwurklabs.com>
Date: Mon, 13 Feb 2006 12:15:06 -0500
From: Jeff Ritchie <jritchie@netwurklabs.com>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: hadoop build fails in eclipse with last version of build.xml
References: <43EBF5E3.7040600@yahoo-inc.com>
In-Reply-To: <43EBF5E3.7040600@yahoo-inc.com>
Content-Type: text/plain; charset=windows-1251; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Konstantin,

The -uriroot option is getting its base directory from where you started 
eclipse from I'm thinking.

I used netbeans from time to time and tried to build SVN Hadoop and was 
getting this error. 

After changing the -uriroot to an absolute path it worked.  So I 
defaulted back to the original build.xml closed out Netbeans and 
restarted it in the SVN trunk directory.  In your case I would have 
started it in the C:\work\nutch-0.7.1\Hadoop directory.  The ant task 
completed with no problems.

You have 2 options.

1.  Hard code the path in the build.xml file.
2. For ease of starting eclipse under windows.  Copy the shortcut to say 
your desktop.  'Right-click' 'properties' and change the 'start in' to 
c:\work\nutch-0.7.1\Hadoop

Now the question I have is why is that the only task that has a problem 
with relative directories?  Anyone?

Jeff.

Konstantin Shvachko wrote:

> I am compiling hadoop under eclipse, and receiving a JasperException.
> I understand this is some how related to transition from jspc to jasper,
> since before the last update everything worked fine.
> Anybody having the same problem?
> Do I need to do something to get jasper work properly?
>
> Here is the exact listing
>
> ----------------------------------------------------------
> Buildfile: C:\Work\nutch-0.7.1\Hadoop\build.xml
>
> init:
>
> compile:
>
> BUILD FAILED
> C:\Work\nutch-0.7.1\Hadoop\build.xml:109: 
> org.apache.jasper.JasperException: The -uriroot option must specify a 
> pre-existing directory
>
> Total time: 1 second
> ----------------------------------------------------------
>
> Thanks,
>
> Konstantin
>


From MAILER-DAEMON Mon Feb 13 17:27:22 2006
Return-Path: 
 <hadoop-dev-return-127-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8396 invoked from network); 13 Feb 2006 17:27:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Feb 2006 17:27:22 -0000
Received: (qmail 61062 invoked by uid 500); 13 Feb 2006 17:27:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 61045 invoked by uid 500); 13 Feb 2006 17:27:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 61036 invoked by uid 99); 13 Feb 2006 17:27:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 09:27:21 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.191.14.28] (HELO reptile.netwurklabs.com) (64.191.14.28)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 13 Feb 2006 09:27:21 -0800
Received: (qmail 11042 invoked from network); 13 Feb 2006 17:26:52 -0000
Received: from localhost (HELO ?127.0.0.1?) (127.0.0.1)
  by reptile.netwurklabs.com with SMTP; 13 Feb 2006 17:26:52 -0000
Message-ID: <43F0C146.2040200@netwurklabs.com>
Date: Mon, 13 Feb 2006 12:26:30 -0500
From: Jeff Ritchie <jritchie@netwurklabs.com>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: hadoop build fails in eclipse with last version of build.xml
References: <43EBF5E3.7040600@yahoo-inc.com>
 <43F0BE9A.4050908@netwurklabs.com>
In-Reply-To: <43F0BE9A.4050908@netwurklabs.com>
Content-Type: text/plain; charset=windows-1251; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Jeff Ritchie wrote:

> You have 2 options.

3 Options another just came in ;)

3. Patch build.xml with HADOOP-34 and modify ${basedir}. 


From MAILER-DAEMON Mon Feb 13 18:50:16 2006
Return-Path: 
 <hadoop-dev-return-129-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51096 invoked from network); 13 Feb 2006 18:50:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Feb 2006 18:50:16 -0000
Received: (qmail 10560 invoked by uid 500); 13 Feb 2006 18:48:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 6952 invoked by uid 500); 13 Feb 2006 18:48:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3593 invoked by uid 99); 13 Feb 2006 18:47:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 10:47:49 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.145.54.172] (HELO mrout2.yahoo.com) (216.145.54.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 10:16:30 -0800
Received: from [66.228.175.136] (seemeight-dx.corp.yahoo.com [66.228.175.136])
	by mrout2.yahoo.com (8.13.4/8.13.4/y.out) with ESMTP id k1DIEMEh002193
	for <hadoop-dev@lucene.apache.org>; Mon, 13 Feb 2006 10:14:22 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=message-id:date:from:user-agent:x-accept-language:
	mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
	b=u/n/YK2tD+OCJMiormfwxwwC7TDG2EnnSE8ir10Z5WA+Sz4Tkol5HWlETtmntx3g
Message-ID: <43F0CCE9.50500@yahoo-inc.com>
Date: Mon, 13 Feb 2006 10:16:09 -0800
From: Konstantin Shvachko <shv@yahoo-inc.com>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: hadoop build fails in eclipse with last version of build.xml
References: <43EBF5E3.7040600@yahoo-inc.com>
 <43F0BE9A.4050908@netwurklabs.com>
In-Reply-To: <43F0BE9A.4050908@netwurklabs.com>
Content-Type: text/plain; charset=windows-1251; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks Jeff,

I figured that out.
It is good to know that somebody had fixed it.

--Konstantin

Jeff Ritchie wrote:

> Konstantin,
>
> The -uriroot option is getting its base directory from where you 
> started eclipse from I'm thinking.
>
> I used netbeans from time to time and tried to build SVN Hadoop and 
> was getting this error.
> After changing the -uriroot to an absolute path it worked.  So I 
> defaulted back to the original build.xml closed out Netbeans and 
> restarted it in the SVN trunk directory.  In your case I would have 
> started it in the C:\work\nutch-0.7.1\Hadoop directory.  The ant task 
> completed with no problems.
>
> You have 2 options.
>
> 1.  Hard code the path in the build.xml file.
> 2. For ease of starting eclipse under windows.  Copy the shortcut to 
> say your desktop.  'Right-click' 'properties' and change the 'start 
> in' to c:\work\nutch-0.7.1\Hadoop
>
> Now the question I have is why is that the only task that has a 
> problem with relative directories?  Anyone?
>
> Jeff.
>
> Konstantin Shvachko wrote:
>
>> I am compiling hadoop under eclipse, and receiving a JasperException.
>> I understand this is some how related to transition from jspc to jasper,
>> since before the last update everything worked fine.
>> Anybody having the same problem?
>> Do I need to do something to get jasper work properly?
>>
>> Here is the exact listing
>>
>> ----------------------------------------------------------
>> Buildfile: C:\Work\nutch-0.7.1\Hadoop\build.xml
>>
>> init:
>>
>> compile:
>>
>> BUILD FAILED
>> C:\Work\nutch-0.7.1\Hadoop\build.xml:109: 
>> org.apache.jasper.JasperException: The -uriroot option must specify a 
>> pre-existing directory
>>
>> Total time: 1 second
>> ----------------------------------------------------------
>>
>> Thanks,
>>
>> Konstantin
>>
>
>
>


From MAILER-DAEMON Mon Feb 13 18:31:21 2006
Return-Path: 
 <hadoop-dev-return-128-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 35148 invoked from network); 13 Feb 2006 18:31:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Feb 2006 18:31:21 -0000
Received: (qmail 47663 invoked by uid 500); 13 Feb 2006 18:31:06 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47540 invoked by uid 500); 13 Feb 2006 18:31:06 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47511 invoked by uid 99); 13 Feb 2006 18:31:05 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 10:31:04 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id D3084DE
	for <hadoop-dev@lucene.apache.org>; Mon, 13 Feb 2006 19:30:43 +0100 (CET)
Message-ID: <91087355.1139855443862.JavaMail.jira@ajax.apache.org>
Date: Mon, 13 Feb 2006 19:30:43 +0100 (CET)
From: "Bryan Pendleton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-35) Files missing chunks can cause mapred
 runs to get stuck
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Files missing chunks can cause mapred runs to get stuck
-------------------------------------------------------

         Key: HADOOP-35
         URL: http://issues.apache.org/jira/browse/HADOOP-35
     Project: Hadoop
        Type: Bug
  Components: dfs  
 Environment: ~20 datanode DFS cluster
    Reporter: Bryan Pendleton


I've now several times run into a problem where a large run gets stalled as a result of a missing data block. The latest was a stall in the Summer - ie, the data might've all been there, but it was impossible to proceed because the CRC file was missing a block. It would be nice to:

1) Have a "health check" running on a map reduce. If any data isn't available, emmit periodic warnings, and maybe have a timeout for if the data never comes back. Such warnings *should* specify which file(s) are affected by the missing blocks.
2) Have a utility, possible part of the existing dfs utility, which can check for dfs files with unlocatable blocks. Possibly, even show a 'health' of a file - ie, what percentage of its blocks are currently at the desired replication level. Currently, there's no way that I know of to find out if a file in DFS is going to be unreadable.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb 13 19:07:08 2006
Return-Path: 
 <hadoop-dev-return-130-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68241 invoked from network); 13 Feb 2006 19:07:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Feb 2006 19:07:08 -0000
Received: (qmail 71913 invoked by uid 500); 13 Feb 2006 19:07:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 71889 invoked by uid 500); 13 Feb 2006 19:07:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 71878 invoked by uid 99); 13 Feb 2006 19:07:07 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 11:07:05 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id CB335DE
	for <hadoop-dev@lucene.apache.org>; Mon, 13 Feb 2006 20:06:44 +0100 (CET)
Message-ID: <2071195583.1139857604829.JavaMail.jira@ajax.apache.org>
Date: Mon, 13 Feb 2006 20:06:44 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-34) Build Paths Relative to PWD in
 build.xml
In-Reply-To: <441910403.1139850086186.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-34?page=all ]
     
Doug Cutting resolved HADOOP-34:
--------------------------------

    Resolution: Fixed

I just comitted this.  Thanks!

> Build Paths Relative to PWD in build.xml
> ----------------------------------------
>
>          Key: HADOOP-34
>          URL: http://issues.apache.org/jira/browse/HADOOP-34
>      Project: Hadoop
>         Type: Bug
>  Environment: Fedora Core 4
>     Reporter: Jeremy Bensley
>     Priority: Trivial
>  Attachments: hadoop.build.xml.patch
>
> In the build.xml file, many paths are defined in terms of the present working directory (PWD) instead of relative to the location of the build.xml. Thus, whenever trying to compile from a directory other than the hadoop root, errors such as this appear:
> BUILD FAILED
> /home/jeremy/cvs/hadoop/build.xml:109: org.apache.jasper.JasperException: The -uriroot option must specify a pre-existing directory
> I have scripts / vim parameters that connect to other machines for compiling using ssh, and am not necessarily always in the root whenever I compile.
> I am attaching a patch which sets all paths relative to ${basedir}, and removes the override of ${basedir} to the PWD. Please let me know if there are reasons why the build environment must be relative to the working directory.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb 13 19:15:00 2006
Return-Path: 
 <hadoop-dev-return-131-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 73723 invoked from network); 13 Feb 2006 19:15:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Feb 2006 19:15:00 -0000
Received: (qmail 89976 invoked by uid 500); 13 Feb 2006 19:15:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 89947 invoked by uid 500); 13 Feb 2006 19:14:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 89938 invoked by uid 99); 13 Feb 2006 19:14:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 11:14:59 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.115.57.46] (HELO ylpvm15.prodigy.net) (207.115.57.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 11:14:58 -0800
Received: from pimout7-ext.prodigy.net (pimout7-int.prodigy.net
 [207.115.4.147])
	by ylpvm15.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id
 k1DJEkgV013490
	for <hadoop-dev@lucene.apache.org>; Mon, 13 Feb 2006 14:14:52 -0500
X-ORBL: [69.228.231.148]
Received: from [192.168.168.15] (adsl-69-228-231-148.dsl.pltn13.pacbell.net
 [69.228.231.148])
	by pimout7-ext.prodigy.net (8.13.4 outbound domainkey aix/8.13.4) with ESMTP
 id k1DJEKlw200982;
	Mon, 13 Feb 2006 14:14:25 -0500
Message-ID: <43F0DAA6.6010508@apache.org>
Date: Mon, 13 Feb 2006 11:14:46 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: svn commit: r376366 - in /lucene/hadoop/trunk: build.xml
 src/webapps/jobtracker/
 src/webapps/mapred/
References: <20060209180604.91342.qmail@minotaur.apache.org>
	 <1bf79d3e0602101151o13f54e34teec9571eb278b665@mail.gmail.com>
	 <43ED0744.1050604@apache.org>
 <1bf79d3e0602121056o4e46dd69t93cd8c1ca5a11c1c@mail.gmail.com>
In-Reply-To: <1bf79d3e0602121056o4e46dd69t93cd8c1ca5a11c1c@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Bryan A. Pendleton wrote:
> I had to fix
> things up because there's not equivalent of hadoop-site.xml for environments
> and slaves - why use a directory-dependent set of configuration files, but
> ~/.slaves by default?

No good reason.  The default slaves file should probably be something 
like conf/hadoop-slaves.txt.  Please file a bug and/or patch.

> Anyway, once I got JAVA_HOME fixed up and started a
> single set of daemons, I still get the 404 error.

Are there any errors in the jobtracker log file, when it starts Jetty?

> Actually, I think I'll go file a feature request to this effect, but it'd be
> nice if hadoop/nutch specific environment variables were stored in someplace
> in conf, as well.

I agree that this should be done.  My plan is to add a hadoop-env.sh 
file that is sourced by hadoop scripts.  This is where folks can set JVM 
and HADOOP-specific environment stuff.  Note that, in a distributed 
configuration, this file, like hadoop-site.xml and the hadoop code, has 
to be copied to all nodes as a bootstrapping step.

Doug

From MAILER-DAEMON Mon Feb 13 19:18:11 2006
Return-Path: 
 <hadoop-dev-return-132-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75138 invoked from network); 13 Feb 2006 19:18:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Feb 2006 19:18:11 -0000
Received: (qmail 97049 invoked by uid 500); 13 Feb 2006 19:18:06 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97011 invoked by uid 500); 13 Feb 2006 19:18:06 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 96991 invoked by uid 99); 13 Feb 2006 19:18:06 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 11:18:04 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 2AE35DD
	for <hadoop-dev@lucene.apache.org>; Mon, 13 Feb 2006 20:17:43 +0100 (CET)
Message-ID: <1290114738.1139858263105.JavaMail.jira@ajax.apache.org>
Date: Mon, 13 Feb 2006 20:17:43 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-16) RPC call times out while indexing map
 task is computing splits
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-16?page=comments#action_12366235 ] 

Doug Cutting commented on HADOOP-16:
------------------------------------

Bryan: I agree, this looks like a serious bug.  The TaskTracker should minimize the calls it makes to the NameNode.  Ideally it should only make a single call per job on each input split.

> RPC call times out while indexing map task is computing splits
> --------------------------------------------------------------
>
>          Key: HADOOP-16
>          URL: http://issues.apache.org/jira/browse/HADOOP-16
>      Project: Hadoop
>         Type: Bug
>   Components: mapred
>  Environment: MapReduce multi-computer crawl environment: 11 machines (1 master with JobTracker/NameNode, 10 slaves with TaskTrackers/DataNodes)
>     Reporter: Chris Schneider

>
> We've been using Nutch 0.8 (MapReduce) to perform some internet crawling. Things seemed to be going well until...
> 060129 222409 Lost tracker 'tracker_56288'
> 060129 222409 Task 'task_m_10gs5f' has been lost.
> 060129 222409 Task 'task_m_10qhzr' has been lost.
>    ........
>    ........
> 060129 222409 Task 'task_r_zggbwu' has been lost.
> 060129 222409 Task 'task_r_zh8dao' has been lost.
> 060129 222455 Server handler 8 on 8010 caught: java.net.SocketException: Socket closed
> java.net.SocketException: Socket closed
>         at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:99)
>         at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
>         at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
>         at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
>         at java.io.DataOutputStream.flush(DataOutputStream.java:106)
>         at org.apache.nutch.ipc.Server$Handler.run(Server.java:216)
> 060129 222455 Adding task 'task_m_cia5po' to set for tracker 'tracker_56288'
> 060129 223711 Adding task 'task_m_ffv59i' to set for tracker 'tracker_25647'
> I'm hoping that someone could explain why task_m_cia5po got added to tracker_56288 after this tracker was lost.
> The Crawl .main process died with the following output:
> 060129 221129 Indexer: adding segment: /user/crawler/crawl-20060129091444/segments/20060129200246
> Exception in thread "main" java.io.IOException: timed out waiting for response
>     at org.apache.nutch.ipc.Client.call(Client.java:296)
>     at org.apache.nutch.ipc.RPC$Invoker.invoke(RPC.java:127)
>     at $Proxy1.submitJob(Unknown Source)
>     at org.apache.nutch.mapred.JobClient.submitJob(JobClient.java:259)
>     at org.apache.nutch.mapred.JobClient.runJob(JobClient.java:288)
>     at org.apache.nutch.indexer.Indexer.index(Indexer.java:263)
>     at org.apache.nutch.crawl.Crawl.main(Crawl.java:127)
> However, it definitely seems as if the JobTracker is still waiting for the job to finish (no failed jobs).
> Doug Cutting's response:
> The bug here is that the RPC call times out while the map task is computing splits.  The fix is that the job tracker should not compute splits until after it has returned from the submitJob RPC.  Please submit a bug in Jira to help remind us to fix this.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb 13 19:30:57 2006
Return-Path: 
 <hadoop-dev-return-133-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 83526 invoked from network); 13 Feb 2006 19:30:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Feb 2006 19:30:57 -0000
Received: (qmail 17088 invoked by uid 500); 13 Feb 2006 19:30:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17074 invoked by uid 500); 13 Feb 2006 19:30:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17061 invoked by uid 99); 13 Feb 2006 19:30:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 11:30:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.115.57.46] (HELO ylpvm15.prodigy.net) (207.115.57.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 11:30:56 -0800
Received: from pimout7-ext.prodigy.net (pimout7-int.prodigy.net
 [207.115.4.147])
	by ylpvm15.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id
 k1DJUogV025270
	for <hadoop-dev@lucene.apache.org>; Mon, 13 Feb 2006 14:30:50 -0500
X-ORBL: [69.228.231.148]
Received: from [192.168.168.15] (adsl-69-228-231-148.dsl.pltn13.pacbell.net
 [69.228.231.148])
	by pimout7-ext.prodigy.net (8.13.4 outbound domainkey aix/8.13.4) with ESMTP
 id k1DJUY6O072952;
	Mon, 13 Feb 2006 14:30:34 -0500
Message-ID: <43F0DE75.8020003@apache.org>
Date: Mon, 13 Feb 2006 11:31:01 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: Adding MapperBase and ReduceBase
References: <fe16018e45d03152c6b843508a40ea31@yahoo-inc.com>
 <43ECDB64.7020801@apache.org>
 <090f911c7d6559baac38e7c7c8fdaded@yahoo-inc.com>
In-Reply-To: <090f911c7d6559baac38e7c7c8fdaded@yahoo-inc.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Owen O'Malley wrote:
> Is the Closable interface useful? How about a little renaming and 
> simplifying to do:
> 
> public interface UserTask  extends Configurable {
>    void close();
> }
> 
> public class UserTaskBase implements UserTask extends Configured {
>    ... default methods ...
> }
> 
> public interface Mapper extends UserTask {
>   void map(...);
> }
> 
> public interface Reducer extends UserTask {
>   void reduce(...);
> }
> 
> public class WordCount implements Mapper, Reducer extends UserTaskBase {
>   public void map(...)
>   public void reduce(...)
> 
>   public static void main(...)
> }

I like this.

> When looking through the code, the auto configuration in 
> JobConf.newInstance is pretty confusing. Reading through the code, it 
> looks like the Reducer objects are configured twice.

What's confusing?  The method in SVN looks simple to me.  HADOOP-29 
would make this more complicated, but I'm not convinced that is 
required.  Can you elaborate?

>> It would be nice to even remove the need for the calls to setMapper() 
>> and setReducer() above, i.e., to have JobConf default the mapper, 
>> reducer, etc. to things that are implemented by the class passed to 
>> its constructor.
> 
> Which constructor is doing this? The JobConfigured?

No, the JobConf.  One could construct a JobConf, as before, with 
JobConf(Configuration,UserTask), but, in addition to using the UserTask 
to determine the default jar, it could also use the UserTask to 
determine the default mapper, reducer, etc.

So a user application could be written as simply as:

public class MyApp implements Mapper, Reducer extends UserTaskBase {
   public map(...) { ... };
   public reduce(...) { ... };

   public static void main(String[] args) throws Exception {
     Configuration conf = new Configuration();
     JobConf job = new JobConf(conf, MyApp.class);
     job.setInputDir(args[0]);
     job.setOutputDir(args[1]);
     JobClient.run(job);
   }
}

Does that make sense?

Doug

From MAILER-DAEMON Mon Feb 13 19:56:58 2006
Return-Path: 
 <hadoop-dev-return-134-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 98224 invoked from network); 13 Feb 2006 19:56:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Feb 2006 19:56:58 -0000
Received: (qmail 64234 invoked by uid 500); 13 Feb 2006 19:56:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64192 invoked by uid 500); 13 Feb 2006 19:56:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64179 invoked by uid 99); 13 Feb 2006 19:56:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 11:56:58 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of bpendleton@gmail.com designates
 64.233.184.199 as permitted sender)
Received: from [64.233.184.199] (HELO wproxy.gmail.com) (64.233.184.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 11:56:57 -0800
Received: by wproxy.gmail.com with SMTP id 69so920486wra
        for <hadoop-dev@lucene.apache.org>;
 Mon, 13 Feb 2006 11:56:36 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references;
        b=rGjvxkRn1QEi9ua7bGhfwmaZ7fks9qFlJ95sGspQxNMKzz24V8Ir4oVFLEljJoMt2+GwhY7K5G8VOPnUXgyZZb6MIVuin90KAmWdE00hrSmx9n5gR9jDc74fktLKXiB+3t4caoMjrdxa1+jX3d1skWAe9NP1XthzulKbiXxM7rQ=
Received: by 10.65.237.13 with SMTP id o13mr1233288qbr;
        Mon, 13 Feb 2006 11:56:34 -0800 (PST)
Received: by 10.65.232.5 with HTTP; Mon, 13 Feb 2006 11:56:34 -0800 (PST)
Message-ID: <1bf79d3e0602131156o4aa665dayb78ade1bf0618266@mail.gmail.com>
Date: Mon, 13 Feb 2006 11:56:34 -0800
From: "Bryan A. Pendleton" <bp@geekdom.net>
Sender: bpendleton@gmail.com
To: hadoop-dev@lucene.apache.org
Subject: Re: svn commit: r376366 - in /lucene/hadoop/trunk: build.xml
 src/webapps/jobtracker/ src/webapps/mapred/
In-Reply-To: <43F0DAA6.6010508@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_Part_3623_23791781.1139860594124"
References: <20060209180604.91342.qmail@minotaur.apache.org>
	 <1bf79d3e0602101151o13f54e34teec9571eb278b665@mail.gmail.com>
	 <43ED0744.1050604@apache.org>
	 <1bf79d3e0602121056o4e46dd69t93cd8c1ca5a11c1c@mail.gmail.com>
	 <43F0DAA6.6010508@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_3623_23791781.1139860594124
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

Pgo+ID4gQW55d2F5LCBvbmNlIEkgZ290IEpBVkFfSE9NRSBmaXhlZCB1cCBhbmQgc3RhcnRlZCBh
Cj4gPiBzaW5nbGUgc2V0IG9mIGRhZW1vbnMsIEkgc3RpbGwgZ2V0IHRoZSA0MDQgZXJyb3IuCj4K
PiBBcmUgdGhlcmUgYW55IGVycm9ycyBpbiB0aGUgam9idHJhY2tlciBsb2cgZmlsZSwgd2hlbiBp
dCBzdGFydHMgSmV0dHk/CgoKSSdtIGZpbmRpbmcgdGhhdCBpdCBkb2VzIHJ1biBzb21ldGltZXMu
IEknbSBnb2luZyB0byBoYXZlIHRvIHNwZW5kIHNvbWUgbW9yZQp0aW1lIHRvIHNlZSBpZiBJIGNh
biBmaWd1cmUgb3V0IHdoYXQncyBjYXVzaW5nIGl0IHRvIGR1bXAuIEFzIHNvb24gYXMgSSBjYW4K
dHJhY2UgdGhpbmdzIG91dCwgSSdsbCByZXBvcnQgbW9yZS4KCgotLQpCcnlhbiBBLiBQZW5kbGV0
b24KUGg6ICg4NzcpIGdlZWstMS1icAo=
------=_Part_3623_23791781.1139860594124--

From MAILER-DAEMON Mon Feb 13 20:05:34 2006
Return-Path: 
 <hadoop-dev-return-135-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 2805 invoked from network); 13 Feb 2006 20:05:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Feb 2006 20:05:34 -0000
Received: (qmail 85279 invoked by uid 500); 13 Feb 2006 20:05:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 85256 invoked by uid 500); 13 Feb 2006 20:05:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 85246 invoked by uid 99); 13 Feb 2006 20:05:33 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 12:05:33 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id AB236DE
	for <hadoop-dev@lucene.apache.org>; Mon, 13 Feb 2006 21:05:12 +0100 (CET)
Message-ID: <630345415.1139861112665.JavaMail.jira@ajax.apache.org>
Date: Mon, 13 Feb 2006 21:05:12 +0100 (CET)
From: "Bryan Pendleton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-36) Adding some uniformity/convenience to
 environment management
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Adding some uniformity/convenience to environment management
------------------------------------------------------------

         Key: HADOOP-36
         URL: http://issues.apache.org/jira/browse/HADOOP-36
     Project: Hadoop
        Type: Improvement
  Components: conf  
    Reporter: Bryan Pendleton


Currently, "slaves" are loaded from ~/.slaves. What would be better would be to default from something like conf/hadoop-slaves

Perhaps split slaves, having a different set for "datanodes" vs. "tasktracker" nodes. ie, conf/hadoop-slaves-tasktracker, conf/hadoop-slaves-datanodes, or some similar split. There's the possibility it's worth building in the assumption that tasktracker is a superset, and thus implicitly includes datanodes, but this might be a bad assumption.

Also, make sure all scripts source something like conf/hadoop-env.sh. Thus, the user can edit hadoop-env.sh to specify JAVA_HOME, or an alternate HADOOP_SLAVES location. It would also be desirable to have a seed CLASSPATH here. Possibly name it HADOOP_CLASSPATH, to make it explicit and not make hadoop scripts possibly interact with an otherwise-set system CLASSPATH variable.

These changes would probably be useful to the nutch project, too.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb 13 23:27:08 2006
Return-Path: 
 <hadoop-dev-return-136-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8652 invoked from network); 13 Feb 2006 23:27:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Feb 2006 23:27:08 -0000
Received: (qmail 59670 invoked by uid 500); 13 Feb 2006 23:27:07 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 59644 invoked by uid 500); 13 Feb 2006 23:27:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 59632 invoked by uid 99); 13 Feb 2006 23:27:07 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 15:27:04 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id E781EDE
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Feb 2006 00:26:43 +0100 (CET)
Message-ID: <1783056498.1139873203946.JavaMail.jira@ajax.apache.org>
Date: Tue, 14 Feb 2006 00:26:43 +0100 (CET)
From: "Bryan Pendleton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-35) Files missing chunks can cause mapred
 runs to get stuck
In-Reply-To: <91087355.1139855443862.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-35?page=comments#action_12366260 ] 

Bryan Pendleton commented on HADOOP-35:
---------------------------------------

Alright, well, for diagnostic purposes, I added a "health" stat to each file in -ls. The getFileHealth() function I define could probably be stuck into a utility class somewhere... especially if it were to be called periodically during a mapreduce run. The patch also refactors how the "Configuration" instance is used in the DFSShell.

Also, I had to add a try/catch around the call to getHints(), because for several of my existing files I get the following stack track when trying to call getHints():

Exception in thread "main" java.io.IOException: java.lang.NullPointerException
        at org.apache.hadoop.ipc.Client.call(Client.java:301)
        at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:141)
        at org.apache.hadoop.dfs.$Proxy0.getHints(Unknown Source)
        at org.apache.hadoop.dfs.DFSClient.getHints(DFSClient.java:69)
        at org.apache.hadoop.dfs.DistributedFileSystem.getFileCacheHints(DistributedFileSystem.java:63)
        at org.apache.hadoop.dfs.DFSShell.getFileHealth(DFSShell.java:43)
        at org.apache.hadoop.dfs.DFSShell.ls(DFSShell.java:117)
        at org.apache.hadoop.dfs.DFSShell.main(DFSShell.java:283)

> Files missing chunks can cause mapred runs to get stuck
> -------------------------------------------------------
>
>          Key: HADOOP-35
>          URL: http://issues.apache.org/jira/browse/HADOOP-35
>      Project: Hadoop
>         Type: Bug
>   Components: dfs
>  Environment: ~20 datanode DFS cluster
>     Reporter: Bryan Pendleton

>
> I've now several times run into a problem where a large run gets stalled as a result of a missing data block. The latest was a stall in the Summer - ie, the data might've all been there, but it was impossible to proceed because the CRC file was missing a block. It would be nice to:
> 1) Have a "health check" running on a map reduce. If any data isn't available, emmit periodic warnings, and maybe have a timeout for if the data never comes back. Such warnings *should* specify which file(s) are affected by the missing blocks.
> 2) Have a utility, possible part of the existing dfs utility, which can check for dfs files with unlocatable blocks. Possibly, even show a 'health' of a file - ie, what percentage of its blocks are currently at the desired replication level. Currently, there's no way that I know of to find out if a file in DFS is going to be unreadable.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb 13 23:29:06 2006
Return-Path: 
 <hadoop-dev-return-137-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9304 invoked from network); 13 Feb 2006 23:29:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Feb 2006 23:29:06 -0000
Received: (qmail 61116 invoked by uid 500); 13 Feb 2006 23:29:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 61102 invoked by uid 500); 13 Feb 2006 23:29:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 61091 invoked by uid 99); 13 Feb 2006 23:29:05 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 15:29:04 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 10821DE
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Feb 2006 00:28:43 +0100 (CET)
Message-ID: <32742648.1139873323065.JavaMail.jira@ajax.apache.org>
Date: Tue, 14 Feb 2006 00:28:43 +0100 (CET)
From: "Bryan Pendleton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-35) Files missing chunks can cause mapred
 runs to get stuck
In-Reply-To: <91087355.1139855443862.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-35?page=all ]

Bryan Pendleton updated HADOOP-35:
----------------------------------

    Attachment: dfsshell.health.patch.txt

> Files missing chunks can cause mapred runs to get stuck
> -------------------------------------------------------
>
>          Key: HADOOP-35
>          URL: http://issues.apache.org/jira/browse/HADOOP-35
>      Project: Hadoop
>         Type: Bug
>   Components: dfs
>  Environment: ~20 datanode DFS cluster
>     Reporter: Bryan Pendleton
>  Attachments: dfsshell.health.patch.txt
>
> I've now several times run into a problem where a large run gets stalled as a result of a missing data block. The latest was a stall in the Summer - ie, the data might've all been there, but it was impossible to proceed because the CRC file was missing a block. It would be nice to:
> 1) Have a "health check" running on a map reduce. If any data isn't available, emmit periodic warnings, and maybe have a timeout for if the data never comes back. Such warnings *should* specify which file(s) are affected by the missing blocks.
> 2) Have a utility, possible part of the existing dfs utility, which can check for dfs files with unlocatable blocks. Possibly, even show a 'health' of a file - ie, what percentage of its blocks are currently at the desired replication level. Currently, there's no way that I know of to find out if a file in DFS is going to be unreadable.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Feb 14 02:56:20 2006
Return-Path: 
 <hadoop-dev-return-138-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 97199 invoked from network); 14 Feb 2006 02:56:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Feb 2006 02:56:20 -0000
Received: (qmail 45965 invoked by uid 500); 14 Feb 2006 02:56:19 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 45937 invoked by uid 500); 14 Feb 2006 02:56:19 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 45928 invoked by uid 99); 14 Feb 2006 02:56:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 18:56:19 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.109.112.28] (HELO mrout2-b.corp.dcn.yahoo.com)
 (216.109.112.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 18:56:18 -0800
Received: from michel (michel.corp.yahoo.com [207.126.231.56])
	by mrout2-b.corp.dcn.yahoo.com (8.13.4/8.13.4/y.out) with SMTP id
 k1E2tTra097548;
	Mon, 13 Feb 2006 18:55:29 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=from:to:cc:subject:date:message-id:mime-version:
	content-type:content-transfer-encoding:x-priority:
	x-msmail-priority:x-mailer:importance:x-mimeole;
	b=QXhsAJWFA3KZjOCM9QcL9aWcQWVfY1kSzZrmVdQb0BLLpJrkCZadRNCnrhAVEbsF
From: "Michel Tourn" <michel@yahoo-inc.com>
To: "Doug Cutting" <dcutting@yahoo-inc.com>
Cc: "Hadoop-Dev@Lucene. Apache. Org" <hadoop-dev@lucene.apache.org>
Subject: Estimating number of worker nodes
Date: Mon, 13 Feb 2006 18:57:52 -0800
Message-ID: <PDEFIFNIPHNHGGMCIBNGMEFIFHAA.michel@yahoo-inc.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1506
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Problem:

sometimes an MR application really wants to set an absolute number of tasks:
 num Reduce Tasks = 1 (so that the result is available in a single file)
The job submission API makes this case easy.

but at other times an MR application would rather
set a relative number of tasks:
 num Map Tasks = 5 * num active worker nodes
 num Reduce Tasks = 2 * num active worker nodes

Intuitively, it seems to be a good thing to consider
num-active-worker-nodes as a variable rather than
as a constant known by the MapRed user.

Reasons:
 -the cluster may be expanded/shrinked without the MapRed's user being aware
of it.
 -the MapRed user may sometimes run tests on a smaller ('personal') MapRed
cluster.


To implement this, some component of the system needs
to know: "num active worker nodes"

The JobTracker knows num. active nodes (taskTrackers.size())
but the JobClient does not.


So I can see two possible ways to add this functionality:
(specifying a number of tasks relative to the cluster size)

1. JobTracker exposes num. active nodes to JobClient
  (via an extension to the Job"Submission"Protocol)
   Some client code connects to the JobTracker twice:
   once two learn num-workers
   once to submit a MapRed job, using setNumMapTasks( 5 * num-workers )

2. JobConf is extended to accept relative number tasks.
   Existing: setNumMapTasks(int n)               "mapred.map.tasks"
   New :     setNumMapTasksPerTaskTracker(int n)
"mapred.map.taskspertracker"
   JobClient must set either value.
   Then when JobTracker accepts a job, it simply translates if necessary
    tasks = taskspertracker * num-workers.


Do we agree this is useful,
and which do you think is the best option? (1. or 2.)

Thanks,
Michel




From MAILER-DAEMON Tue Feb 14 02:58:33 2006
Return-Path: 
 <hadoop-dev-return-139-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 98116 invoked from network); 14 Feb 2006 02:58:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Feb 2006 02:58:33 -0000
Received: (qmail 53591 invoked by uid 500); 14 Feb 2006 02:58:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53539 invoked by uid 500); 14 Feb 2006 02:58:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53530 invoked by uid 99); 14 Feb 2006 02:58:32 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 18:58:32 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 3FFA8DD
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Feb 2006 03:58:11 +0100 (CET)
Message-ID: <1557364036.1139885891259.JavaMail.jira@ajax.apache.org>
Date: Tue, 14 Feb 2006 03:58:11 +0100 (CET)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-33) DF enhancement: performance and win XP
 support
In-Reply-To: <922804577.1139611475063.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-33?page=all ]

Konstantin Shvachko updated HADOOP-33:
--------------------------------------

    Attachment: DF.patch

DF.patch uses relative file names
Please disregard the DFpatch.txt attachment

> DF enhancement: performance and win XP support
> ----------------------------------------------
>
>          Key: HADOOP-33
>          URL: http://issues.apache.org/jira/browse/HADOOP-33
>      Project: Hadoop
>         Type: Improvement
>   Components: fs, dfs
>  Environment: Unix, Cygwin, Win XP
>     Reporter: Konstantin Shvachko
>     Priority: Minor
>  Attachments: DF.patch, DFpatch.txt
>
> 1. DF is called twice for each heartbeat, which happens each 3 seconds.
> There is a simple fix for that in the attached patch.
> 2. cygwin is required to run df program in windows environment.
> There is a class org.apache.commons.io.FileSystemUtils, which can return disk free space
> for different OSs, but it does not have means to get disk capacity.
> In general in windows there is no efficient and uniform way to calculate disk capacity
> using a shell command.
> The choices are 'chkdsk' and 'defrag -a', but both of them are too slow to be called
> every 3 seconds.
> WinXP and 2003 server have a new tool called fsutil, which provides all necessary info.
> I implemented a call to fsutil in case df fails, and the OS is right.
> Other win versions should still run cygwin.
> I tested this fetaure for linux, winXP and cygwin.
> See attached patch.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Feb 14 05:50:03 2006
Return-Path: 
 <hadoop-dev-return-140-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50967 invoked from network); 14 Feb 2006 05:50:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Feb 2006 05:50:03 -0000
Received: (qmail 83456 invoked by uid 500); 14 Feb 2006 05:50:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 83435 invoked by uid 500); 14 Feb 2006 05:50:02 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 83426 invoked by uid 99); 14 Feb 2006 05:50:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 21:50:02 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.145.54.173] (HELO mrout3.yahoo.com) (216.145.54.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 21:50:01 -0800
Received: from SNV-XCHMAIL.xch.corp.yahoo.com (snv-xch2.xch.corp.yahoo.com
 [216.145.51.235])
	by mrout3.yahoo.com (8.13.4/8.13.4/y.out) with ESMTP id k1E5miJv043721
	for <hadoop-dev@lucene.apache.org>; Mon, 13 Feb 2006 21:48:44 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=received:in-reply-to:references:mime-version:x-priority:
	content-type:message-id:cc:content-transfer-encoding:from:subject:date:to:
	x-mailer:return-path:x-originalarrivaltime;
	b=HEF/QyJhhNFb9c1XqqYoxLEatT3X9zgk5uB4qC+iB9EczcG8MO24sgiKhoGAqbnW
Received: from [10.0.1.4] ([172.21.179.133]) by SNV-XCHMAIL.xch.corp.yahoo.com
 with Microsoft SMTPSVC(5.0.2195.6713);
	 Mon, 13 Feb 2006 21:48:43 -0800
In-Reply-To: <PDEFIFNIPHNHGGMCIBNGMEFIFHAA.michel@yahoo-inc.com>
References: <PDEFIFNIPHNHGGMCIBNGMEFIFHAA.michel@yahoo-inc.com>
Mime-Version: 1.0 (Apple Message framework v746.2)
X-Priority: 3 (Normal)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <7F4E74D1-C395-4CF7-94D3-471AAABAC594@yahoo-inc.com>
Cc: "Doug Cutting" <dcutting@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Eric Baldeschwieler <eric14@yahoo-inc.com>
Subject: Re: Estimating number of worker nodes
Date: Mon, 13 Feb 2006 21:48:40 -0800
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-OriginalArrivalTime: 14 Feb 2006 05:48:43.0962 (UTC)
 FILETIME=[50BD79A0:01C6312A]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Some of our discussed future work may make this impractical.  The  
number of available workers may become a variable that depends on  
priority, other parallel work etc.

Perhaps it is best to express your requirements in terms of the input  
or the output, for example size of input per job?

On Feb 13, 2006, at 6:57 PM, Michel Tourn wrote:

> Problem:
>
> sometimes an MR application really wants to set an absolute number  
> of tasks:
>  num Reduce Tasks = 1 (so that the result is available in a single  
> file)
> The job submission API makes this case easy.
>
> but at other times an MR application would rather
> set a relative number of tasks:
>  num Map Tasks = 5 * num active worker nodes
>  num Reduce Tasks = 2 * num active worker nodes
>
> Intuitively, it seems to be a good thing to consider
> num-active-worker-nodes as a variable rather than
> as a constant known by the MapRed user.
>
> Reasons:
>  -the cluster may be expanded/shrinked without the MapRed's user  
> being aware
> of it.
>  -the MapRed user may sometimes run tests on a smaller ('personal')  
> MapRed
> cluster.
>
>
> To implement this, some component of the system needs
> to know: "num active worker nodes"
>
> The JobTracker knows num. active nodes (taskTrackers.size())
> but the JobClient does not.
>
>
> So I can see two possible ways to add this functionality:
> (specifying a number of tasks relative to the cluster size)
>
> 1. JobTracker exposes num. active nodes to JobClient
>   (via an extension to the Job"Submission"Protocol)
>    Some client code connects to the JobTracker twice:
>    once two learn num-workers
>    once to submit a MapRed job, using setNumMapTasks( 5 * num- 
> workers )
>
> 2. JobConf is extended to accept relative number tasks.
>    Existing: setNumMapTasks(int n)               "mapred.map.tasks"
>    New :     setNumMapTasksPerTaskTracker(int n)
> "mapred.map.taskspertracker"
>    JobClient must set either value.
>    Then when JobTracker accepts a job, it simply translates if  
> necessary
>     tasks = taskspertracker * num-workers.
>
>
> Do we agree this is useful,
> and which do you think is the best option? (1. or 2.)
>
> Thanks,
> Michel
>
>
>


From MAILER-DAEMON Tue Feb 14 08:12:31 2006
Return-Path: 
 <hadoop-dev-return-141-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16044 invoked from network); 14 Feb 2006 08:12:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Feb 2006 08:12:31 -0000
Received: (qmail 5037 invoked by uid 500); 14 Feb 2006 08:12:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 4987 invoked by uid 500); 14 Feb 2006 08:12:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 4976 invoked by uid 99); 14 Feb 2006 08:12:30 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 00:12:29 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 02704DD
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Feb 2006 09:12:09 +0100 (CET)
Message-ID: <836056018.1139904729007.JavaMail.jira@ajax.apache.org>
Date: Tue, 14 Feb 2006 09:12:09 +0100 (CET)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-37) A way to determine the size and overall
 activity of the cluster
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

A way to determine the size and overall activity of the cluster
---------------------------------------------------------------

         Key: HADOOP-37
         URL: http://issues.apache.org/jira/browse/HADOOP-37
     Project: Hadoop
        Type: New Feature
  Components: mapred  
    Reporter: Owen O'Malley


There is currently no way for an application to determine the size or activity of the cluster.



-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Feb 14 08:16:34 2006
Return-Path: 
 <hadoop-dev-return-142-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17340 invoked from network); 14 Feb 2006 08:16:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Feb 2006 08:16:34 -0000
Received: (qmail 11919 invoked by uid 500); 14 Feb 2006 08:16:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 11858 invoked by uid 500); 14 Feb 2006 08:16:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 11843 invoked by uid 99); 14 Feb 2006 08:16:33 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 00:16:32 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 70621E0
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Feb 2006 09:16:11 +0100 (CET)
Message-ID: <1280539382.1139904971457.JavaMail.jira@ajax.apache.org>
Date: Tue, 14 Feb 2006 09:16:11 +0100 (CET)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-37) A way to determine the size and overall
 activity of the cluster
In-Reply-To: <836056018.1139904729007.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-37?page=all ]

Owen O'Malley updated HADOOP-37:
--------------------------------

    Attachment: cluster-status.patch

This patch provides a new method in the JobClient that provides a summary of the size and activity in the cluster.

> A way to determine the size and overall activity of the cluster
> ---------------------------------------------------------------
>
>          Key: HADOOP-37
>          URL: http://issues.apache.org/jira/browse/HADOOP-37
>      Project: Hadoop
>         Type: New Feature
>   Components: mapred
>     Reporter: Owen O'Malley
>  Attachments: cluster-status.patch
>
> There is currently no way for an application to determine the size or activity of the cluster.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Feb 14 09:53:33 2006
Return-Path: 
 <hadoop-dev-return-143-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 73279 invoked from network); 14 Feb 2006 09:53:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Feb 2006 09:53:33 -0000
Received: (qmail 31626 invoked by uid 500); 14 Feb 2006 09:53:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 31599 invoked by uid 500); 14 Feb 2006 09:53:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31590 invoked by uid 99); 14 Feb 2006 09:53:32 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 01:53:32 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id E44CEDC
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Feb 2006 10:53:10 +0100 (CET)
Message-ID: <1134544369.1139910790778.JavaMail.jira@ajax.apache.org>
Date: Tue, 14 Feb 2006 10:53:10 +0100 (CET)
From: "Mike Cafarella (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-16) RPC call times out while indexing map
 task is computing splits
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-16?page=all ]

Mike Cafarella updated HADOOP-16:
---------------------------------

    Attachment: patch.16


  Here's a patch for the problem.  I changed two things.

  1) The comment is right, there's no need to iterate through all choices in JobTracker
after we find a TaskInProgress to take the task.

  2) Within a TaskInProgress (TIP), which tracks an individual split within a Job, we cache
the results of the getHints() call to the Distributed File System.


> RPC call times out while indexing map task is computing splits
> --------------------------------------------------------------
>
>          Key: HADOOP-16
>          URL: http://issues.apache.org/jira/browse/HADOOP-16
>      Project: Hadoop
>         Type: Bug
>   Components: mapred
>  Environment: MapReduce multi-computer crawl environment: 11 machines (1 master with JobTracker/NameNode, 10 slaves with TaskTrackers/DataNodes)
>     Reporter: Chris Schneider
>  Attachments: patch.16
>
> We've been using Nutch 0.8 (MapReduce) to perform some internet crawling. Things seemed to be going well until...
> 060129 222409 Lost tracker 'tracker_56288'
> 060129 222409 Task 'task_m_10gs5f' has been lost.
> 060129 222409 Task 'task_m_10qhzr' has been lost.
>    ........
>    ........
> 060129 222409 Task 'task_r_zggbwu' has been lost.
> 060129 222409 Task 'task_r_zh8dao' has been lost.
> 060129 222455 Server handler 8 on 8010 caught: java.net.SocketException: Socket closed
> java.net.SocketException: Socket closed
>         at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:99)
>         at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
>         at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
>         at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
>         at java.io.DataOutputStream.flush(DataOutputStream.java:106)
>         at org.apache.nutch.ipc.Server$Handler.run(Server.java:216)
> 060129 222455 Adding task 'task_m_cia5po' to set for tracker 'tracker_56288'
> 060129 223711 Adding task 'task_m_ffv59i' to set for tracker 'tracker_25647'
> I'm hoping that someone could explain why task_m_cia5po got added to tracker_56288 after this tracker was lost.
> The Crawl .main process died with the following output:
> 060129 221129 Indexer: adding segment: /user/crawler/crawl-20060129091444/segments/20060129200246
> Exception in thread "main" java.io.IOException: timed out waiting for response
>     at org.apache.nutch.ipc.Client.call(Client.java:296)
>     at org.apache.nutch.ipc.RPC$Invoker.invoke(RPC.java:127)
>     at $Proxy1.submitJob(Unknown Source)
>     at org.apache.nutch.mapred.JobClient.submitJob(JobClient.java:259)
>     at org.apache.nutch.mapred.JobClient.runJob(JobClient.java:288)
>     at org.apache.nutch.indexer.Indexer.index(Indexer.java:263)
>     at org.apache.nutch.crawl.Crawl.main(Crawl.java:127)
> However, it definitely seems as if the JobTracker is still waiting for the job to finish (no failed jobs).
> Doug Cutting's response:
> The bug here is that the RPC call times out while the map task is computing splits.  The fix is that the job tracker should not compute splits until after it has returned from the submitJob RPC.  Please submit a bug in Jira to help remind us to fix this.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Feb 14 09:56:17 2006
Return-Path: 
 <hadoop-dev-return-144-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 74753 invoked from network); 14 Feb 2006 09:56:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Feb 2006 09:56:17 -0000
Received: (qmail 37390 invoked by uid 500); 14 Feb 2006 09:56:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 37371 invoked by uid 500); 14 Feb 2006 09:56:16 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 37362 invoked by uid 99); 14 Feb 2006 09:56:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 01:56:16 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 01:56:15 -0800
Received: from [192.168.0.254] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id k1E9tv618082
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Feb 2006 03:55:57 -0600
Message-ID: <43F1A92B.8000709@getopt.org>
Date: Tue, 14 Feb 2006 10:55:55 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Lock manager
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I noticed that there are some additions being made to the 
JobSubmissionProtocol. While we're on this subject, I'd like to propose 
the following addition.

Currently there is no mechanism to coordinate concurrent access to 
specific resources across the cluster. This is apparent in Nutch in the 
protocol plugins, which need this "global lock" mechanism to control 
simultaneous access to remote hosts (at the moment the workaround is to 
execute just one task simultaneously to handle the locking inside a 
single JVM).

We could devise a mechanism based on files, residing on DFS, but it 
would be too heavyweight - in the above case it would mean 
creating/reading/deleting millions of files per job.

I propose to add a simple locking mechanism to JobTracker, which would 
hold locks specific to a given job. Then each task executing on a 
tasktracker could send requests  to JobTracker to acquire/release such 
locks (identified by strings, perhaps with some grouping mechanism), 
with the usual semantics. The cleanup in case of crashed jobs would be 
simple - whenever a job is finished, JobTracker would remove all locks 
related to that job.

In this schema it would be the JobTracker node that runs this lock 
manager, but I can imagine that we could designate any of the 
tasktracker nodes to run this "lock manager task" for each job, if it 
ever becomes a scalability problem. We could also go even further and 
create two types of lock managers - global lock manager (for resources 
unique per cluster) and per-job lock managers (for resources unique per 
job).

Any comments?

-- 
Best regards,
Andrzej Bialecki     <><
 ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com



From MAILER-DAEMON Tue Feb 14 10:01:38 2006
Return-Path: 
 <hadoop-dev-return-145-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76939 invoked from network); 14 Feb 2006 10:01:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Feb 2006 10:01:38 -0000
Received: (qmail 44736 invoked by uid 500); 14 Feb 2006 10:01:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 44702 invoked by uid 500); 14 Feb 2006 10:01:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 44508 invoked by uid 99); 14 Feb 2006 10:01:30 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 02:01:30 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 73C29DC
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Feb 2006 11:01:09 +0100 (CET)
Message-ID: <1886418461.1139911269450.JavaMail.jira@ajax.apache.org>
Date: Tue, 14 Feb 2006 11:01:09 +0100 (CET)
From: "Mike Cafarella (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-16) RPC call times out while indexing map
 task is computing splits
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-16?page=comments#action_12366317 ] 

Mike Cafarella commented on HADOOP-16:
--------------------------------------


  Sorry, my blurb above was a little unclear.

  I should have said:

  1)  Bryan's comment is right, we don't need to iterate through the whole
list in JobTracker's obtainNewMapTask call.  We now just do it until we
find a good cacheTarget or stdTarget value.

  2) A TIP object tracks each individual split in the Job.  We cache
the data at each TIP.  This will be handy in case the TIP has to
be re-executed due to machine failure.  

  I don't mind caching the hints aggressively, because it's 
just task-placement we're after.  If the hint is wrong (which only happens 
in case of machine failure), we might send the task to a suboptimal 
machine.  No big deal.



> RPC call times out while indexing map task is computing splits
> --------------------------------------------------------------
>
>          Key: HADOOP-16
>          URL: http://issues.apache.org/jira/browse/HADOOP-16
>      Project: Hadoop
>         Type: Bug
>   Components: mapred
>  Environment: MapReduce multi-computer crawl environment: 11 machines (1 master with JobTracker/NameNode, 10 slaves with TaskTrackers/DataNodes)
>     Reporter: Chris Schneider
>  Attachments: patch.16
>
> We've been using Nutch 0.8 (MapReduce) to perform some internet crawling. Things seemed to be going well until...
> 060129 222409 Lost tracker 'tracker_56288'
> 060129 222409 Task 'task_m_10gs5f' has been lost.
> 060129 222409 Task 'task_m_10qhzr' has been lost.
>    ........
>    ........
> 060129 222409 Task 'task_r_zggbwu' has been lost.
> 060129 222409 Task 'task_r_zh8dao' has been lost.
> 060129 222455 Server handler 8 on 8010 caught: java.net.SocketException: Socket closed
> java.net.SocketException: Socket closed
>         at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:99)
>         at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
>         at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
>         at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
>         at java.io.DataOutputStream.flush(DataOutputStream.java:106)
>         at org.apache.nutch.ipc.Server$Handler.run(Server.java:216)
> 060129 222455 Adding task 'task_m_cia5po' to set for tracker 'tracker_56288'
> 060129 223711 Adding task 'task_m_ffv59i' to set for tracker 'tracker_25647'
> I'm hoping that someone could explain why task_m_cia5po got added to tracker_56288 after this tracker was lost.
> The Crawl .main process died with the following output:
> 060129 221129 Indexer: adding segment: /user/crawler/crawl-20060129091444/segments/20060129200246
> Exception in thread "main" java.io.IOException: timed out waiting for response
>     at org.apache.nutch.ipc.Client.call(Client.java:296)
>     at org.apache.nutch.ipc.RPC$Invoker.invoke(RPC.java:127)
>     at $Proxy1.submitJob(Unknown Source)
>     at org.apache.nutch.mapred.JobClient.submitJob(JobClient.java:259)
>     at org.apache.nutch.mapred.JobClient.runJob(JobClient.java:288)
>     at org.apache.nutch.indexer.Indexer.index(Indexer.java:263)
>     at org.apache.nutch.crawl.Crawl.main(Crawl.java:127)
> However, it definitely seems as if the JobTracker is still waiting for the job to finish (no failed jobs).
> Doug Cutting's response:
> The bug here is that the RPC call times out while the map task is computing splits.  The fix is that the job tracker should not compute splits until after it has returned from the submitJob RPC.  Please submit a bug in Jira to help remind us to fix this.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Feb 14 14:27:38 2006
Return-Path: 
 <hadoop-dev-return-146-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 19085 invoked from network); 14 Feb 2006 14:27:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Feb 2006 14:27:38 -0000
Received: (qmail 19719 invoked by uid 500); 14 Feb 2006 14:27:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 19666 invoked by uid 500); 14 Feb 2006 14:27:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 19650 invoked by uid 99); 14 Feb 2006 14:27:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 06:27:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 06:27:08 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id E20B833D338; Tue, 14 Feb 2006 09:26:47 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU
 [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 827FB33D333
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Feb 2006 09:26:44 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <20060213190325.63227.qmail@minotaur.apache.org>
References: <20060213190325.63227.qmail@minotaur.apache.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <A74E6B0E-2D64-4563-8E9C-571A78F6096D@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: svn commit: r377463 - /lucene/hadoop/trunk/build.xml
Date: Tue, 14 Feb 2006 07:26:52 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Just a tidbit of Ant trivia, <property> with value="..." is an exact  
string assignment.   However, there is a variant that works better  
for directory references:

	<property name="prop" location="src/java"/>

Using _location_, the string value of the property "prop" becomes the  
absolute path to src/java, resolved relative to the base directory of  
the Ant project.  The top-level <project> element can specify a  
basedir=".." attribute if it needs to be different than the the  
location of build.xml itself.  The basedir value can be relative.   
I've often seen basedir=".." to specify that all relative paths be  
resolved from the parent directory.

	Erik


On Feb 13, 2006, at 12:03 PM, cutting@apache.org wrote:

> Author: cutting
> Date: Mon Feb 13 11:03:24 2006
> New Revision: 377463
>
> URL: http://svn.apache.org/viewcvs?rev=377463&view=rev
> Log:
> Fix for HADOOP-34: make build paths relative to location of  
> build.xml, not PWD.  Contributed by Jeremy Bensley.
>
> Modified:
>     lucene/hadoop/trunk/build.xml
>
> Modified: lucene/hadoop/trunk/build.xml
> URL: http://svn.apache.org/viewcvs/lucene/hadoop/trunk/build.xml? 
> rev=377463&r1=377462&r2=377463&view=diff
> ====================================================================== 
> ========
> --- lucene/hadoop/trunk/build.xml (original)
> +++ lucene/hadoop/trunk/build.xml Mon Feb 13 11:03:24 2006
> @@ -13,15 +13,14 @@
>    <property name="final.name" value="${name}-${version}"/>
>    <property name="year" value="2006"/>
>
> -  <property name="basedir" value="./"/>
> -  <property name="src.dir" value="src/java"/>
> -  <property name="examples.dir" value="src/examples"/>
> -  <property name="lib.dir" value="lib"/>
> -  <property name="conf.dir" value="conf"/>
> -  <property name="docs.dir" value="docs"/>
> +  <property name="src.dir" value="${basedir}/src/java"/>
> +  <property name="examples.dir" value="${basedir}/src/examples"/>
> +  <property name="lib.dir" value="${basedir}/lib"/>
> +  <property name="conf.dir" value="${basedir}/conf"/>
> +  <property name="docs.dir" value="${basedir}/docs"/>
>    <property name="docs.src" value="${basedir}/src/web"/>
>
> -  <property name="build.dir" value="build"/>
> +  <property name="build.dir" value="${basedir}/build"/>
>    <property name="build.classes" value="${build.dir}/classes"/>
>    <property name="build.src" value="${build.dir}/src"/>
>    <property name="build.webapps" value="${build.dir}/webapps"/>
> @@ -30,14 +29,14 @@
>    <property name="build.javadoc" value="${build.docs}/api"/>
>    <property name="build.encoding" value="ISO-8859-1"/>
>
> -  <property name="test.src.dir" value="src/test"/>
> +  <property name="test.src.dir" value="${basedir}/src/test"/>
>    <property name="test.build.dir" value="${build.dir}/test"/>
>    <property name="test.build.data" value="${test.build.dir}/data"/>
>    <property name="test.build.classes" value="${test.build.dir}/ 
> classes"/>
>    <property name="test.build.javadoc" value="${test.build.dir}/ 
> docs/api"/>
>
> -  <property name="web.src.dir" value="src/web"/>
> -  <property name="src.webapps" value="src/webapps"/>
> +  <property name="web.src.dir" value="${basedir}/src/web"/>
> +  <property name="src.webapps" value="${basedir}/src/webapps"/>
>
>    <property name="javadoc.link.java"
>  	    value="http://java.sun.com/j2se/1.4.2/docs/api/"/>
>


From MAILER-DAEMON Tue Feb 14 17:54:07 2006
Return-Path: 
 <hadoop-dev-return-148-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 45461 invoked from network); 14 Feb 2006 17:54:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Feb 2006 17:54:07 -0000
Received: (qmail 50835 invoked by uid 500); 14 Feb 2006 17:54:07 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 50821 invoked by uid 500); 14 Feb 2006 17:54:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 50812 invoked by uid 99); 14 Feb 2006 17:54:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 09:54:06 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.145.54.171] (HELO mrout1.yahoo.com) (216.145.54.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 09:54:06 -0800
Received: from [207.126.231.161] (oom-mac.corp.yahoo.com [207.126.231.161])
	by mrout1.yahoo.com (8.13.4/8.13.4/y.out) with ESMTP id k1EHplFX006031
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Feb 2006 09:51:48 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=0i76H42k6/uaaPdmPSaJK9WIHjU4djKrSfqcJaS21gyprPFlMfIt2rAbaYrxldOZ
Mime-Version: 1.0 (Apple Message framework v623)
In-Reply-To: <7F4E74D1-C395-4CF7-94D3-471AAABAC594@yahoo-inc.com>
References: <PDEFIFNIPHNHGGMCIBNGMEFIFHAA.michel@yahoo-inc.com>
 <7F4E74D1-C395-4CF7-94D3-471AAABAC594@yahoo-inc.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <bdac390acc34be64fa0db73159b44e81@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: "Owen O'Malley" <owen@yahoo-inc.com>
Subject: Re: Estimating number of worker nodes
Date: Tue, 14 Feb 2006 07:56:14 -0800
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.623)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Feb 13, 2006, at 9:48 PM, Eric Baldeschwieler wrote:

> Some of our discussed future work may make this impractical.  The 
> number of available workers may become a variable that depends on 
> priority, other parallel work etc.
>
> Perhaps it is best to express your requirements in terms of the input 
> or the output, for example size of input per job?

I think that in the short term, it is worthwhile letting the 
application see the current size of the cluster (and the current number 
of maps and reduces). I created a patch that does this and submitted it 
at:

http://issues.apache.org/jira/browse/HADOOP-37

Even if there is eventually a meta scheduler, it still makes sense to 
ask the question, you just can't assume that the size of the cluster is 
constant.

-- Owen


From MAILER-DAEMON Tue Feb 14 17:13:05 2006
Return-Path: 
 <hadoop-dev-return-147-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 24468 invoked from network); 14 Feb 2006 17:13:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Feb 2006 17:13:05 -0000
Received: (qmail 74847 invoked by uid 500); 14 Feb 2006 17:13:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 74816 invoked by uid 500); 14 Feb 2006 17:13:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 74805 invoked by uid 99); 14 Feb 2006 17:13:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 09:13:03 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.115.57.32] (HELO ylpvm01.prodigy.net) (207.115.57.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 09:13:03 -0800
Received: from pimout5-ext.prodigy.net (pimout5-int.prodigy.net
 [207.115.4.21])
	by ylpvm01.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id
 k1EHCda5001199
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Feb 2006 12:12:39 -0500
X-ORBL: [69.228.231.148]
Received: from [192.168.168.15] (adsl-69-228-231-148.dsl.pltn13.pacbell.net
 [69.228.231.148])
	by pimout5-ext.prodigy.net (8.13.4 outbound domainkey aix/8.13.4) with ESMTP
 id k1EHCX7P078652;
	Tue, 14 Feb 2006 12:12:33 -0500
Message-ID: <43F20FB4.5020301@apache.org>
Date: Tue, 14 Feb 2006 09:13:24 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: Estimating number of worker nodes
References: <PDEFIFNIPHNHGGMCIBNGMEFIFHAA.michel@yahoo-inc.com>
In-Reply-To: <PDEFIFNIPHNHGGMCIBNGMEFIFHAA.michel@yahoo-inc.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Michel Tourn wrote:
> but at other times an MR application would rather
> set a relative number of tasks:
>  num Map Tasks = 5 * num active worker nodes
>  num Reduce Tasks = 2 * num active worker nodes
> 
> Intuitively, it seems to be a good thing to consider
> num-active-worker-nodes as a variable rather than
> as a constant known by the MapRed user.

The current assumption is that the default for mapred.map.tasks and 
mapred.reduce tasks is configured for the cluster, based on the number 
of nodes and the number of cpus per node.  For classic MapReduce 
operations around five times the number of CPUs (not nodes) seems to be 
a good number of map tasks, and around one times the number of CPUs 
seems to be a good number of reduce tasks.

It remains to be seen whether there are jobs which benefit greatly from 
varying these.  In my experience, a single setting seems to work well 
for a wide variety of jobs.  I'd rather not introduce a mechanism until 
we can show that it is needed.  Do you have jobs that perform poorly 
with settings like these?

Another better to specify this might be to have parameters 
mapred.num.cpus and mapred.maps.per.cpu and mapred.reduces.per.cpu, the 
latter two with default values of 5 and 1 respectively.  Then it would 
be simpler to configure a cluster, by just specifying the total number 
of cpus.  (Note that mapred.tasktracker.tasks.maximum, the number of map 
or reduce tasks to run simultaneously on a node, is also a key 
cluster-specific parameter, typically set to the number of cpus per node.)

Doug

From MAILER-DAEMON Tue Feb 14 18:39:33 2006
Return-Path: 
 <hadoop-dev-return-149-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 69939 invoked from network); 14 Feb 2006 18:39:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Feb 2006 18:39:33 -0000
Received: (qmail 35683 invoked by uid 500); 14 Feb 2006 18:39:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 35666 invoked by uid 500); 14 Feb 2006 18:39:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 35657 invoked by uid 99); 14 Feb 2006 18:39:33 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 10:39:32 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 0FE42DD
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Feb 2006 19:39:12 +0100 (CET)
Message-ID: <113327619.1139942352063.JavaMail.jira@ajax.apache.org>
Date: Tue, 14 Feb 2006 19:39:12 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-37) A way to determine the size and
 overall activity of the cluster
In-Reply-To: <836056018.1139904729007.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-37?page=all ]
     
Doug Cutting resolved HADOOP-37:
--------------------------------

    Resolution: Fixed

I have committed this, but with the following modifications to ClusterStatus.java:

Fields are moved to the top of the class, as per:

http://java.sun.com/docs/codeconv/html/CodeConventions.doc2.html#1852

Constructors are no longer public: the public constructors had no javadoc.  But there's not much point in adding any, since user code should never need to call these.  The javadoc should only contain things that folks need to call.  I added a WritableFactory so that the io code can construct these, and made the no-arg constructor private, since it should only be called by the factory.  The other constructor I made package-private.

Finally, I fixed a typo in the javadoc.


> A way to determine the size and overall activity of the cluster
> ---------------------------------------------------------------
>
>          Key: HADOOP-37
>          URL: http://issues.apache.org/jira/browse/HADOOP-37
>      Project: Hadoop
>         Type: New Feature
>   Components: mapred
>     Reporter: Owen O'Malley
>  Attachments: cluster-status.patch
>
> There is currently no way for an application to determine the size or activity of the cluster.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Feb 14 19:09:33 2006
Return-Path: 
 <hadoop-dev-return-150-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85783 invoked from network); 14 Feb 2006 19:09:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Feb 2006 19:09:33 -0000
Received: (qmail 97132 invoked by uid 500); 14 Feb 2006 19:09:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97111 invoked by uid 500); 14 Feb 2006 19:09:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97099 invoked by uid 99); 14 Feb 2006 19:09:33 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 11:09:31 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 87E53DC
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Feb 2006 20:09:10 +0100 (CET)
Message-ID: <1456003165.1139944150443.JavaMail.jira@ajax.apache.org>
Date: Tue, 14 Feb 2006 20:09:10 +0100 (CET)
From: "Mike Cafarella (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-16) RPC call times out while indexing map
 task is computing splits
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-16?page=all ]
     
Mike Cafarella resolved HADOOP-16:
----------------------------------

    Resolution: Fixed


  Patch comitted.

> RPC call times out while indexing map task is computing splits
> --------------------------------------------------------------
>
>          Key: HADOOP-16
>          URL: http://issues.apache.org/jira/browse/HADOOP-16
>      Project: Hadoop
>         Type: Bug
>   Components: mapred
>  Environment: MapReduce multi-computer crawl environment: 11 machines (1 master with JobTracker/NameNode, 10 slaves with TaskTrackers/DataNodes)
>     Reporter: Chris Schneider
>  Attachments: patch.16
>
> We've been using Nutch 0.8 (MapReduce) to perform some internet crawling. Things seemed to be going well until...
> 060129 222409 Lost tracker 'tracker_56288'
> 060129 222409 Task 'task_m_10gs5f' has been lost.
> 060129 222409 Task 'task_m_10qhzr' has been lost.
>    ........
>    ........
> 060129 222409 Task 'task_r_zggbwu' has been lost.
> 060129 222409 Task 'task_r_zh8dao' has been lost.
> 060129 222455 Server handler 8 on 8010 caught: java.net.SocketException: Socket closed
> java.net.SocketException: Socket closed
>         at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:99)
>         at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
>         at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
>         at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
>         at java.io.DataOutputStream.flush(DataOutputStream.java:106)
>         at org.apache.nutch.ipc.Server$Handler.run(Server.java:216)
> 060129 222455 Adding task 'task_m_cia5po' to set for tracker 'tracker_56288'
> 060129 223711 Adding task 'task_m_ffv59i' to set for tracker 'tracker_25647'
> I'm hoping that someone could explain why task_m_cia5po got added to tracker_56288 after this tracker was lost.
> The Crawl .main process died with the following output:
> 060129 221129 Indexer: adding segment: /user/crawler/crawl-20060129091444/segments/20060129200246
> Exception in thread "main" java.io.IOException: timed out waiting for response
>     at org.apache.nutch.ipc.Client.call(Client.java:296)
>     at org.apache.nutch.ipc.RPC$Invoker.invoke(RPC.java:127)
>     at $Proxy1.submitJob(Unknown Source)
>     at org.apache.nutch.mapred.JobClient.submitJob(JobClient.java:259)
>     at org.apache.nutch.mapred.JobClient.runJob(JobClient.java:288)
>     at org.apache.nutch.indexer.Indexer.index(Indexer.java:263)
>     at org.apache.nutch.crawl.Crawl.main(Crawl.java:127)
> However, it definitely seems as if the JobTracker is still waiting for the job to finish (no failed jobs).
> Doug Cutting's response:
> The bug here is that the RPC call times out while the map task is computing splits.  The fix is that the job tracker should not compute splits until after it has returned from the submitJob RPC.  Please submit a bug in Jira to help remind us to fix this.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Feb 14 19:27:05 2006
Return-Path: 
 <hadoop-dev-return-152-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96062 invoked from network); 14 Feb 2006 19:27:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Feb 2006 19:27:05 -0000
Received: (qmail 24026 invoked by uid 500); 14 Feb 2006 19:27:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24003 invoked by uid 500); 14 Feb 2006 19:27:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23994 invoked by uid 99); 14 Feb 2006 19:27:04 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 11:27:04 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 82733DC
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Feb 2006 20:26:43 +0100 (CET)
Message-ID: <1089400937.1139945203207.JavaMail.jira@ajax.apache.org>
Date: Tue, 14 Feb 2006 20:26:43 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-38) default splitter should incorporate fs
 block size
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

default splitter should incorporate fs block size
-------------------------------------------------

         Key: HADOOP-38
         URL: http://issues.apache.org/jira/browse/HADOOP-38
     Project: Hadoop
        Type: Improvement
  Components: mapred  
    Reporter: Doug Cutting


By default, the file splitting code should operate as follows.

  inputs are <file>*, numMapTasks, minSplitSize, fsBlockSize
  output is <file,start,length>*

  totalSize = sum of all file sizes;

  desiredSplitSize = totalSize / numMapTasks;
  if (desiredSplitSize > fsBlockSize)             /* new */
    desiredSplitSize = fsBlockSize;
  if (desiredSplitSize < minSplitSize)
    desiredSplitSize = minSplitSize;

  chop input files into desiredSplitSize chunks & return them

In other words, the numMapTasks is a desired minimum.  We'll try to chop input into at least numMapTasks chunks, each ideally a single fs block.

If there's not enough input data to create numMapTasks tasks, each with an entire block, then we'll permit tasks whose input is smaller than a filesystem block, down to a minimum split size.

This handles cases where:
  - each input record takes a lot of time to process.  In this case we want to make sure we use all of the cluster.  Thus it is important to permit splits smaller than the fs block size.
  - input i/o dominates.  In this case we want to permit the placement of tasks on hosts where their data is local.  This is only possible if splits are fs block size or smaller.

Are there other common cases that this algorithm does not handle well?

The part marked 'new' above is not currently implemented, but I'd like to add it.

Does this sound reasonble?


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Feb 14 19:26:36 2006
Return-Path: 
 <hadoop-dev-return-151-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 95690 invoked from network); 14 Feb 2006 19:26:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Feb 2006 19:26:36 -0000
Received: (qmail 22996 invoked by uid 500); 14 Feb 2006 19:26:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 22938 invoked by uid 500); 14 Feb 2006 19:26:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22911 invoked by uid 99); 14 Feb 2006 19:26:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 11:26:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.115.57.32] (HELO ylpvm01.prodigy.net) (207.115.57.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 11:26:34 -0800
Received: from pimout5-ext.prodigy.net (pimout5-int.prodigy.net
 [207.115.4.21])
	by ylpvm01.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id
 k1EJQBa5021607
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Feb 2006 14:26:13 -0500
X-ORBL: [69.228.231.148]
Received: from [192.168.168.15] (adsl-69-228-231-148.dsl.pltn13.pacbell.net
 [69.228.231.148])
	by pimout5-ext.prodigy.net (8.13.4 outbound domainkey aix/8.13.4) with ESMTP
 id k1EJQ3EO202884;
	Tue, 14 Feb 2006 14:26:07 -0500
Message-ID: <43F22F00.8050808@apache.org>
Date: Tue, 14 Feb 2006 11:26:56 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: Estimating number of worker nodes
References: <PDEFIFNIPHNHGGMCIBNGMEFIFHAA.michel@yahoo-inc.com>
 <7F4E74D1-C395-4CF7-94D3-471AAABAC594@yahoo-inc.com>
In-Reply-To: <7F4E74D1-C395-4CF7-94D3-471AAABAC594@yahoo-inc.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Eric Baldeschwieler wrote:
> Perhaps it is best to express your requirements in terms of the input  
> or the output, for example size of input per job?

I just filed a bug related to this:

http://issues.apache.org/jira/browse/HADOOP-38

Doug

From MAILER-DAEMON Tue Feb 14 20:49:33 2006
Return-Path: 
 <hadoop-dev-return-153-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 56023 invoked from network); 14 Feb 2006 20:49:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Feb 2006 20:49:33 -0000
Received: (qmail 87043 invoked by uid 500); 14 Feb 2006 20:49:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 87019 invoked by uid 500); 14 Feb 2006 20:49:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 87002 invoked by uid 99); 14 Feb 2006 20:49:32 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 12:49:30 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id D7922DC
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Feb 2006 21:49:08 +0100 (CET)
Message-ID: <104031761.1139950148861.JavaMail.jira@ajax.apache.org>
Date: Tue, 14 Feb 2006 21:49:08 +0100 (CET)
From: "Bryan Pendleton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-38) default splitter should incorporate
 fs block size
In-Reply-To: <1089400937.1139945203207.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-38?page=comments#action_12366381 ] 

Bryan Pendleton commented on HADOOP-38:
---------------------------------------

The idea sounds sound, but is blocksize the best unit? There's a certain overhead for each additional task added to a job - for jobs with really large input, this could cause really large task lists. Is there going to be any code for pre-replicating blocks? Maybe sequences, so there'd be a natural "first choice" node for many chunkings of larger than one block? Obviously, as datanodes come and go this might not always work ideally, but it could help in the 80% case.

> default splitter should incorporate fs block size
> -------------------------------------------------
>
>          Key: HADOOP-38
>          URL: http://issues.apache.org/jira/browse/HADOOP-38
>      Project: Hadoop
>         Type: Improvement
>   Components: mapred
>     Reporter: Doug Cutting

>
> By default, the file splitting code should operate as follows.
>   inputs are <file>*, numMapTasks, minSplitSize, fsBlockSize
>   output is <file,start,length>*
>   totalSize = sum of all file sizes;
>   desiredSplitSize = totalSize / numMapTasks;
>   if (desiredSplitSize > fsBlockSize)             /* new */
>     desiredSplitSize = fsBlockSize;
>   if (desiredSplitSize < minSplitSize)
>     desiredSplitSize = minSplitSize;
>   chop input files into desiredSplitSize chunks & return them
> In other words, the numMapTasks is a desired minimum.  We'll try to chop input into at least numMapTasks chunks, each ideally a single fs block.
> If there's not enough input data to create numMapTasks tasks, each with an entire block, then we'll permit tasks whose input is smaller than a filesystem block, down to a minimum split size.
> This handles cases where:
>   - each input record takes a lot of time to process.  In this case we want to make sure we use all of the cluster.  Thus it is important to permit splits smaller than the fs block size.
>   - input i/o dominates.  In this case we want to permit the placement of tasks on hosts where their data is local.  This is only possible if splits are fs block size or smaller.
> Are there other common cases that this algorithm does not handle well?
> The part marked 'new' above is not currently implemented, but I'd like to add it.
> Does this sound reasonble?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Feb 14 21:34:07 2006
Return-Path: 
 <hadoop-dev-return-155-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86403 invoked from network); 14 Feb 2006 21:34:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Feb 2006 21:34:07 -0000
Received: (qmail 65327 invoked by uid 500); 14 Feb 2006 21:34:07 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 65272 invoked by uid 500); 14 Feb 2006 21:34:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 65262 invoked by uid 99); 14 Feb 2006 21:34:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 13:34:07 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.145.54.172] (HELO mrout2.yahoo.com) (216.145.54.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 13:34:06 -0800
Received: from SNV-XCHMAIL.xch.corp.yahoo.com (snv-xch2.xch.corp.yahoo.com
 [216.145.51.235])
	by mrout2.yahoo.com (8.13.4/8.13.4/y.out) with ESMTP id k1ELXGTJ026575
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Feb 2006 13:33:16 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=received:mime-version:in-reply-to:references:content-type:
	message-id:content-transfer-encoding:from:subject:date:to:x-mailer:
	return-path:x-originalarrivaltime;
	b=DxiCjIo3h5RHxM4c6LPudraazWf0YJ+kZouBPrgm26azYEIC4/u871sYCMTDFY6g
Received: from [172.21.147.237] ([172.21.179.139]) by
 SNV-XCHMAIL.xch.corp.yahoo.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Tue, 14 Feb 2006 13:33:16 -0800
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <104031761.1139950148861.JavaMail.jira@ajax.apache.org>
References: <104031761.1139950148861.JavaMail.jira@ajax.apache.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <D9CE55B0-CBFB-46A6-AED0-D5E4E204286B@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Eric Baldeschwieler <eric14@yahoo-inc.com>
Subject: Re: [jira] Commented: (HADOOP-38) default splitter should incorporate
 fs block size
Date: Tue, 14 Feb 2006 13:19:34 -0800
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-OriginalArrivalTime: 14 Feb 2006 21:33:16.0074 (UTC)
 FILETIME=[43F380A0:01C631AE]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You may simply want to specify the input size per job (maybe in  
blocks?) and let the framework sort things out.

A possible optimization would be to read discontinuous blocks into  
one map job if you want to pump several blocks worth of data into  
each job.  Given the map/reduce mechanism, this should work, yes?

On Feb 14, 2006, at 12:49 PM, Bryan Pendleton (JIRA) wrote:

>     [ http://issues.apache.org/jira/browse/HADOOP-38? 
> page=comments#action_12366381 ]
>
> Bryan Pendleton commented on HADOOP-38:
> ---------------------------------------
>
> The idea sounds sound, but is blocksize the best unit? There's a  
> certain overhead for each additional task added to a job - for jobs  
> with really large input, this could cause really large task lists.  
> Is there going to be any code for pre-replicating blocks? Maybe  
> sequences, so there'd be a natural "first choice" node for many  
> chunkings of larger than one block? Obviously, as datanodes come  
> and go this might not always work ideally, but it could help in the  
> 80% case.
>
>> default splitter should incorporate fs block size
>> -------------------------------------------------
>>
>>          Key: HADOOP-38
>>          URL: http://issues.apache.org/jira/browse/HADOOP-38
>>      Project: Hadoop
>>         Type: Improvement
>>   Components: mapred
>>     Reporter: Doug Cutting
>
>>
>> By default, the file splitting code should operate as follows.
>>   inputs are <file>*, numMapTasks, minSplitSize, fsBlockSize
>>   output is <file,start,length>*
>>   totalSize = sum of all file sizes;
>>   desiredSplitSize = totalSize / numMapTasks;
>>   if (desiredSplitSize > fsBlockSize)             /* new */
>>     desiredSplitSize = fsBlockSize;
>>   if (desiredSplitSize < minSplitSize)
>>     desiredSplitSize = minSplitSize;
>>   chop input files into desiredSplitSize chunks & return them
>> In other words, the numMapTasks is a desired minimum.  We'll try  
>> to chop input into at least numMapTasks chunks, each ideally a  
>> single fs block.
>> If there's not enough input data to create numMapTasks tasks, each  
>> with an entire block, then we'll permit tasks whose input is  
>> smaller than a filesystem block, down to a minimum split size.
>> This handles cases where:
>>   - each input record takes a lot of time to process.  In this  
>> case we want to make sure we use all of the cluster.  Thus it is  
>> important to permit splits smaller than the fs block size.
>>   - input i/o dominates.  In this case we want to permit the  
>> placement of tasks on hosts where their data is local.  This is  
>> only possible if splits are fs block size or smaller.
>> Are there other common cases that this algorithm does not handle  
>> well?
>> The part marked 'new' above is not currently implemented, but I'd  
>> like to add it.
>> Does this sound reasonble?
>
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the  
> administrators:
>    http://issues.apache.org/jira/secure/Administrators.jspa
> -
> For more information on JIRA, see:
>    http://www.atlassian.com/software/jira
>


From MAILER-DAEMON Tue Feb 14 21:20:34 2006
Return-Path: 
 <hadoop-dev-return-154-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 79633 invoked from network); 14 Feb 2006 21:20:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Feb 2006 21:20:34 -0000
Received: (qmail 42187 invoked by uid 500); 14 Feb 2006 21:20:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 42164 invoked by uid 500); 14 Feb 2006 21:20:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 42155 invoked by uid 99); 14 Feb 2006 21:20:33 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 13:20:33 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id E4790DC
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Feb 2006 22:20:11 +0100 (CET)
Message-ID: <321123200.1139952011908.JavaMail.jira@ajax.apache.org>
Date: Tue, 14 Feb 2006 22:20:11 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-38) default splitter should incorporate
 fs block size
In-Reply-To: <1089400937.1139945203207.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-38?page=comments#action_12366385 ] 

Doug Cutting commented on HADOOP-38:
------------------------------------

The surest way to get larger chunks is to increase the block size.

The default DFS blocksize is currently 32MB, which gives 31k tasks for terabyte inputs, which is reasonable.  I think we should design things to be able to handle perhaps a million tasks, which, with the current block size, would get us to 32 terabyte inputs.

Perhaps the default should be 1GB/block.  With a million tasks, would get us to maximum of a petabyte per job.  On a 10k node cluster, a petabyte takes hours to read (100GB/node @ 10MB/second = 10k seconds).

We'll also need to revise the web UI to better handle a million tasks...


> default splitter should incorporate fs block size
> -------------------------------------------------
>
>          Key: HADOOP-38
>          URL: http://issues.apache.org/jira/browse/HADOOP-38
>      Project: Hadoop
>         Type: Improvement
>   Components: mapred
>     Reporter: Doug Cutting

>
> By default, the file splitting code should operate as follows.
>   inputs are <file>*, numMapTasks, minSplitSize, fsBlockSize
>   output is <file,start,length>*
>   totalSize = sum of all file sizes;
>   desiredSplitSize = totalSize / numMapTasks;
>   if (desiredSplitSize > fsBlockSize)             /* new */
>     desiredSplitSize = fsBlockSize;
>   if (desiredSplitSize < minSplitSize)
>     desiredSplitSize = minSplitSize;
>   chop input files into desiredSplitSize chunks & return them
> In other words, the numMapTasks is a desired minimum.  We'll try to chop input into at least numMapTasks chunks, each ideally a single fs block.
> If there's not enough input data to create numMapTasks tasks, each with an entire block, then we'll permit tasks whose input is smaller than a filesystem block, down to a minimum split size.
> This handles cases where:
>   - each input record takes a lot of time to process.  In this case we want to make sure we use all of the cluster.  Thus it is important to permit splits smaller than the fs block size.
>   - input i/o dominates.  In this case we want to permit the placement of tasks on hosts where their data is local.  This is only possible if splits are fs block size or smaller.
> Are there other common cases that this algorithm does not handle well?
> The part marked 'new' above is not currently implemented, but I'd like to add it.
> Does this sound reasonble?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Feb 14 22:32:56 2006
Return-Path: 
 <hadoop-dev-return-156-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 22062 invoked from network); 14 Feb 2006 22:32:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Feb 2006 22:32:56 -0000
Received: (qmail 82439 invoked by uid 500); 14 Feb 2006 22:32:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 82420 invoked by uid 500); 14 Feb 2006 22:32:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 82411 invoked by uid 99); 14 Feb 2006 22:32:54 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 14:32:54 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 81607DC
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Feb 2006 23:32:33 +0100 (CET)
Message-ID: <1786075591.1139956353404.JavaMail.jira@ajax.apache.org>
Date: Tue, 14 Feb 2006 23:32:33 +0100 (CET)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-38) default splitter should incorporate
 fs block size
In-Reply-To: <1089400937.1139945203207.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-38?page=comments#action_12366390 ] 

eric baldeschwieler commented on HADOOP-38:
-------------------------------------------

1GB blocks have a lot of issues.  Until your networks get faster and RAMs get bigger, this is probably too big.  For many of our current tasks 1GB is too much input for reasonable restartabilty too.  I think 32M to 128M are a lot closer to the current sweet spot.


> default splitter should incorporate fs block size
> -------------------------------------------------
>
>          Key: HADOOP-38
>          URL: http://issues.apache.org/jira/browse/HADOOP-38
>      Project: Hadoop
>         Type: Improvement
>   Components: mapred
>     Reporter: Doug Cutting

>
> By default, the file splitting code should operate as follows.
>   inputs are <file>*, numMapTasks, minSplitSize, fsBlockSize
>   output is <file,start,length>*
>   totalSize = sum of all file sizes;
>   desiredSplitSize = totalSize / numMapTasks;
>   if (desiredSplitSize > fsBlockSize)             /* new */
>     desiredSplitSize = fsBlockSize;
>   if (desiredSplitSize < minSplitSize)
>     desiredSplitSize = minSplitSize;
>   chop input files into desiredSplitSize chunks & return them
> In other words, the numMapTasks is a desired minimum.  We'll try to chop input into at least numMapTasks chunks, each ideally a single fs block.
> If there's not enough input data to create numMapTasks tasks, each with an entire block, then we'll permit tasks whose input is smaller than a filesystem block, down to a minimum split size.
> This handles cases where:
>   - each input record takes a lot of time to process.  In this case we want to make sure we use all of the cluster.  Thus it is important to permit splits smaller than the fs block size.
>   - input i/o dominates.  In this case we want to permit the placement of tasks on hosts where their data is local.  This is only possible if splits are fs block size or smaller.
> Are there other common cases that this algorithm does not handle well?
> The part marked 'new' above is not currently implemented, but I'd like to add it.
> Does this sound reasonble?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Feb 14 22:55:34 2006
Return-Path: 
 <hadoop-dev-return-157-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 38907 invoked from network); 14 Feb 2006 22:55:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Feb 2006 22:55:34 -0000
Received: (qmail 46434 invoked by uid 500); 14 Feb 2006 22:55:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 46386 invoked by uid 500); 14 Feb 2006 22:55:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46355 invoked by uid 99); 14 Feb 2006 22:55:32 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 14:55:30 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 11DE1DC
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Feb 2006 23:55:09 +0100 (CET)
Message-ID: <1296449919.1139957709049.JavaMail.jira@ajax.apache.org>
Date: Tue, 14 Feb 2006 23:55:09 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-38) default splitter should incorporate
 fs block size
In-Reply-To: <1089400937.1139945203207.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-38?page=comments#action_12366401 ] 

Doug Cutting commented on HADOOP-38:
------------------------------------

I'm not sure what RAM size or network speeds have to do with it: we stream blocks into a task, we don't read them all at once.

Restartability could be an issue.  If you have a petabyte of input, and you want restartability at 100M chunks, then that means you need to be able to support up to 10M tasks per job.  This is possible, but means the job tracker has to be even more careful not to store too much in RAM per task, nor iterate over all tasks, etc.

But I'm not convinced that 1GB would cause problems for restartability.  A petabyte input on 10k nodes (my current horizon), 1GB blocks gives 1M tasks, or 100 per node.  So each task will average around 1% of the execution time, so even those that are restarted near the end of job completion won't add much to the overall  time.

> default splitter should incorporate fs block size
> -------------------------------------------------
>
>          Key: HADOOP-38
>          URL: http://issues.apache.org/jira/browse/HADOOP-38
>      Project: Hadoop
>         Type: Improvement
>   Components: mapred
>     Reporter: Doug Cutting

>
> By default, the file splitting code should operate as follows.
>   inputs are <file>*, numMapTasks, minSplitSize, fsBlockSize
>   output is <file,start,length>*
>   totalSize = sum of all file sizes;
>   desiredSplitSize = totalSize / numMapTasks;
>   if (desiredSplitSize > fsBlockSize)             /* new */
>     desiredSplitSize = fsBlockSize;
>   if (desiredSplitSize < minSplitSize)
>     desiredSplitSize = minSplitSize;
>   chop input files into desiredSplitSize chunks & return them
> In other words, the numMapTasks is a desired minimum.  We'll try to chop input into at least numMapTasks chunks, each ideally a single fs block.
> If there's not enough input data to create numMapTasks tasks, each with an entire block, then we'll permit tasks whose input is smaller than a filesystem block, down to a minimum split size.
> This handles cases where:
>   - each input record takes a lot of time to process.  In this case we want to make sure we use all of the cluster.  Thus it is important to permit splits smaller than the fs block size.
>   - input i/o dominates.  In this case we want to permit the placement of tasks on hosts where their data is local.  This is only possible if splits are fs block size or smaller.
> Are there other common cases that this algorithm does not handle well?
> The part marked 'new' above is not currently implemented, but I'd like to add it.
> Does this sound reasonble?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Feb 14 23:07:13 2006
Return-Path: 
 <hadoop-dev-return-158-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43927 invoked from network); 14 Feb 2006 23:07:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Feb 2006 23:07:13 -0000
Received: (qmail 58010 invoked by uid 500); 14 Feb 2006 23:07:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 57958 invoked by uid 500); 14 Feb 2006 23:07:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 57945 invoked by uid 99); 14 Feb 2006 23:07:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 15:07:13 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.115.57.32] (HELO ylpvm01.prodigy.net) (207.115.57.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 15:07:12 -0800
Received: from pimout5-ext.prodigy.net (pimout5-int.prodigy.net
 [207.115.4.21])
	by ylpvm01.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id
 k1EN6pa5002005
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Feb 2006 18:06:51 -0500
X-ORBL: [69.228.231.148]
Received: from [192.168.168.15] (adsl-69-228-231-148.dsl.pltn13.pacbell.net
 [69.228.231.148])
	by pimout5-ext.prodigy.net (8.13.4 outbound domainkey aix/8.13.4) with ESMTP
 id k1EN6hmx089882;
	Tue, 14 Feb 2006 18:06:48 -0500
Message-ID: <43F26283.60501@apache.org>
Date: Tue, 14 Feb 2006 15:06:43 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: [jira] Commented: (HADOOP-38) default splitter should incorporate
 fs block size
References: <104031761.1139950148861.JavaMail.jira@ajax.apache.org>
 <D9CE55B0-CBFB-46A6-AED0-D5E4E204286B@yahoo-inc.com>
In-Reply-To: <D9CE55B0-CBFB-46A6-AED0-D5E4E204286B@yahoo-inc.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Eric Baldeschwieler wrote:
> You may simply want to specify the input size per job (maybe in  
> blocks?) and let the framework sort things out.

You can achieve that in my proposal by increasing the minSplitSize to 
something larger than the block size.  So that's already possible.  All 
that I'm suggesting is that the default is to try to make things one 
block per split, unless that results in too few splits.

> A possible optimization would be to read discontinuous blocks into  one 
> map job if you want to pump several blocks worth of data into  each 
> job.  Given the map/reduce mechanism, this should work, yes?

I think you mean multiple blocks per task.  That has potential 
restartability issues, since it's a lot like bigger blocks.  And the 
tasktracker still has to have some representation of every block in 
memory, so I'm not sure it makes the datastructure much smaller, which 
is my primary concern with large numbers of tasks.

A reason to usually keep the number of map tasks much greater than the 
number of CPUs is to reduce the impact of restarting map tasks, since 
most user computation is done while mapping.

A reason to usually keep the number of reduce tasks only slightly 
greater than the number of CPUs is to use all resources while not 
generating too many output files, since these might be combined with the 
output of other maps to form inputs, and we'd rather have fewer large 
inputs to split up than more smaller ones.

Doug

From MAILER-DAEMON Wed Feb 15 01:31:39 2006
Return-Path: 
 <hadoop-dev-return-159-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12289 invoked from network); 15 Feb 2006 01:31:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Feb 2006 01:31:39 -0000
Received: (qmail 59649 invoked by uid 500); 15 Feb 2006 01:31:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 59624 invoked by uid 500); 15 Feb 2006 01:31:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 59615 invoked by uid 99); 15 Feb 2006 01:31:39 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 17:31:37 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 68DC4DC
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Feb 2006 02:31:16 +0100 (CET)
Message-ID: <1399208558.1139967075983.JavaMail.jira@ajax.apache.org>
Date: Wed, 15 Feb 2006 02:31:15 +0100 (CET)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-38) default splitter should incorporate
 fs block size
In-Reply-To: <1089400937.1139945203207.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-38?page=comments#action_12366421 ] 

eric baldeschwieler commented on HADOOP-38:
-------------------------------------------

some thoughts:

1) Eventually you are going to want raid / erasure coding style things.  The simplest way to do this without breaking reads is to batch several blocks, keeping them linear and then generate parity once all blocks are full.  This gets more expensive as block size increases.  At current sizes, this can all be buffered in RAM in some cases.  1GB blocks rule that out.

2) Currently you can trivially keep a block in RAM for a MAP task.  Depending on scaling factor, you can probably keep the output in ram for sorting, reduction, etc.  too.  This is nice.  As block size increases you loose this property.

3) When you loose a node, the finer grained the lost data, the fewer hotspots you have in the system.  Today in a large cluster you can easily have choke points with ~33mbit aggregate all to all.  We've seen problems with larger data sizes slowing recovery times to a real problem.  1GB blocks take 10x as long to transmit, and this turns into minutes, which will require more sophisticated management.

---

None of these are show stoppers, but one of the main reasons we are interested in hadoop is in getting off of our current very large storage chunk system, so I'd hate to see the default move quickly to something as large as 1GB.

I can see the advantages of pushing the block size up to manage task tracker RAM size, but I doubt that alone will prove a compelling reason for us to change our default block size.  On the other hand, I also don't think we'll be pumping 1 peta byte through a single m/r in the near term, so we can assume the zero code solution, change block size, until we have more data to support some other approach.

Of course at 1M tasks, you will want to be careful about linear scans anyway...

I've no concern with the proposal in this bug.  Probably can take this discussion elsewhere

> default splitter should incorporate fs block size
> -------------------------------------------------
>
>          Key: HADOOP-38
>          URL: http://issues.apache.org/jira/browse/HADOOP-38
>      Project: Hadoop
>         Type: Improvement
>   Components: mapred
>     Reporter: Doug Cutting

>
> By default, the file splitting code should operate as follows.
>   inputs are <file>*, numMapTasks, minSplitSize, fsBlockSize
>   output is <file,start,length>*
>   totalSize = sum of all file sizes;
>   desiredSplitSize = totalSize / numMapTasks;
>   if (desiredSplitSize > fsBlockSize)             /* new */
>     desiredSplitSize = fsBlockSize;
>   if (desiredSplitSize < minSplitSize)
>     desiredSplitSize = minSplitSize;
>   chop input files into desiredSplitSize chunks & return them
> In other words, the numMapTasks is a desired minimum.  We'll try to chop input into at least numMapTasks chunks, each ideally a single fs block.
> If there's not enough input data to create numMapTasks tasks, each with an entire block, then we'll permit tasks whose input is smaller than a filesystem block, down to a minimum split size.
> This handles cases where:
>   - each input record takes a lot of time to process.  In this case we want to make sure we use all of the cluster.  Thus it is important to permit splits smaller than the fs block size.
>   - input i/o dominates.  In this case we want to permit the placement of tasks on hosts where their data is local.  This is only possible if splits are fs block size or smaller.
> Are there other common cases that this algorithm does not handle well?
> The part marked 'new' above is not currently implemented, but I'd like to add it.
> Does this sound reasonble?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Feb 15 17:22:46 2006
Return-Path: 
 <hadoop-dev-return-160-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84520 invoked from network); 15 Feb 2006 17:22:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Feb 2006 17:22:46 -0000
Received: (qmail 33417 invoked by uid 500); 15 Feb 2006 17:22:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 33387 invoked by uid 500); 15 Feb 2006 17:22:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 33377 invoked by uid 99); 15 Feb 2006 17:22:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 09:22:45 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.115.57.32] (HELO ylpvm01.prodigy.net) (207.115.57.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 09:22:44 -0800
Received: from pimout5-ext.prodigy.net (pimout5-int.prodigy.net
 [207.115.4.21])
	by ylpvm01.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id
 k1FHMNa5014780
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Feb 2006 12:22:24 -0500
X-ORBL: [69.228.231.148]
Received: from [192.168.168.15] (adsl-69-228-231-148.dsl.pltn13.pacbell.net
 [69.228.231.148])
	by pimout5-ext.prodigy.net (8.13.4 outbound domainkey aix/8.13.4) with ESMTP
 id k1FHMB1A062928;
	Wed, 15 Feb 2006 12:22:16 -0500
Message-ID: <43F36342.8080903@apache.org>
Date: Wed, 15 Feb 2006 09:22:10 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: Adding MapperBase and ReduceBase
References: <fe16018e45d03152c6b843508a40ea31@yahoo-inc.com>
 <43ECDB64.7020801@apache.org>
 <090f911c7d6559baac38e7c7c8fdaded@yahoo-inc.com>
In-Reply-To: <090f911c7d6559baac38e7c7c8fdaded@yahoo-inc.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Owen O'Malley wrote:
> Is the Closable interface useful?

On further thought, I think a Closeable interface is very useful.  The 
need for a close() method comes up in many interfaces.  For example, 
this just came up in Nutch:

http://issues.apache.org/jira/browse/NUTCH-211

I also just noticed that a Closeable interface has been added to Java 
1.5.  So let's move Closeable to org.apache.hadoop.io, with a note that 
it should be replaced by java.io.Closeable when we move the Java 1.5, okay?

Doug

From MAILER-DAEMON Wed Feb 15 18:55:34 2006
Return-Path: 
 <hadoop-dev-return-161-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 36298 invoked from network); 15 Feb 2006 18:55:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Feb 2006 18:55:34 -0000
Received: (qmail 47042 invoked by uid 500); 15 Feb 2006 18:55:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47016 invoked by uid 500); 15 Feb 2006 18:55:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46992 invoked by uid 99); 15 Feb 2006 18:55:33 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 10:55:30 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id CB781DE
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Feb 2006 19:55:09 +0100 (CET)
Message-ID: <155833505.1140029709831.JavaMail.jira@ajax.apache.org>
Date: Wed, 15 Feb 2006 19:55:09 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-38) default splitter should incorporate fs
 block size
In-Reply-To: <1089400937.1139945203207.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-38?page=all ]
     
Doug Cutting resolved HADOOP-38:
--------------------------------

    Resolution: Fixed

I just committed this.

> default splitter should incorporate fs block size
> -------------------------------------------------
>
>          Key: HADOOP-38
>          URL: http://issues.apache.org/jira/browse/HADOOP-38
>      Project: Hadoop
>         Type: Improvement
>   Components: mapred
>     Reporter: Doug Cutting

>
> By default, the file splitting code should operate as follows.
>   inputs are <file>*, numMapTasks, minSplitSize, fsBlockSize
>   output is <file,start,length>*
>   totalSize = sum of all file sizes;
>   desiredSplitSize = totalSize / numMapTasks;
>   if (desiredSplitSize > fsBlockSize)             /* new */
>     desiredSplitSize = fsBlockSize;
>   if (desiredSplitSize < minSplitSize)
>     desiredSplitSize = minSplitSize;
>   chop input files into desiredSplitSize chunks & return them
> In other words, the numMapTasks is a desired minimum.  We'll try to chop input into at least numMapTasks chunks, each ideally a single fs block.
> If there's not enough input data to create numMapTasks tasks, each with an entire block, then we'll permit tasks whose input is smaller than a filesystem block, down to a minimum split size.
> This handles cases where:
>   - each input record takes a lot of time to process.  In this case we want to make sure we use all of the cluster.  Thus it is important to permit splits smaller than the fs block size.
>   - input i/o dominates.  In this case we want to permit the placement of tasks on hosts where their data is local.  This is only possible if splits are fs block size or smaller.
> Are there other common cases that this algorithm does not handle well?
> The part marked 'new' above is not currently implemented, but I'd like to add it.
> Does this sound reasonble?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Feb 15 22:04:32 2006
Return-Path: 
 <hadoop-dev-return-162-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 64659 invoked from network); 15 Feb 2006 22:04:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Feb 2006 22:04:32 -0000
Received: (qmail 94479 invoked by uid 500); 15 Feb 2006 22:04:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94462 invoked by uid 500); 15 Feb 2006 22:04:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94453 invoked by uid 99); 15 Feb 2006 22:04:31 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 14:04:30 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 95D7EDD
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Feb 2006 23:04:09 +0100 (CET)
Message-ID: <1966502173.1140041049611.JavaMail.jira@ajax.apache.org>
Date: Wed, 15 Feb 2006 23:04:09 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-36) Adding some uniformity/convenience to
 environment management
In-Reply-To: <630345415.1139861112665.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-36?page=all ]
     
Doug Cutting resolved HADOOP-36:
--------------------------------

    Resolution: Fixed

I just committed fixes for most of this.  The slaves and environment variables are now read from the conf directory.  If there are further elements you'd like to see, please submit them as separate bugs.

> Adding some uniformity/convenience to environment management
> ------------------------------------------------------------
>
>          Key: HADOOP-36
>          URL: http://issues.apache.org/jira/browse/HADOOP-36
>      Project: Hadoop
>         Type: Improvement
>   Components: conf
>     Reporter: Bryan Pendleton

>
> Currently, "slaves" are loaded from ~/.slaves. What would be better would be to default from something like conf/hadoop-slaves
> Perhaps split slaves, having a different set for "datanodes" vs. "tasktracker" nodes. ie, conf/hadoop-slaves-tasktracker, conf/hadoop-slaves-datanodes, or some similar split. There's the possibility it's worth building in the assumption that tasktracker is a superset, and thus implicitly includes datanodes, but this might be a bad assumption.
> Also, make sure all scripts source something like conf/hadoop-env.sh. Thus, the user can edit hadoop-env.sh to specify JAVA_HOME, or an alternate HADOOP_SLAVES location. It would also be desirable to have a seed CLASSPATH here. Possibly name it HADOOP_CLASSPATH, to make it explicit and not make hadoop scripts possibly interact with an otherwise-set system CLASSPATH variable.
> These changes would probably be useful to the nutch project, too.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Feb 15 22:21:36 2006
Return-Path: 
 <hadoop-dev-return-163-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77289 invoked from network); 15 Feb 2006 22:21:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Feb 2006 22:21:36 -0000
Received: (qmail 26254 invoked by uid 500); 15 Feb 2006 22:21:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26239 invoked by uid 500); 15 Feb 2006 22:21:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26230 invoked by uid 99); 15 Feb 2006 22:21:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 14:21:36 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of bpendleton@gmail.com designates
 64.233.184.193 as permitted sender)
Received: from [64.233.184.193] (HELO wproxy.gmail.com) (64.233.184.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 14:21:34 -0800
Received: by wproxy.gmail.com with SMTP id 57so33402wri
        for <hadoop-dev@lucene.apache.org>;
 Wed, 15 Feb 2006 14:21:11 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references;
        b=eTtVr6fR7sMPTs+G7G+VtISoS7Hz9S+AW4NoTJdAC0uAvB9Ir2xgXH0xAWRna975WbLgty3oJX4nVhRwNqvTC5FBvVsI0kbDp/gpJKXRceRg41rxfg0iIiYJ+65/EfUuxUZTGpn2EDyJ8VJIv4RFp5pVZWrROobfRoHIQNiraQ8=
Received: by 10.65.224.6 with SMTP id b6mr162299qbr;
        Wed, 15 Feb 2006 14:21:11 -0800 (PST)
Received: by 10.65.232.5 with HTTP; Wed, 15 Feb 2006 14:21:11 -0800 (PST)
Message-ID: <1bf79d3e0602151421n3ed41c6bh584a083e10ec32b0@mail.gmail.com>
Date: Wed, 15 Feb 2006 14:21:11 -0800
From: "Bryan A. Pendleton" <bp@geekdom.net>
Sender: bpendleton@gmail.com
To: hadoop-dev@lucene.apache.org
Subject: Re: [jira] Resolved: (HADOOP-36) Adding some uniformity/convenience
 to environment management
In-Reply-To: <1966502173.1140041049611.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_Part_7034_13052442.1140042071144"
References: <630345415.1139861112665.JavaMail.jira@ajax.apache.org>
	 <1966502173.1140041049611.JavaMail.jira@ajax.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_7034_13052442.1140042071144
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

TG9va3MgbGlrZSBnb29kIGNoYW5nZXMuIEknbSBnb2luZyB0byBoYXZlIHRvIHRoaW5rIGFib3V0
IGhvdyB0byBhZGQgbXkKImRhdGFub2RlcyBvbmx5IiB0cmljayBpbiwgYnV0IHRoaXMgaXMgYSBn
cmVhdCBpbXByb3ZlbWVudCBhcyBpcy4gVGhhbmtzIQoKT24gMi8xNS8wNiwgRG91ZyBDdXR0aW5n
IChKSVJBKSA8amlyYUBhcGFjaGUub3JnPiB3cm90ZToKPgo+ICAgICAgWyBodHRwOi8vaXNzdWVz
LmFwYWNoZS5vcmcvamlyYS9icm93c2UvSEFET09QLTM2P3BhZ2U9YWxsIF0KPgo+IERvdWcgQ3V0
dGluZyByZXNvbHZlZCBIQURPT1AtMzY6Cj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0KPgo+ICAgICBSZXNvbHV0aW9uOiBGaXhlZAo+Cj4gSSBqdXN0IGNvbW1pdHRlZCBmaXhlcyBm
b3IgbW9zdCBvZiB0aGlzLiAgVGhlIHNsYXZlcyBhbmQgZW52aXJvbm1lbnQKPiB2YXJpYWJsZXMg
YXJlIG5vdyByZWFkIGZyb20gdGhlIGNvbmYgZGlyZWN0b3J5LiAgSWYgdGhlcmUgYXJlIGZ1cnRo
ZXIKPiBlbGVtZW50cyB5b3UnZCBsaWtlIHRvIHNlZSwgcGxlYXNlIHN1Ym1pdCB0aGVtIGFzIHNl
cGFyYXRlIGJ1Z3MuCj4KPiA+IEFkZGluZyBzb21lIHVuaWZvcm1pdHkvY29udmVuaWVuY2UgdG8g
ZW52aXJvbm1lbnQgbWFuYWdlbWVudAo+ID4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gPgo+ID4gICAgICAgICAgS2V5OiBIQURP
T1AtMzYKPiA+ICAgICAgICAgIFVSTDogaHR0cDovL2lzc3Vlcy5hcGFjaGUub3JnL2ppcmEvYnJv
d3NlL0hBRE9PUC0zNgo+ID4gICAgICBQcm9qZWN0OiBIYWRvb3AKPiA+ICAgICAgICAgVHlwZTog
SW1wcm92ZW1lbnQKPiA+ICAgQ29tcG9uZW50czogY29uZgo+ID4gICAgIFJlcG9ydGVyOiBCcnlh
biBQZW5kbGV0b24KPgo+ID4KPiA+IEN1cnJlbnRseSwgInNsYXZlcyIgYXJlIGxvYWRlZCBmcm9t
IH4vLnNsYXZlcy4gV2hhdCB3b3VsZCBiZSBiZXR0ZXIKPiB3b3VsZCBiZSB0byBkZWZhdWx0IGZy
b20gc29tZXRoaW5nIGxpa2UgY29uZi9oYWRvb3Atc2xhdmVzCj4gPiBQZXJoYXBzIHNwbGl0IHNs
YXZlcywgaGF2aW5nIGEgZGlmZmVyZW50IHNldCBmb3IgImRhdGFub2RlcyIgdnMuCj4gInRhc2t0
cmFja2VyIiBub2Rlcy4gaWUsIGNvbmYvaGFkb29wLXNsYXZlcy10YXNrdHJhY2tlciwKPiBjb25m
L2hhZG9vcC1zbGF2ZXMtZGF0YW5vZGVzLCBvciBzb21lIHNpbWlsYXIgc3BsaXQuIFRoZXJlJ3Mg
dGhlIHBvc3NpYmlsaXR5Cj4gaXQncyB3b3J0aCBidWlsZGluZyBpbiB0aGUgYXNzdW1wdGlvbiB0
aGF0IHRhc2t0cmFja2VyIGlzIGEgc3VwZXJzZXQsIGFuZAo+IHRodXMgaW1wbGljaXRseSBpbmNs
dWRlcyBkYXRhbm9kZXMsIGJ1dCB0aGlzIG1pZ2h0IGJlIGEgYmFkIGFzc3VtcHRpb24uCj4gPiBB
bHNvLCBtYWtlIHN1cmUgYWxsIHNjcmlwdHMgc291cmNlIHNvbWV0aGluZyBsaWtlIGNvbmYvaGFk
b29wLWVudi5zaC4KPiBUaHVzLCB0aGUgdXNlciBjYW4gZWRpdCBoYWRvb3AtZW52LnNoIHRvIHNw
ZWNpZnkgSkFWQV9IT01FLCBvciBhbgo+IGFsdGVybmF0ZSBIQURPT1BfU0xBVkVTIGxvY2F0aW9u
LiBJdCB3b3VsZCBhbHNvIGJlIGRlc2lyYWJsZSB0byBoYXZlIGEgc2VlZAo+IENMQVNTUEFUSCBo
ZXJlLiBQb3NzaWJseSBuYW1lIGl0IEhBRE9PUF9DTEFTU1BBVEgsIHRvIG1ha2UgaXQgZXhwbGlj
aXQgYW5kCj4gbm90IG1ha2UgaGFkb29wIHNjcmlwdHMgcG9zc2libHkgaW50ZXJhY3Qgd2l0aCBh
biBvdGhlcndpc2Utc2V0IHN5c3RlbQo+IENMQVNTUEFUSCB2YXJpYWJsZS4KPiA+IFRoZXNlIGNo
YW5nZXMgd291bGQgcHJvYmFibHkgYmUgdXNlZnVsIHRvIHRoZSBudXRjaCBwcm9qZWN0LCB0b28u
Cj4KPiAtLQo+IFRoaXMgbWVzc2FnZSBpcyBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZCBieSBKSVJB
Lgo+IC0KPiBJZiB5b3UgdGhpbmsgaXQgd2FzIHNlbnQgaW5jb3JyZWN0bHkgY29udGFjdCBvbmUg
b2YgdGhlIGFkbWluaXN0cmF0b3JzOgo+ICAgIGh0dHA6Ly9pc3N1ZXMuYXBhY2hlLm9yZy9qaXJh
L3NlY3VyZS9BZG1pbmlzdHJhdG9ycy5qc3BhCj4gLQo+IEZvciBtb3JlIGluZm9ybWF0aW9uIG9u
IEpJUkEsIHNlZToKPiAgICBodHRwOi8vd3d3LmF0bGFzc2lhbi5jb20vc29mdHdhcmUvamlyYQo+
Cj4KCgotLQpCcnlhbiBBLiBQZW5kbGV0b24KUGg6ICg4NzcpIGdlZWstMS1icAo=
------=_Part_7034_13052442.1140042071144--

From MAILER-DAEMON Thu Feb 16 01:02:06 2006
Return-Path: 
 <hadoop-dev-return-164-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 58175 invoked from network); 16 Feb 2006 01:02:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Feb 2006 01:02:06 -0000
Received: (qmail 93230 invoked by uid 500); 16 Feb 2006 01:02:06 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 93205 invoked by uid 500); 16 Feb 2006 01:02:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 93194 invoked by uid 99); 16 Feb 2006 01:02:05 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 17:02:05 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id A79C2DD
	for <hadoop-dev@lucene.apache.org>; Thu, 16 Feb 2006 02:01:44 +0100 (CET)
Message-ID: <2079824794.1140051704684.JavaMail.jira@ajax.apache.org>
Date: Thu, 16 Feb 2006 02:01:44 +0100 (CET)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-39) Job killed when backup tasks fail
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Job killed when backup tasks fail
---------------------------------

         Key: HADOOP-39
         URL: http://issues.apache.org/jira/browse/HADOOP-39
     Project: Hadoop
        Type: Bug
  Components: mapred  
    Reporter: Owen O'Malley


I had a map job with side effects that meant that any speculative tasks would fail.

Currently, the job tracker kills the job when the speculative task fails 4 times.

It would be better to stop scheduling speculative tasks for that fragment, but let the job continue as long as one of the the instances of that fragment continue to run.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Feb 16 18:50:34 2006
Return-Path: 
 <hadoop-dev-return-165-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8863 invoked from network); 16 Feb 2006 18:50:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Feb 2006 18:50:34 -0000
Received: (qmail 24242 invoked by uid 500); 16 Feb 2006 18:50:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24218 invoked by uid 500); 16 Feb 2006 18:50:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24209 invoked by uid 99); 16 Feb 2006 18:50:33 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 10:50:30 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id B8B27DC
	for <hadoop-dev@lucene.apache.org>; Thu, 16 Feb 2006 19:50:09 +0100 (CET)
Message-ID: <1385546648.1140115809683.JavaMail.jira@ajax.apache.org>
Date: Thu, 16 Feb 2006 19:50:09 +0100 (CET)
From: "Bryan Pendleton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-16) RPC call times out while indexing map
 task is computing splits
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-16?page=comments#action_12366659 ] 

Bryan Pendleton commented on HADOOP-16:
---------------------------------------

I'm not sure this patch does quite what's desired.

It looks like before it would try as hard as possible to find a task with a cache hit, then fail to running either just the first executable task. Now, it will search for the first task that's either a cache hit *or* executable..... In principle, wouldn't you only want to break out of the loop for finding a cache hit? This, of course, still causes timeouts - is there any way to actually precompute the list of cache hits, so that it's just a matter of picking a task from a priority queue?

> RPC call times out while indexing map task is computing splits
> --------------------------------------------------------------
>
>          Key: HADOOP-16
>          URL: http://issues.apache.org/jira/browse/HADOOP-16
>      Project: Hadoop
>         Type: Bug
>   Components: mapred
>  Environment: MapReduce multi-computer crawl environment: 11 machines (1 master with JobTracker/NameNode, 10 slaves with TaskTrackers/DataNodes)
>     Reporter: Chris Schneider
>  Attachments: patch.16
>
> We've been using Nutch 0.8 (MapReduce) to perform some internet crawling. Things seemed to be going well until...
> 060129 222409 Lost tracker 'tracker_56288'
> 060129 222409 Task 'task_m_10gs5f' has been lost.
> 060129 222409 Task 'task_m_10qhzr' has been lost.
>    ........
>    ........
> 060129 222409 Task 'task_r_zggbwu' has been lost.
> 060129 222409 Task 'task_r_zh8dao' has been lost.
> 060129 222455 Server handler 8 on 8010 caught: java.net.SocketException: Socket closed
> java.net.SocketException: Socket closed
>         at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:99)
>         at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
>         at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
>         at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
>         at java.io.DataOutputStream.flush(DataOutputStream.java:106)
>         at org.apache.nutch.ipc.Server$Handler.run(Server.java:216)
> 060129 222455 Adding task 'task_m_cia5po' to set for tracker 'tracker_56288'
> 060129 223711 Adding task 'task_m_ffv59i' to set for tracker 'tracker_25647'
> I'm hoping that someone could explain why task_m_cia5po got added to tracker_56288 after this tracker was lost.
> The Crawl .main process died with the following output:
> 060129 221129 Indexer: adding segment: /user/crawler/crawl-20060129091444/segments/20060129200246
> Exception in thread "main" java.io.IOException: timed out waiting for response
>     at org.apache.nutch.ipc.Client.call(Client.java:296)
>     at org.apache.nutch.ipc.RPC$Invoker.invoke(RPC.java:127)
>     at $Proxy1.submitJob(Unknown Source)
>     at org.apache.nutch.mapred.JobClient.submitJob(JobClient.java:259)
>     at org.apache.nutch.mapred.JobClient.runJob(JobClient.java:288)
>     at org.apache.nutch.indexer.Indexer.index(Indexer.java:263)
>     at org.apache.nutch.crawl.Crawl.main(Crawl.java:127)
> However, it definitely seems as if the JobTracker is still waiting for the job to finish (no failed jobs).
> Doug Cutting's response:
> The bug here is that the RPC call times out while the map task is computing splits.  The fix is that the job tracker should not compute splits until after it has returned from the submitJob RPC.  Please submit a bug in Jira to help remind us to fix this.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Feb 16 18:52:40 2006
Return-Path: 
 <hadoop-dev-return-166-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10204 invoked from network); 16 Feb 2006 18:52:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Feb 2006 18:52:40 -0000
Received: (qmail 30095 invoked by uid 500); 16 Feb 2006 18:52:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 30063 invoked by uid 500); 16 Feb 2006 18:52:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 30045 invoked by uid 99); 16 Feb 2006 18:52:32 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 10:52:30 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 68A48DC
	for <hadoop-dev@lucene.apache.org>; Thu, 16 Feb 2006 19:52:09 +0100 (CET)
Message-ID: <136268986.1140115929402.JavaMail.jira@ajax.apache.org>
Date: Thu, 16 Feb 2006 19:52:09 +0100 (CET)
From: "Bryan Pendleton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-16) RPC call times out while indexing map
 task is computing splits
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-16?page=comments#action_12366660 ] 

Bryan Pendleton commented on HADOOP-16:
---------------------------------------

Of course, given the existing code, maybe it's worth trying a little harder - iterate through the list as before, but keep track of the time that's been taken, and give up if it gets to 1/2 of the RPC timeout, or something of the like.

> RPC call times out while indexing map task is computing splits
> --------------------------------------------------------------
>
>          Key: HADOOP-16
>          URL: http://issues.apache.org/jira/browse/HADOOP-16
>      Project: Hadoop
>         Type: Bug
>   Components: mapred
>  Environment: MapReduce multi-computer crawl environment: 11 machines (1 master with JobTracker/NameNode, 10 slaves with TaskTrackers/DataNodes)
>     Reporter: Chris Schneider
>  Attachments: patch.16
>
> We've been using Nutch 0.8 (MapReduce) to perform some internet crawling. Things seemed to be going well until...
> 060129 222409 Lost tracker 'tracker_56288'
> 060129 222409 Task 'task_m_10gs5f' has been lost.
> 060129 222409 Task 'task_m_10qhzr' has been lost.
>    ........
>    ........
> 060129 222409 Task 'task_r_zggbwu' has been lost.
> 060129 222409 Task 'task_r_zh8dao' has been lost.
> 060129 222455 Server handler 8 on 8010 caught: java.net.SocketException: Socket closed
> java.net.SocketException: Socket closed
>         at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:99)
>         at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
>         at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
>         at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
>         at java.io.DataOutputStream.flush(DataOutputStream.java:106)
>         at org.apache.nutch.ipc.Server$Handler.run(Server.java:216)
> 060129 222455 Adding task 'task_m_cia5po' to set for tracker 'tracker_56288'
> 060129 223711 Adding task 'task_m_ffv59i' to set for tracker 'tracker_25647'
> I'm hoping that someone could explain why task_m_cia5po got added to tracker_56288 after this tracker was lost.
> The Crawl .main process died with the following output:
> 060129 221129 Indexer: adding segment: /user/crawler/crawl-20060129091444/segments/20060129200246
> Exception in thread "main" java.io.IOException: timed out waiting for response
>     at org.apache.nutch.ipc.Client.call(Client.java:296)
>     at org.apache.nutch.ipc.RPC$Invoker.invoke(RPC.java:127)
>     at $Proxy1.submitJob(Unknown Source)
>     at org.apache.nutch.mapred.JobClient.submitJob(JobClient.java:259)
>     at org.apache.nutch.mapred.JobClient.runJob(JobClient.java:288)
>     at org.apache.nutch.indexer.Indexer.index(Indexer.java:263)
>     at org.apache.nutch.crawl.Crawl.main(Crawl.java:127)
> However, it definitely seems as if the JobTracker is still waiting for the job to finish (no failed jobs).
> Doug Cutting's response:
> The bug here is that the RPC call times out while the map task is computing splits.  The fix is that the job tracker should not compute splits until after it has returned from the submitJob RPC.  Please submit a bug in Jira to help remind us to fix this.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Feb 16 20:35:34 2006
Return-Path: 
 <hadoop-dev-return-167-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 82494 invoked from network); 16 Feb 2006 20:35:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Feb 2006 20:35:34 -0000
Received: (qmail 26327 invoked by uid 500); 16 Feb 2006 20:35:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26048 invoked by uid 500); 16 Feb 2006 20:35:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26030 invoked by uid 99); 16 Feb 2006 20:35:32 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 12:35:30 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 059BEDD
	for <hadoop-dev@lucene.apache.org>; Thu, 16 Feb 2006 21:35:10 +0100 (CET)
Message-ID: <365863915.1140122110021.JavaMail.jira@ajax.apache.org>
Date: Thu, 16 Feb 2006 21:35:10 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-39) Job killed when backup tasks fail
In-Reply-To: <2079824794.1140051704684.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-39?page=comments#action_12366674 ] 

Doug Cutting commented on HADOOP-39:
------------------------------------

The point is to try to get map tasks with side effects to sometimes succeed, even with speculative execution?  That sounds like it could be a bad idea.  Wouldn't it be better to have map tasks with side effects fail more frequently with speculative execution, so that you find such problems sooner, with smaller datasets on a smaller cluster, before you try a big run?  Or am I misunderstanding you?

> Job killed when backup tasks fail
> ---------------------------------
>
>          Key: HADOOP-39
>          URL: http://issues.apache.org/jira/browse/HADOOP-39
>      Project: Hadoop
>         Type: Bug
>   Components: mapred
>     Reporter: Owen O'Malley

>
> I had a map job with side effects that meant that any speculative tasks would fail.
> Currently, the job tracker kills the job when the speculative task fails 4 times.
> It would be better to stop scheduling speculative tasks for that fragment, but let the job continue as long as one of the the instances of that fragment continue to run.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Feb 16 21:00:44 2006
Return-Path: 
 <hadoop-dev-return-168-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 95226 invoked from network); 16 Feb 2006 21:00:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Feb 2006 21:00:44 -0000
Received: (qmail 76810 invoked by uid 500); 16 Feb 2006 21:00:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 76793 invoked by uid 500); 16 Feb 2006 21:00:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 76766 invoked by uid 99); 16 Feb 2006 21:00:31 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 13:00:31 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id F02AEDC
	for <hadoop-dev@lucene.apache.org>; Thu, 16 Feb 2006 22:00:09 +0100 (CET)
Message-ID: <923502646.1140123609839.JavaMail.jira@ajax.apache.org>
Date: Thu, 16 Feb 2006 22:00:09 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-16) RPC call times out while indexing map
 task is computing splits
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-16?page=comments#action_12366680 ] 

Doug Cutting commented on HADOOP-16:
------------------------------------

But, you're right, Bryan, I think this is still not optimal.  It should certainly check to see if more map tasks have local input data for the calling node before it gives up.  Ideally it should not be iterating through all map tasks either, but rather create a mapping of node -> mapTask* for tasks that have local data for a node.  We could keep a queue of tasks whose entries in this table have not yet been computed.  When we fail to find a task with local data for a node, then we can pop a few (10?) entries off the queue and enter them in the map, and if there are still no matches, just give the node a task with remote input data.  This way we'd avoid ever doing too much work in a single call, and ever iterating over all tasks.

> RPC call times out while indexing map task is computing splits
> --------------------------------------------------------------
>
>          Key: HADOOP-16
>          URL: http://issues.apache.org/jira/browse/HADOOP-16
>      Project: Hadoop
>         Type: Bug
>   Components: mapred
>  Environment: MapReduce multi-computer crawl environment: 11 machines (1 master with JobTracker/NameNode, 10 slaves with TaskTrackers/DataNodes)
>     Reporter: Chris Schneider
>  Attachments: patch.16
>
> We've been using Nutch 0.8 (MapReduce) to perform some internet crawling. Things seemed to be going well until...
> 060129 222409 Lost tracker 'tracker_56288'
> 060129 222409 Task 'task_m_10gs5f' has been lost.
> 060129 222409 Task 'task_m_10qhzr' has been lost.
>    ........
>    ........
> 060129 222409 Task 'task_r_zggbwu' has been lost.
> 060129 222409 Task 'task_r_zh8dao' has been lost.
> 060129 222455 Server handler 8 on 8010 caught: java.net.SocketException: Socket closed
> java.net.SocketException: Socket closed
>         at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:99)
>         at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
>         at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
>         at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
>         at java.io.DataOutputStream.flush(DataOutputStream.java:106)
>         at org.apache.nutch.ipc.Server$Handler.run(Server.java:216)
> 060129 222455 Adding task 'task_m_cia5po' to set for tracker 'tracker_56288'
> 060129 223711 Adding task 'task_m_ffv59i' to set for tracker 'tracker_25647'
> I'm hoping that someone could explain why task_m_cia5po got added to tracker_56288 after this tracker was lost.
> The Crawl .main process died with the following output:
> 060129 221129 Indexer: adding segment: /user/crawler/crawl-20060129091444/segments/20060129200246
> Exception in thread "main" java.io.IOException: timed out waiting for response
>     at org.apache.nutch.ipc.Client.call(Client.java:296)
>     at org.apache.nutch.ipc.RPC$Invoker.invoke(RPC.java:127)
>     at $Proxy1.submitJob(Unknown Source)
>     at org.apache.nutch.mapred.JobClient.submitJob(JobClient.java:259)
>     at org.apache.nutch.mapred.JobClient.runJob(JobClient.java:288)
>     at org.apache.nutch.indexer.Indexer.index(Indexer.java:263)
>     at org.apache.nutch.crawl.Crawl.main(Crawl.java:127)
> However, it definitely seems as if the JobTracker is still waiting for the job to finish (no failed jobs).
> Doug Cutting's response:
> The bug here is that the RPC call times out while the map task is computing splits.  The fix is that the job tracker should not compute splits until after it has returned from the submitJob RPC.  Please submit a bug in Jira to help remind us to fix this.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Feb 16 21:47:14 2006
Return-Path: 
 <hadoop-dev-return-169-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 22679 invoked from network); 16 Feb 2006 21:47:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Feb 2006 21:47:14 -0000
Received: (qmail 4882 invoked by uid 500); 16 Feb 2006 21:47:14 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 4861 invoked by uid 500); 16 Feb 2006 21:47:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 4852 invoked by uid 99); 16 Feb 2006 21:47:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 13:47:14 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.115.57.46] (HELO ylpvm15.prodigy.net) (207.115.57.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 13:47:13 -0800
Received: from pimout7-ext.prodigy.net (pimout7-int.prodigy.net
 [207.115.4.147])
	by ylpvm15.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id
 k1GLl7gV020712
	for <hadoop-dev@lucene.apache.org>; Thu, 16 Feb 2006 16:47:07 -0500
X-ORBL: [69.228.231.148]
Received: from [192.168.168.15] (adsl-69-228-231-148.dsl.pltn13.pacbell.net
 [69.228.231.148])
	by pimout7-ext.prodigy.net (8.13.4 outbound domainkey aix/8.13.4) with ESMTP
 id k1GLkkqm167080;
	Thu, 16 Feb 2006 16:46:48 -0500
Message-ID: <43F4F2C4.3050106@apache.org>
Date: Thu, 16 Feb 2006 13:46:44 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: Lock manager
References: <43F1A92B.8000709@getopt.org>
In-Reply-To: <43F1A92B.8000709@getopt.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Andrzej Bialecki wrote:
> Currently there is no mechanism to coordinate concurrent access to 
> specific resources across the cluster. This is apparent in Nutch in the 
> protocol plugins, which need this "global lock" mechanism to control 
> simultaneous access to remote hosts (at the moment the workaround is to 
> execute just one task simultaneously to handle the locking inside a 
> single JVM).

Central locking sounds like it could quickly become a bottleneck.

Currently what Nutch's fetcher does to observe politeness is to 
partition fetcher input by host, and to disable splitting of fetcher 
input files, so that all urls with a given host are always processed as 
a single task.  Since, for politeness, urls from a host must be 
processed serially, there's no advantage to doing it otherwise: if we 
permitted multiple nodes to synchronize their access to a host through a 
locking mechanism then fetching could go no faster.

So how is the current mechanism inadequate?  What are some use cases for 
centralized locking that cannot be solved by partitioning task input?

Doug

From MAILER-DAEMON Thu Feb 16 22:47:15 2006
Return-Path: 
 <hadoop-dev-return-170-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 54579 invoked from network); 16 Feb 2006 22:47:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Feb 2006 22:47:15 -0000
Received: (qmail 31425 invoked by uid 500); 16 Feb 2006 22:47:15 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 31409 invoked by uid 500); 16 Feb 2006 22:47:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31400 invoked by uid 99); 16 Feb 2006 22:47:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 14:47:14 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates
 64.233.182.206 as permitted sender)
Received: from [64.233.182.206] (HELO nproxy.gmail.com) (64.233.182.206)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 14:47:13 -0800
Received: by nproxy.gmail.com with SMTP id o60so5133nfa
        for <hadoop-dev@lucene.apache.org>;
 Thu, 16 Feb 2006 14:46:52 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=VD4t18Yz0NoL5HsUxz6DNd1yStedCOdefYrtUNnvQpg5ZsNtu7+yYxXIl+hqomCScnIOOa5oxJQPzzxTzzDTs9YdvloIOHqn/hkNaoupD3Pt4YUbW0JW5QcFuuCHFUwC4lV75c3cdz1ibAMqb3k/bifP0YyFBi7Y+kfC1WEKdI0=
Received: by 10.49.68.13 with SMTP id v13mr287240nfk;
        Thu, 16 Feb 2006 14:46:52 -0800 (PST)
Received: by 10.49.93.9 with HTTP; Thu, 16 Feb 2006 14:46:51 -0800 (PST)
Message-ID: <c68e39170602161446k161f52f7k9d2f7a5e01377090@mail.gmail.com>
Date: Thu, 16 Feb 2006 17:46:51 -0500
From: Yonik Seeley <yseeley@gmail.com>
To: hadoop-dev@lucene.apache.org
Subject: hadoop nightly build
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

FYI, the current hadoop nightly cron points to nutch.
http://svn.apache.org/repos/asf/lucene/hadoop/nightly/nightly.cron

The cron job itself must be OK, since the hadoop nightly is being built.

-Yonik

From MAILER-DAEMON Thu Feb 16 22:53:27 2006
Return-Path: 
 <hadoop-dev-return-171-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 59727 invoked from network); 16 Feb 2006 22:53:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Feb 2006 22:53:27 -0000
Received: (qmail 47108 invoked by uid 500); 16 Feb 2006 22:53:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47056 invoked by uid 500); 16 Feb 2006 22:53:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47047 invoked by uid 99); 16 Feb 2006 22:53:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 14:53:26 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.115.57.46] (HELO ylpvm15.prodigy.net) (207.115.57.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 14:53:25 -0800
Received: from pimout7-ext.prodigy.net (pimout7-int.prodigy.net
 [207.115.4.147])
	by ylpvm15.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id
 k1GMrJgV031240
	for <hadoop-dev@lucene.apache.org>; Thu, 16 Feb 2006 17:53:20 -0500
X-ORBL: [69.228.231.148]
Received: from [192.168.168.15] (adsl-69-228-231-148.dsl.pltn13.pacbell.net
 [69.228.231.148])
	by pimout7-ext.prodigy.net (8.13.4 outbound domainkey aix/8.13.4) with ESMTP
 id k1GMr3Wv125380;
	Thu, 16 Feb 2006 17:53:03 -0500
Message-ID: <43F5024E.2060509@apache.org>
Date: Thu, 16 Feb 2006 14:53:02 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: hadoop nightly build
References: <c68e39170602161446k161f52f7k9d2f7a5e01377090@mail.gmail.com>
In-Reply-To: <c68e39170602161446k161f52f7k9d2f7a5e01377090@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks for noticing!  I'll fix that.

My actual crontab is hand-built, since it builds Lucene, Nutch and 
Hadoop.  The bug's not there, only in svn.

Doug

Yonik Seeley wrote:
> FYI, the current hadoop nightly cron points to nutch.
> http://svn.apache.org/repos/asf/lucene/hadoop/nightly/nightly.cron
> 
> The cron job itself must be OK, since the hadoop nightly is being built.
> 
> -Yonik

From MAILER-DAEMON Fri Feb 17 00:07:23 2006
Return-Path: 
 <hadoop-dev-return-172-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 572 invoked from network); 17 Feb 2006 00:07:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Feb 2006 00:07:23 -0000
Received: (qmail 84253 invoked by uid 500); 17 Feb 2006 00:07:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 84177 invoked by uid 500); 17 Feb 2006 00:07:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 84146 invoked by uid 99); 17 Feb 2006 00:07:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 16:07:22 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.122.60.61] (HELO mslinux.media-style.com) (212.122.60.61)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 16:07:21 -0800
Received: from localhost (localhost [127.0.0.1])
	by mslinux.media-style.com (Postfix) with ESMTP id 5EEB614442B
	for <hadoop-dev@lucene.apache.org>; Fri, 17 Feb 2006 01:02:29 +0100 (CET)
Received: from mslinux.media-style.com ([127.0.0.1])
	by localhost (mslinux.media-style.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 29724-08 for <hadoop-dev@lucene.apache.org>;
	Fri, 17 Feb 2006 01:02:29 +0100 (CET)
Received: from [192.168.8.4] (dslb-084-059-216-184.pools.arcor-ip.net
 [84.59.216.184])
	by mslinux.media-style.com (Postfix) with ESMTP id E42D2144423
	for <hadoop-dev@lucene.apache.org>; Fri, 17 Feb 2006 01:02:28 +0100 (CET)
Mime-Version: 1.0 (Apple Message framework v749)
Content-Transfer-Encoding: 7bit
Message-Id: <EF990173-8613-4FB2-A763-3D47B7E3BCDE@media-style.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: hadoop-dev@lucene.apache.org
From: Stefan Groschupf <sg@media-style.com>
Subject: find a tasktracker that process a named task
Date: Fri, 17 Feb 2006 01:06:57 +0100
X-Mailer: Apple Mail (2.749)
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at media-style.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,
this is in my mind since some time.
Since the global locking discussion in the nutch list, I would love  
to inject my thoughts into this list.

First let me give a use case:
We have some nutch index search servers running as MapRunnable tasks.
The problem: how a client that want's to connect to this search  
servers knows all the hosts that runs this runnable and may track  
changes?

Once I had implement a kind of prototype for this use case and done  
it like this:
I had start a rpc server on the search server client side (my tomcat  
host) and all search servers was registering itself there. Than the  
client was using this repository to lookup the search servers.

I think there could be a better more generalized solution.
Is it possible already possible or what are people thinking about  
extending the jobtracker api to query tasktracker that run a named task?
This would be a smarter solution for the described usecase, also  
people would be able to start a map runnable that runs a locking  
service and would be able to connect to that.
However I agree with Doug's point of view that centralized locking  
makes for this specific fetching use case no sense.

Any comments?
Stefan


From MAILER-DAEMON Fri Feb 17 00:14:51 2006
Return-Path: 
 <hadoop-dev-return-173-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 4753 invoked from network); 17 Feb 2006 00:14:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Feb 2006 00:14:51 -0000
Received: (qmail 89578 invoked by uid 500); 17 Feb 2006 00:14:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 89561 invoked by uid 500); 17 Feb 2006 00:14:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 89552 invoked by uid 99); 17 Feb 2006 00:14:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 16:14:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.115.57.46] (HELO ylpvm15.prodigy.net) (207.115.57.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 16:14:50 -0800
Received: from pimout7-ext.prodigy.net (pimout7-int.prodigy.net
 [207.115.4.147])
	by ylpvm15.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id
 k1H0EigV013512
	for <hadoop-dev@lucene.apache.org>; Thu, 16 Feb 2006 19:14:44 -0500
X-ORBL: [69.228.231.148]
Received: from [192.168.168.15] (adsl-69-228-231-148.dsl.pltn13.pacbell.net
 [69.228.231.148])
	by pimout7-ext.prodigy.net (8.13.4 outbound domainkey aix/8.13.4) with ESMTP
 id k1H0ELAo206328;
	Thu, 16 Feb 2006 19:14:26 -0500
Message-ID: <43F5155D.30702@apache.org>
Date: Thu, 16 Feb 2006 16:14:21 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: find a tasktracker that process a named task
References: <EF990173-8613-4FB2-A763-3D47B7E3BCDE@media-style.com>
In-Reply-To: <EF990173-8613-4FB2-A763-3D47B7E3BCDE@media-style.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Stefan Groschupf wrote:
> First let me give a use case:
> We have some nutch index search servers running as MapRunnable tasks.
> The problem: how a client that want's to connect to this search  servers 
> knows all the hosts that runs this runnable and may track  changes?

Here's a hack I've contemplated: you can call setStatus() with the 
host:port, then use JobSubmissionProtocol.getMapTaskReports() to 
retrieve all of the status strings.  Voila.

Doug

From MAILER-DAEMON Fri Feb 17 00:26:54 2006
Return-Path: 
 <hadoop-dev-return-174-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 19022 invoked from network); 17 Feb 2006 00:26:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Feb 2006 00:26:54 -0000
Received: (qmail 22488 invoked by uid 500); 17 Feb 2006 00:26:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 22469 invoked by uid 500); 17 Feb 2006 00:26:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22460 invoked by uid 99); 17 Feb 2006 00:26:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 16:26:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.122.60.61] (HELO mslinux.media-style.com) (212.122.60.61)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 16:26:52 -0800
Received: from localhost (localhost [127.0.0.1])
	by mslinux.media-style.com (Postfix) with ESMTP id 3CE2714442B
	for <hadoop-dev@lucene.apache.org>; Fri, 17 Feb 2006 01:22:00 +0100 (CET)
Received: from mslinux.media-style.com ([127.0.0.1])
	by localhost (mslinux.media-style.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 29798-09 for <hadoop-dev@lucene.apache.org>;
	Fri, 17 Feb 2006 01:22:00 +0100 (CET)
Received: from [192.168.8.4] (dslb-084-059-216-184.pools.arcor-ip.net
 [84.59.216.184])
	by mslinux.media-style.com (Postfix) with ESMTP id C189A144424
	for <hadoop-dev@lucene.apache.org>; Fri, 17 Feb 2006 01:21:59 +0100 (CET)
Mime-Version: 1.0 (Apple Message framework v749)
In-Reply-To: <43F5155D.30702@apache.org>
References: <EF990173-8613-4FB2-A763-3D47B7E3BCDE@media-style.com>
 <43F5155D.30702@apache.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <C15D6552-B167-461E-85FE-60606A7B039B@media-style.com>
Content-Transfer-Encoding: 7bit
From: Stefan Groschupf <sg@media-style.com>
Subject: Re: find a tasktracker that process a named task
Date: Fri, 17 Feb 2006 01:26:28 +0100
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.749)
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at media-style.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks, that is a cool idea. Would it still possible provide status  
information like number of queries a search server actually process?
I don't think so since there is only one status and no status  
protocol, right?. Using status for things like load messages can help  
to decide if it make sense to start more search server automatically  
in high load times.
But may this can also handled by the search server client. I will add  
this to my todo list and try it out.:)

Stefan

Am 17.02.2006 um 01:14 schrieb Doug Cutting:

> Stefan Groschupf wrote:
>> First let me give a use case:
>> We have some nutch index search servers running as MapRunnable tasks.
>> The problem: how a client that want's to connect to this search   
>> servers knows all the hosts that runs this runnable and may track   
>> changes?
>
> Here's a hack I've contemplated: you can call setStatus() with the  
> host:port, then use JobSubmissionProtocol.getMapTaskReports() to  
> retrieve all of the status strings.  Voila.
>
> Doug
>

---------------------------------------------
George Orwel was an Optimist
blog: http://www.find23.org
company: http://www.media-style.com



From MAILER-DAEMON Fri Feb 17 22:44:13 2006
Return-Path: 
 <hadoop-dev-return-175-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93207 invoked from network); 17 Feb 2006 22:44:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Feb 2006 22:44:13 -0000
Received: (qmail 34295 invoked by uid 500); 17 Feb 2006 22:44:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 34269 invoked by uid 500); 17 Feb 2006 22:44:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 34257 invoked by uid 99); 17 Feb 2006 22:44:12 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Feb 2006 14:44:12 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 6A891DD
	for <hadoop-dev@lucene.apache.org>; Fri, 17 Feb 2006 23:43:51 +0100 (CET)
Message-ID: <1308650132.1140216231434.JavaMail.jira@ajax.apache.org>
Date: Fri, 17 Feb 2006 23:43:51 +0100 (CET)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-40) bufferSize argument is ignored in
 FileSystem.create(File, boolean, int)
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

bufferSize argument is ignored in FileSystem.create(File, boolean, int)
-----------------------------------------------------------------------

         Key: HADOOP-40
         URL: http://issues.apache.org/jira/browse/HADOOP-40
     Project: Hadoop
        Type: Bug
  Components: fs  
    Reporter: Konstantin Shvachko
    Priority: Minor


org.apache.hadoop.fs.FileSystem.create(File f, boolean overwrite, int bufferSize)

ignores the input parameter bufferSize.
It passes further down the internal configuration, which includes the buffer size, but not the parameter value.
This works fine within the file system, since everything that calls create extracts buffer size from the same config. 
MapReduce although is probably affected by that, see 

org.apache.hadoop.io.SequenceFile.Sorter.MergeQueue.MergeQueue(int size, String outName, boolean done)

The attached patch would fix it.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Feb 17 22:45:50 2006
Return-Path: 
 <hadoop-dev-return-176-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93841 invoked from network); 17 Feb 2006 22:45:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Feb 2006 22:45:50 -0000
Received: (qmail 37696 invoked by uid 500); 17 Feb 2006 22:45:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 37682 invoked by uid 500); 17 Feb 2006 22:45:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 37673 invoked by uid 99); 17 Feb 2006 22:45:50 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Feb 2006 14:45:48 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 6F7D6DD
	for <hadoop-dev@lucene.apache.org>; Fri, 17 Feb 2006 23:45:26 +0100 (CET)
Message-ID: <488690456.1140216326454.JavaMail.jira@ajax.apache.org>
Date: Fri, 17 Feb 2006 23:45:26 +0100 (CET)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-40) bufferSize argument is ignored in
 FileSystem.create(File, boolean, int)
In-Reply-To: <1308650132.1140216231434.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-40?page=all ]

Konstantin Shvachko updated HADOOP-40:
--------------------------------------

    Attachment: BufferSize.patch

> bufferSize argument is ignored in FileSystem.create(File, boolean, int)
> -----------------------------------------------------------------------
>
>          Key: HADOOP-40
>          URL: http://issues.apache.org/jira/browse/HADOOP-40
>      Project: Hadoop
>         Type: Bug
>   Components: fs
>     Reporter: Konstantin Shvachko
>     Priority: Minor
>  Attachments: BufferSize.patch
>
> org.apache.hadoop.fs.FileSystem.create(File f, boolean overwrite, int bufferSize)
> ignores the input parameter bufferSize.
> It passes further down the internal configuration, which includes the buffer size, but not the parameter value.
> This works fine within the file system, since everything that calls create extracts buffer size from the same config. 
> MapReduce although is probably affected by that, see 
> org.apache.hadoop.io.SequenceFile.Sorter.MergeQueue.MergeQueue(int size, String outName, boolean done)
> The attached patch would fix it.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Sat Feb 18 00:48:48 2006
Return-Path: 
 <hadoop-dev-return-177-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 48613 invoked from network); 18 Feb 2006 00:48:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Feb 2006 00:48:48 -0000
Received: (qmail 68603 invoked by uid 500); 18 Feb 2006 00:48:48 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68549 invoked by uid 500); 18 Feb 2006 00:48:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68540 invoked by uid 99); 18 Feb 2006 00:48:47 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Feb 2006 16:48:45 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 5FF91DC
	for <hadoop-dev@lucene.apache.org>; Sat, 18 Feb 2006 01:48:24 +0100 (CET)
Message-ID: <1940627377.1140223704366.JavaMail.jira@ajax.apache.org>
Date: Sat, 18 Feb 2006 01:48:24 +0100 (CET)
From: "stack@archive.org (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-41) JAVA_OPTS for the TaskRunner Child
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

JAVA_OPTS for the TaskRunner Child
----------------------------------

         Key: HADOOP-41
         URL: http://issues.apache.org/jira/browse/HADOOP-41
     Project: Hadoop
        Type: Improvement
  Components: conf  
    Reporter: stack@archive.org
    Priority: Minor


Currently, its possible to set the java heap size the TaskRunner child runs in, but thats all thats configurable about the child process.  Hereabouts, we've found it useful being able to specify other options for the child JVM, especially when debugging and monitoring long-lived processes.  

Examples of why its useful being able to set options are the child include:

+ Being able to set '-server' option or '-c64'.
+ Passing logging.properties to configure child logging.
+ Enable and capture to file verbose GC logging or start the SUN JVM JMX agent for the child process.  Allows connecting with jconsole to watch long-lived children, their heap and thread usage, and when seemingly hung, take thread dumps.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Sat Feb 18 00:55:49 2006
Return-Path: 
 <hadoop-dev-return-178-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50033 invoked from network); 18 Feb 2006 00:55:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Feb 2006 00:55:49 -0000
Received: (qmail 71263 invoked by uid 500); 18 Feb 2006 00:55:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 71246 invoked by uid 500); 18 Feb 2006 00:55:48 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 71237 invoked by uid 99); 18 Feb 2006 00:55:48 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Feb 2006 16:55:46 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id A44AFDC
	for <hadoop-dev@lucene.apache.org>; Sat, 18 Feb 2006 01:55:25 +0100 (CET)
Message-ID: <1393941233.1140224125610.JavaMail.jira@ajax.apache.org>
Date: Sat, 18 Feb 2006 01:55:25 +0100 (CET)
From: "stack@archive.org (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-41) JAVA_OPTS for the TaskRunner Child
In-Reply-To: <1940627377.1140223704366.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-41?page=all ]

stack@archive.org updated HADOOP-41:
------------------------------------

    Attachment: TaskRunner_child_javaopts.patch

Attached is a suggested patch for TaskRunner that reads a new configuration option, mapred.child.java.opts.  This new configuration subsumes mapred.child.heap.size. Paul Baclace coauthored this patch.

> JAVA_OPTS for the TaskRunner Child
> ----------------------------------
>
>          Key: HADOOP-41
>          URL: http://issues.apache.org/jira/browse/HADOOP-41
>      Project: Hadoop
>         Type: Improvement
>   Components: conf
>     Reporter: stack@archive.org
>     Priority: Minor
>  Attachments: TaskRunner_child_javaopts.patch
>
> Currently, its possible to set the java heap size the TaskRunner child runs in, but thats all thats configurable about the child process.  Hereabouts, we've found it useful being able to specify other options for the child JVM, especially when debugging and monitoring long-lived processes.  
> Examples of why its useful being able to set options are the child include:
> + Being able to set '-server' option or '-c64'.
> + Passing logging.properties to configure child logging.
> + Enable and capture to file verbose GC logging or start the SUN JVM JMX agent for the child process.  Allows connecting with jconsole to watch long-lived children, their heap and thread usage, and when seemingly hung, take thread dumps.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Sat Feb 18 01:01:00 2006
Return-Path: 
 <hadoop-dev-return-179-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50872 invoked from network); 18 Feb 2006 01:01:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Feb 2006 01:01:00 -0000
Received: (qmail 72300 invoked by uid 500); 18 Feb 2006 01:00:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72283 invoked by uid 500); 18 Feb 2006 01:00:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72274 invoked by uid 99); 18 Feb 2006 01:00:59 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Feb 2006 17:00:59 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 23659DD
	for <hadoop-dev@lucene.apache.org>; Sat, 18 Feb 2006 02:00:38 +0100 (CET)
Message-ID: <1756534767.1140224438143.JavaMail.jira@ajax.apache.org>
Date: Sat, 18 Feb 2006 02:00:38 +0100 (CET)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-42) PositionCache decrements its position
 for reads at the end of file
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

PositionCache decrements its position for reads at the end of file
------------------------------------------------------------------

         Key: HADOOP-42
         URL: http://issues.apache.org/jira/browse/HADOOP-42
     Project: Hadoop
        Type: Bug
  Components: fs  
    Reporter: Konstantin Shvachko
 Attachments: Position.patch

See

int org.apache.hadoop.fs.FSDataInputStream.PositionCache.read(byte[] b, int off, int len) 

if in.read() returns -1 (e.g. at the end of file) the position in the cache will be decremented, while it should be retained.

The attached patch would fix it.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Sat Feb 18 01:01:01 2006
Return-Path: 
 <hadoop-dev-return-180-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50893 invoked from network); 18 Feb 2006 01:01:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Feb 2006 01:01:01 -0000
Received: (qmail 72376 invoked by uid 500); 18 Feb 2006 01:01:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72357 invoked by uid 500); 18 Feb 2006 01:01:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72348 invoked by uid 99); 18 Feb 2006 01:01:01 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Feb 2006 17:01:01 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 4670DDF
	for <hadoop-dev@lucene.apache.org>; Sat, 18 Feb 2006 02:00:40 +0100 (CET)
Message-ID: <728687943.1140224440286.JavaMail.jira@ajax.apache.org>
Date: Sat, 18 Feb 2006 02:00:40 +0100 (CET)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-42) PositionCache decrements its position
 for reads at the end of file
In-Reply-To: <1756534767.1140224438143.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-42?page=all ]

Konstantin Shvachko updated HADOOP-42:
--------------------------------------

    Attachment: Position.patch

> PositionCache decrements its position for reads at the end of file
> ------------------------------------------------------------------
>
>          Key: HADOOP-42
>          URL: http://issues.apache.org/jira/browse/HADOOP-42
>      Project: Hadoop
>         Type: Bug
>   Components: fs
>     Reporter: Konstantin Shvachko
>  Attachments: Position.patch
>
> See
> int org.apache.hadoop.fs.FSDataInputStream.PositionCache.read(byte[] b, int off, int len) 
> if in.read() returns -1 (e.g. at the end of file) the position in the cache will be decremented, while it should be retained.
> The attached patch would fix it.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb 20 18:56:01 2006
Return-Path: 
 <hadoop-dev-return-181-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75977 invoked from network); 20 Feb 2006 18:56:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Feb 2006 18:56:01 -0000
Received: (qmail 35366 invoked by uid 500); 20 Feb 2006 18:55:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 35298 invoked by uid 500); 20 Feb 2006 18:55:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 35280 invoked by uid 99); 20 Feb 2006 18:55:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Feb 2006 10:55:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ramanan.rr@gmail.com designates
 64.233.162.198 as permitted sender)
Received: from [64.233.162.198] (HELO zproxy.gmail.com) (64.233.162.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Feb 2006 10:55:48 -0800
Received: by zproxy.gmail.com with SMTP id z6so1018734nzd
        for <hadoop-dev@lucene.apache.org>;
 Mon, 20 Feb 2006 10:55:28 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=DthvkNrpw4ikG++zlKbDeWME57YMxhlm+JvLS3gvVTfnKhD5VHrXkX2AqHycUfXN4qKGUXJ85lvrkEXVHQmakOJf5aKyI584k4AfLzyvK+MiH+Kt+f23bzY5LRBqCWRGAkpInV1Lz4xvC9wpW7yQ0ZqXlHAVw524ERejemsJaqs=
Received: by 10.36.41.4 with SMTP id o4mr3175351nzo;
        Mon, 20 Feb 2006 10:55:28 -0800 (PST)
Received: by 10.36.138.4 with HTTP; Mon, 20 Feb 2006 10:55:27 -0800 (PST)
Message-ID: <abed38270602201055s64d7bf1ayc0dd09783279be8f@mail.gmail.com>
Date: Mon, 20 Feb 2006 10:55:27 -0800
From: "Ramanan R." <ramanan.rr@gmail.com>
To: hadoop-dev@lucene.apache.org
Subject: Getting started
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_Part_8071_2917806.1140461727971"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_8071_2917806.1140461727971
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hello,

   I've just downloaded Hadoop and basically have a few questions about
getting started.

   I'm currently working on a study to asses Mapreduce's performance in
different situations, including smaller clusters and CMP machines. So my
main questions is if there's a place I can go to to find out how exactly
hadoop should be set up.

   Also, I am aware that we can specify the number of hosts that will be
available for the mapreduce operations, but in its current form, can hadoop
handle assigning tasks to multiple processors within a single machine? If
so, is there any documentation on how it's done?

   Any help on this would really be appreciated since I'm kind of lost righ=
t
now. Thank a lot in advance.

Ram

------=_Part_8071_2917806.1140461727971--

From MAILER-DAEMON Tue Feb 21 05:52:46 2006
Return-Path: 
 <hadoop-dev-return-182-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57174 invoked from network); 21 Feb 2006 05:52:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 05:52:46 -0000
Received: (qmail 34648 invoked by uid 500); 21 Feb 2006 05:52:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 34626 invoked by uid 500); 21 Feb 2006 05:52:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 34617 invoked by uid 99); 21 Feb 2006 05:52:45 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Feb 2006 21:52:45 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id AB63FDD
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Feb 2006 06:52:24 +0100 (CET)
Message-ID: <522645548.1140501144699.JavaMail.jira@ajax.apache.org>
Date: Tue, 21 Feb 2006 06:52:24 +0100 (CET)
From: "Bryan Pendleton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-43) JobTracker dumps TaskTrackers if it
 takes too long to service an RPC call
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

JobTracker dumps TaskTrackers if it takes too long to service an RPC call
-------------------------------------------------------------------------

         Key: HADOOP-43
         URL: http://issues.apache.org/jira/browse/HADOOP-43
     Project: Hadoop
        Type: Bug
  Components: mapred  
    Reporter: Bryan Pendleton


If the JobTracker takes too long to service any RPC request, it is unable to receive emitHeartBeat calls from TaskTrackers. The monitoring thread thus dumps the TaskTracker, losing any incomplete work and forcing a slow reconnect process to begin before it starts assigning work again.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Feb 21 06:01:47 2006
Return-Path: 
 <hadoop-dev-return-183-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 60847 invoked from network); 21 Feb 2006 06:01:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 06:01:47 -0000
Received: (qmail 39889 invoked by uid 500); 21 Feb 2006 06:01:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 39875 invoked by uid 500); 21 Feb 2006 06:01:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 39866 invoked by uid 99); 21 Feb 2006 06:01:47 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Feb 2006 22:01:45 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 95D99DC
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Feb 2006 07:01:24 +0100 (CET)
Message-ID: <1947048618.1140501684589.JavaMail.jira@ajax.apache.org>
Date: Tue, 21 Feb 2006 07:01:24 +0100 (CET)
From: "Bryan Pendleton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-16) RPC call times out while indexing map
 task is computing splits
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-16?page=comments#action_12367148 ] 

Bryan Pendleton commented on HADOOP-16:
---------------------------------------

I have another idea.

First, switch the delegation of responsiblity for job assignment. Right now, it happens in the JobTracker instance, in response to an obtainNewMapTask call. This scales very poorly. In particular, it causes the RPC-timeouts if you do any sort of serious work in obtainNewMapTask. There's another bug, just reported as HADOOP-43, which occurs if you spend too long in a RPC call, and also described in the second comment, above.

So, instead of having the JobTracker do this reactively, either:
1) Precompute - probably most scalably done by starting a mini-job, which just computes the list of who has precached data from a given FileSplit.
2) Compute on demand - as a TaskTracker job. This could work by some protocol of offering the TaskTracker a set of possible jobs it could do work on, letting it pick the ones it thinks are best, and return the remainders for assignment. This, of course, would only work well for instances where tasks >> tasktracker instances.

I looked at implementing something like 1, but decided I think 2 is a much better option. 1 would put a lot more instantaneous demand on the namenode. Plus, once you've finished precomputing the best nodes, if nodes come or go you don't really have a solution. 2 seems to distribute both the work and some of the demand, and it makes it possible for the cluster to grow or shrink dramatically without failing to take advantage of the local storage available at each node. Unfortunately, without any pre-work, it's possible that, doing option 2, you'd pick bad subsets of work to distribute to each node, and get no local I/O improvement at all.

I'd really like to see something done, perferably soon. With dozens of nodes, and hundreds of gbs of data in my current problem set, it's very nearly impossible to get the current code to make progress, without killing tasktrackers (some with lots of work units already completed). I can do some of the coding, if there's agreement for what direction to push.

> RPC call times out while indexing map task is computing splits
> --------------------------------------------------------------
>
>          Key: HADOOP-16
>          URL: http://issues.apache.org/jira/browse/HADOOP-16
>      Project: Hadoop
>         Type: Bug
>   Components: mapred
>  Environment: MapReduce multi-computer crawl environment: 11 machines (1 master with JobTracker/NameNode, 10 slaves with TaskTrackers/DataNodes)
>     Reporter: Chris Schneider
>  Attachments: patch.16
>
> We've been using Nutch 0.8 (MapReduce) to perform some internet crawling. Things seemed to be going well until...
> 060129 222409 Lost tracker 'tracker_56288'
> 060129 222409 Task 'task_m_10gs5f' has been lost.
> 060129 222409 Task 'task_m_10qhzr' has been lost.
>    ........
>    ........
> 060129 222409 Task 'task_r_zggbwu' has been lost.
> 060129 222409 Task 'task_r_zh8dao' has been lost.
> 060129 222455 Server handler 8 on 8010 caught: java.net.SocketException: Socket closed
> java.net.SocketException: Socket closed
>         at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:99)
>         at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
>         at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
>         at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
>         at java.io.DataOutputStream.flush(DataOutputStream.java:106)
>         at org.apache.nutch.ipc.Server$Handler.run(Server.java:216)
> 060129 222455 Adding task 'task_m_cia5po' to set for tracker 'tracker_56288'
> 060129 223711 Adding task 'task_m_ffv59i' to set for tracker 'tracker_25647'
> I'm hoping that someone could explain why task_m_cia5po got added to tracker_56288 after this tracker was lost.
> The Crawl .main process died with the following output:
> 060129 221129 Indexer: adding segment: /user/crawler/crawl-20060129091444/segments/20060129200246
> Exception in thread "main" java.io.IOException: timed out waiting for response
>     at org.apache.nutch.ipc.Client.call(Client.java:296)
>     at org.apache.nutch.ipc.RPC$Invoker.invoke(RPC.java:127)
>     at $Proxy1.submitJob(Unknown Source)
>     at org.apache.nutch.mapred.JobClient.submitJob(JobClient.java:259)
>     at org.apache.nutch.mapred.JobClient.runJob(JobClient.java:288)
>     at org.apache.nutch.indexer.Indexer.index(Indexer.java:263)
>     at org.apache.nutch.crawl.Crawl.main(Crawl.java:127)
> However, it definitely seems as if the JobTracker is still waiting for the job to finish (no failed jobs).
> Doug Cutting's response:
> The bug here is that the RPC call times out while the map task is computing splits.  The fix is that the job tracker should not compute splits until after it has returned from the submitJob RPC.  Please submit a bug in Jira to help remind us to fix this.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Feb 21 22:09:51 2006
Return-Path: 
 <hadoop-dev-return-184-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23095 invoked from network); 21 Feb 2006 22:09:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 22:09:51 -0000
Received: (qmail 47659 invoked by uid 500); 21 Feb 2006 22:09:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47631 invoked by uid 500); 21 Feb 2006 22:09:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47622 invoked by uid 99); 21 Feb 2006 22:09:49 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 14:09:49 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 703D8DC
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Feb 2006 23:09:28 +0100 (CET)
Message-ID: <50328208.1140559768195.JavaMail.jira@ajax.apache.org>
Date: Tue, 21 Feb 2006 23:09:28 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-44) RPC exceptions should include remote
 stack trace
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

RPC exceptions should include remote stack trace
------------------------------------------------

         Key: HADOOP-44
         URL: http://issues.apache.org/jira/browse/HADOOP-44
     Project: Hadoop
        Type: New Feature
  Components: ipc  
    Versions: 0.1    
    Reporter: Doug Cutting
     Fix For: 0.1


Remote exceptions currently only report the exception string.  Instead they should report the entire remote stack trace, as a string, to facilitate debugging.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Feb 21 22:09:53 2006
Return-Path: 
 <hadoop-dev-return-185-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23125 invoked from network); 21 Feb 2006 22:09:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 22:09:53 -0000
Received: (qmail 47770 invoked by uid 500); 21 Feb 2006 22:09:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47713 invoked by uid 500); 21 Feb 2006 22:09:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47703 invoked by uid 99); 21 Feb 2006 22:09:51 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 14:09:50 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id F0DCDE0
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Feb 2006 23:09:29 +0100 (CET)
Message-ID: <413270226.1140559769984.JavaMail.jira@ajax.apache.org>
Date: Tue, 21 Feb 2006 23:09:29 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-45) JobTracker should log task errors
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

JobTracker should log task errors
---------------------------------

         Key: HADOOP-45
         URL: http://issues.apache.org/jira/browse/HADOOP-45
     Project: Hadoop
        Type: Improvement
  Components: mapred  
    Versions: 0.1    
    Reporter: Doug Cutting
     Fix For: 0.1


Task errors are currently propagated to the JobTracker and viewable in the web interface but they are not logged.  These should be logged as well.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Feb 21 22:12:40 2006
Return-Path: 
 <hadoop-dev-return-186-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 25500 invoked from network); 21 Feb 2006 22:12:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 22:12:40 -0000
Received: (qmail 54914 invoked by uid 500); 21 Feb 2006 22:12:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 54859 invoked by uid 500); 21 Feb 2006 22:12:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 54850 invoked by uid 99); 21 Feb 2006 22:12:39 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 14:12:39 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 41883DC
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Feb 2006 23:12:18 +0100 (CET)
Message-ID: <1072400095.1140559938030.JavaMail.jira@ajax.apache.org>
Date: Tue, 21 Feb 2006 23:12:18 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-46) user-specified job names
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

user-specified job names
------------------------

         Key: HADOOP-46
         URL: http://issues.apache.org/jira/browse/HADOOP-46
     Project: Hadoop
        Type: New Feature
  Components: mapred  
    Versions: 0.1    
    Reporter: Doug Cutting
     Fix For: 0.1


It should be possible to supply a name when a job is submitted.  This can then be used in the web ui to describe the job.  Perhaps this should just be a job property (mapred.job.name).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Feb 21 22:16:35 2006
Return-Path: 
 <hadoop-dev-return-187-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 27772 invoked from network); 21 Feb 2006 22:16:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 22:16:35 -0000
Received: (qmail 62842 invoked by uid 500); 21 Feb 2006 22:16:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62817 invoked by uid 500); 21 Feb 2006 22:16:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62806 invoked by uid 99); 21 Feb 2006 22:16:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 14:16:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.122.60.61] (HELO mslinux.media-style.com) (212.122.60.61)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 14:16:33 -0800
Received: from localhost (localhost [127.0.0.1])
	by mslinux.media-style.com (Postfix) with ESMTP id C2D34144515
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Feb 2006 23:10:51 +0100 (CET)
Received: from mslinux.media-style.com ([127.0.0.1])
	by localhost (mslinux.media-style.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 10455-02 for <hadoop-dev@lucene.apache.org>;
	Tue, 21 Feb 2006 23:10:51 +0100 (CET)
Received: from [192.168.8.4] (dslb-084-059-209-241.pools.arcor-ip.net
 [84.59.209.241])
	by mslinux.media-style.com (Postfix) with ESMTP id 668BE1444F5
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Feb 2006 23:10:51 +0100 (CET)
Mime-Version: 1.0 (Apple Message framework v749)
In-Reply-To: <1072400095.1140559938030.JavaMail.jira@ajax.apache.org>
References: <1072400095.1140559938030.JavaMail.jira@ajax.apache.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <42136C4F-9582-49EE-B940-817EA8C1966A@media-style.com>
Content-Transfer-Encoding: 7bit
From: Stefan Groschupf <sg@media-style.com>
Subject: Re: [jira] Created: (HADOOP-46) user-specified job names
Date: Tue, 21 Feb 2006 23:16:09 +0100
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.749)
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at media-style.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> It should be possible to supply a name when a job is submitted.   
> This can then be used in the web ui to describe the job.  Perhaps  
> this should just be a job property (mapred.job.name).
Hi,
It would be great in the next step to have an API to retrieve all  
task trackers that runs such a task.
Stefan 

From MAILER-DAEMON Tue Feb 21 22:19:58 2006
Return-Path: 
 <hadoop-dev-return-188-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 29274 invoked from network); 21 Feb 2006 22:19:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 22:19:58 -0000
Received: (qmail 67571 invoked by uid 500); 21 Feb 2006 22:19:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 67465 invoked by uid 500); 21 Feb 2006 22:19:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 67310 invoked by uid 99); 21 Feb 2006 22:19:55 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 14:19:55 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 89F42DC
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Feb 2006 23:19:34 +0100 (CET)
Message-ID: <579254540.1140560374384.JavaMail.jira@ajax.apache.org>
Date: Tue, 21 Feb 2006 23:19:34 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-47) include records/second and bytes/second
  to task reports
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

include records/second and bytes/second  to task reports
--------------------------------------------------------

         Key: HADOOP-47
         URL: http://issues.apache.org/jira/browse/HADOOP-47
     Project: Hadoop
        Type: New Feature
  Components: mapred  
    Versions: 0.1    
    Reporter: Doug Cutting
     Fix For: 0.1


TaskReport should include fields for total records processed, total bytes processed and total seconds of task execution.  These should also be reported in the web ui, as bytes/second and records/second.  The job display could sum these to report total bytes/second and records/second for map and reduce.  Better yet would be a graph displaying the total rates over the course of the job...

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Feb 21 22:20:02 2006
Return-Path: 
 <hadoop-dev-return-189-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 29490 invoked from network); 21 Feb 2006 22:20:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 22:20:02 -0000
Received: (qmail 68088 invoked by uid 500); 21 Feb 2006 22:20:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68066 invoked by uid 500); 21 Feb 2006 22:20:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68057 invoked by uid 99); 21 Feb 2006 22:20:01 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 14:19:58 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 30CD4E0
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Feb 2006 23:19:37 +0100 (CET)
Message-ID: <683456177.1140560377197.JavaMail.jira@ajax.apache.org>
Date: Tue, 21 Feb 2006 23:19:37 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-47) include records/second and bytes/second
 in  task reports
In-Reply-To: <579254540.1140560374384.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-47?page=all ]

Doug Cutting updated HADOOP-47:
-------------------------------

    Summary: include records/second and bytes/second in  task reports  (was: include records/second and bytes/second  to task reports)

> include records/second and bytes/second in  task reports
> --------------------------------------------------------
>
>          Key: HADOOP-47
>          URL: http://issues.apache.org/jira/browse/HADOOP-47
>      Project: Hadoop
>         Type: New Feature
>   Components: mapred
>     Versions: 0.1
>     Reporter: Doug Cutting
>      Fix For: 0.1

>
> TaskReport should include fields for total records processed, total bytes processed and total seconds of task execution.  These should also be reported in the web ui, as bytes/second and records/second.  The job display could sum these to report total bytes/second and records/second for map and reduce.  Better yet would be a graph displaying the total rates over the course of the job...

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Feb 21 22:20:10 2006
Return-Path: 
 <hadoop-dev-return-190-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 29584 invoked from network); 21 Feb 2006 22:20:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 22:20:10 -0000
Received: (qmail 68179 invoked by uid 500); 21 Feb 2006 22:20:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68165 invoked by uid 500); 21 Feb 2006 22:20:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68156 invoked by uid 99); 21 Feb 2006 22:20:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 14:20:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.122.60.61] (HELO mslinux.media-style.com) (212.122.60.61)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 14:20:09 -0800
Received: from localhost (localhost [127.0.0.1])
	by mslinux.media-style.com (Postfix) with ESMTP id 215B0144515
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Feb 2006 23:14:27 +0100 (CET)
Received: from mslinux.media-style.com ([127.0.0.1])
	by localhost (mslinux.media-style.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 10455-06 for <hadoop-dev@lucene.apache.org>;
	Tue, 21 Feb 2006 23:14:27 +0100 (CET)
Received: from [192.168.8.4] (dslb-084-059-209-241.pools.arcor-ip.net
 [84.59.209.241])
	by mslinux.media-style.com (Postfix) with ESMTP id BB11C1444F5
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Feb 2006 23:14:26 +0100 (CET)
Mime-Version: 1.0 (Apple Message framework v749)
Content-Transfer-Encoding: 7bit
Message-Id: <89646F11-8864-47BB-A74C-F01040D36299@media-style.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: hadoop-dev@lucene.apache.org
From: Stefan Groschupf <sg@media-style.com>
Subject: partitions
Date: Tue, 21 Feb 2006 23:19:44 +0100
X-Mailer: Apple Mail (2.749)
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at media-style.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,
is it possible by a hack / or is planed to implement to support  
tasktracker network partitions.
What I'm interested in, is to group a set of tasktrackers together in  
a group called 'muchMemory' and run a mapred job only on  
trasktrackers of this group.
May partition is the wrong word since this term is already used to  
described something different in hadoop.
May called it subnet's or tasktracker groups.

Any thoughts?
Thanks.
Stefan

---------------------------------------------
blog: http://www.find23.org
company: http://www.media-style.com



From MAILER-DAEMON Tue Feb 21 22:24:40 2006
Return-Path: 
 <hadoop-dev-return-191-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33046 invoked from network); 21 Feb 2006 22:24:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 22:24:40 -0000
Received: (qmail 78690 invoked by uid 500); 21 Feb 2006 22:24:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 78663 invoked by uid 500); 21 Feb 2006 22:24:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 78654 invoked by uid 99); 21 Feb 2006 22:24:39 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 14:24:37 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 43C56DC
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Feb 2006 23:24:16 +0100 (CET)
Message-ID: <642884722.1140560655919.JavaMail.jira@ajax.apache.org>
Date: Tue, 21 Feb 2006 23:24:15 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-48) add user data to task reports
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

add user data to task reports
-----------------------------

         Key: HADOOP-48
         URL: http://issues.apache.org/jira/browse/HADOOP-48
     Project: Hadoop
        Type: New Feature
  Components: mapred  
    Versions: 0.2    
    Reporter: Doug Cutting
     Fix For: 0.2


The Reporter interface should permit tasks to set user-data for a task, either as a String or, better-yet, as a Writable.  This should be returned with each TaskReport.  This would facilitate programmatic instrumentation of tasks.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Feb 21 22:27:08 2006
Return-Path: 
 <hadoop-dev-return-192-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34271 invoked from network); 21 Feb 2006 22:27:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 22:27:08 -0000
Received: (qmail 80043 invoked by uid 500); 21 Feb 2006 22:27:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 80002 invoked by uid 500); 21 Feb 2006 22:27:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 79983 invoked by uid 99); 21 Feb 2006 22:27:07 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 14:27:05 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id A618CE0
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Feb 2006 23:26:44 +0100 (CET)
Message-ID: <475642315.1140560804678.JavaMail.jira@ajax.apache.org>
Date: Tue, 21 Feb 2006 23:26:44 +0100 (CET)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-49) JobClient cannot use a non-default
 server (unlike DFSShell)
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

JobClient cannot use a non-default server (unlike DFSShell)
-----------------------------------------------------------

         Key: HADOOP-49
         URL: http://issues.apache.org/jira/browse/HADOOP-49
     Project: Hadoop
        Type: Improvement
    Reporter: Michel Tourn


JobClient cannot use a non-default Job Tracker server:
It will use the Job Tracker specified in conf/hadoop-default.xml or conf/hadoop-site.xml

For users with multiple Hadoop systems, it is useful to be able to specify the Job Tracker.

Other hadoop command-line tools like DFSShell already have:
>bin/hadoop dfs
Usage: java DFSShell [-local | -dfs <namenode:port>]  ...

Similarly I propose to add a -jt parameter:
>bin/hadoop job
JobClient -submit <job> | -status <id> | -kill <id> [-jt <jobtracker:port>|<config>]

Where: -jt <jobtracker:port> is similar to -dfs <namenode:port>
And:  -jt <config> will load as a final resource: hadoop-<config>.xml

The latter syntax is discoverable by users because on failure the tool will say:

>bin/hadoop job -kill m7n6pi -jt unknown
Exception in thread "main" java.lang.RuntimeException: hadoop-unknown.xml not found on CLASSPATH

Or in case of success:

>bin/hadoop job -kill job_m7n6pi -jt myconfig
060221 221911 parsing file:/trunk/conf/hadoop-default.xml
060221 221911 parsing file:/trunk/conf/hadoop-myconfig.xml
060221 221911 parsing file:/trunk/conf/hadoop-site.xml
060221 221911 Client connection to 66.196.91.10:7020: starting

And with a machine:port spec:
>bin/hadoop job -kill job_m7n6pi -jt machine:8020
060221 222109 parsing file:/trunk/conf/hadoop-default.xml
060221 222109 parsing file:/trunk/conf/hadoop-site.xml
060221 222109 Client connection to 66.196.91.10:8020: starting


Patch attached.





-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Feb 21 22:27:09 2006
Return-Path: 
 <hadoop-dev-return-193-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34300 invoked from network); 21 Feb 2006 22:27:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 22:27:09 -0000
Received: (qmail 80098 invoked by uid 500); 21 Feb 2006 22:27:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 80021 invoked by uid 500); 21 Feb 2006 22:27:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 79984 invoked by uid 99); 21 Feb 2006 22:27:07 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 14:27:05 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id CFAFBE1
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Feb 2006 23:26:44 +0100 (CET)
Message-ID: <133992549.1140560804844.JavaMail.jira@ajax.apache.org>
Date: Tue, 21 Feb 2006 23:26:44 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-50) dfs datanode should store blocks in
 multiple directories
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

dfs datanode should store blocks in multiple directories
--------------------------------------------------------

         Key: HADOOP-50
         URL: http://issues.apache.org/jira/browse/HADOOP-50
     Project: Hadoop
        Type: Bug
  Components: dfs  
    Versions: 0.1    
    Reporter: Doug Cutting
 Assigned to: Mike Cafarella 
     Fix For: 0.1


The datanode currently stores all file blocks in a single directory.  With 32MB blocks and terabyte filesystems, this will create too many files in a single directory for many filesystems.  Thus blocks should be stored in multiple directories, perhaps even a shallow hierarchy.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Feb 21 22:28:47 2006
Return-Path: 
 <hadoop-dev-return-194-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 35459 invoked from network); 21 Feb 2006 22:28:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 22:28:47 -0000
Received: (qmail 81575 invoked by uid 500); 21 Feb 2006 22:28:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 81551 invoked by uid 500); 21 Feb 2006 22:28:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 81542 invoked by uid 99); 21 Feb 2006 22:28:46 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 14:28:46 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 2976CDD
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Feb 2006 23:28:25 +0100 (CET)
Message-ID: <2062045123.1140560905167.JavaMail.jira@ajax.apache.org>
Date: Tue, 21 Feb 2006 23:28:25 +0100 (CET)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-49) JobClient cannot use a non-default
 server (unlike DFSShell)
In-Reply-To: <475642315.1140560804678.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-49?page=all ]

Michel Tourn updated HADOOP-49:
-------------------------------

    Attachment: jcjt.patch

> JobClient cannot use a non-default server (unlike DFSShell)
> -----------------------------------------------------------
>
>          Key: HADOOP-49
>          URL: http://issues.apache.org/jira/browse/HADOOP-49
>      Project: Hadoop
>         Type: Improvement
>     Reporter: Michel Tourn
>  Attachments: jcjt.patch
>
> JobClient cannot use a non-default Job Tracker server:
> It will use the Job Tracker specified in conf/hadoop-default.xml or conf/hadoop-site.xml
> For users with multiple Hadoop systems, it is useful to be able to specify the Job Tracker.
> Other hadoop command-line tools like DFSShell already have:
> >bin/hadoop dfs
> Usage: java DFSShell [-local | -dfs <namenode:port>]  ...
> Similarly I propose to add a -jt parameter:
> >bin/hadoop job
> JobClient -submit <job> | -status <id> | -kill <id> [-jt <jobtracker:port>|<config>]
> Where: -jt <jobtracker:port> is similar to -dfs <namenode:port>
> And:  -jt <config> will load as a final resource: hadoop-<config>.xml
> The latter syntax is discoverable by users because on failure the tool will say:
> >bin/hadoop job -kill m7n6pi -jt unknown
> Exception in thread "main" java.lang.RuntimeException: hadoop-unknown.xml not found on CLASSPATH
> Or in case of success:
> >bin/hadoop job -kill job_m7n6pi -jt myconfig
> 060221 221911 parsing file:/trunk/conf/hadoop-default.xml
> 060221 221911 parsing file:/trunk/conf/hadoop-myconfig.xml
> 060221 221911 parsing file:/trunk/conf/hadoop-site.xml
> 060221 221911 Client connection to 66.196.91.10:7020: starting
> And with a machine:port spec:
> >bin/hadoop job -kill job_m7n6pi -jt machine:8020
> 060221 222109 parsing file:/trunk/conf/hadoop-default.xml
> 060221 222109 parsing file:/trunk/conf/hadoop-site.xml
> 060221 222109 Client connection to 66.196.91.10:8020: starting
> Patch attached.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Feb 21 22:31:16 2006
Return-Path: 
 <hadoop-dev-return-195-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 36986 invoked from network); 21 Feb 2006 22:31:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 22:31:16 -0000
Received: (qmail 85987 invoked by uid 500); 21 Feb 2006 22:31:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 85932 invoked by uid 500); 21 Feb 2006 22:31:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 85896 invoked by uid 99); 21 Feb 2006 22:31:13 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 14:31:10 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id A5E4BE0
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Feb 2006 23:30:49 +0100 (CET)
Message-ID: <1529480135.1140561049677.JavaMail.jira@ajax.apache.org>
Date: Tue, 21 Feb 2006 23:30:49 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-51) per-file replication counts
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

per-file replication counts
---------------------------

         Key: HADOOP-51
         URL: http://issues.apache.org/jira/browse/HADOOP-51
     Project: Hadoop
        Type: New Feature
  Components: dfs  
    Versions: 0.1    
    Reporter: Doug Cutting
     Fix For: 0.1


It should be possible to specify different replication counts for different files.  Perhaps an option when creating a new file should be the desired replication count.  MapReduce should take advantage of this feature so that job.xml and job.jar files, which are frequently accessed by lots of machines, are more highly replicated than large data files.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Feb 21 22:38:58 2006
Return-Path: 
 <hadoop-dev-return-196-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40882 invoked from network); 21 Feb 2006 22:38:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 22:38:58 -0000
Received: (qmail 94691 invoked by uid 500); 21 Feb 2006 22:38:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94673 invoked by uid 500); 21 Feb 2006 22:38:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94664 invoked by uid 99); 21 Feb 2006 22:38:57 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 14:38:55 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 58B29DF
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Feb 2006 23:38:34 +0100 (CET)
Message-ID: <1415168910.1140561514361.JavaMail.jira@ajax.apache.org>
Date: Tue, 21 Feb 2006 23:38:34 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-52) mapred input and output dirs must be
 absolute
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

mapred input and output dirs must be absolute
---------------------------------------------

         Key: HADOOP-52
         URL: http://issues.apache.org/jira/browse/HADOOP-52
     Project: Hadoop
        Type: Bug
  Components: mapred  
    Versions: 0.1    
    Reporter: Doug Cutting
     Fix For: 0.1


DFS converts relative pathnames to be under /user/$USER.  But MapReduce jobs may be submitted by a different user than is running the jobtracker and tasktracker.  Thus relative paths must be resolved before a job is submitted, so that only absolute paths are seen on the job tracker and tasktracker.  I think the simplest way to fix this is to make JobConf.setInputDir(), setOutputDir(), etc. resolve relative pathnames. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Feb 21 22:44:50 2006
Return-Path: 
 <hadoop-dev-return-197-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 42652 invoked from network); 21 Feb 2006 22:44:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 22:44:50 -0000
Received: (qmail 98127 invoked by uid 500); 21 Feb 2006 22:44:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98108 invoked by uid 500); 21 Feb 2006 22:44:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98099 invoked by uid 99); 21 Feb 2006 22:44:49 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 14:44:49 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 3292FDC
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Feb 2006 23:44:28 +0100 (CET)
Message-ID: <1439898440.1140561867819.JavaMail.jira@ajax.apache.org>
Date: Tue, 21 Feb 2006 23:44:27 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-52) mapred input and output dirs must be
 absolute
In-Reply-To: <1415168910.1140561514361.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-52?page=all ]

Doug Cutting updated HADOOP-52:
-------------------------------

    Assign To: Sameer Paranjpye

> mapred input and output dirs must be absolute
> ---------------------------------------------
>
>          Key: HADOOP-52
>          URL: http://issues.apache.org/jira/browse/HADOOP-52
>      Project: Hadoop
>         Type: Bug
>   Components: mapred
>     Versions: 0.1
>     Reporter: Doug Cutting
>     Assignee: Sameer Paranjpye
>      Fix For: 0.1

>
> DFS converts relative pathnames to be under /user/$USER.  But MapReduce jobs may be submitted by a different user than is running the jobtracker and tasktracker.  Thus relative paths must be resolved before a job is submitted, so that only absolute paths are seen on the job tracker and tasktracker.  I think the simplest way to fix this is to make JobConf.setInputDir(), setOutputDir(), etc. resolve relative pathnames. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Feb 21 22:44:51 2006
Return-Path: 
 <hadoop-dev-return-198-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 42676 invoked from network); 21 Feb 2006 22:44:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 22:44:51 -0000
Received: (qmail 98196 invoked by uid 500); 21 Feb 2006 22:44:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98180 invoked by uid 500); 21 Feb 2006 22:44:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98171 invoked by uid 99); 21 Feb 2006 22:44:51 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 14:44:50 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id E9720DF
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Feb 2006 23:44:29 +0100 (CET)
Message-ID: <1548535694.1140561869954.JavaMail.jira@ajax.apache.org>
Date: Tue, 21 Feb 2006 23:44:29 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-51) per-file replication counts
In-Reply-To: <1529480135.1140561049677.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-51?page=all ]

Doug Cutting updated HADOOP-51:
-------------------------------

    Assign To: Sameer Paranjpye

> per-file replication counts
> ---------------------------
>
>          Key: HADOOP-51
>          URL: http://issues.apache.org/jira/browse/HADOOP-51
>      Project: Hadoop
>         Type: New Feature
>   Components: dfs
>     Versions: 0.1
>     Reporter: Doug Cutting
>     Assignee: Sameer Paranjpye
>      Fix For: 0.1

>
> It should be possible to specify different replication counts for different files.  Perhaps an option when creating a new file should be the desired replication count.  MapReduce should take advantage of this feature so that job.xml and job.jar files, which are frequently accessed by lots of machines, are more highly replicated than large data files.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Feb 21 22:44:55 2006
Return-Path: 
 <hadoop-dev-return-200-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 42725 invoked from network); 21 Feb 2006 22:44:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 22:44:55 -0000
Received: (qmail 98407 invoked by uid 500); 21 Feb 2006 22:44:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98351 invoked by uid 500); 21 Feb 2006 22:44:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98341 invoked by uid 99); 21 Feb 2006 22:44:54 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 14:44:52 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 90085126
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Feb 2006 23:44:31 +0100 (CET)
Message-ID: <628352182.1140561871587.JavaMail.jira@ajax.apache.org>
Date: Tue, 21 Feb 2006 23:44:31 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-46) user-specified job names
In-Reply-To: <1072400095.1140559938030.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-46?page=all ]

Doug Cutting updated HADOOP-46:
-------------------------------

    Assign To: Sameer Paranjpye

> user-specified job names
> ------------------------
>
>          Key: HADOOP-46
>          URL: http://issues.apache.org/jira/browse/HADOOP-46
>      Project: Hadoop
>         Type: New Feature
>   Components: mapred
>     Versions: 0.1
>     Reporter: Doug Cutting
>     Assignee: Sameer Paranjpye
>      Fix For: 0.1

>
> It should be possible to supply a name when a job is submitted.  This can then be used in the web ui to describe the job.  Perhaps this should just be a job property (mapred.job.name).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Feb 21 22:44:54 2006
Return-Path: 
 <hadoop-dev-return-199-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 42706 invoked from network); 21 Feb 2006 22:44:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 22:44:54 -0000
Received: (qmail 98299 invoked by uid 500); 21 Feb 2006 22:44:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98283 invoked by uid 500); 21 Feb 2006 22:44:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98274 invoked by uid 99); 21 Feb 2006 22:44:54 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 14:44:53 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 0B0EB183
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Feb 2006 23:44:33 +0100 (CET)
Message-ID: <412931631.1140561873043.JavaMail.jira@ajax.apache.org>
Date: Tue, 21 Feb 2006 23:44:33 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-47) include records/second and bytes/second
 in  task reports
In-Reply-To: <579254540.1140560374384.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-47?page=all ]

Doug Cutting updated HADOOP-47:
-------------------------------

    Assign To: Sameer Paranjpye

> include records/second and bytes/second in  task reports
> --------------------------------------------------------
>
>          Key: HADOOP-47
>          URL: http://issues.apache.org/jira/browse/HADOOP-47
>      Project: Hadoop
>         Type: New Feature
>   Components: mapred
>     Versions: 0.1
>     Reporter: Doug Cutting
>     Assignee: Sameer Paranjpye
>      Fix For: 0.1

>
> TaskReport should include fields for total records processed, total bytes processed and total seconds of task execution.  These should also be reported in the web ui, as bytes/second and records/second.  The job display could sum these to report total bytes/second and records/second for map and reduce.  Better yet would be a graph displaying the total rates over the course of the job...

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Feb 21 22:44:58 2006
Return-Path: 
 <hadoop-dev-return-201-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 42753 invoked from network); 21 Feb 2006 22:44:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 22:44:58 -0000
Received: (qmail 98454 invoked by uid 500); 21 Feb 2006 22:44:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98438 invoked by uid 500); 21 Feb 2006 22:44:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98429 invoked by uid 99); 21 Feb 2006 22:44:57 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 14:44:55 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 7C5D4186
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Feb 2006 23:44:34 +0100 (CET)
Message-ID: <1706283529.1140561874506.JavaMail.jira@ajax.apache.org>
Date: Tue, 21 Feb 2006 23:44:34 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-44) RPC exceptions should include remote
 stack trace
In-Reply-To: <50328208.1140559768195.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-44?page=all ]

Doug Cutting updated HADOOP-44:
-------------------------------

    Assign To: Sameer Paranjpye

> RPC exceptions should include remote stack trace
> ------------------------------------------------
>
>          Key: HADOOP-44
>          URL: http://issues.apache.org/jira/browse/HADOOP-44
>      Project: Hadoop
>         Type: New Feature
>   Components: ipc
>     Versions: 0.1
>     Reporter: Doug Cutting
>     Assignee: Sameer Paranjpye
>      Fix For: 0.1

>
> Remote exceptions currently only report the exception string.  Instead they should report the entire remote stack trace, as a string, to facilitate debugging.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Feb 21 22:45:13 2006
Return-Path: 
 <hadoop-dev-return-202-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 42864 invoked from network); 21 Feb 2006 22:45:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 22:45:13 -0000
Received: (qmail 98690 invoked by uid 500); 21 Feb 2006 22:45:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98617 invoked by uid 500); 21 Feb 2006 22:45:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98533 invoked by uid 99); 21 Feb 2006 22:45:12 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 14:45:10 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 0ADF018C
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Feb 2006 23:44:36 +0100 (CET)
Message-ID: <36818890.1140561876042.JavaMail.jira@ajax.apache.org>
Date: Tue, 21 Feb 2006 23:44:36 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-45) JobTracker should log task errors
In-Reply-To: <413270226.1140559769984.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-45?page=all ]

Doug Cutting updated HADOOP-45:
-------------------------------

    Assign To: Sameer Paranjpye

> JobTracker should log task errors
> ---------------------------------
>
>          Key: HADOOP-45
>          URL: http://issues.apache.org/jira/browse/HADOOP-45
>      Project: Hadoop
>         Type: Improvement
>   Components: mapred
>     Versions: 0.1
>     Reporter: Doug Cutting
>     Assignee: Sameer Paranjpye
>      Fix For: 0.1

>
> Task errors are currently propagated to the JobTracker and viewable in the web interface but they are not logged.  These should be logged as well.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Feb 21 22:52:50 2006
Return-Path: 
 <hadoop-dev-return-203-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46401 invoked from network); 21 Feb 2006 22:52:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 22:52:50 -0000
Received: (qmail 6949 invoked by uid 500); 21 Feb 2006 22:52:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 6932 invoked by uid 500); 21 Feb 2006 22:52:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 6923 invoked by uid 99); 21 Feb 2006 22:52:49 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 14:52:47 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 6896FDD
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Feb 2006 23:52:26 +0100 (CET)
Message-ID: <1648750002.1140562346426.JavaMail.jira@ajax.apache.org>
Date: Tue, 21 Feb 2006 23:52:26 +0100 (CET)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-49) JobClient cannot use a non-default
 server (unlike DFSShell)
In-Reply-To: <475642315.1140560804678.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-49?page=all ]

Michel Tourn updated HADOOP-49:
-------------------------------

    Attachment:     (was: jcjt.patch)

> JobClient cannot use a non-default server (unlike DFSShell)
> -----------------------------------------------------------
>
>          Key: HADOOP-49
>          URL: http://issues.apache.org/jira/browse/HADOOP-49
>      Project: Hadoop
>         Type: Improvement
>     Reporter: Michel Tourn

>
> JobClient cannot use a non-default Job Tracker server:
> It will use the Job Tracker specified in conf/hadoop-default.xml or conf/hadoop-site.xml
> For users with multiple Hadoop systems, it is useful to be able to specify the Job Tracker.
> Other hadoop command-line tools like DFSShell already have:
> >bin/hadoop dfs
> Usage: java DFSShell [-local | -dfs <namenode:port>]  ...
> Similarly I propose to add a -jt parameter:
> >bin/hadoop job
> JobClient -submit <job> | -status <id> | -kill <id> [-jt <jobtracker:port>|<config>]
> Where: -jt <jobtracker:port> is similar to -dfs <namenode:port>
> And:  -jt <config> will load as a final resource: hadoop-<config>.xml
> The latter syntax is discoverable by users because on failure the tool will say:
> >bin/hadoop job -kill m7n6pi -jt unknown
> Exception in thread "main" java.lang.RuntimeException: hadoop-unknown.xml not found on CLASSPATH
> Or in case of success:
> >bin/hadoop job -kill job_m7n6pi -jt myconfig
> 060221 221911 parsing file:/trunk/conf/hadoop-default.xml
> 060221 221911 parsing file:/trunk/conf/hadoop-myconfig.xml
> 060221 221911 parsing file:/trunk/conf/hadoop-site.xml
> 060221 221911 Client connection to 66.196.91.10:7020: starting
> And with a machine:port spec:
> >bin/hadoop job -kill job_m7n6pi -jt machine:8020
> 060221 222109 parsing file:/trunk/conf/hadoop-default.xml
> 060221 222109 parsing file:/trunk/conf/hadoop-site.xml
> 060221 222109 Client connection to 66.196.91.10:8020: starting
> Patch attached.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Feb 21 22:55:36 2006
Return-Path: 
 <hadoop-dev-return-204-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 47537 invoked from network); 21 Feb 2006 22:55:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 22:55:36 -0000
Received: (qmail 13175 invoked by uid 500); 21 Feb 2006 22:55:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13153 invoked by uid 500); 21 Feb 2006 22:55:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13129 invoked by uid 99); 21 Feb 2006 22:55:34 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 14:55:34 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 602EDDF
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Feb 2006 23:55:13 +0100 (CET)
Message-ID: <1047227843.1140562513391.JavaMail.jira@ajax.apache.org>
Date: Tue, 21 Feb 2006 23:55:13 +0100 (CET)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-49) JobClient cannot use a non-default
 server (unlike DFSShell)
In-Reply-To: <475642315.1140560804678.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-49?page=all ]

Michel Tourn updated HADOOP-49:
-------------------------------

    Attachment: jcjt.patch

> JobClient cannot use a non-default server (unlike DFSShell)
> -----------------------------------------------------------
>
>          Key: HADOOP-49
>          URL: http://issues.apache.org/jira/browse/HADOOP-49
>      Project: Hadoop
>         Type: Improvement
>     Reporter: Michel Tourn
>  Attachments: jcjt.patch
>
> JobClient cannot use a non-default Job Tracker server:
> It will use the Job Tracker specified in conf/hadoop-default.xml or conf/hadoop-site.xml
> For users with multiple Hadoop systems, it is useful to be able to specify the Job Tracker.
> Other hadoop command-line tools like DFSShell already have:
> >bin/hadoop dfs
> Usage: java DFSShell [-local | -dfs <namenode:port>]  ...
> Similarly I propose to add a -jt parameter:
> >bin/hadoop job
> JobClient -submit <job> | -status <id> | -kill <id> [-jt <jobtracker:port>|<config>]
> Where: -jt <jobtracker:port> is similar to -dfs <namenode:port>
> And:  -jt <config> will load as a final resource: hadoop-<config>.xml
> The latter syntax is discoverable by users because on failure the tool will say:
> >bin/hadoop job -kill m7n6pi -jt unknown
> Exception in thread "main" java.lang.RuntimeException: hadoop-unknown.xml not found on CLASSPATH
> Or in case of success:
> >bin/hadoop job -kill job_m7n6pi -jt myconfig
> 060221 221911 parsing file:/trunk/conf/hadoop-default.xml
> 060221 221911 parsing file:/trunk/conf/hadoop-myconfig.xml
> 060221 221911 parsing file:/trunk/conf/hadoop-site.xml
> 060221 221911 Client connection to 66.196.91.10:7020: starting
> And with a machine:port spec:
> >bin/hadoop job -kill job_m7n6pi -jt machine:8020
> 060221 222109 parsing file:/trunk/conf/hadoop-default.xml
> 060221 222109 parsing file:/trunk/conf/hadoop-site.xml
> 060221 222109 Client connection to 66.196.91.10:8020: starting
> Patch attached.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Feb 22 00:41:15 2006
Return-Path: 
 <hadoop-dev-return-205-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99899 invoked from network); 22 Feb 2006 00:41:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 00:41:15 -0000
Received: (qmail 66796 invoked by uid 500); 22 Feb 2006 00:41:15 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66779 invoked by uid 500); 22 Feb 2006 00:41:15 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66770 invoked by uid 99); 22 Feb 2006 00:41:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 16:41:15 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.122.60.61] (HELO mslinux.media-style.com) (212.122.60.61)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 16:41:13 -0800
Received: from localhost (localhost [127.0.0.1])
	by mslinux.media-style.com (Postfix) with ESMTP id 637B91444C0
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Feb 2006 01:35:29 +0100 (CET)
Received: from mslinux.media-style.com ([127.0.0.1])
	by localhost (mslinux.media-style.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 11055-09 for <hadoop-dev@lucene.apache.org>;
	Wed, 22 Feb 2006 01:35:29 +0100 (CET)
Received: from [192.168.8.4] (dslb-084-059-214-013.pools.arcor-ip.net
 [84.59.214.13])
	by mslinux.media-style.com (Postfix) with ESMTP id B37ED1444BB
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Feb 2006 01:35:28 +0100 (CET)
Mime-Version: 1.0 (Apple Message framework v749)
Content-Transfer-Encoding: 7bit
Message-Id: <9A62CA55-D973-4266-9C39-990AE3D79803@media-style.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: hadoop-dev@lucene.apache.org
From: Stefan Groschupf <sg@media-style.com>
Subject: pollForTaskWithClosedJob return only one taskId
Date: Wed, 22 Feb 2006 01:40:47 +0100
X-Mailer: Apple Mail (2.749)
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at media-style.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi hadoop developers,

sorry to ask but there is something in the code I'm not clearly  
understand.
In a small setup it could happen that one tasktracker is running two  
tasks from the same job as far I understand the code.
When the job failed the tracker need to 'shutdown' potential still  
running tasks. He do so until offering services (Tasktracker line: 286).
What is confusing me is that the method:  
jobClient.pollForTaskWithClosedJob(taskTrackerName) only returns one  
String but not a string array.
Since there are potential more than one task to stop shouldn't the  
method return an array of taskid's?

Sure the other still running jobs will be closed in each iteration of  
calling offering job, but does that makes sense? In general that just  
holds the tasktrackers more busy  than necessary.
Do I may be miss something or could that be improved?

Thanks for any light!
Stefan


---------------------------------------------
blog: http://www.find23.org
company: http://www.media-style.com



From MAILER-DAEMON Wed Feb 22 06:08:22 2006
Return-Path: 
 <hadoop-dev-return-206-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33810 invoked from network); 22 Feb 2006 06:08:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 06:08:22 -0000
Received: (qmail 45121 invoked by uid 500); 22 Feb 2006 06:08:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 45079 invoked by uid 500); 22 Feb 2006 06:08:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 45011 invoked by uid 99); 22 Feb 2006 06:08:15 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 22:08:13 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id DEBACDF
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Feb 2006 07:07:52 +0100 (CET)
Message-ID: <2143700087.1140588472910.JavaMail.jira@ajax.apache.org>
Date: Wed, 22 Feb 2006 07:07:52 +0100 (CET)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-45) JobTracker should log task errors
In-Reply-To: <413270226.1140559769984.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-45?page=comments#action_12367309 ] 

eric baldeschwieler commented on HADOOP-45:
-------------------------------------------

And this log should be in the DFS output directory, so there is a record.

> JobTracker should log task errors
> ---------------------------------
>
>          Key: HADOOP-45
>          URL: http://issues.apache.org/jira/browse/HADOOP-45
>      Project: Hadoop
>         Type: Improvement
>   Components: mapred
>     Versions: 0.1
>     Reporter: Doug Cutting
>     Assignee: Sameer Paranjpye
>      Fix For: 0.1

>
> Task errors are currently propagated to the JobTracker and viewable in the web interface but they are not logged.  These should be logged as well.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Feb 22 19:33:01 2006
Return-Path: 
 <hadoop-dev-return-207-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 89642 invoked from network); 22 Feb 2006 19:33:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 19:33:01 -0000
Received: (qmail 39089 invoked by uid 500); 22 Feb 2006 19:33:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 39038 invoked by uid 500); 22 Feb 2006 19:33:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 39013 invoked by uid 99); 22 Feb 2006 19:33:00 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 11:33:00 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 5FB5BDC
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Feb 2006 20:32:39 +0100 (CET)
Message-ID: <1222200503.1140636759192.JavaMail.jira@ajax.apache.org>
Date: Wed, 22 Feb 2006 20:32:39 +0100 (CET)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-45) JobTracker should log task errors
In-Reply-To: <413270226.1140559769984.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-45?page=comments#action_12367387 ] 

eric baldeschwieler commented on HADOOP-45:
-------------------------------------------

On Feb 22, 2006, at 10:51 AM, Michel Tourn wrote:
...
Sounds like a good default.
If at all possible: please make this kind of side-effects configurable:
  JobConf.setLogPath("/special/logs/");
...

----

Good point, I'd suggest a default of "<outputDir>/_logs/".  Make sense?

e14

> JobTracker should log task errors
> ---------------------------------
>
>          Key: HADOOP-45
>          URL: http://issues.apache.org/jira/browse/HADOOP-45
>      Project: Hadoop
>         Type: Improvement
>   Components: mapred
>     Versions: 0.1
>     Reporter: Doug Cutting
>     Assignee: Sameer Paranjpye
>      Fix For: 0.1

>
> Task errors are currently propagated to the JobTracker and viewable in the web interface but they are not logged.  These should be logged as well.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Feb 22 20:08:06 2006
Return-Path: 
 <hadoop-dev-return-208-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 15745 invoked from network); 22 Feb 2006 20:08:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 20:08:06 -0000
Received: (qmail 27192 invoked by uid 500); 22 Feb 2006 20:08:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 27140 invoked by uid 500); 22 Feb 2006 20:08:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26968 invoked by uid 99); 22 Feb 2006 20:08:00 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 12:08:00 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 9C31DE1
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Feb 2006 21:07:39 +0100 (CET)
Message-ID: <1391540140.1140638859637.JavaMail.jira@ajax.apache.org>
Date: Wed, 22 Feb 2006 21:07:39 +0100 (CET)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-51) per-file replication counts
In-Reply-To: <1529480135.1140561049677.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-51?page=all ]

Sameer Paranjpye reassigned HADOOP-51:
--------------------------------------

    Assign To: Konstantin Shvachko  (was: Sameer Paranjpye)

> per-file replication counts
> ---------------------------
>
>          Key: HADOOP-51
>          URL: http://issues.apache.org/jira/browse/HADOOP-51
>      Project: Hadoop
>         Type: New Feature
>   Components: dfs
>     Versions: 0.1
>     Reporter: Doug Cutting
>     Assignee: Konstantin Shvachko
>      Fix For: 0.1

>
> It should be possible to specify different replication counts for different files.  Perhaps an option when creating a new file should be the desired replication count.  MapReduce should take advantage of this feature so that job.xml and job.jar files, which are frequently accessed by lots of machines, are more highly replicated than large data files.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Feb 22 20:16:06 2006
Return-Path: 
 <hadoop-dev-return-209-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 21555 invoked from network); 22 Feb 2006 20:16:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 20:16:06 -0000
Received: (qmail 43049 invoked by uid 500); 22 Feb 2006 20:16:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 43033 invoked by uid 500); 22 Feb 2006 20:16:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 43024 invoked by uid 99); 22 Feb 2006 20:16:04 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 12:16:01 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 7A4DAE0
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Feb 2006 21:15:40 +0100 (CET)
Message-ID: <384032328.1140639340499.JavaMail.jira@ajax.apache.org>
Date: Wed, 22 Feb 2006 21:15:40 +0100 (CET)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-52) mapred input and output dirs must be
 absolute
In-Reply-To: <1415168910.1140561514361.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-52?page=all ]

Sameer Paranjpye reassigned HADOOP-52:
--------------------------------------

    Assign To: Owen O'Malley  (was: Sameer Paranjpye)

> mapred input and output dirs must be absolute
> ---------------------------------------------
>
>          Key: HADOOP-52
>          URL: http://issues.apache.org/jira/browse/HADOOP-52
>      Project: Hadoop
>         Type: Bug
>   Components: mapred
>     Versions: 0.1
>     Reporter: Doug Cutting
>     Assignee: Owen O'Malley
>      Fix For: 0.1

>
> DFS converts relative pathnames to be under /user/$USER.  But MapReduce jobs may be submitted by a different user than is running the jobtracker and tasktracker.  Thus relative paths must be resolved before a job is submitted, so that only absolute paths are seen on the job tracker and tasktracker.  I think the simplest way to fix this is to make JobConf.setInputDir(), setOutputDir(), etc. resolve relative pathnames. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Feb 22 20:18:03 2006
Return-Path: 
 <hadoop-dev-return-210-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23123 invoked from network); 22 Feb 2006 20:18:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 20:18:03 -0000
Received: (qmail 47927 invoked by uid 500); 22 Feb 2006 20:18:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47855 invoked by uid 500); 22 Feb 2006 20:18:02 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47839 invoked by uid 99); 22 Feb 2006 20:18:01 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 12:17:59 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 93FC6DD
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Feb 2006 21:17:38 +0100 (CET)
Message-ID: <531685724.1140639458604.JavaMail.jira@ajax.apache.org>
Date: Wed, 22 Feb 2006 21:17:38 +0100 (CET)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-47) include records/second and
 bytes/second in  task reports
In-Reply-To: <579254540.1140560374384.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-47?page=all ]

Sameer Paranjpye reassigned HADOOP-47:
--------------------------------------

    Assign To: Owen O'Malley  (was: Sameer Paranjpye)

> include records/second and bytes/second in  task reports
> --------------------------------------------------------
>
>          Key: HADOOP-47
>          URL: http://issues.apache.org/jira/browse/HADOOP-47
>      Project: Hadoop
>         Type: New Feature
>   Components: mapred
>     Versions: 0.1
>     Reporter: Doug Cutting
>     Assignee: Owen O'Malley
>      Fix For: 0.1

>
> TaskReport should include fields for total records processed, total bytes processed and total seconds of task execution.  These should also be reported in the web ui, as bytes/second and records/second.  The job display could sum these to report total bytes/second and records/second for map and reduce.  Better yet would be a graph displaying the total rates over the course of the job...

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Feb 22 20:18:03 2006
Return-Path: 
 <hadoop-dev-return-211-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23125 invoked from network); 22 Feb 2006 20:18:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 20:18:03 -0000
Received: (qmail 47984 invoked by uid 500); 22 Feb 2006 20:18:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47879 invoked by uid 500); 22 Feb 2006 20:18:02 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47856 invoked by uid 99); 22 Feb 2006 20:18:02 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 12:18:02 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id F1287126
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Feb 2006 21:17:40 +0100 (CET)
Message-ID: <1710139762.1140639460985.JavaMail.jira@ajax.apache.org>
Date: Wed, 22 Feb 2006 21:17:40 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-16) RPC call times out while indexing map
 task is computing splits
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-16?page=all ]

Doug Cutting updated HADOOP-16:
-------------------------------

    Fix Version: 0.1
        Version: 0.1
      Assign To: Mike Cafarella

> RPC call times out while indexing map task is computing splits
> --------------------------------------------------------------
>
>          Key: HADOOP-16
>          URL: http://issues.apache.org/jira/browse/HADOOP-16
>      Project: Hadoop
>         Type: Bug
>   Components: mapred
>     Versions: 0.1
>  Environment: MapReduce multi-computer crawl environment: 11 machines (1 master with JobTracker/NameNode, 10 slaves with TaskTrackers/DataNodes)
>     Reporter: Chris Schneider
>     Assignee: Mike Cafarella
>      Fix For: 0.1
>  Attachments: patch.16
>
> We've been using Nutch 0.8 (MapReduce) to perform some internet crawling. Things seemed to be going well until...
> 060129 222409 Lost tracker 'tracker_56288'
> 060129 222409 Task 'task_m_10gs5f' has been lost.
> 060129 222409 Task 'task_m_10qhzr' has been lost.
>    ........
>    ........
> 060129 222409 Task 'task_r_zggbwu' has been lost.
> 060129 222409 Task 'task_r_zh8dao' has been lost.
> 060129 222455 Server handler 8 on 8010 caught: java.net.SocketException: Socket closed
> java.net.SocketException: Socket closed
>         at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:99)
>         at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
>         at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
>         at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
>         at java.io.DataOutputStream.flush(DataOutputStream.java:106)
>         at org.apache.nutch.ipc.Server$Handler.run(Server.java:216)
> 060129 222455 Adding task 'task_m_cia5po' to set for tracker 'tracker_56288'
> 060129 223711 Adding task 'task_m_ffv59i' to set for tracker 'tracker_25647'
> I'm hoping that someone could explain why task_m_cia5po got added to tracker_56288 after this tracker was lost.
> The Crawl .main process died with the following output:
> 060129 221129 Indexer: adding segment: /user/crawler/crawl-20060129091444/segments/20060129200246
> Exception in thread "main" java.io.IOException: timed out waiting for response
>     at org.apache.nutch.ipc.Client.call(Client.java:296)
>     at org.apache.nutch.ipc.RPC$Invoker.invoke(RPC.java:127)
>     at $Proxy1.submitJob(Unknown Source)
>     at org.apache.nutch.mapred.JobClient.submitJob(JobClient.java:259)
>     at org.apache.nutch.mapred.JobClient.runJob(JobClient.java:288)
>     at org.apache.nutch.indexer.Indexer.index(Indexer.java:263)
>     at org.apache.nutch.crawl.Crawl.main(Crawl.java:127)
> However, it definitely seems as if the JobTracker is still waiting for the job to finish (no failed jobs).
> Doug Cutting's response:
> The bug here is that the RPC call times out while the map task is computing splits.  The fix is that the job tracker should not compute splits until after it has returned from the submitJob RPC.  Please submit a bug in Jira to help remind us to fix this.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Feb 22 20:18:05 2006
Return-Path: 
 <hadoop-dev-return-212-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23164 invoked from network); 22 Feb 2006 20:18:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 20:18:05 -0000
Received: (qmail 48027 invoked by uid 500); 22 Feb 2006 20:18:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 48005 invoked by uid 500); 22 Feb 2006 20:18:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47990 invoked by uid 99); 22 Feb 2006 20:18:04 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 12:18:03 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id E98C8184
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Feb 2006 21:17:42 +0100 (CET)
Message-ID: <1187666590.1140639462954.JavaMail.jira@ajax.apache.org>
Date: Wed, 22 Feb 2006 21:17:42 +0100 (CET)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-46) user-specified job names
In-Reply-To: <1072400095.1140559938030.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-46?page=all ]

Sameer Paranjpye reassigned HADOOP-46:
--------------------------------------

    Assign To: Owen O'Malley  (was: Sameer Paranjpye)

> user-specified job names
> ------------------------
>
>          Key: HADOOP-46
>          URL: http://issues.apache.org/jira/browse/HADOOP-46
>      Project: Hadoop
>         Type: New Feature
>   Components: mapred
>     Versions: 0.1
>     Reporter: Doug Cutting
>     Assignee: Owen O'Malley
>      Fix For: 0.1

>
> It should be possible to supply a name when a job is submitted.  This can then be used in the web ui to describe the job.  Perhaps this should just be a job property (mapred.job.name).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Feb 22 20:18:09 2006
Return-Path: 
 <hadoop-dev-return-213-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23203 invoked from network); 22 Feb 2006 20:18:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 20:18:09 -0000
Received: (qmail 48107 invoked by uid 500); 22 Feb 2006 20:18:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 48091 invoked by uid 500); 22 Feb 2006 20:18:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 48081 invoked by uid 99); 22 Feb 2006 20:18:08 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 12:18:06 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id F1B8A18E
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Feb 2006 21:17:45 +0100 (CET)
Message-ID: <1040878774.1140639465988.JavaMail.jira@ajax.apache.org>
Date: Wed, 22 Feb 2006 21:17:45 +0100 (CET)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-45) JobTracker should log task errors
In-Reply-To: <413270226.1140559769984.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-45?page=all ]

Sameer Paranjpye reassigned HADOOP-45:
--------------------------------------

    Assign To: Owen O'Malley  (was: Sameer Paranjpye)

> JobTracker should log task errors
> ---------------------------------
>
>          Key: HADOOP-45
>          URL: http://issues.apache.org/jira/browse/HADOOP-45
>      Project: Hadoop
>         Type: Improvement
>   Components: mapred
>     Versions: 0.1
>     Reporter: Doug Cutting
>     Assignee: Owen O'Malley
>      Fix For: 0.1

>
> Task errors are currently propagated to the JobTracker and viewable in the web interface but they are not logged.  These should be logged as well.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Feb 22 20:20:03 2006
Return-Path: 
 <hadoop-dev-return-214-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 24227 invoked from network); 22 Feb 2006 20:20:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 20:20:03 -0000
Received: (qmail 50552 invoked by uid 500); 22 Feb 2006 20:20:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 50482 invoked by uid 500); 22 Feb 2006 20:20:02 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 50461 invoked by uid 99); 22 Feb 2006 20:20:02 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 12:19:59 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 9E748DE
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Feb 2006 21:19:38 +0100 (CET)
Message-ID: <1026854528.1140639578646.JavaMail.jira@ajax.apache.org>
Date: Wed, 22 Feb 2006 21:19:38 +0100 (CET)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-44) RPC exceptions should include remote
 stack trace
In-Reply-To: <50328208.1140559768195.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-44?page=all ]

Sameer Paranjpye reassigned HADOOP-44:
--------------------------------------

    Assign To: Owen O'Malley  (was: Sameer Paranjpye)

> RPC exceptions should include remote stack trace
> ------------------------------------------------
>
>          Key: HADOOP-44
>          URL: http://issues.apache.org/jira/browse/HADOOP-44
>      Project: Hadoop
>         Type: New Feature
>   Components: ipc
>     Versions: 0.1
>     Reporter: Doug Cutting
>     Assignee: Owen O'Malley
>      Fix For: 0.1

>
> Remote exceptions currently only report the exception string.  Instead they should report the entire remote stack trace, as a string, to facilitate debugging.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Feb 22 20:27:04 2006
Return-Path: 
 <hadoop-dev-return-215-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 35001 invoked from network); 22 Feb 2006 20:27:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 20:27:04 -0000
Received: (qmail 62830 invoked by uid 500); 22 Feb 2006 20:27:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62809 invoked by uid 500); 22 Feb 2006 20:27:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62795 invoked by uid 99); 22 Feb 2006 20:27:04 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 12:27:03 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 8194DDC
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Feb 2006 21:26:42 +0100 (CET)
Message-ID: <930425999.1140640002324.JavaMail.jira@ajax.apache.org>
Date: Wed, 22 Feb 2006 21:26:42 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Reopened: (HADOOP-16) RPC call times out while indexing map
 task is computing splits
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-16?page=all ]
     
Doug Cutting reopened HADOOP-16:
--------------------------------


I'm re-opening this & assigning it to Mike.

I think we can fix this by changing the TaskTracker to incrementally calculate things, as I alluded above.  The TaskTracker should avoid ever doing anything that might take very long.  RPC timeouts to the TaskTracker are very bad and must be avoided.

We can maintain a mapping of taskTracker->split, initially empty, and a queue of splits, initially filled with all of the splits.  (If basic split-generation is too expensive, since it calls file-length on each input file,, then we can eventually change the split API into a generator, which incrementally enumerates splits and use that in place of this queue.)  When a request for a task arrives from a tasktracker we can first examine the table.  If any splits are present for the calling tracker, then we return one and remove it from the table.  Otherwise we pop a constant number of splits (10?) off of the queue, enumerate the tasktrackers that host each split by calling the namenode, and add entries to the table.  Then we consult the table again.  In most cases (many more splits than tasktrackers) we should identify suitable splits.  If we fail then we assign a randomly selected, non-local split to the tasktracker.  Make sense?

> RPC call times out while indexing map task is computing splits
> --------------------------------------------------------------
>
>          Key: HADOOP-16
>          URL: http://issues.apache.org/jira/browse/HADOOP-16
>      Project: Hadoop
>         Type: Bug
>   Components: mapred
>     Versions: 0.1
>  Environment: MapReduce multi-computer crawl environment: 11 machines (1 master with JobTracker/NameNode, 10 slaves with TaskTrackers/DataNodes)
>     Reporter: Chris Schneider
>     Assignee: Mike Cafarella
>      Fix For: 0.1
>  Attachments: patch.16
>
> We've been using Nutch 0.8 (MapReduce) to perform some internet crawling. Things seemed to be going well until...
> 060129 222409 Lost tracker 'tracker_56288'
> 060129 222409 Task 'task_m_10gs5f' has been lost.
> 060129 222409 Task 'task_m_10qhzr' has been lost.
>    ........
>    ........
> 060129 222409 Task 'task_r_zggbwu' has been lost.
> 060129 222409 Task 'task_r_zh8dao' has been lost.
> 060129 222455 Server handler 8 on 8010 caught: java.net.SocketException: Socket closed
> java.net.SocketException: Socket closed
>         at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:99)
>         at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
>         at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
>         at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
>         at java.io.DataOutputStream.flush(DataOutputStream.java:106)
>         at org.apache.nutch.ipc.Server$Handler.run(Server.java:216)
> 060129 222455 Adding task 'task_m_cia5po' to set for tracker 'tracker_56288'
> 060129 223711 Adding task 'task_m_ffv59i' to set for tracker 'tracker_25647'
> I'm hoping that someone could explain why task_m_cia5po got added to tracker_56288 after this tracker was lost.
> The Crawl .main process died with the following output:
> 060129 221129 Indexer: adding segment: /user/crawler/crawl-20060129091444/segments/20060129200246
> Exception in thread "main" java.io.IOException: timed out waiting for response
>     at org.apache.nutch.ipc.Client.call(Client.java:296)
>     at org.apache.nutch.ipc.RPC$Invoker.invoke(RPC.java:127)
>     at $Proxy1.submitJob(Unknown Source)
>     at org.apache.nutch.mapred.JobClient.submitJob(JobClient.java:259)
>     at org.apache.nutch.mapred.JobClient.runJob(JobClient.java:288)
>     at org.apache.nutch.indexer.Indexer.index(Indexer.java:263)
>     at org.apache.nutch.crawl.Crawl.main(Crawl.java:127)
> However, it definitely seems as if the JobTracker is still waiting for the job to finish (no failed jobs).
> Doug Cutting's response:
> The bug here is that the RPC call times out while the map task is computing splits.  The fix is that the job tracker should not compute splits until after it has returned from the submitJob RPC.  Please submit a bug in Jira to help remind us to fix this.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Feb 22 20:33:09 2006
Return-Path: 
 <hadoop-dev-return-216-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 42127 invoked from network); 22 Feb 2006 20:33:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 20:33:09 -0000
Received: (qmail 75202 invoked by uid 500); 22 Feb 2006 20:33:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75135 invoked by uid 500); 22 Feb 2006 20:33:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75107 invoked by uid 99); 22 Feb 2006 20:33:02 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 12:33:00 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 87D87DC
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Feb 2006 21:32:39 +0100 (CET)
Message-ID: <13654009.1140640359390.JavaMail.jira@ajax.apache.org>
Date: Wed, 22 Feb 2006 21:32:39 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-53) MapReduce log files should be storable
 in dfs.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

MapReduce log files should be storable in dfs.
----------------------------------------------

         Key: HADOOP-53
         URL: http://issues.apache.org/jira/browse/HADOOP-53
     Project: Hadoop
        Type: New Feature
  Components: mapred  
    Versions: 0.2    
    Reporter: Doug Cutting
 Assigned to: Sameer Paranjpye 
     Fix For: 0.2


It should be possible to cause a job's log output to be stored in dfs.  The jobtracker's log output and (optionally) all tasktracker log output related to a job should be storable in a job-specified dfs directory.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Feb 22 20:35:08 2006
Return-Path: 
 <hadoop-dev-return-217-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43012 invoked from network); 22 Feb 2006 20:35:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 20:35:08 -0000
Received: (qmail 76406 invoked by uid 500); 22 Feb 2006 20:35:07 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 76117 invoked by uid 500); 22 Feb 2006 20:35:06 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 76098 invoked by uid 99); 22 Feb 2006 20:35:06 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 12:35:05 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id BCEA5E0
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Feb 2006 21:34:44 +0100 (CET)
Message-ID: <1328500739.1140640484771.JavaMail.jira@ajax.apache.org>
Date: Wed, 22 Feb 2006 21:34:44 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-45) JobTracker should log task errors
In-Reply-To: <413270226.1140559769984.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-45?page=comments#action_12367405 ] 

Doug Cutting commented on HADOOP-45:
------------------------------------

I meant HADOOP-53.

> JobTracker should log task errors
> ---------------------------------
>
>          Key: HADOOP-45
>          URL: http://issues.apache.org/jira/browse/HADOOP-45
>      Project: Hadoop
>         Type: Improvement
>   Components: mapred
>     Versions: 0.1
>     Reporter: Doug Cutting
>     Assignee: Owen O'Malley
>      Fix For: 0.1

>
> Task errors are currently propagated to the JobTracker and viewable in the web interface but they are not logged.  These should be logged as well.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Feb 22 20:37:01 2006
Return-Path: 
 <hadoop-dev-return-218-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 44701 invoked from network); 22 Feb 2006 20:37:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 20:37:01 -0000
Received: (qmail 77719 invoked by uid 500); 22 Feb 2006 20:37:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 77702 invoked by uid 500); 22 Feb 2006 20:37:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 77687 invoked by uid 99); 22 Feb 2006 20:37:01 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 12:36:59 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id C6C62DC
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Feb 2006 21:36:38 +0100 (CET)
Message-ID: <1874133287.1140640598709.JavaMail.jira@ajax.apache.org>
Date: Wed, 22 Feb 2006 21:36:38 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-53) MapReduce log files should be storable
 in dfs.
In-Reply-To: <13654009.1140640359390.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-53?page=all ]

Doug Cutting updated HADOOP-53:
-------------------------------

    Comment: was deleted

> MapReduce log files should be storable in dfs.
> ----------------------------------------------
>
>          Key: HADOOP-53
>          URL: http://issues.apache.org/jira/browse/HADOOP-53
>      Project: Hadoop
>         Type: New Feature
>   Components: mapred
>     Versions: 0.2
>     Reporter: Doug Cutting
>     Assignee: Sameer Paranjpye
>      Fix For: 0.2

>
> It should be possible to cause a job's log output to be stored in dfs.  The jobtracker's log output and (optionally) all tasktracker log output related to a job should be storable in a job-specified dfs directory.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Feb 22 20:41:46 2006
Return-Path: 
 <hadoop-dev-return-219-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 48403 invoked from network); 22 Feb 2006 20:41:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 20:41:46 -0000
Received: (qmail 84311 invoked by uid 500); 22 Feb 2006 20:41:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 84295 invoked by uid 500); 22 Feb 2006 20:41:44 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 84284 invoked by uid 99); 22 Feb 2006 20:41:44 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 12:41:42 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 76C1CDD
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Feb 2006 21:41:20 +0100 (CET)
Message-ID: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
Date: Wed, 22 Feb 2006 21:41:20 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

SequenceFile should compress blocks, not individual entries
-----------------------------------------------------------

         Key: HADOOP-54
         URL: http://issues.apache.org/jira/browse/HADOOP-54
     Project: Hadoop
        Type: Improvement
  Components: io  
    Versions: 0.2    
    Reporter: Doug Cutting
 Assigned to: Michel Tourn 
     Fix For: 0.2


SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Feb 22 20:45:04 2006
Return-Path: 
 <hadoop-dev-return-220-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51126 invoked from network); 22 Feb 2006 20:45:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 20:45:04 -0000
Received: (qmail 90796 invoked by uid 500); 22 Feb 2006 20:45:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 90773 invoked by uid 500); 22 Feb 2006 20:45:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 90762 invoked by uid 99); 22 Feb 2006 20:45:02 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 12:45:00 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id C6DBBDD
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Feb 2006 21:44:39 +0100 (CET)
Message-ID: <2146934574.1140641079812.JavaMail.jira@ajax.apache.org>
Date: Wed, 22 Feb 2006 21:44:39 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-32) Creating job with InputDir set to
 non-existant directory locks up jobtracker
In-Reply-To: <1357310343.1139555336530.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-32?page=all ]

Doug Cutting updated HADOOP-32:
-------------------------------

    Component: mapred

> Creating job with InputDir set to non-existant directory locks up jobtracker
> ----------------------------------------------------------------------------
>
>          Key: HADOOP-32
>          URL: http://issues.apache.org/jira/browse/HADOOP-32
>      Project: Hadoop
>         Type: Bug
>   Components: mapred
>  Environment: hadoop-trunk, running distributed map reduce
>     Reporter: Bryan Pendleton

>
> This, in the very least, affects anything using the default listFiles() from InputFormatBase. If no files are enumerated, an exception is thrown... but the JobTracker keeps attempting to run listFiles() for this job. Trying to stop the job with hadoop job -kill job_name just results in timeouts, and further started jobs also don't progress. This happens every single time with, say, "wordcount", and a non-existent input path.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Feb 22 20:45:04 2006
Return-Path: 
 <hadoop-dev-return-221-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51140 invoked from network); 22 Feb 2006 20:45:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 20:45:04 -0000
Received: (qmail 90847 invoked by uid 500); 22 Feb 2006 20:45:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 90783 invoked by uid 500); 22 Feb 2006 20:45:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 90764 invoked by uid 99); 22 Feb 2006 20:45:03 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 12:45:01 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id AD045DF
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Feb 2006 21:44:40 +0100 (CET)
Message-ID: <907709719.1140641080706.JavaMail.jira@ajax.apache.org>
Date: Wed, 22 Feb 2006 21:44:40 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-49) JobClient cannot use a non-default
 server (unlike DFSShell)
In-Reply-To: <475642315.1140560804678.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-49?page=all ]

Doug Cutting updated HADOOP-49:
-------------------------------

    Component: mapred

> JobClient cannot use a non-default server (unlike DFSShell)
> -----------------------------------------------------------
>
>          Key: HADOOP-49
>          URL: http://issues.apache.org/jira/browse/HADOOP-49
>      Project: Hadoop
>         Type: Improvement
>   Components: mapred
>     Reporter: Michel Tourn
>  Attachments: jcjt.patch
>
> JobClient cannot use a non-default Job Tracker server:
> It will use the Job Tracker specified in conf/hadoop-default.xml or conf/hadoop-site.xml
> For users with multiple Hadoop systems, it is useful to be able to specify the Job Tracker.
> Other hadoop command-line tools like DFSShell already have:
> >bin/hadoop dfs
> Usage: java DFSShell [-local | -dfs <namenode:port>]  ...
> Similarly I propose to add a -jt parameter:
> >bin/hadoop job
> JobClient -submit <job> | -status <id> | -kill <id> [-jt <jobtracker:port>|<config>]
> Where: -jt <jobtracker:port> is similar to -dfs <namenode:port>
> And:  -jt <config> will load as a final resource: hadoop-<config>.xml
> The latter syntax is discoverable by users because on failure the tool will say:
> >bin/hadoop job -kill m7n6pi -jt unknown
> Exception in thread "main" java.lang.RuntimeException: hadoop-unknown.xml not found on CLASSPATH
> Or in case of success:
> >bin/hadoop job -kill job_m7n6pi -jt myconfig
> 060221 221911 parsing file:/trunk/conf/hadoop-default.xml
> 060221 221911 parsing file:/trunk/conf/hadoop-myconfig.xml
> 060221 221911 parsing file:/trunk/conf/hadoop-site.xml
> 060221 221911 Client connection to 66.196.91.10:7020: starting
> And with a machine:port spec:
> >bin/hadoop job -kill job_m7n6pi -jt machine:8020
> 060221 222109 parsing file:/trunk/conf/hadoop-default.xml
> 060221 222109 parsing file:/trunk/conf/hadoop-site.xml
> 060221 222109 Client connection to 66.196.91.10:8020: starting
> Patch attached.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Feb 22 21:34:36 2006
Return-Path: 
 <hadoop-dev-return-222-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 5062 invoked from network); 22 Feb 2006 21:34:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 21:34:36 -0000
Received: (qmail 12765 invoked by uid 500); 22 Feb 2006 21:34:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 12732 invoked by uid 500); 22 Feb 2006 21:34:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 12723 invoked by uid 99); 22 Feb 2006 21:34:35 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 13:34:34 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 977D7DE
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Feb 2006 22:34:13 +0100 (CET)
Message-ID: <916583541.1140644053618.JavaMail.jira@ajax.apache.org>
Date: Wed, 22 Feb 2006 22:34:13 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-16) RPC call times out while indexing map
 task is computing splits
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-16?page=comments#action_12367417 ] 

Doug Cutting commented on HADOOP-16:
------------------------------------

Eric Baldeschwieler wrote:
> [...] why not just dedicate a thread  
> to planning and then load a complete plan?  That can produce more  
> optimal placement and a simpler to understand initialization sequence.

A separate thread in the JobTracker?  That could be a good approach.  We'd have a queue of submitted but as-yet unplanned jobs.  The thread can then pop a job off the queue, compute its splits, then start populating a tasktracker->split table.  When tasktrackers poll for work they can consult this table, potentially while the thread is still populating it.

I'm hesitant to move this out of the JobTracker into the TaskTracker, since that introduces complexity.  But a single thread in the JobTracker should be simple to add and should mostly solve this.  +1

> RPC call times out while indexing map task is computing splits
> --------------------------------------------------------------
>
>          Key: HADOOP-16
>          URL: http://issues.apache.org/jira/browse/HADOOP-16
>      Project: Hadoop
>         Type: Bug
>   Components: mapred
>     Versions: 0.1
>  Environment: MapReduce multi-computer crawl environment: 11 machines (1 master with JobTracker/NameNode, 10 slaves with TaskTrackers/DataNodes)
>     Reporter: Chris Schneider
>     Assignee: Mike Cafarella
>      Fix For: 0.1
>  Attachments: patch.16
>
> We've been using Nutch 0.8 (MapReduce) to perform some internet crawling. Things seemed to be going well until...
> 060129 222409 Lost tracker 'tracker_56288'
> 060129 222409 Task 'task_m_10gs5f' has been lost.
> 060129 222409 Task 'task_m_10qhzr' has been lost.
>    ........
>    ........
> 060129 222409 Task 'task_r_zggbwu' has been lost.
> 060129 222409 Task 'task_r_zh8dao' has been lost.
> 060129 222455 Server handler 8 on 8010 caught: java.net.SocketException: Socket closed
> java.net.SocketException: Socket closed
>         at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:99)
>         at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
>         at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
>         at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
>         at java.io.DataOutputStream.flush(DataOutputStream.java:106)
>         at org.apache.nutch.ipc.Server$Handler.run(Server.java:216)
> 060129 222455 Adding task 'task_m_cia5po' to set for tracker 'tracker_56288'
> 060129 223711 Adding task 'task_m_ffv59i' to set for tracker 'tracker_25647'
> I'm hoping that someone could explain why task_m_cia5po got added to tracker_56288 after this tracker was lost.
> The Crawl .main process died with the following output:
> 060129 221129 Indexer: adding segment: /user/crawler/crawl-20060129091444/segments/20060129200246
> Exception in thread "main" java.io.IOException: timed out waiting for response
>     at org.apache.nutch.ipc.Client.call(Client.java:296)
>     at org.apache.nutch.ipc.RPC$Invoker.invoke(RPC.java:127)
>     at $Proxy1.submitJob(Unknown Source)
>     at org.apache.nutch.mapred.JobClient.submitJob(JobClient.java:259)
>     at org.apache.nutch.mapred.JobClient.runJob(JobClient.java:288)
>     at org.apache.nutch.indexer.Indexer.index(Indexer.java:263)
>     at org.apache.nutch.crawl.Crawl.main(Crawl.java:127)
> However, it definitely seems as if the JobTracker is still waiting for the job to finish (no failed jobs).
> Doug Cutting's response:
> The bug here is that the RPC call times out while the map task is computing splits.  The fix is that the job tracker should not compute splits until after it has returned from the submitJob RPC.  Please submit a bug in Jira to help remind us to fix this.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Feb 22 22:04:04 2006
Return-Path: 
 <hadoop-dev-return-223-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 35156 invoked from network); 22 Feb 2006 22:04:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 22:04:04 -0000
Received: (qmail 93923 invoked by uid 500); 22 Feb 2006 22:04:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 93881 invoked by uid 500); 22 Feb 2006 22:04:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 93851 invoked by uid 99); 22 Feb 2006 22:03:59 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 14:03:59 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 5B434DF
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Feb 2006 23:03:38 +0100 (CET)
Message-ID: <403269154.1140645818371.JavaMail.jira@ajax.apache.org>
Date: Wed, 22 Feb 2006 23:03:38 +0100 (CET)
From: "Bryan Pendleton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-16) RPC call times out while indexing map
 task is computing splits
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-16?page=comments#action_12367421 ] 

Bryan Pendleton commented on HADOOP-16:
---------------------------------------

My only concern is that this doesn't scale as well for really huge jobs, but, if implemented as you suggest (pre-filling, hand out non-matching jobs when you don't have matched jobs) seems like a reasonable trade off. 

I'd still think it'd be nice to better handle the case of newly-discovered tasktrackers, but that's probably much more minor than other scaling/responsiveness issues. Maybe a future enhancement for the JobTracker thread that does this work.

> RPC call times out while indexing map task is computing splits
> --------------------------------------------------------------
>
>          Key: HADOOP-16
>          URL: http://issues.apache.org/jira/browse/HADOOP-16
>      Project: Hadoop
>         Type: Bug
>   Components: mapred
>     Versions: 0.1
>  Environment: MapReduce multi-computer crawl environment: 11 machines (1 master with JobTracker/NameNode, 10 slaves with TaskTrackers/DataNodes)
>     Reporter: Chris Schneider
>     Assignee: Mike Cafarella
>      Fix For: 0.1
>  Attachments: patch.16
>
> We've been using Nutch 0.8 (MapReduce) to perform some internet crawling. Things seemed to be going well until...
> 060129 222409 Lost tracker 'tracker_56288'
> 060129 222409 Task 'task_m_10gs5f' has been lost.
> 060129 222409 Task 'task_m_10qhzr' has been lost.
>    ........
>    ........
> 060129 222409 Task 'task_r_zggbwu' has been lost.
> 060129 222409 Task 'task_r_zh8dao' has been lost.
> 060129 222455 Server handler 8 on 8010 caught: java.net.SocketException: Socket closed
> java.net.SocketException: Socket closed
>         at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:99)
>         at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
>         at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
>         at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
>         at java.io.DataOutputStream.flush(DataOutputStream.java:106)
>         at org.apache.nutch.ipc.Server$Handler.run(Server.java:216)
> 060129 222455 Adding task 'task_m_cia5po' to set for tracker 'tracker_56288'
> 060129 223711 Adding task 'task_m_ffv59i' to set for tracker 'tracker_25647'
> I'm hoping that someone could explain why task_m_cia5po got added to tracker_56288 after this tracker was lost.
> The Crawl .main process died with the following output:
> 060129 221129 Indexer: adding segment: /user/crawler/crawl-20060129091444/segments/20060129200246
> Exception in thread "main" java.io.IOException: timed out waiting for response
>     at org.apache.nutch.ipc.Client.call(Client.java:296)
>     at org.apache.nutch.ipc.RPC$Invoker.invoke(RPC.java:127)
>     at $Proxy1.submitJob(Unknown Source)
>     at org.apache.nutch.mapred.JobClient.submitJob(JobClient.java:259)
>     at org.apache.nutch.mapred.JobClient.runJob(JobClient.java:288)
>     at org.apache.nutch.indexer.Indexer.index(Indexer.java:263)
>     at org.apache.nutch.crawl.Crawl.main(Crawl.java:127)
> However, it definitely seems as if the JobTracker is still waiting for the job to finish (no failed jobs).
> Doug Cutting's response:
> The bug here is that the RPC call times out while the map task is computing splits.  The fix is that the job tracker should not compute splits until after it has returned from the submitJob RPC.  Please submit a bug in Jira to help remind us to fix this.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Feb 22 22:56:05 2006
Return-Path: 
 <hadoop-dev-return-224-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 69559 invoked from network); 22 Feb 2006 22:56:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 22:56:05 -0000
Received: (qmail 15587 invoked by uid 500); 22 Feb 2006 22:56:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15569 invoked by uid 500); 22 Feb 2006 22:56:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 15560 invoked by uid 99); 22 Feb 2006 22:56:03 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 14:56:01 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id A0320DD
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Feb 2006 23:55:40 +0100 (CET)
Message-ID: <1303778450.1140648940653.JavaMail.jira@ajax.apache.org>
Date: Wed, 22 Feb 2006 23:55:40 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-49) JobClient cannot use a non-default
 server (unlike DFSShell)
In-Reply-To: <475642315.1140560804678.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-49?page=all ]
     
Doug Cutting resolved HADOOP-49:
--------------------------------

    Resolution: Fixed
     Assign To: Michel Tourn

I just committed this.

Longer-term, perhaps we should have some standard command line options that all tools accept.  This could be implemented by having bin/hadoop always invoke a single class, e.g., org.apache.hadoop.ToolRunner.  This might looks something like

public class ToolRunner {
  public static void main(String[] args) throws Exception {
    Configuration conf = new Configuration();
    ... initialize configuration from command line options..
    ... get tool class from command line options ...
    Tool tool = toolClass.newInstance();
    tool.configure(conf);
    tool.run(args);
  }
}

public interface Tool extends Configurable {
  run(String[] args);
}

If folks like this, we file this it as a separate issue..

> JobClient cannot use a non-default server (unlike DFSShell)
> -----------------------------------------------------------
>
>          Key: HADOOP-49
>          URL: http://issues.apache.org/jira/browse/HADOOP-49
>      Project: Hadoop
>         Type: Improvement
>   Components: mapred
>     Reporter: Michel Tourn
>     Assignee: Michel Tourn
>  Attachments: jcjt.patch
>
> JobClient cannot use a non-default Job Tracker server:
> It will use the Job Tracker specified in conf/hadoop-default.xml or conf/hadoop-site.xml
> For users with multiple Hadoop systems, it is useful to be able to specify the Job Tracker.
> Other hadoop command-line tools like DFSShell already have:
> >bin/hadoop dfs
> Usage: java DFSShell [-local | -dfs <namenode:port>]  ...
> Similarly I propose to add a -jt parameter:
> >bin/hadoop job
> JobClient -submit <job> | -status <id> | -kill <id> [-jt <jobtracker:port>|<config>]
> Where: -jt <jobtracker:port> is similar to -dfs <namenode:port>
> And:  -jt <config> will load as a final resource: hadoop-<config>.xml
> The latter syntax is discoverable by users because on failure the tool will say:
> >bin/hadoop job -kill m7n6pi -jt unknown
> Exception in thread "main" java.lang.RuntimeException: hadoop-unknown.xml not found on CLASSPATH
> Or in case of success:
> >bin/hadoop job -kill job_m7n6pi -jt myconfig
> 060221 221911 parsing file:/trunk/conf/hadoop-default.xml
> 060221 221911 parsing file:/trunk/conf/hadoop-myconfig.xml
> 060221 221911 parsing file:/trunk/conf/hadoop-site.xml
> 060221 221911 Client connection to 66.196.91.10:7020: starting
> And with a machine:port spec:
> >bin/hadoop job -kill job_m7n6pi -jt machine:8020
> 060221 222109 parsing file:/trunk/conf/hadoop-default.xml
> 060221 222109 parsing file:/trunk/conf/hadoop-site.xml
> 060221 222109 Client connection to 66.196.91.10:8020: starting
> Patch attached.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Feb 22 23:03:01 2006
Return-Path: 
 <hadoop-dev-return-225-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 72474 invoked from network); 22 Feb 2006 23:03:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 23:03:01 -0000
Received: (qmail 23874 invoked by uid 500); 22 Feb 2006 23:02:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23829 invoked by uid 500); 22 Feb 2006 23:02:02 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23806 invoked by uid 99); 22 Feb 2006 23:02:01 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 15:01:59 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 874FCDC
	for <hadoop-dev@lucene.apache.org>; Thu, 23 Feb 2006 00:01:38 +0100 (CET)
Message-ID: <202729305.1140649298356.JavaMail.jira@ajax.apache.org>
Date: Thu, 23 Feb 2006 00:01:38 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-41) JAVA_OPTS for the TaskRunner Child
In-Reply-To: <1940627377.1140223704366.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-41?page=comments#action_12367435 ] 

Doug Cutting commented on HADOOP-41:
------------------------------------

I like this, except that it is not back-compatible.  We should continue to support mapred.child.heap.size, so that folks who upgrade are not broken.

> JAVA_OPTS for the TaskRunner Child
> ----------------------------------
>
>          Key: HADOOP-41
>          URL: http://issues.apache.org/jira/browse/HADOOP-41
>      Project: Hadoop
>         Type: Improvement
>   Components: conf
>     Reporter: stack@archive.org
>     Priority: Minor
>  Attachments: TaskRunner_child_javaopts.patch
>
> Currently, its possible to set the java heap size the TaskRunner child runs in, but thats all thats configurable about the child process.  Hereabouts, we've found it useful being able to specify other options for the child JVM, especially when debugging and monitoring long-lived processes.  
> Examples of why its useful being able to set options are the child include:
> + Being able to set '-server' option or '-c64'.
> + Passing logging.properties to configure child logging.
> + Enable and capture to file verbose GC logging or start the SUN JVM JMX agent for the child process.  Allows connecting with jconsole to watch long-lived children, their heap and thread usage, and when seemingly hung, take thread dumps.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Feb 22 23:16:11 2006
Return-Path: 
 <hadoop-dev-return-226-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 80492 invoked from network); 22 Feb 2006 23:16:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 23:16:11 -0000
Received: (qmail 52251 invoked by uid 500); 22 Feb 2006 23:16:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 52236 invoked by uid 500); 22 Feb 2006 23:16:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 52225 invoked by uid 99); 22 Feb 2006 23:16:11 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 15:16:09 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id E5F38DD
	for <hadoop-dev@lucene.apache.org>; Thu, 23 Feb 2006 00:15:48 +0100 (CET)
Message-ID: <1224793629.1140650148939.JavaMail.jira@ajax.apache.org>
Date: Thu, 23 Feb 2006 00:15:48 +0100 (CET)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-55) map-reduce job overhead is too high
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

map-reduce job overhead is too high
-----------------------------------

         Key: HADOOP-55
         URL: http://issues.apache.org/jira/browse/HADOOP-55
     Project: Hadoop
        Type: Bug
  Components: mapred  
    Versions: 0.2    
    Reporter: Yoram Arnon
    Priority: Minor


map-reduce job overhead is too high. Running a null map-reduce job, with no input, no intermediate data and no output, on a several-hundred node cluster, takes several minutes, rather than several seconds.
Enhanced distribution, launching and monitoring mechanisms should reduce the overhead to levels that match human online patience for short jobs.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Feb 23 02:08:02 2006
Return-Path: 
 <hadoop-dev-return-227-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 73421 invoked from network); 23 Feb 2006 02:08:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 02:08:02 -0000
Received: (qmail 64166 invoked by uid 500); 23 Feb 2006 02:08:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64135 invoked by uid 500); 23 Feb 2006 02:08:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64125 invoked by uid 99); 23 Feb 2006 02:08:01 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 18:07:59 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 3EADBDD
	for <hadoop-dev@lucene.apache.org>; Thu, 23 Feb 2006 03:07:38 +0100 (CET)
Message-ID: <832247485.1140660458254.JavaMail.jira@ajax.apache.org>
Date: Thu, 23 Feb 2006 03:07:38 +0100 (CET)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-51) per-file replication counts
In-Reply-To: <1529480135.1140561049677.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-51?page=comments#action_12367456 ] 

Konstantin Shvachko commented on HADOOP-51:
-------------------------------------------

I propose to add 2 functions.
1) An additional create() method that would take an extra parameter for that file replication.
This should be a new method in order to retain existing programs in working condition.
2) A new setReplication() method to be able to change replication for existing files.
It will also require an additional field in the INode class to store replication for each file
on the namenode.




> per-file replication counts
> ---------------------------
>
>          Key: HADOOP-51
>          URL: http://issues.apache.org/jira/browse/HADOOP-51
>      Project: Hadoop
>         Type: New Feature
>   Components: dfs
>     Versions: 0.1
>     Reporter: Doug Cutting
>     Assignee: Konstantin Shvachko
>      Fix For: 0.1

>
> It should be possible to specify different replication counts for different files.  Perhaps an option when creating a new file should be the desired replication count.  MapReduce should take advantage of this feature so that job.xml and job.jar files, which are frequently accessed by lots of machines, are more highly replicated than large data files.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Feb 23 02:10:14 2006
Return-Path: 
 <hadoop-dev-return-228-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 74580 invoked from network); 23 Feb 2006 02:10:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 02:10:14 -0000
Received: (qmail 65938 invoked by uid 500); 23 Feb 2006 02:10:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 65913 invoked by uid 500); 23 Feb 2006 02:10:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 65839 invoked by uid 99); 23 Feb 2006 02:10:11 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 18:10:09 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 766F4DD
	for <hadoop-dev@lucene.apache.org>; Thu, 23 Feb 2006 03:09:48 +0100 (CET)
Message-ID: <941843190.1140660588477.JavaMail.jira@ajax.apache.org>
Date: Thu, 23 Feb 2006 03:09:48 +0100 (CET)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-55) map-reduce job overhead is too high
In-Reply-To: <1224793629.1140650148939.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-55?page=all ]

Sameer Paranjpye reassigned HADOOP-55:
--------------------------------------

    Assign To: Sameer Paranjpye

> map-reduce job overhead is too high
> -----------------------------------
>
>          Key: HADOOP-55
>          URL: http://issues.apache.org/jira/browse/HADOOP-55
>      Project: Hadoop
>         Type: Bug
>   Components: mapred
>     Versions: 0.2
>     Reporter: Yoram Arnon
>     Assignee: Sameer Paranjpye
>     Priority: Minor

>
> map-reduce job overhead is too high. Running a null map-reduce job, with no input, no intermediate data and no output, on a several-hundred node cluster, takes several minutes, rather than several seconds.
> Enhanced distribution, launching and monitoring mechanisms should reduce the overhead to levels that match human online patience for short jobs.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Feb 23 02:14:33 2006
Return-Path: 
 <hadoop-dev-return-229-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75949 invoked from network); 23 Feb 2006 02:14:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 02:14:33 -0000
Received: (qmail 70141 invoked by uid 500); 23 Feb 2006 02:14:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70117 invoked by uid 500); 23 Feb 2006 02:14:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 70102 invoked by uid 99); 23 Feb 2006 02:14:29 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 18:14:26 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id CD95ADD
	for <hadoop-dev@lucene.apache.org>; Thu, 23 Feb 2006 03:14:05 +0100 (CET)
Message-ID: <1295923568.1140660845840.JavaMail.jira@ajax.apache.org>
Date: Thu, 23 Feb 2006 03:14:05 +0100 (CET)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-56) hadoop nameserver does not recognise
 ndfs nameserver image
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hadoop nameserver does not recognise ndfs nameserver image
----------------------------------------------------------

         Key: HADOOP-56
         URL: http://issues.apache.org/jira/browse/HADOOP-56
     Project: Hadoop
        Type: Bug
  Components: dfs  
    Versions: 0.1    
    Reporter: Yoram Arnon
    Priority: Critical


hadoop nameserver does not recognise ndfs image
Thus, upgrading from ndfs to hadoop dfs results in total data loss.
The upgrade should be seemless, with the new server recognising all previous version that are not end-of-life'd.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Feb 23 02:19:28 2006
Return-Path: 
 <hadoop-dev-return-230-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78394 invoked from network); 23 Feb 2006 02:19:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 02:19:28 -0000
Received: (qmail 80128 invoked by uid 500); 23 Feb 2006 02:19:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 80073 invoked by uid 500); 23 Feb 2006 02:19:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 80064 invoked by uid 99); 23 Feb 2006 02:19:27 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 18:19:27 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 3FC80DD
	for <hadoop-dev@lucene.apache.org>; Thu, 23 Feb 2006 03:19:06 +0100 (CET)
Message-ID: <3280039.1140661146259.JavaMail.jira@ajax.apache.org>
Date: Thu, 23 Feb 2006 03:19:06 +0100 (CET)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-57) hadoop dfs -ls / does not show root of
 file system
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hadoop dfs -ls / does not show root of file system
--------------------------------------------------

         Key: HADOOP-57
         URL: http://issues.apache.org/jira/browse/HADOOP-57
     Project: Hadoop
        Type: Bug
  Components: dfs  
    Versions: 0.1    
    Reporter: Yoram Arnon
    Priority: Minor


hadoop dfs -ls / does not show root of file system - it shows the user's home directory.
It's thus impossible to learn the contents of the root file system via the shell.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Feb 23 02:20:28 2006
Return-Path: 
 <hadoop-dev-return-231-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 79017 invoked from network); 23 Feb 2006 02:20:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 02:20:28 -0000
Received: (qmail 81142 invoked by uid 500); 23 Feb 2006 02:20:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 81128 invoked by uid 500); 23 Feb 2006 02:20:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 81119 invoked by uid 99); 23 Feb 2006 02:20:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 18:20:27 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.109.112.28] (HELO mrout2-b.corp.dcn.yahoo.com)
 (216.109.112.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 18:20:27 -0800
Received: from [66.228.175.136] (seemeight-dx.corp.yahoo.com [66.228.175.136])
	by mrout2-b.corp.dcn.yahoo.com (8.13.4/8.13.4/y.out) with ESMTP id
 k1N2JpRi055216
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Feb 2006 18:19:52 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=message-id:date:from:user-agent:x-accept-language:
	mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
	b=a1IMQp06TYz3QStw/cKA5GFWdS1jk0wn9dToA9iD4fG2GQFNqSSP9X7ZPHC2z5Z+
Message-ID: <43FD1C32.3030103@yahoo-inc.com>
Date: Wed, 22 Feb 2006 18:21:38 -0800
From: Konstantin Shvachko <shv@yahoo-inc.com>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Bug fixes not promoted since Friday.
References: <1391540140.1140638859637.JavaMail.jira@ajax.apache.org>
In-Reply-To: <1391540140.1140638859637.JavaMail.jira@ajax.apache.org>
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Doug,

Could you please take a look at three JIRA issues that sitting there for 
quite a while now:

http://issues.apache.org/jira/browse/HADOOP-42
http://issues.apache.org/jira/browse/HADOOP-40
http://issues.apache.org/jira/browse/HADOOP-33

The first two are actually bugs that produce incorrect results as I 
write it.
The last one is an improvement, which would not heart any existing 
functionality.
It would be good to resolve them one way or another.

Thanks,

--Konst


Sameer Paranjpye (JIRA) wrote:

>     [ http://issues.apache.org/jira/browse/HADOOP-51?page=all ]
>
>Sameer Paranjpye reassigned HADOOP-51:
>--------------------------------------
>
>    Assign To: Konstantin Shvachko  (was: Sameer Paranjpye)
>
>  
>
>>per-file replication counts
>>---------------------------
>>
>>         Key: HADOOP-51
>>         URL: http://issues.apache.org/jira/browse/HADOOP-51
>>     Project: Hadoop
>>        Type: New Feature
>>  Components: dfs
>>    Versions: 0.1
>>    Reporter: Doug Cutting
>>    Assignee: Konstantin Shvachko
>>     Fix For: 0.1
>>    
>>
>
>  
>
>>It should be possible to specify different replication counts for different files.  Perhaps an option when creating a new file should be the desired replication count.  MapReduce should take advantage of this feature so that job.xml and job.jar files, which are frequently accessed by lots of machines, are more highly replicated than large data files.
>>    
>>
>
>  
>


From MAILER-DAEMON Thu Feb 23 05:19:30 2006
Return-Path: 
 <hadoop-dev-return-232-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51616 invoked from network); 23 Feb 2006 05:19:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 05:19:30 -0000
Received: (qmail 58267 invoked by uid 500); 23 Feb 2006 05:19:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58248 invoked by uid 500); 23 Feb 2006 05:19:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58239 invoked by uid 99); 23 Feb 2006 05:19:29 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 21:19:29 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 4FD88DD
	for <hadoop-dev@lucene.apache.org>; Thu, 23 Feb 2006 06:19:08 +0100 (CET)
Message-ID: <1741278853.1140671948324.JavaMail.jira@ajax.apache.org>
Date: Thu, 23 Feb 2006 06:19:08 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-42) PositionCache decrements its position
 for reads at the end of file
In-Reply-To: <1756534767.1140224438143.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-42?page=all ]
     
Doug Cutting resolved HADOOP-42:
--------------------------------

    Fix Version: 0.1
     Resolution: Fixed

I just committed this.  Thanks, Konstantin!

> PositionCache decrements its position for reads at the end of file
> ------------------------------------------------------------------
>
>          Key: HADOOP-42
>          URL: http://issues.apache.org/jira/browse/HADOOP-42
>      Project: Hadoop
>         Type: Bug
>   Components: fs
>     Reporter: Konstantin Shvachko
>      Fix For: 0.1
>  Attachments: Position.patch
>
> See
> int org.apache.hadoop.fs.FSDataInputStream.PositionCache.read(byte[] b, int off, int len) 
> if in.read() returns -1 (e.g. at the end of file) the position in the cache will be decremented, while it should be retained.
> The attached patch would fix it.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Feb 23 17:03:10 2006
Return-Path: 
 <hadoop-dev-return-233-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 39663 invoked from network); 23 Feb 2006 17:03:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 17:03:10 -0000
Received: (qmail 14046 invoked by uid 500); 23 Feb 2006 17:03:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13904 invoked by uid 500); 23 Feb 2006 17:03:02 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13821 invoked by uid 99); 23 Feb 2006 17:03:02 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 09:03:02 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id E60BE126
	for <hadoop-dev@lucene.apache.org>; Thu, 23 Feb 2006 18:02:40 +0100 (CET)
Message-ID: <1471817732.1140714160935.JavaMail.jira@ajax.apache.org>
Date: Thu, 23 Feb 2006 18:02:40 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-33) DF enhancement: performance and win
 XP support
In-Reply-To: <922804577.1139611475063.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-33?page=comments#action_12367534 ] 

Doug Cutting commented on HADOOP-33:
------------------------------------

Fixing things to not call DF twice per heartbeat would be great.  But why do we need the DiskUsage class?  Can't we just keep the DF instance and reuse it?  I don't see the advantage of wrapping the DF inside another class.  It just adds code, and less code is better.  Also, the logic of getRemaining() is duplicated after your patch.

Perhaps what's needed is a private getDF() method in FSDataset, that checks to see if a cached DF instance has been refreshed in the last N milleseconds.  If it has not then it is refreshed.  Then it is returned.  Something like:

private synchronized DF getDF() {
  long now = System.getMillisTime();
  if ((now - lastDfTime) > DF_INTERVAL) {
    df = new DF();
    lastDfTime = now;
  }
  return DF();
}

Then getRemaining() and getCapacity() can be defined in terms of getDF().  Does this make sense?

Finally, Hadoop currently requires Cygwin in a number of places, most notably in the startup scripts.  The current strategy is not to maintain native Windows versions of these, but rather to rely on Cygwin.  This patch increases the code size without removing the dependency on Cygwin.  If you like, we could start another bug to entirely remove the dependency on Cygwin, porting all scripts, DF, etc.  But that is a low-priority item for me, since Cygwin offers a fine solution with no code duplication.

In summary, I'd love to see a patch that fixes the DF problem with a minimum of code.  Thanks!

> DF enhancement: performance and win XP support
> ----------------------------------------------
>
>          Key: HADOOP-33
>          URL: http://issues.apache.org/jira/browse/HADOOP-33
>      Project: Hadoop
>         Type: Improvement
>   Components: fs, dfs
>  Environment: Unix, Cygwin, Win XP
>     Reporter: Konstantin Shvachko
>     Priority: Minor
>  Attachments: DF.patch, DFpatch.txt
>
> 1. DF is called twice for each heartbeat, which happens each 3 seconds.
> There is a simple fix for that in the attached patch.
> 2. cygwin is required to run df program in windows environment.
> There is a class org.apache.commons.io.FileSystemUtils, which can return disk free space
> for different OSs, but it does not have means to get disk capacity.
> In general in windows there is no efficient and uniform way to calculate disk capacity
> using a shell command.
> The choices are 'chkdsk' and 'defrag -a', but both of them are too slow to be called
> every 3 seconds.
> WinXP and 2003 server have a new tool called fsutil, which provides all necessary info.
> I implemented a call to fsutil in case df fails, and the OS is right.
> Other win versions should still run cygwin.
> I tested this fetaure for linux, winXP and cygwin.
> See attached patch.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Feb 23 17:24:10 2006
Return-Path: 
 <hadoop-dev-return-234-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 55270 invoked from network); 23 Feb 2006 17:24:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 17:24:10 -0000
Received: (qmail 78397 invoked by uid 500); 23 Feb 2006 17:24:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 78367 invoked by uid 500); 23 Feb 2006 17:23:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 78358 invoked by uid 99); 23 Feb 2006 17:23:59 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 09:23:59 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 5BB11DD
	for <hadoop-dev@lucene.apache.org>; Thu, 23 Feb 2006 18:23:38 +0100 (CET)
Message-ID: <1562881579.1140715418373.JavaMail.jira@ajax.apache.org>
Date: Thu, 23 Feb 2006 18:23:38 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-40) bufferSize argument is ignored in
 FileSystem.create(File, boolean, int)
In-Reply-To: <1308650132.1140216231434.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-40?page=all ]

Doug Cutting updated HADOOP-40:
-------------------------------

    Attachment: bufferSize.patch

I don't think we should modify the configuration in this case, since that will affect code which uses this configuration that runs later.  SequenceFile uses very large buffers when sorting and merging, in order to minimize disk seeks, and we don't want everything to start using such large buffers.

So why not just pass the missing parameter down?  I've attached a patch that does this.  Does this look good to you?

> bufferSize argument is ignored in FileSystem.create(File, boolean, int)
> -----------------------------------------------------------------------
>
>          Key: HADOOP-40
>          URL: http://issues.apache.org/jira/browse/HADOOP-40
>      Project: Hadoop
>         Type: Bug
>   Components: fs
>     Reporter: Konstantin Shvachko
>     Priority: Minor
>  Attachments: BufferSize.patch
>
> org.apache.hadoop.fs.FileSystem.create(File f, boolean overwrite, int bufferSize)
> ignores the input parameter bufferSize.
> It passes further down the internal configuration, which includes the buffer size, but not the parameter value.
> This works fine within the file system, since everything that calls create extracts buffer size from the same config. 
> MapReduce although is probably affected by that, see 
> org.apache.hadoop.io.SequenceFile.Sorter.MergeQueue.MergeQueue(int size, String outName, boolean done)
> The attached patch would fix it.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Feb 23 17:24:10 2006
Return-Path: 
 <hadoop-dev-return-235-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 55272 invoked from network); 23 Feb 2006 17:24:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 17:24:10 -0000
Received: (qmail 78518 invoked by uid 500); 23 Feb 2006 17:24:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 78465 invoked by uid 500); 23 Feb 2006 17:24:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 78447 invoked by uid 99); 23 Feb 2006 17:24:00 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 09:24:00 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 61D30DF
	for <hadoop-dev@lucene.apache.org>; Thu, 23 Feb 2006 18:23:39 +0100 (CET)
Message-ID: <156218868.1140715419398.JavaMail.jira@ajax.apache.org>
Date: Thu, 23 Feb 2006 18:23:39 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-40) bufferSize argument is ignored in
 FileSystem.create(File, boolean, int)
In-Reply-To: <1308650132.1140216231434.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-40?page=all ]

Doug Cutting updated HADOOP-40:
-------------------------------

    Attachment:     (was: bufferSize.patch)

> bufferSize argument is ignored in FileSystem.create(File, boolean, int)
> -----------------------------------------------------------------------
>
>          Key: HADOOP-40
>          URL: http://issues.apache.org/jira/browse/HADOOP-40
>      Project: Hadoop
>         Type: Bug
>   Components: fs
>     Reporter: Konstantin Shvachko
>     Priority: Minor
>  Attachments: BufferSize.patch
>
> org.apache.hadoop.fs.FileSystem.create(File f, boolean overwrite, int bufferSize)
> ignores the input parameter bufferSize.
> It passes further down the internal configuration, which includes the buffer size, but not the parameter value.
> This works fine within the file system, since everything that calls create extracts buffer size from the same config. 
> MapReduce although is probably affected by that, see 
> org.apache.hadoop.io.SequenceFile.Sorter.MergeQueue.MergeQueue(int size, String outName, boolean done)
> The attached patch would fix it.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Feb 23 17:26:16 2006
Return-Path: 
 <hadoop-dev-return-236-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 56844 invoked from network); 23 Feb 2006 17:26:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 17:26:16 -0000
Received: (qmail 85334 invoked by uid 500); 23 Feb 2006 17:25:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 85319 invoked by uid 500); 23 Feb 2006 17:25:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 85310 invoked by uid 99); 23 Feb 2006 17:25:59 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 09:25:59 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 57577DD
	for <hadoop-dev@lucene.apache.org>; Thu, 23 Feb 2006 18:25:38 +0100 (CET)
Message-ID: <22660486.1140715538356.JavaMail.jira@ajax.apache.org>
Date: Thu, 23 Feb 2006 18:25:38 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-40) bufferSize argument is ignored in
 FileSystem.create(File, boolean, int)
In-Reply-To: <1308650132.1140216231434.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-40?page=all ]

Doug Cutting updated HADOOP-40:
-------------------------------

    Attachment: bufferSize.patch

> bufferSize argument is ignored in FileSystem.create(File, boolean, int)
> -----------------------------------------------------------------------
>
>          Key: HADOOP-40
>          URL: http://issues.apache.org/jira/browse/HADOOP-40
>      Project: Hadoop
>         Type: Bug
>   Components: fs
>     Reporter: Konstantin Shvachko
>     Priority: Minor
>  Attachments: BufferSize.patch, bufferSize.patch
>
> org.apache.hadoop.fs.FileSystem.create(File f, boolean overwrite, int bufferSize)
> ignores the input parameter bufferSize.
> It passes further down the internal configuration, which includes the buffer size, but not the parameter value.
> This works fine within the file system, since everything that calls create extracts buffer size from the same config. 
> MapReduce although is probably affected by that, see 
> org.apache.hadoop.io.SequenceFile.Sorter.MergeQueue.MergeQueue(int size, String outName, boolean done)
> The attached patch would fix it.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Feb 23 18:14:00 2006
Return-Path: 
 <hadoop-dev-return-237-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93484 invoked from network); 23 Feb 2006 18:14:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 18:14:00 -0000
Received: (qmail 18192 invoked by uid 500); 23 Feb 2006 18:14:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 18172 invoked by uid 500); 23 Feb 2006 18:13:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 18162 invoked by uid 99); 23 Feb 2006 18:13:59 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 10:13:59 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id D1470DD
	for <hadoop-dev@lucene.apache.org>; Thu, 23 Feb 2006 19:13:37 +0100 (CET)
Message-ID: <852624416.1140718417799.JavaMail.jira@ajax.apache.org>
Date: Thu, 23 Feb 2006 19:13:37 +0100 (CET)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-16) RPC call times out while indexing map
 task is computing splits
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-16?page=comments#action_12367554 ] 

Runping Qi commented on HADOOP-16:
----------------------------------

Having a separate thread in JobTracker can even pre-compute a data locality map that will enable optimal task assignment to task trackers.
Here is the basic idea. As the thread computes the splits for a job, it can determine which nodes have local data for each split. The thread can populate 
a map mapping a node to a  list of the splits whose data are on the node. When a tasktracker polls for a task, the JobTracker can look up the map by 
the node name of the task tracker to see whether there are any un-assigned splits in the corresponding list. If yes,  assign one of them to the task tracker. 
Otherwise, randomlly choose a split for the task tracker.   

> RPC call times out while indexing map task is computing splits
> --------------------------------------------------------------
>
>          Key: HADOOP-16
>          URL: http://issues.apache.org/jira/browse/HADOOP-16
>      Project: Hadoop
>         Type: Bug
>   Components: mapred
>     Versions: 0.1
>  Environment: MapReduce multi-computer crawl environment: 11 machines (1 master with JobTracker/NameNode, 10 slaves with TaskTrackers/DataNodes)
>     Reporter: Chris Schneider
>     Assignee: Mike Cafarella
>      Fix For: 0.1
>  Attachments: patch.16
>
> We've been using Nutch 0.8 (MapReduce) to perform some internet crawling. Things seemed to be going well until...
> 060129 222409 Lost tracker 'tracker_56288'
> 060129 222409 Task 'task_m_10gs5f' has been lost.
> 060129 222409 Task 'task_m_10qhzr' has been lost.
>    ........
>    ........
> 060129 222409 Task 'task_r_zggbwu' has been lost.
> 060129 222409 Task 'task_r_zh8dao' has been lost.
> 060129 222455 Server handler 8 on 8010 caught: java.net.SocketException: Socket closed
> java.net.SocketException: Socket closed
>         at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:99)
>         at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
>         at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
>         at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
>         at java.io.DataOutputStream.flush(DataOutputStream.java:106)
>         at org.apache.nutch.ipc.Server$Handler.run(Server.java:216)
> 060129 222455 Adding task 'task_m_cia5po' to set for tracker 'tracker_56288'
> 060129 223711 Adding task 'task_m_ffv59i' to set for tracker 'tracker_25647'
> I'm hoping that someone could explain why task_m_cia5po got added to tracker_56288 after this tracker was lost.
> The Crawl .main process died with the following output:
> 060129 221129 Indexer: adding segment: /user/crawler/crawl-20060129091444/segments/20060129200246
> Exception in thread "main" java.io.IOException: timed out waiting for response
>     at org.apache.nutch.ipc.Client.call(Client.java:296)
>     at org.apache.nutch.ipc.RPC$Invoker.invoke(RPC.java:127)
>     at $Proxy1.submitJob(Unknown Source)
>     at org.apache.nutch.mapred.JobClient.submitJob(JobClient.java:259)
>     at org.apache.nutch.mapred.JobClient.runJob(JobClient.java:288)
>     at org.apache.nutch.indexer.Indexer.index(Indexer.java:263)
>     at org.apache.nutch.crawl.Crawl.main(Crawl.java:127)
> However, it definitely seems as if the JobTracker is still waiting for the job to finish (no failed jobs).
> Doug Cutting's response:
> The bug here is that the RPC call times out while the map task is computing splits.  The fix is that the job tracker should not compute splits until after it has returned from the submitJob RPC.  Please submit a bug in Jira to help remind us to fix this.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Feb 23 18:44:00 2006
Return-Path: 
 <hadoop-dev-return-238-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12408 invoked from network); 23 Feb 2006 18:44:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 18:44:00 -0000
Received: (qmail 81897 invoked by uid 500); 23 Feb 2006 18:43:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 81877 invoked by uid 500); 23 Feb 2006 18:43:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 81867 invoked by uid 99); 23 Feb 2006 18:43:59 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 10:43:58 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 7BDD3DE
	for <hadoop-dev@lucene.apache.org>; Thu, 23 Feb 2006 19:43:37 +0100 (CET)
Message-ID: <400561345.1140720217483.JavaMail.jira@ajax.apache.org>
Date: Thu, 23 Feb 2006 19:43:37 +0100 (CET)
From: "stack@archive.org (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-58) Hadoop requires configuration of
 hadoop-site.xml or won't run
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hadoop requires configuration of hadoop-site.xml or won't run
-------------------------------------------------------------

         Key: HADOOP-58
         URL: http://issues.apache.org/jira/browse/HADOOP-58
     Project: Hadoop
        Type: Bug
    Reporter: stack@archive.org
    Priority: Minor


On a new install, I would expect '${HADOOP_HOME}/bin/start-all.sh" to bring up a basic instance, one that is using local filesystem (Or if not, then uses a DFS homed in localhost:/tmp) and that has all four daemons running on localhost.  Currently this is not the case.  Hadoop complains 'java.lang.RuntimeException: Not a host:port pair: local'.  It doesn't like the 'local' default value for mapred.job.tracker and fs.default.name properties.

Revision: 379930



-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Feb 23 18:50:04 2006
Return-Path: 
 <hadoop-dev-return-239-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16311 invoked from network); 23 Feb 2006 18:50:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 18:50:04 -0000
Received: (qmail 1533 invoked by uid 500); 23 Feb 2006 18:50:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 1499 invoked by uid 500); 23 Feb 2006 18:50:02 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 1486 invoked by uid 99); 23 Feb 2006 18:50:01 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 10:49:59 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id A0526DD
	for <hadoop-dev@lucene.apache.org>; Thu, 23 Feb 2006 19:49:38 +0100 (CET)
Message-ID: <1397384575.1140720578654.JavaMail.jira@ajax.apache.org>
Date: Thu, 23 Feb 2006 19:49:38 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-51) per-file replication counts
In-Reply-To: <1529480135.1140561049677.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-51?page=comments#action_12367560 ] 

Doug Cutting commented on HADOOP-51:
------------------------------------

This sounds like a good plan to me.  +1

> per-file replication counts
> ---------------------------
>
>          Key: HADOOP-51
>          URL: http://issues.apache.org/jira/browse/HADOOP-51
>      Project: Hadoop
>         Type: New Feature
>   Components: dfs
>     Versions: 0.1
>     Reporter: Doug Cutting
>     Assignee: Konstantin Shvachko
>      Fix For: 0.1

>
> It should be possible to specify different replication counts for different files.  Perhaps an option when creating a new file should be the desired replication count.  MapReduce should take advantage of this feature so that job.xml and job.jar files, which are frequently accessed by lots of machines, are more highly replicated than large data files.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Feb 23 18:56:06 2006
Return-Path: 
 <hadoop-dev-return-240-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20615 invoked from network); 23 Feb 2006 18:56:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 18:56:06 -0000
Received: (qmail 17429 invoked by uid 500); 23 Feb 2006 18:55:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17388 invoked by uid 500); 23 Feb 2006 18:55:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17367 invoked by uid 99); 23 Feb 2006 18:55:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 10:55:56 -0800
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.115.57.46] (HELO ylpvm15.prodigy.net) (207.115.57.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 10:55:55 -0800
Received: from pimout7-ext.prodigy.net (pimout7-int.prodigy.net
 [207.115.4.147])
	by ylpvm15.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id
 k1NItogV009480
	for <hadoop-dev@lucene.apache.org>; Thu, 23 Feb 2006 13:55:51 -0500
X-ORBL: [69.228.231.148]
Received: from [192.168.168.15] (adsl-69-228-231-148.dsl.pltn13.pacbell.net
 [69.228.231.148])
	by pimout7-ext.prodigy.net (8.13.4 outbound domainkey aix/8.13.4) with ESMTP
 id k1NItRfJ070192;
	Thu, 23 Feb 2006 13:55:29 -0500
Message-ID: <43FE051F.1000305@apache.org>
Date: Thu, 23 Feb 2006 10:55:27 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: Bug fixes not promoted since Friday.
References: <1391540140.1140638859637.JavaMail.jira@ajax.apache.org>
 <43FD1C32.3030103@yahoo-inc.com>
In-Reply-To: <43FD1C32.3030103@yahoo-inc.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Konstantin Shvachko wrote:
> Could you please take a look at three JIRA issues that sitting there for 
> quite a while now:
> 
> http://issues.apache.org/jira/browse/HADOOP-42
> http://issues.apache.org/jira/browse/HADOOP-40
> http://issues.apache.org/jira/browse/HADOOP-33

I have now committed one and added comments to the other two.

Cheers,

Doug

From MAILER-DAEMON Thu Feb 23 19:05:10 2006
Return-Path: 
 <hadoop-dev-return-241-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 27358 invoked from network); 23 Feb 2006 19:05:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 19:05:10 -0000
Received: (qmail 47508 invoked by uid 500); 23 Feb 2006 19:05:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47434 invoked by uid 500); 23 Feb 2006 19:05:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47366 invoked by uid 99); 23 Feb 2006 19:05:00 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 11:05:00 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 0B139DE
	for <hadoop-dev@lucene.apache.org>; Thu, 23 Feb 2006 20:04:39 +0100 (CET)
Message-ID: <856979411.1140721479043.JavaMail.jira@ajax.apache.org>
Date: Thu, 23 Feb 2006 20:04:39 +0100 (CET)
From: "stack@archive.org (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-58) Hadoop requires configuration of
 hadoop-site.xml or won't run
In-Reply-To: <400561345.1140720217483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-58?page=all ]

stack@archive.org updated HADOOP-58:
------------------------------------

    Attachment: local2localhostPort.patch

Suggested patch that  makes localhost and DFS the default.  Local filesystem might be better as default but looks like more work needed making 'local' work again.

> Hadoop requires configuration of hadoop-site.xml or won't run
> -------------------------------------------------------------
>
>          Key: HADOOP-58
>          URL: http://issues.apache.org/jira/browse/HADOOP-58
>      Project: Hadoop
>         Type: Bug
>     Reporter: stack@archive.org
>     Priority: Minor
>  Attachments: local2localhostPort.patch
>
> On a new install, I would expect '${HADOOP_HOME}/bin/start-all.sh" to bring up a basic instance, one that is using local filesystem (Or if not, then uses a DFS homed in localhost:/tmp) and that has all four daemons running on localhost.  Currently this is not the case.  Hadoop complains 'java.lang.RuntimeException: Not a host:port pair: local'.  It doesn't like the 'local' default value for mapred.job.tracker and fs.default.name properties.
> Revision: 379930

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Feb 23 19:15:00 2006
Return-Path: 
 <hadoop-dev-return-242-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33806 invoked from network); 23 Feb 2006 19:15:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 19:15:00 -0000
Received: (qmail 66490 invoked by uid 500); 23 Feb 2006 19:14:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66475 invoked by uid 500); 23 Feb 2006 19:14:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66450 invoked by uid 99); 23 Feb 2006 19:14:59 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 11:14:58 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id DFFF8DC
	for <hadoop-dev@lucene.apache.org>; Thu, 23 Feb 2006 20:14:37 +0100 (CET)
Message-ID: <268800535.1140722077874.JavaMail.jira@ajax.apache.org>
Date: Thu, 23 Feb 2006 20:14:37 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-58) Hadoop requires configuration of
 hadoop-site.xml or won't run
In-Reply-To: <400561345.1140720217483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-58?page=comments#action_12367568 ] 

Doug Cutting commented on HADOOP-58:
------------------------------------

I don't think we want things to use DFS and TaskTracker/JobTracker by default, since this slows things down and uses more resources than needed when running on a single node.

The javadoc provides a recommended configuration for "pseudo-distributed" use:

http://lucene.apache.org/hadoop/docs/api/overview-summary.html

With that in place, bin/start-all.sh works fine, no?

> Hadoop requires configuration of hadoop-site.xml or won't run
> -------------------------------------------------------------
>
>          Key: HADOOP-58
>          URL: http://issues.apache.org/jira/browse/HADOOP-58
>      Project: Hadoop
>         Type: Bug
>     Reporter: stack@archive.org
>     Priority: Minor
>  Attachments: local2localhostPort.patch
>
> On a new install, I would expect '${HADOOP_HOME}/bin/start-all.sh" to bring up a basic instance, one that is using local filesystem (Or if not, then uses a DFS homed in localhost:/tmp) and that has all four daemons running on localhost.  Currently this is not the case.  Hadoop complains 'java.lang.RuntimeException: Not a host:port pair: local'.  It doesn't like the 'local' default value for mapred.job.tracker and fs.default.name properties.
> Revision: 379930

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Feb 23 20:01:25 2006
Return-Path: 
 <hadoop-dev-return-243-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 60189 invoked from network); 23 Feb 2006 20:01:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 20:01:25 -0000
Received: (qmail 62492 invoked by uid 500); 23 Feb 2006 19:57:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62464 invoked by uid 500); 23 Feb 2006 19:57:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62447 invoked by uid 99); 23 Feb 2006 19:57:05 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 11:57:02 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id ABDD2DC
	for <hadoop-dev@lucene.apache.org>; Thu, 23 Feb 2006 20:56:39 +0100 (CET)
Message-ID: <2042047268.1140724599571.JavaMail.jira@ajax.apache.org>
Date: Thu, 23 Feb 2006 20:56:39 +0100 (CET)
From: "stack@archive.org (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-58) Hadoop requires configuration of
 hadoop-site.xml or won't run
In-Reply-To: <400561345.1140720217483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-58?page=comments#action_12367572 ] 

stack@archive.org commented on HADOOP-58:
-----------------------------------------

Feels like the 'pseudo-distributed' additions to hadoop-site.xml should be default config. in hadoop-default.xml but then I suppose that would preclude 'standalone operation'.

Thanks for pointer to the doc. It clarifies how things are meant to work.

Please close this issue.

> Hadoop requires configuration of hadoop-site.xml or won't run
> -------------------------------------------------------------
>
>          Key: HADOOP-58
>          URL: http://issues.apache.org/jira/browse/HADOOP-58
>      Project: Hadoop
>         Type: Bug
>     Reporter: stack@archive.org
>     Priority: Minor
>  Attachments: local2localhostPort.patch
>
> On a new install, I would expect '${HADOOP_HOME}/bin/start-all.sh" to bring up a basic instance, one that is using local filesystem (Or if not, then uses a DFS homed in localhost:/tmp) and that has all four daemons running on localhost.  Currently this is not the case.  Hadoop complains 'java.lang.RuntimeException: Not a host:port pair: local'.  It doesn't like the 'local' default value for mapred.job.tracker and fs.default.name properties.
> Revision: 379930

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Feb 23 20:11:02 2006
Return-Path: 
 <hadoop-dev-return-244-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 65324 invoked from network); 23 Feb 2006 20:11:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 20:11:02 -0000
Received: (qmail 2923 invoked by uid 500); 23 Feb 2006 20:11:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 2903 invoked by uid 500); 23 Feb 2006 20:11:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 2894 invoked by uid 99); 23 Feb 2006 20:11:01 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 12:11:01 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 70138DD
	for <hadoop-dev@lucene.apache.org>; Thu, 23 Feb 2006 21:10:40 +0100 (CET)
Message-ID: <1102659500.1140725440457.JavaMail.jira@ajax.apache.org>
Date: Thu, 23 Feb 2006 21:10:40 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-56) hadoop nameserver does not recognise
 ndfs nameserver image
In-Reply-To: <1295923568.1140660845840.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-56?page=all ]

Doug Cutting updated HADOOP-56:
-------------------------------

    Attachment: ndfs.tar.gz

Works for me, although the paths need to renamed a bit.

If I unpack the attached, and move the directory named 'ndfs' to be /tmp/hadoop/dfs, then I can find the file /user/dcutting/foo/test.


> hadoop nameserver does not recognise ndfs nameserver image
> ----------------------------------------------------------
>
>          Key: HADOOP-56
>          URL: http://issues.apache.org/jira/browse/HADOOP-56
>      Project: Hadoop
>         Type: Bug
>   Components: dfs
>     Versions: 0.1
>     Reporter: Yoram Arnon
>     Priority: Critical
>  Attachments: ndfs.tar.gz
>
> hadoop nameserver does not recognise ndfs image
> Thus, upgrading from ndfs to hadoop dfs results in total data loss.
> The upgrade should be seemless, with the new server recognising all previous version that are not end-of-life'd.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Feb 23 20:17:01 2006
Return-Path: 
 <hadoop-dev-return-245-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68508 invoked from network); 23 Feb 2006 20:17:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 20:17:01 -0000
Received: (qmail 13690 invoked by uid 500); 23 Feb 2006 20:17:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13634 invoked by uid 500); 23 Feb 2006 20:17:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13623 invoked by uid 99); 23 Feb 2006 20:17:00 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 12:16:59 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 61103DC
	for <hadoop-dev@lucene.apache.org>; Thu, 23 Feb 2006 21:16:38 +0100 (CET)
Message-ID: <1968033000.1140725798376.JavaMail.jira@ajax.apache.org>
Date: Thu, 23 Feb 2006 21:16:38 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Closed: (HADOOP-58) Hadoop requires configuration of
 hadoop-site.xml or won't run
In-Reply-To: <400561345.1140720217483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-58?page=all ]
     
Doug Cutting closed HADOOP-58:
------------------------------

    Resolution: Won't Fix

I'm closing this.  The default configuration supports standalone, in-process operation, and there's a well-documented way to achieve standalone multi-process operation (aka "pseudo distributed').

> Hadoop requires configuration of hadoop-site.xml or won't run
> -------------------------------------------------------------
>
>          Key: HADOOP-58
>          URL: http://issues.apache.org/jira/browse/HADOOP-58
>      Project: Hadoop
>         Type: Bug
>     Reporter: stack@archive.org
>     Priority: Minor
>  Attachments: local2localhostPort.patch
>
> On a new install, I would expect '${HADOOP_HOME}/bin/start-all.sh" to bring up a basic instance, one that is using local filesystem (Or if not, then uses a DFS homed in localhost:/tmp) and that has all four daemons running on localhost.  Currently this is not the case.  Hadoop complains 'java.lang.RuntimeException: Not a host:port pair: local'.  It doesn't like the 'local' default value for mapred.job.tracker and fs.default.name properties.
> Revision: 379930

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Feb 23 22:33:02 2006
Return-Path: 
 <hadoop-dev-return-246-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 36675 invoked from network); 23 Feb 2006 22:33:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 22:33:02 -0000
Received: (qmail 61829 invoked by uid 500); 23 Feb 2006 22:33:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 61808 invoked by uid 500); 23 Feb 2006 22:33:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 61798 invoked by uid 99); 23 Feb 2006 22:33:01 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 14:32:59 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 55273DC
	for <hadoop-dev@lucene.apache.org>; Thu, 23 Feb 2006 23:32:37 +0100 (CET)
Message-ID: <321463887.1140733957324.JavaMail.jira@ajax.apache.org>
Date: Thu, 23 Feb 2006 23:32:37 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-59) support generic command-line options
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

support generic command-line options
------------------------------------

         Key: HADOOP-59
         URL: http://issues.apache.org/jira/browse/HADOOP-59
     Project: Hadoop
        Type: Improvement
  Components: conf  
    Versions: 0.1    
    Reporter: Doug Cutting
     Fix For: 0.1


Hadoop commands should all support some common options.  For example, it should be possible to specify the namenode, datanode, and, for that matter, any config option, in a generic way.

This could be implemented with code like:

public interface Tool extends Configurable {
  void run(String[] args) throws Exception;
}

public class ToolBase implements Tool extends Configured {
  public final void main(String[] args) throws Exception {
    Configuration conf = new Configuration();
    ... parse config options from args into conf ...
    this.configure(conf);
    this.run();
  }
}

public MyTool extends ExcecutableBase {
  public static void main(String[] args) throws Exception {
    new MyTool().main(args);
  }
}

The general command line syntax could be:

bin/hadoop [generalOptions] command [commandOptions]

Where generalOptions are things that ToolBase handles, and only the commandOptions are passed to Tool.run().  The most important generalOption would be '-D', which would define name/value pairs that are set in the configuration.  This alone would permit folks to set the namenode, datanode, etc.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Feb 23 23:01:02 2006
Return-Path: 
 <hadoop-dev-return-247-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50501 invoked from network); 23 Feb 2006 23:01:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 23:01:02 -0000
Received: (qmail 11065 invoked by uid 500); 23 Feb 2006 23:01:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 11051 invoked by uid 500); 23 Feb 2006 23:01:02 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 10800 invoked by uid 99); 23 Feb 2006 23:01:01 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 15:01:00 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id E671AE0
	for <hadoop-dev@lucene.apache.org>; Fri, 24 Feb 2006 00:00:39 +0100 (CET)
Message-ID: <2009811444.1140735639941.JavaMail.jira@ajax.apache.org>
Date: Fri, 24 Feb 2006 00:00:39 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-8) NDFS DataNode advertises localhost as
 it's address
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-8?page=3Dcomments#action_=
12367595 ]=20

Doug Cutting commented on HADOOP-8:
-----------------------------------

The problem with this fix is that, if the namenode is down, the socket crea=
tion fails and we fail to launch a datanode.  So it would be great to have =
a better method than InetAddress.getLocalHost(), that tries harder to retur=
n the appropriate IP to advertise to the namenode, but that doesn't require=
 the namenode to be up.

Perhaps this could use NetworkInterfaces.getInetAddresses() and find the fi=
rst that is not a loopback interface?

> NDFS DataNode advertises localhost as it's address
> --------------------------------------------------
>
>          Key: HADOOP-8
>          URL: http://issues.apache.org/jira/browse/HADOOP-8
>      Project: Hadoop
>         Type: Bug
>   Components: dfs
>  Environment: Linux
>     Reporter: Peter Sandstr=C3=B6m
>  Attachments: ndfs-datanode-fix.patch
>


--=20
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Feb 23 23:15:00 2006
Return-Path: 
 <hadoop-dev-return-248-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 58572 invoked from network); 23 Feb 2006 23:15:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 23:15:00 -0000
Received: (qmail 39402 invoked by uid 500); 23 Feb 2006 23:14:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 39372 invoked by uid 500); 23 Feb 2006 23:14:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 39361 invoked by uid 99); 23 Feb 2006 23:14:59 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 15:14:59 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 2CFC0DD
	for <hadoop-dev@lucene.apache.org>; Fri, 24 Feb 2006 00:14:38 +0100 (CET)
Message-ID: <1106475412.1140736478182.JavaMail.jira@ajax.apache.org>
Date: Fri, 24 Feb 2006 00:14:38 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-8) NDFS DataNode advertises localhost as
 it's address
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-8?page=3Dall ]
    =20
Doug Cutting resolved HADOOP-8:
-------------------------------

    Fix Version: 0.1
     Resolution: Won't Fix

This is a known JVM bug:

http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=3D4665037

So let's let Sun fix it, rather than fix it ourselves.  One can workaround =
it by altering one's linux configuration.

> NDFS DataNode advertises localhost as it's address
> --------------------------------------------------
>
>          Key: HADOOP-8
>          URL: http://issues.apache.org/jira/browse/HADOOP-8
>      Project: Hadoop
>         Type: Bug
>   Components: dfs
>  Environment: Linux
>     Reporter: Peter Sandstr=C3=B6m
>      Fix For: 0.1
>  Attachments: ndfs-datanode-fix.patch
>


--=20
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Feb 23 23:24:00 2006
Return-Path: 
 <hadoop-dev-return-249-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 63911 invoked from network); 23 Feb 2006 23:24:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 23:24:00 -0000
Received: (qmail 59722 invoked by uid 500); 23 Feb 2006 23:23:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 59661 invoked by uid 500); 23 Feb 2006 23:23:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 59650 invoked by uid 99); 23 Feb 2006 23:23:59 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 15:23:59 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id A0682DC
	for <hadoop-dev@lucene.apache.org>; Fri, 24 Feb 2006 00:23:37 +0100 (CET)
Message-ID: <448674213.1140737017654.JavaMail.jira@ajax.apache.org>
Date: Fri, 24 Feb 2006 00:23:37 +0100 (CET)
From: "stack@archive.org (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-41) JAVA_OPTS for the TaskRunner Child
In-Reply-To: <1940627377.1140223704366.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-41?page=all ]

stack@archive.org updated HADOOP-41:
------------------------------------

    Attachment: TaskRunner_child_javaopts-v2.patch

Second attempt.  Addresses Doug comment.  In this patch, if mapred.child.heap.size is present in configuration, rather than just ignore it, its heap size setting wins out over any setting present in mapred.child.java.opts and a warning is emitted that this setting is deprecated.

> JAVA_OPTS for the TaskRunner Child
> ----------------------------------
>
>          Key: HADOOP-41
>          URL: http://issues.apache.org/jira/browse/HADOOP-41
>      Project: Hadoop
>         Type: Improvement
>   Components: conf
>     Reporter: stack@archive.org
>     Priority: Minor
>  Attachments: TaskRunner_child_javaopts-v2.patch, TaskRunner_child_javaopts.patch
>
> Currently, its possible to set the java heap size the TaskRunner child runs in, but thats all thats configurable about the child process.  Hereabouts, we've found it useful being able to specify other options for the child JVM, especially when debugging and monitoring long-lived processes.  
> Examples of why its useful being able to set options are the child include:
> + Being able to set '-server' option or '-c64'.
> + Passing logging.properties to configure child logging.
> + Enable and capture to file verbose GC logging or start the SUN JVM JMX agent for the child process.  Allows connecting with jconsole to watch long-lived children, their heap and thread usage, and when seemingly hung, take thread dumps.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Feb 23 23:38:01 2006
Return-Path: 
 <hadoop-dev-return-250-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 70199 invoked from network); 23 Feb 2006 23:38:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 23:38:01 -0000
Received: (qmail 80527 invoked by uid 500); 23 Feb 2006 23:38:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 80506 invoked by uid 500); 23 Feb 2006 23:38:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 80497 invoked by uid 99); 23 Feb 2006 23:38:00 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 15:37:58 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id A4465DC
	for <hadoop-dev@lucene.apache.org>; Fri, 24 Feb 2006 00:37:37 +0100 (CET)
Message-ID: <434038799.1140737857632.JavaMail.jira@ajax.apache.org>
Date: Fri, 24 Feb 2006 00:37:37 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-41) JAVA_OPTS for the TaskRunner Child
In-Reply-To: <1940627377.1140223704366.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-41?page=all ]
     
Doug Cutting resolved HADOOP-41:
--------------------------------

    Fix Version: 0.1
     Resolution: Fixed

I just committed this.  Thanks, Michael!

> JAVA_OPTS for the TaskRunner Child
> ----------------------------------
>
>          Key: HADOOP-41
>          URL: http://issues.apache.org/jira/browse/HADOOP-41
>      Project: Hadoop
>         Type: Improvement
>   Components: conf
>     Reporter: stack@archive.org
>     Priority: Minor
>      Fix For: 0.1
>  Attachments: TaskRunner_child_javaopts-v2.patch, TaskRunner_child_javaopts.patch
>
> Currently, its possible to set the java heap size the TaskRunner child runs in, but thats all thats configurable about the child process.  Hereabouts, we've found it useful being able to specify other options for the child JVM, especially when debugging and monitoring long-lived processes.  
> Examples of why its useful being able to set options are the child include:
> + Being able to set '-server' option or '-c64'.
> + Passing logging.properties to configure child logging.
> + Enable and capture to file verbose GC logging or start the SUN JVM JMX agent for the child process.  Allows connecting with jconsole to watch long-lived children, their heap and thread usage, and when seemingly hung, take thread dumps.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Feb 24 03:36:01 2006
Return-Path: 
 <hadoop-dev-return-251-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 55967 invoked from network); 24 Feb 2006 03:36:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Feb 2006 03:36:01 -0000
Received: (qmail 7631 invoked by uid 500); 24 Feb 2006 03:36:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 7609 invoked by uid 500); 24 Feb 2006 03:36:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 7594 invoked by uid 99); 24 Feb 2006 03:36:00 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 19:36:00 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 872A3DD
	for <hadoop-dev@lucene.apache.org>; Fri, 24 Feb 2006 04:35:38 +0100 (CET)
Message-ID: <1775236486.1140752138551.JavaMail.jira@ajax.apache.org>
Date: Fri, 24 Feb 2006 04:35:38 +0100 (CET)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-56) hadoop nameserver does not recognise
 ndfs nameserver image
In-Reply-To: <1295923568.1140660845840.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-56?page=comments#action_12367623 ] 

eric baldeschwieler commented on HADOOP-56:
-------------------------------------------

As I understand the failure, we brought up a new nameserver on an old cluster (so no file information).  The nameserver saw all the blocks of the old FS and decided they must all belong to deleted files.  It then proceeded to remove them!!

This is bad.  We should have enough interlocks in place that in this situation the name server haults and asks for help.  This is not only a risk during upgrades!  Other operator failures could cause huge data lose.

> hadoop nameserver does not recognise ndfs nameserver image
> ----------------------------------------------------------
>
>          Key: HADOOP-56
>          URL: http://issues.apache.org/jira/browse/HADOOP-56
>      Project: Hadoop
>         Type: Bug
>   Components: dfs
>     Versions: 0.1
>     Reporter: Yoram Arnon
>     Priority: Critical
>  Attachments: ndfs.tar.gz
>
> hadoop nameserver does not recognise ndfs image
> Thus, upgrading from ndfs to hadoop dfs results in total data loss.
> The upgrade should be seemless, with the new server recognising all previous version that are not end-of-life'd.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Feb 24 18:06:10 2006
Return-Path: 
 <hadoop-dev-return-252-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 48213 invoked from network); 24 Feb 2006 18:06:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Feb 2006 18:06:10 -0000
Received: (qmail 75681 invoked by uid 500); 24 Feb 2006 18:06:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75542 invoked by uid 500); 24 Feb 2006 18:06:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75483 invoked by uid 99); 24 Feb 2006 18:06:00 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Feb 2006 10:06:00 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 394E2DD
	for <hadoop-dev@lucene.apache.org>; Fri, 24 Feb 2006 19:05:39 +0100 (CET)
Message-ID: <939281798.1140804339232.JavaMail.jira@ajax.apache.org>
Date: Fri, 24 Feb 2006 19:05:39 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-56) hadoop nameserver does not recognise
 ndfs nameserver image
In-Reply-To: <1295923568.1140660845840.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-56?page=comments#action_12367686 ] 

Doug Cutting commented on HADOOP-56:
------------------------------------

I see two cases:

1. A namenode has been misconfigured, and comes up knowing about no files.  When datanodes report their blocks, the namenode tells them those blocks belong to no files, so the datanode removes them.  This is bad.

2. A datanode has been moved to a new cluster, or is rebooted after a long downtime.  It comes up and tells the namenode about the blocks that it has.  The namenode tells it that those blocks belong to no files, so the datanode removes them.  This is good.

So perhaps the thing to fix is that the namenode should not automatically create an empty filesystem if it is misconfigured.  Perhaps instead we should have a separate "format" command that creates an empty filesystem, and one must run this the first time before starting dfs.  How does that sound?  It makes the out-of-box experience a little more awkward, but I think it might be warranted in this case.

> hadoop nameserver does not recognise ndfs nameserver image
> ----------------------------------------------------------
>
>          Key: HADOOP-56
>          URL: http://issues.apache.org/jira/browse/HADOOP-56
>      Project: Hadoop
>         Type: Bug
>   Components: dfs
>     Versions: 0.1
>     Reporter: Yoram Arnon
>     Priority: Critical
>  Attachments: ndfs.tar.gz
>
> hadoop nameserver does not recognise ndfs image
> Thus, upgrading from ndfs to hadoop dfs results in total data loss.
> The upgrade should be seemless, with the new server recognising all previous version that are not end-of-life'd.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Feb 24 19:10:01 2006
Return-Path: 
 <hadoop-dev-return-253-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 79175 invoked from network); 24 Feb 2006 19:10:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Feb 2006 19:10:01 -0000
Received: (qmail 88973 invoked by uid 500); 24 Feb 2006 19:10:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 88938 invoked by uid 500); 24 Feb 2006 19:10:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88928 invoked by uid 99); 24 Feb 2006 19:10:00 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Feb 2006 11:10:00 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 17F6EDD
	for <hadoop-dev@lucene.apache.org>; Fri, 24 Feb 2006 20:09:39 +0100 (CET)
Message-ID: <1512005068.1140808179095.JavaMail.jira@ajax.apache.org>
Date: Fri, 24 Feb 2006 20:09:39 +0100 (CET)
From: "Bryan Pendleton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-56) hadoop nameserver does not recognise
 ndfs nameserver image
In-Reply-To: <1295923568.1140660845840.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-56?page=comments#action_12367698 ] 

Bryan Pendleton commented on HADOOP-56:
---------------------------------------

I'd perhaps request one more feature: tag each block somehow with a GUID related to the DFS filesystem it is associated with.  So, if we're adding a filesystem "format" can assign the GUID to the newly-created image. And a datanode can find out what the GUID is of the nameserver it's working with before it enumerates blocks, merely ignoring any blocks that have the wrong GUID.

This solves the problem of multiple folks writing with different DFS installs to the same drive, as well as the misconfigured namenode problem, above.

> hadoop nameserver does not recognise ndfs nameserver image
> ----------------------------------------------------------
>
>          Key: HADOOP-56
>          URL: http://issues.apache.org/jira/browse/HADOOP-56
>      Project: Hadoop
>         Type: Bug
>   Components: dfs
>     Versions: 0.1
>     Reporter: Yoram Arnon
>     Priority: Critical
>  Attachments: ndfs.tar.gz
>
> hadoop nameserver does not recognise ndfs image
> Thus, upgrading from ndfs to hadoop dfs results in total data loss.
> The upgrade should be seemless, with the new server recognising all previous version that are not end-of-life'd.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Feb 24 20:09:42 2006
Return-Path: 
 <hadoop-dev-return-254-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 5476 invoked from network); 24 Feb 2006 20:09:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Feb 2006 20:09:42 -0000
Received: (qmail 57232 invoked by uid 500); 24 Feb 2006 20:09:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 57215 invoked by uid 500); 24 Feb 2006 20:09:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 57206 invoked by uid 99); 24 Feb 2006 20:09:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Feb 2006 12:09:41 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of tpatton@dealcatcher.com
 designates 63.238.173.2 as permitted sender)
Received: from [63.238.173.2] (HELO mail.dealcatcher.net) (63.238.173.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Feb 2006 12:09:41 -0800
Received: from tim [63.238.173.100] by mail.dealcatcher.net with ESMTP
  (SMTPD32-8.15) id A83ABCD011E; Fri, 24 Feb 2006 15:10:34 -0500
From: "Tim Patton" <tpatton@dealcatcher.com>
To: <hadoop-dev@lucene.apache.org>
Subject: Load Balancing?
Date: Fri, 24 Feb 2006 15:10:32 -0500
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0020_01C63954.74CF3310"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Thread-Index: AcY5fl2UwN8MyW97TGWeWAFrPQJE8g==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2670
Message-Id: <200602241510343.SM01924@tim>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0020_01C63954.74CF3310
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Sorry to post this on the Dev list, but the user list doesn't seem to get
any traffic.  I've been going through the code trying to figure out how
Hadoop would load balance among machines.  Specifically, if I had two types
of tasks, one high CPU and one low CPU, how can I make sure machines aren't
getting too bogged down by being assigned too many high CPU  tasks or aren't
sitting idle when they could be running more low CPU tasks?  I suppose the
same question could be asked about high and low RAM usage as well.   From
looking at the Nutch source code, it appears it fetches/processes first,
then indexes, when it could be done in parallel.  Is this why?

 

Tim


------=_NextPart_000_0020_01C63954.74CF3310--


From MAILER-DAEMON Fri Feb 24 21:39:03 2006
Return-Path: 
 <hadoop-dev-return-255-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50502 invoked from network); 24 Feb 2006 21:39:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Feb 2006 21:39:03 -0000
Received: (qmail 7712 invoked by uid 500); 24 Feb 2006 21:39:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 7686 invoked by uid 500); 24 Feb 2006 21:39:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 7677 invoked by uid 99); 24 Feb 2006 21:39:03 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Feb 2006 13:39:01 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 9B843DF
	for <hadoop-dev@lucene.apache.org>; Fri, 24 Feb 2006 22:38:40 +0100 (CET)
Message-ID: <845456027.1140817120634.JavaMail.jira@ajax.apache.org>
Date: Fri, 24 Feb 2006 22:38:40 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-40) bufferSize argument is ignored in
 FileSystem.create(File, boolean, int)
In-Reply-To: <1308650132.1140216231434.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-40?page=all ]
     
Doug Cutting resolved HADOOP-40:
--------------------------------

    Fix Version: 0.1
     Resolution: Fixed

I just committed my patch for this.

> bufferSize argument is ignored in FileSystem.create(File, boolean, int)
> -----------------------------------------------------------------------
>
>          Key: HADOOP-40
>          URL: http://issues.apache.org/jira/browse/HADOOP-40
>      Project: Hadoop
>         Type: Bug
>   Components: fs
>     Reporter: Konstantin Shvachko
>     Priority: Minor
>      Fix For: 0.1
>  Attachments: BufferSize.patch, bufferSize.patch
>
> org.apache.hadoop.fs.FileSystem.create(File f, boolean overwrite, int bufferSize)
> ignores the input parameter bufferSize.
> It passes further down the internal configuration, which includes the buffer size, but not the parameter value.
> This works fine within the file system, since everything that calls create extracts buffer size from the same config. 
> MapReduce although is probably affected by that, see 
> org.apache.hadoop.io.SequenceFile.Sorter.MergeQueue.MergeQueue(int size, String outName, boolean done)
> The attached patch would fix it.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Feb 24 23:26:03 2006
Return-Path: 
 <hadoop-dev-return-256-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96965 invoked from network); 24 Feb 2006 23:26:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Feb 2006 23:26:03 -0000
Received: (qmail 66247 invoked by uid 500); 24 Feb 2006 23:26:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66199 invoked by uid 500); 24 Feb 2006 23:26:02 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66187 invoked by uid 99); 24 Feb 2006 23:26:01 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Feb 2006 15:25:59 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 8978EDD
	for <hadoop-dev@lucene.apache.org>; Sat, 25 Feb 2006 00:25:38 +0100 (CET)
Message-ID: <1756330420.1140823538561.JavaMail.jira@ajax.apache.org>
Date: Sat, 25 Feb 2006 00:25:38 +0100 (CET)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-40) bufferSize argument is ignored in
 FileSystem.create(File, boolean, int)
In-Reply-To: <1308650132.1140216231434.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-40?page=comments#action_12367738 ] 

Konstantin Shvachko commented on HADOOP-40:
-------------------------------------------

Yes. This is the right way of doing it.
It particularly makes sense, since the main file and the checksum file
do not necessarily need to share the same buffer size.
With the file buffer large the checksum buffer doesn't need to be large at all.

> bufferSize argument is ignored in FileSystem.create(File, boolean, int)
> -----------------------------------------------------------------------
>
>          Key: HADOOP-40
>          URL: http://issues.apache.org/jira/browse/HADOOP-40
>      Project: Hadoop
>         Type: Bug
>   Components: fs
>     Reporter: Konstantin Shvachko
>     Priority: Minor
>      Fix For: 0.1
>  Attachments: BufferSize.patch, bufferSize.patch
>
> org.apache.hadoop.fs.FileSystem.create(File f, boolean overwrite, int bufferSize)
> ignores the input parameter bufferSize.
> It passes further down the internal configuration, which includes the buffer size, but not the parameter value.
> This works fine within the file system, since everything that calls create extracts buffer size from the same config. 
> MapReduce although is probably affected by that, see 
> org.apache.hadoop.io.SequenceFile.Sorter.MergeQueue.MergeQueue(int size, String outName, boolean done)
> The attached patch would fix it.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Sat Feb 25 02:40:01 2006
Return-Path: 
 <hadoop-dev-return-257-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 54304 invoked from network); 25 Feb 2006 02:40:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Feb 2006 02:40:01 -0000
Received: (qmail 95477 invoked by uid 500); 25 Feb 2006 02:40:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95450 invoked by uid 500); 25 Feb 2006 02:40:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95441 invoked by uid 99); 25 Feb 2006 02:40:00 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Feb 2006 18:40:00 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 06170DD
	for <hadoop-dev@lucene.apache.org>; Sat, 25 Feb 2006 03:39:39 +0100 (CET)
Message-ID: <162573672.1140835179023.JavaMail.jira@ajax.apache.org>
Date: Sat, 25 Feb 2006 03:39:39 +0100 (CET)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-33) DF enhancement: performance and win
 XP support
In-Reply-To: <922804577.1139611475063.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-33?page=comments#action_12367755 ] 

Konstantin Shvachko commented on HADOOP-33:
-------------------------------------------

1. Having the lastDfTime, and updating DF every time DF_INTERVAL passes is definitely a good solution.
I would go even further and place the DF renew/refresh logic directly into the DF class so that functions
calling DF get-methods were free to assume the data is up to date.
I don't know whether we need that, but DF_INTERVAL can be made a configurable parameter.
This will bring in more code, but will make the use of the DF class easier in the end.
Do we want it?

2. My patch does not remove the dependency on Cygwin. What it does is
it removes dependency on Cygwin in one particular case without compromising performance for the mainstream OS.
The whole file system can run (and actually runs) on windows after that without overheads of cygwin.
Additional code is justifiable and inevitable in this case until Sun will implement this functionality for us using native libraries :-).

3. What do you mean by minimizing the code?
Is it "the minimum of changes to the existing code that solve the problem", or is it
the minimal amount of total code committed to the repository?
Or is it minimizing the code required in the future to use the feature?
This is actually an interesting topic for discussion......


> DF enhancement: performance and win XP support
> ----------------------------------------------
>
>          Key: HADOOP-33
>          URL: http://issues.apache.org/jira/browse/HADOOP-33
>      Project: Hadoop
>         Type: Improvement
>   Components: fs, dfs
>  Environment: Unix, Cygwin, Win XP
>     Reporter: Konstantin Shvachko
>     Priority: Minor
>  Attachments: DF.patch, DFpatch.txt
>
> 1. DF is called twice for each heartbeat, which happens each 3 seconds.
> There is a simple fix for that in the attached patch.
> 2. cygwin is required to run df program in windows environment.
> There is a class org.apache.commons.io.FileSystemUtils, which can return disk free space
> for different OSs, but it does not have means to get disk capacity.
> In general in windows there is no efficient and uniform way to calculate disk capacity
> using a shell command.
> The choices are 'chkdsk' and 'defrag -a', but both of them are too slow to be called
> every 3 seconds.
> WinXP and 2003 server have a new tool called fsutil, which provides all necessary info.
> I implemented a call to fsutil in case df fails, and the OS is right.
> Other win versions should still run cygwin.
> I tested this fetaure for linux, winXP and cygwin.
> See attached patch.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Sat Feb 25 06:31:07 2006
Return-Path: 
 <hadoop-dev-return-258-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 11204 invoked from network); 25 Feb 2006 06:31:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Feb 2006 06:31:07 -0000
Received: (qmail 97421 invoked by uid 500); 25 Feb 2006 06:31:07 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97403 invoked by uid 500); 25 Feb 2006 06:31:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97394 invoked by uid 99); 25 Feb 2006 06:31:06 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Feb 2006 22:31:04 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id B1C6BDD
	for <hadoop-dev@lucene.apache.org>; Sat, 25 Feb 2006 07:30:43 +0100 (CET)
Message-ID: <939262527.1140849043726.JavaMail.jira@ajax.apache.org>
Date: Sat, 25 Feb 2006 07:30:43 +0100 (CET)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-56) hadoop nameserver does not recognise
 ndfs nameserver image
In-Reply-To: <1295923568.1140660845840.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-56?page=comments#action_12367760 ] 

eric baldeschwieler commented on HADOOP-56:
-------------------------------------------

A format command sounds useful.

GUID and other extensions to block meta data to allow more error checking also sound like a good idea, but I feel like we need to thrash out the use cases  Not sure I follow the intended behavior in bryan's example.  Maybe we should fork that discussion into an enhancement proposal?


> hadoop nameserver does not recognise ndfs nameserver image
> ----------------------------------------------------------
>
>          Key: HADOOP-56
>          URL: http://issues.apache.org/jira/browse/HADOOP-56
>      Project: Hadoop
>         Type: Bug
>   Components: dfs
>     Versions: 0.1
>     Reporter: Yoram Arnon
>     Priority: Critical
>  Attachments: ndfs.tar.gz
>
> hadoop nameserver does not recognise ndfs image
> Thus, upgrading from ndfs to hadoop dfs results in total data loss.
> The upgrade should be seemless, with the new server recognising all previous version that are not end-of-life'd.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb 27 16:57:33 2006
Return-Path: 
 <hadoop-dev-return-259-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34221 invoked from network); 27 Feb 2006 16:57:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Feb 2006 16:57:33 -0000
Received: (qmail 72028 invoked by uid 500); 27 Feb 2006 16:57:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 71754 invoked by uid 500); 27 Feb 2006 16:57:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 71733 invoked by uid 99); 27 Feb 2006 16:57:29 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Feb 2006 08:57:13 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 7BE0DE0
	for <hadoop-dev@lucene.apache.org>; Mon, 27 Feb 2006 17:56:46 +0100 (CET)
Message-ID: <1076910929.1141059406460.JavaMail.jira@ajax.apache.org>
Date: Mon, 27 Feb 2006 17:56:46 +0100 (CET)
From: "stack@archive.org (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-60) Specification of alternate conf.
 directory
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Specification of alternate conf. directory
------------------------------------------

         Key: HADOOP-60
         URL: http://issues.apache.org/jira/browse/HADOOP-60
     Project: Hadoop
        Type: Improvement
    Reporter: stack@archive.org
    Priority: Minor


Currently, hadoop configuration must be done by making edits and addition to ${HADOOP_HOME}/conf.  Allowing specification of an alternate configuration directory will allow keeping configuration and binary distinct.  Benefits include: Binary can be made read-only; or binary is blanket-updateable with configuration undisturbed.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb 27 17:00:13 2006
Return-Path: 
 <hadoop-dev-return-260-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 35962 invoked from network); 27 Feb 2006 17:00:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Feb 2006 17:00:13 -0000
Received: (qmail 76663 invoked by uid 500); 27 Feb 2006 17:00:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 76636 invoked by uid 500); 27 Feb 2006 17:00:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 76609 invoked by uid 99); 27 Feb 2006 17:00:08 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Feb 2006 08:59:57 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 71015DE
	for <hadoop-dev@lucene.apache.org>; Mon, 27 Feb 2006 17:59:30 +0100 (CET)
Message-ID: <1238197312.1141059570460.JavaMail.jira@ajax.apache.org>
Date: Mon, 27 Feb 2006 17:59:30 +0100 (CET)
From: "stack@archive.org (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-60) Specification of alternate conf.
 directory
In-Reply-To: <1076910929.1141059406460.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-60?page=all ]

stack@archive.org updated HADOOP-60:
------------------------------------

    Attachment: HADOOP_CONF_DIR.patch

HADOOP_CONF_DIR patch.  Passes HADOOP_CONF_DIR setting to subscripts and forwards the environment variable over the ssh chasm (if pertinent config. made to remote ssh_config).

> Specification of alternate conf. directory
> ------------------------------------------
>
>          Key: HADOOP-60
>          URL: http://issues.apache.org/jira/browse/HADOOP-60
>      Project: Hadoop
>         Type: Improvement
>     Reporter: stack@archive.org
>     Priority: Minor
>  Attachments: HADOOP_CONF_DIR.patch
>
> Currently, hadoop configuration must be done by making edits and addition to ${HADOOP_HOME}/conf.  Allowing specification of an alternate configuration directory will allow keeping configuration and binary distinct.  Benefits include: Binary can be made read-only; or binary is blanket-updateable with configuration undisturbed.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb 27 18:40:15 2006
Return-Path: 
 <hadoop-dev-return-261-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91735 invoked from network); 27 Feb 2006 18:40:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Feb 2006 18:40:15 -0000
Received: (qmail 12110 invoked by uid 500); 27 Feb 2006 18:40:15 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 12089 invoked by uid 500); 27 Feb 2006 18:40:15 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 12080 invoked by uid 99); 27 Feb 2006 18:40:14 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Feb 2006 10:40:03 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 02A6ADD
	for <hadoop-dev@lucene.apache.org>; Mon, 27 Feb 2006 19:39:35 +0100 (CET)
Message-ID: <456207758.1141065575001.JavaMail.jira@ajax.apache.org>
Date: Mon, 27 Feb 2006 19:39:35 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-33) DF enhancement: performance and win
 XP support
In-Reply-To: <922804577.1139611475063.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-33?page=comments#action_12368006 ] 

Doug Cutting commented on HADOOP-33:
------------------------------------

Yes, DF_INTERVAL should be configurable.

Caching inside DF sounds fine.  We'd then want to add a DF field to FSDataset, so that we always reuse the same instance.

By minimizing the code I primarily mean minimal total code committed to the repository.  Minimizing the size of patches is also good, since it makes it easier to understand.

I do not see how removing the dependency on cygwin in this one case helps the project: it makes it bigger but adds no functionality and removes no dependencies.  Dependencies are also not bad: we don't want to re-invent things.  Cygwin has already solved this problem (and some others) for us permitting us to focus on Hadoop's more critical issues.

> DF enhancement: performance and win XP support
> ----------------------------------------------
>
>          Key: HADOOP-33
>          URL: http://issues.apache.org/jira/browse/HADOOP-33
>      Project: Hadoop
>         Type: Improvement
>   Components: fs, dfs
>  Environment: Unix, Cygwin, Win XP
>     Reporter: Konstantin Shvachko
>     Priority: Minor
>  Attachments: DF.patch, DFpatch.txt
>
> 1. DF is called twice for each heartbeat, which happens each 3 seconds.
> There is a simple fix for that in the attached patch.
> 2. cygwin is required to run df program in windows environment.
> There is a class org.apache.commons.io.FileSystemUtils, which can return disk free space
> for different OSs, but it does not have means to get disk capacity.
> In general in windows there is no efficient and uniform way to calculate disk capacity
> using a shell command.
> The choices are 'chkdsk' and 'defrag -a', but both of them are too slow to be called
> every 3 seconds.
> WinXP and 2003 server have a new tool called fsutil, which provides all necessary info.
> I implemented a call to fsutil in case df fails, and the OS is right.
> Other win versions should still run cygwin.
> I tested this fetaure for linux, winXP and cygwin.
> See attached patch.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb 27 18:44:08 2006
Return-Path: 
 <hadoop-dev-return-262-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93288 invoked from network); 27 Feb 2006 18:44:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Feb 2006 18:44:08 -0000
Received: (qmail 19777 invoked by uid 500); 27 Feb 2006 18:44:06 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 19735 invoked by uid 500); 27 Feb 2006 18:44:06 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 19715 invoked by uid 99); 27 Feb 2006 18:44:06 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Feb 2006 10:43:55 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id B5DD7DD
	for <hadoop-dev@lucene.apache.org>; Mon, 27 Feb 2006 19:43:28 +0100 (CET)
Message-ID: <414469584.1141065808742.JavaMail.jira@ajax.apache.org>
Date: Mon, 27 Feb 2006 19:43:28 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-56) hadoop nameserver does not recognise
 ndfs nameserver image
In-Reply-To: <1295923568.1140660845840.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-56?page=comments#action_12368007 ] 

Doug Cutting commented on HADOOP-56:
------------------------------------

I agree with Eric: a filesystem GUID could be a useful long-term feature, and may help solve this problem, but we need a simpler solution short-term.  I think adding a format command would address this issue, and also still be useful if we later add a filesystem guid.

> hadoop nameserver does not recognise ndfs nameserver image
> ----------------------------------------------------------
>
>          Key: HADOOP-56
>          URL: http://issues.apache.org/jira/browse/HADOOP-56
>      Project: Hadoop
>         Type: Bug
>   Components: dfs
>     Versions: 0.1
>     Reporter: Yoram Arnon
>     Priority: Critical
>  Attachments: ndfs.tar.gz
>
> hadoop nameserver does not recognise ndfs image
> Thus, upgrading from ndfs to hadoop dfs results in total data loss.
> The upgrade should be seemless, with the new server recognising all previous version that are not end-of-life'd.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb 27 18:52:33 2006
Return-Path: 
 <hadoop-dev-return-263-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96819 invoked from network); 27 Feb 2006 18:52:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Feb 2006 18:52:33 -0000
Received: (qmail 32996 invoked by uid 500); 27 Feb 2006 18:52:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 32935 invoked by uid 500); 27 Feb 2006 18:52:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 32926 invoked by uid 99); 27 Feb 2006 18:52:32 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Feb 2006 10:52:23 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id BF8A9DD
	for <hadoop-dev@lucene.apache.org>; Mon, 27 Feb 2006 19:51:55 +0100 (CET)
Message-ID: <247533471.1141066315782.JavaMail.jira@ajax.apache.org>
Date: Mon, 27 Feb 2006 19:51:55 +0100 (CET)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-56) hadoop nameserver does not recognise
 ndfs nameserver image
In-Reply-To: <1295923568.1140660845840.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-56?page=comments#action_12368011 ] 

Konstantin Shvachko commented on HADOOP-56:
-------------------------------------------

Format is definitely useful.
But I don't think it is reasonable to add GUID or any user information anywhere except
file description on the namenode. Otherwise it will be hard to support this information.
- The problem of different DFS installs writing to the same drive can be solved by introducing
DFS cluster name, and including it as a final component of dfs.name.dir and dfs.data.dir
- DFS probably needs an application version number, which should be compared when the
file system starts uploading information from the check pointed image.
And the conversion method, which if specified would provide conversion between the versions,
and if not the system should refuse loading the image. Sooner or later conversion of data will
become an issue, it would be good to have the mechanism in place by that time.


> hadoop nameserver does not recognise ndfs nameserver image
> ----------------------------------------------------------
>
>          Key: HADOOP-56
>          URL: http://issues.apache.org/jira/browse/HADOOP-56
>      Project: Hadoop
>         Type: Bug
>   Components: dfs
>     Versions: 0.1
>     Reporter: Yoram Arnon
>     Priority: Critical
>  Attachments: ndfs.tar.gz
>
> hadoop nameserver does not recognise ndfs image
> Thus, upgrading from ndfs to hadoop dfs results in total data loss.
> The upgrade should be seemless, with the new server recognising all previous version that are not end-of-life'd.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb 27 19:41:34 2006
Return-Path: 
 <hadoop-dev-return-264-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 19484 invoked from network); 27 Feb 2006 19:41:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Feb 2006 19:41:34 -0000
Received: (qmail 8770 invoked by uid 500); 27 Feb 2006 19:41:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 8749 invoked by uid 500); 27 Feb 2006 19:41:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 8740 invoked by uid 99); 27 Feb 2006 19:41:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Feb 2006 11:41:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of tpatton@dealcatcher.com
 designates 63.238.173.2 as permitted sender)
Received: from [63.238.173.2] (HELO mail.dealcatcher.net) (63.238.173.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Feb 2006 11:41:32 -0800
Received: from tim [63.238.173.100] by mail.dealcatcher.net with ESMTP
  (SMTPD32-8.15) id A62510BB013E; Mon, 27 Feb 2006 14:42:29 -0500
From: "Tim Patton" <tpatton@dealcatcher.com>
To: <hadoop-dev@lucene.apache.org>
Subject: Problem Starting Tracker
Date: Mon, 27 Feb 2006 14:42:30 -0500
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_006E_01C63BAC.093093B0"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2670
Thread-Index: AcY71fHzQRY7RJlQTjS6kARsz57M8g==
Message-Id: <200602271442328.SM01924@tim>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_006E_01C63BAC.093093B0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

I am having trouble getting the example here running:
http://lucene.apache.org/hadoop/docs/api/overview-summary.html.  I've got
cygwin and ssh set up correctly as well as edited all the environment
variables correctly.  When I run the start all scripts, I get this error for
the job tracker:

 

060227 143153 Property 'sun.cpu.isalist' is 

060227 143153 Starting tracker

java.io.IOException: The filename, directory name, or volume label syntax is
incorrect

            at java.io.WinNTFileSystem.canonicalize0(Native Method)

            at
java.io.Win32FileSystem.canonicalize(Win32FileSystem.java:395)

            at java.io.File.getCanonicalPath(File.java:531)

            at
org.apache.hadoop.mapred.JobTrackerInfoServer.<init>(JobTrackerInfoServer.ja
va:64)

            at
org.apache.hadoop.mapred.JobTracker.<init>(JobTracker.java:303)

            at
org.apache.hadoop.mapred.JobTracker.startTracker(JobTracker.java:50)

            at org.apache.hadoop.mapred.JobTracker.main(JobTracker.java:820)

060227 143154 parsing
file:/C:/java/lib/hadoop-nightly/conf/hadoop-default.xml

060227 143154 parsing
file:/C:/java/lib/hadoop-nightly/conf/mapred-default.xml

060227 143154 parsing file:/C:/java/lib/hadoop-nightly/conf/hadoop-site.xml

060227 143154 Starting tracker

java.net.BindException: Address already in use: JVM_Bind

            at java.net.PlainSocketImpl.socketBind(Native Method)

            at java.net.PlainSocketImpl.bind(PlainSocketImpl.java:359)

            at java.net.ServerSocket.bind(ServerSocket.java:319)

            at java.net.ServerSocket.<init>(ServerSocket.java:185)

            at java.net.ServerSocket.<init>(ServerSocket.java:97)

            at org.apache.hadoop.ipc.Server$Listener.<init>(Server.java:80)

            at org.apache.hadoop.ipc.Server.start(Server.java:244)

            at
org.apache.hadoop.mapred.JobTracker.<init>(JobTracker.java:294)

            at
org.apache.hadoop.mapred.JobTracker.startTracker(JobTracker.java:50)

            at org.apache.hadoop.mapred.JobTracker.main(JobTracker.java:820)

060227 143155 Server connection on port 9901 from 127.0.0.1: starting

 

It then loops with the bind error forever.  I'm not sure what file the
tracker is looking for or if this is a problem translating between
cygwin/windows paths.  Which paths should my hadoop.xml files use?  Do I
need to change the tmp directories from the defaults?  I've also tried
changing the port number, but I always get the bind error.

 

Tim


------=_NextPart_000_006E_01C63BAC.093093B0--


From MAILER-DAEMON Mon Feb 27 19:47:51 2006
Return-Path: 
 <hadoop-dev-return-265-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 24061 invoked from network); 27 Feb 2006 19:47:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Feb 2006 19:47:51 -0000
Received: (qmail 22913 invoked by uid 500); 27 Feb 2006 19:47:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 22898 invoked by uid 500); 27 Feb 2006 19:47:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22888 invoked by uid 99); 27 Feb 2006 19:47:50 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Feb 2006 11:47:41 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 26BB8DD
	for <hadoop-dev@lucene.apache.org>; Mon, 27 Feb 2006 20:47:14 +0100 (CET)
Message-ID: <696990424.1141069634156.JavaMail.jira@ajax.apache.org>
Date: Mon, 27 Feb 2006 20:47:14 +0100 (CET)
From: "Bryan Pendleton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-56) hadoop nameserver does not recognise
 ndfs nameserver image
In-Reply-To: <1295923568.1140660845840.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-56?page=comments#action_12368013 ] 

Bryan Pendleton commented on HADOOP-56:
---------------------------------------

The advantage of the GUID over enhancing the configuration is that it prevents anyone from "screwing up" - the defaults will never cause data loss. Without it, even with "format", it's possible for someone to bring up a set of datanodes on a shared set of machines and start clobbering data. With a GUID, this is no longer an accident that can happen. The original issue that spawned this discussion was with this kind of situation - settings in a config file lead to data "cleanup" that wasn't desired. With a GUID, this risk goes away. Without it, especially with default data directories like /tmp/, it's very easy for two different people to clobber each others data by running datanode instances on the same machine(s).

I understand there's a big push back against complexity. But hadoop is a component likely to be used in a lot of situations, by users who might or might not have complete control of their cluster. The DFS layer is supposed to provide data reliability, so it seems appropriate to put in guards against bad end-user behavior/misconfigurations, if it's not going to be a big cost in performance (it shouldn't - what, an extra string during the initial chat between namenode/datanode?), or storage (it shouldn't add more than a few extra bytes to the filename of each block - or a whole GUID subdir, rather than/in addition to the suggested named paths).

An much weaker alternative to prevent only the one worst-case I'm highlighting, would be for a datanode to shutdown with an error if *none* of the blocks on in a datanode's storage directory are from live files in the DFS. I think that is a far less powerful fix, with the only benefit being that it doesn't require changing the behavior of virtually any of the existing code.

> hadoop nameserver does not recognise ndfs nameserver image
> ----------------------------------------------------------
>
>          Key: HADOOP-56
>          URL: http://issues.apache.org/jira/browse/HADOOP-56
>      Project: Hadoop
>         Type: Bug
>   Components: dfs
>     Versions: 0.1
>     Reporter: Yoram Arnon
>     Priority: Critical
>  Attachments: ndfs.tar.gz
>
> hadoop nameserver does not recognise ndfs image
> Thus, upgrading from ndfs to hadoop dfs results in total data loss.
> The upgrade should be seemless, with the new server recognising all previous version that are not end-of-life'd.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb 27 20:48:29 2006
Return-Path: 
 <hadoop-dev-return-266-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 58459 invoked from network); 27 Feb 2006 20:48:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Feb 2006 20:48:29 -0000
Received: (qmail 32347 invoked by uid 500); 27 Feb 2006 20:48:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 32320 invoked by uid 500); 27 Feb 2006 20:48:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 32310 invoked by uid 99); 27 Feb 2006 20:48:29 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Feb 2006 12:48:14 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 0D7CAE0
	for <hadoop-dev@lucene.apache.org>; Mon, 27 Feb 2006 21:47:46 +0100 (CET)
Message-ID: <1400377919.1141073266045.JavaMail.jira@ajax.apache.org>
Date: Mon, 27 Feb 2006 21:47:46 +0100 (CET)
From: "Tim Patton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-33) DF enhancement: performance and win
 XP support
In-Reply-To: <922804577.1139611475063.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-33?page=comments#action_12368021 ] 

Tim Patton commented on HADOOP-33:
----------------------------------

Konstantin,

Thank you for submitting that patch, even though it wasn't accepted I just copied your tryOtherOS method into my code to get rid of that annoying Unix dependency.  I was suprised to see a dependency like that on an operating system command.  Frankly, as a developer and a user, a little extra code is a lot less annoying than several megs of Cygwin and a few hours getting it working (especially since it never worked right).

> DF enhancement: performance and win XP support
> ----------------------------------------------
>
>          Key: HADOOP-33
>          URL: http://issues.apache.org/jira/browse/HADOOP-33
>      Project: Hadoop
>         Type: Improvement
>   Components: fs, dfs
>  Environment: Unix, Cygwin, Win XP
>     Reporter: Konstantin Shvachko
>     Priority: Minor
>  Attachments: DF.patch, DFpatch.txt
>
> 1. DF is called twice for each heartbeat, which happens each 3 seconds.
> There is a simple fix for that in the attached patch.
> 2. cygwin is required to run df program in windows environment.
> There is a class org.apache.commons.io.FileSystemUtils, which can return disk free space
> for different OSs, but it does not have means to get disk capacity.
> In general in windows there is no efficient and uniform way to calculate disk capacity
> using a shell command.
> The choices are 'chkdsk' and 'defrag -a', but both of them are too slow to be called
> every 3 seconds.
> WinXP and 2003 server have a new tool called fsutil, which provides all necessary info.
> I implemented a call to fsutil in case df fails, and the OS is right.
> Other win versions should still run cygwin.
> I tested this fetaure for linux, winXP and cygwin.
> See attached patch.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb 27 20:59:45 2006
Return-Path: 
 <hadoop-dev-return-267-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67559 invoked from network); 27 Feb 2006 20:59:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Feb 2006 20:59:45 -0000
Received: (qmail 46659 invoked by uid 500); 27 Feb 2006 20:59:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 46639 invoked by uid 500); 27 Feb 2006 20:59:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46627 invoked by uid 99); 27 Feb 2006 20:59:40 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Feb 2006 12:59:26 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 5597CDD
	for <hadoop-dev@lucene.apache.org>; Mon, 27 Feb 2006 21:58:57 +0100 (CET)
Message-ID: <1646263680.1141073937348.JavaMail.jira@ajax.apache.org>
Date: Mon, 27 Feb 2006 21:58:57 +0100 (CET)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-33) DF enhancement: performance and win
 XP support
In-Reply-To: <922804577.1139611475063.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-33?page=comments#action_12368023 ] 

Doug Cutting commented on HADOOP-33:
------------------------------------

So, Tim, I take it you're using Hadoop on XP without Cygwin?  What are you using for startup scripts?

> DF enhancement: performance and win XP support
> ----------------------------------------------
>
>          Key: HADOOP-33
>          URL: http://issues.apache.org/jira/browse/HADOOP-33
>      Project: Hadoop
>         Type: Improvement
>   Components: fs, dfs
>  Environment: Unix, Cygwin, Win XP
>     Reporter: Konstantin Shvachko
>     Priority: Minor
>  Attachments: DF.patch, DFpatch.txt
>
> 1. DF is called twice for each heartbeat, which happens each 3 seconds.
> There is a simple fix for that in the attached patch.
> 2. cygwin is required to run df program in windows environment.
> There is a class org.apache.commons.io.FileSystemUtils, which can return disk free space
> for different OSs, but it does not have means to get disk capacity.
> In general in windows there is no efficient and uniform way to calculate disk capacity
> using a shell command.
> The choices are 'chkdsk' and 'defrag -a', but both of them are too slow to be called
> every 3 seconds.
> WinXP and 2003 server have a new tool called fsutil, which provides all necessary info.
> I implemented a call to fsutil in case df fails, and the OS is right.
> Other win versions should still run cygwin.
> I tested this fetaure for linux, winXP and cygwin.
> See attached patch.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb 27 21:16:47 2006
Return-Path: 
 <hadoop-dev-return-268-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75368 invoked from network); 27 Feb 2006 21:16:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Feb 2006 21:16:47 -0000
Received: (qmail 75703 invoked by uid 500); 27 Feb 2006 21:16:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75664 invoked by uid 500); 27 Feb 2006 21:16:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75652 invoked by uid 99); 27 Feb 2006 21:16:46 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Feb 2006 13:16:37 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 7C58CDF
	for <hadoop-dev@lucene.apache.org>; Mon, 27 Feb 2006 22:16:04 +0100 (CET)
Message-ID: <1222868302.1141074964507.JavaMail.jira@ajax.apache.org>
Date: Mon, 27 Feb 2006 22:16:04 +0100 (CET)
From: "Tim Patton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-33) DF enhancement: performance and win
 XP support
In-Reply-To: <922804577.1139611475063.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-33?page=comments#action_12368027 ] 

Tim Patton commented on HADOOP-33:
----------------------------------

Doug,

I'm getting there, so far the NameNode and the DataNode are working.  I've just got hacky batch files so far, I don't have the nice shell script system you guys developed.  Here's my batch file for the NameNode:

java -Xmx256m -cp c:\java\lib\hadoop-nightly\conf;"c:\program files\java\jdk1.5.0_06\lib\tools.jar";c:\java\lib\hadoop-nightly\hadoop-nightly.jar;c:\java\lib\hadoop-nightly\hadoop-nightly-examples.jar;c:\java\lib\hadoop-nightly\hadoop-nightly-examples.jar;c:\java\lib\hadoop-nightly\hadoop-nightly.jar;c:\java\lib\hadoop-nightly\lib\commons-logging-api-1.0.4.jar;c:\java\lib\hadoop-nightly\lib\jetty-5.1.4.jar;c:\java\lib\hadoop-nightly\lib\junit-3.8.1.jar;c:\java\lib\hadoop-nightly\lib\lucene-core-1.9-rc1-dev.jar;c:\java\lib\hadoop-nightly\lib\servlet-api.jar;c:\java\lib\hadoop-nightly\lib\jetty-ext\ant.jar;c:\java\lib\hadoop-nightly\lib\jetty-ext\commons-el.jar;c:\java\lib\hadoop-nightly\lib\jetty-ext\jasper-compiler.jar;c:\java\lib\hadoop-nightly\lib\jetty-ext\jasper-runtime.jar;c:\java\lib\hadoop-nightly\lib\jetty-ext\jsp-api.jar org.apache.hadoop.dfs.NameNode

Now I am just tryng to figure out why JobTracker won't work.  I couldn't get JobTracker working in Cygwin either, so I thought I'd edit the code to give me stack traces and see if I could narrow it down, which led me to try to get it working right in CodeGuide without having to keep going back to Cygwin...

> DF enhancement: performance and win XP support
> ----------------------------------------------
>
>          Key: HADOOP-33
>          URL: http://issues.apache.org/jira/browse/HADOOP-33
>      Project: Hadoop
>         Type: Improvement
>   Components: fs, dfs
>  Environment: Unix, Cygwin, Win XP
>     Reporter: Konstantin Shvachko
>     Priority: Minor
>  Attachments: DF.patch, DFpatch.txt
>
> 1. DF is called twice for each heartbeat, which happens each 3 seconds.
> There is a simple fix for that in the attached patch.
> 2. cygwin is required to run df program in windows environment.
> There is a class org.apache.commons.io.FileSystemUtils, which can return disk free space
> for different OSs, but it does not have means to get disk capacity.
> In general in windows there is no efficient and uniform way to calculate disk capacity
> using a shell command.
> The choices are 'chkdsk' and 'defrag -a', but both of them are too slow to be called
> every 3 seconds.
> WinXP and 2003 server have a new tool called fsutil, which provides all necessary info.
> I implemented a call to fsutil in case df fails, and the OS is right.
> Other win versions should still run cygwin.
> I tested this fetaure for linux, winXP and cygwin.
> See attached patch.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb 27 21:18:40 2006
Return-Path: 
 <hadoop-dev-return-269-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76125 invoked from network); 27 Feb 2006 21:18:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Feb 2006 21:18:40 -0000
Received: (qmail 77240 invoked by uid 500); 27 Feb 2006 21:18:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 77184 invoked by uid 500); 27 Feb 2006 21:18:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 77174 invoked by uid 99); 27 Feb 2006 21:18:40 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Feb 2006 13:18:25 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id CE064DD
	for <hadoop-dev@lucene.apache.org>; Mon, 27 Feb 2006 22:17:57 +0100 (CET)
Message-ID: <699964886.1141075077836.JavaMail.jira@ajax.apache.org>
Date: Mon, 27 Feb 2006 22:17:57 +0100 (CET)
From: "Tim Patton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-33) DF enhancement: performance and win
 XP support
In-Reply-To: <922804577.1139611475063.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-33?page=comments#action_12368028 ] 

Tim Patton commented on HADOOP-33:
----------------------------------

Oops, I didn't realize lines were not auto-wrapping.  Sorry about that.  And I meant to say I knew my batch file doesn't have relative paths, I was just copying and pasting to get it working.

> DF enhancement: performance and win XP support
> ----------------------------------------------
>
>          Key: HADOOP-33
>          URL: http://issues.apache.org/jira/browse/HADOOP-33
>      Project: Hadoop
>         Type: Improvement
>   Components: fs, dfs
>  Environment: Unix, Cygwin, Win XP
>     Reporter: Konstantin Shvachko
>     Priority: Minor
>  Attachments: DF.patch, DFpatch.txt
>
> 1. DF is called twice for each heartbeat, which happens each 3 seconds.
> There is a simple fix for that in the attached patch.
> 2. cygwin is required to run df program in windows environment.
> There is a class org.apache.commons.io.FileSystemUtils, which can return disk free space
> for different OSs, but it does not have means to get disk capacity.
> In general in windows there is no efficient and uniform way to calculate disk capacity
> using a shell command.
> The choices are 'chkdsk' and 'defrag -a', but both of them are too slow to be called
> every 3 seconds.
> WinXP and 2003 server have a new tool called fsutil, which provides all necessary info.
> I implemented a call to fsutil in case df fails, and the OS is right.
> Other win versions should still run cygwin.
> I tested this fetaure for linux, winXP and cygwin.
> See attached patch.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb 27 22:02:37 2006
Return-Path: 
 <hadoop-dev-return-270-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96215 invoked from network); 27 Feb 2006 22:02:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Feb 2006 22:02:37 -0000
Received: (qmail 57857 invoked by uid 500); 27 Feb 2006 22:02:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 57839 invoked by uid 500); 27 Feb 2006 22:02:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 57830 invoked by uid 99); 27 Feb 2006 22:02:36 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Feb 2006 14:02:25 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 942E7DD
	for <hadoop-dev@lucene.apache.org>; Mon, 27 Feb 2006 23:01:55 +0100 (CET)
Message-ID: <2075073385.1141077715605.JavaMail.jira@ajax.apache.org>
Date: Mon, 27 Feb 2006 23:01:55 +0100 (CET)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-59) support generic command-line options
In-Reply-To: <321463887.1140733957324.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-59?page=all ]

Michel Tourn reassigned HADOOP-59:
----------------------------------

    Assign To: Michel Tourn

> support generic command-line options
> ------------------------------------
>
>          Key: HADOOP-59
>          URL: http://issues.apache.org/jira/browse/HADOOP-59
>      Project: Hadoop
>         Type: Improvement
>   Components: conf
>     Versions: 0.1
>     Reporter: Doug Cutting
>     Assignee: Michel Tourn
>      Fix For: 0.1

>
> Hadoop commands should all support some common options.  For example, it should be possible to specify the namenode, datanode, and, for that matter, any config option, in a generic way.
> This could be implemented with code like:
> public interface Tool extends Configurable {
>   void run(String[] args) throws Exception;
> }
> public class ToolBase implements Tool extends Configured {
>   public final void main(String[] args) throws Exception {
>     Configuration conf = new Configuration();
>     ... parse config options from args into conf ...
>     this.configure(conf);
>     this.run();
>   }
> }
> public MyTool extends ExcecutableBase {
>   public static void main(String[] args) throws Exception {
>     new MyTool().main(args);
>   }
> }
> The general command line syntax could be:
> bin/hadoop [generalOptions] command [commandOptions]
> Where generalOptions are things that ToolBase handles, and only the commandOptions are passed to Tool.run().  The most important generalOption would be '-D', which would define name/value pairs that are set in the configuration.  This alone would permit folks to set the namenode, datanode, etc.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Feb 27 23:47:35 2006
Return-Path: 
 <hadoop-dev-return-271-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 42319 invoked from network); 27 Feb 2006 23:47:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Feb 2006 23:47:35 -0000
Received: (qmail 89088 invoked by uid 500); 27 Feb 2006 23:47:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 89032 invoked by uid 500); 27 Feb 2006 23:47:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 89023 invoked by uid 99); 27 Feb 2006 23:47:33 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Feb 2006 15:47:24 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 7381EDC
	for <hadoop-dev@lucene.apache.org>; Tue, 28 Feb 2006 00:46:56 +0100 (CET)
Message-ID: <906071433.1141084016306.JavaMail.jira@ajax.apache.org>
Date: Tue, 28 Feb 2006 00:46:56 +0100 (CET)
From: "Mike Cafarella (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-16) RPC call times out while indexing map
 task is computing splits
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-16?page=all ]

Mike Cafarella updated HADOOP-16:
---------------------------------

    Attachment: patch_h16.v0


  I created a separate thread on the JobTracker that handles file-splitting and
gathering info about split-caches.  The job is placed into the PREP state
until it is processed by this JobTracker thread.  After processing, it moves
into the RUNNING state.  

  This should allow the hard split-work to continue but still allow the JobTracker
to process heartbeats.  For now, the thread lives at the JobTracker but perhaps
someday we'll move it to a TaskTracker thread.

  I also fixed the alg for choosing a task-allocation given a tasktracker.
(Whether cached, non-cached, or speculative.)

  Let me know if this fixes some of the problems you've been seeing. 



> RPC call times out while indexing map task is computing splits
> --------------------------------------------------------------
>
>          Key: HADOOP-16
>          URL: http://issues.apache.org/jira/browse/HADOOP-16
>      Project: Hadoop
>         Type: Bug
>   Components: mapred
>     Versions: 0.1
>  Environment: MapReduce multi-computer crawl environment: 11 machines (1 master with JobTracker/NameNode, 10 slaves with TaskTrackers/DataNodes)
>     Reporter: Chris Schneider
>     Assignee: Mike Cafarella
>      Fix For: 0.1
>  Attachments: patch.16, patch_h16.v0
>
> We've been using Nutch 0.8 (MapReduce) to perform some internet crawling. Things seemed to be going well until...
> 060129 222409 Lost tracker 'tracker_56288'
> 060129 222409 Task 'task_m_10gs5f' has been lost.
> 060129 222409 Task 'task_m_10qhzr' has been lost.
>    ........
>    ........
> 060129 222409 Task 'task_r_zggbwu' has been lost.
> 060129 222409 Task 'task_r_zh8dao' has been lost.
> 060129 222455 Server handler 8 on 8010 caught: java.net.SocketException: Socket closed
> java.net.SocketException: Socket closed
>         at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:99)
>         at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
>         at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
>         at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
>         at java.io.DataOutputStream.flush(DataOutputStream.java:106)
>         at org.apache.nutch.ipc.Server$Handler.run(Server.java:216)
> 060129 222455 Adding task 'task_m_cia5po' to set for tracker 'tracker_56288'
> 060129 223711 Adding task 'task_m_ffv59i' to set for tracker 'tracker_25647'
> I'm hoping that someone could explain why task_m_cia5po got added to tracker_56288 after this tracker was lost.
> The Crawl .main process died with the following output:
> 060129 221129 Indexer: adding segment: /user/crawler/crawl-20060129091444/segments/20060129200246
> Exception in thread "main" java.io.IOException: timed out waiting for response
>     at org.apache.nutch.ipc.Client.call(Client.java:296)
>     at org.apache.nutch.ipc.RPC$Invoker.invoke(RPC.java:127)
>     at $Proxy1.submitJob(Unknown Source)
>     at org.apache.nutch.mapred.JobClient.submitJob(JobClient.java:259)
>     at org.apache.nutch.mapred.JobClient.runJob(JobClient.java:288)
>     at org.apache.nutch.indexer.Indexer.index(Indexer.java:263)
>     at org.apache.nutch.crawl.Crawl.main(Crawl.java:127)
> However, it definitely seems as if the JobTracker is still waiting for the job to finish (no failed jobs).
> Doug Cutting's response:
> The bug here is that the RPC call times out while the map task is computing splits.  The fix is that the job tracker should not compute splits until after it has returned from the submitJob RPC.  Please submit a bug in Jira to help remind us to fix this.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Feb 28 01:12:31 2006
Return-Path: 
 <hadoop-dev-return-272-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 79235 invoked from network); 28 Feb 2006 01:12:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Feb 2006 01:12:31 -0000
Received: (qmail 72966 invoked by uid 500); 28 Feb 2006 01:12:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72922 invoked by uid 500); 28 Feb 2006 01:12:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72895 invoked by uid 99); 28 Feb 2006 01:12:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Feb 2006 17:12:26 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.191.14.28] (HELO reptile.netwurklabs.com) (64.191.14.28)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 27 Feb 2006 17:12:25 -0800
Received: (qmail 5441 invoked from network); 28 Feb 2006 01:11:41 -0000
Received: from localhost (HELO ?127.0.0.1?) (127.0.0.1)
  by reptile.netwurklabs.com with SMTP; 28 Feb 2006 01:11:41 -0000
Message-ID: <4403A332.5000206@netwurklabs.com>
Date: Mon, 27 Feb 2006 20:11:14 -0500
From: Jeff Ritchie <jritchie@netwurklabs.com>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: [jira] Commented: (HADOOP-33) DF enhancement: performance and
 win XP support
References: <699964886.1141075077836.JavaMail.jira@ajax.apache.org>
In-Reply-To: <699964886.1141075077836.JavaMail.jira@ajax.apache.org>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Does this project have any use/merit?

http://unxutils.sourceforge.net/

I'm not sure if all the unix utils needed for hadoop / nutch are in 
there or not.

Jeff.

Tim Patton (JIRA) wrote:

>    [ http://issues.apache.org/jira/browse/HADOOP-33?page=comments#action_12368028 ] 
>
>Tim Patton commented on HADOOP-33:
>----------------------------------
>
>Oops, I didn't realize lines were not auto-wrapping.  Sorry about that.  And I meant to say I knew my batch file doesn't have relative paths, I was just copying and pasting to get it working.
>
>  
>
>>DF enhancement: performance and win XP support
>>----------------------------------------------
>>
>>         Key: HADOOP-33
>>         URL: http://issues.apache.org/jira/browse/HADOOP-33
>>     Project: Hadoop
>>        Type: Improvement
>>  Components: fs, dfs
>> Environment: Unix, Cygwin, Win XP
>>    Reporter: Konstantin Shvachko
>>    Priority: Minor
>> Attachments: DF.patch, DFpatch.txt
>>
>>1. DF is called twice for each heartbeat, which happens each 3 seconds.
>>There is a simple fix for that in the attached patch.
>>2. cygwin is required to run df program in windows environment.
>>There is a class org.apache.commons.io.FileSystemUtils, which can return disk free space
>>for different OSs, but it does not have means to get disk capacity.
>>In general in windows there is no efficient and uniform way to calculate disk capacity
>>using a shell command.
>>The choices are 'chkdsk' and 'defrag -a', but both of them are too slow to be called
>>every 3 seconds.
>>WinXP and 2003 server have a new tool called fsutil, which provides all necessary info.
>>I implemented a call to fsutil in case df fails, and the OS is right.
>>Other win versions should still run cygwin.
>>I tested this fetaure for linux, winXP and cygwin.
>>See attached patch.
>>    
>>
>
>  
>


From MAILER-DAEMON Tue Feb 28 18:28:52 2006
Return-Path: 
 <hadoop-dev-return-273-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 64863 invoked from network); 28 Feb 2006 18:28:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Feb 2006 18:28:52 -0000
Received: (qmail 70840 invoked by uid 500); 28 Feb 2006 18:28:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70758 invoked by uid 500); 28 Feb 2006 18:28:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 70727 invoked by uid 99); 28 Feb 2006 18:28:13 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 10:28:02 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 070C3E1
	for <hadoop-dev@lucene.apache.org>; Tue, 28 Feb 2006 19:27:42 +0100 (CET)
Message-ID: <2063972274.1141151262026.JavaMail.jira@ajax.apache.org>
Date: Tue, 28 Feb 2006 19:27:42 +0100 (CET)
From: "Jeff Ritchie (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-61) Bashless Hadoop Start Script
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Bashless Hadoop Start Script
----------------------------

         Key: HADOOP-61
         URL: http://issues.apache.org/jira/browse/HADOOP-61
     Project: Hadoop
        Type: Improvement
 Environment: Java Class emulating the /bin/hadoop Bash Script
    Reporter: Jeff Ritchie
    Priority: Minor


This is for the people who want to try to get hadoop running without cygwin.  The code needs some work and could be improved.
Attachment to follow.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Feb 28 18:30:47 2006
Return-Path: 
 <hadoop-dev-return-274-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 66034 invoked from network); 28 Feb 2006 18:30:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Feb 2006 18:30:47 -0000
Received: (qmail 78503 invoked by uid 500); 28 Feb 2006 18:30:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 78496 invoked by uid 500); 28 Feb 2006 18:30:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 78476 invoked by uid 99); 28 Feb 2006 18:30:18 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 10:30:01 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 33649DD
	for <hadoop-dev@lucene.apache.org>; Tue, 28 Feb 2006 19:29:40 +0100 (CET)
Message-ID: <1546943427.1141151380208.JavaMail.jira@ajax.apache.org>
Date: Tue, 28 Feb 2006 19:29:40 +0100 (CET)
From: "Jeff Ritchie (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-61) Bashless Hadoop Start Script
In-Reply-To: <2063972274.1141151262026.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-61?page=all ]

Jeff Ritchie updated HADOOP-61:
-------------------------------

    Attachment: hadoop.java
                hadoop.xml

hadoop.java is in the 'default' package.
hadoop.xml is the properties file for specifying 'enviroment varibles'

I've only tested tasktracker and dfs but the rest should work (except maybe the jar).

> Bashless Hadoop Start Script
> ----------------------------
>
>          Key: HADOOP-61
>          URL: http://issues.apache.org/jira/browse/HADOOP-61
>      Project: Hadoop
>         Type: Improvement
>  Environment: Java Class emulating the /bin/hadoop Bash Script
>     Reporter: Jeff Ritchie
>     Priority: Minor
>  Attachments: hadoop.java, hadoop.xml
>
> This is for the people who want to try to get hadoop running without cygwin.  The code needs some work and could be improved.
> Attachment to follow.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Feb 28 19:20:09 2006
Return-Path: 
 <hadoop-dev-return-275-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91876 invoked from network); 28 Feb 2006 19:20:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Feb 2006 19:20:09 -0000
Received: (qmail 68524 invoked by uid 500); 28 Feb 2006 19:20:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68363 invoked by uid 500); 28 Feb 2006 19:20:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68316 invoked by uid 99); 28 Feb 2006 19:20:07 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 11:20:05 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id 9A031E0
	for <hadoop-dev@lucene.apache.org>; Tue, 28 Feb 2006 20:19:42 +0100 (CET)
Message-ID: <1060571054.1141154382628.JavaMail.jira@ajax.apache.org>
Date: Tue, 28 Feb 2006 20:19:42 +0100 (CET)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-56) hadoop nameserver does not recognise
 ndfs nameserver image
In-Reply-To: <1295923568.1140660845840.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-56?page=comments#action_12368159 ] 

Konstantin Shvachko commented on HADOOP-56:
-------------------------------------------

Sorry Bryan, I misinterpreted GUID as a group/user id.
So, yes a global unique id is for identifying particular data instances of the file system.
It can be generated by "format". And there shouldn't be any substantial overhead to support this.

What I am trying to propose is to use the version number of the file system (as a software application),
hard coded (rather than configured) and accessible via the getVersion() method, as a part of GUID.
The version alone would have been sufficient to avoid the original problem
with data loss, but GUID provides even better consistency.
An additional advantage of versioning is that when the internal data layout for the name
or data nodes is changed, one can provide conversion methods from one version to another.


> hadoop nameserver does not recognise ndfs nameserver image
> ----------------------------------------------------------
>
>          Key: HADOOP-56
>          URL: http://issues.apache.org/jira/browse/HADOOP-56
>      Project: Hadoop
>         Type: Bug
>   Components: dfs
>     Versions: 0.1
>     Reporter: Yoram Arnon
>     Priority: Critical
>  Attachments: ndfs.tar.gz
>
> hadoop nameserver does not recognise ndfs image
> Thus, upgrading from ndfs to hadoop dfs results in total data loss.
> The upgrade should be seemless, with the new server recognising all previous version that are not end-of-life'd.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Feb 28 23:13:44 2006
Return-Path: 
 <hadoop-dev-return-277-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9514 invoked from network); 28 Feb 2006 23:13:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Feb 2006 23:13:44 -0000
Received: (qmail 75436 invoked by uid 500); 28 Feb 2006 23:13:43 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75344 invoked by uid 500); 28 Feb 2006 23:13:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 74839 invoked by uid 99); 28 Feb 2006 23:13:41 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [192.87.106.226] (HELO ajax.apache.org) (192.87.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 15:13:39 -0800
Received: from ajax.apache.org (ajax.apache.org [127.0.0.1])
	by ajax.apache.org (Postfix) with ESMTP id D787B1A7
	for <hadoop-dev@lucene.apache.org>; Tue, 28 Feb 2006 22:09:40 +0100 (CET)
Message-ID: <68997484.1141160980881.JavaMail.jira@ajax.apache.org>
Date: Tue, 28 Feb 2006 22:09:40 +0100 (CET)
From: "Bryan Pendleton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-56) hadoop nameserver does not recognise
 ndfs nameserver image
In-Reply-To: <1295923568.1140660845840.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-56?page=comments#action_12368168 ] 

Bryan Pendleton commented on HADOOP-56:
---------------------------------------

Sorry -  yes, I meant a globally-unique identifier, not a group/user id.

Sticking a GUID+version into the namenode metadata sounds helpful. I don't really see a reason to stick the version into the block filename, though. Especially if all "upgrade" related commands are going to be issued by the namenode.

> hadoop nameserver does not recognise ndfs nameserver image
> ----------------------------------------------------------
>
>          Key: HADOOP-56
>          URL: http://issues.apache.org/jira/browse/HADOOP-56
>      Project: Hadoop
>         Type: Bug
>   Components: dfs
>     Versions: 0.1
>     Reporter: Yoram Arnon
>     Priority: Critical
>  Attachments: ndfs.tar.gz
>
> hadoop nameserver does not recognise ndfs image
> Thus, upgrading from ndfs to hadoop dfs results in total data loss.
> The upgrade should be seemless, with the new server recognising all previous version that are not end-of-life'd.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Feb 28 22:26:41 2006
Return-Path: 
 <hadoop-dev-return-276-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 87134 invoked from network); 28 Feb 2006 22:26:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Feb 2006 22:26:41 -0000
Received: (qmail 92537 invoked by uid 500); 28 Feb 2006 22:26:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 92519 invoked by uid 500); 28 Feb 2006 22:26:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 92510 invoked by uid 99); 28 Feb 2006 22:26:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 14:26:33 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.145.54.172] (HELO mrout2.yahoo.com) (216.145.54.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 14:26:32 -0800
Received: from [207.126.231.161] (oom-mac.corp.yahoo.com [207.126.231.161])
	by mrout2.yahoo.com (8.13.4/8.13.4/y.out) with ESMTP id k1SMPjIn032049
	for <hadoop-dev@lucene.apache.org>; Tue, 28 Feb 2006 14:25:45 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:from:
	subject:date:to:x-mailer;
	b=WSES1EIizOtOrveAQ/xqs1T6Mwvv9xShvTZEchozIqsMaFVDaLfaQu5AFsTAcv6A
Mime-Version: 1.0 (Apple Message framework v623)
In-Reply-To: <20060228221331.79891.qmail@minotaur.apache.org>
References: <20060228221331.79891.qmail@minotaur.apache.org>
Content-Type: multipart/alternative; boundary=Apple-Mail-3--350385672
Message-Id: <594ef8a91732dda1486c61e2f3d2033d@yahoo-inc.com>
From: "Owen O'Malley" <owen@yahoo-inc.com>
Subject: Re: svn commit: r381795 - /lucene/hadoop/trunk/src/java/overview.html
Date: Tue, 28 Feb 2006 14:26:11 -0800
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.623)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--Apple-Mail-3--350385672
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed


On Feb 28, 2006, at 2:13 PM, cutting@apache.org wrote:

> -bin/hadoop org.apache.hadoop.mapred.demo.Grep input output 
> 'dfs[a-z.]+'<br>
> +bin/hadoop jar hadoop-*-examples.jar input output 'dfs[a-z.]+'<br>

you should have written:

bin/hadoop jar hadoop-*-examples.jar grep input output 'dfs[a-z.]+'
--Apple-Mail-3--350385672--


