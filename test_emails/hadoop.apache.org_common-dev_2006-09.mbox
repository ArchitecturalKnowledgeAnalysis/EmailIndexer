From MAILER-DAEMON Thu Aug 31 22:16:45 2006
Return-Path: 
 <hadoop-dev-return-3506-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34561 invoked from network); 31 Aug 2006 22:16:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 22:16:45 -0000
Received: (qmail 44100 invoked by uid 500); 31 Aug 2006 22:16:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 43914 invoked by uid 500); 31 Aug 2006 22:16:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 43905 invoked by uid 99); 31 Aug 2006 22:16:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 15:16:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 15:16:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 47038410010
	for <hadoop-dev@lucene.apache.org>; Thu, 31 Aug 2006 22:13:23 +0000 (GMT)
Message-ID: <29980220.1157062403288.JavaMail.jira@brutus>
Date: Thu, 31 Aug 2006 15:13:23 -0700 (PDT)
From: "Andrzej Bialecki  (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-488) Change ToolBase.doMain() to return a
 status code
In-Reply-To: <5191555.1156848923096.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-488?page=all ]

Andrzej Bialecki  resolved HADOOP-488.
--------------------------------------

    Resolution: Fixed

Patch applied.

> Change ToolBase.doMain() to return a status code
> ------------------------------------------------
>
>                 Key: HADOOP-488
>                 URL: http://issues.apache.org/jira/browse/HADOOP-488
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.0
>            Reporter: Andrzej Bialecki 
>             Fix For: 0.6.0
>
>         Attachments: patch.txt
>
>
> I propose to change the signature of ToolBase.doMain from this:
>     public final void doMain(Configuration conf, String[] args) throws Exception;
> to this:
>     public final int doMain(Configuration conf, String[] args) throws Exception;
> and then change main() methods of all classes that use ToolBase.doMain to call System.exit(code), where "code" is this return value from doMain(). All command-line tools, which still call main() methods of other tools, should be converted to use doMain() and return exit codes properly.
> The main reason for this change is that returning varying exit codes is required for proper operation of shell scripts, especially differing between code == 0 (normal exit) and code != 0 (error exit).
> Additionally, current implementation of doMain() already gets the return code, it just silently discards it (ToolBase.java:184).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 31 23:37:46 2006
Return-Path: 
 <hadoop-dev-return-3507-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 54929 invoked from network); 31 Aug 2006 23:37:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 23:37:46 -0000
Received: (qmail 50765 invoked by uid 500); 31 Aug 2006 23:37:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 50651 invoked by uid 500); 31 Aug 2006 23:37:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 50642 invoked by uid 99); 31 Aug 2006 23:37:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 16:37:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 16:37:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4F3EE41001F
	for <hadoop-dev@lucene.apache.org>; Thu, 31 Aug 2006 23:34:23 +0000 (GMT)
Message-ID: <28506272.1157067263322.JavaMail.jira@brutus>
Date: Thu, 31 Aug 2006 16:34:23 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-481) Hadoop mapred metrics should include
 per job input/output statistics rather than per-task statistics
In-Reply-To: <4146022.1156462775151.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-481?page=all ]

Milind Bhandarkar updated HADOOP-481:
-------------------------------------

    Attachment:     (was: reports.patch)

> Hadoop mapred metrics should include per job input/output statistics rather than per-task statistics
> ----------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-481
>                 URL: http://issues.apache.org/jira/browse/HADOOP-481
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred, metrics
>    Affects Versions: 0.6.0
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>            Priority: Minor
>             Fix For: 0.6.0
>
>
> Currently hadoop reports metrics such as input bytes, input records, etc on per-task basis. Accurate aggregation of these metrics is required at the job-level and reporting should be done on a per-job basis.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 31 23:42:02 2006
Return-Path: 
 <hadoop-dev-return-3509-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 56651 invoked from network); 31 Aug 2006 23:42:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 23:42:02 -0000
Received: (qmail 58793 invoked by uid 500); 31 Aug 2006 23:42:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58776 invoked by uid 500); 31 Aug 2006 23:42:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58767 invoked by uid 99); 31 Aug 2006 23:42:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 16:42:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 16:42:00 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CDA7F410026
	for <hadoop-dev@lucene.apache.org>; Thu, 31 Aug 2006 23:38:24 +0000 (GMT)
Message-ID: <6160813.1157067504838.JavaMail.jira@brutus>
Date: Thu, 31 Aug 2006 16:38:24 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-481) Hadoop mapred metrics should include
 per job input/output statistics rather than per-task statistics
In-Reply-To: <4146022.1156462775151.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-481?page=all ]

Milind Bhandarkar updated HADOOP-481:
-------------------------------------

    Attachment: reports.patch

Here is the updated patch.

> Hadoop mapred metrics should include per job input/output statistics rather than per-task statistics
> ----------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-481
>                 URL: http://issues.apache.org/jira/browse/HADOOP-481
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred, metrics
>    Affects Versions: 0.6.0
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>            Priority: Minor
>             Fix For: 0.6.0
>
>         Attachments: reports.patch
>
>
> Currently hadoop reports metrics such as input bytes, input records, etc on per-task basis. Accurate aggregation of these metrics is required at the job-level and reporting should be done on a per-job basis.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 31 23:41:48 2006
Return-Path: 
 <hadoop-dev-return-3508-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 56310 invoked from network); 31 Aug 2006 23:41:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 23:41:48 -0000
Received: (qmail 57428 invoked by uid 500); 31 Aug 2006 23:41:48 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 57246 invoked by uid 500); 31 Aug 2006 23:41:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 57237 invoked by uid 99); 31 Aug 2006 23:41:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 16:41:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 16:41:47 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 03BA6410028
	for <hadoop-dev@lucene.apache.org>; Thu, 31 Aug 2006 23:38:26 +0000 (GMT)
Message-ID: <28819221.1157067506012.JavaMail.jira@brutus>
Date: Thu, 31 Aug 2006 16:38:26 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-481) Hadoop mapred metrics should include
 per job input/output statistics rather than per-task statistics
In-Reply-To: <4146022.1156462775151.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-481?page=all ]

Milind Bhandarkar updated HADOOP-481:
-------------------------------------

    Status: Patch Available  (was: In Progress)

patch submitted.

> Hadoop mapred metrics should include per job input/output statistics rather than per-task statistics
> ----------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-481
>                 URL: http://issues.apache.org/jira/browse/HADOOP-481
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred, metrics
>    Affects Versions: 0.6.0
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>            Priority: Minor
>             Fix For: 0.6.0
>
>         Attachments: reports.patch
>
>
> Currently hadoop reports metrics such as input bytes, input records, etc on per-task basis. Accurate aggregation of these metrics is required at the job-level and reporting should be done on a per-job basis.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep  1 03:37:52 2006
Return-Path: 
 <hadoop-dev-return-3510-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 7295 invoked from network); 1 Sep 2006 03:37:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Sep 2006 03:37:52 -0000
Received: (qmail 47565 invoked by uid 500); 1 Sep 2006 03:37:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47538 invoked by uid 500); 1 Sep 2006 03:37:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47527 invoked by uid 99); 1 Sep 2006 03:37:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 20:37:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 20:37:50 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F3F037142E7
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Sep 2006 03:34:23 +0000 (GMT)
Message-ID: <604070.1157081663996.JavaMail.jira@brutus>
Date: Thu, 31 Aug 2006 20:34:23 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-288) RFC: Efficient file caching
In-Reply-To: <6015694.1149730109866.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-288?page=all ]

Mahadev konar updated HADOOP-288:
---------------------------------

    Attachment: caching-3.patch

incorporated most of owen's comments, except that of merging all my junit tests into other junit tests. I merged my local/minimr junit test into TestMiniMRLocalFS.  I tried including my caching junit test with DFS and MiniMR in TestMiniMRWIthDFS but that made it longer htan 3 mins. It currently takes arnd 140 seconds. So I have a seperate junit test for DFS and MiniMR.

> RFC: Efficient file caching
> ---------------------------
>
>                 Key: HADOOP-288
>                 URL: http://issues.apache.org/jira/browse/HADOOP-288
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.6.0
>            Reporter: Michel Tourn
>         Assigned To: Mahadev konar
>         Attachments: caching-3.patch, caching.patch, caching.patch, test.jar, test.zip
>
>
> RFC: Efficient file caching 
> (on Hadoop Task nodes, for benefit of MapReduce Tasks)
> ------------------------------------------------------
> We will start implementing this soon. Please provide feedback and improvements to this plan.
> The header "Options:" indicates places where simple choices must be made.
> Problem:
> -------
> o MapReduce tasks require access to additional out-of-band data ("dictionaries")
> This out-of-band data is:
> o in addition to the map/reduce inputs.
> o large (1GB+)
> o broadcast (same data is required on all the Task nodes)
> o changes "infrequently", in particular:
> oo it is always constant for all the Tasks in a Job. 
> oo it is often constant for a month at a time 
> oo it may be shared across team members
> o sometimes used by pure-Java MapReduce programs
> o sometimes used by non-Java MapReduce programs (using Hadoop-Streaming)
> o (future) used by programs that use HDFS and Task-trackers but not MapReduce.
> Existing Solutions to the problem:
> ---------------------------------
> These solutions are not good enough. The present proposal is to do Sol 1 with caching.
> Sol 1: Pure Hadoop: package the out-of-band data in the MapReduce Job jar file.
> Sol 2: Non  Hadoop: for each task node run rsync from single source for data.
> Sol 3: Non  Hadoop: use BitTorrent, etc.
> Sol.1 is correct but slow for many reasons:
>  The Job submitter must recreate a large jar(tar) file for every Job.
>   (The jar contains both changing programs and stable dictionaries)
>  The large Jar file must be propagated from the client to HDFS with 
>  a large replication factor. 
>  At the beginning of every Task, the Task tracker gets the job jar from HDFS 
>  and unjars it in the working directory. This can dominate task execution time.
>  
> Sol.2 has nice properties but also some problems.
>  It does not scale well with large clusters (many concurrent rsync read requests i.e. single-source broadcast)
>  It assumes that Hadoop users can upload data using rsync to the cluster nodes. As a policy, this is not allowed.
>  It requires rsync.
>  
> Sol.3 alleviates the rsync scalability problems but 
>       It is a dependency on an external system. 
>       We want something simpler and more tightly integrated with Hadoop.
>       
> Staging (uploading) out-of-band data:
> ------------------------------------
> The out-of-band data will often originate on the local filesystem of a user machine 
>  (i.e. a MapReduce job submitter)
> Nevertheless it makes sense to use HDFS to store the original out-of-band data because:
> o HDFS has (wide) replication. This enables scalable broadcast later.
> o HDFS is an available channel to move data from clients to all task machines.
> o HDFS is convenient as a shared location among Hadoop team members.
> Accessing (downloading) out-of-band data:
> ----------------------------------------
> The non-Java MapReduce programs do not have or want[1] APIs for HDFS.
> Instead these programs just want to access out-of-band data as 
>  local files at predefined paths.
> ([1] Existing programs should be reusable with no changes. 
>  This is often possible bec. communication is over stdin/stdout.)
> Job's jar file as a special case:
> --------------------------------
> One use case is to allow users to make the job jar itself cachable.
> This is only useful in cases where NOTHING changes when a job is resubmitted
>  (no MapRed code changes and no changes in shipped data)
> This situation might occur with an 'extractor' job (gets data from an external source: like Nutch crawler)
> Currently the Hadoop mapred-jar mechanism works in this way:
>  the job jar data is unjarred in the "working directory" of the Task 
>  the jar contains both MapRed java code (added to classpath)
> Cache synchronization:
> ---------------------
> The efficient implementation of the out-of-band data distribution
> is mostly a cache synchronization problem.
> A list of the various aspects where choices must be made follows.
> Cache key:
> ---------
> How do you test that the cached copy is out-of-date?
> Options: 
> 1. the archive/file timestamp 
> 2. the MD5 of the archive/file content
> Comparing source and destination Timestamps is problematic bec. it assumes synchronized clocks.
> Also there is no last-modif metadata in HDFS (for good reasons, like scalability of metadata ops)
> Timestamps stored with the source ('last-propagate-time') do 
>  not require synchronized clocks, only locally monotonic time. 
> (and the worse which can happen at daylight-savings switch is a missed update or an extra-update)
> The cache code could store a copy of the local timestamp 
> in the same way that it caches the value of the content hash along with the source data.
>  
> Cachable unit:
> -------------
> Options: individual files or archives or both.
> Note:
> At the API level, directories will be processed recursively 
> (and the local FS directories will parallel HDFS directories)
> So bulk operations are always possible using directories.
> The question here is whether to handle archives as an additional bulk mechanism.
> Archives are special because:
> o unarchiving occurs transparently as part of the cache sync
> o The cache key is computed on the archive and preserved although 
>   the archive itself is not preserved.
> Supported archive format will be: tar (maybe tgz or compressed jar)
> Archive detection test: by filename extension ".tar" or ".jar"
> Suppose we don't handle archives as special files:
> Pros:
>  o less code, no discussion about which archive formats are supported
>  o fine for large dictionary files. And when files are not large, user may as well
>    put them in the Job jar as usual.
>  o user code could always check and unarchive specific cached files
>    (as a side-effect of MapRed task initialization)
> Cons:
>  o handling small files may be inefficient 
>   (multiple HDFS operations, multiple hash computation, 
>    one 'metadata' hash file along with each small file)
>  o It will not be possible to handle the Job's jar file as a special case of caching 
> Cache isolation: 
> ---------------
> In some cases it may be a problem if the cached HDFS files are updated while a Job is in progress:
> The file may become unavailable for a short period of time and some tasks fail.
> The file may change (atomically) and different tasks use a different version.
> This isolation problem is not addressed in this proposal.
> Standard solutions to the isolation problem are:
> o Assume that Jobs and interfering cache updates won't occur concurrently.
> o Put a version number in the HDFS file paths and refer to a hard-coded version in the Job code.
> o Before running the MapRed job, run a non-distributed application that tests
>   what is the latest available version of the out-of-band data. 
>   Then make this version available to the MapRed job.
>   Two ways to do this. 
>   o either set a job property just-in-time:
>     addCachePathPair("/mydata/v1234/", "localcache/mydata_latest"); 
>     (see Job Configuration for meaning of this)
>   o or publish the decision as an HDFS file containing the version.
>     then rely on user code to read the version, and manually populate the cache:
>     Cache.syncCache("/hdfs/path/fileordir", "relative/local/fileordir");
>     (see MapReduce API for meaning of this)
> Cache synchronization stages:
> ----------------------------
> There are two stages: Client-to-HDFS and HDFS-to-TaskTracker
> o Client-to-HDFS stage.
> Options: A simple option is to not do anything here, i.e. rely on the user.
> This is a reasonable option given previous remarks on the role of HDFS:
>  HDFS is a staging/publishing area and a natural shared location.
> In particular this means that the system need not track 
> where the client files come from.
> o HDFS-to-TaskTracker:
> Client-to-HDFS synchronization (if done at all) should happen before this.
> Then HDFS-to-TaskTracker synchronization must happen right before 
> the data is needed on a node.
> MapReduce cache API:
> -------------------
> Options:
> 1. No change in MapReduce framework code:
> require the user to put this logic in map() (or reduce) function:
>  in MyMapper constructor (or in map() on first record) user is asked to add:
>  
>     Cache.syncCache("/hdfs/path/fileordir", "relative/local/fileordir");
>     Cache.syncCache("..."); //etc.
>   
> -----
> 2. Put this logic in MapReduce framework and use Job properties to
>    communicate the list of pairs (hdfs path; local path)
>  
> Directories are processed recursively.
> If archives are treated specially then they are unarchived on destination.
>  
> MapReduce Job Configuration:
> ---------------------------
> Options:
> with No change in MapReduce framework code (see above)
>  no special Job configuration: 
>    it is up to the MapRed writer to configure and run the cache operations.
> ---
> with Logic in MapReduce framework (see above)
>  some simple Job configuration
> JobConf.addCachePathPair(String, String)
> JobConf.addCachePathPair("/hdfs/path/fileordir", "relative/local/fileordir");

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep  1 07:32:47 2006
Return-Path: 
 <hadoop-dev-return-3511-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75506 invoked from network); 1 Sep 2006 07:32:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Sep 2006 07:32:47 -0000
Received: (qmail 69691 invoked by uid 500); 1 Sep 2006 07:32:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 69676 invoked by uid 500); 1 Sep 2006 07:32:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 69667 invoked by uid 99); 1 Sep 2006 07:32:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Sep 2006 00:32:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Sep 2006 00:32:45 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5FC4F41001E
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Sep 2006 07:29:23 +0000 (GMT)
Message-ID: <2164622.1157095763325.JavaMail.jira@brutus>
Date: Fri, 1 Sep 2006 00:29:23 -0700 (PDT)
From: "Lorenzo Thione (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-497) DataNodes and TaskTrackers should be
 able to report hostnames and ips relative to customizable network
 interfaces and nameservers
In-Reply-To: <3331836.1156991602375.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-497?page=comments#action_12432081 ] 
            
Lorenzo Thione commented on HADOOP-497:
---------------------------------------

Just setting sun.net.spi.nameservice.nameservers worked for direct lookup but not for reverse lookup, at least when I first looked at it. This new patch does the job without using an external library, just using JNDI directly to query the DNS server. The new class  has a new name (DNS.java) , and a new location (net) . A new package.html file was created as well.  Finally, now network interface and nameserver are independently configurable for datanodes and tasktrackers. The names of the new properties have been changed to 

   net.dns.datanode.interface
   net.dns.tasktracker.interface
   net.dns.datanode.nameserver
   net.dns.tasktracker.nameserver
   

> DataNodes and TaskTrackers should be able to report hostnames and ips relative to customizable network interfaces and nameservers
> ---------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-497
>                 URL: http://issues.apache.org/jira/browse/HADOOP-497
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred, dfs, util
>    Affects Versions: 0.6.0
>            Reporter: Lorenzo Thione
>            Priority: Minor
>         Attachments: dnsjava-2.0.2.jar, net-dns.patch, nif-utils.patch
>
>
> This patch allows for network configuration parameters to be aded to the hadoop-site.xml file. These parameters specify a network interface name and an optional nameserver hostname which DataNodes and TaskTrackers consult to resolve  their hostnames from the IP bound to the specified network interface.
> This is useful when machines that are part of different physical or logical network need to participate in hadoop clusters as client nodes. The hostname and IP reported by InetAddress.getLocalHost() are not necessarily the ones that will allow the JobTracker and NameNode to reach the clients, as well as not necessarily the ones through which the DFS clients can reach the DataNodes.
> The configuration parameters are
>  - cluster.report.nif
>  - cluster.report.ns
> nif: takes the name of a network interface, like en0, en1 (on macs), eth0, etc...
> ns: the host name of a DNS server to use when resolving the IP bound to the specified nif
> These parameters are set by default to the value "default" which will replicate the current behavior of reporting InetAddress.getLocalHost().getHostName() and getHostAddress()
> As part of the patch, a new library dnsjava was added along with its license information (BSD license). The list of affected files is:
> src
>  org.apache.hadoop.dfs.DataNode 
>  org.apache.hadoop.mapred.taskTracker 
>  org.apache.hadoop.util.NetworkUtils
> conf
>  hadoop-default.xml
> lib
>  dnsjava-2.0.2.jar
>  dnsjava-2.0.2.LICENSE.txt

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep  1 07:32:48 2006
Return-Path: 
 <hadoop-dev-return-3512-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75518 invoked from network); 1 Sep 2006 07:32:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Sep 2006 07:32:48 -0000
Received: (qmail 69885 invoked by uid 500); 1 Sep 2006 07:32:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 69876 invoked by uid 500); 1 Sep 2006 07:32:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 69867 invoked by uid 99); 1 Sep 2006 07:32:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Sep 2006 00:32:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Sep 2006 00:32:46 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6D6A641001F
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Sep 2006 07:29:24 +0000 (GMT)
Message-ID: <5150434.1157095764445.JavaMail.jira@brutus>
Date: Fri, 1 Sep 2006 00:29:24 -0700 (PDT)
From: "Lorenzo Thione (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-497) DataNodes and TaskTrackers should be
 able to report hostnames and ips relative to customizable network
 interfaces and nameservers
In-Reply-To: <3331836.1156991602375.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-497?page=all ]

Lorenzo Thione updated HADOOP-497:
----------------------------------

    Attachment: net-dns.patch

> DataNodes and TaskTrackers should be able to report hostnames and ips relative to customizable network interfaces and nameservers
> ---------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-497
>                 URL: http://issues.apache.org/jira/browse/HADOOP-497
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred, dfs, util
>    Affects Versions: 0.6.0
>            Reporter: Lorenzo Thione
>            Priority: Minor
>         Attachments: dnsjava-2.0.2.jar, net-dns.patch, nif-utils.patch
>
>
> This patch allows for network configuration parameters to be aded to the hadoop-site.xml file. These parameters specify a network interface name and an optional nameserver hostname which DataNodes and TaskTrackers consult to resolve  their hostnames from the IP bound to the specified network interface.
> This is useful when machines that are part of different physical or logical network need to participate in hadoop clusters as client nodes. The hostname and IP reported by InetAddress.getLocalHost() are not necessarily the ones that will allow the JobTracker and NameNode to reach the clients, as well as not necessarily the ones through which the DFS clients can reach the DataNodes.
> The configuration parameters are
>  - cluster.report.nif
>  - cluster.report.ns
> nif: takes the name of a network interface, like en0, en1 (on macs), eth0, etc...
> ns: the host name of a DNS server to use when resolving the IP bound to the specified nif
> These parameters are set by default to the value "default" which will replicate the current behavior of reporting InetAddress.getLocalHost().getHostName() and getHostAddress()
> As part of the patch, a new library dnsjava was added along with its license information (BSD license). The list of affected files is:
> src
>  org.apache.hadoop.dfs.DataNode 
>  org.apache.hadoop.mapred.taskTracker 
>  org.apache.hadoop.util.NetworkUtils
> conf
>  hadoop-default.xml
> lib
>  dnsjava-2.0.2.jar
>  dnsjava-2.0.2.LICENSE.txt

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep  1 08:21:40 2006
Return-Path: 
 <hadoop-dev-return-3513-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85460 invoked from network); 1 Sep 2006 08:21:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Sep 2006 08:21:40 -0000
Received: (qmail 25521 invoked by uid 500); 1 Sep 2006 08:21:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 25504 invoked by uid 500); 1 Sep 2006 08:21:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 25495 invoked by uid 99); 1 Sep 2006 08:21:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Sep 2006 01:21:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [84.96.21.10] (HELO trinity.anyware-tech.com) (84.96.21.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Sep 2006 01:21:36 -0700
Received: from localhost (localhost [127.0.0.1])
	by trinity.anyware-tech.com (Postfix) with ESMTP id CF1EE4002E9
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Sep 2006 10:21:10 +0200 (CEST)
Received: from trinity.anyware-tech.com ([127.0.0.1])
	by localhost (trinity.anyware-tech.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 12916-02 for <hadoop-dev@lucene.apache.org>;
	Fri, 1 Sep 2006 10:20:59 +0200 (CEST)
Received: from [10.0.2.28] (io.anyware [10.0.2.28])
	by trinity.anyware-tech.com (Postfix) with ESMTP id C67374002E8
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Sep 2006 10:20:59 +0200 (CEST)
Message-ID: <44F7ED69.3050109@anyware-tech.com>
Date: Fri, 01 Sep 2006 10:20:57 +0200
From: =?ISO-8859-1?Q?Fr=E9d=E9ric_Bertin?=
 <frederic.bertin@anyware-tech.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: eclipse-based gui to browse a HDFS or launch MR jobs
References: <44F70CEC.8060900@anyware-tech.com> <44F71FC8.4060208@apache.org>
In-Reply-To: <44F71FC8.4060208@apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Scanned: Debian amavisd-new at anyware-tech.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

ok, let me some little time to make some code cleanup and I'll submit it 
(hopefully by next week).

Fred


Doug Cutting wrote:
> This sounds like it might make a good contrib module.  Please submit a 
> "new feature" issue and attach it as a patch.
>
> Thanks!
>
> Doug
>
> Fr�d�ric Bertin wrote:
>> Hi all,
>>
>> to increase productivity in our current project (which makes a heavy 
>> use of Hadoop), I wrote a small Eclipse-based GUI application which 
>> basically consists in 2 views:
>>
>>    *  a HDFS explorer adapted from Eclipse filesystem explorer example.
>>      For now, it includes the following features:
>>          o classical tree-based browsing interface, with directory
>>            content being detailed in a 3 columns table (file name, file
>>            size, file type)
>>          o refresh button
>>          o delete file or directory (with confirm dialog): select files
>>            in the tree or table and click the "Delete" button
>>          o rename file or directory: simple click on the file in the
>>            table, type the new name and validate
>>          o open file with system editor: select the file in the table
>>            and click "Open" button (works on Windows, not on Linux)
>>          o internal drag & drop
>>          o external drag & drop from the local filesystem to the HDFS
>>            (the opposite doesn't work)
>>
>>    * a MapReduce *very* simple job launcher:
>>          o select the job XML configuration file
>>          o run the job
>>          o kill the job
>>          o visualize map and reduce progress with progress bars
>>          o open a browser on the Hadoop job tracker web interface
>>
>> Do you see any interest for such a tool in Hadoop (or in a connate 
>> project)? If yes, I see no problem contributing it. However I don't 
>> know what is your current thinking about providing Hadoop with some 
>> GUI functions? Indeed it may overlap with the current Web-based 
>> interface.
>>
>> WDYT?
>>
>>
>> Fred
>>


-- 
Fr�d�ric BERTIN
Contr�le industriel
ANYWARE TECHNOLOGIES
T�l (direct) : +33 (0)5.61.00.06.41
T�l (standard) : +33 (0)5.61.00.52.90
Fax : +33 (0)5 61 00 51 46
http://www.anyware-tech.com


From MAILER-DAEMON Fri Sep  1 14:47:47 2006
Return-Path: 
 <hadoop-dev-return-3514-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 27754 invoked from network); 1 Sep 2006 14:47:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Sep 2006 14:47:47 -0000
Received: (qmail 73066 invoked by uid 500); 1 Sep 2006 14:47:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 73042 invoked by uid 500); 1 Sep 2006 14:47:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 73033 invoked by uid 99); 1 Sep 2006 14:47:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Sep 2006 07:47:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Sep 2006 07:47:45 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5202541000B
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Sep 2006 14:44:23 +0000 (GMT)
Message-ID: <2129736.1157121863333.JavaMail.jira@brutus>
Date: Fri, 1 Sep 2006 07:44:23 -0700 (PDT)
From: =?utf-8?Q?Fr=C3=A9d=C3=A9ric_Bertin_=28JIRA=29?= <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-127) Unclear precedence of config files
 and property definitions
In-Reply-To: <336798027.1144662478922.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-127?page=3Dcomments#actio=
n_12432153 ]=20
           =20
Fr=C3=A9d=C3=A9ric Bertin commented on HADOOP-127:
----------------------------------------

<quote>Folks should only define things in the -site files if they want to f=
orce them for all code. </quote>

I should have read this earlier, it would have saved me some time.

Actually, the fact that properties defined in hadoop-final.xml override EVE=
RYTHING, included properties defined in job config files, is something very=
 important that should be well documented, because it's not the intuitively=
 expected behaviour (which, to me, was:
 - hadoop-default.xml, mapred-default.xml overrided by
 - hadoop-final.xml, overrided by
 - job config files

I've searched the wiki (afterwards, unfortunately) and it's very well docum=
ented there. However, the comments included in hadoop-default.xml and other=
 delivered config files are not clear about this. Maybe they should be deta=
iled, or just link to the wiki page.



> Unclear precedence of config files and property definitions
> -----------------------------------------------------------
>
>                 Key: HADOOP-127
>                 URL: http://issues.apache.org/jira/browse/HADOOP-127
>             Project: Hadoop
>          Issue Type: Bug
>          Components: conf
>         Environment: Hadoop 0.1.1, Nutch 0.8-dev
>            Reporter: Andrzej Bialecki=20
>
> The order in which configuration resources are read is not sufficiently d=
ocumented, and also there are no mechanisms preventing harmful re-definitio=
n of certain properties, if they are put in wrong config files.
> From reading the code in Hadoop Configuration.java, JobConf.java and Nutc=
h NutchConfiguration.java I _think_ this is what's happening.
> There are two groups of resources: default resources, loaded first, and f=
inal resources, loaded at the end. All properties (re)-defined in files loa=
ded later will override any previous definitions:
> * default resources: loaded in the order as they are added. The following=
 files are added here, in order:
>     1. hadoop-default.xml (Configuration)
>     2. nutch-default.xml  (NutchConfiguration)
>     3. mapred-default.xml (JobConf)
>     4. job_xx_xxx.xml       (JobConf, in JobConf(File config))
> * final resource: which always come after default resources, i.e. if any =
value is defined here it will always override those set in default resource=
s (NOTE: including per job settings!!!). The following files are added here=
, in reversed order:
>     2. hadoop-site.xml (Configuration)
>     1. nutch-site.xml    (NutchConfiguration)
> (i.e. hadoop-site.xml will take precedence over anything else defined in =
any other config file).
> I would appreciate checking that this is indeed the case, and suggestions=
 how to ensure that you cannot so easily shoot yourself in the foot if you =
define wrong properties in hadoop-site or nutch-site ...

--=20
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: htt=
p://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

       

From MAILER-DAEMON Fri Sep  1 15:05:45 2006
Return-Path: 
 <hadoop-dev-return-3515-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32557 invoked from network); 1 Sep 2006 15:05:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Sep 2006 15:05:45 -0000
Received: (qmail 13304 invoked by uid 500); 1 Sep 2006 15:05:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13285 invoked by uid 500); 1 Sep 2006 15:05:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13276 invoked by uid 99); 1 Sep 2006 15:05:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Sep 2006 08:05:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Sep 2006 08:05:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 60002410012
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Sep 2006 15:02:22 +0000 (GMT)
Message-ID: <11945421.1157122942390.JavaMail.jira@brutus>
Date: Fri, 1 Sep 2006 08:02:22 -0700 (PDT)
From: "Thomas FRIOL (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-501) toString(resources, sb) in
 Configuration.java throws a ClassCastException since resources can be
 loaded from an URL
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

toString(resources, sb) in Configuration.java throws a ClassCastException since resources can be loaded from an URL
-------------------------------------------------------------------------------------------------------------------

                 Key: HADOOP-501
                 URL: http://issues.apache.org/jira/browse/HADOOP-501
             Project: Hadoop
          Issue Type: Bug
    Affects Versions: 0.5.0
            Reporter: Thomas FRIOL
            Priority: Minor
         Attachments: Configuration.java.patch

Object obj = i.next();
if (obj instanceof Path) {
        sb.append((Path)obj);
} else {
        sb.append((String)obj);
}

If obj is an URL -> ClassCastException.

Moreover, I think the test before appending the resource to the StringBuffer is not really necessary since the method take an Object as argument. Why not simply have :

Object obj = i.next();
sb.append(obj);

I have attached a patch to fix this.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep  1 18:09:50 2006
Return-Path: 
 <hadoop-dev-return-3516-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 88543 invoked from network); 1 Sep 2006 18:09:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Sep 2006 18:09:50 -0000
Received: (qmail 88882 invoked by uid 500); 1 Sep 2006 18:09:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 88859 invoked by uid 500); 1 Sep 2006 18:09:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88848 invoked by uid 99); 1 Sep 2006 18:09:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Sep 2006 11:09:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Sep 2006 11:09:46 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E617C410012
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Sep 2006 18:06:23 +0000 (GMT)
Message-ID: <292644.1157133983939.JavaMail.jira@brutus>
Date: Fri, 1 Sep 2006 11:06:23 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-502) Summer buffer overflow exception
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Summer buffer overflow exception
--------------------------------

                 Key: HADOOP-502
                 URL: http://issues.apache.org/jira/browse/HADOOP-502
             Project: Hadoop
          Issue Type: Bug
          Components: fs
    Affects Versions: 0.5.0
            Reporter: Owen O'Malley
         Assigned To: Owen O'Malley
             Fix For: 0.6.0


The extended error message with the offending values finally paid off and I was able to get the values that were causing the Summber buffer overflow exception.

java.lang.RuntimeException: Summer buffer overflow b.len=4096, off=0, summed=512, read=2880, bytesPerSum=1, inSum=512
        at org.apache.hadoop.fs.FSDataInputStream$Checker.read(FSDataInputStream.java:100)
        at org.apache.hadoop.fs.FSDataInputStream$PositionCache.read(FSDataInputStream.java:170)
        at java.io.BufferedInputStream.read1(BufferedInputStream.java:254)
        at java.io.BufferedInputStream.read(BufferedInputStream.java:313)
        at java.io.DataInputStream.read(DataInputStream.java:80)
        at org.apache.hadoop.util.CopyFiles$DFSCopyFilesMapper.copy(CopyFiles.java:190)
        at org.apache.hadoop.util.CopyFiles$DFSCopyFilesMapper.map(CopyFiles.java:391)
        at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:46)
        at org.apache.hadoop.mapred.MapTask.run(MapTask.java:196)
        at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1075)
Caused by: java.lang.ArrayIndexOutOfBoundsException
        at java.util.zip.CRC32.update(CRC32.java:43)
        at org.apache.hadoop.fs.FSDataInputStream$Checker.read(FSDataInputStream.java:98)
        ... 9 more

Tracking through the code, what happens is inside of FSDataInputStream.Checker.read() the verifySum gets an  EOF Exception and turns off the summing. Among other things this sets the bytesPerSum to 1. Unfortunately, that leads to the ArrayIndexOutOfBoundsException.

I think the problem is that the original EOF exception was logged and ignored. I propose that we allow the original EOF to propagate back to the caller. (So that file not found will still disable the checksum checking, but we will detect truncated checksum files.)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep  1 18:18:48 2006
Return-Path: 
 <hadoop-dev-return-3517-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 90659 invoked from network); 1 Sep 2006 18:18:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Sep 2006 18:18:48 -0000
Received: (qmail 3380 invoked by uid 500); 1 Sep 2006 18:18:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3197 invoked by uid 500); 1 Sep 2006 18:18:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3188 invoked by uid 99); 1 Sep 2006 18:18:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Sep 2006 11:18:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Sep 2006 11:18:46 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 87E7C410012
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Sep 2006 18:15:23 +0000 (GMT)
Message-ID: <7937461.1157134523552.JavaMail.jira@brutus>
Date: Fri, 1 Sep 2006 11:15:23 -0700 (PDT)
From: "Bryan Pendleton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-223) Should be able to re-run jobs,
 collecting only missing output
In-Reply-To: <30650123.1147803065900.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-223?page=comments#action_12432196 ] 
            
Bryan Pendleton commented on HADOOP-223:
----------------------------------------

This issue still plagues me. I have a large enough dataset, that processing through it and storing temporary outputs often causes many failures. I still have my local fix for re-running (very cumbersome). I'd love to see a general solution supported.

What I currently do is to inject a special combiner, that only produces output for partitions that didn't complete in a previous run. Thus, if 20% of my job finishes (completes writing reduce output to DFS), I need 20% less working space to run the subsequent job attempt. Usually, this is enough progress.

However, that suffers from a lot of limits:
1) There's no auto-magic storage of what partitions were generated.
2) This loses the ability to have a Combiner doing something else
3) It also requires a new output directory, and hand-reassembly of the completed tasks.

It seems like it should be solvable more generally by:
1) Storing the partitions that are generated when a job is initially run.
2) Keeping track of what partitions have completed.
3) Allowing a job to be re-submitted, using the previous partitions (and not failing on the output existance check)

Anyone else run into these issues? I'd be happy to write up how I actually work around the problem now, but it seems like a more general solution would be helpful to a wider audience.

> Should be able to re-run jobs, collecting only missing output
> -------------------------------------------------------------
>
>                 Key: HADOOP-223
>                 URL: http://issues.apache.org/jira/browse/HADOOP-223
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>            Reporter: Bryan Pendleton
>            Priority: Minor
>
> For jobs with no side effects (roughly == jobs with speculative execution enabled), if partial output has been generated, it should be possible to re-run the job, and fill in the missing pieces. I have now run the same job twice, once finishing 42 of 44 reduce tasks, another time finishing only 17. Each time, many nodes have failed, causing many many tasks to fail ( in one case, 5k failures from 15k map tasks, 23 failures from 44 reduces), but some valid output was generated. Since the output is only dependent on the input, and both jobs used the same input, I will now be able to combine these two failed task outputs to get a completed job's output. This should be something that can be more automatic.
> In particular, it should be possible to resubmit a job, with a list of partitions that should be ignored. A special Combiner, or pre-Combiner, would throw out any map output for partitions that have already been successfully completed, thus reducing the amount of data that needs to be reduced to complete the job. It would, of course, be nice to support "filling in" existing outputs, rather than having to do a move operation on completed outputs.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep  1 19:13:48 2006
Return-Path: 
 <hadoop-dev-return-3518-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 7912 invoked from network); 1 Sep 2006 19:13:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Sep 2006 19:13:48 -0000
Received: (qmail 79760 invoked by uid 500); 1 Sep 2006 19:13:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 79576 invoked by uid 500); 1 Sep 2006 19:13:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 79567 invoked by uid 99); 1 Sep 2006 19:13:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Sep 2006 12:13:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Sep 2006 12:13:46 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5D7C8410012
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Sep 2006 19:10:23 +0000 (GMT)
Message-ID: <17283054.1157137823380.JavaMail.jira@brutus>
Date: Fri, 1 Sep 2006 12:10:23 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-312) Connections should not be cached
In-Reply-To: <13061881.1150916131961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-312?page=all ]

Devaraj Das updated HADOOP-312:
-------------------------------

    Attachment: no_conn_caching.patch

This patch should address most of the issues. One issue - that of duplicate code to do with connections.remove(address) is still there. I couldn't find a nice way to remove the duplication of code. I tested this on small clusters (like 80 nodes). Haven't got a chance to test it out on bigger clusters, but in any case, I thought I would get it reviewed...

> Connections should not be cached
> --------------------------------
>
>                 Key: HADOOP-312
>                 URL: http://issues.apache.org/jira/browse/HADOOP-312
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: ipc
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_connection_caching.patch, no_connection_caching.patch
>
>
> Servers and clients (client include datanodes, tasktrackers, DFSClients & tasks) should not cache connections or maybe cache them for very short periods of time. Clients should set up & tear down connections to the servers everytime they need to contact the servers (including the heartbeats). If connection is cached, then reuse the existing connection for a few subsequent transactions until the connection expires. The heartbeat interval should be more so that many more clients (order of  tens of thousands) can be accomodated within 1 heartbeat interval.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep  1 19:22:52 2006
Return-Path: 
 <hadoop-dev-return-3519-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10094 invoked from network); 1 Sep 2006 19:22:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Sep 2006 19:22:52 -0000
Received: (qmail 92186 invoked by uid 500); 1 Sep 2006 19:22:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 92162 invoked by uid 500); 1 Sep 2006 19:22:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 92153 invoked by uid 99); 1 Sep 2006 19:22:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Sep 2006 12:22:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Sep 2006 12:22:51 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 44D3D410012
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Sep 2006 19:19:23 +0000 (GMT)
Message-ID: <21807400.1157138363279.JavaMail.jira@brutus>
Date: Fri, 1 Sep 2006 12:19:23 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-312) Connections should not be cached
In-Reply-To: <13061881.1150916131961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-312?page=comments#action_12432208 ] 
            
Devaraj Das commented on HADOOP-312:
------------------------------------

By the way, this patch has all the functionality that was planned for originally, less thread-caching.

> Connections should not be cached
> --------------------------------
>
>                 Key: HADOOP-312
>                 URL: http://issues.apache.org/jira/browse/HADOOP-312
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: ipc
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_connection_caching.patch, no_connection_caching.patch
>
>
> Servers and clients (client include datanodes, tasktrackers, DFSClients & tasks) should not cache connections or maybe cache them for very short periods of time. Clients should set up & tear down connections to the servers everytime they need to contact the servers (including the heartbeats). If connection is cached, then reuse the existing connection for a few subsequent transactions until the connection expires. The heartbeat interval should be more so that many more clients (order of  tens of thousands) can be accomodated within 1 heartbeat interval.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep  1 20:02:49 2006
Return-Path: 
 <hadoop-dev-return-3520-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 26824 invoked from network); 1 Sep 2006 20:02:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Sep 2006 20:02:49 -0000
Received: (qmail 60975 invoked by uid 500); 1 Sep 2006 20:02:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 60874 invoked by uid 500); 1 Sep 2006 20:02:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 60863 invoked by uid 99); 1 Sep 2006 20:02:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Sep 2006 13:02:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Sep 2006 13:02:48 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3408B41001A
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Sep 2006 19:59:25 +0000 (GMT)
Message-ID: <8318699.1157140765210.JavaMail.jira@brutus>
Date: Fri, 1 Sep 2006 12:59:25 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-312) Connections should not be cached
In-Reply-To: <13061881.1150916131961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-312?page=comments#action_12432224 ] 
            
Devaraj Das commented on HADOOP-312:
------------------------------------

+        if (noException) {
+          synchronized (connections) {
+            connections.remove(address);
+          }
+        }
The above should be if (!noException) {  ... }

> Connections should not be cached
> --------------------------------
>
>                 Key: HADOOP-312
>                 URL: http://issues.apache.org/jira/browse/HADOOP-312
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: ipc
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_connection_caching.patch, no_connection_caching.patch
>
>
> Servers and clients (client include datanodes, tasktrackers, DFSClients & tasks) should not cache connections or maybe cache them for very short periods of time. Clients should set up & tear down connections to the servers everytime they need to contact the servers (including the heartbeats). If connection is cached, then reuse the existing connection for a few subsequent transactions until the connection expires. The heartbeat interval should be more so that many more clients (order of  tens of thousands) can be accomodated within 1 heartbeat interval.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep  1 20:10:53 2006
Return-Path: 
 <hadoop-dev-return-3521-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30309 invoked from network); 1 Sep 2006 20:10:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Sep 2006 20:10:53 -0000
Received: (qmail 77012 invoked by uid 500); 1 Sep 2006 20:10:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 76994 invoked by uid 500); 1 Sep 2006 20:10:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 76985 invoked by uid 99); 1 Sep 2006 20:10:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Sep 2006 13:10:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Sep 2006 13:10:51 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4B5DD41000B
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Sep 2006 20:07:23 +0000 (GMT)
Message-ID: <7099123.1157141243306.JavaMail.jira@brutus>
Date: Fri, 1 Sep 2006 13:07:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-312) Connections should not be cached
In-Reply-To: <13061881.1150916131961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-312?page=comments#action_12432226 ] 
            
Doug Cutting commented on HADOOP-312:
-------------------------------------

If CLOSE_CONNECTION is a constant, then it should be declared 'static final'.  But I think it can be removed altogether, along with shouldCloseConnection.  Why not have the ConnectionCuller simply set running=false, so that Connection.run() exits naturally and removes itself from the connection cache?

The culler doesn't appear to remove the connection from the cache anyway.  It should, so that new requests are not handed to a connection that is exiting.  And to further safeguard against that, we can check, before calling connections.remove(address) that connections.get(address) == this, rather than keeping a noException boolean.

ConnectionCuller's constructor should set its thread name.

MAX_RETRIES should be named 'maxRetries' and should get its value from a config parameter named ipc.client.connect.max.retries.

Do we need a separate nocache config parameter, and code to support it?  Shouldn't this be the same as simply setting maxidletime to 0?  If so, let's get rid of isCachingDisabled.  This would give only one mode of operation, greatly reducing the number of possible bugs.

The culler should sleep for a minimum time (say 1 second), so it doesn't enter a tight loop.

ipc.server.system.somaxconn should be named something like ipc.server.listen.queue.size


> Connections should not be cached
> --------------------------------
>
>                 Key: HADOOP-312
>                 URL: http://issues.apache.org/jira/browse/HADOOP-312
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: ipc
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_connection_caching.patch, no_connection_caching.patch
>
>
> Servers and clients (client include datanodes, tasktrackers, DFSClients & tasks) should not cache connections or maybe cache them for very short periods of time. Clients should set up & tear down connections to the servers everytime they need to contact the servers (including the heartbeats). If connection is cached, then reuse the existing connection for a few subsequent transactions until the connection expires. The heartbeat interval should be more so that many more clients (order of  tens of thousands) can be accomodated within 1 heartbeat interval.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep  1 20:49:03 2006
Return-Path: 
 <hadoop-dev-return-3522-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 42416 invoked from network); 1 Sep 2006 20:49:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Sep 2006 20:49:03 -0000
Received: (qmail 36646 invoked by uid 500); 1 Sep 2006 20:49:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 36617 invoked by uid 500); 1 Sep 2006 20:49:02 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 36608 invoked by uid 99); 1 Sep 2006 20:49:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Sep 2006 13:49:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Sep 2006 13:49:01 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C56BB410016
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Sep 2006 20:45:23 +0000 (GMT)
Message-ID: <6459855.1157143523806.JavaMail.jira@brutus>
Date: Fri, 1 Sep 2006 13:45:23 -0700 (PDT)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-413) streaming: replace class UTF8 with
 class Text
In-Reply-To: <20792221.1154478553914.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-413?page=all ]

Hairong Kuang reassigned HADOOP-413:
------------------------------------

    Assignee: Hairong Kuang  (was: Michel Tourn)

> streaming: replace class UTF8 with class Text
> ---------------------------------------------
>
>                 Key: HADOOP-413
>                 URL: http://issues.apache.org/jira/browse/HADOOP-413
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: contrib/streaming
>            Reporter: Michel Tourn
>         Assigned To: Hairong Kuang
>
> need to support long lines in hadoopStreaming.
> So replace class UTF8 with class Text or with line-oriented binary I/O

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep  1 20:54:48 2006
Return-Path: 
 <hadoop-dev-return-3523-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43239 invoked from network); 1 Sep 2006 20:54:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Sep 2006 20:54:48 -0000
Received: (qmail 40899 invoked by uid 500); 1 Sep 2006 20:54:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40877 invoked by uid 500); 1 Sep 2006 20:54:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 40867 invoked by uid 99); 1 Sep 2006 20:54:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Sep 2006 13:54:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Sep 2006 13:54:46 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4E737410016
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Sep 2006 20:51:23 +0000 (GMT)
Message-ID: <24310178.1157143883318.JavaMail.jira@brutus>
Date: Fri, 1 Sep 2006 13:51:23 -0700 (PDT)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-499) Avoid the use of Strings to improve
 the  performance of hadoop streaming
In-Reply-To: <17866592.1157058563504.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-499?page=all ]

Hairong Kuang updated HADOOP-499:
---------------------------------

    Attachment: text_streaming.patch

This patch includes the following fix:
1. replace the the use of UTF8 by Text in hadoop-streaming. Therefore, it fixesADOOP-413.
2. removes the use of stringsby adding simple manipulation of bytes arrays.
3. fix the stream close order when map/reduce finishes hence avoid truncated records.

> Avoid the use of Strings to improve the  performance of hadoop streaming
> ------------------------------------------------------------------------
>
>                 Key: HADOOP-499
>                 URL: http://issues.apache.org/jira/browse/HADOOP-499
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: contrib/streaming
>    Affects Versions: 0.5.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.6.0
>
>         Attachments: text_streaming.patch
>
>
> In hadoop streaming, a record is represented as a String for  I/O and is encoded as UTF8 for map/reduce. A record has to be converted between String and UTF8 back and forth multiple times and  this wastes CPU time. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep  1 21:14:49 2006
Return-Path: 
 <hadoop-dev-return-3524-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 47182 invoked from network); 1 Sep 2006 21:14:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Sep 2006 21:14:49 -0000
Received: (qmail 54904 invoked by uid 500); 1 Sep 2006 21:14:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 54880 invoked by uid 500); 1 Sep 2006 21:14:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 54869 invoked by uid 99); 1 Sep 2006 21:14:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Sep 2006 14:14:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Sep 2006 14:14:46 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5408641000B
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Sep 2006 21:11:23 +0000 (GMT)
Message-ID: <26979027.1157145083341.JavaMail.jira@brutus>
Date: Fri, 1 Sep 2006 14:11:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-320) bin/hadoop dfs -mv does not mv
  source's checksum file if source is a file
In-Reply-To: <20152082.1151017529846.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-320?page=comments#action_12432243 ] 
            
Doug Cutting commented on HADOOP-320:
-------------------------------------

I've heard more reports of this.

Can someone please provide a test case that demonstrates this?

> bin/hadoop dfs -mv does not mv  source's checksum file if source is a file
> --------------------------------------------------------------------------
>
>                 Key: HADOOP-320
>                 URL: http://issues.apache.org/jira/browse/HADOOP-320
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.3.2
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.6.0
>
>         Attachments: rename.patch
>
>
> None of the rename operation of DistributedSystem or DFSClient checks if the source is a file or not. Need also to rename the checksum file accordingly if the source is a file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep  1 22:19:16 2006
Return-Path: 
 <hadoop-dev-return-3525-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 58895 invoked from network); 1 Sep 2006 22:19:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Sep 2006 22:19:16 -0000
Received: (qmail 37022 invoked by uid 500); 1 Sep 2006 22:19:15 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 36999 invoked by uid 500); 1 Sep 2006 22:19:15 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 36990 invoked by uid 99); 1 Sep 2006 22:19:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Sep 2006 15:19:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Sep 2006 15:19:14 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 791457142F4
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Sep 2006 22:15:51 +0000 (GMT)
Message-ID: <26595147.1157148951493.JavaMail.jira@brutus>
Date: Fri, 1 Sep 2006 15:15:51 -0700 (PDT)
From: "Ruey-Lung Hsiao (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-320) bin/hadoop dfs -mv does not mv
  source's checksum file if source is a file
In-Reply-To: <20152082.1151017529846.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-320?page=comments#action_12432249 ] 
            
Ruey-Lung Hsiao commented on HADOOP-320:
----------------------------------------

Here is an example demonstrating this problem.

rlhsiao@csdev1001:~sites>hadoop dfs -ls a
06/09/01 14:49:37 INFO conf.Configuration: parsing jar:file:/nfs/ystools/vol/ystools/releng/build/Linux_2.6_rh4_i686/tools/hadoop/kryptonite/hadoop-0.5.0.jar!/hadoop-default.xml
06/09/01 14:49:37 INFO conf.Configuration: parsing file:/nfs/ystools/vol/ystools/releng/build/Linux_2.6_rh4_i686/tools/hadoop/kryptonite/conf/kryptonite2/hadoop-site.xml
06/09/01 14:49:37 INFO ipc.Client: Client connection to 72.30.117.134:8020: starting
Found 1 items
/user/rlhsiao/a/test.txt        <r 3>   1326

rlhsiao@csdev1001:~sites>hadoop dfs -mv adobe/adobe.txt a
...

rlhsiao@csdev1001:~/sites> hadoop dfs -cat a/adobe.txt |more
06/09/01 14:44:11 INFO conf.Configuration: parsing jar:file:/nfs/ystools/vol/ystools/releng/build/Linux_2.6_rh4_i686/tools/hadoop/kryptonite/hadoop-0.5.0.jar!/hadoop-default.xml
06/09/01 14:44:11 INFO conf.Configuration: parsing file:/nfs/ystools/vol/ystools/releng/build/Linux_2.6_rh4_i686/tools/hadoop/kryptonite/conf/kryptonite2/hadoop-site.xml
06/09/01 14:44:11 INFO ipc.Client: Client connection to 72.30.117.134:8020: starting
06/09/01 14:44:11 WARN fs.DataInputStream: Problem opening checksum file: a/adobe.txt.  Ignoring exception: org.apache.hadoop.ipc.RemoteException: java.io.IOException: Cannot open filename /user/rlhsiao/a/.adobe.txt.crc
        at org.apache.hadoop.dfs.NameNode.open(NameNode.java:178)
        at sun.reflect.GeneratedMethodAccessor10.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:332)
        at org.apache.hadoop.ipc.Server$Handler.run(Server.java:468)

        at org.apache.hadoop.ipc.Client$Connection.run(Client.java:159)

[content of the file..] ...

> bin/hadoop dfs -mv does not mv  source's checksum file if source is a file
> --------------------------------------------------------------------------
>
>                 Key: HADOOP-320
>                 URL: http://issues.apache.org/jira/browse/HADOOP-320
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.3.2
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.6.0
>
>         Attachments: rename.patch
>
>
> None of the rename operation of DistributedSystem or DFSClient checks if the source is a file or not. Need also to rename the checksum file accordingly if the source is a file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep  1 23:21:48 2006
Return-Path: 
 <hadoop-dev-return-3526-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68953 invoked from network); 1 Sep 2006 23:21:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Sep 2006 23:21:48 -0000
Received: (qmail 81952 invoked by uid 500); 1 Sep 2006 23:21:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 81768 invoked by uid 500); 1 Sep 2006 23:21:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 81759 invoked by uid 99); 1 Sep 2006 23:21:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Sep 2006 16:21:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Sep 2006 16:21:46 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6C4FB7142FA
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Sep 2006 23:18:23 +0000 (GMT)
Message-ID: <4936111.1157152703441.JavaMail.jira@brutus>
Date: Fri, 1 Sep 2006 16:18:23 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-414) replace class UTF8 with class Text
In-Reply-To: <26221885.1154481854253.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-414?page=comments#action_12432255 ] 
            
Owen O'Malley commented on HADOOP-414:
--------------------------------------

There is a worse problem in that none of the hadoop.io.* Writable classes are versioned.

In particular, we would like to move to the new method of writing Strings (Text.writeString), but can't very easily because even if the file versions and the rpc protocol versions change, that doesn't get passed down to readFields.

We really need to find a story that works for versioning Writables. I guess we could move everything over to VersionedWritable and that would work at the cost of 1 byte/Writable.

Thoughts?

> replace class UTF8 with class Text
> ----------------------------------
>
>                 Key: HADOOP-414
>                 URL: http://issues.apache.org/jira/browse/HADOOP-414
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.5.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.6.0
>
>         Attachments: utf2text.patch
>
>
> Since class UTF8 is deprecated, all references of UTF8 in hadoop should be replaced with class Text if the change does not break the system. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep  1 23:25:54 2006
Return-Path: 
 <hadoop-dev-return-3528-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 69527 invoked from network); 1 Sep 2006 23:25:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Sep 2006 23:25:54 -0000
Received: (qmail 84358 invoked by uid 500); 1 Sep 2006 23:25:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 84334 invoked by uid 500); 1 Sep 2006 23:25:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 84325 invoked by uid 99); 1 Sep 2006 23:25:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Sep 2006 16:25:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Sep 2006 16:25:52 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BFD3241000B
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Sep 2006 23:22:24 +0000 (GMT)
Message-ID: <11809972.1157152944783.JavaMail.jira@brutus>
Date: Fri, 1 Sep 2006 16:22:24 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-64) DataNode should be capable of managing
 multiple volumes
In-Reply-To: <96561968.1141686362086.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-64?page=all ]

Milind Bhandarkar updated HADOOP-64:
------------------------------------

    Attachment: multiple-volumes.patch

> DataNode should be capable of managing multiple volumes
> -------------------------------------------------------
>
>                 Key: HADOOP-64
>                 URL: http://issues.apache.org/jira/browse/HADOOP-64
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.2.0
>            Reporter: Sameer Paranjpye
>         Assigned To: Milind Bhandarkar
>            Priority: Minor
>             Fix For: 0.6.0
>
>         Attachments: multiple-volumes.patch
>
>
> The dfs Datanode can only store data on a single filesystem volume. When a node runs its disks JBOD this means running a Datanode per disk on the machine. While the scheme works reasonably well on small clusters, on larger installations (several 100 nodes) it implies a very large number of Datanodes with associated management overhead in the Namenode.
> The Datanod should be enhanced to be able to handle multiple volumes on a single machine.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep  1 23:25:51 2006
Return-Path: 
 <hadoop-dev-return-3527-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 69499 invoked from network); 1 Sep 2006 23:25:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Sep 2006 23:25:51 -0000
Received: (qmail 84162 invoked by uid 500); 1 Sep 2006 23:25:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 84132 invoked by uid 500); 1 Sep 2006 23:25:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 84123 invoked by uid 99); 1 Sep 2006 23:25:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Sep 2006 16:25:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Sep 2006 16:25:50 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0C29041001A
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Sep 2006 23:22:27 +0000 (GMT)
Message-ID: <15652704.1157152947047.JavaMail.jira@brutus>
Date: Fri, 1 Sep 2006 16:22:27 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-64) DataNode should be capable of managing
 multiple volumes
In-Reply-To: <96561968.1141686362086.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-64?page=all ]

Milind Bhandarkar updated HADOOP-64:
------------------------------------

    Status: Patch Available  (was: Open)

Patch attached.

> DataNode should be capable of managing multiple volumes
> -------------------------------------------------------
>
>                 Key: HADOOP-64
>                 URL: http://issues.apache.org/jira/browse/HADOOP-64
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.2.0
>            Reporter: Sameer Paranjpye
>         Assigned To: Milind Bhandarkar
>            Priority: Minor
>             Fix For: 0.6.0
>
>         Attachments: multiple-volumes.patch
>
>
> The dfs Datanode can only store data on a single filesystem volume. When a node runs its disks JBOD this means running a Datanode per disk on the machine. While the scheme works reasonably well on small clusters, on larger installations (several 100 nodes) it implies a very large number of Datanodes with associated management overhead in the Namenode.
> The Datanod should be enhanced to be able to handle multiple volumes on a single machine.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep  1 23:50:54 2006
Return-Path: 
 <hadoop-dev-return-3529-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 72288 invoked from network); 1 Sep 2006 23:50:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Sep 2006 23:50:54 -0000
Received: (qmail 98231 invoked by uid 500); 1 Sep 2006 23:50:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98211 invoked by uid 500); 1 Sep 2006 23:50:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98167 invoked by uid 99); 1 Sep 2006 23:50:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Sep 2006 16:50:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Sep 2006 16:50:48 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CBDBB41001F
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Sep 2006 23:47:25 +0000 (GMT)
Message-ID: <21324919.1157154445832.JavaMail.jira@brutus>
Date: Fri, 1 Sep 2006 16:47:25 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-414) replace class UTF8 with class Text
In-Reply-To: <26221885.1154481854253.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-414?page=comments#action_12432258 ] 
            
Doug Cutting commented on HADOOP-414:
-------------------------------------

> we would like to move to the new method of writing Strings (Text.writeString), but can't very easily because even if the file versions and the rpc protocol versions change, that doesn't get passed down to readFields

I'm not sure what you're saying.  If we, in a single commit, change from UTF8 to Text  in RPC parameter classes and in classes written to disk, and increase the version numbers of the file formats and RPC protocols involved, then we'd be safe, no?  The problem is that if we change from UTF8 to Text in the RPC system, when transmitting class names, since this has no version.  It would be good to get a version number here.

More generally, it would be useful to have a per-Writable class version number.  This could be used when setting up RPC connections, and stored in file formats, etc.  But that would not solve the current problem with the RPC system.

Maybe we should punt on the RPC system for this patch for now, and just make the changes that are easy, leaving that for another day?

> replace class UTF8 with class Text
> ----------------------------------
>
>                 Key: HADOOP-414
>                 URL: http://issues.apache.org/jira/browse/HADOOP-414
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.5.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.6.0
>
>         Attachments: utf2text.patch
>
>
> Since class UTF8 is deprecated, all references of UTF8 in hadoop should be replaced with class Text if the change does not break the system. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Sep  2 12:19:47 2006
Return-Path: 
 <hadoop-dev-return-3530-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16623 invoked from network); 2 Sep 2006 12:19:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Sep 2006 12:19:47 -0000
Received: (qmail 71292 invoked by uid 500); 2 Sep 2006 12:19:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 71268 invoked by uid 500); 2 Sep 2006 12:19:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 71259 invoked by uid 99); 2 Sep 2006 12:19:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 02 Sep 2006 05:19:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 02 Sep 2006 05:19:46 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 596017142FD
	for <hadoop-dev@lucene.apache.org>; Sat,  2 Sep 2006 12:16:22 +0000 (GMT)
Message-ID: <30143628.1157199382362.JavaMail.jira@brutus>
Date: Sat, 2 Sep 2006 05:16:22 -0700 (PDT)
From: "Johan Oskarson (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-503) Add option to fsck that checks the crc
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Add option to fsck that checks the crc
--------------------------------------

                 Key: HADOOP-503
                 URL: http://issues.apache.org/jira/browse/HADOOP-503
             Project: Hadoop
          Issue Type: Improvement
          Components: dfs
    Affects Versions: 0.5.0
            Reporter: Johan Oskarson


If I'm not mistaken the fsck command doesn't actually check the crc of the blocks.
I just had a problem where a few blocks managed to get the size 0, fsck didn't report this but
my hadoop programs started failing because some of the input data was corrupted.

An option in the fsck program to actually check the crc would be nice, even though it would take a while to run.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Sep  2 12:22:47 2006
Return-Path: 
 <hadoop-dev-return-3531-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16838 invoked from network); 2 Sep 2006 12:22:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Sep 2006 12:22:47 -0000
Received: (qmail 72256 invoked by uid 500); 2 Sep 2006 12:22:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72074 invoked by uid 500); 2 Sep 2006 12:22:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72065 invoked by uid 99); 2 Sep 2006 12:22:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 02 Sep 2006 05:22:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 02 Sep 2006 05:22:46 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 583947142FD
	for <hadoop-dev@lucene.apache.org>; Sat,  2 Sep 2006 12:19:22 +0000 (GMT)
Message-ID: <26418310.1157199562358.JavaMail.jira@brutus>
Date: Sat, 2 Sep 2006 05:19:22 -0700 (PDT)
From: "Johan Oskarson (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-504) Automatically increase replication of
 often used files/blocks
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Automatically increase replication of often used files/blocks
-------------------------------------------------------------

                 Key: HADOOP-504
                 URL: http://issues.apache.org/jira/browse/HADOOP-504
             Project: Hadoop
          Issue Type: New Feature
          Components: dfs
    Affects Versions: 0.5.0
            Reporter: Johan Oskarson


It would be interesting to see if a patch that makes the namenode save the number of times a certain
file (or block if possible) is used. And then increase the replication of these files to increase performance.

Any ideas on how to implement?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Sep  2 20:58:07 2006
Return-Path: 
 <hadoop-dev-return-3532-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93192 invoked from network); 2 Sep 2006 20:58:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Sep 2006 20:58:07 -0000
Received: (qmail 1089 invoked by uid 500); 2 Sep 2006 20:58:07 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 1063 invoked by uid 500); 2 Sep 2006 20:58:06 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 1054 invoked by uid 99); 2 Sep 2006 20:58:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 02 Sep 2006 13:58:06 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.126.228.149] (HELO rsmtp1.corp.yahoo.com)
 (207.126.228.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 02 Sep 2006 13:58:04 -0700
Received: from [192.168.1.66] (snvvpn2-10-72-76-c58.corp.yahoo.com
 [10.72.76.58])
	by rsmtp1.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k82Kva4d022944;
	Sat, 2 Sep 2006 13:57:39 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=in-reply-to:references:mime-version:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=1rD61oW/RMDM65bZjgc3Uo2fKjmpGnQFbuvT+00SKQ39nsPKKjV6/Pxm9ETtBPf0
In-Reply-To: <26418310.1157199562358.JavaMail.jira@brutus>
References: <26418310.1157199562358.JavaMail.jira@brutus>
Mime-Version: 1.0 (Apple Message framework v624)
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <9dab24bdd8b94b7f828fd8d95bbcc058@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Arkady Borkovsky <arkady@yahoo-inc.com>
Subject: Re: [jira] Created: (HADOOP-504) Automatically increase replication
 of often used files/blocks
Date: Sat, 2 Sep 2006 13:57:37 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.624)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

past performance does not guarantee future results
http://www.prudential.com/content/0,,85,00.html

On Sep 2, 2006, at 5:19 AM, Johan Oskarson (JIRA) wrote:

> Automatically increase replication of often used files/blocks
> -------------------------------------------------------------
>
>                  Key: HADOOP-504
>                  URL: http://issues.apache.org/jira/browse/HADOOP-504
>              Project: Hadoop
>           Issue Type: New Feature
>           Components: dfs
>     Affects Versions: 0.5.0
>             Reporter: Johan Oskarson
>
>
> It would be interesting to see if a patch that makes the namenode save 
> the number of times a certain
> file (or block if possible) is used. And then increase the replication 
> of these files to increase performance.
>
> Any ideas on how to implement?
>
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the 
> administrators: 
> http://issues.apache.org/jira/secure/Administrators.jspa
> -
> For more information on JIRA, see: 
> http://www.atlassian.com/software/jira
>
>


From MAILER-DAEMON Sun Sep  3 11:28:56 2006
Return-Path: 
 <hadoop-dev-return-3533-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23197 invoked from network); 3 Sep 2006 11:28:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Sep 2006 11:28:56 -0000
Received: (qmail 70307 invoked by uid 500); 3 Sep 2006 11:28:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70284 invoked by uid 500); 3 Sep 2006 11:28:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 70275 invoked by uid 99); 3 Sep 2006 11:28:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Sep 2006 04:28:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Sep 2006 04:28:53 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4D295410023
	for <hadoop-dev@lucene.apache.org>; Sun,  3 Sep 2006 11:25:23 +0000 (GMT)
Message-ID: <11279682.1157282723313.JavaMail.jira@brutus>
Date: Sun, 3 Sep 2006 04:25:23 -0700 (PDT)
From: "Pier Fumagalli (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-496) Expose HDFS as a WebDAV store
In-Reply-To: <29112039.1156966140094.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-496?page=comments#action_12432333 ] 
            
Pier Fumagalli commented on HADOOP-496:
---------------------------------------

I have received (privately) a patch from Michel Tourn for my code to allow Headoop to be exposed as a WebDAV repository.

To limit the problems of IP and stuff, please attach the patch to this bug and I'll commit it to my code :-)



> Expose HDFS as a WebDAV store
> -----------------------------
>
>                 Key: HADOOP-496
>                 URL: http://issues.apache.org/jira/browse/HADOOP-496
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>            Reporter: Michel Tourn
>
> WebDAV stands for Distributed Authoring and Versioning. It is a set of extensions to the HTTP protocol that lets users collaboratively edit and manage files on a remote web server. It is often considered as a replacement for NFS or SAMBA
> HDFS (Hadoop Distributed File System) needs a friendly file system interface. DFSShell commands are unfamiliar. Instead it is more convenient for Hadoop users to use a mountable network drive. A friendly interface to HDFS will be used both for casual browsing of data and for bulk import/export. 
> The FUSE provider for HDFS is already available ( http://issues.apache.org/jira/browse/HADOOP-17 )  but it had scalability problems. WebDAV is a popular alternative. 
> The typical licensing terms for WebDAV tools are also attractive: 
> GPL for Linux client tools that Hadoop would not redistribute anyway. 
> More importantly, Apache Project/Apache license for Java tools and for server components. 
> This allows for a tighter integration with the HDFS code base.
> There are some interesting Apache projects that support WebDAV.
> But these are probably too heavyweight for the needs of Hadoop:
> Tomcat servlet: http://tomcat.apache.org/tomcat-4.1-doc/catalina/docs/api/org/apache/catalina/servlets/WebdavServlet.html
> Slide:          http://jakarta.apache.org/slide/
> Being HTTP-based and "backwards-compatible" with Web Browser clients, the WebDAV server protocol could even be piggy-backed on the existing Web UI ports of the Hadoop name node / data nodes. WebDAV can be hosted as (Jetty) servlets. This minimizes server code bloat and this avoids additional network traffic between HDFS and the WebDAV server.
> General Clients (read-only):
> Any web browser
> Linux Clients: 
> Mountable GPL davfs2  http://dav.sourceforge.net/
> FTP-like  GPL Cadaver http://www.webdav.org/cadaver/
> Server Protocol compliance tests:
> http://www.webdav.org/neon/litmus/  
> A goal is for Hadoop HDFS to pass this test (minus support for Properties)
> Pure Java clients:
> DAV Explorer Apache lic. http://www.ics.uci.edu/~webdav/	
> WebDAV also makes it convenient to add advanced features in an incremental fashion:
> file locking, access control lists, hard links, symbolic links.
> New WebDAV standards get accepted and more or less featured WebDAV clients exist.
> core              http://www.webdav.org/specs/rfc2518.html
> ACLs              http://www.webdav.org/specs/rfc3744.html
> redirects "soft links" http://greenbytes.de/tech/webdav/rfc4437.html
> BIND "hard links" http://www.webdav.org/bind/
> quota             http://tools.ietf.org/html/rfc4331

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sun Sep  3 15:15:56 2006
Return-Path: 
 <hadoop-dev-return-3534-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68504 invoked from network); 3 Sep 2006 15:15:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Sep 2006 15:15:56 -0000
Received: (qmail 91632 invoked by uid 500); 3 Sep 2006 15:15:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 91607 invoked by uid 500); 3 Sep 2006 15:15:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 91598 invoked by uid 99); 3 Sep 2006 15:15:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Sep 2006 08:15:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Sep 2006 08:15:54 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9DF6B71430F
	for <hadoop-dev@lucene.apache.org>; Sun,  3 Sep 2006 15:12:23 +0000 (GMT)
Message-ID: <21252209.1157296343644.JavaMail.jira@brutus>
Date: Sun, 3 Sep 2006 08:12:23 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-312) Connections should not be cached
In-Reply-To: <13061881.1150916131961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-312?page=comments#action_12432341 ] 
            
Devaraj Das commented on HADOOP-312:
------------------------------------

> If CLOSE_CONNECTION is a constant, then it should be declared 'static final'. But I think it can be 
> removed altogether, along with shouldCloseConnection. Why not have the ConnectionCuller 
> simply set running=false, so that Connection.run() exits naturally and removes itself from the 
> connection cache? 
If you are referring to the running boolean field attached to the Client class, the setting that to false will make all the response receiver threads exit. So instead, we can have another boolean field attached to the Connection class to signify that the corresponding response receiver thread should exit.

> The culler doesn't appear to remove the connection from the cache anyway. It should, so that new 
> requests are not handed to a connection that is exiting. 
It does remove I think. Note there is a i.remove() in the run method of the ConnectionCuller thread.

> Do we need a separate nocache config parameter, and code to support it? Shouldn't this be the 
> same as simply setting maxidletime to 0? If so, let's get rid of isCachingDisabled. This would give 
> only one mode of operation, greatly reducing the number of possible bugs.
So this patch will make the Hadoop clients operate in two modes - one with full caching of connections, and another idle-time-based caching (connections are culled when they are idle for some period of time). I am not sure I understood what you mean by one mode of operation. Are you saying that we should remove "if (isCachingDisabled)" and instead have the corresponding logic work under "if (maxIdleTime == 0)" ?

Also one more thing - currently, I do a check for isCachingDisabled in a few places and then execute relevant code. But some of the code, although not required for the mode where we don't do idle-time-based caching, doesn't really harm the execution of that mode (like incrementRef) except adding some unecessary code. Does it remain that way or do I remove checks for isCachingDisabled from those "safe" places ?

> Connections should not be cached
> --------------------------------
>
>                 Key: HADOOP-312
>                 URL: http://issues.apache.org/jira/browse/HADOOP-312
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: ipc
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_connection_caching.patch, no_connection_caching.patch
>
>
> Servers and clients (client include datanodes, tasktrackers, DFSClients & tasks) should not cache connections or maybe cache them for very short periods of time. Clients should set up & tear down connections to the servers everytime they need to contact the servers (including the heartbeats). If connection is cached, then reuse the existing connection for a few subsequent transactions until the connection expires. The heartbeat interval should be more so that many more clients (order of  tens of thousands) can be accomodated within 1 heartbeat interval.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sun Sep  3 15:57:53 2006
Return-Path: 
 <hadoop-dev-return-3535-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 73910 invoked from network); 3 Sep 2006 15:57:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Sep 2006 15:57:53 -0000
Received: (qmail 18040 invoked by uid 500); 3 Sep 2006 15:57:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17980 invoked by uid 500); 3 Sep 2006 15:57:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17971 invoked by uid 99); 3 Sep 2006 15:57:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Sep 2006 08:57:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Sep 2006 08:57:51 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 89AE071430E
	for <hadoop-dev@lucene.apache.org>; Sun,  3 Sep 2006 15:54:25 +0000 (GMT)
Message-ID: <1093991.1157298865560.JavaMail.jira@brutus>
Date: Sun, 3 Sep 2006 08:54:25 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-312) Connections should not be cached
In-Reply-To: <13061881.1150916131961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-312?page=comments#action_12432349 ] 
            
Devaraj Das commented on HADOOP-312:
------------------------------------

> If you are referring to the running boolean field attached to the Client class, the setting that to false 
> will make all the response receiver threads exit. 

Meant to say: "If you are referring ... *all* the response receiver threads (connected to the different servers) exit, not just that thread which was idle".


> Connections should not be cached
> --------------------------------
>
>                 Key: HADOOP-312
>                 URL: http://issues.apache.org/jira/browse/HADOOP-312
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: ipc
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_connection_caching.patch, no_connection_caching.patch
>
>
> Servers and clients (client include datanodes, tasktrackers, DFSClients & tasks) should not cache connections or maybe cache them for very short periods of time. Clients should set up & tear down connections to the servers everytime they need to contact the servers (including the heartbeats). If connection is cached, then reuse the existing connection for a few subsequent transactions until the connection expires. The heartbeat interval should be more so that many more clients (order of  tens of thousands) can be accomodated within 1 heartbeat interval.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sun Sep  3 17:37:51 2006
Return-Path: 
 <hadoop-dev-return-3536-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8154 invoked from network); 3 Sep 2006 17:37:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Sep 2006 17:37:51 -0000
Received: (qmail 78792 invoked by uid 500); 3 Sep 2006 17:37:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 78771 invoked by uid 500); 3 Sep 2006 17:37:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 78762 invoked by uid 99); 3 Sep 2006 17:37:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Sep 2006 10:37:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Sep 2006 10:37:50 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5A292714312
	for <hadoop-dev@lucene.apache.org>; Sun,  3 Sep 2006 17:34:24 +0000 (GMT)
Message-ID: <27196776.1157304864366.JavaMail.jira@brutus>
Date: Sun, 3 Sep 2006 10:34:24 -0700 (PDT)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-505) Patch for external project
 it.could.webdav
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Patch for external project it.could.webdav
------------------------------------------

                 Key: HADOOP-505
                 URL: http://issues.apache.org/jira/browse/HADOOP-505
             Project: Hadoop
          Issue Type: Task
          Components: dfs
            Reporter: Michel Tourn


Context: 
http://issues.apache.org/jira/browse/HADOOP-496
http://could.it/main/a-simple-approach-to-webdav.html

This patch applies to an external project that Hadoop would use as a library.
You can obtain the baseline code:
svn co --revision {"1 Sep 2006 00:00:00 GMT"} http://could.it/repo/webdav/head/
Then apply the attached patch.

Patch details below.
---------------------
Changes in the patch are:

Filehandle leaks prevented it from working on Windows. (in.close() in 3 places)
Filehandle leaks would eventually crash server on Linux.

Now it passes the litmus compliance tests, in both original and HDFS mode.
Mostly had to refine the HTTP status codes.

Decoupled COPY and MOVE
This allows an implementation of MOVE other than COPY-and-delete

There is no new "abstraction code" to support a distributed filesystem backend.
Only: one change to make a java.io.File reference work when it represents a 
non-Windows path on Windows: (unixAbsolute = rootPath.startsWith("/"))


The factory code via servlet properties was extended to allow loading by name:
repositoryClass="it.could.webdav.DAVRepository"
repositoryClass="it.could.webdav.XMLRepository"
repositoryClass="org.apache.hadoop.dfs.webdav.HDFSRepository"

4 classes are subclassed for the alternative implementation:
A few private fields were made protected.
Some constructor logic moved to protected init() method-s so it can be overriden.


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sun Sep  3 17:37:52 2006
Return-Path: 
 <hadoop-dev-return-3537-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8181 invoked from network); 3 Sep 2006 17:37:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Sep 2006 17:37:52 -0000
Received: (qmail 79162 invoked by uid 500); 3 Sep 2006 17:37:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 78979 invoked by uid 500); 3 Sep 2006 17:37:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 78970 invoked by uid 99); 3 Sep 2006 17:37:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Sep 2006 10:37:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Sep 2006 10:37:51 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6DB0B714313
	for <hadoop-dev@lucene.apache.org>; Sun,  3 Sep 2006 17:34:25 +0000 (GMT)
Message-ID: <24930481.1157304865447.JavaMail.jira@brutus>
Date: Sun, 3 Sep 2006 10:34:25 -0700 (PDT)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-505) Patch for external project
 it.could.webdav
In-Reply-To: <27196776.1157304864366.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-505?page=all ]

Michel Tourn updated HADOOP-505:
--------------------------------

    Attachment:     (was: webdav-hadoop.1.patch)

> Patch for external project it.could.webdav
> ------------------------------------------
>
>                 Key: HADOOP-505
>                 URL: http://issues.apache.org/jira/browse/HADOOP-505
>             Project: Hadoop
>          Issue Type: Task
>          Components: dfs
>            Reporter: Michel Tourn
>
> Context: 
> http://issues.apache.org/jira/browse/HADOOP-496
> http://could.it/main/a-simple-approach-to-webdav.html
> This patch applies to an external project that Hadoop would use as a library.
> You can obtain the baseline code:
> svn co --revision {"1 Sep 2006 00:00:00 GMT"} http://could.it/repo/webdav/head/
> Then apply the attached patch.
> Patch details below.
> ---------------------
> Changes in the patch are:
> Filehandle leaks prevented it from working on Windows. (in.close() in 3 places)
> Filehandle leaks would eventually crash server on Linux.
> Now it passes the litmus compliance tests, in both original and HDFS mode.
> Mostly had to refine the HTTP status codes.
> Decoupled COPY and MOVE
> This allows an implementation of MOVE other than COPY-and-delete
> There is no new "abstraction code" to support a distributed filesystem backend.
> Only: one change to make a java.io.File reference work when it represents a 
> non-Windows path on Windows: (unixAbsolute = rootPath.startsWith("/"))
> The factory code via servlet properties was extended to allow loading by name:
> repositoryClass="it.could.webdav.DAVRepository"
> repositoryClass="it.could.webdav.XMLRepository"
> repositoryClass="org.apache.hadoop.dfs.webdav.HDFSRepository"
> 4 classes are subclassed for the alternative implementation:
> A few private fields were made protected.
> Some constructor logic moved to protected init() method-s so it can be overriden.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sun Sep  3 17:39:50 2006
Return-Path: 
 <hadoop-dev-return-3538-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8260 invoked from network); 3 Sep 2006 17:39:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Sep 2006 17:39:50 -0000
Received: (qmail 79411 invoked by uid 500); 3 Sep 2006 17:39:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 79392 invoked by uid 500); 3 Sep 2006 17:39:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 79383 invoked by uid 99); 3 Sep 2006 17:39:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Sep 2006 10:39:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Sep 2006 10:39:49 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 59125714312
	for <hadoop-dev@lucene.apache.org>; Sun,  3 Sep 2006 17:36:23 +0000 (GMT)
Message-ID: <21456358.1157304983360.JavaMail.jira@brutus>
Date: Sun, 3 Sep 2006 10:36:23 -0700 (PDT)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-505) Patch for external project
 it.could.webdav
In-Reply-To: <27196776.1157304864366.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-505?page=all ]

Michel Tourn updated HADOOP-505:
--------------------------------

    Attachment: webdav-hadoop.1.patch

> Patch for external project it.could.webdav
> ------------------------------------------
>
>                 Key: HADOOP-505
>                 URL: http://issues.apache.org/jira/browse/HADOOP-505
>             Project: Hadoop
>          Issue Type: Task
>          Components: dfs
>            Reporter: Michel Tourn
>         Attachments: webdav-hadoop.1.patch
>
>
> Context: 
> http://issues.apache.org/jira/browse/HADOOP-496
> http://could.it/main/a-simple-approach-to-webdav.html
> This patch applies to an external project that Hadoop would use as a library.
> You can obtain the baseline code:
> svn co --revision {"1 Sep 2006 00:00:00 GMT"} http://could.it/repo/webdav/head/
> Then apply the attached patch.
> Patch details below.
> ---------------------
> Changes in the patch are:
> Filehandle leaks prevented it from working on Windows. (in.close() in 3 places)
> Filehandle leaks would eventually crash server on Linux.
> Now it passes the litmus compliance tests, in both original and HDFS mode.
> Mostly had to refine the HTTP status codes.
> Decoupled COPY and MOVE
> This allows an implementation of MOVE other than COPY-and-delete
> There is no new "abstraction code" to support a distributed filesystem backend.
> Only: one change to make a java.io.File reference work when it represents a 
> non-Windows path on Windows: (unixAbsolute = rootPath.startsWith("/"))
> The factory code via servlet properties was extended to allow loading by name:
> repositoryClass="it.could.webdav.DAVRepository"
> repositoryClass="it.could.webdav.XMLRepository"
> repositoryClass="org.apache.hadoop.dfs.webdav.HDFSRepository"
> 4 classes are subclassed for the alternative implementation:
> A few private fields were made protected.
> Some constructor logic moved to protected init() method-s so it can be overriden.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sun Sep  3 17:41:53 2006
Return-Path: 
 <hadoop-dev-return-3539-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8433 invoked from network); 3 Sep 2006 17:41:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Sep 2006 17:41:53 -0000
Received: (qmail 80214 invoked by uid 500); 3 Sep 2006 17:41:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 80191 invoked by uid 500); 3 Sep 2006 17:41:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 80182 invoked by uid 99); 3 Sep 2006 17:41:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Sep 2006 10:41:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Sep 2006 10:41:50 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C386B714314
	for <hadoop-dev@lucene.apache.org>; Sun,  3 Sep 2006 17:38:24 +0000 (GMT)
Message-ID: <19652469.1157305104798.JavaMail.jira@brutus>
Date: Sun, 3 Sep 2006 10:38:24 -0700 (PDT)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-496) Expose HDFS as a WebDAV store
In-Reply-To: <29112039.1156966140094.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-496?page=comments#action_12432359 ] 
            
Michel Tourn commented on HADOOP-496:
-------------------------------------

The webdav patch is now available on this separate issue:
http://issues.apache.org/jira/browse/HADOOP-505


> Expose HDFS as a WebDAV store
> -----------------------------
>
>                 Key: HADOOP-496
>                 URL: http://issues.apache.org/jira/browse/HADOOP-496
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>            Reporter: Michel Tourn
>
> WebDAV stands for Distributed Authoring and Versioning. It is a set of extensions to the HTTP protocol that lets users collaboratively edit and manage files on a remote web server. It is often considered as a replacement for NFS or SAMBA
> HDFS (Hadoop Distributed File System) needs a friendly file system interface. DFSShell commands are unfamiliar. Instead it is more convenient for Hadoop users to use a mountable network drive. A friendly interface to HDFS will be used both for casual browsing of data and for bulk import/export. 
> The FUSE provider for HDFS is already available ( http://issues.apache.org/jira/browse/HADOOP-17 )  but it had scalability problems. WebDAV is a popular alternative. 
> The typical licensing terms for WebDAV tools are also attractive: 
> GPL for Linux client tools that Hadoop would not redistribute anyway. 
> More importantly, Apache Project/Apache license for Java tools and for server components. 
> This allows for a tighter integration with the HDFS code base.
> There are some interesting Apache projects that support WebDAV.
> But these are probably too heavyweight for the needs of Hadoop:
> Tomcat servlet: http://tomcat.apache.org/tomcat-4.1-doc/catalina/docs/api/org/apache/catalina/servlets/WebdavServlet.html
> Slide:          http://jakarta.apache.org/slide/
> Being HTTP-based and "backwards-compatible" with Web Browser clients, the WebDAV server protocol could even be piggy-backed on the existing Web UI ports of the Hadoop name node / data nodes. WebDAV can be hosted as (Jetty) servlets. This minimizes server code bloat and this avoids additional network traffic between HDFS and the WebDAV server.
> General Clients (read-only):
> Any web browser
> Linux Clients: 
> Mountable GPL davfs2  http://dav.sourceforge.net/
> FTP-like  GPL Cadaver http://www.webdav.org/cadaver/
> Server Protocol compliance tests:
> http://www.webdav.org/neon/litmus/  
> A goal is for Hadoop HDFS to pass this test (minus support for Properties)
> Pure Java clients:
> DAV Explorer Apache lic. http://www.ics.uci.edu/~webdav/	
> WebDAV also makes it convenient to add advanced features in an incremental fashion:
> file locking, access control lists, hard links, symbolic links.
> New WebDAV standards get accepted and more or less featured WebDAV clients exist.
> core              http://www.webdav.org/specs/rfc2518.html
> ACLs              http://www.webdav.org/specs/rfc3744.html
> redirects "soft links" http://greenbytes.de/tech/webdav/rfc4437.html
> BIND "hard links" http://www.webdav.org/bind/
> quota             http://tools.ietf.org/html/rfc4331

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sun Sep  3 23:27:52 2006
Return-Path: 
 <hadoop-dev-return-3540-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 58532 invoked from network); 3 Sep 2006 23:27:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Sep 2006 23:27:52 -0000
Received: (qmail 71468 invoked by uid 500); 3 Sep 2006 23:27:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 71450 invoked by uid 500); 3 Sep 2006 23:27:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 71441 invoked by uid 99); 3 Sep 2006 23:27:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Sep 2006 16:27:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Sep 2006 16:27:50 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1E0DD714318
	for <hadoop-dev@lucene.apache.org>; Sun,  3 Sep 2006 23:24:24 +0000 (GMT)
Message-ID: <8509993.1157325864120.JavaMail.jira@brutus>
Date: Sun, 3 Sep 2006 16:24:24 -0700 (PDT)
From: "Pier Fumagalli (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-505) Patch for external project
 it.could.webdav
In-Reply-To: <27196776.1157304864366.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-505?page=comments#action_12432391 ] 
            
Pier Fumagalli commented on HADOOP-505:
---------------------------------------

Patch applied onto HEAD revision at http://could.it/repo/webdav/head/

Will be availble in 0.5 at http://could.it/repo/webdav/tags/0.5/ once the new release is rolled!

> Patch for external project it.could.webdav
> ------------------------------------------
>
>                 Key: HADOOP-505
>                 URL: http://issues.apache.org/jira/browse/HADOOP-505
>             Project: Hadoop
>          Issue Type: Task
>          Components: dfs
>            Reporter: Michel Tourn
>         Attachments: webdav-hadoop.1.patch
>
>
> Context: 
> http://issues.apache.org/jira/browse/HADOOP-496
> http://could.it/main/a-simple-approach-to-webdav.html
> This patch applies to an external project that Hadoop would use as a library.
> You can obtain the baseline code:
> svn co --revision {"1 Sep 2006 00:00:00 GMT"} http://could.it/repo/webdav/head/
> Then apply the attached patch.
> Patch details below.
> ---------------------
> Changes in the patch are:
> Filehandle leaks prevented it from working on Windows. (in.close() in 3 places)
> Filehandle leaks would eventually crash server on Linux.
> Now it passes the litmus compliance tests, in both original and HDFS mode.
> Mostly had to refine the HTTP status codes.
> Decoupled COPY and MOVE
> This allows an implementation of MOVE other than COPY-and-delete
> There is no new "abstraction code" to support a distributed filesystem backend.
> Only: one change to make a java.io.File reference work when it represents a 
> non-Windows path on Windows: (unixAbsolute = rootPath.startsWith("/"))
> The factory code via servlet properties was extended to allow loading by name:
> repositoryClass="it.could.webdav.DAVRepository"
> repositoryClass="it.could.webdav.XMLRepository"
> repositoryClass="org.apache.hadoop.dfs.webdav.HDFSRepository"
> 4 classes are subclassed for the alternative implementation:
> A few private fields were made protected.
> Some constructor logic moved to protected init() method-s so it can be overriden.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep  4 02:30:07 2006
Return-Path: 
 <hadoop-dev-return-3541-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 87704 invoked from network); 4 Sep 2006 02:30:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Sep 2006 02:30:07 -0000
Received: (qmail 76255 invoked by uid 500); 4 Sep 2006 02:30:06 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 76234 invoked by uid 500); 4 Sep 2006 02:30:06 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 76225 invoked by uid 99); 4 Sep 2006 02:30:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Sep 2006 19:30:06 -0700
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=HTML_MESSAGE,MIME_BASE64_TEXT,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jindolk@nhncorp.com designates
 220.95.234.208 as permitted sender)
Received: from [220.95.234.208] (HELO ileikr01.nhncorp.com) (220.95.234.208)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Sep 2006 19:30:05 -0700
Received: from mailkr01.nhncorp.com ([220.95.234.206])
          by ileikr01.nhncorp.com (Lotus Domino Release 6.5.4FP1)
          with ESMTP id 2006090411294343-3789 ;
          Mon, 4 Sep 2006 11:29:43 +0900
Subject: HDFS file security?
X-Priority: 3 (Normal)
From: =?EUC-KR?B?sejH/MHY?= <jindolk@nhncorp.com>
To: hadoop-dev@lucene.apache.org
Message-ID: 
 <OFA185149D.97EE2EDB-ON492571DF.000DB50F-492571DF.000DB510@nhncorp.com>
Date: Mon, 4 Sep 2006 11:29:43 +0900
X-MIMETrack: Itemize by Notes Server on MAILKR01/NHNCORP(Release
 6.5.4FP3|January 09, 2006) at
 2006-09-04 =?EUC-KR?B?v8DA/CAxMToyOTo0Mw==?=,
	Serialize by Router on MAILKR01/NHNCORP(Release 6.5.4FP3|January 09, 2006) at
 2006-09-04 =?EUC-KR?B?v8DA/CAxMToyOTo0Mw==?=,
	Serialize complete at 2006-09-04 =?EUC-KR?B?v8DA/CAxMToyOTo0Mw==?=,
	Itemize by SMTP Server on ILEIKR01/NHNCORP(Release 6.5.4FP1|June 19, 2005) at
 2006-09-04 =?EUC-KR?B?v8DA/CAxMToyOTo0Mw==?=,
	Serialize by Router on ILEIKR01/NHNCORP(Release 6.5.4FP1|June 19, 2005) at
 2006-09-04 =?EUC-KR?B?v8DA/CAxMTozMDowNA==?=,
	Serialize complete at 2006-09-04 =?EUC-KR?B?v8DA/CAxMTozMDowNA==?=
MIME-Version: 1.0
X-Mailer: BoraWord ActiveX Control 1.6.5.1020
Content-Type: multipart/alternative;
 	boundary="----=_NextPart_000_7EDB_3C169779.122CFE8A"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_7EDB_3C169779.122CFE8A
Content-Transfer-Encoding: base64
Content-Type: text/plain;
	charset="us-ascii"

DQpJIGhhdmUgYSBxdWVzdGlvbi4NCiANCk1vc3QgZmlsZSBzeXN0ZW1zIGhhdmUgb3duIHNlY3Vy
aXR5IG1lY2hhbmlzbS4NCiANCkJ1dCwgSGFkb29wIGRvc2VuJ3QgaGF2ZSBzZWN1cml0eSBtZWNo
YW5pc20gZm9yIGZpbGUgc3lzdGVtIGFuZCBqb2IgbWFuYWdlbWVudC4NCiANCkhhcyBIYWRvb3Ag
cHJvamVjdCAgcGxhbiBmb3Igc2VjdXJpdHk/DQogDQpvcg0KIA0KSGFzIGJlZW4gYWxyZWFkeSBp
bXBsZW1lbnRlZCA/DQogDQotIEtpbSBKdW4gZnJvbSBLb3JlYQ==

------=_NextPart_000_7EDB_3C169779.122CFE8A--

From MAILER-DAEMON Tue Sep  5 15:51:00 2006
Return-Path: 
 <hadoop-dev-return-3543-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77830 invoked from network); 5 Sep 2006 15:51:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Sep 2006 15:51:00 -0000
Received: (qmail 58016 invoked by uid 500); 5 Sep 2006 15:50:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 57990 invoked by uid 500); 5 Sep 2006 15:50:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 57981 invoked by uid 99); 5 Sep 2006 15:50:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 08:50:59 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.109.112.28] (HELO mrout2-b.corp.dcn.yahoo.com)
 (216.109.112.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 08:50:58 -0700
Received: from memberfamouslx (snvvpn1-10-72-72-c1.corp.yahoo.com
 [10.72.72.1])
	by mrout2-b.corp.dcn.yahoo.com (8.13.6/8.13.6/y.out) with ESMTP id
 k85FAbSt068763
	for <hadoop-dev@lucene.apache.org>; Tue, 5 Sep 2006 08:10:38 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=from:to:subject:date:message-id:mime-version:content-type:
	content-transfer-encoding:x-mailer:thread-index:in-reply-to:x-mimeole;
	b=xMBOvyF7GiqDz0MrWyG1O3W+h4Hb7wN3czqifbaSEwevwL3uADXSb7AOGXeNTUgr
From: "Yoram Arnon" <yarnon@yahoo-inc.com>
To: <hadoop-dev@lucene.apache.org>
Subject: RE: HDFS file security?
Date: Tue, 5 Sep 2006 08:10:37 -0700
Message-ID: <006201c6d0fd$72422a80$0148480a@ds.corp.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="ks_c_5601-1987"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcbPyg588fPKlx8bSqOWl3NAuhJcCABMxrzQ
In-Reply-To: 
 <OFA185149D.97EE2EDB-ON492571DF.000DB50F-492571DF.000DB510@nhncorp.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The need clearly exists, and there are general plans to put a security
mechanism in place, but no concrete plans, or even a design yet.
Contributions in this area would be appreciated.

Yoram=20

> -----Original Message-----
> From: =B1=E8=C7=FC=C1=D8 [mailto:jindolk@nhncorp.com]=20
> Sent: Sunday, September 03, 2006 7:30 PM
> To: hadoop-dev@lucene.apache.org
> Subject: HDFS file security?
>=20
>=20
> I have a question.
> =20
> Most file systems have own security mechanism.
> =20
> But, Hadoop dosen't have security mechanism for file system=20
> and job management.
> =20
> Has Hadoop project  plan for security?
> =20
> or
> =20
> Has been already implemented ?
> =20
> - Kim Jun from Korea


From MAILER-DAEMON Tue Sep  5 15:29:52 2006
Return-Path: 
 <hadoop-dev-return-3542-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 72907 invoked from network); 5 Sep 2006 15:29:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Sep 2006 15:29:52 -0000
Received: (qmail 26513 invoked by uid 500); 5 Sep 2006 15:29:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26487 invoked by uid 500); 5 Sep 2006 15:29:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26470 invoked by uid 99); 5 Sep 2006 15:29:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 08:29:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 08:29:51 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 58D9A7142F8
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Sep 2006 15:26:22 +0000 (GMT)
Message-ID: <24887203.1157469982360.JavaMail.jira@brutus>
Date: Tue, 5 Sep 2006 08:26:22 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-506) job tracker hangs on to dead task
 trackers "forever"
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

job tracker hangs on to dead task trackers "forever"
----------------------------------------------------

                 Key: HADOOP-506
                 URL: http://issues.apache.org/jira/browse/HADOOP-506
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
            Reporter: Yoram Arnon
            Priority: Minor


I see cases where a task tracker gets disconnected from the job tracker and disconnects, and then appears twice in the job tracker's list, with one instance being alive and well, and the other's 'time since last heartbeat' increasing monotonically.
that all makes sense.
What doesn't make sense, is that the old instances never expire. It's been over 400000 seoncds since the last heartbeat. And the cluster reports having more nodes up and running than its size (350 nodes in a 320 node cluster).

there should be some reasonable timout for these expired task trackers, somewhere between 10 minutes and an hour.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep  5 17:13:04 2006
Return-Path: 
 <hadoop-dev-return-3544-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 3333 invoked from network); 5 Sep 2006 17:13:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Sep 2006 17:13:04 -0000
Received: (qmail 3662 invoked by uid 500); 5 Sep 2006 17:12:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3590 invoked by uid 500); 5 Sep 2006 17:12:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3506 invoked by uid 99); 5 Sep 2006 17:12:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 10:12:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 10:12:53 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 73D21714317
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Sep 2006 17:09:24 +0000 (GMT)
Message-ID: <17811210.1157476164472.JavaMail.jira@brutus>
Date: Tue, 5 Sep 2006 10:09:24 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-507) Runtime exception in
 org.apache.hadoop.io.WritableFactories.newInstance when trying to startup
 namenode/datanode
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Runtime exception in org.apache.hadoop.io.WritableFactories.newInstance when trying to startup namenode/datanode
----------------------------------------------------------------------------------------------------------------

                 Key: HADOOP-507
                 URL: http://issues.apache.org/jira/browse/HADOOP-507
             Project: Hadoop
          Issue Type: Bug
          Components: util
    Affects Versions: 0.5.0
            Reporter: Arun C Murthy
         Assigned To: Owen O'Malley


Here's the logs:

arun@neo ~/dev/java/latest-hadoop/trunk $ cat /home/arun/dev/java/hadoop-0.4.0/build/libhdfs/tests/logs/hadoop-arun-namenode-neo.out
2006-09-05 22:18:39,756 INFO  conf.Configuration (Configuration.java:loadResource(496)) - parsing file:/home/arun/dev/java/hadoop-0.4.0/src/c++/libhdfs/tests/conf/hadoop-default.xml
2006-09-05 22:18:39,804 INFO  conf.Configuration (Configuration.java:loadResource(496)) - parsing file:/home/arun/dev/java/hadoop-0.4.0/src/c++/libhdfs/tests/conf/hadoop-site.xml
2006-09-05 22:18:39,918 INFO  util.Credential (FileResource.java:<clinit>(60)) - Checking Resource aliases
2006-09-05 22:18:39,935 INFO  http.HttpServer (HttpServer.java:doStart(729)) - Version Jetty/5.1.4
2006-09-05 22:18:40,366 INFO  util.Container (Container.java:start(74)) - Started org.mortbay.jetty.servlet.WebApplicationHandler@1171b26
2006-09-05 22:18:40,478 INFO  util.Container (Container.java:start(74)) - Started WebApplicationContext[/,/]
2006-09-05 22:18:40,478 INFO  util.Container (Container.java:start(74)) - Started HttpContext[/logs,/logs]
2006-09-05 22:18:40,479 INFO  util.Container (Container.java:start(74)) - Started HttpContext[/static,/static]
2006-09-05 22:18:40,485 INFO  http.SocketListener (SocketListener.java:start(204)) - Started SocketListener on 0.0.0.0:50070
2006-09-05 22:18:40,487 INFO  util.Container (Container.java:start(74)) - Started org.mortbay.jetty.Server@1b09468
Exception in thread "main" java.lang.RuntimeException: java.lang.IllegalAccessException: Class org.apache.hadoop.io.WritableFactories can not access a member of class org.apache.hadoop.dfs.Block with modifiers "public"
        at org.apache.hadoop.io.WritableFactories.newInstance(WritableFactories.java:49)
        at org.apache.hadoop.io.ArrayWritable.readFields(ArrayWritable.java:81)
        at org.apache.hadoop.dfs.FSEditLog.loadFSEdits(FSEditLog.java:134)
        at org.apache.hadoop.dfs.FSImage.loadFSImage(FSImage.java:157)
        at org.apache.hadoop.dfs.FSDirectory.loadFSImage(FSDirectory.java:317)
        at org.apache.hadoop.dfs.FSNamesystem.<init>(FSNamesystem.java:199)
        at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:132)
        at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:123)
        at org.apache.hadoop.dfs.NameNode.main(NameNode.java:543)
Caused by: java.lang.IllegalAccessException: Class org.apache.hadoop.io.WritableFactories can not access a member of class org.apache.hadoop.dfs.Block with modifiers "public"
        at sun.reflect.Reflection.ensureMemberAccess(Reflection.java:65)
        at java.lang.Class.newInstance0(Class.java:344)
        at java.lang.Class.newInstance(Class.java:303)
        at org.apache.hadoop.io.WritableFactories.newInstance(WritableFactories.java:45)
        ... 8 more

Steps to reproduce:
1. Start namenode/datanode
2. Run hdfs_test program (part of libhdfs)
3. Stop namenode/datanode
4. goto step 1


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep  5 17:20:55 2006
Return-Path: 
 <hadoop-dev-return-3545-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 5277 invoked from network); 5 Sep 2006 17:20:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Sep 2006 17:20:55 -0000
Received: (qmail 15897 invoked by uid 500); 5 Sep 2006 17:20:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15715 invoked by uid 500); 5 Sep 2006 17:20:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 15706 invoked by uid 99); 5 Sep 2006 17:20:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 10:20:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 10:20:54 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B7864714312
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Sep 2006 17:17:24 +0000 (GMT)
Message-ID: <21864799.1157476644746.JavaMail.jira@brutus>
Date: Tue, 5 Sep 2006 10:17:24 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-507) Runtime exception in
 org.apache.hadoop.io.WritableFactories.newInstance when trying to startup
 namenode/datanode
In-Reply-To: <17811210.1157476164472.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-507?page=all ]

Owen O'Malley updated HADOOP-507:
---------------------------------

    Attachment: write-factory.patch

This is yet another instance of the class permission problems. This patch changes the non-factory case to call ReflectionUtils.newInstance, which has the class initialization code.

> Runtime exception in org.apache.hadoop.io.WritableFactories.newInstance when trying to startup namenode/datanode
> ----------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-507
>                 URL: http://issues.apache.org/jira/browse/HADOOP-507
>             Project: Hadoop
>          Issue Type: Bug
>          Components: util
>    Affects Versions: 0.5.0
>            Reporter: Arun C Murthy
>         Assigned To: Owen O'Malley
>         Attachments: write-factory.patch
>
>
> Here's the logs:
> arun@neo ~/dev/java/latest-hadoop/trunk $ cat /home/arun/dev/java/hadoop-0.4.0/build/libhdfs/tests/logs/hadoop-arun-namenode-neo.out
> 2006-09-05 22:18:39,756 INFO  conf.Configuration (Configuration.java:loadResource(496)) - parsing file:/home/arun/dev/java/hadoop-0.4.0/src/c++/libhdfs/tests/conf/hadoop-default.xml
> 2006-09-05 22:18:39,804 INFO  conf.Configuration (Configuration.java:loadResource(496)) - parsing file:/home/arun/dev/java/hadoop-0.4.0/src/c++/libhdfs/tests/conf/hadoop-site.xml
> 2006-09-05 22:18:39,918 INFO  util.Credential (FileResource.java:<clinit>(60)) - Checking Resource aliases
> 2006-09-05 22:18:39,935 INFO  http.HttpServer (HttpServer.java:doStart(729)) - Version Jetty/5.1.4
> 2006-09-05 22:18:40,366 INFO  util.Container (Container.java:start(74)) - Started org.mortbay.jetty.servlet.WebApplicationHandler@1171b26
> 2006-09-05 22:18:40,478 INFO  util.Container (Container.java:start(74)) - Started WebApplicationContext[/,/]
> 2006-09-05 22:18:40,478 INFO  util.Container (Container.java:start(74)) - Started HttpContext[/logs,/logs]
> 2006-09-05 22:18:40,479 INFO  util.Container (Container.java:start(74)) - Started HttpContext[/static,/static]
> 2006-09-05 22:18:40,485 INFO  http.SocketListener (SocketListener.java:start(204)) - Started SocketListener on 0.0.0.0:50070
> 2006-09-05 22:18:40,487 INFO  util.Container (Container.java:start(74)) - Started org.mortbay.jetty.Server@1b09468
> Exception in thread "main" java.lang.RuntimeException: java.lang.IllegalAccessException: Class org.apache.hadoop.io.WritableFactories can not access a member of class org.apache.hadoop.dfs.Block with modifiers "public"
>         at org.apache.hadoop.io.WritableFactories.newInstance(WritableFactories.java:49)
>         at org.apache.hadoop.io.ArrayWritable.readFields(ArrayWritable.java:81)
>         at org.apache.hadoop.dfs.FSEditLog.loadFSEdits(FSEditLog.java:134)
>         at org.apache.hadoop.dfs.FSImage.loadFSImage(FSImage.java:157)
>         at org.apache.hadoop.dfs.FSDirectory.loadFSImage(FSDirectory.java:317)
>         at org.apache.hadoop.dfs.FSNamesystem.<init>(FSNamesystem.java:199)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:132)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:123)
>         at org.apache.hadoop.dfs.NameNode.main(NameNode.java:543)
> Caused by: java.lang.IllegalAccessException: Class org.apache.hadoop.io.WritableFactories can not access a member of class org.apache.hadoop.dfs.Block with modifiers "public"
>         at sun.reflect.Reflection.ensureMemberAccess(Reflection.java:65)
>         at java.lang.Class.newInstance0(Class.java:344)
>         at java.lang.Class.newInstance(Class.java:303)
>         at org.apache.hadoop.io.WritableFactories.newInstance(WritableFactories.java:45)
>         ... 8 more
> Steps to reproduce:
> 1. Start namenode/datanode
> 2. Run hdfs_test program (part of libhdfs)
> 3. Stop namenode/datanode
> 4. goto step 1

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep  5 17:21:08 2006
Return-Path: 
 <hadoop-dev-return-3546-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 5336 invoked from network); 5 Sep 2006 17:21:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Sep 2006 17:21:08 -0000
Received: (qmail 16226 invoked by uid 500); 5 Sep 2006 17:21:07 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 16207 invoked by uid 500); 5 Sep 2006 17:21:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 16198 invoked by uid 99); 5 Sep 2006 17:21:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 10:21:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 10:21:06 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1F5EC714315
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Sep 2006 17:17:27 +0000 (GMT)
Message-ID: <1357147.1157476647126.JavaMail.jira@brutus>
Date: Tue, 5 Sep 2006 10:17:27 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-288) RFC: Efficient file caching
In-Reply-To: <6015694.1149730109866.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-288?page=comments#action_12432634 ] 
            
Doug Cutting commented on HADOOP-288:
-------------------------------------

The indentation of this patch is non-standard.  Please use 2 spaces per indent level, no tabs.

Should the JobConf setters be adders?  For example, should setCacheFiles(String) instead be named addCacheFile(Path)?  Also, should we use paths instead of strings?

> RFC: Efficient file caching
> ---------------------------
>
>                 Key: HADOOP-288
>                 URL: http://issues.apache.org/jira/browse/HADOOP-288
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.6.0
>            Reporter: Michel Tourn
>         Assigned To: Mahadev konar
>         Attachments: caching-3.patch, caching.patch, caching.patch, test.jar, test.zip
>
>
> RFC: Efficient file caching 
> (on Hadoop Task nodes, for benefit of MapReduce Tasks)
> ------------------------------------------------------
> We will start implementing this soon. Please provide feedback and improvements to this plan.
> The header "Options:" indicates places where simple choices must be made.
> Problem:
> -------
> o MapReduce tasks require access to additional out-of-band data ("dictionaries")
> This out-of-band data is:
> o in addition to the map/reduce inputs.
> o large (1GB+)
> o broadcast (same data is required on all the Task nodes)
> o changes "infrequently", in particular:
> oo it is always constant for all the Tasks in a Job. 
> oo it is often constant for a month at a time 
> oo it may be shared across team members
> o sometimes used by pure-Java MapReduce programs
> o sometimes used by non-Java MapReduce programs (using Hadoop-Streaming)
> o (future) used by programs that use HDFS and Task-trackers but not MapReduce.
> Existing Solutions to the problem:
> ---------------------------------
> These solutions are not good enough. The present proposal is to do Sol 1 with caching.
> Sol 1: Pure Hadoop: package the out-of-band data in the MapReduce Job jar file.
> Sol 2: Non  Hadoop: for each task node run rsync from single source for data.
> Sol 3: Non  Hadoop: use BitTorrent, etc.
> Sol.1 is correct but slow for many reasons:
>  The Job submitter must recreate a large jar(tar) file for every Job.
>   (The jar contains both changing programs and stable dictionaries)
>  The large Jar file must be propagated from the client to HDFS with 
>  a large replication factor. 
>  At the beginning of every Task, the Task tracker gets the job jar from HDFS 
>  and unjars it in the working directory. This can dominate task execution time.
>  
> Sol.2 has nice properties but also some problems.
>  It does not scale well with large clusters (many concurrent rsync read requests i.e. single-source broadcast)
>  It assumes that Hadoop users can upload data using rsync to the cluster nodes. As a policy, this is not allowed.
>  It requires rsync.
>  
> Sol.3 alleviates the rsync scalability problems but 
>       It is a dependency on an external system. 
>       We want something simpler and more tightly integrated with Hadoop.
>       
> Staging (uploading) out-of-band data:
> ------------------------------------
> The out-of-band data will often originate on the local filesystem of a user machine 
>  (i.e. a MapReduce job submitter)
> Nevertheless it makes sense to use HDFS to store the original out-of-band data because:
> o HDFS has (wide) replication. This enables scalable broadcast later.
> o HDFS is an available channel to move data from clients to all task machines.
> o HDFS is convenient as a shared location among Hadoop team members.
> Accessing (downloading) out-of-band data:
> ----------------------------------------
> The non-Java MapReduce programs do not have or want[1] APIs for HDFS.
> Instead these programs just want to access out-of-band data as 
>  local files at predefined paths.
> ([1] Existing programs should be reusable with no changes. 
>  This is often possible bec. communication is over stdin/stdout.)
> Job's jar file as a special case:
> --------------------------------
> One use case is to allow users to make the job jar itself cachable.
> This is only useful in cases where NOTHING changes when a job is resubmitted
>  (no MapRed code changes and no changes in shipped data)
> This situation might occur with an 'extractor' job (gets data from an external source: like Nutch crawler)
> Currently the Hadoop mapred-jar mechanism works in this way:
>  the job jar data is unjarred in the "working directory" of the Task 
>  the jar contains both MapRed java code (added to classpath)
> Cache synchronization:
> ---------------------
> The efficient implementation of the out-of-band data distribution
> is mostly a cache synchronization problem.
> A list of the various aspects where choices must be made follows.
> Cache key:
> ---------
> How do you test that the cached copy is out-of-date?
> Options: 
> 1. the archive/file timestamp 
> 2. the MD5 of the archive/file content
> Comparing source and destination Timestamps is problematic bec. it assumes synchronized clocks.
> Also there is no last-modif metadata in HDFS (for good reasons, like scalability of metadata ops)
> Timestamps stored with the source ('last-propagate-time') do 
>  not require synchronized clocks, only locally monotonic time. 
> (and the worse which can happen at daylight-savings switch is a missed update or an extra-update)
> The cache code could store a copy of the local timestamp 
> in the same way that it caches the value of the content hash along with the source data.
>  
> Cachable unit:
> -------------
> Options: individual files or archives or both.
> Note:
> At the API level, directories will be processed recursively 
> (and the local FS directories will parallel HDFS directories)
> So bulk operations are always possible using directories.
> The question here is whether to handle archives as an additional bulk mechanism.
> Archives are special because:
> o unarchiving occurs transparently as part of the cache sync
> o The cache key is computed on the archive and preserved although 
>   the archive itself is not preserved.
> Supported archive format will be: tar (maybe tgz or compressed jar)
> Archive detection test: by filename extension ".tar" or ".jar"
> Suppose we don't handle archives as special files:
> Pros:
>  o less code, no discussion about which archive formats are supported
>  o fine for large dictionary files. And when files are not large, user may as well
>    put them in the Job jar as usual.
>  o user code could always check and unarchive specific cached files
>    (as a side-effect of MapRed task initialization)
> Cons:
>  o handling small files may be inefficient 
>   (multiple HDFS operations, multiple hash computation, 
>    one 'metadata' hash file along with each small file)
>  o It will not be possible to handle the Job's jar file as a special case of caching 
> Cache isolation: 
> ---------------
> In some cases it may be a problem if the cached HDFS files are updated while a Job is in progress:
> The file may become unavailable for a short period of time and some tasks fail.
> The file may change (atomically) and different tasks use a different version.
> This isolation problem is not addressed in this proposal.
> Standard solutions to the isolation problem are:
> o Assume that Jobs and interfering cache updates won't occur concurrently.
> o Put a version number in the HDFS file paths and refer to a hard-coded version in the Job code.
> o Before running the MapRed job, run a non-distributed application that tests
>   what is the latest available version of the out-of-band data. 
>   Then make this version available to the MapRed job.
>   Two ways to do this. 
>   o either set a job property just-in-time:
>     addCachePathPair("/mydata/v1234/", "localcache/mydata_latest"); 
>     (see Job Configuration for meaning of this)
>   o or publish the decision as an HDFS file containing the version.
>     then rely on user code to read the version, and manually populate the cache:
>     Cache.syncCache("/hdfs/path/fileordir", "relative/local/fileordir");
>     (see MapReduce API for meaning of this)
> Cache synchronization stages:
> ----------------------------
> There are two stages: Client-to-HDFS and HDFS-to-TaskTracker
> o Client-to-HDFS stage.
> Options: A simple option is to not do anything here, i.e. rely on the user.
> This is a reasonable option given previous remarks on the role of HDFS:
>  HDFS is a staging/publishing area and a natural shared location.
> In particular this means that the system need not track 
> where the client files come from.
> o HDFS-to-TaskTracker:
> Client-to-HDFS synchronization (if done at all) should happen before this.
> Then HDFS-to-TaskTracker synchronization must happen right before 
> the data is needed on a node.
> MapReduce cache API:
> -------------------
> Options:
> 1. No change in MapReduce framework code:
> require the user to put this logic in map() (or reduce) function:
>  in MyMapper constructor (or in map() on first record) user is asked to add:
>  
>     Cache.syncCache("/hdfs/path/fileordir", "relative/local/fileordir");
>     Cache.syncCache("..."); //etc.
>   
> -----
> 2. Put this logic in MapReduce framework and use Job properties to
>    communicate the list of pairs (hdfs path; local path)
>  
> Directories are processed recursively.
> If archives are treated specially then they are unarchived on destination.
>  
> MapReduce Job Configuration:
> ---------------------------
> Options:
> with No change in MapReduce framework code (see above)
>  no special Job configuration: 
>    it is up to the MapRed writer to configure and run the cache operations.
> ---
> with Logic in MapReduce framework (see above)
>  some simple Job configuration
> JobConf.addCachePathPair(String, String)
> JobConf.addCachePathPair("/hdfs/path/fileordir", "relative/local/fileordir");

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep  5 17:33:54 2006
Return-Path: 
 <hadoop-dev-return-3547-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8231 invoked from network); 5 Sep 2006 17:33:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Sep 2006 17:33:54 -0000
Received: (qmail 39864 invoked by uid 500); 5 Sep 2006 17:33:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 39683 invoked by uid 500); 5 Sep 2006 17:33:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 39674 invoked by uid 99); 5 Sep 2006 17:33:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 10:33:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 10:33:53 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 09216714315
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Sep 2006 17:30:24 +0000 (GMT)
Message-ID: <23453856.1157477424034.JavaMail.jira@brutus>
Date: Tue, 5 Sep 2006 10:30:24 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-507) Runtime exception in
 org.apache.hadoop.io.WritableFactories.newInstance when trying to startup
 namenode/datanode
In-Reply-To: <17811210.1157476164472.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-507?page=comments#action_12432635 ] 
            
Arun C Murthy commented on HADOOP-507:
--------------------------------------

Works great for me Owen, thanks!

> Runtime exception in org.apache.hadoop.io.WritableFactories.newInstance when trying to startup namenode/datanode
> ----------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-507
>                 URL: http://issues.apache.org/jira/browse/HADOOP-507
>             Project: Hadoop
>          Issue Type: Bug
>          Components: util
>    Affects Versions: 0.5.0
>            Reporter: Arun C Murthy
>         Assigned To: Owen O'Malley
>         Attachments: write-factory.patch
>
>
> Here's the logs:
> arun@neo ~/dev/java/latest-hadoop/trunk $ cat /home/arun/dev/java/hadoop-0.4.0/build/libhdfs/tests/logs/hadoop-arun-namenode-neo.out
> 2006-09-05 22:18:39,756 INFO  conf.Configuration (Configuration.java:loadResource(496)) - parsing file:/home/arun/dev/java/hadoop-0.4.0/src/c++/libhdfs/tests/conf/hadoop-default.xml
> 2006-09-05 22:18:39,804 INFO  conf.Configuration (Configuration.java:loadResource(496)) - parsing file:/home/arun/dev/java/hadoop-0.4.0/src/c++/libhdfs/tests/conf/hadoop-site.xml
> 2006-09-05 22:18:39,918 INFO  util.Credential (FileResource.java:<clinit>(60)) - Checking Resource aliases
> 2006-09-05 22:18:39,935 INFO  http.HttpServer (HttpServer.java:doStart(729)) - Version Jetty/5.1.4
> 2006-09-05 22:18:40,366 INFO  util.Container (Container.java:start(74)) - Started org.mortbay.jetty.servlet.WebApplicationHandler@1171b26
> 2006-09-05 22:18:40,478 INFO  util.Container (Container.java:start(74)) - Started WebApplicationContext[/,/]
> 2006-09-05 22:18:40,478 INFO  util.Container (Container.java:start(74)) - Started HttpContext[/logs,/logs]
> 2006-09-05 22:18:40,479 INFO  util.Container (Container.java:start(74)) - Started HttpContext[/static,/static]
> 2006-09-05 22:18:40,485 INFO  http.SocketListener (SocketListener.java:start(204)) - Started SocketListener on 0.0.0.0:50070
> 2006-09-05 22:18:40,487 INFO  util.Container (Container.java:start(74)) - Started org.mortbay.jetty.Server@1b09468
> Exception in thread "main" java.lang.RuntimeException: java.lang.IllegalAccessException: Class org.apache.hadoop.io.WritableFactories can not access a member of class org.apache.hadoop.dfs.Block with modifiers "public"
>         at org.apache.hadoop.io.WritableFactories.newInstance(WritableFactories.java:49)
>         at org.apache.hadoop.io.ArrayWritable.readFields(ArrayWritable.java:81)
>         at org.apache.hadoop.dfs.FSEditLog.loadFSEdits(FSEditLog.java:134)
>         at org.apache.hadoop.dfs.FSImage.loadFSImage(FSImage.java:157)
>         at org.apache.hadoop.dfs.FSDirectory.loadFSImage(FSDirectory.java:317)
>         at org.apache.hadoop.dfs.FSNamesystem.<init>(FSNamesystem.java:199)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:132)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:123)
>         at org.apache.hadoop.dfs.NameNode.main(NameNode.java:543)
> Caused by: java.lang.IllegalAccessException: Class org.apache.hadoop.io.WritableFactories can not access a member of class org.apache.hadoop.dfs.Block with modifiers "public"
>         at sun.reflect.Reflection.ensureMemberAccess(Reflection.java:65)
>         at java.lang.Class.newInstance0(Class.java:344)
>         at java.lang.Class.newInstance(Class.java:303)
>         at org.apache.hadoop.io.WritableFactories.newInstance(WritableFactories.java:45)
>         ... 8 more
> Steps to reproduce:
> 1. Start namenode/datanode
> 2. Run hdfs_test program (part of libhdfs)
> 3. Stop namenode/datanode
> 4. goto step 1

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep  5 17:39:57 2006
Return-Path: 
 <hadoop-dev-return-3548-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10944 invoked from network); 5 Sep 2006 17:39:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Sep 2006 17:39:57 -0000
Received: (qmail 50235 invoked by uid 500); 5 Sep 2006 17:39:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 50214 invoked by uid 500); 5 Sep 2006 17:39:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 50205 invoked by uid 99); 5 Sep 2006 17:39:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 10:39:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 10:39:54 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F187771431A
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Sep 2006 17:36:24 +0000 (GMT)
Message-ID: <9653042.1157477784986.JavaMail.jira@brutus>
Date: Tue, 5 Sep 2006 10:36:24 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-507) Runtime exception in
 org.apache.hadoop.io.WritableFactories.newInstance when trying to startup
 namenode/datanode
In-Reply-To: <17811210.1157476164472.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-507?page=all ]

Owen O'Malley updated HADOOP-507:
---------------------------------

           Status: Patch Available  (was: Open)
    Fix Version/s: 0.6.0

> Runtime exception in org.apache.hadoop.io.WritableFactories.newInstance when trying to startup namenode/datanode
> ----------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-507
>                 URL: http://issues.apache.org/jira/browse/HADOOP-507
>             Project: Hadoop
>          Issue Type: Bug
>          Components: util
>    Affects Versions: 0.5.0
>            Reporter: Arun C Murthy
>         Assigned To: Owen O'Malley
>             Fix For: 0.6.0
>
>         Attachments: write-factory.patch
>
>
> Here's the logs:
> arun@neo ~/dev/java/latest-hadoop/trunk $ cat /home/arun/dev/java/hadoop-0.4.0/build/libhdfs/tests/logs/hadoop-arun-namenode-neo.out
> 2006-09-05 22:18:39,756 INFO  conf.Configuration (Configuration.java:loadResource(496)) - parsing file:/home/arun/dev/java/hadoop-0.4.0/src/c++/libhdfs/tests/conf/hadoop-default.xml
> 2006-09-05 22:18:39,804 INFO  conf.Configuration (Configuration.java:loadResource(496)) - parsing file:/home/arun/dev/java/hadoop-0.4.0/src/c++/libhdfs/tests/conf/hadoop-site.xml
> 2006-09-05 22:18:39,918 INFO  util.Credential (FileResource.java:<clinit>(60)) - Checking Resource aliases
> 2006-09-05 22:18:39,935 INFO  http.HttpServer (HttpServer.java:doStart(729)) - Version Jetty/5.1.4
> 2006-09-05 22:18:40,366 INFO  util.Container (Container.java:start(74)) - Started org.mortbay.jetty.servlet.WebApplicationHandler@1171b26
> 2006-09-05 22:18:40,478 INFO  util.Container (Container.java:start(74)) - Started WebApplicationContext[/,/]
> 2006-09-05 22:18:40,478 INFO  util.Container (Container.java:start(74)) - Started HttpContext[/logs,/logs]
> 2006-09-05 22:18:40,479 INFO  util.Container (Container.java:start(74)) - Started HttpContext[/static,/static]
> 2006-09-05 22:18:40,485 INFO  http.SocketListener (SocketListener.java:start(204)) - Started SocketListener on 0.0.0.0:50070
> 2006-09-05 22:18:40,487 INFO  util.Container (Container.java:start(74)) - Started org.mortbay.jetty.Server@1b09468
> Exception in thread "main" java.lang.RuntimeException: java.lang.IllegalAccessException: Class org.apache.hadoop.io.WritableFactories can not access a member of class org.apache.hadoop.dfs.Block with modifiers "public"
>         at org.apache.hadoop.io.WritableFactories.newInstance(WritableFactories.java:49)
>         at org.apache.hadoop.io.ArrayWritable.readFields(ArrayWritable.java:81)
>         at org.apache.hadoop.dfs.FSEditLog.loadFSEdits(FSEditLog.java:134)
>         at org.apache.hadoop.dfs.FSImage.loadFSImage(FSImage.java:157)
>         at org.apache.hadoop.dfs.FSDirectory.loadFSImage(FSDirectory.java:317)
>         at org.apache.hadoop.dfs.FSNamesystem.<init>(FSNamesystem.java:199)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:132)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:123)
>         at org.apache.hadoop.dfs.NameNode.main(NameNode.java:543)
> Caused by: java.lang.IllegalAccessException: Class org.apache.hadoop.io.WritableFactories can not access a member of class org.apache.hadoop.dfs.Block with modifiers "public"
>         at sun.reflect.Reflection.ensureMemberAccess(Reflection.java:65)
>         at java.lang.Class.newInstance0(Class.java:344)
>         at java.lang.Class.newInstance(Class.java:303)
>         at org.apache.hadoop.io.WritableFactories.newInstance(WritableFactories.java:45)
>         ... 8 more
> Steps to reproduce:
> 1. Start namenode/datanode
> 2. Run hdfs_test program (part of libhdfs)
> 3. Stop namenode/datanode
> 4. goto step 1

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep  5 18:11:59 2006
Return-Path: 
 <hadoop-dev-return-3549-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17181 invoked from network); 5 Sep 2006 18:11:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Sep 2006 18:11:59 -0000
Received: (qmail 4147 invoked by uid 500); 5 Sep 2006 18:11:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3973 invoked by uid 500); 5 Sep 2006 18:11:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3964 invoked by uid 99); 5 Sep 2006 18:11:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 11:11:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 11:11:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9EB3D410011
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Sep 2006 18:08:23 +0000 (GMT)
Message-ID: <13256182.1157479703646.JavaMail.jira@brutus>
Date: Tue, 5 Sep 2006 11:08:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-497) DataNodes and TaskTrackers should be
 able to report hostnames and ips relative to customizable network
 interfaces and nameservers
In-Reply-To: <3331836.1156991602375.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-497?page=comments#action_12432643 ] 
            
Doug Cutting commented on HADOOP-497:
-------------------------------------

Do we really think we'll want to configure these separately for the tasktracker and datanode?  If so, then these properties should probably be named something like mapred.tasktracker.dns.interface, and grouped with mapred & dfs options.

> DataNodes and TaskTrackers should be able to report hostnames and ips relative to customizable network interfaces and nameservers
> ---------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-497
>                 URL: http://issues.apache.org/jira/browse/HADOOP-497
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs, mapred, util
>    Affects Versions: 0.6.0
>            Reporter: Lorenzo Thione
>            Priority: Minor
>         Attachments: dnsjava-2.0.2.jar, net-dns.patch, nif-utils.patch
>
>
> This patch allows for network configuration parameters to be aded to the hadoop-site.xml file. These parameters specify a network interface name and an optional nameserver hostname which DataNodes and TaskTrackers consult to resolve  their hostnames from the IP bound to the specified network interface.
> This is useful when machines that are part of different physical or logical network need to participate in hadoop clusters as client nodes. The hostname and IP reported by InetAddress.getLocalHost() are not necessarily the ones that will allow the JobTracker and NameNode to reach the clients, as well as not necessarily the ones through which the DFS clients can reach the DataNodes.
> The configuration parameters are
>  - cluster.report.nif
>  - cluster.report.ns
> nif: takes the name of a network interface, like en0, en1 (on macs), eth0, etc...
> ns: the host name of a DNS server to use when resolving the IP bound to the specified nif
> These parameters are set by default to the value "default" which will replicate the current behavior of reporting InetAddress.getLocalHost().getHostName() and getHostAddress()
> As part of the patch, a new library dnsjava was added along with its license information (BSD license). The list of affected files is:
> src
>  org.apache.hadoop.dfs.DataNode 
>  org.apache.hadoop.mapred.taskTracker 
>  org.apache.hadoop.util.NetworkUtils
> conf
>  hadoop-default.xml
> lib
>  dnsjava-2.0.2.jar
>  dnsjava-2.0.2.LICENSE.txt

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep  5 18:32:54 2006
Return-Path: 
 <hadoop-dev-return-3550-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 21755 invoked from network); 5 Sep 2006 18:32:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Sep 2006 18:32:54 -0000
Received: (qmail 31831 invoked by uid 500); 5 Sep 2006 18:32:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 31810 invoked by uid 500); 5 Sep 2006 18:32:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31798 invoked by uid 99); 5 Sep 2006 18:32:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 11:32:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 11:32:52 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 527F941000E
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Sep 2006 18:29:23 +0000 (GMT)
Message-ID: <14392891.1157480963335.JavaMail.jira@brutus>
Date: Tue, 5 Sep 2006 11:29:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-481) Hadoop mapred metrics should include
 per job input/output statistics rather than per-task statistics
In-Reply-To: <4146022.1156462775151.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-481?page=comments#action_12432647 ] 
            
Doug Cutting commented on HADOOP-481:
-------------------------------------

Shouldn't we use our existing metrics API for stuff like this?  As with HADOOP-492, it seems like the TaskTracker and JobTracker should implement the MetricsContext API, providing a MetricsRecord factory.  These can be used by the MapReduce kernel code for the metrics desired here, and in supplied to user code the uses in HADOOP-492.

We might even need to write a multiplexing MetricsContext, that can send metrics to both the JobTracker and to, e.g., Ganglia.  But we should not be adding new metrics APIs when we already have one.  If the current metrics API is somehow inappropriate, let's fix that instead of create another.

> Hadoop mapred metrics should include per job input/output statistics rather than per-task statistics
> ----------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-481
>                 URL: http://issues.apache.org/jira/browse/HADOOP-481
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred, metrics
>    Affects Versions: 0.6.0
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>            Priority: Minor
>             Fix For: 0.6.0
>
>         Attachments: reports.patch
>
>
> Currently hadoop reports metrics such as input bytes, input records, etc on per-task basis. Accurate aggregation of these metrics is required at the job-level and reporting should be done on a per-job basis.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep  5 18:54:54 2006
Return-Path: 
 <hadoop-dev-return-3551-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 26305 invoked from network); 5 Sep 2006 18:54:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Sep 2006 18:54:54 -0000
Received: (qmail 60265 invoked by uid 500); 5 Sep 2006 18:54:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 60251 invoked by uid 500); 5 Sep 2006 18:54:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 60241 invoked by uid 99); 5 Sep 2006 18:54:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 11:54:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 11:54:53 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A4CF67142F8
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Sep 2006 18:51:23 +0000 (GMT)
Message-ID: <16404726.1157482283672.JavaMail.jira@brutus>
Date: Tue, 5 Sep 2006 11:51:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-502) Summer buffer overflow exception
In-Reply-To: <292644.1157133983939.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-502?page=comments#action_12432651 ] 
            
Doug Cutting commented on HADOOP-502:
-------------------------------------

To be clear, currently we ignore errors processing checksums (checksum file not found, too short, timeouts while reading, etc.) so that the checksum system only throws user-visible exceptions when data is known to be corrupt.  You're proposing we change this so that, if the checksum file is there, then we may throw user-visible exceptions for errors processing the checksum data (like unexpected eof).  Is that right, or are you proposing something else?

> Summer buffer overflow exception
> --------------------------------
>
>                 Key: HADOOP-502
>                 URL: http://issues.apache.org/jira/browse/HADOOP-502
>             Project: Hadoop
>          Issue Type: Bug
>          Components: fs
>    Affects Versions: 0.5.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.6.0
>
>
> The extended error message with the offending values finally paid off and I was able to get the values that were causing the Summber buffer overflow exception.
> java.lang.RuntimeException: Summer buffer overflow b.len=4096, off=0, summed=512, read=2880, bytesPerSum=1, inSum=512
>         at org.apache.hadoop.fs.FSDataInputStream$Checker.read(FSDataInputStream.java:100)
>         at org.apache.hadoop.fs.FSDataInputStream$PositionCache.read(FSDataInputStream.java:170)
>         at java.io.BufferedInputStream.read1(BufferedInputStream.java:254)
>         at java.io.BufferedInputStream.read(BufferedInputStream.java:313)
>         at java.io.DataInputStream.read(DataInputStream.java:80)
>         at org.apache.hadoop.util.CopyFiles$DFSCopyFilesMapper.copy(CopyFiles.java:190)
>         at org.apache.hadoop.util.CopyFiles$DFSCopyFilesMapper.map(CopyFiles.java:391)
>         at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:46)
>         at org.apache.hadoop.mapred.MapTask.run(MapTask.java:196)
>         at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1075)
> Caused by: java.lang.ArrayIndexOutOfBoundsException
>         at java.util.zip.CRC32.update(CRC32.java:43)
>         at org.apache.hadoop.fs.FSDataInputStream$Checker.read(FSDataInputStream.java:98)
>         ... 9 more
> Tracking through the code, what happens is inside of FSDataInputStream.Checker.read() the verifySum gets an  EOF Exception and turns off the summing. Among other things this sets the bytesPerSum to 1. Unfortunately, that leads to the ArrayIndexOutOfBoundsException.
> I think the problem is that the original EOF exception was logged and ignored. I propose that we allow the original EOF to propagate back to the caller. (So that file not found will still disable the checksum checking, but we will detect truncated checksum files.)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep  5 19:14:59 2006
Return-Path: 
 <hadoop-dev-return-3553-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32895 invoked from network); 5 Sep 2006 19:14:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Sep 2006 19:14:59 -0000
Received: (qmail 81913 invoked by uid 500); 5 Sep 2006 19:14:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 81896 invoked by uid 500); 5 Sep 2006 19:14:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 81887 invoked by uid 99); 5 Sep 2006 19:14:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 12:14:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 12:14:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6FAA57142E8
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Sep 2006 19:11:23 +0000 (GMT)
Message-ID: <20770093.1157483483454.JavaMail.jira@brutus>
Date: Tue, 5 Sep 2006 12:11:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-501) toString(resources, sb) in
 Configuration.java throws a ClassCastException since resources can be
 loaded from an URL
In-Reply-To: <11945421.1157122942390.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-501?page=comments#action_12432655 ] 
            
Doug Cutting commented on HADOOP-501:
-------------------------------------

I just committed this.  The patch file was not properly generated (with 'svn diff' from the project root) but the change was simple enough to recreate.  Thanks, Thomas!

> toString(resources, sb) in Configuration.java throws a ClassCastException since resources can be loaded from an URL
> -------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-501
>                 URL: http://issues.apache.org/jira/browse/HADOOP-501
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.5.0
>            Reporter: Thomas FRIOL
>            Priority: Minor
>             Fix For: 0.6.0
>
>         Attachments: Configuration.java.patch
>
>
> Object obj = i.next();
> if (obj instanceof Path) {
>         sb.append((Path)obj);
> } else {
>         sb.append((String)obj);
> }
> If obj is an URL -> ClassCastException.
> Moreover, I think the test before appending the resource to the StringBuffer is not really necessary since the method take an Object as argument. Why not simply have :
> Object obj = i.next();
> sb.append(obj);
> I have attached a patch to fix this.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep  5 19:14:55 2006
Return-Path: 
 <hadoop-dev-return-3552-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32879 invoked from network); 5 Sep 2006 19:14:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Sep 2006 19:14:55 -0000
Received: (qmail 81422 invoked by uid 500); 5 Sep 2006 19:14:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 81327 invoked by uid 500); 5 Sep 2006 19:14:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 81318 invoked by uid 99); 5 Sep 2006 19:14:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 12:14:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 12:14:53 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8465B7142F8
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Sep 2006 19:11:24 +0000 (GMT)
Message-ID: <19623710.1157483484540.JavaMail.jira@brutus>
Date: Tue, 5 Sep 2006 12:11:24 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-501) toString(resources, sb) in
 Configuration.java throws a ClassCastException since resources can be
 loaded from an URL
In-Reply-To: <11945421.1157122942390.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-501?page=all ]

Doug Cutting resolved HADOOP-501.
---------------------------------

    Fix Version/s: 0.6.0
       Resolution: Fixed

> toString(resources, sb) in Configuration.java throws a ClassCastException since resources can be loaded from an URL
> -------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-501
>                 URL: http://issues.apache.org/jira/browse/HADOOP-501
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.5.0
>            Reporter: Thomas FRIOL
>            Priority: Minor
>             Fix For: 0.6.0
>
>         Attachments: Configuration.java.patch
>
>
> Object obj = i.next();
> if (obj instanceof Path) {
>         sb.append((Path)obj);
> } else {
>         sb.append((String)obj);
> }
> If obj is an URL -> ClassCastException.
> Moreover, I think the test before appending the resource to the StringBuffer is not really necessary since the method take an Object as argument. Why not simply have :
> Object obj = i.next();
> sb.append(obj);
> I have attached a patch to fix this.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep  5 19:44:00 2006
Return-Path: 
 <hadoop-dev-return-3554-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46153 invoked from network); 5 Sep 2006 19:44:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Sep 2006 19:44:00 -0000
Received: (qmail 23035 invoked by uid 500); 5 Sep 2006 19:44:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 22956 invoked by uid 500); 5 Sep 2006 19:43:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22947 invoked by uid 99); 5 Sep 2006 19:43:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 12:43:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 12:43:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2A89941001D
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Sep 2006 19:40:24 +0000 (GMT)
Message-ID: <30368034.1157485224171.JavaMail.jira@brutus>
Date: Tue, 5 Sep 2006 12:40:24 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-288) RFC: Efficient file caching
In-Reply-To: <6015694.1149730109866.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-288?page=all ]

Mahadev konar updated HADOOP-288:
---------------------------------

    Attachment: caching-4.patch

indented the patch to make it 2 spaces.

> RFC: Efficient file caching
> ---------------------------
>
>                 Key: HADOOP-288
>                 URL: http://issues.apache.org/jira/browse/HADOOP-288
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.6.0
>            Reporter: Michel Tourn
>         Assigned To: Mahadev konar
>         Attachments: caching-3.patch, caching-4.patch, caching.patch, caching.patch, test.jar, test.zip
>
>
> RFC: Efficient file caching 
> (on Hadoop Task nodes, for benefit of MapReduce Tasks)
> ------------------------------------------------------
> We will start implementing this soon. Please provide feedback and improvements to this plan.
> The header "Options:" indicates places where simple choices must be made.
> Problem:
> -------
> o MapReduce tasks require access to additional out-of-band data ("dictionaries")
> This out-of-band data is:
> o in addition to the map/reduce inputs.
> o large (1GB+)
> o broadcast (same data is required on all the Task nodes)
> o changes "infrequently", in particular:
> oo it is always constant for all the Tasks in a Job. 
> oo it is often constant for a month at a time 
> oo it may be shared across team members
> o sometimes used by pure-Java MapReduce programs
> o sometimes used by non-Java MapReduce programs (using Hadoop-Streaming)
> o (future) used by programs that use HDFS and Task-trackers but not MapReduce.
> Existing Solutions to the problem:
> ---------------------------------
> These solutions are not good enough. The present proposal is to do Sol 1 with caching.
> Sol 1: Pure Hadoop: package the out-of-band data in the MapReduce Job jar file.
> Sol 2: Non  Hadoop: for each task node run rsync from single source for data.
> Sol 3: Non  Hadoop: use BitTorrent, etc.
> Sol.1 is correct but slow for many reasons:
>  The Job submitter must recreate a large jar(tar) file for every Job.
>   (The jar contains both changing programs and stable dictionaries)
>  The large Jar file must be propagated from the client to HDFS with 
>  a large replication factor. 
>  At the beginning of every Task, the Task tracker gets the job jar from HDFS 
>  and unjars it in the working directory. This can dominate task execution time.
>  
> Sol.2 has nice properties but also some problems.
>  It does not scale well with large clusters (many concurrent rsync read requests i.e. single-source broadcast)
>  It assumes that Hadoop users can upload data using rsync to the cluster nodes. As a policy, this is not allowed.
>  It requires rsync.
>  
> Sol.3 alleviates the rsync scalability problems but 
>       It is a dependency on an external system. 
>       We want something simpler and more tightly integrated with Hadoop.
>       
> Staging (uploading) out-of-band data:
> ------------------------------------
> The out-of-band data will often originate on the local filesystem of a user machine 
>  (i.e. a MapReduce job submitter)
> Nevertheless it makes sense to use HDFS to store the original out-of-band data because:
> o HDFS has (wide) replication. This enables scalable broadcast later.
> o HDFS is an available channel to move data from clients to all task machines.
> o HDFS is convenient as a shared location among Hadoop team members.
> Accessing (downloading) out-of-band data:
> ----------------------------------------
> The non-Java MapReduce programs do not have or want[1] APIs for HDFS.
> Instead these programs just want to access out-of-band data as 
>  local files at predefined paths.
> ([1] Existing programs should be reusable with no changes. 
>  This is often possible bec. communication is over stdin/stdout.)
> Job's jar file as a special case:
> --------------------------------
> One use case is to allow users to make the job jar itself cachable.
> This is only useful in cases where NOTHING changes when a job is resubmitted
>  (no MapRed code changes and no changes in shipped data)
> This situation might occur with an 'extractor' job (gets data from an external source: like Nutch crawler)
> Currently the Hadoop mapred-jar mechanism works in this way:
>  the job jar data is unjarred in the "working directory" of the Task 
>  the jar contains both MapRed java code (added to classpath)
> Cache synchronization:
> ---------------------
> The efficient implementation of the out-of-band data distribution
> is mostly a cache synchronization problem.
> A list of the various aspects where choices must be made follows.
> Cache key:
> ---------
> How do you test that the cached copy is out-of-date?
> Options: 
> 1. the archive/file timestamp 
> 2. the MD5 of the archive/file content
> Comparing source and destination Timestamps is problematic bec. it assumes synchronized clocks.
> Also there is no last-modif metadata in HDFS (for good reasons, like scalability of metadata ops)
> Timestamps stored with the source ('last-propagate-time') do 
>  not require synchronized clocks, only locally monotonic time. 
> (and the worse which can happen at daylight-savings switch is a missed update or an extra-update)
> The cache code could store a copy of the local timestamp 
> in the same way that it caches the value of the content hash along with the source data.
>  
> Cachable unit:
> -------------
> Options: individual files or archives or both.
> Note:
> At the API level, directories will be processed recursively 
> (and the local FS directories will parallel HDFS directories)
> So bulk operations are always possible using directories.
> The question here is whether to handle archives as an additional bulk mechanism.
> Archives are special because:
> o unarchiving occurs transparently as part of the cache sync
> o The cache key is computed on the archive and preserved although 
>   the archive itself is not preserved.
> Supported archive format will be: tar (maybe tgz or compressed jar)
> Archive detection test: by filename extension ".tar" or ".jar"
> Suppose we don't handle archives as special files:
> Pros:
>  o less code, no discussion about which archive formats are supported
>  o fine for large dictionary files. And when files are not large, user may as well
>    put them in the Job jar as usual.
>  o user code could always check and unarchive specific cached files
>    (as a side-effect of MapRed task initialization)
> Cons:
>  o handling small files may be inefficient 
>   (multiple HDFS operations, multiple hash computation, 
>    one 'metadata' hash file along with each small file)
>  o It will not be possible to handle the Job's jar file as a special case of caching 
> Cache isolation: 
> ---------------
> In some cases it may be a problem if the cached HDFS files are updated while a Job is in progress:
> The file may become unavailable for a short period of time and some tasks fail.
> The file may change (atomically) and different tasks use a different version.
> This isolation problem is not addressed in this proposal.
> Standard solutions to the isolation problem are:
> o Assume that Jobs and interfering cache updates won't occur concurrently.
> o Put a version number in the HDFS file paths and refer to a hard-coded version in the Job code.
> o Before running the MapRed job, run a non-distributed application that tests
>   what is the latest available version of the out-of-band data. 
>   Then make this version available to the MapRed job.
>   Two ways to do this. 
>   o either set a job property just-in-time:
>     addCachePathPair("/mydata/v1234/", "localcache/mydata_latest"); 
>     (see Job Configuration for meaning of this)
>   o or publish the decision as an HDFS file containing the version.
>     then rely on user code to read the version, and manually populate the cache:
>     Cache.syncCache("/hdfs/path/fileordir", "relative/local/fileordir");
>     (see MapReduce API for meaning of this)
> Cache synchronization stages:
> ----------------------------
> There are two stages: Client-to-HDFS and HDFS-to-TaskTracker
> o Client-to-HDFS stage.
> Options: A simple option is to not do anything here, i.e. rely on the user.
> This is a reasonable option given previous remarks on the role of HDFS:
>  HDFS is a staging/publishing area and a natural shared location.
> In particular this means that the system need not track 
> where the client files come from.
> o HDFS-to-TaskTracker:
> Client-to-HDFS synchronization (if done at all) should happen before this.
> Then HDFS-to-TaskTracker synchronization must happen right before 
> the data is needed on a node.
> MapReduce cache API:
> -------------------
> Options:
> 1. No change in MapReduce framework code:
> require the user to put this logic in map() (or reduce) function:
>  in MyMapper constructor (or in map() on first record) user is asked to add:
>  
>     Cache.syncCache("/hdfs/path/fileordir", "relative/local/fileordir");
>     Cache.syncCache("..."); //etc.
>   
> -----
> 2. Put this logic in MapReduce framework and use Job properties to
>    communicate the list of pairs (hdfs path; local path)
>  
> Directories are processed recursively.
> If archives are treated specially then they are unarchived on destination.
>  
> MapReduce Job Configuration:
> ---------------------------
> Options:
> with No change in MapReduce framework code (see above)
>  no special Job configuration: 
>    it is up to the MapRed writer to configure and run the cache operations.
> ---
> with Logic in MapReduce framework (see above)
>  some simple Job configuration
> JobConf.addCachePathPair(String, String)
> JobConf.addCachePathPair("/hdfs/path/fileordir", "relative/local/fileordir");

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep  5 20:51:55 2006
Return-Path: 
 <hadoop-dev-return-3555-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 65940 invoked from network); 5 Sep 2006 20:51:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Sep 2006 20:51:55 -0000
Received: (qmail 26436 invoked by uid 500); 5 Sep 2006 20:51:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26408 invoked by uid 500); 5 Sep 2006 20:51:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26399 invoked by uid 99); 5 Sep 2006 20:51:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 13:51:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 13:51:54 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8CFB1410022
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Sep 2006 20:48:24 +0000 (GMT)
Message-ID: <16646446.1157489304574.JavaMail.jira@brutus>
Date: Tue, 5 Sep 2006 13:48:24 -0700 (PDT)
From: "Christian Kunz (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-508) random seeks using FSDataInputStream
 can become invalid such that reads return invalid data
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

random seeks using FSDataInputStream can become invalid such that reads return invalid data 
--------------------------------------------------------------------------------------------

                 Key: HADOOP-508
                 URL: http://issues.apache.org/jira/browse/HADOOP-508
             Project: Hadoop
          Issue Type: Bug
    Affects Versions: 0.5.0
            Reporter: Christian Kunz


Some of my applications using Hadoop DFS  receive wrong data after certain random seeks. After some investigation I believe (without looking at source code of java.io.BufferedInputStream) that it basically boils down to the fact that the method 
read(byte[] b, int off, int len), when called with an external buffer larger than the internal buffer, reads into the external buffer directly without using the internal buffer anymore, but without invalidating the internal buffer by setting the variable 'count' to 0 such that a subsequent seek to an offset which is closer to the 'position' of the Positioncache than the internal buffersize will put the current position into the internal buffer containing outdated data from somewhere else.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep  5 20:57:54 2006
Return-Path: 
 <hadoop-dev-return-3556-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68173 invoked from network); 5 Sep 2006 20:57:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Sep 2006 20:57:54 -0000
Received: (qmail 39002 invoked by uid 500); 5 Sep 2006 20:57:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38818 invoked by uid 500); 5 Sep 2006 20:57:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38809 invoked by uid 99); 5 Sep 2006 20:57:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 13:57:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 13:57:52 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 46ECB71431A
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Sep 2006 20:54:23 +0000 (GMT)
Message-ID: <30668404.1157489663287.JavaMail.jira@brutus>
Date: Tue, 5 Sep 2006 13:54:23 -0700 (PDT)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-414) replace class UTF8 with class Text
In-Reply-To: <26221885.1154481854253.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-414?page=comments#action_12432673 ] 
            
Hairong Kuang commented on HADOOP-414:
--------------------------------------

Only versioning file formats and RPC protocols does not completely solve the problem, for example, when a Writable class contains a field of String. Because the field is deserialied by readField and readField does not have the version information, so we have no way to find out if we should use UTF8.readString or Text.readString. I guess either we should support Writable versioning or support a method readField(DataInput in, int version).

> replace class UTF8 with class Text
> ----------------------------------
>
>                 Key: HADOOP-414
>                 URL: http://issues.apache.org/jira/browse/HADOOP-414
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.5.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.6.0
>
>         Attachments: utf2text.patch
>
>
> Since class UTF8 is deprecated, all references of UTF8 in hadoop should be replaced with class Text if the change does not break the system. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep  5 21:00:54 2006
Return-Path: 
 <hadoop-dev-return-3557-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 69403 invoked from network); 5 Sep 2006 21:00:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Sep 2006 21:00:54 -0000
Received: (qmail 43200 invoked by uid 500); 5 Sep 2006 21:00:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 43013 invoked by uid 500); 5 Sep 2006 21:00:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 43004 invoked by uid 99); 5 Sep 2006 21:00:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 14:00:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 14:00:53 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CB4E971431C
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Sep 2006 20:57:23 +0000 (GMT)
Message-ID: <20015665.1157489843830.JavaMail.jira@brutus>
Date: Tue, 5 Sep 2006 13:57:23 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-263) task status should include
 timestamps for when a job transitions
In-Reply-To: <6879018.1149102869840.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-263?page=comments#action_12432674 ] 
            
Owen O'Malley commented on HADOOP-263:
--------------------------------------

A couple more things:
  1. You don't have javadoc on the public methods in TaskStatus.
  2. For the task details you should always have at least one result, so just test for that case explicitly and put a message about "no task attempts found". Please remove the new type parameter.
  3. Can we factor some more of the duplicated code in the jsp into a single instance?

> task status should include timestamps for when a job transitions
> ----------------------------------------------------------------
>
>                 Key: HADOOP-263
>                 URL: http://issues.apache.org/jira/browse/HADOOP-263
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.2.1
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.6.0
>
>         Attachments: Hadoop-263.patch, patch.txt, patch.txt, patch.txt, patch.txt
>
>
> It would help users to understand what happened if the task status included information about when the task transitioned:
> Map:
>    started
>    finished
> Reduce:
>    started
>    shuffle finished
>    sort finished
>    finished

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep  5 21:24:55 2006
Return-Path: 
 <hadoop-dev-return-3558-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 79660 invoked from network); 5 Sep 2006 21:24:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Sep 2006 21:24:55 -0000
Received: (qmail 80622 invoked by uid 500); 5 Sep 2006 21:24:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 80597 invoked by uid 500); 5 Sep 2006 21:24:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 80588 invoked by uid 99); 5 Sep 2006 21:24:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 14:24:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 14:24:52 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5C2A2410011
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Sep 2006 21:21:23 +0000 (GMT)
Message-ID: <2180562.1157491283374.JavaMail.jira@brutus>
Date: Tue, 5 Sep 2006 14:21:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-312) Connections should not be cached
In-Reply-To: <13061881.1150916131961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-312?page=comments#action_12432679 ] 
            
Doug Cutting commented on HADOOP-312:
-------------------------------------

You're right, Client.running is inapproprate for this use, and the culler does in fact remove connections (not sure how I missed that).

Re modes: right now there are three modes, each with some separate logic: full-caching, timed caching, and no caching.  It would simplify the logic (and hence ease testing and increase reliability) if there were only one mode.  Otherwise, we should add unit tests for all modes.  But the timed cache seems fairly universal.  Setting the timeout to Integer.MAX_VALUE gives full-caching, while setting it to zero could cause most connections to terminate after a single request (although, if some get reused, that should not cause problems).  The default should be a fairly short timeout, so that some kinds of requests will reuse cached connections and some will create new connections per request.  This way the default configuration will test all of the code.  I do not like having modes that might be useful but are not regularly used, since they'll not be tested and may stop working and then generate bugs.

> Are you saying that we should remove "if (isCachingDisabled)" and instead have the corresponding logic work under "if (maxIdleTime == 0)" ? 

I don't think we should have either.  MaxIdleTime==0 is simply a very short idle time.  The culler thread should have a minimum sleep time so that it doesn't busywait.

> Connections should not be cached
> --------------------------------
>
>                 Key: HADOOP-312
>                 URL: http://issues.apache.org/jira/browse/HADOOP-312
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: ipc
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_connection_caching.patch, no_connection_caching.patch
>
>
> Servers and clients (client include datanodes, tasktrackers, DFSClients & tasks) should not cache connections or maybe cache them for very short periods of time. Clients should set up & tear down connections to the servers everytime they need to contact the servers (including the heartbeats). If connection is cached, then reuse the existing connection for a few subsequent transactions until the connection expires. The heartbeat interval should be more so that many more clients (order of  tens of thousands) can be accomodated within 1 heartbeat interval.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep  5 21:30:54 2006
Return-Path: 
 <hadoop-dev-return-3559-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 81027 invoked from network); 5 Sep 2006 21:30:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Sep 2006 21:30:54 -0000
Received: (qmail 87721 invoked by uid 500); 5 Sep 2006 21:30:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 87706 invoked by uid 500); 5 Sep 2006 21:30:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 87697 invoked by uid 99); 5 Sep 2006 21:30:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 14:30:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 14:30:52 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4D30241000E
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Sep 2006 21:27:23 +0000 (GMT)
Message-ID: <19840061.1157491643313.JavaMail.jira@brutus>
Date: Tue, 5 Sep 2006 14:27:23 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-508) random seeks using FSDataInputStream
 can become invalid such that reads return invalid data
In-Reply-To: <16646446.1157489304574.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-508?page=all ]

Yoram Arnon updated HADOOP-508:
-------------------------------

    Component/s: dfs

> random seeks using FSDataInputStream can become invalid such that reads return invalid data
> -------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-508
>                 URL: http://issues.apache.org/jira/browse/HADOOP-508
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Christian Kunz
>
> Some of my applications using Hadoop DFS  receive wrong data after certain random seeks. After some investigation I believe (without looking at source code of java.io.BufferedInputStream) that it basically boils down to the fact that the method 
> read(byte[] b, int off, int len), when called with an external buffer larger than the internal buffer, reads into the external buffer directly without using the internal buffer anymore, but without invalidating the internal buffer by setting the variable 'count' to 0 such that a subsequent seek to an offset which is closer to the 'position' of the Positioncache than the internal buffersize will put the current position into the internal buffer containing outdated data from somewhere else.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep  5 21:44:54 2006
Return-Path: 
 <hadoop-dev-return-3560-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85598 invoked from network); 5 Sep 2006 21:44:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Sep 2006 21:44:54 -0000
Received: (qmail 6964 invoked by uid 500); 5 Sep 2006 21:44:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 6940 invoked by uid 500); 5 Sep 2006 21:44:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 6931 invoked by uid 99); 5 Sep 2006 21:44:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 14:44:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 14:44:53 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8CBF241000E
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Sep 2006 21:41:23 +0000 (GMT)
Message-ID: <20753539.1157492483573.JavaMail.jira@brutus>
Date: Tue, 5 Sep 2006 14:41:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-414) replace class UTF8 with class Text
In-Reply-To: <26221885.1154481854253.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-414?page=comments#action_12432680 ] 
            
Doug Cutting commented on HADOOP-414:
-------------------------------------

We seem to be talking at cross purposes.  Are we still talking about the patch attached to this bug?  Of course, if one changes a Writable from using UTF8 to Text, and makes no other changes, then one will have problems reading old data and/or with protocol compatibility.  Folks who wish to be able to do things like this in user data should use VersionedWritable.  But the question I was raising was about migrating internal uses of UTF8 to Text.  For most of those, incrementing protocol version numbers and container format version numbers will suffice.  The only exception I know of is the one I discussed above, namely the names of parameter classes used in RPC.  That's the issue I was trying to raise here, not the general issue of version compatiblity for Writable.

Users who have data files that use UTF8 may wish to upgrade their data to use Text.  That's outside the scope of this bug, I think.  Here we should be concerned with replacing internal uses.

> replace class UTF8 with class Text
> ----------------------------------
>
>                 Key: HADOOP-414
>                 URL: http://issues.apache.org/jira/browse/HADOOP-414
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.5.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.6.0
>
>         Attachments: utf2text.patch
>
>
> Since class UTF8 is deprecated, all references of UTF8 in hadoop should be replaced with class Text if the change does not break the system. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep  5 21:56:54 2006
Return-Path: 
 <hadoop-dev-return-3561-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 89149 invoked from network); 5 Sep 2006 21:56:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Sep 2006 21:56:54 -0000
Received: (qmail 26119 invoked by uid 500); 5 Sep 2006 21:56:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26096 invoked by uid 500); 5 Sep 2006 21:56:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26087 invoked by uid 99); 5 Sep 2006 21:56:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 14:56:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 14:56:52 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4079441000E
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Sep 2006 21:53:23 +0000 (GMT)
Message-ID: <21749990.1157493203261.JavaMail.jira@brutus>
Date: Tue, 5 Sep 2006 14:53:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-499) Avoid the use of Strings to improve
 the  performance of hadoop streaming
In-Reply-To: <17866592.1157058563504.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-499?page=all ]

Doug Cutting resolved HADOOP-499.
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Hairong!

> Avoid the use of Strings to improve the  performance of hadoop streaming
> ------------------------------------------------------------------------
>
>                 Key: HADOOP-499
>                 URL: http://issues.apache.org/jira/browse/HADOOP-499
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: contrib/streaming
>    Affects Versions: 0.5.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.6.0
>
>         Attachments: text_streaming.patch
>
>
> In hadoop streaming, a record is represented as a String for  I/O and is encoded as UTF8 for map/reduce. A record has to be converted between String and UTF8 back and forth multiple times and  this wastes CPU time. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep  5 22:20:05 2006
Return-Path: 
 <hadoop-dev-return-3562-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93179 invoked from network); 5 Sep 2006 22:20:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Sep 2006 22:20:05 -0000
Received: (qmail 45513 invoked by uid 500); 5 Sep 2006 22:20:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 45330 invoked by uid 500); 5 Sep 2006 22:20:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 45321 invoked by uid 99); 5 Sep 2006 22:20:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 15:20:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 15:20:04 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9A32C41000E
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Sep 2006 22:16:24 +0000 (GMT)
Message-ID: <20171313.1157494584627.JavaMail.jira@brutus>
Date: Tue, 5 Sep 2006 15:16:24 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-64) DataNode should be capable of managing
 multiple volumes
In-Reply-To: <96561968.1141686362086.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-64?page=all ]

Doug Cutting updated HADOOP-64:
-------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Milind!

> DataNode should be capable of managing multiple volumes
> -------------------------------------------------------
>
>                 Key: HADOOP-64
>                 URL: http://issues.apache.org/jira/browse/HADOOP-64
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.2.0
>            Reporter: Sameer Paranjpye
>         Assigned To: Milind Bhandarkar
>            Priority: Minor
>             Fix For: 0.6.0
>
>         Attachments: multiple-volumes.patch
>
>
> The dfs Datanode can only store data on a single filesystem volume. When a node runs its disks JBOD this means running a Datanode per disk on the machine. While the scheme works reasonably well on small clusters, on larger installations (several 100 nodes) it implies a very large number of Datanodes with associated management overhead in the Namenode.
> The Datanod should be enhanced to be able to handle multiple volumes on a single machine.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep  5 22:21:55 2006
Return-Path: 
 <hadoop-dev-return-3563-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93596 invoked from network); 5 Sep 2006 22:21:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Sep 2006 22:21:55 -0000
Received: (qmail 49231 invoked by uid 500); 5 Sep 2006 22:21:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49049 invoked by uid 500); 5 Sep 2006 22:21:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49034 invoked by uid 99); 5 Sep 2006 22:21:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 15:21:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 15:21:54 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 921BE410017
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Sep 2006 22:18:24 +0000 (GMT)
Message-ID: <33184828.1157494704595.JavaMail.jira@brutus>
Date: Tue, 5 Sep 2006 15:18:24 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-64) DataNode should be capable of
 managing multiple volumes
In-Reply-To: <96561968.1141686362086.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-64?page=comments#action_12432684 ] 
            
Doug Cutting commented on HADOOP-64:
------------------------------------

I forgot to name the bug in the commit message.  So, for the record, the commit was:
  http://svn.apache.org/viewvc?view=rev&revision=440508

> DataNode should be capable of managing multiple volumes
> -------------------------------------------------------
>
>                 Key: HADOOP-64
>                 URL: http://issues.apache.org/jira/browse/HADOOP-64
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.2.0
>            Reporter: Sameer Paranjpye
>         Assigned To: Milind Bhandarkar
>            Priority: Minor
>             Fix For: 0.6.0
>
>         Attachments: multiple-volumes.patch
>
>
> The dfs Datanode can only store data on a single filesystem volume. When a node runs its disks JBOD this means running a Datanode per disk on the machine. While the scheme works reasonably well on small clusters, on larger installations (several 100 nodes) it implies a very large number of Datanodes with associated management overhead in the Namenode.
> The Datanod should be enhanced to be able to handle multiple volumes on a single machine.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep  5 22:25:55 2006
Return-Path: 
 <hadoop-dev-return-3564-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 95441 invoked from network); 5 Sep 2006 22:25:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Sep 2006 22:25:55 -0000
Received: (qmail 55050 invoked by uid 500); 5 Sep 2006 22:25:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55025 invoked by uid 500); 5 Sep 2006 22:25:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55016 invoked by uid 99); 5 Sep 2006 22:25:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 15:25:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 15:25:53 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 20A8A410011
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Sep 2006 22:22:24 +0000 (GMT)
Message-ID: <17027051.1157494944131.JavaMail.jira@brutus>
Date: Tue, 5 Sep 2006 15:22:24 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-288) RFC: Efficient file caching
In-Reply-To: <6015694.1149730109866.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-288?page=comments#action_12432685 ] 
            
Mahadev konar commented on HADOOP-288:
--------------------------------------

about setcacheFiles(), we could add a addcacheFIles though I have not done it in the patch. Also, we are using URI's (dfs://hostname:port/path) so I dont think we should be using paths instead of strings.

> RFC: Efficient file caching
> ---------------------------
>
>                 Key: HADOOP-288
>                 URL: http://issues.apache.org/jira/browse/HADOOP-288
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.6.0
>            Reporter: Michel Tourn
>         Assigned To: Mahadev konar
>         Attachments: caching-3.patch, caching-4.patch, caching.patch, caching.patch, test.jar, test.zip
>
>
> RFC: Efficient file caching 
> (on Hadoop Task nodes, for benefit of MapReduce Tasks)
> ------------------------------------------------------
> We will start implementing this soon. Please provide feedback and improvements to this plan.
> The header "Options:" indicates places where simple choices must be made.
> Problem:
> -------
> o MapReduce tasks require access to additional out-of-band data ("dictionaries")
> This out-of-band data is:
> o in addition to the map/reduce inputs.
> o large (1GB+)
> o broadcast (same data is required on all the Task nodes)
> o changes "infrequently", in particular:
> oo it is always constant for all the Tasks in a Job. 
> oo it is often constant for a month at a time 
> oo it may be shared across team members
> o sometimes used by pure-Java MapReduce programs
> o sometimes used by non-Java MapReduce programs (using Hadoop-Streaming)
> o (future) used by programs that use HDFS and Task-trackers but not MapReduce.
> Existing Solutions to the problem:
> ---------------------------------
> These solutions are not good enough. The present proposal is to do Sol 1 with caching.
> Sol 1: Pure Hadoop: package the out-of-band data in the MapReduce Job jar file.
> Sol 2: Non  Hadoop: for each task node run rsync from single source for data.
> Sol 3: Non  Hadoop: use BitTorrent, etc.
> Sol.1 is correct but slow for many reasons:
>  The Job submitter must recreate a large jar(tar) file for every Job.
>   (The jar contains both changing programs and stable dictionaries)
>  The large Jar file must be propagated from the client to HDFS with 
>  a large replication factor. 
>  At the beginning of every Task, the Task tracker gets the job jar from HDFS 
>  and unjars it in the working directory. This can dominate task execution time.
>  
> Sol.2 has nice properties but also some problems.
>  It does not scale well with large clusters (many concurrent rsync read requests i.e. single-source broadcast)
>  It assumes that Hadoop users can upload data using rsync to the cluster nodes. As a policy, this is not allowed.
>  It requires rsync.
>  
> Sol.3 alleviates the rsync scalability problems but 
>       It is a dependency on an external system. 
>       We want something simpler and more tightly integrated with Hadoop.
>       
> Staging (uploading) out-of-band data:
> ------------------------------------
> The out-of-band data will often originate on the local filesystem of a user machine 
>  (i.e. a MapReduce job submitter)
> Nevertheless it makes sense to use HDFS to store the original out-of-band data because:
> o HDFS has (wide) replication. This enables scalable broadcast later.
> o HDFS is an available channel to move data from clients to all task machines.
> o HDFS is convenient as a shared location among Hadoop team members.
> Accessing (downloading) out-of-band data:
> ----------------------------------------
> The non-Java MapReduce programs do not have or want[1] APIs for HDFS.
> Instead these programs just want to access out-of-band data as 
>  local files at predefined paths.
> ([1] Existing programs should be reusable with no changes. 
>  This is often possible bec. communication is over stdin/stdout.)
> Job's jar file as a special case:
> --------------------------------
> One use case is to allow users to make the job jar itself cachable.
> This is only useful in cases where NOTHING changes when a job is resubmitted
>  (no MapRed code changes and no changes in shipped data)
> This situation might occur with an 'extractor' job (gets data from an external source: like Nutch crawler)
> Currently the Hadoop mapred-jar mechanism works in this way:
>  the job jar data is unjarred in the "working directory" of the Task 
>  the jar contains both MapRed java code (added to classpath)
> Cache synchronization:
> ---------------------
> The efficient implementation of the out-of-band data distribution
> is mostly a cache synchronization problem.
> A list of the various aspects where choices must be made follows.
> Cache key:
> ---------
> How do you test that the cached copy is out-of-date?
> Options: 
> 1. the archive/file timestamp 
> 2. the MD5 of the archive/file content
> Comparing source and destination Timestamps is problematic bec. it assumes synchronized clocks.
> Also there is no last-modif metadata in HDFS (for good reasons, like scalability of metadata ops)
> Timestamps stored with the source ('last-propagate-time') do 
>  not require synchronized clocks, only locally monotonic time. 
> (and the worse which can happen at daylight-savings switch is a missed update or an extra-update)
> The cache code could store a copy of the local timestamp 
> in the same way that it caches the value of the content hash along with the source data.
>  
> Cachable unit:
> -------------
> Options: individual files or archives or both.
> Note:
> At the API level, directories will be processed recursively 
> (and the local FS directories will parallel HDFS directories)
> So bulk operations are always possible using directories.
> The question here is whether to handle archives as an additional bulk mechanism.
> Archives are special because:
> o unarchiving occurs transparently as part of the cache sync
> o The cache key is computed on the archive and preserved although 
>   the archive itself is not preserved.
> Supported archive format will be: tar (maybe tgz or compressed jar)
> Archive detection test: by filename extension ".tar" or ".jar"
> Suppose we don't handle archives as special files:
> Pros:
>  o less code, no discussion about which archive formats are supported
>  o fine for large dictionary files. And when files are not large, user may as well
>    put them in the Job jar as usual.
>  o user code could always check and unarchive specific cached files
>    (as a side-effect of MapRed task initialization)
> Cons:
>  o handling small files may be inefficient 
>   (multiple HDFS operations, multiple hash computation, 
>    one 'metadata' hash file along with each small file)
>  o It will not be possible to handle the Job's jar file as a special case of caching 
> Cache isolation: 
> ---------------
> In some cases it may be a problem if the cached HDFS files are updated while a Job is in progress:
> The file may become unavailable for a short period of time and some tasks fail.
> The file may change (atomically) and different tasks use a different version.
> This isolation problem is not addressed in this proposal.
> Standard solutions to the isolation problem are:
> o Assume that Jobs and interfering cache updates won't occur concurrently.
> o Put a version number in the HDFS file paths and refer to a hard-coded version in the Job code.
> o Before running the MapRed job, run a non-distributed application that tests
>   what is the latest available version of the out-of-band data. 
>   Then make this version available to the MapRed job.
>   Two ways to do this. 
>   o either set a job property just-in-time:
>     addCachePathPair("/mydata/v1234/", "localcache/mydata_latest"); 
>     (see Job Configuration for meaning of this)
>   o or publish the decision as an HDFS file containing the version.
>     then rely on user code to read the version, and manually populate the cache:
>     Cache.syncCache("/hdfs/path/fileordir", "relative/local/fileordir");
>     (see MapReduce API for meaning of this)
> Cache synchronization stages:
> ----------------------------
> There are two stages: Client-to-HDFS and HDFS-to-TaskTracker
> o Client-to-HDFS stage.
> Options: A simple option is to not do anything here, i.e. rely on the user.
> This is a reasonable option given previous remarks on the role of HDFS:
>  HDFS is a staging/publishing area and a natural shared location.
> In particular this means that the system need not track 
> where the client files come from.
> o HDFS-to-TaskTracker:
> Client-to-HDFS synchronization (if done at all) should happen before this.
> Then HDFS-to-TaskTracker synchronization must happen right before 
> the data is needed on a node.
> MapReduce cache API:
> -------------------
> Options:
> 1. No change in MapReduce framework code:
> require the user to put this logic in map() (or reduce) function:
>  in MyMapper constructor (or in map() on first record) user is asked to add:
>  
>     Cache.syncCache("/hdfs/path/fileordir", "relative/local/fileordir");
>     Cache.syncCache("..."); //etc.
>   
> -----
> 2. Put this logic in MapReduce framework and use Job properties to
>    communicate the list of pairs (hdfs path; local path)
>  
> Directories are processed recursively.
> If archives are treated specially then they are unarchived on destination.
>  
> MapReduce Job Configuration:
> ---------------------------
> Options:
> with No change in MapReduce framework code (see above)
>  no special Job configuration: 
>    it is up to the MapRed writer to configure and run the cache operations.
> ---
> with Logic in MapReduce framework (see above)
>  some simple Job configuration
> JobConf.addCachePathPair(String, String)
> JobConf.addCachePathPair("/hdfs/path/fileordir", "relative/local/fileordir");

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep  5 22:42:54 2006
Return-Path: 
 <hadoop-dev-return-3565-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 97627 invoked from network); 5 Sep 2006 22:42:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Sep 2006 22:42:54 -0000
Received: (qmail 63379 invoked by uid 500); 5 Sep 2006 22:42:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63351 invoked by uid 500); 5 Sep 2006 22:42:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63342 invoked by uid 99); 5 Sep 2006 22:42:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 15:42:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 15:42:53 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5D45A714309
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Sep 2006 22:39:23 +0000 (GMT)
Message-ID: <21460579.1157495963378.JavaMail.jira@brutus>
Date: Tue, 5 Sep 2006 15:39:23 -0700 (PDT)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-414) replace class UTF8 with class Text
In-Reply-To: <26221885.1154481854253.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-414?page=comments#action_12432686 ] 
            
Hairong Kuang commented on HADOOP-414:
--------------------------------------

I was not talking about user data. Instead I was concerned about replacing data internal uses. The following is an example that illustreates my point.

When we load the edit log, if the operation name is OP_DATANODE_ADD, we need to read a DataNodeDescriptor, which is a Writable, by calling DataNodeDescriptor.readField. The class DataNodeDescriptor has a field "name" with type String. Although FSEditLog has version info, but DataNodeDescriptor does not. So the readFiied method does not know how to read the data node name, whether to use UTF8.readString or Text.readString. So either we should support Writable versioning or we need to pass version number to readField.

> replace class UTF8 with class Text
> ----------------------------------
>
>                 Key: HADOOP-414
>                 URL: http://issues.apache.org/jira/browse/HADOOP-414
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.5.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.6.0
>
>         Attachments: utf2text.patch
>
>
> Since class UTF8 is deprecated, all references of UTF8 in hadoop should be replaced with class Text if the change does not break the system. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep  5 23:25:59 2006
Return-Path: 
 <hadoop-dev-return-3566-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 6925 invoked from network); 5 Sep 2006 23:25:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Sep 2006 23:25:59 -0000
Received: (qmail 99044 invoked by uid 500); 5 Sep 2006 23:25:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 99023 invoked by uid 500); 5 Sep 2006 23:25:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 99014 invoked by uid 99); 5 Sep 2006 23:25:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 16:25:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 16:25:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4A68E410011
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Sep 2006 23:22:23 +0000 (GMT)
Message-ID: <15345204.1157498543302.JavaMail.jira@brutus>
Date: Tue, 5 Sep 2006 16:22:23 -0700 (PDT)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-320) bin/hadoop dfs -mv does not mv
  source's checksum file if source is a file
In-Reply-To: <20152082.1151017529846.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-320?page=all ]

Hairong Kuang updated HADOOP-320:
---------------------------------

    Attachment: mv.patch

Ok, figured out what went wrong. The rename method of FileSystem does try to move the checksum file, but it does not check if the destination is a directory or not. So if the dst is a directory, the src checksum file is incorrectly moved to .dst.crc not dst/.src.crc.

> bin/hadoop dfs -mv does not mv  source's checksum file if source is a file
> --------------------------------------------------------------------------
>
>                 Key: HADOOP-320
>                 URL: http://issues.apache.org/jira/browse/HADOOP-320
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.3.2
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.6.0
>
>         Attachments: mv.patch, rename.patch
>
>
> None of the rename operation of DistributedSystem or DFSClient checks if the source is a file or not. Need also to rename the checksum file accordingly if the source is a file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep  6 01:02:00 2006
Return-Path: 
 <hadoop-dev-return-3567-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 21954 invoked from network); 6 Sep 2006 01:02:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Sep 2006 01:02:00 -0000
Received: (qmail 72531 invoked by uid 500); 6 Sep 2006 01:02:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72348 invoked by uid 500); 6 Sep 2006 01:01:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72339 invoked by uid 99); 6 Sep 2006 01:01:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 18:01:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 18:01:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 096D6410017
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Sep 2006 00:58:24 +0000 (GMT)
Message-ID: <24649377.1157504304035.JavaMail.jira@brutus>
Date: Tue, 5 Sep 2006 17:58:24 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-489) Seperating user logs from system
 logs in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-489?page=comments#action_12432702 ] 
            
Mahadev konar commented on HADOOP-489:
--------------------------------------

Here's my  take on this issue.

1) Put all the user logs in 
tasktracker.log.dir/job_id.log. So there would be just one jobfile , per job on a local machine. The logs might be out of order with 2 or more task writing to the log files simultaneously, but I do not think that is a big issue. Having log files per task seems like an overkill with too many log files on local machines.

2) the user is shown all the fatal errors while executing his job on his screen.

3) The jobclient polls one of each failed, succeeded tasks to get the user logs and shows it on the screen for the user. 
  i) Why just one of each?
    So that we do not clutter the screen with all the user logs.
 ii) Why only succeeded/failed?
    This is based on providiing the user a sample of each of his tasks so that in case all of his tasks fail which might be due to his code, he gets an idea of why it failed at runtime. Though, this is definitely not really runtime since the tasks would have either failed or succeeded by the time he gets the logs., the user still can kill his job in case something is horribly wrong with his/her job.
  iii) This would entail running a servlet on each of the tasktrackers to serve up the user logs to the jobclient.

4) We can provide an extra option to the user if he wants these log files into the DFS.  This would allow tthe user to go through the logs as and when he wishes. This could be done by providing a jobconf variable, so that after each job is executed the logs are autoimatically transferred to DFS or as an command line option (which would mean creating a new protocol from jobclient -> jobtracker -> tasktrackers to put all the given jobid files into DFS).

5) These job files could be deleted on a time basis (after every 48 hrs?)
Comments?

> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>            Priority: Minor
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep  6 02:15:00 2006
Return-Path: 
 <hadoop-dev-return-3568-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 41648 invoked from network); 6 Sep 2006 02:15:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Sep 2006 02:15:00 -0000
Received: (qmail 32466 invoked by uid 500); 6 Sep 2006 02:14:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 32446 invoked by uid 500); 6 Sep 2006 02:14:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 32437 invoked by uid 99); 6 Sep 2006 02:14:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 19:14:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 19:14:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 57955410011
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Sep 2006 02:11:27 +0000 (GMT)
Message-ID: <7277723.1157508687356.JavaMail.jira@brutus>
Date: Tue, 5 Sep 2006 19:11:27 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-483) Document libhdfs and fix some OS
 specific stuff in Makefile
In-Reply-To: <20264654.1156486690133.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-483?page=all ]

Arun C Murthy updated HADOOP-483:
---------------------------------

    Attachment: libhdfs_20060906.patch

Doug,

 Here's a patch with necessary scripts etc. to automate the 'test-libhdfs' target... 

 Could you please ensure that src/c++/libhdfs/tests/test-libhdfs.sh has the 'executable' bit turned on? It's necessary to execute that shell script which does most of the heavy-lifting when it comes to automating 'test-libhdfs'.

> Document libhdfs and fix some OS specific stuff in Makefile
> -----------------------------------------------------------
>
>                 Key: HADOOP-483
>                 URL: http://issues.apache.org/jira/browse/HADOOP-483
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>         Attachments: HADOOP-483.patch, libhdfs.patch, libhdfs.second.patch, libhdfs_20060906.patch
>
>
> Document libhdfs (api docs and user manual) and fix some OS specific stuff (paths to utilities like rm) in the Makefile and TestDFSCIO.java

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep  6 02:16:54 2006
Return-Path: 
 <hadoop-dev-return-3569-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 41863 invoked from network); 6 Sep 2006 02:16:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Sep 2006 02:16:54 -0000
Received: (qmail 33291 invoked by uid 500); 6 Sep 2006 02:16:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 33270 invoked by uid 500); 6 Sep 2006 02:16:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 33261 invoked by uid 99); 6 Sep 2006 02:16:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 19:16:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 19:16:53 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 74EC641000E
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Sep 2006 02:13:23 +0000 (GMT)
Message-ID: <21934027.1157508803476.JavaMail.jira@brutus>
Date: Tue, 5 Sep 2006 19:13:23 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-483) Document libhdfs and fix some OS
 specific stuff in Makefile
In-Reply-To: <20264654.1156486690133.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-483?page=all ]

Arun C Murthy updated HADOOP-483:
---------------------------------

    Attachment:     (was: libhdfs_20060906.patch)

> Document libhdfs and fix some OS specific stuff in Makefile
> -----------------------------------------------------------
>
>                 Key: HADOOP-483
>                 URL: http://issues.apache.org/jira/browse/HADOOP-483
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>         Attachments: HADOOP-483.patch, libhdfs.patch, libhdfs.second.patch
>
>
> Document libhdfs (api docs and user manual) and fix some OS specific stuff (paths to utilities like rm) in the Makefile and TestDFSCIO.java

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep  6 02:18:56 2006
Return-Path: 
 <hadoop-dev-return-3570-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 42089 invoked from network); 6 Sep 2006 02:18:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Sep 2006 02:18:56 -0000
Received: (qmail 34034 invoked by uid 500); 6 Sep 2006 02:18:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 34015 invoked by uid 500); 6 Sep 2006 02:18:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 34006 invoked by uid 99); 6 Sep 2006 02:18:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 19:18:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 19:18:53 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D9040410011
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Sep 2006 02:15:23 +0000 (GMT)
Message-ID: <7608981.1157508923886.JavaMail.jira@brutus>
Date: Tue, 5 Sep 2006 19:15:23 -0700 (PDT)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-489) Seperating user logs from system
 logs in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-489?page=comments#action_12432715 ] 
            
Michel Tourn commented on HADOOP-489:
-------------------------------------

1) One log file per job per task tracker: sounds good.
Avoiding tasks that write simultaneously to the shared job log:
you could write to a per-Task temp file, then atomically catenate to the job file at the end. 

Ways to enforce Atomicity:
a) TaskTracker rather than TaskRunner is responsible for catenate. That way you can assume there is only one such server running 
(one per machine, one per config set or per HADOOP_IDENT_STRING)

b) Use an interprocess locking mechanism. 
The standard way in Java is to use java.nio.channels.FileLock. 
Just like with pid files, you can encode the pid in the FileLock name to help detect orphan lock files.
HadoopStreaming used to have code to do b)

Aside: did you mention that there is a need for an index into the per-machine job log?
When the servlet API serves a task log content: it needs to retrieve a *range* of the job log.
Associated to a joblog file, there is a list of {taskid, begin offset, length}. 


2) says "all errors" 3) says "just one". Which is it? 
I would propose: either one, configurable.
Note there is a large variety of jobclient applications: 
each pure-java user application and HadoopStreaming.
So the canonical client-side log retrieval code should:

A. be customizable: hooks that let you grab 1 or k or ALL task logs.

B. should not assume it has complete control over the Java application's stdout/stderr: user code normally has control over this. 

C. should fit as extension to the normal job submitter pattern.

For example:
B+C:
     new TaskLogsSubscriber(System.err); // NEW
      while (! running_.isComplete()) {
        sleep a bit;
        running_ = jc_.getJob(jobId_);
        if (!report.equals(lastReport)) println(report);        
      }

A: TaskLogsSubscriber API ideas.
This API would be used in the sample JobSubmitter examples.
a goal should be: provide useful out-of-the box behaviour. But also allow the user to customize everything, starting from the servlet request.

boolean showLog(String full_task_id, boolean failed); 
// default implem: remember first failed id, first non-failed id. Return false for all other ids.

void printTaskLog(String full_task_id)
// default implem: open TaskTracker servlet URL, pass the URLInputStream to printLogStream.

void printLogStream(String full_task_id , InputStream in) 
// default implem: consume and write all to System.err (of the JobSubmitter process)

caveat: "taskid" should be abstracted enough to address :
both map and reduce tasks and both cluster and local-maprunner tasks.


>3) iii) This would entail running a servlet on each of the tasktrackers..
Yes. And since these processes already run a Jetty instance, the incremental overhead is minimal.


>4) Yes, this gives the best of both worlds (real-time access and HDFS access)
Seems that the JobConf alternative is simpler and good enough.
I suppose you mean something like
JobConf.setJobLogDirectory(Path dfsPath)
If you don't call it, the logs are not moved to dfs. 
This also resolves the issue of how the log data may later become a mapreduce job input 

>5) job-log files could be deleted on schedule
Yes, same as what is done to delete the global TaskTracker logs.
But with its own configurable deletion delay.


> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>            Priority: Minor
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep  6 02:29:54 2006
Return-Path: 
 <hadoop-dev-return-3571-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43394 invoked from network); 6 Sep 2006 02:29:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Sep 2006 02:29:54 -0000
Received: (qmail 42456 invoked by uid 500); 6 Sep 2006 02:29:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 42440 invoked by uid 500); 6 Sep 2006 02:29:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 42431 invoked by uid 99); 6 Sep 2006 02:29:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 19:29:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 19:29:53 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 644D541000E
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Sep 2006 02:26:23 +0000 (GMT)
Message-ID: <29283054.1157509583408.JavaMail.jira@brutus>
Date: Tue, 5 Sep 2006 19:26:23 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-483) Document libhdfs and fix some OS
 specific stuff in Makefile
In-Reply-To: <20264654.1156486690133.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-483?page=all ]

Arun C Murthy updated HADOOP-483:
---------------------------------

    Attachment: libhdfs_20060906.patch

> Document libhdfs and fix some OS specific stuff in Makefile
> -----------------------------------------------------------
>
>                 Key: HADOOP-483
>                 URL: http://issues.apache.org/jira/browse/HADOOP-483
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>         Attachments: HADOOP-483.patch, libhdfs.patch, libhdfs.second.patch, libhdfs_20060906.patch
>
>
> Document libhdfs (api docs and user manual) and fix some OS specific stuff (paths to utilities like rm) in the Makefile and TestDFSCIO.java

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep  6 02:31:54 2006
Return-Path: 
 <hadoop-dev-return-3572-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43670 invoked from network); 6 Sep 2006 02:31:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Sep 2006 02:31:54 -0000
Received: (qmail 46507 invoked by uid 500); 6 Sep 2006 02:31:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 46482 invoked by uid 500); 6 Sep 2006 02:31:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46470 invoked by uid 99); 6 Sep 2006 02:31:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 19:31:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 19:31:53 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4835741000E
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Sep 2006 02:28:23 +0000 (GMT)
Message-ID: <9403500.1157509703293.JavaMail.jira@brutus>
Date: Tue, 5 Sep 2006 19:28:23 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-483) Document libhdfs and fix some OS
 specific stuff in Makefile
In-Reply-To: <20264654.1156486690133.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-483?page=all ]

Arun C Murthy updated HADOOP-483:
---------------------------------

    Status: Patch Available  (was: Open)

> Document libhdfs and fix some OS specific stuff in Makefile
> -----------------------------------------------------------
>
>                 Key: HADOOP-483
>                 URL: http://issues.apache.org/jira/browse/HADOOP-483
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>         Attachments: HADOOP-483.patch, libhdfs.patch, libhdfs.second.patch, libhdfs_20060906.patch
>
>
> Document libhdfs (api docs and user manual) and fix some OS specific stuff (paths to utilities like rm) in the Makefile and TestDFSCIO.java

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep  6 02:33:54 2006
Return-Path: 
 <hadoop-dev-return-3573-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43829 invoked from network); 6 Sep 2006 02:33:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Sep 2006 02:33:54 -0000
Received: (qmail 46928 invoked by uid 500); 6 Sep 2006 02:33:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 46903 invoked by uid 500); 6 Sep 2006 02:33:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46894 invoked by uid 99); 6 Sep 2006 02:33:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 19:33:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 19:33:53 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8624B410010
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Sep 2006 02:30:23 +0000 (GMT)
Message-ID: <2496958.1157509823546.JavaMail.jira@brutus>
Date: Tue, 5 Sep 2006 19:30:23 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-483) Document libhdfs and fix some OS
 specific stuff in Makefile
In-Reply-To: <20264654.1156486690133.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-483?page=all ]

Arun C Murthy updated HADOOP-483:
---------------------------------

    Attachment:     (was: libhdfs_20060906.patch)

> Document libhdfs and fix some OS specific stuff in Makefile
> -----------------------------------------------------------
>
>                 Key: HADOOP-483
>                 URL: http://issues.apache.org/jira/browse/HADOOP-483
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>         Attachments: HADOOP-483.patch, libhdfs.patch, libhdfs.second.patch
>
>
> Document libhdfs (api docs and user manual) and fix some OS specific stuff (paths to utilities like rm) in the Makefile and TestDFSCIO.java

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep  6 02:35:55 2006
Return-Path: 
 <hadoop-dev-return-3574-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 44080 invoked from network); 6 Sep 2006 02:35:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Sep 2006 02:35:55 -0000
Received: (qmail 47494 invoked by uid 500); 6 Sep 2006 02:35:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47472 invoked by uid 500); 6 Sep 2006 02:35:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47463 invoked by uid 99); 6 Sep 2006 02:35:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 19:35:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 19:35:53 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4B81C410010
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Sep 2006 02:32:23 +0000 (GMT)
Message-ID: <30477664.1157509943306.JavaMail.jira@brutus>
Date: Tue, 5 Sep 2006 19:32:23 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-483) Document libhdfs and fix some OS
 specific stuff in Makefile
In-Reply-To: <20264654.1156486690133.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-483?page=all ]

Arun C Murthy updated HADOOP-483:
---------------------------------

    Attachment: libhdfs_20060906.patch

Sigh, forgot to remove an un-related patch - done now.

> Document libhdfs and fix some OS specific stuff in Makefile
> -----------------------------------------------------------
>
>                 Key: HADOOP-483
>                 URL: http://issues.apache.org/jira/browse/HADOOP-483
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>         Attachments: HADOOP-483.patch, libhdfs.patch, libhdfs.second.patch, libhdfs_20060906.patch
>
>
> Document libhdfs (api docs and user manual) and fix some OS specific stuff (paths to utilities like rm) in the Makefile and TestDFSCIO.java

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep  6 05:35:59 2006
Return-Path: 
 <hadoop-dev-return-3575-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 70768 invoked from network); 6 Sep 2006 05:35:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Sep 2006 05:35:59 -0000
Received: (qmail 68765 invoked by uid 500); 6 Sep 2006 05:35:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68666 invoked by uid 500); 6 Sep 2006 05:35:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68561 invoked by uid 99); 6 Sep 2006 05:35:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 22:35:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 22:35:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 23592410028
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Sep 2006 05:32:27 +0000 (GMT)
Message-ID: <31058604.1157520747142.JavaMail.jira@brutus>
Date: Tue, 5 Sep 2006 22:32:27 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-441) SequenceFile should support 'custom
 compressors'
In-Reply-To: <29672656.1155187633922.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-441?page=all ]

Arun C Murthy updated HADOOP-441:
---------------------------------

    Attachment: codec.patch
                reports.tgz

Here's the patch for custom codecs (sequencefile v5).

I've hit a potential red-flag where the 'writes' to 'block compressed' SequenceFiles through the new custom codec framework suffers ~10%-15% (vis-a-vis version 4 i.e. SEQ4). The 'writes' to non-compressed/record-compressed SequenceFiles seems to hold up very well indeed. Similarly 'reads' of all types of SequenceFiles also are quite fine.

I turned an evaluation version of jprobe's profiler on both v4 and v5 of SequenceFile and the results are very surprising. I have attached the detailed summaries (reports.tgz) of the command:
$ java org.apache.hadoop.io.TestSequenceFile -local -count {10000 - 10000000 i} -rwonly file_bc.seq -compressType BLOCK

The test was run to write the exact same data (RandomDatum's generator was seeded with '0' in all cases).

Summarising: it seems that the Deflater.deflateBytes (a native jni call - DeflaterOutputStream.write -> Deflater.deflate -> Deflater.deflateBytes) seems to perform very differently in v5. 
a) In both v4 and v5 the exact same no. of calls are made to SequenceFile.BlockCompressedWriter.writeBlock -> DeflaterOutputStream.write. 
b) In v4 there seem to be slightly _more_ no. of calls to Deflater.deflate and hence Deflater.deflateBytes
c) Yet, the performance of v5 (with _lesser_ no. of calls) suffers since Deflater.deflateBytes takes longer to execute! And this completely reproducable.

I talked to Owen who mentioned that he had noticed similar flaky performance with the Deflater earlier...

Appreciate any code reviews/ideas etc.

Thoughts? 

> SequenceFile should support 'custom compressors'
> ------------------------------------------------
>
>                 Key: HADOOP-441
>                 URL: http://issues.apache.org/jira/browse/HADOOP-441
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.6.0
>
>         Attachments: codec.patch, codec.patch, codec20060831.patch, codec_updated_interfaces_20060830.patch, reports.tgz
>
>
> SequenceFiles should support 'custom compressors' which can be specified by the user on creation of the file. 
> Readily available packages for gzip and zip (java.util.zip) are among obvious choices to support. Of course there will be hooks so that other compressors can be added in future as long as there is a way to construct (input/output) streams on top of the compressor/decompressor.
> The 'classname' of the 'custom compressor/decompressor' could be stored in the header of the SequenceFile which can then be used by SequenceFile.Reader to figure out the appropriate 'decompressor'. Thus I propose we add constructors to SequenceFile.Writer which take in the 'classname' of the compressor's input/output stream classes (e.g. DeflaterOutputStream/InflaterInputStream or GZIPOutputStream/GZIPInputStream), which acts as the hook for future compressors/decompressors.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep  6 06:27:54 2006
Return-Path: 
 <hadoop-dev-return-3576-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 82404 invoked from network); 6 Sep 2006 06:27:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Sep 2006 06:27:54 -0000
Received: (qmail 18567 invoked by uid 500); 6 Sep 2006 06:27:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 18381 invoked by uid 500); 6 Sep 2006 06:27:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 18356 invoked by uid 99); 6 Sep 2006 06:27:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 23:27:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Sep 2006 23:27:52 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A4711714309
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Sep 2006 06:24:22 +0000 (GMT)
Message-ID: <15763613.1157523862670.JavaMail.jira@brutus>
Date: Tue, 5 Sep 2006 23:24:22 -0700 (PDT)
From: "Thomas FRIOL (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-509) initTasks method in the JobInProgress
 class does not correctly configure the classloader with the custom
 map/reduce jar
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

initTasks method in the JobInProgress class does not correctly configure the classloader with the custom map/reduce jar
-----------------------------------------------------------------------------------------------------------------------

                 Key: HADOOP-509
                 URL: http://issues.apache.org/jira/browse/HADOOP-509
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.5.0
            Reporter: Thomas FRIOL


In this part of code :

        JobConf jd = new JobConf(localJobFile);
        FileSystem fs = FileSystem.get(conf);
        String ifClassName = jd.get("mapred.input.format.class");
        InputFormat inputFormat;
        if (ifClassName != null && localJarFile != null) {
          try {
            ClassLoader loader =
              new URLClassLoader(new URL[]{ localFs.pathToFile(localJarFile).toURL() });
            Class inputFormatClass = Class.forName(ifClassName, true, loader);
            inputFormat = (InputFormat)inputFormatClass.newInstance();
          } catch (Exception e) {
            throw new IOException(e.toString());
          }
        } else {
          inputFormat = jd.getInputFormat();
        }

I think that the URLClassLoader should be added the URLs to all the jars contained in the lib directory of the mapred jar. Or maybe, the jar should be unjarred and the classpath should be updated as well as it is done into the TaskRunner class :

      String jar = conf.getJar();
      if (jar != null) {                      // if jar exists, it into workDir
        RunJar.unJar(new File(jar), workDir);
        File[] libs = new File(workDir, "lib").listFiles();
        if (libs != null) {
          for (int i = 0; i < libs.length; i++) {
            classPath.append(sep);            // add libs from jar to classpath
            classPath.append(libs[i]);
          }
        }
        classPath.append(sep);
        classPath.append(new File(workDir, "classes"));
        classPath.append(sep);
        classPath.append(workDir);
      }

Actually, it is not possible to load a custom InputFormat class. Any thoughts ?

PS : This issue comes following a discussion on the issue https://issues.apache.org/jira/browse/HADOOP-366



-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep  6 07:02:54 2006
Return-Path: 
 <hadoop-dev-return-3577-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 89350 invoked from network); 6 Sep 2006 07:02:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Sep 2006 07:02:54 -0000
Received: (qmail 53919 invoked by uid 500); 6 Sep 2006 07:02:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53898 invoked by uid 500); 6 Sep 2006 07:02:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53885 invoked by uid 99); 6 Sep 2006 07:02:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 00:02:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 00:02:52 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5E0E8410010
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Sep 2006 06:59:22 +0000 (GMT)
Message-ID: <12895168.1157525962382.JavaMail.jira@brutus>
Date: Tue, 5 Sep 2006 23:59:22 -0700 (PDT)
From: "Thomas FRIOL (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-510) mapred.jar property in a job
 configuration file handles only absolute path into the local file system
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

mapred.jar property in a job configuration file handles only absolute path into the local file system
-----------------------------------------------------------------------------------------------------

                 Key: HADOOP-510
                 URL: http://issues.apache.org/jira/browse/HADOOP-510
             Project: Hadoop
          Issue Type: Improvement
          Components: mapred
    Affects Versions: 0.5.0
            Reporter: Thomas FRIOL


Why does this property does not handle URL ?
I think it could be more comfortable to specify the URL of a jar instead of an absolute path in the local file system.
It also could be great to be able to specify a path relative to the job configuration file.

WDYT ?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep  6 07:31:56 2006
Return-Path: 
 <hadoop-dev-return-3578-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 7977 invoked from network); 6 Sep 2006 07:31:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Sep 2006 07:31:56 -0000
Received: (qmail 93136 invoked by uid 500); 6 Sep 2006 07:31:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 93114 invoked by uid 500); 6 Sep 2006 07:31:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 93097 invoked by uid 99); 6 Sep 2006 07:31:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 00:31:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 00:31:54 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8D3EA410017
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Sep 2006 07:28:24 +0000 (GMT)
Message-ID: <18141316.1157527704576.JavaMail.jira@brutus>
Date: Wed, 6 Sep 2006 00:28:24 -0700 (PDT)
From: "Lorenzo Thione (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-497) DataNodes and TaskTrackers should be
 able to report hostnames and ips relative to customizable network
 interfaces and nameservers
In-Reply-To: <3331836.1156991602375.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-497?page=comments#action_12432773 ] 
            
Lorenzo Thione commented on HADOOP-497:
---------------------------------------

For us there were real reasons why this was necessary. The NameNode (which cares about the host names for the DataNodes) and the JobTracker (which cares about the hostnames of the TaskTrackers) are on different networks. It seems that configuring these independently gives the right level of flexibility. Any reason why we'd want to keep them necessarily aligned? I'd be fine with changing the names of the properties.

> DataNodes and TaskTrackers should be able to report hostnames and ips relative to customizable network interfaces and nameservers
> ---------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-497
>                 URL: http://issues.apache.org/jira/browse/HADOOP-497
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs, mapred, util
>    Affects Versions: 0.6.0
>            Reporter: Lorenzo Thione
>            Priority: Minor
>         Attachments: dnsjava-2.0.2.jar, net-dns.patch, nif-utils.patch
>
>
> This patch allows for network configuration parameters to be aded to the hadoop-site.xml file. These parameters specify a network interface name and an optional nameserver hostname which DataNodes and TaskTrackers consult to resolve  their hostnames from the IP bound to the specified network interface.
> This is useful when machines that are part of different physical or logical network need to participate in hadoop clusters as client nodes. The hostname and IP reported by InetAddress.getLocalHost() are not necessarily the ones that will allow the JobTracker and NameNode to reach the clients, as well as not necessarily the ones through which the DFS clients can reach the DataNodes.
> The configuration parameters are
>  - cluster.report.nif
>  - cluster.report.ns
> nif: takes the name of a network interface, like en0, en1 (on macs), eth0, etc...
> ns: the host name of a DNS server to use when resolving the IP bound to the specified nif
> These parameters are set by default to the value "default" which will replicate the current behavior of reporting InetAddress.getLocalHost().getHostName() and getHostAddress()
> As part of the patch, a new library dnsjava was added along with its license information (BSD license). The list of affected files is:
> src
>  org.apache.hadoop.dfs.DataNode 
>  org.apache.hadoop.mapred.taskTracker 
>  org.apache.hadoop.util.NetworkUtils
> conf
>  hadoop-default.xml
> lib
>  dnsjava-2.0.2.jar
>  dnsjava-2.0.2.LICENSE.txt

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep  6 08:52:56 2006
Return-Path: 
 <hadoop-dev-return-3579-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 29819 invoked from network); 6 Sep 2006 08:52:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Sep 2006 08:52:56 -0000
Received: (qmail 93753 invoked by uid 500); 6 Sep 2006 08:52:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 93645 invoked by uid 500); 6 Sep 2006 08:52:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 93636 invoked by uid 99); 6 Sep 2006 08:52:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 01:52:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 01:52:54 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0DAE87142FD
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Sep 2006 08:49:24 +0000 (GMT)
Message-ID: <13375811.1157532564053.JavaMail.jira@brutus>
Date: Wed, 6 Sep 2006 01:49:24 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-263) task status should include timestamps
 for when a job transitions
In-Reply-To: <6879018.1149102869840.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-263?page=all ]

Sanjay Dahiya updated HADOOP-263:
---------------------------------

    Attachment: Hadoop-263_1.patch

Thanks Owen for the comments. 

Here is an updated patch, I  also added time difference for start-shuffle-sort phases along with finish time stamps  on JSPs. 

> task status should include timestamps for when a job transitions
> ----------------------------------------------------------------
>
>                 Key: HADOOP-263
>                 URL: http://issues.apache.org/jira/browse/HADOOP-263
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.2.1
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.6.0
>
>         Attachments: Hadoop-263.patch, Hadoop-263_1.patch, patch.txt, patch.txt, patch.txt, patch.txt
>
>
> It would help users to understand what happened if the task status included information about when the task transitioned:
> Map:
>    started
>    finished
> Reduce:
>    started
>    shuffle finished
>    sort finished
>    finished

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep  6 14:36:55 2006
Return-Path: 
 <hadoop-dev-return-3580-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50451 invoked from network); 6 Sep 2006 14:36:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Sep 2006 14:36:55 -0000
Received: (qmail 54961 invoked by uid 500); 6 Sep 2006 14:36:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 54932 invoked by uid 500); 6 Sep 2006 14:36:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 54923 invoked by uid 99); 6 Sep 2006 14:36:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 07:36:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 07:36:54 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4E32E410017
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Sep 2006 14:33:23 +0000 (GMT)
Message-ID: <3842838.1157553203317.JavaMail.jira@brutus>
Date: Wed, 6 Sep 2006 07:33:23 -0700 (PDT)
From: =?utf-8?Q?Fr=C3=A9d=C3=A9ric_Bertin_=28JIRA=29?= <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-424) mapreduce jobs fail when no split is
 returned via inputFormat.getSplits
In-Reply-To: <16027160.1154704034944.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-424?page=3Dall ]

Fr=C3=A9d=C3=A9ric Bertin updated HADOOP-424:
-----------------------------------

    Attachment: hadoop-424.patch

here is a patch which fixes this issue. I don't have enough knowledge of th=
e whole Hadoop codebase to determine if this is the best place/way to fix t=
his problem, but it works.

> mapreduce jobs fail when no split is returned via inputFormat.getSplits
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-424
>                 URL: http://issues.apache.org/jira/browse/HADOOP-424
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.5.0
>            Reporter: Fr=C3=A9d=C3=A9ric Bertin
>         Attachments: emptyJobTest.patch, hadoop-424.patch
>
>
> I'm using a MapReduce job to process some data logged and timestamped int=
o files.
> When the job runs, it does not process the whole data, but filters only t=
he data that has been logged since the last job run.
> However, when no new data has been logged, the job fails because the getS=
plits method of InputFormat returns no split. Thus the number of map tasks =
is 0. This is not intercepted, and the job fails at reduce step because it =
seems it does not find any data to process:
> java.io.FileNotFoundException: /local/home/hadoop/var/mapred/local/task_0=
030_r_000000_3/all.2 at org.apache.hadoop.fs.LocalFileSystem.openRaw(LocalF=
ileSystem.java:121) at org.apache.hadoop.fs.FSDataInputStream$Checker.(FSDa=
taInputStream.java:47) at org.apache.hadoop.fs.FSDataInputStream.(FSDataInp=
utStream.java:221) at org.apache.hadoop.fs.FileSystem.open(FileSystem.java:=
150) at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:259) at=
 org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:253) at org.ap=
ache.hadoop.mapred.ReduceTask.run(ReduceTask.java:241) at org.apache.hadoop=
.mapred.TaskTracker$Child.main(TaskTracker.java:1013)
> What should be Hadoop's behaviour in such a case?
> IMHO, the job should be considered as successful. Indeed, this is not a j=
ob failure, but just a lack of input data. WDYT?

--=20
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: htt=
p://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

       

From MAILER-DAEMON Wed Sep  6 15:13:56 2006
Return-Path: 
 <hadoop-dev-return-3581-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 60844 invoked from network); 6 Sep 2006 15:13:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Sep 2006 15:13:56 -0000
Received: (qmail 11506 invoked by uid 500); 6 Sep 2006 15:13:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 11482 invoked by uid 500); 6 Sep 2006 15:13:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 11473 invoked by uid 99); 6 Sep 2006 15:13:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 08:13:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 08:13:54 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5F3D5410017
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Sep 2006 15:10:23 +0000 (GMT)
Message-ID: <20368572.1157555423387.JavaMail.jira@brutus>
Date: Wed, 6 Sep 2006 08:10:23 -0700 (PDT)
From: =?utf-8?Q?Fr=C3=A9d=C3=A9ric_Bertin_=28JIRA=29?= <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-424) mapreduce jobs fail when no split is
 returned via inputFormat.getSplits
In-Reply-To: <16027160.1154704034944.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-424?page=3Dall ]

Fr=C3=A9d=C3=A9ric Bertin updated HADOOP-424:
-----------------------------------

    Attachment: hadoop-424-2.patch

sorry, the patch was badly generated, this one seems better.

> mapreduce jobs fail when no split is returned via inputFormat.getSplits
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-424
>                 URL: http://issues.apache.org/jira/browse/HADOOP-424
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.5.0
>            Reporter: Fr=C3=A9d=C3=A9ric Bertin
>         Attachments: emptyJobTest.patch, hadoop-424-2.patch, hadoop-424.p=
atch
>
>
> I'm using a MapReduce job to process some data logged and timestamped int=
o files.
> When the job runs, it does not process the whole data, but filters only t=
he data that has been logged since the last job run.
> However, when no new data has been logged, the job fails because the getS=
plits method of InputFormat returns no split. Thus the number of map tasks =
is 0. This is not intercepted, and the job fails at reduce step because it =
seems it does not find any data to process:
> java.io.FileNotFoundException: /local/home/hadoop/var/mapred/local/task_0=
030_r_000000_3/all.2 at org.apache.hadoop.fs.LocalFileSystem.openRaw(LocalF=
ileSystem.java:121) at org.apache.hadoop.fs.FSDataInputStream$Checker.(FSDa=
taInputStream.java:47) at org.apache.hadoop.fs.FSDataInputStream.(FSDataInp=
utStream.java:221) at org.apache.hadoop.fs.FileSystem.open(FileSystem.java:=
150) at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:259) at=
 org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:253) at org.ap=
ache.hadoop.mapred.ReduceTask.run(ReduceTask.java:241) at org.apache.hadoop=
.mapred.TaskTracker$Child.main(TaskTracker.java:1013)
> What should be Hadoop's behaviour in such a case?
> IMHO, the job should be considered as successful. Indeed, this is not a j=
ob failure, but just a lack of input data. WDYT?

--=20
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: htt=
p://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

       

From MAILER-DAEMON Wed Sep  6 16:34:44 2006
Return-Path: 
 <hadoop-dev-return-3582-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91425 invoked from network); 6 Sep 2006 16:34:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Sep 2006 16:34:44 -0000
Received: (qmail 186 invoked by uid 500); 6 Sep 2006 16:34:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 99973 invoked by uid 500); 6 Sep 2006 16:34:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 99963 invoked by uid 99); 6 Sep 2006 16:34:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 09:34:43 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.126.228.150] (HELO rsmtp2.corp.yahoo.com)
 (207.126.228.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 09:34:42 -0700
Received: from [10.72.108.58] (arkady-mac.corp.yahoo.com [10.72.108.58])
	by rsmtp2.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k86GYHNX010682;
	Wed, 6 Sep 2006 09:34:18 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=in-reply-to:references:mime-version:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=klc4fzKXgzljrhjBHsRrD2PPCU+4T3lpAjlq1ad+//JbcgXdh3Z9n9uyXa+tgQLn
In-Reply-To: <7608981.1157508923886.JavaMail.jira@brutus>
References: <7608981.1157508923886.JavaMail.jira@brutus>
Mime-Version: 1.0 (Apple Message framework v624)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <0042e6552952f93d3b2aedba1917f5f3@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Arkady Borkovsky <arkady@yahoo-inc.com>
Subject: Re: [jira] Commented: (HADOOP-489) Seperating user logs from system
 logs in map reduce
Date: Wed, 6 Sep 2006 09:34:16 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.624)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

+1 on most point

comments:
General:  yes, simple things should be configurable

4:  (Copying log files from task trackers to HDFS)
      -- yes it should be configurable
      -- the default should be to copy to a default subdirectory of the  
job user's home
      -- it would be nice to copy logs to HDFS periodically -- e.g.  
whenever a task ends or every NNN seconds, whatever is larger.  (HDFS  
files have to be closed before they are readable, so copying logs to  
HDFS needs to be done whole file at a time, may be improved later).

Implementing this proposal will make users' life (my life) much more  
enjoyable.


On Sep 5, 2006, at 7:15 PM, Michel Tourn (JIRA) wrote:

>     [  
> http://issues.apache.org/jira/browse/HADOOP-489? 
> page=comments#action_12432715 ]
>
> Michel Tourn commented on HADOOP-489:
> -------------------------------------
>
> 1) One log file per job per task tracker: sounds good.
> Avoiding tasks that write simultaneously to the shared job log:
> you could write to a per-Task temp file, then atomically catenate to  
> the job file at the end.
>
> Ways to enforce Atomicity:
> a) TaskTracker rather than TaskRunner is responsible for catenate.  
> That way you can assume there is only one such server running
> (one per machine, one per config set or per HADOOP_IDENT_STRING)
>
> b) Use an interprocess locking mechanism.
> The standard way in Java is to use java.nio.channels.FileLock.
> Just like with pid files, you can encode the pid in the FileLock name  
> to help detect orphan lock files.
> HadoopStreaming used to have code to do b)
>
> Aside: did you mention that there is a need for an index into the  
> per-machine job log?
> When the servlet API serves a task log content: it needs to retrieve a  
> *range* of the job log.
> Associated to a joblog file, there is a list of {taskid, begin offset,  
> length}.
>
>
> 2) says "all errors" 3) says "just one". Which is it?
> I would propose: either one, configurable.
> Note there is a large variety of jobclient applications:
> each pure-java user application and HadoopStreaming.
> So the canonical client-side log retrieval code should:
>
> A. be customizable: hooks that let you grab 1 or k or ALL task logs.
>
> B. should not assume it has complete control over the Java  
> application's stdout/stderr: user code normally has control over this.
>
> C. should fit as extension to the normal job submitter pattern.
>
> For example:
> B+C:
>      new TaskLogsSubscriber(System.err); // NEW
>       while (! running_.isComplete()) {
>         sleep a bit;
>         running_ = jc_.getJob(jobId_);
>         if (!report.equals(lastReport)) println(report);
>       }
>
> A: TaskLogsSubscriber API ideas.
> This API would be used in the sample JobSubmitter examples.
> a goal should be: provide useful out-of-the box behaviour. But also  
> allow the user to customize everything, starting from the servlet  
> request.
>
> boolean showLog(String full_task_id, boolean failed);
> // default implem: remember first failed id, first non-failed id.  
> Return false for all other ids.
>
> void printTaskLog(String full_task_id)
> // default implem: open TaskTracker servlet URL, pass the  
> URLInputStream to printLogStream.
>
> void printLogStream(String full_task_id , InputStream in)
> // default implem: consume and write all to System.err (of the  
> JobSubmitter process)
>
> caveat: "taskid" should be abstracted enough to address :
> both map and reduce tasks and both cluster and local-maprunner tasks.
>
>
>> 3) iii) This would entail running a servlet on each of the  
>> tasktrackers..
> Yes. And since these processes already run a Jetty instance, the  
> incremental overhead is minimal.
>
>
>> 4) Yes, this gives the best of both worlds (real-time access and HDFS  
>> access)
> Seems that the JobConf alternative is simpler and good enough.
> I suppose you mean something like
> JobConf.setJobLogDirectory(Path dfsPath)
> If you don't call it, the logs are not moved to dfs.
> This also resolves the issue of how the log data may later become a  
> mapreduce job input
>
>> 5) job-log files could be deleted on schedule
> Yes, same as what is done to delete the global TaskTracker logs.
> But with its own configurable deletion delay.
>
>
>> Seperating user logs from system logs in map reduce
>> ---------------------------------------------------
>>
>>                 Key: HADOOP-489
>>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>>             Project: Hadoop
>>          Issue Type: Improvement
>>          Components: mapred
>>            Reporter: Mahadev konar
>>         Assigned To: Mahadev konar
>>            Priority: Minor
>>
>> Currently the user logs are a part of system logs in mapreduce.  
>> Anything logged by the user is logged into the tasktracker log files.  
>> This create two issues-
>> 1) The system log files get cluttered with user output. If the user  
>> outputs a large amount of logs, the system logs need to be cleaned up  
>> pretty often.
>> 2) For the user, it is difficult to get to each of the machines and  
>> look for the logs his/her job might have generated.
>> I am proposing three solutions to the problem. All of them have  
>> issues with it -
>> Solution 1.
>> Output the user logs on the user screen as part of the job submission  
>> process.
>> Merits-
>> This will prevent users from printing large amount of logs and the  
>> user can get runtime feedback on what is wrong with his/her job.
>> Issues -
>> This proposal will use the framework bandwidth while running jobs for  
>> the user. The user logs will need to pass from the tasks to the  
>> tasktrackers, from the tasktrackers to the jobtrackers and then from  
>> the jobtrackers to the jobclient using a lot of framework bandwidth  
>> if the user is printing out too much data.
>> Solution 2.
>> Output the user logs onto a dfs directory and then concatenate these  
>> files. Each task can create a file for the output in the log  
>> direcotyr for a given user and jobid.
>> Issues -
>> This will create a huge amount of small files in DFS which later can  
>> be concatenated into a single file. Also there is this issue that who  
>> would concatenate these files into a single file? This could be done  
>> by the framework (jobtracker) as part of the cleanup for the jobs -  
>> might stress the jobtracker.
>>
>> Solution 3.
>> Put the user logs into a seperate user log file in the log directory  
>> on each tasktrackers. We can provide some tools to query these local  
>> log files. We could have commands like for jobid j and for taskid t  
>> get me the user log output. These tools could run as a seperate map  
>> reduce program with each map grepping the user log files and a single  
>> recude aggregating these logs in to a single dfs file.
>> Issues-
>> This does sound like more work for the user. Also, the output might  
>> not be complete since a tasktracker might have went down after it ran  
>> the job.
>> Any thoughts?
>
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the  
> administrators:  
> http://issues.apache.org/jira/secure/Administrators.jspa
> -
> For more information on JIRA, see:  
> http://www.atlassian.com/software/jira
>
>


From MAILER-DAEMON Wed Sep  6 17:10:10 2006
Return-Path: 
 <hadoop-dev-return-3583-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 4536 invoked from network); 6 Sep 2006 17:10:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Sep 2006 17:10:10 -0000
Received: (qmail 64271 invoked by uid 500); 6 Sep 2006 17:09:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64249 invoked by uid 500); 6 Sep 2006 17:09:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64233 invoked by uid 99); 6 Sep 2006 17:09:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 10:09:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 10:09:54 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 43E597142E7
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Sep 2006 17:06:23 +0000 (GMT)
Message-ID: <33149090.1157562383275.JavaMail.jira@brutus>
Date: Wed, 6 Sep 2006 10:06:23 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-424) mapreduce jobs fail when no split is
 returned via inputFormat.getSplits
In-Reply-To: <16027160.1154704034944.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-424?page=3Dcomments#actio=
n_12432903 ]=20
           =20
Owen O'Malley commented on HADOOP-424:
--------------------------------------

+1 this patch looks fine.

We could move the new code and the code that corrects the number of map tas=
ks above sorting the splits, but it isn't a big deal since sorting an empty=
 array is pretty fast. *smile*

> mapreduce jobs fail when no split is returned via inputFormat.getSplits
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-424
>                 URL: http://issues.apache.org/jira/browse/HADOOP-424
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.5.0
>            Reporter: Fr=C3=A9d=C3=A9ric Bertin
>         Attachments: emptyJobTest.patch, hadoop-424-2.patch, hadoop-424.p=
atch
>
>
> I'm using a MapReduce job to process some data logged and timestamped int=
o files.
> When the job runs, it does not process the whole data, but filters only t=
he data that has been logged since the last job run.
> However, when no new data has been logged, the job fails because the getS=
plits method of InputFormat returns no split. Thus the number of map tasks =
is 0. This is not intercepted, and the job fails at reduce step because it =
seems it does not find any data to process:
> java.io.FileNotFoundException: /local/home/hadoop/var/mapred/local/task_0=
030_r_000000_3/all.2 at org.apache.hadoop.fs.LocalFileSystem.openRaw(LocalF=
ileSystem.java:121) at org.apache.hadoop.fs.FSDataInputStream$Checker.(FSDa=
taInputStream.java:47) at org.apache.hadoop.fs.FSDataInputStream.(FSDataInp=
utStream.java:221) at org.apache.hadoop.fs.FileSystem.open(FileSystem.java:=
150) at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:259) at=
 org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:253) at org.ap=
ache.hadoop.mapred.ReduceTask.run(ReduceTask.java:241) at org.apache.hadoop=
.mapred.TaskTracker$Child.main(TaskTracker.java:1013)
> What should be Hadoop's behaviour in such a case?
> IMHO, the job should be considered as successful. Indeed, this is not a j=
ob failure, but just a lack of input data. WDYT?

--=20
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: htt=
p://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

       

From MAILER-DAEMON Wed Sep  6 17:33:00 2006
Return-Path: 
 <hadoop-dev-return-3584-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12088 invoked from network); 6 Sep 2006 17:33:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Sep 2006 17:33:00 -0000
Received: (qmail 12898 invoked by uid 500); 6 Sep 2006 17:33:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 12702 invoked by uid 500); 6 Sep 2006 17:33:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 12693 invoked by uid 99); 6 Sep 2006 17:33:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 10:33:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 10:32:59 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 573107142E7
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Sep 2006 17:29:23 +0000 (GMT)
Message-ID: <32550555.1157563763354.JavaMail.jira@brutus>
Date: Wed, 6 Sep 2006 10:29:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-497) DataNodes and TaskTrackers should be
 able to report hostnames and ips relative to customizable network
 interfaces and nameservers
In-Reply-To: <3331836.1156991602375.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-497?page=comments#action_12432906 ] 
            
Doug Cutting commented on HADOOP-497:
-------------------------------------

Okay, then, yes, let's rename these to be mapred.* config parameters.

Also, lots of the lines are longer than 80 columns.  Can you please re-format those?

> DataNodes and TaskTrackers should be able to report hostnames and ips relative to customizable network interfaces and nameservers
> ---------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-497
>                 URL: http://issues.apache.org/jira/browse/HADOOP-497
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs, mapred, util
>    Affects Versions: 0.6.0
>            Reporter: Lorenzo Thione
>            Priority: Minor
>         Attachments: dnsjava-2.0.2.jar, net-dns.patch, nif-utils.patch
>
>
> This patch allows for network configuration parameters to be aded to the hadoop-site.xml file. These parameters specify a network interface name and an optional nameserver hostname which DataNodes and TaskTrackers consult to resolve  their hostnames from the IP bound to the specified network interface.
> This is useful when machines that are part of different physical or logical network need to participate in hadoop clusters as client nodes. The hostname and IP reported by InetAddress.getLocalHost() are not necessarily the ones that will allow the JobTracker and NameNode to reach the clients, as well as not necessarily the ones through which the DFS clients can reach the DataNodes.
> The configuration parameters are
>  - cluster.report.nif
>  - cluster.report.ns
> nif: takes the name of a network interface, like en0, en1 (on macs), eth0, etc...
> ns: the host name of a DNS server to use when resolving the IP bound to the specified nif
> These parameters are set by default to the value "default" which will replicate the current behavior of reporting InetAddress.getLocalHost().getHostName() and getHostAddress()
> As part of the patch, a new library dnsjava was added along with its license information (BSD license). The list of affected files is:
> src
>  org.apache.hadoop.dfs.DataNode 
>  org.apache.hadoop.mapred.taskTracker 
>  org.apache.hadoop.util.NetworkUtils
> conf
>  hadoop-default.xml
> lib
>  dnsjava-2.0.2.jar
>  dnsjava-2.0.2.LICENSE.txt

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep  6 17:39:57 2006
Return-Path: 
 <hadoop-dev-return-3585-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 13736 invoked from network); 6 Sep 2006 17:39:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Sep 2006 17:39:57 -0000
Received: (qmail 23236 invoked by uid 500); 6 Sep 2006 17:39:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23051 invoked by uid 500); 6 Sep 2006 17:39:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23042 invoked by uid 99); 6 Sep 2006 17:39:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 10:39:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 10:39:55 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D517B71430A
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Sep 2006 17:36:24 +0000 (GMT)
Message-ID: <15338675.1157564184870.JavaMail.jira@brutus>
Date: Wed, 6 Sep 2006 10:36:24 -0700 (PDT)
From: "Uros Gruber (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-511) mapred.reduce.tasks not used
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

mapred.reduce.tasks not used
----------------------------

                 Key: HADOOP-511
                 URL: http://issues.apache.org/jira/browse/HADOOP-511
             Project: Hadoop
          Issue Type: Bug
    Affects Versions: 0.5.0
            Reporter: Uros Gruber


After some testing with nutch I found problem with ArithmeticException in partition function because numReduceTasks came in 0. After seting mapred.reduce.tasks in hadoop-site.xml to same value as default everything works.

This bug disappear in SVN version of hadoop

I this known issue. Please check also NUTCH-361 for detail explanation.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep  6 17:57:56 2006
Return-Path: 
 <hadoop-dev-return-3586-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17328 invoked from network); 6 Sep 2006 17:57:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Sep 2006 17:57:56 -0000
Received: (qmail 44146 invoked by uid 500); 6 Sep 2006 17:57:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 44117 invoked by uid 500); 6 Sep 2006 17:57:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 44102 invoked by uid 99); 6 Sep 2006 17:57:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 10:57:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 10:57:54 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 74BCA714305
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Sep 2006 17:54:23 +0000 (GMT)
Message-ID: <15613560.1157565263475.JavaMail.jira@brutus>
Date: Wed, 6 Sep 2006 10:54:23 -0700 (PDT)
From: "Marco Nicosia (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-401) JobTracker crashes Sun JVM
In-Reply-To: <19999404.1154127860513.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-401?page=comments#action_12432915 ] 
            
Marco Nicosia commented on HADOOP-401:
--------------------------------------

Exception in thread "Thread-0" java.lang.NullPointerException
        at org.apache.hadoop.mapred.JobTracker$ExpireLaunchingTasks.run(JobTracker.java:140)
        at java.lang.Thread.run(Thread.java:595)
#
# An unexpected error has been detected by HotSpot Virtual Machine:
#
#  SIGSEGV (0xb) at pc=0xf258c35f, pid=16297, tid=1859705776
#
# Java VM: Java HotSpot(TM) Server VM (1.5.0_06-b05 mixed mode)
# Problematic frame:
# J  org.mortbay.util.ByteArrayPool.getByteArray(I)[B
#
# An error report file with more information is saved as hs_err_pid16297.log
#
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
#


> JobTracker crashes Sun JVM
> --------------------------
>
>                 Key: HADOOP-401
>                 URL: http://issues.apache.org/jira/browse/HADOOP-401
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.4.0
>         Environment: OS:Red Hat Enterprise Linux AS release 4 (Nahant Update 2)
> uname:Linux 2.6.9-22.12.y1-64 #5 SMP Fri Nov 4 13:39:56 PST 2005 x86_64
> libc:glibc 2.3.4 NPTL 2.3.4 
> rlimit: STACK 10240k, CORE 0k, NPROC 32768, NOFILE 32768, AS infinity
> load average:0.20 0.21 0.18
> CPU:total 4 family 47, cmov, cx8, fxsr, mmx, sse, sse2, ht
> Memory: 4k page, physical 988k(220k free), swap 3070k(3070k free)
> vm_info: Java HotSpot(TM) Server VM (1.5.0_06-b05) for linux-x86, built on Nov 10 2005 10:56:33 by java_re with gcc 3.2.1-7a (J2SE release)
>            Reporter: Marco Nicosia
>
> From our jobtacker's .out file:
> #
> # An unexpected error has been detected by HotSpot Virtual Machine:
> #
> #  SIGSEGV (0xb) at pc=0xf27bf825, pid=24028, tid=1856498608
> #
> # Java VM: Java HotSpot(TM) Server VM (1.5.0_06-b05 mixed mode)
> # Problematic frame:
> # J  org.mortbay.util.ByteArrayPool.getByteArray(I)[B
> #
> # An error report file with more information is saved as hs_err_pid24028.log
> #
> # If you would like to submit a bug report, please visit:
> #   http://java.sun.com/webapps/bugreport/crash.jsp
> #
> And the relevant parts of that hs_err_pid24028.log file:
> #
> # An unexpected error has been detected by HotSpot Virtual Machine:
> #
> #  SIGSEGV (0xb) at pc=0xf27bf825, pid=24028, tid=1856498608
> #
> # Java VM: Java HotSpot(TM) Server VM (1.5.0_06-b05 mixed mode)
> # Problematic frame:
> # J  org.mortbay.util.ByteArrayPool.getByteArray(I)[B
> #
> ---------------  T H R E A D  ---------------
> Current thread (0x086e0088):  JavaThread "SocketListener0-0" [_thread_in_Java, id=24112]
> siginfo:si_signo=11, si_errno=0, si_code=2, si_addr=0x00022008
> Registers:
> EAX=0x00022000, EBX=0x75a0fac8, ECX=0x00000000, EDX=0x75b31258
> ESP=0x6ea7ded0, EBP=0x6ea7df3c, ESI=0x71b6def5, EDI=0x00000402
> EIP=0xf27bf825, CR2=0x00022008, EFLAGS=0x00010217
> Top of Stack: (sp=0x6ea7ded0)
> 0x6ea7ded0:   71549561 6ea7def0 00002000 00000400
> 0x6ea7dee0:   339dc50d 086e0088 6ea7df3c 6ea7df50
> 0x6ea7def0:   00000000 71b6def5 7154d7c9 f2595a80
> 0x6ea7df00:   6ea7df3c 6ea7df50 7154d7d8 6ea7df14
> 0x6ea7df10:   6ea7df3c f2501a14 00002000 e57bd350
> 0x6ea7df20:   6ea7df20 71b6def5 6ea7df50 71b71798
> 0x6ea7df30:   00000000 71b6df80 6ea7df44 6ea7df78
> 0x6ea7df40:   f2501aeb 719431e8 00002000 e57bd2d0 
> Instructions: (pc=0xf27bf825)
> 0xf27bf815:   8b 98 a4 00 00 00 8b 4b 20 89 4c 24 20 8b 41 08
> 0xf27bf825:   8b 70 08 8b de 4b 8b 4c 24 10 23 cb 89 4c 24 10 
> Stack: [0x6e9fe000,0x6ea7f000),  sp=0x6ea7ded0,  free space=511k
> Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
> J  org.mortbay.util.ByteArrayPool.getByteArray(I)[B
> j  org.mortbay.http.HttpInputStream.<init>(Ljava/io/InputStream;I)V+15
> j  org.mortbay.http.HttpConnection.<init>(Lorg/mortbay/http/HttpListener;Ljava/net/InetAddress;Ljava/io/InputStream;Ljava/io/OutputStream;Ljava/lang/Object;)V+97
> j  org.mortbay.http.SocketListener.createConnection(Ljava/net/Socket;)Lorg/mortbay/http/HttpConnection;+18
> j  org.mortbay.http.SocketListener.handleConnection(Ljava/net/Socket;)V+2
> j  org.mortbay.util.ThreadedServer.handle(Ljava/lang/Object;)V+19
> ---------------  P R O C E S S  ---------------
> Java Threads: ( => current thread )
>   0x086bb8a0 JavaThread "Thread-0" [_thread_blocked, id=24117]
>   0x0859dd38 JavaThread "Thread-20" [_thread_blocked, id=24116]
>   0x0859a8a8 JavaThread "Thread-19" [_thread_blocked, id=24115]
>   0x0859a1f8 JavaThread "Thread-18" [_thread_blocked, id=24114]
>   0x085d54d8 JavaThread "SocketListener0-1" [_thread_in_native, id=24113]
> =>0x086e0088 JavaThread "SocketListener0-0" [_thread_in_Java, id=24112]
> [...]
> Heap
>  PSYoungGen      total 21248K, used 19699K [0xe4640000, 0xe6a00000, 0xf2470000)
>   eden space 19584K, 92% used [0xe4640000,0xe57def08,0xe5960000)
>   from space 1664K, 99% used [0xe5960000,0xe5afe020,0xe5b00000)
>   to   space 8384K, 0% used [0xe61d0000,0xe61d0000,0xe6a00000)
>  PSOldGen        total 390080K, used 370693K [0x75470000, 0x8d160000, 0xe4640000)
>   object space 390080K, 95% used [0x75470000,0x8be716e0,0x8d160000)
>  PSPermGen       total 16384K, used 8080K [0x71470000, 0x72470000, 0x75470000)
>   object space 16384K, 49% used [0x71470000,0x71c54298,0x72470000)
> [...]
> VM Arguments:
> jvm_args: -Xmx2000m -Dhadoop.log.dir=/export//current/../run2/log -Dhadoop.log.file=hadoop-jobtracker.log -Dhadoop.home.dir=/export/current -Dhadoop.id.str=crawler -Dhadoop.root.logger=INFO,DRFA
> java_command: org.apache.hadoop.mapred.JobTracker
> Launcher Type: SUN_STANDARD
> Environment Variables:
> JAVA_HOME=/export//java/jdk
> PATH=/usr/kerberos/bin:/usr/local/bin:/bin:/usr/bin:/usr/X11R6/bin:/export//current/bin
> LD_LIBRARY_PATH=/export/java/jdk1.5.0_06/jre/lib/i386/server:/export//java/jdk1.5.0_06/jre/lib/i386:/export//java/jdk1.5.0_06/jre/../lib/i386
> SHELL=/bin/tcsh
> HOSTTYPE=x86_64-linux
> OSTYPE=linux
> MACHTYPE=x86_64

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep  6 18:49:56 2006
Return-Path: 
 <hadoop-dev-return-3587-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31270 invoked from network); 6 Sep 2006 18:49:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Sep 2006 18:49:56 -0000
Received: (qmail 75189 invoked by uid 500); 6 Sep 2006 18:49:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75167 invoked by uid 500); 6 Sep 2006 18:49:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75153 invoked by uid 99); 6 Sep 2006 18:49:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 11:49:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 11:49:54 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9586E714305
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Sep 2006 18:46:23 +0000 (GMT)
Message-ID: <14130659.1157568383609.JavaMail.jira@brutus>
Date: Wed, 6 Sep 2006 11:46:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-424) mapreduce jobs fail when no split is
 returned via inputFormat.getSplits
In-Reply-To: <16027160.1154704034944.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-424?page=3Dall ]

Doug Cutting updated HADOOP-424:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.6.0
       Resolution: Fixed

I just committed this.  Thanks Fr=C3=A9d=C3=A9ric!

> mapreduce jobs fail when no split is returned via inputFormat.getSplits
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-424
>                 URL: http://issues.apache.org/jira/browse/HADOOP-424
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.5.0
>            Reporter: Fr=C3=A9d=C3=A9ric Bertin
>             Fix For: 0.6.0
>
>         Attachments: emptyJobTest.patch, hadoop-424-2.patch, hadoop-424.p=
atch
>
>
> I'm using a MapReduce job to process some data logged and timestamped int=
o files.
> When the job runs, it does not process the whole data, but filters only t=
he data that has been logged since the last job run.
> However, when no new data has been logged, the job fails because the getS=
plits method of InputFormat returns no split. Thus the number of map tasks =
is 0. This is not intercepted, and the job fails at reduce step because it =
seems it does not find any data to process:
> java.io.FileNotFoundException: /local/home/hadoop/var/mapred/local/task_0=
030_r_000000_3/all.2 at org.apache.hadoop.fs.LocalFileSystem.openRaw(LocalF=
ileSystem.java:121) at org.apache.hadoop.fs.FSDataInputStream$Checker.(FSDa=
taInputStream.java:47) at org.apache.hadoop.fs.FSDataInputStream.(FSDataInp=
utStream.java:221) at org.apache.hadoop.fs.FileSystem.open(FileSystem.java:=
150) at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:259) at=
 org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:253) at org.ap=
ache.hadoop.mapred.ReduceTask.run(ReduceTask.java:241) at org.apache.hadoop=
.mapred.TaskTracker$Child.main(TaskTracker.java:1013)
> What should be Hadoop's behaviour in such a case?
> IMHO, the job should be considered as successful. Indeed, this is not a j=
ob failure, but just a lack of input data. WDYT?

--=20
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: htt=
p://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

       

From MAILER-DAEMON Wed Sep  6 19:12:02 2006
Return-Path: 
 <hadoop-dev-return-3588-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 35302 invoked from network); 6 Sep 2006 19:12:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Sep 2006 19:12:02 -0000
Received: (qmail 23657 invoked by uid 500); 6 Sep 2006 19:12:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23599 invoked by uid 500); 6 Sep 2006 19:12:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23571 invoked by uid 99); 6 Sep 2006 19:12:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 12:12:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 12:11:59 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9CF0341001E
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Sep 2006 19:08:23 +0000 (GMT)
Message-ID: <15295935.1157569703640.JavaMail.jira@brutus>
Date: Wed, 6 Sep 2006 12:08:23 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-286) copyFromLocal throws
 LeaseExpiredException
In-Reply-To: <19846443.1149699192499.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-286?page=comments#action_12432939 ] 
            
Yoram Arnon commented on HADOOP-286:
------------------------------------

+1 for not requesting a lease unless a write operation is required (i.e. the patch).

> copyFromLocal throws LeaseExpiredException
> ------------------------------------------
>
>                 Key: HADOOP-286
>                 URL: http://issues.apache.org/jira/browse/HADOOP-286
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.3.0
>         Environment: redhar linux
>            Reporter: Runping Qi
>         Attachments: Lease.patch
>
>
> Loading local files to dfs through hadoop dfs -copyFromLocal failed due to the following exception:
> copyFromLocal: org.apache.hadoop.dfs.LeaseExpiredException: No lease on output_crawled.1.txt
>         at org.apache.hadoop.dfs.FSNamesystem.getAdditionalBlock(FSNamesystem.java:414)
>         at org.apache.hadoop.dfs.NameNode.addBlock(NameNode.java:190)
>         at sun.reflect.GeneratedMethodAccessor9.invoke(Unknown Source)
>         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>         at java.lang.reflect.Method.invoke(Method.java:585)
>         at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:243)
>         at org.apache.hadoop.ipc.Server$Handler.run(Server.java:231)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep  6 20:30:59 2006
Return-Path: 
 <hadoop-dev-return-3589-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 62897 invoked from network); 6 Sep 2006 20:30:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Sep 2006 20:30:59 -0000
Received: (qmail 61218 invoked by uid 500); 6 Sep 2006 20:30:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 61200 invoked by uid 500); 6 Sep 2006 20:30:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 61185 invoked by uid 99); 6 Sep 2006 20:30:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 13:30:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 13:30:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7419D714301
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Sep 2006 20:27:26 +0000 (GMT)
Message-ID: <4856195.1157574446472.JavaMail.jira@brutus>
Date: Wed, 6 Sep 2006 13:27:26 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-312) Connections should not be cached
In-Reply-To: <13061881.1150916131961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-312?page=all ]

Devaraj Das updated HADOOP-312:
-------------------------------

    Attachment: control_conn_caching.patch

Thanks Doug. This patch should address your comments. I have set the time between culler runs to 1000 msec. Please modify it to a more meaningful value if you feel that's not appropriate ( & if you feel the patch is in a form that can be committed :) ).

> Connections should not be cached
> --------------------------------
>
>                 Key: HADOOP-312
>                 URL: http://issues.apache.org/jira/browse/HADOOP-312
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: ipc
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: control_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_connection_caching.patch, no_connection_caching.patch
>
>
> Servers and clients (client include datanodes, tasktrackers, DFSClients & tasks) should not cache connections or maybe cache them for very short periods of time. Clients should set up & tear down connections to the servers everytime they need to contact the servers (including the heartbeats). If connection is cached, then reuse the existing connection for a few subsequent transactions until the connection expires. The heartbeat interval should be more so that many more clients (order of  tens of thousands) can be accomodated within 1 heartbeat interval.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep  6 20:36:55 2006
Return-Path: 
 <hadoop-dev-return-3590-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 64730 invoked from network); 6 Sep 2006 20:36:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Sep 2006 20:36:55 -0000
Received: (qmail 68746 invoked by uid 500); 6 Sep 2006 20:36:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68718 invoked by uid 500); 6 Sep 2006 20:36:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68708 invoked by uid 99); 6 Sep 2006 20:36:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 13:36:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 13:36:54 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DBEF07142FE
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Sep 2006 20:33:22 +0000 (GMT)
Message-ID: <7953713.1157574802898.JavaMail.jira@brutus>
Date: Wed, 6 Sep 2006 13:33:22 -0700 (PDT)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-512) Write and integrate HDFS webdav
 provider
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Write and integrate HDFS webdav provider
----------------------------------------

                 Key: HADOOP-512
                 URL: http://issues.apache.org/jira/browse/HADOOP-512
             Project: Hadoop
          Issue Type: New Feature
          Components: dfs
            Reporter: Michel Tourn


Write and integrate HDFS webdav provider:
Wider context: http://issues.apache.org/jira/browse/HADOOP-496

This patch will include third-party code in the form of a webdav.jar library:
http://issues.apache.org/jira/browse/HADOOP-505

The new code will live in package:
org.apache.hadoop.dfs.webdav

The code will build as part of the regular ant compile-core.

The Web UI in the NameNode and DataNode will run a servlet rooted at /dav:

For ex:
http://namenode:50070/dav/user/michel/streamingtest/in/gz/
http://datanode2:50075/dav/user/michel/streamingtest/in/plain/





-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep  6 20:36:57 2006
Return-Path: 
 <hadoop-dev-return-3591-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 64762 invoked from network); 6 Sep 2006 20:36:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Sep 2006 20:36:57 -0000
Received: (qmail 68946 invoked by uid 500); 6 Sep 2006 20:36:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68926 invoked by uid 500); 6 Sep 2006 20:36:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68917 invoked by uid 99); 6 Sep 2006 20:36:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 13:36:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 13:36:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BD808714301
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Sep 2006 20:33:24 +0000 (GMT)
Message-ID: <16034398.1157574804773.JavaMail.jira@brutus>
Date: Wed, 6 Sep 2006 13:33:24 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-286) copyFromLocal throws
 LeaseExpiredException
In-Reply-To: <19846443.1149699192499.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-286?page=all ]

Konstantin Shvachko updated HADOOP-286:
---------------------------------------

           Status: Patch Available  (was: Open)
    Fix Version/s: 0.6.0
         Assignee: Konstantin Shvachko

Patch for not renewing leases when pendingCreates is empty.
This is a scalability issue.

> copyFromLocal throws LeaseExpiredException
> ------------------------------------------
>
>                 Key: HADOOP-286
>                 URL: http://issues.apache.org/jira/browse/HADOOP-286
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.3.0
>         Environment: redhar linux
>            Reporter: Runping Qi
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.6.0
>
>         Attachments: Lease.patch
>
>
> Loading local files to dfs through hadoop dfs -copyFromLocal failed due to the following exception:
> copyFromLocal: org.apache.hadoop.dfs.LeaseExpiredException: No lease on output_crawled.1.txt
>         at org.apache.hadoop.dfs.FSNamesystem.getAdditionalBlock(FSNamesystem.java:414)
>         at org.apache.hadoop.dfs.NameNode.addBlock(NameNode.java:190)
>         at sun.reflect.GeneratedMethodAccessor9.invoke(Unknown Source)
>         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>         at java.lang.reflect.Method.invoke(Method.java:585)
>         at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:243)
>         at org.apache.hadoop.ipc.Server$Handler.run(Server.java:231)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep  6 20:45:56 2006
Return-Path: 
 <hadoop-dev-return-3592-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67316 invoked from network); 6 Sep 2006 20:45:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Sep 2006 20:45:56 -0000
Received: (qmail 82835 invoked by uid 500); 6 Sep 2006 20:45:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 82813 invoked by uid 500); 6 Sep 2006 20:45:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 82804 invoked by uid 99); 6 Sep 2006 20:45:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 13:45:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 13:45:55 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 14DA7714303
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Sep 2006 20:42:24 +0000 (GMT)
Message-ID: <21579476.1157575344081.JavaMail.jira@brutus>
Date: Wed, 6 Sep 2006 13:42:24 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-263) task status should include
 timestamps for when a job transitions
In-Reply-To: <6879018.1149102869840.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-263?page=comments#action_12432960 ] 
            
Mahadev konar commented on HADOOP-263:
--------------------------------------

Could we include the time taken for task even if it fails? This would be quite handy in calcutating the total machine hours each job takes.

> task status should include timestamps for when a job transitions
> ----------------------------------------------------------------
>
>                 Key: HADOOP-263
>                 URL: http://issues.apache.org/jira/browse/HADOOP-263
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.2.1
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.6.0
>
>         Attachments: Hadoop-263.patch, Hadoop-263_1.patch, patch.txt, patch.txt, patch.txt, patch.txt
>
>
> It would help users to understand what happened if the task status included information about when the task transitioned:
> Map:
>    started
>    finished
> Reduce:
>    started
>    shuffle finished
>    sort finished
>    finished

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep  6 20:52:57 2006
Return-Path: 
 <hadoop-dev-return-3593-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 71878 invoked from network); 6 Sep 2006 20:52:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Sep 2006 20:52:57 -0000
Received: (qmail 90112 invoked by uid 500); 6 Sep 2006 20:52:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 89931 invoked by uid 500); 6 Sep 2006 20:52:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 89922 invoked by uid 99); 6 Sep 2006 20:52:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 13:52:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 13:52:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3BD2F7142FE
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Sep 2006 20:49:24 +0000 (GMT)
Message-ID: <15641604.1157575764240.JavaMail.jira@brutus>
Date: Wed, 6 Sep 2006 13:49:24 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-408) Unit tests take too long to run.
In-Reply-To: <7740811.1154455274018.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-408?page=all ]

Doug Cutting resolved HADOOP-408.
---------------------------------

    Fix Version/s: 0.6.0
       Resolution: Fixed

I just committed a partial patch for this.  With these changes, the total time for unit tests is down from over nine minutes to under six minutes.

> Unit tests take too long to run.
> --------------------------------
>
>                 Key: HADOOP-408
>                 URL: http://issues.apache.org/jira/browse/HADOOP-408
>             Project: Hadoop
>          Issue Type: Wish
>    Affects Versions: 0.4.0
>            Reporter: Doug Cutting
>            Priority: Minor
>             Fix For: 0.6.0
>
>
> Several of the unit tests take over a minute to run.  I suspect most of this time is waiting for daemons to stop.  Perhaps we can restructure daemon shutdown in the test frameworks so that all daemons are first asked to shutdown, and then wait for the actual shutdown of all daemons in the TestCase's tearDown() method.  Also, we might try to combine some unit tests that require the same daemons under a single TestCase caller, so that they share setup/tearDown costs.  Or we could try to simply make daemon shutdowns faster.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep  6 20:57:57 2006
Return-Path: 
 <hadoop-dev-return-3594-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 73571 invoked from network); 6 Sep 2006 20:57:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Sep 2006 20:57:57 -0000
Received: (qmail 94502 invoked by uid 500); 6 Sep 2006 20:57:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94473 invoked by uid 500); 6 Sep 2006 20:57:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94463 invoked by uid 99); 6 Sep 2006 20:57:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 13:57:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 13:57:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CB6497142FE
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Sep 2006 20:54:24 +0000 (GMT)
Message-ID: <1730170.1157576064828.JavaMail.jira@brutus>
Date: Wed, 6 Sep 2006 13:54:24 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-507) Runtime exception in
 org.apache.hadoop.io.WritableFactories.newInstance when trying to startup
 namenode/datanode
In-Reply-To: <17811210.1157476164472.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-507?page=all ]

Doug Cutting updated HADOOP-507:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Owen!

> Runtime exception in org.apache.hadoop.io.WritableFactories.newInstance when trying to startup namenode/datanode
> ----------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-507
>                 URL: http://issues.apache.org/jira/browse/HADOOP-507
>             Project: Hadoop
>          Issue Type: Bug
>          Components: util
>    Affects Versions: 0.5.0
>            Reporter: Arun C Murthy
>         Assigned To: Owen O'Malley
>             Fix For: 0.6.0
>
>         Attachments: write-factory.patch
>
>
> Here's the logs:
> arun@neo ~/dev/java/latest-hadoop/trunk $ cat /home/arun/dev/java/hadoop-0.4.0/build/libhdfs/tests/logs/hadoop-arun-namenode-neo.out
> 2006-09-05 22:18:39,756 INFO  conf.Configuration (Configuration.java:loadResource(496)) - parsing file:/home/arun/dev/java/hadoop-0.4.0/src/c++/libhdfs/tests/conf/hadoop-default.xml
> 2006-09-05 22:18:39,804 INFO  conf.Configuration (Configuration.java:loadResource(496)) - parsing file:/home/arun/dev/java/hadoop-0.4.0/src/c++/libhdfs/tests/conf/hadoop-site.xml
> 2006-09-05 22:18:39,918 INFO  util.Credential (FileResource.java:<clinit>(60)) - Checking Resource aliases
> 2006-09-05 22:18:39,935 INFO  http.HttpServer (HttpServer.java:doStart(729)) - Version Jetty/5.1.4
> 2006-09-05 22:18:40,366 INFO  util.Container (Container.java:start(74)) - Started org.mortbay.jetty.servlet.WebApplicationHandler@1171b26
> 2006-09-05 22:18:40,478 INFO  util.Container (Container.java:start(74)) - Started WebApplicationContext[/,/]
> 2006-09-05 22:18:40,478 INFO  util.Container (Container.java:start(74)) - Started HttpContext[/logs,/logs]
> 2006-09-05 22:18:40,479 INFO  util.Container (Container.java:start(74)) - Started HttpContext[/static,/static]
> 2006-09-05 22:18:40,485 INFO  http.SocketListener (SocketListener.java:start(204)) - Started SocketListener on 0.0.0.0:50070
> 2006-09-05 22:18:40,487 INFO  util.Container (Container.java:start(74)) - Started org.mortbay.jetty.Server@1b09468
> Exception in thread "main" java.lang.RuntimeException: java.lang.IllegalAccessException: Class org.apache.hadoop.io.WritableFactories can not access a member of class org.apache.hadoop.dfs.Block with modifiers "public"
>         at org.apache.hadoop.io.WritableFactories.newInstance(WritableFactories.java:49)
>         at org.apache.hadoop.io.ArrayWritable.readFields(ArrayWritable.java:81)
>         at org.apache.hadoop.dfs.FSEditLog.loadFSEdits(FSEditLog.java:134)
>         at org.apache.hadoop.dfs.FSImage.loadFSImage(FSImage.java:157)
>         at org.apache.hadoop.dfs.FSDirectory.loadFSImage(FSDirectory.java:317)
>         at org.apache.hadoop.dfs.FSNamesystem.<init>(FSNamesystem.java:199)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:132)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:123)
>         at org.apache.hadoop.dfs.NameNode.main(NameNode.java:543)
> Caused by: java.lang.IllegalAccessException: Class org.apache.hadoop.io.WritableFactories can not access a member of class org.apache.hadoop.dfs.Block with modifiers "public"
>         at sun.reflect.Reflection.ensureMemberAccess(Reflection.java:65)
>         at java.lang.Class.newInstance0(Class.java:344)
>         at java.lang.Class.newInstance(Class.java:303)
>         at org.apache.hadoop.io.WritableFactories.newInstance(WritableFactories.java:45)
>         ... 8 more
> Steps to reproduce:
> 1. Start namenode/datanode
> 2. Run hdfs_test program (part of libhdfs)
> 3. Stop namenode/datanode
> 4. goto step 1

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep  6 20:59:58 2006
Return-Path: 
 <hadoop-dev-return-3595-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 74214 invoked from network); 6 Sep 2006 20:59:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Sep 2006 20:59:58 -0000
Received: (qmail 96105 invoked by uid 500); 6 Sep 2006 20:59:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 96081 invoked by uid 500); 6 Sep 2006 20:59:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 96072 invoked by uid 99); 6 Sep 2006 20:59:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 13:59:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 13:59:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 231B4714300
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Sep 2006 20:56:25 +0000 (GMT)
Message-ID: <19824071.1157576185139.JavaMail.jira@brutus>
Date: Wed, 6 Sep 2006 13:56:25 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-288) RFC: Efficient file caching
In-Reply-To: <6015694.1149730109866.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-288?page=comments#action_12432963 ] 
            
Doug Cutting commented on HADOOP-288:
-------------------------------------

If we are using URIs then shouldn't the parameters be java.net.URI?

> RFC: Efficient file caching
> ---------------------------
>
>                 Key: HADOOP-288
>                 URL: http://issues.apache.org/jira/browse/HADOOP-288
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.6.0
>            Reporter: Michel Tourn
>         Assigned To: Mahadev konar
>         Attachments: caching-3.patch, caching-4.patch, caching.patch, caching.patch, test.jar, test.zip
>
>
> RFC: Efficient file caching 
> (on Hadoop Task nodes, for benefit of MapReduce Tasks)
> ------------------------------------------------------
> We will start implementing this soon. Please provide feedback and improvements to this plan.
> The header "Options:" indicates places where simple choices must be made.
> Problem:
> -------
> o MapReduce tasks require access to additional out-of-band data ("dictionaries")
> This out-of-band data is:
> o in addition to the map/reduce inputs.
> o large (1GB+)
> o broadcast (same data is required on all the Task nodes)
> o changes "infrequently", in particular:
> oo it is always constant for all the Tasks in a Job. 
> oo it is often constant for a month at a time 
> oo it may be shared across team members
> o sometimes used by pure-Java MapReduce programs
> o sometimes used by non-Java MapReduce programs (using Hadoop-Streaming)
> o (future) used by programs that use HDFS and Task-trackers but not MapReduce.
> Existing Solutions to the problem:
> ---------------------------------
> These solutions are not good enough. The present proposal is to do Sol 1 with caching.
> Sol 1: Pure Hadoop: package the out-of-band data in the MapReduce Job jar file.
> Sol 2: Non  Hadoop: for each task node run rsync from single source for data.
> Sol 3: Non  Hadoop: use BitTorrent, etc.
> Sol.1 is correct but slow for many reasons:
>  The Job submitter must recreate a large jar(tar) file for every Job.
>   (The jar contains both changing programs and stable dictionaries)
>  The large Jar file must be propagated from the client to HDFS with 
>  a large replication factor. 
>  At the beginning of every Task, the Task tracker gets the job jar from HDFS 
>  and unjars it in the working directory. This can dominate task execution time.
>  
> Sol.2 has nice properties but also some problems.
>  It does not scale well with large clusters (many concurrent rsync read requests i.e. single-source broadcast)
>  It assumes that Hadoop users can upload data using rsync to the cluster nodes. As a policy, this is not allowed.
>  It requires rsync.
>  
> Sol.3 alleviates the rsync scalability problems but 
>       It is a dependency on an external system. 
>       We want something simpler and more tightly integrated with Hadoop.
>       
> Staging (uploading) out-of-band data:
> ------------------------------------
> The out-of-band data will often originate on the local filesystem of a user machine 
>  (i.e. a MapReduce job submitter)
> Nevertheless it makes sense to use HDFS to store the original out-of-band data because:
> o HDFS has (wide) replication. This enables scalable broadcast later.
> o HDFS is an available channel to move data from clients to all task machines.
> o HDFS is convenient as a shared location among Hadoop team members.
> Accessing (downloading) out-of-band data:
> ----------------------------------------
> The non-Java MapReduce programs do not have or want[1] APIs for HDFS.
> Instead these programs just want to access out-of-band data as 
>  local files at predefined paths.
> ([1] Existing programs should be reusable with no changes. 
>  This is often possible bec. communication is over stdin/stdout.)
> Job's jar file as a special case:
> --------------------------------
> One use case is to allow users to make the job jar itself cachable.
> This is only useful in cases where NOTHING changes when a job is resubmitted
>  (no MapRed code changes and no changes in shipped data)
> This situation might occur with an 'extractor' job (gets data from an external source: like Nutch crawler)
> Currently the Hadoop mapred-jar mechanism works in this way:
>  the job jar data is unjarred in the "working directory" of the Task 
>  the jar contains both MapRed java code (added to classpath)
> Cache synchronization:
> ---------------------
> The efficient implementation of the out-of-band data distribution
> is mostly a cache synchronization problem.
> A list of the various aspects where choices must be made follows.
> Cache key:
> ---------
> How do you test that the cached copy is out-of-date?
> Options: 
> 1. the archive/file timestamp 
> 2. the MD5 of the archive/file content
> Comparing source and destination Timestamps is problematic bec. it assumes synchronized clocks.
> Also there is no last-modif metadata in HDFS (for good reasons, like scalability of metadata ops)
> Timestamps stored with the source ('last-propagate-time') do 
>  not require synchronized clocks, only locally monotonic time. 
> (and the worse which can happen at daylight-savings switch is a missed update or an extra-update)
> The cache code could store a copy of the local timestamp 
> in the same way that it caches the value of the content hash along with the source data.
>  
> Cachable unit:
> -------------
> Options: individual files or archives or both.
> Note:
> At the API level, directories will be processed recursively 
> (and the local FS directories will parallel HDFS directories)
> So bulk operations are always possible using directories.
> The question here is whether to handle archives as an additional bulk mechanism.
> Archives are special because:
> o unarchiving occurs transparently as part of the cache sync
> o The cache key is computed on the archive and preserved although 
>   the archive itself is not preserved.
> Supported archive format will be: tar (maybe tgz or compressed jar)
> Archive detection test: by filename extension ".tar" or ".jar"
> Suppose we don't handle archives as special files:
> Pros:
>  o less code, no discussion about which archive formats are supported
>  o fine for large dictionary files. And when files are not large, user may as well
>    put them in the Job jar as usual.
>  o user code could always check and unarchive specific cached files
>    (as a side-effect of MapRed task initialization)
> Cons:
>  o handling small files may be inefficient 
>   (multiple HDFS operations, multiple hash computation, 
>    one 'metadata' hash file along with each small file)
>  o It will not be possible to handle the Job's jar file as a special case of caching 
> Cache isolation: 
> ---------------
> In some cases it may be a problem if the cached HDFS files are updated while a Job is in progress:
> The file may become unavailable for a short period of time and some tasks fail.
> The file may change (atomically) and different tasks use a different version.
> This isolation problem is not addressed in this proposal.
> Standard solutions to the isolation problem are:
> o Assume that Jobs and interfering cache updates won't occur concurrently.
> o Put a version number in the HDFS file paths and refer to a hard-coded version in the Job code.
> o Before running the MapRed job, run a non-distributed application that tests
>   what is the latest available version of the out-of-band data. 
>   Then make this version available to the MapRed job.
>   Two ways to do this. 
>   o either set a job property just-in-time:
>     addCachePathPair("/mydata/v1234/", "localcache/mydata_latest"); 
>     (see Job Configuration for meaning of this)
>   o or publish the decision as an HDFS file containing the version.
>     then rely on user code to read the version, and manually populate the cache:
>     Cache.syncCache("/hdfs/path/fileordir", "relative/local/fileordir");
>     (see MapReduce API for meaning of this)
> Cache synchronization stages:
> ----------------------------
> There are two stages: Client-to-HDFS and HDFS-to-TaskTracker
> o Client-to-HDFS stage.
> Options: A simple option is to not do anything here, i.e. rely on the user.
> This is a reasonable option given previous remarks on the role of HDFS:
>  HDFS is a staging/publishing area and a natural shared location.
> In particular this means that the system need not track 
> where the client files come from.
> o HDFS-to-TaskTracker:
> Client-to-HDFS synchronization (if done at all) should happen before this.
> Then HDFS-to-TaskTracker synchronization must happen right before 
> the data is needed on a node.
> MapReduce cache API:
> -------------------
> Options:
> 1. No change in MapReduce framework code:
> require the user to put this logic in map() (or reduce) function:
>  in MyMapper constructor (or in map() on first record) user is asked to add:
>  
>     Cache.syncCache("/hdfs/path/fileordir", "relative/local/fileordir");
>     Cache.syncCache("..."); //etc.
>   
> -----
> 2. Put this logic in MapReduce framework and use Job properties to
>    communicate the list of pairs (hdfs path; local path)
>  
> Directories are processed recursively.
> If archives are treated specially then they are unarchived on destination.
>  
> MapReduce Job Configuration:
> ---------------------------
> Options:
> with No change in MapReduce framework code (see above)
>  no special Job configuration: 
>    it is up to the MapRed writer to configure and run the cache operations.
> ---
> with Logic in MapReduce framework (see above)
>  some simple Job configuration
> JobConf.addCachePathPair(String, String)
> JobConf.addCachePathPair("/hdfs/path/fileordir", "relative/local/fileordir");

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep  6 21:29:56 2006
Return-Path: 
 <hadoop-dev-return-3596-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85001 invoked from network); 6 Sep 2006 21:29:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Sep 2006 21:29:56 -0000
Received: (qmail 34541 invoked by uid 500); 6 Sep 2006 21:29:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 34354 invoked by uid 500); 6 Sep 2006 21:29:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 34345 invoked by uid 99); 6 Sep 2006 21:29:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 14:29:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 14:29:54 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 572C2714305
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Sep 2006 21:26:23 +0000 (GMT)
Message-ID: <5422172.1157577983354.JavaMail.jira@brutus>
Date: Wed, 6 Sep 2006 14:26:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-414) replace class UTF8 with class Text
In-Reply-To: <26221885.1154481854253.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-414?page=comments#action_12432969 ] 
            
Doug Cutting commented on HADOOP-414:
-------------------------------------

Perhaps we should add a new abstract base class:

public abstract class ImplicitVersionedWritable implements Writable {
  public abstract readFields(DataInputStream in, int version);
  public abstract int currentVersion();
  public readFields(DataInputStream in) {
    readFields(in, currentVersion());
  }
}

Then change DatanodeID to extend this:

public class DatanodeID
  implements WritableComparable
  extends ImplicitVersionedWritable {

  public int currentVersion() { return FSConstants.DFS_CURRENT_VERSION; }
  public void readFields(DataInputStream in, int version) {
    if (version >= -3) {
      name = UTF8.readString();
      ...
    } else {
      name = Text.readString();
      ...
    }
  }

Would that work?

> replace class UTF8 with class Text
> ----------------------------------
>
>                 Key: HADOOP-414
>                 URL: http://issues.apache.org/jira/browse/HADOOP-414
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.5.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.6.0
>
>         Attachments: utf2text.patch
>
>
> Since class UTF8 is deprecated, all references of UTF8 in hadoop should be replaced with class Text if the change does not break the system. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep  6 21:35:56 2006
Return-Path: 
 <hadoop-dev-return-3597-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 87025 invoked from network); 6 Sep 2006 21:35:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Sep 2006 21:35:56 -0000
Received: (qmail 42345 invoked by uid 500); 6 Sep 2006 21:35:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 42314 invoked by uid 500); 6 Sep 2006 21:35:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 42305 invoked by uid 99); 6 Sep 2006 21:35:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 14:35:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 14:35:54 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 95591714305
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Sep 2006 21:32:23 +0000 (GMT)
Message-ID: <12421908.1157578343608.JavaMail.jira@brutus>
Date: Wed, 6 Sep 2006 14:32:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-320) bin/hadoop dfs -mv does not mv
  source's checksum file if source is a file
In-Reply-To: <20152082.1151017529846.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-320?page=all ]

Doug Cutting resolved HADOOP-320.
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Hairong!

> bin/hadoop dfs -mv does not mv  source's checksum file if source is a file
> --------------------------------------------------------------------------
>
>                 Key: HADOOP-320
>                 URL: http://issues.apache.org/jira/browse/HADOOP-320
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.3.2
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.6.0
>
>         Attachments: mv.patch, rename.patch
>
>
> None of the rename operation of DistributedSystem or DFSClient checks if the source is a file or not. Need also to rename the checksum file accordingly if the source is a file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep  6 22:00:58 2006
Return-Path: 
 <hadoop-dev-return-3598-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96312 invoked from network); 6 Sep 2006 22:00:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Sep 2006 22:00:58 -0000
Received: (qmail 74047 invoked by uid 500); 6 Sep 2006 22:00:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 74015 invoked by uid 500); 6 Sep 2006 22:00:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 74006 invoked by uid 99); 6 Sep 2006 22:00:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 15:00:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 15:00:55 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A2115714306
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Sep 2006 21:57:23 +0000 (GMT)
Message-ID: <18114113.1157579843661.JavaMail.jira@brutus>
Date: Wed, 6 Sep 2006 14:57:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-483) Document libhdfs and fix some OS
 specific stuff in Makefile
In-Reply-To: <20264654.1156486690133.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-483?page=comments#action_12432977 ] 
            
Doug Cutting commented on HADOOP-483:
-------------------------------------

Why are you specifying 'gmake' rather than 'make'?  On my cygwin and linux systems the correct binary name is 'make'.

Also, you shouldn't include a copy of hadoop-default.xml, but rather make sure the normal one is on the classpath.  A good way to do this might be to depend on the "jar" task and put the jar on the classpath, since the defaults are included in the jar.


> Document libhdfs and fix some OS specific stuff in Makefile
> -----------------------------------------------------------
>
>                 Key: HADOOP-483
>                 URL: http://issues.apache.org/jira/browse/HADOOP-483
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>         Attachments: HADOOP-483.patch, libhdfs.patch, libhdfs.second.patch, libhdfs_20060906.patch
>
>
> Document libhdfs (api docs and user manual) and fix some OS specific stuff (paths to utilities like rm) in the Makefile and TestDFSCIO.java

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep  6 22:25:01 2006
Return-Path: 
 <hadoop-dev-return-3599-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 2843 invoked from network); 6 Sep 2006 22:25:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Sep 2006 22:25:01 -0000
Received: (qmail 93816 invoked by uid 500); 6 Sep 2006 22:25:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 93629 invoked by uid 500); 6 Sep 2006 22:25:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 93620 invoked by uid 99); 6 Sep 2006 22:25:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 15:25:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 15:25:00 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D6BE17142FA
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Sep 2006 22:21:23 +0000 (GMT)
Message-ID: <23217677.1157581283877.JavaMail.jira@brutus>
Date: Wed, 6 Sep 2006 15:21:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-441) SequenceFile should support 'custom
 compressors'
In-Reply-To: <29672656.1155187633922.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-441?page=comments#action_12432982 ] 
            
Doug Cutting commented on HADOOP-441:
-------------------------------------

This is looking good.  Let's just commit it with the strange default codec performance and work on that later, as we add more codecs.

One minor problem: we should not add any new public Writer constructor signatures.  We should instead deprecate all existing public constructors and refer folks to the static factory methods.  Some of the newly added constructors are also bogus, accepting a codec parameter that is ignored.

> SequenceFile should support 'custom compressors'
> ------------------------------------------------
>
>                 Key: HADOOP-441
>                 URL: http://issues.apache.org/jira/browse/HADOOP-441
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.6.0
>
>         Attachments: codec.patch, codec.patch, codec20060831.patch, codec_updated_interfaces_20060830.patch, reports.tgz
>
>
> SequenceFiles should support 'custom compressors' which can be specified by the user on creation of the file. 
> Readily available packages for gzip and zip (java.util.zip) are among obvious choices to support. Of course there will be hooks so that other compressors can be added in future as long as there is a way to construct (input/output) streams on top of the compressor/decompressor.
> The 'classname' of the 'custom compressor/decompressor' could be stored in the header of the SequenceFile which can then be used by SequenceFile.Reader to figure out the appropriate 'decompressor'. Thus I propose we add constructors to SequenceFile.Writer which take in the 'classname' of the compressor's input/output stream classes (e.g. DeflaterOutputStream/InflaterInputStream or GZIPOutputStream/GZIPInputStream), which acts as the hook for future compressors/decompressors.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep  6 22:26:57 2006
Return-Path: 
 <hadoop-dev-return-3600-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 3457 invoked from network); 6 Sep 2006 22:26:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Sep 2006 22:26:57 -0000
Received: (qmail 95720 invoked by uid 500); 6 Sep 2006 22:26:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95538 invoked by uid 500); 6 Sep 2006 22:26:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95529 invoked by uid 99); 6 Sep 2006 22:26:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 15:26:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 15:26:55 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1201D71430A
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Sep 2006 22:23:24 +0000 (GMT)
Message-ID: <2419146.1157581404070.JavaMail.jira@brutus>
Date: Wed, 6 Sep 2006 15:23:24 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-513) IllegalStateException is thrown by
 TaskTracker
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

IllegalStateException is thrown by TaskTracker
----------------------------------------------

                 Key: HADOOP-513
                 URL: http://issues.apache.org/jira/browse/HADOOP-513
             Project: Hadoop
          Issue Type: Bug
    Affects Versions: 0.5.0
            Reporter: Konstantin Shvachko


I am running TestDFSIO on a one node cluster and getting IllegalStateException for each map task run as listed below.
The same exceptions are flooding logs for TestMiniMRWithDFS on my nightly build for quite a while now.
Does anybody know what that is?
My understanding is that if it is "illegal", then tests should fail.
If not then it should be caught and ignored INTERNALLY.

06/09/06 14:54:50 INFO mapred.TaskTracker: task_0002_r_000000_0 0.25% reduce > copy (3 of 4 at 0.00 MB/s) >
06/09/06 14:54:50 INFO mapred.TaskRunner: task_0002_r_000000_0 Need 1 map output(s)
06/09/06 14:54:50 INFO mapred.TaskRunner: task_0002_r_000000_0 Got 1 known map output location(s); scheduling...
06/09/06 14:54:50 INFO mapred.TaskRunner: task_0002_r_000000_0 Scheduled 1 of 1 known outputs (0 slow hosts and 0 dup hosts)
06/09/06 14:54:50 INFO mapred.TaskRunner: task_0002_r_000000_0 Copying task_0002_m_000003_0 output from ENO.
06/09/06 14:54:50 WARN /: /getMapOutput.jsp?map=task_0002_m_000003_0&reduce=0:
java.lang.IllegalStateException
    at org.mortbay.jetty.servlet.ServletHttpResponse.getWriter(ServletHttpResponse.java:561)
    at org.apache.jasper.runtime.JspWriterImpl.initOut(JspWriterImpl.java:122)
    at org.apache.jasper.runtime.JspWriterImpl.flushBuffer(JspWriterImpl.java:115)
    at org.apache.jasper.runtime.PageContextImpl.release(PageContextImpl.java:190)
    at org.apache.jasper.runtime.JspFactoryImpl.internalReleasePageContext(JspFactoryImpl.java:115)
    at org.apache.jasper.runtime.JspFactoryImpl.releasePageContext(JspFactoryImpl.java:75)
    at org.apache.hadoop.mapred.getMapOutput_jsp._jspService(getMapOutput_jsp.java:100)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:94)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:427)
    at org.mortbay.jetty.servlet.WebApplicationHandler.dispatch(WebApplicationHandler.java:475)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:567)
    at org.mortbay.http.HttpContext.handle(HttpContext.java:1565)
    at org.mortbay.jetty.servlet.WebApplicationContext.handle(WebApplicationContext.java:635)
    at org.mortbay.http.HttpContext.handle(HttpContext.java:1517)
    at org.mortbay.http.HttpServer.service(HttpServer.java:954)
    at org.mortbay.http.HttpConnection.service(HttpConnection.java:814)
    at org.mortbay.http.HttpConnection.handleNext(HttpConnection.java:981)
    at org.mortbay.http.HttpConnection.handle(HttpConnection.java:831)
    at org.mortbay.http.SocketListener.handleConnection(SocketListener.java:244)
    at org.mortbay.util.ThreadedServer.handle(ThreadedServer.java:357)
    at org.mortbay.util.ThreadPool$PoolThread.run(ThreadPool.java:534)
06/09/06 14:54:50 INFO mapred.TaskRunner: task_0002_r_000000_0 done copying task_0002_m_000003_0 output from ENO.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep  6 22:32:56 2006
Return-Path: 
 <hadoop-dev-return-3601-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 5020 invoked from network); 6 Sep 2006 22:32:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Sep 2006 22:32:56 -0000
Received: (qmail 7117 invoked by uid 500); 6 Sep 2006 22:32:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 7097 invoked by uid 500); 6 Sep 2006 22:32:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 7087 invoked by uid 99); 6 Sep 2006 22:32:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 15:32:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 15:32:54 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5D8A9714304
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Sep 2006 22:29:23 +0000 (GMT)
Message-ID: <19993404.1157581763379.JavaMail.jira@brutus>
Date: Wed, 6 Sep 2006 15:29:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-509) initTasks method in the
 JobInProgress class does not correctly configure the classloader with the
 custom map/reduce jar
In-Reply-To: <15763613.1157523862670.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-509?page=comments#action_12432985 ] 
            
Doug Cutting commented on HADOOP-509:
-------------------------------------

Yes, the JobTracker should unpack the jar and construct a classpath similar to what is done in TaskRunner for child processes.  Ideally these would both use the same code to build the classpath.  A caching mechanism, like that in HADOOP-452, could be used to minimize DFS access.

> initTasks method in the JobInProgress class does not correctly configure the classloader with the custom map/reduce jar
> -----------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-509
>                 URL: http://issues.apache.org/jira/browse/HADOOP-509
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.5.0
>            Reporter: Thomas Friol
>
> In this part of code :
>         JobConf jd = new JobConf(localJobFile);
>         FileSystem fs = FileSystem.get(conf);
>         String ifClassName = jd.get("mapred.input.format.class");
>         InputFormat inputFormat;
>         if (ifClassName != null && localJarFile != null) {
>           try {
>             ClassLoader loader =
>               new URLClassLoader(new URL[]{ localFs.pathToFile(localJarFile).toURL() });
>             Class inputFormatClass = Class.forName(ifClassName, true, loader);
>             inputFormat = (InputFormat)inputFormatClass.newInstance();
>           } catch (Exception e) {
>             throw new IOException(e.toString());
>           }
>         } else {
>           inputFormat = jd.getInputFormat();
>         }
> I think that the URLClassLoader should be added the URLs to all the jars contained in the lib directory of the mapred jar. Or maybe, the jar should be unjarred and the classpath should be updated as well as it is done into the TaskRunner class :
>       String jar = conf.getJar();
>       if (jar != null) {                      // if jar exists, it into workDir
>         RunJar.unJar(new File(jar), workDir);
>         File[] libs = new File(workDir, "lib").listFiles();
>         if (libs != null) {
>           for (int i = 0; i < libs.length; i++) {
>             classPath.append(sep);            // add libs from jar to classpath
>             classPath.append(libs[i]);
>           }
>         }
>         classPath.append(sep);
>         classPath.append(new File(workDir, "classes"));
>         classPath.append(sep);
>         classPath.append(workDir);
>       }
> Actually, it is not possible to load a custom InputFormat class. Any thoughts ?
> PS : This issue comes following a discussion on the issue https://issues.apache.org/jira/browse/HADOOP-366

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep  6 22:41:57 2006
Return-Path: 
 <hadoop-dev-return-3602-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 7006 invoked from network); 6 Sep 2006 22:41:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Sep 2006 22:41:57 -0000
Received: (qmail 11619 invoked by uid 500); 6 Sep 2006 22:41:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 11591 invoked by uid 500); 6 Sep 2006 22:41:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 11582 invoked by uid 99); 6 Sep 2006 22:41:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 15:41:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 15:41:55 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3B15D714304
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Sep 2006 22:38:24 +0000 (GMT)
Message-ID: <24243768.1157582304239.JavaMail.jira@brutus>
Date: Wed, 6 Sep 2006 15:38:24 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-286) copyFromLocal throws
 LeaseExpiredException
In-Reply-To: <19846443.1149699192499.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-286?page=all ]

Doug Cutting updated HADOOP-286:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Konstantin!

> copyFromLocal throws LeaseExpiredException
> ------------------------------------------
>
>                 Key: HADOOP-286
>                 URL: http://issues.apache.org/jira/browse/HADOOP-286
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.3.0
>         Environment: redhar linux
>            Reporter: Runping Qi
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.6.0
>
>         Attachments: Lease.patch
>
>
> Loading local files to dfs through hadoop dfs -copyFromLocal failed due to the following exception:
> copyFromLocal: org.apache.hadoop.dfs.LeaseExpiredException: No lease on output_crawled.1.txt
>         at org.apache.hadoop.dfs.FSNamesystem.getAdditionalBlock(FSNamesystem.java:414)
>         at org.apache.hadoop.dfs.NameNode.addBlock(NameNode.java:190)
>         at sun.reflect.GeneratedMethodAccessor9.invoke(Unknown Source)
>         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>         at java.lang.reflect.Method.invoke(Method.java:585)
>         at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:243)
>         at org.apache.hadoop.ipc.Server$Handler.run(Server.java:231)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep  6 22:53:56 2006
Return-Path: 
 <hadoop-dev-return-3603-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10335 invoked from network); 6 Sep 2006 22:53:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Sep 2006 22:53:56 -0000
Received: (qmail 26627 invoked by uid 500); 6 Sep 2006 22:53:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26448 invoked by uid 500); 6 Sep 2006 22:53:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26439 invoked by uid 99); 6 Sep 2006 22:53:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 15:53:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 15:53:54 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 67770714304
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Sep 2006 22:50:23 +0000 (GMT)
Message-ID: <22319891.1157583023421.JavaMail.jira@brutus>
Date: Wed, 6 Sep 2006 15:50:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-312) Connections should not be cached
In-Reply-To: <13061881.1150916131961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-312?page=all ]

Doug Cutting resolved HADOOP-312.
---------------------------------

    Fix Version/s: 0.6.0
       Resolution: Fixed

I just committed this.  Thanks, Devaraj!

> Connections should not be cached
> --------------------------------
>
>                 Key: HADOOP-312
>                 URL: http://issues.apache.org/jira/browse/HADOOP-312
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: ipc
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>             Fix For: 0.6.0
>
>         Attachments: control_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_connection_caching.patch, no_connection_caching.patch
>
>
> Servers and clients (client include datanodes, tasktrackers, DFSClients & tasks) should not cache connections or maybe cache them for very short periods of time. Clients should set up & tear down connections to the servers everytime they need to contact the servers (including the heartbeats). If connection is cached, then reuse the existing connection for a few subsequent transactions until the connection expires. The heartbeat interval should be more so that many more clients (order of  tens of thousands) can be accomodated within 1 heartbeat interval.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep  6 23:16:59 2006
Return-Path: 
 <hadoop-dev-return-3604-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16469 invoked from network); 6 Sep 2006 23:16:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Sep 2006 23:16:59 -0000
Received: (qmail 56094 invoked by uid 500); 6 Sep 2006 23:16:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55995 invoked by uid 500); 6 Sep 2006 23:16:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55951 invoked by uid 99); 6 Sep 2006 23:16:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 16:16:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 16:16:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A3357714305
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Sep 2006 23:13:24 +0000 (GMT)
Message-ID: <27534619.1157584404665.JavaMail.jira@brutus>
Date: Wed, 6 Sep 2006 16:13:24 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-288) RFC: Efficient file caching
In-Reply-To: <6015694.1149730109866.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-288?page=comments#action_12432993 ] 
            
Mahadev konar commented on HADOOP-288:
--------------------------------------

sorry to have caused confusion. The files are specified as dfs://hostname:port/pathtofile. These are later converted to URI's by the framework to get the dfs and absolute paths. This is all similar to distcp where the input and outfiles can be specified as dfs://......

> RFC: Efficient file caching
> ---------------------------
>
>                 Key: HADOOP-288
>                 URL: http://issues.apache.org/jira/browse/HADOOP-288
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.6.0
>            Reporter: Michel Tourn
>         Assigned To: Mahadev konar
>         Attachments: caching-3.patch, caching-4.patch, caching.patch, caching.patch, test.jar, test.zip
>
>
> RFC: Efficient file caching 
> (on Hadoop Task nodes, for benefit of MapReduce Tasks)
> ------------------------------------------------------
> We will start implementing this soon. Please provide feedback and improvements to this plan.
> The header "Options:" indicates places where simple choices must be made.
> Problem:
> -------
> o MapReduce tasks require access to additional out-of-band data ("dictionaries")
> This out-of-band data is:
> o in addition to the map/reduce inputs.
> o large (1GB+)
> o broadcast (same data is required on all the Task nodes)
> o changes "infrequently", in particular:
> oo it is always constant for all the Tasks in a Job. 
> oo it is often constant for a month at a time 
> oo it may be shared across team members
> o sometimes used by pure-Java MapReduce programs
> o sometimes used by non-Java MapReduce programs (using Hadoop-Streaming)
> o (future) used by programs that use HDFS and Task-trackers but not MapReduce.
> Existing Solutions to the problem:
> ---------------------------------
> These solutions are not good enough. The present proposal is to do Sol 1 with caching.
> Sol 1: Pure Hadoop: package the out-of-band data in the MapReduce Job jar file.
> Sol 2: Non  Hadoop: for each task node run rsync from single source for data.
> Sol 3: Non  Hadoop: use BitTorrent, etc.
> Sol.1 is correct but slow for many reasons:
>  The Job submitter must recreate a large jar(tar) file for every Job.
>   (The jar contains both changing programs and stable dictionaries)
>  The large Jar file must be propagated from the client to HDFS with 
>  a large replication factor. 
>  At the beginning of every Task, the Task tracker gets the job jar from HDFS 
>  and unjars it in the working directory. This can dominate task execution time.
>  
> Sol.2 has nice properties but also some problems.
>  It does not scale well with large clusters (many concurrent rsync read requests i.e. single-source broadcast)
>  It assumes that Hadoop users can upload data using rsync to the cluster nodes. As a policy, this is not allowed.
>  It requires rsync.
>  
> Sol.3 alleviates the rsync scalability problems but 
>       It is a dependency on an external system. 
>       We want something simpler and more tightly integrated with Hadoop.
>       
> Staging (uploading) out-of-band data:
> ------------------------------------
> The out-of-band data will often originate on the local filesystem of a user machine 
>  (i.e. a MapReduce job submitter)
> Nevertheless it makes sense to use HDFS to store the original out-of-band data because:
> o HDFS has (wide) replication. This enables scalable broadcast later.
> o HDFS is an available channel to move data from clients to all task machines.
> o HDFS is convenient as a shared location among Hadoop team members.
> Accessing (downloading) out-of-band data:
> ----------------------------------------
> The non-Java MapReduce programs do not have or want[1] APIs for HDFS.
> Instead these programs just want to access out-of-band data as 
>  local files at predefined paths.
> ([1] Existing programs should be reusable with no changes. 
>  This is often possible bec. communication is over stdin/stdout.)
> Job's jar file as a special case:
> --------------------------------
> One use case is to allow users to make the job jar itself cachable.
> This is only useful in cases where NOTHING changes when a job is resubmitted
>  (no MapRed code changes and no changes in shipped data)
> This situation might occur with an 'extractor' job (gets data from an external source: like Nutch crawler)
> Currently the Hadoop mapred-jar mechanism works in this way:
>  the job jar data is unjarred in the "working directory" of the Task 
>  the jar contains both MapRed java code (added to classpath)
> Cache synchronization:
> ---------------------
> The efficient implementation of the out-of-band data distribution
> is mostly a cache synchronization problem.
> A list of the various aspects where choices must be made follows.
> Cache key:
> ---------
> How do you test that the cached copy is out-of-date?
> Options: 
> 1. the archive/file timestamp 
> 2. the MD5 of the archive/file content
> Comparing source and destination Timestamps is problematic bec. it assumes synchronized clocks.
> Also there is no last-modif metadata in HDFS (for good reasons, like scalability of metadata ops)
> Timestamps stored with the source ('last-propagate-time') do 
>  not require synchronized clocks, only locally monotonic time. 
> (and the worse which can happen at daylight-savings switch is a missed update or an extra-update)
> The cache code could store a copy of the local timestamp 
> in the same way that it caches the value of the content hash along with the source data.
>  
> Cachable unit:
> -------------
> Options: individual files or archives or both.
> Note:
> At the API level, directories will be processed recursively 
> (and the local FS directories will parallel HDFS directories)
> So bulk operations are always possible using directories.
> The question here is whether to handle archives as an additional bulk mechanism.
> Archives are special because:
> o unarchiving occurs transparently as part of the cache sync
> o The cache key is computed on the archive and preserved although 
>   the archive itself is not preserved.
> Supported archive format will be: tar (maybe tgz or compressed jar)
> Archive detection test: by filename extension ".tar" or ".jar"
> Suppose we don't handle archives as special files:
> Pros:
>  o less code, no discussion about which archive formats are supported
>  o fine for large dictionary files. And when files are not large, user may as well
>    put them in the Job jar as usual.
>  o user code could always check and unarchive specific cached files
>    (as a side-effect of MapRed task initialization)
> Cons:
>  o handling small files may be inefficient 
>   (multiple HDFS operations, multiple hash computation, 
>    one 'metadata' hash file along with each small file)
>  o It will not be possible to handle the Job's jar file as a special case of caching 
> Cache isolation: 
> ---------------
> In some cases it may be a problem if the cached HDFS files are updated while a Job is in progress:
> The file may become unavailable for a short period of time and some tasks fail.
> The file may change (atomically) and different tasks use a different version.
> This isolation problem is not addressed in this proposal.
> Standard solutions to the isolation problem are:
> o Assume that Jobs and interfering cache updates won't occur concurrently.
> o Put a version number in the HDFS file paths and refer to a hard-coded version in the Job code.
> o Before running the MapRed job, run a non-distributed application that tests
>   what is the latest available version of the out-of-band data. 
>   Then make this version available to the MapRed job.
>   Two ways to do this. 
>   o either set a job property just-in-time:
>     addCachePathPair("/mydata/v1234/", "localcache/mydata_latest"); 
>     (see Job Configuration for meaning of this)
>   o or publish the decision as an HDFS file containing the version.
>     then rely on user code to read the version, and manually populate the cache:
>     Cache.syncCache("/hdfs/path/fileordir", "relative/local/fileordir");
>     (see MapReduce API for meaning of this)
> Cache synchronization stages:
> ----------------------------
> There are two stages: Client-to-HDFS and HDFS-to-TaskTracker
> o Client-to-HDFS stage.
> Options: A simple option is to not do anything here, i.e. rely on the user.
> This is a reasonable option given previous remarks on the role of HDFS:
>  HDFS is a staging/publishing area and a natural shared location.
> In particular this means that the system need not track 
> where the client files come from.
> o HDFS-to-TaskTracker:
> Client-to-HDFS synchronization (if done at all) should happen before this.
> Then HDFS-to-TaskTracker synchronization must happen right before 
> the data is needed on a node.
> MapReduce cache API:
> -------------------
> Options:
> 1. No change in MapReduce framework code:
> require the user to put this logic in map() (or reduce) function:
>  in MyMapper constructor (or in map() on first record) user is asked to add:
>  
>     Cache.syncCache("/hdfs/path/fileordir", "relative/local/fileordir");
>     Cache.syncCache("..."); //etc.
>   
> -----
> 2. Put this logic in MapReduce framework and use Job properties to
>    communicate the list of pairs (hdfs path; local path)
>  
> Directories are processed recursively.
> If archives are treated specially then they are unarchived on destination.
>  
> MapReduce Job Configuration:
> ---------------------------
> Options:
> with No change in MapReduce framework code (see above)
>  no special Job configuration: 
>    it is up to the MapRed writer to configure and run the cache operations.
> ---
> with Logic in MapReduce framework (see above)
>  some simple Job configuration
> JobConf.addCachePathPair(String, String)
> JobConf.addCachePathPair("/hdfs/path/fileordir", "relative/local/fileordir");

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep  6 23:22:57 2006
Return-Path: 
 <hadoop-dev-return-3605-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20070 invoked from network); 6 Sep 2006 23:22:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Sep 2006 23:22:57 -0000
Received: (qmail 64399 invoked by uid 500); 6 Sep 2006 23:22:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64213 invoked by uid 500); 6 Sep 2006 23:22:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64204 invoked by uid 99); 6 Sep 2006 23:22:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 16:22:55 -0700
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=INFO_TLD
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 16:22:55 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E1E62714305
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Sep 2006 23:19:23 +0000 (GMT)
Message-ID: <21006127.1157584763922.JavaMail.jira@brutus>
Date: Wed, 6 Sep 2006 16:19:23 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-441) SequenceFile should support 'custom
 compressors'
In-Reply-To: <29672656.1155187633922.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-441?page=comments#action_12432995 ] 
            
Owen O'Malley commented on HADOOP-441:
--------------------------------------

In particular, the Writer constructor should not take a codec since it doesn't compress.

I'd also like the LOG.info("Created a Codec object") downgraded to a LOG.debug.

> SequenceFile should support 'custom compressors'
> ------------------------------------------------
>
>                 Key: HADOOP-441
>                 URL: http://issues.apache.org/jira/browse/HADOOP-441
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.6.0
>
>         Attachments: codec.patch, codec.patch, codec20060831.patch, codec_updated_interfaces_20060830.patch, reports.tgz
>
>
> SequenceFiles should support 'custom compressors' which can be specified by the user on creation of the file. 
> Readily available packages for gzip and zip (java.util.zip) are among obvious choices to support. Of course there will be hooks so that other compressors can be added in future as long as there is a way to construct (input/output) streams on top of the compressor/decompressor.
> The 'classname' of the 'custom compressor/decompressor' could be stored in the header of the SequenceFile which can then be used by SequenceFile.Reader to figure out the appropriate 'decompressor'. Thus I propose we add constructors to SequenceFile.Writer which take in the 'classname' of the compressor's input/output stream classes (e.g. DeflaterOutputStream/InflaterInputStream or GZIPOutputStream/GZIPInputStream), which acts as the hook for future compressors/decompressors.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep  6 23:29:56 2006
Return-Path: 
 <hadoop-dev-return-3606-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 21765 invoked from network); 6 Sep 2006 23:29:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Sep 2006 23:29:56 -0000
Received: (qmail 75859 invoked by uid 500); 6 Sep 2006 23:29:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75841 invoked by uid 500); 6 Sep 2006 23:29:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75832 invoked by uid 99); 6 Sep 2006 23:29:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 16:29:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 16:29:54 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 616B6714305
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Sep 2006 23:26:23 +0000 (GMT)
Message-ID: <6225774.1157585183396.JavaMail.jira@brutus>
Date: Wed, 6 Sep 2006 16:26:23 -0700 (PDT)
From: "Lorenzo Thione (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-497) DataNodes and TaskTrackers should be
 able to report hostnames and ips relative to customizable network
 interfaces and nameservers
In-Reply-To: <3331836.1156991602375.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-497?page=comments#action_12432996 ] 
            
Lorenzo Thione commented on HADOOP-497:
---------------------------------------

Here's a new patch, with reformatted column-size and new names for properties.

mapred.tasktracker.dns.interface
mapred.tasktracker.dns.nameserver
dfs.datanode.dns.interface
dfs.datanode.dns.nameserver

> DataNodes and TaskTrackers should be able to report hostnames and ips relative to customizable network interfaces and nameservers
> ---------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-497
>                 URL: http://issues.apache.org/jira/browse/HADOOP-497
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred, dfs, util
>    Affects Versions: 0.6.0
>            Reporter: Lorenzo Thione
>            Priority: Minor
>         Attachments: dnsjava-2.0.2.jar, net-dns.patch, net-dns.patch, nif-utils.patch
>
>
> This patch allows for network configuration parameters to be aded to the hadoop-site.xml file. These parameters specify a network interface name and an optional nameserver hostname which DataNodes and TaskTrackers consult to resolve  their hostnames from the IP bound to the specified network interface.
> This is useful when machines that are part of different physical or logical network need to participate in hadoop clusters as client nodes. The hostname and IP reported by InetAddress.getLocalHost() are not necessarily the ones that will allow the JobTracker and NameNode to reach the clients, as well as not necessarily the ones through which the DFS clients can reach the DataNodes.
> The configuration parameters are
>  - cluster.report.nif
>  - cluster.report.ns
> nif: takes the name of a network interface, like en0, en1 (on macs), eth0, etc...
> ns: the host name of a DNS server to use when resolving the IP bound to the specified nif
> These parameters are set by default to the value "default" which will replicate the current behavior of reporting InetAddress.getLocalHost().getHostName() and getHostAddress()
> As part of the patch, a new library dnsjava was added along with its license information (BSD license). The list of affected files is:
> src
>  org.apache.hadoop.dfs.DataNode 
>  org.apache.hadoop.mapred.taskTracker 
>  org.apache.hadoop.util.NetworkUtils
> conf
>  hadoop-default.xml
> lib
>  dnsjava-2.0.2.jar
>  dnsjava-2.0.2.LICENSE.txt

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep  6 23:29:57 2006
Return-Path: 
 <hadoop-dev-return-3607-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 21776 invoked from network); 6 Sep 2006 23:29:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Sep 2006 23:29:57 -0000
Received: (qmail 76075 invoked by uid 500); 6 Sep 2006 23:29:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 76050 invoked by uid 500); 6 Sep 2006 23:29:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 76041 invoked by uid 99); 6 Sep 2006 23:29:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 16:29:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 16:29:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7DB0B714309
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Sep 2006 23:26:24 +0000 (GMT)
Message-ID: <32987359.1157585184512.JavaMail.jira@brutus>
Date: Wed, 6 Sep 2006 16:26:24 -0700 (PDT)
From: "Lorenzo Thione (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-497) DataNodes and TaskTrackers should be
 able to report hostnames and ips relative to customizable network
 interfaces and nameservers
In-Reply-To: <3331836.1156991602375.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-497?page=all ]

Lorenzo Thione updated HADOOP-497:
----------------------------------

    Attachment: net-dns.patch

> DataNodes and TaskTrackers should be able to report hostnames and ips relative to customizable network interfaces and nameservers
> ---------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-497
>                 URL: http://issues.apache.org/jira/browse/HADOOP-497
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred, dfs, util
>    Affects Versions: 0.6.0
>            Reporter: Lorenzo Thione
>            Priority: Minor
>         Attachments: dnsjava-2.0.2.jar, net-dns.patch, net-dns.patch, nif-utils.patch
>
>
> This patch allows for network configuration parameters to be aded to the hadoop-site.xml file. These parameters specify a network interface name and an optional nameserver hostname which DataNodes and TaskTrackers consult to resolve  their hostnames from the IP bound to the specified network interface.
> This is useful when machines that are part of different physical or logical network need to participate in hadoop clusters as client nodes. The hostname and IP reported by InetAddress.getLocalHost() are not necessarily the ones that will allow the JobTracker and NameNode to reach the clients, as well as not necessarily the ones through which the DFS clients can reach the DataNodes.
> The configuration parameters are
>  - cluster.report.nif
>  - cluster.report.ns
> nif: takes the name of a network interface, like en0, en1 (on macs), eth0, etc...
> ns: the host name of a DNS server to use when resolving the IP bound to the specified nif
> These parameters are set by default to the value "default" which will replicate the current behavior of reporting InetAddress.getLocalHost().getHostName() and getHostAddress()
> As part of the patch, a new library dnsjava was added along with its license information (BSD license). The list of affected files is:
> src
>  org.apache.hadoop.dfs.DataNode 
>  org.apache.hadoop.mapred.taskTracker 
>  org.apache.hadoop.util.NetworkUtils
> conf
>  hadoop-default.xml
> lib
>  dnsjava-2.0.2.jar
>  dnsjava-2.0.2.LICENSE.txt

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep  7 01:00:15 2006
Return-Path: 
 <hadoop-dev-return-3608-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 47960 invoked from network); 7 Sep 2006 01:00:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Sep 2006 01:00:15 -0000
Received: (qmail 56268 invoked by uid 500); 7 Sep 2006 01:00:15 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 56251 invoked by uid 500); 7 Sep 2006 01:00:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 56242 invoked by uid 99); 7 Sep 2006 01:00:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 18:00:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 18:00:14 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DE92C71430A
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Sep 2006 00:56:23 +0000 (GMT)
Message-ID: <29729811.1157590583908.JavaMail.jira@brutus>
Date: Wed, 6 Sep 2006 17:56:23 -0700 (PDT)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-423) file paths are not normalized
In-Reply-To: <13847288.1154636773936.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-423?page=comments#action_12433008 ] 
            
Wendy Chien commented on HADOOP-423:
------------------------------------

To fix this, we'll detect and normalize relative paths in the Path class.  For backwards compatibility, we'll allow people to rename or remove existing files/dirs that contain '.' or '..' .  Or do people think that's not necessary because it's unlikely anyone has been using '.' and '..' in their paths intentionally?  (Though I suppose if they did unintentionally, it might be nice to let them remove them.)
      

> file paths are not normalized
> -----------------------------
>
>                 Key: HADOOP-423
>                 URL: http://issues.apache.org/jira/browse/HADOOP-423
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Christian Kunz
>         Assigned To: Wendy Chien
>             Fix For: 0.6.0
>
>
> Paths containing  '.' or '..' are not normalized -- the corresponding directories actually seem to be created. This is inconsistent and unexpected behavior, and  is particularly painful when running from a working directory, using relative paths that start with ...

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep  7 01:29:59 2006
Return-Path: 
 <hadoop-dev-return-3609-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 65437 invoked from network); 7 Sep 2006 01:29:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Sep 2006 01:29:59 -0000
Received: (qmail 85933 invoked by uid 500); 7 Sep 2006 01:29:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 85914 invoked by uid 500); 7 Sep 2006 01:29:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 85899 invoked by uid 99); 7 Sep 2006 01:29:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 18:29:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 18:29:54 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4DE7C71430A
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Sep 2006 01:26:23 +0000 (GMT)
Message-ID: <149186.1157592383316.JavaMail.jira@brutus>
Date: Wed, 6 Sep 2006 18:26:23 -0700 (PDT)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-438) DFS pathname limitation.
In-Reply-To: <28546816.1155172213960.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-438?page=comments#action_12433010 ] 
            
Wendy Chien commented on HADOOP-438:
------------------------------------

To fix this we're going to enforce a pathname limit in the Path class constructor. .  (8K in length and 1K in depth.)   The constructor will throw an exception which will be passed back to the client. 

> DFS pathname limitation.
> ------------------------
>
>                 Key: HADOOP-438
>                 URL: http://issues.apache.org/jira/browse/HADOOP-438
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0, 0.4.0, 0.3.2, 0.3.1, 0.3.0, 0.2.1, 0.2.0, 0.1.1, 0.1.0
>            Reporter: Konstantin Shvachko
>             Fix For: 0.6.0
>
>
> I was trying to create a deep hierarchy of directories using DFS mkdirs().
> When the path to the leaf directory became long (~20000) DFS was still able to create
> directories with these names, but UTF8 started truncating long strings resulting in
> incorrect logging of namespace edits. That later crashed the namenode during restart,
> when it was trying to reproduce file creation logged in the edits file with truncated names.
> UTF8 is deprecated now so we will have to replace it with Text.
> With UTF8  we should enforce a pathname limit of 0xffff/3 = 21845
> With Text it is going to be larger. Not sure what the exact number is.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep  7 01:56:42 2006
Return-Path: 
 <hadoop-dev-return-3610-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 70736 invoked from network); 7 Sep 2006 01:56:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Sep 2006 01:56:42 -0000
Received: (qmail 16394 invoked by uid 500); 7 Sep 2006 01:56:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 16377 invoked by uid 500); 7 Sep 2006 01:56:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 16368 invoked by uid 99); 7 Sep 2006 01:56:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 18:56:41 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.145.54.171] (HELO mrout1.yahoo.com) (216.145.54.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 18:56:40 -0700
Received: from [10.72.104.183] (enoughhot-lx.corp.yahoo.com [10.72.104.183])
	by mrout1.yahoo.com (8.13.6/8.13.6/y.out) with ESMTP id k871tnQ0012087
	for <hadoop-dev@lucene.apache.org>; Wed, 6 Sep 2006 18:55:49 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=message-id:date:from:user-agent:x-accept-language:
	mime-version:to:subject:content-type:content-transfer-encoding;
	b=YgeDrH58utRCd2Fa8hAFE76coepnLzwTvsylZnJCegWlvQHjiYwdBsDMNRQrbP3v
Message-ID: <44FF7C25.9090505@yahoo-inc.com>
Date: Wed, 06 Sep 2006 18:55:49 -0700
From: Konstantin Shvachko <shv@yahoo-inc.com>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Hadoop Manual upgrade procedures on Wiki
Content-Type: text/plain; charset=windows-1251; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I created a Wiki page that describes a step-by-step procedure for 
upgrading Hadoop to a
newer software version, and outlines enhancements that'd make the 
upgrade simple and safe.
This is a result of discussions held on this mailing list (some links 
provided).
The upgrade procedure is based on extensive maintenance experience of a 
large cluster.

This is the link:
http://wiki.apache.org/lucene-hadoop/Hadoop_Upgrade

Please share your views.
Konstantin

From MAILER-DAEMON Thu Sep  7 02:05:59 2006
Return-Path: 
 <hadoop-dev-return-3611-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 72761 invoked from network); 7 Sep 2006 02:06:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Sep 2006 02:05:59 -0000
Received: (qmail 26078 invoked by uid 500); 7 Sep 2006 02:05:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 25899 invoked by uid 500); 7 Sep 2006 02:05:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 25757 invoked by uid 99); 7 Sep 2006 02:05:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 19:05:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 19:05:55 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BA92371431F
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Sep 2006 02:02:23 +0000 (GMT)
Message-ID: <17229842.1157594543761.JavaMail.jira@brutus>
Date: Wed, 6 Sep 2006 19:02:23 -0700 (PDT)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-514) namenode heartbeat interval should be
 configurable
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

namenode heartbeat interval should be configurable
--------------------------------------------------

                 Key: HADOOP-514
                 URL: http://issues.apache.org/jira/browse/HADOOP-514
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
            Reporter: Wendy Chien


The namenode heartbeat interval is currently a constant in FSConstants.   It should be configurable instead.  Things which currently rely on the heartbeat occuring fairly frequently should be disassociated.    


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep  7 03:38:27 2006
Return-Path: 
 <hadoop-dev-return-3612-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 89332 invoked from network); 7 Sep 2006 03:38:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Sep 2006 03:38:27 -0000
Received: (qmail 36611 invoked by uid 500); 7 Sep 2006 03:38:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 36586 invoked by uid 500); 7 Sep 2006 03:38:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 36576 invoked by uid 99); 7 Sep 2006 03:38:26 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 20:38:25 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 40145714305
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Sep 2006 03:34:24 +0000 (GMT)
Message-ID: <3472031.1157600064259.JavaMail.jira@brutus>
Date: Wed, 6 Sep 2006 20:34:24 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-441) SequenceFile should support 'custom
 compressors'
In-Reply-To: <29672656.1155187633922.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-441?page=all ]

Arun C Murthy updated HADOOP-441:
---------------------------------

    Attachment: codec_20060907.patch

Here's a new patch incorporating the feedback... my bad, I should never have fiddle around with SequenceFile.Writer's constructors as Owen pointed out; guess the whole perf issue occupied my thoughts - fixed now.

> SequenceFile should support 'custom compressors'
> ------------------------------------------------
>
>                 Key: HADOOP-441
>                 URL: http://issues.apache.org/jira/browse/HADOOP-441
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.6.0
>
>         Attachments: codec.patch, codec.patch, codec20060831.patch, codec_20060907.patch, codec_updated_interfaces_20060830.patch, reports.tgz
>
>
> SequenceFiles should support 'custom compressors' which can be specified by the user on creation of the file. 
> Readily available packages for gzip and zip (java.util.zip) are among obvious choices to support. Of course there will be hooks so that other compressors can be added in future as long as there is a way to construct (input/output) streams on top of the compressor/decompressor.
> The 'classname' of the 'custom compressor/decompressor' could be stored in the header of the SequenceFile which can then be used by SequenceFile.Reader to figure out the appropriate 'decompressor'. Thus I propose we add constructors to SequenceFile.Writer which take in the 'classname' of the compressor's input/output stream classes (e.g. DeflaterOutputStream/InflaterInputStream or GZIPOutputStream/GZIPInputStream), which acts as the hook for future compressors/decompressors.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep  7 03:40:26 2006
Return-Path: 
 <hadoop-dev-return-3613-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 89717 invoked from network); 7 Sep 2006 03:40:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Sep 2006 03:40:26 -0000
Received: (qmail 38710 invoked by uid 500); 7 Sep 2006 03:40:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38688 invoked by uid 500); 7 Sep 2006 03:40:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38679 invoked by uid 99); 7 Sep 2006 03:40:25 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 20:40:25 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EB8C1714305
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Sep 2006 03:36:23 +0000 (GMT)
Message-ID: <27464546.1157600183962.JavaMail.jira@brutus>
Date: Wed, 6 Sep 2006 20:36:23 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-441) SequenceFile should support 'custom
 compressors'
In-Reply-To: <29672656.1155187633922.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-441?page=all ]

Arun C Murthy updated HADOOP-441:
---------------------------------

    Status: Patch Available  (was: Open)

> SequenceFile should support 'custom compressors'
> ------------------------------------------------
>
>                 Key: HADOOP-441
>                 URL: http://issues.apache.org/jira/browse/HADOOP-441
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.6.0
>
>         Attachments: codec.patch, codec.patch, codec20060831.patch, codec_20060907.patch, codec_updated_interfaces_20060830.patch, reports.tgz
>
>
> SequenceFiles should support 'custom compressors' which can be specified by the user on creation of the file. 
> Readily available packages for gzip and zip (java.util.zip) are among obvious choices to support. Of course there will be hooks so that other compressors can be added in future as long as there is a way to construct (input/output) streams on top of the compressor/decompressor.
> The 'classname' of the 'custom compressor/decompressor' could be stored in the header of the SequenceFile which can then be used by SequenceFile.Reader to figure out the appropriate 'decompressor'. Thus I propose we add constructors to SequenceFile.Writer which take in the 'classname' of the compressor's input/output stream classes (e.g. DeflaterOutputStream/InflaterInputStream or GZIPOutputStream/GZIPInputStream), which acts as the hook for future compressors/decompressors.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep  7 06:51:57 2006
Return-Path: 
 <hadoop-dev-return-3614-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 26781 invoked from network); 7 Sep 2006 06:51:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Sep 2006 06:51:57 -0000
Received: (qmail 40646 invoked by uid 500); 7 Sep 2006 06:51:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40465 invoked by uid 500); 7 Sep 2006 06:51:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 40449 invoked by uid 99); 7 Sep 2006 06:51:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 23:51:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Sep 2006 23:51:55 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B4B147142FA
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Sep 2006 06:48:23 +0000 (GMT)
Message-ID: <18160764.1157611703737.JavaMail.jira@brutus>
Date: Wed, 6 Sep 2006 23:48:23 -0700 (PDT)
From: "Thomas Friol (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-509) initTasks method in the
 JobInProgress class does not correctly configure the classloader with the
 custom map/reduce jar
In-Reply-To: <15763613.1157523862670.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-509?page=comments#action_12433033 ] 
            
Thomas Friol commented on HADOOP-509:
-------------------------------------

Yes and it seems there is some code located in the IsolationRunner class which creates a classloader provided a JobConf and a working directory.

> initTasks method in the JobInProgress class does not correctly configure the classloader with the custom map/reduce jar
> -----------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-509
>                 URL: http://issues.apache.org/jira/browse/HADOOP-509
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.5.0
>            Reporter: Thomas Friol
>
> In this part of code :
>         JobConf jd = new JobConf(localJobFile);
>         FileSystem fs = FileSystem.get(conf);
>         String ifClassName = jd.get("mapred.input.format.class");
>         InputFormat inputFormat;
>         if (ifClassName != null && localJarFile != null) {
>           try {
>             ClassLoader loader =
>               new URLClassLoader(new URL[]{ localFs.pathToFile(localJarFile).toURL() });
>             Class inputFormatClass = Class.forName(ifClassName, true, loader);
>             inputFormat = (InputFormat)inputFormatClass.newInstance();
>           } catch (Exception e) {
>             throw new IOException(e.toString());
>           }
>         } else {
>           inputFormat = jd.getInputFormat();
>         }
> I think that the URLClassLoader should be added the URLs to all the jars contained in the lib directory of the mapred jar. Or maybe, the jar should be unjarred and the classpath should be updated as well as it is done into the TaskRunner class :
>       String jar = conf.getJar();
>       if (jar != null) {                      // if jar exists, it into workDir
>         RunJar.unJar(new File(jar), workDir);
>         File[] libs = new File(workDir, "lib").listFiles();
>         if (libs != null) {
>           for (int i = 0; i < libs.length; i++) {
>             classPath.append(sep);            // add libs from jar to classpath
>             classPath.append(libs[i]);
>           }
>         }
>         classPath.append(sep);
>         classPath.append(new File(workDir, "classes"));
>         classPath.append(sep);
>         classPath.append(workDir);
>       }
> Actually, it is not possible to load a custom InputFormat class. Any thoughts ?
> PS : This issue comes following a discussion on the issue https://issues.apache.org/jira/browse/HADOOP-366

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep  7 07:44:57 2006
Return-Path: 
 <hadoop-dev-return-3615-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 53076 invoked from network); 7 Sep 2006 07:44:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Sep 2006 07:44:57 -0000
Received: (qmail 34778 invoked by uid 500); 7 Sep 2006 07:44:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 34599 invoked by uid 500); 7 Sep 2006 07:44:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 34590 invoked by uid 99); 7 Sep 2006 07:44:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Sep 2006 00:44:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Sep 2006 00:44:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E773B41001C
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Sep 2006 07:41:23 +0000 (GMT)
Message-ID: <29797907.1157614883945.JavaMail.jira@brutus>
Date: Thu, 7 Sep 2006 00:41:23 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-263) task status should include
 timestamps for when a job transitions
In-Reply-To: <6879018.1149102869840.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-263?page=comments#action_12433049 ] 
            
Owen O'Malley commented on HADOOP-263:
--------------------------------------

There are still a lot (8?) of public procedures without java doc in this patch.

The set ? time methods could all be package local rather than public, couldn't they? Restricting their visibility is a good thing.

> task status should include timestamps for when a job transitions
> ----------------------------------------------------------------
>
>                 Key: HADOOP-263
>                 URL: http://issues.apache.org/jira/browse/HADOOP-263
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.2.1
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.6.0
>
>         Attachments: Hadoop-263.patch, Hadoop-263_1.patch, patch.txt, patch.txt, patch.txt, patch.txt
>
>
> It would help users to understand what happened if the task status included information about when the task transitioned:
> Map:
>    started
>    finished
> Reduce:
>    started
>    shuffle finished
>    sort finished
>    finished

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep  7 08:04:57 2006
Return-Path: 
 <hadoop-dev-return-3616-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57801 invoked from network); 7 Sep 2006 08:04:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Sep 2006 08:04:57 -0000
Received: (qmail 62327 invoked by uid 500); 7 Sep 2006 08:04:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62304 invoked by uid 500); 7 Sep 2006 08:04:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62295 invoked by uid 99); 7 Sep 2006 08:04:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Sep 2006 01:04:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Sep 2006 01:04:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EB419410017
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Sep 2006 08:01:23 +0000 (GMT)
Message-ID: <26772862.1157616083961.JavaMail.jira@brutus>
Date: Thu, 7 Sep 2006 01:01:23 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-263) task status should include
 timestamps for when a job transitions
In-Reply-To: <6879018.1149102869840.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-263?page=comments#action_12433055 ] 
            
Sanjay Dahiya commented on HADOOP-263:
--------------------------------------

I left plain empty get/set methods without comments. Since we are putting javadoc for *all* public methods for new code, i'll add these now. 

Also for failed task time, I will set finish time to the time failure was reported. 

> task status should include timestamps for when a job transitions
> ----------------------------------------------------------------
>
>                 Key: HADOOP-263
>                 URL: http://issues.apache.org/jira/browse/HADOOP-263
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.2.1
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.6.0
>
>         Attachments: Hadoop-263.patch, Hadoop-263_1.patch, patch.txt, patch.txt, patch.txt, patch.txt
>
>
> It would help users to understand what happened if the task status included information about when the task transitioned:
> Map:
>    started
>    finished
> Reduce:
>    started
>    shuffle finished
>    sort finished
>    finished

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep  7 08:06:58 2006
Return-Path: 
 <hadoop-dev-return-3617-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 58259 invoked from network); 7 Sep 2006 08:06:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Sep 2006 08:06:58 -0000
Received: (qmail 64606 invoked by uid 500); 7 Sep 2006 08:06:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64418 invoked by uid 500); 7 Sep 2006 08:06:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64409 invoked by uid 99); 7 Sep 2006 08:06:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Sep 2006 01:06:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Sep 2006 01:06:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0EB7E410017
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Sep 2006 08:03:25 +0000 (GMT)
Message-ID: <19979628.1157616205057.JavaMail.jira@brutus>
Date: Thu, 7 Sep 2006 01:03:25 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-50) dfs datanode should store blocks in
 multiple directories
In-Reply-To: <133992549.1140560804844.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-50?page=all ]

Sameer Paranjpye reassigned HADOOP-50:
--------------------------------------

    Assignee: Milind Bhandarkar  (was: Mike Cafarella)

> dfs datanode should store blocks in multiple directories
> --------------------------------------------------------
>
>                 Key: HADOOP-50
>                 URL: http://issues.apache.org/jira/browse/HADOOP-50
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Milind Bhandarkar
>         Attachments: hadoop.50.patch.1
>
>
> The datanode currently stores all file blocks in a single directory.  With 32MB blocks and terabyte filesystems, this will create too many files in a single directory for many filesystems.  Thus blocks should be stored in multiple directories, perhaps even a shallow hierarchy.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep  7 08:08:57 2006
Return-Path: 
 <hadoop-dev-return-3618-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 58556 invoked from network); 7 Sep 2006 08:08:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Sep 2006 08:08:57 -0000
Received: (qmail 65528 invoked by uid 500); 7 Sep 2006 08:08:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 65506 invoked by uid 500); 7 Sep 2006 08:08:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 65489 invoked by uid 99); 7 Sep 2006 08:08:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Sep 2006 01:08:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Sep 2006 01:08:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1493D410011
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Sep 2006 08:05:24 +0000 (GMT)
Message-ID: <20671544.1157616324081.JavaMail.jira@brutus>
Date: Thu, 7 Sep 2006 01:05:24 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-50) dfs datanode should store blocks in
 multiple directories
In-Reply-To: <133992549.1140560804844.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-50?page=all ]

Sameer Paranjpye resolved HADOOP-50.
------------------------------------

    Fix Version/s: 0.6.0
       Resolution: Fixed

> dfs datanode should store blocks in multiple directories
> --------------------------------------------------------
>
>                 Key: HADOOP-50
>                 URL: http://issues.apache.org/jira/browse/HADOOP-50
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.6.0
>
>         Attachments: hadoop.50.patch.1
>
>
> The datanode currently stores all file blocks in a single directory.  With 32MB blocks and terabyte filesystems, this will create too many files in a single directory for many filesystems.  Thus blocks should be stored in multiple directories, perhaps even a shallow hierarchy.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep  7 13:36:02 2006
Return-Path: 
 <hadoop-dev-return-3619-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76525 invoked from network); 7 Sep 2006 13:36:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Sep 2006 13:36:02 -0000
Received: (qmail 56339 invoked by uid 500); 7 Sep 2006 13:36:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 56302 invoked by uid 500); 7 Sep 2006 13:36:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 56293 invoked by uid 99); 7 Sep 2006 13:36:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Sep 2006 06:36:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Sep 2006 06:36:00 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D02B7714306
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Sep 2006 13:32:27 +0000 (GMT)
Message-ID: <29029488.1157635947850.JavaMail.jira@brutus>
Date: Thu, 7 Sep 2006 06:32:27 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-483) Document libhdfs and fix some OS
 specific stuff in Makefile
In-Reply-To: <20264654.1156486690133.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-483?page=all ]

Arun C Murthy updated HADOOP-483:
---------------------------------

    Attachment: libhdfs_20060907.patch

Doug, here's another patch incorporating your comments...

> Document libhdfs and fix some OS specific stuff in Makefile
> -----------------------------------------------------------
>
>                 Key: HADOOP-483
>                 URL: http://issues.apache.org/jira/browse/HADOOP-483
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>         Attachments: HADOOP-483.patch, libhdfs.patch, libhdfs.second.patch, libhdfs_20060906.patch, libhdfs_20060907.patch
>
>
> Document libhdfs (api docs and user manual) and fix some OS specific stuff (paths to utilities like rm) in the Makefile and TestDFSCIO.java

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep  7 14:51:35 2006
Return-Path: 
 <hadoop-dev-return-3620-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 4172 invoked from network); 7 Sep 2006 14:51:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Sep 2006 14:51:35 -0000
Received: (qmail 97307 invoked by uid 500); 7 Sep 2006 14:51:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97276 invoked by uid 500); 7 Sep 2006 14:51:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97267 invoked by uid 99); 7 Sep 2006 14:51:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Sep 2006 07:51:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [84.96.21.10] (HELO trinity.anyware-tech.com) (84.96.21.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Sep 2006 07:51:33 -0700
Received: from localhost (localhost [127.0.0.1])
	by trinity.anyware-tech.com (Postfix) with ESMTP id D4F0E400305
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Sep 2006 16:51:09 +0200 (CEST)
Received: from trinity.anyware-tech.com ([127.0.0.1])
	by localhost (trinity.anyware-tech.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 31037-10 for <hadoop-dev@lucene.apache.org>;
	Thu, 7 Sep 2006 16:50:58 +0200 (CEST)
Received: from [10.0.2.28] (io.anyware [10.0.2.28])
	by trinity.anyware-tech.com (Postfix) with ESMTP id E20A5400300
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Sep 2006 16:50:58 +0200 (CEST)
Message-ID: <450031CE.6010201@anyware-tech.com>
Date: Thu, 07 Sep 2006 16:50:54 +0200
From: =?ISO-8859-1?Q?Fr=E9d=E9ric_Bertin?=
 <frederic.bertin@anyware-tech.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: include test utility classes into hadoop's jar?
Content-Type: multipart/alternative;
 boundary="------------050301040505060509070702"
X-Virus-Scanned: Debian amavisd-new at anyware-tech.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--------------050301040505060509070702
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi all,

I met a small problem today, writing tests for map/reduce jobs. Indeed, 
I wanted to reuse the MiniMRCluster class, located in Hadoop's test 
source tree.
However, this source tree is not included in Hadoop's jar, which my 
project depends on. That's why I had no other solution than copying this 
class in my project's source tree (keeping it in its original package, 
otherwise it doesn't work).

I see two possible solutions:

    * move test *utility* classes (not test classes themselves) in a
      test package in the main source tree
    * release a hadoop-test.jar together with the current hadoop.jar

I personaly prefer the first solution.

WDYT?

Thanks.

Fred

--------------050301040505060509070702--

From MAILER-DAEMON Thu Sep  7 17:56:00 2006
Return-Path: 
 <hadoop-dev-return-3621-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67040 invoked from network); 7 Sep 2006 17:56:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Sep 2006 17:56:00 -0000
Received: (qmail 85066 invoked by uid 500); 7 Sep 2006 17:55:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 85042 invoked by uid 500); 7 Sep 2006 17:55:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 85033 invoked by uid 99); 7 Sep 2006 17:55:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Sep 2006 10:55:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Sep 2006 10:55:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7148A714305
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Sep 2006 17:52:25 +0000 (GMT)
Message-ID: <32141851.1157651545460.JavaMail.jira@brutus>
Date: Thu, 7 Sep 2006 10:52:25 -0700 (PDT)
From: "Johan Oskarson (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-287) Speed up SequenceFile sort with
 memory reduction
In-Reply-To: <30420683.1149716489884.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-287?page=comments#action_12433179 ] 
            
Johan Oskarson commented on HADOOP-287:
---------------------------------------

Benjamin:
Would it be possible to look into what broke in the latest patch?

> Speed up SequenceFile sort with memory reduction
> ------------------------------------------------
>
>                 Key: HADOOP-287
>                 URL: http://issues.apache.org/jira/browse/HADOOP-287
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.3.2
>            Reporter: Benjamin Reed
>         Assigned To: Doug Cutting
>             Fix For: 0.6.0
>
>         Attachments: s.patch, zoom-sort.patch, zoom-sort.patch
>
>
> I replaced the merge sort with a quick sort and it yielded approx 30% improvement in sort time. It also reduced the memory requirement for sorting because the sort is done in place.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep  7 19:35:03 2006
Return-Path: 
 <hadoop-dev-return-3622-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1168 invoked from network); 7 Sep 2006 19:35:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Sep 2006 19:35:03 -0000
Received: (qmail 74025 invoked by uid 500); 7 Sep 2006 19:35:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 73963 invoked by uid 500); 7 Sep 2006 19:35:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 73939 invoked by uid 99); 7 Sep 2006 19:35:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Sep 2006 12:35:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Sep 2006 12:34:59 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B6D9D714303
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Sep 2006 19:31:26 +0000 (GMT)
Message-ID: <19330342.1157657486746.JavaMail.jira@brutus>
Date: Thu, 7 Sep 2006 12:31:26 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-288) RFC: Efficient file caching
In-Reply-To: <6015694.1149730109866.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-288?page=all ]

Doug Cutting updated HADOOP-288:
--------------------------------

    Status: Open  (was: Patch Available)

The documentation of the primary user API should fully describe the format of the parameters, e.g., that these are strings representing URIs.  This would be simpler if the API used a type other than String.

We need an addCacheFile() method before we need a setCacheFiles() method, not the other way around.

I'd like to see this as independent of the mapred core as is possible, in order to support things like HADOOP-452.  In particular, the DistributedCache class should probably move to a separate package (filecache)?, and as much of the functionality as is possible should be put in that package.  The TaskTracker and JobTracker should become clients of this facility.

Utilities to store a set of files to cache in a Configuration should arguably move to the new package as well.  There's a temptation to overload JobConf that we need to resist.  So I'd rather see these as static methods like DistributedCache.addFile(Configuration, URI).


> RFC: Efficient file caching
> ---------------------------
>
>                 Key: HADOOP-288
>                 URL: http://issues.apache.org/jira/browse/HADOOP-288
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.6.0
>            Reporter: Michel Tourn
>         Assigned To: Mahadev konar
>         Attachments: caching-3.patch, caching-4.patch, caching.patch, caching.patch, test.jar, test.zip
>
>
> RFC: Efficient file caching 
> (on Hadoop Task nodes, for benefit of MapReduce Tasks)
> ------------------------------------------------------
> We will start implementing this soon. Please provide feedback and improvements to this plan.
> The header "Options:" indicates places where simple choices must be made.
> Problem:
> -------
> o MapReduce tasks require access to additional out-of-band data ("dictionaries")
> This out-of-band data is:
> o in addition to the map/reduce inputs.
> o large (1GB+)
> o broadcast (same data is required on all the Task nodes)
> o changes "infrequently", in particular:
> oo it is always constant for all the Tasks in a Job. 
> oo it is often constant for a month at a time 
> oo it may be shared across team members
> o sometimes used by pure-Java MapReduce programs
> o sometimes used by non-Java MapReduce programs (using Hadoop-Streaming)
> o (future) used by programs that use HDFS and Task-trackers but not MapReduce.
> Existing Solutions to the problem:
> ---------------------------------
> These solutions are not good enough. The present proposal is to do Sol 1 with caching.
> Sol 1: Pure Hadoop: package the out-of-band data in the MapReduce Job jar file.
> Sol 2: Non  Hadoop: for each task node run rsync from single source for data.
> Sol 3: Non  Hadoop: use BitTorrent, etc.
> Sol.1 is correct but slow for many reasons:
>  The Job submitter must recreate a large jar(tar) file for every Job.
>   (The jar contains both changing programs and stable dictionaries)
>  The large Jar file must be propagated from the client to HDFS with 
>  a large replication factor. 
>  At the beginning of every Task, the Task tracker gets the job jar from HDFS 
>  and unjars it in the working directory. This can dominate task execution time.
>  
> Sol.2 has nice properties but also some problems.
>  It does not scale well with large clusters (many concurrent rsync read requests i.e. single-source broadcast)
>  It assumes that Hadoop users can upload data using rsync to the cluster nodes. As a policy, this is not allowed.
>  It requires rsync.
>  
> Sol.3 alleviates the rsync scalability problems but 
>       It is a dependency on an external system. 
>       We want something simpler and more tightly integrated with Hadoop.
>       
> Staging (uploading) out-of-band data:
> ------------------------------------
> The out-of-band data will often originate on the local filesystem of a user machine 
>  (i.e. a MapReduce job submitter)
> Nevertheless it makes sense to use HDFS to store the original out-of-band data because:
> o HDFS has (wide) replication. This enables scalable broadcast later.
> o HDFS is an available channel to move data from clients to all task machines.
> o HDFS is convenient as a shared location among Hadoop team members.
> Accessing (downloading) out-of-band data:
> ----------------------------------------
> The non-Java MapReduce programs do not have or want[1] APIs for HDFS.
> Instead these programs just want to access out-of-band data as 
>  local files at predefined paths.
> ([1] Existing programs should be reusable with no changes. 
>  This is often possible bec. communication is over stdin/stdout.)
> Job's jar file as a special case:
> --------------------------------
> One use case is to allow users to make the job jar itself cachable.
> This is only useful in cases where NOTHING changes when a job is resubmitted
>  (no MapRed code changes and no changes in shipped data)
> This situation might occur with an 'extractor' job (gets data from an external source: like Nutch crawler)
> Currently the Hadoop mapred-jar mechanism works in this way:
>  the job jar data is unjarred in the "working directory" of the Task 
>  the jar contains both MapRed java code (added to classpath)
> Cache synchronization:
> ---------------------
> The efficient implementation of the out-of-band data distribution
> is mostly a cache synchronization problem.
> A list of the various aspects where choices must be made follows.
> Cache key:
> ---------
> How do you test that the cached copy is out-of-date?
> Options: 
> 1. the archive/file timestamp 
> 2. the MD5 of the archive/file content
> Comparing source and destination Timestamps is problematic bec. it assumes synchronized clocks.
> Also there is no last-modif metadata in HDFS (for good reasons, like scalability of metadata ops)
> Timestamps stored with the source ('last-propagate-time') do 
>  not require synchronized clocks, only locally monotonic time. 
> (and the worse which can happen at daylight-savings switch is a missed update or an extra-update)
> The cache code could store a copy of the local timestamp 
> in the same way that it caches the value of the content hash along with the source data.
>  
> Cachable unit:
> -------------
> Options: individual files or archives or both.
> Note:
> At the API level, directories will be processed recursively 
> (and the local FS directories will parallel HDFS directories)
> So bulk operations are always possible using directories.
> The question here is whether to handle archives as an additional bulk mechanism.
> Archives are special because:
> o unarchiving occurs transparently as part of the cache sync
> o The cache key is computed on the archive and preserved although 
>   the archive itself is not preserved.
> Supported archive format will be: tar (maybe tgz or compressed jar)
> Archive detection test: by filename extension ".tar" or ".jar"
> Suppose we don't handle archives as special files:
> Pros:
>  o less code, no discussion about which archive formats are supported
>  o fine for large dictionary files. And when files are not large, user may as well
>    put them in the Job jar as usual.
>  o user code could always check and unarchive specific cached files
>    (as a side-effect of MapRed task initialization)
> Cons:
>  o handling small files may be inefficient 
>   (multiple HDFS operations, multiple hash computation, 
>    one 'metadata' hash file along with each small file)
>  o It will not be possible to handle the Job's jar file as a special case of caching 
> Cache isolation: 
> ---------------
> In some cases it may be a problem if the cached HDFS files are updated while a Job is in progress:
> The file may become unavailable for a short period of time and some tasks fail.
> The file may change (atomically) and different tasks use a different version.
> This isolation problem is not addressed in this proposal.
> Standard solutions to the isolation problem are:
> o Assume that Jobs and interfering cache updates won't occur concurrently.
> o Put a version number in the HDFS file paths and refer to a hard-coded version in the Job code.
> o Before running the MapRed job, run a non-distributed application that tests
>   what is the latest available version of the out-of-band data. 
>   Then make this version available to the MapRed job.
>   Two ways to do this. 
>   o either set a job property just-in-time:
>     addCachePathPair("/mydata/v1234/", "localcache/mydata_latest"); 
>     (see Job Configuration for meaning of this)
>   o or publish the decision as an HDFS file containing the version.
>     then rely on user code to read the version, and manually populate the cache:
>     Cache.syncCache("/hdfs/path/fileordir", "relative/local/fileordir");
>     (see MapReduce API for meaning of this)
> Cache synchronization stages:
> ----------------------------
> There are two stages: Client-to-HDFS and HDFS-to-TaskTracker
> o Client-to-HDFS stage.
> Options: A simple option is to not do anything here, i.e. rely on the user.
> This is a reasonable option given previous remarks on the role of HDFS:
>  HDFS is a staging/publishing area and a natural shared location.
> In particular this means that the system need not track 
> where the client files come from.
> o HDFS-to-TaskTracker:
> Client-to-HDFS synchronization (if done at all) should happen before this.
> Then HDFS-to-TaskTracker synchronization must happen right before 
> the data is needed on a node.
> MapReduce cache API:
> -------------------
> Options:
> 1. No change in MapReduce framework code:
> require the user to put this logic in map() (or reduce) function:
>  in MyMapper constructor (or in map() on first record) user is asked to add:
>  
>     Cache.syncCache("/hdfs/path/fileordir", "relative/local/fileordir");
>     Cache.syncCache("..."); //etc.
>   
> -----
> 2. Put this logic in MapReduce framework and use Job properties to
>    communicate the list of pairs (hdfs path; local path)
>  
> Directories are processed recursively.
> If archives are treated specially then they are unarchived on destination.
>  
> MapReduce Job Configuration:
> ---------------------------
> Options:
> with No change in MapReduce framework code (see above)
>  no special Job configuration: 
>    it is up to the MapRed writer to configure and run the cache operations.
> ---
> with Logic in MapReduce framework (see above)
>  some simple Job configuration
> JobConf.addCachePathPair(String, String)
> JobConf.addCachePathPair("/hdfs/path/fileordir", "relative/local/fileordir");

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep  7 20:03:57 2006
Return-Path: 
 <hadoop-dev-return-3623-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 6657 invoked from network); 7 Sep 2006 20:03:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Sep 2006 20:03:57 -0000
Received: (qmail 11652 invoked by uid 500); 7 Sep 2006 20:03:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 11623 invoked by uid 500); 7 Sep 2006 20:03:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 11614 invoked by uid 99); 7 Sep 2006 20:03:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Sep 2006 13:03:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Sep 2006 13:03:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 51C767142FF
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Sep 2006 20:00:23 +0000 (GMT)
Message-ID: <3753521.1157659223332.JavaMail.jira@brutus>
Date: Thu, 7 Sep 2006 13:00:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-497) DataNodes and TaskTrackers should be
 able to report hostnames and ips relative to customizable network
 interfaces and nameservers
In-Reply-To: <3331836.1156991602375.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-497?page=all ]

Doug Cutting resolved HADOOP-497.
---------------------------------

    Fix Version/s: 0.6.0
       Resolution: Fixed

I just committed this.  The patch had some spurious changes to imports, and indented four spaces-per-level rather than two.  I also moved some duplicated code into the DNS utility class.  Thanks, Lorenzo!

> DataNodes and TaskTrackers should be able to report hostnames and ips relative to customizable network interfaces and nameservers
> ---------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-497
>                 URL: http://issues.apache.org/jira/browse/HADOOP-497
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred, dfs, util
>    Affects Versions: 0.6.0
>            Reporter: Lorenzo Thione
>            Priority: Minor
>             Fix For: 0.6.0
>
>         Attachments: dnsjava-2.0.2.jar, net-dns.patch, net-dns.patch, nif-utils.patch
>
>
> This patch allows for network configuration parameters to be aded to the hadoop-site.xml file. These parameters specify a network interface name and an optional nameserver hostname which DataNodes and TaskTrackers consult to resolve  their hostnames from the IP bound to the specified network interface.
> This is useful when machines that are part of different physical or logical network need to participate in hadoop clusters as client nodes. The hostname and IP reported by InetAddress.getLocalHost() are not necessarily the ones that will allow the JobTracker and NameNode to reach the clients, as well as not necessarily the ones through which the DFS clients can reach the DataNodes.
> The configuration parameters are
>  - cluster.report.nif
>  - cluster.report.ns
> nif: takes the name of a network interface, like en0, en1 (on macs), eth0, etc...
> ns: the host name of a DNS server to use when resolving the IP bound to the specified nif
> These parameters are set by default to the value "default" which will replicate the current behavior of reporting InetAddress.getLocalHost().getHostName() and getHostAddress()
> As part of the patch, a new library dnsjava was added along with its license information (BSD license). The list of affected files is:
> src
>  org.apache.hadoop.dfs.DataNode 
>  org.apache.hadoop.mapred.taskTracker 
>  org.apache.hadoop.util.NetworkUtils
> conf
>  hadoop-default.xml
> lib
>  dnsjava-2.0.2.jar
>  dnsjava-2.0.2.LICENSE.txt

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep  7 20:05:24 2006
Return-Path: 
 <hadoop-dev-return-3624-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 6983 invoked from network); 7 Sep 2006 20:05:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Sep 2006 20:05:24 -0000
Received: (qmail 13358 invoked by uid 500); 7 Sep 2006 20:05:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13178 invoked by uid 500); 7 Sep 2006 20:05:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13169 invoked by uid 99); 7 Sep 2006 20:05:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Sep 2006 13:05:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [63.206.223.211] (HELO immarshal.corp.cafepress.com)
 (63.206.223.211)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Sep 2006 13:05:22 -0700
Received: from exchange02.corp.cafepress.com (Not Verified[192.168.0.247]) by
 immarshal.corp.cafepress.com with NetIQ MailMarshal (v5.5.6.6)
	id <BM015c16e4>; Thu, 07 Sep 2006 13:05:02 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6D2B8.E7000453"
Subject: FW: 
Date: Thu, 7 Sep 2006 13:05:01 -0700
Message-ID: 
 <A87EA24E23D129448118A73A43EDB76303C8FCAB@exchange02.corp.cafepress.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Index: AcbStHJfF3vlGQhbQbO3W0Yy2VejjgABGiJA
From: "Dimple Joseph" <djoseph@cafepress.com>
To: <hadoop-dev@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6D2B8.E7000453
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

=20

________________________________

From: Dimple Joseph=20
Sent: Thursday, September 07, 2006 12:33 PM
To: 'hadoop-user@lucene.apache.org'
Subject:=20


We have a setup where a search query goes to an aggregator who using
ipc/nutch api to communicate to slaves who have a subset of lucene index
on various machines.The slaves return their results which is then
aggregated and returned.We have used the api and have written too many
custom things on top that the solution is not very clean.We are thinking
of replacing the communication using hadoop ie sending the requests in
parallel to search machines and aggregating the result.I am looking for
examples or pointers on this problem .Is it possible to  be able to
handle this cleanly using hadoop.
=20
DJ



-------------------------------------------------------------------------=
------------------

The contents of this message, together with any attachments, are intended=
=20only
for the use of the individual or entity to which they are addressed and m=
ay=20
contain information that is confidential and exempt from disclosure. If y=
ou are=20
not the intended recipient, you are hereby notified that any disseminatio=
n,=20
distribution, or copying of this message, or any attachment, is strictly =
prohibited.=20
If you have received this message in error, please notify the original se=
nder=20
immediately by telephone or by return E-mail and delete this message, alo=
ng =20
with any attachments, from your computer. Thank you. =20

------_=_NextPart_001_01C6D2B8.E7000453--

From MAILER-DAEMON Thu Sep  7 20:32:07 2006
Return-Path: 
 <hadoop-dev-return-3625-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12574 invoked from network); 7 Sep 2006 20:32:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Sep 2006 20:32:07 -0000
Received: (qmail 47106 invoked by uid 500); 7 Sep 2006 20:32:06 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47078 invoked by uid 500); 7 Sep 2006 20:32:06 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47064 invoked by uid 99); 7 Sep 2006 20:32:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Sep 2006 13:32:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Sep 2006 13:32:05 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3B184714315
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Sep 2006 20:28:27 +0000 (GMT)
Message-ID: <14773624.1157660907239.JavaMail.jira@brutus>
Date: Thu, 7 Sep 2006 13:28:27 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-441) SequenceFile should support 'custom
 compressors'
In-Reply-To: <29672656.1155187633922.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-441?page=all ]

Doug Cutting updated HADOOP-441:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Arun!

> SequenceFile should support 'custom compressors'
> ------------------------------------------------
>
>                 Key: HADOOP-441
>                 URL: http://issues.apache.org/jira/browse/HADOOP-441
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.6.0
>
>         Attachments: codec.patch, codec.patch, codec20060831.patch, codec_20060907.patch, codec_updated_interfaces_20060830.patch, reports.tgz
>
>
> SequenceFiles should support 'custom compressors' which can be specified by the user on creation of the file. 
> Readily available packages for gzip and zip (java.util.zip) are among obvious choices to support. Of course there will be hooks so that other compressors can be added in future as long as there is a way to construct (input/output) streams on top of the compressor/decompressor.
> The 'classname' of the 'custom compressor/decompressor' could be stored in the header of the SequenceFile which can then be used by SequenceFile.Reader to figure out the appropriate 'decompressor'. Thus I propose we add constructors to SequenceFile.Writer which take in the 'classname' of the compressor's input/output stream classes (e.g. DeflaterOutputStream/InflaterInputStream or GZIPOutputStream/GZIPInputStream), which acts as the hook for future compressors/decompressors.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep  7 20:42:03 2006
Return-Path: 
 <hadoop-dev-return-3626-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 15022 invoked from network); 7 Sep 2006 20:42:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Sep 2006 20:42:03 -0000
Received: (qmail 62515 invoked by uid 500); 7 Sep 2006 20:42:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62493 invoked by uid 500); 7 Sep 2006 20:42:02 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62484 invoked by uid 99); 7 Sep 2006 20:42:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Sep 2006 13:42:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Sep 2006 13:42:01 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EBD6A714304
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Sep 2006 20:38:23 +0000 (GMT)
Message-ID: <33018638.1157661503962.JavaMail.jira@brutus>
Date: Thu, 7 Sep 2006 13:38:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-483) Document libhdfs and fix some OS
 specific stuff in Makefile
In-Reply-To: <20264654.1156486690133.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-483?page=all ]

Doug Cutting updated HADOOP-483:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.6.0
       Resolution: Fixed

I just committed this.  Thanks, Arun!

> Document libhdfs and fix some OS specific stuff in Makefile
> -----------------------------------------------------------
>
>                 Key: HADOOP-483
>                 URL: http://issues.apache.org/jira/browse/HADOOP-483
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.6.0
>
>         Attachments: HADOOP-483.patch, libhdfs.patch, libhdfs.second.patch, libhdfs_20060906.patch, libhdfs_20060907.patch
>
>
> Document libhdfs (api docs and user manual) and fix some OS specific stuff (paths to utilities like rm) in the Makefile and TestDFSCIO.java

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep  7 22:22:00 2006
Return-Path: 
 <hadoop-dev-return-3627-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 42251 invoked from network); 7 Sep 2006 22:22:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Sep 2006 22:22:00 -0000
Received: (qmail 4797 invoked by uid 500); 7 Sep 2006 22:21:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 4762 invoked by uid 500); 7 Sep 2006 22:21:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 4753 invoked by uid 99); 7 Sep 2006 22:21:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Sep 2006 15:21:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Sep 2006 15:21:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 26687410011
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Sep 2006 22:18:25 +0000 (GMT)
Message-ID: <6590346.1157667505154.JavaMail.jira@brutus>
Date: Thu, 7 Sep 2006 15:18:25 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-474) support compressed text files as input
 and output
In-Reply-To: <19704285.1156402132980.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-474?page=all ]

Owen O'Malley updated HADOOP-474:
---------------------------------

    Attachment: text-gz.patch

This patch does:
  1. Fixes TextInputFormat to work with non-ascii UTF-8
  2. Adds a gzip codec for reading and writing .gz files
  3. Exposes Text.set(byte[], int, int) so that you can set the Text to a non-zero offset and length.
  4. Renames Text.validateUTF to validateUTF8
  5. Adds a CompressionCodecFactory that finds a codec based on a filename extension. The factory includes static methods to set/get the list of codecs in a Configuration.
  6. Adds test cases for reading gziped files for TextInputFormat
  7. Adds test cases for reading UTF8 via TextInputFormat
  8. Adds test cases for the CompressionCodecFactory
  9. InputFormatBase gets a new virtual to determine whether a file is splittable.
  10. TextInputFormat exposes a readLine method that reads bytes until a newline.
  11. TextOutputFormat will write compressed text files with a configurable compression codec.
  12. Removes a extra loop through the splits to count the number of bytes.

> support compressed text files as input and output
> -------------------------------------------------
>
>                 Key: HADOOP-474
>                 URL: http://issues.apache.org/jira/browse/HADOOP-474
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.5.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.6.0
>
>         Attachments: text-gz.patch
>
>
> I'd like TextInputFomat and TextOutputFormat to automatically compress and uncompress text files when they are read and written. Furthermore, I'd like to be able to use custom compressors as defined in HADOOP-441. Therefore, I propose:
> Adding a map of compression codecs in the server config files:
> io.compression.codecs = "<suffix>=<codec class>,..."
> so the default would be something like:
> <property>
>   <name>io.compression.codecs</name>
>   <value>.gz=org.apache.hadoop.io.GZipCodec,.Z=org.apache.hadoop.io.ZipCodec</value>
>   <description>A list of file suffixes and the codecs for them.</description>
> </property>
> note that the suffix can include multiple "." so you could support suffixes like ".tar.gz", but they are just treated as literals against the end of the filename.
> If the TextInputFormat is dealing with such a file, it:
>   1. makes a single split
>   2. decompresses automatically
> On the output side, if mapred.output.compress is true, then TextOutputFormat would use a new property mapred.output.compression.codec that would define the codec to use to compress the outputs,  defaulting to gzip. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep  7 22:23:58 2006
Return-Path: 
 <hadoop-dev-return-3628-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 42711 invoked from network); 7 Sep 2006 22:23:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Sep 2006 22:23:58 -0000
Received: (qmail 7059 invoked by uid 500); 7 Sep 2006 22:23:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 6917 invoked by uid 500); 7 Sep 2006 22:23:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 6908 invoked by uid 99); 7 Sep 2006 22:23:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Sep 2006 15:23:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Sep 2006 15:23:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 90A32410011
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Sep 2006 22:20:23 +0000 (GMT)
Message-ID: <26822124.1157667623589.JavaMail.jira@brutus>
Date: Thu, 7 Sep 2006 15:20:23 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-474) support compressed text files as input
 and output
In-Reply-To: <19704285.1156402132980.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-474?page=all ]

Owen O'Malley updated HADOOP-474:
---------------------------------

    Status: Patch Available  (was: Open)

> support compressed text files as input and output
> -------------------------------------------------
>
>                 Key: HADOOP-474
>                 URL: http://issues.apache.org/jira/browse/HADOOP-474
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.5.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.6.0
>
>         Attachments: text-gz.patch
>
>
> I'd like TextInputFomat and TextOutputFormat to automatically compress and uncompress text files when they are read and written. Furthermore, I'd like to be able to use custom compressors as defined in HADOOP-441. Therefore, I propose:
> Adding a map of compression codecs in the server config files:
> io.compression.codecs = "<suffix>=<codec class>,..."
> so the default would be something like:
> <property>
>   <name>io.compression.codecs</name>
>   <value>.gz=org.apache.hadoop.io.GZipCodec,.Z=org.apache.hadoop.io.ZipCodec</value>
>   <description>A list of file suffixes and the codecs for them.</description>
> </property>
> note that the suffix can include multiple "." so you could support suffixes like ".tar.gz", but they are just treated as literals against the end of the filename.
> If the TextInputFormat is dealing with such a file, it:
>   1. makes a single split
>   2. decompresses automatically
> On the output side, if mapred.output.compress is true, then TextOutputFormat would use a new property mapred.output.compression.codec that would define the codec to use to compress the outputs,  defaulting to gzip. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep  7 23:23:00 2006
Return-Path: 
 <hadoop-dev-return-3629-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 55379 invoked from network); 7 Sep 2006 23:23:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Sep 2006 23:23:00 -0000
Received: (qmail 66953 invoked by uid 500); 7 Sep 2006 23:22:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66771 invoked by uid 500); 7 Sep 2006 23:22:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66762 invoked by uid 99); 7 Sep 2006 23:22:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Sep 2006 16:22:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Sep 2006 16:22:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6F4CD410016
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Sep 2006 23:19:24 +0000 (GMT)
Message-ID: <375985.1157671164453.JavaMail.jira@brutus>
Date: Thu, 7 Sep 2006 16:19:24 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-474) support compressed text files as
 input and output
In-Reply-To: <19704285.1156402132980.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-474?page=comments#action_12433271 ] 
            
Doug Cutting commented on HADOOP-474:
-------------------------------------

Should we specify defaults for mapred.output.compression.codec and io.compression.codecs in hadoop-default.xml?

Is the TODO in SequenceFileOutputFormat.java now obsolete?

Should we add compression-related configuration methods to JobConf, or instead as static methods to a (new) CompressConfig class.  One would then do something like:

CompressConfig.setOutputCodecClass(job, GzipCodec.class);



> support compressed text files as input and output
> -------------------------------------------------
>
>                 Key: HADOOP-474
>                 URL: http://issues.apache.org/jira/browse/HADOOP-474
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.5.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.6.0
>
>         Attachments: text-gz.patch
>
>
> I'd like TextInputFomat and TextOutputFormat to automatically compress and uncompress text files when they are read and written. Furthermore, I'd like to be able to use custom compressors as defined in HADOOP-441. Therefore, I propose:
> Adding a map of compression codecs in the server config files:
> io.compression.codecs = "<suffix>=<codec class>,..."
> so the default would be something like:
> <property>
>   <name>io.compression.codecs</name>
>   <value>.gz=org.apache.hadoop.io.GZipCodec,.Z=org.apache.hadoop.io.ZipCodec</value>
>   <description>A list of file suffixes and the codecs for them.</description>
> </property>
> note that the suffix can include multiple "." so you could support suffixes like ".tar.gz", but they are just treated as literals against the end of the filename.
> If the TextInputFormat is dealing with such a file, it:
>   1. makes a single split
>   2. decompresses automatically
> On the output side, if mapred.output.compress is true, then TextOutputFormat would use a new property mapred.output.compression.codec that would define the codec to use to compress the outputs,  defaulting to gzip. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep  7 23:47:33 2006
Return-Path: 
 <hadoop-dev-return-3630-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 60579 invoked from network); 7 Sep 2006 23:47:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Sep 2006 23:47:33 -0000
Received: (qmail 95459 invoked by uid 500); 7 Sep 2006 23:47:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95436 invoked by uid 500); 7 Sep 2006 23:47:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95427 invoked by uid 99); 7 Sep 2006 23:47:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Sep 2006 16:47:32 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [209.151.94.5] (HELO megs8.100mwh.com) (209.151.94.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Sep 2006 16:47:31 -0700
Received: from meetsawglad.corp.yahoo.com ([66.228.162.219])
	by megs8.100mwh.com with esmtpsa (TLSv1:RC4-SHA:128)
	(Exim 4.52)
	id 1GLTaT-0003ba-0Q
	for hadoop-dev@lucene.apache.org; Thu, 07 Sep 2006 17:47:13 -0600
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Transfer-Encoding: 7bit
Message-Id: <CB10265A-4229-4CCA-8B04-02DDD1249B6D@yahoo-inc.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: hadoop-dev@lucene.apache.org
From: Owen O'Malley <owen@yahoo-inc.com>
Subject: adding encryption to hadoop
Date: Thu, 7 Sep 2006 16:48:12 -0700
X-Mailer: Apple Mail (2.752.2)
X-AntiAbuse: This header was added to track abuse,
 please include it with any abuse report
X-AntiAbuse: Primary Hostname - megs8.100mwh.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - yahoo-inc.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I realized today that with the new pluggable codec framework we can  
trivially support encryption.

You'd define a codec that does encryption and the application would  
set the password in the JobConf. The framework would then  
automatically encrypt and decrypt your files automatically. Fun stuff.

-- Owen

From MAILER-DAEMON Fri Sep  8 03:57:59 2006
Return-Path: 
 <hadoop-dev-return-3631-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 5088 invoked from network); 8 Sep 2006 03:57:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Sep 2006 03:57:59 -0000
Received: (qmail 4655 invoked by uid 500); 8 Sep 2006 03:57:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 4630 invoked by uid 500); 8 Sep 2006 03:57:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 4621 invoked by uid 99); 8 Sep 2006 03:57:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Sep 2006 20:57:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Sep 2006 20:57:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 12E1F410011
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Sep 2006 03:54:24 +0000 (GMT)
Message-ID: <22189323.1157687664074.JavaMail.jira@brutus>
Date: Thu, 7 Sep 2006 20:54:24 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-458) libhdfs corrupts memory
In-Reply-To: <26584411.1155876193935.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-458?page=all ]

Arun C Murthy updated HADOOP-458:
---------------------------------

    Attachment: HADOOP-458.patch

Here is a straight-forward fix I did as a part of testing HADOOP-483 (which eventually led to HADOOP-507 i.e. I thought HADOOP-458 was the culprit before realising it was something else).

> libhdfs corrupts memory
> -----------------------
>
>                 Key: HADOOP-458
>                 URL: http://issues.apache.org/jira/browse/HADOOP-458
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Christian Kunz
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.6.0
>
>         Attachments: HADOOP-458.patch
>
>
> in getJNIEnv() not enough space for optHadoopClassPath is allocated, corrupting the memory.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep  8 05:59:58 2006
Return-Path: 
 <hadoop-dev-return-3632-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 28740 invoked from network); 8 Sep 2006 05:59:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Sep 2006 05:59:58 -0000
Received: (qmail 16647 invoked by uid 500); 8 Sep 2006 05:59:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 16629 invoked by uid 500); 8 Sep 2006 05:59:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 16620 invoked by uid 99); 8 Sep 2006 05:59:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Sep 2006 22:59:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Sep 2006 22:59:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6CC237142D9
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Sep 2006 05:56:23 +0000 (GMT)
Message-ID: <3822633.1157694983442.JavaMail.jira@brutus>
Date: Thu, 7 Sep 2006 22:56:23 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-514) namenode heartbeat interval should
 be configurable
In-Reply-To: <17229842.1157594543761.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-514?page=comments#action_12433334 ] 
            
Yoram Arnon commented on HADOOP-514:
------------------------------------

using the analogy of the animal kingdom - the larger the beast, the slower the heartbeat, it would perhaps be optimal if the heartbeat interval were proportional to the size of the cluster, rather than configurable.
One less config item, one less thing to get wrong.
namenode could inform datanodes what the cluster size is.
A formula such as interval=max(nodes/10, 1) seconds could work.

> namenode heartbeat interval should be configurable
> --------------------------------------------------
>
>                 Key: HADOOP-514
>                 URL: http://issues.apache.org/jira/browse/HADOOP-514
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Wendy Chien
>
> The namenode heartbeat interval is currently a constant in FSConstants.   It should be configurable instead.  Things which currently rely on the heartbeat occuring fairly frequently should be disassociated.    

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep  8 07:36:59 2006
Return-Path: 
 <hadoop-dev-return-3633-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 54923 invoked from network); 8 Sep 2006 07:36:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Sep 2006 07:36:59 -0000
Received: (qmail 43563 invoked by uid 500); 8 Sep 2006 07:36:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 43540 invoked by uid 500); 8 Sep 2006 07:36:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 43531 invoked by uid 99); 8 Sep 2006 07:36:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 00:36:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 00:36:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B676B410012
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Sep 2006 07:33:23 +0000 (GMT)
Message-ID: <1846212.1157700803744.JavaMail.jira@brutus>
Date: Fri, 8 Sep 2006 00:33:23 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-474) support compressed text files as input
 and output
In-Reply-To: <19704285.1156402132980.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-474?page=all ]

Owen O'Malley updated HADOOP-474:
---------------------------------

    Attachment: text-gz-2.patch

This patch extends the previous patch:
  1. the properties are added to the hadoop-default.xml
  2. the SequenceFileOutputFormat now uses the same JobConf methods for determining whether to compress the output and which codec to use
  3. cleaned up the out of date TODOs in the SequenceFile stuff
  4. created public static methods in CompressionCodecFactory to set/get the set of codecs into a Configuration
  5. created public static methods in SequenceFileOutputFormat to set/get the CompressionType. Arguably, these should be in SequenceFile itself

I think having the [gs]etCompressOutput methods in JobConf is reasonable since they are intended to be used by all of the OutputFormats.


> support compressed text files as input and output
> -------------------------------------------------
>
>                 Key: HADOOP-474
>                 URL: http://issues.apache.org/jira/browse/HADOOP-474
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.5.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.6.0
>
>         Attachments: text-gz-2.patch, text-gz.patch
>
>
> I'd like TextInputFomat and TextOutputFormat to automatically compress and uncompress text files when they are read and written. Furthermore, I'd like to be able to use custom compressors as defined in HADOOP-441. Therefore, I propose:
> Adding a map of compression codecs in the server config files:
> io.compression.codecs = "<suffix>=<codec class>,..."
> so the default would be something like:
> <property>
>   <name>io.compression.codecs</name>
>   <value>.gz=org.apache.hadoop.io.GZipCodec,.Z=org.apache.hadoop.io.ZipCodec</value>
>   <description>A list of file suffixes and the codecs for them.</description>
> </property>
> note that the suffix can include multiple "." so you could support suffixes like ".tar.gz", but they are just treated as literals against the end of the filename.
> If the TextInputFormat is dealing with such a file, it:
>   1. makes a single split
>   2. decompresses automatically
> On the output side, if mapred.output.compress is true, then TextOutputFormat would use a new property mapred.output.compression.codec that would define the codec to use to compress the outputs,  defaulting to gzip. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep  8 11:45:00 2006
Return-Path: 
 <hadoop-dev-return-3634-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 19093 invoked from network); 8 Sep 2006 11:45:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Sep 2006 11:45:00 -0000
Received: (qmail 20719 invoked by uid 500); 8 Sep 2006 11:45:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 20531 invoked by uid 500); 8 Sep 2006 11:44:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 20522 invoked by uid 99); 8 Sep 2006 11:44:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 04:44:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 04:44:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7DE61714305
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Sep 2006 11:41:24 +0000 (GMT)
Message-ID: <29322950.1157715684512.JavaMail.jira@brutus>
Date: Fri, 8 Sep 2006 04:41:24 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-263) task status should include timestamps
 for when a job transitions
In-Reply-To: <6879018.1149102869840.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-263?page=all ]

Sanjay Dahiya updated HADOOP-263:
---------------------------------

    Attachment: Hadoop-263_2.patch

Here is an updated patch. 
Task finish time is now set to failed time in case task fails. If the task fails at task tracker then failed time is set there and sent over to jobtracker. if the task tracker itself goes down then job tracker sets the failed time to when it discovers task failed. 
A side effect is that in case a task starts and before it could send its first status, task tracker dies, in that case the failed time will be recorded but task start time will not be recorded as task tracker went down before it could report that. We rely on task tracker to report the correct task launch time. Start/finish times for TIPs will be available in any case. 


> task status should include timestamps for when a job transitions
> ----------------------------------------------------------------
>
>                 Key: HADOOP-263
>                 URL: http://issues.apache.org/jira/browse/HADOOP-263
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.2.1
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.6.0
>
>         Attachments: Hadoop-263.patch, Hadoop-263_1.patch, Hadoop-263_2.patch, patch.txt, patch.txt, patch.txt, patch.txt
>
>
> It would help users to understand what happened if the task status included information about when the task transitioned:
> Map:
>    started
>    finished
> Reduce:
>    started
>    shuffle finished
>    sort finished
>    finished

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep  8 13:20:58 2006
Return-Path: 
 <hadoop-dev-return-3635-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51691 invoked from network); 8 Sep 2006 13:20:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Sep 2006 13:20:58 -0000
Received: (qmail 45687 invoked by uid 500); 8 Sep 2006 13:20:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 45497 invoked by uid 500); 8 Sep 2006 13:20:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 45488 invoked by uid 99); 8 Sep 2006 13:20:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 06:20:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 06:20:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5814F7142FA
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Sep 2006 13:17:22 +0000 (GMT)
Message-ID: <15335802.1157721442357.JavaMail.jira@brutus>
Date: Fri, 8 Sep 2006 06:17:22 -0700 (PDT)
From: "Johan Oskarson (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-515) Rsync like way of retrieving data from
 the dfs
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Rsync like way of retrieving data from the dfs
----------------------------------------------

                 Key: HADOOP-515
                 URL: http://issues.apache.org/jira/browse/HADOOP-515
             Project: Hadoop
          Issue Type: New Feature
          Components: dfs
    Affects Versions: 0.5.0
            Reporter: Johan Oskarson


As the dfs in our cluster contains a lot of important data, being able to retrieve them to a non dfs backup node is essential.
However, a lot of the files don't change inbetween backups, so a way to get only the files that have changed would be preferable.

Since the blocks themselves already have a crc calculated half the job is already done, if it's possible to split the destination files in similar blocks and calculate the crc for them.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep  8 16:27:27 2006
Return-Path: 
 <hadoop-dev-return-3636-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 26373 invoked from network); 8 Sep 2006 16:27:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Sep 2006 16:27:27 -0000
Received: (qmail 32253 invoked by uid 500); 8 Sep 2006 16:27:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 32210 invoked by uid 500); 8 Sep 2006 16:27:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 32072 invoked by uid 99); 8 Sep 2006 16:27:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 09:27:25 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.126.228.149] (HELO rsmtp1.corp.yahoo.com)
 (207.126.228.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 09:27:22 -0700
Received: from [10.0.1.17] ([172.21.179.129])
	(authenticated bits=0)
	by rsmtp1.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k88GQs70021474
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Fri, 8 Sep 2006 09:26:55 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=Mp4nQpH3ZxVMyCH+Yfg8JUnhtzv89xOANep/mb5xfahiRfbv1ZWCMUpC7xMDIJNM
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <CB10265A-4229-4CCA-8B04-02DDD1249B6D@yahoo-inc.com>
References: <CB10265A-4229-4CCA-8B04-02DDD1249B6D@yahoo-inc.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <91402164-9161-4924-9D90-D6B414DA1D6D@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Eric Baldeschwieler <eric14@yahoo-inc.com>
Subject: Re: adding encryption to hadoop
Date: Fri, 8 Sep 2006 09:25:52 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

interesting.

How would you keep the key secure?

This really encourages the notion of chaining stream processors  
together...

On Sep 7, 2006, at 4:48 PM, Owen O'Malley wrote:

> I realized today that with the new pluggable codec framework we can  
> trivially support encryption.
>
> You'd define a codec that does encryption and the application would  
> set the password in the JobConf. The framework would then  
> automatically encrypt and decrypt your files automatically. Fun stuff.
>
> -- Owen


From MAILER-DAEMON Fri Sep  8 17:23:58 2006
Return-Path: 
 <hadoop-dev-return-3637-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 47100 invoked from network); 8 Sep 2006 17:23:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Sep 2006 17:23:58 -0000
Received: (qmail 69409 invoked by uid 500); 8 Sep 2006 17:23:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 69341 invoked by uid 500); 8 Sep 2006 17:23:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 69332 invoked by uid 99); 8 Sep 2006 17:23:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 10:23:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 10:23:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5EAC87142F9
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Sep 2006 17:20:22 +0000 (GMT)
Message-ID: <13131373.1157736022384.JavaMail.jira@brutus>
Date: Fri, 8 Sep 2006 10:20:22 -0700 (PDT)
From: =?utf-8?Q?Fr=C3=A9d=C3=A9ric_Bertin_=28JIRA=29?= <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-516) Eclipse-based GUI: DFS explorer and
 basic Map/Reduce job launcher
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Eclipse-based GUI: DFS explorer and basic Map/Reduce job launcher
-----------------------------------------------------------------

                 Key: HADOOP-516
                 URL: http://issues.apache.org/jira/browse/HADOOP-516
             Project: Hadoop
          Issue Type: New Feature
         Environment: Eclipse 3.2
JDK 1.5
            Reporter: Fr=C3=A9d=C3=A9ric Bertin


to increase productivity in our current project (which makes a heavy use of=
 Hadoop), we wrote a small Eclipse-based GUI application which basically co=
nsists in 2 views:

   *  a HDFS explorer adapted from Eclipse filesystem explorer example.
     For now, it includes the following features:
         o classical tree-based browsing interface, with directory
           content being detailed in a 3 columns table (file name, file
           size, file type)
         o refresh button
         o delete file or directory (with confirm dialog): select files
           in the tree or table and click the "Delete" button
         o rename file or directory: simple click on the file in the
           table, type the new name and validate
         o open file with system editor: select the file in the table
           and click "Open" button (works on Windows, not on Linux)
         o internal drag & drop
         o external drag & drop from the local filesystem to the HDFS
           (the opposite doesn't work)

   * a MapReduce *very* simple job launcher:
         o select the job XML configuration file
         o run the job
         o kill the job
         o visualize map and reduce progress with progress bars
         o open a browser on the Hadoop job tracker web interface=20

INSTALLATION NOTES:
 - Eclipse 3.2
 - JDK 1.5
 - import the archive in Eclipse
 - copy your hadoop conf file (hadoop-default.xml in "src" folder) -> this =
step should be moved in the GUI later
 - right-click on the project and Run As -> Eclipse Application
 - enjoy...


--=20
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: htt=
p://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

       

From MAILER-DAEMON Fri Sep  8 17:26:01 2006
Return-Path: 
 <hadoop-dev-return-3638-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 47488 invoked from network); 8 Sep 2006 17:26:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Sep 2006 17:26:01 -0000
Received: (qmail 71014 invoked by uid 500); 8 Sep 2006 17:26:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70815 invoked by uid 500); 8 Sep 2006 17:26:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 70806 invoked by uid 99); 8 Sep 2006 17:26:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 10:26:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 10:26:00 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6F42C714302
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Sep 2006 17:22:25 +0000 (GMT)
Message-ID: <30253058.1157736145453.JavaMail.jira@brutus>
Date: Fri, 8 Sep 2006 10:22:25 -0700 (PDT)
From: =?utf-8?Q?Fr=C3=A9d=C3=A9ric_Bertin_=28JIRA=29?= <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-516) Eclipse-based GUI: DFS explorer and
 basic Map/Reduce job launcher
In-Reply-To: <13131373.1157736022384.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-516?page=3Dall ]

Fr=C3=A9d=C3=A9ric Bertin updated HADOOP-516:
-----------------------------------

    Attachment: hdfsExplorer.zip

> Eclipse-based GUI: DFS explorer and basic Map/Reduce job launcher
> -----------------------------------------------------------------
>
>                 Key: HADOOP-516
>                 URL: http://issues.apache.org/jira/browse/HADOOP-516
>             Project: Hadoop
>          Issue Type: New Feature
>         Environment: Eclipse 3.2
> JDK 1.5
>            Reporter: Fr=C3=A9d=C3=A9ric Bertin
>         Attachments: hdfsExplorer.zip
>
>
> to increase productivity in our current project (which makes a heavy use =
of Hadoop), we wrote a small Eclipse-based GUI application which basically =
consists in 2 views:
>    *  a HDFS explorer adapted from Eclipse filesystem explorer example.
>      For now, it includes the following features:
>          o classical tree-based browsing interface, with directory
>            content being detailed in a 3 columns table (file name, file
>            size, file type)
>          o refresh button
>          o delete file or directory (with confirm dialog): select files
>            in the tree or table and click the "Delete" button
>          o rename file or directory: simple click on the file in the
>            table, type the new name and validate
>          o open file with system editor: select the file in the table
>            and click "Open" button (works on Windows, not on Linux)
>          o internal drag & drop
>          o external drag & drop from the local filesystem to the HDFS
>            (the opposite doesn't work)
>    * a MapReduce *very* simple job launcher:
>          o select the job XML configuration file
>          o run the job
>          o kill the job
>          o visualize map and reduce progress with progress bars
>          o open a browser on the Hadoop job tracker web interface=20
> INSTALLATION NOTES:
>  - Eclipse 3.2
>  - JDK 1.5
>  - import the archive in Eclipse
>  - copy your hadoop conf file (hadoop-default.xml in "src" folder) -> thi=
s step should be moved in the GUI later
>  - right-click on the project and Run As -> Eclipse Application
>  - enjoy...

--=20
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: htt=
p://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

       

From MAILER-DAEMON Fri Sep  8 17:34:03 2006
Return-Path: 
 <hadoop-dev-return-3640-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 49569 invoked from network); 8 Sep 2006 17:34:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Sep 2006 17:34:03 -0000
Received: (qmail 82700 invoked by uid 500); 8 Sep 2006 17:34:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 82673 invoked by uid 500); 8 Sep 2006 17:34:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 82664 invoked by uid 99); 8 Sep 2006 17:34:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 10:34:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 10:34:00 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E816C7142F9
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Sep 2006 17:30:25 +0000 (GMT)
Message-ID: <14934181.1157736625948.JavaMail.jira@brutus>
Date: Fri, 8 Sep 2006 10:30:25 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-474) support compressed text files as
 input and output
In-Reply-To: <19704285.1156402132980.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-474?page=comments#action_12433449 ] 
            
Doug Cutting commented on HADOOP-474:
-------------------------------------

> I think having the [gs]etCompressOutput methods in JobConf is reasonable since they are intended to be used by all of the OutputFormats. 

Yes, they're used by the output formats we supply, but probably not by all output formats that folks might define.  To be consistent, I think we should adopt the following rule for JobConf: it should only set properties which are used by mapreduce kernel code, not by code in pluggable user classes.  This has obviously not been the policy prior to this.  There are exceptions in the current code.  But I think this will lead to better code organization.  Long-term, access to things like mapred.input.dir should move to InputFormatBase.  Glancing through JobConf, there are only a few such things that would need to move: the vast majority of parameters set in JobConf are already kernel stuff.  So we're close to implementing this rule and, if we elect to observe it, shouldn't stray further.

Do you think this is a reasonable rule?

Also, I think compressor should be spelled with an 'o'.

> support compressed text files as input and output
> -------------------------------------------------
>
>                 Key: HADOOP-474
>                 URL: http://issues.apache.org/jira/browse/HADOOP-474
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.5.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.6.0
>
>         Attachments: text-gz-2.patch, text-gz.patch
>
>
> I'd like TextInputFomat and TextOutputFormat to automatically compress and uncompress text files when they are read and written. Furthermore, I'd like to be able to use custom compressors as defined in HADOOP-441. Therefore, I propose:
> Adding a map of compression codecs in the server config files:
> io.compression.codecs = "<suffix>=<codec class>,..."
> so the default would be something like:
> <property>
>   <name>io.compression.codecs</name>
>   <value>.gz=org.apache.hadoop.io.GZipCodec,.Z=org.apache.hadoop.io.ZipCodec</value>
>   <description>A list of file suffixes and the codecs for them.</description>
> </property>
> note that the suffix can include multiple "." so you could support suffixes like ".tar.gz", but they are just treated as literals against the end of the filename.
> If the TextInputFormat is dealing with such a file, it:
>   1. makes a single split
>   2. decompresses automatically
> On the output side, if mapred.output.compress is true, then TextOutputFormat would use a new property mapred.output.compression.codec that would define the codec to use to compress the outputs,  defaulting to gzip. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep  8 17:32:50 2006
Return-Path: 
 <hadoop-dev-return-3639-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 49000 invoked from network); 8 Sep 2006 17:32:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Sep 2006 17:32:50 -0000
Received: (qmail 79487 invoked by uid 500); 8 Sep 2006 17:32:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 79469 invoked by uid 500); 8 Sep 2006 17:32:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 79460 invoked by uid 99); 8 Sep 2006 17:32:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 10:32:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [84.96.21.10] (HELO trinity.anyware-tech.com) (84.96.21.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 10:32:47 -0700
Received: from localhost (localhost [127.0.0.1])
	by trinity.anyware-tech.com (Postfix) with ESMTP id 28AF7400091
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Sep 2006 19:32:26 +0200 (CEST)
Received: from trinity.anyware-tech.com ([127.0.0.1])
	by localhost (trinity.anyware-tech.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 24822-01 for <hadoop-dev@lucene.apache.org>;
	Fri, 8 Sep 2006 19:32:20 +0200 (CEST)
Received: from [10.0.2.28] (io.anyware [10.0.2.28])
	by trinity.anyware-tech.com (Postfix) with ESMTP id 4077D400157
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Sep 2006 19:32:20 +0200 (CEST)
Message-ID: <4501A91F.8050308@anyware-tech.com>
Date: Fri, 08 Sep 2006 19:32:15 +0200
From: =?ISO-8859-1?Q?Fr=E9d=E9ric_Bertin?=
 <frederic.bertin@anyware-tech.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: eclipse-based gui to browse a HDFS or launch MR jobs
References: <44F70CEC.8060900@anyware-tech.com> <44F71FC8.4060208@apache.org>
In-Reply-To: <44F71FC8.4060208@apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: Debian amavisd-new at anyware-tech.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Doug Cutting wrote:
> This sounds like it might make a good contrib module.  Please submit a 
> "new feature" issue and attach it as a patch.
just done, see HADOOP-516.

Please feel free to comment or ask for any question.
It has mainly be used on Windows, which means some bugs may appear on 
other platforms.

Fred

From MAILER-DAEMON Fri Sep  8 17:36:07 2006
Return-Path: 
 <hadoop-dev-return-3641-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50626 invoked from network); 8 Sep 2006 17:36:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Sep 2006 17:36:07 -0000
Received: (qmail 89404 invoked by uid 500); 8 Sep 2006 17:36:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 89384 invoked by uid 500); 8 Sep 2006 17:36:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 89362 invoked by uid 99); 8 Sep 2006 17:36:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 10:36:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 10:36:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3EA8C71430B
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Sep 2006 17:32:28 +0000 (GMT)
Message-ID: <9889073.1157736748254.JavaMail.jira@brutus>
Date: Fri, 8 Sep 2006 10:32:28 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-288) RFC: Efficient file caching
In-Reply-To: <6015694.1149730109866.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-288?page=comments#action_12433450 ] 
            
Mahadev konar commented on HADOOP-288:
--------------------------------------


ok, this is what I plan to do. Doug, please comment if you are ok with this -- 

1) DistributedCache class will be seperate package - org.apache.hadoop.filecache;

2) To make it idependent of mapreduce -- 
DistributedCache will have methods -- 
Path localizeCacheArchives(URI of archive to localize, conf)
-- this will return the Path of the localized archive directory
Path localizeCacheFiles(URI of file to localize, conf)
-- this will return the Path of the localized file

The difference between these two methods being that localizeCacheArchives automatically unarchives a zip/jar file while localizeCacheFiles just copies the file locally.

3) DistributedCache maintains a list of localized files/caches so as to copy only once.

4) The TaskRunner is client of DistributedCache asking to cache files locally.

5) JobConf does not have any api's related to setCache/addCache. These will be seperate static methods in DistributedCache to setCaches/files in jobconf. The getCaches can also be impelmented as a static method in DistributedCache.

Comments?

> RFC: Efficient file caching
> ---------------------------
>
>                 Key: HADOOP-288
>                 URL: http://issues.apache.org/jira/browse/HADOOP-288
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.6.0
>            Reporter: Michel Tourn
>         Assigned To: Mahadev konar
>         Attachments: caching-3.patch, caching-4.patch, caching.patch, caching.patch, test.jar, test.zip
>
>
> RFC: Efficient file caching 
> (on Hadoop Task nodes, for benefit of MapReduce Tasks)
> ------------------------------------------------------
> We will start implementing this soon. Please provide feedback and improvements to this plan.
> The header "Options:" indicates places where simple choices must be made.
> Problem:
> -------
> o MapReduce tasks require access to additional out-of-band data ("dictionaries")
> This out-of-band data is:
> o in addition to the map/reduce inputs.
> o large (1GB+)
> o broadcast (same data is required on all the Task nodes)
> o changes "infrequently", in particular:
> oo it is always constant for all the Tasks in a Job. 
> oo it is often constant for a month at a time 
> oo it may be shared across team members
> o sometimes used by pure-Java MapReduce programs
> o sometimes used by non-Java MapReduce programs (using Hadoop-Streaming)
> o (future) used by programs that use HDFS and Task-trackers but not MapReduce.
> Existing Solutions to the problem:
> ---------------------------------
> These solutions are not good enough. The present proposal is to do Sol 1 with caching.
> Sol 1: Pure Hadoop: package the out-of-band data in the MapReduce Job jar file.
> Sol 2: Non  Hadoop: for each task node run rsync from single source for data.
> Sol 3: Non  Hadoop: use BitTorrent, etc.
> Sol.1 is correct but slow for many reasons:
>  The Job submitter must recreate a large jar(tar) file for every Job.
>   (The jar contains both changing programs and stable dictionaries)
>  The large Jar file must be propagated from the client to HDFS with 
>  a large replication factor. 
>  At the beginning of every Task, the Task tracker gets the job jar from HDFS 
>  and unjars it in the working directory. This can dominate task execution time.
>  
> Sol.2 has nice properties but also some problems.
>  It does not scale well with large clusters (many concurrent rsync read requests i.e. single-source broadcast)
>  It assumes that Hadoop users can upload data using rsync to the cluster nodes. As a policy, this is not allowed.
>  It requires rsync.
>  
> Sol.3 alleviates the rsync scalability problems but 
>       It is a dependency on an external system. 
>       We want something simpler and more tightly integrated with Hadoop.
>       
> Staging (uploading) out-of-band data:
> ------------------------------------
> The out-of-band data will often originate on the local filesystem of a user machine 
>  (i.e. a MapReduce job submitter)
> Nevertheless it makes sense to use HDFS to store the original out-of-band data because:
> o HDFS has (wide) replication. This enables scalable broadcast later.
> o HDFS is an available channel to move data from clients to all task machines.
> o HDFS is convenient as a shared location among Hadoop team members.
> Accessing (downloading) out-of-band data:
> ----------------------------------------
> The non-Java MapReduce programs do not have or want[1] APIs for HDFS.
> Instead these programs just want to access out-of-band data as 
>  local files at predefined paths.
> ([1] Existing programs should be reusable with no changes. 
>  This is often possible bec. communication is over stdin/stdout.)
> Job's jar file as a special case:
> --------------------------------
> One use case is to allow users to make the job jar itself cachable.
> This is only useful in cases where NOTHING changes when a job is resubmitted
>  (no MapRed code changes and no changes in shipped data)
> This situation might occur with an 'extractor' job (gets data from an external source: like Nutch crawler)
> Currently the Hadoop mapred-jar mechanism works in this way:
>  the job jar data is unjarred in the "working directory" of the Task 
>  the jar contains both MapRed java code (added to classpath)
> Cache synchronization:
> ---------------------
> The efficient implementation of the out-of-band data distribution
> is mostly a cache synchronization problem.
> A list of the various aspects where choices must be made follows.
> Cache key:
> ---------
> How do you test that the cached copy is out-of-date?
> Options: 
> 1. the archive/file timestamp 
> 2. the MD5 of the archive/file content
> Comparing source and destination Timestamps is problematic bec. it assumes synchronized clocks.
> Also there is no last-modif metadata in HDFS (for good reasons, like scalability of metadata ops)
> Timestamps stored with the source ('last-propagate-time') do 
>  not require synchronized clocks, only locally monotonic time. 
> (and the worse which can happen at daylight-savings switch is a missed update or an extra-update)
> The cache code could store a copy of the local timestamp 
> in the same way that it caches the value of the content hash along with the source data.
>  
> Cachable unit:
> -------------
> Options: individual files or archives or both.
> Note:
> At the API level, directories will be processed recursively 
> (and the local FS directories will parallel HDFS directories)
> So bulk operations are always possible using directories.
> The question here is whether to handle archives as an additional bulk mechanism.
> Archives are special because:
> o unarchiving occurs transparently as part of the cache sync
> o The cache key is computed on the archive and preserved although 
>   the archive itself is not preserved.
> Supported archive format will be: tar (maybe tgz or compressed jar)
> Archive detection test: by filename extension ".tar" or ".jar"
> Suppose we don't handle archives as special files:
> Pros:
>  o less code, no discussion about which archive formats are supported
>  o fine for large dictionary files. And when files are not large, user may as well
>    put them in the Job jar as usual.
>  o user code could always check and unarchive specific cached files
>    (as a side-effect of MapRed task initialization)
> Cons:
>  o handling small files may be inefficient 
>   (multiple HDFS operations, multiple hash computation, 
>    one 'metadata' hash file along with each small file)
>  o It will not be possible to handle the Job's jar file as a special case of caching 
> Cache isolation: 
> ---------------
> In some cases it may be a problem if the cached HDFS files are updated while a Job is in progress:
> The file may become unavailable for a short period of time and some tasks fail.
> The file may change (atomically) and different tasks use a different version.
> This isolation problem is not addressed in this proposal.
> Standard solutions to the isolation problem are:
> o Assume that Jobs and interfering cache updates won't occur concurrently.
> o Put a version number in the HDFS file paths and refer to a hard-coded version in the Job code.
> o Before running the MapRed job, run a non-distributed application that tests
>   what is the latest available version of the out-of-band data. 
>   Then make this version available to the MapRed job.
>   Two ways to do this. 
>   o either set a job property just-in-time:
>     addCachePathPair("/mydata/v1234/", "localcache/mydata_latest"); 
>     (see Job Configuration for meaning of this)
>   o or publish the decision as an HDFS file containing the version.
>     then rely on user code to read the version, and manually populate the cache:
>     Cache.syncCache("/hdfs/path/fileordir", "relative/local/fileordir");
>     (see MapReduce API for meaning of this)
> Cache synchronization stages:
> ----------------------------
> There are two stages: Client-to-HDFS and HDFS-to-TaskTracker
> o Client-to-HDFS stage.
> Options: A simple option is to not do anything here, i.e. rely on the user.
> This is a reasonable option given previous remarks on the role of HDFS:
>  HDFS is a staging/publishing area and a natural shared location.
> In particular this means that the system need not track 
> where the client files come from.
> o HDFS-to-TaskTracker:
> Client-to-HDFS synchronization (if done at all) should happen before this.
> Then HDFS-to-TaskTracker synchronization must happen right before 
> the data is needed on a node.
> MapReduce cache API:
> -------------------
> Options:
> 1. No change in MapReduce framework code:
> require the user to put this logic in map() (or reduce) function:
>  in MyMapper constructor (or in map() on first record) user is asked to add:
>  
>     Cache.syncCache("/hdfs/path/fileordir", "relative/local/fileordir");
>     Cache.syncCache("..."); //etc.
>   
> -----
> 2. Put this logic in MapReduce framework and use Job properties to
>    communicate the list of pairs (hdfs path; local path)
>  
> Directories are processed recursively.
> If archives are treated specially then they are unarchived on destination.
>  
> MapReduce Job Configuration:
> ---------------------------
> Options:
> with No change in MapReduce framework code (see above)
>  no special Job configuration: 
>    it is up to the MapRed writer to configure and run the cache operations.
> ---
> with Logic in MapReduce framework (see above)
>  some simple Job configuration
> JobConf.addCachePathPair(String, String)
> JobConf.addCachePathPair("/hdfs/path/fileordir", "relative/local/fileordir");

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep  8 17:40:59 2006
Return-Path: 
 <hadoop-dev-return-3642-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51530 invoked from network); 8 Sep 2006 17:40:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Sep 2006 17:40:59 -0000
Received: (qmail 92810 invoked by uid 500); 8 Sep 2006 17:40:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 92785 invoked by uid 500); 8 Sep 2006 17:40:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 92776 invoked by uid 99); 8 Sep 2006 17:40:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 10:40:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 10:40:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BB4677142F9
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Sep 2006 17:37:23 +0000 (GMT)
Message-ID: <32370879.1157737043763.JavaMail.jira@brutus>
Date: Fri, 8 Sep 2006 10:37:23 -0700 (PDT)
From: "Thomas Friol (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-516) Eclipse-based GUI: DFS explorer and
 basic Map/Reduce job launcher
In-Reply-To: <13131373.1157736022384.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-516?page=3Dcomments#actio=
n_12433452 ]=20
           =20
Thomas Friol commented on HADOOP-516:
-------------------------------------

I think it is 'hadoop-client.xml' and not 'hadoop-default.xml' that you mus=
t put in your scr folder.

> Eclipse-based GUI: DFS explorer and basic Map/Reduce job launcher
> -----------------------------------------------------------------
>
>                 Key: HADOOP-516
>                 URL: http://issues.apache.org/jira/browse/HADOOP-516
>             Project: Hadoop
>          Issue Type: New Feature
>         Environment: Eclipse 3.2
> JDK 1.5
>            Reporter: Fr=C3=A9d=C3=A9ric Bertin
>         Attachments: hdfsExplorer.zip
>
>
> to increase productivity in our current project (which makes a heavy use =
of Hadoop), we wrote a small Eclipse-based GUI application which basically =
consists in 2 views:
>    *  a HDFS explorer adapted from Eclipse filesystem explorer example.
>      For now, it includes the following features:
>          o classical tree-based browsing interface, with directory
>            content being detailed in a 3 columns table (file name, file
>            size, file type)
>          o refresh button
>          o delete file or directory (with confirm dialog): select files
>            in the tree or table and click the "Delete" button
>          o rename file or directory: simple click on the file in the
>            table, type the new name and validate
>          o open file with system editor: select the file in the table
>            and click "Open" button (works on Windows, not on Linux)
>          o internal drag & drop
>          o external drag & drop from the local filesystem to the HDFS
>            (the opposite doesn't work)
>    * a MapReduce *very* simple job launcher:
>          o select the job XML configuration file
>          o run the job
>          o kill the job
>          o visualize map and reduce progress with progress bars
>          o open a browser on the Hadoop job tracker web interface=20
> INSTALLATION NOTES:
>  - Eclipse 3.2
>  - JDK 1.5
>  - import the archive in Eclipse
>  - copy your hadoop conf file (hadoop-default.xml in "src" folder) -> thi=
s step should be moved in the GUI later
>  - right-click on the project and Run As -> Eclipse Application
>  - enjoy...

--=20
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: htt=
p://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

       

From MAILER-DAEMON Fri Sep  8 17:41:03 2006
Return-Path: 
 <hadoop-dev-return-3643-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51548 invoked from network); 8 Sep 2006 17:41:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Sep 2006 17:41:03 -0000
Received: (qmail 93280 invoked by uid 500); 8 Sep 2006 17:41:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 93215 invoked by uid 500); 8 Sep 2006 17:41:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 93206 invoked by uid 99); 8 Sep 2006 17:41:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 10:41:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 10:41:01 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C8240410012
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Sep 2006 17:37:26 +0000 (GMT)
Message-ID: <16333344.1157737046817.JavaMail.jira@brutus>
Date: Fri, 8 Sep 2006 10:37:26 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-514) namenode heartbeat interval should
 be configurable
In-Reply-To: <17229842.1157594543761.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-514?page=comments#action_12433453 ] 
            
Doug Cutting commented on HADOOP-514:
-------------------------------------

I agree that the heartbeat should be configurable.  Setting it automatically would be nice.  But we must not be careful to let the heartbeat interval get too long, as other actions are dependent on it.  Currently block replications and deletions ride on heartbeat responses.  So the heartbeat interval determines the speed of re-replication and deletion.

> namenode heartbeat interval should be configurable
> --------------------------------------------------
>
>                 Key: HADOOP-514
>                 URL: http://issues.apache.org/jira/browse/HADOOP-514
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Wendy Chien
>
> The namenode heartbeat interval is currently a constant in FSConstants.   It should be configurable instead.  Things which currently rely on the heartbeat occuring fairly frequently should be disassociated.    

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep  8 17:43:06 2006
Return-Path: 
 <hadoop-dev-return-3644-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52212 invoked from network); 8 Sep 2006 17:43:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Sep 2006 17:43:06 -0000
Received: (qmail 96490 invoked by uid 500); 8 Sep 2006 17:43:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 96472 invoked by uid 500); 8 Sep 2006 17:43:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 96452 invoked by uid 99); 8 Sep 2006 17:43:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 10:43:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 10:43:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E274D7142FA
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Sep 2006 17:39:28 +0000 (GMT)
Message-ID: <18038319.1157737168925.JavaMail.jira@brutus>
Date: Fri, 8 Sep 2006 10:39:28 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-458) libhdfs corrupts memory
In-Reply-To: <26584411.1155876193935.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-458?page=all ]

Doug Cutting resolved HADOOP-458.
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Arun!

> libhdfs corrupts memory
> -----------------------
>
>                 Key: HADOOP-458
>                 URL: http://issues.apache.org/jira/browse/HADOOP-458
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Christian Kunz
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.6.0
>
>         Attachments: HADOOP-458.patch
>
>
> in getJNIEnv() not enough space for optHadoopClassPath is allocated, corrupting the memory.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep  8 17:49:11 2006
Return-Path: 
 <hadoop-dev-return-3645-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 54983 invoked from network); 8 Sep 2006 17:49:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Sep 2006 17:49:11 -0000
Received: (qmail 21724 invoked by uid 500); 8 Sep 2006 17:49:07 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 21699 invoked by uid 500); 8 Sep 2006 17:49:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 21668 invoked by uid 99); 8 Sep 2006 17:49:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 10:49:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 10:49:06 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 994FB71430C
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Sep 2006 17:45:31 +0000 (GMT)
Message-ID: <2189265.1157737531624.JavaMail.jira@brutus>
Date: Fri, 8 Sep 2006 10:45:31 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-288) RFC: Efficient file caching
In-Reply-To: <6015694.1149730109866.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-288?page=comments#action_12433459 ] 
            
Doug Cutting commented on HADOOP-288:
-------------------------------------

+1  That sounds great!

> RFC: Efficient file caching
> ---------------------------
>
>                 Key: HADOOP-288
>                 URL: http://issues.apache.org/jira/browse/HADOOP-288
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.6.0
>            Reporter: Michel Tourn
>         Assigned To: Mahadev konar
>         Attachments: caching-3.patch, caching-4.patch, caching.patch, caching.patch, test.jar, test.zip
>
>
> RFC: Efficient file caching 
> (on Hadoop Task nodes, for benefit of MapReduce Tasks)
> ------------------------------------------------------
> We will start implementing this soon. Please provide feedback and improvements to this plan.
> The header "Options:" indicates places where simple choices must be made.
> Problem:
> -------
> o MapReduce tasks require access to additional out-of-band data ("dictionaries")
> This out-of-band data is:
> o in addition to the map/reduce inputs.
> o large (1GB+)
> o broadcast (same data is required on all the Task nodes)
> o changes "infrequently", in particular:
> oo it is always constant for all the Tasks in a Job. 
> oo it is often constant for a month at a time 
> oo it may be shared across team members
> o sometimes used by pure-Java MapReduce programs
> o sometimes used by non-Java MapReduce programs (using Hadoop-Streaming)
> o (future) used by programs that use HDFS and Task-trackers but not MapReduce.
> Existing Solutions to the problem:
> ---------------------------------
> These solutions are not good enough. The present proposal is to do Sol 1 with caching.
> Sol 1: Pure Hadoop: package the out-of-band data in the MapReduce Job jar file.
> Sol 2: Non  Hadoop: for each task node run rsync from single source for data.
> Sol 3: Non  Hadoop: use BitTorrent, etc.
> Sol.1 is correct but slow for many reasons:
>  The Job submitter must recreate a large jar(tar) file for every Job.
>   (The jar contains both changing programs and stable dictionaries)
>  The large Jar file must be propagated from the client to HDFS with 
>  a large replication factor. 
>  At the beginning of every Task, the Task tracker gets the job jar from HDFS 
>  and unjars it in the working directory. This can dominate task execution time.
>  
> Sol.2 has nice properties but also some problems.
>  It does not scale well with large clusters (many concurrent rsync read requests i.e. single-source broadcast)
>  It assumes that Hadoop users can upload data using rsync to the cluster nodes. As a policy, this is not allowed.
>  It requires rsync.
>  
> Sol.3 alleviates the rsync scalability problems but 
>       It is a dependency on an external system. 
>       We want something simpler and more tightly integrated with Hadoop.
>       
> Staging (uploading) out-of-band data:
> ------------------------------------
> The out-of-band data will often originate on the local filesystem of a user machine 
>  (i.e. a MapReduce job submitter)
> Nevertheless it makes sense to use HDFS to store the original out-of-band data because:
> o HDFS has (wide) replication. This enables scalable broadcast later.
> o HDFS is an available channel to move data from clients to all task machines.
> o HDFS is convenient as a shared location among Hadoop team members.
> Accessing (downloading) out-of-band data:
> ----------------------------------------
> The non-Java MapReduce programs do not have or want[1] APIs for HDFS.
> Instead these programs just want to access out-of-band data as 
>  local files at predefined paths.
> ([1] Existing programs should be reusable with no changes. 
>  This is often possible bec. communication is over stdin/stdout.)
> Job's jar file as a special case:
> --------------------------------
> One use case is to allow users to make the job jar itself cachable.
> This is only useful in cases where NOTHING changes when a job is resubmitted
>  (no MapRed code changes and no changes in shipped data)
> This situation might occur with an 'extractor' job (gets data from an external source: like Nutch crawler)
> Currently the Hadoop mapred-jar mechanism works in this way:
>  the job jar data is unjarred in the "working directory" of the Task 
>  the jar contains both MapRed java code (added to classpath)
> Cache synchronization:
> ---------------------
> The efficient implementation of the out-of-band data distribution
> is mostly a cache synchronization problem.
> A list of the various aspects where choices must be made follows.
> Cache key:
> ---------
> How do you test that the cached copy is out-of-date?
> Options: 
> 1. the archive/file timestamp 
> 2. the MD5 of the archive/file content
> Comparing source and destination Timestamps is problematic bec. it assumes synchronized clocks.
> Also there is no last-modif metadata in HDFS (for good reasons, like scalability of metadata ops)
> Timestamps stored with the source ('last-propagate-time') do 
>  not require synchronized clocks, only locally monotonic time. 
> (and the worse which can happen at daylight-savings switch is a missed update or an extra-update)
> The cache code could store a copy of the local timestamp 
> in the same way that it caches the value of the content hash along with the source data.
>  
> Cachable unit:
> -------------
> Options: individual files or archives or both.
> Note:
> At the API level, directories will be processed recursively 
> (and the local FS directories will parallel HDFS directories)
> So bulk operations are always possible using directories.
> The question here is whether to handle archives as an additional bulk mechanism.
> Archives are special because:
> o unarchiving occurs transparently as part of the cache sync
> o The cache key is computed on the archive and preserved although 
>   the archive itself is not preserved.
> Supported archive format will be: tar (maybe tgz or compressed jar)
> Archive detection test: by filename extension ".tar" or ".jar"
> Suppose we don't handle archives as special files:
> Pros:
>  o less code, no discussion about which archive formats are supported
>  o fine for large dictionary files. And when files are not large, user may as well
>    put them in the Job jar as usual.
>  o user code could always check and unarchive specific cached files
>    (as a side-effect of MapRed task initialization)
> Cons:
>  o handling small files may be inefficient 
>   (multiple HDFS operations, multiple hash computation, 
>    one 'metadata' hash file along with each small file)
>  o It will not be possible to handle the Job's jar file as a special case of caching 
> Cache isolation: 
> ---------------
> In some cases it may be a problem if the cached HDFS files are updated while a Job is in progress:
> The file may become unavailable for a short period of time and some tasks fail.
> The file may change (atomically) and different tasks use a different version.
> This isolation problem is not addressed in this proposal.
> Standard solutions to the isolation problem are:
> o Assume that Jobs and interfering cache updates won't occur concurrently.
> o Put a version number in the HDFS file paths and refer to a hard-coded version in the Job code.
> o Before running the MapRed job, run a non-distributed application that tests
>   what is the latest available version of the out-of-band data. 
>   Then make this version available to the MapRed job.
>   Two ways to do this. 
>   o either set a job property just-in-time:
>     addCachePathPair("/mydata/v1234/", "localcache/mydata_latest"); 
>     (see Job Configuration for meaning of this)
>   o or publish the decision as an HDFS file containing the version.
>     then rely on user code to read the version, and manually populate the cache:
>     Cache.syncCache("/hdfs/path/fileordir", "relative/local/fileordir");
>     (see MapReduce API for meaning of this)
> Cache synchronization stages:
> ----------------------------
> There are two stages: Client-to-HDFS and HDFS-to-TaskTracker
> o Client-to-HDFS stage.
> Options: A simple option is to not do anything here, i.e. rely on the user.
> This is a reasonable option given previous remarks on the role of HDFS:
>  HDFS is a staging/publishing area and a natural shared location.
> In particular this means that the system need not track 
> where the client files come from.
> o HDFS-to-TaskTracker:
> Client-to-HDFS synchronization (if done at all) should happen before this.
> Then HDFS-to-TaskTracker synchronization must happen right before 
> the data is needed on a node.
> MapReduce cache API:
> -------------------
> Options:
> 1. No change in MapReduce framework code:
> require the user to put this logic in map() (or reduce) function:
>  in MyMapper constructor (or in map() on first record) user is asked to add:
>  
>     Cache.syncCache("/hdfs/path/fileordir", "relative/local/fileordir");
>     Cache.syncCache("..."); //etc.
>   
> -----
> 2. Put this logic in MapReduce framework and use Job properties to
>    communicate the list of pairs (hdfs path; local path)
>  
> Directories are processed recursively.
> If archives are treated specially then they are unarchived on destination.
>  
> MapReduce Job Configuration:
> ---------------------------
> Options:
> with No change in MapReduce framework code (see above)
>  no special Job configuration: 
>    it is up to the MapRed writer to configure and run the cache operations.
> ---
> with Logic in MapReduce framework (see above)
>  some simple Job configuration
> JobConf.addCachePathPair(String, String)
> JobConf.addCachePathPair("/hdfs/path/fileordir", "relative/local/fileordir");

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep  8 17:52:58 2006
Return-Path: 
 <hadoop-dev-return-3646-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 56199 invoked from network); 8 Sep 2006 17:52:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Sep 2006 17:52:58 -0000
Received: (qmail 29520 invoked by uid 500); 8 Sep 2006 17:52:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 29500 invoked by uid 500); 8 Sep 2006 17:52:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 29491 invoked by uid 99); 8 Sep 2006 17:52:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 10:52:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 10:52:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6371D410012
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Sep 2006 17:49:22 +0000 (GMT)
Message-ID: <7887738.1157737762404.JavaMail.jira@brutus>
Date: Fri, 8 Sep 2006 10:49:22 -0700 (PDT)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-517) readLine function of
 UTF8ByteArrayUtils does not handle end of line correctly
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

readLine function of UTF8ByteArrayUtils does not handle end of line correctly
-----------------------------------------------------------------------------

                 Key: HADOOP-517
                 URL: http://issues.apache.org/jira/browse/HADOOP-517
             Project: Hadoop
          Issue Type: Bug
         Environment: windows
            Reporter: Hairong Kuang
         Assigned To: Hairong Kuang


The readLine function does not read ahead looking for '\n' after it reads '\r'. Therefore it incorrectly generates two lines, wth the second one empty in the window platform.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep  8 17:55:06 2006
Return-Path: 
 <hadoop-dev-return-3647-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57038 invoked from network); 8 Sep 2006 17:55:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Sep 2006 17:55:06 -0000
Received: (qmail 37365 invoked by uid 500); 8 Sep 2006 17:55:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 37343 invoked by uid 500); 8 Sep 2006 17:55:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 37334 invoked by uid 99); 8 Sep 2006 17:55:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 10:55:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 10:55:05 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7DA087142FA
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Sep 2006 17:51:30 +0000 (GMT)
Message-ID: <5998611.1157737890511.JavaMail.jira@brutus>
Date: Fri, 8 Sep 2006 10:51:30 -0700 (PDT)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-517) readLine function of
 UTF8ByteArrayUtils does not handle end of line correctly
In-Reply-To: <7887738.1157737762404.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-517?page=all ]

Hairong Kuang updated HADOOP-517:
---------------------------------

    Attachment: eol.patch

The attached file fixed the problem.

> readLine function of UTF8ByteArrayUtils does not handle end of line correctly
> -----------------------------------------------------------------------------
>
>                 Key: HADOOP-517
>                 URL: http://issues.apache.org/jira/browse/HADOOP-517
>             Project: Hadoop
>          Issue Type: Bug
>         Environment: windows
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>         Attachments: eol.patch
>
>
> The readLine function does not read ahead looking for '\n' after it reads '\r'. Therefore it incorrectly generates two lines, wth the second one empty in the window platform.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep  8 17:56:47 2006
Return-Path: 
 <hadoop-dev-return-3648-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57513 invoked from network); 8 Sep 2006 17:56:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Sep 2006 17:56:47 -0000
Received: (qmail 40631 invoked by uid 500); 8 Sep 2006 17:56:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40610 invoked by uid 500); 8 Sep 2006 17:56:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 40601 invoked by uid 99); 8 Sep 2006 17:56:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 10:56:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.148.227.152] (HELO rwcrmhc12.comcast.net)
 (216.148.227.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 10:56:45 -0700
Received: from [192.168.168.15]
 (c-71-202-24-246.hsd1.ca.comcast.net[71.202.24.246])
          by comcast.net (rwcrmhc12) with ESMTP
          id <20060908175622m12008dt47e>; Fri, 8 Sep 2006 17:56:23 +0000
Message-ID: <4501AEEE.8080805@apache.org>
Date: Fri, 08 Sep 2006 10:57:02 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.5 (X11/20060728)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: release today?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I'm thinking of rolling up the monthly release today.

Are there any serious bugs with simple fixes that I should commit first?

Doug

From MAILER-DAEMON Fri Sep  8 18:02:40 2006
Return-Path: 
 <hadoop-dev-return-3649-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 58698 invoked from network); 8 Sep 2006 18:02:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Sep 2006 18:02:40 -0000
Received: (qmail 49085 invoked by uid 500); 8 Sep 2006 18:02:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 48894 invoked by uid 500); 8 Sep 2006 18:02:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 48885 invoked by uid 99); 8 Sep 2006 18:02:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 11:02:40 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.109.112.28] (HELO mrout2-b.corp.dcn.yahoo.com)
 (216.109.112.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 11:02:39 -0700
Received: from happysicklx (wlanvpn-mc2e-246-45.corp.yahoo.com
 [172.21.148.45])
	by mrout2-b.corp.dcn.yahoo.com (8.13.6/8.13.6/y.out) with ESMTP id
 k88I1uJV025883
	for <hadoop-dev@lucene.apache.org>; Fri, 8 Sep 2006 11:01:56 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=from:to:subject:date:message-id:mime-version:content-type:
	content-transfer-encoding:x-mailer:thread-index:x-mimeole:in-reply-to;
	b=yOFLkrvOAFujc5qx5EWM/GxUnzD42jIGesbpNL02s51AdLr10YDOXlS84xrnSKUU
From: "Michel Tourn" <michel@yahoo-inc.com>
To: <hadoop-dev@lucene.apache.org>
Subject: RE: release today?
Date: Fri, 8 Sep 2006 11:01:55 -0700
Message-ID: <008501c6d370$dfe80300$db9315ac@ds.corp.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcbTcC9MfgnJB6+yQFWdWrJ6BkYNqgAAIoKg
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
In-Reply-To: <4501AEEE.8080805@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

517. It fixes hadoopStreaming junit on Windows

> -----Original Message-----
> From: Doug Cutting [mailto:cutting@apache.org]
> Sent: Friday, September 08, 2006 10:57 AM
> To: hadoop-dev@lucene.apache.org
> Subject: release today?
> 
> I'm thinking of rolling up the monthly release today.
> 
> Are there any serious bugs with simple fixes that I should commit first?
> 
> Doug



From MAILER-DAEMON Fri Sep  8 18:13:59 2006
Return-Path: 
 <hadoop-dev-return-3650-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 62148 invoked from network); 8 Sep 2006 18:13:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Sep 2006 18:13:59 -0000
Received: (qmail 72879 invoked by uid 500); 8 Sep 2006 18:13:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72686 invoked by uid 500); 8 Sep 2006 18:13:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72676 invoked by uid 99); 8 Sep 2006 18:13:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 11:13:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 11:13:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4158F7142FA
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Sep 2006 18:10:23 +0000 (GMT)
Message-ID: <27625576.1157739023265.JavaMail.jira@brutus>
Date: Fri, 8 Sep 2006 11:10:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-517) readLine function of
 UTF8ByteArrayUtils does not handle end of line correctly
In-Reply-To: <7887738.1157737762404.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-517?page=comments#action_12433464 ] 
            
Doug Cutting commented on HADOOP-517:
-------------------------------------

Can you use the same logic for readLine() as in HADOOP-474?  Ideally we could use the same implementation even.  But I don't like the 'new PushbackInputStream()'. mark() and reset() seem better, if the input stream supports them...

> readLine function of UTF8ByteArrayUtils does not handle end of line correctly
> -----------------------------------------------------------------------------
>
>                 Key: HADOOP-517
>                 URL: http://issues.apache.org/jira/browse/HADOOP-517
>             Project: Hadoop
>          Issue Type: Bug
>         Environment: windows
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>         Attachments: eol.patch
>
>
> The readLine function does not read ahead looking for '\n' after it reads '\r'. Therefore it incorrectly generates two lines, wth the second one empty in the window platform.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep  8 18:19:59 2006
Return-Path: 
 <hadoop-dev-return-3651-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 63355 invoked from network); 8 Sep 2006 18:19:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Sep 2006 18:19:59 -0000
Received: (qmail 82224 invoked by uid 500); 8 Sep 2006 18:19:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 82038 invoked by uid 500); 8 Sep 2006 18:19:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 82029 invoked by uid 99); 8 Sep 2006 18:19:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 11:19:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 11:19:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 528F5714300
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Sep 2006 18:16:23 +0000 (GMT)
Message-ID: <17507458.1157739383334.JavaMail.jira@brutus>
Date: Fri, 8 Sep 2006 11:16:23 -0700 (PDT)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-517) readLine function of
 UTF8ByteArrayUtils does not handle end of line correctly
In-Reply-To: <7887738.1157737762404.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-517?page=comments#action_12433465 ] 
            
Michel Tourn commented on HADOOP-517:
-------------------------------------

A PushbackInputStream seems overkill for what we are talking about. And performance is critical here.

There is a standard efficient code pattern that will consume:
'\r'
or 
'\n'
or 
\r\n

(for Mac, Unix, Windows respectively)


> readLine function of UTF8ByteArrayUtils does not handle end of line correctly
> -----------------------------------------------------------------------------
>
>                 Key: HADOOP-517
>                 URL: http://issues.apache.org/jira/browse/HADOOP-517
>             Project: Hadoop
>          Issue Type: Bug
>         Environment: windows
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>         Attachments: eol.patch
>
>
> The readLine function does not read ahead looking for '\n' after it reads '\r'. Therefore it incorrectly generates two lines, wth the second one empty in the window platform.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep  8 20:27:59 2006
Return-Path: 
 <hadoop-dev-return-3652-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96569 invoked from network); 8 Sep 2006 20:27:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Sep 2006 20:27:59 -0000
Received: (qmail 52057 invoked by uid 500); 8 Sep 2006 20:27:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 52028 invoked by uid 500); 8 Sep 2006 20:27:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 52019 invoked by uid 99); 8 Sep 2006 20:27:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 13:27:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 13:27:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8C6A9410012
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Sep 2006 20:24:23 +0000 (GMT)
Message-ID: <23672081.1157747063572.JavaMail.jira@brutus>
Date: Fri, 8 Sep 2006 13:24:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-517) readLine function of
 UTF8ByteArrayUtils does not handle end of line correctly
In-Reply-To: <7887738.1157737762404.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-517?page=all ]

Doug Cutting updated HADOOP-517:
--------------------------------

    Fix Version/s: 0.6.0

> readLine function of UTF8ByteArrayUtils does not handle end of line correctly
> -----------------------------------------------------------------------------
>
>                 Key: HADOOP-517
>                 URL: http://issues.apache.org/jira/browse/HADOOP-517
>             Project: Hadoop
>          Issue Type: Bug
>         Environment: windows
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.6.0
>
>         Attachments: eol.patch
>
>
> The readLine function does not read ahead looking for '\n' after it reads '\r'. Therefore it incorrectly generates two lines, wth the second one empty in the window platform.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep  8 20:33:58 2006
Return-Path: 
 <hadoop-dev-return-3653-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99549 invoked from network); 8 Sep 2006 20:33:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Sep 2006 20:33:58 -0000
Received: (qmail 63614 invoked by uid 500); 8 Sep 2006 20:33:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63593 invoked by uid 500); 8 Sep 2006 20:33:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63584 invoked by uid 99); 8 Sep 2006 20:33:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 13:33:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 13:33:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 59861410016
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Sep 2006 20:30:22 +0000 (GMT)
Message-ID: <20524097.1157747422363.JavaMail.jira@brutus>
Date: Fri, 8 Sep 2006 13:30:22 -0700 (PDT)
From: "Dick King (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-518) hadoop dfs -cp foo/bar/bad-file
 mumble/new-file copies a file with a bad checksum
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hadoop dfs -cp foo/bar/bad-file mumble/new-file copies a file with a bad checksum
---------------------------------------------------------------------------------

                 Key: HADOOP-518
                 URL: http://issues.apache.org/jira/browse/HADOOP-518
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
         Environment: red hat
            Reporter: Dick King


I have a file that reliably generates a checksum error when it's read, whether by a map/reduce job as input or by a "dfs -get" command.

However...

if I do a "dfs -cp" from the file with the bad checksum the copy can be read in its entirety without a checksum error.

I would consider it reasonable for the command to fail, or for the new file to be created but to also have a checksum error in the same place, but this behavior is unsettling.

-dk


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep  8 20:40:59 2006
Return-Path: 
 <hadoop-dev-return-3654-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 969 invoked from network); 8 Sep 2006 20:41:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Sep 2006 20:40:59 -0000
Received: (qmail 70815 invoked by uid 500); 8 Sep 2006 20:40:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70789 invoked by uid 500); 8 Sep 2006 20:40:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 70780 invoked by uid 99); 8 Sep 2006 20:40:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 13:40:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 13:40:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A1E1E410012
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Sep 2006 20:37:23 +0000 (GMT)
Message-ID: <28671269.1157747843660.JavaMail.jira@brutus>
Date: Fri, 8 Sep 2006 13:37:23 -0700 (PDT)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-517) readLine function of
 UTF8ByteArrayUtils does not handle end of line correctly
In-Reply-To: <7887738.1157737762404.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-517?page=all ]

Hairong Kuang updated HADOOP-517:
---------------------------------

    Attachment: eol.patch

In hadoop streaming all the input streams passed to readLine support mark and reset. So the attached new patch followed Doug's suggestion.

> readLine function of UTF8ByteArrayUtils does not handle end of line correctly
> -----------------------------------------------------------------------------
>
>                 Key: HADOOP-517
>                 URL: http://issues.apache.org/jira/browse/HADOOP-517
>             Project: Hadoop
>          Issue Type: Bug
>         Environment: windows
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.6.0
>
>         Attachments: eol.patch, eol.patch
>
>
> The readLine function does not read ahead looking for '\n' after it reads '\r'. Therefore it incorrectly generates two lines, wth the second one empty in the window platform.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep  8 20:46:59 2006
Return-Path: 
 <hadoop-dev-return-3655-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1880 invoked from network); 8 Sep 2006 20:46:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Sep 2006 20:46:59 -0000
Received: (qmail 75168 invoked by uid 500); 8 Sep 2006 20:46:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75148 invoked by uid 500); 8 Sep 2006 20:46:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75136 invoked by uid 99); 8 Sep 2006 20:46:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 13:46:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 13:46:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7C283410012
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Sep 2006 20:43:23 +0000 (GMT)
Message-ID: <12023213.1157748203506.JavaMail.jira@brutus>
Date: Fri, 8 Sep 2006 13:43:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-517) readLine function of
 UTF8ByteArrayUtils does not handle end of line correctly
In-Reply-To: <7887738.1157737762404.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-517?page=all ]

Doug Cutting resolved HADOOP-517.
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Hairong!

> readLine function of UTF8ByteArrayUtils does not handle end of line correctly
> -----------------------------------------------------------------------------
>
>                 Key: HADOOP-517
>                 URL: http://issues.apache.org/jira/browse/HADOOP-517
>             Project: Hadoop
>          Issue Type: Bug
>         Environment: windows
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.6.0
>
>         Attachments: eol.patch, eol.patch
>
>
> The readLine function does not read ahead looking for '\n' after it reads '\r'. Therefore it incorrectly generates two lines, wth the second one empty in the window platform.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep  8 20:59:59 2006
Return-Path: 
 <hadoop-dev-return-3656-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 5010 invoked from network); 8 Sep 2006 20:59:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Sep 2006 20:59:59 -0000
Received: (qmail 90341 invoked by uid 500); 8 Sep 2006 20:59:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 90148 invoked by uid 500); 8 Sep 2006 20:59:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 90139 invoked by uid 99); 8 Sep 2006 20:59:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 13:59:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 13:59:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 703207142E8
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Sep 2006 20:56:23 +0000 (GMT)
Message-ID: <20073046.1157748983457.JavaMail.jira@brutus>
Date: Fri, 8 Sep 2006 13:56:23 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-474) support compressed text files as input
 and output
In-Reply-To: <19704285.1156402132980.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-474?page=all ]

Owen O'Malley updated HADOOP-474:
---------------------------------

    Attachment: text-gz-3.patch

This patch extends the previous one by:
  1. moving the set/get methods for output compression to OutputFormatBase
  2. moving the set/get methods for sequence file compression type to SequenceFile
  3. adding new methods to JobConf for set/get of the map output compression codec
  4. change the attribute names from mapred.seqfile.* to io.seqfile.*

> support compressed text files as input and output
> -------------------------------------------------
>
>                 Key: HADOOP-474
>                 URL: http://issues.apache.org/jira/browse/HADOOP-474
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.5.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.6.0
>
>         Attachments: text-gz-2.patch, text-gz-3.patch, text-gz.patch
>
>
> I'd like TextInputFomat and TextOutputFormat to automatically compress and uncompress text files when they are read and written. Furthermore, I'd like to be able to use custom compressors as defined in HADOOP-441. Therefore, I propose:
> Adding a map of compression codecs in the server config files:
> io.compression.codecs = "<suffix>=<codec class>,..."
> so the default would be something like:
> <property>
>   <name>io.compression.codecs</name>
>   <value>.gz=org.apache.hadoop.io.GZipCodec,.Z=org.apache.hadoop.io.ZipCodec</value>
>   <description>A list of file suffixes and the codecs for them.</description>
> </property>
> note that the suffix can include multiple "." so you could support suffixes like ".tar.gz", but they are just treated as literals against the end of the filename.
> If the TextInputFormat is dealing with such a file, it:
>   1. makes a single split
>   2. decompresses automatically
> On the output side, if mapred.output.compress is true, then TextOutputFormat would use a new property mapred.output.compression.codec that would define the codec to use to compress the outputs,  defaulting to gzip. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep  8 21:00:00 2006
Return-Path: 
 <hadoop-dev-return-3657-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 5076 invoked from network); 8 Sep 2006 21:00:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Sep 2006 21:00:00 -0000
Received: (qmail 90581 invoked by uid 500); 8 Sep 2006 21:00:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 90357 invoked by uid 500); 8 Sep 2006 21:00:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 90348 invoked by uid 99); 8 Sep 2006 21:00:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 13:59:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 13:59:59 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9FEFF7142E9
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Sep 2006 20:56:24 +0000 (GMT)
Message-ID: <29492244.1157748984652.JavaMail.jira@brutus>
Date: Fri, 8 Sep 2006 13:56:24 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-514) namenode heartbeat interval should
 be configurable
In-Reply-To: <17229842.1157594543761.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-514?page=comments#action_12433496 ] 
            
Yoram Arnon commented on HADOOP-514:
------------------------------------

agreed, the dfs needs to be responsive.
but the larger the system, the more frequently datanodes hit the name node.
a block that awaits re-replication will get replicated to the first node that sends a heartbeat and makes sense as a replication destination. Overall the system is very responsive even though each individual data node sends infrequent heartbeats.
as for deletions, they can wait a bit, especially with undelete functionality in mind.
The formula max(nodes/10, 1) maintains heartbeat rate at a constant 10 per second at the namenode. We can tweak the denominator to change that rate, but this seems like a good rate to get responsiveness, while limiting the load on the namenode.


> namenode heartbeat interval should be configurable
> --------------------------------------------------
>
>                 Key: HADOOP-514
>                 URL: http://issues.apache.org/jira/browse/HADOOP-514
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Wendy Chien
>
> The namenode heartbeat interval is currently a constant in FSConstants.   It should be configurable instead.  Things which currently rely on the heartbeat occuring fairly frequently should be disassociated.    

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep  8 21:21:01 2006
Return-Path: 
 <hadoop-dev-return-3658-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9546 invoked from network); 8 Sep 2006 21:21:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Sep 2006 21:21:01 -0000
Received: (qmail 14228 invoked by uid 500); 8 Sep 2006 21:21:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14040 invoked by uid 500); 8 Sep 2006 21:21:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 14028 invoked by uid 99); 8 Sep 2006 21:21:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 14:21:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 14:20:59 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 104FB714302
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Sep 2006 21:17:25 +0000 (GMT)
Message-ID: <5360358.1157750245064.JavaMail.jira@brutus>
Date: Fri, 8 Sep 2006 14:17:25 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-474) support compressed text files as input
 and output
In-Reply-To: <19704285.1156402132980.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-474?page=all ]

Doug Cutting updated HADOOP-474:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Owen!

> support compressed text files as input and output
> -------------------------------------------------
>
>                 Key: HADOOP-474
>                 URL: http://issues.apache.org/jira/browse/HADOOP-474
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.5.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.6.0
>
>         Attachments: text-gz-2.patch, text-gz-3.patch, text-gz.patch
>
>
> I'd like TextInputFomat and TextOutputFormat to automatically compress and uncompress text files when they are read and written. Furthermore, I'd like to be able to use custom compressors as defined in HADOOP-441. Therefore, I propose:
> Adding a map of compression codecs in the server config files:
> io.compression.codecs = "<suffix>=<codec class>,..."
> so the default would be something like:
> <property>
>   <name>io.compression.codecs</name>
>   <value>.gz=org.apache.hadoop.io.GZipCodec,.Z=org.apache.hadoop.io.ZipCodec</value>
>   <description>A list of file suffixes and the codecs for them.</description>
> </property>
> note that the suffix can include multiple "." so you could support suffixes like ".tar.gz", but they are just treated as literals against the end of the filename.
> If the TextInputFormat is dealing with such a file, it:
>   1. makes a single split
>   2. decompresses automatically
> On the output side, if mapred.output.compress is true, then TextOutputFormat would use a new property mapred.output.compression.codec that would define the codec to use to compress the outputs,  defaulting to gzip. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep  8 23:23:58 2006
Return-Path: 
 <hadoop-dev-return-3659-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33574 invoked from network); 8 Sep 2006 23:23:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Sep 2006 23:23:58 -0000
Received: (qmail 40854 invoked by uid 500); 8 Sep 2006 23:23:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40832 invoked by uid 500); 8 Sep 2006 23:23:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 40820 invoked by uid 99); 8 Sep 2006 23:23:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 16:23:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Sep 2006 16:23:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 58DDB7142F4
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Sep 2006 23:20:22 +0000 (GMT)
Message-ID: <7528490.1157757622361.JavaMail.jira@brutus>
Date: Fri, 8 Sep 2006 16:20:22 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-519) HDFS File API should be extended to
 include positional read
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

HDFS File API should be extended to include positional read
-----------------------------------------------------------

                 Key: HADOOP-519
                 URL: http://issues.apache.org/jira/browse/HADOOP-519
             Project: Hadoop
          Issue Type: New Feature
          Components: dfs
    Affects Versions: 0.6.0
         Environment: All
            Reporter: Milind Bhandarkar
         Assigned To: Milind Bhandarkar
             Fix For: 0.7.0


HDFS Input streams should support positional read. Positional read (such as the pread syscall on linux) allows reading for a specified offset without affecting the current file offset. Since the underlying file state is not touched, pread can be used efficiently in multi-threaded programs.

Here is how I plan to implement it.

Provide PositionedReadable interface, with the following methods:

int read(long position, byte[] buffer, int offset, int length);
void readFully(long position, byte[] buffer, int offset, int length);
void readFully(long position, byte[] buffer);

Abstract class FSInputStream would provide default implementation of the above methods using getPos(), seek() and read() methods. The default implementation is inefficient in multi-threaded programs since it locks the object while seeking, reading, and restoring to old state.

DFSClient.DFSInputStream, which extends FSInputStream will provide an efficient non-synchronized implementation for above calls.

In addition, FSDataInputStream, which is a wrapper around FSInputStream, will provide wrapper methods for above read methods as well.

Patch forthcoming early next week.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sun Sep 10 15:15:56 2006
Return-Path: 
 <hadoop-dev-return-3660-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20697 invoked from network); 10 Sep 2006 15:15:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Sep 2006 15:15:56 -0000
Received: (qmail 74060 invoked by uid 500); 10 Sep 2006 15:15:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 73960 invoked by uid 500); 10 Sep 2006 15:15:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 73950 invoked by uid 99); 10 Sep 2006 15:15:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Sep 2006 08:15:49 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of emanihc@gmail.com designates
 66.249.82.234 as permitted sender)
Received: from [66.249.82.234] (HELO wx-out-0506.google.com) (66.249.82.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Sep 2006 08:15:48 -0700
Received: by wx-out-0506.google.com with SMTP id s15so1181087wxc
        for <hadoop-dev@lucene.apache.org>;
 Sun, 10 Sep 2006 08:15:27 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=Xz0QK8verZEQs9Tz11ezwAzxuoQ76JXRZ39Aidu8dZgdUoDfoCd5KcNxcFvD4hijG151bH5SYI35kg0A1/gK5IWAv5s//cj7eDzQTPCx5EKMLxPtZNZPyp+TjAhKX7kH91FyJpRrtAU7yObVDSYY8R0RADwsSd5bWmGYOTT4vB0=
Received: by 10.90.63.16 with SMTP id l16mr1329235aga;
        Sun, 10 Sep 2006 08:15:27 -0700 (PDT)
Received: by 10.90.118.7 with HTTP; Sun, 10 Sep 2006 08:15:27 -0700 (PDT)
Message-ID: <39209b600609100815q2008534sba5492b5e863d413@mail.gmail.com>
Date: Sun, 10 Sep 2006 23:15:27 +0800
From: emanihc <emanihc@gmail.com>
To: nutch-dev@lucene.apache.org, hadoop-dev@lucene.apache.org
Subject: Help: DistributedSearch thown ClassCastException
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_Part_109112_20008378.1157901327357"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_109112_20008378.1157901327357
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

hello all

I check out directly from SVN to get the sources,

run "bin/nutch server 12345 ../crawl/"

run "bin/nutch 'org.apache.nutch.searcher.DistributedSearch$Client' 'www'
localhost 12345"

and then it thrown Exception below:

========================================================
$ bin/nutch 'org.apache.nutch.searcher.DistributedSearch$Client' "www"
localhos
t 12345
STATS: 1 servers, 5 segments.
Total hits: 9
Exception in thread "main" java.lang.ClassCastException: $Proxy0
        at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:241)
        at org.apache.nutch.searcher.DistributedSearch$Client.getRemote
(Distribu
tedSearch.java:284)
        at org.apache.nutch.searcher.DistributedSearch$Client.getDetails
(Distrib
utedSearch.java:299)
        at org.apache.nutch.searcher.DistributedSearch$Client.main
(DistributedSe
arch.java:377)
=========================================================

------=_Part_109112_20008378.1157901327357--

From MAILER-DAEMON Mon Sep 11 17:25:39 2006
Return-Path: 
 <hadoop-dev-return-3661-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 80740 invoked from network); 11 Sep 2006 17:25:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Sep 2006 17:25:39 -0000
Received: (qmail 29479 invoked by uid 500); 11 Sep 2006 17:25:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 29371 invoked by uid 500); 11 Sep 2006 17:25:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 29295 invoked by uid 99); 11 Sep 2006 17:25:34 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Sep 2006 10:25:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 92276714313
	for <hadoop-dev@lucene.apache.org>; Mon, 11 Sep 2006 17:21:24 +0000 (GMT)
Message-ID: <10349829.1157995284595.JavaMail.jira@brutus>
Date: Mon, 11 Sep 2006 10:21:24 -0700 (PDT)
From: "Christian Kunz (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-520) libhdfs returns success even when
 writing to a file fails
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

libhdfs returns success even when writing to a file fails
---------------------------------------------------------

                 Key: HADOOP-520
                 URL: http://issues.apache.org/jira/browse/HADOOP-520
             Project: Hadoop
          Issue Type: Bug
    Affects Versions: 0.5.0
            Reporter: Christian Kunz


hdfsWrite prints out an error message when write fails, but still returns number of bytes requested. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 11 17:34:48 2006
Return-Path: 
 <hadoop-dev-return-3662-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84259 invoked from network); 11 Sep 2006 17:34:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Sep 2006 17:34:48 -0000
Received: (qmail 53032 invoked by uid 500); 11 Sep 2006 17:34:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53009 invoked by uid 500); 11 Sep 2006 17:34:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 52993 invoked by uid 99); 11 Sep 2006 17:34:46 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Sep 2006 10:34:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:46152] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 83/50-25981-04E95054 for <hadoop-dev@lucene.apache.org>;
 Mon, 11 Sep 2006 10:34:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C434841001F
	for <hadoop-dev@lucene.apache.org>; Mon, 11 Sep 2006 17:31:24 +0000 (GMT)
Message-ID: <15615093.1157995884801.JavaMail.jira@brutus>
Date: Mon, 11 Sep 2006 10:31:24 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-519) HDFS File API should be extended to
 include positional read
In-Reply-To: <7528490.1157757622361.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-519?page=comments#action_12433910 ] 
            
Doug Cutting commented on HADOOP-519:
-------------------------------------

So, to be clear, you will modify both FSInputStream and FSDataInputStream to implement the new PositionReadable interface, right?  (FSDataInputStream should also implement Seekable too: it already has the methods, but does not yet reference the interface.)

Only the primitive FSInputStream.read(long,byte[],int,int) method needs to be synchronized.  The others can be unsynchronized and implemented only in base classes, inherited by optimized subclasses.

An optimized implementation of read(long,byte[],int,int) can be provided in both DFSInputStream and LocalFSInputStream (the latter using nio's FileChannel.read(ByteBuffer,long)).  It might be simpler if the PositionReadble API were instead read(ByteBuffer, long), so that the client can manage ByteBuffer allocation.

Finally, we should change implementations of read(byte[],int,int) and seek(long) to be synchronized.  This won't hurt, since they're not currently thread safe, and it will make the positioned-read methods thread-safe.

> HDFS File API should be extended to include positional read
> -----------------------------------------------------------
>
>                 Key: HADOOP-519
>                 URL: http://issues.apache.org/jira/browse/HADOOP-519
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.6.0
>         Environment: All
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.7.0
>
>
> HDFS Input streams should support positional read. Positional read (such as the pread syscall on linux) allows reading for a specified offset without affecting the current file offset. Since the underlying file state is not touched, pread can be used efficiently in multi-threaded programs.
> Here is how I plan to implement it.
> Provide PositionedReadable interface, with the following methods:
> int read(long position, byte[] buffer, int offset, int length);
> void readFully(long position, byte[] buffer, int offset, int length);
> void readFully(long position, byte[] buffer);
> Abstract class FSInputStream would provide default implementation of the above methods using getPos(), seek() and read() methods. The default implementation is inefficient in multi-threaded programs since it locks the object while seeking, reading, and restoring to old state.
> DFSClient.DFSInputStream, which extends FSInputStream will provide an efficient non-synchronized implementation for above calls.
> In addition, FSDataInputStream, which is a wrapper around FSInputStream, will provide wrapper methods for above read methods as well.
> Patch forthcoming early next week.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 11 17:41:34 2006
Return-Path: 
 <hadoop-dev-return-3663-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 87147 invoked from network); 11 Sep 2006 17:41:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Sep 2006 17:41:34 -0000
Received: (qmail 66729 invoked by uid 500); 11 Sep 2006 17:41:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66708 invoked by uid 500); 11 Sep 2006 17:41:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66680 invoked by uid 99); 11 Sep 2006 17:41:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Sep 2006 10:41:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [204.127.192.85] (HELO rwcrmhc15.comcast.net) (204.127.192.85)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Sep 2006 10:41:29 -0700
Received: from [192.168.168.15]
 (c-71-202-24-246.hsd1.ca.comcast.net[71.202.24.246])
          by comcast.net (rwcrmhc15) with ESMTP
          id <20060911174108m1500772n9e>; Mon, 11 Sep 2006 17:41:08 +0000
Message-ID: <45059FB4.9040805@apache.org>
Date: Mon, 11 Sep 2006 10:41:08 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.5 (X11/20060728)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: Help: DistributedSearch thown ClassCastException
References: <39209b600609100815q2008534sba5492b5e863d413@mail.gmail.com>
In-Reply-To: <39209b600609100815q2008534sba5492b5e863d413@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

It looks like DistributedSearch.Protocol needs to implement the 
VersionedProtocol interface.  Probably this exception could be improved...

Doug

emanihc wrote:
> hello all
> 
> I check out directly from SVN to get the sources,
> 
> run "bin/nutch server 12345 ../crawl/"
> 
> run "bin/nutch 'org.apache.nutch.searcher.DistributedSearch$Client' 'www'
> localhost 12345"
> 
> and then it thrown Exception below:
> 
> ========================================================
> $ bin/nutch 'org.apache.nutch.searcher.DistributedSearch$Client' "www"
> localhos
> t 12345
> STATS: 1 servers, 5 segments.
> Total hits: 9
> Exception in thread "main" java.lang.ClassCastException: $Proxy0
>        at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:241)
>        at org.apache.nutch.searcher.DistributedSearch$Client.getRemote
> (Distribu
> tedSearch.java:284)
>        at org.apache.nutch.searcher.DistributedSearch$Client.getDetails
> (Distrib
> utedSearch.java:299)
>        at org.apache.nutch.searcher.DistributedSearch$Client.main
> (DistributedSe
> arch.java:377)
> =========================================================
> 

From MAILER-DAEMON Mon Sep 11 17:46:53 2006
Return-Path: 
 <hadoop-dev-return-3664-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 88505 invoked from network); 11 Sep 2006 17:46:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Sep 2006 17:46:53 -0000
Received: (qmail 73109 invoked by uid 500); 11 Sep 2006 17:46:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 73089 invoked by uid 500); 11 Sep 2006 17:46:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 73072 invoked by uid 99); 11 Sep 2006 17:46:49 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Sep 2006 10:46:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:56673] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 6D/A0-25981-311A5054 for <hadoop-dev@lucene.apache.org>;
 Mon, 11 Sep 2006 10:46:59 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 705BF7142F1
	for <hadoop-dev@lucene.apache.org>; Mon, 11 Sep 2006 17:43:27 +0000 (GMT)
Message-ID: <1965890.1157996607457.JavaMail.jira@brutus>
Date: Mon, 11 Sep 2006 10:43:27 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-520) libhdfs returns success even when
 writing to a file fails
In-Reply-To: <10349829.1157995284595.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-520?page=all ]

Doug Cutting updated HADOOP-520:
--------------------------------

    Component/s: libhdfs

> libhdfs returns success even when writing to a file fails
> ---------------------------------------------------------
>
>                 Key: HADOOP-520
>                 URL: http://issues.apache.org/jira/browse/HADOOP-520
>             Project: Hadoop
>          Issue Type: Bug
>          Components: libhdfs
>    Affects Versions: 0.5.0
>            Reporter: Christian Kunz
>
> hdfsWrite prints out an error message when write fails, but still returns number of bytes requested. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 11 18:43:50 2006
Return-Path: 
 <hadoop-dev-return-3665-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 5268 invoked from network); 11 Sep 2006 18:43:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Sep 2006 18:43:50 -0000
Received: (qmail 72120 invoked by uid 500); 11 Sep 2006 18:43:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72095 invoked by uid 500); 11 Sep 2006 18:43:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72061 invoked by uid 99); 11 Sep 2006 18:43:48 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Sep 2006 11:43:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:44472] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 2C/22-25981-E6EA5054 for <hadoop-dev@lucene.apache.org>;
 Mon, 11 Sep 2006 11:43:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DFE7341001A
	for <hadoop-dev@lucene.apache.org>; Mon, 11 Sep 2006 18:40:25 +0000 (GMT)
Message-ID: <23937185.1158000025914.JavaMail.jira@brutus>
Date: Mon, 11 Sep 2006 11:40:25 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-519) HDFS File API should be extended to
 include positional read
In-Reply-To: <7528490.1157757622361.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-519?page=comments#action_12433929 ] 
            
Milind Bhandarkar commented on HADOOP-519:
------------------------------------------

>>So, to be clear, you will modify both FSInputStream and FSDataInputStream to implement the new PositionReadable interface, right?

Yes.

>>Only the primitive FSInputStream.read(long,byte[],int,int) method needs to be synchronized. The others can be unsynchronized and implemented >>only in base classes, inherited by optimized subclasses.

That's right. 

>>An optimized implementation of read(long,byte[],int,int) can be provided in both DFSInputStream and LocalFSInputStream (the latter using nio's >>FileChannel.read(ByteBuffer,long)). It might be simpler if the PositionReadble API were instead read(ByteBuffer, long), so that the client can >>manage ByteBuffer allocation.

I was going to make LocalFSInputStream to use the default synchronized implementation. I will study the solution you have suggested and will try to see if there are any tangible benefits. 

>>Finally, we should change implementations of read(byte[],int,int) and seek(long) to be synchronized. This won't hurt, since they're not currently >>thread safe, and it will make the positioned-read methods thread-safe.

Yes.

> HDFS File API should be extended to include positional read
> -----------------------------------------------------------
>
>                 Key: HADOOP-519
>                 URL: http://issues.apache.org/jira/browse/HADOOP-519
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.6.0
>         Environment: All
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.7.0
>
>
> HDFS Input streams should support positional read. Positional read (such as the pread syscall on linux) allows reading for a specified offset without affecting the current file offset. Since the underlying file state is not touched, pread can be used efficiently in multi-threaded programs.
> Here is how I plan to implement it.
> Provide PositionedReadable interface, with the following methods:
> int read(long position, byte[] buffer, int offset, int length);
> void readFully(long position, byte[] buffer, int offset, int length);
> void readFully(long position, byte[] buffer);
> Abstract class FSInputStream would provide default implementation of the above methods using getPos(), seek() and read() methods. The default implementation is inefficient in multi-threaded programs since it locks the object while seeking, reading, and restoring to old state.
> DFSClient.DFSInputStream, which extends FSInputStream will provide an efficient non-synchronized implementation for above calls.
> In addition, FSDataInputStream, which is a wrapper around FSInputStream, will provide wrapper methods for above read methods as well.
> Patch forthcoming early next week.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 11 22:09:11 2006
Return-Path: 
 <hadoop-dev-return-3669-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75971 invoked from network); 11 Sep 2006 22:09:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Sep 2006 22:09:11 -0000
Received: (qmail 25428 invoked by uid 500); 11 Sep 2006 22:09:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 25412 invoked by uid 500); 11 Sep 2006 22:09:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 25403 invoked by uid 99); 11 Sep 2006 22:09:10 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Sep 2006 15:09:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:38935] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 02/B1-27074-35ED5054 for <hadoop-dev@lucene.apache.org>;
 Mon, 11 Sep 2006 15:08:19 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D06E641003C
	for <hadoop-dev@lucene.apache.org>; Mon, 11 Sep 2006 21:00:23 +0000 (GMT)
Message-ID: <20470212.1158008423851.JavaMail.jira@brutus>
Date: Mon, 11 Sep 2006 14:00:23 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-243) WI shows progress as 100.00% before
 actual completion (rounding error)
In-Reply-To: <32908038.1148411909849.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-243?page=all ]

Owen O'Malley reassigned HADOOP-243:
------------------------------------

    Assignee: Owen O'Malley

> WI shows progress as 100.00% before actual completion (rounding error)
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-243
>                 URL: http://issues.apache.org/jira/browse/HADOOP-243
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.1.0
>            Reporter: Yoram Arnon
>         Assigned To: Owen O'Malley
>            Priority: Trivial
>
> For jobs of over 50000 tasks, the rounding error in the WI is confusing.
> When less than 0.005% of the map (or reduce) tasks remain to execute, the WI shows progress as 100.00%, which is misleading.
> Rounding down to the nearest .01% would be better.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 11 21:07:27 2006
Return-Path: 
 <hadoop-dev-return-3666-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 56298 invoked from network); 11 Sep 2006 21:07:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Sep 2006 21:07:27 -0000
Received: (qmail 33452 invoked by uid 500); 11 Sep 2006 21:07:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 33261 invoked by uid 500); 11 Sep 2006 21:07:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 33252 invoked by uid 99); 11 Sep 2006 21:07:26 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Sep 2006 14:07:26 -0700
Authentication-Results: idunn.apache.osuosl.org smtp.mail=cutting@apache.org;
 spf=permerror
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received-SPF: error (idunn.apache.osuosl.org: domain apache.org from
 204.127.192.82 cause and error)
Received: from ([204.127.192.82:56319] helo=rwcrmhc12.comcast.net)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 5C/90-27074-410D5054 for <hadoop-dev@lucene.apache.org>;
 Mon, 11 Sep 2006 14:07:32 -0700
Received: from [192.168.168.15]
 (c-71-202-24-246.hsd1.ca.comcast.net[71.202.24.246])
          by comcast.net (rwcrmhc12) with ESMTP
          id <20060911210718m1200rrpdne>; Mon, 11 Sep 2006 21:07:18 +0000
Message-ID: <4505D006.9050409@apache.org>
Date: Mon, 11 Sep 2006 14:07:18 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.5 (X11/20060728)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: release 0.6.0 available
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Release 0.6.0 of Hadoop is now available.

The release may be downloaded from:

   http://www.apache.org/dyn/closer.cgi/lucene/hadoop/

Release notes are available at:

   http://tinyurl.com/r3zoj

Please report problems via:

   http://issues.apache.org/jira/browse/HADOOP

Doug

From MAILER-DAEMON Mon Sep 11 22:08:22 2006
Return-Path: 
 <hadoop-dev-return-3668-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75452 invoked from network); 11 Sep 2006 22:08:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Sep 2006 22:08:22 -0000
Received: (qmail 22636 invoked by uid 500); 11 Sep 2006 22:08:15 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 22606 invoked by uid 500); 11 Sep 2006 22:08:15 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22374 invoked by uid 99); 11 Sep 2006 22:08:14 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Sep 2006 15:08:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:38947] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 32/B1-27074-35ED5054 for <hadoop-dev@lucene.apache.org>;
 Mon, 11 Sep 2006 15:08:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5B709410047
	for <hadoop-dev@lucene.apache.org>; Mon, 11 Sep 2006 21:08:22 +0000 (GMT)
Message-ID: <23428066.1158008902371.JavaMail.jira@brutus>
Date: Mon, 11 Sep 2006 14:08:22 -0700 (PDT)
From: "Christian Kunz (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-521) classloader problem for clients
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

classloader problem for clients
-------------------------------

                 Key: HADOOP-521
                 URL: http://issues.apache.org/jira/browse/HADOOP-521
             Project: Hadoop
          Issue Type: Bug
          Components: io
    Affects Versions: 0.6.0
            Reporter: Christian Kunz


HADOOP-419 bit again, after updating with hadoop-0.6.0. Although resolved, there was one instance left in io.ObjectWritable.java still using Thread.currentThread().getContextClassLoader() instead of conf.getClassByName()
I got exceptions like:

java.lang.RuntimeException: readObject can't find class
        at org.apache.hadoop.io.ObjectWritable.readObject(ObjectWritable.java:223)
        at org.apache.hadoop.io.ObjectWritable.readFields(ObjectWritable.java:59)
        at org.apache.hadoop.ipc.Client$Connection.run(Client.java:256)
Caused by: java.lang.ClassNotFoundException: org/apache/hadoop/io/ObjectWritable$NullInstance
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Class.java:242)
        at org.apache.hadoop.io.ObjectWritable.readObject(ObjectWritable.java:219)
        ... 2 more


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 11 22:02:49 2006
Return-Path: 
 <hadoop-dev-return-3667-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 72947 invoked from network); 11 Sep 2006 22:02:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Sep 2006 22:02:49 -0000
Received: (qmail 10538 invoked by uid 500); 11 Sep 2006 22:02:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 10510 invoked by uid 500); 11 Sep 2006 22:02:48 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 10501 invoked by uid 99); 11 Sep 2006 22:02:48 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Sep 2006 15:02:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:50216] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id D6/91-27074-21DD5054 for <hadoop-dev@lucene.apache.org>;
 Mon, 11 Sep 2006 15:02:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A58C8714302
	for <hadoop-dev@lucene.apache.org>; Mon, 11 Sep 2006 21:59:25 +0000 (GMT)
Message-ID: <6351019.1158011965675.JavaMail.jira@brutus>
Date: Mon, 11 Sep 2006 14:59:25 -0700 (PDT)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-438) DFS pathname limitation.
In-Reply-To: <28546816.1155172213960.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-438?page=comments#action_12433992 ] 
            
Wendy Chien commented on HADOOP-438:
------------------------------------

We've changed our plan.  Instead of enforcing the length in the Path constructor, we are going to enforce it in mkdirs, addFile, and renameTo.  The reason for this is that the limitation is not actually in Path, but in the filesystem, so we should not enforce it in Path.  An exception will still be passed back to the client. 

If you object to this plan or prefer the original, please comment. 




> DFS pathname limitation.
> ------------------------
>
>                 Key: HADOOP-438
>                 URL: http://issues.apache.org/jira/browse/HADOOP-438
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0, 0.4.0, 0.3.2, 0.3.1, 0.3.0, 0.2.1, 0.2.0, 0.1.1, 0.1.0
>            Reporter: Konstantin Shvachko
>
> I was trying to create a deep hierarchy of directories using DFS mkdirs().
> When the path to the leaf directory became long (~20000) DFS was still able to create
> directories with these names, but UTF8 started truncating long strings resulting in
> incorrect logging of namespace edits. That later crashed the namenode during restart,
> when it was trying to reproduce file creation logged in the edits file with truncated names.
> UTF8 is deprecated now so we will have to replace it with Text.
> With UTF8  we should enforce a pathname limit of 0xffff/3 = 21845
> With Text it is going to be larger. Not sure what the exact number is.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 11 23:15:48 2006
Return-Path: 
 <hadoop-dev-return-3670-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 89871 invoked from network); 11 Sep 2006 23:15:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Sep 2006 23:15:48 -0000
Received: (qmail 23321 invoked by uid 500); 11 Sep 2006 23:15:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23304 invoked by uid 500); 11 Sep 2006 23:15:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23295 invoked by uid 99); 11 Sep 2006 23:15:47 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Sep 2006 16:15:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:45644] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 88/30-27976-B2EE5054 for <hadoop-dev@lucene.apache.org>;
 Mon, 11 Sep 2006 16:15:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A286C714325
	for <hadoop-dev@lucene.apache.org>; Mon, 11 Sep 2006 23:12:22 +0000 (GMT)
Message-ID: <3893251.1158016342663.JavaMail.jira@brutus>
Date: Mon, 11 Sep 2006 16:12:22 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-522) MapFile should support block
 compression
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

MapFile should support block compression
----------------------------------------

                 Key: HADOOP-522
                 URL: http://issues.apache.org/jira/browse/HADOOP-522
             Project: Hadoop
          Issue Type: New Feature
          Components: io
            Reporter: Doug Cutting


MapFile is layered on SequenceFile and permits random-access to sorted data files (typically reduce output) through a parallel index file.  This is used widely in Nutch (e.g. at search time for displaying cached pages, incoming links, etc).  Such sorted data should benefit from block compression, but the current MapFile API does not support specification of block compression.  Also, even if it did, the semantics of SequenceFile methods like seek() and getPosition() are changed under block compression so that MapFile may not work.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 11 23:19:48 2006
Return-Path: 
 <hadoop-dev-return-3671-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 90385 invoked from network); 11 Sep 2006 23:19:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Sep 2006 23:19:48 -0000
Received: (qmail 29202 invoked by uid 500); 11 Sep 2006 23:19:48 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 29173 invoked by uid 500); 11 Sep 2006 23:19:48 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 29164 invoked by uid 99); 11 Sep 2006 23:19:48 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Sep 2006 16:19:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:47507] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 3C/40-27976-D1FE5054 for <hadoop-dev@lucene.apache.org>;
 Mon, 11 Sep 2006 16:19:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 45C1A714326
	for <hadoop-dev@lucene.apache.org>; Mon, 11 Sep 2006 23:16:24 +0000 (GMT)
Message-ID: <4240816.1158016584282.JavaMail.jira@brutus>
Date: Mon, 11 Sep 2006 16:16:24 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-522) MapFile should support block
 compression
In-Reply-To: <3893251.1158016342663.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-522?page=all ]

Doug Cutting updated HADOOP-522:
--------------------------------

    Attachment: block-compress-map-file.patch

This is a quick hack to try to test whether MapFile & SetFile will work with block compression.  It currently fails.

To illustrate the problem:

ant compile-core-test
bin/hadoop org.apache.hadoop.io.TestSetFile -local foo


> MapFile should support block compression
> ----------------------------------------
>
>                 Key: HADOOP-522
>                 URL: http://issues.apache.org/jira/browse/HADOOP-522
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Doug Cutting
>         Attachments: block-compress-map-file.patch
>
>
> MapFile is layered on SequenceFile and permits random-access to sorted data files (typically reduce output) through a parallel index file.  This is used widely in Nutch (e.g. at search time for displaying cached pages, incoming links, etc).  Such sorted data should benefit from block compression, but the current MapFile API does not support specification of block compression.  Also, even if it did, the semantics of SequenceFile methods like seek() and getPosition() are changed under block compression so that MapFile may not work.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 11 23:23:49 2006
Return-Path: 
 <hadoop-dev-return-3672-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91206 invoked from network); 11 Sep 2006 23:23:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Sep 2006 23:23:49 -0000
Received: (qmail 32695 invoked by uid 500); 11 Sep 2006 23:23:48 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 32677 invoked by uid 500); 11 Sep 2006 23:23:48 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 32659 invoked by uid 99); 11 Sep 2006 23:23:48 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Sep 2006 16:23:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:35388] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id C9/50-27976-D00F5054 for <hadoop-dev@lucene.apache.org>;
 Mon, 11 Sep 2006 16:23:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0FBB1714325
	for <hadoop-dev@lucene.apache.org>; Mon, 11 Sep 2006 23:20:24 +0000 (GMT)
Message-ID: <5829225.1158016824061.JavaMail.jira@brutus>
Date: Mon, 11 Sep 2006 16:20:24 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-438) DFS pathname limitation.
In-Reply-To: <28546816.1155172213960.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-438?page=comments#action_12434015 ] 
            
Konstantin Shvachko commented on HADOOP-438:
--------------------------------------------

I just wanted to mention that there are file systems out there without path restrictions.

http://en.wikipedia.org/wiki/Comparison_of_file_systems#Limits


> DFS pathname limitation.
> ------------------------
>
>                 Key: HADOOP-438
>                 URL: http://issues.apache.org/jira/browse/HADOOP-438
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0, 0.4.0, 0.3.2, 0.3.1, 0.3.0, 0.2.1, 0.2.0, 0.1.1, 0.1.0
>            Reporter: Konstantin Shvachko
>
> I was trying to create a deep hierarchy of directories using DFS mkdirs().
> When the path to the leaf directory became long (~20000) DFS was still able to create
> directories with these names, but UTF8 started truncating long strings resulting in
> incorrect logging of namespace edits. That later crashed the namenode during restart,
> when it was trying to reproduce file creation logged in the edits file with truncated names.
> UTF8 is deprecated now so we will have to replace it with Text.
> With UTF8  we should enforce a pathname limit of 0xffff/3 = 21845
> With Text it is going to be larger. Not sure what the exact number is.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 12 05:33:48 2006
Return-Path: 
 <hadoop-dev-return-3673-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 74616 invoked from network); 12 Sep 2006 05:33:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Sep 2006 05:33:48 -0000
Received: (qmail 49235 invoked by uid 500); 12 Sep 2006 05:33:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49218 invoked by uid 500); 12 Sep 2006 05:33:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49208 invoked by uid 99); 12 Sep 2006 05:33:47 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Sep 2006 22:33:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:43137] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id EF/20-00459-6C646054 for <hadoop-dev@lucene.apache.org>;
 Mon, 11 Sep 2006 22:33:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E2332410012
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Sep 2006 05:30:23 +0000 (GMT)
Message-ID: <1311856.1158039023924.JavaMail.jira@brutus>
Date: Mon, 11 Sep 2006 22:30:23 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-243) WI shows progress as 100.00% before
 actual completion (rounding error)
In-Reply-To: <32908038.1148411909849.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-243?page=all ]

Owen O'Malley updated HADOOP-243:
---------------------------------

    Attachment: percent-complete.patch

This patch creates a new method in StringUtils for formating percentages and uses it in all of the progress fields in the web/ui. The method displays the percentage as "0.00%" with values rounded down.

To ensure that complete jobs show up as 100.00% instead of 99.99%, I also needed to set the progress to 1.0f explicitly to avoid floating point approximation problems. To avoid the problem with late updates pushing the progress over 1.0, I made the fields private and forced all users to go through the setters, which guarantee progress stays within 0.0 to 1.0.

> WI shows progress as 100.00% before actual completion (rounding error)
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-243
>                 URL: http://issues.apache.org/jira/browse/HADOOP-243
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.1.0
>            Reporter: Yoram Arnon
>         Assigned To: Owen O'Malley
>            Priority: Trivial
>         Attachments: percent-complete.patch
>
>
> For jobs of over 50000 tasks, the rounding error in the WI is confusing.
> When less than 0.005% of the map (or reduce) tasks remain to execute, the WI shows progress as 100.00%, which is misleading.
> Rounding down to the nearest .01% would be better.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 12 05:33:49 2006
Return-Path: 
 <hadoop-dev-return-3674-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 74667 invoked from network); 12 Sep 2006 05:33:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Sep 2006 05:33:49 -0000
Received: (qmail 49466 invoked by uid 500); 12 Sep 2006 05:33:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49443 invoked by uid 500); 12 Sep 2006 05:33:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49434 invoked by uid 99); 12 Sep 2006 05:33:49 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Sep 2006 22:33:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:43140] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 20/30-00459-8C646054 for <hadoop-dev@lucene.apache.org>;
 Mon, 11 Sep 2006 22:34:00 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8CFC3410017
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Sep 2006 05:30:25 +0000 (GMT)
Message-ID: <20319714.1158039025575.JavaMail.jira@brutus>
Date: Mon, 11 Sep 2006 22:30:25 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-243) WI shows progress as 100.00% before
 actual completion (rounding error)
In-Reply-To: <32908038.1148411909849.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-243?page=all ]

Owen O'Malley updated HADOOP-243:
---------------------------------

    Status: Patch Available  (was: Open)

> WI shows progress as 100.00% before actual completion (rounding error)
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-243
>                 URL: http://issues.apache.org/jira/browse/HADOOP-243
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.1.0
>            Reporter: Yoram Arnon
>         Assigned To: Owen O'Malley
>            Priority: Trivial
>         Attachments: percent-complete.patch
>
>
> For jobs of over 50000 tasks, the rounding error in the WI is confusing.
> When less than 0.005% of the map (or reduce) tasks remain to execute, the WI shows progress as 100.00%, which is misleading.
> Rounding down to the nearest .01% would be better.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 12 07:12:51 2006
Return-Path: 
 <hadoop-dev-return-3675-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99225 invoked from network); 12 Sep 2006 07:12:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Sep 2006 07:12:51 -0000
Received: (qmail 56112 invoked by uid 500); 12 Sep 2006 07:12:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55921 invoked by uid 500); 12 Sep 2006 07:12:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55912 invoked by uid 99); 12 Sep 2006 07:12:49 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Sep 2006 00:12:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:47927] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id E7/31-00869-AFD56054 for <hadoop-dev@lucene.apache.org>;
 Tue, 12 Sep 2006 00:12:59 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6FA16714329
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Sep 2006 07:09:23 +0000 (GMT)
Message-ID: <1629010.1158044963454.JavaMail.jira@brutus>
Date: Tue, 12 Sep 2006 00:09:23 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Work stopped: (HADOOP-330) Raw SequenceFile Input/Output
 formats
In-Reply-To: <19403257.1151517695021.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-330?page=all ]

Work on HADOOP-330 stopped by Owen O'Malley.

> Raw SequenceFile Input/Output formats
> -------------------------------------
>
>                 Key: HADOOP-330
>                 URL: http://issues.apache.org/jira/browse/HADOOP-330
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.3.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>
> We'd like a raw input/output format for Map/Reduce that allows jobs to get the raw bytes for keys/values. This would allow things like the IdentityMap to be much faster because the values would not be decompressed/compressed or serialized/deserialized.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 12 08:59:49 2006
Return-Path: 
 <hadoop-dev-return-3676-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40806 invoked from network); 12 Sep 2006 08:59:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Sep 2006 08:59:49 -0000
Received: (qmail 15945 invoked by uid 500); 12 Sep 2006 08:59:48 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15924 invoked by uid 500); 12 Sep 2006 08:59:48 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 15915 invoked by uid 99); 12 Sep 2006 08:59:48 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Sep 2006 01:59:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:34626] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id B7/A4-00869-F0776054 for <hadoop-dev@lucene.apache.org>;
 Tue, 12 Sep 2006 02:00:00 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A9BB141000E
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Sep 2006 08:56:23 +0000 (GMT)
Message-ID: <20964034.1158051383692.JavaMail.jira@brutus>
Date: Tue, 12 Sep 2006 01:56:23 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-520) libhdfs returns success even when
 writing to a file fails
In-Reply-To: <10349829.1157995284595.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-520?page=all ]

Arun C Murthy updated HADOOP-520:
---------------------------------

    Attachment: HADOOP-520.patch

Christian,

 Could you check if this patch solves this issue for you?

thanks,
Arun

> libhdfs returns success even when writing to a file fails
> ---------------------------------------------------------
>
>                 Key: HADOOP-520
>                 URL: http://issues.apache.org/jira/browse/HADOOP-520
>             Project: Hadoop
>          Issue Type: Bug
>          Components: libhdfs
>    Affects Versions: 0.5.0
>            Reporter: Christian Kunz
>         Attachments: HADOOP-520.patch
>
>
> hdfsWrite prints out an error message when write fails, but still returns number of bytes requested. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 12 12:17:40 2006
Return-Path: 
 <hadoop-dev-return-3677-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20113 invoked from network); 12 Sep 2006 12:17:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Sep 2006 12:17:40 -0000
Received: (qmail 88943 invoked by uid 500); 12 Sep 2006 12:17:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 88914 invoked by uid 500); 12 Sep 2006 12:17:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88905 invoked by uid 99); 12 Sep 2006 12:17:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Sep 2006 05:17:39 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of emanihc@gmail.com designates
 64.233.184.225 as permitted sender)
Received: from [64.233.184.225] (HELO wr-out-0506.google.com) (64.233.184.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Sep 2006 05:17:38 -0700
Received: by wr-out-0506.google.com with SMTP id i28so466705wra
        for <hadoop-dev@lucene.apache.org>;
 Tue, 12 Sep 2006 05:17:17 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=U0jDIkhy/33U2u5gzSnf7l2n3oXYFo86LcK6osWpALOwLi/Xm3US+Tr49GD0d88df0PaZ5LCUqHSOAa45iQ3aIE/kTmJGpEbSEiNaz6pJN17OTQG/uUZz6fNvBdvMg0pqKTxv4q9LaG/yvFPnghK1CEJJzksgnT4DeCXdJpJbxA=
Received: by 10.90.51.17 with SMTP id y17mr2012220agy;
        Tue, 12 Sep 2006 05:17:17 -0700 (PDT)
Received: by 10.90.118.7 with HTTP; Tue, 12 Sep 2006 05:17:16 -0700 (PDT)
Message-ID: <39209b600609120517r38a5a776wb962eb07472dbc1c@mail.gmail.com>
Date: Tue, 12 Sep 2006 20:17:16 +0800
From: emanihc <emanihc@gmail.com>
To: hadoop-dev@lucene.apache.org, cutting@apache.org
Subject: Re: Help: DistributedSearch thown ClassCastException
In-Reply-To: <45059FB4.9040805@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_Part_144012_29345057.1158063436808"
References: <39209b600609100815q2008534sba5492b5e863d413@mail.gmail.com>
	 <45059FB4.9040805@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_144012_29345057.1158063436808
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

 Hello Doug

I tried to modify DistributedSearch.java to implement the VersionedProtocol
interface,

but it seems it can't fix the problem... :(



2006/9/12, Doug Cutting <cutting@apache.org>:
>
> It looks like DistributedSearch.Protocol needs to implement the
> VersionedProtocol interface.  Probably this exception could be improved...
>
>
> Doug
>
> emanihc wrote:
> > hello all
> >
> > I check out directly from SVN to get the sources,
> >
> > run "bin/nutch server 12345 ../crawl/"
> >
> > run "bin/nutch ' org.apache.nutch.searcher.DistributedSearch$Client'
> 'www'
> > localhost 12345"
> >
> > and then it thrown Exception below:
> >
> > ========================================================
> > $ bin/nutch ' org.apache.nutch.searcher.DistributedSearch$Client' "www"
> > localhos
> > t 12345
> > STATS: 1 servers, 5 segments.
> > Total hits: 9
> > Exception in thread "main" java.lang.ClassCastException : $Proxy0
> >        at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:241)
> >        at org.apache.nutch.searcher.DistributedSearch$Client.getRemote
> > (Distribu
> > tedSearch.java:284)
> >        at org.apache.nutch.searcher.DistributedSearch$Client.getDetails
> > (Distrib
> > utedSearch.java:299)
> >        at org.apache.nutch.searcher.DistributedSearch$Client.main
> > (DistributedSe
> > arch.java:377)
> > =========================================================
> >
>

------=_Part_144012_29345057.1158063436808--

From MAILER-DAEMON Tue Sep 12 15:44:49 2006
Return-Path: 
 <hadoop-dev-return-3678-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93098 invoked from network); 12 Sep 2006 15:44:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Sep 2006 15:44:49 -0000
Received: (qmail 47122 invoked by uid 500); 12 Sep 2006 15:44:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 46927 invoked by uid 500); 12 Sep 2006 15:44:48 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46918 invoked by uid 99); 12 Sep 2006 15:44:48 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Sep 2006 08:44:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:36617] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 84/C2-02782-CF5D6054 for <hadoop-dev@lucene.apache.org>;
 Tue, 12 Sep 2006 08:45:00 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5C64771432B
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Sep 2006 15:41:23 +0000 (GMT)
Message-ID: <9710281.1158075683375.JavaMail.jira@brutus>
Date: Tue, 12 Sep 2006 08:41:23 -0700 (PDT)
From: "Christian Kunz (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-520) libhdfs returns success even when
 writing to a file fails
In-Reply-To: <10349829.1157995284595.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-520?page=comments#action_12434189 ] 
            
Christian Kunz commented on HADOOP-520:
---------------------------------------

That would do it. Thank you, Arun.

> libhdfs returns success even when writing to a file fails
> ---------------------------------------------------------
>
>                 Key: HADOOP-520
>                 URL: http://issues.apache.org/jira/browse/HADOOP-520
>             Project: Hadoop
>          Issue Type: Bug
>          Components: libhdfs
>    Affects Versions: 0.5.0
>            Reporter: Christian Kunz
>         Attachments: HADOOP-520.patch
>
>
> hdfsWrite prints out an error message when write fails, but still returns number of bytes requested. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 12 16:20:49 2006
Return-Path: 
 <hadoop-dev-return-3679-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 5415 invoked from network); 12 Sep 2006 16:20:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Sep 2006 16:20:49 -0000
Received: (qmail 24619 invoked by uid 500); 12 Sep 2006 16:20:48 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24593 invoked by uid 500); 12 Sep 2006 16:20:48 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24584 invoked by uid 99); 12 Sep 2006 16:20:48 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Sep 2006 09:20:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:59512] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id D0/20-03395-D6ED6054 for <hadoop-dev@lucene.apache.org>;
 Tue, 12 Sep 2006 09:21:01 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 45A8271432A
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Sep 2006 16:17:24 +0000 (GMT)
Message-ID: <20405084.1158077844282.JavaMail.jira@brutus>
Date: Tue, 12 Sep 2006 09:17:24 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-520) libhdfs returns success even when
 writing to a file fails
In-Reply-To: <10349829.1157995284595.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-520?page=all ]

Arun C Murthy updated HADOOP-520:
---------------------------------

    Status: Patch Available  (was: Open)

Doug - could you please go ahead and commit this patch? Thanks!

> libhdfs returns success even when writing to a file fails
> ---------------------------------------------------------
>
>                 Key: HADOOP-520
>                 URL: http://issues.apache.org/jira/browse/HADOOP-520
>             Project: Hadoop
>          Issue Type: Bug
>          Components: libhdfs
>    Affects Versions: 0.5.0
>            Reporter: Christian Kunz
>         Attachments: HADOOP-520.patch
>
>
> hdfsWrite prints out an error message when write fails, but still returns number of bytes requested. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 12 16:42:47 2006
Return-Path: 
 <hadoop-dev-return-3680-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 11555 invoked from network); 12 Sep 2006 16:42:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Sep 2006 16:42:47 -0000
Received: (qmail 67272 invoked by uid 500); 12 Sep 2006 16:42:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 67251 invoked by uid 500); 12 Sep 2006 16:42:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 67242 invoked by uid 99); 12 Sep 2006 16:42:46 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Sep 2006 09:42:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:53861] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 43/B0-03395-393E6054 for <hadoop-dev@lucene.apache.org>;
 Tue, 12 Sep 2006 09:42:59 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6C40D714331
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Sep 2006 16:39:22 +0000 (GMT)
Message-ID: <15428888.1158079162440.JavaMail.jira@brutus>
Date: Tue, 12 Sep 2006 09:39:22 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-523) TextInputformat .isSplittable() fails
 with NullPointerException with hadoop 0.6.1
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

TextInputformat .isSplittable() fails with NullPointerException with hadoop 0.6.1 
----------------------------------------------------------------------------------

                 Key: HADOOP-523
                 URL: http://issues.apache.org/jira/browse/HADOOP-523
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.6.0
            Reporter: Sanjay Dahiya
         Assigned To: Owen O'Malley
             Fix For: 0.7.0


With hadoop 0.6.1, TextInputFormat fails with NullPointerException, causing Job with fail. 

TextInputFormat.configure() is not called to initialize compressionCodecs and following method throws NullPointerException.

  protected boolean isSplitable(FileSystem fs, Path file) {
    return compressionCodecs.getCodec(file) == null;
  }


java.lang.NullPointerException
        at org.apache.hadoop.mapred.TextInputFormat.isSplitable(TextInputFormat.java:37)
        at org.apache.hadoop.mapred.InputFormatBase.getSplits(InputFormatBase.java:149)
        at org.apache.hadoop.mapred.JobInProgress.initTasks(JobInProgress.java:129)
        at org.apache.hadoop.mapred.JobTracker$JobInitThread.run(JobTracker.java:314)
        at java.lang.Thread.run(Thread.java:613)


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 12 17:09:50 2006
Return-Path: 
 <hadoop-dev-return-3681-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20551 invoked from network); 12 Sep 2006 17:09:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Sep 2006 17:09:50 -0000
Received: (qmail 12199 invoked by uid 500); 12 Sep 2006 17:09:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 12174 invoked by uid 500); 12 Sep 2006 17:09:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 12165 invoked by uid 99); 12 Sep 2006 17:09:49 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Sep 2006 10:09:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:41832] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id AF/40-03642-AE9E6054 for <hadoop-dev@lucene.apache.org>;
 Tue, 12 Sep 2006 10:10:02 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 71238714331
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Sep 2006 17:06:25 +0000 (GMT)
Message-ID: <30528642.1158080785460.JavaMail.jira@brutus>
Date: Tue, 12 Sep 2006 10:06:25 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-523) TextInputformat .isSplittable() fails
 with NullPointerException with hadoop 0.6.1
In-Reply-To: <15428888.1158079162440.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-523?page=all ]

Owen O'Malley updated HADOOP-523:
---------------------------------

    Attachment: configure-input-format.patch

This patch makes the InputFormat creation go through the standard utils to make sure it gets configured. It also replaces the redundant "jd" JobConf  with "conf".

> TextInputformat .isSplittable() fails with NullPointerException with hadoop 0.6.1
> ---------------------------------------------------------------------------------
>
>                 Key: HADOOP-523
>                 URL: http://issues.apache.org/jira/browse/HADOOP-523
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.6.0
>            Reporter: Sanjay Dahiya
>         Assigned To: Owen O'Malley
>             Fix For: 0.7.0
>
>         Attachments: configure-input-format.patch
>
>
> With hadoop 0.6.1, TextInputFormat fails with NullPointerException, causing Job with fail. 
> TextInputFormat.configure() is not called to initialize compressionCodecs and following method throws NullPointerException.
>   protected boolean isSplitable(FileSystem fs, Path file) {
>     return compressionCodecs.getCodec(file) == null;
>   }
> java.lang.NullPointerException
>         at org.apache.hadoop.mapred.TextInputFormat.isSplitable(TextInputFormat.java:37)
>         at org.apache.hadoop.mapred.InputFormatBase.getSplits(InputFormatBase.java:149)
>         at org.apache.hadoop.mapred.JobInProgress.initTasks(JobInProgress.java:129)
>         at org.apache.hadoop.mapred.JobTracker$JobInitThread.run(JobTracker.java:314)
>         at java.lang.Thread.run(Thread.java:613)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 12 17:33:49 2006
Return-Path: 
 <hadoop-dev-return-3682-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 29517 invoked from network); 12 Sep 2006 17:33:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Sep 2006 17:33:49 -0000
Received: (qmail 66212 invoked by uid 500); 12 Sep 2006 17:33:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66190 invoked by uid 500); 12 Sep 2006 17:33:48 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66179 invoked by uid 99); 12 Sep 2006 17:33:48 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Sep 2006 10:33:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:55991] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id AE/F0-03642-98FE6054 for <hadoop-dev@lucene.apache.org>;
 Tue, 12 Sep 2006 10:34:01 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D5DE7410010
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Sep 2006 17:30:23 +0000 (GMT)
Message-ID: <2823336.1158082223873.JavaMail.jira@brutus>
Date: Tue, 12 Sep 2006 10:30:23 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-521) classloader problem for clients
In-Reply-To: <23428066.1158008902371.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-521?page=all ]

Owen O'Malley reassigned HADOOP-521:
------------------------------------

    Assignee: Owen O'Malley

> classloader problem for clients
> -------------------------------
>
>                 Key: HADOOP-521
>                 URL: http://issues.apache.org/jira/browse/HADOOP-521
>             Project: Hadoop
>          Issue Type: Bug
>          Components: io
>    Affects Versions: 0.6.0
>            Reporter: Christian Kunz
>         Assigned To: Owen O'Malley
>
> HADOOP-419 bit again, after updating with hadoop-0.6.0. Although resolved, there was one instance left in io.ObjectWritable.java still using Thread.currentThread().getContextClassLoader() instead of conf.getClassByName()
> I got exceptions like:
> java.lang.RuntimeException: readObject can't find class
>         at org.apache.hadoop.io.ObjectWritable.readObject(ObjectWritable.java:223)
>         at org.apache.hadoop.io.ObjectWritable.readFields(ObjectWritable.java:59)
>         at org.apache.hadoop.ipc.Client$Connection.run(Client.java:256)
> Caused by: java.lang.ClassNotFoundException: org/apache/hadoop/io/ObjectWritable$NullInstance
>         at java.lang.Class.forName0(Native Method)
>         at java.lang.Class.forName(Class.java:242)
>         at org.apache.hadoop.io.ObjectWritable.readObject(ObjectWritable.java:219)
>         ... 2 more

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 12 17:38:48 2006
Return-Path: 
 <hadoop-dev-return-3683-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31455 invoked from network); 12 Sep 2006 17:38:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Sep 2006 17:38:48 -0000
Received: (qmail 75498 invoked by uid 500); 12 Sep 2006 17:38:48 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75306 invoked by uid 500); 12 Sep 2006 17:38:48 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75297 invoked by uid 99); 12 Sep 2006 17:38:48 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Sep 2006 10:38:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:34458] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 8C/11-03642-5B0F6054 for <hadoop-dev@lucene.apache.org>;
 Tue, 12 Sep 2006 10:39:01 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 01A9A410012
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Sep 2006 17:35:24 +0000 (GMT)
Message-ID: <29816189.1158082524004.JavaMail.jira@brutus>
Date: Tue, 12 Sep 2006 10:35:24 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-523) TextInputformat .isSplittable() fails
 with NullPointerException with hadoop 0.6.1
In-Reply-To: <15428888.1158079162440.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-523?page=all ]

Owen O'Malley updated HADOOP-523:
---------------------------------

    Fix Version/s: 0.6.1
                       (was: 0.7.0)

> TextInputformat .isSplittable() fails with NullPointerException with hadoop 0.6.1
> ---------------------------------------------------------------------------------
>
>                 Key: HADOOP-523
>                 URL: http://issues.apache.org/jira/browse/HADOOP-523
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.6.0
>            Reporter: Sanjay Dahiya
>         Assigned To: Owen O'Malley
>             Fix For: 0.6.1
>
>         Attachments: configure-input-format.patch
>
>
> With hadoop 0.6.1, TextInputFormat fails with NullPointerException, causing Job with fail. 
> TextInputFormat.configure() is not called to initialize compressionCodecs and following method throws NullPointerException.
>   protected boolean isSplitable(FileSystem fs, Path file) {
>     return compressionCodecs.getCodec(file) == null;
>   }
> java.lang.NullPointerException
>         at org.apache.hadoop.mapred.TextInputFormat.isSplitable(TextInputFormat.java:37)
>         at org.apache.hadoop.mapred.InputFormatBase.getSplits(InputFormatBase.java:149)
>         at org.apache.hadoop.mapred.JobInProgress.initTasks(JobInProgress.java:129)
>         at org.apache.hadoop.mapred.JobTracker$JobInitThread.run(JobTracker.java:314)
>         at java.lang.Thread.run(Thread.java:613)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 12 17:42:50 2006
Return-Path: 
 <hadoop-dev-return-3684-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34232 invoked from network); 12 Sep 2006 17:42:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Sep 2006 17:42:50 -0000
Received: (qmail 86462 invoked by uid 500); 12 Sep 2006 17:42:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86444 invoked by uid 500); 12 Sep 2006 17:42:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86435 invoked by uid 99); 12 Sep 2006 17:42:49 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Sep 2006 10:42:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:42623] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 19/31-03642-6A1F6054 for <hadoop-dev@lucene.apache.org>;
 Tue, 12 Sep 2006 10:43:02 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3E325410017
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Sep 2006 17:39:25 +0000 (GMT)
Message-ID: <33235091.1158082765252.JavaMail.jira@brutus>
Date: Tue, 12 Sep 2006 10:39:25 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-520) libhdfs returns success even when
 writing to a file fails
In-Reply-To: <10349829.1157995284595.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-520?page=all ]

Owen O'Malley updated HADOOP-520:
---------------------------------

    Fix Version/s: 0.6.1
         Assignee: Arun C Murthy

> libhdfs returns success even when writing to a file fails
> ---------------------------------------------------------
>
>                 Key: HADOOP-520
>                 URL: http://issues.apache.org/jira/browse/HADOOP-520
>             Project: Hadoop
>          Issue Type: Bug
>          Components: libhdfs
>    Affects Versions: 0.5.0
>            Reporter: Christian Kunz
>         Assigned To: Arun C Murthy
>             Fix For: 0.6.1
>
>         Attachments: HADOOP-520.patch
>
>
> hdfsWrite prints out an error message when write fails, but still returns number of bytes requested. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 12 18:07:48 2006
Return-Path: 
 <hadoop-dev-return-3685-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46235 invoked from network); 12 Sep 2006 18:07:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Sep 2006 18:07:48 -0000
Received: (qmail 47598 invoked by uid 500); 12 Sep 2006 18:07:48 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47579 invoked by uid 500); 12 Sep 2006 18:07:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47570 invoked by uid 99); 12 Sep 2006 18:07:47 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Sep 2006 11:07:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:39929] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id D3/20-04030-187F6054 for <hadoop-dev@lucene.apache.org>;
 Tue, 12 Sep 2006 11:08:01 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E5BF2410010
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Sep 2006 18:04:23 +0000 (GMT)
Message-ID: <9128093.1158084263938.JavaMail.jira@brutus>
Date: Tue, 12 Sep 2006 11:04:23 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-521) classloader problem for clients
In-Reply-To: <23428066.1158008902371.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-521?page=all ]

Owen O'Malley updated HADOOP-521:
---------------------------------

    Attachment: conf-classloader.patch

Use the classloader associated with the conf. 

Sorry I missed the second call to getContextClassLoader in the method. I just reran my search and the only one left is the one in Configuration that is supposed to be there.

> classloader problem for clients
> -------------------------------
>
>                 Key: HADOOP-521
>                 URL: http://issues.apache.org/jira/browse/HADOOP-521
>             Project: Hadoop
>          Issue Type: Bug
>          Components: io
>    Affects Versions: 0.6.0
>            Reporter: Christian Kunz
>         Assigned To: Owen O'Malley
>         Attachments: conf-classloader.patch
>
>
> HADOOP-419 bit again, after updating with hadoop-0.6.0. Although resolved, there was one instance left in io.ObjectWritable.java still using Thread.currentThread().getContextClassLoader() instead of conf.getClassByName()
> I got exceptions like:
> java.lang.RuntimeException: readObject can't find class
>         at org.apache.hadoop.io.ObjectWritable.readObject(ObjectWritable.java:223)
>         at org.apache.hadoop.io.ObjectWritable.readFields(ObjectWritable.java:59)
>         at org.apache.hadoop.ipc.Client$Connection.run(Client.java:256)
> Caused by: java.lang.ClassNotFoundException: org/apache/hadoop/io/ObjectWritable$NullInstance
>         at java.lang.Class.forName0(Native Method)
>         at java.lang.Class.forName(Class.java:242)
>         at org.apache.hadoop.io.ObjectWritable.readObject(ObjectWritable.java:219)
>         ... 2 more

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 12 18:29:58 2006
Return-Path: 
 <hadoop-dev-return-3686-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52891 invoked from network); 12 Sep 2006 18:29:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Sep 2006 18:29:58 -0000
Received: (qmail 78077 invoked by uid 500); 12 Sep 2006 18:29:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 78041 invoked by uid 500); 12 Sep 2006 18:29:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 77885 invoked by uid 99); 12 Sep 2006 18:29:52 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Sep 2006 11:29:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:59149] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id B5/A0-04030-9ACF6054 for <hadoop-dev@lucene.apache.org>;
 Tue, 12 Sep 2006 11:30:01 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4513871431F
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Sep 2006 18:26:24 +0000 (GMT)
Message-ID: <7139501.1158085584280.JavaMail.jira@brutus>
Date: Tue, 12 Sep 2006 11:26:24 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-520) libhdfs returns success even when
 writing to a file fails
In-Reply-To: <10349829.1157995284595.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-520?page=all ]

Doug Cutting updated HADOOP-520:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Arun.

> libhdfs returns success even when writing to a file fails
> ---------------------------------------------------------
>
>                 Key: HADOOP-520
>                 URL: http://issues.apache.org/jira/browse/HADOOP-520
>             Project: Hadoop
>          Issue Type: Bug
>          Components: libhdfs
>    Affects Versions: 0.5.0
>            Reporter: Christian Kunz
>         Assigned To: Arun C Murthy
>             Fix For: 0.6.1
>
>         Attachments: HADOOP-520.patch
>
>
> hdfsWrite prints out an error message when write fails, but still returns number of bytes requested. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 12 18:31:49 2006
Return-Path: 
 <hadoop-dev-return-3687-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 53312 invoked from network); 12 Sep 2006 18:31:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Sep 2006 18:31:49 -0000
Received: (qmail 81043 invoked by uid 500); 12 Sep 2006 18:31:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 81018 invoked by uid 500); 12 Sep 2006 18:31:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 81009 invoked by uid 99); 12 Sep 2006 18:31:49 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Sep 2006 11:31:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:59159] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id D6/B0-04030-12DF6054 for <hadoop-dev@lucene.apache.org>;
 Tue, 12 Sep 2006 11:32:01 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DF70D714320
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Sep 2006 18:28:23 +0000 (GMT)
Message-ID: <20403066.1158085703912.JavaMail.jira@brutus>
Date: Tue, 12 Sep 2006 11:28:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-243) WI shows progress as 100.00% before
 actual completion (rounding error)
In-Reply-To: <32908038.1148411909849.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-243?page=all ]

Doug Cutting updated HADOOP-243:
--------------------------------

        Fix Version/s: 0.7.0
    Affects Version/s: 0.6.0
                       0.5.0
                           (was: 0.1.0)

> WI shows progress as 100.00% before actual completion (rounding error)
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-243
>                 URL: http://issues.apache.org/jira/browse/HADOOP-243
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.5.0, 0.6.0
>            Reporter: Yoram Arnon
>         Assigned To: Owen O'Malley
>            Priority: Trivial
>             Fix For: 0.7.0
>
>         Attachments: percent-complete.patch
>
>
> For jobs of over 50000 tasks, the rounding error in the WI is confusing.
> When less than 0.005% of the map (or reduce) tasks remain to execute, the WI shows progress as 100.00%, which is misleading.
> Rounding down to the nearest .01% would be better.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 12 18:41:48 2006
Return-Path: 
 <hadoop-dev-return-3688-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 54887 invoked from network); 12 Sep 2006 18:41:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Sep 2006 18:41:48 -0000
Received: (qmail 98781 invoked by uid 500); 12 Sep 2006 18:41:48 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98758 invoked by uid 500); 12 Sep 2006 18:41:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98749 invoked by uid 99); 12 Sep 2006 18:41:47 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Sep 2006 11:41:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:60218] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 9C/F0-04030-97FF6054 for <hadoop-dev@lucene.apache.org>;
 Tue, 12 Sep 2006 11:42:01 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E0F99714317
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Sep 2006 18:38:23 +0000 (GMT)
Message-ID: <5012563.1158086303919.JavaMail.jira@brutus>
Date: Tue, 12 Sep 2006 11:38:23 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-523) TextInputformat .isSplittable() fails
 with NullPointerException with hadoop 0.6.1
In-Reply-To: <15428888.1158079162440.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-523?page=all ]

Owen O'Malley updated HADOOP-523:
---------------------------------

    Attachment: test-configure-input-format.patch

Here is a one line change to the regression tests that would have detected the problem.

> TextInputformat .isSplittable() fails with NullPointerException with hadoop 0.6.1
> ---------------------------------------------------------------------------------
>
>                 Key: HADOOP-523
>                 URL: http://issues.apache.org/jira/browse/HADOOP-523
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.6.0
>            Reporter: Sanjay Dahiya
>         Assigned To: Owen O'Malley
>             Fix For: 0.6.1
>
>         Attachments: configure-input-format.patch, test-configure-input-format.patch
>
>
> With hadoop 0.6.1, TextInputFormat fails with NullPointerException, causing Job with fail. 
> TextInputFormat.configure() is not called to initialize compressionCodecs and following method throws NullPointerException.
>   protected boolean isSplitable(FileSystem fs, Path file) {
>     return compressionCodecs.getCodec(file) == null;
>   }
> java.lang.NullPointerException
>         at org.apache.hadoop.mapred.TextInputFormat.isSplitable(TextInputFormat.java:37)
>         at org.apache.hadoop.mapred.InputFormatBase.getSplits(InputFormatBase.java:149)
>         at org.apache.hadoop.mapred.JobInProgress.initTasks(JobInProgress.java:129)
>         at org.apache.hadoop.mapred.JobTracker$JobInitThread.run(JobTracker.java:314)
>         at java.lang.Thread.run(Thread.java:613)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 12 19:47:49 2006
Return-Path: 
 <hadoop-dev-return-3689-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78642 invoked from network); 12 Sep 2006 19:47:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Sep 2006 19:47:49 -0000
Received: (qmail 894 invoked by uid 500); 12 Sep 2006 19:47:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 860 invoked by uid 500); 12 Sep 2006 19:47:48 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 851 invoked by uid 99); 12 Sep 2006 19:47:48 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Sep 2006 12:47:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:38841] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 8A/83-04378-2FE07054 for <hadoop-dev@lucene.apache.org>;
 Tue, 12 Sep 2006 12:48:02 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 83AD6410017
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Sep 2006 19:44:24 +0000 (GMT)
Message-ID: <18891121.1158090264536.JavaMail.jira@brutus>
Date: Tue, 12 Sep 2006 12:44:24 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-523) TextInputformat .isSplittable() fails
 with NullPointerException with hadoop 0.6.1
In-Reply-To: <15428888.1158079162440.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-523?page=all ]

Doug Cutting resolved HADOOP-523.
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Owen!

> TextInputformat .isSplittable() fails with NullPointerException with hadoop 0.6.1
> ---------------------------------------------------------------------------------
>
>                 Key: HADOOP-523
>                 URL: http://issues.apache.org/jira/browse/HADOOP-523
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.6.0
>            Reporter: Sanjay Dahiya
>         Assigned To: Owen O'Malley
>             Fix For: 0.6.1
>
>         Attachments: configure-input-format.patch, test-configure-input-format.patch
>
>
> With hadoop 0.6.1, TextInputFormat fails with NullPointerException, causing Job with fail. 
> TextInputFormat.configure() is not called to initialize compressionCodecs and following method throws NullPointerException.
>   protected boolean isSplitable(FileSystem fs, Path file) {
>     return compressionCodecs.getCodec(file) == null;
>   }
> java.lang.NullPointerException
>         at org.apache.hadoop.mapred.TextInputFormat.isSplitable(TextInputFormat.java:37)
>         at org.apache.hadoop.mapred.InputFormatBase.getSplits(InputFormatBase.java:149)
>         at org.apache.hadoop.mapred.JobInProgress.initTasks(JobInProgress.java:129)
>         at org.apache.hadoop.mapred.JobTracker$JobInitThread.run(JobTracker.java:314)
>         at java.lang.Thread.run(Thread.java:613)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 12 20:03:48 2006
Return-Path: 
 <hadoop-dev-return-3690-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85989 invoked from network); 12 Sep 2006 20:03:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Sep 2006 20:03:48 -0000
Received: (qmail 25903 invoked by uid 500); 12 Sep 2006 20:03:48 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 25882 invoked by uid 500); 12 Sep 2006 20:03:48 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 25873 invoked by uid 99); 12 Sep 2006 20:03:48 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Sep 2006 13:03:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:49962] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id AF/E3-04378-1B217054 for <hadoop-dev@lucene.apache.org>;
 Tue, 12 Sep 2006 13:04:01 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DF2F941001C
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Sep 2006 20:00:23 +0000 (GMT)
Message-ID: <11221810.1158091223911.JavaMail.jira@brutus>
Date: Tue, 12 Sep 2006 13:00:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-521) classloader problem for clients
In-Reply-To: <23428066.1158008902371.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-521?page=all ]

Doug Cutting resolved HADOOP-521.
---------------------------------

    Fix Version/s: 0.6.1
       Resolution: Fixed

I just committed this.  Thanks, Owen!

> classloader problem for clients
> -------------------------------
>
>                 Key: HADOOP-521
>                 URL: http://issues.apache.org/jira/browse/HADOOP-521
>             Project: Hadoop
>          Issue Type: Bug
>          Components: io
>    Affects Versions: 0.6.0
>            Reporter: Christian Kunz
>         Assigned To: Owen O'Malley
>             Fix For: 0.6.1
>
>         Attachments: conf-classloader.patch
>
>
> HADOOP-419 bit again, after updating with hadoop-0.6.0. Although resolved, there was one instance left in io.ObjectWritable.java still using Thread.currentThread().getContextClassLoader() instead of conf.getClassByName()
> I got exceptions like:
> java.lang.RuntimeException: readObject can't find class
>         at org.apache.hadoop.io.ObjectWritable.readObject(ObjectWritable.java:223)
>         at org.apache.hadoop.io.ObjectWritable.readFields(ObjectWritable.java:59)
>         at org.apache.hadoop.ipc.Client$Connection.run(Client.java:256)
> Caused by: java.lang.ClassNotFoundException: org/apache/hadoop/io/ObjectWritable$NullInstance
>         at java.lang.Class.forName0(Native Method)
>         at java.lang.Class.forName(Class.java:242)
>         at org.apache.hadoop.io.ObjectWritable.readObject(ObjectWritable.java:219)
>         ... 2 more

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 12 20:04:20 2006
Return-Path: 
 <hadoop-dev-return-3691-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86185 invoked from network); 12 Sep 2006 20:04:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Sep 2006 20:04:20 -0000
Received: (qmail 27157 invoked by uid 500); 12 Sep 2006 20:04:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26967 invoked by uid 500); 12 Sep 2006 20:04:19 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26957 invoked by uid 99); 12 Sep 2006 20:04:19 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Sep 2006 13:04:19 -0700
Authentication-Results: idunn.apache.osuosl.org smtp.mail=cutting@apache.org;
 spf=permerror
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received-SPF: error (idunn.apache.osuosl.org: domain apache.org from
 216.148.227.152 cause and error)
Received: from ([216.148.227.152:34047] helo=rwcrmhc12.comcast.net)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id E1/F3-04378-DC217054 for <hadoop-dev@lucene.apache.org>;
 Tue, 12 Sep 2006 13:04:30 -0700
Received: from [192.168.168.15]
 (c-71-202-24-246.hsd1.ca.comcast.net[71.202.24.246])
          by comcast.net (rwcrmhc12) with ESMTP
          id <20060912200412m1200rrghhe>; Tue, 12 Sep 2006 20:04:12 +0000
Message-ID: <450712BC.1080306@apache.org>
Date: Tue, 12 Sep 2006 13:04:12 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.5 (X11/20060728)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: 0.6.1 bugfix release tomorrow?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

FYI, a few bugs have shown up in Friday's 0.6.0 release, so we will have 
a bugfix release this month.  If no new bugs show up by tomorrow morning 
(Pacific time) I'll start the release process and the release should be 
available Thursday on mirrors.

All patches currently intended for 0.6.1 have been applied to trunk.

Doug

From MAILER-DAEMON Tue Sep 12 22:44:48 2006
Return-Path: 
 <hadoop-dev-return-3692-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99185 invoked from network); 12 Sep 2006 22:44:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Sep 2006 22:44:48 -0000
Received: (qmail 18290 invoked by uid 500); 12 Sep 2006 22:44:48 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 18270 invoked by uid 500); 12 Sep 2006 22:44:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 18261 invoked by uid 99); 12 Sep 2006 22:44:47 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Sep 2006 15:44:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:44948] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id E1/C1-05218-C6837054 for <hadoop-dev@lucene.apache.org>;
 Tue, 12 Sep 2006 15:45:00 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 57A4A714348
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Sep 2006 22:41:22 +0000 (GMT)
Message-ID: <16008182.1158100882356.JavaMail.jira@brutus>
Date: Tue, 12 Sep 2006 15:41:22 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-524) Contrib documentation does not appear
 in Javadoc
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Contrib documentation does not appear in Javadoc
------------------------------------------------

                 Key: HADOOP-524
                 URL: http://issues.apache.org/jira/browse/HADOOP-524
             Project: Hadoop
          Issue Type: Improvement
          Components: documentation
    Affects Versions: 0.6.0
            Reporter: Sameer Paranjpye
            Priority: Minor


Documentation for contrib modules like streaming and the small jobs benchmark does not appear in the Javadoc.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 12 22:52:47 2006
Return-Path: 
 <hadoop-dev-return-3693-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1517 invoked from network); 12 Sep 2006 22:52:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Sep 2006 22:52:47 -0000
Received: (qmail 26315 invoked by uid 500); 12 Sep 2006 22:52:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26284 invoked by uid 500); 12 Sep 2006 22:52:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26275 invoked by uid 99); 12 Sep 2006 22:52:46 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Sep 2006 15:52:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:34584] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 33/E1-05218-C4A37054 for <hadoop-dev@lucene.apache.org>;
 Tue, 12 Sep 2006 15:53:00 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7061A714349
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Sep 2006 22:49:22 +0000 (GMT)
Message-ID: <23311423.1158101362457.JavaMail.jira@brutus>
Date: Tue, 12 Sep 2006 15:49:22 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-525) Need raw comparators for hadoop record
 types
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Need raw comparators for hadoop record types
--------------------------------------------

                 Key: HADOOP-525
                 URL: http://issues.apache.org/jira/browse/HADOOP-525
             Project: Hadoop
          Issue Type: Improvement
          Components: record
    Affects Versions: 0.6.0
            Reporter: Sameer Paranjpye
         Assigned To: Milind Bhandarkar
            Priority: Minor
             Fix For: 0.7.0


Raw comparators are not generated for types that are generated with the Hadoop record framework. This could have a substantial performance impact when using hadoop record generated types in Map/Reduce. The record i/o framework should auto-generate raw comparators for types.

Comparison for hadoop record i/o types is defined to be member wise comparison of objects. A possible implementation could only deserialize one member from each object at a time, compare them and either return or move on to the next member if the values are equal.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 12 22:52:48 2006
Return-Path: 
 <hadoop-dev-return-3694-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1551 invoked from network); 12 Sep 2006 22:52:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Sep 2006 22:52:48 -0000
Received: (qmail 26577 invoked by uid 500); 12 Sep 2006 22:52:48 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26497 invoked by uid 500); 12 Sep 2006 22:52:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26488 invoked by uid 99); 12 Sep 2006 22:52:47 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Sep 2006 15:52:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:34586] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 63/E1-05218-D4A37054 for <hadoop-dev@lucene.apache.org>;
 Tue, 12 Sep 2006 15:53:02 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8CA09714348
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Sep 2006 22:49:23 +0000 (GMT)
Message-ID: <20987318.1158101363573.JavaMail.jira@brutus>
Date: Tue, 12 Sep 2006 15:49:23 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-524) Contrib documentation does not appear
 in Javadoc
In-Reply-To: <16008182.1158100882356.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-524?page=all ]

Sameer Paranjpye updated HADOOP-524:
------------------------------------

    Fix Version/s: 0.7.0

> Contrib documentation does not appear in Javadoc
> ------------------------------------------------
>
>                 Key: HADOOP-524
>                 URL: http://issues.apache.org/jira/browse/HADOOP-524
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: documentation
>    Affects Versions: 0.6.0
>            Reporter: Sameer Paranjpye
>            Priority: Minor
>             Fix For: 0.7.0
>
>
> Documentation for contrib modules like streaming and the small jobs benchmark does not appear in the Javadoc.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 12 23:27:11 2006
Return-Path: 
 <hadoop-dev-return-3695-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 7831 invoked from network); 12 Sep 2006 23:27:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Sep 2006 23:27:11 -0000
Received: (qmail 54125 invoked by uid 500); 12 Sep 2006 23:27:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 54100 invoked by uid 500); 12 Sep 2006 23:27:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 54075 invoked by uid 99); 12 Sep 2006 23:27:10 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Sep 2006 16:27:09 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3A72871434E
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Sep 2006 23:23:28 +0000 (GMT)
Message-ID: <22959962.1158103408236.JavaMail.jira@brutus>
Date: Tue, 12 Sep 2006 16:23:28 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-526) datanode lock message causes
 NullPointerException
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

datanode lock message causes NullPointerException
-------------------------------------------------

                 Key: HADOOP-526
                 URL: http://issues.apache.org/jira/browse/HADOOP-526
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
    Affects Versions: 0.6.0
            Reporter: Owen O'Malley
         Assigned To: Milind Bhandarkar
             Fix For: 0.6.1


If you try to bring up a second datanode in the same directory, you get a NullPointerException.

Exception in thread "main" java.lang.NullPointerException
        at org.apache.hadoop.dfs.DataStorage.lock(DataStorage.java:132)
        at org.apache.hadoop.dfs.DataStorage.<init>(DataStorage.java:72)
        at org.apache.hadoop.dfs.DataStorage.<init>(DataStorage.java:50)
        at org.apache.hadoop.dfs.DataNode.<init>(DataNode.java:194)
        at org.apache.hadoop.dfs.DataNode.<init>(DataNode.java:155)
        at org.apache.hadoop.dfs.DataNode.makeInstance(DataNode.java:1050)
        at org.apache.hadoop.dfs.DataNode.run(DataNode.java:984)
        at org.apache.hadoop.dfs.DataNode.runAndWait(DataNode.java:1013)
        at org.apache.hadoop.dfs.DataNode.main(DataNode.java:1066)


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 12 23:34:06 2006
Return-Path: 
 <hadoop-dev-return-3696-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8530 invoked from network); 12 Sep 2006 23:34:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Sep 2006 23:34:06 -0000
Received: (qmail 58448 invoked by uid 500); 12 Sep 2006 23:34:06 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58415 invoked by uid 500); 12 Sep 2006 23:34:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58406 invoked by uid 99); 12 Sep 2006 23:34:05 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Sep 2006 16:34:05 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DD47F71434A
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Sep 2006 23:30:23 +0000 (GMT)
Message-ID: <16396594.1158103823903.JavaMail.jira@brutus>
Date: Tue, 12 Sep 2006 16:30:23 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-526) datanode lock message causes
 NullPointerException
In-Reply-To: <22959962.1158103408236.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-526?page=all ]

Milind Bhandarkar updated HADOOP-526:
-------------------------------------

    Attachment: hadoop-526.patch

This patch fixes the issue.

> datanode lock message causes NullPointerException
> -------------------------------------------------
>
>                 Key: HADOOP-526
>                 URL: http://issues.apache.org/jira/browse/HADOOP-526
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.6.0
>            Reporter: Owen O'Malley
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.6.1
>
>         Attachments: hadoop-526.patch
>
>
> If you try to bring up a second datanode in the same directory, you get a NullPointerException.
> Exception in thread "main" java.lang.NullPointerException
>         at org.apache.hadoop.dfs.DataStorage.lock(DataStorage.java:132)
>         at org.apache.hadoop.dfs.DataStorage.<init>(DataStorage.java:72)
>         at org.apache.hadoop.dfs.DataStorage.<init>(DataStorage.java:50)
>         at org.apache.hadoop.dfs.DataNode.<init>(DataNode.java:194)
>         at org.apache.hadoop.dfs.DataNode.<init>(DataNode.java:155)
>         at org.apache.hadoop.dfs.DataNode.makeInstance(DataNode.java:1050)
>         at org.apache.hadoop.dfs.DataNode.run(DataNode.java:984)
>         at org.apache.hadoop.dfs.DataNode.runAndWait(DataNode.java:1013)
>         at org.apache.hadoop.dfs.DataNode.main(DataNode.java:1066)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 12 23:49:06 2006
Return-Path: 
 <hadoop-dev-return-3697-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10871 invoked from network); 12 Sep 2006 23:49:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Sep 2006 23:49:06 -0000
Received: (qmail 74450 invoked by uid 500); 12 Sep 2006 23:49:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 74413 invoked by uid 500); 12 Sep 2006 23:49:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 74404 invoked by uid 99); 12 Sep 2006 23:49:05 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Sep 2006 16:49:05 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D447F71435B
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Sep 2006 23:45:23 +0000 (GMT)
Message-ID: <7237442.1158104723866.JavaMail.jira@brutus>
Date: Tue, 12 Sep 2006 16:45:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-526) datanode lock message causes
 NullPointerException
In-Reply-To: <22959962.1158103408236.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-526?page=all ]

Doug Cutting resolved HADOOP-526.
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Milind!

> datanode lock message causes NullPointerException
> -------------------------------------------------
>
>                 Key: HADOOP-526
>                 URL: http://issues.apache.org/jira/browse/HADOOP-526
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.6.0
>            Reporter: Owen O'Malley
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.6.1
>
>         Attachments: hadoop-526.patch
>
>
> If you try to bring up a second datanode in the same directory, you get a NullPointerException.
> Exception in thread "main" java.lang.NullPointerException
>         at org.apache.hadoop.dfs.DataStorage.lock(DataStorage.java:132)
>         at org.apache.hadoop.dfs.DataStorage.<init>(DataStorage.java:72)
>         at org.apache.hadoop.dfs.DataStorage.<init>(DataStorage.java:50)
>         at org.apache.hadoop.dfs.DataNode.<init>(DataNode.java:194)
>         at org.apache.hadoop.dfs.DataNode.<init>(DataNode.java:155)
>         at org.apache.hadoop.dfs.DataNode.makeInstance(DataNode.java:1050)
>         at org.apache.hadoop.dfs.DataNode.run(DataNode.java:984)
>         at org.apache.hadoop.dfs.DataNode.runAndWait(DataNode.java:1013)
>         at org.apache.hadoop.dfs.DataNode.main(DataNode.java:1066)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 13 01:23:49 2006
Return-Path: 
 <hadoop-dev-return-3698-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 36365 invoked from network); 13 Sep 2006 01:23:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Sep 2006 01:23:49 -0000
Received: (qmail 42560 invoked by uid 500); 13 Sep 2006 01:23:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 42505 invoked by uid 500); 13 Sep 2006 01:23:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 42496 invoked by uid 99); 13 Sep 2006 01:23:49 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Sep 2006 18:23:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:44807] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 2A/B1-06304-2BD57054 for <hadoop-dev@lucene.apache.org>;
 Tue, 12 Sep 2006 18:24:02 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8D809714329
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Sep 2006 01:20:23 +0000 (GMT)
Message-ID: <4315749.1158110423577.JavaMail.jira@brutus>
Date: Tue, 12 Sep 2006 18:20:23 -0700 (PDT)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-438) DFS pathname limitation.
In-Reply-To: <28546816.1155172213960.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-438?page=all ]

Wendy Chien updated HADOOP-438:
-------------------------------

    Attachment: pathlength.patch

> DFS pathname limitation.
> ------------------------
>
>                 Key: HADOOP-438
>                 URL: http://issues.apache.org/jira/browse/HADOOP-438
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0, 0.4.0, 0.3.2, 0.3.1, 0.3.0, 0.2.1, 0.2.0, 0.1.1, 0.1.0
>            Reporter: Konstantin Shvachko
>         Attachments: pathlength.patch
>
>
> I was trying to create a deep hierarchy of directories using DFS mkdirs().
> When the path to the leaf directory became long (~20000) DFS was still able to create
> directories with these names, but UTF8 started truncating long strings resulting in
> incorrect logging of namespace edits. That later crashed the namenode during restart,
> when it was trying to reproduce file creation logged in the edits file with truncated names.
> UTF8 is deprecated now so we will have to replace it with Text.
> With UTF8  we should enforce a pathname limit of 0xffff/3 = 21845
> With Text it is going to be larger. Not sure what the exact number is.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 13 01:23:54 2006
Return-Path: 
 <hadoop-dev-return-3699-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 36495 invoked from network); 13 Sep 2006 01:23:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Sep 2006 01:23:54 -0000
Received: (qmail 43282 invoked by uid 500); 13 Sep 2006 01:23:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 43255 invoked by uid 500); 13 Sep 2006 01:23:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 43246 invoked by uid 99); 13 Sep 2006 01:23:53 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Sep 2006 18:23:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:44817] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id BA/B1-06304-7BD57054 for <hadoop-dev@lucene.apache.org>;
 Tue, 12 Sep 2006 18:24:08 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 09F5471432A
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Sep 2006 01:20:29 +0000 (GMT)
Message-ID: <17045518.1158110429038.JavaMail.jira@brutus>
Date: Tue, 12 Sep 2006 18:20:29 -0700 (PDT)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-438) DFS pathname limitation.
In-Reply-To: <28546816.1155172213960.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-438?page=all ]

Wendy Chien reassigned HADOOP-438:
----------------------------------

    Assignee: Wendy Chien

> DFS pathname limitation.
> ------------------------
>
>                 Key: HADOOP-438
>                 URL: http://issues.apache.org/jira/browse/HADOOP-438
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0, 0.4.0, 0.3.2, 0.3.1, 0.3.0, 0.2.1, 0.2.0, 0.1.1, 0.1.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Wendy Chien
>         Attachments: pathlength.patch
>
>
> I was trying to create a deep hierarchy of directories using DFS mkdirs().
> When the path to the leaf directory became long (~20000) DFS was still able to create
> directories with these names, but UTF8 started truncating long strings resulting in
> incorrect logging of namespace edits. That later crashed the namenode during restart,
> when it was trying to reproduce file creation logged in the edits file with truncated names.
> UTF8 is deprecated now so we will have to replace it with Text.
> With UTF8  we should enforce a pathname limit of 0xffff/3 = 21845
> With Text it is going to be larger. Not sure what the exact number is.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 13 01:23:55 2006
Return-Path: 
 <hadoop-dev-return-3700-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 36536 invoked from network); 13 Sep 2006 01:23:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Sep 2006 01:23:55 -0000
Received: (qmail 43508 invoked by uid 500); 13 Sep 2006 01:23:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 43475 invoked by uid 500); 13 Sep 2006 01:23:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 43466 invoked by uid 99); 13 Sep 2006 01:23:55 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Sep 2006 18:23:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:44820] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 0B/B1-06304-9BD57054 for <hadoop-dev@lucene.apache.org>;
 Tue, 12 Sep 2006 18:24:09 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A21B5714328
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Sep 2006 01:20:30 +0000 (GMT)
Message-ID: <30628022.1158110430661.JavaMail.jira@brutus>
Date: Tue, 12 Sep 2006 18:20:30 -0700 (PDT)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-438) DFS pathname limitation.
In-Reply-To: <28546816.1155172213960.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-438?page=all ]

Wendy Chien updated HADOOP-438:
-------------------------------

    Status: Patch Available  (was: Open)

> DFS pathname limitation.
> ------------------------
>
>                 Key: HADOOP-438
>                 URL: http://issues.apache.org/jira/browse/HADOOP-438
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0, 0.4.0, 0.3.2, 0.3.1, 0.3.0, 0.2.1, 0.2.0, 0.1.1, 0.1.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Wendy Chien
>         Attachments: pathlength.patch
>
>
> I was trying to create a deep hierarchy of directories using DFS mkdirs().
> When the path to the leaf directory became long (~20000) DFS was still able to create
> directories with these names, but UTF8 started truncating long strings resulting in
> incorrect logging of namespace edits. That later crashed the namenode during restart,
> when it was trying to reproduce file creation logged in the edits file with truncated names.
> UTF8 is deprecated now so we will have to replace it with Text.
> With UTF8  we should enforce a pathname limit of 0xffff/3 = 21845
> With Text it is going to be larger. Not sure what the exact number is.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 13 03:57:52 2006
Return-Path: 
 <hadoop-dev-return-3701-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 69660 invoked from network); 13 Sep 2006 03:57:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Sep 2006 03:57:52 -0000
Received: (qmail 19517 invoked by uid 500); 13 Sep 2006 03:57:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 19497 invoked by uid 500); 13 Sep 2006 03:57:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 19488 invoked by uid 99); 13 Sep 2006 03:57:51 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Sep 2006 20:57:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:50990] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id A3/01-07463-BC187054 for <hadoop-dev@lucene.apache.org>;
 Tue, 12 Sep 2006 20:58:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EFEA1714350
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Sep 2006 03:54:23 +0000 (GMT)
Message-ID: <17012228.1158119663980.JavaMail.jira@brutus>
Date: Tue, 12 Sep 2006 20:54:23 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-104) Reflexive access to non-public class
 with public ctor requires setAccessible (with some JVMs)
In-Reply-To: <1783007685.1143241639315.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-104?page=all ]

Owen O'Malley resolved HADOOP-104.
----------------------------------

    Fix Version/s: 0.5.0
       Resolution: Duplicate
         Assignee: Hairong Kuang

> Reflexive access to non-public class with public ctor requires setAccessible (with some JVMs)
> ---------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-104
>                 URL: http://issues.apache.org/jira/browse/HADOOP-104
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Michel Tourn
>         Assigned To: Hairong Kuang
>             Fix For: 0.5.0
>
>         Attachments: setaccessible.patch
>
>
> Multiple times I have hit this problem which prevents the NameNode from starting.
> The only fix I had so far was to loose all my DFS data...
> Exception in thread "main" java.lang.RuntimeException: java.lang.IllegalAccessException: 
> Class org.apache.hadoop.io.WritableFactories can not access a member of 
> class org.apache.hadoop.dfs.Block with modifiers "public"
>         at org.apache.hadoop.io.WritableFactories.newInstance(WritableFactories.java:49)
>         at org.apache.hadoop.io.ArrayWritable.readFields(ArrayWritable.java:81)
>         at org.apache.hadoop.dfs.FSDirectory.loadFSEdits(FSDirectory.java:374)
>         at org.apache.hadoop.dfs.FSDirectory.loadFSImage(FSDirectory.java:347)
>         at org.apache.hadoop.dfs.FSDirectory.<init>(FSDirectory.java:258)
>         at org.apache.hadoop.dfs.FSNamesystem.<init>(FSNamesystem.java:151)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:82)
> According to this, 
> http://forum.java.sun.com/thread.jspa?threadID=704100&messageID=4082902
> this is a known issue when using
> reflexive access to a non-public class with public ctor 
> (class org.apache.hadoop.dfs.Block is such a class)
> This problem may not occur with all JVM releases. 
> (I build on 1.5.0-b64 and run on 1.5.0_05-b05)
> This problem only occured for me when 
> I upgrade code or change XML configuration AND 
> have existing files in the DFS.
> This problem does not occur when I just stop / restart the NameServer.
> In any case, the attached patch fixes it by calling setAccessible
> before constructing the instance with reflection.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 13 08:26:53 2006
Return-Path: 
 <hadoop-dev-return-3702-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50114 invoked from network); 13 Sep 2006 08:26:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Sep 2006 08:26:53 -0000
Received: (qmail 79816 invoked by uid 500); 13 Sep 2006 08:26:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 79716 invoked by uid 500); 13 Sep 2006 08:26:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 79671 invoked by uid 99); 13 Sep 2006 08:26:50 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Sep 2006 01:26:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:39985] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 63/70-08607-8D0C7054 for <hadoop-dev@lucene.apache.org>;
 Wed, 13 Sep 2006 01:27:04 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0B4C0714353
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Sep 2006 08:23:24 +0000 (GMT)
Message-ID: <19022892.1158135804043.JavaMail.jira@brutus>
Date: Wed, 13 Sep 2006 01:23:24 -0700 (PDT)
From: "Philippe Gassmann (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-527) Allow to specify the bind address for
 all hadoop servers
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Allow to specify the bind address for all hadoop servers
--------------------------------------------------------

                 Key: HADOOP-527
                 URL: http://issues.apache.org/jira/browse/HADOOP-527
             Project: Hadoop
          Issue Type: Improvement
    Affects Versions: 0.6.0, 0.5.0, 0.4.0, 0.3.2, 0.3.1, 0.3.0, 0.2.1, 0.2.0, 0.1.1, 0.1.0, 0.6.1, 0.7.0
            Reporter: Philippe Gassmann


Hadoop servers sockets are always binded on 0.0.0.0 ; this patch allow to specify a bind address.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 13 08:28:51 2006
Return-Path: 
 <hadoop-dev-return-3703-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50749 invoked from network); 13 Sep 2006 08:28:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Sep 2006 08:28:51 -0000
Received: (qmail 83523 invoked by uid 500); 13 Sep 2006 08:28:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 83486 invoked by uid 500); 13 Sep 2006 08:28:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 83477 invoked by uid 99); 13 Sep 2006 08:28:50 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Sep 2006 01:28:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:50516] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 94/80-08607-F41C7054 for <hadoop-dev@lucene.apache.org>;
 Wed, 13 Sep 2006 01:29:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5A6C371434F
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Sep 2006 08:25:23 +0000 (GMT)
Message-ID: <2142301.1158135923367.JavaMail.jira@brutus>
Date: Wed, 13 Sep 2006 01:25:23 -0700 (PDT)
From: "Philippe Gassmann (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-527) Allow to specify the bind address for
 all hadoop servers
In-Reply-To: <19022892.1158135804043.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-527?page=all ]

Philippe Gassmann updated HADOOP-527:
-------------------------------------

    Attachment: patch-bind-on-custom-addr

> Allow to specify the bind address for all hadoop servers
> --------------------------------------------------------
>
>                 Key: HADOOP-527
>                 URL: http://issues.apache.org/jira/browse/HADOOP-527
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.1.0, 0.2.0, 0.1.1, 0.3.0, 0.4.0, 0.2.1, 0.5.0, 0.3.1, 0.3.2, 0.6.0, 0.7.0, 0.6.1
>            Reporter: Philippe Gassmann
>         Attachments: patch-bind-on-custom-addr
>
>
> Hadoop servers sockets are always binded on 0.0.0.0 ; this patch allow to specify a bind address.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 13 09:35:55 2006
Return-Path: 
 <hadoop-dev-return-3704-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 70900 invoked from network); 13 Sep 2006 09:35:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Sep 2006 09:35:55 -0000
Received: (qmail 87848 invoked by uid 500); 13 Sep 2006 09:35:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 87718 invoked by uid 500); 13 Sep 2006 09:35:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 87579 invoked by uid 99); 13 Sep 2006 09:35:50 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Sep 2006 02:35:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:54160] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id E2/50-08832-401D7054 for <hadoop-dev@lucene.apache.org>;
 Wed, 13 Sep 2006 02:36:04 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A8D9171434F
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Sep 2006 09:32:23 +0000 (GMT)
Message-ID: <7146264.1158139943688.JavaMail.jira@brutus>
Date: Wed, 13 Sep 2006 02:32:23 -0700 (PDT)
From: =?utf-8?Q?Fr=C3=A9d=C3=A9ric_Bertin_=28JIRA=29?= <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-516) Eclipse-based GUI: DFS explorer and
 basic Map/Reduce job launcher
In-Reply-To: <13131373.1157736022384.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-516?page=3Dall ]

Fr=C3=A9d=C3=A9ric Bertin updated HADOOP-516:
-----------------------------------

    Attachment: hdfsExplorer2.zip

refactoring:
- hadoop-client.xml is now configurable with the preferences dialog

added features:
- create a new folder
- upload local files to the HDFS
- download HDFS files to the local filesystem
- F5 and DEL key shortcuts working

> Eclipse-based GUI: DFS explorer and basic Map/Reduce job launcher
> -----------------------------------------------------------------
>
>                 Key: HADOOP-516
>                 URL: http://issues.apache.org/jira/browse/HADOOP-516
>             Project: Hadoop
>          Issue Type: New Feature
>         Environment: Eclipse 3.2
> JDK 1.5
>            Reporter: Fr=C3=A9d=C3=A9ric Bertin
>         Attachments: hdfsExplorer.zip, hdfsExplorer2.zip
>
>
> to increase productivity in our current project (which makes a heavy use =
of Hadoop), we wrote a small Eclipse-based GUI application which basically =
consists in 2 views:
>    *  a HDFS explorer adapted from Eclipse filesystem explorer example.
>      For now, it includes the following features:
>          o classical tree-based browsing interface, with directory
>            content being detailed in a 3 columns table (file name, file
>            size, file type)
>          o refresh button
>          o delete file or directory (with confirm dialog): select files
>            in the tree or table and click the "Delete" button
>          o rename file or directory: simple click on the file in the
>            table, type the new name and validate
>          o open file with system editor: select the file in the table
>            and click "Open" button (works on Windows, not on Linux)
>          o internal drag & drop
>          o external drag & drop from the local filesystem to the HDFS
>            (the opposite doesn't work)
>    * a MapReduce *very* simple job launcher:
>          o select the job XML configuration file
>          o run the job
>          o kill the job
>          o visualize map and reduce progress with progress bars
>          o open a browser on the Hadoop job tracker web interface=20
> INSTALLATION NOTES:
>  - Eclipse 3.2
>  - JDK 1.5
>  - import the archive in Eclipse
>  - copy your hadoop conf file (hadoop-default.xml in "src" folder) -> thi=
s step should be moved in the GUI later
>  - right-click on the project and Run As -> Eclipse Application
>  - enjoy...

--=20
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: htt=
p://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

       

From MAILER-DAEMON Wed Sep 13 12:22:49 2006
Return-Path: 
 <hadoop-dev-return-3705-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 49292 invoked from network); 13 Sep 2006 12:22:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Sep 2006 12:22:49 -0000
Received: (qmail 83494 invoked by uid 500); 13 Sep 2006 12:22:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 83473 invoked by uid 500); 13 Sep 2006 12:22:48 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 83464 invoked by uid 99); 13 Sep 2006 12:22:48 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Sep 2006 05:22:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:44389] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id E5/10-09463-728F7054 for <hadoop-dev@lucene.apache.org>;
 Wed, 13 Sep 2006 05:23:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4DF94714350
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Sep 2006 12:19:22 +0000 (GMT)
Message-ID: <1678861.1158149962316.JavaMail.jira@brutus>
Date: Wed, 13 Sep 2006 05:19:22 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-528) Some hadoop distcp task fails with
 dfs.client.buffer.dir not found error while the property exists.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Some hadoop distcp task fails with dfs.client.buffer.dir not found error wh=
ile the property exists.
---------------------------------------------------------------------------=
------------------------

                 Key: HADOOP-528
                 URL: http://issues.apache.org/jira/browse/HADOOP-528
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.6.0
            Reporter: Sanjay Dahiya
             Fix For: 0.7.0


On some nodes hadoop distcp fails with folowing error. The property dfs.cli=
ent.buffer.dir is defined in hadoop-site.xml and the corresponding director=
y is also created on the node by framework. Same configuration works on all=
 other nodes.=20

It could be a timing issue where someone is trying to read the dir before i=
ts created on local disk, I am not sure of the cause.=20

java.io.IOException: No valid local directories in property: dfs.client.buf=
fer.dir at org.apache.hadoop.conf.Configuration.getFile(Configuration.java:=
405) at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.newBackupFile(DFSCl=
ient.java:780) at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.(DFSClien=
t.java:770) at org.apache.hadoop.dfs.DFSClient.create(DFSClient.java:276) a=
t org.apache.hadoop.dfs.DistributedFileSystem.createRaw(DistributedFileSyst=
em.java:104) at org.apache.hadoop.fs.FSDataOutputStream$Summer.(FSDataOutpu=
tStream.java:56) at org.apache.hadoop.fs.FSDataOutputStream$Summer.(FSDataO=
utputStream.java:45) at org.apache.hadoop.fs.FSDataOutputStream.(FSDataOutp=
utStream.java:146) at org.apache.hadoop.fs.FileSystem.create(FileSystem.jav=
a:270) at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:177) at or=
g.apache.hadoop.util.CopyFiles$DFSCopyFilesMapper.copy(CopyFiles.java:186) =
at org.apache.hadoop.util.CopyFiles$DFSCopyFilesMapper.map(CopyFiles.java:3=
91) at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:46) at org.apa=
che.hadoop.mapred.MapTask.run(MapTask.java:210) at org.apache.hadoop.mapred=
.TaskTracker$Child.main(TaskTracker.java:1066)

--=20
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: htt=
p://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

       

From MAILER-DAEMON Wed Sep 13 14:08:04 2006
Return-Path: 
 <hadoop-dev-return-3706-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92868 invoked from network); 13 Sep 2006 14:08:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Sep 2006 14:08:04 -0000
Received: (qmail 93448 invoked by uid 500); 13 Sep 2006 14:08:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 93428 invoked by uid 500); 13 Sep 2006 14:08:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 93418 invoked by uid 99); 13 Sep 2006 14:08:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Sep 2006 07:08:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Sep 2006 07:07:51 -0700
Received: from [192.168.0.252] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id k8DE7Wo25210
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Sep 2006 09:07:33 -0500
Message-ID: <450810A4.4050403@getopt.org>
Date: Wed, 13 Sep 2006 16:07:32 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Getting job ID from within a running task
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I need to be able to retrieve the current job id from within map or 
reduce tasks. I looked here and there, but I wasn't able to find any way 
to do this in the API ...

Basically, I want to be able to do something like this:

class XXX implements Mapper {

    public void configure(Configuration conf) {

       String jobId = ... ?
       String taskId = ... ?
    }
}

And similarly:


class XXX implements Reducer {

    public void configure(Configuration conf) {

       String jobId = ... ?
       String taskId = ... ?
    }
}

Is this possible?

-- 
Best regards,
Andrzej Bialecki     <><
 ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com



From MAILER-DAEMON Wed Sep 13 14:49:53 2006
Return-Path: 
 <hadoop-dev-return-3707-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 5178 invoked from network); 13 Sep 2006 14:49:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Sep 2006 14:49:53 -0000
Received: (qmail 75478 invoked by uid 500); 13 Sep 2006 14:49:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75335 invoked by uid 500); 13 Sep 2006 14:49:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75326 invoked by uid 99); 13 Sep 2006 14:49:49 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Sep 2006 07:49:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:53856] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id D3/D0-09869-C9A18054 for <hadoop-dev@lucene.apache.org>;
 Wed, 13 Sep 2006 07:50:04 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 61A81714352
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Sep 2006 14:46:22 +0000 (GMT)
Message-ID: <33046802.1158158782396.JavaMail.jira@brutus>
Date: Wed, 13 Sep 2006 07:46:22 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-529) SequenceFile fails task with
 NullPointerException in code initialization
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

SequenceFile fails task with NullPointerException in code initialization
------------------------------------------------------------------------

                 Key: HADOOP-529
                 URL: http://issues.apache.org/jira/browse/HADOOP-529
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.6.0
            Reporter: Sanjay Dahiya
            Priority: Blocker
             Fix For: 0.6.1


Sequence file fails in following block of code in 0.6 hadoop ( Sep 13th trunk ) - 
      if (decompress) {
        valInFilter = this.codec.createInputStream(valBuffer);   ---> throws NullPointerException

this.codec is apparently not initialized in 
      if (version >= CUSTOM_COMPRESS_VERSION && this.decompress) {    
        try {
          this.codec = (CompressionCodec)  <---- Init code. 

and is used later. It should probably check for version also before using the this.codec. 



2006-09-13 07:37:55,010 INFO org.apache.hadoop.mapred.TaskInProgress: Error from task_0003_m_001601_0: java.lang.NullPointerException
        at org.apache.hadoop.io.SequenceFile$Reader.init(SequenceFile.java:1001)
        at org.apache.hadoop.io.SequenceFile$Reader.<init>(SequenceFile.java:933)
        at org.apache.hadoop.io.SequenceFile$Reader.<init>(SequenceFile.java:924)
        at org.apache.hadoop.mapred.SequenceFileRecordReader.<init>(SequenceFileRecordReader.java:37)
        at org.apache.hadoop.mapred.SequenceFileInputFormat.getRecordReader(SequenceFileInputFormat.java:53)
        at org.apache.hadoop.mapred.MapTask.run(MapTask.java:175)
        at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1066)


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 13 14:53:50 2006
Return-Path: 
 <hadoop-dev-return-3708-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 7444 invoked from network); 13 Sep 2006 14:53:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Sep 2006 14:53:50 -0000
Received: (qmail 92347 invoked by uid 500); 13 Sep 2006 14:53:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 92324 invoked by uid 500); 13 Sep 2006 14:53:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 92311 invoked by uid 99); 13 Sep 2006 14:53:49 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Sep 2006 07:53:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:43178] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 2D/F0-09869-D8B18054 for <hadoop-dev@lucene.apache.org>;
 Wed, 13 Sep 2006 07:54:05 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 81699714353
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Sep 2006 14:50:23 +0000 (GMT)
Message-ID: <31663515.1158159023527.JavaMail.jira@brutus>
Date: Wed, 13 Sep 2006 07:50:23 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-529) SequenceFile fails task with
 NullPointerException in codec initialization
In-Reply-To: <33046802.1158158782396.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-529?page=all ]

Sanjay Dahiya updated HADOOP-529:
---------------------------------

    Summary: SequenceFile fails task with NullPointerException in codec initialization  (was: SequenceFile fails task with NullPointerException in code initialization)

> SequenceFile fails task with NullPointerException in codec initialization
> -------------------------------------------------------------------------
>
>                 Key: HADOOP-529
>                 URL: http://issues.apache.org/jira/browse/HADOOP-529
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.6.0
>            Reporter: Sanjay Dahiya
>            Priority: Blocker
>             Fix For: 0.6.1
>
>
> Sequence file fails in following block of code in 0.6 hadoop ( Sep 13th trunk ) - 
>       if (decompress) {
>         valInFilter = this.codec.createInputStream(valBuffer);   ---> throws NullPointerException
> this.codec is apparently not initialized in 
>       if (version >= CUSTOM_COMPRESS_VERSION && this.decompress) {    
>         try {
>           this.codec = (CompressionCodec)  <---- Init code. 
> and is used later. It should probably check for version also before using the this.codec. 
> 2006-09-13 07:37:55,010 INFO org.apache.hadoop.mapred.TaskInProgress: Error from task_0003_m_001601_0: java.lang.NullPointerException
>         at org.apache.hadoop.io.SequenceFile$Reader.init(SequenceFile.java:1001)
>         at org.apache.hadoop.io.SequenceFile$Reader.<init>(SequenceFile.java:933)
>         at org.apache.hadoop.io.SequenceFile$Reader.<init>(SequenceFile.java:924)
>         at org.apache.hadoop.mapred.SequenceFileRecordReader.<init>(SequenceFileRecordReader.java:37)
>         at org.apache.hadoop.mapred.SequenceFileInputFormat.getRecordReader(SequenceFileInputFormat.java:53)
>         at org.apache.hadoop.mapred.MapTask.run(MapTask.java:175)
>         at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1066)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 13 16:10:50 2006
Return-Path: 
 <hadoop-dev-return-3710-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34390 invoked from network); 13 Sep 2006 16:10:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Sep 2006 16:10:50 -0000
Received: (qmail 62443 invoked by uid 500); 13 Sep 2006 16:10:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62255 invoked by uid 500); 13 Sep 2006 16:10:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62244 invoked by uid 99); 13 Sep 2006 16:10:49 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Sep 2006 09:10:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:37480] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 3E/20-10194-99D28054 for <hadoop-dev@lucene.apache.org>;
 Wed, 13 Sep 2006 09:11:05 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 55AE7714357
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Sep 2006 16:07:23 +0000 (GMT)
Message-ID: <17335466.1158163643348.JavaMail.jira@brutus>
Date: Wed, 13 Sep 2006 09:07:23 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-529) SequenceFile fails task with
 NullPointerException in codec initialization
In-Reply-To: <33046802.1158158782396.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-529?page=comments#action_12434486 ] 
            
Owen O'Malley commented on HADOOP-529:
--------------------------------------

This looks like the corresponding problem to HADOOP-523, but for SequenceFiles, but I'll check it out.

> SequenceFile fails task with NullPointerException in codec initialization
> -------------------------------------------------------------------------
>
>                 Key: HADOOP-529
>                 URL: http://issues.apache.org/jira/browse/HADOOP-529
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.6.0
>            Reporter: Sanjay Dahiya
>            Priority: Blocker
>             Fix For: 0.6.1
>
>
> Sequence file fails in following block of code in 0.6 hadoop ( Sep 13th trunk ) - 
>       if (decompress) {
>         valInFilter = this.codec.createInputStream(valBuffer);   ---> throws NullPointerException
> this.codec is apparently not initialized in 
>       if (version >= CUSTOM_COMPRESS_VERSION && this.decompress) {    
>         try {
>           this.codec = (CompressionCodec)  <---- Init code. 
> and is used later. It should probably check for version also before using the this.codec. 
> 2006-09-13 07:37:55,010 INFO org.apache.hadoop.mapred.TaskInProgress: Error from task_0003_m_001601_0: java.lang.NullPointerException
>         at org.apache.hadoop.io.SequenceFile$Reader.init(SequenceFile.java:1001)
>         at org.apache.hadoop.io.SequenceFile$Reader.<init>(SequenceFile.java:933)
>         at org.apache.hadoop.io.SequenceFile$Reader.<init>(SequenceFile.java:924)
>         at org.apache.hadoop.mapred.SequenceFileRecordReader.<init>(SequenceFileRecordReader.java:37)
>         at org.apache.hadoop.mapred.SequenceFileInputFormat.getRecordReader(SequenceFileInputFormat.java:53)
>         at org.apache.hadoop.mapred.MapTask.run(MapTask.java:175)
>         at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1066)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 13 16:07:52 2006
Return-Path: 
 <hadoop-dev-return-3709-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33534 invoked from network); 13 Sep 2006 16:07:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Sep 2006 16:07:52 -0000
Received: (qmail 53072 invoked by uid 500); 13 Sep 2006 16:07:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53056 invoked by uid 500); 13 Sep 2006 16:07:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53047 invoked by uid 99); 13 Sep 2006 16:07:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Sep 2006 09:07:51 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [209.151.94.5] (HELO megs8.100mwh.com) (209.151.94.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Sep 2006 09:07:41 -0700
Received: from meetsawglad.corp.yahoo.com ([66.228.162.219])
	by megs8.100mwh.com with esmtpsa (TLSv1:RC4-SHA:128)
	(Exim 4.52)
	id 1GNXGc-0001AO-OC
	for hadoop-dev@lucene.apache.org; Wed, 13 Sep 2006 10:07:14 -0600
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <450810A4.4050403@getopt.org>
References: <450810A4.4050403@getopt.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <67EB2F82-5481-42B6-86BE-8D35CB03A841@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Owen O'Malley <owen@yahoo-inc.com>
Subject: Re: Getting job ID from within a running task
Date: Wed, 13 Sep 2006 09:08:17 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-AntiAbuse: This header was added to track abuse,
 please include it with any abuse report
X-AntiAbuse: Primary Hostname - megs8.100mwh.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - yahoo-inc.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Sep 13, 2006, at 7:07 AM, Andrzej Bialecki wrote:

> Hi,
>
> I need to be able to retrieve the current job id from within map or  
> reduce tasks. I looked here and there, but I wasn't able to find  
> any way to do this in the API ...

Yes, look under "Localized Properties in the JobConf" on the wiki:

http://wiki.apache.org/lucene-hadoop/TaskExecutionEnvironment

In particular, conf.get("mapred.job.id") and conf.get 
("mapred.task.id") will do the job.

-- Owen

From MAILER-DAEMON Wed Sep 13 16:45:05 2006
Return-Path: 
 <hadoop-dev-return-3711-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43521 invoked from network); 13 Sep 2006 16:45:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Sep 2006 16:45:05 -0000
Received: (qmail 17557 invoked by uid 500); 13 Sep 2006 16:45:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17532 invoked by uid 500); 13 Sep 2006 16:45:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17523 invoked by uid 99); 13 Sep 2006 16:45:04 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Sep 2006 09:45:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:40231] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 0C/90-10245-65538054 for <hadoop-dev@lucene.apache.org>;
 Wed, 13 Sep 2006 09:45:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E3FD9410026
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Sep 2006 16:40:23 +0000 (GMT)
Message-ID: <4167402.1158165623931.JavaMail.jira@brutus>
Date: Wed, 13 Sep 2006 09:40:23 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-529) SequenceFile fails task with
 NullPointerException in codec initialization
In-Reply-To: <33046802.1158158782396.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-529?page=all ]

Owen O'Malley reassigned HADOOP-529:
------------------------------------

    Assignee: Owen O'Malley

> SequenceFile fails task with NullPointerException in codec initialization
> -------------------------------------------------------------------------
>
>                 Key: HADOOP-529
>                 URL: http://issues.apache.org/jira/browse/HADOOP-529
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.6.0
>            Reporter: Sanjay Dahiya
>         Assigned To: Owen O'Malley
>            Priority: Blocker
>             Fix For: 0.6.1
>
>
> Sequence file fails in following block of code in 0.6 hadoop ( Sep 13th trunk ) - 
>       if (decompress) {
>         valInFilter = this.codec.createInputStream(valBuffer);   ---> throws NullPointerException
> this.codec is apparently not initialized in 
>       if (version >= CUSTOM_COMPRESS_VERSION && this.decompress) {    
>         try {
>           this.codec = (CompressionCodec)  <---- Init code. 
> and is used later. It should probably check for version also before using the this.codec. 
> 2006-09-13 07:37:55,010 INFO org.apache.hadoop.mapred.TaskInProgress: Error from task_0003_m_001601_0: java.lang.NullPointerException
>         at org.apache.hadoop.io.SequenceFile$Reader.init(SequenceFile.java:1001)
>         at org.apache.hadoop.io.SequenceFile$Reader.<init>(SequenceFile.java:933)
>         at org.apache.hadoop.io.SequenceFile$Reader.<init>(SequenceFile.java:924)
>         at org.apache.hadoop.mapred.SequenceFileRecordReader.<init>(SequenceFileRecordReader.java:37)
>         at org.apache.hadoop.mapred.SequenceFileInputFormat.getRecordReader(SequenceFileInputFormat.java:53)
>         at org.apache.hadoop.mapred.MapTask.run(MapTask.java:175)
>         at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1066)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 13 16:52:06 2006
Return-Path: 
 <hadoop-dev-return-3712-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 47342 invoked from network); 13 Sep 2006 16:52:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Sep 2006 16:52:06 -0000
Received: (qmail 28928 invoked by uid 500); 13 Sep 2006 16:52:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28900 invoked by uid 500); 13 Sep 2006 16:52:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28891 invoked by uid 99); 13 Sep 2006 16:52:05 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Sep 2006 09:52:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:52554] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id DC/C0-10245-AF638054 for <hadoop-dev@lucene.apache.org>;
 Wed, 13 Sep 2006 09:52:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D8332410025
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Sep 2006 16:47:23 +0000 (GMT)
Message-ID: <22366866.1158166043882.JavaMail.jira@brutus>
Date: Wed, 13 Sep 2006 09:47:23 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-529) SequenceFile fails task with
 NullPointerException in codec initialization
In-Reply-To: <33046802.1158158782396.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-529?page=all ]

Owen O'Malley updated HADOOP-529:
---------------------------------

    Attachment: seq-file-codec-init.patch

This patch fixes the SequenceFile.Reader initialization so that compressed sequence files written before hadoop 0.6 can be read.

> SequenceFile fails task with NullPointerException in codec initialization
> -------------------------------------------------------------------------
>
>                 Key: HADOOP-529
>                 URL: http://issues.apache.org/jira/browse/HADOOP-529
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.6.0
>            Reporter: Sanjay Dahiya
>         Assigned To: Owen O'Malley
>            Priority: Blocker
>             Fix For: 0.6.1
>
>         Attachments: seq-file-codec-init.patch
>
>
> Sequence file fails in following block of code in 0.6 hadoop ( Sep 13th trunk ) - 
>       if (decompress) {
>         valInFilter = this.codec.createInputStream(valBuffer);   ---> throws NullPointerException
> this.codec is apparently not initialized in 
>       if (version >= CUSTOM_COMPRESS_VERSION && this.decompress) {    
>         try {
>           this.codec = (CompressionCodec)  <---- Init code. 
> and is used later. It should probably check for version also before using the this.codec. 
> 2006-09-13 07:37:55,010 INFO org.apache.hadoop.mapred.TaskInProgress: Error from task_0003_m_001601_0: java.lang.NullPointerException
>         at org.apache.hadoop.io.SequenceFile$Reader.init(SequenceFile.java:1001)
>         at org.apache.hadoop.io.SequenceFile$Reader.<init>(SequenceFile.java:933)
>         at org.apache.hadoop.io.SequenceFile$Reader.<init>(SequenceFile.java:924)
>         at org.apache.hadoop.mapred.SequenceFileRecordReader.<init>(SequenceFileRecordReader.java:37)
>         at org.apache.hadoop.mapred.SequenceFileInputFormat.getRecordReader(SequenceFileInputFormat.java:53)
>         at org.apache.hadoop.mapred.MapTask.run(MapTask.java:175)
>         at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1066)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 13 17:10:05 2006
Return-Path: 
 <hadoop-dev-return-3713-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 53318 invoked from network); 13 Sep 2006 17:10:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Sep 2006 17:10:05 -0000
Received: (qmail 53240 invoked by uid 500); 13 Sep 2006 17:10:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53221 invoked by uid 500); 13 Sep 2006 17:10:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53212 invoked by uid 99); 13 Sep 2006 17:10:04 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Sep 2006 10:10:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:33357] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id D3/41-10245-23B38054 for <hadoop-dev@lucene.apache.org>;
 Wed, 13 Sep 2006 10:10:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E6D30410026
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Sep 2006 17:05:23 +0000 (GMT)
Message-ID: <5818452.1158167123942.JavaMail.jira@brutus>
Date: Wed, 13 Sep 2006 10:05:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-529) SequenceFile fails task with
 NullPointerException in codec initialization
In-Reply-To: <33046802.1158158782396.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-529?page=all ]

Doug Cutting resolved HADOOP-529.
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Owen!

> SequenceFile fails task with NullPointerException in codec initialization
> -------------------------------------------------------------------------
>
>                 Key: HADOOP-529
>                 URL: http://issues.apache.org/jira/browse/HADOOP-529
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.6.0
>            Reporter: Sanjay Dahiya
>         Assigned To: Owen O'Malley
>            Priority: Blocker
>             Fix For: 0.6.1
>
>         Attachments: seq-file-codec-init.patch
>
>
> Sequence file fails in following block of code in 0.6 hadoop ( Sep 13th trunk ) - 
>       if (decompress) {
>         valInFilter = this.codec.createInputStream(valBuffer);   ---> throws NullPointerException
> this.codec is apparently not initialized in 
>       if (version >= CUSTOM_COMPRESS_VERSION && this.decompress) {    
>         try {
>           this.codec = (CompressionCodec)  <---- Init code. 
> and is used later. It should probably check for version also before using the this.codec. 
> 2006-09-13 07:37:55,010 INFO org.apache.hadoop.mapred.TaskInProgress: Error from task_0003_m_001601_0: java.lang.NullPointerException
>         at org.apache.hadoop.io.SequenceFile$Reader.init(SequenceFile.java:1001)
>         at org.apache.hadoop.io.SequenceFile$Reader.<init>(SequenceFile.java:933)
>         at org.apache.hadoop.io.SequenceFile$Reader.<init>(SequenceFile.java:924)
>         at org.apache.hadoop.mapred.SequenceFileRecordReader.<init>(SequenceFileRecordReader.java:37)
>         at org.apache.hadoop.mapred.SequenceFileInputFormat.getRecordReader(SequenceFileInputFormat.java:53)
>         at org.apache.hadoop.mapred.MapTask.run(MapTask.java:175)
>         at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1066)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 13 17:19:55 2006
Return-Path: 
 <hadoop-dev-return-3714-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57738 invoked from network); 13 Sep 2006 17:19:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Sep 2006 17:19:55 -0000
Received: (qmail 68806 invoked by uid 500); 13 Sep 2006 17:19:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68616 invoked by uid 500); 13 Sep 2006 17:19:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68607 invoked by uid 99); 13 Sep 2006 17:19:54 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Sep 2006 10:19:54 -0700
Authentication-Results: idunn.apache.osuosl.org smtp.mail=cutting@apache.org;
 spf=permerror
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received-SPF: error (idunn.apache.osuosl.org: domain apache.org from
 216.148.227.155 cause and error)
Received: from ([216.148.227.155:37510] helo=rwcrmhc15.comcast.net)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id B0/81-10245-23D38054 for <hadoop-dev@lucene.apache.org>;
 Wed, 13 Sep 2006 10:18:53 -0700
Received: from [192.168.168.15]
 (c-71-202-24-246.hsd1.ca.comcast.net[71.202.24.246])
          by comcast.net (rwcrmhc15) with ESMTP
          id <20060913171718m1500nu0dce>; Wed, 13 Sep 2006 17:17:18 +0000
Message-ID: <45083D1D.5020604@apache.org>
Date: Wed, 13 Sep 2006 10:17:17 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.5 (X11/20060728)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: Getting job ID from within a running task
References: <450810A4.4050403@getopt.org>
 <67EB2F82-5481-42B6-86BE-8D35CB03A841@yahoo-inc.com>
In-Reply-To: <67EB2F82-5481-42B6-86BE-8D35CB03A841@yahoo-inc.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Owen O'Malley wrote:
> In particular, conf.get("mapred.job.id") and conf.get("mapred.task.id") 
> will do the job.

Should we add JobConf methods for these?

Doug

From MAILER-DAEMON Wed Sep 13 17:37:53 2006
Return-Path: 
 <hadoop-dev-return-3715-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 64252 invoked from network); 13 Sep 2006 17:37:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Sep 2006 17:37:53 -0000
Received: (qmail 95736 invoked by uid 500); 13 Sep 2006 17:37:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95712 invoked by uid 500); 13 Sep 2006 17:37:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95703 invoked by uid 99); 13 Sep 2006 17:37:52 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Sep 2006 10:37:52 -0700
Authentication-Results: idunn.apache.osuosl.org smtp.mail=owen@yahoo-inc.com;
 spf=permerror
X-ASF-Spam-Status: No,
 hits=0.9 required=5.0 tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
Received-SPF: error (idunn.apache.osuosl.org: domain yahoo-inc.com from
 209.151.94.5 cause and error)
Received: from ([209.151.94.5:53462] helo=megs8.100mwh.com)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id F9/F1-10245-3B148054 for <hadoop-dev@lucene.apache.org>;
 Wed, 13 Sep 2006 10:38:06 -0700
Received: from meetsawglad.corp.yahoo.com ([66.228.162.219])
	by megs8.100mwh.com with esmtpsa (TLSv1:RC4-SHA:128)
	(Exim 4.52)
	id 1GNYf2-0006Uc-HI
	for hadoop-dev@lucene.apache.org; Wed, 13 Sep 2006 11:36:32 -0600
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <45083D1D.5020604@apache.org>
References: <450810A4.4050403@getopt.org>
 <67EB2F82-5481-42B6-86BE-8D35CB03A841@yahoo-inc.com>
 <45083D1D.5020604@apache.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <DCB65373-5B5D-475E-8B31-618E4C11BCB6@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Owen O'Malley <owen@yahoo-inc.com>
Subject: Re: Getting job ID from within a running task
Date: Wed, 13 Sep 2006 10:37:35 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-AntiAbuse: This header was added to track abuse,
 please include it with any abuse report
X-AntiAbuse: Primary Hostname - megs8.100mwh.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - yahoo-inc.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Sep 13, 2006, at 10:17 AM, Doug Cutting wrote:

> Owen O'Malley wrote:
>> In particular, conf.get("mapred.job.id") and conf.get 
>> ("mapred.task.id") will do the job.
>
> Should we add JobConf methods for these?

We should probably have a TaskConf that does:

public class TaskConf extends JobConf {
   public String getJobId() {...}
   public String getTaskId() {...}
}

since they don't really make much sense except for the object that is  
passed down to the tasks.

From MAILER-DAEMON Wed Sep 13 17:48:02 2006
Return-Path: 
 <hadoop-dev-return-3716-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67717 invoked from network); 13 Sep 2006 17:48:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Sep 2006 17:48:02 -0000
Received: (qmail 12331 invoked by uid 500); 13 Sep 2006 17:48:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 12219 invoked by uid 500); 13 Sep 2006 17:48:02 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 12210 invoked by uid 99); 13 Sep 2006 17:48:02 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Sep 2006 10:48:02 -0700
Authentication-Results: idunn.apache.osuosl.org smtp.mail=cutting@apache.org;
 spf=permerror
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received-SPF: error (idunn.apache.osuosl.org: domain apache.org from
 204.127.192.81 cause and error)
Received: from ([204.127.192.81:49944] helo=rwcrmhc11.comcast.net)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 17/32-10245-AC348054 for <hadoop-dev@lucene.apache.org>;
 Wed, 13 Sep 2006 10:47:01 -0700
Received: from [192.168.168.15]
 (c-71-202-24-246.hsd1.ca.comcast.net[71.202.24.246])
          by comcast.net (rwcrmhc11) with ESMTP
          id <20060913174526m11009ke5ge>; Wed, 13 Sep 2006 17:45:26 +0000
Message-ID: <450843B5.4030200@apache.org>
Date: Wed, 13 Sep 2006 10:45:25 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.5 (X11/20060728)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: Getting job ID from within a running task
References: <450810A4.4050403@getopt.org>
 <67EB2F82-5481-42B6-86BE-8D35CB03A841@yahoo-inc.com>
 <45083D1D.5020604@apache.org>
 <DCB65373-5B5D-475E-8B31-618E4C11BCB6@yahoo-inc.com>
In-Reply-To: <DCB65373-5B5D-475E-8B31-618E4C11BCB6@yahoo-inc.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Owen O'Malley wrote:
> We should probably have a TaskConf that does:
> 
> public class TaskConf extends JobConf {
>   public String getJobId() {...}
>   public String getTaskId() {...}
> }
> 
> since they don't really make much sense except for the object that is 
> passed down to the tasks.

Static methods might be simpler.  These could be on TaskTracker, or a 
new class just for this purpose.

Doug

From MAILER-DAEMON Wed Sep 13 20:26:02 2006
Return-Path: 
 <hadoop-dev-return-3717-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 27450 invoked from network); 13 Sep 2006 20:26:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Sep 2006 20:26:02 -0000
Received: (qmail 53672 invoked by uid 500); 13 Sep 2006 20:26:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53647 invoked by uid 500); 13 Sep 2006 20:26:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53638 invoked by uid 99); 13 Sep 2006 20:26:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Sep 2006 13:26:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Sep 2006 13:25:50 -0700
Received: from [192.168.0.252] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id k8DKPcr12321
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Sep 2006 15:25:38 -0500
Message-ID: <4508693B.4040903@getopt.org>
Date: Wed, 13 Sep 2006 22:25:31 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: Getting job ID from within a running task
References: <450810A4.4050403@getopt.org>
 <67EB2F82-5481-42B6-86BE-8D35CB03A841@yahoo-inc.com>
In-Reply-To: <67EB2F82-5481-42B6-86BE-8D35CB03A841@yahoo-inc.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Owen O'Malley wrote:
>
> On Sep 13, 2006, at 7:07 AM, Andrzej Bialecki wrote:
>
>> Hi,
>>
>> I need to be able to retrieve the current job id from within map or 
>> reduce tasks. I looked here and there, but I wasn't able to find any 
>> way to do this in the API ...
>
> Yes, look under "Localized Properties in the JobConf" on the wiki:
>
> http://wiki.apache.org/lucene-hadoop/TaskExecutionEnvironment
>
> In particular, conf.get("mapred.job.id") and 
> conf.get("mapred.task.id") will do the job.

Thanks Owen, I should have checked this page ...

-- 
Best regards,
Andrzej Bialecki     <><
 ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com



From MAILER-DAEMON Wed Sep 13 21:04:52 2006
Return-Path: 
 <hadoop-dev-return-3718-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 38706 invoked from network); 13 Sep 2006 21:04:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Sep 2006 21:04:52 -0000
Received: (qmail 46698 invoked by uid 500); 13 Sep 2006 21:04:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 46504 invoked by uid 500); 13 Sep 2006 21:04:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46490 invoked by uid 99); 13 Sep 2006 21:04:51 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Sep 2006 14:04:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:55512] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 9A/01-00682-F6278054 for <hadoop-dev@lucene.apache.org>;
 Wed, 13 Sep 2006 14:04:47 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5ED9541002A
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Sep 2006 21:01:22 +0000 (GMT)
Message-ID: <2025997.1158181282385.JavaMail.jira@brutus>
Date: Wed, 13 Sep 2006 14:01:22 -0700 (PDT)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-530) Error message does not expose
 mismached key or value class name correctly in Sequence file
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Error message does not expose mismached key or value class name correctly in Sequence file
------------------------------------------------------------------------------------------

                 Key: HADOOP-530
                 URL: http://issues.apache.org/jira/browse/HADOOP-530
             Project: Hadoop
          Issue Type: Bug
    Affects Versions: 0.6.0
            Reporter: Hairong Kuang
         Assigned To: Hairong Kuang
             Fix For: 0.7.0
         Attachments: seq_class_name.patch

When a passed-in key or value is not of the expected class, the value of the key or value rather than its class name is printed to an error message.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 13 21:04:53 2006
Return-Path: 
 <hadoop-dev-return-3719-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 38748 invoked from network); 13 Sep 2006 21:04:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Sep 2006 21:04:53 -0000
Received: (qmail 46749 invoked by uid 500); 13 Sep 2006 21:04:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 46728 invoked by uid 500); 13 Sep 2006 21:04:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46719 invoked by uid 99); 13 Sep 2006 21:04:52 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Sep 2006 14:04:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:55514] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id BA/01-00682-17278054 for <hadoop-dev@lucene.apache.org>;
 Wed, 13 Sep 2006 14:04:49 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8961A41002C
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Sep 2006 21:01:23 +0000 (GMT)
Message-ID: <30213497.1158181283560.JavaMail.jira@brutus>
Date: Wed, 13 Sep 2006 14:01:23 -0700 (PDT)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-530) Error message does not expose
 mismached key or value class name correctly in Sequence file
In-Reply-To: <2025997.1158181282385.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-530?page=all ]

Hairong Kuang updated HADOOP-530:
---------------------------------

    Attachment: seq_class_name.patch

> Error message does not expose mismached key or value class name correctly in Sequence file
> ------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-530
>                 URL: http://issues.apache.org/jira/browse/HADOOP-530
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.6.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.7.0
>
>         Attachments: seq_class_name.patch
>
>
> When a passed-in key or value is not of the expected class, the value of the key or value rather than its class name is printed to an error message.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 13 21:22:55 2006
Return-Path: 
 <hadoop-dev-return-3720-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 45559 invoked from network); 13 Sep 2006 21:22:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Sep 2006 21:22:55 -0000
Received: (qmail 90278 invoked by uid 500); 13 Sep 2006 21:22:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 90172 invoked by uid 500); 13 Sep 2006 21:22:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 90163 invoked by uid 99); 13 Sep 2006 21:22:53 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Sep 2006 14:22:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:36291] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 5F/71-00682-9A678054 for <hadoop-dev@lucene.apache.org>;
 Wed, 13 Sep 2006 14:22:49 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E305A714323
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Sep 2006 21:19:23 +0000 (GMT)
Message-ID: <4281517.1158182363927.JavaMail.jira@brutus>
Date: Wed, 13 Sep 2006 14:19:23 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-288) RFC: Efficient file caching
In-Reply-To: <6015694.1149730109866.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-288?page=all ]

Mahadev konar updated HADOOP-288:
---------------------------------

    Attachment: caching-5.patch

Made the suggested changes by doug. I moved all the public methods in jobconf for caching into DistributedCache. Mapreduce is now a client of DistributedCache class. Also, the public api now uses URI to addcachefiles/archives. DistributedCache is seperate package.

So the api now looks like 
DistrbutedCache.addCacheArchives(uri, jobconf)

and to get the localized Paths 
DistibutedCache.getLocalArchives(Configuration conf) gives an array of  localized path directory of cache archives in the order they were added.  


> RFC: Efficient file caching
> ---------------------------
>
>                 Key: HADOOP-288
>                 URL: http://issues.apache.org/jira/browse/HADOOP-288
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.6.0
>            Reporter: Michel Tourn
>         Assigned To: Mahadev konar
>         Attachments: caching-3.patch, caching-4.patch, caching-5.patch, caching.patch, caching.patch, test.jar, test.zip
>
>
> RFC: Efficient file caching 
> (on Hadoop Task nodes, for benefit of MapReduce Tasks)
> ------------------------------------------------------
> We will start implementing this soon. Please provide feedback and improvements to this plan.
> The header "Options:" indicates places where simple choices must be made.
> Problem:
> -------
> o MapReduce tasks require access to additional out-of-band data ("dictionaries")
> This out-of-band data is:
> o in addition to the map/reduce inputs.
> o large (1GB+)
> o broadcast (same data is required on all the Task nodes)
> o changes "infrequently", in particular:
> oo it is always constant for all the Tasks in a Job. 
> oo it is often constant for a month at a time 
> oo it may be shared across team members
> o sometimes used by pure-Java MapReduce programs
> o sometimes used by non-Java MapReduce programs (using Hadoop-Streaming)
> o (future) used by programs that use HDFS and Task-trackers but not MapReduce.
> Existing Solutions to the problem:
> ---------------------------------
> These solutions are not good enough. The present proposal is to do Sol 1 with caching.
> Sol 1: Pure Hadoop: package the out-of-band data in the MapReduce Job jar file.
> Sol 2: Non  Hadoop: for each task node run rsync from single source for data.
> Sol 3: Non  Hadoop: use BitTorrent, etc.
> Sol.1 is correct but slow for many reasons:
>  The Job submitter must recreate a large jar(tar) file for every Job.
>   (The jar contains both changing programs and stable dictionaries)
>  The large Jar file must be propagated from the client to HDFS with 
>  a large replication factor. 
>  At the beginning of every Task, the Task tracker gets the job jar from HDFS 
>  and unjars it in the working directory. This can dominate task execution time.
>  
> Sol.2 has nice properties but also some problems.
>  It does not scale well with large clusters (many concurrent rsync read requests i.e. single-source broadcast)
>  It assumes that Hadoop users can upload data using rsync to the cluster nodes. As a policy, this is not allowed.
>  It requires rsync.
>  
> Sol.3 alleviates the rsync scalability problems but 
>       It is a dependency on an external system. 
>       We want something simpler and more tightly integrated with Hadoop.
>       
> Staging (uploading) out-of-band data:
> ------------------------------------
> The out-of-band data will often originate on the local filesystem of a user machine 
>  (i.e. a MapReduce job submitter)
> Nevertheless it makes sense to use HDFS to store the original out-of-band data because:
> o HDFS has (wide) replication. This enables scalable broadcast later.
> o HDFS is an available channel to move data from clients to all task machines.
> o HDFS is convenient as a shared location among Hadoop team members.
> Accessing (downloading) out-of-band data:
> ----------------------------------------
> The non-Java MapReduce programs do not have or want[1] APIs for HDFS.
> Instead these programs just want to access out-of-band data as 
>  local files at predefined paths.
> ([1] Existing programs should be reusable with no changes. 
>  This is often possible bec. communication is over stdin/stdout.)
> Job's jar file as a special case:
> --------------------------------
> One use case is to allow users to make the job jar itself cachable.
> This is only useful in cases where NOTHING changes when a job is resubmitted
>  (no MapRed code changes and no changes in shipped data)
> This situation might occur with an 'extractor' job (gets data from an external source: like Nutch crawler)
> Currently the Hadoop mapred-jar mechanism works in this way:
>  the job jar data is unjarred in the "working directory" of the Task 
>  the jar contains both MapRed java code (added to classpath)
> Cache synchronization:
> ---------------------
> The efficient implementation of the out-of-band data distribution
> is mostly a cache synchronization problem.
> A list of the various aspects where choices must be made follows.
> Cache key:
> ---------
> How do you test that the cached copy is out-of-date?
> Options: 
> 1. the archive/file timestamp 
> 2. the MD5 of the archive/file content
> Comparing source and destination Timestamps is problematic bec. it assumes synchronized clocks.
> Also there is no last-modif metadata in HDFS (for good reasons, like scalability of metadata ops)
> Timestamps stored with the source ('last-propagate-time') do 
>  not require synchronized clocks, only locally monotonic time. 
> (and the worse which can happen at daylight-savings switch is a missed update or an extra-update)
> The cache code could store a copy of the local timestamp 
> in the same way that it caches the value of the content hash along with the source data.
>  
> Cachable unit:
> -------------
> Options: individual files or archives or both.
> Note:
> At the API level, directories will be processed recursively 
> (and the local FS directories will parallel HDFS directories)
> So bulk operations are always possible using directories.
> The question here is whether to handle archives as an additional bulk mechanism.
> Archives are special because:
> o unarchiving occurs transparently as part of the cache sync
> o The cache key is computed on the archive and preserved although 
>   the archive itself is not preserved.
> Supported archive format will be: tar (maybe tgz or compressed jar)
> Archive detection test: by filename extension ".tar" or ".jar"
> Suppose we don't handle archives as special files:
> Pros:
>  o less code, no discussion about which archive formats are supported
>  o fine for large dictionary files. And when files are not large, user may as well
>    put them in the Job jar as usual.
>  o user code could always check and unarchive specific cached files
>    (as a side-effect of MapRed task initialization)
> Cons:
>  o handling small files may be inefficient 
>   (multiple HDFS operations, multiple hash computation, 
>    one 'metadata' hash file along with each small file)
>  o It will not be possible to handle the Job's jar file as a special case of caching 
> Cache isolation: 
> ---------------
> In some cases it may be a problem if the cached HDFS files are updated while a Job is in progress:
> The file may become unavailable for a short period of time and some tasks fail.
> The file may change (atomically) and different tasks use a different version.
> This isolation problem is not addressed in this proposal.
> Standard solutions to the isolation problem are:
> o Assume that Jobs and interfering cache updates won't occur concurrently.
> o Put a version number in the HDFS file paths and refer to a hard-coded version in the Job code.
> o Before running the MapRed job, run a non-distributed application that tests
>   what is the latest available version of the out-of-band data. 
>   Then make this version available to the MapRed job.
>   Two ways to do this. 
>   o either set a job property just-in-time:
>     addCachePathPair("/mydata/v1234/", "localcache/mydata_latest"); 
>     (see Job Configuration for meaning of this)
>   o or publish the decision as an HDFS file containing the version.
>     then rely on user code to read the version, and manually populate the cache:
>     Cache.syncCache("/hdfs/path/fileordir", "relative/local/fileordir");
>     (see MapReduce API for meaning of this)
> Cache synchronization stages:
> ----------------------------
> There are two stages: Client-to-HDFS and HDFS-to-TaskTracker
> o Client-to-HDFS stage.
> Options: A simple option is to not do anything here, i.e. rely on the user.
> This is a reasonable option given previous remarks on the role of HDFS:
>  HDFS is a staging/publishing area and a natural shared location.
> In particular this means that the system need not track 
> where the client files come from.
> o HDFS-to-TaskTracker:
> Client-to-HDFS synchronization (if done at all) should happen before this.
> Then HDFS-to-TaskTracker synchronization must happen right before 
> the data is needed on a node.
> MapReduce cache API:
> -------------------
> Options:
> 1. No change in MapReduce framework code:
> require the user to put this logic in map() (or reduce) function:
>  in MyMapper constructor (or in map() on first record) user is asked to add:
>  
>     Cache.syncCache("/hdfs/path/fileordir", "relative/local/fileordir");
>     Cache.syncCache("..."); //etc.
>   
> -----
> 2. Put this logic in MapReduce framework and use Job properties to
>    communicate the list of pairs (hdfs path; local path)
>  
> Directories are processed recursively.
> If archives are treated specially then they are unarchived on destination.
>  
> MapReduce Job Configuration:
> ---------------------------
> Options:
> with No change in MapReduce framework code (see above)
>  no special Job configuration: 
>    it is up to the MapRed writer to configure and run the cache operations.
> ---
> with Logic in MapReduce framework (see above)
>  some simple Job configuration
> JobConf.addCachePathPair(String, String)
> JobConf.addCachePathPair("/hdfs/path/fileordir", "relative/local/fileordir");

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 13 21:50:06 2006
Return-Path: 
 <hadoop-dev-return-3721-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 55140 invoked from network); 13 Sep 2006 21:50:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Sep 2006 21:50:06 -0000
Received: (qmail 56840 invoked by uid 500); 13 Sep 2006 21:50:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 56822 invoked by uid 500); 13 Sep 2006 21:50:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 56813 invoked by uid 99); 13 Sep 2006 21:50:05 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Sep 2006 14:50:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:51722] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id CB/12-00682-FBC78054 for <hadoop-dev@lucene.apache.org>;
 Wed, 13 Sep 2006 14:48:47 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 582AA714328
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Sep 2006 21:45:22 +0000 (GMT)
Message-ID: <23568129.1158183922358.JavaMail.jira@brutus>
Date: Wed, 13 Sep 2006 14:45:22 -0700 (PDT)
From: "Richard Kasperski (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-531) Need to sort on more than the primary
 key
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Need to sort on more than the primary key
-----------------------------------------

                 Key: HADOOP-531
                 URL: http://issues.apache.org/jira/browse/HADOOP-531
             Project: Hadoop
          Issue Type: Improvement
          Components: contrib/streaming
    Affects Versions: 0.5.0
            Reporter: Richard Kasperski


There are many tasks where I need to have finer control over the ordering in the reduce than a sort on a single key provides. Most of these situations arise when a merge two sources of data and am attaching a single instance of one source to multiple instances of a second source. I know that I can read all the the records with a single key. It's possible that there might be many millions of these making memory demands that cannot be satisfied.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 13 21:58:11 2006
Return-Path: 
 <hadoop-dev-return-3722-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57299 invoked from network); 13 Sep 2006 21:58:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Sep 2006 21:58:11 -0000
Received: (qmail 73176 invoked by uid 500); 13 Sep 2006 21:58:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72993 invoked by uid 500); 13 Sep 2006 21:58:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72959 invoked by uid 99); 13 Sep 2006 21:58:09 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Sep 2006 14:58:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:53795] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 0D/42-00682-1AE78054 for <hadoop-dev@lucene.apache.org>;
 Wed, 13 Sep 2006 14:58:04 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7B2BA41002A
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Sep 2006 21:53:24 +0000 (GMT)
Message-ID: <4071537.1158184404501.JavaMail.jira@brutus>
Date: Wed, 13 Sep 2006 14:53:24 -0700 (PDT)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-459) libhdfs leaks memory when writing to
 files
In-Reply-To: <12771302.1155876793902.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-459?page=all ]

Wendy Chien reassigned HADOOP-459:
----------------------------------

    Assignee: Wendy Chien  (was: Milind Bhandarkar)

> libhdfs leaks memory when writing to files
> ------------------------------------------
>
>                 Key: HADOOP-459
>                 URL: http://issues.apache.org/jira/browse/HADOOP-459
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Christian Kunz
>         Assigned To: Wendy Chien
>
> hdfsWrite leaks memory when called repeatedly. The same probably applies to repeated reads using hdfsRead

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 13 21:58:52 2006
Return-Path: 
 <hadoop-dev-return-3723-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57347 invoked from network); 13 Sep 2006 21:58:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Sep 2006 21:58:52 -0000
Received: (qmail 73646 invoked by uid 500); 13 Sep 2006 21:58:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 73457 invoked by uid 500); 13 Sep 2006 21:58:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 73448 invoked by uid 99); 13 Sep 2006 21:58:52 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Sep 2006 14:58:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:41476] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 66/52-00682-81F78054 for <hadoop-dev@lucene.apache.org>;
 Wed, 13 Sep 2006 14:58:48 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5DD9E410029
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Sep 2006 21:55:23 +0000 (GMT)
Message-ID: <14125706.1158184523381.JavaMail.jira@brutus>
Date: Wed, 13 Sep 2006 14:55:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-531) Need to sort on more than the
 primary key
In-Reply-To: <23568129.1158183922358.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-531?page=comments#action_12434552 ] 
            
Doug Cutting commented on HADOOP-531:
-------------------------------------

The two ideas that have been discussed related to this are:

1. Making reduce value iterators cloneable.
2. Permitting one to specify a different comparator for sorting than for dividing keys when reducing.

Are there issues in Jira for either of these yet?


> Need to sort on more than the primary key
> -----------------------------------------
>
>                 Key: HADOOP-531
>                 URL: http://issues.apache.org/jira/browse/HADOOP-531
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: contrib/streaming
>    Affects Versions: 0.5.0
>            Reporter: Richard Kasperski
>
> There are many tasks where I need to have finer control over the ordering in the reduce than a sort on a single key provides. Most of these situations arise when a merge two sources of data and am attaching a single instance of one source to multiple instances of a second source. I know that I can read all the the records with a single key. It's possible that there might be many millions of these making memory demands that cannot be satisfied.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 13 23:26:22 2006
Return-Path: 
 <hadoop-dev-return-3724-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 83799 invoked from network); 13 Sep 2006 23:26:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Sep 2006 23:26:22 -0000
Received: (qmail 10014 invoked by uid 500); 13 Sep 2006 23:26:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9983 invoked by uid 500); 13 Sep 2006 23:26:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9974 invoked by uid 99); 13 Sep 2006 23:26:21 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Sep 2006 16:26:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:40917] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 51/04-00682-40398054 for <hadoop-dev@lucene.apache.org>;
 Wed, 13 Sep 2006 16:25:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5DA9471433F
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Sep 2006 23:20:23 +0000 (GMT)
Message-ID: <14355799.1158189623381.JavaMail.jira@brutus>
Date: Wed, 13 Sep 2006 16:20:23 -0700 (PDT)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-531) Need to sort on more than the
 primary key
In-Reply-To: <23568129.1158183922358.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-531?page=comments#action_12434566 ] 
            
Runping Qi commented on HADOOP-531:
-----------------------------------

Hadoop-475 is for making reduce value iterators cloneable.

Hadoop-531 is for sorting on multiple keys



> Need to sort on more than the primary key
> -----------------------------------------
>
>                 Key: HADOOP-531
>                 URL: http://issues.apache.org/jira/browse/HADOOP-531
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: contrib/streaming
>    Affects Versions: 0.5.0
>            Reporter: Richard Kasperski
>
> There are many tasks where I need to have finer control over the ordering in the reduce than a sort on a single key provides. Most of these situations arise when a merge two sources of data and am attaching a single instance of one source to multiple instances of a second source. I know that I can read all the the records with a single key. It's possible that there might be many millions of these making memory demands that cannot be satisfied.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 14 02:13:23 2006
Return-Path: 
 <hadoop-dev-return-3725-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33879 invoked from network); 14 Sep 2006 02:13:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Sep 2006 02:13:23 -0000
Received: (qmail 67018 invoked by uid 500); 14 Sep 2006 02:13:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66948 invoked by uid 500); 14 Sep 2006 02:13:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66939 invoked by uid 99); 14 Sep 2006 02:13:22 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Sep 2006 19:13:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:39749] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 12/30-02036-92AB8054 for <hadoop-dev@lucene.apache.org>;
 Wed, 13 Sep 2006 19:12:04 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4BE6641002A
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Sep 2006 02:07:23 +0000 (GMT)
Message-ID: <5150141.1158199643308.JavaMail.jira@brutus>
Date: Wed, 13 Sep 2006 19:07:23 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-531) Need to sort on more than the
 primary key
In-Reply-To: <23568129.1158183922358.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-531?page=comments#action_12434576 ] 
            
Owen O'Malley commented on HADOOP-531:
--------------------------------------

I think you meant HADOOP-485, which is about having a different comparator for determining equality in grouping for the reduce input. 

> Need to sort on more than the primary key
> -----------------------------------------
>
>                 Key: HADOOP-531
>                 URL: http://issues.apache.org/jira/browse/HADOOP-531
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: contrib/streaming
>    Affects Versions: 0.5.0
>            Reporter: Richard Kasperski
>
> There are many tasks where I need to have finer control over the ordering in the reduce than a sort on a single key provides. Most of these situations arise when a merge two sources of data and am attaching a single instance of one source to multiple instances of a second source. I know that I can read all the the records with a single key. It's possible that there might be many millions of these making memory demands that cannot be satisfied.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 14 04:16:10 2006
Return-Path: 
 <hadoop-dev-return-3726-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50201 invoked from network); 14 Sep 2006 04:16:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Sep 2006 04:16:10 -0000
Received: (qmail 55956 invoked by uid 500); 14 Sep 2006 04:16:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55931 invoked by uid 500); 14 Sep 2006 04:16:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55922 invoked by uid 99); 14 Sep 2006 04:16:08 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Sep 2006 21:16:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:50557] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id D6/E2-02080-937D8054 for <hadoop-dev@lucene.apache.org>;
 Wed, 13 Sep 2006 21:16:04 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4C8A9410034
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Sep 2006 04:11:23 +0000 (GMT)
Message-ID: <8889848.1158207083310.JavaMail.jira@brutus>
Date: Wed, 13 Sep 2006 21:11:23 -0700 (PDT)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-531) Need to sort on more than the
 primary key
In-Reply-To: <23568129.1158183922358.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-531?page=comments#action_12434587 ] 
            
Runping Qi commented on HADOOP-531:
-----------------------------------

>Owen O'Malley [13/Sep/06 07:07 PM] I think you meant HADOOP-485, which is about having a different comparator for determining equality in grouping for the reduce input. 

Yep. 

> Need to sort on more than the primary key
> -----------------------------------------
>
>                 Key: HADOOP-531
>                 URL: http://issues.apache.org/jira/browse/HADOOP-531
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: contrib/streaming
>    Affects Versions: 0.5.0
>            Reporter: Richard Kasperski
>
> There are many tasks where I need to have finer control over the ordering in the reduce than a sort on a single key provides. Most of these situations arise when a merge two sources of data and am attaching a single instance of one source to multiple instances of a second source. I know that I can read all the the records with a single key. It's possible that there might be many millions of these making memory demands that cannot be satisfied.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 14 16:43:33 2006
Return-Path: 
 <hadoop-dev-return-3727-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23273 invoked from network); 14 Sep 2006 16:43:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Sep 2006 16:43:33 -0000
Received: (qmail 59790 invoked by uid 500); 14 Sep 2006 16:43:19 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 59681 invoked by uid 500); 14 Sep 2006 16:43:19 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 59567 invoked by uid 99); 14 Sep 2006 16:43:17 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Sep 2006 09:43:16 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5F50541003D
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Sep 2006 16:39:22 +0000 (GMT)
Message-ID: <32319787.1158251962387.JavaMail.jira@brutus>
Date: Thu, 14 Sep 2006 09:39:22 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-532) Writable underrun in sort example
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Writable underrun in sort example
---------------------------------

                 Key: HADOOP-532
                 URL: http://issues.apache.org/jira/browse/HADOOP-532
             Project: Hadoop
          Issue Type: Bug
          Components: io
    Affects Versions: 0.6.1
            Reporter: Owen O'Malley
         Assigned To: Owen O'Malley
             Fix For: 0.6.1


When running the sort benchmark, I get consistent failures of this sort:

java.lang.RuntimeException: java.io.IOException: org.apache.hadoop.io.BytesWritable@43d748ad read 2048 bytes, should read 2052 at org.apache.hadoop.mapred.ReduceTask$ValuesIterator.next(ReduceTask.java:150) at org.apache.hadoop.mapred.lib.IdentityReducer.reduce(IdentityReducer.java:39) at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:271) at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1066) Caused by: java.io.IOException: org.apache.hadoop.io.BytesWritable@43d748ad read 2048 bytes, should read 2052 at org.apache.hadoop.io.SequenceFile$Reader.getCurrentValue(SequenceFile.java:1163) at org.apache.hadoop.io.SequenceFile$Reader.next(SequenceFile.java:1239) at org.apache.hadoop.mapred.ReduceTask$ValuesIterator.getNext(ReduceTask.java:181) at org.apache.hadoop.mapred.ReduceTask$ValuesIterator.next(ReduceTask.java:147) ... 3 more

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 14 16:49:17 2006
Return-Path: 
 <hadoop-dev-return-3728-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 26535 invoked from network); 14 Sep 2006 16:49:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Sep 2006 16:49:17 -0000
Received: (qmail 76746 invoked by uid 500); 14 Sep 2006 16:49:16 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 76726 invoked by uid 500); 14 Sep 2006 16:49:16 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 76717 invoked by uid 99); 14 Sep 2006 16:49:16 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Sep 2006 09:49:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:55204] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 73/40-06374-2F789054 for <hadoop-dev@lucene.apache.org>;
 Thu, 14 Sep 2006 09:48:50 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4D822714347
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Sep 2006 16:45:23 +0000 (GMT)
Message-ID: <30101697.1158252323314.JavaMail.jira@brutus>
Date: Thu, 14 Sep 2006 09:45:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-532) Writable underrun in sort example
In-Reply-To: <32319787.1158251962387.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-532?page=all ]

Doug Cutting updated HADOOP-532:
--------------------------------

    Fix Version/s: 0.6.2
                       (was: 0.6.1)

> Writable underrun in sort example
> ---------------------------------
>
>                 Key: HADOOP-532
>                 URL: http://issues.apache.org/jira/browse/HADOOP-532
>             Project: Hadoop
>          Issue Type: Bug
>          Components: io
>    Affects Versions: 0.6.1
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.6.2
>
>
> When running the sort benchmark, I get consistent failures of this sort:
> java.lang.RuntimeException: java.io.IOException: org.apache.hadoop.io.BytesWritable@43d748ad read 2048 bytes, should read 2052 at org.apache.hadoop.mapred.ReduceTask$ValuesIterator.next(ReduceTask.java:150) at org.apache.hadoop.mapred.lib.IdentityReducer.reduce(IdentityReducer.java:39) at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:271) at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1066) Caused by: java.io.IOException: org.apache.hadoop.io.BytesWritable@43d748ad read 2048 bytes, should read 2052 at org.apache.hadoop.io.SequenceFile$Reader.getCurrentValue(SequenceFile.java:1163) at org.apache.hadoop.io.SequenceFile$Reader.next(SequenceFile.java:1239) at org.apache.hadoop.mapred.ReduceTask$ValuesIterator.getNext(ReduceTask.java:181) at org.apache.hadoop.mapred.ReduceTask$ValuesIterator.next(ReduceTask.java:147) ... 3 more

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 14 17:07:28 2006
Return-Path: 
 <hadoop-dev-return-3729-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33377 invoked from network); 14 Sep 2006 17:07:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Sep 2006 17:07:28 -0000
Received: (qmail 16485 invoked by uid 500); 14 Sep 2006 17:07:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 16463 invoked by uid 500); 14 Sep 2006 17:07:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 16274 invoked by uid 99); 14 Sep 2006 17:07:23 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Sep 2006 10:07:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:53654] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id FA/00-06457-1BB89054 for <hadoop-dev@lucene.apache.org>;
 Thu, 14 Sep 2006 10:06:04 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 66532714347
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Sep 2006 17:01:22 +0000 (GMT)
Message-ID: <16243591.1158253282416.JavaMail.jira@brutus>
Date: Thu, 14 Sep 2006 10:01:22 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-533) TestDFSShellGenericOptions creates a
 sub-directory in conf/
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

TestDFSShellGenericOptions creates a sub-directory in conf/
-----------------------------------------------------------

                 Key: HADOOP-533
                 URL: http://issues.apache.org/jira/browse/HADOOP-533
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
    Affects Versions: 0.6.1, 0.6.0, 0.5.0
            Reporter: Doug Cutting
            Priority: Minor


TestDFSShellGenericOptions creates a subdirectory of conf/.  This is not removed.

Generally, the build & test process should not create or modify files outside of the build/ directory.  So the best fix would be to create this directory somewhere under build/, perhaps build/test.  Then it will be naturally removed by 'ant clean', will not show up in 'svn stat', etc.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 14 17:52:55 2006
Return-Path: 
 <hadoop-dev-return-3730-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46350 invoked from network); 14 Sep 2006 17:52:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Sep 2006 17:52:55 -0000
Received: (qmail 7709 invoked by uid 500); 14 Sep 2006 17:52:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 7692 invoked by uid 500); 14 Sep 2006 17:52:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 7683 invoked by uid 99); 14 Sep 2006 17:52:54 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Sep 2006 10:52:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:52559] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id A6/20-06669-2F699054 for <hadoop-dev@lucene.apache.org>;
 Thu, 14 Sep 2006 10:52:50 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D7CB2714347
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Sep 2006 17:49:23 +0000 (GMT)
Message-ID: <22880299.1158256163880.JavaMail.jira@brutus>
Date: Thu, 14 Sep 2006 10:49:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-533) TestDFSShellGenericOptions creates a
 sub-directory in conf/
In-Reply-To: <16243591.1158253282416.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-533?page=all ]

Doug Cutting updated HADOOP-533:
--------------------------------

    Assignee: Hairong Kuang

> TestDFSShellGenericOptions creates a sub-directory in conf/
> -----------------------------------------------------------
>
>                 Key: HADOOP-533
>                 URL: http://issues.apache.org/jira/browse/HADOOP-533
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0, 0.6.0, 0.6.1
>            Reporter: Doug Cutting
>         Assigned To: Hairong Kuang
>            Priority: Minor
>
> TestDFSShellGenericOptions creates a subdirectory of conf/.  This is not removed.
> Generally, the build & test process should not create or modify files outside of the build/ directory.  So the best fix would be to create this directory somewhere under build/, perhaps build/test.  Then it will be naturally removed by 'ant clean', will not show up in 'svn stat', etc.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 14 19:02:23 2006
Return-Path: 
 <hadoop-dev-return-3731-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 66312 invoked from network); 14 Sep 2006 19:02:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Sep 2006 19:02:23 -0000
Received: (qmail 60526 invoked by uid 500); 14 Sep 2006 19:02:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 60504 invoked by uid 500); 14 Sep 2006 19:02:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 60495 invoked by uid 99); 14 Sep 2006 19:02:22 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Sep 2006 12:02:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:60843] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 3B/B0-06827-5A6A9054 for <hadoop-dev@lucene.apache.org>;
 Thu, 14 Sep 2006 12:01:04 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 04B6571434D
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Sep 2006 18:56:23 +0000 (GMT)
Message-ID: <17229556.1158260183016.JavaMail.jira@brutus>
Date: Thu, 14 Sep 2006 11:56:23 -0700 (PDT)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-534) Jobconf should set the default output
 value class to be Text
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Jobconf should set the default output value class to be Text
------------------------------------------------------------

                 Key: HADOOP-534
                 URL: http://issues.apache.org/jira/browse/HADOOP-534
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.6.1
            Reporter: Hairong Kuang
         Assigned To: Hairong Kuang
             Fix For: 0.6.2


When input files are in the text format, the input value class is set to be Text. But the output value class is by default set to be UTF8. This causes the Grep example to fail.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 14 19:03:09 2006
Return-Path: 
 <hadoop-dev-return-3732-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 66639 invoked from network); 14 Sep 2006 19:03:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Sep 2006 19:03:09 -0000
Received: (qmail 62121 invoked by uid 500); 14 Sep 2006 19:03:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62098 invoked by uid 500); 14 Sep 2006 19:03:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62087 invoked by uid 99); 14 Sep 2006 19:03:08 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Sep 2006 12:03:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:34182] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 6C/C0-06827-E17A9054 for <hadoop-dev@lucene.apache.org>;
 Thu, 14 Sep 2006 12:01:50 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6C68171434F
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Sep 2006 18:58:23 +0000 (GMT)
Message-ID: <7880942.1158260303441.JavaMail.jira@brutus>
Date: Thu, 14 Sep 2006 11:58:23 -0700 (PDT)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-534) Jobconf should set the default output
 value class to be Text
In-Reply-To: <17229556.1158260183016.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-534?page=all ]

Hairong Kuang updated HADOOP-534:
---------------------------------

    Attachment: seq_class_name.patch

Here is the patch.

> Jobconf should set the default output value class to be Text
> ------------------------------------------------------------
>
>                 Key: HADOOP-534
>                 URL: http://issues.apache.org/jira/browse/HADOOP-534
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.6.1
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.6.2
>
>         Attachments: seq_class_name.patch
>
>
> When input files are in the text format, the input value class is set to be Text. But the output value class is by default set to be UTF8. This causes the Grep example to fail.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 14 19:11:54 2006
Return-Path: 
 <hadoop-dev-return-3733-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 69697 invoked from network); 14 Sep 2006 19:11:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Sep 2006 19:11:54 -0000
Received: (qmail 77612 invoked by uid 500); 14 Sep 2006 19:11:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 77426 invoked by uid 500); 14 Sep 2006 19:11:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 77417 invoked by uid 99); 14 Sep 2006 19:11:53 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Sep 2006 12:11:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:57412] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 54/10-07023-679A9054 for <hadoop-dev@lucene.apache.org>;
 Thu, 14 Sep 2006 12:11:50 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5342D71434D
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Sep 2006 19:08:23 +0000 (GMT)
Message-ID: <28528213.1158260903338.JavaMail.jira@brutus>
Date: Thu, 14 Sep 2006 12:08:23 -0700 (PDT)
From: "Bryan Pendleton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-532) Writable underrun in sort example
In-Reply-To: <32319787.1158251962387.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-532?page=comments#action_12434776 ] 
            
Bryan Pendleton commented on HADOOP-532:
----------------------------------------

I had trouble reading old compressed SequenceFiles using the new block-compressing code, with similar kinds of problems. I haven't been able to characterize why, yet, so I don't have anything useful to add to this bug except "I've seen this general sort of thing, too!". In my case, it's with a class that's similar to BytesWritable.

> Writable underrun in sort example
> ---------------------------------
>
>                 Key: HADOOP-532
>                 URL: http://issues.apache.org/jira/browse/HADOOP-532
>             Project: Hadoop
>          Issue Type: Bug
>          Components: io
>    Affects Versions: 0.6.1
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.6.2
>
>
> When running the sort benchmark, I get consistent failures of this sort:
> java.lang.RuntimeException: java.io.IOException: org.apache.hadoop.io.BytesWritable@43d748ad read 2048 bytes, should read 2052 at org.apache.hadoop.mapred.ReduceTask$ValuesIterator.next(ReduceTask.java:150) at org.apache.hadoop.mapred.lib.IdentityReducer.reduce(IdentityReducer.java:39) at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:271) at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1066) Caused by: java.io.IOException: org.apache.hadoop.io.BytesWritable@43d748ad read 2048 bytes, should read 2052 at org.apache.hadoop.io.SequenceFile$Reader.getCurrentValue(SequenceFile.java:1163) at org.apache.hadoop.io.SequenceFile$Reader.next(SequenceFile.java:1239) at org.apache.hadoop.mapred.ReduceTask$ValuesIterator.getNext(ReduceTask.java:181) at org.apache.hadoop.mapred.ReduceTask$ValuesIterator.next(ReduceTask.java:147) ... 3 more

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 14 19:45:55 2006
Return-Path: 
 <hadoop-dev-return-3734-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 87651 invoked from network); 14 Sep 2006 19:45:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Sep 2006 19:45:55 -0000
Received: (qmail 45711 invoked by uid 500); 14 Sep 2006 19:45:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 45686 invoked by uid 500); 14 Sep 2006 19:45:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 45677 invoked by uid 99); 14 Sep 2006 19:45:54 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Sep 2006 12:45:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:34565] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id EB/20-07158-E61B9054 for <hadoop-dev@lucene.apache.org>;
 Thu, 14 Sep 2006 12:45:50 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5584E714346
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Sep 2006 19:42:23 +0000 (GMT)
Message-ID: <7191645.1158262943347.JavaMail.jira@brutus>
Date: Thu, 14 Sep 2006 12:42:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-518) hadoop dfs -cp foo/bar/bad-file
 mumble/new-file copies a file with a bad checksum
In-Reply-To: <20524097.1157747422363.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-518?page=comments#action_12434785 ] 
            
Doug Cutting commented on HADOOP-518:
-------------------------------------

Could this be related to HADOOP-320?  In other words, is the bug perhaps that 'dfs -cp' didn't copy the checksum file?

> hadoop dfs -cp foo/bar/bad-file mumble/new-file copies a file with a bad checksum
> ---------------------------------------------------------------------------------
>
>                 Key: HADOOP-518
>                 URL: http://issues.apache.org/jira/browse/HADOOP-518
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>         Environment: red hat
>            Reporter: Dick King
>
> I have a file that reliably generates a checksum error when it's read, whether by a map/reduce job as input or by a "dfs -get" command.
> However...
> if I do a "dfs -cp" from the file with the bad checksum the copy can be read in its entirety without a checksum error.
> I would consider it reasonable for the command to fail, or for the new file to be created but to also have a checksum error in the same place, but this behavior is unsettling.
> -dk

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 14 20:01:58 2006
Return-Path: 
 <hadoop-dev-return-3735-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92927 invoked from network); 14 Sep 2006 20:01:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Sep 2006 20:01:58 -0000
Received: (qmail 87627 invoked by uid 500); 14 Sep 2006 20:01:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 87607 invoked by uid 500); 14 Sep 2006 20:01:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 87598 invoked by uid 99); 14 Sep 2006 20:01:57 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Sep 2006 13:01:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:51812] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 9B/20-07229-135B9054 for <hadoop-dev@lucene.apache.org>;
 Thu, 14 Sep 2006 13:01:53 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id ABAF071434F
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Sep 2006 19:58:26 +0000 (GMT)
Message-ID: <24962931.1158263906700.JavaMail.jira@brutus>
Date: Thu, 14 Sep 2006 12:58:26 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-243) WI shows progress as 100.00% before
 actual completion (rounding error)
In-Reply-To: <32908038.1148411909849.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-243?page=all ]

Doug Cutting updated HADOOP-243:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Owen!

> WI shows progress as 100.00% before actual completion (rounding error)
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-243
>                 URL: http://issues.apache.org/jira/browse/HADOOP-243
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.5.0, 0.6.0
>            Reporter: Yoram Arnon
>         Assigned To: Owen O'Malley
>            Priority: Trivial
>             Fix For: 0.7.0
>
>         Attachments: percent-complete.patch
>
>
> For jobs of over 50000 tasks, the rounding error in the WI is confusing.
> When less than 0.005% of the map (or reduce) tasks remain to execute, the WI shows progress as 100.00%, which is misleading.
> Rounding down to the nearest .01% would be better.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 14 20:17:00 2006
Return-Path: 
 <hadoop-dev-return-3736-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 97263 invoked from network); 14 Sep 2006 20:17:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Sep 2006 20:17:00 -0000
Received: (qmail 17953 invoked by uid 500); 14 Sep 2006 20:16:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17864 invoked by uid 500); 14 Sep 2006 20:16:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17695 invoked by uid 99); 14 Sep 2006 20:16:58 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Sep 2006 13:16:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:57195] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id D0/30-07289-6B8B9054 for <hadoop-dev@lucene.apache.org>;
 Thu, 14 Sep 2006 13:16:54 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7923571434C
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Sep 2006 20:13:27 +0000 (GMT)
Message-ID: <27533418.1158264807493.JavaMail.jira@brutus>
Date: Thu, 14 Sep 2006 13:13:27 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-438) DFS pathname limitation.
In-Reply-To: <28546816.1155172213960.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-438?page=all ]

Doug Cutting updated HADOOP-438:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.7.0
       Resolution: Fixed

I just committed this.  Thanks, Wendy!

> DFS pathname limitation.
> ------------------------
>
>                 Key: HADOOP-438
>                 URL: http://issues.apache.org/jira/browse/HADOOP-438
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0, 0.4.0, 0.3.2, 0.3.1, 0.3.0, 0.2.1, 0.2.0, 0.1.1, 0.1.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Wendy Chien
>             Fix For: 0.7.0
>
>         Attachments: pathlength.patch
>
>
> I was trying to create a deep hierarchy of directories using DFS mkdirs().
> When the path to the leaf directory became long (~20000) DFS was still able to create
> directories with these names, but UTF8 started truncating long strings resulting in
> incorrect logging of namespace edits. That later crashed the namenode during restart,
> when it was trying to reproduce file creation logged in the edits file with truncated names.
> UTF8 is deprecated now so we will have to replace it with Text.
> With UTF8  we should enforce a pathname limit of 0xffff/3 = 21845
> With Text it is going to be larger. Not sure what the exact number is.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 14 20:48:13 2006
Return-Path: 
 <hadoop-dev-return-3737-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8639 invoked from network); 14 Sep 2006 20:48:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Sep 2006 20:48:13 -0000
Received: (qmail 91668 invoked by uid 500); 14 Sep 2006 20:48:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 91624 invoked by uid 500); 14 Sep 2006 20:48:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 91572 invoked by uid 99); 14 Sep 2006 20:48:09 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Sep 2006 13:48:09 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A35C171434D
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Sep 2006 20:44:24 +0000 (GMT)
Message-ID: <2524641.1158266664666.JavaMail.jira@brutus>
Date: Thu, 14 Sep 2006 13:44:24 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-527) Allow to specify the bind address
 for all hadoop servers
In-Reply-To: <19022892.1158135804043.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-527?page=comments#action_12434801 ] 
            
Doug Cutting commented on HADOOP-527:
-------------------------------------

Overall this looks good.

The changes to Server.java and RPC.java should be back-compatible.  Instead of altering the signatures of existing public methods, please add new methods with the new signatures, then change the old methods to call the new methods with a default value for the new parameter.  The old methods can then be deprecated.  We try to avoid incompatible changes to public APIs.

Also, the new config file parameters should be added to hadoop-default.xml.

Thanks!

> Allow to specify the bind address for all hadoop servers
> --------------------------------------------------------
>
>                 Key: HADOOP-527
>                 URL: http://issues.apache.org/jira/browse/HADOOP-527
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.1.0, 0.2.0, 0.1.1, 0.3.0, 0.4.0, 0.2.1, 0.5.0, 0.3.1, 0.3.2, 0.6.0, 0.7.0, 0.6.1
>            Reporter: Philippe Gassmann
>         Attachments: patch-bind-on-custom-addr
>
>
> Hadoop servers sockets are always binded on 0.0.0.0 ; this patch allow to specify a bind address.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 14 20:52:10 2006
Return-Path: 
 <hadoop-dev-return-3738-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9384 invoked from network); 14 Sep 2006 20:52:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Sep 2006 20:52:10 -0000
Received: (qmail 97260 invoked by uid 500); 14 Sep 2006 20:52:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97227 invoked by uid 500); 14 Sep 2006 20:52:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97208 invoked by uid 99); 14 Sep 2006 20:52:09 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Sep 2006 13:52:09 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 72B6F71434D
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Sep 2006 20:48:24 +0000 (GMT)
Message-ID: <10970067.1158266904467.JavaMail.jira@brutus>
Date: Thu, 14 Sep 2006 13:48:24 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-516) Eclipse-based GUI: DFS explorer and
 basic Map/Reduce job launcher
In-Reply-To: <13131373.1157736022384.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-516?page=3Dcomments#actio=
n_12434803 ]=20
           =20
Doug Cutting commented on HADOOP-516:
-------------------------------------

I don't use Eclipse, so I cannot evalute this.  If others try this and find=
 it useful, please add comments to this bug, vote on it, or both.  I can co=
mmit it to contrib if a few folks find it useful and none say it is horribl=
y broken.

> Eclipse-based GUI: DFS explorer and basic Map/Reduce job launcher
> -----------------------------------------------------------------
>
>                 Key: HADOOP-516
>                 URL: http://issues.apache.org/jira/browse/HADOOP-516
>             Project: Hadoop
>          Issue Type: New Feature
>         Environment: Eclipse 3.2
> JDK 1.5
>            Reporter: Fr=C3=A9d=C3=A9ric Bertin
>         Attachments: hdfsExplorer.zip, hdfsExplorer2.zip
>
>
> to increase productivity in our current project (which makes a heavy use =
of Hadoop), we wrote a small Eclipse-based GUI application which basically =
consists in 2 views:
>    *  a HDFS explorer adapted from Eclipse filesystem explorer example.
>      For now, it includes the following features:
>          o classical tree-based browsing interface, with directory
>            content being detailed in a 3 columns table (file name, file
>            size, file type)
>          o refresh button
>          o delete file or directory (with confirm dialog): select files
>            in the tree or table and click the "Delete" button
>          o rename file or directory: simple click on the file in the
>            table, type the new name and validate
>          o open file with system editor: select the file in the table
>            and click "Open" button (works on Windows, not on Linux)
>          o internal drag & drop
>          o external drag & drop from the local filesystem to the HDFS
>            (the opposite doesn't work)
>    * a MapReduce *very* simple job launcher:
>          o select the job XML configuration file
>          o run the job
>          o kill the job
>          o visualize map and reduce progress with progress bars
>          o open a browser on the Hadoop job tracker web interface=20
> INSTALLATION NOTES:
>  - Eclipse 3.2
>  - JDK 1.5
>  - import the archive in Eclipse
>  - copy your hadoop conf file (hadoop-default.xml in "src" folder) -> thi=
s step should be moved in the GUI later
>  - right-click on the project and Run As -> Eclipse Application
>  - enjoy...

--=20
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: htt=
p://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

       

From MAILER-DAEMON Thu Sep 14 20:56:12 2006
Return-Path: 
 <hadoop-dev-return-3739-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10361 invoked from network); 14 Sep 2006 20:56:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Sep 2006 20:56:12 -0000
Received: (qmail 5935 invoked by uid 500); 14 Sep 2006 20:56:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 5906 invoked by uid 500); 14 Sep 2006 20:56:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 5874 invoked by uid 99); 14 Sep 2006 20:56:10 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Sep 2006 13:56:10 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9A07571434D
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Sep 2006 20:52:25 +0000 (GMT)
Message-ID: <33437741.1158267145628.JavaMail.jira@brutus>
Date: Thu, 14 Sep 2006 13:52:25 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-530) Error message does not expose
 mismached key or value class name correctly in Sequence file
In-Reply-To: <2025997.1158181282385.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-530?page=all ]

Doug Cutting resolved HADOOP-530.
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Hairong!

> Error message does not expose mismached key or value class name correctly in Sequence file
> ------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-530
>                 URL: http://issues.apache.org/jira/browse/HADOOP-530
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.6.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.7.0
>
>         Attachments: seq_class_name.patch
>
>
> When a passed-in key or value is not of the expected class, the value of the key or value rather than its class name is printed to an error message.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 14 21:06:56 2006
Return-Path: 
 <hadoop-dev-return-3740-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12417 invoked from network); 14 Sep 2006 21:06:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Sep 2006 21:06:56 -0000
Received: (qmail 26554 invoked by uid 500); 14 Sep 2006 21:06:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26536 invoked by uid 500); 14 Sep 2006 21:06:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26527 invoked by uid 99); 14 Sep 2006 21:06:55 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Sep 2006 14:06:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:37313] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id D1/10-07567-2F3C9054 for <hadoop-dev@lucene.apache.org>;
 Thu, 14 Sep 2006 14:06:05 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5B19971434F
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Sep 2006 21:01:23 +0000 (GMT)
Message-ID: <2195181.1158267683370.JavaMail.jira@brutus>
Date: Thu, 14 Sep 2006 14:01:23 -0700 (PDT)
From: "Philippe Gassmann (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-527) Allow to specify the bind address
 for all hadoop servers
In-Reply-To: <19022892.1158135804043.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-527?page=comments#action_12434806 ] 
            
Philippe Gassmann commented on HADOOP-527:
------------------------------------------

OK, that does make sense, I will update the patch ASAP

> Allow to specify the bind address for all hadoop servers
> --------------------------------------------------------
>
>                 Key: HADOOP-527
>                 URL: http://issues.apache.org/jira/browse/HADOOP-527
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.1.0, 0.2.0, 0.1.1, 0.3.0, 0.4.0, 0.2.1, 0.5.0, 0.3.1, 0.3.2, 0.6.0, 0.7.0, 0.6.1
>            Reporter: Philippe Gassmann
>         Attachments: patch-bind-on-custom-addr
>
>
> Hadoop servers sockets are always binded on 0.0.0.0 ; this patch allow to specify a bind address.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 14 22:22:42 2006
Return-Path: 
 <hadoop-dev-return-3741-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 35688 invoked from network); 14 Sep 2006 22:22:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Sep 2006 22:22:42 -0000
Received: (qmail 82984 invoked by uid 500); 14 Sep 2006 22:22:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 82963 invoked by uid 500); 14 Sep 2006 22:22:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 82953 invoked by uid 99); 14 Sep 2006 22:22:41 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Sep 2006 15:22:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2FBE4714317
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Sep 2006 22:18:55 +0000 (GMT)
Message-ID: <22712713.1158272335192.JavaMail.jira@brutus>
Date: Thu, 14 Sep 2006 15:18:55 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-288) RFC: Efficient file caching
In-Reply-To: <6015694.1149730109866.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-288?page=all ]

Doug Cutting resolved HADOOP-288.
---------------------------------

    Fix Version/s: 0.7.0
       Resolution: Fixed

I just committed this.  Thanks, Mahadev!

> RFC: Efficient file caching
> ---------------------------
>
>                 Key: HADOOP-288
>                 URL: http://issues.apache.org/jira/browse/HADOOP-288
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.6.0
>            Reporter: Michel Tourn
>         Assigned To: Mahadev konar
>             Fix For: 0.7.0
>
>         Attachments: caching-3.patch, caching-4.patch, caching-5.patch, caching.patch, caching.patch, test.jar, test.zip
>
>
> RFC: Efficient file caching 
> (on Hadoop Task nodes, for benefit of MapReduce Tasks)
> ------------------------------------------------------
> We will start implementing this soon. Please provide feedback and improvements to this plan.
> The header "Options:" indicates places where simple choices must be made.
> Problem:
> -------
> o MapReduce tasks require access to additional out-of-band data ("dictionaries")
> This out-of-band data is:
> o in addition to the map/reduce inputs.
> o large (1GB+)
> o broadcast (same data is required on all the Task nodes)
> o changes "infrequently", in particular:
> oo it is always constant for all the Tasks in a Job. 
> oo it is often constant for a month at a time 
> oo it may be shared across team members
> o sometimes used by pure-Java MapReduce programs
> o sometimes used by non-Java MapReduce programs (using Hadoop-Streaming)
> o (future) used by programs that use HDFS and Task-trackers but not MapReduce.
> Existing Solutions to the problem:
> ---------------------------------
> These solutions are not good enough. The present proposal is to do Sol 1 with caching.
> Sol 1: Pure Hadoop: package the out-of-band data in the MapReduce Job jar file.
> Sol 2: Non  Hadoop: for each task node run rsync from single source for data.
> Sol 3: Non  Hadoop: use BitTorrent, etc.
> Sol.1 is correct but slow for many reasons:
>  The Job submitter must recreate a large jar(tar) file for every Job.
>   (The jar contains both changing programs and stable dictionaries)
>  The large Jar file must be propagated from the client to HDFS with 
>  a large replication factor. 
>  At the beginning of every Task, the Task tracker gets the job jar from HDFS 
>  and unjars it in the working directory. This can dominate task execution time.
>  
> Sol.2 has nice properties but also some problems.
>  It does not scale well with large clusters (many concurrent rsync read requests i.e. single-source broadcast)
>  It assumes that Hadoop users can upload data using rsync to the cluster nodes. As a policy, this is not allowed.
>  It requires rsync.
>  
> Sol.3 alleviates the rsync scalability problems but 
>       It is a dependency on an external system. 
>       We want something simpler and more tightly integrated with Hadoop.
>       
> Staging (uploading) out-of-band data:
> ------------------------------------
> The out-of-band data will often originate on the local filesystem of a user machine 
>  (i.e. a MapReduce job submitter)
> Nevertheless it makes sense to use HDFS to store the original out-of-band data because:
> o HDFS has (wide) replication. This enables scalable broadcast later.
> o HDFS is an available channel to move data from clients to all task machines.
> o HDFS is convenient as a shared location among Hadoop team members.
> Accessing (downloading) out-of-band data:
> ----------------------------------------
> The non-Java MapReduce programs do not have or want[1] APIs for HDFS.
> Instead these programs just want to access out-of-band data as 
>  local files at predefined paths.
> ([1] Existing programs should be reusable with no changes. 
>  This is often possible bec. communication is over stdin/stdout.)
> Job's jar file as a special case:
> --------------------------------
> One use case is to allow users to make the job jar itself cachable.
> This is only useful in cases where NOTHING changes when a job is resubmitted
>  (no MapRed code changes and no changes in shipped data)
> This situation might occur with an 'extractor' job (gets data from an external source: like Nutch crawler)
> Currently the Hadoop mapred-jar mechanism works in this way:
>  the job jar data is unjarred in the "working directory" of the Task 
>  the jar contains both MapRed java code (added to classpath)
> Cache synchronization:
> ---------------------
> The efficient implementation of the out-of-band data distribution
> is mostly a cache synchronization problem.
> A list of the various aspects where choices must be made follows.
> Cache key:
> ---------
> How do you test that the cached copy is out-of-date?
> Options: 
> 1. the archive/file timestamp 
> 2. the MD5 of the archive/file content
> Comparing source and destination Timestamps is problematic bec. it assumes synchronized clocks.
> Also there is no last-modif metadata in HDFS (for good reasons, like scalability of metadata ops)
> Timestamps stored with the source ('last-propagate-time') do 
>  not require synchronized clocks, only locally monotonic time. 
> (and the worse which can happen at daylight-savings switch is a missed update or an extra-update)
> The cache code could store a copy of the local timestamp 
> in the same way that it caches the value of the content hash along with the source data.
>  
> Cachable unit:
> -------------
> Options: individual files or archives or both.
> Note:
> At the API level, directories will be processed recursively 
> (and the local FS directories will parallel HDFS directories)
> So bulk operations are always possible using directories.
> The question here is whether to handle archives as an additional bulk mechanism.
> Archives are special because:
> o unarchiving occurs transparently as part of the cache sync
> o The cache key is computed on the archive and preserved although 
>   the archive itself is not preserved.
> Supported archive format will be: tar (maybe tgz or compressed jar)
> Archive detection test: by filename extension ".tar" or ".jar"
> Suppose we don't handle archives as special files:
> Pros:
>  o less code, no discussion about which archive formats are supported
>  o fine for large dictionary files. And when files are not large, user may as well
>    put them in the Job jar as usual.
>  o user code could always check and unarchive specific cached files
>    (as a side-effect of MapRed task initialization)
> Cons:
>  o handling small files may be inefficient 
>   (multiple HDFS operations, multiple hash computation, 
>    one 'metadata' hash file along with each small file)
>  o It will not be possible to handle the Job's jar file as a special case of caching 
> Cache isolation: 
> ---------------
> In some cases it may be a problem if the cached HDFS files are updated while a Job is in progress:
> The file may become unavailable for a short period of time and some tasks fail.
> The file may change (atomically) and different tasks use a different version.
> This isolation problem is not addressed in this proposal.
> Standard solutions to the isolation problem are:
> o Assume that Jobs and interfering cache updates won't occur concurrently.
> o Put a version number in the HDFS file paths and refer to a hard-coded version in the Job code.
> o Before running the MapRed job, run a non-distributed application that tests
>   what is the latest available version of the out-of-band data. 
>   Then make this version available to the MapRed job.
>   Two ways to do this. 
>   o either set a job property just-in-time:
>     addCachePathPair("/mydata/v1234/", "localcache/mydata_latest"); 
>     (see Job Configuration for meaning of this)
>   o or publish the decision as an HDFS file containing the version.
>     then rely on user code to read the version, and manually populate the cache:
>     Cache.syncCache("/hdfs/path/fileordir", "relative/local/fileordir");
>     (see MapReduce API for meaning of this)
> Cache synchronization stages:
> ----------------------------
> There are two stages: Client-to-HDFS and HDFS-to-TaskTracker
> o Client-to-HDFS stage.
> Options: A simple option is to not do anything here, i.e. rely on the user.
> This is a reasonable option given previous remarks on the role of HDFS:
>  HDFS is a staging/publishing area and a natural shared location.
> In particular this means that the system need not track 
> where the client files come from.
> o HDFS-to-TaskTracker:
> Client-to-HDFS synchronization (if done at all) should happen before this.
> Then HDFS-to-TaskTracker synchronization must happen right before 
> the data is needed on a node.
> MapReduce cache API:
> -------------------
> Options:
> 1. No change in MapReduce framework code:
> require the user to put this logic in map() (or reduce) function:
>  in MyMapper constructor (or in map() on first record) user is asked to add:
>  
>     Cache.syncCache("/hdfs/path/fileordir", "relative/local/fileordir");
>     Cache.syncCache("..."); //etc.
>   
> -----
> 2. Put this logic in MapReduce framework and use Job properties to
>    communicate the list of pairs (hdfs path; local path)
>  
> Directories are processed recursively.
> If archives are treated specially then they are unarchived on destination.
>  
> MapReduce Job Configuration:
> ---------------------------
> Options:
> with No change in MapReduce framework code (see above)
>  no special Job configuration: 
>    it is up to the MapRed writer to configure and run the cache operations.
> ---
> with Logic in MapReduce framework (see above)
>  some simple Job configuration
> JobConf.addCachePathPair(String, String)
> JobConf.addCachePathPair("/hdfs/path/fileordir", "relative/local/fileordir");

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 14 22:34:41 2006
Return-Path: 
 <hadoop-dev-return-3742-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37316 invoked from network); 14 Sep 2006 22:34:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Sep 2006 22:34:41 -0000
Received: (qmail 98935 invoked by uid 500); 14 Sep 2006 22:34:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98817 invoked by uid 500); 14 Sep 2006 22:34:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98808 invoked by uid 99); 14 Sep 2006 22:34:40 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Sep 2006 15:34:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 046A271431F
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Sep 2006 22:30:25 +0000 (GMT)
Message-ID: <33397188.1158273025015.JavaMail.jira@brutus>
Date: Thu, 14 Sep 2006 15:30:25 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-531) Need to sort on more than the
 primary key
In-Reply-To: <23568129.1158183922358.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-531?page=comments#action_12434835 ] 
            
Doug Cutting commented on HADOOP-531:
-------------------------------------

So do HADOOP-485 and HADOOP-531 solve this issue?  If so, then we should mark it duplicate, or at least dependent.


> Need to sort on more than the primary key
> -----------------------------------------
>
>                 Key: HADOOP-531
>                 URL: http://issues.apache.org/jira/browse/HADOOP-531
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: contrib/streaming
>    Affects Versions: 0.5.0
>            Reporter: Richard Kasperski
>
> There are many tasks where I need to have finer control over the ordering in the reduce than a sort on a single key provides. Most of these situations arise when a merge two sources of data and am attaching a single instance of one source to multiple instances of a second source. I know that I can read all the the records with a single key. It's possible that there might be many millions of these making memory demands that cannot be satisfied.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 14 22:50:39 2006
Return-Path: 
 <hadoop-dev-return-3743-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 41011 invoked from network); 14 Sep 2006 22:50:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Sep 2006 22:50:39 -0000
Received: (qmail 23202 invoked by uid 500); 14 Sep 2006 22:50:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23010 invoked by uid 500); 14 Sep 2006 22:50:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23001 invoked by uid 99); 14 Sep 2006 22:50:38 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Sep 2006 15:50:38 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6DA3F714317
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Sep 2006 22:46:23 +0000 (GMT)
Message-ID: <24490248.1158273983446.JavaMail.jira@brutus>
Date: Thu, 14 Sep 2006 15:46:23 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-519) HDFS File API should be extended to
 include positional read
In-Reply-To: <7528490.1157757622361.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-519?page=all ]

Milind Bhandarkar updated HADOOP-519:
-------------------------------------

    Attachment: pread.patch

This patch implements positional read for FSInputStream, FSDataInputStream, DFSInputStream, and LocalFSFileInputStream.

I will later re-implement "normal" read in terms of pread in a separate patch.

> HDFS File API should be extended to include positional read
> -----------------------------------------------------------
>
>                 Key: HADOOP-519
>                 URL: http://issues.apache.org/jira/browse/HADOOP-519
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.6.0
>         Environment: All
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.7.0
>
>         Attachments: pread.patch
>
>
> HDFS Input streams should support positional read. Positional read (such as the pread syscall on linux) allows reading for a specified offset without affecting the current file offset. Since the underlying file state is not touched, pread can be used efficiently in multi-threaded programs.
> Here is how I plan to implement it.
> Provide PositionedReadable interface, with the following methods:
> int read(long position, byte[] buffer, int offset, int length);
> void readFully(long position, byte[] buffer, int offset, int length);
> void readFully(long position, byte[] buffer);
> Abstract class FSInputStream would provide default implementation of the above methods using getPos(), seek() and read() methods. The default implementation is inefficient in multi-threaded programs since it locks the object while seeking, reading, and restoring to old state.
> DFSClient.DFSInputStream, which extends FSInputStream will provide an efficient non-synchronized implementation for above calls.
> In addition, FSDataInputStream, which is a wrapper around FSInputStream, will provide wrapper methods for above read methods as well.
> Patch forthcoming early next week.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 14 22:50:40 2006
Return-Path: 
 <hadoop-dev-return-3744-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 41044 invoked from network); 14 Sep 2006 22:50:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Sep 2006 22:50:40 -0000
Received: (qmail 23250 invoked by uid 500); 14 Sep 2006 22:50:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23225 invoked by uid 500); 14 Sep 2006 22:50:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23216 invoked by uid 99); 14 Sep 2006 22:50:39 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Sep 2006 15:50:39 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 94AD5714353
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Sep 2006 22:46:24 +0000 (GMT)
Message-ID: <3806482.1158273984606.JavaMail.jira@brutus>
Date: Thu, 14 Sep 2006 15:46:24 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-519) HDFS File API should be extended to
 include positional read
In-Reply-To: <7528490.1157757622361.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-519?page=all ]

Milind Bhandarkar updated HADOOP-519:
-------------------------------------

    Status: Patch Available  (was: Open)

Patch submitted.

> HDFS File API should be extended to include positional read
> -----------------------------------------------------------
>
>                 Key: HADOOP-519
>                 URL: http://issues.apache.org/jira/browse/HADOOP-519
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.6.0
>         Environment: All
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.7.0
>
>         Attachments: pread.patch
>
>
> HDFS Input streams should support positional read. Positional read (such as the pread syscall on linux) allows reading for a specified offset without affecting the current file offset. Since the underlying file state is not touched, pread can be used efficiently in multi-threaded programs.
> Here is how I plan to implement it.
> Provide PositionedReadable interface, with the following methods:
> int read(long position, byte[] buffer, int offset, int length);
> void readFully(long position, byte[] buffer, int offset, int length);
> void readFully(long position, byte[] buffer);
> Abstract class FSInputStream would provide default implementation of the above methods using getPos(), seek() and read() methods. The default implementation is inefficient in multi-threaded programs since it locks the object while seeking, reading, and restoring to old state.
> DFSClient.DFSInputStream, which extends FSInputStream will provide an efficient non-synchronized implementation for above calls.
> In addition, FSDataInputStream, which is a wrapper around FSInputStream, will provide wrapper methods for above read methods as well.
> Patch forthcoming early next week.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 14 23:06:39 2006
Return-Path: 
 <hadoop-dev-return-3745-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43334 invoked from network); 14 Sep 2006 23:06:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Sep 2006 23:06:39 -0000
Received: (qmail 36851 invoked by uid 500); 14 Sep 2006 23:06:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 36833 invoked by uid 500); 14 Sep 2006 23:06:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 36824 invoked by uid 99); 14 Sep 2006 23:06:38 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Sep 2006 16:06:38 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 64056714353
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Sep 2006 23:02:23 +0000 (GMT)
Message-ID: <6864072.1158274943407.JavaMail.jira@brutus>
Date: Thu, 14 Sep 2006 16:02:23 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-532) Writable underrun in sort example
In-Reply-To: <32319787.1158251962387.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-532?page=all ]

Owen O'Malley updated HADOOP-532:
---------------------------------

    Attachment: seqfile-underread-check.patch

The compression codec is not reading the entire value buffer, but it is getting the correct value. (I suspect the unread bytes are a crc.) This error message is the SequenceFile complaining that the entire buffer was not used.

This patch:
  1. extends the unit test to use bigger values so that we detect the problem
  2. allows the user of the org.apache.hadoop.io.TestSequenceFile main program to control the random seed (and prints out the seed value, even if it is random).
  3. check that the stream is done by trying to read the next byte on the input stream.
  4. removes some redundant buffering of the already buffered value stream.
  5. marks the start of the value in non-block compressed sequence files and does a reset at the front of getCurrentValue.

> Writable underrun in sort example
> ---------------------------------
>
>                 Key: HADOOP-532
>                 URL: http://issues.apache.org/jira/browse/HADOOP-532
>             Project: Hadoop
>          Issue Type: Bug
>          Components: io
>    Affects Versions: 0.6.1
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.6.2
>
>         Attachments: seqfile-underread-check.patch
>
>
> When running the sort benchmark, I get consistent failures of this sort:
> java.lang.RuntimeException: java.io.IOException: org.apache.hadoop.io.BytesWritable@43d748ad read 2048 bytes, should read 2052 at org.apache.hadoop.mapred.ReduceTask$ValuesIterator.next(ReduceTask.java:150) at org.apache.hadoop.mapred.lib.IdentityReducer.reduce(IdentityReducer.java:39) at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:271) at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1066) Caused by: java.io.IOException: org.apache.hadoop.io.BytesWritable@43d748ad read 2048 bytes, should read 2052 at org.apache.hadoop.io.SequenceFile$Reader.getCurrentValue(SequenceFile.java:1163) at org.apache.hadoop.io.SequenceFile$Reader.next(SequenceFile.java:1239) at org.apache.hadoop.mapred.ReduceTask$ValuesIterator.getNext(ReduceTask.java:181) at org.apache.hadoop.mapred.ReduceTask$ValuesIterator.next(ReduceTask.java:147) ... 3 more

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 14 23:06:40 2006
Return-Path: 
 <hadoop-dev-return-3746-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43372 invoked from network); 14 Sep 2006 23:06:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Sep 2006 23:06:40 -0000
Received: (qmail 37256 invoked by uid 500); 14 Sep 2006 23:06:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 37056 invoked by uid 500); 14 Sep 2006 23:06:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 37047 invoked by uid 99); 14 Sep 2006 23:06:39 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Sep 2006 16:06:39 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 835DF714356
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Sep 2006 23:02:24 +0000 (GMT)
Message-ID: <7460767.1158274944535.JavaMail.jira@brutus>
Date: Thu, 14 Sep 2006 16:02:24 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-532) Writable underrun in sort example
In-Reply-To: <32319787.1158251962387.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-532?page=all ]

Owen O'Malley updated HADOOP-532:
---------------------------------

    Status: Patch Available  (was: Open)

> Writable underrun in sort example
> ---------------------------------
>
>                 Key: HADOOP-532
>                 URL: http://issues.apache.org/jira/browse/HADOOP-532
>             Project: Hadoop
>          Issue Type: Bug
>          Components: io
>    Affects Versions: 0.6.1
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.6.2
>
>         Attachments: seqfile-underread-check.patch
>
>
> When running the sort benchmark, I get consistent failures of this sort:
> java.lang.RuntimeException: java.io.IOException: org.apache.hadoop.io.BytesWritable@43d748ad read 2048 bytes, should read 2052 at org.apache.hadoop.mapred.ReduceTask$ValuesIterator.next(ReduceTask.java:150) at org.apache.hadoop.mapred.lib.IdentityReducer.reduce(IdentityReducer.java:39) at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:271) at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1066) Caused by: java.io.IOException: org.apache.hadoop.io.BytesWritable@43d748ad read 2048 bytes, should read 2052 at org.apache.hadoop.io.SequenceFile$Reader.getCurrentValue(SequenceFile.java:1163) at org.apache.hadoop.io.SequenceFile$Reader.next(SequenceFile.java:1239) at org.apache.hadoop.mapred.ReduceTask$ValuesIterator.getNext(ReduceTask.java:181) at org.apache.hadoop.mapred.ReduceTask$ValuesIterator.next(ReduceTask.java:147) ... 3 more

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 14 23:09:38 2006
Return-Path: 
 <hadoop-dev-return-3747-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43644 invoked from network); 14 Sep 2006 23:09:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Sep 2006 23:09:38 -0000
Received: (qmail 38752 invoked by uid 500); 14 Sep 2006 23:09:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38725 invoked by uid 500); 14 Sep 2006 23:09:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38716 invoked by uid 99); 14 Sep 2006 23:09:37 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Sep 2006 16:09:37 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 55023714356
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Sep 2006 23:05:22 +0000 (GMT)
Message-ID: <10412817.1158275122345.JavaMail.jira@brutus>
Date: Thu, 14 Sep 2006 16:05:22 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-535) back to back testing of codecs
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

back to back testing of codecs
------------------------------

                 Key: HADOOP-535
                 URL: http://issues.apache.org/jira/browse/HADOOP-535
             Project: Hadoop
          Issue Type: Test
            Reporter: Owen O'Malley


We should write some unit tests that use codecs back to back doing writing and then reading.

compressed block1, compressed block 2, compressed block3, ...

that will check that the compression codecs are consuming the entire block when they read.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 14 23:30:39 2006
Return-Path: 
 <hadoop-dev-return-3748-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46394 invoked from network); 14 Sep 2006 23:30:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Sep 2006 23:30:39 -0000
Received: (qmail 59830 invoked by uid 500); 14 Sep 2006 23:30:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 59714 invoked by uid 500); 14 Sep 2006 23:30:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 59705 invoked by uid 99); 14 Sep 2006 23:30:38 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Sep 2006 16:30:38 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 56BD641003D
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Sep 2006 23:26:23 +0000 (GMT)
Message-ID: <24721468.1158276383352.JavaMail.jira@brutus>
Date: Thu, 14 Sep 2006 16:26:23 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-306) Safe mode and name node startup
 procedures
In-Reply-To: <5719318.1150505909849.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-306?page=all ]

Konstantin Shvachko updated HADOOP-306:
---------------------------------------

    Attachment: SafeMode.patch

> Safe mode and name node startup procedures
> ------------------------------------------
>
>                 Key: HADOOP-306
>                 URL: http://issues.apache.org/jira/browse/HADOOP-306
>             Project: Hadoop
>          Issue Type: New Feature
>    Affects Versions: 0.3.2
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>         Attachments: SafeMode.patch
>
>
> This is a proposal to improve DFS cluster startup process.
> The data node startup procedures were described and implemented in HADOOP-124.
> I'm trying to extend them to the name node here.
> The main idea is to introduce safe mode, which can be entered manually for administration
> purposes, or automatically when a configurable threshold of active data nodes is breached,
> or at startup when the node stays in safe mode until the minimal limit of active
> nodes is reached.
> This are high level requirements intended to improve the name node and cluster reliability.
>     = The name node safe mode means that the name node is not changing the state of the
>        file system. Meta data is read-only, and block replication / removal is not taking place.
>     = In safe mode the name node accepts data node registrations and
>        processes their block reports.
>     = The name node always starts in safe mode and stays safe until the majority
>         (a configurable parameter: safemode.threshold) of data nodes (or blocks?)
>         is reported.
>     = The name node can also fall into safe mode when the number of non-active
>         (heartbeats stopped coming in) data nodes becomes critical.
>     = The startup "silent period", when the name node is in safe mode and is
>         not issuing any block requests to the data nodes, is initially set to a
>         configurable value safemode.timeout.increment. By the end of the timeout
>         the name node checks the safemode.threshold and decides whether to switch
>         to the normal mode or to stay in safe. If the normal mode criteria is not
>         met, then the silent period is extended by incrementing the safemode timeout.
>     = The name node stays in safe mode not longer than a configurable value of
>         safemode.timeout.max, in which case it logs missing data nodes and shuts
>         itself down.
>     = When the name node switches to normal mode it checks whether all required
>         data nodes have actually registered, based on the list of active data storages
>         from the last session. Then it logs missing nodes, if any, and starts
>         replicating and/or deleting blocks as required.
>     = A historical list of data storages (nodes) ever registered with the cluster is
>         persistently stored in the image and log files. The list is used in two ways:
>         a) at startup to verify whether all nodes have registered, and to report
>         missing nodes;
>         b) at runtime if a data node registers with a new storage id the
>         name node verifies that no new blocks are reported from that storage,
>         which would prevent us from accidentally connecting data nodes from a
>         different cluster.
>     = The name node should have an option to run in safe mode. Starting with
>         that option would mean it never leaves safe mode.
>         This is useful for testing the cluster.
>     = Data nodes that can not connect to the name node for a long time (configurable)
>         should shut down themselves.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 14 23:32:39 2006
Return-Path: 
 <hadoop-dev-return-3749-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46817 invoked from network); 14 Sep 2006 23:32:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Sep 2006 23:32:39 -0000
Received: (qmail 66683 invoked by uid 500); 14 Sep 2006 23:32:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66663 invoked by uid 500); 14 Sep 2006 23:32:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66654 invoked by uid 99); 14 Sep 2006 23:32:38 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Sep 2006 16:32:38 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6378441003C
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Sep 2006 23:28:23 +0000 (GMT)
Message-ID: <14056842.1158276503404.JavaMail.jira@brutus>
Date: Thu, 14 Sep 2006 16:28:23 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-306) Safe mode and name node startup
 procedures
In-Reply-To: <5719318.1150505909849.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-306?page=all ]

Konstantin Shvachko updated HADOOP-306:
---------------------------------------

    Status: Patch Available  (was: Open)

This is the safe mode implementation, which implements everything that was discussed here
except for the automatic entering safe mode when the number of non-active blocks falls below 
the threshold. This seems to be arguable that rather than replicating as quickly as it can the 
name node falls into safe mode.
Please see JavaDoc for complete descriptions of the safe mode concept and its implementation.

Other minor changes
- Block report interval is configurable, but there was no value for it in hadoop-default.xml. I added it.
  <name>dfs.blockreport.intervalMsec</name>
- A typo in hadoop-default.xml
- There was a memory leak related to that name node never removed blocks from the bloksMap
so it could grow large if the system works long enough. I fixed this unreported bug.
- I moved the startup of http servers for both data and name nodes to the end of their constructors
as discussed in HADOOP-430
- ClientProtocol version is changed since setSafeMode() method is added


> Safe mode and name node startup procedures
> ------------------------------------------
>
>                 Key: HADOOP-306
>                 URL: http://issues.apache.org/jira/browse/HADOOP-306
>             Project: Hadoop
>          Issue Type: New Feature
>    Affects Versions: 0.3.2
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>         Attachments: SafeMode.patch
>
>
> This is a proposal to improve DFS cluster startup process.
> The data node startup procedures were described and implemented in HADOOP-124.
> I'm trying to extend them to the name node here.
> The main idea is to introduce safe mode, which can be entered manually for administration
> purposes, or automatically when a configurable threshold of active data nodes is breached,
> or at startup when the node stays in safe mode until the minimal limit of active
> nodes is reached.
> This are high level requirements intended to improve the name node and cluster reliability.
>     = The name node safe mode means that the name node is not changing the state of the
>        file system. Meta data is read-only, and block replication / removal is not taking place.
>     = In safe mode the name node accepts data node registrations and
>        processes their block reports.
>     = The name node always starts in safe mode and stays safe until the majority
>         (a configurable parameter: safemode.threshold) of data nodes (or blocks?)
>         is reported.
>     = The name node can also fall into safe mode when the number of non-active
>         (heartbeats stopped coming in) data nodes becomes critical.
>     = The startup "silent period", when the name node is in safe mode and is
>         not issuing any block requests to the data nodes, is initially set to a
>         configurable value safemode.timeout.increment. By the end of the timeout
>         the name node checks the safemode.threshold and decides whether to switch
>         to the normal mode or to stay in safe. If the normal mode criteria is not
>         met, then the silent period is extended by incrementing the safemode timeout.
>     = The name node stays in safe mode not longer than a configurable value of
>         safemode.timeout.max, in which case it logs missing data nodes and shuts
>         itself down.
>     = When the name node switches to normal mode it checks whether all required
>         data nodes have actually registered, based on the list of active data storages
>         from the last session. Then it logs missing nodes, if any, and starts
>         replicating and/or deleting blocks as required.
>     = A historical list of data storages (nodes) ever registered with the cluster is
>         persistently stored in the image and log files. The list is used in two ways:
>         a) at startup to verify whether all nodes have registered, and to report
>         missing nodes;
>         b) at runtime if a data node registers with a new storage id the
>         name node verifies that no new blocks are reported from that storage,
>         which would prevent us from accidentally connecting data nodes from a
>         different cluster.
>     = The name node should have an option to run in safe mode. Starting with
>         that option would mean it never leaves safe mode.
>         This is useful for testing the cluster.
>     = Data nodes that can not connect to the name node for a long time (configurable)
>         should shut down themselves.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 15 00:10:42 2006
Return-Path: 
 <hadoop-dev-return-3750-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 55422 invoked from network); 15 Sep 2006 00:10:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Sep 2006 00:10:42 -0000
Received: (qmail 1105 invoked by uid 500); 15 Sep 2006 00:10:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 832 invoked by uid 500); 15 Sep 2006 00:10:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 804 invoked by uid 99); 15 Sep 2006 00:10:38 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Sep 2006 17:10:38 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 712BA41003C
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Sep 2006 00:06:23 +0000 (GMT)
Message-ID: <2455349.1158278783461.JavaMail.jira@brutus>
Date: Thu, 14 Sep 2006 17:06:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-534) Jobconf should set the default
 output value class to be Text
In-Reply-To: <17229556.1158260183016.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-534?page=comments#action_12434855 ] 
            
Doug Cutting commented on HADOOP-534:
-------------------------------------

This looks like the patch for HADOOP-530, not for this issue.

> Jobconf should set the default output value class to be Text
> ------------------------------------------------------------
>
>                 Key: HADOOP-534
>                 URL: http://issues.apache.org/jira/browse/HADOOP-534
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.6.1
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.6.2
>
>         Attachments: seq_class_name.patch
>
>
> When input files are in the text format, the input value class is set to be Text. But the output value class is by default set to be UTF8. This causes the Grep example to fail.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 15 00:16:39 2006
Return-Path: 
 <hadoop-dev-return-3751-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57049 invoked from network); 15 Sep 2006 00:16:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Sep 2006 00:16:39 -0000
Received: (qmail 11169 invoked by uid 500); 15 Sep 2006 00:16:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 11144 invoked by uid 500); 15 Sep 2006 00:16:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 11135 invoked by uid 99); 15 Sep 2006 00:16:38 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Sep 2006 17:16:38 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 52CF041003D
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Sep 2006 00:12:23 +0000 (GMT)
Message-ID: <4339056.1158279143336.JavaMail.jira@brutus>
Date: Thu, 14 Sep 2006 17:12:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-532) Writable underrun in sort example
In-Reply-To: <32319787.1158251962387.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-532?page=all ]

Doug Cutting updated HADOOP-532:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Owen!

> Writable underrun in sort example
> ---------------------------------
>
>                 Key: HADOOP-532
>                 URL: http://issues.apache.org/jira/browse/HADOOP-532
>             Project: Hadoop
>          Issue Type: Bug
>          Components: io
>    Affects Versions: 0.6.1
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.6.2
>
>         Attachments: seqfile-underread-check.patch
>
>
> When running the sort benchmark, I get consistent failures of this sort:
> java.lang.RuntimeException: java.io.IOException: org.apache.hadoop.io.BytesWritable@43d748ad read 2048 bytes, should read 2052 at org.apache.hadoop.mapred.ReduceTask$ValuesIterator.next(ReduceTask.java:150) at org.apache.hadoop.mapred.lib.IdentityReducer.reduce(IdentityReducer.java:39) at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:271) at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1066) Caused by: java.io.IOException: org.apache.hadoop.io.BytesWritable@43d748ad read 2048 bytes, should read 2052 at org.apache.hadoop.io.SequenceFile$Reader.getCurrentValue(SequenceFile.java:1163) at org.apache.hadoop.io.SequenceFile$Reader.next(SequenceFile.java:1239) at org.apache.hadoop.mapred.ReduceTask$ValuesIterator.getNext(ReduceTask.java:181) at org.apache.hadoop.mapred.ReduceTask$ValuesIterator.next(ReduceTask.java:147) ... 3 more

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 15 00:31:39 2006
Return-Path: 
 <hadoop-dev-return-3752-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 58605 invoked from network); 15 Sep 2006 00:31:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Sep 2006 00:31:39 -0000
Received: (qmail 21074 invoked by uid 500); 15 Sep 2006 00:31:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 21049 invoked by uid 500); 15 Sep 2006 00:31:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 21040 invoked by uid 99); 15 Sep 2006 00:31:38 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Sep 2006 17:31:38 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 754537142F6
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Sep 2006 00:27:23 +0000 (GMT)
Message-ID: <4099846.1158280043477.JavaMail.jira@brutus>
Date: Thu, 14 Sep 2006 17:27:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-522) MapFile should support block
 compression
In-Reply-To: <3893251.1158016342663.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-522?page=all ]

Doug Cutting reassigned HADOOP-522:
-----------------------------------

    Assignee: Doug Cutting

With the patch for HADOOP-532, this now seems to work.  The attached code should still probably be cleaned up a bit, but the basic approach seems to now work.

> MapFile should support block compression
> ----------------------------------------
>
>                 Key: HADOOP-522
>                 URL: http://issues.apache.org/jira/browse/HADOOP-522
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Doug Cutting
>         Assigned To: Doug Cutting
>         Attachments: block-compress-map-file.patch
>
>
> MapFile is layered on SequenceFile and permits random-access to sorted data files (typically reduce output) through a parallel index file.  This is used widely in Nutch (e.g. at search time for displaying cached pages, incoming links, etc).  Such sorted data should benefit from block compression, but the current MapFile API does not support specification of block compression.  Also, even if it did, the semantics of SequenceFile methods like seek() and getPosition() are changed under block compression so that MapFile may not work.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 15 00:31:56 2006
Return-Path: 
 <hadoop-dev-return-3753-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 58671 invoked from network); 15 Sep 2006 00:31:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Sep 2006 00:31:56 -0000
Received: (qmail 21392 invoked by uid 500); 15 Sep 2006 00:31:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 21370 invoked by uid 500); 15 Sep 2006 00:31:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 21361 invoked by uid 99); 15 Sep 2006 00:31:56 -0000
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [207.126.228.149] (HELO rsmtp1.corp.yahoo.com)
 (207.126.228.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Sep 2006 17:31:56 -0700
Received: from [10.72.108.58] (arkady-mac.corp.yahoo.com [10.72.108.58])
	by rsmtp1.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k8F0UE2s058524;
	Thu, 14 Sep 2006 17:30:14 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=in-reply-to:references:mime-version:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=v2YAsERU/hUuvAhiYVMYDxc8fz1Y94XHGrA736DEOjLR/FoCfVdmtZ4/Af1aBBYy
In-Reply-To: <33397188.1158273025015.JavaMail.jira@brutus>
References: <33397188.1158273025015.JavaMail.jira@brutus>
Mime-Version: 1.0 (Apple Message framework v624)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <79c31cf828fa7279616fc7a3ca27a912@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Arkady Borkovsky <arkady@yahoo-inc.com>
Subject: Re: [jira] Commented: (HADOOP-531) Need to sort on more than the
 primary key
Date: Thu, 14 Sep 2006 17:30:13 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.624)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

This one is 531.

HADOOP-485 is not related to this one.


On Sep 14, 2006, at 3:30 PM, Doug Cutting (JIRA) wrote:

>     [  
> http://issues.apache.org/jira/browse/HADOOP-531? 
> page=comments#action_12434835 ]
>
> Doug Cutting commented on HADOOP-531:
> -------------------------------------
>
> So do HADOOP-485 and HADOOP-531 solve this issue?  If so, then we  
> should mark it duplicate, or at least dependent.
>
>
>> Need to sort on more than the primary key
>> -----------------------------------------
>>
>>                 Key: HADOOP-531
>>                 URL: http://issues.apache.org/jira/browse/HADOOP-531
>>             Project: Hadoop
>>          Issue Type: Improvement
>>          Components: contrib/streaming
>>    Affects Versions: 0.5.0
>>            Reporter: Richard Kasperski
>>
>> There are many tasks where I need to have finer control over the  
>> ordering in the reduce than a sort on a single key provides. Most of  
>> these situations arise when a merge two sources of data and am  
>> attaching a single instance of one source to multiple instances of a  
>> second source. I know that I can read all the the records with a  
>> single key. It's possible that there might be many millions of these  
>> making memory demands that cannot be satisfied.
>
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the  
> administrators:  
> http://issues.apache.org/jira/secure/Administrators.jspa
> -
> For more information on JIRA, see:  
> http://www.atlassian.com/software/jira
>
>


From MAILER-DAEMON Fri Sep 15 00:36:38 2006
Return-Path: 
 <hadoop-dev-return-3754-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 59498 invoked from network); 15 Sep 2006 00:36:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Sep 2006 00:36:38 -0000
Received: (qmail 26298 invoked by uid 500); 15 Sep 2006 00:36:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26277 invoked by uid 500); 15 Sep 2006 00:36:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26268 invoked by uid 99); 15 Sep 2006 00:36:37 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Sep 2006 17:36:37 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5FED17142FA
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Sep 2006 00:32:22 +0000 (GMT)
Message-ID: <22116506.1158280342390.JavaMail.jira@brutus>
Date: Thu, 14 Sep 2006 17:32:22 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-536) Broke ant test on windows
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Broke ant test on windows
-------------------------

                 Key: HADOOP-536
                 URL: http://issues.apache.org/jira/browse/HADOOP-536
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
            Reporter: Mahadev konar
         Attachments: caching_bug.txt

One of my junit tests breaks on windows because of a bug in the junit test code. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 15 00:36:39 2006
Return-Path: 
 <hadoop-dev-return-3755-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 59535 invoked from network); 15 Sep 2006 00:36:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Sep 2006 00:36:39 -0000
Received: (qmail 26687 invoked by uid 500); 15 Sep 2006 00:36:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26498 invoked by uid 500); 15 Sep 2006 00:36:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26489 invoked by uid 99); 15 Sep 2006 00:36:38 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Sep 2006 17:36:38 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 868147142F6
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Sep 2006 00:32:23 +0000 (GMT)
Message-ID: <23454902.1158280343548.JavaMail.jira@brutus>
Date: Thu, 14 Sep 2006 17:32:23 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-536) Broke ant test on windows
In-Reply-To: <22116506.1158280342390.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-536?page=all ]

Mahadev konar updated HADOOP-536:
---------------------------------

    Attachment: caching_bug.txt

This fixes the TestMiniMRLocalFS on windows.

> Broke ant test on windows
> -------------------------
>
>                 Key: HADOOP-536
>                 URL: http://issues.apache.org/jira/browse/HADOOP-536
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Mahadev konar
>         Attachments: caching_bug.txt
>
>
> One of my junit tests breaks on windows because of a bug in the junit test code. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 15 00:47:39 2006
Return-Path: 
 <hadoop-dev-return-3756-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 62945 invoked from network); 15 Sep 2006 00:47:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Sep 2006 00:47:39 -0000
Received: (qmail 34431 invoked by uid 500); 15 Sep 2006 00:47:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 34402 invoked by uid 500); 15 Sep 2006 00:47:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 34393 invoked by uid 99); 15 Sep 2006 00:47:38 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Sep 2006 17:47:38 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6BA987142FA
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Sep 2006 00:43:23 +0000 (GMT)
Message-ID: <15855125.1158281003438.JavaMail.jira@brutus>
Date: Thu, 14 Sep 2006 17:43:23 -0700 (PDT)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-531) Need to sort on more than the
 primary key
In-Reply-To: <23568129.1158183922358.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-531?page=comments#action_12434863 ] 
            
Runping Qi commented on HADOOP-531:
-----------------------------------


Hadoop-531 captures a composite problem. To address problem, we need:

1. Allow different mappers for data from different input sources (HADOOP-372)
2. Allow to sort the map out data according to multiple keys (HADOOP-485)
3. Allow to clone reduce value iterators (HADOOP-475)




> Need to sort on more than the primary key
> -----------------------------------------
>
>                 Key: HADOOP-531
>                 URL: http://issues.apache.org/jira/browse/HADOOP-531
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: contrib/streaming
>    Affects Versions: 0.5.0
>            Reporter: Richard Kasperski
>
> There are many tasks where I need to have finer control over the ordering in the reduce than a sort on a single key provides. Most of these situations arise when a merge two sources of data and am attaching a single instance of one source to multiple instances of a second source. I know that I can read all the the records with a single key. It's possible that there might be many millions of these making memory demands that cannot be satisfied.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 15 00:47:40 2006
Return-Path: 
 <hadoop-dev-return-3757-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 62953 invoked from network); 15 Sep 2006 00:47:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Sep 2006 00:47:40 -0000
Received: (qmail 34469 invoked by uid 500); 15 Sep 2006 00:47:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 34449 invoked by uid 500); 15 Sep 2006 00:47:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 34403 invoked by uid 99); 15 Sep 2006 00:47:38 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Sep 2006 17:47:38 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8913F714302
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Sep 2006 00:43:23 +0000 (GMT)
Message-ID: <4253884.1158281003558.JavaMail.jira@brutus>
Date: Thu, 14 Sep 2006 17:43:23 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-537) clean-libhdfs target of build.xml does
 not work on windows
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

clean-libhdfs target of build.xml does not work on windows
----------------------------------------------------------

                 Key: HADOOP-537
                 URL: http://issues.apache.org/jira/browse/HADOOP-537
             Project: Hadoop
          Issue Type: Bug
          Components: libhdfs
    Affects Versions: 0.6.0
         Environment: Windows
            Reporter: Konstantin Shvachko


It produces the following:

BUILD FAILED
Hadoop\build.xml:496: Execute failed: java.io.IOException: CreateProcess: make clean error=2

Besides, I would propose to have clean-* target for every compile-* target in build.xml.
Some people probably don't build libhdfs or contrib, so why should they clean it.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 15 06:02:17 2006
Return-Path: 
 <hadoop-dev-return-3758-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 45320 invoked from network); 15 Sep 2006 06:02:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Sep 2006 06:02:17 -0000
Received: (qmail 15816 invoked by uid 500); 15 Sep 2006 06:02:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15798 invoked by uid 500); 15 Sep 2006 06:02:16 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 15777 invoked by uid 99); 15 Sep 2006 06:02:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Sep 2006 23:02:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Sep 2006 23:02:14 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5D8F0714349
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Sep 2006 05:58:22 +0000 (GMT)
Message-ID: <12431612.1158299902379.JavaMail.jira@brutus>
Date: Thu, 14 Sep 2006 22:58:22 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
-----------------------------------------------------------------------------------------------------------------------------------

                 Key: HADOOP-538
                 URL: http://issues.apache.org/jira/browse/HADOOP-538
             Project: Hadoop
          Issue Type: Improvement
    Affects Versions: 0.6.1
            Reporter: Arun C Murthy
         Assigned To: Arun C Murthy
             Fix For: 0.7.0


There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 15 09:23:19 2006
Return-Path: 
 <hadoop-dev-return-3759-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8691 invoked from network); 15 Sep 2006 09:23:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Sep 2006 09:23:19 -0000
Received: (qmail 71792 invoked by uid 500); 15 Sep 2006 09:23:19 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 71756 invoked by uid 500); 15 Sep 2006 09:23:18 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 71747 invoked by uid 99); 15 Sep 2006 09:23:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Sep 2006 02:23:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Sep 2006 02:23:15 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 86E7E41003C
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Sep 2006 09:19:23 +0000 (GMT)
Message-ID: <7237221.1158311963547.JavaMail.jira@brutus>
Date: Fri, 15 Sep 2006 02:19:23 -0700 (PDT)
From: "Philippe Gassmann (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-527) Allow to specify the bind address for
 all hadoop servers
In-Reply-To: <19022892.1158135804043.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-527?page=all ]

Philippe Gassmann updated HADOOP-527:
-------------------------------------

    Attachment: patch-bind-on-custom-addr-updated

Updated patch with old api marked as deprecated and config in hadoop-default.xml.

I found a parameter in haddop-default.xml that seems not to be used anymore in the java code : mapred.task.tracker.output.port.

I've done a grep "mapred.task.tracker.output.port" **/*.java (thanks zsh) in the whole source tree and the only result was : 
src/test/org/apache/hadoop/mapred/MiniMRCluster.java:                jc.setInt("mapred.task.tracker.output.port", taskTrackerPort++);

I think it should be removed from hadoop-default.xml

> Allow to specify the bind address for all hadoop servers
> --------------------------------------------------------
>
>                 Key: HADOOP-527
>                 URL: http://issues.apache.org/jira/browse/HADOOP-527
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.1.0, 0.2.0, 0.1.1, 0.3.0, 0.4.0, 0.2.1, 0.5.0, 0.3.1, 0.3.2, 0.6.0, 0.7.0, 0.6.1
>            Reporter: Philippe Gassmann
>         Attachments: patch-bind-on-custom-addr, patch-bind-on-custom-addr-updated
>
>
> Hadoop servers sockets are always binded on 0.0.0.0 ; this patch allow to specify a bind address.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 15 09:27:18 2006
Return-Path: 
 <hadoop-dev-return-3760-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9536 invoked from network); 15 Sep 2006 09:27:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Sep 2006 09:27:18 -0000
Received: (qmail 76452 invoked by uid 500); 15 Sep 2006 09:27:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 76252 invoked by uid 500); 15 Sep 2006 09:27:18 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 76243 invoked by uid 99); 15 Sep 2006 09:27:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Sep 2006 02:27:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Sep 2006 02:27:15 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 53F3641003D
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Sep 2006 09:23:23 +0000 (GMT)
Message-ID: <14755950.1158312203341.JavaMail.jira@brutus>
Date: Fri, 15 Sep 2006 02:23:23 -0700 (PDT)
From: =?utf-8?Q?Fr=C3=A9d=C3=A9ric_Bertin_=28JIRA=29?= <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-516) Eclipse-based GUI: DFS explorer and
 basic Map/Reduce job launcher
In-Reply-To: <13131373.1157736022384.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-516?page=3Dcomments#actio=
n_12434919 ]=20
           =20
Fr=C3=A9d=C3=A9ric Bertin commented on HADOOP-516:
----------------------------------------

if you wish, and if you tell me which OS environment you are using, I can g=
enerate a standalone application (thanks to Eclipse RCP feature). Then you =
won't need Eclipse, just a JRE.
Supported OS are:

aix.motif.ppc
hpux.motif.ia64_32
hpux.motif.PA_RISC
linux.gtk.ia64
linux.gtk.ppc
linux.gtk.x86
linux.gtk.x86_64
linux.motif.x86
macosx.carbon.ppc
macosx.carbon.x86
qnx.photon.x86
solaris.gtk.sparc
solaris.motif.sparc
win32.win32.x86


> Eclipse-based GUI: DFS explorer and basic Map/Reduce job launcher
> -----------------------------------------------------------------
>
>                 Key: HADOOP-516
>                 URL: http://issues.apache.org/jira/browse/HADOOP-516
>             Project: Hadoop
>          Issue Type: New Feature
>         Environment: Eclipse 3.2
> JDK 1.5
>            Reporter: Fr=C3=A9d=C3=A9ric Bertin
>         Attachments: hdfsExplorer.zip, hdfsExplorer2.zip
>
>
> to increase productivity in our current project (which makes a heavy use =
of Hadoop), we wrote a small Eclipse-based GUI application which basically =
consists in 2 views:
>    *  a HDFS explorer adapted from Eclipse filesystem explorer example.
>      For now, it includes the following features:
>          o classical tree-based browsing interface, with directory
>            content being detailed in a 3 columns table (file name, file
>            size, file type)
>          o refresh button
>          o delete file or directory (with confirm dialog): select files
>            in the tree or table and click the "Delete" button
>          o rename file or directory: simple click on the file in the
>            table, type the new name and validate
>          o open file with system editor: select the file in the table
>            and click "Open" button (works on Windows, not on Linux)
>          o internal drag & drop
>          o external drag & drop from the local filesystem to the HDFS
>            (the opposite doesn't work)
>    * a MapReduce *very* simple job launcher:
>          o select the job XML configuration file
>          o run the job
>          o kill the job
>          o visualize map and reduce progress with progress bars
>          o open a browser on the Hadoop job tracker web interface=20
> INSTALLATION NOTES:
>  - Eclipse 3.2
>  - JDK 1.5
>  - import the archive in Eclipse
>  - copy your hadoop conf file (hadoop-default.xml in "src" folder) -> thi=
s step should be moved in the GUI later
>  - right-click on the project and Run As -> Eclipse Application
>  - enjoy...

--=20
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: htt=
p://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

       

From MAILER-DAEMON Fri Sep 15 12:36:42 2006
Return-Path: 
 <hadoop-dev-return-3761-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 82536 invoked from network); 15 Sep 2006 12:36:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Sep 2006 12:36:42 -0000
Received: (qmail 62204 invoked by uid 500); 15 Sep 2006 12:36:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62188 invoked by uid 500); 15 Sep 2006 12:36:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62179 invoked by uid 99); 15 Sep 2006 12:36:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Sep 2006 05:36:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Sep 2006 05:36:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 613E8714347
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Sep 2006 12:32:22 +0000 (GMT)
Message-ID: <7533638.1158323542395.JavaMail.jira@brutus>
Date: Fri, 15 Sep 2006 05:32:22 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-539) Namenode WI shows incorrect cluster
 remaining size
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Namenode WI shows incorrect cluster remaining size
--------------------------------------------------

                 Key: HADOOP-539
                 URL: http://issues.apache.org/jira/browse/HADOOP-539
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
    Affects Versions: 0.6.1
            Reporter: Sanjay Dahiya
            Priority: Trivial


dfshealth.jsp shows remaining cluster size equals to cluster capacity, and all nodes show at 0% used. the actual cluster contains few hundred GBs of data and the data is visible through command line or file browsing. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 15 17:11:30 2006
Return-Path: 
 <hadoop-dev-return-3762-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78993 invoked from network); 15 Sep 2006 17:11:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Sep 2006 17:11:30 -0000
Received: (qmail 30497 invoked by uid 500); 15 Sep 2006 17:11:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 30453 invoked by uid 500); 15 Sep 2006 17:11:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 30436 invoked by uid 99); 15 Sep 2006 17:11:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Sep 2006 10:11:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Sep 2006 10:11:23 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 61FD071434A
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Sep 2006 17:06:23 +0000 (GMT)
Message-ID: <5467709.1158339983398.JavaMail.jira@brutus>
Date: Fri, 15 Sep 2006 10:06:23 -0700 (PDT)
From: "arkady borkovsky (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-477) Streaming should execute Unix
 commands and scripts in well known languages without user specifying the
 path
In-Reply-To: <556122.1156462753408.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-477?page=comments#action_12435036 ] 
            
arkady borkovsky commented on HADOOP-477:
-----------------------------------------

As Owen pointed out few weeks ago, all what is necessary is to provide a standard environment for the executables.
I suggest 3 things to be done:

(1) privide a "standard", meaningful, and documented environment to commands executed by streaming.
   It should include at least
      -- PATH that has /usr/bin,  etc. -- so that commands like grep, perl, python, awk etc are found, as well as hadoop uitilities
      -- LD_LIBRARY_PATH (to get to C and C++ shared libraries)
      
(2) allow the user to provide a file (similar to .cshrc) to define environment variables.   

(3) allow the user to define environment variable in the Streaming command.

The (1) is probably a must.
I strongly prefer (2) over (3), as I would just borrow someone set up that works, and I do not know what are the actual necessary setting.

> Streaming should execute Unix commands and scripts in well known languages without user specifying the path
> -----------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-477
>                 URL: http://issues.apache.org/jira/browse/HADOOP-477
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: arkady borkovsky
>
> If the executables for -mapper or -reducer are well-known (grep, cat, awk), Streaming should make sure that the executable is found.
> If a script  for -mapper or -reducer are in a well-known language (.pl, .py), Streaming should  execute it  with the correct language processor.
> Reason:
> many jobs get started from machines with a different environment from that on the cluster.  
> On another hand, different clusters may have different environments.  
> Also, a user may have no access to the cluster machines.
> Because of this, a user may be unable to specify correct paths for standard commands, and correct language processors for scripts.
> Implementation:
> Stream may tailr the commands by prepending the path, or the name of language processor.  
> Another solution is to make sure that the commands are executed in a "meaningful" environment (with good $PATH, and other variables Unix users are accustomed to count upon).
> Once again, Streaming is user facing tool -- it is not a library or a hackable example that the users are to modify for their needs.  So it should work out of the box.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 15 18:17:20 2006
Return-Path: 
 <hadoop-dev-return-3763-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96705 invoked from network); 15 Sep 2006 18:17:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Sep 2006 18:17:20 -0000
Received: (qmail 52634 invoked by uid 500); 15 Sep 2006 18:17:19 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 52617 invoked by uid 500); 15 Sep 2006 18:17:19 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 52607 invoked by uid 99); 15 Sep 2006 18:17:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Sep 2006 11:17:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Sep 2006 11:17:16 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 57805714353
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Sep 2006 18:12:23 +0000 (GMT)
Message-ID: <29447800.1158343943355.JavaMail.jira@brutus>
Date: Fri, 15 Sep 2006 11:12:23 -0700 (PDT)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-534) Jobconf should set the default output
 value class to be Text
In-Reply-To: <17229556.1158260183016.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-534?page=all ]

Hairong Kuang updated HADOOP-534:
---------------------------------

    Attachment: default_class.patch

Attached the wrong patch. Sorry.

> Jobconf should set the default output value class to be Text
> ------------------------------------------------------------
>
>                 Key: HADOOP-534
>                 URL: http://issues.apache.org/jira/browse/HADOOP-534
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.6.1
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.6.2
>
>         Attachments: default_class.patch
>
>
> When input files are in the text format, the input value class is set to be Text. But the output value class is by default set to be UTF8. This causes the Grep example to fail.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 15 18:17:39 2006
Return-Path: 
 <hadoop-dev-return-3764-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96923 invoked from network); 15 Sep 2006 18:17:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Sep 2006 18:17:39 -0000
Received: (qmail 53321 invoked by uid 500); 15 Sep 2006 18:17:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53293 invoked by uid 500); 15 Sep 2006 18:17:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53284 invoked by uid 99); 15 Sep 2006 18:17:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Sep 2006 11:17:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Sep 2006 11:17:35 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7C3A271434D
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Sep 2006 18:12:24 +0000 (GMT)
Message-ID: <19925980.1158343944506.JavaMail.jira@brutus>
Date: Fri, 15 Sep 2006 11:12:24 -0700 (PDT)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-534) Jobconf should set the default output
 value class to be Text
In-Reply-To: <17229556.1158260183016.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-534?page=all ]

Hairong Kuang updated HADOOP-534:
---------------------------------

    Attachment:     (was: seq_class_name.patch)

> Jobconf should set the default output value class to be Text
> ------------------------------------------------------------
>
>                 Key: HADOOP-534
>                 URL: http://issues.apache.org/jira/browse/HADOOP-534
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.6.1
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.6.2
>
>         Attachments: default_class.patch
>
>
> When input files are in the text format, the input value class is set to be Text. But the output value class is by default set to be UTF8. This causes the Grep example to fail.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 15 19:19:42 2006
Return-Path: 
 <hadoop-dev-return-3765-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 13221 invoked from network); 15 Sep 2006 19:19:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Sep 2006 19:19:42 -0000
Received: (qmail 80050 invoked by uid 500); 15 Sep 2006 19:19:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 79856 invoked by uid 500); 15 Sep 2006 19:19:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 79845 invoked by uid 99); 15 Sep 2006 19:19:41 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Sep 2006 12:19:41 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 75E0971434D
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Sep 2006 19:15:24 +0000 (GMT)
Message-ID: <31512110.1158347724473.JavaMail.jira@brutus>
Date: Fri, 15 Sep 2006 12:15:24 -0700 (PDT)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-533) TestDFSShellGenericOptions creates a
 sub-directory in conf/
In-Reply-To: <16243591.1158253282416.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-533?page=all ]

Hairong Kuang updated HADOOP-533:
---------------------------------

    Attachment: test_shell_option.patch

The patch creates the minidfs conf dir under build/test and removes it when the test completes.

> TestDFSShellGenericOptions creates a sub-directory in conf/
> -----------------------------------------------------------
>
>                 Key: HADOOP-533
>                 URL: http://issues.apache.org/jira/browse/HADOOP-533
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0, 0.6.0, 0.6.1
>            Reporter: Doug Cutting
>         Assigned To: Hairong Kuang
>            Priority: Minor
>         Attachments: test_shell_option.patch
>
>
> TestDFSShellGenericOptions creates a subdirectory of conf/.  This is not removed.
> Generally, the build & test process should not create or modify files outside of the build/ directory.  So the best fix would be to create this directory somewhere under build/, perhaps build/test.  Then it will be naturally removed by 'ant clean', will not show up in 'svn stat', etc.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 15 19:22:35 2006
Return-Path: 
 <hadoop-dev-return-3766-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20348 invoked from network); 15 Sep 2006 19:22:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Sep 2006 19:22:35 -0000
Received: (qmail 88194 invoked by uid 500); 15 Sep 2006 19:22:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 88162 invoked by uid 500); 15 Sep 2006 19:22:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88144 invoked by uid 99); 15 Sep 2006 19:22:34 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Sep 2006 12:22:34 -0700
Received: from [192.168.0.252] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id k8FJLQP31501;
	Fri, 15 Sep 2006 14:21:26 -0500
Message-ID: <450AFD2B.7020305@getopt.org>
Date: Fri, 15 Sep 2006 21:21:15 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
CC: hadoop-commits@lucene.apache.org
Subject: Re: svn commit: r446695 - in /lucene/hadoop/trunk: CHANGES.txt
 src/java/org/apache/hadoop/mapred/JobConf.java
References: <20060915191451.790E81A981A@eris.apache.org>
In-Reply-To: <20060915191451.790E81A981A@eris.apache.org>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

cutting@apache.org wrote:
> Author: cutting
> Date: Fri Sep 15 12:14:50 2006
> New Revision: 446695
>
> URL: http://svn.apache.org/viewvc?view=rev&rev=446695
> Log:
> HADOOP-534.  Change the default value classes in JobConf to be Text, not the now-deprecated UTF8.  Contributed by Hairong.
>   

Shouldn't such changes be reserved for major releases, i.e. for 0.7? 
Nutch relies heavily on UTF8 being the default, this change will make it 
more difficult to upgrade it to 0.6.2.

-- 
Best regards,
Andrzej Bialecki     <><
 ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com



From MAILER-DAEMON Fri Sep 15 21:37:42 2006
Return-Path: 
 <hadoop-dev-return-3767-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 55106 invoked from network); 15 Sep 2006 21:37:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Sep 2006 21:37:42 -0000
Received: (qmail 10716 invoked by uid 500); 15 Sep 2006 21:37:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 10519 invoked by uid 500); 15 Sep 2006 21:37:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 10510 invoked by uid 99); 15 Sep 2006 21:37:40 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Sep 2006 14:37:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BAC94714347
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Sep 2006 21:33:23 +0000 (GMT)
Message-ID: <27748975.1158356003762.JavaMail.jira@brutus>
Date: Fri, 15 Sep 2006 14:33:23 -0700 (PDT)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-540) Streaming should send keep-alive
 signals to Reporter
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Streaming should send keep-alive signals to Reporter
----------------------------------------------------

                 Key: HADOOP-540
                 URL: http://issues.apache.org/jira/browse/HADOOP-540
             Project: Hadoop
          Issue Type: Bug
          Components: contrib/streaming
            Reporter: Michel Tourn


The goal is to avoid the 10-minutes Task timeout with certain usages of hadoopStreaming.

This proposal does not introduce an artificial keep-alive heartbeat: 
it still requires the external Application to have activity.

Streaming should set Reporter status in more places:

1. output to side-effect files should (periodically) set reporter status.

2. Application's stderr data should (periodically) set reporter status.



-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 15 21:52:14 2006
Return-Path: 
 <hadoop-dev-return-3768-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 58306 invoked from network); 15 Sep 2006 21:52:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Sep 2006 21:52:14 -0000
Received: (qmail 37114 invoked by uid 500); 15 Sep 2006 21:52:14 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 36919 invoked by uid 500); 15 Sep 2006 21:52:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 36910 invoked by uid 99); 15 Sep 2006 21:52:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Sep 2006 14:52:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.109.112.28] (HELO mrout2-b.corp.dcn.yahoo.com)
 (216.109.112.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Sep 2006 14:52:03 -0700
Received: from [127.0.0.1] (proxy7.corp.yahoo.com [216.145.48.98])
	by mrout2-b.corp.dcn.yahoo.com (8.13.6/8.13.6/y.out) with ESMTP id
 k8FLnYWC089978;
	Fri, 15 Sep 2006 14:49:34 -0700 (PDT)
Message-ID: <450B1FEF.6070506@apache.org>
Date: Fri, 15 Sep 2006 14:49:35 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.5 (X11/20060728)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: svn commit: r446695 - in /lucene/hadoop/trunk: CHANGES.txt
 src/java/org/apache/hadoop/mapred/JobConf.java
References: <20060915191451.790E81A981A@eris.apache.org>
 <450AFD2B.7020305@getopt.org>
In-Reply-To: <450AFD2B.7020305@getopt.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Andrzej Bialecki wrote:
> Shouldn't such changes be reserved for major releases, i.e. for 0.7? 
> Nutch relies heavily on UTF8 being the default, this change will make it 
> more difficult to upgrade it to 0.6.2.

Good question.  I think the intent was to switch as much as possible 
from UTF8 to Text in 0.6.  Lots of things were switched, but these 
defaults were missed.  So I was considering 0.6 the major release that 
contains the change from UTF8 to Text in public APIs.

Right now, in 0.6, the default input format is not consistent 
(TextInputFormat now returns Text, not UTF8).  In our current monthly 
release strategy, the .0 releases are effectively alphas, candidates 
that sometimes are good enough to become the final release, and 
sometimes require point releases.

A consistent alternative might be to revert other places where UTF8 was 
changed to Text.

http://issues.apache.org/jira/browse/HADOOP-450 (TextInputFormat)
http://issues.apache.org/jira/browse/HADOOP-499 (contrib/streaming)
http://issues.apache.org/jira/browse/HADOOP-460 (smallJobsBenchmark)

So should we revert these in 0.6?

The patch of http://issues.apache.org/jira/browse/HADOOP-533 seemed like 
the simplest way to make 0.6 consistent.

I hate incompatible changes, but didn't see a way to make this change 
compatibly, yet it seems like a good change.  What do you think?

Doug

From MAILER-DAEMON Fri Sep 15 22:16:34 2006
Return-Path: 
 <hadoop-dev-return-3769-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 63521 invoked from network); 15 Sep 2006 22:16:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Sep 2006 22:16:34 -0000
Received: (qmail 75267 invoked by uid 500); 15 Sep 2006 22:16:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75241 invoked by uid 500); 15 Sep 2006 22:16:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75232 invoked by uid 99); 15 Sep 2006 22:16:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Sep 2006 15:16:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Sep 2006 15:16:21 -0700
Received: from [192.168.0.253] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id k8FMFDA13499
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Sep 2006 17:15:14 -0500
Message-ID: <450B25E2.6020807@getopt.org>
Date: Sat, 16 Sep 2006 00:14:58 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: svn commit: r446695 - in /lucene/hadoop/trunk: CHANGES.txt
 src/java/org/apache/hadoop/mapred/JobConf.java
References: <20060915191451.790E81A981A@eris.apache.org>
 <450AFD2B.7020305@getopt.org> <450B1FEF.6070506@apache.org>
In-Reply-To: <450B1FEF.6070506@apache.org>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Doug Cutting wrote:
> Andrzej Bialecki wrote:
>> Shouldn't such changes be reserved for major releases, i.e. for 0.7? 
>> Nutch relies heavily on UTF8 being the default, this change will make 
>> it more difficult to upgrade it to 0.6.2.
>
> Good question.  I think the intent was to switch as much as possible 
> from UTF8 to Text in 0.6.  Lots of things were switched, but these 
> defaults were missed.  So I was considering 0.6 the major release that 
> contains the change from UTF8 to Text in public APIs.

Hmm. Without having at least one official release where we have both 
UTF8 and Text, and the API is compatible, there will be no easy way to 
upgrade existing data. The latest release to offer this is 0.6.1, if I'm 
not mistaken - or perhaps 0.5.x, if we consider changes to SequenceFile 
format...?

If you consider users that collected terabytes of data using 0.6.1, 
there must be a way for them to upgrade this data to whatever release 
comes next. My thinking was that if we have a release that contains both 
UTF8 and Text, we could write a converter, to be included in application 
packages e.g. in Nutch in this specific release only.

Let's say I have data in SequenceFile-s and MapFile-s using 0.5.x 
formats. How would I go about converting them from UTF8 to Text? Would 
the current code read the data produced by 0.5.x code?

>
> Right now, in 0.6, the default input format is not consistent 
> (TextInputFormat now returns Text, not UTF8).  In our current monthly 
> release strategy, the .0 releases are effectively alphas, candidates 
> that sometimes are good enough to become the final release, and 
> sometimes require point releases.
>
> A consistent alternative might be to revert other places where UTF8 
> was changed to Text.
>
> http://issues.apache.org/jira/browse/HADOOP-450 (TextInputFormat)
> http://issues.apache.org/jira/browse/HADOOP-499 (contrib/streaming)
> http://issues.apache.org/jira/browse/HADOOP-460 (smallJobsBenchmark)
>
> So should we revert these in 0.6?

This looks like a lot of work ... perhaps we should just burn bridges, 
and make a 0.7.0 at this point, because it's definitely not API 
compatible with 0.6.1.

As for Nutch ... it could be upgraded to 0.6.1. On the other hand, Nutch 
is not compatible with 0.6.1 either, so perhaps it should be upgraded to 
0.7.0 (plus a suitable converter for existing data).


> I hate incompatible changes, but didn't see a way to make this change 
> compatibly, yet it seems like a good change.  What do you think?

I propose to skip 0.6.2, and go directly to 0.7.0. And I would 
appreciate any insights into the above questions  about converting old 
data ...

-- 
Best regards,
Andrzej Bialecki     <><
 ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com



From MAILER-DAEMON Fri Sep 15 22:40:05 2006
Return-Path: 
 <hadoop-dev-return-3770-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68405 invoked from network); 15 Sep 2006 22:40:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Sep 2006 22:40:05 -0000
Received: (qmail 2071 invoked by uid 500); 15 Sep 2006 22:40:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 2052 invoked by uid 500); 15 Sep 2006 22:40:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 2043 invoked by uid 99); 15 Sep 2006 22:40:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Sep 2006 15:40:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.145.54.171] (HELO mrout1.yahoo.com) (216.145.54.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Sep 2006 15:39:54 -0700
Received: from [127.0.0.1] (proxy7.corp.yahoo.com [216.145.48.98])
	by mrout1.yahoo.com (8.13.6/8.13.6/y.out) with ESMTP id k8FMbih8079567;
	Fri, 15 Sep 2006 15:37:44 -0700 (PDT)
Message-ID: <450B2B3A.1070409@apache.org>
Date: Fri, 15 Sep 2006 15:37:46 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.5 (X11/20060728)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: svn commit: r446695 - in /lucene/hadoop/trunk: CHANGES.txt
 src/java/org/apache/hadoop/mapred/JobConf.java
References: <20060915191451.790E81A981A@eris.apache.org>
 <450AFD2B.7020305@getopt.org> <450B1FEF.6070506@apache.org>
 <450B25E2.6020807@getopt.org>
In-Reply-To: <450B25E2.6020807@getopt.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Andrzej Bialecki wrote:
> If you consider users that collected terabytes of data using 0.6.1, 
> there must be a way for them to upgrade this data to whatever release 
> comes next. My thinking was that if we have a release that contains both 
> UTF8 and Text, we could write a converter, to be included in application 
> packages e.g. in Nutch in this specific release only.

UTF8 it still there, it's just deprecated and no longer the default.

> Let's say I have data in SequenceFile-s and MapFile-s using 0.5.x 
> formats. How would I go about converting them from UTF8 to Text? Would 
> the current code read the data produced by 0.5.x code?

SequenceFiles and MapFiles with UTF8 data can still be written and read 
just fine, since SequenceFile names the classes of its keys and values 
in the file header.  SequenceFile's format has changed, but the change 
is back-compatible, i.e., 0.6 can read sequence files written by 0.5, 
but not vice-versa.

To convert code will require code changes, and code changes may also be 
required to get things to run correctly, since TextInputFormat now 
returns Text instances rather than UTF8 instances.  Code changes are 
also required for things which relied on the default value types (mostly 
things which also used TextInputFormat).

We could find no way to seamlessly upgrade UTF8 so that it was no longer 
limited to less than 64k bytes, so decided it was better to make a clear 
break.  This also permitted us to change to using real UTF-8, rather 
than Java's modified UTF-8 encoding. 
(http://issues.apache.org/jira/browse/HADOOP-302)

>> So should we revert these in 0.6?
> 
> This looks like a lot of work ... perhaps we should just burn bridges, 
> and make a 0.7.0 at this point, because it's definitely not API 
> compatible with 0.6.1.

But 0.6.0 has not yet been a stable release that folks could use.

> As for Nutch ... it could be upgraded to 0.6.1. On the other hand, Nutch 
> is not compatible with 0.6.1 either, so perhaps it should be upgraded to 
> 0.7.0 (plus a suitable converter for existing data).

I think we should release 0.6.2 with this patch, and update Nutch to use 
that release.  In general, we should probably not update Nutch until 
Hadoop releases are stable, which sometimes takes a week.  This is 
isomorphic to calling it 0.7.0, but is more consistent with our monthly 
releases with bugfix point releases in the first week.  With a monthly 
release schedule we cannot afford to do a lot of testing (alphas, betas, 
etc.) before releases are made.  If an incompatible change is 
half-completed, then I think it's reasonable to complete it as a bugfix 
rather than force a new major version number.

Doug

From MAILER-DAEMON Sat Sep 16 08:44:40 2006
Return-Path: 
 <hadoop-dev-return-3771-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 70545 invoked from network); 16 Sep 2006 08:44:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Sep 2006 08:44:40 -0000
Received: (qmail 29019 invoked by uid 500); 16 Sep 2006 08:44:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28818 invoked by uid 500); 16 Sep 2006 08:44:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28802 invoked by uid 99); 16 Sep 2006 08:44:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Sep 2006 01:44:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Sep 2006 01:44:36 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5AC5E714316
	for <hadoop-dev@lucene.apache.org>; Sat, 16 Sep 2006 08:40:23 +0000 (GMT)
Message-ID: <17105013.1158396023369.JavaMail.jira@brutus>
Date: Sat, 16 Sep 2006 01:40:23 -0700 (PDT)
From: "Johannes Zillmann (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-156) Reducer  threw IOEOFException
In-Reply-To: <6737684.1145567465749.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-156?page=comments#action_12435198 ] 
            
Johannes Zillmann commented on HADOOP-156:
------------------------------------------

i've tackled the same problem with hadoop 0.3.2 after setting mapred.reduce.tasks from 'nodes' to 'nodes * mapred.tasktracker.tasks.maximum(==2)' like sugested in the wiki.

java.io.EOFException at java.io.DataInputStream.readFully(DataInputStream.java:178) at java.io.DataInputStream.readFully(DataInputStream.java:152) at org.apache.hadoop.io.SequenceFile$Reader.init(SequenceFile.java:263) at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:247) at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:237) at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:203) at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:847)  

> Reducer  threw IOEOFException
> -----------------------------
>
>                 Key: HADOOP-156
>                 URL: http://issues.apache.org/jira/browse/HADOOP-156
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.3.0
>            Reporter: Runping Qi
>
> A job was running with all the map tasks completed.
> The reducers were appending the intermediate files into the large intermediate file.
> java.io.EOFException was thrown when the record reader tried to read the version number
> during initialization. Here is the stack trace:
> java.io.EOFException 
>     at java.io.DataInputStream.readFully(DataInputStream.java:178) 
>     at java.io.DataInputStream.readFully(DataInputStream.java:152) 
>     at org.apache.hadoop.io.SequenceFile$Reader.init(SequenceFile.java:251) 
>     at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:236) 
>     at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:226) 
>     at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:205) 
>     at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:709) 
> Appearantly, the intermediate file was empty. I suspect that one map task
> generated empty intermidiate files for all the reducers, since all the reducers
> failed at the same place, and failed at the same place during retries.
> Unfortunately, we cannot know which map task generated the empty files,
> since the exception does not offer any clue.
> One simple enhancement is that the record reader should catch IOException and re-throw it with additional 
> information, such as the file name.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Sep 16 11:25:13 2006
Return-Path: 
 <hadoop-dev-return-3772-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 7341 invoked from network); 16 Sep 2006 11:25:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Sep 2006 11:25:13 -0000
Received: (qmail 2937 invoked by uid 500); 16 Sep 2006 11:25:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 2737 invoked by uid 500); 16 Sep 2006 11:25:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 2727 invoked by uid 99); 16 Sep 2006 11:25:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Sep 2006 04:25:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Sep 2006 04:25:11 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 53860714317
	for <hadoop-dev@lucene.apache.org>; Sat, 16 Sep 2006 11:21:23 +0000 (GMT)
Message-ID: <18879511.1158405683339.JavaMail.jira@brutus>
Date: Sat, 16 Sep 2006 04:21:23 -0700 (PDT)
From: "Andrzej Bialecki  (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-490) Add ability to send "signals" to
 jobs and tasks
In-Reply-To: <4288625.1156882102734.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-490?page=comments#action_12435209 ] 
            
Andrzej Bialecki  commented on HADOOP-490:
------------------------------------------

(Oops, I thought JIRA would include the link in the comment).

NUTCH-368 provides an implementation of a filesystem-based message queue system. This implementation is not Nutch specific, and can be easily moved to Hadoop if users find it useful.

> Add ability to send "signals" to jobs and tasks
> -----------------------------------------------
>
>                 Key: HADOOP-490
>                 URL: http://issues.apache.org/jira/browse/HADOOP-490
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.6.0
>            Reporter: Andrzej Bialecki 
>
> In some cases it would be useful to be able to "signal" a job and its tasks about some external condition, or to broadcast a specific message to all tasks in a job. Currently we can only send  a single pseudo-signal, that is to kill a job.
> Example 1: some jobs may be gracefully terminated even if they didn't complete all their work, e.g. Fetcher in Nutch may be running for a very long time if it blocks on relatively few sites left over from the fetchlist. In such case it would be very useful to send it a message requesting that it discards the rest of its input and gracefully completes its map tasks.
> Example 2: available bandwidth for fetching may be different at different times of day, e.g. daytime vs. nighttime, or total external link usage by other applications. Fetcher jobs often run for several hours. It would be good to be able to send a "signal" to the Fetcher to throttle or un-throttle its bandwidth usage depending on external conditions.
> Job implementations could react to these messages either by implementing a method, or by registering a listener, whichever seems more natural.
> I'm not quite sure how to go about implementing it, I guess this would have to be a part of  TaskUmbilicalProtocol but my knowledge here is a bit fuzzy ... ;) Comments are welcome.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Sep 16 19:21:13 2006
Return-Path: 
 <hadoop-dev-return-3773-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91143 invoked from network); 16 Sep 2006 19:21:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Sep 2006 19:21:13 -0000
Received: (qmail 93197 invoked by uid 500); 16 Sep 2006 19:21:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 93165 invoked by uid 500); 16 Sep 2006 19:21:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 93156 invoked by uid 99); 16 Sep 2006 19:21:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Sep 2006 12:21:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Sep 2006 12:21:11 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6BBDA714317
	for <hadoop-dev@lucene.apache.org>; Sat, 16 Sep 2006 19:17:23 +0000 (GMT)
Message-ID: <29236954.1158434243438.JavaMail.jira@brutus>
Date: Sat, 16 Sep 2006 12:17:23 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-156) Reducer  threw IOEOFException
In-Reply-To: <6737684.1145567465749.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-156?page=comments#action_12435260 ] 
            
Sanjay Dahiya commented on HADOOP-156:
--------------------------------------

I see the same problem with 0.6.2. But I suspect maps are producing correct data. From the logs it appears the map output was not empty for all reduces as some other reduce tasks read output and were successfully finished. For the map outputs which were not available when reduces asked for it, i can see consistently that task tracker assumes maps are done and deletes the files. after this reduces ask for the map data and the failures cascades.

Here is a common pattern -

2006-09-15 15:15:59,564 INFO org.apache.hadoop.mapred.TaskRunner: task_0001_m_000341_0 done; removing files.

For this task - before it got cleaned up a reduce task copied data successfully and finished. 

2006-09-15 02:00:50,537 INFO org.apache.hadoop.mapred.TaskRunner: task_0001_r_000524_0 done copying task_0001_m_000341_0 output from kry2900.inktomisearch.com.

But after the cleanup another reduce task tries to copy and fails -

2006-09-15 15:16:01,794 WARN org.apache.hadoop.mapred.TaskTracker: Http server (getMapOutput.jsp): java.io.FileNotFoundException: /***/hadoop/mapred/local/task_0001_m_000341_0/part-94.out

On reduce task we get same EOFException. 


> Reducer  threw IOEOFException
> -----------------------------
>
>                 Key: HADOOP-156
>                 URL: http://issues.apache.org/jira/browse/HADOOP-156
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.3.0
>            Reporter: Runping Qi
>
> A job was running with all the map tasks completed.
> The reducers were appending the intermediate files into the large intermediate file.
> java.io.EOFException was thrown when the record reader tried to read the version number
> during initialization. Here is the stack trace:
> java.io.EOFException 
>     at java.io.DataInputStream.readFully(DataInputStream.java:178) 
>     at java.io.DataInputStream.readFully(DataInputStream.java:152) 
>     at org.apache.hadoop.io.SequenceFile$Reader.init(SequenceFile.java:251) 
>     at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:236) 
>     at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:226) 
>     at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:205) 
>     at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:709) 
> Appearantly, the intermediate file was empty. I suspect that one map task
> generated empty intermidiate files for all the reducers, since all the reducers
> failed at the same place, and failed at the same place during retries.
> Unfortunately, we cannot know which map task generated the empty files,
> since the exception does not offer any clue.
> One simple enhancement is that the record reader should catch IOException and re-throw it with additional 
> information, such as the file name.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Sep 16 19:23:14 2006
Return-Path: 
 <hadoop-dev-return-3774-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91589 invoked from network); 16 Sep 2006 19:23:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Sep 2006 19:23:14 -0000
Received: (qmail 95773 invoked by uid 500); 16 Sep 2006 19:23:14 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95667 invoked by uid 500); 16 Sep 2006 19:23:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95658 invoked by uid 99); 16 Sep 2006 19:23:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Sep 2006 12:23:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Sep 2006 12:23:12 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6C40E714317
	for <hadoop-dev@lucene.apache.org>; Sat, 16 Sep 2006 19:19:24 +0000 (GMT)
Message-ID: <1027517.1158434364441.JavaMail.jira@brutus>
Date: Sat, 16 Sep 2006 12:19:24 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-156) Reducer  threw IOEOFException
In-Reply-To: <6737684.1145567465749.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-156?page=all ]

Sanjay Dahiya updated HADOOP-156:
---------------------------------

    Comment: was deleted

> Reducer  threw IOEOFException
> -----------------------------
>
>                 Key: HADOOP-156
>                 URL: http://issues.apache.org/jira/browse/HADOOP-156
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.3.0
>            Reporter: Runping Qi
>
> A job was running with all the map tasks completed.
> The reducers were appending the intermediate files into the large intermediate file.
> java.io.EOFException was thrown when the record reader tried to read the version number
> during initialization. Here is the stack trace:
> java.io.EOFException 
>     at java.io.DataInputStream.readFully(DataInputStream.java:178) 
>     at java.io.DataInputStream.readFully(DataInputStream.java:152) 
>     at org.apache.hadoop.io.SequenceFile$Reader.init(SequenceFile.java:251) 
>     at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:236) 
>     at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:226) 
>     at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:205) 
>     at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:709) 
> Appearantly, the intermediate file was empty. I suspect that one map task
> generated empty intermidiate files for all the reducers, since all the reducers
> failed at the same place, and failed at the same place during retries.
> Unfortunately, we cannot know which map task generated the empty files,
> since the exception does not offer any clue.
> One simple enhancement is that the record reader should catch IOException and re-throw it with additional 
> information, such as the file name.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Sep 16 19:25:13 2006
Return-Path: 
 <hadoop-dev-return-3775-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92009 invoked from network); 16 Sep 2006 19:25:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Sep 2006 19:25:13 -0000
Received: (qmail 96642 invoked by uid 500); 16 Sep 2006 19:25:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 96613 invoked by uid 500); 16 Sep 2006 19:25:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 96603 invoked by uid 99); 16 Sep 2006 19:25:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Sep 2006 12:25:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Sep 2006 12:25:11 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4B9F4714315
	for <hadoop-dev@lucene.apache.org>; Sat, 16 Sep 2006 19:21:23 +0000 (GMT)
Message-ID: <27236791.1158434483307.JavaMail.jira@brutus>
Date: Sat, 16 Sep 2006 12:21:23 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-156) Reducer  threw IOEOFException
In-Reply-To: <6737684.1145567465749.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-156?page=comments#action_12435262 ] 
            
Sanjay Dahiya commented on HADOOP-156:
--------------------------------------

I see the same problem with 0.6.2. But I suspect maps are producing correct data. From the logs it appears the map output was not empty for all reduces as some other reduce tasks read output and were successfully finished. For the map outputs which were not available when reduces asked for it, i can see consistently that task tracker assumes maps are done and deletes the files. after this reduces ask for the map data and the failures cascades.

Here is a common pattern -

2006-09-15 15:15:59,564 INFO org.apache.hadoop.mapred.TaskRunner: task_0001_m_000341_0 done; removing files.

For this task - before it got cleaned up a reduce task copied data successfully and finished. 

2006-09-15 02:00:50,537 INFO org.apache.hadoop.mapred.TaskRunner: task_0001_r_000524_0 done copying task_0001_m_000341_0 output.

But after the cleanup another reduce task tries to copy and fails -

2006-09-15 15:16:01,794 WARN org.apache.hadoop.mapred.TaskTracker: Http server (getMapOutput.jsp): java.io.FileNotFoundException: /***/hadoop/mapred/local/task_0001_m_000341_0/part-94.out

On reduce task we get same EOFException. 


> Reducer  threw IOEOFException
> -----------------------------
>
>                 Key: HADOOP-156
>                 URL: http://issues.apache.org/jira/browse/HADOOP-156
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.3.0
>            Reporter: Runping Qi
>
> A job was running with all the map tasks completed.
> The reducers were appending the intermediate files into the large intermediate file.
> java.io.EOFException was thrown when the record reader tried to read the version number
> during initialization. Here is the stack trace:
> java.io.EOFException 
>     at java.io.DataInputStream.readFully(DataInputStream.java:178) 
>     at java.io.DataInputStream.readFully(DataInputStream.java:152) 
>     at org.apache.hadoop.io.SequenceFile$Reader.init(SequenceFile.java:251) 
>     at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:236) 
>     at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:226) 
>     at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:205) 
>     at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:709) 
> Appearantly, the intermediate file was empty. I suspect that one map task
> generated empty intermidiate files for all the reducers, since all the reducers
> failed at the same place, and failed at the same place during retries.
> Unfortunately, we cannot know which map task generated the empty files,
> since the exception does not offer any clue.
> One simple enhancement is that the record reader should catch IOException and re-throw it with additional 
> information, such as the file name.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sun Sep 17 15:46:21 2006
Return-Path: 
 <hadoop-dev-return-3776-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 87690 invoked from network); 17 Sep 2006 15:46:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Sep 2006 15:46:21 -0000
Received: (qmail 12496 invoked by uid 500); 17 Sep 2006 15:46:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 12467 invoked by uid 500); 17 Sep 2006 15:46:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 12458 invoked by uid 99); 17 Sep 2006 15:46:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Sep 2006 08:46:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Sep 2006 08:46:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 532F9410011
	for <hadoop-dev@lucene.apache.org>; Sun, 17 Sep 2006 15:42:22 +0000 (GMT)
Message-ID: <8469435.1158507742338.JavaMail.jira@brutus>
Date: Sun, 17 Sep 2006 08:42:22 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-541) Reduces asking for map ouput for dead
 tasktrackers causes NullPointerException on JobTracker
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Reduces asking for map ouput for dead tasktrackers causes NullPointerException on JobTracker
--------------------------------------------------------------------------------------------

                 Key: HADOOP-541
                 URL: http://issues.apache.org/jira/browse/HADOOP-541
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.6.1
            Reporter: Sanjay Dahiya


For dead task trackers, reduce tasks invoking locateMapOutputs(), results in NullPointerException. 


                                if (now - newProfile.getLastSeen() > TASKTRACKER_EXPIRY_INTERVAL) {
                                    // Remove completely
                                    updateTaskTrackerStatus(trackerName, null);     <------ Task tracker removed.



            result.add(new MapOutputLocation(status.getTaskId(),
                                              mapTasksNeeded[i],
                                              tracker.getHost(),         <------------NullPointerException
                                              tracker.getHttpPort()));
 

2006-09-15 15:15:52,634 INFO org.apache.hadoop.ipc.Server: Server handler 6 on 50020 call error: java.io.IOException: java.lang.NullPointerException
java.io.IOException: java.lang.NullPointerException
        at org.apache.hadoop.mapred.JobTracker.locateMapOutputs(JobTracker.java:956)
        at sun.reflect.GeneratedMethodAccessor10.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:333)
        at org.apache.hadoop.ipc.Server$Handler.run(Server.java:473)


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 18 10:05:42 2006
Return-Path: 
 <hadoop-dev-return-3777-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 42760 invoked from network); 18 Sep 2006 10:05:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Sep 2006 10:05:42 -0000
Received: (qmail 64705 invoked by uid 500); 18 Sep 2006 10:05:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64685 invoked by uid 500); 18 Sep 2006 10:05:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64669 invoked by uid 99); 18 Sep 2006 10:05:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Sep 2006 03:05:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Sep 2006 03:05:37 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 732F57142F4
	for <hadoop-dev@lucene.apache.org>; Mon, 18 Sep 2006 10:01:23 +0000 (GMT)
Message-ID: <3629578.1158573683468.JavaMail.jira@brutus>
Date: Mon, 18 Sep 2006 03:01:23 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-156) Reducer  threw IOEOFException
In-Reply-To: <6737684.1145567465749.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-156?page=comments#action_12435447 ] 
            
Sanjay Dahiya commented on HADOOP-156:
--------------------------------------

Also the task tracker running the map task in question was *not* reported lost on jobtracker and hence reinitialized causing map output to cleanup. 

> Reducer  threw IOEOFException
> -----------------------------
>
>                 Key: HADOOP-156
>                 URL: http://issues.apache.org/jira/browse/HADOOP-156
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.3.0
>            Reporter: Runping Qi
>
> A job was running with all the map tasks completed.
> The reducers were appending the intermediate files into the large intermediate file.
> java.io.EOFException was thrown when the record reader tried to read the version number
> during initialization. Here is the stack trace:
> java.io.EOFException 
>     at java.io.DataInputStream.readFully(DataInputStream.java:178) 
>     at java.io.DataInputStream.readFully(DataInputStream.java:152) 
>     at org.apache.hadoop.io.SequenceFile$Reader.init(SequenceFile.java:251) 
>     at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:236) 
>     at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:226) 
>     at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:205) 
>     at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:709) 
> Appearantly, the intermediate file was empty. I suspect that one map task
> generated empty intermidiate files for all the reducers, since all the reducers
> failed at the same place, and failed at the same place during retries.
> Unfortunately, we cannot know which map task generated the empty files,
> since the exception does not offer any clue.
> One simple enhancement is that the record reader should catch IOException and re-throw it with additional 
> information, such as the file name.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 18 12:46:11 2006
Return-Path: 
 <hadoop-dev-return-3779-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 19288 invoked from network); 18 Sep 2006 12:46:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Sep 2006 12:46:11 -0000
Received: (qmail 2843 invoked by uid 500); 18 Sep 2006 12:46:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 2708 invoked by uid 500); 18 Sep 2006 12:46:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 2683 invoked by uid 99); 18 Sep 2006 12:46:09 -0000
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Sep 2006 05:46:09 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6A16B7142F1
	for <hadoop-dev@lucene.apache.org>; Mon, 18 Sep 2006 12:12:23 +0000 (GMT)
Message-ID: <19665008.1158581543431.JavaMail.jira@brutus>
Date: Mon, 18 Sep 2006 05:12:23 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-156) Reducer  threw IOEOFException
In-Reply-To: <6737684.1145567465749.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-156?page=comments#action_12435464 ] 
            
Sanjay Dahiya commented on HADOOP-156:
--------------------------------------

ok, the EOFException in the case I posted earlier is not a critical issue. it happened after the job was aborted on job tracker, some task trackers cleaned up map outputs while reduce tasks were still running on others. 

However there are genuine EOFExceptions as well which occur in sort phase on reduce tasks, which may be due to malformed map output. e.g. following 

2006-09-15 08:04:13,900 INFO org.apache.hadoop.mapred.TaskTracker: task_0001_r_000511_0 0.33333334% reduce > sort

2006-09-15 08:04:13,996 INFO org.apache.hadoop.mapred.TaskRunner: task_0001_r_000511_0 06/09/15 08:04:13 WARN mapred.TaskTracker: Error running child
2006-09-15 08:04:13,996 INFO org.apache.hadoop.mapred.TaskRunner: task_0001_r_000511_0 java.io.EOFException
2006-09-15 08:04:13,996 INFO org.apache.hadoop.mapred.TaskRunner: task_0001_r_000511_0  at java.io.DataInputStream.readFully(DataInputStream.java:178)
2006-09-15 08:04:13,996 INFO org.apache.hadoop.mapred.TaskRunner: task_0001_r_000511_0  at java.io.DataInputStream.readFully(DataInputStream.java:152)
2006-09-15 08:04:13,996 INFO org.apache.hadoop.mapred.TaskRunner: task_0001_r_000511_0  at org.apache.hadoop.io.SequenceFile$Reader.init(SequenceFile.java:952)
2006-09-15 08:04:13,996 INFO org.apache.hadoop.mapred.TaskRunner: task_0001_r_000511_0  at org.apache.hadoop.io.SequenceFile$Reader.<init>(SequenceFile.java:937)
2006-09-15 08:04:13,996 INFO org.apache.hadoop.mapred.TaskRunner: task_0001_r_000511_0  at org.apache.hadoop.io.SequenceFile$Reader.<init>(SequenceFile.java:928)
2006-09-15 08:04:13,996 INFO org.apache.hadoop.mapred.TaskRunner: task_0001_r_000511_0  at org.apache.hadoop.io.SequenceFile$Sorter$SortPass.run(SequenceFile.java:1594)
2006-09-15 08:04:13,996 INFO org.apache.hadoop.mapred.TaskRunner: task_0001_r_000511_0  at org.apache.hadoop.io.SequenceFile$Sorter.sortPass(SequenceFile.java:1523)
2006-09-15 08:04:13,996 INFO org.apache.hadoop.mapred.TaskRunner: task_0001_r_000511_0  at org.apache.hadoop.io.SequenceFile$Sorter.sort(SequenceFile.java:1496)
2006-09-15 08:04:13,996 INFO org.apache.hadoop.mapred.TaskRunner: task_0001_r_000511_0  at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:240)
2006-09-15 08:04:13,996 INFO org.apache.hadoop.mapred.TaskRunner: task_0001_r_000511_0  at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1165)


> Reducer  threw IOEOFException
> -----------------------------
>
>                 Key: HADOOP-156
>                 URL: http://issues.apache.org/jira/browse/HADOOP-156
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.3.0
>            Reporter: Runping Qi
>
> A job was running with all the map tasks completed.
> The reducers were appending the intermediate files into the large intermediate file.
> java.io.EOFException was thrown when the record reader tried to read the version number
> during initialization. Here is the stack trace:
> java.io.EOFException 
>     at java.io.DataInputStream.readFully(DataInputStream.java:178) 
>     at java.io.DataInputStream.readFully(DataInputStream.java:152) 
>     at org.apache.hadoop.io.SequenceFile$Reader.init(SequenceFile.java:251) 
>     at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:236) 
>     at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:226) 
>     at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:205) 
>     at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:709) 
> Appearantly, the intermediate file was empty. I suspect that one map task
> generated empty intermidiate files for all the reducers, since all the reducers
> failed at the same place, and failed at the same place during retries.
> Unfortunately, we cannot know which map task generated the empty files,
> since the exception does not offer any clue.
> One simple enhancement is that the record reader should catch IOException and re-throw it with additional 
> information, such as the file name.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 18 12:25:50 2006
Return-Path: 
 <hadoop-dev-return-3778-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 14126 invoked from network); 18 Sep 2006 12:25:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Sep 2006 12:25:50 -0000
Received: (qmail 72235 invoked by uid 500); 18 Sep 2006 12:25:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72024 invoked by uid 500); 18 Sep 2006 12:25:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72009 invoked by uid 99); 18 Sep 2006 12:25:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Sep 2006 05:25:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Sep 2006 05:25:47 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5D67E7142FF
	for <hadoop-dev@lucene.apache.org>; Mon, 18 Sep 2006 12:21:23 +0000 (GMT)
Message-ID: <17800012.1158582083379.JavaMail.jira@brutus>
Date: Mon, 18 Sep 2006 05:21:23 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Deleted: (HADOOP-541) Reduces asking for map ouput for dead
 tasktrackers causes NullPointerException on JobTracker
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-541?page=all ]

Sanjay Dahiya deleted HADOOP-541:
---------------------------------


> Reduces asking for map ouput for dead tasktrackers causes NullPointerException on JobTracker
> --------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-541
>                 URL: http://issues.apache.org/jira/browse/HADOOP-541
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Sanjay Dahiya
>
> For dead task trackers, reduce tasks invoking locateMapOutputs(), results in NullPointerException. 
>                                 if (now - newProfile.getLastSeen() > TASKTRACKER_EXPIRY_INTERVAL) {
>                                     // Remove completely
>                                     updateTaskTrackerStatus(trackerName, null);     <------ Task tracker removed.
>             result.add(new MapOutputLocation(status.getTaskId(),
>                                               mapTasksNeeded[i],
>                                               tracker.getHost(),         <------------NullPointerException
>                                               tracker.getHttpPort()));
>  
> 2006-09-15 15:15:52,634 INFO org.apache.hadoop.ipc.Server: Server handler 6 on 50020 call error: java.io.IOException: java.lang.NullPointerException
> java.io.IOException: java.lang.NullPointerException
>         at org.apache.hadoop.mapred.JobTracker.locateMapOutputs(JobTracker.java:956)
>         at sun.reflect.GeneratedMethodAccessor10.invoke(Unknown Source)
>         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>         at java.lang.reflect.Method.invoke(Method.java:585)
>         at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:333)
>         at org.apache.hadoop.ipc.Server$Handler.run(Server.java:473)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 18 16:57:18 2006
Return-Path: 
 <hadoop-dev-return-3780-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 5925 invoked from network); 18 Sep 2006 16:57:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Sep 2006 16:57:18 -0000
Received: (qmail 87095 invoked by uid 500); 18 Sep 2006 16:57:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86662 invoked by uid 500); 18 Sep 2006 16:57:16 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86653 invoked by uid 99); 18 Sep 2006 16:57:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Sep 2006 09:57:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Sep 2006 09:57:15 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 98DED7142FB
	for <hadoop-dev@lucene.apache.org>; Mon, 18 Sep 2006 16:53:23 +0000 (GMT)
Message-ID: <5869526.1158598403623.JavaMail.jira@brutus>
Date: Mon, 18 Sep 2006 09:53:23 -0700 (PDT)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-542) on-the-fly merge sort, HADOOP-540,
 reformat
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

on-the-fly merge sort, HADOOP-540, reformat
-------------------------------------------

                 Key: HADOOP-542
                 URL: http://issues.apache.org/jira/browse/HADOOP-542
             Project: Hadoop
          Issue Type: New Feature
          Components: contrib/streaming
         Environment: Tested on Linux and Windows

            Reporter: Michel Tourn


A large patch for streaming. Changes:

Support for on-the-fly merge sort of multiple map input files.
This supposes that the inputs are already sorted.

Support for reducer-NONE side-effects to a single local output with DFS inputs.
This can be used to do an on-the-fly merge-sort of remote sorted files.
(Compare to DFSShell -getmerge which does *catenation* of remote sorted files)
The single output can be a regular file, a named pipe or a socket.
URI Syntax: -mapsideoutput [file:/C:/win|file:/unix/|socket://host:port]

Add an optional JUnit test for on-the-fly merge-sort.
It requires Unix tools. It also works with cygwin.

If it has been more than 10 secs since last time we did this:
call reporter.setStatus() when consuming a stderr line from the Application.
Calling setStatus with reducer-NONE was already done as part of HADOOP-413.
So overall this resolves HADOOP-540.

Reformat streaming code to conform to Hadoop conventions 
 (indent 2 spaces, opening bracket on same-line) 


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 18 16:59:17 2006
Return-Path: 
 <hadoop-dev-return-3781-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 6462 invoked from network); 18 Sep 2006 16:59:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Sep 2006 16:59:17 -0000
Received: (qmail 89534 invoked by uid 500); 18 Sep 2006 16:59:16 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 89509 invoked by uid 500); 18 Sep 2006 16:59:16 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 89496 invoked by uid 99); 18 Sep 2006 16:59:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Sep 2006 09:59:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Sep 2006 09:59:15 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 62C177142F7
	for <hadoop-dev@lucene.apache.org>; Mon, 18 Sep 2006 16:55:23 +0000 (GMT)
Message-ID: <15707442.1158598523402.JavaMail.jira@brutus>
Date: Mon, 18 Sep 2006 09:55:23 -0700 (PDT)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-542) on-the-fly merge sort, HADOOP-540,
 reformat
In-Reply-To: <5869526.1158598403623.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-542?page=all ]

Michel Tourn updated HADOOP-542:
--------------------------------

    Attachment: bigmux.patch2

> on-the-fly merge sort, HADOOP-540, reformat
> -------------------------------------------
>
>                 Key: HADOOP-542
>                 URL: http://issues.apache.org/jira/browse/HADOOP-542
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: contrib/streaming
>         Environment: Tested on Linux and Windows
>            Reporter: Michel Tourn
>         Attachments: bigmux.patch2
>
>
> A large patch for streaming. Changes:
> Support for on-the-fly merge sort of multiple map input files.
> This supposes that the inputs are already sorted.
> Support for reducer-NONE side-effects to a single local output with DFS inputs.
> This can be used to do an on-the-fly merge-sort of remote sorted files.
> (Compare to DFSShell -getmerge which does *catenation* of remote sorted files)
> The single output can be a regular file, a named pipe or a socket.
> URI Syntax: -mapsideoutput [file:/C:/win|file:/unix/|socket://host:port]
> Add an optional JUnit test for on-the-fly merge-sort.
> It requires Unix tools. It also works with cygwin.
> If it has been more than 10 secs since last time we did this:
> call reporter.setStatus() when consuming a stderr line from the Application.
> Calling setStatus with reducer-NONE was already done as part of HADOOP-413.
> So overall this resolves HADOOP-540.
> Reformat streaming code to conform to Hadoop conventions 
>  (indent 2 spaces, opening bracket on same-line) 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 18 17:25:17 2006
Return-Path: 
 <hadoop-dev-return-3782-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 13578 invoked from network); 18 Sep 2006 17:25:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Sep 2006 17:25:17 -0000
Received: (qmail 32685 invoked by uid 500); 18 Sep 2006 17:25:16 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 32640 invoked by uid 500); 18 Sep 2006 17:25:15 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 32630 invoked by uid 99); 18 Sep 2006 17:25:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Sep 2006 10:25:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Sep 2006 10:25:15 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 52856714302
	for <hadoop-dev@lucene.apache.org>; Mon, 18 Sep 2006 17:21:23 +0000 (GMT)
Message-ID: <18722465.1158600083335.JavaMail.jira@brutus>
Date: Mon, 18 Sep 2006 10:21:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-534) Jobconf should set the default output
 value class to be Text
In-Reply-To: <17229556.1158260183016.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-534?page=all ]

Doug Cutting resolved HADOOP-534.
---------------------------------

    Resolution: Fixed

I committed this on Friday.  Thanks, Hairong!

> Jobconf should set the default output value class to be Text
> ------------------------------------------------------------
>
>                 Key: HADOOP-534
>                 URL: http://issues.apache.org/jira/browse/HADOOP-534
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.6.1
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.6.2
>
>         Attachments: default_class.patch
>
>
> When input files are in the text format, the input value class is set to be Text. But the output value class is by default set to be UTF8. This causes the Grep example to fail.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 18 20:55:40 2006
Return-Path: 
 <hadoop-dev-return-3783-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85418 invoked from network); 18 Sep 2006 20:55:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Sep 2006 20:55:40 -0000
Received: (qmail 28392 invoked by uid 500); 18 Sep 2006 20:55:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28261 invoked by uid 500); 18 Sep 2006 20:55:16 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28202 invoked by uid 99); 18 Sep 2006 20:55:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Sep 2006 13:55:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Sep 2006 13:55:14 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 08AB97142F7
	for <hadoop-dev@lucene.apache.org>; Mon, 18 Sep 2006 20:51:22 +0000 (GMT)
Message-ID: <5323061.1158612682032.JavaMail.jira@brutus>
Date: Mon, 18 Sep 2006 13:51:22 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-536) Broke ant test on windows
In-Reply-To: <22116506.1158280342390.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-536?page=all ]

Sameer Paranjpye updated HADOOP-536:
------------------------------------

        Fix Version/s: 0.7.0
    Affects Version/s: 0.6.2

> Broke ant test on windows
> -------------------------
>
>                 Key: HADOOP-536
>                 URL: http://issues.apache.org/jira/browse/HADOOP-536
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.6.2
>            Reporter: Mahadev konar
>             Fix For: 0.7.0
>
>         Attachments: caching_bug.txt
>
>
> One of my junit tests breaks on windows because of a bug in the junit test code. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 18 20:57:19 2006
Return-Path: 
 <hadoop-dev-return-3784-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86676 invoked from network); 18 Sep 2006 20:57:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Sep 2006 20:57:19 -0000
Received: (qmail 34101 invoked by uid 500); 18 Sep 2006 20:57:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 34060 invoked by uid 500); 18 Sep 2006 20:57:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 34051 invoked by uid 99); 18 Sep 2006 20:57:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Sep 2006 13:57:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Sep 2006 13:57:17 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3D31B7142FB
	for <hadoop-dev@lucene.apache.org>; Mon, 18 Sep 2006 20:53:25 +0000 (GMT)
Message-ID: <28756951.1158612805248.JavaMail.jira@brutus>
Date: Mon, 18 Sep 2006 13:53:25 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-533) TestDFSShellGenericOptions creates a
 sub-directory in conf/
In-Reply-To: <16243591.1158253282416.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-533?page=all ]

Sameer Paranjpye updated HADOOP-533:
------------------------------------

        Fix Version/s: 0.7.0
    Affects Version/s: 0.6.2

> TestDFSShellGenericOptions creates a sub-directory in conf/
> -----------------------------------------------------------
>
>                 Key: HADOOP-533
>                 URL: http://issues.apache.org/jira/browse/HADOOP-533
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0, 0.6.0, 0.6.1, 0.6.2
>            Reporter: Doug Cutting
>         Assigned To: Hairong Kuang
>            Priority: Minor
>             Fix For: 0.7.0
>
>         Attachments: test_shell_option.patch
>
>
> TestDFSShellGenericOptions creates a subdirectory of conf/.  This is not removed.
> Generally, the build & test process should not create or modify files outside of the build/ directory.  So the best fix would be to create this directory somewhere under build/, perhaps build/test.  Then it will be naturally removed by 'ant clean', will not show up in 'svn stat', etc.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 18 21:38:33 2006
Return-Path: 
 <hadoop-dev-return-3786-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 2489 invoked from network); 18 Sep 2006 21:38:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Sep 2006 21:38:33 -0000
Received: (qmail 99108 invoked by uid 500); 18 Sep 2006 21:38:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98908 invoked by uid 500); 18 Sep 2006 21:38:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98899 invoked by uid 99); 18 Sep 2006 21:38:32 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Sep 2006 14:38:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:38454] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 4A/E2-22826-9AE0F054 for <hadoop-dev@lucene.apache.org>;
 Mon, 18 Sep 2006 14:24:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E01A07142F8
	for <hadoop-dev@lucene.apache.org>; Mon, 18 Sep 2006 21:21:23 +0000 (GMT)
Message-ID: <15054385.1158614483915.JavaMail.jira@brutus>
Date: Mon, 18 Sep 2006 14:21:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-533) TestDFSShellGenericOptions creates a
 sub-directory in conf/
In-Reply-To: <16243591.1158253282416.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-533?page=all ]

Doug Cutting resolved HADOOP-533.
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Hairong!

> TestDFSShellGenericOptions creates a sub-directory in conf/
> -----------------------------------------------------------
>
>                 Key: HADOOP-533
>                 URL: http://issues.apache.org/jira/browse/HADOOP-533
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0, 0.6.0, 0.6.1, 0.6.2
>            Reporter: Doug Cutting
>         Assigned To: Hairong Kuang
>            Priority: Minor
>             Fix For: 0.7.0
>
>         Attachments: test_shell_option.patch
>
>
> TestDFSShellGenericOptions creates a subdirectory of conf/.  This is not removed.
> Generally, the build & test process should not create or modify files outside of the build/ directory.  So the best fix would be to create this directory somewhere under build/, perhaps build/test.  Then it will be naturally removed by 'ant clean', will not show up in 'svn stat', etc.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 18 21:43:29 2006
Return-Path: 
 <hadoop-dev-return-3787-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 6080 invoked from network); 18 Sep 2006 21:43:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Sep 2006 21:43:29 -0000
Received: (qmail 8182 invoked by uid 500); 18 Sep 2006 21:43:07 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 7854 invoked by uid 500); 18 Sep 2006 21:43:06 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 7558 invoked by uid 99); 18 Sep 2006 21:42:58 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Sep 2006 14:42:54 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 53F33714305
	for <hadoop-dev@lucene.apache.org>; Mon, 18 Sep 2006 21:34:26 +0000 (GMT)
Message-ID: <15984722.1158615266341.JavaMail.jira@brutus>
Date: Mon, 18 Sep 2006 14:34:26 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-519) HDFS File API should be extended to
 include positional read
In-Reply-To: <7528490.1157757622361.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-519?page=all ]

Doug Cutting updated HADOOP-519:
--------------------------------

    Status: Open  (was: Patch Available)

Overall this looks like a great addition that is well-implemented.  A few nits:

In DFSClient, you've duplicated a lot of code from blockSeekTo in fetchBlockByteRange.  Can you perhaps instead add one or two more methods that capture this common code?

The javadoc for read(long,byte[], int,int) should say "read up to" or "attempt to read", since it may not read all of the bytes (that's what readFully is for).

The javadoc comments on the new FSInputStream methods do not add anything useful to what would be inherited from the interface, and what they do add makes them inappropriate for inheritance by subclasses.  So these should be removed.

> HDFS File API should be extended to include positional read
> -----------------------------------------------------------
>
>                 Key: HADOOP-519
>                 URL: http://issues.apache.org/jira/browse/HADOOP-519
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.6.0
>         Environment: All
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.7.0
>
>         Attachments: pread.patch
>
>
> HDFS Input streams should support positional read. Positional read (such as the pread syscall on linux) allows reading for a specified offset without affecting the current file offset. Since the underlying file state is not touched, pread can be used efficiently in multi-threaded programs.
> Here is how I plan to implement it.
> Provide PositionedReadable interface, with the following methods:
> int read(long position, byte[] buffer, int offset, int length);
> void readFully(long position, byte[] buffer, int offset, int length);
> void readFully(long position, byte[] buffer);
> Abstract class FSInputStream would provide default implementation of the above methods using getPos(), seek() and read() methods. The default implementation is inefficient in multi-threaded programs since it locks the object while seeking, reading, and restoring to old state.
> DFSClient.DFSInputStream, which extends FSInputStream will provide an efficient non-synchronized implementation for above calls.
> In addition, FSDataInputStream, which is a wrapper around FSInputStream, will provide wrapper methods for above read methods as well.
> Patch forthcoming early next week.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 18 22:05:00 2006
Return-Path: 
 <hadoop-dev-return-3788-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 13122 invoked from network); 18 Sep 2006 22:05:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Sep 2006 22:05:00 -0000
Received: (qmail 53293 invoked by uid 500); 18 Sep 2006 22:04:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53182 invoked by uid 500); 18 Sep 2006 22:04:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53173 invoked by uid 99); 18 Sep 2006 22:04:59 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Sep 2006 15:04:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:38558] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 29/34-22826-A081F054 for <hadoop-dev@lucene.apache.org>;
 Mon, 18 Sep 2006 15:04:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 74D02714304
	for <hadoop-dev@lucene.apache.org>; Mon, 18 Sep 2006 22:01:24 +0000 (GMT)
Message-ID: <22094211.1158616884475.JavaMail.jira@brutus>
Date: Mon, 18 Sep 2006 15:01:24 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-306) Safe mode and name node startup
 procedures
In-Reply-To: <5719318.1150505909849.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-306?page=all ]

Doug Cutting updated HADOOP-306:
--------------------------------

    Status: Open  (was: Patch Available)

The enum mode should not be passed & returned as an int, but rather as a boolean or enum.

As a boolean this might look like:

boolean setMode(boolean isSafe);
boolean getMode();

To pass an enum over an RPC would require either changes to ObjectWritable or to make the enum class implement Writable.


> Safe mode and name node startup procedures
> ------------------------------------------
>
>                 Key: HADOOP-306
>                 URL: http://issues.apache.org/jira/browse/HADOOP-306
>             Project: Hadoop
>          Issue Type: New Feature
>    Affects Versions: 0.3.2
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>         Attachments: SafeMode.patch
>
>
> This is a proposal to improve DFS cluster startup process.
> The data node startup procedures were described and implemented in HADOOP-124.
> I'm trying to extend them to the name node here.
> The main idea is to introduce safe mode, which can be entered manually for administration
> purposes, or automatically when a configurable threshold of active data nodes is breached,
> or at startup when the node stays in safe mode until the minimal limit of active
> nodes is reached.
> This are high level requirements intended to improve the name node and cluster reliability.
>     = The name node safe mode means that the name node is not changing the state of the
>        file system. Meta data is read-only, and block replication / removal is not taking place.
>     = In safe mode the name node accepts data node registrations and
>        processes their block reports.
>     = The name node always starts in safe mode and stays safe until the majority
>         (a configurable parameter: safemode.threshold) of data nodes (or blocks?)
>         is reported.
>     = The name node can also fall into safe mode when the number of non-active
>         (heartbeats stopped coming in) data nodes becomes critical.
>     = The startup "silent period", when the name node is in safe mode and is
>         not issuing any block requests to the data nodes, is initially set to a
>         configurable value safemode.timeout.increment. By the end of the timeout
>         the name node checks the safemode.threshold and decides whether to switch
>         to the normal mode or to stay in safe. If the normal mode criteria is not
>         met, then the silent period is extended by incrementing the safemode timeout.
>     = The name node stays in safe mode not longer than a configurable value of
>         safemode.timeout.max, in which case it logs missing data nodes and shuts
>         itself down.
>     = When the name node switches to normal mode it checks whether all required
>         data nodes have actually registered, based on the list of active data storages
>         from the last session. Then it logs missing nodes, if any, and starts
>         replicating and/or deleting blocks as required.
>     = A historical list of data storages (nodes) ever registered with the cluster is
>         persistently stored in the image and log files. The list is used in two ways:
>         a) at startup to verify whether all nodes have registered, and to report
>         missing nodes;
>         b) at runtime if a data node registers with a new storage id the
>         name node verifies that no new blocks are reported from that storage,
>         which would prevent us from accidentally connecting data nodes from a
>         different cluster.
>     = The name node should have an option to run in safe mode. Starting with
>         that option would mean it never leaves safe mode.
>         This is useful for testing the cluster.
>     = Data nodes that can not connect to the name node for a long time (configurable)
>         should shut down themselves.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 18 22:24:01 2006
Return-Path: 
 <hadoop-dev-return-3789-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 18610 invoked from network); 18 Sep 2006 22:24:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Sep 2006 22:24:01 -0000
Received: (qmail 81791 invoked by uid 500); 18 Sep 2006 22:24:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 81753 invoked by uid 500); 18 Sep 2006 22:24:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 81744 invoked by uid 99); 18 Sep 2006 22:24:00 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Sep 2006 15:24:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:55898] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 13/B4-22826-E7C1F054 for <hadoop-dev@lucene.apache.org>;
 Mon, 18 Sep 2006 15:23:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A7FD4714309
	for <hadoop-dev@lucene.apache.org>; Mon, 18 Sep 2006 22:20:24 +0000 (GMT)
Message-ID: <21774241.1158618024685.JavaMail.jira@brutus>
Date: Mon, 18 Sep 2006 15:20:24 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-536) Broke ant test on windows
In-Reply-To: <22116506.1158280342390.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-536?page=all ]

Doug Cutting resolved HADOOP-536.
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Mahadev.

> Broke ant test on windows
> -------------------------
>
>                 Key: HADOOP-536
>                 URL: http://issues.apache.org/jira/browse/HADOOP-536
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.6.2
>            Reporter: Mahadev konar
>             Fix For: 0.7.0
>
>         Attachments: caching_bug.txt
>
>
> One of my junit tests breaks on windows because of a bug in the junit test code. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 18 22:31:58 2006
Return-Path: 
 <hadoop-dev-return-3790-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 19823 invoked from network); 18 Sep 2006 22:31:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Sep 2006 22:31:58 -0000
Received: (qmail 92453 invoked by uid 500); 18 Sep 2006 22:31:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 92433 invoked by uid 500); 18 Sep 2006 22:31:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 92424 invoked by uid 99); 18 Sep 2006 22:31:58 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Sep 2006 15:31:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:48431] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id B5/E4-22826-D5E1F054 for <hadoop-dev@lucene.apache.org>;
 Mon, 18 Sep 2006 15:31:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 59984714305
	for <hadoop-dev@lucene.apache.org>; Mon, 18 Sep 2006 22:28:23 +0000 (GMT)
Message-ID: <21994132.1158618503364.JavaMail.jira@brutus>
Date: Mon, 18 Sep 2006 15:28:23 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-519) HDFS File API should be extended to
 include positional read
In-Reply-To: <7528490.1157757622361.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-519?page=comments#action_12435595 ] 
            
Milind Bhandarkar commented on HADOOP-519:
------------------------------------------

>In DFSClient, you've duplicated a lot of code from blockSeekTo in fetchBlockByteRange.
>Can you perhaps instead add one or two more methods that capture this common code?

Thats what I plan to do in another patch later, when I fix the read implementation and implement pipelining in writes.

> The javadoc for read(long,byte[], int,int) should say "read up to" or "attempt to read",
>since it may not read all of the bytes (that's what readFully is for). 

Yes, I will make that modification.

>The javadoc comments on the new FSInputStream methods do not add anything useful to
>what would be inherited from the interface, and what they do add makes them inappropriate
>for inheritance by subclasses. So these should be removed.

You mean, just the commenst should be removed or the methods ? Methods cannot be implemented by making PositionedReadable an abstract class, because FSDataInputStream already extends an abstract class.

> HDFS File API should be extended to include positional read
> -----------------------------------------------------------
>
>                 Key: HADOOP-519
>                 URL: http://issues.apache.org/jira/browse/HADOOP-519
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.6.0
>         Environment: All
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.7.0
>
>         Attachments: pread.patch
>
>
> HDFS Input streams should support positional read. Positional read (such as the pread syscall on linux) allows reading for a specified offset without affecting the current file offset. Since the underlying file state is not touched, pread can be used efficiently in multi-threaded programs.
> Here is how I plan to implement it.
> Provide PositionedReadable interface, with the following methods:
> int read(long position, byte[] buffer, int offset, int length);
> void readFully(long position, byte[] buffer, int offset, int length);
> void readFully(long position, byte[] buffer);
> Abstract class FSInputStream would provide default implementation of the above methods using getPos(), seek() and read() methods. The default implementation is inefficient in multi-threaded programs since it locks the object while seeking, reading, and restoring to old state.
> DFSClient.DFSInputStream, which extends FSInputStream will provide an efficient non-synchronized implementation for above calls.
> In addition, FSDataInputStream, which is a wrapper around FSInputStream, will provide wrapper methods for above read methods as well.
> Patch forthcoming early next week.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 18 22:40:00 2006
Return-Path: 
 <hadoop-dev-return-3791-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 22332 invoked from network); 18 Sep 2006 22:40:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Sep 2006 22:40:00 -0000
Received: (qmail 5431 invoked by uid 500); 18 Sep 2006 22:39:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 5346 invoked by uid 500); 18 Sep 2006 22:39:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 5337 invoked by uid 99); 18 Sep 2006 22:39:59 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Sep 2006 15:39:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:52204] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 85/15-22826-D302F054 for <hadoop-dev@lucene.apache.org>;
 Mon, 18 Sep 2006 15:39:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4EE83714305
	for <hadoop-dev@lucene.apache.org>; Mon, 18 Sep 2006 22:36:23 +0000 (GMT)
Message-ID: <176826.1158618983320.JavaMail.jira@brutus>
Date: Mon, 18 Sep 2006 15:36:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-537) clean-libhdfs target of build.xml
 does not work on windows
In-Reply-To: <4253884.1158281003558.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-537?page=comments#action_12435600 ] 
            
Doug Cutting commented on HADOOP-537:
-------------------------------------

We shouldn't need a clean-X target for every compile-X target, since compile-X targets should place things in the build directory and the build directory should be removed by the single clean target.  We should also try not to clutter the top-level build.xml.  If a separate clean-X target is required for productive development in some subtree, then it should be placed in a separate build.xml or Makefile in that  source subtree.  It can then remove appropriate items from the top-level build directory.  But, ideally, the top-level 'clean' target should be able to remove all generated items by simply removing the top-level build directory.

> clean-libhdfs target of build.xml does not work on windows
> ----------------------------------------------------------
>
>                 Key: HADOOP-537
>                 URL: http://issues.apache.org/jira/browse/HADOOP-537
>             Project: Hadoop
>          Issue Type: Bug
>          Components: libhdfs
>    Affects Versions: 0.6.0
>         Environment: Windows
>            Reporter: Konstantin Shvachko
>
> It produces the following:
> BUILD FAILED
> Hadoop\build.xml:496: Execute failed: java.io.IOException: CreateProcess: make clean error=2
> Besides, I would propose to have clean-* target for every compile-* target in build.xml.
> Some people probably don't build libhdfs or contrib, so why should they clean it.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 18 22:50:58 2006
Return-Path: 
 <hadoop-dev-return-3792-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 24377 invoked from network); 18 Sep 2006 22:50:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Sep 2006 22:50:58 -0000
Received: (qmail 14305 invoked by uid 500); 18 Sep 2006 22:50:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14282 invoked by uid 500); 18 Sep 2006 22:50:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 14271 invoked by uid 99); 18 Sep 2006 22:50:58 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Sep 2006 15:50:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:47178] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id B4/30-24062-1D22F054 for <hadoop-dev@lucene.apache.org>;
 Mon, 18 Sep 2006 15:50:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 785AF714300
	for <hadoop-dev@lucene.apache.org>; Mon, 18 Sep 2006 22:47:23 +0000 (GMT)
Message-ID: <28322570.1158619643490.JavaMail.jira@brutus>
Date: Mon, 18 Sep 2006 15:47:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-527) Allow to specify the bind address for
 all hadoop servers
In-Reply-To: <19022892.1158135804043.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-527?page=all ]

Doug Cutting resolved HADOOP-527.
---------------------------------

    Fix Version/s: 0.7.0
       Resolution: Fixed

I just committed this.  Thanks, Philippe!

About the unused parameter: can you submit this as a separate issue?  Thanks.

> Allow to specify the bind address for all hadoop servers
> --------------------------------------------------------
>
>                 Key: HADOOP-527
>                 URL: http://issues.apache.org/jira/browse/HADOOP-527
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.1.0, 0.2.0, 0.1.1, 0.3.0, 0.4.0, 0.2.1, 0.5.0, 0.3.1, 0.3.2, 0.6.0, 0.7.0, 0.6.1
>            Reporter: Philippe Gassmann
>             Fix For: 0.7.0
>
>         Attachments: patch-bind-on-custom-addr, patch-bind-on-custom-addr-updated
>
>
> Hadoop servers sockets are always binded on 0.0.0.0 ; this patch allow to specify a bind address.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 18 23:08:58 2006
Return-Path: 
 <hadoop-dev-return-3793-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 28736 invoked from network); 18 Sep 2006 23:08:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Sep 2006 23:08:58 -0000
Received: (qmail 36705 invoked by uid 500); 18 Sep 2006 23:08:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 36672 invoked by uid 500); 18 Sep 2006 23:08:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 36640 invoked by uid 99); 18 Sep 2006 23:08:58 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Sep 2006 16:08:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:38519] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 64/A0-24062-9072F054 for <hadoop-dev@lucene.apache.org>;
 Mon, 18 Sep 2006 16:08:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 50149714302
	for <hadoop-dev@lucene.apache.org>; Mon, 18 Sep 2006 23:05:23 +0000 (GMT)
Message-ID: <18749434.1158620723325.JavaMail.jira@brutus>
Date: Mon, 18 Sep 2006 16:05:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-542) on-the-fly merge sort, HADOOP-540,
 reformat
In-Reply-To: <5869526.1158598403623.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-542?page=all ]

Doug Cutting resolved HADOOP-542.
---------------------------------

    Fix Version/s: 0.7.0
       Resolution: Fixed

I just committed this.  Thanks, Michel.

> on-the-fly merge sort, HADOOP-540, reformat
> -------------------------------------------
>
>                 Key: HADOOP-542
>                 URL: http://issues.apache.org/jira/browse/HADOOP-542
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: contrib/streaming
>         Environment: Tested on Linux and Windows
>            Reporter: Michel Tourn
>             Fix For: 0.7.0
>
>         Attachments: bigmux.patch2
>
>
> A large patch for streaming. Changes:
> Support for on-the-fly merge sort of multiple map input files.
> This supposes that the inputs are already sorted.
> Support for reducer-NONE side-effects to a single local output with DFS inputs.
> This can be used to do an on-the-fly merge-sort of remote sorted files.
> (Compare to DFSShell -getmerge which does *catenation* of remote sorted files)
> The single output can be a regular file, a named pipe or a socket.
> URI Syntax: -mapsideoutput [file:/C:/win|file:/unix/|socket://host:port]
> Add an optional JUnit test for on-the-fly merge-sort.
> It requires Unix tools. It also works with cygwin.
> If it has been more than 10 secs since last time we did this:
> call reporter.setStatus() when consuming a stderr line from the Application.
> Calling setStatus with reducer-NONE was already done as part of HADOOP-413.
> So overall this resolves HADOOP-540.
> Reformat streaming code to conform to Hadoop conventions 
>  (indent 2 spaces, opening bracket on same-line) 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 18 23:10:59 2006
Return-Path: 
 <hadoop-dev-return-3794-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 28956 invoked from network); 18 Sep 2006 23:10:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Sep 2006 23:10:59 -0000
Received: (qmail 37504 invoked by uid 500); 18 Sep 2006 23:10:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 37486 invoked by uid 500); 18 Sep 2006 23:10:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 37477 invoked by uid 99); 18 Sep 2006 23:10:58 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Sep 2006 16:10:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:38524] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 7E/A0-24062-1872F054 for <hadoop-dev@lucene.apache.org>;
 Mon, 18 Sep 2006 16:10:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5F458714300
	for <hadoop-dev@lucene.apache.org>; Mon, 18 Sep 2006 23:07:23 +0000 (GMT)
Message-ID: <14869648.1158620843387.JavaMail.jira@brutus>
Date: Mon, 18 Sep 2006 16:07:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-540) Streaming should send keep-alive
 signals to Reporter
In-Reply-To: <27748975.1158356003762.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-540?page=all ]

Doug Cutting resolved HADOOP-540.
---------------------------------

    Fix Version/s: 0.7.0
       Resolution: Fixed

This should have been fixed by HADOOP-542.

> Streaming should send keep-alive signals to Reporter
> ----------------------------------------------------
>
>                 Key: HADOOP-540
>                 URL: http://issues.apache.org/jira/browse/HADOOP-540
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: Michel Tourn
>             Fix For: 0.7.0
>
>
> The goal is to avoid the 10-minutes Task timeout with certain usages of hadoopStreaming.
> This proposal does not introduce an artificial keep-alive heartbeat: 
> it still requires the external Application to have activity.
> Streaming should set Reporter status in more places:
> 1. output to side-effect files should (periodically) set reporter status.
> 2. Application's stderr data should (periodically) set reporter status.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 18 23:12:59 2006
Return-Path: 
 <hadoop-dev-return-3795-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 29759 invoked from network); 18 Sep 2006 23:12:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Sep 2006 23:12:59 -0000
Received: (qmail 40543 invoked by uid 500); 18 Sep 2006 23:12:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40516 invoked by uid 500); 18 Sep 2006 23:12:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 40507 invoked by uid 99); 18 Sep 2006 23:12:59 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Sep 2006 16:12:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:58746] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 78/B0-24062-9F72F054 for <hadoop-dev@lucene.apache.org>;
 Mon, 18 Sep 2006 16:12:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6D3A7714300
	for <hadoop-dev@lucene.apache.org>; Mon, 18 Sep 2006 23:09:23 +0000 (GMT)
Message-ID: <9382170.1158620963444.JavaMail.jira@brutus>
Date: Mon, 18 Sep 2006 16:09:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-519) HDFS File API should be extended to
 include positional read
In-Reply-To: <7528490.1157757622361.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-519?page=comments#action_12435606 ] 
            
Doug Cutting commented on HADOOP-519:
-------------------------------------

> Thats what I plan to do in another patch later [ ... ]

Why not do this now?

> You mean, just the commenst should be removed or the methods ?

Just the javadoc comments.

> HDFS File API should be extended to include positional read
> -----------------------------------------------------------
>
>                 Key: HADOOP-519
>                 URL: http://issues.apache.org/jira/browse/HADOOP-519
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.6.0
>         Environment: All
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.7.0
>
>         Attachments: pread.patch
>
>
> HDFS Input streams should support positional read. Positional read (such as the pread syscall on linux) allows reading for a specified offset without affecting the current file offset. Since the underlying file state is not touched, pread can be used efficiently in multi-threaded programs.
> Here is how I plan to implement it.
> Provide PositionedReadable interface, with the following methods:
> int read(long position, byte[] buffer, int offset, int length);
> void readFully(long position, byte[] buffer, int offset, int length);
> void readFully(long position, byte[] buffer);
> Abstract class FSInputStream would provide default implementation of the above methods using getPos(), seek() and read() methods. The default implementation is inefficient in multi-threaded programs since it locks the object while seeking, reading, and restoring to old state.
> DFSClient.DFSInputStream, which extends FSInputStream will provide an efficient non-synchronized implementation for above calls.
> In addition, FSDataInputStream, which is a wrapper around FSInputStream, will provide wrapper methods for above read methods as well.
> Patch forthcoming early next week.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 19 00:08:01 2006
Return-Path: 
 <hadoop-dev-return-3796-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 44359 invoked from network); 19 Sep 2006 00:08:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Sep 2006 00:08:01 -0000
Received: (qmail 84861 invoked by uid 500); 19 Sep 2006 00:08:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 84765 invoked by uid 500); 19 Sep 2006 00:08:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 84723 invoked by uid 99); 19 Sep 2006 00:08:00 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Sep 2006 17:08:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:56313] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 35/50-24551-FD43F054 for <hadoop-dev@lucene.apache.org>;
 Mon, 18 Sep 2006 17:08:00 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B5CAF714302
	for <hadoop-dev@lucene.apache.org>; Tue, 19 Sep 2006 00:04:25 +0000 (GMT)
Message-ID: <2918872.1158624265742.JavaMail.jira@brutus>
Date: Mon, 18 Sep 2006 17:04:25 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-519) HDFS File API should be extended to
 include positional read
In-Reply-To: <7528490.1157757622361.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-519?page=comments#action_12435611 ] 
            
Milind Bhandarkar commented on HADOOP-519:
------------------------------------------

> Why not do this now? 

Because the normal read method has some other deficiencies as well. For example, even for reading just a few bytes from the block, the datanode tries to send out the full block. Also, even when the seeks target is within the same block, the existing connection to the datanode is clossed anyway and a new one opened. Since these changes are related to clean-up of duplicate code, I had planned to do them as a different patch.


> HDFS File API should be extended to include positional read
> -----------------------------------------------------------
>
>                 Key: HADOOP-519
>                 URL: http://issues.apache.org/jira/browse/HADOOP-519
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.6.0
>         Environment: All
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.7.0
>
>         Attachments: pread.patch
>
>
> HDFS Input streams should support positional read. Positional read (such as the pread syscall on linux) allows reading for a specified offset without affecting the current file offset. Since the underlying file state is not touched, pread can be used efficiently in multi-threaded programs.
> Here is how I plan to implement it.
> Provide PositionedReadable interface, with the following methods:
> int read(long position, byte[] buffer, int offset, int length);
> void readFully(long position, byte[] buffer, int offset, int length);
> void readFully(long position, byte[] buffer);
> Abstract class FSInputStream would provide default implementation of the above methods using getPos(), seek() and read() methods. The default implementation is inefficient in multi-threaded programs since it locks the object while seeking, reading, and restoring to old state.
> DFSClient.DFSInputStream, which extends FSInputStream will provide an efficient non-synchronized implementation for above calls.
> In addition, FSDataInputStream, which is a wrapper around FSInputStream, will provide wrapper methods for above read methods as well.
> Patch forthcoming early next week.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 19 00:19:02 2006
Return-Path: 
 <hadoop-dev-return-3797-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 45156 invoked from network); 19 Sep 2006 00:19:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Sep 2006 00:19:02 -0000
Received: (qmail 87843 invoked by uid 500); 19 Sep 2006 00:19:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 87649 invoked by uid 500); 19 Sep 2006 00:19:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 87640 invoked by uid 99); 19 Sep 2006 00:19:01 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Sep 2006 17:19:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:37102] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id C2/00-24658-1773F054 for <hadoop-dev@lucene.apache.org>;
 Mon, 18 Sep 2006 17:18:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5198D7142FE
	for <hadoop-dev@lucene.apache.org>; Tue, 19 Sep 2006 00:15:23 +0000 (GMT)
Message-ID: <3549642.1158624923331.JavaMail.jira@brutus>
Date: Mon, 18 Sep 2006 17:15:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-519) HDFS File API should be extended to
 include positional read
In-Reply-To: <7528490.1157757622361.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-519?page=comments#action_12435614 ] 
            
Doug Cutting commented on HADOOP-519:
-------------------------------------

> Because the normal read method has some other deficiencies as well.

I still don't see the point in having two identical copies of these deficiencies.

Is there a follow-on issue that you have in mind that will redesign the block reading protocol?

> HDFS File API should be extended to include positional read
> -----------------------------------------------------------
>
>                 Key: HADOOP-519
>                 URL: http://issues.apache.org/jira/browse/HADOOP-519
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.6.0
>         Environment: All
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.7.0
>
>         Attachments: pread.patch
>
>
> HDFS Input streams should support positional read. Positional read (such as the pread syscall on linux) allows reading for a specified offset without affecting the current file offset. Since the underlying file state is not touched, pread can be used efficiently in multi-threaded programs.
> Here is how I plan to implement it.
> Provide PositionedReadable interface, with the following methods:
> int read(long position, byte[] buffer, int offset, int length);
> void readFully(long position, byte[] buffer, int offset, int length);
> void readFully(long position, byte[] buffer);
> Abstract class FSInputStream would provide default implementation of the above methods using getPos(), seek() and read() methods. The default implementation is inefficient in multi-threaded programs since it locks the object while seeking, reading, and restoring to old state.
> DFSClient.DFSInputStream, which extends FSInputStream will provide an efficient non-synchronized implementation for above calls.
> In addition, FSDataInputStream, which is a wrapper around FSInputStream, will provide wrapper methods for above read methods as well.
> Patch forthcoming early next week.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 19 00:57:58 2006
Return-Path: 
 <hadoop-dev-return-3798-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 55404 invoked from network); 19 Sep 2006 00:57:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Sep 2006 00:57:58 -0000
Received: (qmail 22904 invoked by uid 500); 19 Sep 2006 00:57:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 22705 invoked by uid 500); 19 Sep 2006 00:57:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22695 invoked by uid 99); 19 Sep 2006 00:57:57 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Sep 2006 17:57:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:47875] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id D7/90-24973-4904F054 for <hadoop-dev@lucene.apache.org>;
 Mon, 18 Sep 2006 17:57:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6714B714300
	for <hadoop-dev@lucene.apache.org>; Tue, 19 Sep 2006 00:54:22 +0000 (GMT)
Message-ID: <30517116.1158627262419.JavaMail.jira@brutus>
Date: Mon, 18 Sep 2006 17:54:22 -0700 (PDT)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-543) Error to open job files
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Error to open job files
-----------------------

                 Key: HADOOP-543
                 URL: http://issues.apache.org/jira/browse/HADOOP-543
             Project: Hadoop
          Issue Type: Bug
    Affects Versions: 0.6.2
            Reporter: Runping Qi



I was running a faily large job on Hadoop release 0.6.2.
The job failed because a lot of map tasks failed with following exceptions:

org.apache.hadoop.ipc.RemoteException: java.io.IOException:=20
Cannot open filename .../mapred/system/submit_zaretf/job.xml at org.apache.=
hadoop.dfs.NameNode.open(NameNode.java:178) at sun.reflect.GeneratedMethodA=
ccessor7.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl=
.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.i=
nvoke(Method.java:585) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:33=
3) at org.apache.hadoop.ipc.Server$Handler.run(Server.java:473) at org.apac=
he.hadoop.ipc.Client$Connection.run(Client.java:245)=20

java.lang.RuntimeException: java.lang.RuntimeException: ../mapred/local/tas=
kTracker/task_0031_m_046467_0/job.xml not found at org.apache.hadoop.conf.C=
onfiguration.loadResource(Configuration.java:549) at org.apache.hadoop.conf=
.Configuration.loadResources(Configuration.java:476) at org.apache.hadoop.c=
onf.Configuration.getProps(Configuration.java:457) at org.apache.hadoop.con=
f.Configuration.set(Configuration.java:204) at org.apache.hadoop.mapred.Tas=
kTracker$TaskInProgress.localizeTask(TaskTracker.java:724) at org.apache.ha=
doop.mapred.TaskTracker$TaskInProgress.launchTask(TaskTracker.java:779) at =
org.apache.hadoop.mapred.TaskTracker.startNewTask(TaskTracker.java:574) at =
org.apache.hadoop.mapred.TaskTracker.offerService(TaskTracker.java:394) at =
org.apache.hadoop.mapred.TaskTracker.run(TaskTracker.java:603) at org.apach=
e.hadoop.mapred.TaskTracker.main(TaskTracker.java:1191) Caused by: java.lan=
g.RuntimeException: ../mapred/local/taskTracker/task_0031_m_046467_0/job.xm=
l not found at org.apache.hadoop.conf.Configuration.loadResource(Configurat=
ion.java:516) ... 9 more=20

org.apache.hadoop.ipc.RemoteException: java.io.IOException: Cannot open fil=
ename ../mapred/system/submit_zaretf/job.jar at org.apache.hadoop.dfs.NameN=
ode.open(NameNode.java:178) at sun.reflect.GeneratedMethodAccessor7.invoke(=
Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(Delegati=
ngMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.jav=
a:585) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:333) at org.apache=
.hadoop.ipc.Server$Handler.run(Server.java:473) at org.apache.hadoop.ipc.Cl=
ient$Connection.run(Client.java:245)=20

--=20
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: htt=
p://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

       

From MAILER-DAEMON Tue Sep 19 05:47:00 2006
Return-Path: 
 <hadoop-dev-return-3799-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23125 invoked from network); 19 Sep 2006 05:47:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Sep 2006 05:47:00 -0000
Received: (qmail 33221 invoked by uid 500); 19 Sep 2006 05:47:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 33020 invoked by uid 500); 19 Sep 2006 05:46:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 33011 invoked by uid 99); 19 Sep 2006 05:46:59 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Sep 2006 22:46:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:42525] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id F6/72-26148-2548F054 for <hadoop-dev@lucene.apache.org>;
 Mon, 18 Sep 2006 22:46:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D2C16714300
	for <hadoop-dev@lucene.apache.org>; Tue, 19 Sep 2006 05:43:23 +0000 (GMT)
Message-ID: <32457648.1158644603860.JavaMail.jira@brutus>
Date: Mon, 18 Sep 2006 22:43:23 -0700 (PDT)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-490) Add ability to send "signals" to jobs
 and tasks
In-Reply-To: <4288625.1156882102734.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-490?page=all ]

eric baldeschwieler updated HADOOP-490:
---------------------------------------


-1

Unless I'm reading this wrong, a file per message would kill the name node at any scale.  Also, in a large task, the cost of having every mapper/task scan all the messages could be fairly prohibitive.

I'd suggest making it available in contrib or some other mechanism until we see how much uptake it gets.  This would leave specific applications free to use it.  Perhaps if this gains wide acceptance we could explore moving the concepts into core, but we would need to address the scaling issues to make a general facility.  

A very interesting set of ideas here, but very complicated if you want to make it work in large general cases.


> Add ability to send "signals" to jobs and tasks
> -----------------------------------------------
>
>                 Key: HADOOP-490
>                 URL: http://issues.apache.org/jira/browse/HADOOP-490
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.6.0
>            Reporter: Andrzej Bialecki 
>
> In some cases it would be useful to be able to "signal" a job and its tasks about some external condition, or to broadcast a specific message to all tasks in a job. Currently we can only send  a single pseudo-signal, that is to kill a job.
> Example 1: some jobs may be gracefully terminated even if they didn't complete all their work, e.g. Fetcher in Nutch may be running for a very long time if it blocks on relatively few sites left over from the fetchlist. In such case it would be very useful to send it a message requesting that it discards the rest of its input and gracefully completes its map tasks.
> Example 2: available bandwidth for fetching may be different at different times of day, e.g. daytime vs. nighttime, or total external link usage by other applications. Fetcher jobs often run for several hours. It would be good to be able to send a "signal" to the Fetcher to throttle or un-throttle its bandwidth usage depending on external conditions.
> Job implementations could react to these messages either by implementing a method, or by registering a listener, whichever seems more natural.
> I'm not quite sure how to go about implementing it, I guess this would have to be a part of  TaskUmbilicalProtocol but my knowledge here is a bit fuzzy ... ;) Comments are welcome.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 19 05:50:58 2006
Return-Path: 
 <hadoop-dev-return-3800-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23997 invoked from network); 19 Sep 2006 05:50:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Sep 2006 05:50:58 -0000
Received: (qmail 39904 invoked by uid 500); 19 Sep 2006 05:50:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 39706 invoked by uid 500); 19 Sep 2006 05:50:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 39697 invoked by uid 99); 19 Sep 2006 05:50:57 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Sep 2006 22:50:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:58509] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 62/A2-26148-1458F054 for <hadoop-dev@lucene.apache.org>;
 Mon, 18 Sep 2006 22:50:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 590F5714300
	for <hadoop-dev@lucene.apache.org>; Tue, 19 Sep 2006 05:47:22 +0000 (GMT)
Message-ID: <29918475.1158644842361.JavaMail.jira@brutus>
Date: Mon, 18 Sep 2006 22:47:22 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-544) Replace the job, tip and task ids with
 objects.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Replace the job, tip and task ids with objects.
-----------------------------------------------

                 Key: HADOOP-544
                 URL: http://issues.apache.org/jira/browse/HADOOP-544
             Project: Hadoop
          Issue Type: Improvement
    Affects Versions: 0.6.2
            Reporter: Owen O'Malley
         Assigned To: Owen O'Malley


I think that it is silly to have tools parsing the strings that the framework builds for task ids. I propose:

class JobId implements Writable {
  private int;
  ...
}

class TaskId extends JobId { 
  private boolean isMap;
  private int taskId;
  ...
}

class TaskAttemptId extends TaskId {
  private int attemptId;
  ...
}

each of the classes will have a toString() method that generates the current string.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 19 07:31:59 2006
Return-Path: 
 <hadoop-dev-return-3801-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 58667 invoked from network); 19 Sep 2006 07:31:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Sep 2006 07:31:59 -0000
Received: (qmail 66927 invoked by uid 500); 19 Sep 2006 07:31:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66790 invoked by uid 500); 19 Sep 2006 07:31:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66781 invoked by uid 99); 19 Sep 2006 07:31:58 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Sep 2006 00:31:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:45664] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 48/66-26148-DEC9F054 for <hadoop-dev@lucene.apache.org>;
 Tue, 19 Sep 2006 00:31:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 611277142FB
	for <hadoop-dev@lucene.apache.org>; Tue, 19 Sep 2006 07:28:22 +0000 (GMT)
Message-ID: <24727194.1158650902394.JavaMail.jira@brutus>
Date: Tue, 19 Sep 2006 00:28:22 -0700 (PDT)
From: "Philippe Gassmann (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-545) Unused parameter in hadoop-default.xml
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Unused parameter in hadoop-default.xml
--------------------------------------

                 Key: HADOOP-545
                 URL: http://issues.apache.org/jira/browse/HADOOP-545
             Project: Hadoop
          Issue Type: Bug
          Components: conf
    Affects Versions: 0.6.2
            Reporter: Philippe Gassmann
            Priority: Trivial


found a parameter in haddop-default.xml that seems not to be used anymore in the java code : mapred.task.tracker.output.port.

I've done a grep "mapred.task.tracker.output.port" **/*.java (thanks zsh) in the whole source tree and the only result was :
src/test/org/apache/hadoop/mapred/MiniMRCluster.java: jc.setInt("mapred.task.tracker.output.port", taskTrackerPort++);

I think it should be removed from hadoop-default.xml


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 19 07:51:02 2006
Return-Path: 
 <hadoop-dev-return-3802-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 64039 invoked from network); 19 Sep 2006 07:51:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Sep 2006 07:51:02 -0000
Received: (qmail 94803 invoked by uid 500); 19 Sep 2006 07:51:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94592 invoked by uid 500); 19 Sep 2006 07:51:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94583 invoked by uid 99); 19 Sep 2006 07:51:01 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Sep 2006 00:51:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:44831] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 42/37-26148-461AF054 for <hadoop-dev@lucene.apache.org>;
 Tue, 19 Sep 2006 00:51:00 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A90C87142F7
	for <hadoop-dev@lucene.apache.org>; Tue, 19 Sep 2006 07:47:25 +0000 (GMT)
Message-ID: <2003151.1158652045689.JavaMail.jira@brutus>
Date: Tue, 19 Sep 2006 00:47:25 -0700 (PDT)
From: "Andrzej Bialecki  (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-490) Add ability to send "signals" to
 jobs and tasks
In-Reply-To: <4288625.1156882102734.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-490?page=comments#action_12435717 ] 
            
Andrzej Bialecki  commented on HADOOP-490:
------------------------------------------

Re: namenode issue: yes, that's a good point - I didn't think of that, mainly because I'm working with smaller clusters (dozens machines at most).

Re: cost of scanning: that's true as well, although tasks don't have to poll so often, in some cases you could configure the poll interval to be in the range of minutes. However, this points back to a deficiency in the current framework, namely that there is no support for sending arbitrary messages to tasks. If there were a way to do this (well, then the issue would be solved and we wouldn't need this MQ api ... ;) then we could run a separate filesystem monitor, which would dispatch events to all listening tasks concerning filesystem changes such as file/dir creation/deletion/update.

Overall, I'm aware that this is a less than ideal solution to the problem - IMHO my original proposal explained in this issue would be better. ;)

> Add ability to send "signals" to jobs and tasks
> -----------------------------------------------
>
>                 Key: HADOOP-490
>                 URL: http://issues.apache.org/jira/browse/HADOOP-490
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.6.0
>            Reporter: Andrzej Bialecki 
>
> In some cases it would be useful to be able to "signal" a job and its tasks about some external condition, or to broadcast a specific message to all tasks in a job. Currently we can only send  a single pseudo-signal, that is to kill a job.
> Example 1: some jobs may be gracefully terminated even if they didn't complete all their work, e.g. Fetcher in Nutch may be running for a very long time if it blocks on relatively few sites left over from the fetchlist. In such case it would be very useful to send it a message requesting that it discards the rest of its input and gracefully completes its map tasks.
> Example 2: available bandwidth for fetching may be different at different times of day, e.g. daytime vs. nighttime, or total external link usage by other applications. Fetcher jobs often run for several hours. It would be good to be able to send a "signal" to the Fetcher to throttle or un-throttle its bandwidth usage depending on external conditions.
> Job implementations could react to these messages either by implementing a method, or by registering a listener, whichever seems more natural.
> I'm not quite sure how to go about implementing it, I guess this would have to be a part of  TaskUmbilicalProtocol but my knowledge here is a bit fuzzy ... ;) Comments are welcome.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 19 10:41:01 2006
Return-Path: 
 <hadoop-dev-return-3803-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20911 invoked from network); 19 Sep 2006 10:41:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Sep 2006 10:41:01 -0000
Received: (qmail 8972 invoked by uid 500); 19 Sep 2006 10:41:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 8950 invoked by uid 500); 19 Sep 2006 10:40:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 8941 invoked by uid 99); 19 Sep 2006 10:40:59 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Sep 2006 03:40:59 -0700
X-ASF-Spam-Status: No, hits=1.1 required=5.0 tests=SUBJ_FOR_ONLY
Received: from ([209.237.227.198:41206] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 3D/60-26148-939CF054 for <hadoop-dev@lucene.apache.org>;
 Tue, 19 Sep 2006 03:40:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 970AB7142FB
	for <hadoop-dev@lucene.apache.org>; Tue, 19 Sep 2006 10:37:22 +0000 (GMT)
Message-ID: <19199550.1158662242615.JavaMail.jira@brutus>
Date: Tue, 19 Sep 2006 03:37:22 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-546) Jobtracker doesnt generate job.xml in
 jobcache for some tasks ( possibly for only rescheduled tasks)
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Jobtracker doesnt generate job.xml in jobcache for some tasks ( possibly for only rescheduled tasks)
----------------------------------------------------------------------------------------------------

                 Key: HADOOP-546
                 URL: http://issues.apache.org/jira/browse/HADOOP-546
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.6.2
            Reporter: Sanjay Dahiya
            Priority: Critical


For many of the rescheduled tasks job tracker doesn't generate job.xml the task fails on job tracker itself and is rescheduled for another node and fails again as the file is still not generated, causing the job to fail. 

possibly related to Hadoop-543

2006-09-19 01:10:37,064 INFO org.apache.hadoop.mapred.TaskInProgress: Error from task_0001_m_022869_3: java.io.FileNotFoundException: .../hadoop/mapred/local/taskTracker/jobcache/job_0001/task_0001_m_022869_3/job.xml (No such file or directory)
        at java.io.FileOutputStream.open(Native Method)
        at java.io.FileOutputStream.<init>(FileOutputStream.java:179)
        at java.io.FileOutputStream.<init>(FileOutputStream.java:131)
        at org.apache.hadoop.fs.LocalFileSystem$LocalFSFileOutputStream.<init>(LocalFileSystem.java:133)
        at org.apache.hadoop.fs.LocalFileSystem.createRaw(LocalFileSystem.java:172)
        at org.apache.hadoop.fs.LocalFileSystem.createRaw(LocalFileSystem.java:180)
        at org.apache.hadoop.fs.FSDataOutputStream$Summer.<init>(FSDataOutputStream.java:56)
        at org.apache.hadoop.fs.FSDataOutputStream$Summer.<init>(FSDataOutputStream.java:45)
        at org.apache.hadoop.fs.FSDataOutputStream.<init>(FSDataOutputStream.java:146)
        at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:270)
        at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:177)
        at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.localizeTask(TaskTracker.java:810)
        at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.launchTask(TaskTracker.java:858)
        at org.apache.hadoop.mapred.TaskTracker.launchTaskForJob(TaskTracker.java:282)
        at org.apache.hadoop.mapred.TaskTracker.localizeJob(TaskTracker.java:275)
        at org.apache.hadoop.mapred.TaskTracker.startNewTask(TaskTracker.java:669)
        at org.apache.hadoop.mapred.TaskTracker.offerService(TaskTracker.java:486)
        at org.apache.hadoop.mapred.TaskTracker.run(TaskTracker.java:689)
        at org.apache.hadoop.mapred.TaskTracker.main(TaskTracker.java:1290)


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 19 11:01:57 2006
Return-Path: 
 <hadoop-dev-return-3804-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32575 invoked from network); 19 Sep 2006 11:01:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Sep 2006 11:01:57 -0000
Received: (qmail 43562 invoked by uid 500); 19 Sep 2006 11:01:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 43541 invoked by uid 500); 19 Sep 2006 11:01:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 43514 invoked by uid 99); 19 Sep 2006 11:01:56 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Sep 2006 04:01:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:41813] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 99/01-26148-9EDCF054 for <hadoop-dev@lucene.apache.org>;
 Tue, 19 Sep 2006 04:00:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 669B37142FB
	for <hadoop-dev@lucene.apache.org>; Tue, 19 Sep 2006 10:57:22 +0000 (GMT)
Message-ID: <21058618.1158663442417.JavaMail.jira@brutus>
Date: Tue, 19 Sep 2006 03:57:22 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-547) ReduceTaskRunner can miss sending
 hearbeats if no map output copy finishes within "mapred.task.timeout"
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

ReduceTaskRunner can miss sending hearbeats if no map output copy finishes within "mapred.task.timeout"
-------------------------------------------------------------------------------------------------------

                 Key: HADOOP-547
                 URL: http://issues.apache.org/jira/browse/HADOOP-547
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.6.2
            Reporter: Sanjay Dahiya


In ReduceTaskRunner, main loop sending heartbeats waits on copyResults, which releases only if a copy thread finishes copying. This can cause good reduce tasks which are copying data to fail, if no map task output was copied within "mapred.task.timeout". 

ReduceTaskRunner.java:490
        try {
          copyResults.wait();                      <=========== Calls unconditional wait. 
        } catch (InterruptedException e) { }

wait() should be with a timeout, possibly taskTimeout/2 after which it should send a hearbeat and go back to wait. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 19 17:25:01 2006
Return-Path: 
 <hadoop-dev-return-3805-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8932 invoked from network); 19 Sep 2006 17:25:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Sep 2006 17:25:01 -0000
Received: (qmail 5878 invoked by uid 500); 19 Sep 2006 17:25:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 5858 invoked by uid 500); 19 Sep 2006 17:25:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 5848 invoked by uid 99); 19 Sep 2006 17:25:00 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Sep 2006 10:25:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:36674] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id EA/05-28275-AE720154 for <hadoop-dev@lucene.apache.org>;
 Tue, 19 Sep 2006 10:24:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 03477410067
	for <hadoop-dev@lucene.apache.org>; Tue, 19 Sep 2006 17:21:23 +0000 (GMT)
Message-ID: <20327656.1158686483010.JavaMail.jira@brutus>
Date: Tue, 19 Sep 2006 10:21:23 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-548) add a switch to allow unit tests to
 show output
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

add a switch to allow unit tests to show output
-----------------------------------------------

                 Key: HADOOP-548
                 URL: http://issues.apache.org/jira/browse/HADOOP-548
             Project: Hadoop
          Issue Type: Test
    Affects Versions: 0.6.2
            Reporter: Owen O'Malley
         Assigned To: Owen O'Malley
            Priority: Minor
             Fix For: 0.7.0
         Attachments: test-output.patch

I'd like a switch so that I can have the unit tests show their output to the console.

ant test   // current behavior
ant -Dtest.output=yes  test // show output to console

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 19 17:25:04 2006
Return-Path: 
 <hadoop-dev-return-3806-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9032 invoked from network); 19 Sep 2006 17:25:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Sep 2006 17:25:04 -0000
Received: (qmail 6223 invoked by uid 500); 19 Sep 2006 17:25:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 6195 invoked by uid 500); 19 Sep 2006 17:25:02 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 6171 invoked by uid 99); 19 Sep 2006 17:25:02 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Sep 2006 10:25:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:36679] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 7B/05-28275-DE720154 for <hadoop-dev@lucene.apache.org>;
 Tue, 19 Sep 2006 10:25:01 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DE84D410066
	for <hadoop-dev@lucene.apache.org>; Tue, 19 Sep 2006 17:21:25 +0000 (GMT)
Message-ID: <8038188.1158686485909.JavaMail.jira@brutus>
Date: Tue, 19 Sep 2006 10:21:25 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-548) add a switch to allow unit tests to
 show output
In-Reply-To: <20327656.1158686483010.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-548?page=all ]

Owen O'Malley updated HADOOP-548:
---------------------------------

    Attachment: test-output.patch

> add a switch to allow unit tests to show output
> -----------------------------------------------
>
>                 Key: HADOOP-548
>                 URL: http://issues.apache.org/jira/browse/HADOOP-548
>             Project: Hadoop
>          Issue Type: Test
>    Affects Versions: 0.6.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>            Priority: Minor
>             Fix For: 0.7.0
>
>         Attachments: test-output.patch
>
>
> I'd like a switch so that I can have the unit tests show their output to the console.
> ant test   // current behavior
> ant -Dtest.output=yes  test // show output to console

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 19 17:25:04 2006
Return-Path: 
 <hadoop-dev-return-3807-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9072 invoked from network); 19 Sep 2006 17:25:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Sep 2006 17:25:04 -0000
Received: (qmail 6579 invoked by uid 500); 19 Sep 2006 17:25:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 6546 invoked by uid 500); 19 Sep 2006 17:25:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 6499 invoked by uid 99); 19 Sep 2006 17:25:03 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Sep 2006 10:25:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:36681] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id AB/05-28275-EE720154 for <hadoop-dev@lucene.apache.org>;
 Tue, 19 Sep 2006 10:25:02 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0655D410067
	for <hadoop-dev@lucene.apache.org>; Tue, 19 Sep 2006 17:21:27 +0000 (GMT)
Message-ID: <2057695.1158686487023.JavaMail.jira@brutus>
Date: Tue, 19 Sep 2006 10:21:27 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-548) add a switch to allow unit tests to
 show output
In-Reply-To: <20327656.1158686483010.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-548?page=all ]

Owen O'Malley updated HADOOP-548:
---------------------------------

    Status: Patch Available  (was: Open)

> add a switch to allow unit tests to show output
> -----------------------------------------------
>
>                 Key: HADOOP-548
>                 URL: http://issues.apache.org/jira/browse/HADOOP-548
>             Project: Hadoop
>          Issue Type: Test
>    Affects Versions: 0.6.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>            Priority: Minor
>             Fix For: 0.7.0
>
>         Attachments: test-output.patch
>
>
> I'd like a switch so that I can have the unit tests show their output to the console.
> ant test   // current behavior
> ant -Dtest.output=yes  test // show output to console

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 19 17:52:00 2006
Return-Path: 
 <hadoop-dev-return-3808-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 15981 invoked from network); 19 Sep 2006 17:52:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Sep 2006 17:52:00 -0000
Received: (qmail 55341 invoked by uid 500); 19 Sep 2006 17:52:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55322 invoked by uid 500); 19 Sep 2006 17:52:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55310 invoked by uid 99); 19 Sep 2006 17:51:59 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Sep 2006 10:51:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:44237] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 19/D5-28275-F3E20154 for <hadoop-dev@lucene.apache.org>;
 Tue, 19 Sep 2006 10:51:59 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F0347410068
	for <hadoop-dev@lucene.apache.org>; Tue, 19 Sep 2006 17:48:23 +0000 (GMT)
Message-ID: <11506938.1158688103883.JavaMail.jira@brutus>
Date: Tue, 19 Sep 2006 10:48:23 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-261) when map outputs are lost, nothing is
 shown in the webapp about why the map task failed
In-Reply-To: <18552838.1149014909866.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-261?page=all ]

Owen O'Malley updated HADOOP-261:
---------------------------------

    Attachment: map-out-lost.patch

This patch adds a diagnostic message to the task to explain why it move from success to failed when a map output file can not be read.

> when map outputs are lost, nothing is shown in the webapp about why the map task failed
> ---------------------------------------------------------------------------------------
>
>                 Key: HADOOP-261
>                 URL: http://issues.apache.org/jira/browse/HADOOP-261
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.2.1
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>         Attachments: map-out-lost.patch
>
>
> When a task tracker invokes mapOutputLost, it does not include a diagnostic that lets the user (or the web app) know what failed in the map. I want to add a diagnostic message.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 19 18:02:01 2006
Return-Path: 
 <hadoop-dev-return-3809-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 18069 invoked from network); 19 Sep 2006 18:02:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Sep 2006 18:02:01 -0000
Received: (qmail 76329 invoked by uid 500); 19 Sep 2006 18:02:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 76129 invoked by uid 500); 19 Sep 2006 18:02:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 76120 invoked by uid 99); 19 Sep 2006 18:02:00 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Sep 2006 11:02:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:47842] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 24/26-28275-89030154 for <hadoop-dev@lucene.apache.org>;
 Tue, 19 Sep 2006 11:02:00 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7287B41006A
	for <hadoop-dev@lucene.apache.org>; Tue, 19 Sep 2006 17:58:24 +0000 (GMT)
Message-ID: <31862774.1158688704466.JavaMail.jira@brutus>
Date: Tue, 19 Sep 2006 10:58:24 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-293) map reduce job fail without reporting
 a reason
In-Reply-To: <25233677.1149814169844.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-293?page=all ]

Owen O'Malley updated HADOOP-293:
---------------------------------

    Attachment: err-report.patch

The problem was that the web ui was not looking at the complete list of diagnostics, just the diagnostic that was sent with the last status report. This patch makes it generate the complete list.

> map reduce job fail without reporting a reason
> ----------------------------------------------
>
>                 Key: HADOOP-293
>                 URL: http://issues.apache.org/jira/browse/HADOOP-293
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.3.1
>            Reporter: Yoram Arnon
>         Assigned To: Owen O'Malley
>         Attachments: err-report.patch, report-error-1.patch
>
>
> Often I see in the WI reports of tasks failing without information reported as to the reason of the failure.
> It makes analysis and fixing the problem much harder.
> The reason for the failure should always be reported in the WI.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 19 18:13:05 2006
Return-Path: 
 <hadoop-dev-return-3810-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20929 invoked from network); 19 Sep 2006 18:13:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Sep 2006 18:13:05 -0000
Received: (qmail 90085 invoked by uid 500); 19 Sep 2006 18:13:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 89929 invoked by uid 500); 19 Sep 2006 18:13:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 89920 invoked by uid 99); 19 Sep 2006 18:13:04 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Sep 2006 11:13:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:52992] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 3E/66-28275-F2330154 for <hadoop-dev@lucene.apache.org>;
 Tue, 19 Sep 2006 11:13:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CF6D34190CA
	for <hadoop-dev@lucene.apache.org>; Tue, 19 Sep 2006 18:09:27 +0000 (GMT)
Message-ID: <31924579.1158689367847.JavaMail.jira@brutus>
Date: Tue, 19 Sep 2006 11:09:27 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-263) task status should include timestamps
 for when a job transitions
In-Reply-To: <6879018.1149102869840.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-263?page=all ]

Sanjay Dahiya updated HADOOP-263:
---------------------------------

    Attachment: Hadoop-263_3.patch

The patch no longer works with current trunk. Here is an updated patch.

> task status should include timestamps for when a job transitions
> ----------------------------------------------------------------
>
>                 Key: HADOOP-263
>                 URL: http://issues.apache.org/jira/browse/HADOOP-263
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.2.1
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-263.patch, Hadoop-263_1.patch, Hadoop-263_2.patch, Hadoop-263_3.patch, patch.txt, patch.txt, patch.txt, patch.txt
>
>
> It would help users to understand what happened if the task status included information about when the task transitioned:
> Map:
>    started
>    finished
> Reduce:
>    started
>    shuffle finished
>    sort finished
>    finished

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 19 18:21:03 2006
Return-Path: 
 <hadoop-dev-return-3811-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 22859 invoked from network); 19 Sep 2006 18:21:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Sep 2006 18:21:03 -0000
Received: (qmail 997 invoked by uid 500); 19 Sep 2006 18:21:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 978 invoked by uid 500); 19 Sep 2006 18:21:02 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 955 invoked by uid 99); 19 Sep 2006 18:21:02 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Sep 2006 11:21:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:43011] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id B0/B6-28275-B0530154 for <hadoop-dev@lucene.apache.org>;
 Tue, 19 Sep 2006 11:20:59 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EA136410069
	for <hadoop-dev@lucene.apache.org>; Tue, 19 Sep 2006 18:17:23 +0000 (GMT)
Message-ID: <11751961.1158689843956.JavaMail.jira@brutus>
Date: Tue, 19 Sep 2006 11:17:23 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-239) job tracker WI drops jobs after 24
 hours
In-Reply-To: <7996228.1148318969883.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-239?page=all ]

Sanjay Dahiya updated HADOOP-239:
---------------------------------

    Attachment: Hadoop-239.patch

A patch for maintaining job tracker history. This patch - 
1. instruments JobInProgress to add log events to history file. 
2. Jobhistory management with a job master index file and one history file per job,  parser for job history files. 
3. Contains WI for viewing Jobtracker history. 

This patch depends on Hadoop-263, it wont work otherwise. 

> job tracker WI drops jobs after 24 hours
> ----------------------------------------
>
>                 Key: HADOOP-239
>                 URL: http://issues.apache.org/jira/browse/HADOOP-239
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Yoram Arnon
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: Hadoop-239.patch
>
>
> The jobtracker's WI, keeps track of jobs executed in the past 24 hours.
> if the cluster was idle for a day (say Sunday) it drops all its history.
> Monday morning, the page is empty.
> Better would be to store a fixed number of jobs (say 10 each of succeeded and failed jobs).
> Also, if the job tracker is restarted, it loses all its history.
> The history should be persistent, withstanding restarts and upgrades.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 19 18:56:00 2006
Return-Path: 
 <hadoop-dev-return-3812-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32491 invoked from network); 19 Sep 2006 18:56:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Sep 2006 18:56:00 -0000
Received: (qmail 74330 invoked by uid 500); 19 Sep 2006 18:55:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 74314 invoked by uid 500); 19 Sep 2006 18:55:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 74305 invoked by uid 99); 19 Sep 2006 18:55:59 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Sep 2006 11:55:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:58838] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 87/C7-28275-D3D30154 for <hadoop-dev@lucene.apache.org>;
 Tue, 19 Sep 2006 11:55:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 57DF041006A
	for <hadoop-dev@lucene.apache.org>; Tue, 19 Sep 2006 18:52:22 +0000 (GMT)
Message-ID: <13028973.1158691942356.JavaMail.jira@brutus>
Date: Tue, 19 Sep 2006 11:52:22 -0700 (PDT)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-549) readStringArray bug
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

readStringArray bug
-------------------

                 Key: HADOOP-549
                 URL: http://issues.apache.org/jira/browse/HADOOP-549
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
            Reporter: Michel Tourn


TaskReport[] rep = jc.getMapTaskReports(jobId);
I get de/serialization problems:


This change suggested by Owen fixes it:
-    new ObjectWritable(diagnostics).write(out);
+    WritableUtils.writeStringArray(out, diagnostics);

-    ObjectWritable wrapper = new ObjectWritable();
-    wrapper.readFields(in);
-    diagnostics = (String[])wrapper.get();
+    diagnostics = WritableUtils.readStringArray(in);

java.lang.NullPointerException
at org.apache.hadoop.io.ObjectWritable.readObject(ObjectWritable.java:174)
at org.apache.hadoop.io.ObjectWritable.readFields(ObjectWritable.java:59)
at org.apache.hadoop.mapred.TaskReport.readFields(TaskReport.java:64)
at org.apache.hadoop.io.ObjectWritable.readObject(ObjectWritable.java:225)
at org.apache.hadoop.io.ObjectWritable.readObject(ObjectWritable.java:163)
at org.apache.hadoop.io.ObjectWritable.readObject(ObjectWritable.java:210)
at org.apache.hadoop.io.ObjectWritable.readFields(ObjectWritable.java:59)
at org.apache.hadoop.ipc.Client$Connection.run(Client.java:256)
2006-09-19 08:44:31,059 WARN  ipc.Server (Server.java:run(493)) - handler output error
java.nio.channels.ClosedChannelException


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 19 18:58:00 2006
Return-Path: 
 <hadoop-dev-return-3813-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32893 invoked from network); 19 Sep 2006 18:58:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Sep 2006 18:58:00 -0000
Received: (qmail 80817 invoked by uid 500); 19 Sep 2006 18:57:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 80795 invoked by uid 500); 19 Sep 2006 18:57:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 80786 invoked by uid 99); 19 Sep 2006 18:57:59 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Sep 2006 11:57:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:58857] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 37/D7-28275-6BD30154 for <hadoop-dev@lucene.apache.org>;
 Tue, 19 Sep 2006 11:57:59 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 50AE5410069
	for <hadoop-dev@lucene.apache.org>; Tue, 19 Sep 2006 18:54:23 +0000 (GMT)
Message-ID: <14418673.1158692063327.JavaMail.jira@brutus>
Date: Tue, 19 Sep 2006 11:54:23 -0700 (PDT)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-549) readStringArray bug
In-Reply-To: <13028973.1158691942356.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-549?page=all ]

Michel Tourn updated HADOOP-549:
--------------------------------

    Attachment: readstringarray.patch

> readStringArray bug
> -------------------
>
>                 Key: HADOOP-549
>                 URL: http://issues.apache.org/jira/browse/HADOOP-549
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Michel Tourn
>         Attachments: readstringarray.patch
>
>
> TaskReport[] rep = jc.getMapTaskReports(jobId);
> I get de/serialization problems:
> This change suggested by Owen fixes it:
> -    new ObjectWritable(diagnostics).write(out);
> +    WritableUtils.writeStringArray(out, diagnostics);
> -    ObjectWritable wrapper = new ObjectWritable();
> -    wrapper.readFields(in);
> -    diagnostics = (String[])wrapper.get();
> +    diagnostics = WritableUtils.readStringArray(in);
> java.lang.NullPointerException
> at org.apache.hadoop.io.ObjectWritable.readObject(ObjectWritable.java:174)
> at org.apache.hadoop.io.ObjectWritable.readFields(ObjectWritable.java:59)
> at org.apache.hadoop.mapred.TaskReport.readFields(TaskReport.java:64)
> at org.apache.hadoop.io.ObjectWritable.readObject(ObjectWritable.java:225)
> at org.apache.hadoop.io.ObjectWritable.readObject(ObjectWritable.java:163)
> at org.apache.hadoop.io.ObjectWritable.readObject(ObjectWritable.java:210)
> at org.apache.hadoop.io.ObjectWritable.readFields(ObjectWritable.java:59)
> at org.apache.hadoop.ipc.Client$Connection.run(Client.java:256)
> 2006-09-19 08:44:31,059 WARN  ipc.Server (Server.java:run(493)) - handler output error
> java.nio.channels.ClosedChannelException

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 19 19:02:07 2006
Return-Path: 
 <hadoop-dev-return-3814-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33878 invoked from network); 19 Sep 2006 19:02:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Sep 2006 19:02:07 -0000
Received: (qmail 89646 invoked by uid 500); 19 Sep 2006 19:02:06 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 89619 invoked by uid 500); 19 Sep 2006 19:02:06 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 89610 invoked by uid 99); 19 Sep 2006 19:02:06 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Sep 2006 12:02:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:38086] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 27/F7-28275-CAE30154 for <hadoop-dev@lucene.apache.org>;
 Tue, 19 Sep 2006 12:02:04 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CDCD0410069
	for <hadoop-dev@lucene.apache.org>; Tue, 19 Sep 2006 18:58:28 +0000 (GMT)
Message-ID: <9543975.1158692308840.JavaMail.jira@brutus>
Date: Tue, 19 Sep 2006 11:58:28 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-293) map reduce job fail without reporting
 a reason
In-Reply-To: <25233677.1149814169844.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-293?page=all ]

Owen O'Malley updated HADOOP-293:
---------------------------------

    Status: Patch Available  (was: Open)

> map reduce job fail without reporting a reason
> ----------------------------------------------
>
>                 Key: HADOOP-293
>                 URL: http://issues.apache.org/jira/browse/HADOOP-293
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.3.1
>            Reporter: Yoram Arnon
>         Assigned To: Owen O'Malley
>         Attachments: err-report.patch, report-error-1.patch
>
>
> Often I see in the WI reports of tasks failing without information reported as to the reason of the failure.
> It makes analysis and fixing the problem much harder.
> The reason for the failure should always be reported in the WI.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 19 19:02:09 2006
Return-Path: 
 <hadoop-dev-return-3815-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33981 invoked from network); 19 Sep 2006 19:02:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Sep 2006 19:02:09 -0000
Received: (qmail 90074 invoked by uid 500); 19 Sep 2006 19:02:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 90045 invoked by uid 500); 19 Sep 2006 19:02:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 90024 invoked by uid 99); 19 Sep 2006 19:02:08 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Sep 2006 12:02:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:38092] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id D7/F7-28275-FAE30154 for <hadoop-dev@lucene.apache.org>;
 Tue, 19 Sep 2006 12:02:07 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C9F3541006E
	for <hadoop-dev@lucene.apache.org>; Tue, 19 Sep 2006 18:58:31 +0000 (GMT)
Message-ID: <28058383.1158692311824.JavaMail.jira@brutus>
Date: Tue, 19 Sep 2006 11:58:31 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-261) when map outputs are lost, nothing is
 shown in the webapp about why the map task failed
In-Reply-To: <18552838.1149014909866.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-261?page=all ]

Owen O'Malley updated HADOOP-261:
---------------------------------

    Status: Patch Available  (was: Open)

> when map outputs are lost, nothing is shown in the webapp about why the map task failed
> ---------------------------------------------------------------------------------------
>
>                 Key: HADOOP-261
>                 URL: http://issues.apache.org/jira/browse/HADOOP-261
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.2.1
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>         Attachments: map-out-lost.patch
>
>
> When a task tracker invokes mapOutputLost, it does not include a diagnostic that lets the user (or the web app) know what failed in the map. I want to add a diagnostic message.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 19 21:33:02 2006
Return-Path: 
 <hadoop-dev-return-3816-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93927 invoked from network); 19 Sep 2006 21:33:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Sep 2006 21:33:02 -0000
Received: (qmail 36537 invoked by uid 500); 19 Sep 2006 21:33:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 36509 invoked by uid 500); 19 Sep 2006 21:33:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 36499 invoked by uid 99); 19 Sep 2006 21:33:01 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Sep 2006 14:33:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:55413] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 98/3C-28275-A0260154 for <hadoop-dev@lucene.apache.org>;
 Tue, 19 Sep 2006 14:32:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 53C6241006D
	for <hadoop-dev@lucene.apache.org>; Tue, 19 Sep 2006 21:29:22 +0000 (GMT)
Message-ID: <6747780.1158701362340.JavaMail.jira@brutus>
Date: Tue, 19 Sep 2006 14:29:22 -0700 (PDT)
From: "Bryan Pendleton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-550) Text constructure can throw exception
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Text constructure can throw exception
-------------------------------------

                 Key: HADOOP-550
                 URL: http://issues.apache.org/jira/browse/HADOOP-550
             Project: Hadoop
          Issue Type: Bug
            Reporter: Bryan Pendleton


I finally got back around to moving my working code to using Text objects.

And, once again, switching to Text (from UTF8) means my jobs are failing. This time, its better defined - constructing a Text from a string extracted from Real World data makes the Text object constructor throw a CharacterCodingException. This may be legit - I don't actually understand UTF well enough to understand what's wrong with the supplied string. I'm assembling a series of strings, some of which are user-supplied, and something causes the Text constructor to barf.

However, this is still completely unacceptable. If I need to stuff textual data someplace - I need the container to *do* it. If user-supplied inputs can't be stored as a "UTF" aware text value, then another container needs to be brought into existence. Sure, I can use a BytesWritable, but, as its name implies - Text should handle "text". If Text is supposed to == "StringWritable", then, well, it doesn't, yet.

I admit to being a few weeks' back in the bleeding edge at this point, so maybe my particluar Text bug has been fixed, though the only fixes to Text I see are adopting it into more of the internals of Hadoop. This argument goes double in that case - if we're using Text objects internally, it should really be a totally solid object - construct one from a String, get one back, but _never_  throw a content-related Exception. Or, if Text is not the right object because its data-sensitive, then I argue we shouldn't use it in any case where data might kill it - internal, or anywhere else (by default).

Please, don't remove UTF8, for now.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 19 23:02:02 2006
Return-Path: 
 <hadoop-dev-return-3817-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 15116 invoked from network); 19 Sep 2006 23:02:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Sep 2006 23:02:02 -0000
Received: (qmail 64117 invoked by uid 500); 19 Sep 2006 23:02:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64090 invoked by uid 500); 19 Sep 2006 23:02:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64056 invoked by uid 99); 19 Sep 2006 23:02:00 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Sep 2006 16:02:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:51344] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 7C/2E-28275-6E670154 for <hadoop-dev@lucene.apache.org>;
 Tue, 19 Sep 2006 16:01:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6281D41006B
	for <hadoop-dev@lucene.apache.org>; Tue, 19 Sep 2006 22:58:22 +0000 (GMT)
Message-ID: <28507855.1158706702400.JavaMail.jira@brutus>
Date: Tue, 19 Sep 2006 15:58:22 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-551) reduce the number of lines printed to
 the console during execution
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

reduce the number of lines printed to the console during execution
------------------------------------------------------------------

                 Key: HADOOP-551
                 URL: http://issues.apache.org/jira/browse/HADOOP-551
             Project: Hadoop
          Issue Type: Improvement
            Reporter: Owen O'Malley
         Assigned To: Owen O'Malley
            Priority: Minor


In the patch for HADOOP-423, I made the web ui and the job client cli format the percentage done consistently as 0.00 - 100.00%. This has the side effect of making the job client print a lot more lines to the user's console (up to 20k!).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 19 23:04:01 2006
Return-Path: 
 <hadoop-dev-return-3818-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 15291 invoked from network); 19 Sep 2006 23:04:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Sep 2006 23:04:01 -0000
Received: (qmail 64869 invoked by uid 500); 19 Sep 2006 23:04:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64844 invoked by uid 500); 19 Sep 2006 23:04:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64835 invoked by uid 99); 19 Sep 2006 23:04:00 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Sep 2006 16:04:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:51352] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 28/3E-28275-06770154 for <hadoop-dev@lucene.apache.org>;
 Tue, 19 Sep 2006 16:04:00 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7691641006E
	for <hadoop-dev@lucene.apache.org>; Tue, 19 Sep 2006 23:00:24 +0000 (GMT)
Message-ID: <28125472.1158706824483.JavaMail.jira@brutus>
Date: Tue, 19 Sep 2006 16:00:24 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-551) reduce the number of lines printed to
 the console during execution
In-Reply-To: <28507855.1158706702400.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-551?page=all ]

Owen O'Malley updated HADOOP-551:
---------------------------------

    Attachment: cli-whole-percent.patch

This patch adds a parameter to the formatPercent method that specifies the desired number of digits after the decimal. The cli then passes "0" and the web ui passes "2".

What do people think?

> reduce the number of lines printed to the console during execution
> ------------------------------------------------------------------
>
>                 Key: HADOOP-551
>                 URL: http://issues.apache.org/jira/browse/HADOOP-551
>             Project: Hadoop
>          Issue Type: Improvement
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>            Priority: Minor
>         Attachments: cli-whole-percent.patch
>
>
> In the patch for HADOOP-423, I made the web ui and the job client cli format the percentage done consistently as 0.00 - 100.00%. This has the side effect of making the job client print a lot more lines to the user's console (up to 20k!).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 20 07:25:02 2006
Return-Path: 
 <hadoop-dev-return-3819-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 28339 invoked from network); 20 Sep 2006 07:25:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Sep 2006 07:25:02 -0000
Received: (qmail 14337 invoked by uid 500); 20 Sep 2006 07:25:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14139 invoked by uid 500); 20 Sep 2006 07:25:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 14130 invoked by uid 99); 20 Sep 2006 07:25:00 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Sep 2006 00:25:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:42914] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id C2/70-01762-BCCE0154 for <hadoop-dev@lucene.apache.org>;
 Wed, 20 Sep 2006 00:25:00 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 690E27142F4
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Sep 2006 07:21:23 +0000 (GMT)
Message-ID: <10071725.1158736883427.JavaMail.jira@brutus>
Date: Wed, 20 Sep 2006 00:21:23 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-306) Safe mode and name node startup
 procedures
In-Reply-To: <5719318.1150505909849.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-306?page=all ]

Konstantin Shvachko updated HADOOP-306:
---------------------------------------

    Attachment: SafeModeEnum.patch

> Safe mode and name node startup procedures
> ------------------------------------------
>
>                 Key: HADOOP-306
>                 URL: http://issues.apache.org/jira/browse/HADOOP-306
>             Project: Hadoop
>          Issue Type: New Feature
>    Affects Versions: 0.3.2
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>         Attachments: SafeMode.patch, SafeModeEnum.patch
>
>
> This is a proposal to improve DFS cluster startup process.
> The data node startup procedures were described and implemented in HADOOP-124.
> I'm trying to extend them to the name node here.
> The main idea is to introduce safe mode, which can be entered manually for administration
> purposes, or automatically when a configurable threshold of active data nodes is breached,
> or at startup when the node stays in safe mode until the minimal limit of active
> nodes is reached.
> This are high level requirements intended to improve the name node and cluster reliability.
>     = The name node safe mode means that the name node is not changing the state of the
>        file system. Meta data is read-only, and block replication / removal is not taking place.
>     = In safe mode the name node accepts data node registrations and
>        processes their block reports.
>     = The name node always starts in safe mode and stays safe until the majority
>         (a configurable parameter: safemode.threshold) of data nodes (or blocks?)
>         is reported.
>     = The name node can also fall into safe mode when the number of non-active
>         (heartbeats stopped coming in) data nodes becomes critical.
>     = The startup "silent period", when the name node is in safe mode and is
>         not issuing any block requests to the data nodes, is initially set to a
>         configurable value safemode.timeout.increment. By the end of the timeout
>         the name node checks the safemode.threshold and decides whether to switch
>         to the normal mode or to stay in safe. If the normal mode criteria is not
>         met, then the silent period is extended by incrementing the safemode timeout.
>     = The name node stays in safe mode not longer than a configurable value of
>         safemode.timeout.max, in which case it logs missing data nodes and shuts
>         itself down.
>     = When the name node switches to normal mode it checks whether all required
>         data nodes have actually registered, based on the list of active data storages
>         from the last session. Then it logs missing nodes, if any, and starts
>         replicating and/or deleting blocks as required.
>     = A historical list of data storages (nodes) ever registered with the cluster is
>         persistently stored in the image and log files. The list is used in two ways:
>         a) at startup to verify whether all nodes have registered, and to report
>         missing nodes;
>         b) at runtime if a data node registers with a new storage id the
>         name node verifies that no new blocks are reported from that storage,
>         which would prevent us from accidentally connecting data nodes from a
>         different cluster.
>     = The name node should have an option to run in safe mode. Starting with
>         that option would mean it never leaves safe mode.
>         This is useful for testing the cluster.
>     = Data nodes that can not connect to the name node for a long time (configurable)
>         should shut down themselves.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 20 07:31:02 2006
Return-Path: 
 <hadoop-dev-return-3820-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31521 invoked from network); 20 Sep 2006 07:31:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Sep 2006 07:31:02 -0000
Received: (qmail 20253 invoked by uid 500); 20 Sep 2006 07:31:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 20056 invoked by uid 500); 20 Sep 2006 07:31:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 20047 invoked by uid 99); 20 Sep 2006 07:31:01 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Sep 2006 00:31:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:41974] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 75/A0-01762-43EE0154 for <hadoop-dev@lucene.apache.org>;
 Wed, 20 Sep 2006 00:31:00 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 839B17142F4
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Sep 2006 07:27:23 +0000 (GMT)
Message-ID: <6373520.1158737243536.JavaMail.jira@brutus>
Date: Wed, 20 Sep 2006 00:27:23 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-306) Safe mode and name node startup
 procedures
In-Reply-To: <5719318.1150505909849.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-306?page=all ]

Konstantin Shvachko updated HADOOP-306:
---------------------------------------

    Status: Patch Available  (was: Open)

Making enum implement Writable does not work, since you cannot implement 
readFields() so that it'd modify fields (which are all final) in enum and change its state. 

I made a simple modification to ObjectWritable that treats enumerator type as a s
pecial case like String or Array. This works fine for all simple (traditional) enum types. 

If we will ever want to use internal fields and other "fancy" enum features, which are 
considered to be confusing for most programmers anyway :-), then we will need to 
introduce parameters to the WritableFactory.newInstance() that could be used to 
construct a correct instance of the enum.

This patch in addition to what it had before introduces an enum type SafeModeAction 
and a new functionality that lets RPC pass simple enumerator types.


> Safe mode and name node startup procedures
> ------------------------------------------
>
>                 Key: HADOOP-306
>                 URL: http://issues.apache.org/jira/browse/HADOOP-306
>             Project: Hadoop
>          Issue Type: New Feature
>    Affects Versions: 0.3.2
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>         Attachments: SafeMode.patch, SafeModeEnum.patch
>
>
> This is a proposal to improve DFS cluster startup process.
> The data node startup procedures were described and implemented in HADOOP-124.
> I'm trying to extend them to the name node here.
> The main idea is to introduce safe mode, which can be entered manually for administration
> purposes, or automatically when a configurable threshold of active data nodes is breached,
> or at startup when the node stays in safe mode until the minimal limit of active
> nodes is reached.
> This are high level requirements intended to improve the name node and cluster reliability.
>     = The name node safe mode means that the name node is not changing the state of the
>        file system. Meta data is read-only, and block replication / removal is not taking place.
>     = In safe mode the name node accepts data node registrations and
>        processes their block reports.
>     = The name node always starts in safe mode and stays safe until the majority
>         (a configurable parameter: safemode.threshold) of data nodes (or blocks?)
>         is reported.
>     = The name node can also fall into safe mode when the number of non-active
>         (heartbeats stopped coming in) data nodes becomes critical.
>     = The startup "silent period", when the name node is in safe mode and is
>         not issuing any block requests to the data nodes, is initially set to a
>         configurable value safemode.timeout.increment. By the end of the timeout
>         the name node checks the safemode.threshold and decides whether to switch
>         to the normal mode or to stay in safe. If the normal mode criteria is not
>         met, then the silent period is extended by incrementing the safemode timeout.
>     = The name node stays in safe mode not longer than a configurable value of
>         safemode.timeout.max, in which case it logs missing data nodes and shuts
>         itself down.
>     = When the name node switches to normal mode it checks whether all required
>         data nodes have actually registered, based on the list of active data storages
>         from the last session. Then it logs missing nodes, if any, and starts
>         replicating and/or deleting blocks as required.
>     = A historical list of data storages (nodes) ever registered with the cluster is
>         persistently stored in the image and log files. The list is used in two ways:
>         a) at startup to verify whether all nodes have registered, and to report
>         missing nodes;
>         b) at runtime if a data node registers with a new storage id the
>         name node verifies that no new blocks are reported from that storage,
>         which would prevent us from accidentally connecting data nodes from a
>         different cluster.
>     = The name node should have an option to run in safe mode. Starting with
>         that option would mean it never leaves safe mode.
>         This is useful for testing the cluster.
>     = Data nodes that can not connect to the name node for a long time (configurable)
>         should shut down themselves.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 20 09:11:35 2006
Return-Path: 
 <hadoop-dev-return-3821-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 61280 invoked from network); 20 Sep 2006 09:11:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Sep 2006 09:11:35 -0000
Received: (qmail 30312 invoked by uid 500); 20 Sep 2006 09:11:16 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 30246 invoked by uid 500); 20 Sep 2006 09:11:16 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 30206 invoked by uid 99); 20 Sep 2006 09:11:16 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Sep 2006 02:11:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:60702] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id E8/21-00532-96501154 for <hadoop-dev@lucene.apache.org>;
 Wed, 20 Sep 2006 02:10:01 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D32C14190C7
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Sep 2006 09:06:24 +0000 (GMT)
Message-ID: <23031589.1158743184861.JavaMail.jira@brutus>
Date: Wed, 20 Sep 2006 02:06:24 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-431) default behaviour of dfsShell -rm
 should resemble 'rm -i', not 'rm -rf'
In-Reply-To: <15901306.1155057373927.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-431?page=all ]

Sameer Paranjpye reassigned HADOOP-431:
---------------------------------------

    Assignee: Sameer Paranjpye  (was: Wendy Chien)

> default behaviour of dfsShell -rm should resemble 'rm -i', not 'rm -rf'
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-431
>                 URL: http://issues.apache.org/jira/browse/HADOOP-431
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Yoram Arnon
>         Assigned To: Sameer Paranjpye
>
> when using hadoop dfs -rm <path> the behaviour is like that of rm -rf.
> That's very dangerous.
> A better behaviour would require a confirmation and allow removal of files only by default. Optional flags would allow recursive and forced deleted.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 20 09:14:25 2006
Return-Path: 
 <hadoop-dev-return-3822-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 62620 invoked from network); 20 Sep 2006 09:14:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Sep 2006 09:14:25 -0000
Received: (qmail 38438 invoked by uid 500); 20 Sep 2006 09:14:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38420 invoked by uid 500); 20 Sep 2006 09:14:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38411 invoked by uid 99); 20 Sep 2006 09:14:23 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Sep 2006 02:14:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:49420] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 30/51-00532-B5601154 for <hadoop-dev@lucene.apache.org>;
 Wed, 20 Sep 2006 02:14:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 768824190C7
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Sep 2006 09:10:26 +0000 (GMT)
Message-ID: <16202452.1158743426483.JavaMail.jira@brutus>
Date: Wed, 20 Sep 2006 02:10:26 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Work started: (HADOOP-431) default behaviour of dfsShell -rm
 should resemble 'rm -i', not 'rm -rf'
In-Reply-To: <15901306.1155057373927.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-431?page=all ]

Work on HADOOP-431 started by Sameer Paranjpye.

> default behaviour of dfsShell -rm should resemble 'rm -i', not 'rm -rf'
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-431
>                 URL: http://issues.apache.org/jira/browse/HADOOP-431
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Yoram Arnon
>         Assigned To: Sameer Paranjpye
>
> when using hadoop dfs -rm <path> the behaviour is like that of rm -rf.
> That's very dangerous.
> A better behaviour would require a confirmation and allow removal of files only by default. Optional flags would allow recursive and forced deleted.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 20 09:18:31 2006
Return-Path: 
 <hadoop-dev-return-3823-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 64322 invoked from network); 20 Sep 2006 09:18:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Sep 2006 09:18:31 -0000
Received: (qmail 50036 invoked by uid 500); 20 Sep 2006 09:18:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49966 invoked by uid 500); 20 Sep 2006 09:18:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49926 invoked by uid 99); 20 Sep 2006 09:18:22 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Sep 2006 02:18:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:54260] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id D3/71-00532-94701154 for <hadoop-dev@lucene.apache.org>;
 Wed, 20 Sep 2006 02:18:01 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BF7454190CB
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Sep 2006 09:14:24 +0000 (GMT)
Message-ID: <27801130.1158743664778.JavaMail.jira@brutus>
Date: Wed, 20 Sep 2006 02:14:24 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-431) default behaviour of dfsShell -rm
 should resemble 'rm -i', not 'rm -rf'
In-Reply-To: <15901306.1155057373927.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-431?page=all ]

Sameer Paranjpye updated HADOOP-431:
------------------------------------

               Status: Patch Available  (was: In Progress)
        Fix Version/s: 0.7.0
    Affects Version/s: 0.6.2
                           (was: 0.5.0)

This patch changes the behavior of 'dfs -rm' and makes it behave like UNIX 'rm'. 'dfs -rm' no longer removes directories. It also adds a new command 'dfs -rmr' which recursively removes directories. Both 'dfs -rm' and 'dfs -rmr' will remove files.

> default behaviour of dfsShell -rm should resemble 'rm -i', not 'rm -rf'
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-431
>                 URL: http://issues.apache.org/jira/browse/HADOOP-431
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.6.2
>            Reporter: Yoram Arnon
>         Assigned To: Sameer Paranjpye
>             Fix For: 0.7.0
>
>         Attachments: rmr.patch.txt
>
>
> when using hadoop dfs -rm <path> the behaviour is like that of rm -rf.
> That's very dangerous.
> A better behaviour would require a confirmation and allow removal of files only by default. Optional flags would allow recursive and forced deleted.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 20 09:18:36 2006
Return-Path: 
 <hadoop-dev-return-3824-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 64492 invoked from network); 20 Sep 2006 09:18:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Sep 2006 09:18:36 -0000
Received: (qmail 50815 invoked by uid 500); 20 Sep 2006 09:18:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 50782 invoked by uid 500); 20 Sep 2006 09:18:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 50764 invoked by uid 99); 20 Sep 2006 09:18:26 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Sep 2006 02:18:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from ([209.237.227.198:54263] helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1 r(10620)) with ESMTP
	id 34/71-00532-B4701154 for <hadoop-dev@lucene.apache.org>;
 Wed, 20 Sep 2006 02:18:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8FB164190CD
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Sep 2006 09:14:26 +0000 (GMT)
Message-ID: <22576545.1158743666585.JavaMail.jira@brutus>
Date: Wed, 20 Sep 2006 02:14:26 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-431) default behaviour of dfsShell -rm
 should resemble 'rm -i', not 'rm -rf'
In-Reply-To: <15901306.1155057373927.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-431?page=all ]

Sameer Paranjpye updated HADOOP-431:
------------------------------------

    Attachment: rmr.patch.txt

> default behaviour of dfsShell -rm should resemble 'rm -i', not 'rm -rf'
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-431
>                 URL: http://issues.apache.org/jira/browse/HADOOP-431
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.6.2
>            Reporter: Yoram Arnon
>         Assigned To: Sameer Paranjpye
>             Fix For: 0.7.0
>
>         Attachments: rmr.patch.txt
>
>
> when using hadoop dfs -rm <path> the behaviour is like that of rm -rf.
> That's very dangerous.
> A better behaviour would require a confirmation and allow removal of files only by default. Optional flags would allow recursive and forced deleted.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 20 16:28:05 2006
Return-Path: 
 <hadoop-dev-return-3825-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 42681 invoked from network); 20 Sep 2006 16:28:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Sep 2006 16:28:05 -0000
Received: (qmail 31230 invoked by uid 500); 20 Sep 2006 16:28:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 31208 invoked by uid 500); 20 Sep 2006 16:28:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31199 invoked by uid 99); 20 Sep 2006 16:28:03 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Sep 2006 09:28:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:37768]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 5B/A6-01963-01C61154 for <hadoop-dev@lucene.apache.org>;
 Wed, 20 Sep 2006 09:28:00 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5ABAF714304
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Sep 2006 16:24:23 +0000 (GMT)
Message-ID: <3925494.1158769463368.JavaMail.jira@brutus>
Date: Wed, 20 Sep 2006 09:24:23 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-551) reduce the number of lines printed to
 the console during execution
In-Reply-To: <28507855.1158706702400.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-551?page=all ]

Owen O'Malley updated HADOOP-551:
---------------------------------

    Attachment: cli-whole-percent-2.patch

After thinking about it, I realized that modifying a static was a bad plan, so I just made a new format object in formatPercent.

> reduce the number of lines printed to the console during execution
> ------------------------------------------------------------------
>
>                 Key: HADOOP-551
>                 URL: http://issues.apache.org/jira/browse/HADOOP-551
>             Project: Hadoop
>          Issue Type: Improvement
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>            Priority: Minor
>         Attachments: cli-whole-percent-2.patch, cli-whole-percent.patch
>
>
> In the patch for HADOOP-423, I made the web ui and the job client cli format the percentage done consistently as 0.00 - 100.00%. This has the side effect of making the job client print a lot more lines to the user's console (up to 20k!).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 20 16:32:02 2006
Return-Path: 
 <hadoop-dev-return-3826-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 44794 invoked from network); 20 Sep 2006 16:32:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Sep 2006 16:32:02 -0000
Received: (qmail 39897 invoked by uid 500); 20 Sep 2006 16:32:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 39876 invoked by uid 500); 20 Sep 2006 16:32:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 39867 invoked by uid 99); 20 Sep 2006 16:32:01 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Sep 2006 09:32:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:58522]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 3C/C6-01963-FFC61154 for <hadoop-dev@lucene.apache.org>;
 Wed, 20 Sep 2006 09:31:59 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 558B5714304
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Sep 2006 16:28:22 +0000 (GMT)
Message-ID: <32889729.1158769702347.JavaMail.jira@brutus>
Date: Wed, 20 Sep 2006 09:28:22 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-552) getMapOutput doesn't reliably detect
 errors and throw to the caller
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

getMapOutput doesn't reliably detect errors and throw to the caller
-------------------------------------------------------------------

                 Key: HADOOP-552
                 URL: http://issues.apache.org/jira/browse/HADOOP-552
             Project: Hadoop
          Issue Type: Bug
    Affects Versions: 0.6.2
            Reporter: Owen O'Malley
         Assigned To: Owen O'Malley
             Fix For: 0.7.0


getMapOutput does not reliabily detect errors in transmission, which usually ends up with an EOFException in the reduce's sort:

java.io.EOFException
	at java.io.DataInputStream.readFully(DataInputStream.java:178)
	at java.io.DataInputStream.readFully(DataInputStream.java:152)
	at org.apache.hadoop.io.SequenceFile$Reader.init(SequenceFile.java:952)
	at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:937)
	at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:928)
	at org.apache.hadoop.io.SequenceFile$Sorter$SortPass.run(SequenceFile.java:1594)
	at org.apache.hadoop.io.SequenceFile$Sorter.sortPass(SequenceFile.java:1523)
	at org.apache.hadoop.io.SequenceFile$Sorter.sort(SequenceFile.java:1496)
	at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:240)
	at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1173)


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 20 17:14:04 2006
Return-Path: 
 <hadoop-dev-return-3827-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 71612 invoked from network); 20 Sep 2006 17:14:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Sep 2006 17:14:04 -0000
Received: (qmail 40888 invoked by uid 500); 20 Sep 2006 17:14:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40706 invoked by uid 500); 20 Sep 2006 17:14:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 40697 invoked by uid 99); 20 Sep 2006 17:14:03 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Sep 2006 10:14:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:37781]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 76/18-01963-8D671154 for <hadoop-dev@lucene.apache.org>;
 Wed, 20 Sep 2006 10:14:00 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 57102714303
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Sep 2006 17:10:23 +0000 (GMT)
Message-ID: <2540583.1158772223353.JavaMail.jira@brutus>
Date: Wed, 20 Sep 2006 10:10:23 -0700 (PDT)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-549) readStringArray bug
In-Reply-To: <13028973.1158691942356.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-549?page=all ]

Michel Tourn updated HADOOP-549:
--------------------------------

    Status: Patch Available  (was: Open)

Existing attachment is the patch:
readstringarray.patch (0.8 kb)


> readStringArray bug
> -------------------
>
>                 Key: HADOOP-549
>                 URL: http://issues.apache.org/jira/browse/HADOOP-549
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Michel Tourn
>         Attachments: readstringarray.patch
>
>
> TaskReport[] rep = jc.getMapTaskReports(jobId);
> I get de/serialization problems:
> This change suggested by Owen fixes it:
> -    new ObjectWritable(diagnostics).write(out);
> +    WritableUtils.writeStringArray(out, diagnostics);
> -    ObjectWritable wrapper = new ObjectWritable();
> -    wrapper.readFields(in);
> -    diagnostics = (String[])wrapper.get();
> +    diagnostics = WritableUtils.readStringArray(in);
> java.lang.NullPointerException
> at org.apache.hadoop.io.ObjectWritable.readObject(ObjectWritable.java:174)
> at org.apache.hadoop.io.ObjectWritable.readFields(ObjectWritable.java:59)
> at org.apache.hadoop.mapred.TaskReport.readFields(TaskReport.java:64)
> at org.apache.hadoop.io.ObjectWritable.readObject(ObjectWritable.java:225)
> at org.apache.hadoop.io.ObjectWritable.readObject(ObjectWritable.java:163)
> at org.apache.hadoop.io.ObjectWritable.readObject(ObjectWritable.java:210)
> at org.apache.hadoop.io.ObjectWritable.readFields(ObjectWritable.java:59)
> at org.apache.hadoop.ipc.Client$Connection.run(Client.java:256)
> 2006-09-19 08:44:31,059 WARN  ipc.Server (Server.java:run(493)) - handler output error
> java.nio.channels.ClosedChannelException

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 20 18:52:09 2006
Return-Path: 
 <hadoop-dev-return-3828-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 6731 invoked from network); 20 Sep 2006 18:52:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Sep 2006 18:52:09 -0000
Received: (qmail 33836 invoked by uid 500); 20 Sep 2006 18:52:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 33744 invoked by uid 500); 20 Sep 2006 18:52:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 33710 invoked by uid 99); 20 Sep 2006 18:52:03 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Sep 2006 11:52:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:58877]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 3C/FA-01963-1DD81154 for <hadoop-dev@lucene.apache.org>;
 Wed, 20 Sep 2006 11:52:01 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 020E84190C7
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Sep 2006 18:48:24 +0000 (GMT)
Message-ID: <13846633.1158778104005.JavaMail.jira@brutus>
Date: Wed, 20 Sep 2006 11:48:24 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-444) In streaming with a NONE reducer, you
 get duplicate files if a mapper fails, is restarted, and succeeds next
 time.
In-Reply-To: <10321927.1155237793878.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-444?page=all ]

Yoram Arnon updated HADOOP-444:
-------------------------------

    Status: Patch Available  (was: Open)

this issue is resolved as part of the patch submitted for HADOOP-542.
Please mark it as fixed.
Thanks,
Yoram

> In streaming with a NONE reducer, you get duplicate files if a mapper fails, is restarted, and succeeds next time.
> ------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-444
>                 URL: http://issues.apache.org/jira/browse/HADOOP-444
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>    Affects Versions: 0.5.0
>            Reporter: Dick King
>         Assigned To: Michel Tourn
>
> When the dust settled after a streaming run, the directory ended up looking like this:
>   /user/dking/<project-name>/K-HTML-UTF8-2006-08-09-rescued-abstracted/task_0026_m_007384_0	<r 3>	10563406
>   /user/dking/<project-name>/K-HTML-UTF8-2006-08-09-rescued-abstracted/task_0026_m_007384_1	<r 3>	10563406
> Future processing will receive duplicated data.
> -dk

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 20 18:54:07 2006
Return-Path: 
 <hadoop-dev-return-3829-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 7894 invoked from network); 20 Sep 2006 18:54:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Sep 2006 18:54:07 -0000
Received: (qmail 38000 invoked by uid 500); 20 Sep 2006 18:54:06 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 37972 invoked by uid 500); 20 Sep 2006 18:54:06 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 37925 invoked by uid 99); 20 Sep 2006 18:54:05 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Sep 2006 11:54:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:58901]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id D8/0B-01963-B4E81154 for <hadoop-dev@lucene.apache.org>;
 Wed, 20 Sep 2006 11:54:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 65A224190CA
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Sep 2006 18:50:25 +0000 (GMT)
Message-ID: <30548116.1158778225413.JavaMail.jira@brutus>
Date: Wed, 20 Sep 2006 11:50:25 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-549) readStringArray bug
In-Reply-To: <13028973.1158691942356.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-549?page=comments#action_12436306 ] 
            
Owen O'Malley commented on HADOOP-549:
--------------------------------------

This is not a bug in readStringArray, it is a bug inTaskReport's serialization. The _fix_ is to use read/writeStringArray.

> readStringArray bug
> -------------------
>
>                 Key: HADOOP-549
>                 URL: http://issues.apache.org/jira/browse/HADOOP-549
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Michel Tourn
>         Attachments: readstringarray.patch
>
>
> TaskReport[] rep = jc.getMapTaskReports(jobId);
> I get de/serialization problems:
> This change suggested by Owen fixes it:
> -    new ObjectWritable(diagnostics).write(out);
> +    WritableUtils.writeStringArray(out, diagnostics);
> -    ObjectWritable wrapper = new ObjectWritable();
> -    wrapper.readFields(in);
> -    diagnostics = (String[])wrapper.get();
> +    diagnostics = WritableUtils.readStringArray(in);
> java.lang.NullPointerException
> at org.apache.hadoop.io.ObjectWritable.readObject(ObjectWritable.java:174)
> at org.apache.hadoop.io.ObjectWritable.readFields(ObjectWritable.java:59)
> at org.apache.hadoop.mapred.TaskReport.readFields(TaskReport.java:64)
> at org.apache.hadoop.io.ObjectWritable.readObject(ObjectWritable.java:225)
> at org.apache.hadoop.io.ObjectWritable.readObject(ObjectWritable.java:163)
> at org.apache.hadoop.io.ObjectWritable.readObject(ObjectWritable.java:210)
> at org.apache.hadoop.io.ObjectWritable.readFields(ObjectWritable.java:59)
> at org.apache.hadoop.ipc.Client$Connection.run(Client.java:256)
> 2006-09-19 08:44:31,059 WARN  ipc.Server (Server.java:run(493)) - handler output error
> java.nio.channels.ClosedChannelException

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 20 18:56:05 2006
Return-Path: 
 <hadoop-dev-return-3830-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8695 invoked from network); 20 Sep 2006 18:56:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Sep 2006 18:56:05 -0000
Received: (qmail 41543 invoked by uid 500); 20 Sep 2006 18:56:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 41521 invoked by uid 500); 20 Sep 2006 18:56:02 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 41510 invoked by uid 99); 20 Sep 2006 18:56:02 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Sep 2006 11:56:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:58231]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 64/1B-01963-0CE81154 for <hadoop-dev@lucene.apache.org>;
 Wed, 20 Sep 2006 11:56:00 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6DD517142E8
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Sep 2006 18:52:23 +0000 (GMT)
Message-ID: <23356208.1158778343447.JavaMail.jira@brutus>
Date: Wed, 20 Sep 2006 11:52:23 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-549) NullPointerException in TaskReport's
 serialization code
In-Reply-To: <13028973.1158691942356.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-549?page=all ]

Owen O'Malley updated HADOOP-549:
---------------------------------

    Summary: NullPointerException in TaskReport's serialization code  (was: readStringArray bug)

> NullPointerException in TaskReport's serialization code
> -------------------------------------------------------
>
>                 Key: HADOOP-549
>                 URL: http://issues.apache.org/jira/browse/HADOOP-549
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Michel Tourn
>         Attachments: readstringarray.patch
>
>
> TaskReport[] rep = jc.getMapTaskReports(jobId);
> I get de/serialization problems:
> This change suggested by Owen fixes it:
> -    new ObjectWritable(diagnostics).write(out);
> +    WritableUtils.writeStringArray(out, diagnostics);
> -    ObjectWritable wrapper = new ObjectWritable();
> -    wrapper.readFields(in);
> -    diagnostics = (String[])wrapper.get();
> +    diagnostics = WritableUtils.readStringArray(in);
> java.lang.NullPointerException
> at org.apache.hadoop.io.ObjectWritable.readObject(ObjectWritable.java:174)
> at org.apache.hadoop.io.ObjectWritable.readFields(ObjectWritable.java:59)
> at org.apache.hadoop.mapred.TaskReport.readFields(TaskReport.java:64)
> at org.apache.hadoop.io.ObjectWritable.readObject(ObjectWritable.java:225)
> at org.apache.hadoop.io.ObjectWritable.readObject(ObjectWritable.java:163)
> at org.apache.hadoop.io.ObjectWritable.readObject(ObjectWritable.java:210)
> at org.apache.hadoop.io.ObjectWritable.readFields(ObjectWritable.java:59)
> at org.apache.hadoop.ipc.Client$Connection.run(Client.java:256)
> 2006-09-19 08:44:31,059 WARN  ipc.Server (Server.java:run(493)) - handler output error
> java.nio.channels.ClosedChannelException

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 20 18:58:07 2006
Return-Path: 
 <hadoop-dev-return-3831-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9968 invoked from network); 20 Sep 2006 18:58:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Sep 2006 18:58:07 -0000
Received: (qmail 49345 invoked by uid 500); 20 Sep 2006 18:58:06 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49314 invoked by uid 500); 20 Sep 2006 18:58:06 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49305 invoked by uid 99); 20 Sep 2006 18:58:06 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Sep 2006 11:58:06 -0700
X-ASF-Spam-Status: No, hits=1.1 required=5.0 tests=SUBJ_FOR_ONLY
Received: from [209.237.227.198] ([209.237.227.198:58253]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 55/2B-01963-B3F81154 for <hadoop-dev@lucene.apache.org>;
 Wed, 20 Sep 2006 11:58:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 803947142F6
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Sep 2006 18:54:23 +0000 (GMT)
Message-ID: <21986943.1158778463522.JavaMail.jira@brutus>
Date: Wed, 20 Sep 2006 11:54:23 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-546) Task tracker doesnt generate job.xml
 in jobcache for some tasks ( possibly for only rescheduled tasks)
In-Reply-To: <19199550.1158662242615.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-546?page=all ]

Sanjay Dahiya updated HADOOP-546:
---------------------------------

        Summary: Task tracker doesnt generate job.xml in jobcache for some tasks ( possibly for only rescheduled tasks)  (was: Jobtracker doesnt generate job.xml in jobcache for some tasks ( possibly for only rescheduled tasks))
    Description: 
For many of the rescheduled tasks task tracker doesn't generate job.xml causing the task to fail. The exception appears in Job tracker logs and not in task tracker's logs. 

possibly related to Hadoop-543

2006-09-19 01:10:37,064 INFO org.apache.hadoop.mapred.TaskInProgress: Error from task_0001_m_022869_3: java.io.FileNotFoundException: .../hadoop/mapred/local/taskTracker/jobcache/job_0001/task_0001_m_022869_3/job.xml (No such file or directory)
        at java.io.FileOutputStream.open(Native Method)
        at java.io.FileOutputStream.<init>(FileOutputStream.java:179)
        at java.io.FileOutputStream.<init>(FileOutputStream.java:131)
        at org.apache.hadoop.fs.LocalFileSystem$LocalFSFileOutputStream.<init>(LocalFileSystem.java:133)
        at org.apache.hadoop.fs.LocalFileSystem.createRaw(LocalFileSystem.java:172)
        at org.apache.hadoop.fs.LocalFileSystem.createRaw(LocalFileSystem.java:180)
        at org.apache.hadoop.fs.FSDataOutputStream$Summer.<init>(FSDataOutputStream.java:56)
        at org.apache.hadoop.fs.FSDataOutputStream$Summer.<init>(FSDataOutputStream.java:45)
        at org.apache.hadoop.fs.FSDataOutputStream.<init>(FSDataOutputStream.java:146)
        at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:270)
        at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:177)
        at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.localizeTask(TaskTracker.java:810)
        at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.launchTask(TaskTracker.java:858)
        at org.apache.hadoop.mapred.TaskTracker.launchTaskForJob(TaskTracker.java:282)
        at org.apache.hadoop.mapred.TaskTracker.localizeJob(TaskTracker.java:275)
        at org.apache.hadoop.mapred.TaskTracker.startNewTask(TaskTracker.java:669)
        at org.apache.hadoop.mapred.TaskTracker.offerService(TaskTracker.java:486)
        at org.apache.hadoop.mapred.TaskTracker.run(TaskTracker.java:689)
        at org.apache.hadoop.mapred.TaskTracker.main(TaskTracker.java:1290)


  was:
For many of the rescheduled tasks job tracker doesn't generate job.xml the task fails on job tracker itself and is rescheduled for another node and fails again as the file is still not generated, causing the job to fail. 

possibly related to Hadoop-543

2006-09-19 01:10:37,064 INFO org.apache.hadoop.mapred.TaskInProgress: Error from task_0001_m_022869_3: java.io.FileNotFoundException: .../hadoop/mapred/local/taskTracker/jobcache/job_0001/task_0001_m_022869_3/job.xml (No such file or directory)
        at java.io.FileOutputStream.open(Native Method)
        at java.io.FileOutputStream.<init>(FileOutputStream.java:179)
        at java.io.FileOutputStream.<init>(FileOutputStream.java:131)
        at org.apache.hadoop.fs.LocalFileSystem$LocalFSFileOutputStream.<init>(LocalFileSystem.java:133)
        at org.apache.hadoop.fs.LocalFileSystem.createRaw(LocalFileSystem.java:172)
        at org.apache.hadoop.fs.LocalFileSystem.createRaw(LocalFileSystem.java:180)
        at org.apache.hadoop.fs.FSDataOutputStream$Summer.<init>(FSDataOutputStream.java:56)
        at org.apache.hadoop.fs.FSDataOutputStream$Summer.<init>(FSDataOutputStream.java:45)
        at org.apache.hadoop.fs.FSDataOutputStream.<init>(FSDataOutputStream.java:146)
        at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:270)
        at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:177)
        at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.localizeTask(TaskTracker.java:810)
        at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.launchTask(TaskTracker.java:858)
        at org.apache.hadoop.mapred.TaskTracker.launchTaskForJob(TaskTracker.java:282)
        at org.apache.hadoop.mapred.TaskTracker.localizeJob(TaskTracker.java:275)
        at org.apache.hadoop.mapred.TaskTracker.startNewTask(TaskTracker.java:669)
        at org.apache.hadoop.mapred.TaskTracker.offerService(TaskTracker.java:486)
        at org.apache.hadoop.mapred.TaskTracker.run(TaskTracker.java:689)
        at org.apache.hadoop.mapred.TaskTracker.main(TaskTracker.java:1290)



> Task tracker doesnt generate job.xml in jobcache for some tasks ( possibly for only rescheduled tasks)
> ------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-546
>                 URL: http://issues.apache.org/jira/browse/HADOOP-546
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.6.2
>            Reporter: Sanjay Dahiya
>            Priority: Critical
>
> For many of the rescheduled tasks task tracker doesn't generate job.xml causing the task to fail. The exception appears in Job tracker logs and not in task tracker's logs. 
> possibly related to Hadoop-543
> 2006-09-19 01:10:37,064 INFO org.apache.hadoop.mapred.TaskInProgress: Error from task_0001_m_022869_3: java.io.FileNotFoundException: .../hadoop/mapred/local/taskTracker/jobcache/job_0001/task_0001_m_022869_3/job.xml (No such file or directory)
>         at java.io.FileOutputStream.open(Native Method)
>         at java.io.FileOutputStream.<init>(FileOutputStream.java:179)
>         at java.io.FileOutputStream.<init>(FileOutputStream.java:131)
>         at org.apache.hadoop.fs.LocalFileSystem$LocalFSFileOutputStream.<init>(LocalFileSystem.java:133)
>         at org.apache.hadoop.fs.LocalFileSystem.createRaw(LocalFileSystem.java:172)
>         at org.apache.hadoop.fs.LocalFileSystem.createRaw(LocalFileSystem.java:180)
>         at org.apache.hadoop.fs.FSDataOutputStream$Summer.<init>(FSDataOutputStream.java:56)
>         at org.apache.hadoop.fs.FSDataOutputStream$Summer.<init>(FSDataOutputStream.java:45)
>         at org.apache.hadoop.fs.FSDataOutputStream.<init>(FSDataOutputStream.java:146)
>         at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:270)
>         at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:177)
>         at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.localizeTask(TaskTracker.java:810)
>         at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.launchTask(TaskTracker.java:858)
>         at org.apache.hadoop.mapred.TaskTracker.launchTaskForJob(TaskTracker.java:282)
>         at org.apache.hadoop.mapred.TaskTracker.localizeJob(TaskTracker.java:275)
>         at org.apache.hadoop.mapred.TaskTracker.startNewTask(TaskTracker.java:669)
>         at org.apache.hadoop.mapred.TaskTracker.offerService(TaskTracker.java:486)
>         at org.apache.hadoop.mapred.TaskTracker.run(TaskTracker.java:689)
>         at org.apache.hadoop.mapred.TaskTracker.main(TaskTracker.java:1290)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 20 20:35:05 2006
Return-Path: 
 <hadoop-dev-return-3832-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 65331 invoked from network); 20 Sep 2006 20:35:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Sep 2006 20:35:05 -0000
Received: (qmail 13398 invoked by uid 500); 20 Sep 2006 20:35:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13370 invoked by uid 500); 20 Sep 2006 20:35:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13361 invoked by uid 99); 20 Sep 2006 20:35:04 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Sep 2006 13:35:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:39825]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 84/BD-01963-6F5A1154 for <hadoop-dev@lucene.apache.org>;
 Wed, 20 Sep 2006 13:35:02 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 32CE24190C9
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Sep 2006 20:31:25 +0000 (GMT)
Message-ID: <7171287.1158784285205.JavaMail.jira@brutus>
Date: Wed, 20 Sep 2006 13:31:25 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-545) Unused parameter in
 hadoop-default.xml
In-Reply-To: <24727194.1158650902394.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-545?page=all ]

Doug Cutting resolved HADOOP-545.
---------------------------------

    Fix Version/s: 0.7.0
       Resolution: Fixed

I just committed this.  Thanks, Philippe!

> Unused parameter in hadoop-default.xml
> --------------------------------------
>
>                 Key: HADOOP-545
>                 URL: http://issues.apache.org/jira/browse/HADOOP-545
>             Project: Hadoop
>          Issue Type: Bug
>          Components: conf
>    Affects Versions: 0.6.2
>            Reporter: Philippe Gassmann
>            Priority: Trivial
>             Fix For: 0.7.0
>
>
> found a parameter in haddop-default.xml that seems not to be used anymore in the java code : mapred.task.tracker.output.port.
> I've done a grep "mapred.task.tracker.output.port" **/*.java (thanks zsh) in the whole source tree and the only result was :
> src/test/org/apache/hadoop/mapred/MiniMRCluster.java: jc.setInt("mapred.task.tracker.output.port", taskTrackerPort++);
> I think it should be removed from hadoop-default.xml

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 20 20:39:09 2006
Return-Path: 
 <hadoop-dev-return-3833-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67237 invoked from network); 20 Sep 2006 20:39:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Sep 2006 20:39:09 -0000
Received: (qmail 22305 invoked by uid 500); 20 Sep 2006 20:39:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 22098 invoked by uid 500); 20 Sep 2006 20:39:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22089 invoked by uid 99); 20 Sep 2006 20:39:08 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Sep 2006 13:39:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:34098]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 0E/CD-01963-8E6A1154 for <hadoop-dev@lucene.apache.org>;
 Wed, 20 Sep 2006 13:39:04 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 893697142F6
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Sep 2006 20:35:25 +0000 (GMT)
Message-ID: <30207122.1158784525559.JavaMail.jira@brutus>
Date: Wed, 20 Sep 2006 13:35:25 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-548) add a switch to allow unit tests to
 show output
In-Reply-To: <20327656.1158686483010.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-548?page=all ]

Doug Cutting updated HADOOP-548:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Owen!

> add a switch to allow unit tests to show output
> -----------------------------------------------
>
>                 Key: HADOOP-548
>                 URL: http://issues.apache.org/jira/browse/HADOOP-548
>             Project: Hadoop
>          Issue Type: Test
>    Affects Versions: 0.6.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>            Priority: Minor
>             Fix For: 0.7.0
>
>         Attachments: test-output.patch
>
>
> I'd like a switch so that I can have the unit tests show their output to the console.
> ant test   // current behavior
> ant -Dtest.output=yes  test // show output to console

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 20 20:53:47 2006
Return-Path: 
 <hadoop-dev-return-3834-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 73568 invoked from network); 20 Sep 2006 20:53:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Sep 2006 20:53:47 -0000
Received: (qmail 47728 invoked by uid 500); 20 Sep 2006 20:53:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47705 invoked by uid 500); 20 Sep 2006 20:53:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47666 invoked by uid 99); 20 Sep 2006 20:53:42 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Sep 2006 13:53:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:54067]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 21/2E-01963-15AA1154 for <hadoop-dev@lucene.apache.org>;
 Wed, 20 Sep 2006 13:53:38 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DE822714306
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Sep 2006 20:49:59 +0000 (GMT)
Message-ID: <30805621.1158785399908.JavaMail.jira@brutus>
Date: Wed, 20 Sep 2006 13:49:59 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-261) when map outputs are lost, nothing is
 shown in the webapp about why the map task failed
In-Reply-To: <18552838.1149014909866.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-261?page=all ]

Doug Cutting updated HADOOP-261:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.7.0
       Resolution: Fixed

I just committed this.  Thanks, Owen!

> when map outputs are lost, nothing is shown in the webapp about why the map task failed
> ---------------------------------------------------------------------------------------
>
>                 Key: HADOOP-261
>                 URL: http://issues.apache.org/jira/browse/HADOOP-261
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.2.1
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.7.0
>
>         Attachments: map-out-lost.patch
>
>
> When a task tracker invokes mapOutputLost, it does not include a diagnostic that lets the user (or the web app) know what failed in the map. I want to add a diagnostic message.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 20 21:08:04 2006
Return-Path: 
 <hadoop-dev-return-3835-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 79098 invoked from network); 20 Sep 2006 21:08:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Sep 2006 21:08:04 -0000
Received: (qmail 77551 invoked by uid 500); 20 Sep 2006 21:08:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 77526 invoked by uid 500); 20 Sep 2006 21:08:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 77517 invoked by uid 99); 20 Sep 2006 21:08:03 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Sep 2006 14:08:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:59077]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 6E/6E-01963-2BDA1154 for <hadoop-dev@lucene.apache.org>;
 Wed, 20 Sep 2006 14:08:02 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4AC9E714304
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Sep 2006 21:04:25 +0000 (GMT)
Message-ID: <24834228.1158786265290.JavaMail.jira@brutus>
Date: Wed, 20 Sep 2006 14:04:25 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-293) map reduce job fail without reporting
 a reason
In-Reply-To: <25233677.1149814169844.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-293?page=all ]

Doug Cutting updated HADOOP-293:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.7.0
       Resolution: Fixed

I just committed this.  Thanks, Owen!

> map reduce job fail without reporting a reason
> ----------------------------------------------
>
>                 Key: HADOOP-293
>                 URL: http://issues.apache.org/jira/browse/HADOOP-293
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.3.1
>            Reporter: Yoram Arnon
>         Assigned To: Owen O'Malley
>             Fix For: 0.7.0
>
>         Attachments: err-report.patch, report-error-1.patch
>
>
> Often I see in the WI reports of tasks failing without information reported as to the reason of the failure.
> It makes analysis and fixing the problem much harder.
> The reason for the failure should always be reported in the WI.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 20 21:29:06 2006
Return-Path: 
 <hadoop-dev-return-3836-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92296 invoked from network); 20 Sep 2006 21:29:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Sep 2006 21:29:06 -0000
Received: (qmail 10008 invoked by uid 500); 20 Sep 2006 21:29:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9993 invoked by uid 500); 20 Sep 2006 21:29:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9984 invoked by uid 99); 20 Sep 2006 21:29:05 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Sep 2006 14:29:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:51475]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 46/DE-01963-E92B1154 for <hadoop-dev@lucene.apache.org>;
 Wed, 20 Sep 2006 14:29:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 63300714309
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Sep 2006 21:25:24 +0000 (GMT)
Message-ID: <14682879.1158787524403.JavaMail.jira@brutus>
Date: Wed, 20 Sep 2006 14:25:24 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-263) task status should include timestamps
 for when a job transitions
In-Reply-To: <6879018.1149102869840.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-263?page=all ]

Doug Cutting updated HADOOP-263:
--------------------------------

    Status: Open  (was: Patch Available)

I am uncomfortable using progress status strings to determine which phase a task is in.  Rather we should have a proper API for this.  (This is similar to HADOOP-544, but different.)

Perhaps we should have an enum in ReduceTask named Phase.  TaskUmbilicalProtocol.progress() could get a new 'int phase' parameter that would include the phase.ordinal() value.  Would that work?

> task status should include timestamps for when a job transitions
> ----------------------------------------------------------------
>
>                 Key: HADOOP-263
>                 URL: http://issues.apache.org/jira/browse/HADOOP-263
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.2.1
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-263.patch, Hadoop-263_1.patch, Hadoop-263_2.patch, Hadoop-263_3.patch, patch.txt, patch.txt, patch.txt, patch.txt
>
>
> It would help users to understand what happened if the task status included information about when the task transitioned:
> Map:
>    started
>    finished
> Reduce:
>    started
>    shuffle finished
>    sort finished
>    finished

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 20 21:34:04 2006
Return-Path: 
 <hadoop-dev-return-3837-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 95527 invoked from network); 20 Sep 2006 21:34:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Sep 2006 21:34:04 -0000
Received: (qmail 22844 invoked by uid 500); 20 Sep 2006 21:34:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 22814 invoked by uid 500); 20 Sep 2006 21:34:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22805 invoked by uid 99); 20 Sep 2006 21:34:03 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Sep 2006 14:34:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:37469]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 26/FE-01963-9C3B1154 for <hadoop-dev@lucene.apache.org>;
 Wed, 20 Sep 2006 14:34:01 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7C438714307
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Sep 2006 21:30:23 +0000 (GMT)
Message-ID: <21710735.1158787823506.JavaMail.jira@brutus>
Date: Wed, 20 Sep 2006 14:30:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-549) NullPointerException in TaskReport's
 serialization code
In-Reply-To: <13028973.1158691942356.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-549?page=all ]

Doug Cutting updated HADOOP-549:
--------------------------------

    Status: Open  (was: Patch Available)

Since this changes the wire format of TaskReport, shouldn't it also increment the version of protocols and files that read & write TaskReport?  At a glance, I think that's just JobSubmissionProtocol.

> NullPointerException in TaskReport's serialization code
> -------------------------------------------------------
>
>                 Key: HADOOP-549
>                 URL: http://issues.apache.org/jira/browse/HADOOP-549
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Michel Tourn
>         Attachments: readstringarray.patch
>
>
> TaskReport[] rep = jc.getMapTaskReports(jobId);
> I get de/serialization problems:
> This change suggested by Owen fixes it:
> -    new ObjectWritable(diagnostics).write(out);
> +    WritableUtils.writeStringArray(out, diagnostics);
> -    ObjectWritable wrapper = new ObjectWritable();
> -    wrapper.readFields(in);
> -    diagnostics = (String[])wrapper.get();
> +    diagnostics = WritableUtils.readStringArray(in);
> java.lang.NullPointerException
> at org.apache.hadoop.io.ObjectWritable.readObject(ObjectWritable.java:174)
> at org.apache.hadoop.io.ObjectWritable.readFields(ObjectWritable.java:59)
> at org.apache.hadoop.mapred.TaskReport.readFields(TaskReport.java:64)
> at org.apache.hadoop.io.ObjectWritable.readObject(ObjectWritable.java:225)
> at org.apache.hadoop.io.ObjectWritable.readObject(ObjectWritable.java:163)
> at org.apache.hadoop.io.ObjectWritable.readObject(ObjectWritable.java:210)
> at org.apache.hadoop.io.ObjectWritable.readFields(ObjectWritable.java:59)
> at org.apache.hadoop.ipc.Client$Connection.run(Client.java:256)
> 2006-09-19 08:44:31,059 WARN  ipc.Server (Server.java:run(493)) - handler output error
> java.nio.channels.ClosedChannelException

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 20 21:48:06 2006
Return-Path: 
 <hadoop-dev-return-3838-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 770 invoked from network); 20 Sep 2006 21:48:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Sep 2006 21:48:06 -0000
Received: (qmail 41038 invoked by uid 500); 20 Sep 2006 21:48:06 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 41017 invoked by uid 500); 20 Sep 2006 21:48:06 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 41008 invoked by uid 99); 20 Sep 2006 21:48:05 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Sep 2006 14:48:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:51061]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 07/3F-01963-117B1154 for <hadoop-dev@lucene.apache.org>;
 Wed, 20 Sep 2006 14:48:02 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EE59B4190C8
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Sep 2006 21:44:23 +0000 (GMT)
Message-ID: <33448380.1158788663973.JavaMail.jira@brutus>
Date: Wed, 20 Sep 2006 14:44:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-550) Text constructure can throw
 exception
In-Reply-To: <6747780.1158701362340.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-550?page=comments#action_12436362 ] 
            
Doug Cutting commented on HADOOP-550:
-------------------------------------

So you're claiming that 'new String(myBytes, "UTF-8") doesn't throw an exception, but that 'new Text(myBytes)' does?

That would imply that String's CharsetDecoder specifies something besides CodingErrorAction.REPORT as its onMalformedInput and onUnmappableCharacter value.

http://java.sun.com/j2se/1.5.0/docs/api/java/nio/charset/CharsetDecoder.html#onMalformedInput(java.nio.charset.CodingErrorAction)

A quick glance at the sources confirms this.

I would support changing the behaviour of Text to use CharsetDecoder.REPLACE for both malformed input and unmappable characters.  That would also mean we could turn off verification.

> Text constructure can throw exception
> -------------------------------------
>
>                 Key: HADOOP-550
>                 URL: http://issues.apache.org/jira/browse/HADOOP-550
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Bryan Pendleton
>
> I finally got back around to moving my working code to using Text objects.
> And, once again, switching to Text (from UTF8) means my jobs are failing. This time, its better defined - constructing a Text from a string extracted from Real World data makes the Text object constructor throw a CharacterCodingException. This may be legit - I don't actually understand UTF well enough to understand what's wrong with the supplied string. I'm assembling a series of strings, some of which are user-supplied, and something causes the Text constructor to barf.
> However, this is still completely unacceptable. If I need to stuff textual data someplace - I need the container to *do* it. If user-supplied inputs can't be stored as a "UTF" aware text value, then another container needs to be brought into existence. Sure, I can use a BytesWritable, but, as its name implies - Text should handle "text". If Text is supposed to == "StringWritable", then, well, it doesn't, yet.
> I admit to being a few weeks' back in the bleeding edge at this point, so maybe my particluar Text bug has been fixed, though the only fixes to Text I see are adopting it into more of the internals of Hadoop. This argument goes double in that case - if we're using Text objects internally, it should really be a totally solid object - construct one from a String, get one back, but _never_  throw a content-related Exception. Or, if Text is not the right object because its data-sensitive, then I argue we shouldn't use it in any case where data might kill it - internal, or anywhere else (by default).
> Please, don't remove UTF8, for now.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 20 21:52:04 2006
Return-Path: 
 <hadoop-dev-return-3839-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 2497 invoked from network); 20 Sep 2006 21:52:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Sep 2006 21:52:04 -0000
Received: (qmail 47090 invoked by uid 500); 20 Sep 2006 21:52:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 46886 invoked by uid 500); 20 Sep 2006 21:52:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46877 invoked by uid 99); 20 Sep 2006 21:52:03 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Sep 2006 14:52:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:60137]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 59/4F-01963-008B1154 for <hadoop-dev@lucene.apache.org>;
 Wed, 20 Sep 2006 14:52:01 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 546D24190C9
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Sep 2006 21:48:23 +0000 (GMT)
Message-ID: <19407379.1158788903343.JavaMail.jira@brutus>
Date: Wed, 20 Sep 2006 14:48:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-551) reduce the number of lines printed to
 the console during execution
In-Reply-To: <28507855.1158706702400.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-551?page=all ]

Doug Cutting resolved HADOOP-551.
---------------------------------

    Fix Version/s: 0.7.0
       Resolution: Fixed

I just committed this.  Thanks, Owen!

> reduce the number of lines printed to the console during execution
> ------------------------------------------------------------------
>
>                 Key: HADOOP-551
>                 URL: http://issues.apache.org/jira/browse/HADOOP-551
>             Project: Hadoop
>          Issue Type: Improvement
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>            Priority: Minor
>             Fix For: 0.7.0
>
>         Attachments: cli-whole-percent-2.patch, cli-whole-percent.patch
>
>
> In the patch for HADOOP-423, I made the web ui and the job client cli format the percentage done consistently as 0.00 - 100.00%. This has the side effect of making the job client print a lot more lines to the user's console (up to 20k!).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 20 22:04:04 2006
Return-Path: 
 <hadoop-dev-return-3840-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 6129 invoked from network); 20 Sep 2006 22:04:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Sep 2006 22:04:04 -0000
Received: (qmail 58717 invoked by uid 500); 20 Sep 2006 22:04:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58699 invoked by uid 500); 20 Sep 2006 22:04:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58688 invoked by uid 99); 20 Sep 2006 22:04:04 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Sep 2006 15:04:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:44749]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id FC/7F-01963-1DAB1154 for <hadoop-dev@lucene.apache.org>;
 Wed, 20 Sep 2006 15:04:01 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 56F974190C7
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Sep 2006 22:00:23 +0000 (GMT)
Message-ID: <24277569.1158789623353.JavaMail.jira@brutus>
Date: Wed, 20 Sep 2006 15:00:23 -0700 (PDT)
From: "Bryan Pendleton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-550) Text constructure can throw
 exception
In-Reply-To: <6747780.1158701362340.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-550?page=comments#action_12436368 ] 
            
Bryan Pendleton commented on HADOOP-550:
----------------------------------------

Ah, the bowels of String handling I hadn't uncovered yet....

Yes, I would support that, at least as the default. Perhaps an alternate constructor could be used that still does MalformedInput detection, if the developer prefers that. In my case, and in the case of strings passing through internal hadoop interfaces, I'd rather not see malformed string content causing (typically) pointless errors.

> Text constructure can throw exception
> -------------------------------------
>
>                 Key: HADOOP-550
>                 URL: http://issues.apache.org/jira/browse/HADOOP-550
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Bryan Pendleton
>
> I finally got back around to moving my working code to using Text objects.
> And, once again, switching to Text (from UTF8) means my jobs are failing. This time, its better defined - constructing a Text from a string extracted from Real World data makes the Text object constructor throw a CharacterCodingException. This may be legit - I don't actually understand UTF well enough to understand what's wrong with the supplied string. I'm assembling a series of strings, some of which are user-supplied, and something causes the Text constructor to barf.
> However, this is still completely unacceptable. If I need to stuff textual data someplace - I need the container to *do* it. If user-supplied inputs can't be stored as a "UTF" aware text value, then another container needs to be brought into existence. Sure, I can use a BytesWritable, but, as its name implies - Text should handle "text". If Text is supposed to == "StringWritable", then, well, it doesn't, yet.
> I admit to being a few weeks' back in the bleeding edge at this point, so maybe my particluar Text bug has been fixed, though the only fixes to Text I see are adopting it into more of the internals of Hadoop. This argument goes double in that case - if we're using Text objects internally, it should really be a totally solid object - construct one from a String, get one back, but _never_  throw a content-related Exception. Or, if Text is not the right object because its data-sensitive, then I argue we shouldn't use it in any case where data might kill it - internal, or anywhere else (by default).
> Please, don't remove UTF8, for now.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 20 22:05:56 2006
Return-Path: 
 <hadoop-dev-return-3841-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 6926 invoked from network); 20 Sep 2006 22:05:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Sep 2006 22:05:56 -0000
Received: (qmail 60749 invoked by uid 500); 20 Sep 2006 22:05:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 60546 invoked by uid 500); 20 Sep 2006 22:05:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 60537 invoked by uid 99); 20 Sep 2006 22:05:55 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Sep 2006 15:05:55 -0700
Authentication-Results: idunn.apache.osuosl.org
 header.from=milindb@yahoo-inc.com; domainkeys=good
X-ASF-Spam-Status: No,
 hits=-14.1 required=5.0 tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,USER_IN_DEF_WHITELIST
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing
 draft-delany-domainkeys-base-01
Received: from [216.109.112.28] ([216.109.112.28:27036]
 helo=mrout2-b.corp.dcn.yahoo.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id D6/8F-01963-E3BB1154 for <hadoop-dev@lucene.apache.org>;
 Wed, 20 Sep 2006 15:05:52 -0700
Received: from [66.228.175.147] (socks1.corp.yahoo.com [216.145.54.158])
	by mrout2-b.corp.dcn.yahoo.com (8.13.6/8.13.6/y.out) with ESMTP id
 k8KM5Vl2067985
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Sep 2006 15:05:32 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:content-transfer-encoding:message-id:
	content-type:to:from:subject:date:x-mailer;
	b=WJmQuh+TQEMvckJRzTjv5/T7c7sSJjkaL0Qn1TB+MHPjbX3Dst7eg/IvyxSuAfMp
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Transfer-Encoding: 7bit
Message-Id: <ACC721A9-C328-40C5-B761-C80FFB1DB032@yahoo-inc.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: hadoop-dev@lucene.apache.org
From: Milind Bhandarkar <milindb@yahoo-inc.com>
Subject: Proposal for replicating namenode state and transaction logs
Date: Wed, 20 Sep 2006 15:07:13 -0700
X-Mailer: Apple Mail (2.752.2)
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Please comment on following proposal.

Proposal for Replication of DFS Namespace Images and Transaction Logs

Currently, when the namenode starts, it reads the namespace image  
from dfs.name.dir and from that, initializes the namespace data  
structures. If the transaction log exists, it merges the transaction  
logs with the in-memory namespace, and writes out the merged  
namespace image. It then reinitializes the transaction log file.

As namespace modifications occur, these modifications are logged into  
the transaction log file. The transaction log file is never flushed,  
and is closed only if the namenode shuts down normally. In case of  
error or forced shutdown of namenode, the last few buffered (but not  
yet written to the disk) transactions may get lost. In addition if  
the namespace image file is corrupted or is accidentally deleted, or  
if the disk holding that image file crashes, there is no way to  
recover the state of DFS.

This proposal suggests a design for replication the DFS namespace  
image as well as transaction logs, so that even in case of a  
catastrophic failure, the DFS state can almost always be recovered.

We suggest a two-pronged approach. First, allow multiple copies of  
image and transaction log on different volumes of namenode. Secondly,  
have backup "read-only" namenodes, that would allow continuous  
functioning of DFS even in case of namenode failure.

We propose that dfs.name.dir configuration parameter be allowed to  
have a comma-separated list of different locations within the  
namenode where DFS image and logs would be replicated. This allows  
for a disk failure to not hinder recoverability of DFS state. Each  
time the image file is updated, as well as each time a transaction is  
logged, it is written to all the locations specified in dfs.name.dir.  
The list of locations in dfs.name.dir could include all local disks  
of the namenode as well as NFS-mounted drives, thus providing a  
remote backup of DFS state. If the NFS-mounted drive is RAIDed, this  
itself provides the reliability required.

Currently, the transaction log file is always kept open in write- 
mode. Thus in case of the namenode failure, or forcibly shuttting  
down namenode can cause the last few transactions that have been  
buffered in memory to get lost. The number of transactions lost will  
depend on the buffer-size. We propose that the DFS administrator  
control this parameter. Configuration will include a parameter  
"dfs.namenode.edits.buffer" to specify number of transactions upon  
which the transaction log will be closed (thus flushing all the  
buffered transactions to disk), and reopened in append-mode.

In order to determine which image and log files are the snapshot of  
the latest state, these files should indicate a positive 4-byte  
"generation number". This can be achieved without even having to  
modify the image and transaction log file format. The filename can  
contain the generation number. Each time the namenode restarts, the  
generation number of both the image file as well as transaction log  
is incremented to reflect this. Upon startup, the namenode scans all  
the locations in dfs.name.dir to determine which location contains  
the latest image and corresponding logs according to the generation  
number, and loads the latest image and log (from possibly different  
locations). If in case the sizes of the transaction logs with the  
same name do not match, one with the larger size is chosen.

Second proposal (which can be in addition to the first multiple- 
volumes proposal) suggests having multiple backup namenodes. These  
backup name nodes are started on different machines with an  
additional command-line parameter "-backup" to the namenode.

The backup namenode functions in approximately the same way as the  
namenode in safe mode (i.e. read-only), except that upon startup, it  
connects to the main namenode specified in "fs.default.name",  
supplies the current generation of its image and transaction log and  
asks for the latest FSimage and transaction log, stores them on the  
disk locations in "dfs.name.dir", and accordingly also modifies its  
internal namesystem data structures. The backup name nodes do not  
listen to blockreports or heartbeats from datanodes. Their sole task  
is to keep a backup of DFS state. When the main namenode fails, any  
of these backup namenodes can be restarted by DFS administrator in  
normal mode, and DFS can continue functioning.

Later, the backup namenode can also be allowed to entertain read-only  
requests from DFS clients, thus making DFS more performant and scalable.

From MAILER-DAEMON Wed Sep 20 22:21:08 2006
Return-Path: 
 <hadoop-dev-return-3842-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12857 invoked from network); 20 Sep 2006 22:21:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Sep 2006 22:21:08 -0000
Received: (qmail 78553 invoked by uid 500); 20 Sep 2006 22:21:07 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 78516 invoked by uid 500); 20 Sep 2006 22:21:06 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 78481 invoked by uid 99); 20 Sep 2006 22:21:06 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Sep 2006 15:21:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:36580]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 06/CF-01963-DCEB1154 for <hadoop-dev@lucene.apache.org>;
 Wed, 20 Sep 2006 15:21:02 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F14854190C7
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Sep 2006 22:17:23 +0000 (GMT)
Message-ID: <590919.1158790643985.JavaMail.jira@brutus>
Date: Wed, 20 Sep 2006 15:17:23 -0700 (PDT)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-423) file paths are not normalized
In-Reply-To: <13847288.1154636773936.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-423?page=all ]

Wendy Chien updated HADOOP-423:
-------------------------------

    Attachment: pathnorm.patch

The patch also includes changes in Path.java as well as added tests in TestPath.java.

> file paths are not normalized
> -----------------------------
>
>                 Key: HADOOP-423
>                 URL: http://issues.apache.org/jira/browse/HADOOP-423
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Christian Kunz
>         Assigned To: Wendy Chien
>         Attachments: pathnorm.patch
>
>
> Paths containing  '.' or '..' are not normalized -- the corresponding directories actually seem to be created. This is inconsistent and unexpected behavior, and  is particularly painful when running from a working directory, using relative paths that start with ...

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 20 22:21:08 2006
Return-Path: 
 <hadoop-dev-return-3843-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12860 invoked from network); 20 Sep 2006 22:21:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Sep 2006 22:21:08 -0000
Received: (qmail 78580 invoked by uid 500); 20 Sep 2006 22:21:07 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 78527 invoked by uid 500); 20 Sep 2006 22:21:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 78517 invoked by uid 99); 20 Sep 2006 22:21:07 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Sep 2006 15:21:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:36584]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 36/CF-01963-FCEB1154 for <hadoop-dev@lucene.apache.org>;
 Wed, 20 Sep 2006 15:21:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AC1444190C8
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Sep 2006 22:17:25 +0000 (GMT)
Message-ID: <9440054.1158790645702.JavaMail.jira@brutus>
Date: Wed, 20 Sep 2006 15:17:25 -0700 (PDT)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-423) file paths are not normalized
In-Reply-To: <13847288.1154636773936.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-423?page=all ]

Wendy Chien updated HADOOP-423:
-------------------------------

    Status: Patch Available  (was: Open)

> file paths are not normalized
> -----------------------------
>
>                 Key: HADOOP-423
>                 URL: http://issues.apache.org/jira/browse/HADOOP-423
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Christian Kunz
>         Assigned To: Wendy Chien
>         Attachments: pathnorm.patch
>
>
> Paths containing  '.' or '..' are not normalized -- the corresponding directories actually seem to be created. This is inconsistent and unexpected behavior, and  is particularly painful when running from a working directory, using relative paths that start with ...

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 20 22:25:07 2006
Return-Path: 
 <hadoop-dev-return-3844-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 15524 invoked from network); 20 Sep 2006 22:25:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Sep 2006 22:25:07 -0000
Received: (qmail 88097 invoked by uid 500); 20 Sep 2006 22:25:07 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 88078 invoked by uid 500); 20 Sep 2006 22:25:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88065 invoked by uid 99); 20 Sep 2006 22:25:07 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Sep 2006 15:25:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:36621]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 70/EF-01963-FBFB1154 for <hadoop-dev@lucene.apache.org>;
 Wed, 20 Sep 2006 15:25:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8CFCF4190C8
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Sep 2006 22:21:23 +0000 (GMT)
Message-ID: <4380497.1158790883574.JavaMail.jira@brutus>
Date: Wed, 20 Sep 2006 15:21:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-306) Safe mode and name node startup
 procedures
In-Reply-To: <5719318.1150505909849.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-306?page=all ]

Doug Cutting updated HADOOP-306:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.7.0
       Resolution: Fixed

I just committed this.  Thanks, Konstantin!

> Safe mode and name node startup procedures
> ------------------------------------------
>
>                 Key: HADOOP-306
>                 URL: http://issues.apache.org/jira/browse/HADOOP-306
>             Project: Hadoop
>          Issue Type: New Feature
>    Affects Versions: 0.3.2
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.7.0
>
>         Attachments: SafeMode.patch, SafeModeEnum.patch
>
>
> This is a proposal to improve DFS cluster startup process.
> The data node startup procedures were described and implemented in HADOOP-124.
> I'm trying to extend them to the name node here.
> The main idea is to introduce safe mode, which can be entered manually for administration
> purposes, or automatically when a configurable threshold of active data nodes is breached,
> or at startup when the node stays in safe mode until the minimal limit of active
> nodes is reached.
> This are high level requirements intended to improve the name node and cluster reliability.
>     = The name node safe mode means that the name node is not changing the state of the
>        file system. Meta data is read-only, and block replication / removal is not taking place.
>     = In safe mode the name node accepts data node registrations and
>        processes their block reports.
>     = The name node always starts in safe mode and stays safe until the majority
>         (a configurable parameter: safemode.threshold) of data nodes (or blocks?)
>         is reported.
>     = The name node can also fall into safe mode when the number of non-active
>         (heartbeats stopped coming in) data nodes becomes critical.
>     = The startup "silent period", when the name node is in safe mode and is
>         not issuing any block requests to the data nodes, is initially set to a
>         configurable value safemode.timeout.increment. By the end of the timeout
>         the name node checks the safemode.threshold and decides whether to switch
>         to the normal mode or to stay in safe. If the normal mode criteria is not
>         met, then the silent period is extended by incrementing the safemode timeout.
>     = The name node stays in safe mode not longer than a configurable value of
>         safemode.timeout.max, in which case it logs missing data nodes and shuts
>         itself down.
>     = When the name node switches to normal mode it checks whether all required
>         data nodes have actually registered, based on the list of active data storages
>         from the last session. Then it logs missing nodes, if any, and starts
>         replicating and/or deleting blocks as required.
>     = A historical list of data storages (nodes) ever registered with the cluster is
>         persistently stored in the image and log files. The list is used in two ways:
>         a) at startup to verify whether all nodes have registered, and to report
>         missing nodes;
>         b) at runtime if a data node registers with a new storage id the
>         name node verifies that no new blocks are reported from that storage,
>         which would prevent us from accidentally connecting data nodes from a
>         different cluster.
>     = The name node should have an option to run in safe mode. Starting with
>         that option would mean it never leaves safe mode.
>         This is useful for testing the cluster.
>     = Data nodes that can not connect to the name node for a long time (configurable)
>         should shut down themselves.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 20 22:35:33 2006
Return-Path: 
 <hadoop-dev-return-3846-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 18617 invoked from network); 20 Sep 2006 22:35:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Sep 2006 22:35:33 -0000
Received: (qmail 988 invoked by uid 500); 20 Sep 2006 22:35:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 795 invoked by uid 500); 20 Sep 2006 22:35:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 786 invoked by uid 99); 20 Sep 2006 22:35:32 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Sep 2006 15:35:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:48438]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 4E/00-01963-022C1154 for <hadoop-dev@lucene.apache.org>;
 Wed, 20 Sep 2006 15:35:14 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 640804190C8
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Sep 2006 22:31:22 +0000 (GMT)
Message-ID: <20128603.1158791482407.JavaMail.jira@brutus>
Date: Wed, 20 Sep 2006 15:31:22 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-553) DataNode and NameNode main() should
 catch and report exceptions.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

DataNode and NameNode main() should catch and report exceptions.
----------------------------------------------------------------

                 Key: HADOOP-553
                 URL: http://issues.apache.org/jira/browse/HADOOP-553
             Project: Hadoop
          Issue Type: Bug
          Components: dfs, mapred
    Affects Versions: 0.6.2
            Reporter: Konstantin Shvachko


Right now we do not know what happened during startup failure,
because there no records in the logs.
I propose to change main() so that it would catch exceptions and 
log them rather then throwing them into std out.
May be the same should be done for the JobTracker.
The TaskTracker.main() catches at least the IOException.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 20 22:35:20 2006
Return-Path: 
 <hadoop-dev-return-3845-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 18563 invoked from network); 20 Sep 2006 22:35:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Sep 2006 22:35:20 -0000
Received: (qmail 549 invoked by uid 500); 20 Sep 2006 22:35:19 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 527 invoked by uid 500); 20 Sep 2006 22:35:19 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 518 invoked by uid 99); 20 Sep 2006 22:35:19 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Sep 2006 15:35:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:48439]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 8E/00-01963-222C1154 for <hadoop-dev@lucene.apache.org>;
 Wed, 20 Sep 2006 15:35:15 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 10AD54190C7
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Sep 2006 22:31:24 +0000 (GMT)
Message-ID: <5153622.1158791484066.JavaMail.jira@brutus>
Date: Wed, 20 Sep 2006 15:31:24 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-431) default behaviour of dfsShell -rm
 should resemble 'rm -i', not 'rm -rf'
In-Reply-To: <15901306.1155057373927.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-431?page=all ]

Doug Cutting updated HADOOP-431:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Sameer!

> default behaviour of dfsShell -rm should resemble 'rm -i', not 'rm -rf'
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-431
>                 URL: http://issues.apache.org/jira/browse/HADOOP-431
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.6.2
>            Reporter: Yoram Arnon
>         Assigned To: Sameer Paranjpye
>             Fix For: 0.7.0
>
>         Attachments: rmr.patch.txt
>
>
> when using hadoop dfs -rm <path> the behaviour is like that of rm -rf.
> That's very dangerous.
> A better behaviour would require a confirmation and allow removal of files only by default. Optional flags would allow recursive and forced deleted.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 20 22:37:18 2006
Return-Path: 
 <hadoop-dev-return-3847-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 19078 invoked from network); 20 Sep 2006 22:37:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Sep 2006 22:37:18 -0000
Received: (qmail 1914 invoked by uid 500); 20 Sep 2006 22:37:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 1889 invoked by uid 500); 20 Sep 2006 22:37:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 1880 invoked by uid 99); 20 Sep 2006 22:37:17 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Sep 2006 15:37:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:55185]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 17/10-01963-492C1154 for <hadoop-dev@lucene.apache.org>;
 Wed, 20 Sep 2006 15:37:09 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A33614190C8
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Sep 2006 22:33:25 +0000 (GMT)
Message-ID: <26563969.1158791605665.JavaMail.jira@brutus>
Date: Wed, 20 Sep 2006 15:33:25 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-444) In streaming with a NONE reducer, you
 get duplicate files if a mapper fails, is restarted, and succeeds next
 time.
In-Reply-To: <10321927.1155237793878.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-444?page=all ]

Doug Cutting updated HADOOP-444:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.7.0
       Resolution: Fixed

This was fixed as a part of HADOOP-542.

> In streaming with a NONE reducer, you get duplicate files if a mapper fails, is restarted, and succeeds next time.
> ------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-444
>                 URL: http://issues.apache.org/jira/browse/HADOOP-444
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>    Affects Versions: 0.5.0
>            Reporter: Dick King
>         Assigned To: Michel Tourn
>             Fix For: 0.7.0
>
>
> When the dust settled after a streaming run, the directory ended up looking like this:
>   /user/dking/<project-name>/K-HTML-UTF8-2006-08-09-rescued-abstracted/task_0026_m_007384_0	<r 3>	10563406
>   /user/dking/<project-name>/K-HTML-UTF8-2006-08-09-rescued-abstracted/task_0026_m_007384_1	<r 3>	10563406
> Future processing will receive duplicated data.
> -dk

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 20 23:59:03 2006
Return-Path: 
 <hadoop-dev-return-3848-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 41539 invoked from network); 20 Sep 2006 23:59:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Sep 2006 23:59:03 -0000
Received: (qmail 14474 invoked by uid 500); 20 Sep 2006 23:59:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14442 invoked by uid 500); 20 Sep 2006 23:59:02 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 14433 invoked by uid 99); 20 Sep 2006 23:59:02 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Sep 2006 16:59:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:58095]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 08/44-04092-5C5D1154 for <hadoop-dev@lucene.apache.org>;
 Wed, 20 Sep 2006 16:59:01 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 67E5E714305
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Sep 2006 23:55:23 +0000 (GMT)
Message-ID: <10271842.1158796523422.JavaMail.jira@brutus>
Date: Wed, 20 Sep 2006 16:55:23 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-550) Text constructure can throw
 exception
In-Reply-To: <6747780.1158701362340.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-550?page=comments#action_12436403 ] 
            
Sameer Paranjpye commented on HADOOP-550:
-----------------------------------------

I think we should maintain the invariant that a Text object contains valid UTF-8.

Why not add a constructor to Text that accepts a CharsetDecoder. Together with a method 
'void onMalformedInput(CharsetDecoder action)'. The CharsetDecoder is used as a strategy by Text to determine how it should handle illegal values upon construction or assignment.

If CharsetDecoder is not the right type, we can create a type to represent the strategy.

Are unmappable characters a case we need to consider here? You can get an unmappable character converting from one encoding to another, but there is a 1-1 correspondence between UTF-8 and UTF-16 for all valid Unicode code points.

> Text constructure can throw exception
> -------------------------------------
>
>                 Key: HADOOP-550
>                 URL: http://issues.apache.org/jira/browse/HADOOP-550
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Bryan Pendleton
>
> I finally got back around to moving my working code to using Text objects.
> And, once again, switching to Text (from UTF8) means my jobs are failing. This time, its better defined - constructing a Text from a string extracted from Real World data makes the Text object constructor throw a CharacterCodingException. This may be legit - I don't actually understand UTF well enough to understand what's wrong with the supplied string. I'm assembling a series of strings, some of which are user-supplied, and something causes the Text constructor to barf.
> However, this is still completely unacceptable. If I need to stuff textual data someplace - I need the container to *do* it. If user-supplied inputs can't be stored as a "UTF" aware text value, then another container needs to be brought into existence. Sure, I can use a BytesWritable, but, as its name implies - Text should handle "text". If Text is supposed to == "StringWritable", then, well, it doesn't, yet.
> I admit to being a few weeks' back in the bleeding edge at this point, so maybe my particluar Text bug has been fixed, though the only fixes to Text I see are adopting it into more of the internals of Hadoop. This argument goes double in that case - if we're using Text objects internally, it should really be a totally solid object - construct one from a String, get one back, but _never_  throw a content-related Exception. Or, if Text is not the right object because its data-sensitive, then I argue we shouldn't use it in any case where data might kill it - internal, or anywhere else (by default).
> Please, don't remove UTF8, for now.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 21 01:05:06 2006
Return-Path: 
 <hadoop-dev-return-3849-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 66912 invoked from network); 21 Sep 2006 01:05:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Sep 2006 01:05:06 -0000
Received: (qmail 78058 invoked by uid 500); 21 Sep 2006 01:05:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 77993 invoked by uid 500); 21 Sep 2006 01:05:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 77984 invoked by uid 99); 21 Sep 2006 01:05:04 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Sep 2006 18:05:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:40170]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id FF/16-04092-105E1154 for <hadoop-dev@lucene.apache.org>;
 Wed, 20 Sep 2006 18:04:01 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6425F714303
	for <hadoop-dev@lucene.apache.org>; Thu, 21 Sep 2006 01:00:23 +0000 (GMT)
Message-ID: <1846796.1158800423407.JavaMail.jira@brutus>
Date: Wed, 20 Sep 2006 18:00:23 -0700 (PDT)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-550) Text constructure can throw
 exception
In-Reply-To: <6747780.1158701362340.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-550?page=comments#action_12436412 ] 
            
Hairong Kuang commented on HADOOP-550:
--------------------------------------

In java, supplementary characters, i.e., codepoints that are greater than U+FFFF, are represented by a pair of char values, called surrogates. If  a Text object is constructed from a String containing unpaired surrogates, CharacterCodingException is thrown.

I agree with Sameer that a Text object should contain valid UTF-8. So by default, probably we should replace illegal bytes with "\uFFFD" as Java does instead of throwing an exception. Then everything should work.

> Text constructure can throw exception
> -------------------------------------
>
>                 Key: HADOOP-550
>                 URL: http://issues.apache.org/jira/browse/HADOOP-550
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Bryan Pendleton
>
> I finally got back around to moving my working code to using Text objects.
> And, once again, switching to Text (from UTF8) means my jobs are failing. This time, its better defined - constructing a Text from a string extracted from Real World data makes the Text object constructor throw a CharacterCodingException. This may be legit - I don't actually understand UTF well enough to understand what's wrong with the supplied string. I'm assembling a series of strings, some of which are user-supplied, and something causes the Text constructor to barf.
> However, this is still completely unacceptable. If I need to stuff textual data someplace - I need the container to *do* it. If user-supplied inputs can't be stored as a "UTF" aware text value, then another container needs to be brought into existence. Sure, I can use a BytesWritable, but, as its name implies - Text should handle "text". If Text is supposed to == "StringWritable", then, well, it doesn't, yet.
> I admit to being a few weeks' back in the bleeding edge at this point, so maybe my particluar Text bug has been fixed, though the only fixes to Text I see are adopting it into more of the internals of Hadoop. This argument goes double in that case - if we're using Text objects internally, it should really be a totally solid object - construct one from a String, get one back, but _never_  throw a content-related Exception. Or, if Text is not the right object because its data-sensitive, then I argue we shouldn't use it in any case where data might kill it - internal, or anywhere else (by default).
> Please, don't remove UTF8, for now.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 21 01:05:06 2006
Return-Path: 
 <hadoop-dev-return-3850-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 66917 invoked from network); 21 Sep 2006 01:05:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Sep 2006 01:05:06 -0000
Received: (qmail 78059 invoked by uid 500); 21 Sep 2006 01:05:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 78011 invoked by uid 500); 21 Sep 2006 01:05:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 77994 invoked by uid 99); 21 Sep 2006 01:05:04 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Sep 2006 18:05:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:40172]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 40/26-04092-205E1154 for <hadoop-dev@lucene.apache.org>;
 Wed, 20 Sep 2006 18:04:02 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 858B2714306
	for <hadoop-dev@lucene.apache.org>; Thu, 21 Sep 2006 01:00:24 +0000 (GMT)
Message-ID: <15635258.1158800424544.JavaMail.jira@brutus>
Date: Wed, 20 Sep 2006 18:00:24 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-550) Text constructure can throw
 exception
In-Reply-To: <6747780.1158701362340.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-550?page=comments#action_12436413 ] 
            
Doug Cutting commented on HADOOP-550:
-------------------------------------

I think the default, like new String(), should be not to validate, and to silently replace bad data.  If we want to use this as a replacement for String and UTF8, then we should be exception-compatible, and these classes do not validate nor throw exceptions when bytes are converted to Strings.

I think this is a good default.  In my experience, if input is invalid UTF-8 (which is surprisingly common) I would almost always rather process it as best I can than have to handle exceptions or otherwise disable validation.  I would argue that folks who require that invalid UTF-8 throw exceptions are the minority.

So validation and other encoding-related exceptions should be optional.  We can add a flag to the constructor indicating whether it should validate, we can add a config option for TextInputFormat, etc. to enable validation and exceptions for those who desire.


> Text constructure can throw exception
> -------------------------------------
>
>                 Key: HADOOP-550
>                 URL: http://issues.apache.org/jira/browse/HADOOP-550
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Bryan Pendleton
>
> I finally got back around to moving my working code to using Text objects.
> And, once again, switching to Text (from UTF8) means my jobs are failing. This time, its better defined - constructing a Text from a string extracted from Real World data makes the Text object constructor throw a CharacterCodingException. This may be legit - I don't actually understand UTF well enough to understand what's wrong with the supplied string. I'm assembling a series of strings, some of which are user-supplied, and something causes the Text constructor to barf.
> However, this is still completely unacceptable. If I need to stuff textual data someplace - I need the container to *do* it. If user-supplied inputs can't be stored as a "UTF" aware text value, then another container needs to be brought into existence. Sure, I can use a BytesWritable, but, as its name implies - Text should handle "text". If Text is supposed to == "StringWritable", then, well, it doesn't, yet.
> I admit to being a few weeks' back in the bleeding edge at this point, so maybe my particluar Text bug has been fixed, though the only fixes to Text I see are adopting it into more of the internals of Hadoop. This argument goes double in that case - if we're using Text objects internally, it should really be a totally solid object - construct one from a String, get one back, but _never_  throw a content-related Exception. Or, if Text is not the right object because its data-sensitive, then I argue we shouldn't use it in any case where data might kill it - internal, or anywhere else (by default).
> Please, don't remove UTF8, for now.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 21 03:28:05 2006
Return-Path: 
 <hadoop-dev-return-3851-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93519 invoked from network); 21 Sep 2006 03:28:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Sep 2006 03:28:05 -0000
Received: (qmail 86833 invoked by uid 500); 21 Sep 2006 03:28:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86794 invoked by uid 500); 21 Sep 2006 03:28:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86773 invoked by uid 99); 21 Sep 2006 03:28:03 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Sep 2006 20:28:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:58066]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 47/1A-04092-1C602154 for <hadoop-dev@lucene.apache.org>;
 Wed, 20 Sep 2006 20:28:02 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EA44D714305
	for <hadoop-dev@lucene.apache.org>; Thu, 21 Sep 2006 03:24:23 +0000 (GMT)
Message-ID: <15404488.1158809063956.JavaMail.jira@brutus>
Date: Wed, 20 Sep 2006 20:24:23 -0700 (PDT)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-432) support undelete, snapshots, or other
 mechanism to recover lost files
In-Reply-To: <13436198.1155057493889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-432?page=all ]

Wendy Chien reassigned HADOOP-432:
----------------------------------

    Assignee: Wendy Chien

> support undelete, snapshots, or other mechanism to recover lost files
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-432
>                 URL: http://issues.apache.org/jira/browse/HADOOP-432
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: Wendy Chien
>
> currently, once you delete a file it's gone forever.
> most file systems allow some form of recovery of deleted files.
> a simple solution would be an 'undelete' command.
> a more comprehensive solution would include snapshots, manual and automatic, with scheduling options.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 21 03:32:04 2006
Return-Path: 
 <hadoop-dev-return-3852-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94117 invoked from network); 21 Sep 2006 03:32:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Sep 2006 03:32:04 -0000
Received: (qmail 87989 invoked by uid 500); 21 Sep 2006 03:32:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 87958 invoked by uid 500); 21 Sep 2006 03:32:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 87943 invoked by uid 99); 21 Sep 2006 03:32:04 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Sep 2006 20:32:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:49204]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id B3/3A-04092-1B702154 for <hadoop-dev@lucene.apache.org>;
 Wed, 20 Sep 2006 20:32:01 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 621C2714305
	for <hadoop-dev@lucene.apache.org>; Thu, 21 Sep 2006 03:28:23 +0000 (GMT)
Message-ID: <9015030.1158809303399.JavaMail.jira@brutus>
Date: Wed, 20 Sep 2006 20:28:23 -0700 (PDT)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-482) unit test hangs when a cluster is
 running on the same machine
In-Reply-To: <15387551.1156475228032.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-482?page=all ]

Wendy Chien reassigned HADOOP-482:
----------------------------------

    Assignee: Wendy Chien

> unit test hangs when a cluster is running on the same machine
> -------------------------------------------------------------
>
>                 Key: HADOOP-482
>                 URL: http://issues.apache.org/jira/browse/HADOOP-482
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Wendy Chien
>         Assigned To: Wendy Chien
>            Priority: Minor
>
> Instead of hanging, it should report an error.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 21 18:09:07 2006
Return-Path: 
 <hadoop-dev-return-3853-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 80536 invoked from network); 21 Sep 2006 18:09:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Sep 2006 18:09:07 -0000
Received: (qmail 68931 invoked by uid 500); 21 Sep 2006 18:09:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68812 invoked by uid 500); 21 Sep 2006 18:09:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68757 invoked by uid 99); 21 Sep 2006 18:09:03 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Sep 2006 11:09:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:56111]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 5D/C0-03726-F35D2154 for <hadoop-dev@lucene.apache.org>;
 Thu, 21 Sep 2006 11:09:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0202C4190CB
	for <hadoop-dev@lucene.apache.org>; Thu, 21 Sep 2006 18:05:24 +0000 (GMT)
Message-ID: <32015994.1158861924004.JavaMail.jira@brutus>
Date: Thu, 21 Sep 2006 11:05:24 -0700 (PDT)
From: "Marco Nicosia (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-554) hadoop dfs command line doesn't exit
 with status code on error
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hadoop dfs command line doesn't exit with status code on error
--------------------------------------------------------------

                 Key: HADOOP-554
                 URL: http://issues.apache.org/jira/browse/HADOOP-554
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
            Reporter: Marco Nicosia


In DFSClient, the code looks like:

---- >8 ----

        int exitCode = -1;
        ...
        try {
            if ("-put".equals(cmd) || "-copyFromLocal".equals(cmd)) {
                copyFromLocal(new Path(argv[i++]), argv[i++]);
            ...
            exitCode = 0;;
        } catch (IOException e ) {
          System.err.println( cmd.substring(1) + ": " + e.getLocalizedMessage() );  
        } finally {
            fs.close();
        }
        return exitCode;

---- 8< ----

Point 1: Few, if any of the functions called throw an exception. Instead they System.err.println and return.
Point 2: exitCode, regardless if there is an exception, is always 0.

At minimum, it would be best if SOME status code were returned, so that any scripts calling hadoop dfs would know to parse the output.

At best, there'd be a well-documented table of exit codes so that parsing stderr wouldn't be required.


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 21 22:22:05 2006
Return-Path: 
 <hadoop-dev-return-3854-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 64053 invoked from network); 21 Sep 2006 22:22:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Sep 2006 22:22:05 -0000
Received: (qmail 82699 invoked by uid 500); 21 Sep 2006 22:22:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 82660 invoked by uid 500); 21 Sep 2006 22:22:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 82651 invoked by uid 99); 21 Sep 2006 22:22:03 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Sep 2006 15:22:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:59664]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 93/A0-05580-B8013154 for <hadoop-dev@lucene.apache.org>;
 Thu, 21 Sep 2006 15:22:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 390EF4190CA
	for <hadoop-dev@lucene.apache.org>; Thu, 21 Sep 2006 22:18:24 +0000 (GMT)
Message-ID: <12710896.1158877104231.JavaMail.jira@brutus>
Date: Thu, 21 Sep 2006 15:18:24 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-423) file paths are not normalized
In-Reply-To: <13847288.1154636773936.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-423?page=comments#action_12436672 ] 
            
Doug Cutting commented on HADOOP-423:
-------------------------------------

I think, as a safeguard, we should probably also disallow "." and ".." as file or directory names at the namenode, throwing an exception for attempts to create directories or files with these names.

While we're at it, should we also prohibit "/" and ":" in names?  I think so.  Currently it is impossible to create a Path with a slash in a name, although colons are permitted.

> file paths are not normalized
> -----------------------------
>
>                 Key: HADOOP-423
>                 URL: http://issues.apache.org/jira/browse/HADOOP-423
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Christian Kunz
>         Assigned To: Wendy Chien
>         Attachments: pathnorm.patch
>
>
> Paths containing  '.' or '..' are not normalized -- the corresponding directories actually seem to be created. This is inconsistent and unexpected behavior, and  is particularly painful when running from a working directory, using relative paths that start with ...

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 22 03:58:06 2006
Return-Path: 
 <hadoop-dev-return-3855-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 29934 invoked from network); 22 Sep 2006 03:58:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Sep 2006 03:58:06 -0000
Received: (qmail 92128 invoked by uid 500); 22 Sep 2006 03:58:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 92090 invoked by uid 500); 22 Sep 2006 03:58:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 92081 invoked by uid 99); 22 Sep 2006 03:58:05 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Sep 2006 20:58:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:60371]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 29/28-06791-C4F53154 for <hadoop-dev@lucene.apache.org>;
 Thu, 21 Sep 2006 20:58:04 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 53C897142FB
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Sep 2006 03:54:24 +0000 (GMT)
Message-ID: <24322991.1158897264340.JavaMail.jira@brutus>
Date: Thu, 21 Sep 2006 20:54:24 -0700 (PDT)
From: "Addison Phillips (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-550) Text constructure can throw
 exception
In-Reply-To: <6747780.1158701362340.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-550?page=comments#action_12436728 ] 
            
Addison Phillips commented on HADOOP-550:
-----------------------------------------

I had a hand in advising about this code (and wrote some of it). I agree with Doug Cutting that the current implementation is rather too strict. The CodingErrorAction of REPLACE is probably preferable as a default action.

One important difference between Text's implementation of UTF-8 and Java's String class: is: Text validates for non-shortest form UTF-8, while String does not. Non-shortest form UTF-8 is sometimes exploited as a security flaw (and is NOT valid UTF-8, by rule) and the validate() method inside Text prevents non-shortest sequences in Text objects.

I'd also note that non-UTF-8 data is pretty common, not usually because of unpaired surrogates, but rather because of bad encoding identification or because of mixed UTF-8 and binary data. Blowing chunks on that data is not a good choice as the default.

Providing for validation and tailorable reporting, a la NIO, actually would be the best course of action. If the buffer isn't really UTF-8 and turns out to be an entirely different encoding (probably the most common encoding problem), sometimes you might want to catch it as an exception, but most often you'll probably be fine plunging ahead with U+FFFD (one per bad byte). For the reason cited, I'd use the stricter Unicode rules for non-shortest UTF-8, but certainly think that  just throwing an exception is too strict.



> Text constructure can throw exception
> -------------------------------------
>
>                 Key: HADOOP-550
>                 URL: http://issues.apache.org/jira/browse/HADOOP-550
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Bryan Pendleton
>
> I finally got back around to moving my working code to using Text objects.
> And, once again, switching to Text (from UTF8) means my jobs are failing. This time, its better defined - constructing a Text from a string extracted from Real World data makes the Text object constructor throw a CharacterCodingException. This may be legit - I don't actually understand UTF well enough to understand what's wrong with the supplied string. I'm assembling a series of strings, some of which are user-supplied, and something causes the Text constructor to barf.
> However, this is still completely unacceptable. If I need to stuff textual data someplace - I need the container to *do* it. If user-supplied inputs can't be stored as a "UTF" aware text value, then another container needs to be brought into existence. Sure, I can use a BytesWritable, but, as its name implies - Text should handle "text". If Text is supposed to == "StringWritable", then, well, it doesn't, yet.
> I admit to being a few weeks' back in the bleeding edge at this point, so maybe my particluar Text bug has been fixed, though the only fixes to Text I see are adopting it into more of the internals of Hadoop. This argument goes double in that case - if we're using Text objects internally, it should really be a totally solid object - construct one from a String, get one back, but _never_  throw a content-related Exception. Or, if Text is not the right object because its data-sensitive, then I argue we shouldn't use it in any case where data might kill it - internal, or anywhere else (by default).
> Please, don't remove UTF8, for now.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 22 04:44:06 2006
Return-Path: 
 <hadoop-dev-return-3856-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 36876 invoked from network); 22 Sep 2006 04:44:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Sep 2006 04:44:06 -0000
Received: (qmail 24167 invoked by uid 500); 22 Sep 2006 04:44:06 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23961 invoked by uid 500); 22 Sep 2006 04:44:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23952 invoked by uid 99); 22 Sep 2006 04:44:04 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Sep 2006 21:44:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:36380]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 03/D9-06791-41A63154 for <hadoop-dev@lucene.apache.org>;
 Thu, 21 Sep 2006 21:44:04 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2974E4190CE
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Sep 2006 04:40:24 +0000 (GMT)
Message-ID: <27919482.1158900024167.JavaMail.jira@brutus>
Date: Thu, 21 Sep 2006 21:40:24 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-535) back to back testing of codecs
In-Reply-To: <10412817.1158275122345.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-535?page=all ]

Arun C Murthy reassigned HADOOP-535:
------------------------------------

    Assignee: Arun C Murthy

> back to back testing of codecs
> ------------------------------
>
>                 Key: HADOOP-535
>                 URL: http://issues.apache.org/jira/browse/HADOOP-535
>             Project: Hadoop
>          Issue Type: Test
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>
> We should write some unit tests that use codecs back to back doing writing and then reading.
> compressed block1, compressed block 2, compressed block3, ...
> that will check that the compression codecs are consuming the entire block when they read.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 22 04:48:05 2006
Return-Path: 
 <hadoop-dev-return-3857-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37774 invoked from network); 22 Sep 2006 04:48:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Sep 2006 04:48:05 -0000
Received: (qmail 29813 invoked by uid 500); 22 Sep 2006 04:48:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 29786 invoked by uid 500); 22 Sep 2006 04:48:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 29777 invoked by uid 99); 22 Sep 2006 04:48:04 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Sep 2006 21:48:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:44199]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id D6/F9-06791-30B63154 for <hadoop-dev@lucene.apache.org>;
 Thu, 21 Sep 2006 21:48:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E9A407142FB
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Sep 2006 04:44:23 +0000 (GMT)
Message-ID: <21428919.1158900263954.JavaMail.jira@brutus>
Date: Thu, 21 Sep 2006 21:44:23 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-537) clean-libhdfs target of build.xml
 does not work on windows
In-Reply-To: <4253884.1158281003558.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-537?page=all ]

Arun C Murthy reassigned HADOOP-537:
------------------------------------

    Assignee: Arun C Murthy

> clean-libhdfs target of build.xml does not work on windows
> ----------------------------------------------------------
>
>                 Key: HADOOP-537
>                 URL: http://issues.apache.org/jira/browse/HADOOP-537
>             Project: Hadoop
>          Issue Type: Bug
>          Components: libhdfs
>    Affects Versions: 0.6.0
>         Environment: Windows
>            Reporter: Konstantin Shvachko
>         Assigned To: Arun C Murthy
>
> It produces the following:
> BUILD FAILED
> Hadoop\build.xml:496: Execute failed: java.io.IOException: CreateProcess: make clean error=2
> Besides, I would propose to have clean-* target for every compile-* target in build.xml.
> Some people probably don't build libhdfs or contrib, so why should they clean it.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 22 05:05:05 2006
Return-Path: 
 <hadoop-dev-return-3858-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40032 invoked from network); 22 Sep 2006 05:05:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Sep 2006 05:05:05 -0000
Received: (qmail 45586 invoked by uid 500); 22 Sep 2006 05:05:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 45558 invoked by uid 500); 22 Sep 2006 05:05:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 45549 invoked by uid 99); 22 Sep 2006 05:05:04 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Sep 2006 22:05:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:40056]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id E4/8A-06791-FFE63154 for <hadoop-dev@lucene.apache.org>;
 Thu, 21 Sep 2006 22:05:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 618007142FE
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Sep 2006 05:01:23 +0000 (GMT)
Message-ID: <30763020.1158901283396.JavaMail.jira@brutus>
Date: Thu, 21 Sep 2006 22:01:23 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-547) ReduceTaskRunner can miss sending
 hearbeats if no map output copy finishes within "mapred.task.timeout"
In-Reply-To: <21058618.1158663442417.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-547?page=all ]

Sanjay Dahiya reassigned HADOOP-547:
------------------------------------

    Assignee: Sanjay Dahiya

> ReduceTaskRunner can miss sending hearbeats if no map output copy finishes within "mapred.task.timeout"
> -------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-547
>                 URL: http://issues.apache.org/jira/browse/HADOOP-547
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.6.2
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>
> In ReduceTaskRunner, main loop sending heartbeats waits on copyResults, which releases only if a copy thread finishes copying. This can cause good reduce tasks which are copying data to fail, if no map task output was copied within "mapred.task.timeout". 
> ReduceTaskRunner.java:490
>         try {
>           copyResults.wait();                      <=========== Calls unconditional wait. 
>         } catch (InterruptedException e) { }
> wait() should be with a timeout, possibly taskTimeout/2 after which it should send a hearbeat and go back to wait. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 22 15:36:44 2006
Return-Path: 
 <hadoop-dev-return-3859-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 53498 invoked from network); 22 Sep 2006 15:36:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Sep 2006 15:36:44 -0000
Received: (qmail 99078 invoked by uid 500); 22 Sep 2006 15:36:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98902 invoked by uid 500); 22 Sep 2006 15:36:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98854 invoked by uid 99); 22 Sep 2006 15:36:36 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Sep 2006 08:36:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:37621]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id C0/BE-06791-FF204154 for <hadoop-dev@lucene.apache.org>;
 Fri, 22 Sep 2006 08:36:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 552F74190D4
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Sep 2006 15:32:25 +0000 (GMT)
Message-ID: <4815488.1158939145345.JavaMail.jira@brutus>
Date: Fri, 22 Sep 2006 08:32:25 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-263) task status should include timestamps
 for when a job transitions
In-Reply-To: <6879018.1149102869840.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-263?page=all ]

Sanjay Dahiya updated HADOOP-263:
---------------------------------

    Attachment: Hadoop-263_4.patch

Here is an updated patch, as doug suggested I have added an extra argument to TaskUmbilicalProtocol.progress(String taskid, float progress, String state, int phase). phase is Phase.ordinal(). 
All classes deriving from TaskUmbilicalProtocol are updated with this argument, but its value is ignored in IsolationRunner and LocalJobRunner. 
In JobTracker.ExpireLaunchingTasks.run() the phase is not available if its a reduce task, in such case it uses Phase.UNKNOWN. 
Also both map and reduce tasks use TaskUmbilicalProtocol.progress, so Map tasks return Phase.MAP and reduce tasks return Phase.SHUFFLE, PHASE.SORT or Phase.REDUCE. 

> task status should include timestamps for when a job transitions
> ----------------------------------------------------------------
>
>                 Key: HADOOP-263
>                 URL: http://issues.apache.org/jira/browse/HADOOP-263
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.2.1
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-263.patch, Hadoop-263_1.patch, Hadoop-263_2.patch, Hadoop-263_3.patch, Hadoop-263_4.patch, patch.txt, patch.txt, patch.txt, patch.txt
>
>
> It would help users to understand what happened if the task status included information about when the task transitioned:
> Map:
>    started
>    finished
> Reduce:
>    started
>    shuffle finished
>    sort finished
>    finished

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 22 15:38:26 2006
Return-Path: 
 <hadoop-dev-return-3860-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 54226 invoked from network); 22 Sep 2006 15:38:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Sep 2006 15:38:26 -0000
Received: (qmail 3897 invoked by uid 500); 22 Sep 2006 15:38:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3876 invoked by uid 500); 22 Sep 2006 15:38:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3866 invoked by uid 99); 22 Sep 2006 15:38:24 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Sep 2006 08:38:24 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BC2DD7142F2
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Sep 2006 15:34:25 +0000 (GMT)
Message-ID: <3130616.1158939265768.JavaMail.jira@brutus>
Date: Fri, 22 Sep 2006 08:34:25 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Work started: (HADOOP-263) task status should include
 timestamps for when a job transitions
In-Reply-To: <6879018.1149102869840.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-263?page=all ]

Work on HADOOP-263 started by Sanjay Dahiya.

> task status should include timestamps for when a job transitions
> ----------------------------------------------------------------
>
>                 Key: HADOOP-263
>                 URL: http://issues.apache.org/jira/browse/HADOOP-263
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.2.1
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-263.patch, Hadoop-263_1.patch, Hadoop-263_2.patch, Hadoop-263_3.patch, Hadoop-263_4.patch, patch.txt, patch.txt, patch.txt, patch.txt
>
>
> It would help users to understand what happened if the task status included information about when the task transitioned:
> Map:
>    started
>    finished
> Reduce:
>    started
>    shuffle finished
>    sort finished
>    finished

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 22 16:45:37 2006
Return-Path: 
 <hadoop-dev-return-3861-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 71933 invoked from network); 22 Sep 2006 16:45:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Sep 2006 16:45:37 -0000
Received: (qmail 18221 invoked by uid 500); 22 Sep 2006 16:45:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 18019 invoked by uid 500); 22 Sep 2006 16:45:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 18010 invoked by uid 99); 22 Sep 2006 16:45:36 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Sep 2006 09:45:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:50664]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id DA/20-06791-F1314154 for <hadoop-dev@lucene.apache.org>;
 Fri, 22 Sep 2006 09:45:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E8131714293
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Sep 2006 16:41:23 +0000 (GMT)
Message-ID: <17507959.1158943283947.JavaMail.jira@brutus>
Date: Fri, 22 Sep 2006 09:41:23 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-263) task status should include
 timestamps for when a job transitions
In-Reply-To: <6879018.1149102869840.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-263?page=comments#action_12436903 ] 
            
Owen O'Malley commented on HADOOP-263:
--------------------------------------

As of HADOOP-306, we can put enum types into RPC and your change would be much cleaner if the TaskUmbilicalProtocol.progress' phase parameter was really passed as an enum.

Furthermore, we should probably make methods in WritableUtils for reading and writing enums:

  public static <T extends Enum<T>> T readEnum(DataInput in, Class<T> enumType
                                                                                         ) throws IOException;
  public static void writeEnum(DataOutput out,  Enum enum) throws IOException;

The Phase field of Task should be private.

You can pull the replicated code for setting the phase out of the constructors and do:

class ReduceTask ...
  {
    setPhase(Phase.SHUFFLE); 
  }

  public ReduceTask() {
    ...
  }

  public ReduceTask(...) {
    ...
  }

the same can be done for MapTask.


> task status should include timestamps for when a job transitions
> ----------------------------------------------------------------
>
>                 Key: HADOOP-263
>                 URL: http://issues.apache.org/jira/browse/HADOOP-263
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.2.1
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-263.patch, Hadoop-263_1.patch, Hadoop-263_2.patch, Hadoop-263_3.patch, Hadoop-263_4.patch, patch.txt, patch.txt, patch.txt, patch.txt
>
>
> It would help users to understand what happened if the task status included information about when the task transitioned:
> Map:
>    started
>    finished
> Reduce:
>    started
>    shuffle finished
>    sort finished
>    finished

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 22 16:51:26 2006
Return-Path: 
 <hadoop-dev-return-3862-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 73508 invoked from network); 22 Sep 2006 16:51:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Sep 2006 16:51:26 -0000
Received: (qmail 24696 invoked by uid 500); 22 Sep 2006 16:51:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24669 invoked by uid 500); 22 Sep 2006 16:51:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24655 invoked by uid 99); 22 Sep 2006 16:51:25 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Sep 2006 09:51:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:52936]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id D2/50-06791-B8414154 for <hadoop-dev@lucene.apache.org>;
 Fri, 22 Sep 2006 09:51:23 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2CA957142F5
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Sep 2006 16:47:28 +0000 (GMT)
Message-ID: <26672580.1158943648180.JavaMail.jira@brutus>
Date: Fri, 22 Sep 2006 09:47:28 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-263) task status should include
 timestamps for when a job transitions
In-Reply-To: <6879018.1149102869840.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-263?page=comments#action_12436908 ] 
            
Sanjay Dahiya commented on HADOOP-263:
--------------------------------------

Ok, I will add to WritableUtils, instead of enum.ordinal() I will use string value of enum in DataOutput ( unless someone objects to it)


> task status should include timestamps for when a job transitions
> ----------------------------------------------------------------
>
>                 Key: HADOOP-263
>                 URL: http://issues.apache.org/jira/browse/HADOOP-263
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.2.1
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-263.patch, Hadoop-263_1.patch, Hadoop-263_2.patch, Hadoop-263_3.patch, Hadoop-263_4.patch, patch.txt, patch.txt, patch.txt, patch.txt
>
>
> It would help users to understand what happened if the task status included information about when the task transitioned:
> Map:
>    started
>    finished
> Reduce:
>    started
>    shuffle finished
>    sort finished
>    finished

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 22 18:37:44 2006
Return-Path: 
 <hadoop-dev-return-3863-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 7717 invoked from network); 22 Sep 2006 18:37:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Sep 2006 18:37:44 -0000
Received: (qmail 97495 invoked by uid 500); 22 Sep 2006 18:37:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97452 invoked by uid 500); 22 Sep 2006 18:37:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97438 invoked by uid 99); 22 Sep 2006 18:37:43 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Sep 2006 11:37:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:38684]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id C8/92-06791-E6D24154 for <hadoop-dev@lucene.apache.org>;
 Fri, 22 Sep 2006 11:37:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E7EEC410027
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Sep 2006 18:32:23 +0000 (GMT)
Message-ID: <28252868.1158949943947.JavaMail.jira@brutus>
Date: Fri, 22 Sep 2006 11:32:23 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-537) clean-libhdfs target of build.xml
 does not work on windows
In-Reply-To: <4253884.1158281003558.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-537?page=comments#action_12436954 ] 
            
Konstantin Shvachko commented on HADOOP-537:
--------------------------------------------

This is an orthogonal approach but I like it too.
In this case we should not have any clean-X targets at all.
Some more details on this particular issue. 
The real problem is that "compile-libhdfs" creates temporary files in the source directory.
Sure they need to be cleaned, but they should not be created there in the first place.
I think this have already been discussed, don't remember where.



> clean-libhdfs target of build.xml does not work on windows
> ----------------------------------------------------------
>
>                 Key: HADOOP-537
>                 URL: http://issues.apache.org/jira/browse/HADOOP-537
>             Project: Hadoop
>          Issue Type: Bug
>          Components: libhdfs
>    Affects Versions: 0.6.0
>         Environment: Windows
>            Reporter: Konstantin Shvachko
>         Assigned To: Arun C Murthy
>
> It produces the following:
> BUILD FAILED
> Hadoop\build.xml:496: Execute failed: java.io.IOException: CreateProcess: make clean error=2
> Besides, I would propose to have clean-* target for every compile-* target in build.xml.
> Some people probably don't build libhdfs or contrib, so why should they clean it.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 22 18:47:04 2006
Return-Path: 
 <hadoop-dev-return-3864-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10653 invoked from network); 22 Sep 2006 18:47:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Sep 2006 18:47:04 -0000
Received: (qmail 20843 invoked by uid 500); 22 Sep 2006 18:47:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 20790 invoked by uid 500); 22 Sep 2006 18:47:02 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 20765 invoked by uid 99); 22 Sep 2006 18:47:02 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Sep 2006 11:47:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:35642]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 94/B2-06791-69F24154 for <hadoop-dev@lucene.apache.org>;
 Fri, 22 Sep 2006 11:46:48 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F31EC714219
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Sep 2006 18:42:25 +0000 (GMT)
Message-ID: <9626095.1158950545993.JavaMail.jira@brutus>
Date: Fri, 22 Sep 2006 11:42:25 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-263) task status should include timestamps
 for when a job transitions
In-Reply-To: <6879018.1149102869840.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-263?page=all ]

Sanjay Dahiya updated HADOOP-263:
---------------------------------

    Attachment: Hadoop-263_5.patch

Here is an updated patch. 

> task status should include timestamps for when a job transitions
> ----------------------------------------------------------------
>
>                 Key: HADOOP-263
>                 URL: http://issues.apache.org/jira/browse/HADOOP-263
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.2.1
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-263.patch, Hadoop-263_1.patch, Hadoop-263_2.patch, Hadoop-263_3.patch, Hadoop-263_4.patch, Hadoop-263_5.patch, patch.txt, patch.txt, patch.txt, patch.txt
>
>
> It would help users to understand what happened if the task status included information about when the task transitioned:
> Map:
>    started
>    finished
> Reduce:
>    started
>    shuffle finished
>    sort finished
>    finished

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 22 18:59:06 2006
Return-Path: 
 <hadoop-dev-return-3865-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17438 invoked from network); 22 Sep 2006 18:59:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Sep 2006 18:59:06 -0000
Received: (qmail 48829 invoked by uid 500); 22 Sep 2006 18:59:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 48801 invoked by uid 500); 22 Sep 2006 18:59:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 48788 invoked by uid 99); 22 Sep 2006 18:59:04 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Sep 2006 11:59:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:34709]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 23/F2-06791-A6234154 for <hadoop-dev@lucene.apache.org>;
 Fri, 22 Sep 2006 11:58:52 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1500B7142F6
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Sep 2006 18:54:24 +0000 (GMT)
Message-ID: <12206479.1158951264083.JavaMail.jira@brutus>
Date: Fri, 22 Sep 2006 11:54:24 -0700 (PDT)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-432) support undelete, snapshots, or
 other mechanism to recover lost files
In-Reply-To: <13436198.1155057493889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-432?page=comments#action_12436970 ] 
            
Wendy Chien commented on HADOOP-432:
------------------------------------

Here's the current proposal.  Comments are welcome. 

Two config items:
* maximum size (say 5TB). DFS tries to keep recycle bin under this size.
* minimum time (say 1 hour). Files are never removed less than this time after they're deleted.

Namenode:
* keeps track of recycle bin size
* records deletion time of each file
* occasionally wakes up, scans deleted files and removes LRU files until desired size is reached, or files are too young, whichever comes first.

notes:
* namenode keeps deleted files sorted based on deletion times, so scan for oldest file is O(1). It's the equivalent of having ls -tr * (only in namenode, not exposed externally) 
* it's all automatic. No user intervention ever, no purge command.
* file removal is lazy. Options:
  -namenode wakes up occasionally (once a minute?) and removes *all* the files pending deletion
  -namenode wakes up frequently (once a second?) and removes a small (100?) number of files at most
* deleted files are renamed with entire path, username of deleter, and time included.  


> support undelete, snapshots, or other mechanism to recover lost files
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-432
>                 URL: http://issues.apache.org/jira/browse/HADOOP-432
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: Wendy Chien
>
> currently, once you delete a file it's gone forever.
> most file systems allow some form of recovery of deleted files.
> a simple solution would be an 'undelete' command.
> a more comprehensive solution would include snapshots, manual and automatic, with scheduling options.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 22 19:00:54 2006
Return-Path: 
 <hadoop-dev-return-3866-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 18242 invoked from network); 22 Sep 2006 19:00:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Sep 2006 19:00:54 -0000
Received: (qmail 54617 invoked by uid 500); 22 Sep 2006 19:00:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 54596 invoked by uid 500); 22 Sep 2006 19:00:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 54580 invoked by uid 99); 22 Sep 2006 19:00:53 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Sep 2006 12:00:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:34732]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 1E/F2-06791-3D234154 for <hadoop-dev@lucene.apache.org>;
 Fri, 22 Sep 2006 12:00:37 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4428A714305
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Sep 2006 18:56:28 +0000 (GMT)
Message-ID: <9123232.1158951388276.JavaMail.jira@brutus>
Date: Fri, 22 Sep 2006 11:56:28 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-487) misspelt DFS host name gives null
 pointer exception in getProtocolVersion
In-Reply-To: <12991310.1156797082382.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-487?page=all ]

Sameer Paranjpye reassigned HADOOP-487:
---------------------------------------

    Assignee: Sameer Paranjpye  (was: Konstantin Shvachko)

> misspelt DFS host name gives null pointer exception in getProtocolVersion
> -------------------------------------------------------------------------
>
>                 Key: HADOOP-487
>                 URL: http://issues.apache.org/jira/browse/HADOOP-487
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Dick King
>         Assigned To: Sameer Paranjpye
>
> I'm trying to construct a DistributedFileSystem but I have the wrong hostname.
> It doesn't work.  It throws an exception.  Fair enough.  
> However, it throws a null pointer exception inside $Proxy0.getProtocolVersion, the code that checks whether we have the right protocol version, rather than giving us any exception we could understand or taking an exception in code to which we have sources so we have a way of understanding the problem.
> -dk

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 22 19:10:04 2006
Return-Path: 
 <hadoop-dev-return-3867-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 21097 invoked from network); 22 Sep 2006 19:10:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Sep 2006 19:10:04 -0000
Received: (qmail 75134 invoked by uid 500); 22 Sep 2006 19:09:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75085 invoked by uid 500); 22 Sep 2006 19:09:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75057 invoked by uid 99); 22 Sep 2006 19:09:59 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Sep 2006 12:09:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:35301]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 01/33-06791-BF434154 for <hadoop-dev@lucene.apache.org>;
 Fri, 22 Sep 2006 12:09:48 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 96F947142F7
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Sep 2006 19:05:26 +0000 (GMT)
Message-ID: <17875115.1158951926615.JavaMail.jira@brutus>
Date: Fri, 22 Sep 2006 12:05:26 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-432) support undelete, snapshots, or
 other mechanism to recover lost files
In-Reply-To: <13436198.1155057493889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-432?page=comments#action_12436977 ] 
            
Doug Cutting commented on HADOOP-432:
-------------------------------------

Perhaps the maximum size should be relative to the filesystem capacity, rather than absolute?  Otherwise a reasonable default setting will be difficult.

What is the public API?  I think this should be a new FileSystem or DistributedFileSystem method, not a change to delete().  Perhaps it could be called moveToTrash().  Then we also need the ability to list the trash contents and undelete things.

> support undelete, snapshots, or other mechanism to recover lost files
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-432
>                 URL: http://issues.apache.org/jira/browse/HADOOP-432
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: Wendy Chien
>
> currently, once you delete a file it's gone forever.
> most file systems allow some form of recovery of deleted files.
> a simple solution would be an 'undelete' command.
> a more comprehensive solution would include snapshots, manual and automatic, with scheduling options.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 22 20:15:28 2006
Return-Path: 
 <hadoop-dev-return-3868-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 62186 invoked from network); 22 Sep 2006 20:15:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Sep 2006 20:15:28 -0000
Received: (qmail 77602 invoked by uid 500); 22 Sep 2006 20:15:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 77403 invoked by uid 500); 22 Sep 2006 20:15:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 77394 invoked by uid 99); 22 Sep 2006 20:15:26 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Sep 2006 13:15:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:56050]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id AF/94-06791-F4444154 for <hadoop-dev@lucene.apache.org>;
 Fri, 22 Sep 2006 13:15:12 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0389B7142F7
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Sep 2006 20:11:24 +0000 (GMT)
Message-ID: <17146058.1158955884011.JavaMail.jira@brutus>
Date: Fri, 22 Sep 2006 13:11:24 -0700 (PDT)
From: "p sutter (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-432) support undelete, snapshots, or
 other mechanism to recover lost files
In-Reply-To: <13436198.1155057493889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-432?page=comments#action_12436994 ] 
            
p sutter commented on HADOOP-432:
---------------------------------


Why not just keep everything, and reclaim the oldest-deleted when space is allocated for a new file? 

Benefits:
- recycle bin data is kept for the longest time possible,
- new files always take precendence over files in the recycle bin,
- no independent deletion process is needed

and best of all:
 
- no new configuration parameters





> support undelete, snapshots, or other mechanism to recover lost files
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-432
>                 URL: http://issues.apache.org/jira/browse/HADOOP-432
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: Wendy Chien
>
> currently, once you delete a file it's gone forever.
> most file systems allow some form of recovery of deleted files.
> a simple solution would be an 'undelete' command.
> a more comprehensive solution would include snapshots, manual and automatic, with scheduling options.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 22 20:41:33 2006
Return-Path: 
 <hadoop-dev-return-3869-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68696 invoked from network); 22 Sep 2006 20:41:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Sep 2006 20:41:33 -0000
Received: (qmail 21422 invoked by uid 500); 22 Sep 2006 20:41:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 21395 invoked by uid 500); 22 Sep 2006 20:41:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 21386 invoked by uid 99); 22 Sep 2006 20:41:32 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Sep 2006 13:41:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:37884]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id C8/25-06791-67A44154 for <hadoop-dev@lucene.apache.org>;
 Fri, 22 Sep 2006 13:41:26 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1665A7142F5
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Sep 2006 20:37:24 +0000 (GMT)
Message-ID: <5242169.1158957444089.JavaMail.jira@brutus>
Date: Fri, 22 Sep 2006 13:37:24 -0700 (PDT)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-432) support undelete, snapshots, or
 other mechanism to recover lost files
In-Reply-To: <13436198.1155057493889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-432?page=comments#action_12436998 ] 
            
Wendy Chien commented on HADOOP-432:
------------------------------------

I thought the reason behind having undelete was to save users from themselves, which means we'd want to replace the current delete() with a delete which is actually a move to trash.  If a regular delete exists, would people use a moveToTrash?    

> support undelete, snapshots, or other mechanism to recover lost files
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-432
>                 URL: http://issues.apache.org/jira/browse/HADOOP-432
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: Wendy Chien
>
> currently, once you delete a file it's gone forever.
> most file systems allow some form of recovery of deleted files.
> a simple solution would be an 'undelete' command.
> a more comprehensive solution would include snapshots, manual and automatic, with scheduling options.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 22 20:46:26 2006
Return-Path: 
 <hadoop-dev-return-3870-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 69657 invoked from network); 22 Sep 2006 20:46:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Sep 2006 20:46:26 -0000
Received: (qmail 26611 invoked by uid 500); 22 Sep 2006 20:46:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26592 invoked by uid 500); 22 Sep 2006 20:46:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26583 invoked by uid 99); 22 Sep 2006 20:46:25 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Sep 2006 13:46:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:52905]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id A3/45-06791-F9B44154 for <hadoop-dev@lucene.apache.org>;
 Fri, 22 Sep 2006 13:46:23 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 250EE7142F7
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Sep 2006 20:42:25 +0000 (GMT)
Message-ID: <16633009.1158957745149.JavaMail.jira@brutus>
Date: Fri, 22 Sep 2006 13:42:25 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-432) support undelete, snapshots, or
 other mechanism to recover lost files
In-Reply-To: <13436198.1155057493889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-432?page=comments#action_12437000 ] 
            
Yoram Arnon commented on HADOOP-432:
------------------------------------

removing data only when space is required will result in the filesystem always being 100% full.
That has several downsides:
* performance:
       memory usage and image file size on the namenode
       difficulty finding space for data - file systems are slower when full
       to allocate space you must first delete space (right now, online), slowing down writes
* contention for space:
       if a disk is shared between dfs and say, map-reduce temporary storage, or the OS, then dfs will take over everything
* when the FS is really full, undelete will fail, because no space is reserved for it. Better to declare the FS full earlier and keep the (configured) undelete space available

- also, it's the common way of doing things.

       

> support undelete, snapshots, or other mechanism to recover lost files
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-432
>                 URL: http://issues.apache.org/jira/browse/HADOOP-432
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: Wendy Chien
>
> currently, once you delete a file it's gone forever.
> most file systems allow some form of recovery of deleted files.
> a simple solution would be an 'undelete' command.
> a more comprehensive solution would include snapshots, manual and automatic, with scheduling options.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 22 21:01:25 2006
Return-Path: 
 <hadoop-dev-return-3871-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 73231 invoked from network); 22 Sep 2006 21:01:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Sep 2006 21:01:25 -0000
Received: (qmail 44375 invoked by uid 500); 22 Sep 2006 21:01:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 44349 invoked by uid 500); 22 Sep 2006 21:01:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 44338 invoked by uid 99); 22 Sep 2006 21:01:24 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Sep 2006 14:01:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:38787]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 21/95-06791-01F44154 for <hadoop-dev@lucene.apache.org>;
 Fri, 22 Sep 2006 14:01:06 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2D2737142F7
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Sep 2006 20:57:03 +0000 (GMT)
Message-ID: <24046877.1158958623182.JavaMail.jira@brutus>
Date: Fri, 22 Sep 2006 13:57:03 -0700 (PDT)
From: "Dick King (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-487) misspelt DFS host name gives null
 pointer exception in getProtocolVersion
In-Reply-To: <12991310.1156797082382.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-487?page=comments#action_12437001 ] 
            
Dick King commented on HADOOP-487:
----------------------------------

The way  to duplicate the problem is to change the text


<property>
  <name>fs.default.name</name>
  <value>kry1200.inktomisearch.com:8020</value>
  <description>The name of the default file system.  Either the
  literal string "local" or a host:port for DFS.</description>
</property>


in hadoop-site.xml and then launch any hadoop job that doesn't override fs.default.name in its code.

-dk


> misspelt DFS host name gives null pointer exception in getProtocolVersion
> -------------------------------------------------------------------------
>
>                 Key: HADOOP-487
>                 URL: http://issues.apache.org/jira/browse/HADOOP-487
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Dick King
>         Assigned To: Sameer Paranjpye
>
> I'm trying to construct a DistributedFileSystem but I have the wrong hostname.
> It doesn't work.  It throws an exception.  Fair enough.  
> However, it throws a null pointer exception inside $Proxy0.getProtocolVersion, the code that checks whether we have the right protocol version, rather than giving us any exception we could understand or taking an exception in code to which we have sources so we have a way of understanding the problem.
> -dk

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 22 21:13:10 2006
Return-Path: 
 <hadoop-dev-return-3872-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77584 invoked from network); 22 Sep 2006 21:13:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Sep 2006 21:13:10 -0000
Received: (qmail 58484 invoked by uid 500); 22 Sep 2006 21:13:07 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58412 invoked by uid 500); 22 Sep 2006 21:13:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58357 invoked by uid 99); 22 Sep 2006 21:13:07 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Sep 2006 14:13:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:48230]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 87/D5-06791-1E154154 for <hadoop-dev@lucene.apache.org>;
 Fri, 22 Sep 2006 14:13:05 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3CF2A7142F7
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Sep 2006 21:09:24 +0000 (GMT)
Message-ID: <17237384.1158959364247.JavaMail.jira@brutus>
Date: Fri, 22 Sep 2006 14:09:24 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-432) support undelete, snapshots, or
 other mechanism to recover lost files
In-Reply-To: <13436198.1155057493889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-432?page=comments#action_12437005 ] 
            
Doug Cutting commented on HADOOP-432:
-------------------------------------

I thought the idea was to replace 'bin/hadoop dfs -rm' with a move to trash, but progammatic deletion (e.g., of temporary intermediate data between mapreduce passes) would actually delete the files.

> support undelete, snapshots, or other mechanism to recover lost files
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-432
>                 URL: http://issues.apache.org/jira/browse/HADOOP-432
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: Wendy Chien
>
> currently, once you delete a file it's gone forever.
> most file systems allow some form of recovery of deleted files.
> a simple solution would be an 'undelete' command.
> a more comprehensive solution would include snapshots, manual and automatic, with scheduling options.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 22 21:13:14 2006
Return-Path: 
 <hadoop-dev-return-3873-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77704 invoked from network); 22 Sep 2006 21:13:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Sep 2006 21:13:14 -0000
Received: (qmail 59159 invoked by uid 500); 22 Sep 2006 21:13:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 59134 invoked by uid 500); 22 Sep 2006 21:13:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 59125 invoked by uid 99); 22 Sep 2006 21:13:13 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Sep 2006 14:13:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:48238]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 18/D5-06791-6E154154 for <hadoop-dev@lucene.apache.org>;
 Fri, 22 Sep 2006 14:13:11 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9279E7142F5
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Sep 2006 21:09:28 +0000 (GMT)
Message-ID: <9740872.1158959368597.JavaMail.jira@brutus>
Date: Fri, 22 Sep 2006 14:09:28 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-487) misspelt DFS host name gives null
 pointer exception in getProtocolVersion
In-Reply-To: <12991310.1156797082382.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-487?page=all ]

Yoram Arnon updated HADOOP-487:
-------------------------------

    Comment: was deleted

> misspelt DFS host name gives null pointer exception in getProtocolVersion
> -------------------------------------------------------------------------
>
>                 Key: HADOOP-487
>                 URL: http://issues.apache.org/jira/browse/HADOOP-487
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Dick King
>         Assigned To: Sameer Paranjpye
>
> I'm trying to construct a DistributedFileSystem but I have the wrong hostname.
> It doesn't work.  It throws an exception.  Fair enough.  
> However, it throws a null pointer exception inside $Proxy0.getProtocolVersion, the code that checks whether we have the right protocol version, rather than giving us any exception we could understand or taking an exception in code to which we have sources so we have a way of understanding the problem.
> -dk

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 22 21:18:26 2006
Return-Path: 
 <hadoop-dev-return-3875-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78481 invoked from network); 22 Sep 2006 21:18:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Sep 2006 21:18:26 -0000
Received: (qmail 63401 invoked by uid 500); 22 Sep 2006 21:18:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63247 invoked by uid 500); 22 Sep 2006 21:18:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63236 invoked by uid 99); 22 Sep 2006 21:18:25 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Sep 2006 14:18:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:59456]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 68/E5-06791-BF254154 for <hadoop-dev@lucene.apache.org>;
 Fri, 22 Sep 2006 14:17:48 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1B0767142D5
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Sep 2006 21:13:24 +0000 (GMT)
Message-ID: <24484290.1158959604108.JavaMail.jira@brutus>
Date: Fri, 22 Sep 2006 14:13:24 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-432) support undelete, snapshots, or
 other mechanism to recover lost files
In-Reply-To: <13436198.1155057493889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-432?page=comments#action_12437007 ] 
            
Yoram Arnon commented on HADOOP-432:
------------------------------------

that's right.
user invoked deletions will move files to trash, but real deletion will still be available.

> support undelete, snapshots, or other mechanism to recover lost files
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-432
>                 URL: http://issues.apache.org/jira/browse/HADOOP-432
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: Wendy Chien
>
> currently, once you delete a file it's gone forever.
> most file systems allow some form of recovery of deleted files.
> a simple solution would be an 'undelete' command.
> a more comprehensive solution would include snapshots, manual and automatic, with scheduling options.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 22 21:17:53 2006
Return-Path: 
 <hadoop-dev-return-3874-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78345 invoked from network); 22 Sep 2006 21:17:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Sep 2006 21:17:53 -0000
Received: (qmail 62800 invoked by uid 500); 22 Sep 2006 21:17:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62775 invoked by uid 500); 22 Sep 2006 21:17:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62766 invoked by uid 99); 22 Sep 2006 21:17:52 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Sep 2006 14:17:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:59455]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 28/E5-06791-BF254154 for <hadoop-dev@lucene.apache.org>;
 Fri, 22 Sep 2006 14:17:47 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C26787142F5
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Sep 2006 21:13:25 +0000 (GMT)
Message-ID: <946038.1158959605794.JavaMail.jira@brutus>
Date: Fri, 22 Sep 2006 14:13:25 -0700 (PDT)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-432) support undelete, snapshots, or
 other mechanism to recover lost files
In-Reply-To: <13436198.1155057493889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-432?page=comments#action_12437008 ] 
            
Wendy Chien commented on HADOOP-432:
------------------------------------

Oh, I misunderstood your first comment.  We are in agreement.

> support undelete, snapshots, or other mechanism to recover lost files
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-432
>                 URL: http://issues.apache.org/jira/browse/HADOOP-432
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: Wendy Chien
>
> currently, once you delete a file it's gone forever.
> most file systems allow some form of recovery of deleted files.
> a simple solution would be an 'undelete' command.
> a more comprehensive solution would include snapshots, manual and automatic, with scheduling options.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 22 21:42:08 2006
Return-Path: 
 <hadoop-dev-return-3876-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85086 invoked from network); 22 Sep 2006 21:42:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Sep 2006 21:42:08 -0000
Received: (qmail 90302 invoked by uid 500); 22 Sep 2006 21:42:07 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 90285 invoked by uid 500); 22 Sep 2006 21:42:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 90276 invoked by uid 99); 22 Sep 2006 21:42:07 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Sep 2006 14:42:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:53869]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 34/66-06791-DA854154 for <hadoop-dev@lucene.apache.org>;
 Fri, 22 Sep 2006 14:42:05 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0C6F97142F2
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Sep 2006 21:38:24 +0000 (GMT)
Message-ID: <6216374.1158961104048.JavaMail.jira@brutus>
Date: Fri, 22 Sep 2006 14:38:24 -0700 (PDT)
From: "p sutter (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-432) support undelete, snapshots, or
 other mechanism to recover lost files
In-Reply-To: <13436198.1155057493889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-432?page=comments#action_12437014 ] 
            
p sutter commented on HADOOP-432:
---------------------------------


Yoram,

Good point about 100% full. The solution could be to have a minimum-free-space parameter (does it already exist?). This would leave space for tempfiles, allow better performance, etc. Maybe dont go below 10% free, so that filesystem performance is still good.

On the other hand:
- memory usage, etc, I'm not sure I agree. The system is either able to handle a full filesystem, or it isnt. 
- performance, I'm not sure I agree. You dont need to delete anything, you could just overwrite and rename the existing blocks, which is less filesystem overhead. Even if you did delete and recreate, the total number of deletions is the same.

And as for allowing undeletion when the filesystem is full, it seems better to have the space go to a useful purpose rather than have it reserved for deleted files.

Anyway, its just a suggestion!

You guys are doing the work, and therefore, its your choice!

Thanks



> support undelete, snapshots, or other mechanism to recover lost files
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-432
>                 URL: http://issues.apache.org/jira/browse/HADOOP-432
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: Wendy Chien
>
> currently, once you delete a file it's gone forever.
> most file systems allow some form of recovery of deleted files.
> a simple solution would be an 'undelete' command.
> a more comprehensive solution would include snapshots, manual and automatic, with scheduling options.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 22 21:44:18 2006
Return-Path: 
 <hadoop-dev-return-3877-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85576 invoked from network); 22 Sep 2006 21:44:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Sep 2006 21:44:18 -0000
Received: (qmail 92568 invoked by uid 500); 22 Sep 2006 21:44:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 92540 invoked by uid 500); 22 Sep 2006 21:44:18 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 92527 invoked by uid 99); 22 Sep 2006 21:44:18 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Sep 2006 14:44:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:53887]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 1E/66-06791-B2954154 for <hadoop-dev@lucene.apache.org>;
 Fri, 22 Sep 2006 14:44:12 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 056C27142F2
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Sep 2006 21:40:24 +0000 (GMT)
Message-ID: <22709349.1158961224019.JavaMail.jira@brutus>
Date: Fri, 22 Sep 2006 14:40:24 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-432) support undelete, snapshots, or
 other mechanism to recover lost files
In-Reply-To: <13436198.1155057493889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-432?page=comments#action_12437016 ] 
            
Konstantin Shvachko commented on HADOOP-432:
--------------------------------------------

I think the name node changes related to the introduction of recycle bin should be minimal.

delete() should work the same as it does now. As an example, lets say I remove file
from a C program. Does it go to the recycle bin? No. And we want the same for our
map reduce programs.

Users are different they need to be protected from themselves but that could be done
on the client side. Meaning that DFSShell should call throwToTrash() method when
users say delete, instead of calling the real delete().
throwToTrash() should call rename(), and move file from its original location to the
trash folder.  So far no new name node functionality is required.

The only thing that is required from the name node is the trash folder maintenance.
I agree with Paul in that rather than starting a new daemon we can check the trash
folder for expired or over the limit files each time a new file is created or remove.


> support undelete, snapshots, or other mechanism to recover lost files
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-432
>                 URL: http://issues.apache.org/jira/browse/HADOOP-432
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: Wendy Chien
>
> currently, once you delete a file it's gone forever.
> most file systems allow some form of recovery of deleted files.
> a simple solution would be an 'undelete' command.
> a more comprehensive solution would include snapshots, manual and automatic, with scheduling options.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 22 23:10:05 2006
Return-Path: 
 <hadoop-dev-return-3878-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99561 invoked from network); 22 Sep 2006 23:10:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Sep 2006 23:10:05 -0000
Received: (qmail 53692 invoked by uid 500); 22 Sep 2006 23:10:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53663 invoked by uid 500); 22 Sep 2006 23:10:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53654 invoked by uid 99); 22 Sep 2006 23:10:04 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Sep 2006 16:10:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:49847]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 20/50-24666-B4D64154 for <hadoop-dev@lucene.apache.org>;
 Fri, 22 Sep 2006 16:10:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 59A654190CE
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Sep 2006 23:06:22 +0000 (GMT)
Message-ID: <4456046.1158966382364.JavaMail.jira@brutus>
Date: Fri, 22 Sep 2006 16:06:22 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-555) Tasks should inherit some of the
 server's environment
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Tasks should inherit some of the server's environment
-----------------------------------------------------

                 Key: HADOOP-555
                 URL: http://issues.apache.org/jira/browse/HADOOP-555
             Project: Hadoop
          Issue Type: Improvement
            Reporter: Owen O'Malley


When the task trackers start up the Task process, they clear the environment variables. It would be better if there was a SERVER config that listed the names of the environment variables that would be copied from the server's enviroment.

So the task tracker's config would have:

<property><name>mapred.task.environment</name>
<value>PATH,LD_LIBRARY_PATH</value></property>

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Sep 23 00:31:06 2006
Return-Path: 
 <hadoop-dev-return-3879-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9235 invoked from network); 23 Sep 2006 00:31:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Sep 2006 00:31:06 -0000
Received: (qmail 23823 invoked by uid 500); 23 Sep 2006 00:31:06 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23792 invoked by uid 500); 23 Sep 2006 00:31:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23782 invoked by uid 99); 23 Sep 2006 00:31:05 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Sep 2006 17:31:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:43195]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 63/11-25038-74084154 for <hadoop-dev@lucene.apache.org>;
 Fri, 22 Sep 2006 17:31:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5A1B87142F5
	for <hadoop-dev@lucene.apache.org>; Sat, 23 Sep 2006 00:27:22 +0000 (GMT)
Message-ID: <17510066.1158971242365.JavaMail.jira@brutus>
Date: Fri, 22 Sep 2006 17:27:22 -0700 (PDT)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-556) Streaming should send keep-alive
 signals to Reporter every 10 seconds, not every 100 records
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Streaming should send keep-alive signals to Reporter every 10 seconds, not every 100 records
--------------------------------------------------------------------------------------------

                 Key: HADOOP-556
                 URL: http://issues.apache.org/jira/browse/HADOOP-556
             Project: Hadoop
          Issue Type: Improvement
          Components: contrib/streaming
            Reporter: Michel Tourn


Streaming should send keep-alive signals to Reporter every 10 seconds, not every 100 records.
A first version of this was already implemented but was not satisfactory.

Now we check whether 10sec have passed:

-after reading a *line* of Application's stderr 
 (so please use as your stderr heartbeat: cerr << ".\n", not cerr << "."  )

-and after outputting a record in mapper / combiner / reducer.

If 10 sec have passed then we set Reporter status.

Effects:

-the reporter status changes more often and provides useful feedback in the Web UI or in another client.
-a Task will not time out after 10 minutes just because it outputs records slowly. 

No artificial heartbeat is introduced in this proposal.
The streaming Application still has to show activity (either on stdout or on stderr)









-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Sep 23 00:33:05 2006
Return-Path: 
 <hadoop-dev-return-3880-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9479 invoked from network); 23 Sep 2006 00:33:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Sep 2006 00:33:05 -0000
Received: (qmail 24559 invoked by uid 500); 23 Sep 2006 00:33:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24533 invoked by uid 500); 23 Sep 2006 00:33:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24524 invoked by uid 99); 23 Sep 2006 00:33:05 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Sep 2006 17:33:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:43200]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 2D/11-25038-0C084154 for <hadoop-dev@lucene.apache.org>;
 Fri, 22 Sep 2006 17:33:04 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6099E7142F6
	for <hadoop-dev@lucene.apache.org>; Sat, 23 Sep 2006 00:29:23 +0000 (GMT)
Message-ID: <22827678.1158971363393.JavaMail.jira@brutus>
Date: Fri, 22 Sep 2006 17:29:23 -0700 (PDT)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-556) Streaming should send keep-alive
 signals to Reporter every 10 seconds, not every 100 records
In-Reply-To: <17510066.1158971242365.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-556?page=all ]

Michel Tourn updated HADOOP-556:
--------------------------------

    Status: Patch Available  (was: Open)

Attachment hadoop-timedreporter.patch is the patch


> Streaming should send keep-alive signals to Reporter every 10 seconds, not every 100 records
> --------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-556
>                 URL: http://issues.apache.org/jira/browse/HADOOP-556
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: contrib/streaming
>            Reporter: Michel Tourn
>         Attachments: hadoop-timedreporter.patch
>
>
> Streaming should send keep-alive signals to Reporter every 10 seconds, not every 100 records.
> A first version of this was already implemented but was not satisfactory.
> Now we check whether 10sec have passed:
> -after reading a *line* of Application's stderr 
>  (so please use as your stderr heartbeat: cerr << ".\n", not cerr << "."  )
> -and after outputting a record in mapper / combiner / reducer.
> If 10 sec have passed then we set Reporter status.
> Effects:
> -the reporter status changes more often and provides useful feedback in the Web UI or in another client.
> -a Task will not time out after 10 minutes just because it outputs records slowly. 
> No artificial heartbeat is introduced in this proposal.
> The streaming Application still has to show activity (either on stdout or on stderr)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Sep 23 00:33:07 2006
Return-Path: 
 <hadoop-dev-return-3881-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9511 invoked from network); 23 Sep 2006 00:33:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Sep 2006 00:33:07 -0000
Received: (qmail 24961 invoked by uid 500); 23 Sep 2006 00:33:07 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24756 invoked by uid 500); 23 Sep 2006 00:33:06 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24747 invoked by uid 99); 23 Sep 2006 00:33:06 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Sep 2006 17:33:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:43202]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 6D/11-25038-1C084154 for <hadoop-dev@lucene.apache.org>;
 Fri, 22 Sep 2006 17:33:05 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7E63E7142F5
	for <hadoop-dev@lucene.apache.org>; Sat, 23 Sep 2006 00:29:24 +0000 (GMT)
Message-ID: <28379479.1158971364515.JavaMail.jira@brutus>
Date: Fri, 22 Sep 2006 17:29:24 -0700 (PDT)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-556) Streaming should send keep-alive
 signals to Reporter every 10 seconds, not every 100 records
In-Reply-To: <17510066.1158971242365.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-556?page=all ]

Michel Tourn updated HADOOP-556:
--------------------------------

    Attachment: hadoop-timedreporter.patch

> Streaming should send keep-alive signals to Reporter every 10 seconds, not every 100 records
> --------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-556
>                 URL: http://issues.apache.org/jira/browse/HADOOP-556
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: contrib/streaming
>            Reporter: Michel Tourn
>         Attachments: hadoop-timedreporter.patch
>
>
> Streaming should send keep-alive signals to Reporter every 10 seconds, not every 100 records.
> A first version of this was already implemented but was not satisfactory.
> Now we check whether 10sec have passed:
> -after reading a *line* of Application's stderr 
>  (so please use as your stderr heartbeat: cerr << ".\n", not cerr << "."  )
> -and after outputting a record in mapper / combiner / reducer.
> If 10 sec have passed then we set Reporter status.
> Effects:
> -the reporter status changes more often and provides useful feedback in the Web UI or in another client.
> -a Task will not time out after 10 minutes just because it outputs records slowly. 
> No artificial heartbeat is introduced in this proposal.
> The streaming Application still has to show activity (either on stdout or on stderr)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 25 03:58:38 2006
Return-Path: 
 <hadoop-dev-return-3882-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8275 invoked from network); 25 Sep 2006 03:58:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Sep 2006 03:58:38 -0000
Received: (qmail 11374 invoked by uid 500); 25 Sep 2006 03:58:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 11207 invoked by uid 500); 25 Sep 2006 03:58:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 11178 invoked by uid 99); 25 Sep 2006 03:58:37 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Sep 2006 20:58:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:57130]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 50/65-13750-CE357154 for <hadoop-dev@lucene.apache.org>;
 Sun, 24 Sep 2006 20:58:36 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1DFE87142A1
	for <hadoop-dev@lucene.apache.org>; Mon, 25 Sep 2006 03:54:51 +0000 (GMT)
Message-ID: <13541535.1159156491120.JavaMail.jira@brutus>
Date: Sun, 24 Sep 2006 20:54:51 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-538?page=comments#action_12437447 ] 
            
Arun C Murthy commented on HADOOP-538:
--------------------------------------

While working on this I've realised that the 'custom compressor' framework we have built as a part of HADOOP-441 isn't the most flexible one or complete.

Specifically the existing framework only lets us plug-in custom compress/decompress 'streams' (e.g. a bzip2 input/output stream) while in many cases it is sufficient to use an existing 'stream' and just plug-in a custom deflater/inflater (e.g. native-zlib or lzo inflater/deflater pair)... java.util.zip's {De|In}flater classes just haven't been designed with this kind of functionality in mind; making them unsuitable.

Hence I would like to propose that we add a org.apache.hadoop.io.compress.{Com|Decom}pressor interface which custom {de}compressors can implement and plug into an existing {de}compression stream... further I would also like to propose that the above {Com|Decom}pressor interfaces have the same interfaces as the public methods in java.util.zip.{De|In}flater ie.

public interface Compressor {
  public void setInput(byte[] b, int off, int len);
  public boolean needsInput();
  public void setDictionary(byte[] b, int off, int len);
  public void finish();
  public boolean finished();
  public int deflate(ByteBuffer directBuffer, int directBufferLength); // for native calls with nio's direct buffer
  public int deflate(byte[] b, int off, int len); // for native methods without nio
  public void reset();
  public void end();
}

public interface Decompressor {
  public void setInput(byte[] b, int off, int len);
  public boolean needsInput();
  public void setDictionary(byte[] b, int off, int len);
  public boolean needsDictionary();
  public void finish();
  public boolean finished();
  public int inflate(ByteBuffer directBuffer, int directBufferLength); // for native calls with nio's direct buffer
  public int inflate(byte[] b, int off, int len); // for native methods without nio
  public void reset();
  public void end();
}

  On the same trajectory we will need to supply a pair of input/output streams which can take objects implementing the above interfaces to achieve actual compression/decompression. Again java.util.zip.{De|In}flater{Out|In}put streams won't suffice since they weren't designed with these in mind. 

 I would like to propose org.apache.hadoop.io.compress.Compression{In|Out}putStreams, but they are already taken; how about org.apache.hadoop.io.compress.DataCompression{In|Out}putStreams? 

 With existing Compression{Out|In}putStreams and the above {Com|Decom}pressor/DataCompression{In|Out}putStreams we should have a sufficiently complete abstractions to support 'custom codecs'...

Thoughts?

> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.7.0
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 25 04:00:37 2006
Return-Path: 
 <hadoop-dev-return-3883-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8452 invoked from network); 25 Sep 2006 04:00:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Sep 2006 04:00:37 -0000
Received: (qmail 11827 invoked by uid 500); 25 Sep 2006 04:00:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 11807 invoked by uid 500); 25 Sep 2006 04:00:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 11798 invoked by uid 99); 25 Sep 2006 04:00:36 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Sep 2006 21:00:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:51307]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 5C/65-13750-46457154 for <hadoop-dev@lucene.apache.org>;
 Sun, 24 Sep 2006 21:00:36 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 23AF8714293
	for <hadoop-dev@lucene.apache.org>; Mon, 25 Sep 2006 03:56:51 +0000 (GMT)
Message-ID: <17730684.1159156611143.JavaMail.jira@brutus>
Date: Sun, 24 Sep 2006 20:56:51 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-538?page=comments#action_12437448 ] 
            
Arun C Murthy commented on HADOOP-538:
--------------------------------------

Addendum:

The above DataCompression{In|Out}putStream should obviate the need for the existing org.apache.hadoop.io.compress.DefaultCodec.Resetable{De|In}flater{Out|In}putStreams and they can be removed safely without affecting any existing code...

> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.7.0
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 25 10:25:40 2006
Return-Path: 
 <hadoop-dev-return-3884-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 11037 invoked from network); 25 Sep 2006 10:25:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Sep 2006 10:25:40 -0000
Received: (qmail 8268 invoked by uid 500); 25 Sep 2006 10:25:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 8248 invoked by uid 500); 25 Sep 2006 10:25:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 8239 invoked by uid 99); 25 Sep 2006 10:25:39 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Sep 2006 03:25:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:42537]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id E1/A1-13750-2AEA7154 for <hadoop-dev@lucene.apache.org>;
 Mon, 25 Sep 2006 03:25:38 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9BE7E7142A1
	for <hadoop-dev@lucene.apache.org>; Mon, 25 Sep 2006 10:21:52 +0000 (GMT)
Message-ID: <16891506.1159179712635.JavaMail.jira@brutus>
Date: Mon, 25 Sep 2006 03:21:52 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Work started: (HADOOP-547) ReduceTaskRunner can miss sending
 hearbeats if no map output copy finishes within "mapred.task.timeout"
In-Reply-To: <21058618.1158663442417.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-547?page=all ]

Work on HADOOP-547 started by Sanjay Dahiya.

> ReduceTaskRunner can miss sending hearbeats if no map output copy finishes within "mapred.task.timeout"
> -------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-547
>                 URL: http://issues.apache.org/jira/browse/HADOOP-547
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.6.2
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>
> In ReduceTaskRunner, main loop sending heartbeats waits on copyResults, which releases only if a copy thread finishes copying. This can cause good reduce tasks which are copying data to fail, if no map task output was copied within "mapred.task.timeout". 
> ReduceTaskRunner.java:490
>         try {
>           copyResults.wait();                      <=========== Calls unconditional wait. 
>         } catch (InterruptedException e) { }
> wait() should be with a timeout, possibly taskTimeout/2 after which it should send a hearbeat and go back to wait. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 25 10:31:46 2006
Return-Path: 
 <hadoop-dev-return-3885-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12222 invoked from network); 25 Sep 2006 10:31:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Sep 2006 10:31:46 -0000
Received: (qmail 14297 invoked by uid 500); 25 Sep 2006 10:31:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14096 invoked by uid 500); 25 Sep 2006 10:31:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 14087 invoked by uid 99); 25 Sep 2006 10:31:45 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Sep 2006 03:31:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:40207]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id CF/C1-13750-010B7154 for <hadoop-dev@lucene.apache.org>;
 Mon, 25 Sep 2006 03:31:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A31C5714293
	for <hadoop-dev@lucene.apache.org>; Mon, 25 Sep 2006 10:27:55 +0000 (GMT)
Message-ID: <19168683.1159180075664.JavaMail.jira@brutus>
Date: Mon, 25 Sep 2006 03:27:55 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-547) ReduceTaskRunner can miss sending
 hearbeats if no map output copy finishes within "mapred.task.timeout"
In-Reply-To: <21058618.1158663442417.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-547?page=all ]

Sanjay Dahiya updated HADOOP-547:
---------------------------------

    Attachment: Hadoop-547.patch

Here is a patch for review - 
It makes sure that reduce task, sends a heartbeat/progress when none of copy tasks finishes with in "mapred.task.timeout". It replaces the unconditional wait with a conditional wait with a timeout of (mapred.task.timeout)/2. (we could make it 3/4th of this timeout as well).

> ReduceTaskRunner can miss sending hearbeats if no map output copy finishes within "mapred.task.timeout"
> -------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-547
>                 URL: http://issues.apache.org/jira/browse/HADOOP-547
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.6.2
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-547.patch
>
>
> In ReduceTaskRunner, main loop sending heartbeats waits on copyResults, which releases only if a copy thread finishes copying. This can cause good reduce tasks which are copying data to fail, if no map task output was copied within "mapred.task.timeout". 
> ReduceTaskRunner.java:490
>         try {
>           copyResults.wait();                      <=========== Calls unconditional wait. 
>         } catch (InterruptedException e) { }
> wait() should be with a timeout, possibly taskTimeout/2 after which it should send a hearbeat and go back to wait. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 25 10:31:54 2006
Return-Path: 
 <hadoop-dev-return-3886-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12680 invoked from network); 25 Sep 2006 10:31:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Sep 2006 10:31:54 -0000
Received: (qmail 15122 invoked by uid 500); 25 Sep 2006 10:31:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15097 invoked by uid 500); 25 Sep 2006 10:31:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 15088 invoked by uid 99); 25 Sep 2006 10:31:51 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Sep 2006 03:31:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:40212]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id F0/D1-13750-710B7154 for <hadoop-dev@lucene.apache.org>;
 Mon, 25 Sep 2006 03:31:51 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 60A457142CF
	for <hadoop-dev@lucene.apache.org>; Mon, 25 Sep 2006 10:28:05 +0000 (GMT)
Message-ID: <14616649.1159180085393.JavaMail.jira@brutus>
Date: Mon, 25 Sep 2006 03:28:05 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-263) task status should include timestamps
 for when a job transitions
In-Reply-To: <6879018.1149102869840.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-263?page=all ]

Sanjay Dahiya updated HADOOP-263:
---------------------------------

    Status: Patch Available  (was: In Progress)

> task status should include timestamps for when a job transitions
> ----------------------------------------------------------------
>
>                 Key: HADOOP-263
>                 URL: http://issues.apache.org/jira/browse/HADOOP-263
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.2.1
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-263.patch, Hadoop-263_1.patch, Hadoop-263_2.patch, Hadoop-263_3.patch, Hadoop-263_4.patch, Hadoop-263_5.patch, patch.txt, patch.txt, patch.txt, patch.txt
>
>
> It would help users to understand what happened if the task status included information about when the task transitioned:
> Map:
>    started
>    finished
> Reduce:
>    started
>    shuffle finished
>    sort finished
>    finished

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 25 10:40:39 2006
Return-Path: 
 <hadoop-dev-return-3887-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17464 invoked from network); 25 Sep 2006 10:40:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Sep 2006 10:40:39 -0000
Received: (qmail 29115 invoked by uid 500); 25 Sep 2006 10:40:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28897 invoked by uid 500); 25 Sep 2006 10:40:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28888 invoked by uid 99); 25 Sep 2006 10:40:38 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Sep 2006 03:40:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:34950]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id B3/12-13750-522B7154 for <hadoop-dev@lucene.apache.org>;
 Mon, 25 Sep 2006 03:40:37 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E33C871428E
	for <hadoop-dev@lucene.apache.org>; Mon, 25 Sep 2006 10:36:51 +0000 (GMT)
Message-ID: <30715404.1159180611928.JavaMail.jira@brutus>
Date: Mon, 25 Sep 2006 03:36:51 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-537) clean-libhdfs target of build.xml does
 not work on windows
In-Reply-To: <4253884.1158281003558.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-537?page=all ]

Arun C Murthy updated HADOOP-537:
---------------------------------

    Attachment: HADOOP-537.patch

Here's a patch which ensures that no temporary files are created in the src/c++/libhdfs; including .o/.so etc. They are all put in build/libhdfs. In fact I've ensured that even the doxygen generated docs go to build/libhdfs/docs and can be packaged aptly.

Konstantin - can you please confirm that it works for you? thanks.

I've kept the 'clean-libhdfs' target around in build.xml so that devs working on libhdfs can use it without needing to invoke the top-level 'clean' which nukes the 'build' directory.

> clean-libhdfs target of build.xml does not work on windows
> ----------------------------------------------------------
>
>                 Key: HADOOP-537
>                 URL: http://issues.apache.org/jira/browse/HADOOP-537
>             Project: Hadoop
>          Issue Type: Bug
>          Components: libhdfs
>    Affects Versions: 0.6.0
>         Environment: Windows
>            Reporter: Konstantin Shvachko
>         Assigned To: Arun C Murthy
>         Attachments: HADOOP-537.patch
>
>
> It produces the following:
> BUILD FAILED
> Hadoop\build.xml:496: Execute failed: java.io.IOException: CreateProcess: make clean error=2
> Besides, I would propose to have clean-* target for every compile-* target in build.xml.
> Some people probably don't build libhdfs or contrib, so why should they clean it.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 25 12:11:43 2006
Return-Path: 
 <hadoop-dev-return-3888-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77103 invoked from network); 25 Sep 2006 12:11:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Sep 2006 12:11:43 -0000
Received: (qmail 66601 invoked by uid 500); 25 Sep 2006 12:11:43 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66394 invoked by uid 500); 25 Sep 2006 12:11:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66385 invoked by uid 99); 25 Sep 2006 12:11:42 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Sep 2006 05:11:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:34563]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 8B/25-13750-A77C7154 for <hadoop-dev@lucene.apache.org>;
 Mon, 25 Sep 2006 05:11:38 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2D53C714293
	for <hadoop-dev@lucene.apache.org>; Mon, 25 Sep 2006 12:07:51 +0000 (GMT)
Message-ID: <19237195.1159186071183.JavaMail.jira@brutus>
Date: Mon, 25 Sep 2006 05:07:51 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-538?page=comments#action_12437531 ] 
            
Arun C Murthy commented on HADOOP-538:
--------------------------------------

The above {Com|Decom}pressor interfaces will also need a 

public boolean usesDirectBuffer();

api so as to advertise if they are based on 'native' code and can take advantage of nio's direct buffers. There is no reason of course to stipulate it since we very well could be using a 'pure java' codec in future.

> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.7.0
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 25 18:28:25 2006
Return-Path: 
 <hadoop-dev-return-3890-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 6338 invoked from network); 25 Sep 2006 18:28:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Sep 2006 18:28:25 -0000
Received: (qmail 53747 invoked by uid 500); 25 Sep 2006 18:28:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53703 invoked by uid 500); 25 Sep 2006 18:28:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53270 invoked by uid 99); 25 Sep 2006 18:28:21 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Sep 2006 11:28:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:48672]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 3B/9E-13750-7BF18154 for <hadoop-dev@lucene.apache.org>;
 Mon, 25 Sep 2006 11:28:10 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5A7CB7142A1
	for <hadoop-dev@lucene.apache.org>; Mon, 25 Sep 2006 18:23:52 +0000 (GMT)
Message-ID: <27224609.1159208632368.JavaMail.jira@brutus>
Date: Mon, 25 Sep 2006 11:23:52 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-487) misspelt DFS host name gives null
 pointer exception in getProtocolVersion
In-Reply-To: <12991310.1156797082382.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-487?page=all ]

Sameer Paranjpye updated HADOOP-487:
------------------------------------

        Fix Version/s: 0.7.0
    Affects Version/s: 0.6.2
                           (was: 0.5.0)

The NullPointerException is generated in the constructor of the Connection class. The incorrect hostname is used to instantiate an InetSocketAddress which fails to resolve. Accessing the 'address' field of this causes the NullPointerException.



> misspelt DFS host name gives null pointer exception in getProtocolVersion
> -------------------------------------------------------------------------
>
>                 Key: HADOOP-487
>                 URL: http://issues.apache.org/jira/browse/HADOOP-487
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.6.2
>            Reporter: Dick King
>         Assigned To: Sameer Paranjpye
>             Fix For: 0.7.0
>
>
> I'm trying to construct a DistributedFileSystem but I have the wrong hostname.
> It doesn't work.  It throws an exception.  Fair enough.  
> However, it throws a null pointer exception inside $Proxy0.getProtocolVersion, the code that checks whether we have the right protocol version, rather than giving us any exception we could understand or taking an exception in code to which we have sources so we have a way of understanding the problem.
> -dk

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 25 18:28:25 2006
Return-Path: 
 <hadoop-dev-return-3889-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 6342 invoked from network); 25 Sep 2006 18:28:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Sep 2006 18:28:25 -0000
Received: (qmail 53748 invoked by uid 500); 25 Sep 2006 18:28:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53696 invoked by uid 500); 25 Sep 2006 18:28:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53638 invoked by uid 99); 25 Sep 2006 18:28:22 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Sep 2006 11:28:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:48676]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id BB/9E-13750-CBF18154 for <hadoop-dev@lucene.apache.org>;
 Mon, 25 Sep 2006 11:28:15 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A42577142D5
	for <hadoop-dev@lucene.apache.org>; Mon, 25 Sep 2006 18:23:54 +0000 (GMT)
Message-ID: <3133864.1159208634669.JavaMail.jira@brutus>
Date: Mon, 25 Sep 2006 11:23:54 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Work started: (HADOOP-487) misspelt DFS host name gives null
 pointer exception in getProtocolVersion
In-Reply-To: <12991310.1156797082382.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-487?page=all ]

Work on HADOOP-487 started by Sameer Paranjpye.

> misspelt DFS host name gives null pointer exception in getProtocolVersion
> -------------------------------------------------------------------------
>
>                 Key: HADOOP-487
>                 URL: http://issues.apache.org/jira/browse/HADOOP-487
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.6.2
>            Reporter: Dick King
>         Assigned To: Sameer Paranjpye
>             Fix For: 0.7.0
>
>
> I'm trying to construct a DistributedFileSystem but I have the wrong hostname.
> It doesn't work.  It throws an exception.  Fair enough.  
> However, it throws a null pointer exception inside $Proxy0.getProtocolVersion, the code that checks whether we have the right protocol version, rather than giving us any exception we could understand or taking an exception in code to which we have sources so we have a way of understanding the problem.
> -dk

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 25 18:32:10 2006
Return-Path: 
 <hadoop-dev-return-3891-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 7144 invoked from network); 25 Sep 2006 18:32:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Sep 2006 18:32:10 -0000
Received: (qmail 58357 invoked by uid 500); 25 Sep 2006 18:32:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58326 invoked by uid 500); 25 Sep 2006 18:32:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58291 invoked by uid 99); 25 Sep 2006 18:32:08 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Sep 2006 11:32:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:33112]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 1F/AE-13750-1A028154 for <hadoop-dev@lucene.apache.org>;
 Mon, 25 Sep 2006 11:32:02 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 80F707142D9
	for <hadoop-dev@lucene.apache.org>; Mon, 25 Sep 2006 18:27:54 +0000 (GMT)
Message-ID: <1645127.1159208874525.JavaMail.jira@brutus>
Date: Mon, 25 Sep 2006 11:27:54 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-487) misspelt DFS host name gives null
 pointer exception in getProtocolVersion
In-Reply-To: <12991310.1156797082382.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-487?page=all ]

Sameer Paranjpye updated HADOOP-487:
------------------------------------

    Status: Patch Available  (was: In Progress)

This patch changes the constructor of Connection to throw an UnknownHostException if an unresolved InetSocketAddress is passed in. Maybe it should take a shot at resolving the address first since unresolved addresses can be created with InetSocketAddress.createUnresolved?








> misspelt DFS host name gives null pointer exception in getProtocolVersion
> -------------------------------------------------------------------------
>
>                 Key: HADOOP-487
>                 URL: http://issues.apache.org/jira/browse/HADOOP-487
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.6.2
>            Reporter: Dick King
>         Assigned To: Sameer Paranjpye
>             Fix For: 0.7.0
>
>
> I'm trying to construct a DistributedFileSystem but I have the wrong hostname.
> It doesn't work.  It throws an exception.  Fair enough.  
> However, it throws a null pointer exception inside $Proxy0.getProtocolVersion, the code that checks whether we have the right protocol version, rather than giving us any exception we could understand or taking an exception in code to which we have sources so we have a way of understanding the problem.
> -dk

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 25 18:34:53 2006
Return-Path: 
 <hadoop-dev-return-3892-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 7812 invoked from network); 25 Sep 2006 18:34:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Sep 2006 18:34:53 -0000
Received: (qmail 66584 invoked by uid 500); 25 Sep 2006 18:34:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66358 invoked by uid 500); 25 Sep 2006 18:34:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66349 invoked by uid 99); 25 Sep 2006 18:34:52 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Sep 2006 11:34:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:33119]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 1E/BE-13750-B3128154 for <hadoop-dev@lucene.apache.org>;
 Mon, 25 Sep 2006 11:34:37 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 350B67142A1
	for <hadoop-dev@lucene.apache.org>; Mon, 25 Sep 2006 18:29:52 +0000 (GMT)
Message-ID: <31945197.1159208992214.JavaMail.jira@brutus>
Date: Mon, 25 Sep 2006 11:29:52 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-487) misspelt DFS host name gives null
 pointer exception in getProtocolVersion
In-Reply-To: <12991310.1156797082382.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-487?page=all ]

Sameer Paranjpye updated HADOOP-487:
------------------------------------

    Attachment: unknown-host.txt

> misspelt DFS host name gives null pointer exception in getProtocolVersion
> -------------------------------------------------------------------------
>
>                 Key: HADOOP-487
>                 URL: http://issues.apache.org/jira/browse/HADOOP-487
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.6.2
>            Reporter: Dick King
>         Assigned To: Sameer Paranjpye
>             Fix For: 0.7.0
>
>         Attachments: unknown-host.txt
>
>
> I'm trying to construct a DistributedFileSystem but I have the wrong hostname.
> It doesn't work.  It throws an exception.  Fair enough.  
> However, it throws a null pointer exception inside $Proxy0.getProtocolVersion, the code that checks whether we have the right protocol version, rather than giving us any exception we could understand or taking an exception in code to which we have sources so we have a way of understanding the problem.
> -dk

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 25 18:41:53 2006
Return-Path: 
 <hadoop-dev-return-3893-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9115 invoked from network); 25 Sep 2006 18:41:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Sep 2006 18:41:53 -0000
Received: (qmail 76467 invoked by uid 500); 25 Sep 2006 18:41:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 76256 invoked by uid 500); 25 Sep 2006 18:41:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 76247 invoked by uid 99); 25 Sep 2006 18:41:52 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Sep 2006 11:41:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:55312]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id E7/EE-13750-BE228154 for <hadoop-dev@lucene.apache.org>;
 Mon, 25 Sep 2006 11:41:48 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1ED1C7142A1
	for <hadoop-dev@lucene.apache.org>; Mon, 25 Sep 2006 18:37:51 +0000 (GMT)
Message-ID: <31024151.1159209471123.JavaMail.jira@brutus>
Date: Mon, 25 Sep 2006 11:37:51 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-547) ReduceTaskRunner can miss sending
 hearbeats if no map output copy finishes within "mapred.task.timeout"
In-Reply-To: <21058618.1158663442417.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-547?page=comments#action_12437635 ] 
            
Owen O'Malley commented on HADOOP-547:
--------------------------------------

Instead of adding a new timer to the ReduceTaskRunner, I think it would be far easier to have the PingTimer just call reportProgress when the progress() method is called.

To get access to the TaskTracker and Task, PingTimer would be a non-static inner class instead of static.

> ReduceTaskRunner can miss sending hearbeats if no map output copy finishes within "mapred.task.timeout"
> -------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-547
>                 URL: http://issues.apache.org/jira/browse/HADOOP-547
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.6.2
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-547.patch
>
>
> In ReduceTaskRunner, main loop sending heartbeats waits on copyResults, which releases only if a copy thread finishes copying. This can cause good reduce tasks which are copying data to fail, if no map task output was copied within "mapred.task.timeout". 
> ReduceTaskRunner.java:490
>         try {
>           copyResults.wait();                      <=========== Calls unconditional wait. 
>         } catch (InterruptedException e) { }
> wait() should be with a timeout, possibly taskTimeout/2 after which it should send a hearbeat and go back to wait. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 25 19:27:11 2006
Return-Path: 
 <hadoop-dev-return-3894-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30472 invoked from network); 25 Sep 2006 19:27:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Sep 2006 19:27:11 -0000
Received: (qmail 45933 invoked by uid 500); 25 Sep 2006 19:27:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 45816 invoked by uid 500); 25 Sep 2006 19:27:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 45741 invoked by uid 99); 25 Sep 2006 19:27:09 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Sep 2006 12:27:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:42157]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 97/CF-13750-28D28154 for <hadoop-dev@lucene.apache.org>;
 Mon, 25 Sep 2006 12:27:01 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 316DA7142C7
	for <hadoop-dev@lucene.apache.org>; Mon, 25 Sep 2006 19:22:51 +0000 (GMT)
Message-ID: <2064307.1159212171199.JavaMail.jira@brutus>
Date: Mon, 25 Sep 2006 12:22:51 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-547) ReduceTaskRunner can miss sending
 hearbeats if no map output copy finishes within "mapred.task.timeout"
In-Reply-To: <21058618.1158663442417.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-547?page=all ]

Sanjay Dahiya updated HADOOP-547:
---------------------------------

    Attachment: Hadoop-547_1.patch

updated patch, makes PingTimer non-static and sends a progress report in pingTimer.progress(). 

progress update time could be too frequent ( 1 sec ), it should be probably changed to a higher value in another patch. 

> ReduceTaskRunner can miss sending hearbeats if no map output copy finishes within "mapred.task.timeout"
> -------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-547
>                 URL: http://issues.apache.org/jira/browse/HADOOP-547
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.6.2
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-547.patch, Hadoop-547_1.patch
>
>
> In ReduceTaskRunner, main loop sending heartbeats waits on copyResults, which releases only if a copy thread finishes copying. This can cause good reduce tasks which are copying data to fail, if no map task output was copied within "mapred.task.timeout". 
> ReduceTaskRunner.java:490
>         try {
>           copyResults.wait();                      <=========== Calls unconditional wait. 
>         } catch (InterruptedException e) { }
> wait() should be with a timeout, possibly taskTimeout/2 after which it should send a hearbeat and go back to wait. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 25 19:27:13 2006
Return-Path: 
 <hadoop-dev-return-3895-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30526 invoked from network); 25 Sep 2006 19:27:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Sep 2006 19:27:13 -0000
Received: (qmail 46067 invoked by uid 500); 25 Sep 2006 19:27:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 46023 invoked by uid 500); 25 Sep 2006 19:27:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 45973 invoked by uid 99); 25 Sep 2006 19:27:09 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Sep 2006 12:27:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:42161]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 78/CF-13750-58D28154 for <hadoop-dev@lucene.apache.org>;
 Mon, 25 Sep 2006 12:27:02 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8614A7142D5
	for <hadoop-dev@lucene.apache.org>; Mon, 25 Sep 2006 19:22:53 +0000 (GMT)
Message-ID: <32616914.1159212173546.JavaMail.jira@brutus>
Date: Mon, 25 Sep 2006 12:22:53 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-547) ReduceTaskRunner can miss sending
 hearbeats if no map output copy finishes within "mapred.task.timeout"
In-Reply-To: <21058618.1158663442417.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-547?page=all ]

Sanjay Dahiya updated HADOOP-547:
---------------------------------

    Status: Patch Available  (was: In Progress)

> ReduceTaskRunner can miss sending hearbeats if no map output copy finishes within "mapred.task.timeout"
> -------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-547
>                 URL: http://issues.apache.org/jira/browse/HADOOP-547
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.6.2
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-547.patch, Hadoop-547_1.patch
>
>
> In ReduceTaskRunner, main loop sending heartbeats waits on copyResults, which releases only if a copy thread finishes copying. This can cause good reduce tasks which are copying data to fail, if no map task output was copied within "mapred.task.timeout". 
> ReduceTaskRunner.java:490
>         try {
>           copyResults.wait();                      <=========== Calls unconditional wait. 
>         } catch (InterruptedException e) { }
> wait() should be with a timeout, possibly taskTimeout/2 after which it should send a hearbeat and go back to wait. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 25 19:56:12 2006
Return-Path: 
 <hadoop-dev-return-3896-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 38836 invoked from network); 25 Sep 2006 19:56:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Sep 2006 19:56:12 -0000
Received: (qmail 93930 invoked by uid 500); 25 Sep 2006 19:56:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 93732 invoked by uid 500); 25 Sep 2006 19:56:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 93716 invoked by uid 99); 25 Sep 2006 19:56:11 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Sep 2006 12:56:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:33168]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 68/50-13750-D4438154 for <hadoop-dev@lucene.apache.org>;
 Mon, 25 Sep 2006 12:56:01 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B04BC7142CF
	for <hadoop-dev@lucene.apache.org>; Mon, 25 Sep 2006 19:51:50 +0000 (GMT)
Message-ID: <14791507.1159213910719.JavaMail.jira@brutus>
Date: Mon, 25 Sep 2006 12:51:50 -0700 (PDT)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-557) task tracker cannot find mapoutput
 files
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

task tracker cannot find mapoutput files 
-----------------------------------------

                 Key: HADOOP-557
                 URL: http://issues.apache.org/jira/browse/HADOOP-557
             Project: Hadoop
          Issue Type: Bug
            Reporter: Runping Qi



I ran a large job on our cluster over the weekend. At some point, some map tasks were re-run successfully. However, when trying to handle the reducers requests to fetch mapoutput files of those map tasks, the http server complained file not found.

This happened multiple times on different machines for the same map task until the job tracker aborted the job.




-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 25 20:00:42 2006
Return-Path: 
 <hadoop-dev-return-3897-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40220 invoked from network); 25 Sep 2006 20:00:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Sep 2006 20:00:42 -0000
Received: (qmail 4761 invoked by uid 500); 25 Sep 2006 20:00:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 4716 invoked by uid 500); 25 Sep 2006 20:00:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 4624 invoked by uid 99); 25 Sep 2006 20:00:37 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Sep 2006 13:00:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:33195]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 1B/60-13750-95538154 for <hadoop-dev@lucene.apache.org>;
 Mon, 25 Sep 2006 13:00:25 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 650A07142C7
	for <hadoop-dev@lucene.apache.org>; Mon, 25 Sep 2006 19:55:52 +0000 (GMT)
Message-ID: <13370035.1159214152411.JavaMail.jira@brutus>
Date: Mon, 25 Sep 2006 12:55:52 -0700 (PDT)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-557) task tracker cannot find mapoutput
 files
In-Reply-To: <14791507.1159213910719.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-557?page=comments#action_12437661 ] 
            
Runping Qi commented on HADOOP-557:
-----------------------------------


I ran a large job on our cluster over the weekend. At some point, some map tasks were re-run successfully. However, when trying to handle the reducers requests to fetch mapoutput files of those map tasks, the http server complained file not found.  That caused the map tasks to be reported as having been lost, and failed.

This happened multiple times on different machines for the same map task until the job tracker aborted the job. 



> task tracker cannot find mapoutput files
> ----------------------------------------
>
>                 Key: HADOOP-557
>                 URL: http://issues.apache.org/jira/browse/HADOOP-557
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Runping Qi
>
> I ran a large job on our cluster over the weekend. At some point, some map tasks were re-run successfully. However, when trying to handle the reducers requests to fetch mapoutput files of those map tasks, the http server complained file not found.
> This happened multiple times on different machines for the same map task until the job tracker aborted the job.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 25 20:57:47 2006
Return-Path: 
 <hadoop-dev-return-3898-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52379 invoked from network); 25 Sep 2006 20:57:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Sep 2006 20:57:47 -0000
Received: (qmail 85866 invoked by uid 500); 25 Sep 2006 20:57:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 85655 invoked by uid 500); 25 Sep 2006 20:57:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 85646 invoked by uid 99); 25 Sep 2006 20:57:46 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Sep 2006 13:57:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:59629]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 43/81-13750-6C248154 for <hadoop-dev@lucene.apache.org>;
 Mon, 25 Sep 2006 13:57:43 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1D599714219
	for <hadoop-dev@lucene.apache.org>; Mon, 25 Sep 2006 20:53:51 +0000 (GMT)
Message-ID: <31070878.1159217631117.JavaMail.jira@brutus>
Date: Mon, 25 Sep 2006 13:53:51 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-547) ReduceTaskRunner can miss sending
 hearbeats if no map output copy finishes within "mapred.task.timeout"
In-Reply-To: <21058618.1158663442417.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-547?page=comments#action_12437669 ] 
            
Owen O'Malley commented on HADOOP-547:
--------------------------------------

This looks good, try it out and see if it helps.

> ReduceTaskRunner can miss sending hearbeats if no map output copy finishes within "mapred.task.timeout"
> -------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-547
>                 URL: http://issues.apache.org/jira/browse/HADOOP-547
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.6.2
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-547.patch, Hadoop-547_1.patch
>
>
> In ReduceTaskRunner, main loop sending heartbeats waits on copyResults, which releases only if a copy thread finishes copying. This can cause good reduce tasks which are copying data to fail, if no map task output was copied within "mapred.task.timeout". 
> ReduceTaskRunner.java:490
>         try {
>           copyResults.wait();                      <=========== Calls unconditional wait. 
>         } catch (InterruptedException e) { }
> wait() should be with a timeout, possibly taskTimeout/2 after which it should send a hearbeat and go back to wait. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 25 21:06:05 2006
Return-Path: 
 <hadoop-dev-return-3899-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 54228 invoked from network); 25 Sep 2006 21:06:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Sep 2006 21:06:05 -0000
Received: (qmail 93680 invoked by uid 500); 25 Sep 2006 21:05:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 93649 invoked by uid 500); 25 Sep 2006 21:05:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 93603 invoked by uid 99); 25 Sep 2006 21:05:57 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Sep 2006 14:05:57 -0700
Authentication-Results: idunn.apache.osuosl.org smtp.mail=ab@getopt.org;
 spf=permerror
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received-SPF: error (idunn.apache.osuosl.org: domain getopt.org from
 69.44.16.11 cause and error)
Received: from [69.44.16.11] ([69.44.16.11:45631] helo=getopt.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 0E/A1-13750-AA448154 for <hadoop-dev@lucene.apache.org>;
 Mon, 25 Sep 2006 14:05:50 -0700
Received: from [192.168.0.252] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id k8PL5o232341
	for <hadoop-dev@lucene.apache.org>; Mon, 25 Sep 2006 16:05:51 -0500
Message-ID: <451844AA.8040304@getopt.org>
Date: Mon, 25 Sep 2006 23:05:46 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Forcing all blocks to be present "locally"
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I'm investigating how to implement a map-reduce based searching in 
Nutch. Let me describe my current plan regarding this, and why I need to 
"localize" the data blocks.

A mapred search job would basically run map() in a never-ending loop, 
serving the queries. Each node would get its group of segments, to 
spread the document collection more or less evenly across mapred nodes. 
Nutch uses segments, which are a bunch of MapFile data, plus 
corresponding Lucene indexes. This data consists of relatively few, very 
large files.

Experiments show that using this data directly from DFS is way too slow, 
so currently it always needs to be copied from DFS to local disks. This 
is a very expensive step, which uses up valuable (and limited) local 
disk space, and currently it has to be performed manually (which is even 
more expensive and error-prone).

I'm curious if there is a way to avoid this copying when porting this 
code to run as a mapred job - a way to tell DFS to locate all blocks 
from such files and if necessary over-replicate them in such a way that 
for any given node requesting this sort of access for a specific file, 
all blocks from this file would always be found locally, until a 
"de-localize" request was made, upon which DFS would go back to the 
normal replication policy (and delete spurious blocks).

I was looking at the new filecache code, but it seems geared towards 
handling many small files (such as config files, job jars, etc), and it 
also seems to simply make full local copies of "cached" files.

Any suggestions are welcome ...

-- 
Best regards,
Andrzej Bialecki     <><
 ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com



From MAILER-DAEMON Mon Sep 25 21:17:21 2006
Return-Path: 
 <hadoop-dev-return-3900-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 58690 invoked from network); 25 Sep 2006 21:17:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Sep 2006 21:17:21 -0000
Received: (qmail 22497 invoked by uid 500); 25 Sep 2006 21:17:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 22479 invoked by uid 500); 25 Sep 2006 21:17:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22470 invoked by uid 99); 25 Sep 2006 21:17:19 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Sep 2006 14:17:19 -0700
Authentication-Results: idunn.apache.osuosl.org
 smtp.mail=bpendleton@gmail.com; spf=pass
Authentication-Results: idunn.apache.osuosl.org
 header.from=bpendleton@gmail.com; domainkeys=good
X-ASF-Spam-Status: No,
 hits=3.4 required=5.0 tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE
Received-SPF: pass (idunn.apache.osuosl.org: domain gmail.com designates
 66.249.82.232 as permitted sender)
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing
 draft-delany-domainkeys-base-01
Received: from [66.249.82.232] ([66.249.82.232:6445]
 helo=wx-out-0506.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id F0/F1-13750-A5748154 for <hadoop-dev@lucene.apache.org>;
 Mon, 25 Sep 2006 14:17:15 -0700
Received: by wx-out-0506.google.com with SMTP id s15so1841171wxc
        for <hadoop-dev@lucene.apache.org>;
 Mon, 25 Sep 2006 14:17:04 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=szvUI0l6AyxP6IQ7tVBYdCjjSSrlDHOWXUZE1gyeHYxcVj57Flbb6py4MPu13pEvl876NQ2dr8G/M+fZtsVivtEcOIUBV0mxd5sl/cn12xfvdMwyTMnVM8JW2ZjDm6uFESr/qXusIstH7T7POo1khUYqX4c//jVTnFuutfZlXV4=
Received: by 10.70.21.4 with SMTP id 4mr7883242wxu;
        Mon, 25 Sep 2006 14:17:03 -0700 (PDT)
Received: by 10.70.125.16 with HTTP; Mon, 25 Sep 2006 14:17:03 -0700 (PDT)
Message-ID: <1bf79d3e0609251417i7417b00dx56e1dc0283a2079e@mail.gmail.com>
Date: Mon, 25 Sep 2006 14:17:03 -0700
From: "Bryan A. P. Pendleton" <bp@geekdom.net>
Sender: bpendleton@gmail.com
To: hadoop-dev@lucene.apache.org
Subject: Re: Forcing all blocks to be present "locally"
In-Reply-To: <451844AA.8040304@getopt.org>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_Part_30128_12455596.1159219023133"
References: <451844AA.8040304@getopt.org>
X-Google-Sender-Auth: ef24f5421d0e0dfa
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_30128_12455596.1159219023133
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Would the "replication" parameter be sufficient for you? This will allow you
to push the system to make a copy of each block in a file on a higher set of
nodes, possibly equal to the number of nodes in your cluster. Of course,
this saves no space over local copying, but it does mean that you won't have
to do the copy manually, and local-access should be sped up.

Just use "hadoop dfs -setrep -R # /path/to/criticalfiles" where # = your
cluster size. This assumes you're running a DataNode on each node that you
want the copies made to (and, well, that the nodes doing lookups == the
nodes running datanodes, or else you'll end up with extra copies).

On 9/25/06, Andrzej Bialecki <ab@getopt.org> wrote:
>
> Hi,
>
> I'm investigating how to implement a map-reduce based searching in
> Nutch. Let me describe my current plan regarding this, and why I need to
> "localize" the data blocks.
>
> A mapred search job would basically run map() in a never-ending loop,
> serving the queries. Each node would get its group of segments, to
> spread the document collection more or less evenly across mapred nodes.
> Nutch uses segments, which are a bunch of MapFile data, plus
> corresponding Lucene indexes. This data consists of relatively few, very
> large files.
>
> Experiments show that using this data directly from DFS is way too slow,
> so currently it always needs to be copied from DFS to local disks. This
> is a very expensive step, which uses up valuable (and limited) local
> disk space, and currently it has to be performed manually (which is even
> more expensive and error-prone).
>
> I'm curious if there is a way to avoid this copying when porting this
> code to run as a mapred job - a way to tell DFS to locate all blocks
> from such files and if necessary over-replicate them in such a way that
> for any given node requesting this sort of access for a specific file,
> all blocks from this file would always be found locally, until a
> "de-localize" request was made, upon which DFS would go back to the
> normal replication policy (and delete spurious blocks).
>
> I was looking at the new filecache code, but it seems geared towards
> handling many small files (such as config files, job jars, etc), and it
> also seems to simply make full local copies of "cached" files.
>
> Any suggestions are welcome ...
>
> --
> Best regards,
> Andrzej Bialecki     <><
> ___. ___ ___ ___ _ _   __________________________________
> [__ || __|__/|__||\/|  Information Retrieval, Semantic Web
> ___|||__||  \|  ||  |  Embedded Unix, System Integration
> http://www.sigram.com  Contact: info at sigram dot com
>
>
>


-- 
Bryan A. P. Pendleton
Ph: (877) geek-1-bp

------=_Part_30128_12455596.1159219023133--

From MAILER-DAEMON Mon Sep 25 21:33:36 2006
Return-Path: 
 <hadoop-dev-return-3901-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 62775 invoked from network); 25 Sep 2006 21:33:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Sep 2006 21:33:36 -0000
Received: (qmail 44468 invoked by uid 500); 25 Sep 2006 21:33:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 44447 invoked by uid 500); 25 Sep 2006 21:33:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 44438 invoked by uid 99); 25 Sep 2006 21:33:35 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Sep 2006 14:33:35 -0700
Authentication-Results: idunn.apache.osuosl.org smtp.mail=ab@getopt.org;
 spf=permerror
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received-SPF: error (idunn.apache.osuosl.org: domain getopt.org from
 69.44.16.11 cause and error)
Received: from [69.44.16.11] ([69.44.16.11:45846] helo=getopt.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 33/42-13750-21B48154 for <hadoop-dev@lucene.apache.org>;
 Mon, 25 Sep 2006 14:33:07 -0700
Received: from [192.168.0.252] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id k8PLWf120506
	for <hadoop-dev@lucene.apache.org>; Mon, 25 Sep 2006 16:32:42 -0500
Message-ID: <45184AF4.6070002@getopt.org>
Date: Mon, 25 Sep 2006 23:32:36 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: Forcing all blocks to be present "locally"
References: <451844AA.8040304@getopt.org>
 <1bf79d3e0609251417i7417b00dx56e1dc0283a2079e@mail.gmail.com>
In-Reply-To: <1bf79d3e0609251417i7417b00dx56e1dc0283a2079e@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Bryan A. P. Pendleton wrote:
> Would the "replication" parameter be sufficient for you? This will 
> allow you
> to push the system to make a copy of each block in a file on a higher 
> set of
> nodes, possibly equal to the number of nodes in your cluster. Of course,
> this saves no space over local copying, but it does mean that you 
> won't have
> to do the copy manually, and local-access should be sped up.
>
> Just use "hadoop dfs -setrep -R # /path/to/criticalfiles" where # = your
> cluster size. This assumes you're running a DataNode on each node that 
> you
> want the copies made to (and, well, that the nodes doing lookups == the
> nodes running datanodes, or else you'll end up with extra copies).

No, I don't think this would help ... I don't want to replicate each 
segment to all nodes, I can't afford it - this would quickly exhaust the 
total capacity of the cluster. If I set the replication factor lower 
than the size of the cluster, then again I have no guarantee that whole 
files are present locally.

Let's say I have 3 segments, and I want to run 3 map tasks, each with 
its own segment data. The idea is that I want to make sure that task1 
executing on node1 will have all blocks from segment1 on the local disk 
of node1; and the same for task2, task3 and so on.

-- 
Best regards,
Andrzej Bialecki     <><
 ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com



From MAILER-DAEMON Mon Sep 25 22:27:39 2006
Return-Path: 
 <hadoop-dev-return-3902-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78546 invoked from network); 25 Sep 2006 22:27:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Sep 2006 22:27:39 -0000
Received: (qmail 13527 invoked by uid 500); 25 Sep 2006 22:27:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13484 invoked by uid 500); 25 Sep 2006 22:27:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13475 invoked by uid 99); 25 Sep 2006 22:27:38 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Sep 2006 15:27:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:45127]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 64/60-03091-8D758154 for <hadoop-dev@lucene.apache.org>;
 Mon, 25 Sep 2006 15:27:36 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2490B71428E
	for <hadoop-dev@lucene.apache.org>; Mon, 25 Sep 2006 22:23:50 +0000 (GMT)
Message-ID: <5591974.1159223030146.JavaMail.jira@brutus>
Date: Mon, 25 Sep 2006 15:23:50 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-558) Adding versioning to Writable classes
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Adding versioning to Writable classes
-------------------------------------

                 Key: HADOOP-558
                 URL: http://issues.apache.org/jira/browse/HADOOP-558
             Project: Hadoop
          Issue Type: Improvement
          Components: io
    Affects Versions: 0.6.2
            Reporter: Owen O'Malley
         Assigned To: Owen O'Malley


We currently don't have a way to support versioned Writables, which among other problems means that it is very difficult to change the serialization of any types. (A recent example is that we can't change any of the Writables that currently use UTF8.writeString to use Text.writeString with out breaking everything.) Just changing the file version doesn't work because you can't read the old versions.

Therefore, I propose adding a new interface:

public interface VersionMapWritable extends Writable {
  /**
   * Destructively read into this object from in based on the version map.
   * @param versionMap a map from each class to its version in the DataInput (version 0 classes are omitted)
   */
  public void readFields(DataInput in, Map<Class<VersionMapWritable>, int> versionMap) throws IOException;

  /**
   * Classes with non-zero versions should register themselves in static blocks.
   */
  public static void registerCurrentVersion(Class<VersionMapWritable> class, int version) {...}

  /**
   * If a version map includes the parent type, always include the child type as well.
   */
  public static void addDependence(Class<VersionMapWritable> parent, Class<VersionMapWritable> child) { ... }

  /**
   * Build a version map for a given list of classes, including any dependent types.
   */
  public static Map<Class<VersionMapWritable>, int> 
              buildVersionMap(Set<Class<VersionMapWritable>> classes) {...}

  /**
   * Add the types in the parameter/result types to the list of classes.
   * Recursively adds the field types for any new types that are added to the set.
   */
  public static void addMethodTypes(Set<Class<VersionMapWritable>> result, 
                     Class<VersionedProtocol> protocol) {...}

  /**
   * Add the non-transient fields to the list of classes.
   */
  public static void addFieldTypes(Set<Class<VersionMapWritable>> result, Class<Writable> writable) {...}

  public static Map<Class<VersionMapWritable>, int> readVersionMap(DataInput in) throws IOException { ... }

  public static void writeVersionMap(DataOutput out, 
                  Map<Class<VersionMapWritable> versionMap) throws IOException {...}
}

VersionedWritable, which stored a version byte within each object, will be depriciated.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 25 22:30:41 2006
Return-Path: 
 <hadoop-dev-return-3903-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78868 invoked from network); 25 Sep 2006 22:30:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Sep 2006 22:30:41 -0000
Received: (qmail 14946 invoked by uid 500); 25 Sep 2006 22:30:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14742 invoked by uid 500); 25 Sep 2006 22:30:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 14733 invoked by uid 99); 25 Sep 2006 22:30:40 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Sep 2006 15:30:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:59537]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id E3/70-03091-E8858154 for <hadoop-dev@lucene.apache.org>;
 Mon, 25 Sep 2006 15:30:38 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CC98671428E
	for <hadoop-dev@lucene.apache.org>; Mon, 25 Sep 2006 22:26:51 +0000 (GMT)
Message-ID: <17686573.1159223211835.JavaMail.jira@brutus>
Date: Mon, 25 Sep 2006 15:26:51 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-263) task status should include timestamps
 for when a job transitions
In-Reply-To: <6879018.1149102869840.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-263?page=all ]

Doug Cutting updated HADOOP-263:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.7.0
       Resolution: Fixed

I just committed this.  Thanks, Sanjay!

> task status should include timestamps for when a job transitions
> ----------------------------------------------------------------
>
>                 Key: HADOOP-263
>                 URL: http://issues.apache.org/jira/browse/HADOOP-263
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.2.1
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.7.0
>
>         Attachments: Hadoop-263.patch, Hadoop-263_1.patch, Hadoop-263_2.patch, Hadoop-263_3.patch, Hadoop-263_4.patch, Hadoop-263_5.patch, patch.txt, patch.txt, patch.txt, patch.txt
>
>
> It would help users to understand what happened if the task status included information about when the task transitioned:
> Map:
>    started
>    finished
> Reduce:
>    started
>    shuffle finished
>    sort finished
>    finished

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 25 22:40:38 2006
Return-Path: 
 <hadoop-dev-return-3904-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 79944 invoked from network); 25 Sep 2006 22:40:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Sep 2006 22:40:38 -0000
Received: (qmail 23316 invoked by uid 500); 25 Sep 2006 22:40:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23111 invoked by uid 500); 25 Sep 2006 22:40:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23102 invoked by uid 99); 25 Sep 2006 22:40:38 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Sep 2006 15:40:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:35190]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 77/00-03290-5EA58154 for <hadoop-dev@lucene.apache.org>;
 Mon, 25 Sep 2006 15:40:37 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3737971428E
	for <hadoop-dev@lucene.apache.org>; Mon, 25 Sep 2006 22:36:51 +0000 (GMT)
Message-ID: <11527738.1159223811223.JavaMail.jira@brutus>
Date: Mon, 25 Sep 2006 15:36:51 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-558) Adding versioning to Writable
 classes
In-Reply-To: <5591974.1159223030146.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-558?page=comments#action_12437681 ] 
            
Doug Cutting commented on HADOOP-558:
-------------------------------------

Part of this, I assume, will include:

1.In SequenceFile, adding to the header the version map for key and value classes (& all classes referenced by their non-transient fields), and passing this map to keys and values as they're read.

2. In RPC, Transmitting the version map for all parameter & return classes (& those refernced by their fields) from the client to the server as a handshake on connect.



> Adding versioning to Writable classes
> -------------------------------------
>
>                 Key: HADOOP-558
>                 URL: http://issues.apache.org/jira/browse/HADOOP-558
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.6.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>
> We currently don't have a way to support versioned Writables, which among other problems means that it is very difficult to change the serialization of any types. (A recent example is that we can't change any of the Writables that currently use UTF8.writeString to use Text.writeString with out breaking everything.) Just changing the file version doesn't work because you can't read the old versions.
> Therefore, I propose adding a new interface:
> public interface VersionMapWritable extends Writable {
>   /**
>    * Destructively read into this object from in based on the version map.
>    * @param versionMap a map from each class to its version in the DataInput (version 0 classes are omitted)
>    */
>   public void readFields(DataInput in, Map<Class<VersionMapWritable>, int> versionMap) throws IOException;
>   /**
>    * Classes with non-zero versions should register themselves in static blocks.
>    */
>   public static void registerCurrentVersion(Class<VersionMapWritable> class, int version) {...}
>   /**
>    * If a version map includes the parent type, always include the child type as well.
>    */
>   public static void addDependence(Class<VersionMapWritable> parent, Class<VersionMapWritable> child) { ... }
>   /**
>    * Build a version map for a given list of classes, including any dependent types.
>    */
>   public static Map<Class<VersionMapWritable>, int> 
>               buildVersionMap(Set<Class<VersionMapWritable>> classes) {...}
>   /**
>    * Add the types in the parameter/result types to the list of classes.
>    * Recursively adds the field types for any new types that are added to the set.
>    */
>   public static void addMethodTypes(Set<Class<VersionMapWritable>> result, 
>                      Class<VersionedProtocol> protocol) {...}
>   /**
>    * Add the non-transient fields to the list of classes.
>    */
>   public static void addFieldTypes(Set<Class<VersionMapWritable>> result, Class<Writable> writable) {...}
>   public static Map<Class<VersionMapWritable>, int> readVersionMap(DataInput in) throws IOException { ... }
>   public static void writeVersionMap(DataOutput out, 
>                   Map<Class<VersionMapWritable> versionMap) throws IOException {...}
> }
> VersionedWritable, which stored a version byte within each object, will be depriciated.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 25 22:46:40 2006
Return-Path: 
 <hadoop-dev-return-3905-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 80686 invoked from network); 25 Sep 2006 22:46:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Sep 2006 22:46:40 -0000
Received: (qmail 30833 invoked by uid 500); 25 Sep 2006 22:46:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 30813 invoked by uid 500); 25 Sep 2006 22:46:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 30804 invoked by uid 99); 25 Sep 2006 22:46:40 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Sep 2006 15:46:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:47338]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 44/20-03290-D4C58154 for <hadoop-dev@lucene.apache.org>;
 Mon, 25 Sep 2006 15:46:38 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 597C971428E
	for <hadoop-dev@lucene.apache.org>; Mon, 25 Sep 2006 22:42:51 +0000 (GMT)
Message-ID: <8867770.1159224171363.JavaMail.jira@brutus>
Date: Mon, 25 Sep 2006 15:42:51 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-555) Tasks should inherit some of the
 server's environment
In-Reply-To: <4456046.1158966382364.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-555?page=comments#action_12437685 ] 
            
Doug Cutting commented on HADOOP-555:
-------------------------------------

I'm confused.  Don't child processes inherit their parent's environment?  They should.

You should be able to set LD_LIBRARY_PATH, PATH, etc. in conf/hadoo-env.sh and these should be seen by the child.  If that doesn't work, I think it's a bug that should be fixed.  If it does work, is it sufficient?

> Tasks should inherit some of the server's environment
> -----------------------------------------------------
>
>                 Key: HADOOP-555
>                 URL: http://issues.apache.org/jira/browse/HADOOP-555
>             Project: Hadoop
>          Issue Type: Improvement
>            Reporter: Owen O'Malley
>
> When the task trackers start up the Task process, they clear the environment variables. It would be better if there was a SERVER config that listed the names of the environment variables that would be copied from the server's enviroment.
> So the task tracker's config would have:
> <property><name>mapred.task.environment</name>
> <value>PATH,LD_LIBRARY_PATH</value></property>

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 25 22:51:38 2006
Return-Path: 
 <hadoop-dev-return-3906-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 81381 invoked from network); 25 Sep 2006 22:51:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Sep 2006 22:51:38 -0000
Received: (qmail 36258 invoked by uid 500); 25 Sep 2006 22:51:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 36060 invoked by uid 500); 25 Sep 2006 22:51:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 36051 invoked by uid 99); 25 Sep 2006 22:51:38 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Sep 2006 15:51:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:59700]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 8A/30-03290-97D58154 for <hadoop-dev@lucene.apache.org>;
 Mon, 25 Sep 2006 15:51:37 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4571671423B
	for <hadoop-dev@lucene.apache.org>; Mon, 25 Sep 2006 22:47:51 +0000 (GMT)
Message-ID: <14265505.1159224471281.JavaMail.jira@brutus>
Date: Mon, 25 Sep 2006 15:47:51 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-556) Streaming should send keep-alive
 signals to Reporter every 10 seconds, not every 100 records
In-Reply-To: <17510066.1158971242365.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-556?page=all ]

Doug Cutting updated HADOOP-556:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.7.0
       Resolution: Fixed

I just committed this.  Thanks, Michel!

> Streaming should send keep-alive signals to Reporter every 10 seconds, not every 100 records
> --------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-556
>                 URL: http://issues.apache.org/jira/browse/HADOOP-556
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: contrib/streaming
>            Reporter: Michel Tourn
>             Fix For: 0.7.0
>
>         Attachments: hadoop-timedreporter.patch
>
>
> Streaming should send keep-alive signals to Reporter every 10 seconds, not every 100 records.
> A first version of this was already implemented but was not satisfactory.
> Now we check whether 10sec have passed:
> -after reading a *line* of Application's stderr 
>  (so please use as your stderr heartbeat: cerr << ".\n", not cerr << "."  )
> -and after outputting a record in mapper / combiner / reducer.
> If 10 sec have passed then we set Reporter status.
> Effects:
> -the reporter status changes more often and provides useful feedback in the Web UI or in another client.
> -a Task will not time out after 10 minutes just because it outputs records slowly. 
> No artificial heartbeat is introduced in this proposal.
> The streaming Application still has to show activity (either on stdout or on stderr)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 25 22:53:41 2006
Return-Path: 
 <hadoop-dev-return-3907-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 81575 invoked from network); 25 Sep 2006 22:53:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Sep 2006 22:53:41 -0000
Received: (qmail 36806 invoked by uid 500); 25 Sep 2006 22:53:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 36781 invoked by uid 500); 25 Sep 2006 22:53:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 36772 invoked by uid 99); 25 Sep 2006 22:53:40 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Sep 2006 15:53:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:59707]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id B3/40-03290-1FD58154 for <hadoop-dev@lucene.apache.org>;
 Mon, 25 Sep 2006 15:53:38 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1DF0671423B
	for <hadoop-dev@lucene.apache.org>; Mon, 25 Sep 2006 22:49:51 +0000 (GMT)
Message-ID: <33426981.1159224591120.JavaMail.jira@brutus>
Date: Mon, 25 Sep 2006 15:49:51 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-538?page=comments#action_12437687 ] 
            
Doug Cutting commented on HADOOP-538:
-------------------------------------

+1  This looks like a good direction to me.

> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.7.0
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 25 22:58:47 2006
Return-Path: 
 <hadoop-dev-return-3908-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84321 invoked from network); 25 Sep 2006 22:58:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Sep 2006 22:58:47 -0000
Received: (qmail 53658 invoked by uid 500); 25 Sep 2006 22:58:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53632 invoked by uid 500); 25 Sep 2006 22:58:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53576 invoked by uid 99); 25 Sep 2006 22:58:40 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Sep 2006 15:58:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:49662]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 82/70-03290-D1F58154 for <hadoop-dev@lucene.apache.org>;
 Mon, 25 Sep 2006 15:58:37 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 430397142C7
	for <hadoop-dev@lucene.apache.org>; Mon, 25 Sep 2006 22:54:51 +0000 (GMT)
Message-ID: <9006329.1159224891271.JavaMail.jira@brutus>
Date: Mon, 25 Sep 2006 15:54:51 -0700 (PDT)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-559) Support file patterns in dfs commands
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Support file patterns in dfs commands
-------------------------------------

                 Key: HADOOP-559
                 URL: http://issues.apache.org/jira/browse/HADOOP-559
             Project: Hadoop
          Issue Type: New Feature
          Components: dfs
    Affects Versions: 0.6.2
            Reporter: Hairong Kuang
         Assigned To: Hairong Kuang
             Fix For: 0.7.0


Currently DFSShell does not support file patterns in dfs file names. It's quite inconvenient for users when they need to manipulate multiple files.

This issue is intended to extend DFSShell to interprete file patterns. A file pattern contains special special pattern matching characters:

?: matches any character
*: matches zero or more characters
[abc]: matches a character from character set {a, b, c}
[a-c]: matches a character from character range: {a...c}
[^a]: matches a character not in character set or range {a}
\c:  escape any special meaning of character c
 



-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 25 23:08:39 2006
Return-Path: 
 <hadoop-dev-return-3909-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86327 invoked from network); 25 Sep 2006 23:08:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Sep 2006 23:08:39 -0000
Received: (qmail 68297 invoked by uid 500); 25 Sep 2006 23:08:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68275 invoked by uid 500); 25 Sep 2006 23:08:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68266 invoked by uid 99); 25 Sep 2006 23:08:39 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Sep 2006 16:08:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:36281]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id D8/A0-03290-57168154 for <hadoop-dev@lucene.apache.org>;
 Mon, 25 Sep 2006 16:08:37 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2DF4971423B
	for <hadoop-dev@lucene.apache.org>; Mon, 25 Sep 2006 23:04:51 +0000 (GMT)
Message-ID: <30479469.1159225491185.JavaMail.jira@brutus>
Date: Mon, 25 Sep 2006 16:04:51 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-547) ReduceTaskRunner can miss sending
 hearbeats if no map output copy finishes within "mapred.task.timeout"
In-Reply-To: <21058618.1158663442417.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-547?page=all ]

Doug Cutting updated HADOOP-547:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.7.0
       Resolution: Fixed

I just committed this.  Thanks, Sanjay!

> ReduceTaskRunner can miss sending hearbeats if no map output copy finishes within "mapred.task.timeout"
> -------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-547
>                 URL: http://issues.apache.org/jira/browse/HADOOP-547
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.6.2
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.7.0
>
>         Attachments: Hadoop-547.patch, Hadoop-547_1.patch
>
>
> In ReduceTaskRunner, main loop sending heartbeats waits on copyResults, which releases only if a copy thread finishes copying. This can cause good reduce tasks which are copying data to fail, if no map task output was copied within "mapred.task.timeout". 
> ReduceTaskRunner.java:490
>         try {
>           copyResults.wait();                      <=========== Calls unconditional wait. 
>         } catch (InterruptedException e) { }
> wait() should be with a timeout, possibly taskTimeout/2 after which it should send a hearbeat and go back to wait. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 25 23:14:40 2006
Return-Path: 
 <hadoop-dev-return-3910-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86828 invoked from network); 25 Sep 2006 23:14:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Sep 2006 23:14:40 -0000
Received: (qmail 70680 invoked by uid 500); 25 Sep 2006 23:14:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70655 invoked by uid 500); 25 Sep 2006 23:14:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 70646 invoked by uid 99); 25 Sep 2006 23:14:39 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Sep 2006 16:14:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:36149]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 22/10-03501-ED268154 for <hadoop-dev@lucene.apache.org>;
 Mon, 25 Sep 2006 16:14:38 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C8FC871423B
	for <hadoop-dev@lucene.apache.org>; Mon, 25 Sep 2006 23:10:51 +0000 (GMT)
Message-ID: <12638696.1159225851820.JavaMail.jira@brutus>
Date: Mon, 25 Sep 2006 16:10:51 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-537) clean-libhdfs target of build.xml
 does not work on windows
In-Reply-To: <4253884.1158281003558.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-537?page=all ]

Doug Cutting resolved HADOOP-537.
---------------------------------

    Fix Version/s: 0.7.0
       Resolution: Fixed

I just committed this.  Thanks, Arun!

> clean-libhdfs target of build.xml does not work on windows
> ----------------------------------------------------------
>
>                 Key: HADOOP-537
>                 URL: http://issues.apache.org/jira/browse/HADOOP-537
>             Project: Hadoop
>          Issue Type: Bug
>          Components: libhdfs
>    Affects Versions: 0.6.0
>         Environment: Windows
>            Reporter: Konstantin Shvachko
>         Assigned To: Arun C Murthy
>             Fix For: 0.7.0
>
>         Attachments: HADOOP-537.patch
>
>
> It produces the following:
> BUILD FAILED
> Hadoop\build.xml:496: Execute failed: java.io.IOException: CreateProcess: make clean error=2
> Besides, I would propose to have clean-* target for every compile-* target in build.xml.
> Some people probably don't build libhdfs or contrib, so why should they clean it.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 25 23:26:45 2006
Return-Path: 
 <hadoop-dev-return-3911-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 88340 invoked from network); 25 Sep 2006 23:26:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Sep 2006 23:26:45 -0000
Received: (qmail 75978 invoked by uid 500); 25 Sep 2006 23:26:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75885 invoked by uid 500); 25 Sep 2006 23:26:44 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75876 invoked by uid 99); 25 Sep 2006 23:26:44 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Sep 2006 16:26:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:43389]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 11/10-03561-3B568154 for <hadoop-dev@lucene.apache.org>;
 Mon, 25 Sep 2006 16:26:43 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 674547142C7
	for <hadoop-dev@lucene.apache.org>; Mon, 25 Sep 2006 23:22:52 +0000 (GMT)
Message-ID: <32769803.1159226572420.JavaMail.jira@brutus>
Date: Mon, 25 Sep 2006 16:22:52 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-487) misspelt DFS host name gives null
 pointer exception in getProtocolVersion
In-Reply-To: <12991310.1156797082382.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-487?page=all ]

Doug Cutting updated HADOOP-487:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

You forgot to mention that you also changed the name of the thread.  The thread name was, long ago, logged with each line, and was crafted to not be overly long.  So this is probably a good change too, but ideally should have been mentioned.

I just committed this.  Thanks, Sameer!


> misspelt DFS host name gives null pointer exception in getProtocolVersion
> -------------------------------------------------------------------------
>
>                 Key: HADOOP-487
>                 URL: http://issues.apache.org/jira/browse/HADOOP-487
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.6.2
>            Reporter: Dick King
>         Assigned To: Sameer Paranjpye
>             Fix For: 0.7.0
>
>         Attachments: unknown-host.txt
>
>
> I'm trying to construct a DistributedFileSystem but I have the wrong hostname.
> It doesn't work.  It throws an exception.  Fair enough.  
> However, it throws a null pointer exception inside $Proxy0.getProtocolVersion, the code that checks whether we have the right protocol version, rather than giving us any exception we could understand or taking an exception in code to which we have sources so we have a way of understanding the problem.
> -dk

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 25 23:31:41 2006
Return-Path: 
 <hadoop-dev-return-3913-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 89056 invoked from network); 25 Sep 2006 23:31:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Sep 2006 23:31:41 -0000
Received: (qmail 78657 invoked by uid 500); 25 Sep 2006 23:31:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 78450 invoked by uid 500); 25 Sep 2006 23:31:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 78441 invoked by uid 99); 25 Sep 2006 23:31:40 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Sep 2006 16:31:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:54978]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id B3/20-03561-9D668154 for <hadoop-dev@lucene.apache.org>;
 Mon, 25 Sep 2006 16:31:38 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 318EA71428E
	for <hadoop-dev@lucene.apache.org>; Mon, 25 Sep 2006 23:27:51 +0000 (GMT)
Message-ID: <5039635.1159226871200.JavaMail.jira@brutus>
Date: Mon, 25 Sep 2006 16:27:51 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-555) Tasks should inherit some of the
 server's environment
In-Reply-To: <4456046.1158966382364.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-555?page=comments#action_12437695 ] 
            
Owen O'Malley commented on HADOOP-555:
--------------------------------------

TaskRunner is currently explicitly clearing the environment for the child. I assumed it was a requirement. *smile* I'm ok with passing the entire down to the child if that is ok with everyone. It certainly makes this bug very easy to fix.

> Tasks should inherit some of the server's environment
> -----------------------------------------------------
>
>                 Key: HADOOP-555
>                 URL: http://issues.apache.org/jira/browse/HADOOP-555
>             Project: Hadoop
>          Issue Type: Improvement
>            Reporter: Owen O'Malley
>
> When the task trackers start up the Task process, they clear the environment variables. It would be better if there was a SERVER config that listed the names of the environment variables that would be copied from the server's enviroment.
> So the task tracker's config would have:
> <property><name>mapred.task.environment</name>
> <value>PATH,LD_LIBRARY_PATH</value></property>

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 25 23:31:40 2006
Return-Path: 
 <hadoop-dev-return-3912-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 89022 invoked from network); 25 Sep 2006 23:31:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Sep 2006 23:31:40 -0000
Received: (qmail 78260 invoked by uid 500); 25 Sep 2006 23:31:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 78224 invoked by uid 500); 25 Sep 2006 23:31:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 78215 invoked by uid 99); 25 Sep 2006 23:31:39 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Sep 2006 16:31:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:54981]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id C3/20-03561-BD668154 for <hadoop-dev@lucene.apache.org>;
 Mon, 25 Sep 2006 16:31:39 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E4E577142CF
	for <hadoop-dev@lucene.apache.org>; Mon, 25 Sep 2006 23:27:52 +0000 (GMT)
Message-ID: <6431013.1159226872935.JavaMail.jira@brutus>
Date: Mon, 25 Sep 2006 16:27:52 -0700 (PDT)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-423) file paths are not normalized
In-Reply-To: <13847288.1154636773936.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-423?page=comments#action_12437696 ] 
            
Wendy Chien commented on HADOOP-423:
------------------------------------

I can add a check to disallow "." and ".." (and prohibit ":") as file or directory names.  Should this be done in DFSClient or the namenode?  We can save an rpc by putting it in the client.

> file paths are not normalized
> -----------------------------
>
>                 Key: HADOOP-423
>                 URL: http://issues.apache.org/jira/browse/HADOOP-423
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Christian Kunz
>         Assigned To: Wendy Chien
>         Attachments: pathnorm.patch
>
>
> Paths containing  '.' or '..' are not normalized -- the corresponding directories actually seem to be created. This is inconsistent and unexpected behavior, and  is particularly painful when running from a working directory, using relative paths that start with ...

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 25 23:34:54 2006
Return-Path: 
 <hadoop-dev-return-3914-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 89379 invoked from network); 25 Sep 2006 23:34:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Sep 2006 23:34:54 -0000
Received: (qmail 79684 invoked by uid 500); 25 Sep 2006 23:34:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 79659 invoked by uid 500); 25 Sep 2006 23:34:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 79649 invoked by uid 99); 25 Sep 2006 23:34:53 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Sep 2006 16:34:53 -0700
Authentication-Results: idunn.apache.osuosl.org
 header.from=eric14@yahoo-inc.com; domainkeys=good
Authentication-Results: idunn.apache.osuosl.org
 smtp.mail=eric14@yahoo-inc.com; spf=permerror
X-ASF-Spam-Status: No,
 hits=-13.6 required=5.0 tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,USER_IN_DEF_WHITELIST
Received-SPF: error (idunn.apache.osuosl.org: domain yahoo-inc.com from
 207.126.228.150 cause and error)
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing
 draft-delany-domainkeys-base-01
Received: from [207.126.228.150] ([207.126.228.150:32546]
 helo=rsmtp2.corp.yahoo.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 00/30-03561-B9768154 for <hadoop-dev@lucene.apache.org>;
 Mon, 25 Sep 2006 16:34:51 -0700
Received: from [207.126.231.236] (eric14-mac.corp.yahoo.com [207.126.231.236])
	(authenticated bits=0)
	by rsmtp2.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k8PNYdpa038320
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Mon, 25 Sep 2006 16:34:39 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=X6GPe26nh8kxjXLzC3cRAQhRwfQrheKeGnuHohaLc4aDPk1K/jRg4a6ts/Ucb4oM
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <45184AF4.6070002@getopt.org>
References: <451844AA.8040304@getopt.org>
 <1bf79d3e0609251417i7417b00dx56e1dc0283a2079e@mail.gmail.com>
 <45184AF4.6070002@getopt.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <84265231-CDC0-4B60-9F24-F6394F59F421@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Eric Baldeschwieler <eric14@yahoo-inc.com>
Subject: Re: Forcing all blocks to be present "locally"
Date: Mon, 25 Sep 2006 16:34:56 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You might try setting the block size for these files to be "very  
large".   This should guaranty that the entire file ends up on one node.

If an index is composed of many files, you could "tar" them together  
so each index is exactly one file.

Might work...  Of course as indexes get really large, this approach  
might have side effects.


On Sep 25, 2006, at 2:32 PM, Andrzej Bialecki wrote:

> Bryan A. P. Pendleton wrote:
>> Would the "replication" parameter be sufficient for you? This will  
>> allow you
>> to push the system to make a copy of each block in a file on a  
>> higher set of
>> nodes, possibly equal to the number of nodes in your cluster. Of  
>> course,
>> this saves no space over local copying, but it does mean that you  
>> won't have
>> to do the copy manually, and local-access should be sped up.
>>
>> Just use "hadoop dfs -setrep -R # /path/to/criticalfiles" where #  
>> = your
>> cluster size. This assumes you're running a DataNode on each node  
>> that you
>> want the copies made to (and, well, that the nodes doing lookups  
>> == the
>> nodes running datanodes, or else you'll end up with extra copies).
>
> No, I don't think this would help ... I don't want to replicate  
> each segment to all nodes, I can't afford it - this would quickly  
> exhaust the total capacity of the cluster. If I set the replication  
> factor lower than the size of the cluster, then again I have no  
> guarantee that whole files are present locally.
>
> Let's say I have 3 segments, and I want to run 3 map tasks, each  
> with its own segment data. The idea is that I want to make sure  
> that task1 executing on node1 will have all blocks from segment1 on  
> the local disk of node1; and the same for task2, task3 and so on.
>
> -- 
> Best regards,
> Andrzej Bialecki     <><
> ___. ___ ___ ___ _ _   __________________________________
> [__ || __|__/|__||\/|  Information Retrieval, Semantic Web
> ___|||__||  \|  ||  |  Embedded Unix, System Integration
> http://www.sigram.com  Contact: info at sigram dot com
>
>


From MAILER-DAEMON Mon Sep 25 23:51:40 2006
Return-Path: 
 <hadoop-dev-return-3916-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91466 invoked from network); 25 Sep 2006 23:51:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Sep 2006 23:51:40 -0000
Received: (qmail 95887 invoked by uid 500); 25 Sep 2006 23:51:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95855 invoked by uid 500); 25 Sep 2006 23:51:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95846 invoked by uid 99); 25 Sep 2006 23:51:40 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Sep 2006 16:51:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:53911]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 3C/70-03561-A8B68154 for <hadoop-dev@lucene.apache.org>;
 Mon, 25 Sep 2006 16:51:38 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B3BC871423B
	for <hadoop-dev@lucene.apache.org>; Mon, 25 Sep 2006 23:47:51 +0000 (GMT)
Message-ID: <21549384.1159228071733.JavaMail.jira@brutus>
Date: Mon, 25 Sep 2006 16:47:51 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-423) file paths are not normalized
In-Reply-To: <13847288.1154636773936.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-423?page=comments#action_12437698 ] 
            
Doug Cutting commented on HADOOP-423:
-------------------------------------

I think we want it as a sanity check in the namenode, so that we're sure they never enter the filesystem.  I don't think it's worth trying to optimize this.

> file paths are not normalized
> -----------------------------
>
>                 Key: HADOOP-423
>                 URL: http://issues.apache.org/jira/browse/HADOOP-423
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Christian Kunz
>         Assigned To: Wendy Chien
>         Attachments: pathnorm.patch
>
>
> Paths containing  '.' or '..' are not normalized -- the corresponding directories actually seem to be created. This is inconsistent and unexpected behavior, and  is particularly painful when running from a working directory, using relative paths that start with ...

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Sep 25 23:50:14 2006
Return-Path: 
 <hadoop-dev-return-3915-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91366 invoked from network); 25 Sep 2006 23:50:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Sep 2006 23:50:14 -0000
Received: (qmail 95564 invoked by uid 500); 25 Sep 2006 23:50:14 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95364 invoked by uid 500); 25 Sep 2006 23:50:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95355 invoked by uid 99); 25 Sep 2006 23:50:13 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Sep 2006 16:50:13 -0700
Authentication-Results: idunn.apache.osuosl.org smtp.mail=amcnabb@mcnabbs.org;
 spf=permerror
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received-SPF: error (idunn.apache.osuosl.org: domain mcnabbs.org from
 64.62.190.91 cause and error)
Received: from [64.62.190.91] ([64.62.190.91:2823] helo=mcnabbs.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 96/70-03561-33B68154 for <hadoop-dev@lucene.apache.org>;
 Mon, 25 Sep 2006 16:50:13 -0700
Received: from mcbain.mcnabbs.org (c-24-10-162-63.hsd1.ut.comcast.net
 [24.10.162.63])
	by mcnabbs.org (Postfix) with ESMTP id 11BF437792
	for <hadoop-dev@lucene.apache.org>; Mon, 25 Sep 2006 19:50:05 -0400 (EDT)
Received: by mcbain.mcnabbs.org (Postfix, from userid 1001)
	id 796DFE7966; Mon, 25 Sep 2006 17:50:03 -0600 (MDT)
Date: Mon, 25 Sep 2006 17:50:03 -0600
To: hadoop-dev@lucene.apache.org
Subject: Hadoop Network Protocols
Message-ID: <20060925235003.GB18862@mcnabbs.org>
MIME-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="KFztAG8eRSV9hGtP"
Content-Disposition: inline
User-Agent: Mutt/1.5.13 (2006-08-11)
From: amcnabb@mcnabbs.org (Andrew McNabb)
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--KFztAG8eRSV9hGtP
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

I was just curious whether Hadoop's network protocols are documented
anywhere.  I think someone mentioned today that Hadoop was designed so
that implementations could be written in other languages.  I was
wondering how hard that would be and what the protocols are like.

Just curious.

--=20
Andrew McNabb
http://www.mcnabbs.org/andrew/
PGP Fingerprint: 8A17 B57C 6879 1863 DE55  8012 AB4D 6098 8826 6868

--KFztAG8eRSV9hGtP
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: Digital signature
Content-Disposition: inline

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.5 (GNU/Linux)

iD8DBQFFGGsrq01gmIgmaGgRAr5ZAJ9rUjYonvM7DTToqa2tiptTyl0ICwCfaDMk
sojUhu8Hzpmw7oTQ4pih07g=
=/UB9
-----END PGP SIGNATURE-----

--KFztAG8eRSV9hGtP--

From MAILER-DAEMON Tue Sep 26 00:09:38 2006
Return-Path: 
 <hadoop-dev-return-3917-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93472 invoked from network); 26 Sep 2006 00:09:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Sep 2006 00:09:38 -0000
Received: (qmail 3907 invoked by uid 500); 26 Sep 2006 00:09:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3877 invoked by uid 500); 26 Sep 2006 00:09:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3868 invoked by uid 99); 26 Sep 2006 00:09:38 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Sep 2006 17:09:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:37118]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 21/10-03784-1CF68154 for <hadoop-dev@lucene.apache.org>;
 Mon, 25 Sep 2006 17:09:37 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 54BF471428E
	for <hadoop-dev@lucene.apache.org>; Tue, 26 Sep 2006 00:05:51 +0000 (GMT)
Message-ID: <2074800.1159229151343.JavaMail.jira@brutus>
Date: Mon, 25 Sep 2006 17:05:51 -0700 (PDT)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-557) task tracker cannot find mapoutput
 files
In-Reply-To: <14791507.1159213910719.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-557?page=comments#action_12437700 ] 
            
Runping Qi commented on HADOOP-557:
-----------------------------------


The problem was due to config file update during the job running. The job tracker used the original version, but the newly launched tasks used the new one. The new config file specifies a new mapred.local.dir which the task tracker was not aware. When requests came for the mapoutput files, the task tracker generated wrong file names.

Solution suggestions: The child process should inherit config data from the task tracker in order to keep config data consistency.

 

> task tracker cannot find mapoutput files
> ----------------------------------------
>
>                 Key: HADOOP-557
>                 URL: http://issues.apache.org/jira/browse/HADOOP-557
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Runping Qi
>
> I ran a large job on our cluster over the weekend. At some point, some map tasks were re-run successfully. However, when trying to handle the reducers requests to fetch mapoutput files of those map tasks, the http server complained file not found.
> This happened multiple times on different machines for the same map task until the job tracker aborted the job.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 26 00:18:14 2006
Return-Path: 
 <hadoop-dev-return-3918-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 95262 invoked from network); 26 Sep 2006 00:18:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Sep 2006 00:18:14 -0000
Received: (qmail 9420 invoked by uid 500); 26 Sep 2006 00:18:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9386 invoked by uid 500); 26 Sep 2006 00:18:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9377 invoked by uid 99); 26 Sep 2006 00:18:13 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Sep 2006 17:18:13 -0700
Authentication-Results: idunn.apache.osuosl.org smtp.mail=cutting@apache.org;
 spf=permerror
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received-SPF: error (idunn.apache.osuosl.org: domain apache.org from
 216.148.227.151 cause and error)
Received: from [216.148.227.151] ([216.148.227.151:43753]
 helo=rwcrmhc11.comcast.net)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 07/40-03784-2C178154 for <hadoop-dev@lucene.apache.org>;
 Mon, 25 Sep 2006 17:18:11 -0700
Received: from [192.168.168.15]
 (c-71-202-24-246.hsd1.ca.comcast.net[71.202.24.246])
          by comcast.net (rwcrmhc11) with ESMTP
          id <20060926001808m1100b70eke>; Tue, 26 Sep 2006 00:18:08 +0000
Message-ID: <451871BF.4090404@apache.org>
Date: Mon, 25 Sep 2006 17:18:07 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.5 (X11/20060728)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: Hadoop Network Protocols
References: <20060925235003.GB18862@mcnabbs.org>
In-Reply-To: <20060925235003.GB18862@mcnabbs.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Andrew McNabb wrote:
> I was just curious whether Hadoop's network protocols are documented
> anywhere.  I think someone mentioned today that Hadoop was designed so
> that implementations could be written in other languages.  I was
> wondering how hard that would be and what the protocols are like.

They're not well documented.  And it would be over-stating it to say 
that they're designed to be implemented in other languages.  Rather I'd 
claim that we've tried to keep language-independence in mind, but, as we 
all know, things aren't portable until they've been ported.

There are folks who've stated that they intend to port these to C or C++ 
someday.  The first step would be to change all RPC parameters and 
return values to be defined with the record API, which does have 
documented and implemented C bindings:

http://lucene.apache.org/hadoop/docs/api/org/apache/hadoop/record/package-summary.html

Hadoop's network code has two more layers: IPC and RPC.

IPC permits one to send an object implementing Writable as a request, 
and return a single object that also implements Writable.  The class of 
requests on a port is assumed to be known by the server, and the class 
of responses is assumed to be known by the client.  The protocol is 
roughly as follows:
  - a TCP connection is opened from client to server
  - [ we should add version negotiation here ]
  - the client loops, sending:
      <CallId> a four-byte integer naming the call
      <Length> the four-byte length of the request
      <byte>* the request payload
  - asynchronously, the server loops, sending:
     <CallId> the call whose response is ready
     <Error> a boolean indicating whether the call succeeded
        if true, the error data follows
        otherwise, the response data follows.

Responses are not always returned in the order requests are sent. 
Response data is not yet length-prefixed, but should be.  There's 
nothing Java-specific in the IPC layer.

RPC layers methods on this.  This uses lots of Java-specific stuff, like 
method names and class names.  The request Writable implementation is 
the private class RPC.Invocation.  This just writes the method name as a 
  string, the number of parameters, then writes each parameter using 
ObjectWritable.  Responses are passed using ObjectWritable.

ObjectWritable is mostly simply a class name followed by class-specific 
instance data.  There's a little more to it, since Java's primitive 
types are not classes.

So the RPC layer assumes that you can, given a class name, instantiate 
an instance and call its readFields method.  It also assumes that, given 
a method name and a parameter list, you can call a method.  Java's 
reflection makes this easy.  But to do this in C or C++ would probably 
require moving the specification of protocols out of Java.  Currently we 
use Java interfaces for protocols, but we should instead use a language 
that builds on Hadoop's record API and that can generate Java 
interfaces, as well as C++ client and server stubs.

Doug


From MAILER-DAEMON Tue Sep 26 00:22:39 2006
Return-Path: 
 <hadoop-dev-return-3920-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96550 invoked from network); 26 Sep 2006 00:22:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Sep 2006 00:22:39 -0000
Received: (qmail 12724 invoked by uid 500); 26 Sep 2006 00:22:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 12519 invoked by uid 500); 26 Sep 2006 00:22:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 12510 invoked by uid 99); 26 Sep 2006 00:22:38 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Sep 2006 17:22:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:42461]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id F3/60-03784-EC278154 for <hadoop-dev@lucene.apache.org>;
 Mon, 25 Sep 2006 17:22:38 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CCF8771428E
	for <hadoop-dev@lucene.apache.org>; Tue, 26 Sep 2006 00:18:51 +0000 (GMT)
Message-ID: <13435709.1159229931836.JavaMail.jira@brutus>
Date: Mon, 25 Sep 2006 17:18:51 -0700 (PDT)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-559) Support file patterns in dfs commands
In-Reply-To: <9006329.1159224891271.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-559?page=all ]

Hairong Kuang updated HADOOP-559:
---------------------------------

    Attachment: glob.patch

This patch allows users to manipulate dfs files using globs. The commands that support dfs globs are copyToLocal, copyMergeToLocal, cat, setReplication, ls, lsr, du, mv, copy, and rm. Here are some examples:

hadoop dfs -ls "*.java"
hadoop dfs -ls "a.?"
hadoop dfs -ls "*.[ch]"
hadoop dfs -ls "[a-c].java"
hadoop dfs -ls "[^a].java"
hadoop dfs -ls "/user/h*/???.xx"

Please be aware that dfs globs need to be quoted. This patch does not support local globs.

> Support file patterns in dfs commands
> -------------------------------------
>
>                 Key: HADOOP-559
>                 URL: http://issues.apache.org/jira/browse/HADOOP-559
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.6.2
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.7.0
>
>         Attachments: glob.patch
>
>
> Currently DFSShell does not support file patterns in dfs file names. It's quite inconvenient for users when they need to manipulate multiple files.
> This issue is intended to extend DFSShell to interprete file patterns. A file pattern contains special special pattern matching characters:
> ?: matches any character
> *: matches zero or more characters
> [abc]: matches a character from character set {a, b, c}
> [a-c]: matches a character from character range: {a...c}
> [^a]: matches a character not in character set or range {a}
> \c:  escape any special meaning of character c
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 26 00:18:49 2006
Return-Path: 
 <hadoop-dev-return-3919-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 95314 invoked from network); 26 Sep 2006 00:18:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Sep 2006 00:18:49 -0000
Received: (qmail 9746 invoked by uid 500); 26 Sep 2006 00:18:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9722 invoked by uid 500); 26 Sep 2006 00:18:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9711 invoked by uid 99); 26 Sep 2006 00:18:48 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Sep 2006 17:18:48 -0700
Authentication-Results: idunn.apache.osuosl.org smtp.mail=ab@getopt.org;
 spf=permerror
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received-SPF: error (idunn.apache.osuosl.org: domain getopt.org from
 69.44.16.11 cause and error)
Received: from [69.44.16.11] ([69.44.16.11:47026] helo=getopt.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 7A/40-03784-5E178154 for <hadoop-dev@lucene.apache.org>;
 Mon, 25 Sep 2006 17:18:47 -0700
Received: from [192.168.0.252] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id k8Q0J1K22265
	for <hadoop-dev@lucene.apache.org>; Mon, 25 Sep 2006 19:19:01 -0500
Message-ID: <451871ED.9050007@getopt.org>
Date: Tue, 26 Sep 2006 02:18:53 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: Forcing all blocks to be present "locally"
References: <451844AA.8040304@getopt.org>
 <1bf79d3e0609251417i7417b00dx56e1dc0283a2079e@mail.gmail.com>
 <45184AF4.6070002@getopt.org>
 <84265231-CDC0-4B60-9F24-F6394F59F421@yahoo-inc.com>
In-Reply-To: <84265231-CDC0-4B60-9F24-F6394F59F421@yahoo-inc.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Eric Baldeschwieler wrote:
> You might try setting the block size for these files to be "very 
> large".   This should guaranty that the entire file ends up on one node.
>
> If an index is composed of many files, you could "tar" them together 
> so each index is exactly one file.
>
> Might work...  Of course as indexes get really large, this approach 
> might have side effects.

Sorry to be so obstinate, but this won't work either. First, when 
segments are created they use whatever default block size is there (64MB 
?). Is there a per-file setBlockSize in the API? I couldn't find it - if 
there isn't then the cluster would have to be shutdown, reconfigured, 
started, and the segment data would have to be copied to change its 
block size ... yuck.

Index cannot be tar-ed, because Lucene needs direct access to several 
files included in the index.

Index sizes are several gigabytes, and consist of ~30 files per each 
segment. Segment data is several tens of gigabytes in 4 MapFiles per 
segment.

-- 
Best regards,
Andrzej Bialecki     <><
 ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com



From MAILER-DAEMON Tue Sep 26 00:22:41 2006
Return-Path: 
 <hadoop-dev-return-3921-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96582 invoked from network); 26 Sep 2006 00:22:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Sep 2006 00:22:41 -0000
Received: (qmail 12767 invoked by uid 500); 26 Sep 2006 00:22:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 12746 invoked by uid 500); 26 Sep 2006 00:22:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 12737 invoked by uid 99); 26 Sep 2006 00:22:40 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Sep 2006 17:22:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:42464]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 64/60-03784-FC278154 for <hadoop-dev@lucene.apache.org>;
 Mon, 25 Sep 2006 17:22:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9921771423B
	for <hadoop-dev@lucene.apache.org>; Tue, 26 Sep 2006 00:18:53 +0000 (GMT)
Message-ID: <11970289.1159229933624.JavaMail.jira@brutus>
Date: Mon, 25 Sep 2006 17:18:53 -0700 (PDT)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-559) Support file patterns in dfs commands
In-Reply-To: <9006329.1159224891271.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-559?page=all ]

Hairong Kuang updated HADOOP-559:
---------------------------------

      Status: Patch Available  (was: Open)
    Assignee: Arun C Murthy  (was: Hairong Kuang)

> Support file patterns in dfs commands
> -------------------------------------
>
>                 Key: HADOOP-559
>                 URL: http://issues.apache.org/jira/browse/HADOOP-559
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.6.2
>            Reporter: Hairong Kuang
>         Assigned To: Arun C Murthy
>             Fix For: 0.7.0
>
>         Attachments: glob.patch
>
>
> Currently DFSShell does not support file patterns in dfs file names. It's quite inconvenient for users when they need to manipulate multiple files.
> This issue is intended to extend DFSShell to interprete file patterns. A file pattern contains special special pattern matching characters:
> ?: matches any character
> *: matches zero or more characters
> [abc]: matches a character from character set {a, b, c}
> [a-c]: matches a character from character range: {a...c}
> [^a]: matches a character not in character set or range {a}
> \c:  escape any special meaning of character c
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 26 01:04:14 2006
Return-Path: 
 <hadoop-dev-return-3922-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 3623 invoked from network); 26 Sep 2006 01:04:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Sep 2006 01:04:14 -0000
Received: (qmail 44698 invoked by uid 500); 26 Sep 2006 01:04:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 44669 invoked by uid 500); 26 Sep 2006 01:04:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 44660 invoked by uid 99); 26 Sep 2006 01:04:13 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Sep 2006 18:04:13 -0700
Authentication-Results: idunn.apache.osuosl.org
 smtp.mail=sameerp@yahoo-inc.com; spf=permerror
Authentication-Results: idunn.apache.osuosl.org
 header.from=sameerp@yahoo-inc.com; domainkeys=good
X-ASF-Spam-Status: No,
 hits=-13.6 required=5.0 tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,USER_IN_DEF_WHITELIST
Received-SPF: error (idunn.apache.osuosl.org: domain yahoo-inc.com from
 207.126.228.149 cause and error)
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing
 draft-delany-domainkeys-base-01
Received: from [207.126.228.149] ([207.126.228.149:33381]
 helo=rsmtp1.corp.yahoo.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 32/40-04059-C8C78154 for <hadoop-dev@lucene.apache.org>;
 Mon, 25 Sep 2006 18:04:13 -0700
Received: from [172.21.148.168] (wlanvpn-mc2e-246-168.corp.yahoo.com
 [172.21.148.168])
	by rsmtp1.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k8Q13vm8043479
	for <hadoop-dev@lucene.apache.org>; Mon, 25 Sep 2006 18:03:57 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=message-id:date:from:user-agent:mime-version:to:subject:
	references:in-reply-to:content-type:content-transfer-encoding;
	b=XVEr1I/v9fD9FlfuhS95AiE4tVlGHS3PahZ5+DAXHg5A0khLkdOR5SmD8H1gUhIv
Message-ID: <45187C81.8090200@yahoo-inc.com>
Date: Mon, 25 Sep 2006 18:04:01 -0700
From: Sameer Paranjpye <sameerp@yahoo-inc.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: Forcing all blocks to be present "locally"
References: <451844AA.8040304@getopt.org>
 <1bf79d3e0609251417i7417b00dx56e1dc0283a2079e@mail.gmail.com>
 <45184AF4.6070002@getopt.org>
 <84265231-CDC0-4B60-9F24-F6394F59F421@yahoo-inc.com>
 <451871ED.9050007@getopt.org>
In-Reply-To: <451871ED.9050007@getopt.org>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The DFSClient API has methods to set the block size when a file is created.

 From DFSClient.java
FSOutputStream create(UTF8 src, boolean overwrite, short replication,
                       long blockSize) throws IOException

and

FSOutputStream create(UTF8 src, boolean overwrite, short replication,
                       long blockSize, Progressable progress) throws 
IOException



Andrzej Bialecki wrote:
> Eric Baldeschwieler wrote:
>> You might try setting the block size for these files to be "very 
>> large".   This should guaranty that the entire file ends up on one node.
>>
>> If an index is composed of many files, you could "tar" them together 
>> so each index is exactly one file.
>>
>> Might work...  Of course as indexes get really large, this approach 
>> might have side effects.
> 
> Sorry to be so obstinate, but this won't work either. First, when 
> segments are created they use whatever default block size is there (64MB 
> ?). Is there a per-file setBlockSize in the API? I couldn't find it - if 
> there isn't then the cluster would have to be shutdown, reconfigured, 
> started, and the segment data would have to be copied to change its 
> block size ... yuck.
> 
> Index cannot be tar-ed, because Lucene needs direct access to several 
> files included in the index.
> 
> Index sizes are several gigabytes, and consist of ~30 files per each 
> segment. Segment data is several tens of gigabytes in 4 MapFiles per 
> segment.
> 


From MAILER-DAEMON Tue Sep 26 04:08:43 2006
Return-Path: 
 <hadoop-dev-return-3923-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32513 invoked from network); 26 Sep 2006 04:08:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Sep 2006 04:08:43 -0000
Received: (qmail 44124 invoked by uid 500); 26 Sep 2006 04:08:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 44108 invoked by uid 500); 26 Sep 2006 04:08:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 44026 invoked by uid 99); 26 Sep 2006 04:08:41 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Sep 2006 21:08:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:43089]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id AE/11-04762-7C7A8154 for <hadoop-dev@lucene.apache.org>;
 Mon, 25 Sep 2006 21:08:39 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8061D7142A1
	for <hadoop-dev@lucene.apache.org>; Tue, 26 Sep 2006 04:04:52 +0000 (GMT)
Message-ID: <3911074.1159243492523.JavaMail.jira@brutus>
Date: Mon, 25 Sep 2006 21:04:52 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-538?page=comments#action_12437727 ] 
            
Arun C Murthy commented on HADOOP-538:
--------------------------------------

Couple of insights gleaned from a discussion with Owen:

a) The proposed DataCompression{In|Out}putStreams should probably be 'package private' instead of public, since it is more of an implementation detail; hence it probably shouldn't affect the public api.

b) The {Com|Decom}pressor interfaces should not have any public apis which expose the 'nio direct buffer' details - presumably they are implementation details. 

  The public apis should only be:

  public int deflate(byte[] b, int off, int len);   // Compressor
  and 
  public int inflate(byte[] b, int off, int len);   // Decompressor

  We should leave it to the actual zlib/lzo/* (de)compressors to use nio as they see fit.

Thanks Owen!

> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.7.0
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 26 05:36:39 2006
Return-Path: 
 <hadoop-dev-return-3924-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 49859 invoked from network); 26 Sep 2006 05:36:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Sep 2006 05:36:39 -0000
Received: (qmail 3701 invoked by uid 500); 26 Sep 2006 05:36:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3673 invoked by uid 500); 26 Sep 2006 05:36:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3664 invoked by uid 99); 26 Sep 2006 05:36:38 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Sep 2006 22:36:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:56262]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 66/61-05106-46CB8154 for <hadoop-dev@lucene.apache.org>;
 Mon, 25 Sep 2006 22:36:37 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 232907142A1
	for <hadoop-dev@lucene.apache.org>; Tue, 26 Sep 2006 05:32:50 +0000 (GMT)
Message-ID: <19722671.1159248770141.JavaMail.jira@brutus>
Date: Mon, 25 Sep 2006 22:32:50 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-560) tasks should have a "killed" state
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

tasks should have a "killed" state
----------------------------------

                 Key: HADOOP-560
                 URL: http://issues.apache.org/jira/browse/HADOOP-560
             Project: Hadoop
          Issue Type: Improvement
          Components: mapred
    Affects Versions: 0.6.2
            Reporter: Owen O'Malley
         Assigned To: Owen O'Malley
             Fix For: 0.7.0


Tasks should have a state that reflects the fact that they were killed instead of failed to help the user understand what happened to the task.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 26 05:43:20 2006
Return-Path: 
 <hadoop-dev-return-3925-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51136 invoked from network); 26 Sep 2006 05:43:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Sep 2006 05:43:20 -0000
Received: (qmail 9256 invoked by uid 500); 26 Sep 2006 05:43:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9237 invoked by uid 500); 26 Sep 2006 05:43:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9228 invoked by uid 99); 26 Sep 2006 05:43:17 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Sep 2006 22:43:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:42757]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id DC/91-05106-ECDB8154 for <hadoop-dev@lucene.apache.org>;
 Mon, 25 Sep 2006 22:42:38 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 269F171428E
	for <hadoop-dev@lucene.apache.org>; Tue, 26 Sep 2006 05:38:51 +0000 (GMT)
Message-ID: <4790493.1159249131155.JavaMail.jira@brutus>
Date: Mon, 25 Sep 2006 22:38:51 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-560) tasks should have a "killed" state
In-Reply-To: <19722671.1159248770141.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-560?page=all ]

Owen O'Malley updated HADOOP-560:
---------------------------------

    Attachment: kill-state.patch

This patch:
   1. Introduces an enum for the Task state, called TaskStatus.State.
   2. The enum values match the old integer constants by name and value.
   3. The TaskStatus' serialization is kept the same.
   4. A bug based on confusion between the Job State and Task State values is fixed (go type-safe enums!)
   5. A new killed state is added for Tasks.
   6. The web/ui for jobs shows the count for tasks that have been killed.
   7. The code for converting the Task Status State to string in the web/ui has been removed.

> tasks should have a "killed" state
> ----------------------------------
>
>                 Key: HADOOP-560
>                 URL: http://issues.apache.org/jira/browse/HADOOP-560
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.6.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.7.0
>
>         Attachments: kill-state.patch
>
>
> Tasks should have a state that reflects the fact that they were killed instead of failed to help the user understand what happened to the task.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 26 05:43:21 2006
Return-Path: 
 <hadoop-dev-return-3926-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51175 invoked from network); 26 Sep 2006 05:43:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Sep 2006 05:43:21 -0000
Received: (qmail 9406 invoked by uid 500); 26 Sep 2006 05:43:19 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9370 invoked by uid 500); 26 Sep 2006 05:43:19 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9340 invoked by uid 99); 26 Sep 2006 05:43:18 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Sep 2006 22:43:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:42759]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 2D/91-05106-FCDB8154 for <hadoop-dev@lucene.apache.org>;
 Mon, 25 Sep 2006 22:42:39 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 495DC7142C7
	for <hadoop-dev@lucene.apache.org>; Tue, 26 Sep 2006 05:38:52 +0000 (GMT)
Message-ID: <9854960.1159249132298.JavaMail.jira@brutus>
Date: Mon, 25 Sep 2006 22:38:52 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-560) tasks should have a "killed" state
In-Reply-To: <19722671.1159248770141.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-560?page=all ]

Owen O'Malley updated HADOOP-560:
---------------------------------

    Status: Patch Available  (was: Open)

> tasks should have a "killed" state
> ----------------------------------
>
>                 Key: HADOOP-560
>                 URL: http://issues.apache.org/jira/browse/HADOOP-560
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.6.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.7.0
>
>         Attachments: kill-state.patch
>
>
> Tasks should have a state that reflects the fact that they were killed instead of failed to help the user understand what happened to the task.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 26 05:46:41 2006
Return-Path: 
 <hadoop-dev-return-3927-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51708 invoked from network); 26 Sep 2006 05:46:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Sep 2006 05:46:41 -0000
Received: (qmail 12424 invoked by uid 500); 26 Sep 2006 05:46:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 12402 invoked by uid 500); 26 Sep 2006 05:46:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 12393 invoked by uid 99); 26 Sep 2006 05:46:40 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Sep 2006 22:46:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:42023]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id C2/C1-05106-EBEB8154 for <hadoop-dev@lucene.apache.org>;
 Mon, 25 Sep 2006 22:46:38 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EA17871423B
	for <hadoop-dev@lucene.apache.org>; Tue, 26 Sep 2006 05:42:51 +0000 (GMT)
Message-ID: <24000157.1159249371956.JavaMail.jira@brutus>
Date: Mon, 25 Sep 2006 22:42:51 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-374) native support for gzipped text files
In-Reply-To: <6262881.1153419313888.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-374?page=all ]

Owen O'Malley resolved HADOOP-374.
----------------------------------

    Fix Version/s: 0.6.2
       Resolution: Fixed

> native support for gzipped text files
> -------------------------------------
>
>                 Key: HADOOP-374
>                 URL: http://issues.apache.org/jira/browse/HADOOP-374
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>            Reporter: Yoram Arnon
>             Fix For: 0.6.2
>
>
> in many cases it is convenient to store text files in dfs as gzip compressed files.
> It would be good to have built in support for processing these files in a mapreduce job.
> The getSplits implementation should return a single split per input file, ignoring the numSplits parameter.
> One can probably subclass InputFormatBase, and the getSplits method can simply call listPaths() 
> and then construct and return a single split per path returned.
> The code for reading would look something like (courtesy of Vijay Murthy):
>    public RecordReader getRecordReader(FileSystem fs, FileSplit split,
>                                        JobConf job, Reporter reporter)
>      throws IOException {
>      final BufferedReader in =
>        new BufferedReader(new InputStreamReader
>          (new GZIPInputStream(fs.open(split.getPath()))));
>      return new RecordReader() {
>          long position;
>          public synchronized boolean next(Writable key, Writable value)
>            throws IOException {
>            String line = in.readLine();
>            if (line != null) {
>              position += line.length();
>              ((UTF8)value).set(line);
>              return true;
>            }
>            return false;
>          }
>          public synchronized long getPos() throws IOException {
>            return position;
>          }
>         public synchronized void close() throws IOException {
>            in.close();
>          }
>        };
>    }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 26 09:05:45 2006
Return-Path: 
 <hadoop-dev-return-3928-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12095 invoked from network); 26 Sep 2006 09:05:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Sep 2006 09:05:45 -0000
Received: (qmail 38920 invoked by uid 500); 26 Sep 2006 09:05:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38836 invoked by uid 500); 26 Sep 2006 09:05:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38795 invoked by uid 99); 26 Sep 2006 09:05:41 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Sep 2006 02:05:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:40056]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 01/00-06744-36DE8154 for <hadoop-dev@lucene.apache.org>;
 Tue, 26 Sep 2006 02:05:39 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D0EDE7142CF
	for <hadoop-dev@lucene.apache.org>; Tue, 26 Sep 2006 09:01:52 +0000 (GMT)
Message-ID: <21007508.1159261312853.JavaMail.jira@brutus>
Date: Tue, 26 Sep 2006 02:01:52 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Work started: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-538?page=all ]

Work on HADOOP-538 started by Arun C Murthy.

> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.7.0
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 26 09:13:49 2006
Return-Path: 
 <hadoop-dev-return-3929-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 13854 invoked from network); 26 Sep 2006 09:13:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Sep 2006 09:13:49 -0000
Received: (qmail 49385 invoked by uid 500); 26 Sep 2006 09:13:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49172 invoked by uid 500); 26 Sep 2006 09:13:48 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49163 invoked by uid 99); 26 Sep 2006 09:13:48 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Sep 2006 02:13:48 -0700
Authentication-Results: idunn.apache.osuosl.org smtp.mail=ab@getopt.org;
 spf=permerror
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received-SPF: error (idunn.apache.osuosl.org: domain getopt.org from
 69.44.16.11 cause and error)
Received: from [69.44.16.11] ([69.44.16.11:50375] helo=getopt.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 5A/30-06744-A4FE8154 for <hadoop-dev@lucene.apache.org>;
 Tue, 26 Sep 2006 02:13:47 -0700
Received: from [10.10.16.235] (fre2-125.164.71.64.krugle.com [64.71.164.125]
 (may be forged))
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id k8Q9DjK26688
	for <hadoop-dev@lucene.apache.org>; Tue, 26 Sep 2006 04:13:45 -0500
Message-ID: <4518EF52.3080509@getopt.org>
Date: Tue, 26 Sep 2006 11:13:54 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: Forcing all blocks to be present "locally"
References: <451844AA.8040304@getopt.org>
 <1bf79d3e0609251417i7417b00dx56e1dc0283a2079e@mail.gmail.com>
 <45184AF4.6070002@getopt.org>
 <84265231-CDC0-4B60-9F24-F6394F59F421@yahoo-inc.com>
 <451871ED.9050007@getopt.org> <45187C81.8090200@yahoo-inc.com>
In-Reply-To: <45187C81.8090200@yahoo-inc.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Sameer Paranjpye wrote:
> The DFSClient API has methods to set the block size when a file is 
> created.
>

Thanks, I missed that. However, this still doesn't solve the problem - I 
can't set this super-large block size when creating the files, because 
then I lose most benefits of storing them (long-term) on DFS. What I 
need is a way to _temporarily_ make them localized to a particular 
machine, just for performance reasons, and without having to copy them 
out of DFS ...

-- 
Best regards,
Andrzej Bialecki     <><
 ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com



From MAILER-DAEMON Tue Sep 26 12:17:42 2006
Return-Path: 
 <hadoop-dev-return-3930-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 88044 invoked from network); 26 Sep 2006 12:17:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Sep 2006 12:17:42 -0000
Received: (qmail 8253 invoked by uid 500); 26 Sep 2006 12:17:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 8239 invoked by uid 500); 26 Sep 2006 12:17:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 8221 invoked by uid 99); 26 Sep 2006 12:17:41 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Sep 2006 05:17:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:58372]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 44/40-10462-46A19154 for <hadoop-dev@lucene.apache.org>;
 Tue, 26 Sep 2006 05:17:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7917471423B
	for <hadoop-dev@lucene.apache.org>; Tue, 26 Sep 2006 12:13:53 +0000 (GMT)
Message-ID: <27869574.1159272833492.JavaMail.jira@brutus>
Date: Tue, 26 Sep 2006 05:13:53 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-239) job tracker WI drops jobs after 24
 hours
In-Reply-To: <7996228.1148318969883.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-239?page=all ]

Sanjay Dahiya updated HADOOP-239:
---------------------------------

    Attachment: Hadoop-239_1.patch

Updating patch with latest trunk. Up for review. 

> job tracker WI drops jobs after 24 hours
> ----------------------------------------
>
>                 Key: HADOOP-239
>                 URL: http://issues.apache.org/jira/browse/HADOOP-239
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Yoram Arnon
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: Hadoop-239.patch, Hadoop-239_1.patch
>
>
> The jobtracker's WI, keeps track of jobs executed in the past 24 hours.
> if the cluster was idle for a day (say Sunday) it drops all its history.
> Monday morning, the page is empty.
> Better would be to store a fixed number of jobs (say 10 each of succeeded and failed jobs).
> Also, if the job tracker is restarted, it loses all its history.
> The history should be persistent, withstanding restarts and upgrades.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 26 12:17:43 2006
Return-Path: 
 <hadoop-dev-return-3931-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 88082 invoked from network); 26 Sep 2006 12:17:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Sep 2006 12:17:43 -0000
Received: (qmail 8502 invoked by uid 500); 26 Sep 2006 12:17:43 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 8478 invoked by uid 500); 26 Sep 2006 12:17:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 8468 invoked by uid 99); 26 Sep 2006 12:17:43 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Sep 2006 05:17:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:58375]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 94/40-10462-66A19154 for <hadoop-dev@lucene.apache.org>;
 Tue, 26 Sep 2006 05:17:42 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 58FF871428E
	for <hadoop-dev@lucene.apache.org>; Tue, 26 Sep 2006 12:13:55 +0000 (GMT)
Message-ID: <10709324.1159272835362.JavaMail.jira@brutus>
Date: Tue, 26 Sep 2006 05:13:55 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-239) job tracker WI drops jobs after 24
 hours
In-Reply-To: <7996228.1148318969883.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-239?page=all ]

Sanjay Dahiya updated HADOOP-239:
---------------------------------

    Status: Patch Available  (was: In Progress)

> job tracker WI drops jobs after 24 hours
> ----------------------------------------
>
>                 Key: HADOOP-239
>                 URL: http://issues.apache.org/jira/browse/HADOOP-239
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Yoram Arnon
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: Hadoop-239.patch, Hadoop-239_1.patch
>
>
> The jobtracker's WI, keeps track of jobs executed in the past 24 hours.
> if the cluster was idle for a day (say Sunday) it drops all its history.
> Monday morning, the page is empty.
> Better would be to store a fixed number of jobs (say 10 each of succeeded and failed jobs).
> Also, if the job tracker is restarted, it loses all its history.
> The history should be persistent, withstanding restarts and upgrades.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 26 13:26:46 2006
Return-Path: 
 <hadoop-dev-return-3932-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16078 invoked from network); 26 Sep 2006 13:26:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Sep 2006 13:26:46 -0000
Received: (qmail 8825 invoked by uid 500); 26 Sep 2006 13:26:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 8802 invoked by uid 500); 26 Sep 2006 13:26:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 8793 invoked by uid 99); 26 Sep 2006 13:26:45 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Sep 2006 06:26:45 -0700
Authentication-Results: idunn.apache.osuosl.org
 smtp.mail=otis_gospodnetic@yahoo.com; spf=permerror
Authentication-Results: idunn.apache.osuosl.org
 header.from=otis_gospodnetic@yahoo.com; domainkeys=good
X-ASF-Spam-Status: No,
 hits=2.8 required=5.0 tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
Received-SPF: error (idunn.apache.osuosl.org: domain yahoo.com from
 206.190.38.56 cause and error)
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing
 draft-delany-domainkeys-base-01
Received: from [206.190.38.56] ([206.190.38.56:25606]
 helo=web50302.mail.yahoo.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id EE/00-11437-39A29154 for <hadoop-dev@lucene.apache.org>;
 Tue, 26 Sep 2006 06:26:44 -0700
Received: (qmail 81267 invoked by uid 60001); 26 Sep 2006 13:26:41 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=V1wxJ7HY0PzY6vcYv3Ot+ghAWHrqgZw+8MJ6dHMGYIw96ormpP5r2T+KI5kNUUtRnL6aZBs4/QLm1vzkozZa6Qz4/dN1jxcTf6CBtkcE6wHmh24xLkCnfkyv6F7ny4BVJCTfJcgu5YuZdQhiOJ6wlNcJy7tfpMW/DG9Tj+068bw=
  ;
Message-ID: <20060926132641.81265.qmail@web50302.mail.yahoo.com>
Received: from [72.229.167.25] by web50302.mail.yahoo.com via HTTP;
 Tue, 26 Sep 2006 06:26:41 PDT
Date: Tue, 26 Sep 2006 06:26:41 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: DFS block size?
To: hadoop-dev@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,=0A=0AWhat are the things to consider when figuring out the optimal DFS =
block size?  The same =0Aas with any FS?  If smaller files will be stored, =
use small blocks; for big files use large blocks...?=0A=0AThanks,=0AOtis=0A=
=0A=0A

From MAILER-DAEMON Tue Sep 26 15:53:42 2006
Return-Path: 
 <hadoop-dev-return-3933-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 69984 invoked from network); 26 Sep 2006 15:53:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Sep 2006 15:53:42 -0000
Received: (qmail 94717 invoked by uid 500); 26 Sep 2006 15:53:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94700 invoked by uid 500); 26 Sep 2006 15:53:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94690 invoked by uid 99); 26 Sep 2006 15:53:41 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Sep 2006 08:53:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:38936]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id F7/10-13661-40D49154 for <hadoop-dev@lucene.apache.org>;
 Tue, 26 Sep 2006 08:53:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 10B557142D9
	for <hadoop-dev@lucene.apache.org>; Tue, 26 Sep 2006 15:49:53 +0000 (GMT)
Message-ID: <22342374.1159285793065.JavaMail.jira@brutus>
Date: Tue, 26 Sep 2006 08:49:53 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-451) Add a Split interface
In-Reply-To: <24919314.1155330613896.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-451?page=comments#action_12437871 ] 
            
Owen O'Malley commented on HADOOP-451:
--------------------------------------

There is a problem with this proposal in that the MapTask uses the FileSplit.getLength() as a count of the number of bytes in the split to compute progress. I see three reasonable alternatives:

1. Rename getCost() to getLength() and assume it is a number of bytes.
2. Add a getLength() method to Split that returns the number of bytes.
3. Add a new method to RecordReader "double getProgress();" that returns the progress within the record reader.

Option 1 has the lowest impact on existing application code, but I think option 3 is a better choice.

Thoughts?

> Add a Split interface
> ---------------------
>
>                 Key: HADOOP-451
>                 URL: http://issues.apache.org/jira/browse/HADOOP-451
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Doug Cutting
>
> The InputFormat interface has a method:
> FileSplit[] getSplits();
> This should change to:
> Split[] getSplits();
> The Split interface would look like:
> public interface Split extends Writable {
>   /** Returns a list of hosts that contain this split.
>        This is only used to optimize task placement, so this may be empty. */
>   String[] getLocations(FileSystem fs);
>   /** The relative, estimated cost of operating on this.  Typically the size of the data in the split.
>        Used to prioritize tasks in a job (high-cost tasks are run first).  */
>    long getCost();
> }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 26 16:31:25 2006
Return-Path: 
 <hadoop-dev-return-3934-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78066 invoked from network); 26 Sep 2006 16:31:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Sep 2006 16:31:25 -0000
Received: (qmail 52510 invoked by uid 500); 26 Sep 2006 16:31:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 52489 invoked by uid 500); 26 Sep 2006 16:31:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 52479 invoked by uid 99); 26 Sep 2006 16:31:24 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Sep 2006 09:31:24 -0700
Authentication-Results: idunn.apache.osuosl.org smtp.mail=cutting@apache.org;
 spf=permerror
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received-SPF: error (idunn.apache.osuosl.org: domain apache.org from
 204.127.192.82 cause and error)
Received: from [204.127.192.82] ([204.127.192.82:57399]
 helo=rwcrmhc12.comcast.net)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id B4/21-13661-BD559154 for <hadoop-dev@lucene.apache.org>;
 Tue, 26 Sep 2006 09:31:23 -0700
Received: from [192.168.168.15]
 (c-71-202-24-246.hsd1.ca.comcast.net[71.202.24.246])
          by comcast.net (rwcrmhc12) with ESMTP
          id <20060926163120m1200org3pe>; Tue, 26 Sep 2006 16:31:20 +0000
Message-ID: <451955D7.5010104@apache.org>
Date: Tue, 26 Sep 2006 09:31:19 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.5 (X11/20060728)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: Forcing all blocks to be present "locally"
References: <451844AA.8040304@getopt.org>
 <1bf79d3e0609251417i7417b00dx56e1dc0283a2079e@mail.gmail.com>
 <45184AF4.6070002@getopt.org>
 <84265231-CDC0-4B60-9F24-F6394F59F421@yahoo-inc.com>
 <451871ED.9050007@getopt.org> <45187C81.8090200@yahoo-inc.com>
 <4518EF52.3080509@getopt.org>
In-Reply-To: <4518EF52.3080509@getopt.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Andrzej Bialecki wrote:
> What I 
> need is a way to _temporarily_ make them localized to a particular 
> machine, just for performance reasons, and without having to copy them 
> out of DFS ...

Your current solution is to copy them to the local FS.  This is 
unacceptable because it is (a) slow and (b) uses too much space.

Re (a): I don't see how the solution you suggest could be any faster. 
If anything it could be slower, since, in addition to copying a file's 
blocks locally, one would also need to make room for these blocks by 
re-locating blocks that were local to other nodes.  Ideally these would 
be other index file blocks, but it might not work out that well.

Re (b): Since you'll be copying indexes out to local storage, could you 
reduce their replication count from three to two?  That would free up 
some space on each node (about the right amount, in fact).  If the DFS 
copy becomes incomplete, then you'd have to manually either re-create 
the index or copy a local version, which is not quite as convenient as 
having DFS handle your disk failures, but, with a replication of two 
this should still be rare.

Disks are awfully big these days.  I'm surprised your disks are so full 
that an index that is small-enough to be searched quickly by a single 
node takes up a significant amount of the disk.  Or are you copying the 
entire segment locally?  I would hope that DFS would be fast enough for 
summary and cache requests.  With a cluster of 10 nodes and ten hits 
displayed per page, each node should only need to handle one summary 
request per query.  Cache requests are much rarer yet.

Doug

From MAILER-DAEMON Tue Sep 26 16:54:42 2006
Return-Path: 
 <hadoop-dev-return-3935-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 83267 invoked from network); 26 Sep 2006 16:54:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Sep 2006 16:54:42 -0000
Received: (qmail 95350 invoked by uid 500); 26 Sep 2006 16:54:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95173 invoked by uid 500); 26 Sep 2006 16:54:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95022 invoked by uid 99); 26 Sep 2006 16:54:40 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Sep 2006 09:54:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:39793]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id E5/D1-13661-F4B59154 for <hadoop-dev@lucene.apache.org>;
 Tue, 26 Sep 2006 09:54:39 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 13C5F7142CF
	for <hadoop-dev@lucene.apache.org>; Tue, 26 Sep 2006 16:50:52 +0000 (GMT)
Message-ID: <2427633.1159289452077.JavaMail.jira@brutus>
Date: Tue, 26 Sep 2006 09:50:52 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-561) one replica of a file should be
 written locally if possible
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

one replica of a file should be written locally if possible
-----------------------------------------------------------

                 Key: HADOOP-561
                 URL: http://issues.apache.org/jira/browse/HADOOP-561
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
            Reporter: Yoram Arnon


one replica of a file should be written locally if possible. That's currently not the case.
Copying a 1GB file using hadoop dfs -cp running on one of the cluster nodes, all the blocks were written to remote nodes, as seen by fsck -files -blocks -locations on the newly created file.

as long as there is sufficient space locally, a local copy has significant performance benefits.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 26 17:07:40 2006
Return-Path: 
 <hadoop-dev-return-3936-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85732 invoked from network); 26 Sep 2006 17:07:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Sep 2006 17:07:40 -0000
Received: (qmail 5651 invoked by uid 500); 26 Sep 2006 17:07:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 5624 invoked by uid 500); 26 Sep 2006 17:07:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 5615 invoked by uid 99); 26 Sep 2006 17:07:40 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Sep 2006 10:07:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:41307]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id B6/00-14352-B5E59154 for <hadoop-dev@lucene.apache.org>;
 Tue, 26 Sep 2006 10:07:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5B5397142A1
	for <hadoop-dev@lucene.apache.org>; Tue, 26 Sep 2006 17:03:52 +0000 (GMT)
Message-ID: <4037358.1159290232371.JavaMail.jira@brutus>
Date: Tue, 26 Sep 2006 10:03:52 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-559) Support file patterns in dfs
 commands
In-Reply-To: <9006329.1159224891271.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-559?page=comments#action_12437888 ] 
            
Doug Cutting commented on HADOOP-559:
-------------------------------------

Overall, this looks great!

Why doesn't it work for local globs?  It's all implemented in the generic code, but, with an empty hadoop-site.xml (i.e., local fs), then 'bin/hadoop dfs -ls "conf/*.template"' shows zero results.  I'm mostly just curious.  It seems like it ought to work, but it doesn't (though that functionality isn't needed).

Also, you add some new public methods to FileSystem.java, listPaths(Path[]) and listPaths(Path[], PathFilter).  Do these really need to be public?  If so, they need better javadoc, explaining how they work.

Thanks!

> Support file patterns in dfs commands
> -------------------------------------
>
>                 Key: HADOOP-559
>                 URL: http://issues.apache.org/jira/browse/HADOOP-559
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.6.2
>            Reporter: Hairong Kuang
>         Assigned To: Arun C Murthy
>             Fix For: 0.7.0
>
>         Attachments: glob.patch
>
>
> Currently DFSShell does not support file patterns in dfs file names. It's quite inconvenient for users when they need to manipulate multiple files.
> This issue is intended to extend DFSShell to interprete file patterns. A file pattern contains special special pattern matching characters:
> ?: matches any character
> *: matches zero or more characters
> [abc]: matches a character from character set {a, b, c}
> [a-c]: matches a character from character range: {a...c}
> [^a]: matches a character not in character set or range {a}
> \c:  escape any special meaning of character c
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 26 17:50:40 2006
Return-Path: 
 <hadoop-dev-return-3937-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96182 invoked from network); 26 Sep 2006 17:50:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Sep 2006 17:50:40 -0000
Received: (qmail 63990 invoked by uid 500); 26 Sep 2006 17:50:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63966 invoked by uid 500); 26 Sep 2006 17:50:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63957 invoked by uid 99); 26 Sep 2006 17:50:39 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Sep 2006 10:50:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:44060]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 6E/70-14537-E6869154 for <hadoop-dev@lucene.apache.org>;
 Tue, 26 Sep 2006 10:50:39 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4DC737142A1
	for <hadoop-dev@lucene.apache.org>; Tue, 26 Sep 2006 17:46:51 +0000 (GMT)
Message-ID: <17117575.1159292811315.JavaMail.jira@brutus>
Date: Tue, 26 Sep 2006 10:46:51 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-560) tasks should have a "killed" state
In-Reply-To: <19722671.1159248770141.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-560?page=all ]

Doug Cutting updated HADOOP-560:
--------------------------------

    Status: Open  (was: Patch Available)

This is causing some of the unit tests to hang.

> tasks should have a "killed" state
> ----------------------------------
>
>                 Key: HADOOP-560
>                 URL: http://issues.apache.org/jira/browse/HADOOP-560
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.6.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.7.0
>
>         Attachments: kill-state.patch
>
>
> Tasks should have a state that reflects the fact that they were killed instead of failed to help the user understand what happened to the task.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 26 18:19:41 2006
Return-Path: 
 <hadoop-dev-return-3938-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 3007 invoked from network); 26 Sep 2006 18:19:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Sep 2006 18:19:41 -0000
Received: (qmail 98287 invoked by uid 500); 26 Sep 2006 18:19:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98185 invoked by uid 500); 26 Sep 2006 18:19:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98176 invoked by uid 99); 26 Sep 2006 18:19:41 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Sep 2006 11:19:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:59023]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id B8/41-14537-B3F69154 for <hadoop-dev@lucene.apache.org>;
 Tue, 26 Sep 2006 11:19:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C0E1E7142A1
	for <hadoop-dev@lucene.apache.org>; Tue, 26 Sep 2006 18:15:51 +0000 (GMT)
Message-ID: <17300823.1159294551759.JavaMail.jira@brutus>
Date: Tue, 26 Sep 2006 11:15:51 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-239) job tracker WI drops jobs after 24
 hours
In-Reply-To: <7996228.1148318969883.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-239?page=comments#action_12437898 ] 
            
Doug Cutting commented on HADOOP-239:
-------------------------------------

Perhaps we should change the string constants in JobInfo.java to be an enum (or two), to get the compiler to do a bit more work for us?  Or, we could use a record i/o record and XML output.  This way serializers and deserializers would be written for us.  That's perhaps overkill, but it's worth thinking about.

In any case, we need to make sure it's easy for these files to evolve.  Adding and removing fields should be trivial, and processing old files that have obsolete or missing fields should also be natural.  Right now, each new field requires a number of coordinated changes.  Is there any way we can reduce these?

> job tracker WI drops jobs after 24 hours
> ----------------------------------------
>
>                 Key: HADOOP-239
>                 URL: http://issues.apache.org/jira/browse/HADOOP-239
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Yoram Arnon
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: Hadoop-239.patch, Hadoop-239_1.patch
>
>
> The jobtracker's WI, keeps track of jobs executed in the past 24 hours.
> if the cluster was idle for a day (say Sunday) it drops all its history.
> Monday morning, the page is empty.
> Better would be to store a fixed number of jobs (say 10 each of succeeded and failed jobs).
> Also, if the job tracker is restarted, it loses all its history.
> The history should be persistent, withstanding restarts and upgrades.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 26 18:28:41 2006
Return-Path: 
 <hadoop-dev-return-3939-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 4789 invoked from network); 26 Sep 2006 18:28:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Sep 2006 18:28:41 -0000
Received: (qmail 9578 invoked by uid 500); 26 Sep 2006 18:28:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9559 invoked by uid 500); 26 Sep 2006 18:28:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9550 invoked by uid 99); 26 Sep 2006 18:28:40 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Sep 2006 11:28:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:33242]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 95/81-14537-85179154 for <hadoop-dev@lucene.apache.org>;
 Tue, 26 Sep 2006 11:28:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5296A7142CF
	for <hadoop-dev@lucene.apache.org>; Tue, 26 Sep 2006 18:24:52 +0000 (GMT)
Message-ID: <20433993.1159295092335.JavaMail.jira@brutus>
Date: Tue, 26 Sep 2006 11:24:52 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-451) Add a Split interface
In-Reply-To: <24919314.1155330613896.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-451?page=comments#action_12437900 ] 
            
Doug Cutting commented on HADOOP-451:
-------------------------------------

I like option 3 best -- add a RecordReader.getProgress() method, replacing its getPos() method with something abstract and file-independent.

I also wonder whether we then really need Split.getCost().  We could instead promise to process splits in the order they're generated, so jobs could still control the order if they liked.

> Add a Split interface
> ---------------------
>
>                 Key: HADOOP-451
>                 URL: http://issues.apache.org/jira/browse/HADOOP-451
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Doug Cutting
>
> The InputFormat interface has a method:
> FileSplit[] getSplits();
> This should change to:
> Split[] getSplits();
> The Split interface would look like:
> public interface Split extends Writable {
>   /** Returns a list of hosts that contain this split.
>        This is only used to optimize task placement, so this may be empty. */
>   String[] getLocations(FileSystem fs);
>   /** The relative, estimated cost of operating on this.  Typically the size of the data in the split.
>        Used to prioritize tasks in a job (high-cost tasks are run first).  */
>    long getCost();
> }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 26 18:30:46 2006
Return-Path: 
 <hadoop-dev-return-3940-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 5120 invoked from network); 26 Sep 2006 18:30:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Sep 2006 18:30:46 -0000
Received: (qmail 12118 invoked by uid 500); 26 Sep 2006 18:30:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 12090 invoked by uid 500); 26 Sep 2006 18:30:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 12078 invoked by uid 99); 26 Sep 2006 18:30:46 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Sep 2006 11:30:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:47128]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 91/91-14537-5D179154 for <hadoop-dev@lucene.apache.org>;
 Tue, 26 Sep 2006 11:30:45 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 974577142A1
	for <hadoop-dev@lucene.apache.org>; Tue, 26 Sep 2006 18:26:52 +0000 (GMT)
Message-ID: <7387375.1159295212617.JavaMail.jira@brutus>
Date: Tue, 26 Sep 2006 11:26:52 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-451) Add a Split interface
In-Reply-To: <24919314.1155330613896.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-451?page=comments#action_12437901 ] 
            
Owen O'Malley commented on HADOOP-451:
--------------------------------------

+1

> Add a Split interface
> ---------------------
>
>                 Key: HADOOP-451
>                 URL: http://issues.apache.org/jira/browse/HADOOP-451
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Doug Cutting
>
> The InputFormat interface has a method:
> FileSplit[] getSplits();
> This should change to:
> Split[] getSplits();
> The Split interface would look like:
> public interface Split extends Writable {
>   /** Returns a list of hosts that contain this split.
>        This is only used to optimize task placement, so this may be empty. */
>   String[] getLocations(FileSystem fs);
>   /** The relative, estimated cost of operating on this.  Typically the size of the data in the split.
>        Used to prioritize tasks in a job (high-cost tasks are run first).  */
>    long getCost();
> }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 26 19:14:52 2006
Return-Path: 
 <hadoop-dev-return-3941-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 19921 invoked from network); 26 Sep 2006 19:14:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Sep 2006 19:14:52 -0000
Received: (qmail 96429 invoked by uid 500); 26 Sep 2006 19:14:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 96408 invoked by uid 500); 26 Sep 2006 19:14:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 96382 invoked by uid 99); 26 Sep 2006 19:14:40 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Sep 2006 12:14:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:51184]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id DE/A2-14537-F1C79154 for <hadoop-dev@lucene.apache.org>;
 Tue, 26 Sep 2006 12:14:39 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D42F571428E
	for <hadoop-dev@lucene.apache.org>; Tue, 26 Sep 2006 19:10:51 +0000 (GMT)
Message-ID: <23390458.1159297851866.JavaMail.jira@brutus>
Date: Tue, 26 Sep 2006 12:10:51 -0700 (PDT)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-559) Support file patterns in dfs commands
In-Reply-To: <9006329.1159224891271.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-559?page=all ]

Hairong Kuang reassigned HADOOP-559:
------------------------------------

    Assignee: Hairong Kuang  (was: Arun C Murthy)

> Support file patterns in dfs commands
> -------------------------------------
>
>                 Key: HADOOP-559
>                 URL: http://issues.apache.org/jira/browse/HADOOP-559
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.6.2
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.7.0
>
>         Attachments: glob.patch
>
>
> Currently DFSShell does not support file patterns in dfs file names. It's quite inconvenient for users when they need to manipulate multiple files.
> This issue is intended to extend DFSShell to interprete file patterns. A file pattern contains special special pattern matching characters:
> ?: matches any character
> *: matches zero or more characters
> [abc]: matches a character from character set {a, b, c}
> [a-c]: matches a character from character range: {a...c}
> [^a]: matches a character not in character set or range {a}
> \c:  escape any special meaning of character c
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 26 19:22:40 2006
Return-Path: 
 <hadoop-dev-return-3942-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31278 invoked from network); 26 Sep 2006 19:22:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Sep 2006 19:22:40 -0000
Received: (qmail 12563 invoked by uid 500); 26 Sep 2006 19:22:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 12540 invoked by uid 500); 26 Sep 2006 19:22:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 12531 invoked by uid 99); 26 Sep 2006 19:22:39 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Sep 2006 12:22:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:35160]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 64/10-15364-EFD79154 for <hadoop-dev@lucene.apache.org>;
 Tue, 26 Sep 2006 12:22:39 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2A5F071428E
	for <hadoop-dev@lucene.apache.org>; Tue, 26 Sep 2006 19:18:51 +0000 (GMT)
Message-ID: <23991141.1159298331170.JavaMail.jira@brutus>
Date: Tue, 26 Sep 2006 12:18:51 -0700 (PDT)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-559) Support file patterns in dfs
 commands
In-Reply-To: <9006329.1159224891271.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-559?page=comments#action_12437914 ] 
            
Hairong Kuang commented on HADOOP-559:
--------------------------------------

The reason that "ls" glob does not work with local file system is that there is a bug in ListPathsRaw of LocalFileSystem. When an argument is a file, it returns null instead of the file.

DFSShell uses listPaths[] of FileSystem. So I make the method public. If this is Ok with everybody, I will add more detailed javadoc and resumit a patch.

> Support file patterns in dfs commands
> -------------------------------------
>
>                 Key: HADOOP-559
>                 URL: http://issues.apache.org/jira/browse/HADOOP-559
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.6.2
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.7.0
>
>         Attachments: glob.patch
>
>
> Currently DFSShell does not support file patterns in dfs file names. It's quite inconvenient for users when they need to manipulate multiple files.
> This issue is intended to extend DFSShell to interprete file patterns. A file pattern contains special special pattern matching characters:
> ?: matches any character
> *: matches zero or more characters
> [abc]: matches a character from character set {a, b, c}
> [a-c]: matches a character from character range: {a...c}
> [^a]: matches a character not in character set or range {a}
> \c:  escape any special meaning of character c
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 26 19:26:47 2006
Return-Path: 
 <hadoop-dev-return-3943-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31945 invoked from network); 26 Sep 2006 19:26:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Sep 2006 19:26:47 -0000
Received: (qmail 17539 invoked by uid 500); 26 Sep 2006 19:26:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17516 invoked by uid 500); 26 Sep 2006 19:26:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17507 invoked by uid 99); 26 Sep 2006 19:26:47 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Sep 2006 12:26:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:45019]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 5B/20-15364-6FE79154 for <hadoop-dev@lucene.apache.org>;
 Tue, 26 Sep 2006 12:26:46 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E06D371428E
	for <hadoop-dev@lucene.apache.org>; Tue, 26 Sep 2006 19:22:58 +0000 (GMT)
Message-ID: <29981064.1159298578914.JavaMail.jira@brutus>
Date: Tue, 26 Sep 2006 12:22:58 -0700 (PDT)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-559) Support file patterns in dfs commands
In-Reply-To: <9006329.1159224891271.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-559?page=all ]

Hairong Kuang updated HADOOP-559:
---------------------------------

    Attachment: glob.patch

> Support file patterns in dfs commands
> -------------------------------------
>
>                 Key: HADOOP-559
>                 URL: http://issues.apache.org/jira/browse/HADOOP-559
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.6.2
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.7.0
>
>         Attachments: glob.patch, glob.patch
>
>
> Currently DFSShell does not support file patterns in dfs file names. It's quite inconvenient for users when they need to manipulate multiple files.
> This issue is intended to extend DFSShell to interprete file patterns. A file pattern contains special special pattern matching characters:
> ?: matches any character
> *: matches zero or more characters
> [abc]: matches a character from character set {a, b, c}
> [a-c]: matches a character from character range: {a...c}
> [^a]: matches a character not in character set or range {a}
> \c:  escape any special meaning of character c
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 26 19:39:41 2006
Return-Path: 
 <hadoop-dev-return-3944-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 36362 invoked from network); 26 Sep 2006 19:39:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Sep 2006 19:39:41 -0000
Received: (qmail 53240 invoked by uid 500); 26 Sep 2006 19:39:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53040 invoked by uid 500); 26 Sep 2006 19:39:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53031 invoked by uid 99); 26 Sep 2006 19:39:41 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Sep 2006 12:39:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:41446]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 2D/80-15364-BF189154 for <hadoop-dev@lucene.apache.org>;
 Tue, 26 Sep 2006 12:39:39 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C13E77142A1
	for <hadoop-dev@lucene.apache.org>; Tue, 26 Sep 2006 19:35:51 +0000 (GMT)
Message-ID: <6594083.1159299351788.JavaMail.jira@brutus>
Date: Tue, 26 Sep 2006 12:35:51 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-239) job tracker WI drops jobs after 24
 hours
In-Reply-To: <7996228.1148318969883.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-239?page=comments#action_12437921 ] 
            
Sanjay Dahiya commented on HADOOP-239:
--------------------------------------

yes, we can use enums in JobInfo and other classes and use String values to store in files so its still human readable. I will make this change. 
XML may not be a good option as history is written in append mode, at any point of time the file is consistent if JT crashes. In case of XML wither we write whole file again with every change or a JT crash will leave it malformed, thats the only reason I didnt use XML. 
I will think over simplifying evolving this file and get back again. 

> job tracker WI drops jobs after 24 hours
> ----------------------------------------
>
>                 Key: HADOOP-239
>                 URL: http://issues.apache.org/jira/browse/HADOOP-239
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Yoram Arnon
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: Hadoop-239.patch, Hadoop-239_1.patch
>
>
> The jobtracker's WI, keeps track of jobs executed in the past 24 hours.
> if the cluster was idle for a day (say Sunday) it drops all its history.
> Monday morning, the page is empty.
> Better would be to store a fixed number of jobs (say 10 each of succeeded and failed jobs).
> Also, if the job tracker is restarted, it loses all its history.
> The history should be persistent, withstanding restarts and upgrades.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 26 19:59:46 2006
Return-Path: 
 <hadoop-dev-return-3945-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46212 invoked from network); 26 Sep 2006 19:59:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Sep 2006 19:59:46 -0000
Received: (qmail 98144 invoked by uid 500); 26 Sep 2006 19:59:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98119 invoked by uid 500); 26 Sep 2006 19:59:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98016 invoked by uid 99); 26 Sep 2006 19:59:40 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Sep 2006 12:59:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:56615]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 1B/11-15364-BA689154 for <hadoop-dev@lucene.apache.org>;
 Tue, 26 Sep 2006 12:59:39 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 541327142C7
	for <hadoop-dev@lucene.apache.org>; Tue, 26 Sep 2006 19:55:51 +0000 (GMT)
Message-ID: <263472.1159300551341.JavaMail.jira@brutus>
Date: Tue, 26 Sep 2006 12:55:51 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-559) Support file patterns in dfs
 commands
In-Reply-To: <9006329.1159224891271.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-559?page=comments#action_12437926 ] 
            
Doug Cutting commented on HADOOP-559:
-------------------------------------

> there is a bug in ListPathsRaw of LocalFileSystem

Can we fix that in this patch too?

> DFSShell uses listPaths[] of FileSystem. So I make the method public.

I'm okay with this, but a better javadoc would be nice.

Thanks!

> Support file patterns in dfs commands
> -------------------------------------
>
>                 Key: HADOOP-559
>                 URL: http://issues.apache.org/jira/browse/HADOOP-559
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.6.2
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.7.0
>
>         Attachments: glob.patch, glob.patch
>
>
> Currently DFSShell does not support file patterns in dfs file names. It's quite inconvenient for users when they need to manipulate multiple files.
> This issue is intended to extend DFSShell to interprete file patterns. A file pattern contains special special pattern matching characters:
> ?: matches any character
> *: matches zero or more characters
> [abc]: matches a character from character set {a, b, c}
> [a-c]: matches a character from character range: {a...c}
> [^a]: matches a character not in character set or range {a}
> \c:  escape any special meaning of character c
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 26 20:27:40 2006
Return-Path: 
 <hadoop-dev-return-3946-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 63475 invoked from network); 26 Sep 2006 20:27:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Sep 2006 20:27:40 -0000
Received: (qmail 45981 invoked by uid 500); 26 Sep 2006 20:27:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 45780 invoked by uid 500); 26 Sep 2006 20:27:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 45771 invoked by uid 99); 26 Sep 2006 20:27:39 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Sep 2006 13:27:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:49751]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 03/60-15942-B3D89154 for <hadoop-dev@lucene.apache.org>;
 Tue, 26 Sep 2006 13:27:39 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 373FB7142A1
	for <hadoop-dev@lucene.apache.org>; Tue, 26 Sep 2006 20:23:51 +0000 (GMT)
Message-ID: <10920165.1159302231223.JavaMail.jira@brutus>
Date: Tue, 26 Sep 2006 13:23:51 -0700 (PDT)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-559) Support file patterns in dfs
 commands
In-Reply-To: <9006329.1159224891271.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-559?page=comments#action_12437935 ] 
            
Hairong Kuang commented on HADOOP-559:
--------------------------------------

The new patch fixed the bug in LocalFileSystem and added a better javadoc to listPaths(Path[]). Thanks.

> Support file patterns in dfs commands
> -------------------------------------
>
>                 Key: HADOOP-559
>                 URL: http://issues.apache.org/jira/browse/HADOOP-559
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.6.2
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.7.0
>
>         Attachments: glob.patch, glob.patch
>
>
> Currently DFSShell does not support file patterns in dfs file names. It's quite inconvenient for users when they need to manipulate multiple files.
> This issue is intended to extend DFSShell to interprete file patterns. A file pattern contains special special pattern matching characters:
> ?: matches any character
> *: matches zero or more characters
> [abc]: matches a character from character set {a, b, c}
> [a-c]: matches a character from character range: {a...c}
> [^a]: matches a character not in character set or range {a}
> \c:  escape any special meaning of character c
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 26 21:15:41 2006
Return-Path: 
 <hadoop-dev-return-3947-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 88145 invoked from network); 26 Sep 2006 21:15:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Sep 2006 21:15:41 -0000
Received: (qmail 31947 invoked by uid 500); 26 Sep 2006 21:15:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 31920 invoked by uid 500); 26 Sep 2006 21:15:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31911 invoked by uid 99); 26 Sep 2006 21:15:39 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Sep 2006 14:15:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:34073]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id F1/30-16382-B7899154 for <hadoop-dev@lucene.apache.org>;
 Tue, 26 Sep 2006 14:15:39 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 379067142A1
	for <hadoop-dev@lucene.apache.org>; Tue, 26 Sep 2006 21:11:51 +0000 (GMT)
Message-ID: <9983440.1159305111224.JavaMail.jira@brutus>
Date: Tue, 26 Sep 2006 14:11:51 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-559) Support file patterns in dfs commands
In-Reply-To: <9006329.1159224891271.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-559?page=all ]

Doug Cutting updated HADOOP-559:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Hairong!

> Support file patterns in dfs commands
> -------------------------------------
>
>                 Key: HADOOP-559
>                 URL: http://issues.apache.org/jira/browse/HADOOP-559
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.6.2
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.7.0
>
>         Attachments: glob.patch, glob.patch
>
>
> Currently DFSShell does not support file patterns in dfs file names. It's quite inconvenient for users when they need to manipulate multiple files.
> This issue is intended to extend DFSShell to interprete file patterns. A file pattern contains special special pattern matching characters:
> ?: matches any character
> *: matches zero or more characters
> [abc]: matches a character from character set {a, b, c}
> [a-c]: matches a character from character range: {a...c}
> [^a]: matches a character not in character set or range {a}
> \c:  escape any special meaning of character c
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 26 21:19:41 2006
Return-Path: 
 <hadoop-dev-return-3948-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 89106 invoked from network); 26 Sep 2006 21:19:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Sep 2006 21:19:41 -0000
Received: (qmail 37362 invoked by uid 500); 26 Sep 2006 21:19:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 37282 invoked by uid 500); 26 Sep 2006 21:19:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 37273 invoked by uid 99); 26 Sep 2006 21:19:40 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Sep 2006 14:19:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:46136]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 34/40-16382-C6999154 for <hadoop-dev@lucene.apache.org>;
 Tue, 26 Sep 2006 14:19:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6A0587142C7
	for <hadoop-dev@lucene.apache.org>; Tue, 26 Sep 2006 21:15:52 +0000 (GMT)
Message-ID: <21142354.1159305352429.JavaMail.jira@brutus>
Date: Tue, 26 Sep 2006 14:15:52 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-508) random seeks using FSDataInputStream
 can become invalid such that reads return invalid data
In-Reply-To: <16646446.1157489304574.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-508?page=all ]

Milind Bhandarkar reassigned HADOOP-508:
----------------------------------------

    Assignee: Milind Bhandarkar

> random seeks using FSDataInputStream can become invalid such that reads return invalid data
> -------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-508
>                 URL: http://issues.apache.org/jira/browse/HADOOP-508
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Christian Kunz
>         Assigned To: Milind Bhandarkar
>
> Some of my applications using Hadoop DFS  receive wrong data after certain random seeks. After some investigation I believe (without looking at source code of java.io.BufferedInputStream) that it basically boils down to the fact that the method 
> read(byte[] b, int off, int len), when called with an external buffer larger than the internal buffer, reads into the external buffer directly without using the internal buffer anymore, but without invalidating the internal buffer by setting the variable 'count' to 0 such that a subsequent seek to an offset which is closer to the 'position' of the Positioncache than the internal buffersize will put the current position into the internal buffer containing outdated data from somewhere else.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 26 21:58:41 2006
Return-Path: 
 <hadoop-dev-return-3949-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 98580 invoked from network); 26 Sep 2006 21:58:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Sep 2006 21:58:41 -0000
Received: (qmail 78553 invoked by uid 500); 26 Sep 2006 21:58:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 78531 invoked by uid 500); 26 Sep 2006 21:58:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 78522 invoked by uid 99); 26 Sep 2006 21:58:40 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Sep 2006 14:58:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:37650]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 62/01-16382-F82A9154 for <hadoop-dev@lucene.apache.org>;
 Tue, 26 Sep 2006 14:58:39 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AD6E57142A1
	for <hadoop-dev@lucene.apache.org>; Tue, 26 Sep 2006 21:54:51 +0000 (GMT)
Message-ID: <31474030.1159307691707.JavaMail.jira@brutus>
Date: Tue, 26 Sep 2006 14:54:51 -0700 (PDT)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-550) Text constructure can throw
 exception
In-Reply-To: <6747780.1158701362340.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-550?page=comments#action_12437954 ] 
            
Hairong Kuang commented on HADOOP-550:
--------------------------------------

Currently class Text is the default class for text inputs. Because only valid UTF8 bytes are allowed in Text, if user inputs contain non-UTF8 bytes and Text records are written back to output files, a side effect is that no-UTF8 bytes are replaced or dropped in the output files. Users may not be happy about this.

An alternative way is to allow non-UTF8 bytes in Text by removing the validation in Text constructors. This gives users greater freedom to handle invalid UTF8 bytes in their code if there is any and allows them to write orginal text records back to output files. 

> Text constructure can throw exception
> -------------------------------------
>
>                 Key: HADOOP-550
>                 URL: http://issues.apache.org/jira/browse/HADOOP-550
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Bryan Pendleton
>
> I finally got back around to moving my working code to using Text objects.
> And, once again, switching to Text (from UTF8) means my jobs are failing. This time, its better defined - constructing a Text from a string extracted from Real World data makes the Text object constructor throw a CharacterCodingException. This may be legit - I don't actually understand UTF well enough to understand what's wrong with the supplied string. I'm assembling a series of strings, some of which are user-supplied, and something causes the Text constructor to barf.
> However, this is still completely unacceptable. If I need to stuff textual data someplace - I need the container to *do* it. If user-supplied inputs can't be stored as a "UTF" aware text value, then another container needs to be brought into existence. Sure, I can use a BytesWritable, but, as its name implies - Text should handle "text". If Text is supposed to == "StringWritable", then, well, it doesn't, yet.
> I admit to being a few weeks' back in the bleeding edge at this point, so maybe my particluar Text bug has been fixed, though the only fixes to Text I see are adopting it into more of the internals of Hadoop. This argument goes double in that case - if we're using Text objects internally, it should really be a totally solid object - construct one from a String, get one back, but _never_  throw a content-related Exception. Or, if Text is not the right object because its data-sensitive, then I argue we shouldn't use it in any case where data might kill it - internal, or anywhere else (by default).
> Please, don't remove UTF8, for now.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Sep 26 22:30:15 2006
Return-Path: 
 <hadoop-dev-return-3950-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 6565 invoked from network); 26 Sep 2006 22:30:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Sep 2006 22:30:15 -0000
Received: (qmail 17666 invoked by uid 500); 26 Sep 2006 22:30:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17646 invoked by uid 500); 26 Sep 2006 22:30:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17524 invoked by uid 99); 26 Sep 2006 22:30:09 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Sep 2006 15:30:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:53906]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 3B/81-17360-BD9A9154 for <hadoop-dev@lucene.apache.org>;
 Tue, 26 Sep 2006 15:29:48 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C61367142A1
	for <hadoop-dev@lucene.apache.org>; Tue, 26 Sep 2006 22:25:51 +0000 (GMT)
Message-ID: <16351730.1159309551808.JavaMail.jira@brutus>
Date: Tue, 26 Sep 2006 15:25:51 -0700 (PDT)
From: "Addison Phillips (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-550) Text constructure can throw
 exception
In-Reply-To: <6747780.1158701362340.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-550?page=comments#action_12437958 ] 
            
Addison Phillips commented on HADOOP-550:
-----------------------------------------

If you want to have *text*, then you need to know the encoding and have some assurance that it is correct. A text buffer that contains random binary data isn't very useful: you can't do any useful *text* processing on it. The String class's behavior was modified post 1.4 so that instead of silently emiting a null string (caused by the buried CharacterCodingException), it instead replaces bad sequences with U+FFFD characters. The String class is a bit lenient about this: it allows non-shortest form UTF-8 (that is, 0xC0 0x80 == U+0000 aka 'NULL'), while Text's validation routine does not permit this (it's a security flaw to process non-shortest form UTF-8). But it doesn't return the original bytes if the input buffer was bad. 

Either way, I think that Text should emulate this behavior and do replacements, although I note that Text objects constructed with buffers that use an encoding other than UTF-8 will just silently do unexpected or bad things (it doesn't matter if you use the new Text class or the old Utf8 class, it happens either way).

Using the ByteBuffer version of the validation method will help implement this.

Users may not be happy to have their binary data buffers being "modified" by the Text class. But I'd maintain that their original records are *not* text records if they contain damaged data. A lot of "mostly-ASCII" buffers are really in Latin-1, but work okay as UTF-8 until you encounter a non-ASCII character. The Text class, as a wrapper around a Unicode text buffer, can identify these cases (where the user has misidentified the encoding). This is usually a bug somewhere else (your data was writting using a default OutputStreamWriter rather than one with UTF-8, for example). Something is wrong: the class should not perform questionable operations on the data. I could warn the programmer (Exception) or do something to prevent relatively worse results (replace silently).  

If what you really want is not a "text buffer" but just a byte[] or bit-bucket, don't use a Text object for it. That isn't what it is for. If you have a buffer that produces errors, you probably need to provide an encoding to convert the buffer or debug why the buffer contains non-UTF-8 in the first place.

> Text constructure can throw exception
> -------------------------------------
>
>                 Key: HADOOP-550
>                 URL: http://issues.apache.org/jira/browse/HADOOP-550
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Bryan Pendleton
>
> I finally got back around to moving my working code to using Text objects.
> And, once again, switching to Text (from UTF8) means my jobs are failing. This time, its better defined - constructing a Text from a string extracted from Real World data makes the Text object constructor throw a CharacterCodingException. This may be legit - I don't actually understand UTF well enough to understand what's wrong with the supplied string. I'm assembling a series of strings, some of which are user-supplied, and something causes the Text constructor to barf.
> However, this is still completely unacceptable. If I need to stuff textual data someplace - I need the container to *do* it. If user-supplied inputs can't be stored as a "UTF" aware text value, then another container needs to be brought into existence. Sure, I can use a BytesWritable, but, as its name implies - Text should handle "text". If Text is supposed to == "StringWritable", then, well, it doesn't, yet.
> I admit to being a few weeks' back in the bleeding edge at this point, so maybe my particluar Text bug has been fixed, though the only fixes to Text I see are adopting it into more of the internals of Hadoop. This argument goes double in that case - if we're using Text objects internally, it should really be a totally solid object - construct one from a String, get one back, but _never_  throw a content-related Exception. Or, if Text is not the right object because its data-sensitive, then I argue we shouldn't use it in any case where data might kill it - internal, or anywhere else (by default).
> Please, don't remove UTF8, for now.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 27 00:35:42 2006
Return-Path: 
 <hadoop-dev-return-3951-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 29451 invoked from network); 27 Sep 2006 00:35:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Sep 2006 00:35:42 -0000
Received: (qmail 28633 invoked by uid 500); 27 Sep 2006 00:35:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28600 invoked by uid 500); 27 Sep 2006 00:35:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28591 invoked by uid 99); 27 Sep 2006 00:35:41 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Sep 2006 17:35:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:60187]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 0E/11-20516-C57C9154 for <hadoop-dev@lucene.apache.org>;
 Tue, 26 Sep 2006 17:35:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 97A2F7141B8
	for <hadoop-dev@lucene.apache.org>; Wed, 27 Sep 2006 00:31:52 +0000 (GMT)
Message-ID: <4113764.1159317112618.JavaMail.jira@brutus>
Date: Tue, 26 Sep 2006 17:31:52 -0700 (PDT)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-550) Text constructure can throw exception
In-Reply-To: <6747780.1158701362340.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-550?page=all ]

Hairong Kuang reassigned HADOOP-550:
------------------------------------

    Assignee: Hairong Kuang

> Text constructure can throw exception
> -------------------------------------
>
>                 Key: HADOOP-550
>                 URL: http://issues.apache.org/jira/browse/HADOOP-550
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Bryan Pendleton
>         Assigned To: Hairong Kuang
>
> I finally got back around to moving my working code to using Text objects.
> And, once again, switching to Text (from UTF8) means my jobs are failing. This time, its better defined - constructing a Text from a string extracted from Real World data makes the Text object constructor throw a CharacterCodingException. This may be legit - I don't actually understand UTF well enough to understand what's wrong with the supplied string. I'm assembling a series of strings, some of which are user-supplied, and something causes the Text constructor to barf.
> However, this is still completely unacceptable. If I need to stuff textual data someplace - I need the container to *do* it. If user-supplied inputs can't be stored as a "UTF" aware text value, then another container needs to be brought into existence. Sure, I can use a BytesWritable, but, as its name implies - Text should handle "text". If Text is supposed to == "StringWritable", then, well, it doesn't, yet.
> I admit to being a few weeks' back in the bleeding edge at this point, so maybe my particluar Text bug has been fixed, though the only fixes to Text I see are adopting it into more of the internals of Hadoop. This argument goes double in that case - if we're using Text objects internally, it should really be a totally solid object - construct one from a String, get one back, but _never_  throw a content-related Exception. Or, if Text is not the right object because its data-sensitive, then I argue we shouldn't use it in any case where data might kill it - internal, or anywhere else (by default).
> Please, don't remove UTF8, for now.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 27 16:11:44 2006
Return-Path: 
 <hadoop-dev-return-3953-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 14485 invoked from network); 27 Sep 2006 16:11:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Sep 2006 16:11:44 -0000
Received: (qmail 37874 invoked by uid 500); 27 Sep 2006 16:11:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 37662 invoked by uid 500); 27 Sep 2006 16:11:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Delivered-To: moderator for hadoop-dev@lucene.apache.org
Received: (qmail 80182 invoked by uid 99); 27 Sep 2006 09:05:25 -0000
Authentication-Results: idunn.apache.osuosl.org header.from=tcurdt@gmail.com;
 domainkeys=good
Authentication-Results: idunn.apache.osuosl.org smtp.mail=tcurdt@gmail.com;
 spf=pass
X-ASF-Spam-Status: No, hits=0.5 required=5.0 tests=DNS_FROM_RFC_ABUSE
Received-SPF: pass (idunn.apache.osuosl.org: domain gmail.com designates
 64.233.166.183 as permitted sender)
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing
 draft-delany-domainkeys-base-01
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition:x-google-sender-auth;
        b=An8NWL5UpAAB2Qp6MqPeK1fu9j0QxzuQhkiTrploPBHISiIvY/Stu/QlErmSH7vybdzBAnr9YseP/JYKbx/pxHsu66DsXCn2y/cK/SepQPhi2dHMeflKcc5mTVTEZxmTOndcO+bOSDtWKTEliARQk1Qhlapf+Lz263y1pChxp5I=
Message-ID: <98e4f1cd0609270205l15f423bbp2158911ac25a5ce8@mail.gmail.com>
Date: Wed, 27 Sep 2006 11:05:20 +0200
From: "Torsten Curdt" <tcurdt@apache.org>
Sender: tcurdt@gmail.com
To: hadoop-dev@lucene.apache.org
Subject: upgrades
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Google-Sender-Auth: d7e8b13917af4d62
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hey guys,

Could someone give a quick summary of what is already implemented of
the upgrade features and where still some help is required :)

 http://wiki.apache.org/lucene-hadoop/Hadoop_Upgrade

cheers
--
Torsten

From MAILER-DAEMON Wed Sep 27 13:44:43 2006
Return-Path: 
 <hadoop-dev-return-3952-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 66718 invoked from network); 27 Sep 2006 13:44:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Sep 2006 13:44:43 -0000
Received: (qmail 14128 invoked by uid 500); 27 Sep 2006 13:44:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14020 invoked by uid 500); 27 Sep 2006 13:44:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13948 invoked by uid 99); 27 Sep 2006 13:44:42 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Sep 2006 06:44:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:47134]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id A4/00-27227-8408A154 for <hadoop-dev@lucene.apache.org>;
 Wed, 27 Sep 2006 06:44:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5A3247141F4
	for <hadoop-dev@lucene.apache.org>; Wed, 27 Sep 2006 13:40:51 +0000 (GMT)
Message-ID: <27491016.1159364451366.JavaMail.jira@brutus>
Date: Wed, 27 Sep 2006 06:40:51 -0700 (PDT)
From: "Johan Oskarson (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-562) Jobs fail if mapred.local.dir have
 several entries in it
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Jobs fail if mapred.local.dir have several entries in it
--------------------------------------------------------

                 Key: HADOOP-562
                 URL: http://issues.apache.org/jira/browse/HADOOP-562
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.7.0
            Reporter: Johan Oskarson


Since HADOOP-288 got commited jobs (sometimes) fail if you have a comma seperated list of directories as your mapred.local.dir

The jobs fail with ClassNotFoundExceptions, I'm guessing the job.jar is put on one of the disks but something fails when reading/finding it again.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 27 18:49:55 2006
Return-Path: 
 <hadoop-dev-return-3954-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 63673 invoked from network); 27 Sep 2006 18:49:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Sep 2006 18:49:55 -0000
Received: (qmail 68193 invoked by uid 500); 27 Sep 2006 18:49:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68177 invoked by uid 500); 27 Sep 2006 18:49:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68168 invoked by uid 99); 27 Sep 2006 18:49:54 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Sep 2006 11:49:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:52635]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id F2/04-29789-DC7CA154 for <hadoop-dev@lucene.apache.org>;
 Wed, 27 Sep 2006 11:49:50 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5460C7141D1
	for <hadoop-dev@lucene.apache.org>; Wed, 27 Sep 2006 18:46:00 +0000 (GMT)
Message-ID: <10854607.1159382760343.JavaMail.jira@brutus>
Date: Wed, 27 Sep 2006 11:46:00 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-538?page=all ]

Arun C Murthy updated HADOOP-538:
---------------------------------

    Attachment: HADOOP-538.patch
                HADOOP-538_benchmarks.tgz

Here's a patch incorporating 2 major features:
a) A framework for decoupling the '(de)compressor' from the 'stream' as discussed on this issue i.e. the {Com|Decom}pressor interfaces and a concrete implementation of a Data{Com|Decom}pression{Out|In}putStream for plugging the (de)compressors.
b) A straight-forward wrapper over the popular zlib algorithm (http://www.zlib.net) using a 'direct' java.nio.ByteBuffer - this gives us 60%-70% improvement in performance over existing java.util.zip.{De|In}flater (benchmarks attached).

I have also added some amount of framework (tweaks in build.xml to build the native libhadoop.so, Makefiles, src/native directory etc.) so that any future 'native' code written for hadoop will fit into the native-code framework (src/native dir and libhadoop.so) fairly easily... I have built the infrastructure so that only 1 share-object (libhadoop.so) is created by the top-level Makefile (src/native/Makefile) and it should have *all* of the necessary 'native' code for hadoop.

I'd appreciate feedback/improvements to any of the above stuff...

Doug, could you please treat this patch as 99.9% ready and hold-off committing it (assuming you are satisfied with it) so as to get as much feedback over this as possible? Thanks!


> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.7.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 27 19:01:40 2006
Return-Path: 
 <hadoop-dev-return-3955-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 66235 invoked from network); 27 Sep 2006 19:01:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Sep 2006 19:01:40 -0000
Received: (qmail 80139 invoked by uid 500); 27 Sep 2006 19:01:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 80106 invoked by uid 500); 27 Sep 2006 19:01:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 80097 invoked by uid 99); 27 Sep 2006 19:01:40 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Sep 2006 12:01:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:46075]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id E8/44-29789-39ACA154 for <hadoop-dev@lucene.apache.org>;
 Wed, 27 Sep 2006 12:01:39 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 28ADA7141D1
	for <hadoop-dev@lucene.apache.org>; Wed, 27 Sep 2006 18:57:50 +0000 (GMT)
Message-ID: <28125744.1159383470163.JavaMail.jira@brutus>
Date: Wed, 27 Sep 2006 11:57:50 -0700 (PDT)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-563) DFS client should try to re-new lease
 if it gets a lease expiration exception when it adds a block to a file
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

DFS client should try to re-new lease if it gets a lease expiration exception when it adds a block to a file
------------------------------------------------------------------------------------------------------------

                 Key: HADOOP-563
                 URL: http://issues.apache.org/jira/browse/HADOOP-563
             Project: Hadoop
          Issue Type: Bug
            Reporter: Runping Qi



In the current DFS client implementation, there is one thread responsible for renewing leases. If for whatever reason, that thread runs behind, the lease may get expired. That causes the client gets a lease expiration exception when writing a block. The consequence of that is very devastating: the client can no longer write to the file, and all the partial results up to that point are gone! This is especially costly for some map reduce jobs where a reducer may take hours or even days to sort the intermediate results before the actual reducing work can start.

The problem will be solved if the flush method of  DFS client can renew lease on demand. That is, it should try to re-new lease  when it catches a lease expiration exception. That way,  even when under heavy load and the lease renewing thread runs behind, the reducer  task (or what ever tasks use that client) can preceed.  That will be a huge saving in some cases (where sorting intermediate results take a long time to finish). We can set a limit on the number of retries, and may even make it configurable (or changeable at runtime). 

The namenode can use a different expiration time that is much higher than the current 1 minute lease expiration time for cleaning  up the abandoned unclosed files.

 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 27 19:54:43 2006
Return-Path: 
 <hadoop-dev-return-3956-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84201 invoked from network); 27 Sep 2006 19:54:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Sep 2006 19:54:43 -0000
Received: (qmail 50586 invoked by uid 500); 27 Sep 2006 19:54:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 50563 invoked by uid 500); 27 Sep 2006 19:54:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 50554 invoked by uid 99); 27 Sep 2006 19:54:42 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Sep 2006 12:54:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:44904]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 80/40-01778-107DA154 for <hadoop-dev@lucene.apache.org>;
 Wed, 27 Sep 2006 12:54:41 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F2ABF7141D1
	for <hadoop-dev@lucene.apache.org>; Wed, 27 Sep 2006 19:50:51 +0000 (GMT)
Message-ID: <16980453.1159386651991.JavaMail.jira@brutus>
Date: Wed, 27 Sep 2006 12:50:51 -0700 (PDT)
From: "Dawid Weiss (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-538?page=comments#action_12438205 ] 
            
Dawid Weiss commented on HADOOP-538:
------------------------------------

Don't know if it's at all relevant, but if you must stick to pure Java and still want to avoid SUN's buggy compression streams, we have an implementation of inflater/deflater and GZIP wrappers on top of jzlib. It works just fine for us (although is about 50% slower compared to the JDK version, which, although buggy, has certain native implementations).

http://svn.sourceforge.net/viewvc/carrot2/trunk/carrot2/components/carrot2-util-gzip/

Dawid


> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.7.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 27 20:20:44 2006
Return-Path: 
 <hadoop-dev-return-3957-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92633 invoked from network); 27 Sep 2006 20:20:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Sep 2006 20:20:44 -0000
Received: (qmail 74141 invoked by uid 500); 27 Sep 2006 20:20:43 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 74123 invoked by uid 500); 27 Sep 2006 20:20:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 74114 invoked by uid 99); 27 Sep 2006 20:20:43 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Sep 2006 13:20:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:49853]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 4F/C0-01778-81DDA154 for <hadoop-dev@lucene.apache.org>;
 Wed, 27 Sep 2006 13:20:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3138A7141BB
	for <hadoop-dev@lucene.apache.org>; Wed, 27 Sep 2006 20:16:51 +0000 (GMT)
Message-ID: <20746792.1159388211199.JavaMail.jira@brutus>
Date: Wed, 27 Sep 2006 13:16:51 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-538?page=comments#action_12438210 ] 
            
Doug Cutting commented on HADOOP-538:
-------------------------------------

A lot of Hadoop developers might not have the right development environment to build the native libraries.  For example, I use Ubuntu, and had previously manually installed gcc, make and a few other things in order to get libhdfs to compile, but to get this to compile I had to install zlib1g-dev.  I have not yet tried to build this under cygwin, and don't even know what packages are required there.

Do you think it would be possible to commit pre-built versions of libhadoop.so for common platforms?  Minimally we could include 32-bit builds for cygwin and linux.  This will complicate the process of changing these, but the alternative is to complicate the release process, since we currently don't require non-developers to have much more than a JRE.

And/or we can fallback (with a warning) to using either Sun's implementation or jzlib when an appropriate libhadoop.so is not available.  Then we could still decide to ship with a pre-built version (e.g., linux only, which would be easy, since releases are all built on linux) but things would still work fine out-of-the-box on other platforms and can be optimized by those who wish to install the required developer tools.

A corallary to these approaches is that the generated libhadoop file name should probably include the OS and architecture names.

Thoughts?


> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.7.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 27 20:32:42 2006
Return-Path: 
 <hadoop-dev-return-3958-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96939 invoked from network); 27 Sep 2006 20:32:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Sep 2006 20:32:42 -0000
Received: (qmail 85504 invoked by uid 500); 27 Sep 2006 20:32:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 85471 invoked by uid 500); 27 Sep 2006 20:32:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 85462 invoked by uid 99); 27 Sep 2006 20:32:41 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Sep 2006 13:32:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:36446]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 2B/11-01778-8EFDA154 for <hadoop-dev@lucene.apache.org>;
 Wed, 27 Sep 2006 13:32:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 39CA17141D1
	for <hadoop-dev@lucene.apache.org>; Wed, 27 Sep 2006 20:28:51 +0000 (GMT)
Message-ID: <7953131.1159388931234.JavaMail.jira@brutus>
Date: Wed, 27 Sep 2006 13:28:51 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-563) DFS client should try to re-new
 lease if it gets a lease expiration exception when it adds a block to a
 file
In-Reply-To: <28125744.1159383470163.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-563?page=comments#action_12438212 ] 
            
Doug Cutting commented on HADOOP-563:
-------------------------------------

If the lease-renewing thread has fallen behind, what confidence do we have that the client will be able to renew the lease any easier?  Moreover, this approach sounds like it would place more load on the namenode, which it probably doesn't need if it is being slow to respond to lease requests.

Perhaps we could instead change the client to wait for the lease-renewing thread to sucessfully renew things.  But first we should try to better understand the circumstances under which the lease-renewing thread fails to renew things.  It currently waits for half the lease period, then starts trying to renew leases once per second until it succeeds.  That sounds like a fine method to me.  Is the namenode sometimes unresponsive for longer than half lease period?  If so, then waiting until the renewer succeeds would be an appropriate solution, no?


> DFS client should try to re-new lease if it gets a lease expiration exception when it adds a block to a file
> ------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-563
>                 URL: http://issues.apache.org/jira/browse/HADOOP-563
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Runping Qi
>
> In the current DFS client implementation, there is one thread responsible for renewing leases. If for whatever reason, that thread runs behind, the lease may get expired. That causes the client gets a lease expiration exception when writing a block. The consequence of that is very devastating: the client can no longer write to the file, and all the partial results up to that point are gone! This is especially costly for some map reduce jobs where a reducer may take hours or even days to sort the intermediate results before the actual reducing work can start.
> The problem will be solved if the flush method of  DFS client can renew lease on demand. That is, it should try to re-new lease  when it catches a lease expiration exception. That way,  even when under heavy load and the lease renewing thread runs behind, the reducer  task (or what ever tasks use that client) can preceed.  That will be a huge saving in some cases (where sorting intermediate results take a long time to finish). We can set a limit on the number of retries, and may even make it configurable (or changeable at runtime). 
> The namenode can use a different expiration time that is much higher than the current 1 minute lease expiration time for cleaning  up the abandoned unclosed files.
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 27 21:20:43 2006
Return-Path: 
 <hadoop-dev-return-3959-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10569 invoked from network); 27 Sep 2006 21:20:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Sep 2006 21:20:43 -0000
Received: (qmail 52380 invoked by uid 500); 27 Sep 2006 21:20:43 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 52178 invoked by uid 500); 27 Sep 2006 21:20:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 52169 invoked by uid 99); 27 Sep 2006 21:20:42 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Sep 2006 14:20:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:44648]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id A0/32-01778-A2BEA154 for <hadoop-dev@lucene.apache.org>;
 Wed, 27 Sep 2006 14:20:42 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6E00C7141F1
	for <hadoop-dev@lucene.apache.org>; Wed, 27 Sep 2006 21:16:52 +0000 (GMT)
Message-ID: <6363074.1159391812447.JavaMail.jira@brutus>
Date: Wed, 27 Sep 2006 14:16:52 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-508) random seeks using FSDataInputStream
 can become invalid such that reads return invalid data
In-Reply-To: <16646446.1157489304574.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-508?page=all ]

Milind Bhandarkar updated HADOOP-508:
-------------------------------------

    Attachment: hadoop-508.patch

Fixed.

> random seeks using FSDataInputStream can become invalid such that reads return invalid data
> -------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-508
>                 URL: http://issues.apache.org/jira/browse/HADOOP-508
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.6.2
>            Reporter: Christian Kunz
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.7.0
>
>         Attachments: hadoop-508.patch
>
>
> Some of my applications using Hadoop DFS  receive wrong data after certain random seeks. After some investigation I believe (without looking at source code of java.io.BufferedInputStream) that it basically boils down to the fact that the method 
> read(byte[] b, int off, int len), when called with an external buffer larger than the internal buffer, reads into the external buffer directly without using the internal buffer anymore, but without invalidating the internal buffer by setting the variable 'count' to 0 such that a subsequent seek to an offset which is closer to the 'position' of the Positioncache than the internal buffersize will put the current position into the internal buffer containing outdated data from somewhere else.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 27 21:20:46 2006
Return-Path: 
 <hadoop-dev-return-3960-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10622 invoked from network); 27 Sep 2006 21:20:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Sep 2006 21:20:46 -0000
Received: (qmail 52615 invoked by uid 500); 27 Sep 2006 21:20:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 52414 invoked by uid 500); 27 Sep 2006 21:20:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 52405 invoked by uid 99); 27 Sep 2006 21:20:45 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Sep 2006 14:20:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:44653]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 51/32-01778-C2BEA154 for <hadoop-dev@lucene.apache.org>;
 Wed, 27 Sep 2006 14:20:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E19A97141BB
	for <hadoop-dev@lucene.apache.org>; Wed, 27 Sep 2006 21:16:54 +0000 (GMT)
Message-ID: <10211010.1159391814921.JavaMail.jira@brutus>
Date: Wed, 27 Sep 2006 14:16:54 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-508) random seeks using FSDataInputStream
 can become invalid such that reads return invalid data
In-Reply-To: <16646446.1157489304574.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-508?page=all ]

Milind Bhandarkar updated HADOOP-508:
-------------------------------------

               Status: Patch Available  (was: Open)
        Fix Version/s: 0.7.0
    Affects Version/s: 0.6.2
                           (was: 0.5.0)

Fixed.

> random seeks using FSDataInputStream can become invalid such that reads return invalid data
> -------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-508
>                 URL: http://issues.apache.org/jira/browse/HADOOP-508
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.6.2
>            Reporter: Christian Kunz
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.7.0
>
>         Attachments: hadoop-508.patch
>
>
> Some of my applications using Hadoop DFS  receive wrong data after certain random seeks. After some investigation I believe (without looking at source code of java.io.BufferedInputStream) that it basically boils down to the fact that the method 
> read(byte[] b, int off, int len), when called with an external buffer larger than the internal buffer, reads into the external buffer directly without using the internal buffer anymore, but without invalidating the internal buffer by setting the variable 'count' to 0 such that a subsequent seek to an offset which is closer to the 'position' of the Positioncache than the internal buffersize will put the current position into the internal buffer containing outdated data from somewhere else.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 27 21:24:42 2006
Return-Path: 
 <hadoop-dev-return-3961-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 11353 invoked from network); 27 Sep 2006 21:24:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Sep 2006 21:24:42 -0000
Received: (qmail 55448 invoked by uid 500); 27 Sep 2006 21:24:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55247 invoked by uid 500); 27 Sep 2006 21:24:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55235 invoked by uid 99); 27 Sep 2006 21:24:42 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Sep 2006 14:24:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:37808]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 36/42-01778-91CEA154 for <hadoop-dev@lucene.apache.org>;
 Wed, 27 Sep 2006 14:24:41 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C384B7141E0
	for <hadoop-dev@lucene.apache.org>; Wed, 27 Sep 2006 21:20:51 +0000 (GMT)
Message-ID: <25033787.1159392051798.JavaMail.jira@brutus>
Date: Wed, 27 Sep 2006 14:20:51 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-498) fsck should execute faster
In-Reply-To: <16510954.1157010324263.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-498?page=all ]

Milind Bhandarkar reassigned HADOOP-498:
----------------------------------------

    Assignee: Milind Bhandarkar

> fsck should execute faster
> --------------------------
>
>                 Key: HADOOP-498
>                 URL: http://issues.apache.org/jira/browse/HADOOP-498
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: Milind Bhandarkar
>
> on a good size dfs, with a few 100000 blocks, fsck takes around 30 minutes, while dfs -du takes only a couple of seconds.
> fsck should take seconds, rather than minutes. It should be a namenode operation, not a client program.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 27 21:24:44 2006
Return-Path: 
 <hadoop-dev-return-3962-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 11386 invoked from network); 27 Sep 2006 21:24:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Sep 2006 21:24:44 -0000
Received: (qmail 55654 invoked by uid 500); 27 Sep 2006 21:24:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55474 invoked by uid 500); 27 Sep 2006 21:24:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55465 invoked by uid 99); 27 Sep 2006 21:24:43 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Sep 2006 14:24:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:37811]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 56/42-01778-B1CEA154 for <hadoop-dev@lucene.apache.org>;
 Wed, 27 Sep 2006 14:24:43 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8A0D97141F1
	for <hadoop-dev@lucene.apache.org>; Wed, 27 Sep 2006 21:20:53 +0000 (GMT)
Message-ID: <21468843.1159392053563.JavaMail.jira@brutus>
Date: Wed, 27 Sep 2006 14:20:53 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-498) fsck should execute faster
In-Reply-To: <16510954.1157010324263.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-498?page=comments#action_12438225 ] 
            
Milind Bhandarkar commented on HADOOP-498:
------------------------------------------

Started work on this issue.

> fsck should execute faster
> --------------------------
>
>                 Key: HADOOP-498
>                 URL: http://issues.apache.org/jira/browse/HADOOP-498
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: Milind Bhandarkar
>
> on a good size dfs, with a few 100000 blocks, fsck takes around 30 minutes, while dfs -du takes only a couple of seconds.
> fsck should take seconds, rather than minutes. It should be a namenode operation, not a client program.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 27 21:48:44 2006
Return-Path: 
 <hadoop-dev-return-3963-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17065 invoked from network); 27 Sep 2006 21:48:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Sep 2006 21:48:44 -0000
Received: (qmail 89765 invoked by uid 500); 27 Sep 2006 21:48:43 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 89747 invoked by uid 500); 27 Sep 2006 21:48:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 89733 invoked by uid 99); 27 Sep 2006 21:48:43 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Sep 2006 14:48:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:34588]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id F0/30-02891-8B1FA154 for <hadoop-dev@lucene.apache.org>;
 Wed, 27 Sep 2006 14:48:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 27E9C7141D1
	for <hadoop-dev@lucene.apache.org>; Wed, 27 Sep 2006 21:44:51 +0000 (GMT)
Message-ID: <7984045.1159393491160.JavaMail.jira@brutus>
Date: Wed, 27 Sep 2006 14:44:51 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-563) DFS client should try to re-new
 lease if it gets a lease expiration exception when it adds a block to a
 file
In-Reply-To: <28125744.1159383470163.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-563?page=comments#action_12438231 ] 
            
Yoram Arnon commented on HADOOP-563:
------------------------------------

accelerating lease requests may not be the right approach, given that the typical use case is that the name node is so busy that it wasn't able to reply within half the lease period.
accelerating requests makes sense prior to STONITH, and then the other node should have a high priority thread to reply or risk death, that's clearly not the case here.

Seems like backing off requests is a better policy than accelerating requests.

> DFS client should try to re-new lease if it gets a lease expiration exception when it adds a block to a file
> ------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-563
>                 URL: http://issues.apache.org/jira/browse/HADOOP-563
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Runping Qi
>
> In the current DFS client implementation, there is one thread responsible for renewing leases. If for whatever reason, that thread runs behind, the lease may get expired. That causes the client gets a lease expiration exception when writing a block. The consequence of that is very devastating: the client can no longer write to the file, and all the partial results up to that point are gone! This is especially costly for some map reduce jobs where a reducer may take hours or even days to sort the intermediate results before the actual reducing work can start.
> The problem will be solved if the flush method of  DFS client can renew lease on demand. That is, it should try to re-new lease  when it catches a lease expiration exception. That way,  even when under heavy load and the lease renewing thread runs behind, the reducer  task (or what ever tasks use that client) can preceed.  That will be a huge saving in some cases (where sorting intermediate results take a long time to finish). We can set a limit on the number of retries, and may even make it configurable (or changeable at runtime). 
> The namenode can use a different expiration time that is much higher than the current 1 minute lease expiration time for cleaning  up the abandoned unclosed files.
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 27 22:05:43 2006
Return-Path: 
 <hadoop-dev-return-3964-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 21485 invoked from network); 27 Sep 2006 22:05:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Sep 2006 22:05:43 -0000
Received: (qmail 17188 invoked by uid 500); 27 Sep 2006 22:05:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17158 invoked by uid 500); 27 Sep 2006 22:05:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17149 invoked by uid 99); 27 Sep 2006 22:05:42 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Sep 2006 15:05:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:42717]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 8B/30-03010-5B5FA154 for <hadoop-dev@lucene.apache.org>;
 Wed, 27 Sep 2006 15:05:42 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4471B7141D1
	for <hadoop-dev@lucene.apache.org>; Wed, 27 Sep 2006 22:01:52 +0000 (GMT)
Message-ID: <5564628.1159394512277.JavaMail.jira@brutus>
Date: Wed, 27 Sep 2006 15:01:52 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-508) random seeks using FSDataInputStream
 can become invalid such that reads return invalid data
In-Reply-To: <16646446.1157489304574.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-508?page=all ]

Doug Cutting updated HADOOP-508:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Milind!

> random seeks using FSDataInputStream can become invalid such that reads return invalid data
> -------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-508
>                 URL: http://issues.apache.org/jira/browse/HADOOP-508
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.6.2
>            Reporter: Christian Kunz
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.7.0
>
>         Attachments: hadoop-508.patch
>
>
> Some of my applications using Hadoop DFS  receive wrong data after certain random seeks. After some investigation I believe (without looking at source code of java.io.BufferedInputStream) that it basically boils down to the fact that the method 
> read(byte[] b, int off, int len), when called with an external buffer larger than the internal buffer, reads into the external buffer directly without using the internal buffer anymore, but without invalidating the internal buffer by setting the variable 'count' to 0 such that a subsequent seek to an offset which is closer to the 'position' of the Positioncache than the internal buffersize will put the current position into the internal buffer containing outdated data from somewhere else.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 27 23:03:43 2006
Return-Path: 
 <hadoop-dev-return-3965-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34597 invoked from network); 27 Sep 2006 23:03:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Sep 2006 23:03:43 -0000
Received: (qmail 91492 invoked by uid 500); 27 Sep 2006 23:03:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 91466 invoked by uid 500); 27 Sep 2006 23:03:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 91457 invoked by uid 99); 27 Sep 2006 23:03:42 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Sep 2006 16:03:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:45099]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id DF/B0-03285-E430B154 for <hadoop-dev@lucene.apache.org>;
 Wed, 27 Sep 2006 16:03:42 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 81EC77141BB
	for <hadoop-dev@lucene.apache.org>; Wed, 27 Sep 2006 22:59:52 +0000 (GMT)
Message-ID: <27353125.1159397992529.JavaMail.jira@brutus>
Date: Wed, 27 Sep 2006 15:59:52 -0700 (PDT)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-423) file paths are not normalized
In-Reply-To: <13847288.1154636773936.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-423?page=all ]

Wendy Chien updated HADOOP-423:
-------------------------------

    Attachment: pathnorm2.patch

This patch also contains the check in the namenode. 

> file paths are not normalized
> -----------------------------
>
>                 Key: HADOOP-423
>                 URL: http://issues.apache.org/jira/browse/HADOOP-423
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Christian Kunz
>         Assigned To: Wendy Chien
>         Attachments: pathnorm2.patch
>
>
> Paths containing  '.' or '..' are not normalized -- the corresponding directories actually seem to be created. This is inconsistent and unexpected behavior, and  is particularly painful when running from a working directory, using relative paths that start with ...

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 27 23:03:45 2006
Return-Path: 
 <hadoop-dev-return-3966-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34634 invoked from network); 27 Sep 2006 23:03:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Sep 2006 23:03:45 -0000
Received: (qmail 91735 invoked by uid 500); 27 Sep 2006 23:03:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 91705 invoked by uid 500); 27 Sep 2006 23:03:44 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 91696 invoked by uid 99); 27 Sep 2006 23:03:44 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Sep 2006 16:03:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:45102]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 10/C0-03285-0530B154 for <hadoop-dev@lucene.apache.org>;
 Wed, 27 Sep 2006 16:03:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5AF7B7141E0
	for <hadoop-dev@lucene.apache.org>; Wed, 27 Sep 2006 22:59:54 +0000 (GMT)
Message-ID: <3294105.1159397994370.JavaMail.jira@brutus>
Date: Wed, 27 Sep 2006 15:59:54 -0700 (PDT)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-423) file paths are not normalized
In-Reply-To: <13847288.1154636773936.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-423?page=all ]

Wendy Chien updated HADOOP-423:
-------------------------------

    Attachment:     (was: pathnorm.patch)

> file paths are not normalized
> -----------------------------
>
>                 Key: HADOOP-423
>                 URL: http://issues.apache.org/jira/browse/HADOOP-423
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Christian Kunz
>         Assigned To: Wendy Chien
>         Attachments: pathnorm2.patch
>
>
> Paths containing  '.' or '..' are not normalized -- the corresponding directories actually seem to be created. This is inconsistent and unexpected behavior, and  is particularly painful when running from a working directory, using relative paths that start with ...

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 27 23:11:42 2006
Return-Path: 
 <hadoop-dev-return-3967-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37712 invoked from network); 27 Sep 2006 23:11:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Sep 2006 23:11:42 -0000
Received: (qmail 2596 invoked by uid 500); 27 Sep 2006 23:11:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 2570 invoked by uid 500); 27 Sep 2006 23:11:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 2561 invoked by uid 99); 27 Sep 2006 23:11:41 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Sep 2006 16:11:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:48954]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id E4/F0-03285-C250B154 for <hadoop-dev@lucene.apache.org>;
 Wed, 27 Sep 2006 16:11:41 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 30D4A7141BB
	for <hadoop-dev@lucene.apache.org>; Wed, 27 Sep 2006 23:07:51 +0000 (GMT)
Message-ID: <21895316.1159398471197.JavaMail.jira@brutus>
Date: Wed, 27 Sep 2006 16:07:51 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-563) DFS client should try to re-new
 lease if it gets a lease expiration exception when it adds a block to a
 file
In-Reply-To: <28125744.1159383470163.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-563?page=comments#action_12438246 ] 
            
Owen O'Malley commented on HADOOP-563:
--------------------------------------

One minute is awfully short to lose your lease that kills a day worth of work. However, if we make the leases longer that will interact badly with a replacement reduce tasks starting. One approach that might be reasonable is to have two time limits:

lease becomes losable: 1 minute
lease is lost: 1 hour

A losable lease is lost when someone tries to create the same file. We need to have a forced timeout to handle the case of clients that disappear where the filename is never written again.

You need to separate out the handling of losable/lost leases on the namenode because once the lease is  declared lost on the name node, the blocks will be deleted. 

> DFS client should try to re-new lease if it gets a lease expiration exception when it adds a block to a file
> ------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-563
>                 URL: http://issues.apache.org/jira/browse/HADOOP-563
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Runping Qi
>
> In the current DFS client implementation, there is one thread responsible for renewing leases. If for whatever reason, that thread runs behind, the lease may get expired. That causes the client gets a lease expiration exception when writing a block. The consequence of that is very devastating: the client can no longer write to the file, and all the partial results up to that point are gone! This is especially costly for some map reduce jobs where a reducer may take hours or even days to sort the intermediate results before the actual reducing work can start.
> The problem will be solved if the flush method of  DFS client can renew lease on demand. That is, it should try to re-new lease  when it catches a lease expiration exception. That way,  even when under heavy load and the lease renewing thread runs behind, the reducer  task (or what ever tasks use that client) can preceed.  That will be a huge saving in some cases (where sorting intermediate results take a long time to finish). We can set a limit on the number of retries, and may even make it configurable (or changeable at runtime). 
> The namenode can use a different expiration time that is much higher than the current 1 minute lease expiration time for cleaning  up the abandoned unclosed files.
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Sep 27 23:19:42 2006
Return-Path: 
 <hadoop-dev-return-3968-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 38882 invoked from network); 27 Sep 2006 23:19:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Sep 2006 23:19:42 -0000
Received: (qmail 7684 invoked by uid 500); 27 Sep 2006 23:19:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 7652 invoked by uid 500); 27 Sep 2006 23:19:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 7642 invoked by uid 99); 27 Sep 2006 23:19:42 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Sep 2006 16:19:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:40348]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 5B/11-03285-D070B154 for <hadoop-dev@lucene.apache.org>;
 Wed, 27 Sep 2006 16:19:41 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D41FC7141BB
	for <hadoop-dev@lucene.apache.org>; Wed, 27 Sep 2006 23:15:51 +0000 (GMT)
Message-ID: <24030836.1159398951866.JavaMail.jira@brutus>
Date: Wed, 27 Sep 2006 16:15:51 -0700 (PDT)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-563) DFS client should try to re-new
 lease if it gets a lease expiration exception when it adds a block to a
 file
In-Reply-To: <28125744.1159383470163.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-563?page=comments#action_12438248 ] 
            
Runping Qi commented on HADOOP-563:
-----------------------------------


+1 for owen's proposal.



> DFS client should try to re-new lease if it gets a lease expiration exception when it adds a block to a file
> ------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-563
>                 URL: http://issues.apache.org/jira/browse/HADOOP-563
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Runping Qi
>
> In the current DFS client implementation, there is one thread responsible for renewing leases. If for whatever reason, that thread runs behind, the lease may get expired. That causes the client gets a lease expiration exception when writing a block. The consequence of that is very devastating: the client can no longer write to the file, and all the partial results up to that point are gone! This is especially costly for some map reduce jobs where a reducer may take hours or even days to sort the intermediate results before the actual reducing work can start.
> The problem will be solved if the flush method of  DFS client can renew lease on demand. That is, it should try to re-new lease  when it catches a lease expiration exception. That way,  even when under heavy load and the lease renewing thread runs behind, the reducer  task (or what ever tasks use that client) can preceed.  That will be a huge saving in some cases (where sorting intermediate results take a long time to finish). We can set a limit on the number of retries, and may even make it configurable (or changeable at runtime). 
> The namenode can use a different expiration time that is much higher than the current 1 minute lease expiration time for cleaning  up the abandoned unclosed files.
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 03:48:48 2006
Return-Path: 
 <hadoop-dev-return-3969-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 89462 invoked from network); 28 Sep 2006 03:48:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 03:48:48 -0000
Received: (qmail 93008 invoked by uid 500); 28 Sep 2006 03:48:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 92979 invoked by uid 500); 28 Sep 2006 03:48:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 92965 invoked by uid 99); 28 Sep 2006 03:48:47 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Sep 2006 20:48:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:36239]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 95/21-05478-3064B154 for <hadoop-dev@lucene.apache.org>;
 Wed, 27 Sep 2006 20:48:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 204617141D1
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 03:43:50 +0000 (GMT)
Message-ID: <8791585.1159415030129.JavaMail.jira@brutus>
Date: Wed, 27 Sep 2006 20:43:50 -0700 (PDT)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-564) we should use hdfs:// in all API URIs
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

we should use hdfs:// in all API URIs
-------------------------------------

                 Key: HADOOP-564
                 URL: http://issues.apache.org/jira/browse/HADOOP-564
             Project: Hadoop
          Issue Type: Bug
            Reporter: eric baldeschwieler


Minor nit, but it seems that we should choose a protocol name that is likely not to conflict with other distributed FS projects.  HDFS seems less likely to.  

Right now this will be trivial to change.  Just wanted to socialize this before doing the search and replace.  

PS right now the dfs: usage is not consistent and has crept into a couple of new features the y! team is working on (caching of files and distcp).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 06:56:59 2006
Return-Path: 
 <hadoop-dev-return-3970-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30432 invoked from network); 28 Sep 2006 06:56:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 06:56:59 -0000
Received: (qmail 85766 invoked by uid 500); 28 Sep 2006 06:56:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 85661 invoked by uid 500); 28 Sep 2006 06:56:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 85652 invoked by uid 99); 28 Sep 2006 06:56:57 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Sep 2006 23:56:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:42247]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 0B/A8-05478-2327B154 for <hadoop-dev@lucene.apache.org>;
 Wed, 27 Sep 2006 23:56:53 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4F9C07141D1
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 06:52:51 +0000 (GMT)
Message-ID: <25242961.1159426371323.JavaMail.jira@brutus>
Date: Wed, 27 Sep 2006 23:52:51 -0700 (PDT)
From: "Dawid Weiss (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-538?page=comments#action_12438331 ] 
            
Dawid Weiss commented on HADOOP-538:
------------------------------------

Doug is correct -- compiling native code is a pain and including it in the runtime is even more pain. I have a project that uses JNI to bind to a shared library, which in turn calls other libraries. Apart from setting up the build process in the ANT build file, which is itself quite tricky -- the same set of tools (gcc) on Linux produces *.so, whereas on Cygwin it creates *.dll files -- you need to set up java.library.path to point to your shared objects AND a regular path (Windows) or LD_LIBRARY_PATH (Linux-ish) so that the system can find native dependencies. In the end, it's a real pain to compile and maintain.

The suggestion to fallback to pure java is I think a good one. It allows you to start playing with Hadoop on heterogenic environment and without much hassle and then tune it later (by placing appropriate libraries wherever the system can find them).

> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.7.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 08:04:52 2006
Return-Path: 
 <hadoop-dev-return-3971-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51891 invoked from network); 28 Sep 2006 08:04:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 08:04:52 -0000
Received: (qmail 65859 invoked by uid 500); 28 Sep 2006 08:04:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 65756 invoked by uid 500); 28 Sep 2006 08:04:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 65747 invoked by uid 99); 28 Sep 2006 08:04:51 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 01:04:51 -0700
Authentication-Results: idunn.apache.osuosl.org
 header.from=breed@yahoo-inc.com; domainkeys=good
X-ASF-Spam-Status: No,
 hits=-13.6 required=5.0 tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,USER_IN_DEF_WHITELIST
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing
 draft-delany-domainkeys-base-01
Received: from [207.126.228.150] ([207.126.228.150:46047]
 helo=rsmtp2.corp.yahoo.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 22/1B-05478-2228B154 for <hadoop-dev@lucene.apache.org>;
 Thu, 28 Sep 2006 01:04:50 -0700
Received: from [10.72.76.68] (snvvpn2-10-72-76-c68.corp.yahoo.com
 [10.72.76.68])
	(authenticated bits=0)
	by rsmtp2.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k8S84VcO070867
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 01:04:33 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=message-id:date:from:user-agent:mime-version:to:subject:
	content-type:content-transfer-encoding;
	b=rvcMrVjYsQQFRRYYmbmPHr5ZfEph0tVIpS6mKm+4VMSpnHy2CvPGCutSYg5bAsy+
Message-ID: <451B820E.6080101@yahoo-inc.com>
Date: Thu, 28 Sep 2006 01:04:30 -0700
From: Benjamin Reed <breed@yahoo-inc.com>
User-Agent: Thunderbird 1.5.0.7 (X11/20060922)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Creating splits/tasks at the client
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

One of the things that bothers me about the JobTracker is that it is
running user code when it creates the FileSplits. In the long term this
puts the JobTracker JVM at risk due to errors in the user code.

The JobTracker uses the InputFormat to create a set of tasks that it
then schedules. The task creation does not need to happen at the
JobTracker. If we allowed the clients to create the set of tasks, the
JobTracker would not need to load and run any user generated code. It
would also remove some of the processing load from the JobTracker. On
the downside it does greatly increase the amount of information sent to
the JobTracker when a job is submitted.

ben

From MAILER-DAEMON Thu Sep 28 09:48:10 2006
Return-Path: 
 <hadoop-dev-return-3972-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76628 invoked from network); 28 Sep 2006 09:48:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 09:48:10 -0000
Received: (qmail 62458 invoked by uid 500); 28 Sep 2006 09:48:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62242 invoked by uid 500); 28 Sep 2006 09:48:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62233 invoked by uid 99); 28 Sep 2006 09:48:09 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 02:48:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:35210]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 57/ED-05478-C4A9B154 for <hadoop-dev@lucene.apache.org>;
 Thu, 28 Sep 2006 02:47:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 696F97141F3
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 09:43:51 +0000 (GMT)
Message-ID: <7793447.1159436631428.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 02:43:51 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-538?page=comments#action_12438384 ] 
            
Arun C Murthy commented on HADOOP-538:
--------------------------------------

Good points Doug; thanks!

Some thoughts...

I like the 'fallback' mechanism, it should ease hadoop adoption for people on heterogenous environments, I'll get to work on this one.

However I'm a little skeptical about 'ship pre-built libhadoop.so' part for the following reasons:
a) We will need to maintain versions for different h/w architectures and linux distros (Definition of 'standard platforms'? -> cygwin and RHEL/ubuntu/FC{4|5}).
b) glibc compatibility (and also stuff like whether it is compiled with -nptl or not and so on); agreed it isn't very common, but something which might bite us once in a while. (Hmm... differing glibc across linux distros?)
c) Though we don't have it so far, a single line of C++ code in src/native will make things far worse due to C++ ABI issues; means we will need to maintain different versions of libhadoop for gcc-2x, gcc-3x, gcc-4x etc, even for 'standard platforms'.

Hence I'd like to propose we only have the 'fallback' mechanism - if you need libhadoop.so, please build it yourself. We'll do all we can to ease the second part.

I'll also start work to use the GNU build system (autoconf/automake/libtool) for building libhadoop.so, this should ease the 'please build it yourself' part for people.

Thoughts?


> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.7.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 10:21:18 2006
Return-Path: 
 <hadoop-dev-return-3973-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86330 invoked from network); 28 Sep 2006 10:21:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 10:21:18 -0000
Received: (qmail 2672 invoked by uid 500); 28 Sep 2006 10:21:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 2628 invoked by uid 500); 28 Sep 2006 10:21:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 2609 invoked by uid 99); 28 Sep 2006 10:21:17 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 03:21:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:54652]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 47/AE-05478-502AB154 for <hadoop-dev@lucene.apache.org>;
 Thu, 28 Sep 2006 03:20:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1112E7141F3
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 10:16:52 +0000 (GMT)
Message-ID: <15292533.1159438612067.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 03:16:52 -0700 (PDT)
From: "Andrzej Bialecki  (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-538?page=comments#action_12438395 ] 
            
Andrzej Bialecki  commented on HADOOP-538:
------------------------------------------

If we are to permit use of a native libhadoop there is at least one more thing that could be optimized - the annoying issue of getting the amount of free disk space, which currently requires running a Unix / cygwin utility and parsing its text output.

> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.7.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 16:08:57 2006
Return-Path: 
 <hadoop-dev-return-3974-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 6911 invoked from network); 28 Sep 2006 16:08:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 16:08:57 -0000
Received: (qmail 58098 invoked by uid 500); 28 Sep 2006 16:08:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 57894 invoked by uid 500); 28 Sep 2006 16:08:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 57885 invoked by uid 99); 28 Sep 2006 16:08:55 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 09:08:55 -0700
Authentication-Results: idunn.apache.osuosl.org
 header.from=arkady@yahoo-inc.com; domainkeys=good
X-ASF-Spam-Status: No,
 hits=-13.6 required=5.0 tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,USER_IN_DEF_WHITELIST
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing
 draft-delany-domainkeys-base-01
Received: from [207.126.228.150] ([207.126.228.150:48720]
 helo=rsmtp2.corp.yahoo.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 25/D5-17533-493FB154 for <hadoop-dev@lucene.apache.org>;
 Thu, 28 Sep 2006 09:08:53 -0700
Received: from [10.72.108.58] (arkady-mac.corp.yahoo.com [10.72.108.58])
	by rsmtp2.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k8SG8aGQ088518
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 09:08:36 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=L/klJ+wunYX+IJoO/JcAmUNnKVSyYi5ruZkib5AbQv69tXRfGTCGVchXFvSYGJiK
Mime-Version: 1.0 (Apple Message framework v624)
In-Reply-To: <20128603.1158791482407.JavaMail.jira@brutus>
References: <20128603.1158791482407.JavaMail.jira@brutus>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <292330f90fd33e91e283295b3d58328e@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Arkady Borkovsky <arkady@yahoo-inc.com>
Subject: Re: [jira] Created: (HADOOP-553) DataNode and NameNode main() should
 catch and report exceptions.
Date: Thu, 28 Sep 2006 09:08:35 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.624)
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Should this be true (main() calls and reports exceptions) for all 
system components? Especially for user-facing ones like hadoop client?


On Sep 20, 2006, at 3:31 PM, Konstantin Shvachko (JIRA) wrote:

> DataNode and NameNode main() should catch and report exceptions.
> ----------------------------------------------------------------
>
>                  Key: HADOOP-553
>                  URL: http://issues.apache.org/jira/browse/HADOOP-553
>              Project: Hadoop
>           Issue Type: Bug
>           Components: dfs, mapred
>     Affects Versions: 0.6.2
>             Reporter: Konstantin Shvachko
>
>
> Right now we do not know what happened during startup failure,
> because there no records in the logs.
> I propose to change main() so that it would catch exceptions and
> log them rather then throwing them into std out.
> May be the same should be done for the JobTracker.
> The TaskTracker.main() catches at least the IOException.
>
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the 
> administrators: 
> http://issues.apache.org/jira/secure/Administrators.jspa
> -
> For more information on JIRA, see: 
> http://www.atlassian.com/software/jira
>
>


From MAILER-DAEMON Thu Sep 28 16:35:46 2006
Return-Path: 
 <hadoop-dev-return-3975-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 11456 invoked from network); 28 Sep 2006 16:35:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 16:35:46 -0000
Received: (qmail 200 invoked by uid 500); 28 Sep 2006 16:35:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 159 invoked by uid 500); 28 Sep 2006 16:35:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 150 invoked by uid 99); 28 Sep 2006 16:35:44 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 09:35:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:32823]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id CA/B6-17533-ED9FB154 for <hadoop-dev@lucene.apache.org>;
 Thu, 28 Sep 2006 09:35:42 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1D4307141F1
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 16:31:51 +0000 (GMT)
Message-ID: <4554912.1159461111117.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 09:31:51 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-538?page=comments#action_12438478 ] 
            
Owen O'Malley commented on HADOOP-538:
--------------------------------------

Ok, I think we need a class that is responsible for trying to load libhadoop.so and having fall back replacements.

package org.apache.hadoop.util;

public class NativeCode {
  private static boolean inFallback = true;

  public static Class<DF> getDFClass() { ... }

  public static Class<CompressionCodec> getDefaultCodecClass() { ... }

  public static Class<CompressionCodec> getGzipCodecClass(){...}

  static {
     // try to load libhadoop.so and set fallback flag appropriately
  }
}

Does that look reasonable?

I think that we'd be fine with libhadoop-${os.name}-${os.arch}.so for the most part. Especially if we keep C++ out of the APIs. *smile* I don't think we should try to determine the distro or get into that game.


> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.7.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 16:53:45 2006
Return-Path: 
 <hadoop-dev-return-3976-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 15198 invoked from network); 28 Sep 2006 16:53:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 16:53:45 -0000
Received: (qmail 29637 invoked by uid 500); 28 Sep 2006 16:53:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 29607 invoked by uid 500); 28 Sep 2006 16:53:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 29470 invoked by uid 99); 28 Sep 2006 16:53:43 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 09:53:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:55883]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id BD/37-17533-61EFB154 for <hadoop-dev@lucene.apache.org>;
 Thu, 28 Sep 2006 09:53:42 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 36E857141F1
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 16:49:51 +0000 (GMT)
Message-ID: <10694377.1159462191222.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 09:49:51 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-560) tasks should have a "killed" state
In-Reply-To: <19722671.1159248770141.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-560?page=all ]

Owen O'Malley updated HADOOP-560:
---------------------------------

    Attachment: kill-state-2.patch

I fixed another couple of things:
  1. my previous patch tickled a previous bug that was causing jobs to not complete when their last reduce finished.
  2. made the minimr cluster wait until it is out of safe mode

> tasks should have a "killed" state
> ----------------------------------
>
>                 Key: HADOOP-560
>                 URL: http://issues.apache.org/jira/browse/HADOOP-560
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.6.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.7.0
>
>         Attachments: kill-state-2.patch, kill-state.patch
>
>
> Tasks should have a state that reflects the fact that they were killed instead of failed to help the user understand what happened to the task.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 16:53:48 2006
Return-Path: 
 <hadoop-dev-return-3977-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 15298 invoked from network); 28 Sep 2006 16:53:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 16:53:48 -0000
Received: (qmail 30281 invoked by uid 500); 28 Sep 2006 16:53:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 30262 invoked by uid 500); 28 Sep 2006 16:53:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 30253 invoked by uid 99); 28 Sep 2006 16:53:47 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 09:53:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:55885]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 2E/37-17533-81EFB154 for <hadoop-dev@lucene.apache.org>;
 Thu, 28 Sep 2006 09:53:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5B3907141F7
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 16:49:52 +0000 (GMT)
Message-ID: <19548899.1159462192371.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 09:49:52 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-560) tasks should have a "killed" state
In-Reply-To: <19722671.1159248770141.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-560?page=all ]

Owen O'Malley updated HADOOP-560:
---------------------------------

    Status: Patch Available  (was: Open)

> tasks should have a "killed" state
> ----------------------------------
>
>                 Key: HADOOP-560
>                 URL: http://issues.apache.org/jira/browse/HADOOP-560
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.6.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.7.0
>
>         Attachments: kill-state-2.patch, kill-state.patch
>
>
> Tasks should have a state that reflects the fact that they were killed instead of failed to help the user understand what happened to the task.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 16:55:46 2006
Return-Path: 
 <hadoop-dev-return-3978-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 15962 invoked from network); 28 Sep 2006 16:55:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 16:55:46 -0000
Received: (qmail 31840 invoked by uid 500); 28 Sep 2006 16:55:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 31632 invoked by uid 500); 28 Sep 2006 16:55:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31617 invoked by uid 99); 28 Sep 2006 16:55:46 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 09:55:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:52605]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id EA/47-17533-F8EFB154 for <hadoop-dev@lucene.apache.org>;
 Thu, 28 Sep 2006 09:55:43 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CD3E57141E0
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 16:51:51 +0000 (GMT)
Message-ID: <3364407.1159462311838.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 09:51:51 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-538?page=comments#action_12438481 ] 
            
Doug Cutting commented on HADOOP-538:
-------------------------------------

> we need a class that is responsible for trying to load libhadoop.so and having fall back replacements

+1

I question whether DF belongs here.  Each thing here requires two implementations.  So we should only do it in places where it is critical.  We've found the improvements of native codecs to be dramatic.  Do we think that DF is causing performance problems?  Because we will still need the non-native version of DF as a fallback, for OSes and architectures that we won't provide pre-built binaries for in releases.

It would also be good to minimize the number of libhadoop binaries we commit to subversion.  I'd argue that we only check in libhadoop-linux-i386.so.  Even that will be impossible to rebuild in nightly builds, since those are made on solaris x86.  We will require that any time anything in the native code is changed, all pre-built binaries be re-generated as a part of the commit of the source changes.  Since linux-i386 is both the dominant development and deployment environment, I think it makes sense to ship with it alone pre-built.

> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.7.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 17:05:47 2006
Return-Path: 
 <hadoop-dev-return-3979-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20131 invoked from network); 28 Sep 2006 17:05:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 17:05:47 -0000
Received: (qmail 44562 invoked by uid 500); 28 Sep 2006 17:05:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 44538 invoked by uid 500); 28 Sep 2006 17:05:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 44529 invoked by uid 99); 28 Sep 2006 17:05:46 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 10:05:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:43328]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id EC/87-17533-7E00C154 for <hadoop-dev@lucene.apache.org>;
 Thu, 28 Sep 2006 10:05:43 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 180477141E0
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 17:01:52 +0000 (GMT)
Message-ID: <7358665.1159462912095.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 10:01:52 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-538?page=comments#action_12438483 ] 
            
Doug Cutting commented on HADOOP-538:
-------------------------------------

Let me refine that a bit: if we ship with any pre-built binaries, I think it should be libhadoop-linux-i386.so only.  All current committers will have no trouble maintaining this, and it will make the out-of-the-box experience faster for the majority of production installations.  It's not ideal, surely, but it would not currently be much of a burden, and will provide substantial benefit.  If it becomes burdensome, or the benefit seems small, then we should revisit this.  Thoughts?

> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.7.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 17:21:44 2006
Return-Path: 
 <hadoop-dev-return-3980-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 25618 invoked from network); 28 Sep 2006 17:21:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 17:21:44 -0000
Received: (qmail 64098 invoked by uid 500); 28 Sep 2006 17:21:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63896 invoked by uid 500); 28 Sep 2006 17:21:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63887 invoked by uid 99); 28 Sep 2006 17:21:43 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 10:21:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:53063]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 8F/F7-17533-7A40C154 for <hadoop-dev@lucene.apache.org>;
 Thu, 28 Sep 2006 10:21:43 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EC9217141F3
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 17:17:51 +0000 (GMT)
Message-ID: <22836153.1159463871965.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 10:17:51 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-239) job tracker WI drops jobs after 24
 hours
In-Reply-To: <7996228.1148318969883.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-239?page=comments#action_12438487 ] 
            
Sanjay Dahiya commented on HADOOP-239:
--------------------------------------

Here are some new changes ( will submit patch in a while ) 

Moved code to Java 5

Replaced all data attributes in JobInfo and other objects with HashMap. All key-value pairs are accessed through get(KEY), set(Key, Value) methods. All keys are defined in a single Enum, which acts like a global namespace for all keys used in job history. 

Adding new keys/values is now fairly simple, they need to be added to the Enum. after that these can be read/written without making any change in JobHistory implementation. 

does this sound reasonable?

> job tracker WI drops jobs after 24 hours
> ----------------------------------------
>
>                 Key: HADOOP-239
>                 URL: http://issues.apache.org/jira/browse/HADOOP-239
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Yoram Arnon
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: Hadoop-239.patch, Hadoop-239_1.patch
>
>
> The jobtracker's WI, keeps track of jobs executed in the past 24 hours.
> if the cluster was idle for a day (say Sunday) it drops all its history.
> Monday morning, the page is empty.
> Better would be to store a fixed number of jobs (say 10 each of succeeded and failed jobs).
> Also, if the job tracker is restarted, it loses all its history.
> The history should be persistent, withstanding restarts and upgrades.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 17:25:50 2006
Return-Path: 
 <hadoop-dev-return-3981-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 26656 invoked from network); 28 Sep 2006 17:25:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 17:25:50 -0000
Received: (qmail 71333 invoked by uid 500); 28 Sep 2006 17:25:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 71313 invoked by uid 500); 28 Sep 2006 17:25:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 71304 invoked by uid 99); 28 Sep 2006 17:25:49 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 10:25:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:44310]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 10/28-17533-A950C154 for <hadoop-dev@lucene.apache.org>;
 Thu, 28 Sep 2006 10:25:47 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 71B447141D1
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 17:21:53 +0000 (GMT)
Message-ID: <2553735.1159464113462.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 10:21:53 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-538?page=comments#action_12438492 ] 
            
Owen O'Malley commented on HADOOP-538:
--------------------------------------

I was mostly putting in DF since it had been mentioned and I didn't think the NativeCode class should be buried up in org.apache.hadoop.io.compress. *smile*

I think that forking the process and parsing the results is far more error-prone that a simple syscall. But that is a side issue in my opinion. I mostly wanted to set the granularity of NativeCode as returning classes with the appropriate implementation.


> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.7.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 17:52:48 2006
Return-Path: 
 <hadoop-dev-return-3982-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34845 invoked from network); 28 Sep 2006 17:52:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 17:52:48 -0000
Received: (qmail 16817 invoked by uid 500); 28 Sep 2006 17:52:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 16799 invoked by uid 500); 28 Sep 2006 17:52:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 16689 invoked by uid 99); 28 Sep 2006 17:52:46 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 10:52:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:44694]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 47/E8-17533-DEB0C154 for <hadoop-dev@lucene.apache.org>;
 Thu, 28 Sep 2006 10:52:45 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0EE877141D1
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 17:48:53 +0000 (GMT)
Message-ID: <23491489.1159465733058.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 10:48:53 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-423) file paths are not normalized
In-Reply-To: <13847288.1154636773936.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-423?page=all ]

Doug Cutting updated HADOOP-423:
--------------------------------

           Status: Open  (was: Patch Available)
    Fix Version/s: 0.7.0

I think the check in the NameNode isn't quite right.  We should never permit "." or ".." at any point in a path here, since paths should always be fully qualifited and normalized by the time they reach the namenode, right?

Also, it seems a shame to have to call Path.toString().  Perhaps we should add a Path method like:

  public String element(int i) { return elements[i]; }

Then the path checker could be implemented with something like:

if (!path.isAbsolute()) {
  throw ... 
}
for (int i = 0; i < path.depth(); i++) {
  String element = path.element(i);
  if (element.equals("..") || element.equals(".") || element.indexOf("/") >= 0) {
    throw ...
  }
}


> file paths are not normalized
> -----------------------------
>
>                 Key: HADOOP-423
>                 URL: http://issues.apache.org/jira/browse/HADOOP-423
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Christian Kunz
>         Assigned To: Wendy Chien
>             Fix For: 0.7.0
>
>         Attachments: pathnorm2.patch
>
>
> Paths containing  '.' or '..' are not normalized -- the corresponding directories actually seem to be created. This is inconsistent and unexpected behavior, and  is particularly painful when running from a working directory, using relative paths that start with ...

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 17:52:52 2006
Return-Path: 
 <hadoop-dev-return-3983-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34890 invoked from network); 28 Sep 2006 17:52:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 17:52:52 -0000
Received: (qmail 17131 invoked by uid 500); 28 Sep 2006 17:52:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17116 invoked by uid 500); 28 Sep 2006 17:52:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17107 invoked by uid 99); 28 Sep 2006 17:52:51 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 10:52:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:44698]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id A7/E8-17533-0FB0C154 for <hadoop-dev@lucene.apache.org>;
 Thu, 28 Sep 2006 10:52:49 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D2EF37141F3
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 17:48:54 +0000 (GMT)
Message-ID: <164339.1159465734861.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 10:48:54 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-538?page=comments#action_12438503 ] 
            
Arun C Murthy commented on HADOOP-538:
--------------------------------------

Sounds like shipping libhadoop-linux-i386.so along should be a sweet-spot between performance and maintainence/release costs for now... I'll get this done; and the NativeCodeLoader too. Thanks!

> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.7.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 18:15:59 2006
Return-Path: 
 <hadoop-dev-return-3985-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 41424 invoked from network); 28 Sep 2006 18:15:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 18:15:59 -0000
Received: (qmail 59398 invoked by uid 500); 28 Sep 2006 18:15:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 59367 invoked by uid 500); 28 Sep 2006 18:15:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 59357 invoked by uid 99); 28 Sep 2006 18:15:58 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 11:15:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:43468]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 97/89-17533-5511C154 for <hadoop-dev@lucene.apache.org>;
 Thu, 28 Sep 2006 11:15:50 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 846D17141F4
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 18:11:54 +0000 (GMT)
Message-ID: <8652788.1159467114539.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 11:11:54 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-239) job tracker WI drops jobs after 24
 hours
In-Reply-To: <7996228.1148318969883.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-239?page=comments#action_12438516 ] 
            
Doug Cutting commented on HADOOP-239:
-------------------------------------

> does this sound reasonable?

Yes, it sounds great to me!  Thanks!

> job tracker WI drops jobs after 24 hours
> ----------------------------------------
>
>                 Key: HADOOP-239
>                 URL: http://issues.apache.org/jira/browse/HADOOP-239
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Yoram Arnon
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: Hadoop-239.patch, Hadoop-239_1.patch
>
>
> The jobtracker's WI, keeps track of jobs executed in the past 24 hours.
> if the cluster was idle for a day (say Sunday) it drops all its history.
> Monday morning, the page is empty.
> Better would be to store a fixed number of jobs (say 10 each of succeeded and failed jobs).
> Also, if the job tracker is restarted, it loses all its history.
> The history should be persistent, withstanding restarts and upgrades.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 18:14:12 2006
Return-Path: 
 <hadoop-dev-return-3984-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40408 invoked from network); 28 Sep 2006 18:14:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 18:14:12 -0000
Received: (qmail 55926 invoked by uid 500); 28 Sep 2006 18:14:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55902 invoked by uid 500); 28 Sep 2006 18:14:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55893 invoked by uid 99); 28 Sep 2006 18:14:11 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 11:14:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [204.127.192.85] ([204.127.192.85:39548]
 helo=rwcrmhc15.comcast.net)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 9B/79-17533-6E01C154 for <hadoop-dev@lucene.apache.org>;
 Thu, 28 Sep 2006 11:14:06 -0700
Received: from [192.168.168.15]
 (c-71-202-24-246.hsd1.ca.comcast.net[71.202.24.246])
          by comcast.net (rwcrmhc15) with ESMTP
          id <20060928181344m1500lhvfee>; Thu, 28 Sep 2006 18:13:45 +0000
Message-ID: <451C10D8.8040800@apache.org>
Date: Thu, 28 Sep 2006 11:13:44 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.7 (X11/20060922)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: Creating splits/tasks at the client
References: <451B820E.6080101@yahoo-inc.com>
In-Reply-To: <451B820E.6080101@yahoo-inc.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Benjamin Reed wrote:
> One of the things that bothers me about the JobTracker is that it is
> running user code when it creates the FileSplits. In the long term this
> puts the JobTracker JVM at risk due to errors in the user code.

JVM's are supposed to be able to do this kind of stuff securely.  Still, 
we don't currently leverage this much, and the JVM's security is 
limited, so it is a valid concern.

Note that, while we do avoid running user code in tasktrackers (mapping, 
sorting and reducing are done in a subprocess) they're still run as a 
system user id.  So security issues are to some degree unavoidable.

But in terms of inadvertant denial of service, running user code in the 
job tracker, a single-point-of-failure, does make the system more fragile.

> The JobTracker uses the InputFormat to create a set of tasks that it
> then schedules. The task creation does not need to happen at the
> JobTracker. If we allowed the clients to create the set of tasks, the
> JobTracker would not need to load and run any user generated code. It
> would also remove some of the processing load from the JobTracker. On
> the downside it does greatly increase the amount of information sent to
> the JobTracker when a job is submitted.

Right, so JobSubmissionProtocol.submitJob(String jobFile) could be 
altered to be submitJob(StringJobFile, Split[]).  The RPC system can 
handle reasonably large values like this, so I don't think that would be 
a problem.  But the memory impact on the JobTracker could become 
significant, since the splits for queued jobs would now be around.  This 
could be mitigated by writing the splits to a temporary file.

The semantics would be subtly different: if you queue a job now, the 
file listing is done just before the job is executed, not when its 
submitted.  But programs shouldn't rely on that, so I don't think this 
is a big worry.

Overall, I don't see any major problems with this.  It won't simplify 
things much.  We can remove the code which computes splits in a separate 
thread, but we'd have to add code to store splits to temporary files, so 
codesize is a wash.  And it would remove a potential reliability problem.

Doug

From MAILER-DAEMON Thu Sep 28 18:26:01 2006
Return-Path: 
 <hadoop-dev-return-3987-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43376 invoked from network); 28 Sep 2006 18:26:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 18:26:01 -0000
Received: (qmail 75475 invoked by uid 500); 28 Sep 2006 18:26:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75451 invoked by uid 500); 28 Sep 2006 18:26:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75442 invoked by uid 99); 28 Sep 2006 18:26:00 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 11:26:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:40485]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id EC/C9-17533-5B31C154 for <hadoop-dev@lucene.apache.org>;
 Thu, 28 Sep 2006 11:25:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 27EBB7141E0
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 18:21:51 +0000 (GMT)
Message-ID: <3063234.1159467711160.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 11:21:51 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-560) tasks should have a "killed" state
In-Reply-To: <19722671.1159248770141.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-560?page=all ]

Doug Cutting updated HADOOP-560:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Owen!

> tasks should have a "killed" state
> ----------------------------------
>
>                 Key: HADOOP-560
>                 URL: http://issues.apache.org/jira/browse/HADOOP-560
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.6.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.7.0
>
>         Attachments: kill-state-2.patch, kill-state.patch
>
>
> Tasks should have a state that reflects the fact that they were killed instead of failed to help the user understand what happened to the task.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 18:24:21 2006
Return-Path: 
 <hadoop-dev-return-3986-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43070 invoked from network); 28 Sep 2006 18:24:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 18:24:21 -0000
Received: (qmail 72904 invoked by uid 500); 28 Sep 2006 18:24:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72881 invoked by uid 500); 28 Sep 2006 18:24:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72872 invoked by uid 99); 28 Sep 2006 18:24:20 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 11:24:20 -0700
Authentication-Results: idunn.apache.osuosl.org
 header.from=bpendleton@gmail.com; domainkeys=good
X-ASF-Spam-Status: No,
 hits=3.4 required=5.0 tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing
 draft-delany-domainkeys-base-01
Received: from [66.249.82.236] ([66.249.82.236:36754]
 helo=wx-out-0506.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 12/C9-17533-2531C154 for <hadoop-dev@lucene.apache.org>;
 Thu, 28 Sep 2006 11:24:18 -0700
Received: by wx-out-0506.google.com with SMTP id s15so597272wxc
        for <hadoop-dev@lucene.apache.org>;
 Thu, 28 Sep 2006 11:24:18 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=tJveBO1j7gC3MHwoifahqZ+aMP0CUl505UCBiQmiWr2anmmOfIYBwtUDYCcyUGJmNkvFuWSv8Nrmh6PaOuEFz+gTBb58ESYdMMLteDcTvMAkdOm3vUK2YLBt/RDGI+x+XUXl5hTJb4eaMdLrozXN1rq3tZIDQW35/JopCxw6+NA=
Received: by 10.70.132.2 with SMTP id f2mr3329895wxd;
        Thu, 28 Sep 2006 11:24:17 -0700 (PDT)
Received: by 10.70.125.16 with HTTP; Thu, 28 Sep 2006 11:24:17 -0700 (PDT)
Message-ID: <1bf79d3e0609281124t3b7c64cah34b8f15b328da2eb@mail.gmail.com>
Date: Thu, 28 Sep 2006 11:24:17 -0700
From: "Bryan A. P. Pendleton" <bp@geekdom.net>
Sender: bpendleton@gmail.com
To: hadoop-dev@lucene.apache.org
Subject: Re: Creating splits/tasks at the client
In-Reply-To: <451C10D8.8040800@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_Part_44396_16894114.1159467857558"
References: <451B820E.6080101@yahoo-inc.com> <451C10D8.8040800@apache.org>
X-Google-Sender-Auth: e809a3262e025d55
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_44396_16894114.1159467857558
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm largely at fault for the "user code running in the JobTracker" that
exists.

I support this change - but, I might reformulate it. Why not make this a
sort of special Job? It can even be formulated roughly like this:

input<JobDescription,FilePaths> -> map(Job,FilePath) ->
reduce(Job,FileSplits) -> SchedulableJob

It might even make sense to do an extra run that pre-computes cached
locations of FileSplits, although I think that is still bottlenecked by the
NameNode.

On 9/28/06, Doug Cutting <cutting@apache.org> wrote:
>
> Benjamin Reed wrote:
> > One of the things that bothers me about the JobTracker is that it is
> > running user code when it creates the FileSplits. In the long term this
> > puts the JobTracker JVM at risk due to errors in the user code.
>
> JVM's are supposed to be able to do this kind of stuff securely.  Still,
> we don't currently leverage this much, and the JVM's security is
> limited, so it is a valid concern.
>
> Note that, while we do avoid running user code in tasktrackers (mapping,
> sorting and reducing are done in a subprocess) they're still run as a
> system user id.  So security issues are to some degree unavoidable.
>
> But in terms of inadvertant denial of service, running user code in the
> job tracker, a single-point-of-failure, does make the system more fragile.
>
> > The JobTracker uses the InputFormat to create a set of tasks that it
> > then schedules. The task creation does not need to happen at the
> > JobTracker. If we allowed the clients to create the set of tasks, the
> > JobTracker would not need to load and run any user generated code. It
> > would also remove some of the processing load from the JobTracker. On
> > the downside it does greatly increase the amount of information sent to
> > the JobTracker when a job is submitted.
>
> Right, so JobSubmissionProtocol.submitJob(String jobFile) could be
> altered to be submitJob(StringJobFile, Split[]).  The RPC system can
> handle reasonably large values like this, so I don't think that would be
> a problem.  But the memory impact on the JobTracker could become
> significant, since the splits for queued jobs would now be around.  This
> could be mitigated by writing the splits to a temporary file.
>
> The semantics would be subtly different: if you queue a job now, the
> file listing is done just before the job is executed, not when its
> submitted.  But programs shouldn't rely on that, so I don't think this
> is a big worry.
>
> Overall, I don't see any major problems with this.  It won't simplify
> things much.  We can remove the code which computes splits in a separate
> thread, but we'd have to add code to store splits to temporary files, so
> codesize is a wash.  And it would remove a potential reliability problem.
>
> Doug
>



-- 
Bryan A. P. Pendleton
Ph: (877) geek-1-bp

------=_Part_44396_16894114.1159467857558--

From MAILER-DAEMON Thu Sep 28 20:11:58 2006
Return-Path: 
 <hadoop-dev-return-3988-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 71353 invoked from network); 28 Sep 2006 20:11:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 20:11:58 -0000
Received: (qmail 20049 invoked by uid 500); 28 Sep 2006 20:11:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 19940 invoked by uid 500); 28 Sep 2006 20:11:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 19931 invoked by uid 99); 28 Sep 2006 20:11:57 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 13:11:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 712D0714283
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 20:06:52 +0000 (GMT)
Message-ID: <12346067.1159474012461.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 13:06:52 -0700 (PDT)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-550) Text constructure can throw
 exception
In-Reply-To: <6747780.1158701362340.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-550?page=comments#action_12438541 ] 
            
Hairong Kuang commented on HADOOP-550:
--------------------------------------

Thanks for your comments, Addison. Currently Text is the default clas for map/reduce text input files, in which records are deliminated by end-of-line and a line may contain binary data. As a temp fix, I'd like to remove validation from class Text constructors. I am thinking the long term plan is to make class Text to be a subclass of BytesWritable. So its intention is to work as a byte buffer but supports toString/fromString assuming UTF8 encoding. Then I'd like to create a new class to act exactly like what Text does now. This will reduce the pain to maintain backward compatibility.

> Text constructure can throw exception
> -------------------------------------
>
>                 Key: HADOOP-550
>                 URL: http://issues.apache.org/jira/browse/HADOOP-550
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Bryan Pendleton
>         Assigned To: Hairong Kuang
>
> I finally got back around to moving my working code to using Text objects.
> And, once again, switching to Text (from UTF8) means my jobs are failing. This time, its better defined - constructing a Text from a string extracted from Real World data makes the Text object constructor throw a CharacterCodingException. This may be legit - I don't actually understand UTF well enough to understand what's wrong with the supplied string. I'm assembling a series of strings, some of which are user-supplied, and something causes the Text constructor to barf.
> However, this is still completely unacceptable. If I need to stuff textual data someplace - I need the container to *do* it. If user-supplied inputs can't be stored as a "UTF" aware text value, then another container needs to be brought into existence. Sure, I can use a BytesWritable, but, as its name implies - Text should handle "text". If Text is supposed to == "StringWritable", then, well, it doesn't, yet.
> I admit to being a few weeks' back in the bleeding edge at this point, so maybe my particluar Text bug has been fixed, though the only fixes to Text I see are adopting it into more of the internals of Hadoop. This argument goes double in that case - if we're using Text objects internally, it should really be a totally solid object - construct one from a String, get one back, but _never_  throw a content-related Exception. Or, if Text is not the right object because its data-sensitive, then I argue we shouldn't use it in any case where data might kill it - internal, or anywhere else (by default).
> Please, don't remove UTF8, for now.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 20:19:41 2006
Return-Path: 
 <hadoop-dev-return-3990-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 73457 invoked from network); 28 Sep 2006 20:19:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 20:19:41 -0000
Received: (qmail 34813 invoked by uid 500); 28 Sep 2006 20:19:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 34787 invoked by uid 500); 28 Sep 2006 20:19:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 34772 invoked by uid 99); 28 Sep 2006 20:19:39 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 13:19:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:36743]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 6E/CB-17533-11E2C154 for <hadoop-dev@lucene.apache.org>;
 Thu, 28 Sep 2006 13:18:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6F24E7141F3
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 20:12:52 +0000 (GMT)
Message-ID: <13706116.1159474372452.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 13:12:52 -0700 (PDT)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-550) Text constructure can throw exception
In-Reply-To: <6747780.1158701362340.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-550?page=all ]

Hairong Kuang updated HADOOP-550:
---------------------------------

               Status: Patch Available  (was: Open)
        Fix Version/s: 0.7.0
    Affects Version/s: 0.6.2

> Text constructure can throw exception
> -------------------------------------
>
>                 Key: HADOOP-550
>                 URL: http://issues.apache.org/jira/browse/HADOOP-550
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.6.2
>            Reporter: Bryan Pendleton
>         Assigned To: Hairong Kuang
>             Fix For: 0.7.0
>
>         Attachments: text.patch
>
>
> I finally got back around to moving my working code to using Text objects.
> And, once again, switching to Text (from UTF8) means my jobs are failing. This time, its better defined - constructing a Text from a string extracted from Real World data makes the Text object constructor throw a CharacterCodingException. This may be legit - I don't actually understand UTF well enough to understand what's wrong with the supplied string. I'm assembling a series of strings, some of which are user-supplied, and something causes the Text constructor to barf.
> However, this is still completely unacceptable. If I need to stuff textual data someplace - I need the container to *do* it. If user-supplied inputs can't be stored as a "UTF" aware text value, then another container needs to be brought into existence. Sure, I can use a BytesWritable, but, as its name implies - Text should handle "text". If Text is supposed to == "StringWritable", then, well, it doesn't, yet.
> I admit to being a few weeks' back in the bleeding edge at this point, so maybe my particluar Text bug has been fixed, though the only fixes to Text I see are adopting it into more of the internals of Hadoop. This argument goes double in that case - if we're using Text objects internally, it should really be a totally solid object - construct one from a String, get one back, but _never_  throw a content-related Exception. Or, if Text is not the right object because its data-sensitive, then I argue we shouldn't use it in any case where data might kill it - internal, or anywhere else (by default).
> Please, don't remove UTF8, for now.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 20:18:34 2006
Return-Path: 
 <hadoop-dev-return-3989-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 72968 invoked from network); 28 Sep 2006 20:18:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 20:18:34 -0000
Received: (qmail 31260 invoked by uid 500); 28 Sep 2006 20:18:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 31238 invoked by uid 500); 28 Sep 2006 20:18:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31227 invoked by uid 99); 28 Sep 2006 20:18:32 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 13:18:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1B31D714292
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 20:12:55 +0000 (GMT)
Message-ID: <27602625.1159474375109.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 13:12:55 -0700 (PDT)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-550) Text constructure can throw exception
In-Reply-To: <6747780.1158701362340.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-550?page=all ]

Hairong Kuang updated HADOOP-550:
---------------------------------

    Attachment: text.patch

> Text constructure can throw exception
> -------------------------------------
>
>                 Key: HADOOP-550
>                 URL: http://issues.apache.org/jira/browse/HADOOP-550
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.6.2
>            Reporter: Bryan Pendleton
>         Assigned To: Hairong Kuang
>             Fix For: 0.7.0
>
>         Attachments: text.patch
>
>
> I finally got back around to moving my working code to using Text objects.
> And, once again, switching to Text (from UTF8) means my jobs are failing. This time, its better defined - constructing a Text from a string extracted from Real World data makes the Text object constructor throw a CharacterCodingException. This may be legit - I don't actually understand UTF well enough to understand what's wrong with the supplied string. I'm assembling a series of strings, some of which are user-supplied, and something causes the Text constructor to barf.
> However, this is still completely unacceptable. If I need to stuff textual data someplace - I need the container to *do* it. If user-supplied inputs can't be stored as a "UTF" aware text value, then another container needs to be brought into existence. Sure, I can use a BytesWritable, but, as its name implies - Text should handle "text". If Text is supposed to == "StringWritable", then, well, it doesn't, yet.
> I admit to being a few weeks' back in the bleeding edge at this point, so maybe my particluar Text bug has been fixed, though the only fixes to Text I see are adopting it into more of the internals of Hadoop. This argument goes double in that case - if we're using Text objects internally, it should really be a totally solid object - construct one from a String, get one back, but _never_  throw a content-related Exception. Or, if Text is not the right object because its data-sensitive, then I argue we shouldn't use it in any case where data might kill it - internal, or anywhere else (by default).
> Please, don't remove UTF8, for now.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 20:24:37 2006
Return-Path: 
 <hadoop-dev-return-3995-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 74428 invoked from network); 28 Sep 2006 20:24:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 20:24:37 -0000
Received: (qmail 40424 invoked by uid 500); 28 Sep 2006 20:23:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40096 invoked by uid 500); 28 Sep 2006 20:23:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 39933 invoked by uid 99); 28 Sep 2006 20:23:51 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 13:23:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:51020]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id BA/EB-17533-E0F2C154 for <hadoop-dev@lucene.apache.org>;
 Thu, 28 Sep 2006 13:22:43 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 50AC6714294
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 20:16:51 +0000 (GMT)
Message-ID: <29624440.1159474611327.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 13:16:51 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-308) Task Tracker does not handle the case
 of read only local dir  case correctly
In-Reply-To: <25979762.1150740329858.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-308?page=all ]

Sameer Paranjpye updated HADOOP-308:
------------------------------------

    Component/s: mapred
    Description: 
In case that the local dir is not writable on a node, the tasks on the  node will fail as expected, with an exception like:

(Read-only file system) at java.io.FileOutputStream.open(Native Method) 
at java.io.FileOutputStream.(FileOutputStream.java:179) 
at java.io.FileOutputStream.(FileOutputStream.java:131) 
at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.(DFSClient.java:723) 
at org.apache.hadoop.dfs.DFSClient.create(DFSClient.java:241) 
at org.apache.hadoop.dfs.DistributedFileSystem.createRaw(DistributedFileSystem.java:96) 
at org.apache.hadoop.fs.FSDataOutputStream$Summer.(FSDataOutputStream.java:44) 
at org.apache.hadoop.fs.FSDataOutputStream.(FSDataOutputStream.java:134) 
at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:224) 
at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:176) 
....
at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:265) 
at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:847)

However, the task tracker will continue accept new tasks and continue to fail.
The runloop of tasktracker should detect such a problem and exits.



  was:

In case that the local dir is not writable on a node, the tasks on the  node will fail as expected, with an exception like:

(Read-only file system) at java.io.FileOutputStream.open(Native Method) 
at java.io.FileOutputStream.(FileOutputStream.java:179) 
at java.io.FileOutputStream.(FileOutputStream.java:131) 
at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.(DFSClient.java:723) 
at org.apache.hadoop.dfs.DFSClient.create(DFSClient.java:241) 
at org.apache.hadoop.dfs.DistributedFileSystem.createRaw(DistributedFileSystem.java:96) 
at org.apache.hadoop.fs.FSDataOutputStream$Summer.(FSDataOutputStream.java:44) 
at org.apache.hadoop.fs.FSDataOutputStream.(FSDataOutputStream.java:134) 
at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:224) 
at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:176) 
....
at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:265) 
at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:847)

However, the task tracker will continue accept new tasks and continue to fail.
The runloop of tasktracker should detect such a problem and exits.




> Task Tracker does not handle the case of read only local dir  case correctly
> ----------------------------------------------------------------------------
>
>                 Key: HADOOP-308
>                 URL: http://issues.apache.org/jira/browse/HADOOP-308
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.3.2
>         Environment: all
>            Reporter: Runping Qi
>
> In case that the local dir is not writable on a node, the tasks on the  node will fail as expected, with an exception like:
> (Read-only file system) at java.io.FileOutputStream.open(Native Method) 
> at java.io.FileOutputStream.(FileOutputStream.java:179) 
> at java.io.FileOutputStream.(FileOutputStream.java:131) 
> at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.(DFSClient.java:723) 
> at org.apache.hadoop.dfs.DFSClient.create(DFSClient.java:241) 
> at org.apache.hadoop.dfs.DistributedFileSystem.createRaw(DistributedFileSystem.java:96) 
> at org.apache.hadoop.fs.FSDataOutputStream$Summer.(FSDataOutputStream.java:44) 
> at org.apache.hadoop.fs.FSDataOutputStream.(FSDataOutputStream.java:134) 
> at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:224) 
> at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:176) 
> ....
> at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:265) 
> at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:847)
> However, the task tracker will continue accept new tasks and continue to fail.
> The runloop of tasktracker should detect such a problem and exits.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 20:23:34 2006
Return-Path: 
 <hadoop-dev-return-3991-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 73990 invoked from network); 28 Sep 2006 20:23:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 20:23:34 -0000
Received: (qmail 38099 invoked by uid 500); 28 Sep 2006 20:23:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 37979 invoked by uid 500); 28 Sep 2006 20:23:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 37970 invoked by uid 99); 28 Sep 2006 20:23:31 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 13:23:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4D55F71429E
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 20:18:51 +0000 (GMT)
Message-ID: <17485832.1159474731313.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 13:18:51 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-249) Improving Map -> Reduce performance
 and Task JVM reuse
In-Reply-To: <12945804.1148431829854.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-249?page=all ]

Sameer Paranjpye updated HADOOP-249:
------------------------------------

    Component/s: mapred

> Improving Map -> Reduce performance and Task JVM reuse
> ------------------------------------------------------
>
>                 Key: HADOOP-249
>                 URL: http://issues.apache.org/jira/browse/HADOOP-249
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.3.0
>            Reporter: Benjamin Reed
>         Attachments: disk_zoom.patch, image001.png, task_zoom.patch
>
>
> These patches are really just to make Hadoop start trotting. It is still at least an order of magnitude slower than it should be, but I think these patches are a good start.
> I've created two patches for clarity. They are not independent, but could easily be made so.
> The disk-zoom patch is a performance trifecta: less disk IO, less disk space, less CPU, and overall a tremendous improvement. The patch is based on the following observation: every piece of data from a map hits the disk once on the mapper, and 3 (+plus sorting) times on the reducer. Further, the entire input for the reduce step is sorted together maximizing the sort time. This patch causes:
> 1)  the mapper to sort the relatively small fragments at the mapper which causes two hits to the disk, but they are smaller files.
> 2) the reducer copies the map output and may merge (if more than 100 outputs are present) with a couple of other outputs at copy time. No sorting is done since the map outputs are sorted.
> 3) the reducer  will merge the map outputs on the fly in memory at reduce time.
> I'm attaching the performance graph (with just the disk-zoom patch) to show the results. This benchmark uses a random input and null output to remove any DFS performance influences. The cluster of 49 machines I was running on had limited disk space, so I was only able to run to a certain size on unmodified Hadoop. With the patch we use 1/3 the amount of disk space.
> The second patch allows the task tracker to reuse processes to avoid the over-head of starting the JVM. While JVM startup is relatively fast, restarting a Task causes disk IO and DFS operations that have a negative impact on the rest of the system. When a Task finishes, rather than exiting, it reads the next task to run from stdin. We still isolate the Task runtime from TaskTracker, but we only pay the startup penalty once.
> This second patch also fixes two performance issues not related to JVM reuse. (The reuse just makes the problems glaring.) First, the JobTracker counts all jobs not just the running jobs to decide the load on a tracker. Second, the TaskTracker should really ask for a new Task as soon as one finishes rather than wait the 10 secs.
> I've been benchmarking the code alot, but I don't have access to a really good cluster to try the code out on, so please treat it as experimental. I would love to feedback.
> There is another obvious thing to change: ReduceTasks should start after the first batch of MapTasks complete, so that 1) they have something to do, and 2) they are running on the fastest machines.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 20:24:01 2006
Return-Path: 
 <hadoop-dev-return-3992-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 74140 invoked from network); 28 Sep 2006 20:24:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 20:24:01 -0000
Received: (qmail 38443 invoked by uid 500); 28 Sep 2006 20:23:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38421 invoked by uid 500); 28 Sep 2006 20:23:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38411 invoked by uid 99); 28 Sep 2006 20:23:41 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 13:23:41 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 82A647142A0
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 20:18:52 +0000 (GMT)
Message-ID: <12197545.1159474732532.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 13:18:52 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-333) we should have some checks that the
 sort benchmark generates correct outputs
In-Reply-To: <22178088.1151601692882.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-333?page=all ]

Sameer Paranjpye updated HADOOP-333:
------------------------------------

    Component/s: mapred

> we should have some checks that the sort benchmark generates correct outputs
> ----------------------------------------------------------------------------
>
>                 Key: HADOOP-333
>                 URL: http://issues.apache.org/jira/browse/HADOOP-333
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>
> We should implement some checks of the input versus output of the sort benchmark to get some correctness guarantees:
> 1. the number of records
> 2. the number of bytes
> 3. the output records are in fact sorted
> 4. the xor of the md5 of each record's key/value pair

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 20:24:03 2006
Return-Path: 
 <hadoop-dev-return-3993-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 74187 invoked from network); 28 Sep 2006 20:24:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 20:24:03 -0000
Received: (qmail 38960 invoked by uid 500); 28 Sep 2006 20:23:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38779 invoked by uid 500); 28 Sep 2006 20:23:44 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38735 invoked by uid 99); 28 Sep 2006 20:23:44 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 13:23:43 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B09367142A3
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 20:18:53 +0000 (GMT)
Message-ID: <19102221.1159474733721.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 13:18:53 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-338) the number of maps in the JobConf does
 not match reality
In-Reply-To: <29595099.1151704649864.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-338?page=all ]

Sameer Paranjpye updated HADOOP-338:
------------------------------------

    Component/s: mapred

> the number of maps in the JobConf does not match reality
> --------------------------------------------------------
>
>                 Key: HADOOP-338
>                 URL: http://issues.apache.org/jira/browse/HADOOP-338
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.4.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>
> The config value JobConf.getNumMapTasks() returns the hint of how many maps should be run rather than the actual number of input splits that were generated.
> The job tracker should fix the job.xml with the actual number of input splits.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 20:24:25 2006
Return-Path: 
 <hadoop-dev-return-3994-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 74250 invoked from network); 28 Sep 2006 20:24:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 20:24:25 -0000
Received: (qmail 39428 invoked by uid 500); 28 Sep 2006 20:23:48 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 39294 invoked by uid 500); 28 Sep 2006 20:23:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 39251 invoked by uid 99); 28 Sep 2006 20:23:47 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 13:23:47 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EAF527142A6
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 20:18:54 +0000 (GMT)
Message-ID: <14908223.1159474734960.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 13:18:54 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-357) hadoop doesn't handle 0 reduces
In-Reply-To: <1892029.1152314789839.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-357?page=all ]

Sameer Paranjpye updated HADOOP-357:
------------------------------------

    Component/s: mapred

> hadoop doesn't handle 0 reduces
> -------------------------------
>
>                 Key: HADOOP-357
>                 URL: http://issues.apache.org/jira/browse/HADOOP-357
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>
> We have cases where we want to use maps for submitting parallel jobs and don't need any reduces. Currently, you are required to have a single reducer. It would be nicer if the framework would let you specify that you don't need any reducers.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 20:24:38 2006
Return-Path: 
 <hadoop-dev-return-3996-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 74510 invoked from network); 28 Sep 2006 20:24:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 20:24:38 -0000
Received: (qmail 41669 invoked by uid 500); 28 Sep 2006 20:24:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 41592 invoked by uid 500); 28 Sep 2006 20:24:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 41521 invoked by uid 99); 28 Sep 2006 20:24:09 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 13:24:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:51062]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 56/FB-17533-76F2C154 for <hadoop-dev@lucene.apache.org>;
 Thu, 28 Sep 2006 13:24:08 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BC9D27142AA
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 20:18:56 +0000 (GMT)
Message-ID: <23941060.1159474736770.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 13:18:56 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-379) provide progress feedback while the
 reducer is sorting
In-Reply-To: <31809468.1153522033897.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-379?page=all ]

Sameer Paranjpye updated HADOOP-379:
------------------------------------

    Component/s: mapred

> provide progress feedback while the reducer is sorting
> ------------------------------------------------------
>
>                 Key: HADOOP-379
>                 URL: http://issues.apache.org/jira/browse/HADOOP-379
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Yoram Arnon
>
> during the sort phase of reduce, the progress is stuck at 33%, like:
> tip_0132_r_000000 0.33333334 reduce > sort 
> For some jobs this takes a long time, during which it's not clear if the job is making any progress.
> Some progress indication would be good.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 20:25:41 2006
Return-Path: 
 <hadoop-dev-return-3999-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75146 invoked from network); 28 Sep 2006 20:25:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 20:25:41 -0000
Received: (qmail 48323 invoked by uid 500); 28 Sep 2006 20:25:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 48310 invoked by uid 500); 28 Sep 2006 20:25:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 48301 invoked by uid 99); 28 Sep 2006 20:25:36 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 13:25:35 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7174D71429D
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 20:20:51 +0000 (GMT)
Message-ID: <17790980.1159474851461.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 13:20:51 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-475) The value iterator to reduce function
 should be clonable
In-Reply-To: <28640755.1156462739379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-475?page=all ]

Sameer Paranjpye updated HADOOP-475:
------------------------------------

    Component/s: mapred
    Description: 
In the current framework, when the user implements the reduce method of Reducer class, 
the user can only iterate through the value iterator once. 
This makes it hard for the user to perform join-like operations with in the reduce method. 
To address problem, one approach is to make the input value iterator clonable. Then the user can iterate the values in different ways.
If the iterator can be reset, then the user can perform nested iterations over the data, thus 
carry out join-likeoperations.

The user code in reduce method would be something like:

                  iterator1 = values.clone();
                  iterator2 = values.clone();
                 while (iterator1.hasNext()) {
                      val1 = iterator1.next();
                      iterator2.reset();
                      while (iterator2.hasNext()) {
                           val2 = iterator.next();
                           do something vased on val1 and val2
                           .......................
                      }
                 }

One possible optimization is that if the values are sorted based on a secondary key, 
the reset function can take a secondary key as an argument and reset the iterator to the begining
position of the secondary key. It will be very helpful if there is a utility that returns a list of iterators,
one per secondary key value, from the given iterator:

                          TreeMap getIteratorsBasedOnSecondaryKey(iterator);

Each entry in the returned map object is a pair of <secondary key, iterator for the values with the same secondary key>.

  

  was:

In the current framework, when the user implements the reduce method of Reducer class, 
the user can only iterate through the value iterator once. 
This makes it hard for the user to perform join-like operations with in the reduce method. 
To address problem, one approach is to make the input value iterator clonable. Then the user can iterate the values in different ways.
If the iterator can be reset, then the user can perform nested iterations over the data, thus 
carry out join-likeoperations.

The user code in reduce method would be something like:

                  iterator1 = values.clone();
                  iterator2 = values.clone();
                 while (iterator1.hasNext()) {
                      val1 = iterator1.next();
                      iterator2.reset();
                      while (iterator2.hasNext()) {
                           val2 = iterator.next();
                           do something vased on val1 and val2
                           .......................
                      }
                 }

One possible optimization is that if the values are sorted based on a secondary key, 
the reset function can take a secondary key as an argument and reset the iterator to the begining
position of the secondary key. It will be very helpful if there is a utility that returns a list of iterators,
one per secondary key value, from the given iterator:

                          TreeMap getIteratorsBasedOnSecondaryKey(iterator);

Each entry in the returned map object is a pair of <secondary key, iterator for the values with the same secondary key>.

  


> The value iterator to reduce function should be clonable
> --------------------------------------------------------
>
>                 Key: HADOOP-475
>                 URL: http://issues.apache.org/jira/browse/HADOOP-475
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>            Reporter: Runping Qi
>
> In the current framework, when the user implements the reduce method of Reducer class, 
> the user can only iterate through the value iterator once. 
> This makes it hard for the user to perform join-like operations with in the reduce method. 
> To address problem, one approach is to make the input value iterator clonable. Then the user can iterate the values in different ways.
> If the iterator can be reset, then the user can perform nested iterations over the data, thus 
> carry out join-likeoperations.
> The user code in reduce method would be something like:
>                   iterator1 = values.clone();
>                   iterator2 = values.clone();
>                  while (iterator1.hasNext()) {
>                       val1 = iterator1.next();
>                       iterator2.reset();
>                       while (iterator2.hasNext()) {
>                            val2 = iterator.next();
>                            do something vased on val1 and val2
>                            .......................
>                       }
>                  }
> One possible optimization is that if the values are sorted based on a secondary key, 
> the reset function can take a secondary key as an argument and reset the iterator to the begining
> position of the secondary key. It will be very helpful if there is a utility that returns a list of iterators,
> one per secondary key value, from the given iterator:
>                           TreeMap getIteratorsBasedOnSecondaryKey(iterator);
> Each entry in the returned map object is a pair of <secondary key, iterator for the values with the same secondary key>.
>   

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 20:25:32 2006
Return-Path: 
 <hadoop-dev-return-3997-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75083 invoked from network); 28 Sep 2006 20:25:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 20:25:32 -0000
Received: (qmail 47874 invoked by uid 500); 28 Sep 2006 20:25:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47847 invoked by uid 500); 28 Sep 2006 20:25:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47838 invoked by uid 99); 28 Sep 2006 20:25:32 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 13:25:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B0812714289
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 20:20:52 +0000 (GMT)
Message-ID: <20261821.1159474852720.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 13:20:52 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-445) Parallel data/socket writing for
 DFSOutputStream
In-Reply-To: <33376677.1155243255066.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-445?page=all ]

Sameer Paranjpye updated HADOOP-445:
------------------------------------

    Component/s: dfs

> Parallel data/socket writing for DFSOutputStream
> ------------------------------------------------
>
>                 Key: HADOOP-445
>                 URL: http://issues.apache.org/jira/browse/HADOOP-445
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Benjamin Reed
>         Attachments: fastClientWrite.patch
>
>
> Currently, as DFS clients output blocks they write the entire block to disk before starting to transmit to the datanode. By writing to disk the client is able to retry a block write if the datanode files in the middle of a block transfer. Writing to disk and then to the datanode adds latency. Hopefully, the common case is that block transfers to datanodes are successful. This patch writes to the datanode and the disk in parallel. If the write to the datanode fails, it falls back to current behavior.
> In my tests of transmits of 237M and 946M datasets using -copyFromLocal I'm seeing a 20-25% improvement in throughput.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 20:25:34 2006
Return-Path: 
 <hadoop-dev-return-3998-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75117 invoked from network); 28 Sep 2006 20:25:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 20:25:34 -0000
Received: (qmail 48109 invoked by uid 500); 28 Sep 2006 20:25:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 48078 invoked by uid 500); 28 Sep 2006 20:25:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 48069 invoked by uid 99); 28 Sep 2006 20:25:33 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 13:25:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E29257142A0
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 20:20:53 +0000 (GMT)
Message-ID: <2023854.1159474853925.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 13:20:53 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-448) DistributedFileSystem uses the wrong
 user.name to set the working directory.
In-Reply-To: <23646598.1155318497445.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-448?page=all ]

Sameer Paranjpye updated HADOOP-448:
------------------------------------

    Component/s: dfs

> DistributedFileSystem uses the wrong user.name to set the working directory.
> ----------------------------------------------------------------------------
>
>                 Key: HADOOP-448
>                 URL: http://issues.apache.org/jira/browse/HADOOP-448
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Benjamin Reed
>
> DistributedFileSystem initializes the working directory to be new Path("/user", System.getProperty("user.name")); rather than new Path("/user", conf.get("user.name")); the initialization would have to be moved to the constructor to access conf.
> If relative paths are used, the remote tasks and JobTracker will use the uid they are running with rather than the id of the user that submitted the job.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 20:27:46 2006
Return-Path: 
 <hadoop-dev-return-4004-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76287 invoked from network); 28 Sep 2006 20:27:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 20:27:46 -0000
Received: (qmail 55404 invoked by uid 500); 28 Sep 2006 20:27:43 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55343 invoked by uid 500); 28 Sep 2006 20:27:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55289 invoked by uid 99); 28 Sep 2006 20:27:43 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 13:27:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:47290]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 7C/0C-17533-D003C154 for <hadoop-dev@lucene.apache.org>;
 Thu, 28 Sep 2006 13:26:55 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A66807142A5
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 20:20:55 +0000 (GMT)
Message-ID: <6511055.1159474855679.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 13:20:55 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-429)  Periodically move blocks from full
 nodes to those with space
In-Reply-To: <31611790.1154989334097.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-429?page=all ]

Sameer Paranjpye updated HADOOP-429:
------------------------------------

    Component/s: dfs

>  Periodically move blocks from full nodes to those with space
> -------------------------------------------------------------
>
>                 Key: HADOOP-429
>                 URL: http://issues.apache.org/jira/browse/HADOOP-429
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Bryan Pendleton
>
> Continuance of Hadoop-386. The patch to that issue makes it possible to redistribute blocks (change replication up, wait for replication to succeed, then lower replication again). However, this requires a lot more space, is not automatic, and doesn't respect a reasonable I/O limit. I have actually had MapReduce jobs fail from block missing execptions after having recently changed the replication level (from 3 to 4, with no underreplications to start with) because the datanodes were too slow responding to requests while performing the necessary replications.
> A good fix to this problem would be a low-priority thread on the NameNode that schedules low-priority replications of blocks on over-full machines, followed by the removal of the extra replications. It might be worth having a specific prototocol for asking for these low-priority copies to happen in the datanodes, so that they continue to service (and be available to service) normal block requests.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 20:25:45 2006
Return-Path: 
 <hadoop-dev-return-4000-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75194 invoked from network); 28 Sep 2006 20:25:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 20:25:45 -0000
Received: (qmail 48434 invoked by uid 500); 28 Sep 2006 20:25:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 48409 invoked by uid 500); 28 Sep 2006 20:25:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 48398 invoked by uid 99); 28 Sep 2006 20:25:36 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 13:25:36 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0CB797142A3
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 20:20:57 +0000 (GMT)
Message-ID: <27061479.1159474857049.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 13:20:57 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-511) mapred.reduce.tasks not used
In-Reply-To: <15338675.1157564184870.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-511?page=all ]

Sameer Paranjpye updated HADOOP-511:
------------------------------------

    Component/s: mapred

> mapred.reduce.tasks not used
> ----------------------------
>
>                 Key: HADOOP-511
>                 URL: http://issues.apache.org/jira/browse/HADOOP-511
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.5.0
>            Reporter: Uros Gruber
>
> After some testing with nutch I found problem with ArithmeticException in partition function because numReduceTasks came in 0. After seting mapred.reduce.tasks in hadoop-site.xml to same value as default everything works.
> This bug disappear in SVN version of hadoop
> I this known issue. Please check also NUTCH-361 for detail explanation.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 20:27:12 2006
Return-Path: 
 <hadoop-dev-return-4001-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75786 invoked from network); 28 Sep 2006 20:27:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 20:27:12 -0000
Received: (qmail 50747 invoked by uid 500); 28 Sep 2006 20:26:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 50346 invoked by uid 500); 28 Sep 2006 20:26:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 50226 invoked by uid 99); 28 Sep 2006 20:26:34 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 13:26:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9ABE07142A9
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 20:21:01 +0000 (GMT)
Message-ID: <18521754.1159474861631.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 13:21:01 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-500) Datanode should scan blocks
 continuously to detect bad blocks / CRC errors
In-Reply-To: <17559761.1157059522365.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-500?page=all ]

Sameer Paranjpye updated HADOOP-500:
------------------------------------

    Component/s: dfs

> Datanode should scan blocks continuously to detect bad blocks / CRC errors
> --------------------------------------------------------------------------
>
>                 Key: HADOOP-500
>                 URL: http://issues.apache.org/jira/browse/HADOOP-500
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: eric baldeschwieler
>
> This is a spin-off of the discussion in HADOOP-95

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 20:29:22 2006
Return-Path: 
 <hadoop-dev-return-4005-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76656 invoked from network); 28 Sep 2006 20:29:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 20:29:22 -0000
Received: (qmail 56770 invoked by uid 500); 28 Sep 2006 20:29:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 56726 invoked by uid 500); 28 Sep 2006 20:29:16 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 56653 invoked by uid 99); 28 Sep 2006 20:29:15 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 13:29:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:47328]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id D3/1C-17533-6403C154 for <hadoop-dev@lucene.apache.org>;
 Thu, 28 Sep 2006 13:28:06 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B1F5C7142A2
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 20:22:53 +0000 (GMT)
Message-ID: <26020587.1159474973726.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 13:22:53 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-489) Seperating user logs from system logs
 in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-489?page=all ]

Owen O'Malley reassigned HADOOP-489:
------------------------------------

    Assignee: Owen O'Malley  (was: Mahadev konar)

> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Owen O'Malley
>            Priority: Minor
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 20:29:23 2006
Return-Path: 
 <hadoop-dev-return-4007-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76681 invoked from network); 28 Sep 2006 20:29:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 20:29:23 -0000
Received: (qmail 56834 invoked by uid 500); 28 Sep 2006 20:29:19 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 56746 invoked by uid 500); 28 Sep 2006 20:29:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 56663 invoked by uid 99); 28 Sep 2006 20:29:15 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 13:29:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:47332]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 13/1C-17533-6403C154 for <hadoop-dev@lucene.apache.org>;
 Thu, 28 Sep 2006 13:28:06 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 15F5B71429D
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 20:22:55 +0000 (GMT)
Message-ID: <10446259.1159474975087.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 13:22:55 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-485) allow a different comparator for
 grouping keys in calls to reduce
In-Reply-To: <18308270.1156578742395.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-485?page=all ]

Sameer Paranjpye updated HADOOP-485:
------------------------------------

    Component/s: mapred

> allow a different comparator for grouping keys in calls to reduce
> -----------------------------------------------------------------
>
>                 Key: HADOOP-485
>                 URL: http://issues.apache.org/jira/browse/HADOOP-485
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.5.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>
> Some algorithms require that the values to the reduce be sorted in a particular order, but extending the key with the additional fields causes  them to be handled by different calls to reduce. (The user then collects the values until they detect a "real" key change and then processes them.)
> It would be much easier if the framework let you define a second comparator that did the grouping of values for reduces. So your reduce inputs look like:
> A1, V1
> A2, V2
> A3, V3
> B1, V4
> B2, V5
> instead of getting calls to reduce that look like:
> reduce(A1, {V1}); reduce(A2, {V2}); reduce(A3, {V3}); reduce(B1, {V4}); reduce(B2, {V5});
> you could define the grouping comparator to just compare the letters and end up with:
> reduce(A1, {V1,V2,V3}); reduce(B1, {V4,V5});
> which is the desired outcome. Note that this assumes that the "extra" part of the key is just for sorting because the reduce will only see the first representative of each equivalence class.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 20:29:23 2006
Return-Path: 
 <hadoop-dev-return-4006-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76682 invoked from network); 28 Sep 2006 20:29:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 20:29:23 -0000
Received: (qmail 56782 invoked by uid 500); 28 Sep 2006 20:29:19 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 56733 invoked by uid 500); 28 Sep 2006 20:29:16 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 56655 invoked by uid 99); 28 Sep 2006 20:29:15 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 13:29:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:47335]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 04/1C-17533-6403C154 for <hadoop-dev@lucene.apache.org>;
 Thu, 28 Sep 2006 13:28:06 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D32CE7142A8
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 20:22:56 +0000 (GMT)
Message-ID: <16826378.1159474976862.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 13:22:56 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-535) back to back testing of codecs
In-Reply-To: <10412817.1158275122345.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-535?page=all ]

Sameer Paranjpye updated HADOOP-535:
------------------------------------

    Component/s: io

> back to back testing of codecs
> ------------------------------
>
>                 Key: HADOOP-535
>                 URL: http://issues.apache.org/jira/browse/HADOOP-535
>             Project: Hadoop
>          Issue Type: Test
>          Components: io
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>
> We should write some unit tests that use codecs back to back doing writing and then reading.
> compressed block1, compressed block 2, compressed block3, ...
> that will check that the compression codecs are consuming the entire block when they read.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 20:27:39 2006
Return-Path: 
 <hadoop-dev-return-4002-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76177 invoked from network); 28 Sep 2006 20:27:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 20:27:39 -0000
Received: (qmail 54683 invoked by uid 500); 28 Sep 2006 20:27:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 54658 invoked by uid 500); 28 Sep 2006 20:27:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 54641 invoked by uid 99); 28 Sep 2006 20:27:37 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 13:27:37 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0AF167142AA
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 20:22:58 +0000 (GMT)
Message-ID: <18175389.1159474978042.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 13:22:58 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-544) Replace the job, tip and task ids with
 objects.
In-Reply-To: <29918475.1158644842361.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-544?page=all ]

Sameer Paranjpye updated HADOOP-544:
------------------------------------

    Component/s: mapred

> Replace the job, tip and task ids with objects.
> -----------------------------------------------
>
>                 Key: HADOOP-544
>                 URL: http://issues.apache.org/jira/browse/HADOOP-544
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.6.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>
> I think that it is silly to have tools parsing the strings that the framework builds for task ids. I propose:
> class JobId implements Writable {
>   private int;
>   ...
> }
> class TaskId extends JobId { 
>   private boolean isMap;
>   private int taskId;
>   ...
> }
> class TaskAttemptId extends TaskId {
>   private int attemptId;
>   ...
> }
> each of the classes will have a toString() method that generates the current string.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 20:27:41 2006
Return-Path: 
 <hadoop-dev-return-4003-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76211 invoked from network); 28 Sep 2006 20:27:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 20:27:41 -0000
Received: (qmail 54957 invoked by uid 500); 28 Sep 2006 20:27:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 54895 invoked by uid 500); 28 Sep 2006 20:27:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 54819 invoked by uid 99); 28 Sep 2006 20:27:38 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 13:27:38 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 461817142AC
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 20:22:59 +0000 (GMT)
Message-ID: <9309738.1159474979284.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 13:22:59 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-552) getMapOutput doesn't reliably detect
 errors and throw to the caller
In-Reply-To: <32889729.1158769702347.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-552?page=all ]

Sameer Paranjpye updated HADOOP-552:
------------------------------------

    Component/s: mapred

> getMapOutput doesn't reliably detect errors and throw to the caller
> -------------------------------------------------------------------
>
>                 Key: HADOOP-552
>                 URL: http://issues.apache.org/jira/browse/HADOOP-552
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.6.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.7.0
>
>
> getMapOutput does not reliabily detect errors in transmission, which usually ends up with an EOFException in the reduce's sort:
> java.io.EOFException
> 	at java.io.DataInputStream.readFully(DataInputStream.java:178)
> 	at java.io.DataInputStream.readFully(DataInputStream.java:152)
> 	at org.apache.hadoop.io.SequenceFile$Reader.init(SequenceFile.java:952)
> 	at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:937)
> 	at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:928)
> 	at org.apache.hadoop.io.SequenceFile$Sorter$SortPass.run(SequenceFile.java:1594)
> 	at org.apache.hadoop.io.SequenceFile$Sorter.sortPass(SequenceFile.java:1523)
> 	at org.apache.hadoop.io.SequenceFile$Sorter.sort(SequenceFile.java:1496)
> 	at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:240)
> 	at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1173)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 20:29:32 2006
Return-Path: 
 <hadoop-dev-return-4008-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76883 invoked from network); 28 Sep 2006 20:29:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 20:29:32 -0000
Received: (qmail 58309 invoked by uid 500); 28 Sep 2006 20:29:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58288 invoked by uid 500); 28 Sep 2006 20:29:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58279 invoked by uid 99); 28 Sep 2006 20:29:30 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 13:29:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 53CBB714294
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 20:24:51 +0000 (GMT)
Message-ID: <25362148.1159475091340.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 13:24:51 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-563) DFS client should try to re-new lease
 if it gets a lease expiration exception when it adds a block to a file
In-Reply-To: <28125744.1159383470163.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-563?page=all ]

Sameer Paranjpye updated HADOOP-563:
------------------------------------

    Component/s: dfs
    Description: 
In the current DFS client implementation, there is one thread responsible for renewing leases. If for whatever reason, that thread runs behind, the lease may get expired. That causes the client gets a lease expiration exception when writing a block. The consequence of that is very devastating: the client can no longer write to the file, and all the partial results up to that point are gone! This is especially costly for some map reduce jobs where a reducer may take hours or even days to sort the intermediate results before the actual reducing work can start.

The problem will be solved if the flush method of  DFS client can renew lease on demand. That is, it should try to re-new lease  when it catches a lease expiration exception. That way,  even when under heavy load and the lease renewing thread runs behind, the reducer  task (or what ever tasks use that client) can preceed.  That will be a huge saving in some cases (where sorting intermediate results take a long time to finish). We can set a limit on the number of retries, and may even make it configurable (or changeable at runtime). 

The namenode can use a different expiration time that is much higher than the current 1 minute lease expiration time for cleaning  up the abandoned unclosed files.

 

  was:

In the current DFS client implementation, there is one thread responsible for renewing leases. If for whatever reason, that thread runs behind, the lease may get expired. That causes the client gets a lease expiration exception when writing a block. The consequence of that is very devastating: the client can no longer write to the file, and all the partial results up to that point are gone! This is especially costly for some map reduce jobs where a reducer may take hours or even days to sort the intermediate results before the actual reducing work can start.

The problem will be solved if the flush method of  DFS client can renew lease on demand. That is, it should try to re-new lease  when it catches a lease expiration exception. That way,  even when under heavy load and the lease renewing thread runs behind, the reducer  task (or what ever tasks use that client) can preceed.  That will be a huge saving in some cases (where sorting intermediate results take a long time to finish). We can set a limit on the number of retries, and may even make it configurable (or changeable at runtime). 

The namenode can use a different expiration time that is much higher than the current 1 minute lease expiration time for cleaning  up the abandoned unclosed files.

 


> DFS client should try to re-new lease if it gets a lease expiration exception when it adds a block to a file
> ------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-563
>                 URL: http://issues.apache.org/jira/browse/HADOOP-563
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Runping Qi
>
> In the current DFS client implementation, there is one thread responsible for renewing leases. If for whatever reason, that thread runs behind, the lease may get expired. That causes the client gets a lease expiration exception when writing a block. The consequence of that is very devastating: the client can no longer write to the file, and all the partial results up to that point are gone! This is especially costly for some map reduce jobs where a reducer may take hours or even days to sort the intermediate results before the actual reducing work can start.
> The problem will be solved if the flush method of  DFS client can renew lease on demand. That is, it should try to re-new lease  when it catches a lease expiration exception. That way,  even when under heavy load and the lease renewing thread runs behind, the reducer  task (or what ever tasks use that client) can preceed.  That will be a huge saving in some cases (where sorting intermediate results take a long time to finish). We can set a limit on the number of retries, and may even make it configurable (or changeable at runtime). 
> The namenode can use a different expiration time that is much higher than the current 1 minute lease expiration time for cleaning  up the abandoned unclosed files.
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 20:29:33 2006
Return-Path: 
 <hadoop-dev-return-4009-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76919 invoked from network); 28 Sep 2006 20:29:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 20:29:33 -0000
Received: (qmail 58521 invoked by uid 500); 28 Sep 2006 20:29:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58498 invoked by uid 500); 28 Sep 2006 20:29:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58474 invoked by uid 99); 28 Sep 2006 20:29:31 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 13:29:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7D3C1714289
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 20:24:52 +0000 (GMT)
Message-ID: <603921.1159475092510.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 13:24:52 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-564) we should use hdfs:// in all API URIs
In-Reply-To: <8791585.1159415030129.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-564?page=all ]

Sameer Paranjpye updated HADOOP-564:
------------------------------------

    Component/s: dfs

> we should use hdfs:// in all API URIs
> -------------------------------------
>
>                 Key: HADOOP-564
>                 URL: http://issues.apache.org/jira/browse/HADOOP-564
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: eric baldeschwieler
>
> Minor nit, but it seems that we should choose a protocol name that is likely not to conflict with other distributed FS projects.  HDFS seems less likely to.  
> Right now this will be trivial to change.  Just wanted to socialize this before doing the search and replace.  
> PS right now the dfs: usage is not consistent and has crept into a couple of new features the y! team is working on (caching of files and distcp).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 20:29:35 2006
Return-Path: 
 <hadoop-dev-return-4010-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76952 invoked from network); 28 Sep 2006 20:29:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 20:29:35 -0000
Received: (qmail 58759 invoked by uid 500); 28 Sep 2006 20:29:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58741 invoked by uid 500); 28 Sep 2006 20:29:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58732 invoked by uid 99); 28 Sep 2006 20:29:34 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 13:29:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D994B7142A0
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 20:24:54 +0000 (GMT)
Message-ID: <7906472.1159475094889.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 13:24:54 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-513) IllegalStateException is thrown by
 TaskTracker
In-Reply-To: <2419146.1157581404070.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-513?page=all ]

Sameer Paranjpye updated HADOOP-513:
------------------------------------

    Component/s: mapred

> IllegalStateException is thrown by TaskTracker
> ----------------------------------------------
>
>                 Key: HADOOP-513
>                 URL: http://issues.apache.org/jira/browse/HADOOP-513
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.5.0
>            Reporter: Konstantin Shvachko
>
> I am running TestDFSIO on a one node cluster and getting IllegalStateException for each map task run as listed below.
> The same exceptions are flooding logs for TestMiniMRWithDFS on my nightly build for quite a while now.
> Does anybody know what that is?
> My understanding is that if it is "illegal", then tests should fail.
> If not then it should be caught and ignored INTERNALLY.
> 06/09/06 14:54:50 INFO mapred.TaskTracker: task_0002_r_000000_0 0.25% reduce > copy (3 of 4 at 0.00 MB/s) >
> 06/09/06 14:54:50 INFO mapred.TaskRunner: task_0002_r_000000_0 Need 1 map output(s)
> 06/09/06 14:54:50 INFO mapred.TaskRunner: task_0002_r_000000_0 Got 1 known map output location(s); scheduling...
> 06/09/06 14:54:50 INFO mapred.TaskRunner: task_0002_r_000000_0 Scheduled 1 of 1 known outputs (0 slow hosts and 0 dup hosts)
> 06/09/06 14:54:50 INFO mapred.TaskRunner: task_0002_r_000000_0 Copying task_0002_m_000003_0 output from ENO.
> 06/09/06 14:54:50 WARN /: /getMapOutput.jsp?map=task_0002_m_000003_0&reduce=0:
> java.lang.IllegalStateException
>     at org.mortbay.jetty.servlet.ServletHttpResponse.getWriter(ServletHttpResponse.java:561)
>     at org.apache.jasper.runtime.JspWriterImpl.initOut(JspWriterImpl.java:122)
>     at org.apache.jasper.runtime.JspWriterImpl.flushBuffer(JspWriterImpl.java:115)
>     at org.apache.jasper.runtime.PageContextImpl.release(PageContextImpl.java:190)
>     at org.apache.jasper.runtime.JspFactoryImpl.internalReleasePageContext(JspFactoryImpl.java:115)
>     at org.apache.jasper.runtime.JspFactoryImpl.releasePageContext(JspFactoryImpl.java:75)
>     at org.apache.hadoop.mapred.getMapOutput_jsp._jspService(getMapOutput_jsp.java:100)
>     at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:94)
>     at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
>     at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:427)
>     at org.mortbay.jetty.servlet.WebApplicationHandler.dispatch(WebApplicationHandler.java:475)
>     at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:567)
>     at org.mortbay.http.HttpContext.handle(HttpContext.java:1565)
>     at org.mortbay.jetty.servlet.WebApplicationContext.handle(WebApplicationContext.java:635)
>     at org.mortbay.http.HttpContext.handle(HttpContext.java:1517)
>     at org.mortbay.http.HttpServer.service(HttpServer.java:954)
>     at org.mortbay.http.HttpConnection.service(HttpConnection.java:814)
>     at org.mortbay.http.HttpConnection.handleNext(HttpConnection.java:981)
>     at org.mortbay.http.HttpConnection.handle(HttpConnection.java:831)
>     at org.mortbay.http.SocketListener.handleConnection(SocketListener.java:244)
>     at org.mortbay.util.ThreadedServer.handle(ThreadedServer.java:357)
>     at org.mortbay.util.ThreadPool$PoolThread.run(ThreadPool.java:534)
> 06/09/06 14:54:50 INFO mapred.TaskRunner: task_0002_r_000000_0 done copying task_0002_m_000003_0 output from ENO.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 20:29:42 2006
Return-Path: 
 <hadoop-dev-return-4011-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77094 invoked from network); 28 Sep 2006 20:29:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 20:29:42 -0000
Received: (qmail 59229 invoked by uid 500); 28 Sep 2006 20:29:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 59204 invoked by uid 500); 28 Sep 2006 20:29:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 59184 invoked by uid 99); 28 Sep 2006 20:29:37 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 13:29:37 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E2DDA7142A3
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 20:24:57 +0000 (GMT)
Message-ID: <20038788.1159475097926.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 13:24:57 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-555) Tasks should inherit some of the
 server's environment
In-Reply-To: <4456046.1158966382364.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-555?page=all ]

Sameer Paranjpye updated HADOOP-555:
------------------------------------

    Component/s: mapred

> Tasks should inherit some of the server's environment
> -----------------------------------------------------
>
>                 Key: HADOOP-555
>                 URL: http://issues.apache.org/jira/browse/HADOOP-555
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Owen O'Malley
>
> When the task trackers start up the Task process, they clear the environment variables. It would be better if there was a SERVER config that listed the names of the environment variables that would be copied from the server's enviroment.
> So the task tracker's config would have:
> <property><name>mapred.task.environment</name>
> <value>PATH,LD_LIBRARY_PATH</value></property>

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 20:32:37 2006
Return-Path: 
 <hadoop-dev-return-4013-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77637 invoked from network); 28 Sep 2006 20:32:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 20:32:37 -0000
Received: (qmail 62350 invoked by uid 500); 28 Sep 2006 20:32:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 61948 invoked by uid 500); 28 Sep 2006 20:32:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 61926 invoked by uid 99); 28 Sep 2006 20:31:59 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 13:31:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 644CF714289
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 20:26:51 +0000 (GMT)
Message-ID: <17412242.1159475211408.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 13:26:51 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-230) improve syntax of the hadoop dfs
 command
In-Reply-To: <13592705.1147967826365.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-230?page=all ]

Sameer Paranjpye updated HADOOP-230:
------------------------------------

    Component/s: dfs

> improve syntax of the hadoop dfs command
> ----------------------------------------
>
>                 Key: HADOOP-230
>                 URL: http://issues.apache.org/jira/browse/HADOOP-230
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Yoram Arnon
>            Priority: Minor
>
> the hadoop dfs syntax (hadoop dfs -option value -cmd arg) is clunky: options must appear before the command, the command looks like just another option.
> I propose a more standard syntax:
> 1. the command (ls, mv, du etc.) always comes first
> 2. no '-' for the command
> 3. options may appear anywhere, including between the command and its arguments
> allowed syntax would be:
> hadoop dfs ls -dfs <dfs> /path
> hadoop dfs ls /path -dfs <dfs>
> other commands may benefit from a similar syntax change:
> hadoop job [-status] job_0002 -jt <jt>
> etc.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 20:32:42 2006
Return-Path: 
 <hadoop-dev-return-4017-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77863 invoked from network); 28 Sep 2006 20:32:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 20:32:42 -0000
Received: (qmail 63966 invoked by uid 500); 28 Sep 2006 20:32:16 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63945 invoked by uid 500); 28 Sep 2006 20:32:16 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63925 invoked by uid 99); 28 Sep 2006 20:32:16 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 13:32:15 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8D2F671429D
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 20:26:52 +0000 (GMT)
Message-ID: <19383523.1159475212575.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 13:26:52 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-557) task tracker cannot find mapoutput
 files
In-Reply-To: <14791507.1159213910719.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-557?page=all ]

Sameer Paranjpye updated HADOOP-557:
------------------------------------

    Component/s: mapred
    Description: 
I ran a large job on our cluster over the weekend. At some point, some map tasks were re-run successfully. However, when trying to handle the reducers requests to fetch mapoutput files of those map tasks, the http server complained file not found.

This happened multiple times on different machines for the same map task until the job tracker aborted the job.




  was:

I ran a large job on our cluster over the weekend. At some point, some map tasks were re-run successfully. However, when trying to handle the reducers requests to fetch mapoutput files of those map tasks, the http server complained file not found.

This happened multiple times on different machines for the same map task until the job tracker aborted the job.





> task tracker cannot find mapoutput files
> ----------------------------------------
>
>                 Key: HADOOP-557
>                 URL: http://issues.apache.org/jira/browse/HADOOP-557
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Runping Qi
>
> I ran a large job on our cluster over the weekend. At some point, some map tasks were re-run successfully. However, when trying to handle the reducers requests to fetch mapoutput files of those map tasks, the http server complained file not found.
> This happened multiple times on different machines for the same map task until the job tracker aborted the job.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 20:32:39 2006
Return-Path: 
 <hadoop-dev-return-4015-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77742 invoked from network); 28 Sep 2006 20:32:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 20:32:39 -0000
Received: (qmail 62604 invoked by uid 500); 28 Sep 2006 20:32:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62197 invoked by uid 500); 28 Sep 2006 20:32:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 61951 invoked by uid 99); 28 Sep 2006 20:32:01 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 13:31:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E597A7142A0
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 20:26:53 +0000 (GMT)
Message-ID: <17827486.1159475213938.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 13:26:53 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-543) Error to open job files
In-Reply-To: <30517116.1158627262419.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-543?page=3Dall ]

Sameer Paranjpye updated HADOOP-543:
------------------------------------

    Component/s: mapred
    Description:=20
I was running a faily large job on Hadoop release 0.6.2.
The job failed because a lot of map tasks failed with following exceptions:

org.apache.hadoop.ipc.RemoteException: java.io.IOException:=20
Cannot open filename .../mapred/system/submit_zaretf/job.xml at org.apache.=
hadoop.dfs.NameNode.open(NameNode.java:178) at sun.reflect.GeneratedMethodA=
ccessor7.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl=
.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.i=
nvoke(Method.java:585) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:33=
3) at org.apache.hadoop.ipc.Server$Handler.run(Server.java:473) at org.apac=
he.hadoop.ipc.Client$Connection.run(Client.java:245)=20

java.lang.RuntimeException: java.lang.RuntimeException: ../mapred/local/tas=
kTracker/task_0031_m_046467_0/job.xml not found at org.apache.hadoop.conf.C=
onfiguration.loadResource(Configuration.java:549) at org.apache.hadoop.conf=
.Configuration.loadResources(Configuration.java:476) at org.apache.hadoop.c=
onf.Configuration.getProps(Configuration.java:457) at org.apache.hadoop.con=
f.Configuration.set(Configuration.java:204) at org.apache.hadoop.mapred.Tas=
kTracker$TaskInProgress.localizeTask(TaskTracker.java:724) at org.apache.ha=
doop.mapred.TaskTracker$TaskInProgress.launchTask(TaskTracker.java:779) at =
org.apache.hadoop.mapred.TaskTracker.startNewTask(TaskTracker.java:574) at =
org.apache.hadoop.mapred.TaskTracker.offerService(TaskTracker.java:394) at =
org.apache.hadoop.mapred.TaskTracker.run(TaskTracker.java:603) at org.apach=
e.hadoop.mapred.TaskTracker.main(TaskTracker.java:1191) Caused by: java.lan=
g.RuntimeException: ../mapred/local/taskTracker/task_0031_m_046467_0/job.xm=
l not found at org.apache.hadoop.conf.Configuration.loadResource(Configurat=
ion.java:516) ... 9 more=20

org.apache.hadoop.ipc.RemoteException: java.io.IOException: Cannot open fil=
ename ../mapred/system/submit_zaretf/job.jar at org.apache.hadoop.dfs.NameN=
ode.open(NameNode.java:178) at sun.reflect.GeneratedMethodAccessor7.invoke(=
Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(Delegati=
ngMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.jav=
a:585) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:333) at org.apache=
.hadoop.ipc.Server$Handler.run(Server.java:473) at org.apache.hadoop.ipc.Cl=
ient$Connection.run(Client.java:245)=20

  was:

I was running a faily large job on Hadoop release 0.6.2.
The job failed because a lot of map tasks failed with following exceptions:

org.apache.hadoop.ipc.RemoteException: java.io.IOException:=20
Cannot open filename .../mapred/system/submit_zaretf/job.xml at org.apache.=
hadoop.dfs.NameNode.open(NameNode.java:178) at sun.reflect.GeneratedMethodA=
ccessor7.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl=
.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.i=
nvoke(Method.java:585) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:33=
3) at org.apache.hadoop.ipc.Server$Handler.run(Server.java:473) at org.apac=
he.hadoop.ipc.Client$Connection.run(Client.java:245)=20

java.lang.RuntimeException: java.lang.RuntimeException: ../mapred/local/tas=
kTracker/task_0031_m_046467_0/job.xml not found at org.apache.hadoop.conf.C=
onfiguration.loadResource(Configuration.java:549) at org.apache.hadoop.conf=
.Configuration.loadResources(Configuration.java:476) at org.apache.hadoop.c=
onf.Configuration.getProps(Configuration.java:457) at org.apache.hadoop.con=
f.Configuration.set(Configuration.java:204) at org.apache.hadoop.mapred.Tas=
kTracker$TaskInProgress.localizeTask(TaskTracker.java:724) at org.apache.ha=
doop.mapred.TaskTracker$TaskInProgress.launchTask(TaskTracker.java:779) at =
org.apache.hadoop.mapred.TaskTracker.startNewTask(TaskTracker.java:574) at =
org.apache.hadoop.mapred.TaskTracker.offerService(TaskTracker.java:394) at =
org.apache.hadoop.mapred.TaskTracker.run(TaskTracker.java:603) at org.apach=
e.hadoop.mapred.TaskTracker.main(TaskTracker.java:1191) Caused by: java.lan=
g.RuntimeException: ../mapred/local/taskTracker/task_0031_m_046467_0/job.xm=
l not found at org.apache.hadoop.conf.Configuration.loadResource(Configurat=
ion.java:516) ... 9 more=20

org.apache.hadoop.ipc.RemoteException: java.io.IOException: Cannot open fil=
ename ../mapred/system/submit_zaretf/job.jar at org.apache.hadoop.dfs.NameN=
ode.open(NameNode.java:178) at sun.reflect.GeneratedMethodAccessor7.invoke(=
Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(Delegati=
ngMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.jav=
a:585) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:333) at org.apache=
.hadoop.ipc.Server$Handler.run(Server.java:473) at org.apache.hadoop.ipc.Cl=
ient$Connection.run(Client.java:245)=20


> Error to open job files
> -----------------------
>
>                 Key: HADOOP-543
>                 URL: http://issues.apache.org/jira/browse/HADOOP-543
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.6.2
>            Reporter: Runping Qi
>
> I was running a faily large job on Hadoop release 0.6.2.
> The job failed because a lot of map tasks failed with following exception=
s:
> org.apache.hadoop.ipc.RemoteException: java.io.IOException:=20
> Cannot open filename .../mapred/system/submit_zaretf/job.xml at org.apach=
e.hadoop.dfs.NameNode.open(NameNode.java:178) at sun.reflect.GeneratedMetho=
dAccessor7.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorIm=
pl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method=
.invoke(Method.java:585) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:=
333) at org.apache.hadoop.ipc.Server$Handler.run(Server.java:473) at org.ap=
ache.hadoop.ipc.Client$Connection.run(Client.java:245)=20
> java.lang.RuntimeException: java.lang.RuntimeException: ../mapred/local/t=
askTracker/task_0031_m_046467_0/job.xml not found at org.apache.hadoop.conf=
.Configuration.loadResource(Configuration.java:549) at org.apache.hadoop.co=
nf.Configuration.loadResources(Configuration.java:476) at org.apache.hadoop=
.conf.Configuration.getProps(Configuration.java:457) at org.apache.hadoop.c=
onf.Configuration.set(Configuration.java:204) at org.apache.hadoop.mapred.T=
askTracker$TaskInProgress.localizeTask(TaskTracker.java:724) at org.apache.=
hadoop.mapred.TaskTracker$TaskInProgress.launchTask(TaskTracker.java:779) a=
t org.apache.hadoop.mapred.TaskTracker.startNewTask(TaskTracker.java:574) a=
t org.apache.hadoop.mapred.TaskTracker.offerService(TaskTracker.java:394) a=
t org.apache.hadoop.mapred.TaskTracker.run(TaskTracker.java:603) at org.apa=
che.hadoop.mapred.TaskTracker.main(TaskTracker.java:1191) Caused by: java.l=
ang.RuntimeException: ../mapred/local/taskTracker/task_0031_m_046467_0/job.=
xml not found at org.apache.hadoop.conf.Configuration.loadResource(Configur=
ation.java:516) ... 9 more=20
> org.apache.hadoop.ipc.RemoteException: java.io.IOException: Cannot open f=
ilename ../mapred/system/submit_zaretf/job.jar at org.apache.hadoop.dfs.Nam=
eNode.open(NameNode.java:178) at sun.reflect.GeneratedMethodAccessor7.invok=
e(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(Delega=
tingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.j=
ava:585) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:333) at org.apac=
he.hadoop.ipc.Server$Handler.run(Server.java:473) at org.apache.hadoop.ipc.=
Client$Connection.run(Client.java:245)=20

--=20
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: htt=
p://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

       

From MAILER-DAEMON Thu Sep 28 20:32:38 2006
Return-Path: 
 <hadoop-dev-return-4014-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77727 invoked from network); 28 Sep 2006 20:32:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 20:32:38 -0000
Received: (qmail 62430 invoked by uid 500); 28 Sep 2006 20:32:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62182 invoked by uid 500); 28 Sep 2006 20:32:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 61953 invoked by uid 99); 28 Sep 2006 20:32:01 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 13:31:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C10577142A2
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 20:26:55 +0000 (GMT)
Message-ID: <11725091.1159475215787.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 13:26:55 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-439) Streaming does not work for text data
 if the records don't fit in a short UTF8 [2^16/3 characters]
In-Reply-To: <8502499.1155174613900.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-439?page=all ]

Sameer Paranjpye updated HADOOP-439:
------------------------------------

    Component/s: contrib/streaming

> Streaming does not work for text data if the records don't fit in a short UTF8 [2^16/3 characters]
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-439
>                 URL: http://issues.apache.org/jira/browse/HADOOP-439
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>    Affects Versions: 0.5.0
>            Reporter: Dick King
>         Assigned To: Hairong Kuang
>            Priority: Critical
>
> The streaming code internally reads the input data into a UTF8 .  This causes truncated data to be shipped to the mapper when the input exceeds about 21000 characters, with no notice to the user except possibly in individual tasks' machines' logs, which people would not normally read for apparently successful jobs.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 20:32:09 2006
Return-Path: 
 <hadoop-dev-return-4012-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77551 invoked from network); 28 Sep 2006 20:32:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 20:32:09 -0000
Received: (qmail 62007 invoked by uid 500); 28 Sep 2006 20:32:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 61946 invoked by uid 500); 28 Sep 2006 20:31:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 61925 invoked by uid 99); 28 Sep 2006 20:31:59 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 13:31:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 248347142A5
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 20:26:58 +0000 (GMT)
Message-ID: <32583231.1159475218147.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 13:26:58 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-550) Text constructure can throw
 exception
In-Reply-To: <6747780.1158701362340.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-550?page=comments#action_12438547 ] 
            
Doug Cutting commented on HADOOP-550:
-------------------------------------

Two minor nits:

1. Instead of ignoring the CharacterCodingException that should never be thrown, it would be better to throw a RuntimeException.  That way, if it ever does happen, we'll know.

2. It would be good to add unit tests that creates a Text using invalid UTF-8, i.e., random binary data, and check that various methods work as expected.


> Text constructure can throw exception
> -------------------------------------
>
>                 Key: HADOOP-550
>                 URL: http://issues.apache.org/jira/browse/HADOOP-550
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.6.2
>            Reporter: Bryan Pendleton
>         Assigned To: Hairong Kuang
>             Fix For: 0.7.0
>
>         Attachments: text.patch
>
>
> I finally got back around to moving my working code to using Text objects.
> And, once again, switching to Text (from UTF8) means my jobs are failing. This time, its better defined - constructing a Text from a string extracted from Real World data makes the Text object constructor throw a CharacterCodingException. This may be legit - I don't actually understand UTF well enough to understand what's wrong with the supplied string. I'm assembling a series of strings, some of which are user-supplied, and something causes the Text constructor to barf.
> However, this is still completely unacceptable. If I need to stuff textual data someplace - I need the container to *do* it. If user-supplied inputs can't be stored as a "UTF" aware text value, then another container needs to be brought into existence. Sure, I can use a BytesWritable, but, as its name implies - Text should handle "text". If Text is supposed to == "StringWritable", then, well, it doesn't, yet.
> I admit to being a few weeks' back in the bleeding edge at this point, so maybe my particluar Text bug has been fixed, though the only fixes to Text I see are adopting it into more of the internals of Hadoop. This argument goes double in that case - if we're using Text objects internally, it should really be a totally solid object - construct one from a String, get one back, but _never_  throw a content-related Exception. Or, if Text is not the right object because its data-sensitive, then I argue we shouldn't use it in any case where data might kill it - internal, or anywhere else (by default).
> Please, don't remove UTF8, for now.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 20:32:40 2006
Return-Path: 
 <hadoop-dev-return-4016-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77788 invoked from network); 28 Sep 2006 20:32:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 20:32:40 -0000
Received: (qmail 62955 invoked by uid 500); 28 Sep 2006 20:32:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62895 invoked by uid 500); 28 Sep 2006 20:32:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62846 invoked by uid 99); 28 Sep 2006 20:32:10 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 13:32:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:34866]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 56/00-26776-6413C154 for <hadoop-dev@lucene.apache.org>;
 Thu, 28 Sep 2006 13:32:06 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6739E7142A8
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 20:26:59 +0000 (GMT)
Message-ID: <18312407.1159475219419.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 13:26:59 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-466) Startup scripts will not start
 instances of Hadoop daemons w/different configs w/o setting separate PID
 directories
In-Reply-To: <18080349.1156145293920.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-466?page=all ]

Sameer Paranjpye updated HADOOP-466:
------------------------------------

    Component/s: conf

> Startup scripts will not start instances of Hadoop daemons w/different configs w/o setting separate PID directories
> -------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-466
>                 URL: http://issues.apache.org/jira/browse/HADOOP-466
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: conf
>    Affects Versions: 0.5.0
>            Reporter: Vetle Roeim
>         Attachments: hadoop-466.diff
>
>
> Configuration directories can be specified by either setting HADOOP_CONF_DIR or using the --config command line option. However, the hadoop-daemon.sh script will not start the daemons unless the PID directory is separate for each configuration.
> The issue is that the code for generating PID filenames is not dependent on the configuration directory. While the PID directory can be changed in hadoop-env.sh, it seems a little unnecessary to have this restriction.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 20:45:00 2006
Return-Path: 
 <hadoop-dev-return-4018-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 83270 invoked from network); 28 Sep 2006 20:45:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 20:45:00 -0000
Received: (qmail 88472 invoked by uid 500); 28 Sep 2006 20:44:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 88281 invoked by uid 500); 28 Sep 2006 20:44:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88202 invoked by uid 99); 28 Sep 2006 20:44:40 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 13:44:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 61A4671421A
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 20:39:54 +0000 (GMT)
Message-ID: <17103023.1159475994397.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 13:39:54 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-549) NullPointerException in TaskReport's
 serialization code
In-Reply-To: <13028973.1158691942356.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-549?page=all ]

Owen O'Malley reassigned HADOOP-549:
------------------------------------

    Assignee: Owen O'Malley

> NullPointerException in TaskReport's serialization code
> -------------------------------------------------------
>
>                 Key: HADOOP-549
>                 URL: http://issues.apache.org/jira/browse/HADOOP-549
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Michel Tourn
>         Assigned To: Owen O'Malley
>         Attachments: readstringarray.patch
>
>
> TaskReport[] rep = jc.getMapTaskReports(jobId);
> I get de/serialization problems:
> This change suggested by Owen fixes it:
> -    new ObjectWritable(diagnostics).write(out);
> +    WritableUtils.writeStringArray(out, diagnostics);
> -    ObjectWritable wrapper = new ObjectWritable();
> -    wrapper.readFields(in);
> -    diagnostics = (String[])wrapper.get();
> +    diagnostics = WritableUtils.readStringArray(in);
> java.lang.NullPointerException
> at org.apache.hadoop.io.ObjectWritable.readObject(ObjectWritable.java:174)
> at org.apache.hadoop.io.ObjectWritable.readFields(ObjectWritable.java:59)
> at org.apache.hadoop.mapred.TaskReport.readFields(TaskReport.java:64)
> at org.apache.hadoop.io.ObjectWritable.readObject(ObjectWritable.java:225)
> at org.apache.hadoop.io.ObjectWritable.readObject(ObjectWritable.java:163)
> at org.apache.hadoop.io.ObjectWritable.readObject(ObjectWritable.java:210)
> at org.apache.hadoop.io.ObjectWritable.readFields(ObjectWritable.java:59)
> at org.apache.hadoop.ipc.Client$Connection.run(Client.java:256)
> 2006-09-19 08:44:31,059 WARN  ipc.Server (Server.java:run(493)) - handler output error
> java.nio.channels.ClosedChannelException

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 21:25:47 2006
Return-Path: 
 <hadoop-dev-return-4019-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96638 invoked from network); 28 Sep 2006 21:25:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 21:25:47 -0000
Received: (qmail 63439 invoked by uid 500); 28 Sep 2006 21:25:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63414 invoked by uid 500); 28 Sep 2006 21:25:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63405 invoked by uid 99); 28 Sep 2006 21:25:45 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 14:25:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:56341]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 56/81-00212-9DD3C154 for <hadoop-dev@lucene.apache.org>;
 Thu, 28 Sep 2006 14:25:45 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C23057141D1
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 21:21:53 +0000 (GMT)
Message-ID: <20687525.1159478513792.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 14:21:53 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-489) Seperating user logs from system
 logs in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-489?page=comments#action_12438557 ] 
            
Owen O'Malley commented on HADOOP-489:
--------------------------------------

I'd like to have:
  1. A jsp on the task trackers that let's me fetch stdout/stderr from the Tasks with urls like:
http://<tracker>/getUserLogs?job=<jobid>&task=<taskid>
getUserLogs would also have optional args for start=<#> and length=<#> that control the start and length of the logs sent. A negative starting position would count backwards from the end of the file.

  2. An addition to the JobSubmissionProtocol:
    TaskReport getTaskReport(String jobid, String taskid);

  3. An addition to TaskReport to get the url for the logs for that task.

  4. A job/event log available via the JobSubmissionProtocol:
    List<JobEvent> getJobEvents(String jobid, long startTime);

  5. JobEvents are:
    a. job start
    b. task start
    c. task end
    d. job end
    e. diagnostic

  6. each JobEvent has:
    long getTime()
    String getTaskId()

> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Owen O'Malley
>            Priority: Minor
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 22:21:46 2006
Return-Path: 
 <hadoop-dev-return-4020-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16456 invoked from network); 28 Sep 2006 22:21:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 22:21:46 -0000
Received: (qmail 49008 invoked by uid 500); 28 Sep 2006 22:21:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 48809 invoked by uid 500); 28 Sep 2006 22:21:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 48800 invoked by uid 99); 28 Sep 2006 22:21:45 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 15:21:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:49765]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 26/E2-00212-8FA4C154 for <hadoop-dev@lucene.apache.org>;
 Thu, 28 Sep 2006 15:21:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B9EC47141F1
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 22:17:52 +0000 (GMT)
Message-ID: <29117086.1159481872758.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 15:17:52 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-519) HDFS File API should be extended to
 include positional read
In-Reply-To: <7528490.1157757622361.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-519?page=all ]

Milind Bhandarkar updated HADOOP-519:
-------------------------------------

    Attachment:     (was: pread.patch)

> HDFS File API should be extended to include positional read
> -----------------------------------------------------------
>
>                 Key: HADOOP-519
>                 URL: http://issues.apache.org/jira/browse/HADOOP-519
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.6.0
>         Environment: All
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.7.0
>
>
> HDFS Input streams should support positional read. Positional read (such as the pread syscall on linux) allows reading for a specified offset without affecting the current file offset. Since the underlying file state is not touched, pread can be used efficiently in multi-threaded programs.
> Here is how I plan to implement it.
> Provide PositionedReadable interface, with the following methods:
> int read(long position, byte[] buffer, int offset, int length);
> void readFully(long position, byte[] buffer, int offset, int length);
> void readFully(long position, byte[] buffer);
> Abstract class FSInputStream would provide default implementation of the above methods using getPos(), seek() and read() methods. The default implementation is inefficient in multi-threaded programs since it locks the object while seeking, reading, and restoring to old state.
> DFSClient.DFSInputStream, which extends FSInputStream will provide an efficient non-synchronized implementation for above calls.
> In addition, FSDataInputStream, which is a wrapper around FSInputStream, will provide wrapper methods for above read methods as well.
> Patch forthcoming early next week.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 22:23:50 2006
Return-Path: 
 <hadoop-dev-return-4022-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17152 invoked from network); 28 Sep 2006 22:23:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 22:23:50 -0000
Received: (qmail 52665 invoked by uid 500); 28 Sep 2006 22:23:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 52634 invoked by uid 500); 28 Sep 2006 22:23:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 52607 invoked by uid 99); 28 Sep 2006 22:23:48 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 15:23:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:49780]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 72/F2-00212-37B4C154 for <hadoop-dev@lucene.apache.org>;
 Thu, 28 Sep 2006 15:23:47 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4F61B7141F1
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 22:19:51 +0000 (GMT)
Message-ID: <8136511.1159481991322.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 15:19:51 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-519) HDFS File API should be extended to
 include positional read
In-Reply-To: <7528490.1157757622361.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-519?page=all ]

Milind Bhandarkar updated HADOOP-519:
-------------------------------------

    Attachment: pread.patch

This is the new patch that fixes the problems in earlier patch mentioned by Doug.


> HDFS File API should be extended to include positional read
> -----------------------------------------------------------
>
>                 Key: HADOOP-519
>                 URL: http://issues.apache.org/jira/browse/HADOOP-519
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.6.0
>         Environment: All
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.7.0
>
>         Attachments: pread.patch
>
>
> HDFS Input streams should support positional read. Positional read (such as the pread syscall on linux) allows reading for a specified offset without affecting the current file offset. Since the underlying file state is not touched, pread can be used efficiently in multi-threaded programs.
> Here is how I plan to implement it.
> Provide PositionedReadable interface, with the following methods:
> int read(long position, byte[] buffer, int offset, int length);
> void readFully(long position, byte[] buffer, int offset, int length);
> void readFully(long position, byte[] buffer);
> Abstract class FSInputStream would provide default implementation of the above methods using getPos(), seek() and read() methods. The default implementation is inefficient in multi-threaded programs since it locks the object while seeking, reading, and restoring to old state.
> DFSClient.DFSInputStream, which extends FSInputStream will provide an efficient non-synchronized implementation for above calls.
> In addition, FSDataInputStream, which is a wrapper around FSInputStream, will provide wrapper methods for above read methods as well.
> Patch forthcoming early next week.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 22:23:45 2006
Return-Path: 
 <hadoop-dev-return-4021-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16980 invoked from network); 28 Sep 2006 22:23:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 22:23:45 -0000
Received: (qmail 51856 invoked by uid 500); 28 Sep 2006 22:23:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 51837 invoked by uid 500); 28 Sep 2006 22:23:44 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 51828 invoked by uid 99); 28 Sep 2006 22:23:44 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 15:23:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:49775]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id E1/F2-00212-07B4C154 for <hadoop-dev@lucene.apache.org>;
 Thu, 28 Sep 2006 15:23:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 92A197141F3
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 22:19:52 +0000 (GMT)
Message-ID: <8748515.1159481992598.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 15:19:52 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-519) HDFS File API should be extended to
 include positional read
In-Reply-To: <7528490.1157757622361.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-519?page=all ]

Milind Bhandarkar updated HADOOP-519:
-------------------------------------

    Status: Patch Available  (was: Open)

Patch submitted.

> HDFS File API should be extended to include positional read
> -----------------------------------------------------------
>
>                 Key: HADOOP-519
>                 URL: http://issues.apache.org/jira/browse/HADOOP-519
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.6.0
>         Environment: All
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.7.0
>
>         Attachments: pread.patch
>
>
> HDFS Input streams should support positional read. Positional read (such as the pread syscall on linux) allows reading for a specified offset without affecting the current file offset. Since the underlying file state is not touched, pread can be used efficiently in multi-threaded programs.
> Here is how I plan to implement it.
> Provide PositionedReadable interface, with the following methods:
> int read(long position, byte[] buffer, int offset, int length);
> void readFully(long position, byte[] buffer, int offset, int length);
> void readFully(long position, byte[] buffer);
> Abstract class FSInputStream would provide default implementation of the above methods using getPos(), seek() and read() methods. The default implementation is inefficient in multi-threaded programs since it locks the object while seeking, reading, and restoring to old state.
> DFSClient.DFSInputStream, which extends FSInputStream will provide an efficient non-synchronized implementation for above calls.
> In addition, FSDataInputStream, which is a wrapper around FSInputStream, will provide wrapper methods for above read methods as well.
> Patch forthcoming early next week.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 22:42:22 2006
Return-Path: 
 <hadoop-dev-return-4023-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20577 invoked from network); 28 Sep 2006 22:42:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 22:42:22 -0000
Received: (qmail 82333 invoked by uid 500); 28 Sep 2006 22:42:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 82305 invoked by uid 500); 28 Sep 2006 22:42:18 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 81881 invoked by uid 99); 28 Sep 2006 22:42:17 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 15:42:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:48800]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 7E/73-00212-6BF4C154 for <hadoop-dev@lucene.apache.org>;
 Thu, 28 Sep 2006 15:41:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A842A71420C
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 22:37:56 +0000 (GMT)
Message-ID: <25510871.1159483076686.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 15:37:56 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-489) Seperating user logs from system
 logs in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-489?page=comments#action_12438579 ] 
            
Owen O'Malley commented on HADOOP-489:
--------------------------------------

In terms of managing the user logs in the task tracker, there would be 2 settings:
   1. mapred.task.log.size.max       
    --- the maximum size that will be stored for a given task. The lower setting in the task tracker and the job's config will be used. If some log needs to be discarded, it will be the head of the log.

   2. mapred.task.log.retain
   --- the number of hours to store the log after the job finishes. 

> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Owen O'Malley
>            Priority: Minor
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 23:08:22 2006
Return-Path: 
 <hadoop-dev-return-4024-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23655 invoked from network); 28 Sep 2006 23:08:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 23:08:22 -0000
Received: (qmail 16564 invoked by uid 500); 28 Sep 2006 23:08:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 16541 invoked by uid 500); 28 Sep 2006 23:08:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 16506 invoked by uid 99); 28 Sep 2006 23:08:19 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 16:08:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:56772]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id D9/25-00212-3C55C154 for <hadoop-dev@lucene.apache.org>;
 Thu, 28 Sep 2006 16:07:50 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C70C3714211
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 23:02:53 +0000 (GMT)
Message-ID: <1280360.1159484573812.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 16:02:53 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-489) Seperating user logs from system
 logs in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-489?page=comments#action_12438584 ] 
            
Doug Cutting commented on HADOOP-489:
-------------------------------------

+1 These sound like good changes.  They will permit folks to get 'tail -f'-like log output while jobs are running, to copy logs from a job to dfs, and, eventually, to directly use logs as inputs for mapreduce (without first copying them into dfs).

> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Owen O'Malley
>            Priority: Minor
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 23:31:45 2006
Return-Path: 
 <hadoop-dev-return-4025-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 27440 invoked from network); 28 Sep 2006 23:31:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 23:31:45 -0000
Received: (qmail 40533 invoked by uid 500); 28 Sep 2006 23:31:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40505 invoked by uid 500); 28 Sep 2006 23:31:44 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 40494 invoked by uid 99); 28 Sep 2006 23:31:44 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 16:31:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:60622]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 4D/46-00212-F5B5C154 for <hadoop-dev@lucene.apache.org>;
 Thu, 28 Sep 2006 16:31:43 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BD8E77141E0
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 23:27:51 +0000 (GMT)
Message-ID: <17591806.1159486071773.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 16:27:51 -0700 (PDT)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-423) file paths are not normalized
In-Reply-To: <13847288.1154636773936.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-423?page=comments#action_12438585 ] 
            
Wendy Chien commented on HADOOP-423:
------------------------------------

You're right, I've changed the logic in the namenode check.

I don't understand where you don't want to call Path.toString(), in DFSClient?  The namenode only gets a String, which I parse for the offending sequences.    Do you mean we should convert it to a Path there?

> file paths are not normalized
> -----------------------------
>
>                 Key: HADOOP-423
>                 URL: http://issues.apache.org/jira/browse/HADOOP-423
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Christian Kunz
>         Assigned To: Wendy Chien
>             Fix For: 0.7.0
>
>         Attachments: pathnorm2.patch
>
>
> Paths containing  '.' or '..' are not normalized -- the corresponding directories actually seem to be created. This is inconsistent and unexpected behavior, and  is particularly painful when running from a working directory, using relative paths that start with ...

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Sep 28 23:36:44 2006
Return-Path: 
 <hadoop-dev-return-4026-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 27788 invoked from network); 28 Sep 2006 23:36:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Sep 2006 23:36:44 -0000
Received: (qmail 41735 invoked by uid 500); 28 Sep 2006 23:36:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 41713 invoked by uid 500); 28 Sep 2006 23:36:44 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 41704 invoked by uid 99); 28 Sep 2006 23:36:44 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 16:36:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:44312]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id E9/66-00212-B8C5C154 for <hadoop-dev@lucene.apache.org>;
 Thu, 28 Sep 2006 16:36:43 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DEC327141F7
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Sep 2006 23:32:51 +0000 (GMT)
Message-ID: <32890976.1159486371909.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 16:32:51 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-423) file paths are not normalized
In-Reply-To: <13847288.1154636773936.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-423?page=comments#action_12438586 ] 
            
Doug Cutting commented on HADOOP-423:
-------------------------------------

> I don't understand where you don't want to call Path.toString(), in DFSClient?

You're right.  I mistakenly assumed that src.toString() was used to convert a Path to a String, when it's really used to convert a UTF8 to a String.  Sorry!

> file paths are not normalized
> -----------------------------
>
>                 Key: HADOOP-423
>                 URL: http://issues.apache.org/jira/browse/HADOOP-423
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Christian Kunz
>         Assigned To: Wendy Chien
>             Fix For: 0.7.0
>
>         Attachments: pathnorm2.patch
>
>
> Paths containing  '.' or '..' are not normalized -- the corresponding directories actually seem to be created. This is inconsistent and unexpected behavior, and  is particularly painful when running from a working directory, using relative paths that start with ...

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 29 00:52:50 2006
Return-Path: 
 <hadoop-dev-return-4027-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 39648 invoked from network); 29 Sep 2006 00:52:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Sep 2006 00:52:50 -0000
Received: (qmail 87214 invoked by uid 500); 29 Sep 2006 00:52:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 87185 invoked by uid 500); 29 Sep 2006 00:52:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 87176 invoked by uid 99); 29 Sep 2006 00:52:49 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 17:52:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:46673]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 4E/98-00212-06E6C154 for <hadoop-dev@lucene.apache.org>;
 Thu, 28 Sep 2006 17:52:49 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 85FE0714208
	for <hadoop-dev@lucene.apache.org>; Fri, 29 Sep 2006 00:48:56 +0000 (GMT)
Message-ID: <10027246.1159490936546.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 17:48:56 -0700 (PDT)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-423) file paths are not normalized
In-Reply-To: <13847288.1154636773936.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-423?page=all ]

Wendy Chien updated HADOOP-423:
-------------------------------

    Attachment: pathnorm3.patch

> file paths are not normalized
> -----------------------------
>
>                 Key: HADOOP-423
>                 URL: http://issues.apache.org/jira/browse/HADOOP-423
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Christian Kunz
>         Assigned To: Wendy Chien
>             Fix For: 0.7.0
>
>         Attachments: pathnorm3.patch
>
>
> Paths containing  '.' or '..' are not normalized -- the corresponding directories actually seem to be created. This is inconsistent and unexpected behavior, and  is particularly painful when running from a working directory, using relative paths that start with ...

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 29 00:52:51 2006
Return-Path: 
 <hadoop-dev-return-4028-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 39682 invoked from network); 29 Sep 2006 00:52:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Sep 2006 00:52:51 -0000
Received: (qmail 87443 invoked by uid 500); 29 Sep 2006 00:52:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 87411 invoked by uid 500); 29 Sep 2006 00:52:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 87402 invoked by uid 99); 29 Sep 2006 00:52:50 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 17:52:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:46675]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 5E/98-00212-26E6C154 for <hadoop-dev@lucene.apache.org>;
 Thu, 28 Sep 2006 17:52:50 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 68144714211
	for <hadoop-dev@lucene.apache.org>; Fri, 29 Sep 2006 00:48:58 +0000 (GMT)
Message-ID: <16348594.1159490938424.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 17:48:58 -0700 (PDT)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-423) file paths are not normalized
In-Reply-To: <13847288.1154636773936.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-423?page=all ]

Wendy Chien updated HADOOP-423:
-------------------------------

    Attachment:     (was: pathnorm2.patch)

> file paths are not normalized
> -----------------------------
>
>                 Key: HADOOP-423
>                 URL: http://issues.apache.org/jira/browse/HADOOP-423
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Christian Kunz
>         Assigned To: Wendy Chien
>             Fix For: 0.7.0
>
>         Attachments: pathnorm3.patch
>
>
> Paths containing  '.' or '..' are not normalized -- the corresponding directories actually seem to be created. This is inconsistent and unexpected behavior, and  is particularly painful when running from a working directory, using relative paths that start with ...

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 29 00:52:53 2006
Return-Path: 
 <hadoop-dev-return-4029-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 39716 invoked from network); 29 Sep 2006 00:52:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Sep 2006 00:52:53 -0000
Received: (qmail 87665 invoked by uid 500); 29 Sep 2006 00:52:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 87637 invoked by uid 500); 29 Sep 2006 00:52:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 87628 invoked by uid 99); 29 Sep 2006 00:52:52 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Sep 2006 17:52:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:46679]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 9E/98-00212-46E6C154 for <hadoop-dev@lucene.apache.org>;
 Thu, 28 Sep 2006 17:52:52 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5A4EB714212
	for <hadoop-dev@lucene.apache.org>; Fri, 29 Sep 2006 00:49:00 +0000 (GMT)
Message-ID: <2628478.1159490940367.JavaMail.jira@brutus>
Date: Thu, 28 Sep 2006 17:49:00 -0700 (PDT)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-423) file paths are not normalized
In-Reply-To: <13847288.1154636773936.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-423?page=all ]

Wendy Chien updated HADOOP-423:
-------------------------------

    Status: Patch Available  (was: Open)

> file paths are not normalized
> -----------------------------
>
>                 Key: HADOOP-423
>                 URL: http://issues.apache.org/jira/browse/HADOOP-423
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Christian Kunz
>         Assigned To: Wendy Chien
>             Fix For: 0.7.0
>
>         Attachments: pathnorm3.patch
>
>
> Paths containing  '.' or '..' are not normalized -- the corresponding directories actually seem to be created. This is inconsistent and unexpected behavior, and  is particularly painful when running from a working directory, using relative paths that start with ...

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 29 07:23:50 2006
Return-Path: 
 <hadoop-dev-return-4030-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 87550 invoked from network); 29 Sep 2006 07:23:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Sep 2006 07:23:50 -0000
Received: (qmail 11789 invoked by uid 500); 29 Sep 2006 07:23:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 11574 invoked by uid 500); 29 Sep 2006 07:23:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 11565 invoked by uid 99); 29 Sep 2006 07:23:49 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Sep 2006 00:23:49 -0700
Authentication-Results: idunn.apache.osuosl.org
 header.from=breed@yahoo-inc.com; domainkeys=good
X-ASF-Spam-Status: No,
 hits=-13.6 required=5.0 tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,USER_IN_DEF_WHITELIST
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing
 draft-delany-domainkeys-base-01
Received: from [207.126.228.149] ([207.126.228.149:38088]
 helo=rsmtp1.corp.yahoo.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id D5/41-10102-40ACC154 for <hadoop-dev@lucene.apache.org>;
 Fri, 29 Sep 2006 00:23:49 -0700
Received: from [10.72.76.89] (snvvpn2-10-72-76-c89.corp.yahoo.com
 [10.72.76.89])
	(authenticated bits=0)
	by rsmtp1.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k8T7MsuD028084
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Fri, 29 Sep 2006 00:22:56 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=message-id:date:from:user-agent:mime-version:to:subject:
	references:in-reply-to:content-type:content-transfer-encoding;
	b=G5IdC34n0+K9HVc3H7jiVzo2RSKBARl+LjowRWCPX4fN2OeBLGbAGXiIVcL4Eg9E
Message-ID: <451CC957.4040505@yahoo-inc.com>
Date: Fri, 29 Sep 2006 00:20:55 -0700
From: Benjamin Reed <breed@yahoo-inc.com>
User-Agent: Thunderbird 1.5.0.7 (X11/20060922)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: Creating splits/tasks at the client
References: <451B820E.6080101@yahoo-inc.com> <451C10D8.8040800@apache.org>
In-Reply-To: <451C10D8.8040800@apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I please correct me if I'm reading the code incorrectly, but it seems
like submitJob puts the submitted job on the jobInitQueue which is
immediately dequeued by the JobInitThread and then initTasks() will get
the file splits and create Tasks. Thus, it doesn't seem like there is
any difference in memory foot print.

ben

Doug Cutting wrote:
>
> Right, so JobSubmissionProtocol.submitJob(String jobFile) could be
> altered to be submitJob(StringJobFile, Split[]).  The RPC system can
> handle reasonably large values like this, so I don't think that would
> be a problem.  But the memory impact on the JobTracker could become
> significant, since the splits for queued jobs would now be around. 
> This could be mitigated by writing the splits to a temporary file.
>
> The semantics would be subtly different: if you queue a job now, the
> file listing is done just before the job is executed, not when its
> submitted.  But programs shouldn't rely on that, so I don't think this
> is a big worry.
>
> Overall, I don't see any major problems with this.  It won't simplify
> things much.  We can remove the code which computes splits in a
> separate thread, but we'd have to add code to store splits to
> temporary files, so codesize is a wash.  And it would remove a
> potential reliability problem.


From MAILER-DAEMON Fri Sep 29 12:27:45 2006
Return-Path: 
 <hadoop-dev-return-4031-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 95394 invoked from network); 29 Sep 2006 12:27:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Sep 2006 12:27:45 -0000
Received: (qmail 23304 invoked by uid 500); 29 Sep 2006 12:27:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23282 invoked by uid 500); 29 Sep 2006 12:27:44 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23273 invoked by uid 99); 29 Sep 2006 12:27:44 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Sep 2006 05:27:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:39838]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id E7/41-13110-0411D154 for <hadoop-dev@lucene.apache.org>;
 Fri, 29 Sep 2006 05:27:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C01877141F7
	for <hadoop-dev@lucene.apache.org>; Fri, 29 Sep 2006 12:23:51 +0000 (GMT)
Message-ID: <32626831.1159532631784.JavaMail.jira@brutus>
Date: Fri, 29 Sep 2006 05:23:51 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-239) job tracker WI drops jobs after 24
 hours
In-Reply-To: <7996228.1148318969883.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-239?page=all ]

Sanjay Dahiya updated HADOOP-239:
---------------------------------

    Attachment: Hadoop-239_2.patch

Here is an updated patch. 

> job tracker WI drops jobs after 24 hours
> ----------------------------------------
>
>                 Key: HADOOP-239
>                 URL: http://issues.apache.org/jira/browse/HADOOP-239
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Yoram Arnon
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: Hadoop-239.patch, Hadoop-239_1.patch, Hadoop-239_2.patch
>
>
> The jobtracker's WI, keeps track of jobs executed in the past 24 hours.
> if the cluster was idle for a day (say Sunday) it drops all its history.
> Monday morning, the page is empty.
> Better would be to store a fixed number of jobs (say 10 each of succeeded and failed jobs).
> Also, if the job tracker is restarted, it loses all its history.
> The history should be persistent, withstanding restarts and upgrades.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 29 15:49:30 2006
Return-Path: 
 <hadoop-dev-return-4032-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 60318 invoked from network); 29 Sep 2006 15:49:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Sep 2006 15:49:30 -0000
Received: (qmail 79464 invoked by uid 500); 29 Sep 2006 15:49:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 79447 invoked by uid 500); 29 Sep 2006 15:49:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 79437 invoked by uid 99); 29 Sep 2006 15:49:29 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Sep 2006 08:49:29 -0700
X-ASF-Spam-Status: No,
 hits=1.4 required=5.0 tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
Received: from [209.151.94.5] ([209.151.94.5:54990] helo=megs8.100mwh.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id B7/67-13110-8804D154 for <hadoop-dev@lucene.apache.org>;
 Fri, 29 Sep 2006 08:49:28 -0700
Received: from c-67-188-223-250.hsd1.ca.comcast.net ([67.188.223.250]
 helo=[10.0.0.106])
	by megs8.100mwh.com with esmtpsa (TLSv1:RC4-SHA:128)
	(Exim 4.52)
	id 1GTKcB-0003uf-0H
	for hadoop-dev@lucene.apache.org; Fri, 29 Sep 2006 09:49:27 -0600
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <451CC957.4040505@yahoo-inc.com>
References: <451B820E.6080101@yahoo-inc.com> <451C10D8.8040800@apache.org>
 <451CC957.4040505@yahoo-inc.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <17498E78-B22E-40AA-B57B-3CE9E3E9BBCF@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Owen O'Malley <owen@yahoo-inc.com>
Subject: Re: Creating splits/tasks at the client
Date: Fri, 29 Sep 2006 08:49:23 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-AntiAbuse: This header was added to track abuse,
 please include it with any abuse report
X-AntiAbuse: Primary Hostname - megs8.100mwh.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - yahoo-inc.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Sep 29, 2006, at 12:20 AM, Benjamin Reed wrote:

> I please correct me if I'm reading the code incorrectly, but it seems
> like submitJob puts the submitted job on the jobInitQueue which is
> immediately dequeued by the JobInitThread and then initTasks() will  
> get
> the file splits and create Tasks. Thus, it doesn't seem like there is
> any difference in memory foot print.

Agreed, it won't cost more memory. In fact, it will be less because  
we won't have the init task thread running and creating InputFormats  
and running user code. Of course, once we allow user-defined  
InputSplits we will be back in exactly the same boat of running user- 
code on the JobTracker, unless we also ship over the preferred hosts  
for each InputFormat too.

-- Owen

From MAILER-DAEMON Fri Sep 29 16:15:57 2006
Return-Path: 
 <hadoop-dev-return-4033-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67847 invoked from network); 29 Sep 2006 16:15:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Sep 2006 16:15:57 -0000
Received: (qmail 26224 invoked by uid 500); 29 Sep 2006 16:15:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26205 invoked by uid 500); 29 Sep 2006 16:15:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26196 invoked by uid 99); 29 Sep 2006 16:15:56 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Sep 2006 09:15:56 -0700
Authentication-Results: idunn.apache.osuosl.org
 header.from=breed@yahoo-inc.com; domainkeys=good
X-ASF-Spam-Status: No,
 hits=-13.6 required=5.0 tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,USER_IN_DEF_WHITELIST
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing
 draft-delany-domainkeys-base-01
Received: from [207.126.228.150] ([207.126.228.150:38937]
 helo=rsmtp2.corp.yahoo.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id BA/28-13110-9B64D154 for <hadoop-dev@lucene.apache.org>;
 Fri, 29 Sep 2006 09:15:54 -0700
Received: from [10.72.66.8] (snvvpn-10-72-66-c8.corp.yahoo.com [10.72.66.8])
	(authenticated bits=0)
	by rsmtp2.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k8TGFhrN045899
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Fri, 29 Sep 2006 09:15:46 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=message-id:date:from:user-agent:mime-version:to:subject:
	references:in-reply-to:content-type:content-transfer-encoding;
	b=zpziJk0Kuy69YVQP53AjkxmCwYqKp8JVUxSclnV8cSiNCe5mczgT3F+M4m/i4ff4
Message-ID: <451D46AD.6040704@yahoo-inc.com>
Date: Fri, 29 Sep 2006 09:15:41 -0700
From: Benjamin Reed <breed@yahoo-inc.com>
User-Agent: Thunderbird 1.5.0.7 (X11/20060922)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: Creating splits/tasks at the client
References: <451B820E.6080101@yahoo-inc.com> <451C10D8.8040800@apache.org>
 <451CC957.4040505@yahoo-inc.com>
 <17498E78-B22E-40AA-B57B-3CE9E3E9BBCF@yahoo-inc.com>
In-Reply-To: <17498E78-B22E-40AA-B57B-3CE9E3E9BBCF@yahoo-inc.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

No, even with user defined Splits we don't need to use user code in the
JobTracker if we make Split a Writable class that has the hosts array.

Split will write the hosts first, so in the JobTracker, when you get the
byte array representing the Split, any fields from the sub class will
follow the Split serialized bytes. The JobTracker can skip the Type in
the bytes representing the serialized Split and then deserialize just a
Split (ignoring the rest). You can make this process robust by putting a
fingerprint at the beginning and end of the serialized part of Split, so
that you can detect user defined Splits that change the serialization
order. (This is another example of why Writable is cooler than
Serializable. It would be really hard to just deserialize a super class
from a serialized sub class using Java serialization.)

You would ship the full byte array to the task trackers so that the
InputFormats running in Childs can deserialize the full type.

ben

Owen O'Malley wrote:
>
> On Sep 29, 2006, at 12:20 AM, Benjamin Reed wrote:
>
>> I please correct me if I'm reading the code incorrectly, but it seems
>> like submitJob puts the submitted job on the jobInitQueue which is
>> immediately dequeued by the JobInitThread and then initTasks() will get
>> the file splits and create Tasks. Thus, it doesn't seem like there is
>> any difference in memory foot print.
>
> Agreed, it won't cost more memory. In fact, it will be less because we
> won't have the init task thread running and creating InputFormats and
> running user code. Of course, once we allow user-defined InputSplits
> we will be back in exactly the same boat of running user-code on the
> JobTracker, unless we also ship over the preferred hosts for each
> InputFormat too.
>
> -- Owen


From MAILER-DAEMON Fri Sep 29 16:22:51 2006
Return-Path: 
 <hadoop-dev-return-4034-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 69700 invoked from network); 29 Sep 2006 16:22:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Sep 2006 16:22:51 -0000
Received: (qmail 36717 invoked by uid 500); 29 Sep 2006 16:22:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 36695 invoked by uid 500); 29 Sep 2006 16:22:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 36686 invoked by uid 99); 29 Sep 2006 16:22:50 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Sep 2006 09:22:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [204.127.192.82] ([204.127.192.82:44527]
 helo=rwcrmhc12.comcast.net)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 75/58-13110-9584D154 for <hadoop-dev@lucene.apache.org>;
 Fri, 29 Sep 2006 09:22:49 -0700
Received: from [192.168.168.15]
 (c-71-202-24-246.hsd1.ca.comcast.net[71.202.24.246])
          by comcast.net (rwcrmhc12) with ESMTP
          id <20060929162246m1200orodge>; Fri, 29 Sep 2006 16:22:46 +0000
Message-ID: <451D4855.8040602@apache.org>
Date: Fri, 29 Sep 2006 09:22:45 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.7 (X11/20060922)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: Creating splits/tasks at the client
References: <451B820E.6080101@yahoo-inc.com> <451C10D8.8040800@apache.org>
 <451CC957.4040505@yahoo-inc.com>
 <17498E78-B22E-40AA-B57B-3CE9E3E9BBCF@yahoo-inc.com>
In-Reply-To: <17498E78-B22E-40AA-B57B-3CE9E3E9BBCF@yahoo-inc.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Owen O'Malley wrote:
> Of course, once we allow user-defined InputSplits we 
> will be back in exactly the same boat of running user-code on the 
> JobTracker, unless we also ship over the preferred hosts for each 
> InputFormat too.

So, to entirely avoid user code in the job tracker we'd need a final 
class that represents each task to be created, a SplitLocations.  These 
would correspond 1-1 to splits, but would only contain the list of 
preferred hosts.  A way to implement this might be to write two parallel 
files in DFS, one with the SplitLocations, and one with the Splits. 
Then the first is passed to the job tracker with the name of the second 
file.  Then only task child processes would open the split file, seeking 
to the appropriate index.  We could use ArrayFile for these, and highly 
replicate them, especially their indexes.

Doug

From MAILER-DAEMON Fri Sep 29 16:28:08 2006
Return-Path: 
 <hadoop-dev-return-4035-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 71304 invoked from network); 29 Sep 2006 16:28:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Sep 2006 16:28:08 -0000
Received: (qmail 46281 invoked by uid 500); 29 Sep 2006 16:28:07 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 46079 invoked by uid 500); 29 Sep 2006 16:28:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46067 invoked by uid 99); 29 Sep 2006 16:28:07 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Sep 2006 09:28:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [216.148.227.152] ([216.148.227.152:53680]
 helo=rwcrmhc12.comcast.net)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id ED/78-13110-5994D154 for <hadoop-dev@lucene.apache.org>;
 Fri, 29 Sep 2006 09:28:06 -0700
Received: from [192.168.168.15]
 (c-71-202-24-246.hsd1.ca.comcast.net[71.202.24.246])
          by comcast.net (rwcrmhc12) with ESMTP
          id <20060929162801m1200osd8te>; Fri, 29 Sep 2006 16:28:01 +0000
Message-ID: <451D4990.2060609@apache.org>
Date: Fri, 29 Sep 2006 09:28:00 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.7 (X11/20060922)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: Creating splits/tasks at the client
References: <451B820E.6080101@yahoo-inc.com> <451C10D8.8040800@apache.org>
 <451CC957.4040505@yahoo-inc.com>
 <17498E78-B22E-40AA-B57B-3CE9E3E9BBCF@yahoo-inc.com>
 <451D46AD.6040704@yahoo-inc.com>
In-Reply-To: <451D46AD.6040704@yahoo-inc.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Benjamin Reed wrote:
> Split will write the hosts first, so in the JobTracker, when you get the
> byte array representing the Split, any fields from the sub class will
> follow the Split serialized bytes. The JobTracker can skip the Type in
> the bytes representing the serialized Split and then deserialize just a
> Split (ignoring the rest).

That could work, but it would be hard to pass these direclty over either 
RPC or via a SequenceFile, no?  We'd have to write a custom container 
for the array of Splits.  The container could then be passed as a whole 
over RPC or placed in a SequenceFile.  That could become a little awkward.

Doug



From MAILER-DAEMON Fri Sep 29 17:50:34 2006
Return-Path: 
 <hadoop-dev-return-4036-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1150 invoked from network); 29 Sep 2006 17:50:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Sep 2006 17:50:34 -0000
Received: (qmail 87508 invoked by uid 500); 29 Sep 2006 17:50:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 87478 invoked by uid 500); 29 Sep 2006 17:50:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 87465 invoked by uid 99); 29 Sep 2006 17:50:33 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Sep 2006 10:50:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:47552]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 0C/BA-13110-ADC5D154 for <hadoop-dev@lucene.apache.org>;
 Fri, 29 Sep 2006 10:50:25 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BBD047142D2
	for <hadoop-dev@lucene.apache.org>; Fri, 29 Sep 2006 10:49:22 -0700 (PDT)
Message-ID: <16659214.1159552162765.JavaMail.root@brutus>
Date: Fri, 29 Sep 2006 10:49:22 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-513) IllegalStateException is thrown by
 TaskTracker
In-Reply-To: <2419146.1157581404070.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-513?page=all ]

Owen O'Malley reassigned HADOOP-513:
------------------------------------

    Assignee: Owen O'Malley

> IllegalStateException is thrown by TaskTracker
> ----------------------------------------------
>
>                 Key: HADOOP-513
>                 URL: http://issues.apache.org/jira/browse/HADOOP-513
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.5.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Owen O'Malley
>
> I am running TestDFSIO on a one node cluster and getting IllegalStateException for each map task run as listed below.
> The same exceptions are flooding logs for TestMiniMRWithDFS on my nightly build for quite a while now.
> Does anybody know what that is?
> My understanding is that if it is "illegal", then tests should fail.
> If not then it should be caught and ignored INTERNALLY.
> 06/09/06 14:54:50 INFO mapred.TaskTracker: task_0002_r_000000_0 0.25% reduce > copy (3 of 4 at 0.00 MB/s) >
> 06/09/06 14:54:50 INFO mapred.TaskRunner: task_0002_r_000000_0 Need 1 map output(s)
> 06/09/06 14:54:50 INFO mapred.TaskRunner: task_0002_r_000000_0 Got 1 known map output location(s); scheduling...
> 06/09/06 14:54:50 INFO mapred.TaskRunner: task_0002_r_000000_0 Scheduled 1 of 1 known outputs (0 slow hosts and 0 dup hosts)
> 06/09/06 14:54:50 INFO mapred.TaskRunner: task_0002_r_000000_0 Copying task_0002_m_000003_0 output from ENO.
> 06/09/06 14:54:50 WARN /: /getMapOutput.jsp?map=task_0002_m_000003_0&reduce=0:
> java.lang.IllegalStateException
>     at org.mortbay.jetty.servlet.ServletHttpResponse.getWriter(ServletHttpResponse.java:561)
>     at org.apache.jasper.runtime.JspWriterImpl.initOut(JspWriterImpl.java:122)
>     at org.apache.jasper.runtime.JspWriterImpl.flushBuffer(JspWriterImpl.java:115)
>     at org.apache.jasper.runtime.PageContextImpl.release(PageContextImpl.java:190)
>     at org.apache.jasper.runtime.JspFactoryImpl.internalReleasePageContext(JspFactoryImpl.java:115)
>     at org.apache.jasper.runtime.JspFactoryImpl.releasePageContext(JspFactoryImpl.java:75)
>     at org.apache.hadoop.mapred.getMapOutput_jsp._jspService(getMapOutput_jsp.java:100)
>     at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:94)
>     at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
>     at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:427)
>     at org.mortbay.jetty.servlet.WebApplicationHandler.dispatch(WebApplicationHandler.java:475)
>     at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:567)
>     at org.mortbay.http.HttpContext.handle(HttpContext.java:1565)
>     at org.mortbay.jetty.servlet.WebApplicationContext.handle(WebApplicationContext.java:635)
>     at org.mortbay.http.HttpContext.handle(HttpContext.java:1517)
>     at org.mortbay.http.HttpServer.service(HttpServer.java:954)
>     at org.mortbay.http.HttpConnection.service(HttpConnection.java:814)
>     at org.mortbay.http.HttpConnection.handleNext(HttpConnection.java:981)
>     at org.mortbay.http.HttpConnection.handle(HttpConnection.java:831)
>     at org.mortbay.http.SocketListener.handleConnection(SocketListener.java:244)
>     at org.mortbay.util.ThreadedServer.handle(ThreadedServer.java:357)
>     at org.mortbay.util.ThreadPool$PoolThread.run(ThreadPool.java:534)
> 06/09/06 14:54:50 INFO mapred.TaskRunner: task_0002_r_000000_0 done copying task_0002_m_000003_0 output from ENO.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 29 17:51:03 2006
Return-Path: 
 <hadoop-dev-return-4037-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1235 invoked from network); 29 Sep 2006 17:51:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Sep 2006 17:51:03 -0000
Received: (qmail 88508 invoked by uid 500); 29 Sep 2006 17:51:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 88487 invoked by uid 500); 29 Sep 2006 17:51:02 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88478 invoked by uid 99); 29 Sep 2006 17:51:02 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Sep 2006 10:51:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:47557]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 3D/BA-13110-2EC5D154 for <hadoop-dev@lucene.apache.org>;
 Fri, 29 Sep 2006 10:50:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 59C757142DC
	for <hadoop-dev@lucene.apache.org>; Fri, 29 Sep 2006 10:49:26 -0700 (PDT)
Message-ID: <3455489.1159552166365.JavaMail.root@brutus>
Date: Fri, 29 Sep 2006 10:49:26 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Work started: (HADOOP-513) IllegalStateException is thrown
 by TaskTracker
In-Reply-To: <2419146.1157581404070.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-513?page=all ]

Work on HADOOP-513 started by Owen O'Malley.

> IllegalStateException is thrown by TaskTracker
> ----------------------------------------------
>
>                 Key: HADOOP-513
>                 URL: http://issues.apache.org/jira/browse/HADOOP-513
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.5.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Owen O'Malley
>
> I am running TestDFSIO on a one node cluster and getting IllegalStateException for each map task run as listed below.
> The same exceptions are flooding logs for TestMiniMRWithDFS on my nightly build for quite a while now.
> Does anybody know what that is?
> My understanding is that if it is "illegal", then tests should fail.
> If not then it should be caught and ignored INTERNALLY.
> 06/09/06 14:54:50 INFO mapred.TaskTracker: task_0002_r_000000_0 0.25% reduce > copy (3 of 4 at 0.00 MB/s) >
> 06/09/06 14:54:50 INFO mapred.TaskRunner: task_0002_r_000000_0 Need 1 map output(s)
> 06/09/06 14:54:50 INFO mapred.TaskRunner: task_0002_r_000000_0 Got 1 known map output location(s); scheduling...
> 06/09/06 14:54:50 INFO mapred.TaskRunner: task_0002_r_000000_0 Scheduled 1 of 1 known outputs (0 slow hosts and 0 dup hosts)
> 06/09/06 14:54:50 INFO mapred.TaskRunner: task_0002_r_000000_0 Copying task_0002_m_000003_0 output from ENO.
> 06/09/06 14:54:50 WARN /: /getMapOutput.jsp?map=task_0002_m_000003_0&reduce=0:
> java.lang.IllegalStateException
>     at org.mortbay.jetty.servlet.ServletHttpResponse.getWriter(ServletHttpResponse.java:561)
>     at org.apache.jasper.runtime.JspWriterImpl.initOut(JspWriterImpl.java:122)
>     at org.apache.jasper.runtime.JspWriterImpl.flushBuffer(JspWriterImpl.java:115)
>     at org.apache.jasper.runtime.PageContextImpl.release(PageContextImpl.java:190)
>     at org.apache.jasper.runtime.JspFactoryImpl.internalReleasePageContext(JspFactoryImpl.java:115)
>     at org.apache.jasper.runtime.JspFactoryImpl.releasePageContext(JspFactoryImpl.java:75)
>     at org.apache.hadoop.mapred.getMapOutput_jsp._jspService(getMapOutput_jsp.java:100)
>     at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:94)
>     at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
>     at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:427)
>     at org.mortbay.jetty.servlet.WebApplicationHandler.dispatch(WebApplicationHandler.java:475)
>     at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:567)
>     at org.mortbay.http.HttpContext.handle(HttpContext.java:1565)
>     at org.mortbay.jetty.servlet.WebApplicationContext.handle(WebApplicationContext.java:635)
>     at org.mortbay.http.HttpContext.handle(HttpContext.java:1517)
>     at org.mortbay.http.HttpServer.service(HttpServer.java:954)
>     at org.mortbay.http.HttpConnection.service(HttpConnection.java:814)
>     at org.mortbay.http.HttpConnection.handleNext(HttpConnection.java:981)
>     at org.mortbay.http.HttpConnection.handle(HttpConnection.java:831)
>     at org.mortbay.http.SocketListener.handleConnection(SocketListener.java:244)
>     at org.mortbay.util.ThreadedServer.handle(ThreadedServer.java:357)
>     at org.mortbay.util.ThreadPool$PoolThread.run(ThreadPool.java:534)
> 06/09/06 14:54:50 INFO mapred.TaskRunner: task_0002_r_000000_0 done copying task_0002_m_000003_0 output from ENO.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 29 17:52:46 2006
Return-Path: 
 <hadoop-dev-return-4038-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1628 invoked from network); 29 Sep 2006 17:52:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Sep 2006 17:52:46 -0000
Received: (qmail 92578 invoked by uid 500); 29 Sep 2006 17:52:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 92562 invoked by uid 500); 29 Sep 2006 17:52:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 92548 invoked by uid 99); 29 Sep 2006 17:52:45 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Sep 2006 10:52:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:56708]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id C2/CA-13110-74D5D154 for <hadoop-dev@lucene.apache.org>;
 Fri, 29 Sep 2006 10:52:09 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 89A777142D2
	for <hadoop-dev@lucene.apache.org>; Fri, 29 Sep 2006 10:51:19 -0700 (PDT)
Message-ID: <17704060.1159552279561.JavaMail.root@brutus>
Date: Fri, 29 Sep 2006 10:51:19 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-565) Upgrade Jetty to 6.x
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Upgrade Jetty to 6.x
--------------------

                 Key: HADOOP-565
                 URL: http://issues.apache.org/jira/browse/HADOOP-565
             Project: Hadoop
          Issue Type: Improvement
          Components: mapred
            Reporter: Owen O'Malley
         Assigned To: Owen O'Malley


Now that Jetty 6.x has been released as stable, we should upgrade.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 29 18:07:59 2006
Return-Path: 
 <hadoop-dev-return-4039-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 5815 invoked from network); 29 Sep 2006 18:07:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Sep 2006 18:07:59 -0000
Received: (qmail 19823 invoked by uid 500); 29 Sep 2006 18:07:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 19796 invoked by uid 500); 29 Sep 2006 18:07:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 19787 invoked by uid 99); 29 Sep 2006 18:07:58 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Sep 2006 11:07:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:52932]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id A9/FA-13110-EE06D154 for <hadoop-dev@lucene.apache.org>;
 Fri, 29 Sep 2006 11:07:50 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C24347142DF
	for <hadoop-dev@lucene.apache.org>; Fri, 29 Sep 2006 11:06:25 -0700 (PDT)
Message-ID: <24401741.1159553185793.JavaMail.root@brutus>
Date: Fri, 29 Sep 2006 11:06:25 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-489) Seperating user logs from system logs
 in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-489?page=all ]

Sameer Paranjpye updated HADOOP-489:
------------------------------------


I'd also like to see a grep=<pattern> argument to the getUserLogs jsp.
Maybe this should be structured like the namenode and datanode browse jsps. The getUserLogs jsp is hosted on the jobtracker and redirects to a specific tasktracker jsp depending on the job and task arguments. I'd rather not have to figure out which tasktracker to go to.





> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Owen O'Malley
>            Priority: Minor
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 29 20:19:04 2006
Return-Path: 
 <hadoop-dev-return-4040-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46273 invoked from network); 29 Sep 2006 20:19:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Sep 2006 20:19:04 -0000
Received: (qmail 57188 invoked by uid 500); 29 Sep 2006 20:19:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 57000 invoked by uid 500); 29 Sep 2006 20:19:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 56881 invoked by uid 99); 29 Sep 2006 20:18:58 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Sep 2006 13:18:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:33358]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id B7/CC-13110-F4F7D154 for <hadoop-dev@lucene.apache.org>;
 Fri, 29 Sep 2006 13:17:25 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 257877142DF
	for <hadoop-dev@lucene.apache.org>; Fri, 29 Sep 2006 13:16:24 -0700 (PDT)
Message-ID: <5061451.1159560984150.JavaMail.root@brutus>
Date: Fri, 29 Sep 2006 13:16:24 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-423) file paths are not normalized
In-Reply-To: <13847288.1154636773936.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-423?page=all ]

Doug Cutting updated HADOOP-423:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Wendy!

> file paths are not normalized
> -----------------------------
>
>                 Key: HADOOP-423
>                 URL: http://issues.apache.org/jira/browse/HADOOP-423
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Christian Kunz
>         Assigned To: Wendy Chien
>             Fix For: 0.7.0
>
>         Attachments: pathnorm3.patch
>
>
> Paths containing  '.' or '..' are not normalized -- the corresponding directories actually seem to be created. This is inconsistent and unexpected behavior, and  is particularly painful when running from a working directory, using relative paths that start with ...

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 29 21:01:18 2006
Return-Path: 
 <hadoop-dev-return-4043-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 59498 invoked from network); 29 Sep 2006 21:01:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Sep 2006 21:01:18 -0000
Received: (qmail 22321 invoked by uid 500); 29 Sep 2006 21:01:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 22301 invoked by uid 500); 29 Sep 2006 21:01:18 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22286 invoked by uid 99); 29 Sep 2006 21:01:18 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Sep 2006 14:01:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:36470]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 84/0D-13110-3B48D154 for <hadoop-dev@lucene.apache.org>;
 Fri, 29 Sep 2006 13:40:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7CEE47142DA
	for <hadoop-dev@lucene.apache.org>; Fri, 29 Sep 2006 13:38:22 -0700 (PDT)
Message-ID: <18430392.1159562302509.JavaMail.root@brutus>
Date: Fri, 29 Sep 2006 13:38:22 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-513) IllegalStateException is thrown by
 TaskTracker
In-Reply-To: <2419146.1157581404070.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-513?page=all ]

Owen O'Malley updated HADOOP-513:
---------------------------------

    Attachment: map-out-servlet.patch

This patch replaces the getMapOutput.jsp with a Servlet. 

The problem was that the getMapOutput.jsp was closing the output stream and the wrapper code was trying to close it again, which would sometimes generate the IllegalStateException.

The new servlet is more careful to handle errors including setting an error response if something goes wrong. It also sets the content-length with the length of the file.

> IllegalStateException is thrown by TaskTracker
> ----------------------------------------------
>
>                 Key: HADOOP-513
>                 URL: http://issues.apache.org/jira/browse/HADOOP-513
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.5.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Owen O'Malley
>             Fix For: 0.7.0
>
>         Attachments: map-out-servlet.patch
>
>
> I am running TestDFSIO on a one node cluster and getting IllegalStateException for each map task run as listed below.
> The same exceptions are flooding logs for TestMiniMRWithDFS on my nightly build for quite a while now.
> Does anybody know what that is?
> My understanding is that if it is "illegal", then tests should fail.
> If not then it should be caught and ignored INTERNALLY.
> 06/09/06 14:54:50 INFO mapred.TaskTracker: task_0002_r_000000_0 0.25% reduce > copy (3 of 4 at 0.00 MB/s) >
> 06/09/06 14:54:50 INFO mapred.TaskRunner: task_0002_r_000000_0 Need 1 map output(s)
> 06/09/06 14:54:50 INFO mapred.TaskRunner: task_0002_r_000000_0 Got 1 known map output location(s); scheduling...
> 06/09/06 14:54:50 INFO mapred.TaskRunner: task_0002_r_000000_0 Scheduled 1 of 1 known outputs (0 slow hosts and 0 dup hosts)
> 06/09/06 14:54:50 INFO mapred.TaskRunner: task_0002_r_000000_0 Copying task_0002_m_000003_0 output from ENO.
> 06/09/06 14:54:50 WARN /: /getMapOutput.jsp?map=task_0002_m_000003_0&reduce=0:
> java.lang.IllegalStateException
>     at org.mortbay.jetty.servlet.ServletHttpResponse.getWriter(ServletHttpResponse.java:561)
>     at org.apache.jasper.runtime.JspWriterImpl.initOut(JspWriterImpl.java:122)
>     at org.apache.jasper.runtime.JspWriterImpl.flushBuffer(JspWriterImpl.java:115)
>     at org.apache.jasper.runtime.PageContextImpl.release(PageContextImpl.java:190)
>     at org.apache.jasper.runtime.JspFactoryImpl.internalReleasePageContext(JspFactoryImpl.java:115)
>     at org.apache.jasper.runtime.JspFactoryImpl.releasePageContext(JspFactoryImpl.java:75)
>     at org.apache.hadoop.mapred.getMapOutput_jsp._jspService(getMapOutput_jsp.java:100)
>     at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:94)
>     at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
>     at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:427)
>     at org.mortbay.jetty.servlet.WebApplicationHandler.dispatch(WebApplicationHandler.java:475)
>     at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:567)
>     at org.mortbay.http.HttpContext.handle(HttpContext.java:1565)
>     at org.mortbay.jetty.servlet.WebApplicationContext.handle(WebApplicationContext.java:635)
>     at org.mortbay.http.HttpContext.handle(HttpContext.java:1517)
>     at org.mortbay.http.HttpServer.service(HttpServer.java:954)
>     at org.mortbay.http.HttpConnection.service(HttpConnection.java:814)
>     at org.mortbay.http.HttpConnection.handleNext(HttpConnection.java:981)
>     at org.mortbay.http.HttpConnection.handle(HttpConnection.java:831)
>     at org.mortbay.http.SocketListener.handleConnection(SocketListener.java:244)
>     at org.mortbay.util.ThreadedServer.handle(ThreadedServer.java:357)
>     at org.mortbay.util.ThreadPool$PoolThread.run(ThreadPool.java:534)
> 06/09/06 14:54:50 INFO mapred.TaskRunner: task_0002_r_000000_0 done copying task_0002_m_000003_0 output from ENO.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 29 20:39:17 2006
Return-Path: 
 <hadoop-dev-return-4041-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52624 invoked from network); 29 Sep 2006 20:39:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Sep 2006 20:39:17 -0000
Received: (qmail 88811 invoked by uid 500); 29 Sep 2006 20:39:16 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 88785 invoked by uid 500); 29 Sep 2006 20:39:16 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88776 invoked by uid 99); 29 Sep 2006 20:39:16 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Sep 2006 13:39:16 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B541D7142DC
	for <hadoop-dev@lucene.apache.org>; Fri, 29 Sep 2006 13:38:25 -0700 (PDT)
Message-ID: <23397420.1159562305739.JavaMail.root@brutus>
Date: Fri, 29 Sep 2006 13:38:25 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-513) IllegalStateException is thrown by
 TaskTracker
In-Reply-To: <2419146.1157581404070.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-513?page=all ]

Owen O'Malley updated HADOOP-513:
---------------------------------

           Status: Patch Available  (was: In Progress)
    Fix Version/s: 0.7.0

> IllegalStateException is thrown by TaskTracker
> ----------------------------------------------
>
>                 Key: HADOOP-513
>                 URL: http://issues.apache.org/jira/browse/HADOOP-513
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.5.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Owen O'Malley
>             Fix For: 0.7.0
>
>         Attachments: map-out-servlet.patch
>
>
> I am running TestDFSIO on a one node cluster and getting IllegalStateException for each map task run as listed below.
> The same exceptions are flooding logs for TestMiniMRWithDFS on my nightly build for quite a while now.
> Does anybody know what that is?
> My understanding is that if it is "illegal", then tests should fail.
> If not then it should be caught and ignored INTERNALLY.
> 06/09/06 14:54:50 INFO mapred.TaskTracker: task_0002_r_000000_0 0.25% reduce > copy (3 of 4 at 0.00 MB/s) >
> 06/09/06 14:54:50 INFO mapred.TaskRunner: task_0002_r_000000_0 Need 1 map output(s)
> 06/09/06 14:54:50 INFO mapred.TaskRunner: task_0002_r_000000_0 Got 1 known map output location(s); scheduling...
> 06/09/06 14:54:50 INFO mapred.TaskRunner: task_0002_r_000000_0 Scheduled 1 of 1 known outputs (0 slow hosts and 0 dup hosts)
> 06/09/06 14:54:50 INFO mapred.TaskRunner: task_0002_r_000000_0 Copying task_0002_m_000003_0 output from ENO.
> 06/09/06 14:54:50 WARN /: /getMapOutput.jsp?map=task_0002_m_000003_0&reduce=0:
> java.lang.IllegalStateException
>     at org.mortbay.jetty.servlet.ServletHttpResponse.getWriter(ServletHttpResponse.java:561)
>     at org.apache.jasper.runtime.JspWriterImpl.initOut(JspWriterImpl.java:122)
>     at org.apache.jasper.runtime.JspWriterImpl.flushBuffer(JspWriterImpl.java:115)
>     at org.apache.jasper.runtime.PageContextImpl.release(PageContextImpl.java:190)
>     at org.apache.jasper.runtime.JspFactoryImpl.internalReleasePageContext(JspFactoryImpl.java:115)
>     at org.apache.jasper.runtime.JspFactoryImpl.releasePageContext(JspFactoryImpl.java:75)
>     at org.apache.hadoop.mapred.getMapOutput_jsp._jspService(getMapOutput_jsp.java:100)
>     at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:94)
>     at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
>     at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:427)
>     at org.mortbay.jetty.servlet.WebApplicationHandler.dispatch(WebApplicationHandler.java:475)
>     at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:567)
>     at org.mortbay.http.HttpContext.handle(HttpContext.java:1565)
>     at org.mortbay.jetty.servlet.WebApplicationContext.handle(WebApplicationContext.java:635)
>     at org.mortbay.http.HttpContext.handle(HttpContext.java:1517)
>     at org.mortbay.http.HttpServer.service(HttpServer.java:954)
>     at org.mortbay.http.HttpConnection.service(HttpConnection.java:814)
>     at org.mortbay.http.HttpConnection.handleNext(HttpConnection.java:981)
>     at org.mortbay.http.HttpConnection.handle(HttpConnection.java:831)
>     at org.mortbay.http.SocketListener.handleConnection(SocketListener.java:244)
>     at org.mortbay.util.ThreadedServer.handle(ThreadedServer.java:357)
>     at org.mortbay.util.ThreadPool$PoolThread.run(ThreadPool.java:534)
> 06/09/06 14:54:50 INFO mapred.TaskRunner: task_0002_r_000000_0 done copying task_0002_m_000003_0 output from ENO.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 29 20:54:43 2006
Return-Path: 
 <hadoop-dev-return-4042-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57421 invoked from network); 29 Sep 2006 20:54:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Sep 2006 20:54:43 -0000
Received: (qmail 10324 invoked by uid 500); 29 Sep 2006 20:54:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9898 invoked by uid 500); 29 Sep 2006 20:54:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9775 invoked by uid 99); 29 Sep 2006 20:54:34 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Sep 2006 13:54:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:35232]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 96/2D-13110-5E78D154 for <hadoop-dev@lucene.apache.org>;
 Fri, 29 Sep 2006 13:54:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 81E247142DC
	for <hadoop-dev@lucene.apache.org>; Fri, 29 Sep 2006 13:53:22 -0700 (PDT)
Message-ID: <14852024.1159563202527.JavaMail.root@brutus>
Date: Fri, 29 Sep 2006 13:53:22 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-513) IllegalStateException is thrown by
 TaskTracker
In-Reply-To: <2419146.1157581404070.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-513?page=all ]

Doug Cutting updated HADOOP-513:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Owen!

> IllegalStateException is thrown by TaskTracker
> ----------------------------------------------
>
>                 Key: HADOOP-513
>                 URL: http://issues.apache.org/jira/browse/HADOOP-513
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.5.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Owen O'Malley
>             Fix For: 0.7.0
>
>         Attachments: map-out-servlet.patch
>
>
> I am running TestDFSIO on a one node cluster and getting IllegalStateException for each map task run as listed below.
> The same exceptions are flooding logs for TestMiniMRWithDFS on my nightly build for quite a while now.
> Does anybody know what that is?
> My understanding is that if it is "illegal", then tests should fail.
> If not then it should be caught and ignored INTERNALLY.
> 06/09/06 14:54:50 INFO mapred.TaskTracker: task_0002_r_000000_0 0.25% reduce > copy (3 of 4 at 0.00 MB/s) >
> 06/09/06 14:54:50 INFO mapred.TaskRunner: task_0002_r_000000_0 Need 1 map output(s)
> 06/09/06 14:54:50 INFO mapred.TaskRunner: task_0002_r_000000_0 Got 1 known map output location(s); scheduling...
> 06/09/06 14:54:50 INFO mapred.TaskRunner: task_0002_r_000000_0 Scheduled 1 of 1 known outputs (0 slow hosts and 0 dup hosts)
> 06/09/06 14:54:50 INFO mapred.TaskRunner: task_0002_r_000000_0 Copying task_0002_m_000003_0 output from ENO.
> 06/09/06 14:54:50 WARN /: /getMapOutput.jsp?map=task_0002_m_000003_0&reduce=0:
> java.lang.IllegalStateException
>     at org.mortbay.jetty.servlet.ServletHttpResponse.getWriter(ServletHttpResponse.java:561)
>     at org.apache.jasper.runtime.JspWriterImpl.initOut(JspWriterImpl.java:122)
>     at org.apache.jasper.runtime.JspWriterImpl.flushBuffer(JspWriterImpl.java:115)
>     at org.apache.jasper.runtime.PageContextImpl.release(PageContextImpl.java:190)
>     at org.apache.jasper.runtime.JspFactoryImpl.internalReleasePageContext(JspFactoryImpl.java:115)
>     at org.apache.jasper.runtime.JspFactoryImpl.releasePageContext(JspFactoryImpl.java:75)
>     at org.apache.hadoop.mapred.getMapOutput_jsp._jspService(getMapOutput_jsp.java:100)
>     at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:94)
>     at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
>     at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:427)
>     at org.mortbay.jetty.servlet.WebApplicationHandler.dispatch(WebApplicationHandler.java:475)
>     at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:567)
>     at org.mortbay.http.HttpContext.handle(HttpContext.java:1565)
>     at org.mortbay.jetty.servlet.WebApplicationContext.handle(WebApplicationContext.java:635)
>     at org.mortbay.http.HttpContext.handle(HttpContext.java:1517)
>     at org.mortbay.http.HttpServer.service(HttpServer.java:954)
>     at org.mortbay.http.HttpConnection.service(HttpConnection.java:814)
>     at org.mortbay.http.HttpConnection.handleNext(HttpConnection.java:981)
>     at org.mortbay.http.HttpConnection.handle(HttpConnection.java:831)
>     at org.mortbay.http.SocketListener.handleConnection(SocketListener.java:244)
>     at org.mortbay.util.ThreadedServer.handle(ThreadedServer.java:357)
>     at org.mortbay.util.ThreadPool$PoolThread.run(ThreadPool.java:534)
> 06/09/06 14:54:50 INFO mapred.TaskRunner: task_0002_r_000000_0 done copying task_0002_m_000003_0 output from ENO.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 29 21:15:33 2006
Return-Path: 
 <hadoop-dev-return-4044-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 63663 invoked from network); 29 Sep 2006 21:15:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Sep 2006 21:15:33 -0000
Received: (qmail 51758 invoked by uid 500); 29 Sep 2006 21:15:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 51730 invoked by uid 500); 29 Sep 2006 21:15:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 51721 invoked by uid 99); 29 Sep 2006 21:15:32 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Sep 2006 14:15:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:45415]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 88/20-20582-3FC8D154 for <hadoop-dev@lucene.apache.org>;
 Fri, 29 Sep 2006 14:15:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EEA8C7142DF
	for <hadoop-dev@lucene.apache.org>; Fri, 29 Sep 2006 14:15:22 -0700 (PDT)
Message-ID: <7753802.1159564522974.JavaMail.root@brutus>
Date: Fri, 29 Sep 2006 14:15:22 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-489) Seperating user logs from system
 logs in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-489?page=comments#action_12438810 ] 
            
Owen O'Malley commented on HADOOP-489:
--------------------------------------

Certainly, my grand plan includes grep=<pattern> with context lines, but I think it is worth doing the first iteration without it.

There also needs to be some work in the JobClient to show the output of failed tasks as they fail.

There should also be a link from the job tracker's ui to the logs for a particular task.

> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Owen O'Malley
>            Priority: Minor
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Sep 29 21:27:25 2006
Return-Path: 
 <hadoop-dev-return-4045-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68427 invoked from network); 29 Sep 2006 21:27:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Sep 2006 21:27:25 -0000
Received: (qmail 70301 invoked by uid 500); 29 Sep 2006 21:27:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70276 invoked by uid 500); 29 Sep 2006 21:27:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 70267 invoked by uid 99); 29 Sep 2006 21:27:24 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Sep 2006 14:27:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:57470]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 03/70-20582-BBF8D154 for <hadoop-dev@lucene.apache.org>;
 Fri, 29 Sep 2006 14:27:24 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C6B907142D8
	for <hadoop-dev@lucene.apache.org>; Fri, 29 Sep 2006 14:27:20 -0700 (PDT)
Message-ID: <15956846.1159565240811.JavaMail.root@brutus>
Date: Fri, 29 Sep 2006 14:27:20 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-563) DFS client should try to re-new
 lease if it gets a lease expiration exception when it adds a block to a
 file
In-Reply-To: <28125744.1159383470163.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-563?page=comments#action_12438813 ] 
            
Sameer Paranjpye commented on HADOOP-563:
-----------------------------------------

+1 for the losable (maybe we should call them stale?) leases proposal

> DFS client should try to re-new lease if it gets a lease expiration exception when it adds a block to a file
> ------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-563
>                 URL: http://issues.apache.org/jira/browse/HADOOP-563
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Runping Qi
>
> In the current DFS client implementation, there is one thread responsible for renewing leases. If for whatever reason, that thread runs behind, the lease may get expired. That causes the client gets a lease expiration exception when writing a block. The consequence of that is very devastating: the client can no longer write to the file, and all the partial results up to that point are gone! This is especially costly for some map reduce jobs where a reducer may take hours or even days to sort the intermediate results before the actual reducing work can start.
> The problem will be solved if the flush method of  DFS client can renew lease on demand. That is, it should try to re-new lease  when it catches a lease expiration exception. That way,  even when under heavy load and the lease renewing thread runs behind, the reducer  task (or what ever tasks use that client) can preceed.  That will be a huge saving in some cases (where sorting intermediate results take a long time to finish). We can set a limit on the number of retries, and may even make it configurable (or changeable at runtime). 
> The namenode can use a different expiration time that is much higher than the current 1 minute lease expiration time for cleaning  up the abandoned unclosed files.
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Sep 30 00:05:24 2006
Return-Path: 
 <hadoop-dev-return-4046-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93808 invoked from network); 30 Sep 2006 00:05:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Sep 2006 00:05:24 -0000
Received: (qmail 8148 invoked by uid 500); 30 Sep 2006 00:05:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 8123 invoked by uid 500); 30 Sep 2006 00:05:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 8114 invoked by uid 99); 30 Sep 2006 00:05:23 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Sep 2006 17:05:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:59631]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 5F/E0-21606-3C4BD154 for <hadoop-dev@lucene.apache.org>;
 Fri, 29 Sep 2006 17:05:23 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 949BB7142D8
	for <hadoop-dev@lucene.apache.org>; Fri, 29 Sep 2006 17:05:20 -0700 (PDT)
Message-ID: <24792607.1159574720605.JavaMail.root@brutus>
Date: Fri, 29 Sep 2006 17:05:20 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-552) getMapOutput doesn't reliably detect
 errors and throw to the caller
In-Reply-To: <32889729.1158769702347.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-552?page=all ]

Owen O'Malley updated HADOOP-552:
---------------------------------

    Attachment: size-check.patch

Re-write of the MapOutputLocation.getFile to handle errors better including checking the content-length and deleting the partial file if something goes wrong.

> getMapOutput doesn't reliably detect errors and throw to the caller
> -------------------------------------------------------------------
>
>                 Key: HADOOP-552
>                 URL: http://issues.apache.org/jira/browse/HADOOP-552
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.6.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.7.0
>
>         Attachments: size-check.patch
>
>
> getMapOutput does not reliabily detect errors in transmission, which usually ends up with an EOFException in the reduce's sort:
> java.io.EOFException
> 	at java.io.DataInputStream.readFully(DataInputStream.java:178)
> 	at java.io.DataInputStream.readFully(DataInputStream.java:152)
> 	at org.apache.hadoop.io.SequenceFile$Reader.init(SequenceFile.java:952)
> 	at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:937)
> 	at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:928)
> 	at org.apache.hadoop.io.SequenceFile$Sorter$SortPass.run(SequenceFile.java:1594)
> 	at org.apache.hadoop.io.SequenceFile$Sorter.sortPass(SequenceFile.java:1523)
> 	at org.apache.hadoop.io.SequenceFile$Sorter.sort(SequenceFile.java:1496)
> 	at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:240)
> 	at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1173)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Sep 30 00:05:25 2006
Return-Path: 
 <hadoop-dev-return-4047-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93856 invoked from network); 30 Sep 2006 00:05:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Sep 2006 00:05:25 -0000
Received: (qmail 8569 invoked by uid 500); 30 Sep 2006 00:05:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 8359 invoked by uid 500); 30 Sep 2006 00:05:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 8350 invoked by uid 99); 30 Sep 2006 00:05:25 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Sep 2006 17:05:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:59633]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id AF/E0-21606-4C4BD154 for <hadoop-dev@lucene.apache.org>;
 Fri, 29 Sep 2006 17:05:24 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BB7CE7142DC
	for <hadoop-dev@lucene.apache.org>; Fri, 29 Sep 2006 17:05:21 -0700 (PDT)
Message-ID: <7602998.1159574721765.JavaMail.root@brutus>
Date: Fri, 29 Sep 2006 17:05:21 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-552) getMapOutput doesn't reliably detect
 errors and throw to the caller
In-Reply-To: <32889729.1158769702347.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-552?page=all ]

Owen O'Malley updated HADOOP-552:
---------------------------------

    Status: Patch Available  (was: Open)

> getMapOutput doesn't reliably detect errors and throw to the caller
> -------------------------------------------------------------------
>
>                 Key: HADOOP-552
>                 URL: http://issues.apache.org/jira/browse/HADOOP-552
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.6.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.7.0
>
>         Attachments: size-check.patch
>
>
> getMapOutput does not reliabily detect errors in transmission, which usually ends up with an EOFException in the reduce's sort:
> java.io.EOFException
> 	at java.io.DataInputStream.readFully(DataInputStream.java:178)
> 	at java.io.DataInputStream.readFully(DataInputStream.java:152)
> 	at org.apache.hadoop.io.SequenceFile$Reader.init(SequenceFile.java:952)
> 	at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:937)
> 	at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:928)
> 	at org.apache.hadoop.io.SequenceFile$Sorter$SortPass.run(SequenceFile.java:1594)
> 	at org.apache.hadoop.io.SequenceFile$Sorter.sortPass(SequenceFile.java:1523)
> 	at org.apache.hadoop.io.SequenceFile$Sorter.sort(SequenceFile.java:1496)
> 	at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:240)
> 	at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1173)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

