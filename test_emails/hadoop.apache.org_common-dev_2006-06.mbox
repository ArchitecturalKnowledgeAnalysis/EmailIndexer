From MAILER-DAEMON Wed May 31 22:45:25 2006
Return-Path: 
 <hadoop-dev-return-1791-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33730 invoked from network); 31 May 2006 22:45:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 May 2006 22:45:25 -0000
Received: (qmail 43264 invoked by uid 500); 31 May 2006 22:45:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 43212 invoked by uid 500); 31 May 2006 22:45:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 43196 invoked by uid 99); 31 May 2006 22:45:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 May 2006 15:45:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 May 2006 15:45:23 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 79E75714204
	for <hadoop-dev@lucene.apache.org>; Wed, 31 May 2006 22:44:31 +0000 (GMT)
Message-ID: <1168354.1149115471496.JavaMail.jira@brutus>
Date: Wed, 31 May 2006 22:44:31 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-259) map output http client does not
 timeout
In-Reply-To: <30473871.1148883389827.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-259?page=all ]

Owen O'Malley updated HADOOP-259:
---------------------------------

    Attachment: http-client-timeout-2.patch

Ok, I moved the Pingable interface to be an inner interface to MapOutputLocation.

> map output http client does not timeout
> ---------------------------------------
>
>          Key: HADOOP-259
>          URL: http://issues.apache.org/jira/browse/HADOOP-259
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.3
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.3
>  Attachments: http-client-timeout-2.patch, http-client-timeout.patch
>
> The new map output http client uses java.net.URLConnection to fetch the data file. However under Java 1.4 there is no way to specify a timeout and it is set to infinite (or if not infinite at least 12 hours).  This causes reduce tasks to get "stuck" in the "reduce > copy" phase even after the "Task failed to report status for 600 seconds. Killing." message.
> I will add the code in the ReduceTaskRunner to make sure that copies in-flight don't get stuck, but this is another point where a switch to java 1.5 would be helpful. Under 1.5 I could set the timeout on the connection and the read would timeout after the given interval and my entire change would be local to MapOutputLocation.copyFile.
> For now, I'll assume that we need to maintain support for 1.4 and make the corresponding fix, but I'm grumbling...

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed May 31 23:19:23 2006
Return-Path: 
 <hadoop-dev-return-1792-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 44793 invoked from network); 31 May 2006 23:19:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 May 2006 23:19:23 -0000
Received: (qmail 91137 invoked by uid 500); 31 May 2006 23:19:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 90996 invoked by uid 500); 31 May 2006 23:19:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 90985 invoked by uid 99); 31 May 2006 23:19:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 May 2006 16:19:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 May 2006 16:19:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 02AFF714204
	for <hadoop-dev@lucene.apache.org>; Wed, 31 May 2006 23:18:30 +0000 (GMT)
Message-ID: <15795140.1149117510008.JavaMail.jira@brutus>
Date: Wed, 31 May 2006 23:18:30 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-264) WritableFactory has no permissions to
 create DatanodeRegistration
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

WritableFactory has no permissions to create DatanodeRegistration
-----------------------------------------------------------------

         Key: HADOOP-264
         URL: http://issues.apache.org/jira/browse/HADOOP-264
     Project: Hadoop
        Type: Bug

  Components: dfs  
    Versions: 0.3    
    Reporter: Owen O'Malley
 Assigned to: Owen O'Malley 
    Priority: Blocker
     Fix For: 0.3


The datanode can not come up because the DatanodeRegistration is package local and the factory registration doesn't happen.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed May 31 23:24:23 2006
Return-Path: 
 <hadoop-dev-return-1793-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 48296 invoked from network); 31 May 2006 23:24:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 May 2006 23:24:23 -0000
Received: (qmail 97700 invoked by uid 500); 31 May 2006 23:24:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97557 invoked by uid 500); 31 May 2006 23:24:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97548 invoked by uid 99); 31 May 2006 23:24:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 May 2006 16:24:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 May 2006 16:24:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A11DA714204
	for <hadoop-dev@lucene.apache.org>; Wed, 31 May 2006 23:23:30 +0000 (GMT)
Message-ID: <25980454.1149117810657.JavaMail.jira@brutus>
Date: Wed, 31 May 2006 23:23:30 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-264) WritableFactory has no permissions to
 create DatanodeRegistration
In-Reply-To: <15795140.1149117510008.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-264?page=all ]

Owen O'Malley updated HADOOP-264:
---------------------------------

    Attachment: fix-datanode-registration-perm.patch

This patch forces the namenode to load the DatanodeRegistration class so that the factory is setup before it is needed for RPC.

> WritableFactory has no permissions to create DatanodeRegistration
> -----------------------------------------------------------------
>
>          Key: HADOOP-264
>          URL: http://issues.apache.org/jira/browse/HADOOP-264
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.3
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>     Priority: Blocker
>      Fix For: 0.3
>  Attachments: fix-datanode-registration-perm.patch
>
> The datanode can not come up because the DatanodeRegistration is package local and the factory registration doesn't happen.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed May 31 23:26:23 2006
Return-Path: 
 <hadoop-dev-return-1794-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 48443 invoked from network); 31 May 2006 23:26:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 May 2006 23:26:23 -0000
Received: (qmail 98127 invoked by uid 500); 31 May 2006 23:26:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98103 invoked by uid 500); 31 May 2006 23:26:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98094 invoked by uid 99); 31 May 2006 23:26:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 May 2006 16:26:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 May 2006 16:26:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 92F63714204
	for <hadoop-dev@lucene.apache.org>; Wed, 31 May 2006 23:25:30 +0000 (GMT)
Message-ID: <4040324.1149117930599.JavaMail.jira@brutus>
Date: Wed, 31 May 2006 23:25:30 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-264) WritableFactory has no permissions
 to create DatanodeRegistration
In-Reply-To: <15795140.1149117510008.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-264?page=comments#action_12414173 ] 

Owen O'Malley commented on HADOOP-264:
--------------------------------------

I should comment that this is a total hack just to get us flying again...

> WritableFactory has no permissions to create DatanodeRegistration
> -----------------------------------------------------------------
>
>          Key: HADOOP-264
>          URL: http://issues.apache.org/jira/browse/HADOOP-264
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.3
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>     Priority: Blocker
>      Fix For: 0.3
>  Attachments: fix-datanode-registration-perm.patch
>
> The datanode can not come up because the DatanodeRegistration is package local and the factory registration doesn't happen.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed May 31 23:53:23 2006
Return-Path: 
 <hadoop-dev-return-1795-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57463 invoked from network); 31 May 2006 23:53:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 May 2006 23:53:23 -0000
Received: (qmail 36074 invoked by uid 500); 31 May 2006 23:53:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 36044 invoked by uid 500); 31 May 2006 23:53:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 36035 invoked by uid 99); 31 May 2006 23:53:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 May 2006 16:53:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 May 2006 16:53:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 99A55714204
	for <hadoop-dev@lucene.apache.org>; Wed, 31 May 2006 23:52:30 +0000 (GMT)
Message-ID: <15147467.1149119550626.JavaMail.jira@brutus>
Date: Wed, 31 May 2006 23:52:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-264) WritableFactory has no permissions
 to create DatanodeRegistration
In-Reply-To: <15795140.1149117510008.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-264?page=comments#action_12414176 ] 

Doug Cutting commented on HADOOP-264:
-------------------------------------

There is an idiom for this hack.  See e.g., the static initializer blocks near the top of DataNode, DFSClient, DFSShell, JobTracker, TaskTracker, etc.  It's nice to keep these all uniform, with the same comment, so that, someday, we can easily remove them all at once.

> WritableFactory has no permissions to create DatanodeRegistration
> -----------------------------------------------------------------
>
>          Key: HADOOP-264
>          URL: http://issues.apache.org/jira/browse/HADOOP-264
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.3
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>     Priority: Blocker
>      Fix For: 0.3
>  Attachments: fix-datanode-registration-perm.patch
>
> The datanode can not come up because the DatanodeRegistration is package local and the factory registration doesn't happen.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun  1 00:09:23 2006
Return-Path: 
 <hadoop-dev-return-1796-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 61540 invoked from network); 1 Jun 2006 00:09:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 00:09:23 -0000
Received: (qmail 58079 invoked by uid 500); 1 Jun 2006 00:09:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58050 invoked by uid 500); 1 Jun 2006 00:09:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58041 invoked by uid 99); 1 Jun 2006 00:09:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 May 2006 17:09:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 May 2006 17:09:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D89C0714204
	for <hadoop-dev@lucene.apache.org>; Thu,  1 Jun 2006 00:08:29 +0000 (GMT)
Message-ID: <32270485.1149120509884.JavaMail.jira@brutus>
Date: Thu, 1 Jun 2006 00:08:29 +0000 (GMT+00:00)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-265) Abort tasktracker if it can not write
 to its local directories
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Abort tasktracker if it can not write to its local directories
--------------------------------------------------------------

         Key: HADOOP-265
         URL: http://issues.apache.org/jira/browse/HADOOP-265
     Project: Hadoop
        Type: Bug

  Components: mapred  
    Versions: 0.3    
    Reporter: Hairong Kuang
 Assigned to: Hairong Kuang 
     Fix For: 0.3


Currently if a task tracker is not able to write to any of its local directories, it continues to run and all the tasks assigned to it fail.

A task tracker should not start upif it has a problem reading/writing any of its local directories. It should abort if it gets the problem at run time.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun  1 00:11:25 2006
Return-Path: 
 <hadoop-dev-return-1797-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 61850 invoked from network); 1 Jun 2006 00:11:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 00:11:25 -0000
Received: (qmail 61441 invoked by uid 500); 1 Jun 2006 00:11:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 61397 invoked by uid 500); 1 Jun 2006 00:11:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 61388 invoked by uid 99); 1 Jun 2006 00:11:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 May 2006 17:11:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 May 2006 17:11:23 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C713D71421B
	for <hadoop-dev@lucene.apache.org>; Thu,  1 Jun 2006 00:10:31 +0000 (GMT)
Message-ID: <2941481.1149120631812.JavaMail.jira@brutus>
Date: Thu, 1 Jun 2006 00:10:31 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-264) WritableFactory has no permissions
 to create DatanodeRegistration
In-Reply-To: <15795140.1149117510008.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-264?page=comments#action_12414178 ] 

Owen O'Malley commented on HADOOP-264:
--------------------------------------

Ok, after considering it a few minutes, I propose that all objects passed through RPC should be public classes with public methods. That will help when we factor the different servers (jobtracker vs. tasktracker) into separate packages (org.apache.hadoop.mapred.job vs org.apache.hadoop.mapred.task ???) and fundamentally the RPC interfaces are _public_ with a capital P.

However, the WritableFactory factory is still very useful for serialization and such. I'd propose that classes that want to register do:

static void registerWritableFactory() {
  WritableFactories.setFactory(Foo.class, new WritableFactory () { ... });
}

static {
  registerWritableFactory();
}

Then when WritableFactory wants to create an instance of a class, if no factory is registered, it uses reflection to find a "registerWritableFactory" method and calls it, if such a method exists. (We can use setAccessable to make it callable, even if it is not public.)

> WritableFactory has no permissions to create DatanodeRegistration
> -----------------------------------------------------------------
>
>          Key: HADOOP-264
>          URL: http://issues.apache.org/jira/browse/HADOOP-264
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.3
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>     Priority: Blocker
>      Fix For: 0.3
>  Attachments: fix-datanode-registration-perm.patch
>
> The datanode can not come up because the DatanodeRegistration is package local and the factory registration doesn't happen.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun  1 00:15:25 2006
Return-Path: 
 <hadoop-dev-return-1798-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 62340 invoked from network); 1 Jun 2006 00:15:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 00:15:25 -0000
Received: (qmail 66292 invoked by uid 500); 1 Jun 2006 00:15:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66194 invoked by uid 500); 1 Jun 2006 00:15:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66185 invoked by uid 99); 1 Jun 2006 00:15:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 May 2006 17:15:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 May 2006 17:15:24 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BED05714204
	for <hadoop-dev@lucene.apache.org>; Thu,  1 Jun 2006 00:14:32 +0000 (GMT)
Message-ID: <20508396.1149120872778.JavaMail.jira@brutus>
Date: Thu, 1 Jun 2006 00:14:32 +0000 (GMT+00:00)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-265) Abort tasktracker if it can not write
 to its local directories
In-Reply-To: <32270485.1149120509884.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-265?page=all ]

Hairong Kuang updated HADOOP-265:
---------------------------------

    Attachment: mapred_disk.patch

In this patch, if a task tracker finds out that any of its local directories becomes not readable or writable, it logs the error. If all of its local directories are not readable/writable, it reports the problem to its job tracker and then aborts. When the job tracker receives the error report, it logs the error. 

A task tracker detects disk problem at startup time and before it starts a new task. A task tracker will not start if all its local directories are not readable or writable. 


> Abort tasktracker if it can not write to its local directories
> --------------------------------------------------------------
>
>          Key: HADOOP-265
>          URL: http://issues.apache.org/jira/browse/HADOOP-265
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.3
>     Reporter: Hairong Kuang
>     Assignee: Hairong Kuang
>      Fix For: 0.3
>  Attachments: mapred_disk.patch
>
> Currently if a task tracker is not able to write to any of its local directories, it continues to run and all the tasks assigned to it fail.
> A task tracker should not start upif it has a problem reading/writing any of its local directories. It should abort if it gets the problem at run time.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun  1 01:41:24 2006
Return-Path: 
 <hadoop-dev-return-1799-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84446 invoked from network); 1 Jun 2006 01:41:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 01:41:24 -0000
Received: (qmail 46021 invoked by uid 500); 1 Jun 2006 01:41:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 45890 invoked by uid 500); 1 Jun 2006 01:41:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 45881 invoked by uid 99); 1 Jun 2006 01:41:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 May 2006 18:41:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 May 2006 18:41:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 95F8B714204
	for <hadoop-dev@lucene.apache.org>; Thu,  1 Jun 2006 01:40:30 +0000 (GMT)
Message-ID: <21747745.1149126030610.JavaMail.jira@brutus>
Date: Thu, 1 Jun 2006 01:40:30 +0000 (GMT+00:00)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-264) WritableFactory has no permissions to
 create DatanodeRegistration
In-Reply-To: <15795140.1149117510008.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-264?page=all ]

Konstantin Shvachko updated HADOOP-264:
---------------------------------------

    Attachment: PublicDatanodeRegistration.patch

I agree with Owen that DatanodeRegistration as well as other classes passed through RPC should be public.
The counter-patch :-) with only one word added is attached.
Since it is related to HADOOP-124 making some classes non-public,
I would return public status to the exceptions as well.
Just speculating: if RPC would have to convert RemoteException to the real
exceptions like LeaseExpiredException then it would crash for the same reason.
We do not have that mechanism (for converting exceptions) yet, but one day we will.

> WritableFactory has no permissions to create DatanodeRegistration
> -----------------------------------------------------------------
>
>          Key: HADOOP-264
>          URL: http://issues.apache.org/jira/browse/HADOOP-264
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.3
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>     Priority: Blocker
>      Fix For: 0.3
>  Attachments: PublicDatanodeRegistration.patch, fix-datanode-registration-perm.patch
>
> The datanode can not come up because the DatanodeRegistration is package local and the factory registration doesn't happen.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun  1 02:13:23 2006
Return-Path: 
 <hadoop-dev-return-1800-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 90938 invoked from network); 1 Jun 2006 02:13:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 02:13:23 -0000
Received: (qmail 83686 invoked by uid 500); 1 Jun 2006 02:13:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 83602 invoked by uid 500); 1 Jun 2006 02:13:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 83592 invoked by uid 99); 1 Jun 2006 02:13:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 May 2006 19:13:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 May 2006 19:13:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DEA18714204
	for <hadoop-dev@lucene.apache.org>; Thu,  1 Jun 2006 02:12:29 +0000 (GMT)
Message-ID: <257196.1149127949907.JavaMail.jira@brutus>
Date: Thu, 1 Jun 2006 02:12:29 +0000 (GMT+00:00)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-266) RPC doesn not handle exceptions
 correctly
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

RPC doesn not handle exceptions correctly
-----------------------------------------

         Key: HADOOP-266
         URL: http://issues.apache.org/jira/browse/HADOOP-266
     Project: Hadoop
        Type: Bug

  Components: ipc  
    Reporter: Konstantin Shvachko
    Priority: Minor


1. Examining HADOOP-264 bug I realized that not all rpc server exceptions are actually returned to the client. Particularly, if an exception happens in 
org.apache.hadoop.ipc.Server.Connection.run()
for example inside 
param.readFields(in);
then it logged but never returned back to the client.
Client simply timeouts in this case, which is not exactly what one would expect.

2. On the way back 
org.apache.hadoop.ipc.Client.call()
rpc client always throws a RemoteException, rather than the exception wrapped into this RemoteException.


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun  1 02:41:23 2006
Return-Path: 
 <hadoop-dev-return-1801-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 313 invoked from network); 1 Jun 2006 02:41:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 02:41:23 -0000
Received: (qmail 14078 invoked by uid 500); 1 Jun 2006 02:41:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13945 invoked by uid 500); 1 Jun 2006 02:41:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13936 invoked by uid 99); 1 Jun 2006 02:41:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 May 2006 19:41:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 May 2006 19:41:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CF5DA714204
	for <hadoop-dev@lucene.apache.org>; Thu,  1 Jun 2006 02:40:29 +0000 (GMT)
Message-ID: <26765695.1149129629846.JavaMail.jira@brutus>
Date: Thu, 1 Jun 2006 02:40:29 +0000 (GMT+00:00)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-267) Data node should shutdown when a
 "critical" error is returned by the name node
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Data node should shutdown when a "critical" error is returned by the name node
------------------------------------------------------------------------------

         Key: HADOOP-267
         URL: http://issues.apache.org/jira/browse/HADOOP-267
     Project: Hadoop
        Type: Bug

  Components: dfs  
    Reporter: Konstantin Shvachko
    Priority: Minor


Currently data node does not distinguish between critical and non critical exceptions.
Any exception is treated as a signal to sleep and then try again. See
org.apache.hadoop.dfs.DataNode.run()
This is happening because RPC always throws the same RemoteException.
In some cases (like UnregisteredDatanodeException, IncorrectVersionException) the data 
node should shutdown rather than retry.
This logic naturally belongs to the 
org.apache.hadoop.dfs.DataNode.offerService()
but can be reasonably implemented (without examining the RemoteException.className 
field) after HADOOP-266 (2) is fixed.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun  1 09:52:25 2006
Return-Path: 
 <hadoop-dev-return-1802-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33869 invoked from network); 1 Jun 2006 09:52:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 09:52:25 -0000
Received: (qmail 85215 invoked by uid 500); 1 Jun 2006 09:52:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 85070 invoked by uid 500); 1 Jun 2006 09:52:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 85061 invoked by uid 99); 1 Jun 2006 09:52:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 02:52:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 02:52:23 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1FD2471429D
	for <hadoop-dev@lucene.apache.org>; Thu,  1 Jun 2006 09:51:31 +0000 (GMT)
Message-ID: <15400257.1149155491127.JavaMail.jira@brutus>
Date: Thu, 1 Jun 2006 09:51:31 +0000 (GMT+00:00)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-211) logging improvements for Hadoop
In-Reply-To: <11693488.1147389488398.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-211?page=all ]

Arun C Murthy updated HADOOP-211:
---------------------------------

    Attachment: acl-log4j-II.patch.tgz

Doug, 

 Please find the patch for commons-logging/log4j against the latest snapshot. 

 I have incorporated all your comments i.e. kept LogFormatter.java, removed dead-wood etc.

 Please try and apply this patch on a priority basis since it touches quite a bit of the code-base and potentially any commit will necessiate another patch! :)

thanks,
Arun

PS: We have removed hadoop/conf from the build-time classpath in build.xml since we don't want hadoop's log4j.properties to be picked up by the build-tools. We feel hadoop/conf isn't necessary for building at all. Please correct us if we are wrong.


> logging improvements for Hadoop
> -------------------------------
>
>          Key: HADOOP-211
>          URL: http://issues.apache.org/jira/browse/HADOOP-211
>      Project: Hadoop
>         Type: Improvement

>     Versions: 0.2
>     Reporter: Sameer Paranjpye
>     Assignee: Sameer Paranjpye
>     Priority: Minor
>      Fix For: 0.3
>  Attachments: acl-log4j-II.patch.tgz, acl-log4j.patch, commons_logging_patch
>
> Here's a proposal for some impovements to the way Hadoop does logging. It advocates 3 
> broad changes to the way logging is currently done, these being:
> - The use of a uniform logging format by all Hadoop subsystems
> - The use of Apache commons logging as a facade above an underlying logging framework
> - The use of Log4J as the underlying logging framework instead of java.util.logging
> This is largely polishing work, but it seems like it would make log analysis and debugging
> easier in the short term. In the long term, it would future proof logging to the extent of
> allowing the logging framework used to change while requiring minimal code change. The 
> propos changes are motivated by the following requirements which we think Hadoops 
> logging should meet:
> - Hadoops logs should be amenable to analysis by tools like grep, sed, awk etc.
> - Log entries should be clearly annotated with a timestamp and a logging level
> - Log entries should be traceable to the subsystem from which they originated
> - The logging implementation should allow log entries to be annotated with source code 
> location information like classname, methodname, file and line number, without requiring
> code changes
> - It should be possible to change the logging implementation used without having to change
> thousands of lines of code
> - The mapping of loggers to destinations (files, directories, servers etc.) should be 
> specified and modifiable via configuration
> Uniform logging format:
> All Hadoop logs should have the following structure.
> <Header>\n
> <LogEntry>\n [<Exception>\n]
> .
> .
> .
> where the header line specifies the format of each log entry. The header line has the format:
> '# <Fieldname> <Fieldname>...\n'. 
> The default format of each log entry is: '# Timestamp Level LoggerName Message', where:
> - Timestamp is a date and time in the format MM/DD/YYYY:HH:MM:SS
> - Level is the logging level (FATAL, WARN, DEBUG, TRACE, etc.)
> - LoggerName is the short name of the logging subsystem from which the message originated e.g.
> fs.FSNamesystem, dfs.Datanode etc.
> - Message is the log message produced
> Why Apache commons logging and Log4J?
> Apache commons logging is a facade meant to be used as a wrapper around an underlying logging
> implementation. Bridges from Apache commons logging to popular logging implementations 
> (Java logging, Log4J, Avalon etc.) are implemented and available as part of the commons logging
> distribution. Implementing a bridge to an unsupported implementation is fairly striaghtforward
> and involves the implementation of subclasses of the commons logging LogFactory and Logger 
> classes. Using Apache commons logging and making all logging calls through it enables us to
> move to a different logging implementation by simply changing configuration in the best case.
> Even otherwise, it incurs minimal code churn overhead.
> Log4J offers a few benefits over java.util.logging that make it a more desirable choice for the
> logging back end.
> - Configuration Flexibility: The mapping of loggers to destinations (files, sockets etc.)
> can be completely specified in configuration. It is possible to do this with Java logging as
> well, however, configuration is a lot more restrictive. For instance, with Java logging all 
> log files must have names derived from the same pattern. For the namenode, log files could 
> be named with the pattern "%h/namenode%u.log" which would put log files in the user.home
> directory with names like namenode0.log etc. With Log4J it would be possible to configure
> the namenode to emit log files with different names, say heartbeats.log, namespace.log,
> clients.log etc. Configuration variables in Log4J can also have the values of system 
> properties embedded in them.
> - Takes wrappers into account: Log4J takes into account the possibility that an application
> may be invoking it via a wrapper, such as Apache commons logging. This is important because
> logging event objects must be able to infer the context of the logging call such as classname,
> methodname etc. Inferring context is a relatively expensive operation that involves creating
> an exception and examining the stack trace to find the frame just before the first frame 
> of the logging framework. It is therefore done lazily only when this information actually 
> needs to be logged. Log4J can be instructed to look for the frame corresponding to the wrapper
> class, Java logging cannot. In the case of Java logging this means that a) the bridge from 
> Apache commons logging is responsible for inferring the calling context and setting it in the 
> logging event and b) this inference has to be done on every logging call regardless of whether
> or not it is needed.
> - More handy features: Log4J has some handy features that Java logging doesn't. A couple
> of examples of these:
> a) Date based rolling of log files 
> b) Format control through configuration. Log4J has a PatternLayout class that can be 
> configured to generate logs with a user specified pattern. The logging format described
> above can be described as "%d{MM/dd/yyyy:HH:mm:SS} %c{2} %p %m". The format specifiers
> indicate that each log line should have the date and time followed by the logger name followed
> by the logging level or priority followed by the application generated message.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun  1 11:27:25 2006
Return-Path: 
 <hadoop-dev-return-1803-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 70978 invoked from network); 1 Jun 2006 11:27:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 11:27:25 -0000
Received: (qmail 50205 invoked by uid 500); 1 Jun 2006 11:27:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 50069 invoked by uid 500); 1 Jun 2006 11:27:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 50060 invoked by uid 99); 1 Jun 2006 11:27:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 04:27:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 04:27:23 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 29CDB7142A2
	for <hadoop-dev@lucene.apache.org>; Thu,  1 Jun 2006 11:26:31 +0000 (GMT)
Message-ID: <2833068.1149161191168.JavaMail.jira@brutus>
Date: Thu, 1 Jun 2006 11:26:31 +0000 (GMT+00:00)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-211) logging improvements for Hadoop
In-Reply-To: <11693488.1147389488398.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-211?page=comments#action_12414220 ] 

Arun C Murthy commented on HADOOP-211:
--------------------------------------

Minor point: we will need commons-logging-1.0.4.jar and log4j-1.*.*.jar in lib/

thanks,
Arun

> logging improvements for Hadoop
> -------------------------------
>
>          Key: HADOOP-211
>          URL: http://issues.apache.org/jira/browse/HADOOP-211
>      Project: Hadoop
>         Type: Improvement

>     Versions: 0.2
>     Reporter: Sameer Paranjpye
>     Assignee: Sameer Paranjpye
>     Priority: Minor
>      Fix For: 0.3
>  Attachments: acl-log4j-II.patch.tgz, acl-log4j.patch, commons_logging_patch
>
> Here's a proposal for some impovements to the way Hadoop does logging. It advocates 3 
> broad changes to the way logging is currently done, these being:
> - The use of a uniform logging format by all Hadoop subsystems
> - The use of Apache commons logging as a facade above an underlying logging framework
> - The use of Log4J as the underlying logging framework instead of java.util.logging
> This is largely polishing work, but it seems like it would make log analysis and debugging
> easier in the short term. In the long term, it would future proof logging to the extent of
> allowing the logging framework used to change while requiring minimal code change. The 
> propos changes are motivated by the following requirements which we think Hadoops 
> logging should meet:
> - Hadoops logs should be amenable to analysis by tools like grep, sed, awk etc.
> - Log entries should be clearly annotated with a timestamp and a logging level
> - Log entries should be traceable to the subsystem from which they originated
> - The logging implementation should allow log entries to be annotated with source code 
> location information like classname, methodname, file and line number, without requiring
> code changes
> - It should be possible to change the logging implementation used without having to change
> thousands of lines of code
> - The mapping of loggers to destinations (files, directories, servers etc.) should be 
> specified and modifiable via configuration
> Uniform logging format:
> All Hadoop logs should have the following structure.
> <Header>\n
> <LogEntry>\n [<Exception>\n]
> .
> .
> .
> where the header line specifies the format of each log entry. The header line has the format:
> '# <Fieldname> <Fieldname>...\n'. 
> The default format of each log entry is: '# Timestamp Level LoggerName Message', where:
> - Timestamp is a date and time in the format MM/DD/YYYY:HH:MM:SS
> - Level is the logging level (FATAL, WARN, DEBUG, TRACE, etc.)
> - LoggerName is the short name of the logging subsystem from which the message originated e.g.
> fs.FSNamesystem, dfs.Datanode etc.
> - Message is the log message produced
> Why Apache commons logging and Log4J?
> Apache commons logging is a facade meant to be used as a wrapper around an underlying logging
> implementation. Bridges from Apache commons logging to popular logging implementations 
> (Java logging, Log4J, Avalon etc.) are implemented and available as part of the commons logging
> distribution. Implementing a bridge to an unsupported implementation is fairly striaghtforward
> and involves the implementation of subclasses of the commons logging LogFactory and Logger 
> classes. Using Apache commons logging and making all logging calls through it enables us to
> move to a different logging implementation by simply changing configuration in the best case.
> Even otherwise, it incurs minimal code churn overhead.
> Log4J offers a few benefits over java.util.logging that make it a more desirable choice for the
> logging back end.
> - Configuration Flexibility: The mapping of loggers to destinations (files, sockets etc.)
> can be completely specified in configuration. It is possible to do this with Java logging as
> well, however, configuration is a lot more restrictive. For instance, with Java logging all 
> log files must have names derived from the same pattern. For the namenode, log files could 
> be named with the pattern "%h/namenode%u.log" which would put log files in the user.home
> directory with names like namenode0.log etc. With Log4J it would be possible to configure
> the namenode to emit log files with different names, say heartbeats.log, namespace.log,
> clients.log etc. Configuration variables in Log4J can also have the values of system 
> properties embedded in them.
> - Takes wrappers into account: Log4J takes into account the possibility that an application
> may be invoking it via a wrapper, such as Apache commons logging. This is important because
> logging event objects must be able to infer the context of the logging call such as classname,
> methodname etc. Inferring context is a relatively expensive operation that involves creating
> an exception and examining the stack trace to find the frame just before the first frame 
> of the logging framework. It is therefore done lazily only when this information actually 
> needs to be logged. Log4J can be instructed to look for the frame corresponding to the wrapper
> class, Java logging cannot. In the case of Java logging this means that a) the bridge from 
> Apache commons logging is responsible for inferring the calling context and setting it in the 
> logging event and b) this inference has to be done on every logging call regardless of whether
> or not it is needed.
> - More handy features: Log4J has some handy features that Java logging doesn't. A couple
> of examples of these:
> a) Date based rolling of log files 
> b) Format control through configuration. Log4J has a PatternLayout class that can be 
> configured to generate logs with a user specified pattern. The logging format described
> above can be described as "%d{MM/dd/yyyy:HH:mm:SS} %c{2} %p %m". The format specifiers
> indicate that each log line should have the date and time followed by the logger name followed
> by the logging level or priority followed by the application generated message.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun  1 12:06:43 2006
Return-Path: 
 <hadoop-dev-return-1804-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 81393 invoked from network); 1 Jun 2006 12:06:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 12:06:43 -0000
Received: (qmail 10558 invoked by uid 500); 1 Jun 2006 12:06:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 10539 invoked by uid 500); 1 Jun 2006 12:06:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 10530 invoked by uid 99); 1 Jun 2006 12:06:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 05:06:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [80.64.182.137] (HELO mslinux.media-style.com) (80.64.182.137)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 05:06:40 -0700
Received: from localhost (localhost [127.0.0.1])
	by mslinux.media-style.com (Postfix) with ESMTP id A67C3144637
	for <hadoop-dev@lucene.apache.org>; Thu,  1 Jun 2006 13:44:07 +0200 (CEST)
Received: from mslinux.media-style.com ([127.0.0.1])
	by localhost (mslinux.media-style.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 26820-10 for <hadoop-dev@lucene.apache.org>;
	Thu, 1 Jun 2006 13:44:07 +0200 (CEST)
Received: from [192.168.200.39] (unknown [80.64.182.137])
	by mslinux.media-style.com (Postfix) with ESMTP id 7CB05144602
	for <hadoop-dev@lucene.apache.org>; Thu,  1 Jun 2006 13:44:07 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v750)
Content-Transfer-Encoding: 7bit
Message-Id: <E2B1FAF6-6ECB-41EC-A3FD-47F7C57BA476@media-style.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: hadoop-dev@lucene.apache.org
From: Stefan Groschupf <sg@media-style.com>
Subject: silly question: why http for map  output?
Date: Thu, 1 Jun 2006 14:06:17 +0200
X-Mailer: Apple Mail (2.750)
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at media-style.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Owen, Hi All,

a silly question, please give me some glue.
Why  we use now http for mapoutput transfer instead of tcp or the dfs  
itself?
Sorry but the issue HADOOP-254 doesn't give very much information  
just that it is faster, what surprise me a little bit.


Thanks.
Stefan






From MAILER-DAEMON Thu Jun  1 15:44:48 2006
Return-Path: 
 <hadoop-dev-return-1805-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 88371 invoked from network); 1 Jun 2006 15:44:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 15:44:48 -0000
Received: (qmail 60996 invoked by uid 500); 1 Jun 2006 15:44:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 60964 invoked by uid 500); 1 Jun 2006 15:44:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 60955 invoked by uid 99); 1 Jun 2006 15:44:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 08:44:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of sutter@gmail.com designates
 64.233.162.204 as permitted sender)
Received: from [64.233.162.204] (HELO nz-out-0102.google.com) (64.233.162.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 08:44:45 -0700
Received: by nz-out-0102.google.com with SMTP id 13so312661nzp
        for <hadoop-dev@lucene.apache.org>;
 Thu, 01 Jun 2006 08:44:25 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=RYTFpsidnbMA9F4U9A2ZXp7joJ3SKHhcgFM9lIBzPk6GYL49df7O43nBODGKwY5zkxGXIU9e/8oG1SUVG4ry7ZgvMnqWYxb3IeSNZHmWhR6QKXmGt9ArlJaoSRomixSqgVsAfy3avs3Kal02vGUjcD4gYa3ewDPWaFbYQ2eC/ck=
Received: by 10.37.20.73 with SMTP id x73mr1153526nzi;
        Thu, 01 Jun 2006 08:44:25 -0700 (PDT)
Received: by 10.36.128.1 with HTTP; Thu, 1 Jun 2006 08:44:25 -0700 (PDT)
Message-ID: <e1d10fc00606010844g20e50c52n8d3d44cf7d938417@mail.gmail.com>
Date: Thu, 1 Jun 2006 08:44:25 -0700
From: "Paul Sutter" <sutter@gmail.com>
To: hadoop-dev@lucene.apache.org
Subject: Re: silly question: why http for map output?
In-Reply-To: <E2B1FAF6-6ECB-41EC-A3FD-47F7C57BA476@media-style.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_Part_2777_10104289.1149176665092"
References: <E2B1FAF6-6ECB-41EC-A3FD-47F7C57BA476@media-style.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_2777_10104289.1149176665092
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Stefan,

The mapoutput files are not located in DFS, they are on the local disks of
the mapper that creates them, avoiding the 3X replication overhead of DFS.

Previously, the files were transferred using the RPC mechanism built for
status updates among the nodes. This mechanism multiplexed multiple RPCs
through a single TCP connection, and there were various logjams within it.

The most straightforward fix was to use HTTP instead of trying to resolve
the logjam(s). Its a quick solution to a problem that was really a
bottleneck for some of us.

Do you see a drawback to HTTP?

Paul

On 6/1/06, Stefan Groschupf <sg@media-style.com> wrote:
>
> Hi Owen, Hi All,
>
> a silly question, please give me some glue.
> Why  we use now http for mapoutput transfer instead of tcp or the dfs
> itself?
> Sorry but the issue HADOOP-254 doesn't give very much information
> just that it is faster, what surprise me a little bit.
>
>
> Thanks.
> Stefan
>
>
>
>
>
>

------=_Part_2777_10104289.1149176665092--

From MAILER-DAEMON Thu Jun  1 15:55:47 2006
Return-Path: 
 <hadoop-dev-return-1806-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92324 invoked from network); 1 Jun 2006 15:55:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 15:55:47 -0000
Received: (qmail 75179 invoked by uid 500); 1 Jun 2006 15:55:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75154 invoked by uid 500); 1 Jun 2006 15:55:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75145 invoked by uid 99); 1 Jun 2006 15:55:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 08:55:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [80.64.182.137] (HELO mslinux.media-style.com) (80.64.182.137)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 08:55:45 -0700
Received: from localhost (localhost [127.0.0.1])
	by mslinux.media-style.com (Postfix) with ESMTP id EDF8614463C
	for <hadoop-dev@lucene.apache.org>; Thu,  1 Jun 2006 17:33:09 +0200 (CEST)
Received: from mslinux.media-style.com ([127.0.0.1])
	by localhost (mslinux.media-style.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 28278-09 for <hadoop-dev@lucene.apache.org>;
	Thu, 1 Jun 2006 17:33:09 +0200 (CEST)
Received: from [192.168.0.141] (unknown [80.64.182.137])
	by mslinux.media-style.com (Postfix) with ESMTP id B9915144637
	for <hadoop-dev@lucene.apache.org>; Thu,  1 Jun 2006 17:33:09 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v750)
In-Reply-To: <e1d10fc00606010844g20e50c52n8d3d44cf7d938417@mail.gmail.com>
References: <E2B1FAF6-6ECB-41EC-A3FD-47F7C57BA476@media-style.com>
 <e1d10fc00606010844g20e50c52n8d3d44cf7d938417@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <FDF27972-9186-4219-871D-C77655D530A3@media-style.com>
Content-Transfer-Encoding: 7bit
From: Stefan Groschupf <sg@media-style.com>
Subject: Re: silly question: why http for map output?
Date: Thu, 1 Jun 2006 17:55:20 +0200
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.750)
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at media-style.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> The mapoutput files are not located in DFS, they are on the local  
> disks of
> the mapper that creates them, avoiding the 3X replication overhead  
> of DFS.
Wasn't there an issue to allow defining replication on a file based  
level?

>
> Previously, the files were transferred using the RPC mechanism  
> built for
> status updates among the nodes. This mechanism multiplexed multiple  
> RPCs
> through a single TCP connection, and there were various logjams  
> within it.

That it was I was missing. What logjams are solved by http that  
occurs with tcp?

>
> The most straightforward fix was to use HTTP instead of trying to  
> resolve
> the logjam(s). Its a quick solution to a problem that was really a
> bottleneck for some of us.
>
> Do you see a drawback to HTTP?

Well, just wondering, since the idea of http is not really  
transferring large binary files.
I understand that this is a quick fix, but add a new mechanism how  
hadoop transfer data (rpc, dfs, http) surprise me.


Thanks,
Stefan

>
> Paul
>
> On 6/1/06, Stefan Groschupf <sg@media-style.com> wrote:
>>
>> Hi Owen, Hi All,
>>
>> a silly question, please give me some glue.
>> Why  we use now http for mapoutput transfer instead of tcp or the dfs
>> itself?
>> Sorry but the issue HADOOP-254 doesn't give very much information
>> just that it is faster, what surprise me a little bit.
>>
>>
>> Thanks.
>> Stefan
>>
>>
>>
>>
>>
>>


From MAILER-DAEMON Thu Jun  1 16:06:53 2006
Return-Path: 
 <hadoop-dev-return-1807-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96372 invoked from network); 1 Jun 2006 16:06:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 16:06:53 -0000
Received: (qmail 2909 invoked by uid 500); 1 Jun 2006 16:06:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 2889 invoked by uid 500); 1 Jun 2006 16:06:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 2880 invoked by uid 99); 1 Jun 2006 16:06:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 09:06:52 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.145.54.173] (HELO mrout3.yahoo.com) (216.145.54.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 09:06:51 -0700
Received: from [207.126.231.161] (oom-mac.corp.yahoo.com [207.126.231.161])
	by mrout3.yahoo.com (8.13.6/8.13.4/y.out) with ESMTP id k51G4Yvm015072
	for <hadoop-dev@lucene.apache.org>; Thu, 1 Jun 2006 09:04:34 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=0MMCbgrwrp+X62AEPoim5yxwU/3AdF5/jRlC94BfDZ3tidSQrspU0y8sxOETwr4D
Mime-Version: 1.0 (Apple Message framework v624)
In-Reply-To: <E2B1FAF6-6ECB-41EC-A3FD-47F7C57BA476@media-style.com>
References: <E2B1FAF6-6ECB-41EC-A3FD-47F7C57BA476@media-style.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <5676a0367afb3d5ce89799977df961ef@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: "Owen O'Malley" <owen@yahoo-inc.com>
Subject: Re: silly question: why http for map  output?
Date: Thu, 1 Jun 2006 09:04:57 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.624)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 1, 2006, at 5:06 AM, Stefan Groschupf wrote:

> Hi Owen, Hi All,
>
> a silly question, please give me some glue.
> Why  we use now http for mapoutput transfer instead of tcp or the dfs 
> itself?
> Sorry but the issue HADOOP-254 doesn't give very much information just 
> that it is faster, what surprise me a little bit.

It is a good question. My first thought was to use a mini-ftp server, 
but http was fast, standard, and desired for the task trackers anyways. 
Once you have jetty running in the task tracker, it was by far the 
easiest way to get the new protocol up and running smoothly.

In terms of DFS, it should be doable, but the performance would suffer. 
You could make it better by setting the replication on the files to 1 
to minimize the costs of the replication. But there are a lot (M*R) of 
little files that are flying around the system. Little files really 
aren't the space where DFS shines. For my 200 node sorter, I'm running 
with 16080*700=11,256,000. Clearly there are changes to the framework 
such as writing a single file from each map that is partitioned by 
reduce that would help, but we don't have those yet.

-- Owen


From MAILER-DAEMON Thu Jun  1 16:39:59 2006
Return-Path: 
 <hadoop-dev-return-1808-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8492 invoked from network); 1 Jun 2006 16:39:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 16:39:59 -0000
Received: (qmail 71295 invoked by uid 500); 1 Jun 2006 16:39:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 71262 invoked by uid 500); 1 Jun 2006 16:39:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 71252 invoked by uid 99); 1 Jun 2006 16:39:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 09:39:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of sutter@gmail.com designates
 64.233.162.203 as permitted sender)
Received: from [64.233.162.203] (HELO nz-out-0102.google.com) (64.233.162.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 09:39:57 -0700
Received: by nz-out-0102.google.com with SMTP id 13so325117nzp
        for <hadoop-dev@lucene.apache.org>;
 Thu, 01 Jun 2006 09:39:36 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=pzIuEuLBLI5ujguFq+FBZV2kQqn5wOpt/9hsydfNiHPhENTAyd9M4ZWwS5d4Yz4ade/6SlbmDZYhvW7hlfYyaMiXq9YNXQaeX9teHr9hUrUwBhqMEp8Jrernp4H5cS+Rb7FEV0gs4nxzK7flejhy4Txy5VjXUZhzz0/RIjnfzl8=
Received: by 10.36.250.71 with SMTP id x71mr1186551nzh;
        Thu, 01 Jun 2006 09:39:36 -0700 (PDT)
Received: by 10.36.128.1 with HTTP; Thu, 1 Jun 2006 09:39:36 -0700 (PDT)
Message-ID: <e1d10fc00606010939k387a8346qc95bbd04d014f4de@mail.gmail.com>
Date: Thu, 1 Jun 2006 09:39:36 -0700
From: "Paul Sutter" <sutter@gmail.com>
To: hadoop-dev@lucene.apache.org
Subject: Re: silly question: why http for map output?
In-Reply-To: <FDF27972-9186-4219-871D-C77655D530A3@media-style.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_Part_3650_4620045.1149179976238"
References: <E2B1FAF6-6ECB-41EC-A3FD-47F7C57BA476@media-style.com>
	 <e1d10fc00606010844g20e50c52n8d3d44cf7d938417@mail.gmail.com>
	 <FDF27972-9186-4219-871D-C77655D530A3@media-style.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_3650_4620045.1149179976238
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Stefan

The logjams were not TCP-related, they were in the Hadoop RPC code, and had
to do with the way multiple requests were multiplexed over a single socket.

I dont think there is anything about HTTP that makes it better or worse for
binary files.

Paul

On 6/1/06, Stefan Groschupf <sg@media-style.com> wrote:
>
> > The mapoutput files are not located in DFS, they are on the local
> > disks of
> > the mapper that creates them, avoiding the 3X replication overhead
> > of DFS.
> Wasn't there an issue to allow defining replication on a file based
> level?
>
> >
> > Previously, the files were transferred using the RPC mechanism
> > built for
> > status updates among the nodes. This mechanism multiplexed multiple
> > RPCs
> > through a single TCP connection, and there were various logjams
> > within it.
>
> That it was I was missing. What logjams are solved by http that
> occurs with tcp?
>
> >
> > The most straightforward fix was to use HTTP instead of trying to
> > resolve
> > the logjam(s). Its a quick solution to a problem that was really a
> > bottleneck for some of us.
> >
> > Do you see a drawback to HTTP?
>
> Well, just wondering, since the idea of http is not really
> transferring large binary files.
> I understand that this is a quick fix, but add a new mechanism how
> hadoop transfer data (rpc, dfs, http) surprise me.
>
>
> Thanks,
> Stefan
>
> >
> > Paul
> >
> > On 6/1/06, Stefan Groschupf <sg@media-style.com> wrote:
> >>
> >> Hi Owen, Hi All,
> >>
> >> a silly question, please give me some glue.
> >> Why  we use now http for mapoutput transfer instead of tcp or the dfs
> >> itself?
> >> Sorry but the issue HADOOP-254 doesn't give very much information
> >> just that it is faster, what surprise me a little bit.
> >>
> >>
> >> Thanks.
> >> Stefan
> >>
> >>
> >>
> >>
> >>
> >>
>
>

------=_Part_3650_4620045.1149179976238--

From MAILER-DAEMON Thu Jun  1 17:43:20 2006
Return-Path: 
 <hadoop-dev-return-1809-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 28045 invoked from network); 1 Jun 2006 17:43:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 17:43:20 -0000
Received: (qmail 85389 invoked by uid 500); 1 Jun 2006 17:43:19 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 85365 invoked by uid 500); 1 Jun 2006 17:43:19 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 85356 invoked by uid 99); 1 Jun 2006 17:43:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 10:43:19 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.145.54.171] (HELO mrout1.yahoo.com) (216.145.54.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 10:43:18 -0700
Received: from SNV-XCHMAIL.xch.corp.yahoo.com (snv-xch1.xch.corp.yahoo.com
 [216.145.51.233])
	by mrout1.yahoo.com (8.13.6/8.13.4/y.out) with ESMTP id k51Hexi6014942
	for <hadoop-dev@lucene.apache.org>; Thu, 1 Jun 2006 10:40:59 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=received:mime-version:in-reply-to:references:content-type:
	message-id:content-transfer-encoding:from:subject:date:to:x-mailer:
	return-path:x-originalarrivaltime;
	b=JCsaq3cnkvTDWe9v/9mJXCmOdPVgTQWRykDBSmjzFtSb92HSLwwzAYHl987+WjmA
Received: from [172.21.147.237] ([172.21.179.132]) by
 SNV-XCHMAIL.xch.corp.yahoo.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Thu, 1 Jun 2006 10:40:59 -0700
Mime-Version: 1.0 (Apple Message framework v750)
In-Reply-To: <e1d10fc00606010939k387a8346qc95bbd04d014f4de@mail.gmail.com>
References: <E2B1FAF6-6ECB-41EC-A3FD-47F7C57BA476@media-style.com>
 <e1d10fc00606010844g20e50c52n8d3d44cf7d938417@mail.gmail.com>
 <FDF27972-9186-4219-871D-C77655D530A3@media-style.com>
 <e1d10fc00606010939k387a8346qc95bbd04d014f4de@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <82140851-740F-4D0A-B235-1FEDA79CC94B@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Eric Baldeschwieler <eric14@yahoo-inc.com>
Subject: Re: silly question: why http for map output?
Date: Thu, 1 Jun 2006 10:40:57 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.750)
X-OriginalArrivalTime: 01 Jun 2006 17:40:59.0173 (UTC)
 FILETIME=[8B1C6D50:01C685A2]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

It's well tested on large binary files!

On Jun 1, 2006, at 9:39 AM, Paul Sutter wrote:

> Stefan
>
> The logjams were not TCP-related, they were in the Hadoop RPC code,  
> and had
> to do with the way multiple requests were multiplexed over a single  
> socket.
>
> I dont think there is anything about HTTP that makes it better or  
> worse for
> binary files.
>
> Paul
>
> On 6/1/06, Stefan Groschupf <sg@media-style.com> wrote:
>>
>> > The mapoutput files are not located in DFS, they are on the local
>> > disks of
>> > the mapper that creates them, avoiding the 3X replication overhead
>> > of DFS.
>> Wasn't there an issue to allow defining replication on a file based
>> level?
>>
>> >
>> > Previously, the files were transferred using the RPC mechanism
>> > built for
>> > status updates among the nodes. This mechanism multiplexed multiple
>> > RPCs
>> > through a single TCP connection, and there were various logjams
>> > within it.
>>
>> That it was I was missing. What logjams are solved by http that
>> occurs with tcp?
>>
>> >
>> > The most straightforward fix was to use HTTP instead of trying to
>> > resolve
>> > the logjam(s). Its a quick solution to a problem that was really a
>> > bottleneck for some of us.
>> >
>> > Do you see a drawback to HTTP?
>>
>> Well, just wondering, since the idea of http is not really
>> transferring large binary files.
>> I understand that this is a quick fix, but add a new mechanism how
>> hadoop transfer data (rpc, dfs, http) surprise me.
>>
>>
>> Thanks,
>> Stefan
>>
>> >
>> > Paul
>> >
>> > On 6/1/06, Stefan Groschupf <sg@media-style.com> wrote:
>> >>
>> >> Hi Owen, Hi All,
>> >>
>> >> a silly question, please give me some glue.
>> >> Why  we use now http for mapoutput transfer instead of tcp or  
>> the dfs
>> >> itself?
>> >> Sorry but the issue HADOOP-254 doesn't give very much information
>> >> just that it is faster, what surprise me a little bit.
>> >>
>> >>
>> >> Thanks.
>> >> Stefan
>> >>
>> >>
>> >>
>> >>
>> >>
>> >>
>>
>>


From MAILER-DAEMON Thu Jun  1 17:57:26 2006
Return-Path: 
 <hadoop-dev-return-1810-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33102 invoked from network); 1 Jun 2006 17:57:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 17:57:26 -0000
Received: (qmail 8377 invoked by uid 500); 1 Jun 2006 17:57:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 8334 invoked by uid 500); 1 Jun 2006 17:57:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 8301 invoked by uid 99); 1 Jun 2006 17:57:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 10:57:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 10:57:23 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 143A97142B7
	for <hadoop-dev@lucene.apache.org>; Thu,  1 Jun 2006 17:56:31 +0000 (GMT)
Message-ID: <1250167.1149184591080.JavaMail.jira@brutus>
Date: Thu, 1 Jun 2006 17:56:31 +0000 (GMT+00:00)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-123) mini map/reduce cluster for junit
 tests
In-Reply-To: <927904038.1144348524414.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-123?page=all ]

Sameer Paranjpye reassigned HADOOP-123:
---------------------------------------

    Assign To: Mahadev konar  (was: Owen O'Malley)

> mini map/reduce cluster for junit tests
> ---------------------------------------
>
>          Key: HADOOP-123
>          URL: http://issues.apache.org/jira/browse/HADOOP-123
>      Project: Hadoop
>         Type: New Feature

>   Components: mapred
>     Versions: 0.3
>     Reporter: Owen O'Malley
>     Assignee: Mahadev konar
>      Fix For: 0.4

>
> I would like a single process map-reduce pseduo-distributed cluster that can be used for unit tests. We should add a unit test with a word count map/reduce.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun  1 18:07:28 2006
Return-Path: 
 <hadoop-dev-return-1811-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37712 invoked from network); 1 Jun 2006 18:07:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 18:07:28 -0000
Received: (qmail 27213 invoked by uid 500); 1 Jun 2006 18:07:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 27079 invoked by uid 500); 1 Jun 2006 18:07:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 27053 invoked by uid 99); 1 Jun 2006 18:07:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 11:07:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of bpendleton@gmail.com designates
 66.249.82.194 as permitted sender)
Received: from [66.249.82.194] (HELO wx-out-0102.google.com) (66.249.82.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 11:07:26 -0700
Received: by wx-out-0102.google.com with SMTP id s16so236519wxc
        for <hadoop-dev@lucene.apache.org>;
 Thu, 01 Jun 2006 11:07:06 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=DNll+HT7pyivVyAVfajjatFaSpGcvUA+Hm47y2CkqHmtJr9k6ePSq1uVeUaCfsOOMNgo7AmfFg25mVyM+Yxh1TKP2B0mUKuEpRXlqCB7YeqkXArEIko9zElUNK70nIRBZ07RKbpxEha7kBBX59kpyKYHYo2A1CKNi67KajoPQgU=
Received: by 10.70.50.19 with SMTP id x19mr1000907wxx;
        Thu, 01 Jun 2006 11:07:05 -0700 (PDT)
Received: by 10.85.11.13 with HTTP; Thu, 1 Jun 2006 11:07:05 -0700 (PDT)
Message-ID: <1bf79d3e0606011107k585397cbo99aaea8722bbe101@mail.gmail.com>
Date: Thu, 1 Jun 2006 11:07:05 -0700
From: "Bryan A. Pendleton" <bp@geekdom.net>
Sender: bpendleton@gmail.com
To: hadoop-dev@lucene.apache.org
Subject: Re: silly question: why http for map output?
In-Reply-To: <FDF27972-9186-4219-871D-C77655D530A3@media-style.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_Part_7691_18413342.1149185225010"
References: <E2B1FAF6-6ECB-41EC-A3FD-47F7C57BA476@media-style.com>
	 <e1d10fc00606010844g20e50c52n8d3d44cf7d938417@mail.gmail.com>
	 <FDF27972-9186-4219-871D-C77655D530A3@media-style.com>
X-Google-Sender-Auth: 9be563a2242fdb94
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_7691_18413342.1149185225010
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On 6/1/06, Stefan Groschupf <sg@media-style.com> wrote:
>
> The mapoutput files are not located in DFS, they are on the local disks of
> the mapper that creates them, avoiding the 3X replication overhead of DFS.
>
> Wasn't there an issue to allow defining replication on a file based
> level?



You *could* replicate once over using the current DFS. You probably wouldn't
want to, though: since the current mode of DFS is to chop files up into
blocks, and distribute the blocks in a uniform way across all nodes - you'd
be copying the output of a map across all nodes. This means that a *second*
copy would need to be made (from each of the destinations of the block in
DFS, to the reducer node), doubling the number of times that the block has
to be transferred across the network. And, if a single block gets lost
(remember, your 1x copy is getting distributed across all nodes, including
the possible less-reliable ones, and there are no dups), then you have to
re-run the map.

Plus, right now there's nothing enforcing that tasktracker nodes will always
be running a datanode...

-- 
Bryan A. Pendleton
Ph: (877) geek-1-bp

------=_Part_7691_18413342.1149185225010--

From MAILER-DAEMON Thu Jun  1 18:12:26 2006
Return-Path: 
 <hadoop-dev-return-1812-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40315 invoked from network); 1 Jun 2006 18:12:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 18:12:26 -0000
Received: (qmail 38496 invoked by uid 500); 1 Jun 2006 18:12:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38471 invoked by uid 500); 1 Jun 2006 18:12:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38462 invoked by uid 99); 1 Jun 2006 18:12:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 11:12:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 11:12:24 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E26137142B7
	for <hadoop-dev@lucene.apache.org>; Thu,  1 Jun 2006 18:11:31 +0000 (GMT)
Message-ID: <25818285.1149185491924.JavaMail.jira@brutus>
Date: Thu, 1 Jun 2006 18:11:31 +0000 (GMT+00:00)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-123) mini map/reduce cluster for junit
 tests
In-Reply-To: <927904038.1144348524414.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-123?page=all ]

Milind Bhandarkar reassigned HADOOP-123:
----------------------------------------

    Assign To: Milind Bhandarkar  (was: Mahadev konar)

> mini map/reduce cluster for junit tests
> ---------------------------------------
>
>          Key: HADOOP-123
>          URL: http://issues.apache.org/jira/browse/HADOOP-123
>      Project: Hadoop
>         Type: New Feature

>   Components: mapred
>     Versions: 0.3
>     Reporter: Owen O'Malley
>     Assignee: Milind Bhandarkar
>      Fix For: 0.4

>
> I would like a single process map-reduce pseduo-distributed cluster that can be used for unit tests. We should add a unit test with a word count map/reduce.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun  1 18:14:24 2006
Return-Path: 
 <hadoop-dev-return-1813-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 42100 invoked from network); 1 Jun 2006 18:14:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 18:14:24 -0000
Received: (qmail 45941 invoked by uid 500); 1 Jun 2006 18:14:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 45917 invoked by uid 500); 1 Jun 2006 18:14:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 45908 invoked by uid 99); 1 Jun 2006 18:14:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 11:14:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 11:14:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C89B97142A1
	for <hadoop-dev@lucene.apache.org>; Thu,  1 Jun 2006 18:13:29 +0000 (GMT)
Message-ID: <13624142.1149185609819.JavaMail.jira@brutus>
Date: Thu, 1 Jun 2006 18:13:29 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-268) TaskTracker latency is slowing down
 maps because progress reporting is done inline
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

TaskTracker latency is slowing down maps because progress reporting is done inline
----------------------------------------------------------------------------------

         Key: HADOOP-268
         URL: http://issues.apache.org/jira/browse/HADOOP-268
     Project: Hadoop
        Type: Improvement

  Components: mapred  
    Versions: 0.2.1    
    Reporter: Owen O'Malley
 Assigned to: Sameer Paranjpye 
     Fix For: 0.4


Moving the progress reporter to a separate thread should free up the user application to run faster.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun  1 18:42:28 2006
Return-Path: 
 <hadoop-dev-return-1814-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51722 invoked from network); 1 Jun 2006 18:42:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 18:42:28 -0000
Received: (qmail 95914 invoked by uid 500); 1 Jun 2006 18:42:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95854 invoked by uid 500); 1 Jun 2006 18:42:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95778 invoked by uid 99); 1 Jun 2006 18:42:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 11:42:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 11:42:25 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 201C47141F4
	for <hadoop-dev@lucene.apache.org>; Thu,  1 Jun 2006 18:41:32 +0000 (GMT)
Message-ID: <8136041.1149187292128.JavaMail.jira@brutus>
Date: Thu, 1 Jun 2006 18:41:32 +0000 (GMT+00:00)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-217) IllegalAcessException when creating
 a Block object via WritableFactories
In-Reply-To: <1616267.1147481890143.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-217?page=comments#action_12414274 ] 

Hairong Kuang commented on HADOOP-217:
--------------------------------------

The exception occurs when we restart dfs after the namenode is reformated. The namenode starts as an empty file system so the Block class is loaded. When the name node receives block reports containing blocks from the previous file system, it throws the exception.

To avoid this, we can either make the Block class public or explicitly load the class in NameNode.

> IllegalAcessException when creating a Block object via WritableFactories
> ------------------------------------------------------------------------
>
>          Key: HADOOP-217
>          URL: http://issues.apache.org/jira/browse/HADOOP-217
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.3
>     Reporter: Hairong Kuang
>     Assignee: Hairong Kuang
>      Fix For: 0.4
>  Attachments: access.patch
>
> When I ran the dfs namenode, I received an error message listed below. Changing Block class to be public will be able to fix the problem.
> java.lang.RuntimeException: java.lang.IllegalAccessException: Class org.apache.hadoop.io.WritableFactories can not access a member of class org.apache.hadoop.dfs.Block with modifiers "public"
> java.lang.RuntimeException: java.lang.IllegalAccessException: Class org.apache.hadoop.io.WritableFactories can not access a member of class org.apache.hadoop.dfs.Block with modifiers "public"
>         at org.apache.hadoop.io.WritableFactories.newInstance(WritableFactories.java:49)
>         at org.apache.hadoop.io.ObjectWritable.readObject(ObjectWritable.java:226)
>         at org.apache.hadoop.io.ObjectWritable.readObject(ObjectWritable.java:163)
>         at org.apache.hadoop.io.ObjectWritable.readObject(ObjectWritable.java:211)
>         at org.apache.hadoop.ipc.RPC$Invocation.readFields(RPC.java:88)
>         at org.apache.hadoop.ipc.Server$Connection.run(Server.java:154)
> Caused by: java.lang.IllegalAccessException: Class org.apache.hadoop.io.WritableFactories can not access a member of class org.apache.hadoop.dfs.Block with modifiers "public"
>         at sun.reflect.Reflection.ensureMemberAccess(Reflection.java:65)
>         at java.lang.Class.newInstance0(Class.java:344)
>         at java.lang.Class.newInstance(Class.java:303)
>         at org.apache.hadoop.io.WritableFactories.newInstance(WritableFactories.java:45)
>         ... 5 more

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun  1 18:53:24 2006
Return-Path: 
 <hadoop-dev-return-1815-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57355 invoked from network); 1 Jun 2006 18:53:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 18:53:24 -0000
Received: (qmail 22044 invoked by uid 500); 1 Jun 2006 18:53:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 22022 invoked by uid 500); 1 Jun 2006 18:53:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22013 invoked by uid 99); 1 Jun 2006 18:53:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 11:53:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 11:53:23 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A02D87141F4
	for <hadoop-dev@lucene.apache.org>; Thu,  1 Jun 2006 18:52:30 +0000 (GMT)
Message-ID: <9926303.1149187950653.JavaMail.jira@brutus>
Date: Thu, 1 Jun 2006 18:52:30 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-264) WritableFactory has no permissions to
 create DatanodeRegistration
In-Reply-To: <15795140.1149117510008.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-264?page=all ]

Owen O'Malley updated HADOOP-264:
---------------------------------

    Attachment: fix-datanode-registration-perm-2.patch

Here is a patch that matches the standard idiom.

> WritableFactory has no permissions to create DatanodeRegistration
> -----------------------------------------------------------------
>
>          Key: HADOOP-264
>          URL: http://issues.apache.org/jira/browse/HADOOP-264
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.3
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>     Priority: Blocker
>      Fix For: 0.3
>  Attachments: PublicDatanodeRegistration.patch, fix-datanode-registration-perm-2.patch, fix-datanode-registration-perm.patch
>
> The datanode can not come up because the DatanodeRegistration is package local and the factory registration doesn't happen.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun  1 19:05:26 2006
Return-Path: 
 <hadoop-dev-return-1816-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 65625 invoked from network); 1 Jun 2006 19:05:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 19:05:26 -0000
Received: (qmail 43399 invoked by uid 500); 1 Jun 2006 19:05:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 43373 invoked by uid 500); 1 Jun 2006 19:05:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 43364 invoked by uid 99); 1 Jun 2006 19:05:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 12:05:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 12:05:25 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BEF6E7141F4
	for <hadoop-dev@lucene.apache.org>; Thu,  1 Jun 2006 19:04:29 +0000 (GMT)
Message-ID: <21882133.1149188669764.JavaMail.jira@brutus>
Date: Thu, 1 Jun 2006 19:04:29 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-269) add FAQ to Wiki
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

add FAQ to Wiki
---------------

         Key: HADOOP-269
         URL: http://issues.apache.org/jira/browse/HADOOP-269
     Project: Hadoop
        Type: Improvement

  Components: documentation  
    Reporter: Doug Cutting
 Assigned to: Doug Cutting 
     Fix For: 0.4


Hadoop should have an FAQ in the Wiki.  We can bootstrap this by reviewing the mailing list archives.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun  1 19:54:27 2006
Return-Path: 
 <hadoop-dev-return-1817-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 95666 invoked from network); 1 Jun 2006 19:54:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 19:54:27 -0000
Received: (qmail 14404 invoked by uid 500); 1 Jun 2006 19:54:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14375 invoked by uid 500); 1 Jun 2006 19:54:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 14366 invoked by uid 99); 1 Jun 2006 19:54:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 12:54:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 12:54:23 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 926627141ED
	for <hadoop-dev@lucene.apache.org>; Thu,  1 Jun 2006 19:53:30 +0000 (GMT)
Message-ID: <8214512.1149191610596.JavaMail.jira@brutus>
Date: Thu, 1 Jun 2006 19:53:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-259) map output http client does not
 timeout
In-Reply-To: <30473871.1148883389827.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-259?page=all ]
     
Doug Cutting resolved HADOOP-259:
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Owen!

> map output http client does not timeout
> ---------------------------------------
>
>          Key: HADOOP-259
>          URL: http://issues.apache.org/jira/browse/HADOOP-259
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.3
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.3
>  Attachments: http-client-timeout-2.patch, http-client-timeout.patch
>
> The new map output http client uses java.net.URLConnection to fetch the data file. However under Java 1.4 there is no way to specify a timeout and it is set to infinite (or if not infinite at least 12 hours).  This causes reduce tasks to get "stuck" in the "reduce > copy" phase even after the "Task failed to report status for 600 seconds. Killing." message.
> I will add the code in the ReduceTaskRunner to make sure that copies in-flight don't get stuck, but this is another point where a switch to java 1.5 would be helpful. Under 1.5 I could set the timeout on the connection and the read would timeout after the given interval and my entire change would be local to MapOutputLocation.copyFile.
> For now, I'll assume that we need to maintain support for 1.4 and make the corresponding fix, but I'm grumbling...

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun  1 19:56:25 2006
Return-Path: 
 <hadoop-dev-return-1818-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 97245 invoked from network); 1 Jun 2006 19:56:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 19:56:25 -0000
Received: (qmail 17889 invoked by uid 500); 1 Jun 2006 19:56:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17861 invoked by uid 500); 1 Jun 2006 19:56:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17852 invoked by uid 99); 1 Jun 2006 19:56:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 12:56:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 12:56:23 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 96AF87141ED
	for <hadoop-dev@lucene.apache.org>; Thu,  1 Jun 2006 19:55:30 +0000 (GMT)
Message-ID: <8534050.1149191730614.JavaMail.jira@brutus>
Date: Thu, 1 Jun 2006 19:55:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-264) WritableFactory has no permissions to
 create DatanodeRegistration
In-Reply-To: <15795140.1149117510008.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-264?page=all ]
     
Doug Cutting resolved HADOOP-264:
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Owen.

> WritableFactory has no permissions to create DatanodeRegistration
> -----------------------------------------------------------------
>
>          Key: HADOOP-264
>          URL: http://issues.apache.org/jira/browse/HADOOP-264
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.3
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>     Priority: Blocker
>      Fix For: 0.3
>  Attachments: PublicDatanodeRegistration.patch, fix-datanode-registration-perm-2.patch, fix-datanode-registration-perm.patch
>
> The datanode can not come up because the DatanodeRegistration is package local and the factory registration doesn't happen.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun  1 20:44:31 2006
Return-Path: 
 <hadoop-dev-return-1819-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 13207 invoked from network); 1 Jun 2006 20:44:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 20:44:31 -0000
Received: (qmail 76485 invoked by uid 500); 1 Jun 2006 20:44:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 76449 invoked by uid 500); 1 Jun 2006 20:44:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 76420 invoked by uid 99); 1 Jun 2006 20:44:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 13:44:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 13:44:24 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 06B40714219
	for <hadoop-dev@lucene.apache.org>; Thu,  1 Jun 2006 20:43:31 +0000 (GMT)
Message-ID: <28963457.1149194611024.JavaMail.jira@brutus>
Date: Thu, 1 Jun 2006 20:43:31 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Reopened: (HADOOP-242) job fails because of "No valid local
 directories in property: " exception
In-Reply-To: <13734662.1148411729914.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-242?page=all ]
     
Owen O'Malley reopened HADOOP-242:
----------------------------------

     Assign To: Owen O'Malley  (was: Sameer Paranjpye)

My patch didn't fix the problem, so I need to track this one down. 

> job fails because of "No valid local directories in property: " exception
> -------------------------------------------------------------------------
>
>          Key: HADOOP-242
>          URL: http://issues.apache.org/jira/browse/HADOOP-242
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Reporter: Yoram Arnon
>     Assignee: Owen O'Malley
>      Fix For: 0.3
>  Attachments: no-local.patch
>
> when running a fairly large job, of 70+K map tasks, I get many exceptions as shown below, and eventually the job failes when a task fails four times.
> The exception doesn't really tell us enough information to debug this properly, so the first thing to do would be to add more information (path) to the exception.
> The path indicated in the config file exists, is writable and valid, though 'path' may be anything.
> the exception:
> java.io.IOException: No valid local directories in property: mapred.local.dir at org.apache.hadoop.conf.Configuration.getLocalPath(Configuration.java:293) at org.apache.hadoop.mapred.JobConf.getLocalPath(JobConf.java:153) at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.localizeTask(TaskTracker.java:523) at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.launchTask(TaskTracker.java:572) at org.apache.hadoop.mapred.TaskTracker.startNewTask(TaskTracker.java:389) at org.apache.hadoop.mapred.TaskTracker.offerService(TaskTracker.java:303) at org.apache.hadoop.mapred.TaskTracker.run(TaskTracker.java:418) at org.apache.hadoop.mapred.TaskTracker.main(TaskTracker.java:920)
> the code:
>   public Path getLocalPath(String dirsProp, String path)
>     throws IOException {
>     String[] dirs = getStrings(dirsProp);
>     int hashCode = path.hashCode();
>     FileSystem fs = FileSystem.getNamed("local", this);
>     for (int i = 0; i < dirs.length; i++) {  // try each local dir
>       int index = (hashCode+i & Integer.MAX_VALUE) % dirs.length;
>       Path file = new Path(dirs[index], path);
>       Path dir = file.getParent();
>       if (fs.exists(dir) || fs.mkdirs(dir)) {
>         return file;
>       }
>     }
>     throw new IOException("No valid local directories in property: "+dirsProp);
>   }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun  1 20:46:24 2006
Return-Path: 
 <hadoop-dev-return-1820-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 13606 invoked from network); 1 Jun 2006 20:46:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 20:46:24 -0000
Received: (qmail 81417 invoked by uid 500); 1 Jun 2006 20:46:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 81396 invoked by uid 500); 1 Jun 2006 20:46:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 81387 invoked by uid 99); 1 Jun 2006 20:46:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 13:46:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 13:46:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CC0CD7141F4
	for <hadoop-dev@lucene.apache.org>; Thu,  1 Jun 2006 20:45:29 +0000 (GMT)
Message-ID: <27302315.1149194729831.JavaMail.jira@brutus>
Date: Thu, 1 Jun 2006 20:45:29 +0000 (GMT+00:00)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-270) possible deadlock when shut down a
 datanode thread
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

possible deadlock when shut down a datanode thread
--------------------------------------------------

         Key: HADOOP-270
         URL: http://issues.apache.org/jira/browse/HADOOP-270
     Project: Hadoop
        Type: Bug

  Components: dfs  
    Versions: 0.3    
    Reporter: Hairong Kuang
 Assigned to: Hairong Kuang 
     Fix For: 0.3


The DataNode class provides a method "shutdown" that can be used to notify a data node thread to abort itself gracefully. In addition this method waits for its data receiving server to terminate. This may cause possible deadlock if the method is called by the data receiving server.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun  1 21:56:25 2006
Return-Path: 
 <hadoop-dev-return-1821-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 39665 invoked from network); 1 Jun 2006 21:56:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 21:56:25 -0000
Received: (qmail 83968 invoked by uid 500); 1 Jun 2006 21:56:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 83944 invoked by uid 500); 1 Jun 2006 21:56:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 83935 invoked by uid 99); 1 Jun 2006 21:56:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 14:56:24 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of kangas@gmail.com designates
 66.249.82.196 as permitted sender)
Received: from [66.249.82.196] (HELO wx-out-0102.google.com) (66.249.82.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 14:56:24 -0700
Received: by wx-out-0102.google.com with SMTP id s16so266730wxc
        for <hadoop-dev@lucene.apache.org>;
 Thu, 01 Jun 2006 14:56:03 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:mime-version:content-transfer-encoding:message-id:content-type:to:from:subject:date:x-mailer;
        b=nwKx03Vu42SlfCnjDgqcKolf81pfVPj6lHhOprtHqTY0quQDopxVdhLXyVu32SC8e0Eqcdc9gBeaNmPaqTtaM2K/BmzFhLfqKCbo/78N9cMYfacSk9yvJ4ZrVZO6vFMXcNenVbSEv2kfc8rp2QdYLDhCul9KA1UGW2b73aZqvEU=
Received: by 10.70.132.6 with SMTP id f6mr1041910wxd;
        Thu, 01 Jun 2006 14:56:03 -0700 (PDT)
Received: from ?192.168.21.107? ( [162.83.228.188])
        by mx.gmail.com with ESMTP id h37sm1555022wxd.2006.06.01.14.56.02;
        Thu, 01 Jun 2006 14:56:03 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v750)
Content-Transfer-Encoding: 7bit
Message-Id: <8BA77DD6-4349-44F0-82D4-D6822064EC79@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: hadoop-dev@lucene.apache.org
From: Matt Kangas <kangas@gmail.com>
Subject: hadoop api docs missing on lucene.apache.org?
Date: Thu, 1 Jun 2006 17:56:06 -0400
X-Mailer: Apple Mail (2.750)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

http://lucene.apache.org/hadoop/docs/api/ is returning 404 for me today.

This is at 5:50pm EST, June 1. Is something broken, or merely in- 
progress?

--
Matt Kangas / kangas@gmail.com




From MAILER-DAEMON Thu Jun  1 22:07:27 2006
Return-Path: 
 <hadoop-dev-return-1822-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 44945 invoked from network); 1 Jun 2006 22:07:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 22:07:27 -0000
Received: (qmail 98863 invoked by uid 500); 1 Jun 2006 22:07:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98840 invoked by uid 500); 1 Jun 2006 22:07:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98831 invoked by uid 99); 1 Jun 2006 22:07:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 15:07:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 15:07:24 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 06A2C71429D
	for <hadoop-dev@lucene.apache.org>; Thu,  1 Jun 2006 22:06:31 +0000 (GMT)
Message-ID: <3077232.1149199591024.JavaMail.jira@brutus>
Date: Thu, 1 Jun 2006 22:06:31 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-211) logging improvements for Hadoop
In-Reply-To: <11693488.1147389488398.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-211?page=comments#action_12414310 ] 

Doug Cutting commented on HADOOP-211:
-------------------------------------

I can apply this by reverting to revision 410692, then use 'svn up' to merge in subsequent changes.  But I'm still having trouble building and running unit tests (at least on Windows, which I'm using today, since I'm on the road).  The change to build.xml causes hadoop-default.xml not to be found.  When I fix that, Jasper fails to be able to compile the jsp pages, since it uses log4j.  'ant clean test' reports:

Buildfile: build.xml
  [taskdef] log4j:ERROR setFile(null,true) call failed.
  [taskdef] java.io.FileNotFoundException: \ (The system cannot find the path s
ecified)
  [taskdef]     at java.io.FileOutputStream.openAppend(Native Method)
  [taskdef]     at java.io.FileOutputStream.<init>(FileOutputStream.java:177)
  [taskdef]     at java.io.FileOutputStream.<init>(FileOutputStream.java:102)
  [taskdef]     at org.apache.log4j.FileAppender.setFile(FileAppender.java:289)

So I'm (sadly) not quite able to commit this yet.

> logging improvements for Hadoop
> -------------------------------
>
>          Key: HADOOP-211
>          URL: http://issues.apache.org/jira/browse/HADOOP-211
>      Project: Hadoop
>         Type: Improvement

>     Versions: 0.2
>     Reporter: Sameer Paranjpye
>     Assignee: Sameer Paranjpye
>     Priority: Minor
>      Fix For: 0.3
>  Attachments: acl-log4j-II.patch.tgz, acl-log4j.patch, commons_logging_patch
>
> Here's a proposal for some impovements to the way Hadoop does logging. It advocates 3 
> broad changes to the way logging is currently done, these being:
> - The use of a uniform logging format by all Hadoop subsystems
> - The use of Apache commons logging as a facade above an underlying logging framework
> - The use of Log4J as the underlying logging framework instead of java.util.logging
> This is largely polishing work, but it seems like it would make log analysis and debugging
> easier in the short term. In the long term, it would future proof logging to the extent of
> allowing the logging framework used to change while requiring minimal code change. The 
> propos changes are motivated by the following requirements which we think Hadoops 
> logging should meet:
> - Hadoops logs should be amenable to analysis by tools like grep, sed, awk etc.
> - Log entries should be clearly annotated with a timestamp and a logging level
> - Log entries should be traceable to the subsystem from which they originated
> - The logging implementation should allow log entries to be annotated with source code 
> location information like classname, methodname, file and line number, without requiring
> code changes
> - It should be possible to change the logging implementation used without having to change
> thousands of lines of code
> - The mapping of loggers to destinations (files, directories, servers etc.) should be 
> specified and modifiable via configuration
> Uniform logging format:
> All Hadoop logs should have the following structure.
> <Header>\n
> <LogEntry>\n [<Exception>\n]
> .
> .
> .
> where the header line specifies the format of each log entry. The header line has the format:
> '# <Fieldname> <Fieldname>...\n'. 
> The default format of each log entry is: '# Timestamp Level LoggerName Message', where:
> - Timestamp is a date and time in the format MM/DD/YYYY:HH:MM:SS
> - Level is the logging level (FATAL, WARN, DEBUG, TRACE, etc.)
> - LoggerName is the short name of the logging subsystem from which the message originated e.g.
> fs.FSNamesystem, dfs.Datanode etc.
> - Message is the log message produced
> Why Apache commons logging and Log4J?
> Apache commons logging is a facade meant to be used as a wrapper around an underlying logging
> implementation. Bridges from Apache commons logging to popular logging implementations 
> (Java logging, Log4J, Avalon etc.) are implemented and available as part of the commons logging
> distribution. Implementing a bridge to an unsupported implementation is fairly striaghtforward
> and involves the implementation of subclasses of the commons logging LogFactory and Logger 
> classes. Using Apache commons logging and making all logging calls through it enables us to
> move to a different logging implementation by simply changing configuration in the best case.
> Even otherwise, it incurs minimal code churn overhead.
> Log4J offers a few benefits over java.util.logging that make it a more desirable choice for the
> logging back end.
> - Configuration Flexibility: The mapping of loggers to destinations (files, sockets etc.)
> can be completely specified in configuration. It is possible to do this with Java logging as
> well, however, configuration is a lot more restrictive. For instance, with Java logging all 
> log files must have names derived from the same pattern. For the namenode, log files could 
> be named with the pattern "%h/namenode%u.log" which would put log files in the user.home
> directory with names like namenode0.log etc. With Log4J it would be possible to configure
> the namenode to emit log files with different names, say heartbeats.log, namespace.log,
> clients.log etc. Configuration variables in Log4J can also have the values of system 
> properties embedded in them.
> - Takes wrappers into account: Log4J takes into account the possibility that an application
> may be invoking it via a wrapper, such as Apache commons logging. This is important because
> logging event objects must be able to infer the context of the logging call such as classname,
> methodname etc. Inferring context is a relatively expensive operation that involves creating
> an exception and examining the stack trace to find the frame just before the first frame 
> of the logging framework. It is therefore done lazily only when this information actually 
> needs to be logged. Log4J can be instructed to look for the frame corresponding to the wrapper
> class, Java logging cannot. In the case of Java logging this means that a) the bridge from 
> Apache commons logging is responsible for inferring the calling context and setting it in the 
> logging event and b) this inference has to be done on every logging call regardless of whether
> or not it is needed.
> - More handy features: Log4J has some handy features that Java logging doesn't. A couple
> of examples of these:
> a) Date based rolling of log files 
> b) Format control through configuration. Log4J has a PatternLayout class that can be 
> configured to generate logs with a user specified pattern. The logging format described
> above can be described as "%d{MM/dd/yyyy:HH:mm:SS} %c{2} %p %m". The format specifiers
> indicate that each log line should have the date and time followed by the logger name followed
> by the logging level or priority followed by the application generated message.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun  1 22:10:52 2006
Return-Path: 
 <hadoop-dev-return-1823-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46875 invoked from network); 1 Jun 2006 22:10:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 22:10:52 -0000
Received: (qmail 10244 invoked by uid 500); 1 Jun 2006 22:10:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 10220 invoked by uid 500); 1 Jun 2006 22:10:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 10208 invoked by uid 99); 1 Jun 2006 22:10:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 15:10:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.115.57.43] (HELO ylpvm12.prodigy.net) (207.115.57.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 15:10:50 -0700
Received: from pimout4-ext.prodigy.net (pimout4-int.prodigy.net
 [207.115.4.203])
	by ylpvm12.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id
 k51MATum028970
	for <hadoop-dev@lucene.apache.org>; Thu, 1 Jun 2006 18:10:29 -0400
X-ORBL: [69.228.218.244]
Received: from [127.0.0.1] (adsl-69-228-218-244.dsl.pltn13.pacbell.net
 [69.228.218.244])
	by pimout4-ext.prodigy.net (8.13.6 out.dk/8.13.6) with ESMTP id
 k51MARQm116696;
	Thu, 1 Jun 2006 18:10:28 -0400
Message-ID: <447F65D1.6090402@apache.org>
Date: Thu, 01 Jun 2006 15:10:25 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.2 (Windows/20060308)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: hadoop api docs missing on lucene.apache.org?
References: <8BA77DD6-4349-44F0-82D4-D6822064EC79@gmail.com>
In-Reply-To: <8BA77DD6-4349-44F0-82D4-D6822064EC79@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

It probably means the nightly build failed.  I'm unable to fix this 
right now, but will try to get to it tonight or tomorrow.

Doug

Matt Kangas wrote:
> http://lucene.apache.org/hadoop/docs/api/ is returning 404 for me today.
> 
> This is at 5:50pm EST, June 1. Is something broken, or merely in-progress?
> 
> -- 
> Matt Kangas / kangas@gmail.com
> 
> 
> 

From MAILER-DAEMON Thu Jun  1 22:16:42 2006
Return-Path: 
 <hadoop-dev-return-1824-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51666 invoked from network); 1 Jun 2006 22:16:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 22:16:42 -0000
Received: (qmail 22678 invoked by uid 500); 1 Jun 2006 22:16:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 22439 invoked by uid 500); 1 Jun 2006 22:16:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22391 invoked by uid 99); 1 Jun 2006 22:16:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 15:16:36 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of kangas@gmail.com designates
 66.249.82.198 as permitted sender)
Received: from [66.249.82.198] (HELO wx-out-0102.google.com) (66.249.82.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 15:16:35 -0700
Received: by wx-out-0102.google.com with SMTP id s16so268933wxc
        for <hadoop-dev@lucene.apache.org>;
 Thu, 01 Jun 2006 15:16:14 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=hDlyGhmcPjPFdPjoxOOTxQgjkzyUPVTlvuAhMNwugMcP4Fw0KvFzQGtxGzBaB7zBE7W8iDJ2r6dONEgd1CEq0NFfcMoUwS0vWPeCCkIYxfbNCFoGIMCU1cZLGlqIlYHZ7qCpn27N/s6K5SK5NQ9tUWkxxyFGrnGXxhyEh+AOpz4=
Received: by 10.70.47.1 with SMTP id u1mr1455896wxu;
        Thu, 01 Jun 2006 15:15:59 -0700 (PDT)
Received: from ?192.168.21.107? ( [162.83.228.188])
        by mx.gmail.com with ESMTP id h17sm1568027wxd.2006.06.01.15.15.58;
        Thu, 01 Jun 2006 15:15:59 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v750)
In-Reply-To: <447F65D1.6090402@apache.org>
References: <8BA77DD6-4349-44F0-82D4-D6822064EC79@gmail.com>
 <447F65D1.6090402@apache.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <A150C448-08EB-4DA6-9F60-421A3B2F9481@gmail.com>
Content-Transfer-Encoding: 7bit
From: Matt Kangas <kangas@gmail.com>
Subject: Re: hadoop api docs missing on lucene.apache.org?
Date: Thu, 1 Jun 2006 18:16:03 -0400
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.750)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Ah, bummer. Glad to hear you're on it, 'tho. :)

On Jun 1, 2006, at 6:10 PM, Doug Cutting wrote:

> It probably means the nightly build failed.  I'm unable to fix this  
> right now, but will try to get to it tonight or tomorrow.
>
> Doug
>
> Matt Kangas wrote:
>> http://lucene.apache.org/hadoop/docs/api/ is returning 404 for me  
>> today.
>> This is at 5:50pm EST, June 1. Is something broken, or merely in- 
>> progress?
>> -- 
>> Matt Kangas / kangas@gmail.com

--
Matt Kangas / kangas@gmail.com




From MAILER-DAEMON Fri Jun  2 17:04:34 2006
Return-Path: 
 <hadoop-dev-return-1830-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 18636 invoked from network); 2 Jun 2006 17:04:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Jun 2006 17:04:34 -0000
Received: (qmail 26250 invoked by uid 500); 2 Jun 2006 17:04:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26214 invoked by uid 500); 2 Jun 2006 17:04:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Delivered-To: moderator for hadoop-dev@lucene.apache.org
Received: (qmail 48633 invoked by uid 99); 1 Jun 2006 22:34:57 -0000
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:content-transfer-encoding:message-id:
	content-type:to:from:subject:date:x-mailer;
	b=V7BTmyqqO/8f9s22jkBbtE7Y/ACluRHXI69GwbVJ4YBSjtRFHKCOFi4JV1miQMjS
Mime-Version: 1.0 (Apple Message framework v623)
Content-Transfer-Encoding: 7bit
Message-Id: <0d7b50c5183d2c24dfbb4bd926191be1@yahoo-inc.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
To: hadoop-dev@lucene.apache.org
From: Peter Wyckoff <wyckoff@yahoo-inc.com>
Subject: the map/reduce API documentation link is a 404
Date: Thu, 1 Jun 2006 15:30:53 -0700
X-Mailer: Apple Mail (2.623)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi,

Must be pointing to the wrong place - 
http://lucene.apache.org/hadoop/docs/api/

thanks, pete


From MAILER-DAEMON Thu Jun  1 23:04:36 2006
Return-Path: 
 <hadoop-dev-return-1825-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67117 invoked from network); 1 Jun 2006 23:04:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 23:04:36 -0000
Received: (qmail 94117 invoked by uid 500); 1 Jun 2006 23:04:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94088 invoked by uid 500); 1 Jun 2006 23:04:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94075 invoked by uid 99); 1 Jun 2006 23:04:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 16:04:35 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.145.54.172] (HELO mrout2.yahoo.com) (216.145.54.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 16:04:34 -0700
Received: from [10.72.104.183] (enoughhot-lx.corp.yahoo.com [10.72.104.183])
	by mrout2.yahoo.com (8.13.6/8.13.4/y.out) with ESMTP id k51N1tK6002721
	for <hadoop-dev@lucene.apache.org>; Thu, 1 Jun 2006 16:01:55 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=message-id:date:from:user-agent:x-accept-language:
	mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
	b=lmrx/393OzlnZSNSHNKS3qrnLvwpI1N99QeyGfi6k3bDtfjQ8HQdtk7Ko2FmFGZB
Message-ID: <447F71E3.20002@yahoo-inc.com>
Date: Thu, 01 Jun 2006 16:01:55 -0700
From: Konstantin Shvachko <shv@yahoo-inc.com>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: hadoop api docs missing on lucene.apache.org?
References: <8BA77DD6-4349-44F0-82D4-D6822064EC79@gmail.com>
 <447F65D1.6090402@apache.org>
 <A150C448-08EB-4DA6-9F60-421A3B2F9481@gmail.com>
In-Reply-To: <A150C448-08EB-4DA6-9F60-421A3B2F9481@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

My nightly build on Windows failed indeed.
Something wrong with AllTestDriver.java

--Konst

Matt Kangas wrote:

> Ah, bummer. Glad to hear you're on it, 'tho. :)
>
> On Jun 1, 2006, at 6:10 PM, Doug Cutting wrote:
>
>> It probably means the nightly build failed.  I'm unable to fix this  
>> right now, but will try to get to it tonight or tomorrow.
>>
>> Doug
>>
>> Matt Kangas wrote:
>>
>>> http://lucene.apache.org/hadoop/docs/api/ is returning 404 for me  
>>> today.
>>> This is at 5:50pm EST, June 1. Is something broken, or merely in- 
>>> progress?
>>> -- 
>>> Matt Kangas / kangas@gmail.com
>>
>
> -- 
> Matt Kangas / kangas@gmail.com
>
>
>
>
>


From MAILER-DAEMON Thu Jun  1 23:11:25 2006
Return-Path: 
 <hadoop-dev-return-1826-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 70968 invoked from network); 1 Jun 2006 23:11:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 23:11:25 -0000
Received: (qmail 3613 invoked by uid 500); 1 Jun 2006 23:11:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3582 invoked by uid 500); 1 Jun 2006 23:11:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3572 invoked by uid 99); 1 Jun 2006 23:11:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 16:11:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 16:11:23 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9F6E17141E0
	for <hadoop-dev@lucene.apache.org>; Thu,  1 Jun 2006 23:10:30 +0000 (GMT)
Message-ID: <10688525.1149203430650.JavaMail.jira@brutus>
Date: Thu, 1 Jun 2006 23:10:30 +0000 (GMT+00:00)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-217) IllegalAcessException when creating a
 Block object via WritableFactories
In-Reply-To: <1616267.1147481890143.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-217?page=all ]

Hairong Kuang updated HADOOP-217:
---------------------------------

    Attachment: block.patch

> IllegalAcessException when creating a Block object via WritableFactories
> ------------------------------------------------------------------------
>
>          Key: HADOOP-217
>          URL: http://issues.apache.org/jira/browse/HADOOP-217
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.3
>     Reporter: Hairong Kuang
>     Assignee: Hairong Kuang
>      Fix For: 0.4
>  Attachments: access.patch, block.patch
>
> When I ran the dfs namenode, I received an error message listed below. Changing Block class to be public will be able to fix the problem.
> java.lang.RuntimeException: java.lang.IllegalAccessException: Class org.apache.hadoop.io.WritableFactories can not access a member of class org.apache.hadoop.dfs.Block with modifiers "public"
> java.lang.RuntimeException: java.lang.IllegalAccessException: Class org.apache.hadoop.io.WritableFactories can not access a member of class org.apache.hadoop.dfs.Block with modifiers "public"
>         at org.apache.hadoop.io.WritableFactories.newInstance(WritableFactories.java:49)
>         at org.apache.hadoop.io.ObjectWritable.readObject(ObjectWritable.java:226)
>         at org.apache.hadoop.io.ObjectWritable.readObject(ObjectWritable.java:163)
>         at org.apache.hadoop.io.ObjectWritable.readObject(ObjectWritable.java:211)
>         at org.apache.hadoop.ipc.RPC$Invocation.readFields(RPC.java:88)
>         at org.apache.hadoop.ipc.Server$Connection.run(Server.java:154)
> Caused by: java.lang.IllegalAccessException: Class org.apache.hadoop.io.WritableFactories can not access a member of class org.apache.hadoop.dfs.Block with modifiers "public"
>         at sun.reflect.Reflection.ensureMemberAccess(Reflection.java:65)
>         at java.lang.Class.newInstance0(Class.java:344)
>         at java.lang.Class.newInstance(Class.java:303)
>         at org.apache.hadoop.io.WritableFactories.newInstance(WritableFactories.java:45)
>         ... 5 more

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun  1 23:20:25 2006
Return-Path: 
 <hadoop-dev-return-1827-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 72557 invoked from network); 1 Jun 2006 23:20:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 23:20:25 -0000
Received: (qmail 13608 invoked by uid 500); 1 Jun 2006 23:20:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13471 invoked by uid 500); 1 Jun 2006 23:20:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13462 invoked by uid 99); 1 Jun 2006 23:20:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 16:20:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 16:20:23 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 98B307141E3
	for <hadoop-dev@lucene.apache.org>; Thu,  1 Jun 2006 23:19:30 +0000 (GMT)
Message-ID: <24909682.1149203970622.JavaMail.jira@brutus>
Date: Thu, 1 Jun 2006 23:19:30 +0000 (GMT+00:00)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-270) possible deadlock when shut down a
 datanode thread
In-Reply-To: <27302315.1149194729831.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-270?page=all ]

Hairong Kuang updated HADOOP-270:
---------------------------------

    Attachment: datanode_deadlock.patch

The patch moves "join" operation to the end of "offerservice". In addition, it starts up its data receive server in the beginning of "offerservice" instead of in the DataNode constructor.

> possible deadlock when shut down a datanode thread
> --------------------------------------------------
>
>          Key: HADOOP-270
>          URL: http://issues.apache.org/jira/browse/HADOOP-270
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.3
>     Reporter: Hairong Kuang
>     Assignee: Hairong Kuang
>      Fix For: 0.3
>  Attachments: datanode_deadlock.patch
>
> The DataNode class provides a method "shutdown" that can be used to notify a data node thread to abort itself gracefully. In addition this method waits for its data receiving server to terminate. This may cause possible deadlock if the method is called by the data receiving server.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun  1 23:32:24 2006
Return-Path: 
 <hadoop-dev-return-1828-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77252 invoked from network); 1 Jun 2006 23:32:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 23:32:24 -0000
Received: (qmail 23457 invoked by uid 500); 1 Jun 2006 23:32:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23313 invoked by uid 500); 1 Jun 2006 23:32:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23298 invoked by uid 99); 1 Jun 2006 23:32:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 16:32:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 16:32:23 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D141B7141E3
	for <hadoop-dev@lucene.apache.org>; Thu,  1 Jun 2006 23:31:29 +0000 (GMT)
Message-ID: <18980326.1149204689854.JavaMail.jira@brutus>
Date: Thu, 1 Jun 2006 23:31:29 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-271) add links to task tracker http server
 from task details and failure pages
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

add links to task tracker http server from task details and failure pages
-------------------------------------------------------------------------

         Key: HADOOP-271
         URL: http://issues.apache.org/jira/browse/HADOOP-271
     Project: Hadoop
        Type: Improvement

  Components: mapred  
    Versions: 0.2.1    
    Reporter: Owen O'Malley
 Assigned to: Owen O'Malley 
    Priority: Minor
     Fix For: 0.4


Make the machine name in the list of task attempts and failures into links to the correct task tracker http server.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun  1 23:34:25 2006
Return-Path: 
 <hadoop-dev-return-1829-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78594 invoked from network); 1 Jun 2006 23:34:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 23:34:25 -0000
Received: (qmail 29030 invoked by uid 500); 1 Jun 2006 23:34:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 29006 invoked by uid 500); 1 Jun 2006 23:34:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28997 invoked by uid 99); 1 Jun 2006 23:34:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 16:34:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 16:34:23 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9481A7141E3
	for <hadoop-dev@lucene.apache.org>; Thu,  1 Jun 2006 23:33:30 +0000 (GMT)
Message-ID: <12194007.1149204810605.JavaMail.jira@brutus>
Date: Thu, 1 Jun 2006 23:33:30 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-271) add links to task tracker http server
 from task details and failure pages
In-Reply-To: <18980326.1149204689854.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-271?page=all ]

Owen O'Malley updated HADOOP-271:
---------------------------------

    Attachment: add-machine-links.patch

This patch changes the TaskStatus to contain the task tracker name rather than the machine name. The jsp pages then use this to get both the machine name and http port.

> add links to task tracker http server from task details and failure pages
> -------------------------------------------------------------------------
>
>          Key: HADOOP-271
>          URL: http://issues.apache.org/jira/browse/HADOOP-271
>      Project: Hadoop
>         Type: Improvement

>   Components: mapred
>     Versions: 0.2.1
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>     Priority: Minor
>      Fix For: 0.4
>  Attachments: add-machine-links.patch
>
> Make the machine name in the list of task attempts and failures into links to the correct task tracker http server.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun  2 17:49:27 2006
Return-Path: 
 <hadoop-dev-return-1831-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33415 invoked from network); 2 Jun 2006 17:49:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Jun 2006 17:49:27 -0000
Received: (qmail 96472 invoked by uid 500); 2 Jun 2006 17:49:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 96364 invoked by uid 500); 2 Jun 2006 17:49:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 96355 invoked by uid 99); 2 Jun 2006 17:49:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 10:49:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 10:49:25 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2309E7141E6
	for <hadoop-dev@lucene.apache.org>; Fri,  2 Jun 2006 17:48:31 +0000 (GMT)
Message-ID: <22504711.1149270511140.JavaMail.jira@brutus>
Date: Fri, 2 Jun 2006 17:48:31 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-211) logging improvements for Hadoop
In-Reply-To: <11693488.1147389488398.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-211?page=comments#action_12414487 ] 

Doug Cutting commented on HADOOP-211:
-------------------------------------

Okay, I've worked out the configuration problems.  Now it appears that some things that were previously logged at level=FINE are now logged at INFO, when they should be DEBUG.  I'm working on fixing that...

> logging improvements for Hadoop
> -------------------------------
>
>          Key: HADOOP-211
>          URL: http://issues.apache.org/jira/browse/HADOOP-211
>      Project: Hadoop
>         Type: Improvement

>     Versions: 0.2
>     Reporter: Sameer Paranjpye
>     Assignee: Sameer Paranjpye
>     Priority: Minor
>      Fix For: 0.3
>  Attachments: acl-log4j-II.patch.tgz, acl-log4j.patch, commons_logging_patch
>
> Here's a proposal for some impovements to the way Hadoop does logging. It advocates 3 
> broad changes to the way logging is currently done, these being:
> - The use of a uniform logging format by all Hadoop subsystems
> - The use of Apache commons logging as a facade above an underlying logging framework
> - The use of Log4J as the underlying logging framework instead of java.util.logging
> This is largely polishing work, but it seems like it would make log analysis and debugging
> easier in the short term. In the long term, it would future proof logging to the extent of
> allowing the logging framework used to change while requiring minimal code change. The 
> propos changes are motivated by the following requirements which we think Hadoops 
> logging should meet:
> - Hadoops logs should be amenable to analysis by tools like grep, sed, awk etc.
> - Log entries should be clearly annotated with a timestamp and a logging level
> - Log entries should be traceable to the subsystem from which they originated
> - The logging implementation should allow log entries to be annotated with source code 
> location information like classname, methodname, file and line number, without requiring
> code changes
> - It should be possible to change the logging implementation used without having to change
> thousands of lines of code
> - The mapping of loggers to destinations (files, directories, servers etc.) should be 
> specified and modifiable via configuration
> Uniform logging format:
> All Hadoop logs should have the following structure.
> <Header>\n
> <LogEntry>\n [<Exception>\n]
> .
> .
> .
> where the header line specifies the format of each log entry. The header line has the format:
> '# <Fieldname> <Fieldname>...\n'. 
> The default format of each log entry is: '# Timestamp Level LoggerName Message', where:
> - Timestamp is a date and time in the format MM/DD/YYYY:HH:MM:SS
> - Level is the logging level (FATAL, WARN, DEBUG, TRACE, etc.)
> - LoggerName is the short name of the logging subsystem from which the message originated e.g.
> fs.FSNamesystem, dfs.Datanode etc.
> - Message is the log message produced
> Why Apache commons logging and Log4J?
> Apache commons logging is a facade meant to be used as a wrapper around an underlying logging
> implementation. Bridges from Apache commons logging to popular logging implementations 
> (Java logging, Log4J, Avalon etc.) are implemented and available as part of the commons logging
> distribution. Implementing a bridge to an unsupported implementation is fairly striaghtforward
> and involves the implementation of subclasses of the commons logging LogFactory and Logger 
> classes. Using Apache commons logging and making all logging calls through it enables us to
> move to a different logging implementation by simply changing configuration in the best case.
> Even otherwise, it incurs minimal code churn overhead.
> Log4J offers a few benefits over java.util.logging that make it a more desirable choice for the
> logging back end.
> - Configuration Flexibility: The mapping of loggers to destinations (files, sockets etc.)
> can be completely specified in configuration. It is possible to do this with Java logging as
> well, however, configuration is a lot more restrictive. For instance, with Java logging all 
> log files must have names derived from the same pattern. For the namenode, log files could 
> be named with the pattern "%h/namenode%u.log" which would put log files in the user.home
> directory with names like namenode0.log etc. With Log4J it would be possible to configure
> the namenode to emit log files with different names, say heartbeats.log, namespace.log,
> clients.log etc. Configuration variables in Log4J can also have the values of system 
> properties embedded in them.
> - Takes wrappers into account: Log4J takes into account the possibility that an application
> may be invoking it via a wrapper, such as Apache commons logging. This is important because
> logging event objects must be able to infer the context of the logging call such as classname,
> methodname etc. Inferring context is a relatively expensive operation that involves creating
> an exception and examining the stack trace to find the frame just before the first frame 
> of the logging framework. It is therefore done lazily only when this information actually 
> needs to be logged. Log4J can be instructed to look for the frame corresponding to the wrapper
> class, Java logging cannot. In the case of Java logging this means that a) the bridge from 
> Apache commons logging is responsible for inferring the calling context and setting it in the 
> logging event and b) this inference has to be done on every logging call regardless of whether
> or not it is needed.
> - More handy features: Log4J has some handy features that Java logging doesn't. A couple
> of examples of these:
> a) Date based rolling of log files 
> b) Format control through configuration. Log4J has a PatternLayout class that can be 
> configured to generate logs with a user specified pattern. The logging format described
> above can be described as "%d{MM/dd/yyyy:HH:mm:SS} %c{2} %p %m". The format specifiers
> indicate that each log line should have the date and time followed by the logger name followed
> by the logging level or priority followed by the application generated message.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun  2 19:21:27 2006
Return-Path: 
 <hadoop-dev-return-1833-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 69614 invoked from network); 2 Jun 2006 19:21:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Jun 2006 19:21:27 -0000
Received: (qmail 40614 invoked by uid 500); 2 Jun 2006 19:21:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40472 invoked by uid 500); 2 Jun 2006 19:21:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 40463 invoked by uid 99); 2 Jun 2006 19:21:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 12:21:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 12:21:25 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2F7947141E6
	for <hadoop-dev@lucene.apache.org>; Fri,  2 Jun 2006 19:20:31 +0000 (GMT)
Message-ID: <22985667.1149276031190.JavaMail.jira@brutus>
Date: Fri, 2 Jun 2006 19:20:31 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-211) logging improvements for Hadoop
In-Reply-To: <11693488.1147389488398.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-211?page=all ]
     
Doug Cutting resolved HADOOP-211:
---------------------------------

    Resolution: Fixed

With some trepidation, I just committed this.

There were a number of problems with this patch.  It changed all level=fine log messages into level=info, rather than level=debug.  The build needed to be repaired as well, since logging is performed there, but the standard configuration is not appropriate during build, so I added a build/test log4j configuration.  Finally, the changes to bin/hadoop did not name the log files correctly: the correct log file name should be normally set in bin/hadoop-daemon.sh and used in bin/hadoop.  I fixed all of these.

In the future, we should not try to make such large changes in the last days before a release.  Such changes should be made early in the release cycle.  I suspect we will still encounter more problems with this as I now try to make a release and test things with Nutch for back-compatibility, on Windows, etc.


> logging improvements for Hadoop
> -------------------------------
>
>          Key: HADOOP-211
>          URL: http://issues.apache.org/jira/browse/HADOOP-211
>      Project: Hadoop
>         Type: Improvement

>     Versions: 0.2
>     Reporter: Sameer Paranjpye
>     Assignee: Sameer Paranjpye
>     Priority: Minor
>      Fix For: 0.3
>  Attachments: acl-log4j-II.patch.tgz, acl-log4j.patch, commons_logging_patch
>
> Here's a proposal for some impovements to the way Hadoop does logging. It advocates 3 
> broad changes to the way logging is currently done, these being:
> - The use of a uniform logging format by all Hadoop subsystems
> - The use of Apache commons logging as a facade above an underlying logging framework
> - The use of Log4J as the underlying logging framework instead of java.util.logging
> This is largely polishing work, but it seems like it would make log analysis and debugging
> easier in the short term. In the long term, it would future proof logging to the extent of
> allowing the logging framework used to change while requiring minimal code change. The 
> propos changes are motivated by the following requirements which we think Hadoops 
> logging should meet:
> - Hadoops logs should be amenable to analysis by tools like grep, sed, awk etc.
> - Log entries should be clearly annotated with a timestamp and a logging level
> - Log entries should be traceable to the subsystem from which they originated
> - The logging implementation should allow log entries to be annotated with source code 
> location information like classname, methodname, file and line number, without requiring
> code changes
> - It should be possible to change the logging implementation used without having to change
> thousands of lines of code
> - The mapping of loggers to destinations (files, directories, servers etc.) should be 
> specified and modifiable via configuration
> Uniform logging format:
> All Hadoop logs should have the following structure.
> <Header>\n
> <LogEntry>\n [<Exception>\n]
> .
> .
> .
> where the header line specifies the format of each log entry. The header line has the format:
> '# <Fieldname> <Fieldname>...\n'. 
> The default format of each log entry is: '# Timestamp Level LoggerName Message', where:
> - Timestamp is a date and time in the format MM/DD/YYYY:HH:MM:SS
> - Level is the logging level (FATAL, WARN, DEBUG, TRACE, etc.)
> - LoggerName is the short name of the logging subsystem from which the message originated e.g.
> fs.FSNamesystem, dfs.Datanode etc.
> - Message is the log message produced
> Why Apache commons logging and Log4J?
> Apache commons logging is a facade meant to be used as a wrapper around an underlying logging
> implementation. Bridges from Apache commons logging to popular logging implementations 
> (Java logging, Log4J, Avalon etc.) are implemented and available as part of the commons logging
> distribution. Implementing a bridge to an unsupported implementation is fairly striaghtforward
> and involves the implementation of subclasses of the commons logging LogFactory and Logger 
> classes. Using Apache commons logging and making all logging calls through it enables us to
> move to a different logging implementation by simply changing configuration in the best case.
> Even otherwise, it incurs minimal code churn overhead.
> Log4J offers a few benefits over java.util.logging that make it a more desirable choice for the
> logging back end.
> - Configuration Flexibility: The mapping of loggers to destinations (files, sockets etc.)
> can be completely specified in configuration. It is possible to do this with Java logging as
> well, however, configuration is a lot more restrictive. For instance, with Java logging all 
> log files must have names derived from the same pattern. For the namenode, log files could 
> be named with the pattern "%h/namenode%u.log" which would put log files in the user.home
> directory with names like namenode0.log etc. With Log4J it would be possible to configure
> the namenode to emit log files with different names, say heartbeats.log, namespace.log,
> clients.log etc. Configuration variables in Log4J can also have the values of system 
> properties embedded in them.
> - Takes wrappers into account: Log4J takes into account the possibility that an application
> may be invoking it via a wrapper, such as Apache commons logging. This is important because
> logging event objects must be able to infer the context of the logging call such as classname,
> methodname etc. Inferring context is a relatively expensive operation that involves creating
> an exception and examining the stack trace to find the frame just before the first frame 
> of the logging framework. It is therefore done lazily only when this information actually 
> needs to be logged. Log4J can be instructed to look for the frame corresponding to the wrapper
> class, Java logging cannot. In the case of Java logging this means that a) the bridge from 
> Apache commons logging is responsible for inferring the calling context and setting it in the 
> logging event and b) this inference has to be done on every logging call regardless of whether
> or not it is needed.
> - More handy features: Log4J has some handy features that Java logging doesn't. A couple
> of examples of these:
> a) Date based rolling of log files 
> b) Format control through configuration. Log4J has a PatternLayout class that can be 
> configured to generate logs with a user specified pattern. The logging format described
> above can be described as "%d{MM/dd/yyyy:HH:mm:SS} %c{2} %p %m". The format specifiers
> indicate that each log line should have the date and time followed by the logger name followed
> by the logging level or priority followed by the application generated message.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun  2 19:21:37 2006
Return-Path: 
 <hadoop-dev-return-1834-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 69650 invoked from network); 2 Jun 2006 19:21:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Jun 2006 19:21:37 -0000
Received: (qmail 40837 invoked by uid 500); 2 Jun 2006 19:21:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40700 invoked by uid 500); 2 Jun 2006 19:21:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 40688 invoked by uid 99); 2 Jun 2006 19:21:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 12:21:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.115.57.46] (HELO ylpvm15.prodigy.net) (207.115.57.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 12:21:35 -0700
Received: from pimout5-ext.prodigy.net (pimout5-int.prodigy.net
 [207.115.4.21])
	by ylpvm15.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id
 k52JLMEs024604
	for <hadoop-dev@lucene.apache.org>; Fri, 2 Jun 2006 15:21:22 -0400
X-ORBL: [69.228.218.244]
Received: from [192.168.168.15] (adsl-69-228-218-244.dsl.pltn13.pacbell.net
 [69.228.218.244])
	by pimout5-ext.prodigy.net (8.13.6 out.dk/8.13.6) with ESMTP id
 k52JLC2u222860;
	Fri, 2 Jun 2006 15:21:13 -0400
Message-ID: <44808FA7.3030709@apache.org>
Date: Fri, 02 Jun 2006 12:21:11 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.8 (X11/20060502)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: hadoop api docs missing on lucene.apache.org?
References: <8BA77DD6-4349-44F0-82D4-D6822064EC79@gmail.com>
In-Reply-To: <8BA77DD6-4349-44F0-82D4-D6822064EC79@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I fixed the nightly build, so the api docs are now back.

I also fixed a problem where nightly build failures were not reported to 
the developer list, as they should be.

We should still fix things so that old javadoc is not removed when the 
build fails.  This should be an easy change to:

http://svn.apache.org/viewvc/lucene/hadoop/nightly/nightly.sh?view=markup

Doug

Matt Kangas wrote:
> http://lucene.apache.org/hadoop/docs/api/ is returning 404 for me today.
> 
> This is at 5:50pm EST, June 1. Is something broken, or merely in- progress?
> 
> -- 
> Matt Kangas / kangas@gmail.com
> 
> 
> 

From MAILER-DAEMON Fri Jun  2 19:53:30 2006
Return-Path: 
 <hadoop-dev-return-1835-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 82275 invoked from network); 2 Jun 2006 19:53:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Jun 2006 19:53:30 -0000
Received: (qmail 6756 invoked by uid 500); 2 Jun 2006 19:53:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 6731 invoked by uid 500); 2 Jun 2006 19:53:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 6717 invoked by uid 99); 2 Jun 2006 19:53:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 12:53:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 12:53:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8E2D9714022
	for <hadoop-dev@lucene.apache.org>; Fri,  2 Jun 2006 19:52:30 +0000 (GMT)
Message-ID: <1076683.1149277950579.JavaMail.jira@brutus>
Date: Fri, 2 Jun 2006 19:52:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-265) Abort tasktracker if it can not write
 to its local directories
In-Reply-To: <32270485.1149120509884.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-265?page=all ]
     
Doug Cutting resolved HADOOP-265:
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Hairong!

> Abort tasktracker if it can not write to its local directories
> --------------------------------------------------------------
>
>          Key: HADOOP-265
>          URL: http://issues.apache.org/jira/browse/HADOOP-265
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.3
>     Reporter: Hairong Kuang
>     Assignee: Hairong Kuang
>      Fix For: 0.3
>  Attachments: mapred_disk.patch
>
> Currently if a task tracker is not able to write to any of its local directories, it continues to run and all the tasks assigned to it fail.
> A task tracker should not start upif it has a problem reading/writing any of its local directories. It should abort if it gets the problem at run time.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun  2 20:00:26 2006
Return-Path: 
 <hadoop-dev-return-1836-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85168 invoked from network); 2 Jun 2006 20:00:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Jun 2006 20:00:26 -0000
Received: (qmail 17221 invoked by uid 500); 2 Jun 2006 20:00:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17203 invoked by uid 500); 2 Jun 2006 20:00:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17193 invoked by uid 99); 2 Jun 2006 20:00:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 13:00:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 13:00:25 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 91848714022
	for <hadoop-dev@lucene.apache.org>; Fri,  2 Jun 2006 19:59:30 +0000 (GMT)
Message-ID: <12301586.1149278370593.JavaMail.jira@brutus>
Date: Fri, 2 Jun 2006 19:59:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-217) IllegalAcessException when creating a
 Block object via WritableFactories
In-Reply-To: <1616267.1147481890143.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-217?page=all ]
     
Doug Cutting resolved HADOOP-217:
---------------------------------

    Fix Version: 0.3
                     (was: 0.4)
     Resolution: Fixed

I just committed this.  Thanks!

> IllegalAcessException when creating a Block object via WritableFactories
> ------------------------------------------------------------------------
>
>          Key: HADOOP-217
>          URL: http://issues.apache.org/jira/browse/HADOOP-217
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.3
>     Reporter: Hairong Kuang
>     Assignee: Hairong Kuang
>      Fix For: 0.3
>  Attachments: access.patch, block.patch
>
> When I ran the dfs namenode, I received an error message listed below. Changing Block class to be public will be able to fix the problem.
> java.lang.RuntimeException: java.lang.IllegalAccessException: Class org.apache.hadoop.io.WritableFactories can not access a member of class org.apache.hadoop.dfs.Block with modifiers "public"
> java.lang.RuntimeException: java.lang.IllegalAccessException: Class org.apache.hadoop.io.WritableFactories can not access a member of class org.apache.hadoop.dfs.Block with modifiers "public"
>         at org.apache.hadoop.io.WritableFactories.newInstance(WritableFactories.java:49)
>         at org.apache.hadoop.io.ObjectWritable.readObject(ObjectWritable.java:226)
>         at org.apache.hadoop.io.ObjectWritable.readObject(ObjectWritable.java:163)
>         at org.apache.hadoop.io.ObjectWritable.readObject(ObjectWritable.java:211)
>         at org.apache.hadoop.ipc.RPC$Invocation.readFields(RPC.java:88)
>         at org.apache.hadoop.ipc.Server$Connection.run(Server.java:154)
> Caused by: java.lang.IllegalAccessException: Class org.apache.hadoop.io.WritableFactories can not access a member of class org.apache.hadoop.dfs.Block with modifiers "public"
>         at sun.reflect.Reflection.ensureMemberAccess(Reflection.java:65)
>         at java.lang.Class.newInstance0(Class.java:344)
>         at java.lang.Class.newInstance(Class.java:303)
>         at org.apache.hadoop.io.WritableFactories.newInstance(WritableFactories.java:45)
>         ... 5 more

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun  2 20:15:26 2006
Return-Path: 
 <hadoop-dev-return-1837-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 89093 invoked from network); 2 Jun 2006 20:15:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Jun 2006 20:15:26 -0000
Received: (qmail 33302 invoked by uid 500); 2 Jun 2006 20:15:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 33279 invoked by uid 500); 2 Jun 2006 20:15:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 33270 invoked by uid 99); 2 Jun 2006 20:15:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 13:15:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 13:15:25 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8FD6A7141E8
	for <hadoop-dev@lucene.apache.org>; Fri,  2 Jun 2006 20:14:30 +0000 (GMT)
Message-ID: <7501316.1149279270586.JavaMail.jira@brutus>
Date: Fri, 2 Jun 2006 20:14:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-270) possible deadlock when shut down a
 datanode thread
In-Reply-To: <27302315.1149194729831.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-270?page=all ]
     
Doug Cutting resolved HADOOP-270:
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Hairong!

> possible deadlock when shut down a datanode thread
> --------------------------------------------------
>
>          Key: HADOOP-270
>          URL: http://issues.apache.org/jira/browse/HADOOP-270
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.3
>     Reporter: Hairong Kuang
>     Assignee: Hairong Kuang
>      Fix For: 0.3
>  Attachments: datanode_deadlock.patch
>
> The DataNode class provides a method "shutdown" that can be used to notify a data node thread to abort itself gracefully. In addition this method waits for its data receiving server to terminate. This may cause possible deadlock if the method is called by the data receiving server.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun  2 21:38:06 2006
Return-Path: 
 <hadoop-dev-return-1838-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16459 invoked from network); 2 Jun 2006 21:38:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Jun 2006 21:38:06 -0000
Received: (qmail 33276 invoked by uid 500); 2 Jun 2006 21:37:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 31845 invoked by uid 500); 2 Jun 2006 21:37:48 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31519 invoked by uid 99); 2 Jun 2006 21:37:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 14:37:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 14:19:25 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EFD0B7141E4
	for <hadoop-dev@lucene.apache.org>; Fri,  2 Jun 2006 21:18:30 +0000 (GMT)
Message-ID: <5590534.1149283110979.JavaMail.jira@brutus>
Date: Fri, 2 Jun 2006 21:18:30 +0000 (GMT+00:00)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-123) mini map/reduce cluster for junit
 tests
In-Reply-To: <927904038.1144348524414.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-123?page=comments#action_12414520 ] 

Milind Bhandarkar commented on HADOOP-123:
------------------------------------------

alan,

if you could pass me the patch, i could make the required modifications, test, and submit.

milind

> mini map/reduce cluster for junit tests
> ---------------------------------------
>
>          Key: HADOOP-123
>          URL: http://issues.apache.org/jira/browse/HADOOP-123
>      Project: Hadoop
>         Type: New Feature

>   Components: mapred
>     Versions: 0.3
>     Reporter: Owen O'Malley
>     Assignee: Milind Bhandarkar
>      Fix For: 0.4

>
> I would like a single process map-reduce pseduo-distributed cluster that can be used for unit tests. We should add a unit test with a word count map/reduce.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun  2 23:05:26 2006
Return-Path: 
 <hadoop-dev-return-1839-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52148 invoked from network); 2 Jun 2006 23:05:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Jun 2006 23:05:26 -0000
Received: (qmail 56888 invoked by uid 500); 2 Jun 2006 23:05:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 56841 invoked by uid 500); 2 Jun 2006 23:05:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 56828 invoked by uid 99); 2 Jun 2006 23:05:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 16:05:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 16:05:24 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D7EB37141EF
	for <hadoop-dev@lucene.apache.org>; Fri,  2 Jun 2006 23:04:29 +0000 (GMT)
Message-ID: <13890984.1149289469881.JavaMail.jira@brutus>
Date: Fri, 2 Jun 2006 23:04:29 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-272) bin/hadoop dfs -rm <dir> crashes in
 log4j code
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

bin/hadoop dfs -rm <dir> crashes in log4j code
----------------------------------------------

         Key: HADOOP-272
         URL: http://issues.apache.org/jira/browse/HADOOP-272
     Project: Hadoop
        Type: Bug

    Versions: 0.3    
    Reporter: Owen O'Malley
 Assigned to: Owen O'Malley 


When I run "bin/hadoop dfs -rm out-dir" I get the following error messages:

log4j:ERROR setFile(null,true) call failed.
java.io.FileNotFoundException: /export/crawlspace/owen/hadoop/run/log (Is a directory)
        at java.io.FileOutputStream.openAppend(Native Method)
        at java.io.FileOutputStream.<init>(FileOutputStream.java:177)
        at java.io.FileOutputStream.<init>(FileOutputStream.java:102)
        at org.apache.log4j.FileAppender.setFile(FileAppender.java:289)
        at org.apache.log4j.FileAppender.activateOptions(FileAppender.java:163)
        at org.apache.log4j.DailyRollingFileAppender.activateOptions(DailyRollingFileAppender.java:215)
        at org.apache.log4j.config.PropertySetter.activate(PropertySetter.java:256)
        at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:132)
        at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:96)
        at org.apache.log4j.PropertyConfigurator.parseAppender(PropertyConfigurator.java:654)
        at org.apache.log4j.PropertyConfigurator.parseCategory(PropertyConfigurator.java:612)
        at org.apache.log4j.PropertyConfigurator.configureRootCategory(PropertyConfigurator.java:509)
        at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:415)
        at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:441)
        at org.apache.log4j.helpers.OptionConverter.selectAndConfigure(OptionConverter.java:468)
        at org.apache.log4j.LogManager.<clinit>(LogManager.java:122)
        at org.apache.log4j.Logger.getLogger(Logger.java:104)
        at org.apache.commons.logging.impl.Log4JLogger.getLogger(Log4JLogger.java:229)
        at org.apache.commons.logging.impl.Log4JLogger.<init>(Log4JLogger.java:65)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:494)
        at org.apache.commons.logging.impl.LogFactoryImpl.newInstance(LogFactoryImpl.java:529)
        at org.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:235)
        at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:370)
        at org.apache.hadoop.conf.Configuration.<clinit>(Configuration.java:54)
        at org.apache.hadoop.dfs.DFSShell.main(DFSShell.java:307)
log4j:ERROR Either File or DatePattern options are not set for appender [DRFA].
Delete failed


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun  2 23:05:27 2006
Return-Path: 
 <hadoop-dev-return-1840-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52191 invoked from network); 2 Jun 2006 23:05:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Jun 2006 23:05:27 -0000
Received: (qmail 57032 invoked by uid 500); 2 Jun 2006 23:05:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 57010 invoked by uid 500); 2 Jun 2006 23:05:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 57001 invoked by uid 99); 2 Jun 2006 23:05:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 16:05:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 16:05:25 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B5F587141F3
	for <hadoop-dev@lucene.apache.org>; Fri,  2 Jun 2006 23:04:30 +0000 (GMT)
Message-ID: <16374518.1149289470742.JavaMail.jira@brutus>
Date: Fri, 2 Jun 2006 23:04:30 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-272) bin/hadoop dfs -rm <dir> crashes in
 log4j code
In-Reply-To: <13890984.1149289469881.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-272?page=all ]

Owen O'Malley updated HADOOP-272:
---------------------------------

    Description: 
When I run "bin/hadoop dfs -rm out-dir" I get the following error messages:

log4j:ERROR setFile(null,true) call failed.
java.io.FileNotFoundException: /local/owen/hadoop/run/log (Is a directory)
        at java.io.FileOutputStream.openAppend(Native Method)
        at java.io.FileOutputStream.<init>(FileOutputStream.java:177)
        at java.io.FileOutputStream.<init>(FileOutputStream.java:102)
        at org.apache.log4j.FileAppender.setFile(FileAppender.java:289)
        at org.apache.log4j.FileAppender.activateOptions(FileAppender.java:163)
        at org.apache.log4j.DailyRollingFileAppender.activateOptions(DailyRollingFileAppender.java:215)
        at org.apache.log4j.config.PropertySetter.activate(PropertySetter.java:256)
        at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:132)
        at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:96)
        at org.apache.log4j.PropertyConfigurator.parseAppender(PropertyConfigurator.java:654)
        at org.apache.log4j.PropertyConfigurator.parseCategory(PropertyConfigurator.java:612)
        at org.apache.log4j.PropertyConfigurator.configureRootCategory(PropertyConfigurator.java:509)
        at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:415)
        at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:441)
        at org.apache.log4j.helpers.OptionConverter.selectAndConfigure(OptionConverter.java:468)
        at org.apache.log4j.LogManager.<clinit>(LogManager.java:122)
        at org.apache.log4j.Logger.getLogger(Logger.java:104)
        at org.apache.commons.logging.impl.Log4JLogger.getLogger(Log4JLogger.java:229)
        at org.apache.commons.logging.impl.Log4JLogger.<init>(Log4JLogger.java:65)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:494)
        at org.apache.commons.logging.impl.LogFactoryImpl.newInstance(LogFactoryImpl.java:529)
        at org.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:235)
        at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:370)
        at org.apache.hadoop.conf.Configuration.<clinit>(Configuration.java:54)
        at org.apache.hadoop.dfs.DFSShell.main(DFSShell.java:307)
log4j:ERROR Either File or DatePattern options are not set for appender [DRFA].
Delete failed


  was:
When I run "bin/hadoop dfs -rm out-dir" I get the following error messages:

log4j:ERROR setFile(null,true) call failed.
java.io.FileNotFoundException: /export/crawlspace/owen/hadoop/run/log (Is a directory)
        at java.io.FileOutputStream.openAppend(Native Method)
        at java.io.FileOutputStream.<init>(FileOutputStream.java:177)
        at java.io.FileOutputStream.<init>(FileOutputStream.java:102)
        at org.apache.log4j.FileAppender.setFile(FileAppender.java:289)
        at org.apache.log4j.FileAppender.activateOptions(FileAppender.java:163)
        at org.apache.log4j.DailyRollingFileAppender.activateOptions(DailyRollingFileAppender.java:215)
        at org.apache.log4j.config.PropertySetter.activate(PropertySetter.java:256)
        at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:132)
        at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:96)
        at org.apache.log4j.PropertyConfigurator.parseAppender(PropertyConfigurator.java:654)
        at org.apache.log4j.PropertyConfigurator.parseCategory(PropertyConfigurator.java:612)
        at org.apache.log4j.PropertyConfigurator.configureRootCategory(PropertyConfigurator.java:509)
        at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:415)
        at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:441)
        at org.apache.log4j.helpers.OptionConverter.selectAndConfigure(OptionConverter.java:468)
        at org.apache.log4j.LogManager.<clinit>(LogManager.java:122)
        at org.apache.log4j.Logger.getLogger(Logger.java:104)
        at org.apache.commons.logging.impl.Log4JLogger.getLogger(Log4JLogger.java:229)
        at org.apache.commons.logging.impl.Log4JLogger.<init>(Log4JLogger.java:65)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:494)
        at org.apache.commons.logging.impl.LogFactoryImpl.newInstance(LogFactoryImpl.java:529)
        at org.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:235)
        at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:370)
        at org.apache.hadoop.conf.Configuration.<clinit>(Configuration.java:54)
        at org.apache.hadoop.dfs.DFSShell.main(DFSShell.java:307)
log4j:ERROR Either File or DatePattern options are not set for appender [DRFA].
Delete failed



> bin/hadoop dfs -rm <dir> crashes in log4j code
> ----------------------------------------------
>
>          Key: HADOOP-272
>          URL: http://issues.apache.org/jira/browse/HADOOP-272
>      Project: Hadoop
>         Type: Bug

>     Versions: 0.3
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley

>
> When I run "bin/hadoop dfs -rm out-dir" I get the following error messages:
> log4j:ERROR setFile(null,true) call failed.
> java.io.FileNotFoundException: /local/owen/hadoop/run/log (Is a directory)
>         at java.io.FileOutputStream.openAppend(Native Method)
>         at java.io.FileOutputStream.<init>(FileOutputStream.java:177)
>         at java.io.FileOutputStream.<init>(FileOutputStream.java:102)
>         at org.apache.log4j.FileAppender.setFile(FileAppender.java:289)
>         at org.apache.log4j.FileAppender.activateOptions(FileAppender.java:163)
>         at org.apache.log4j.DailyRollingFileAppender.activateOptions(DailyRollingFileAppender.java:215)
>         at org.apache.log4j.config.PropertySetter.activate(PropertySetter.java:256)
>         at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:132)
>         at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:96)
>         at org.apache.log4j.PropertyConfigurator.parseAppender(PropertyConfigurator.java:654)
>         at org.apache.log4j.PropertyConfigurator.parseCategory(PropertyConfigurator.java:612)
>         at org.apache.log4j.PropertyConfigurator.configureRootCategory(PropertyConfigurator.java:509)
>         at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:415)
>         at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:441)
>         at org.apache.log4j.helpers.OptionConverter.selectAndConfigure(OptionConverter.java:468)
>         at org.apache.log4j.LogManager.<clinit>(LogManager.java:122)
>         at org.apache.log4j.Logger.getLogger(Logger.java:104)
>         at org.apache.commons.logging.impl.Log4JLogger.getLogger(Log4JLogger.java:229)
>         at org.apache.commons.logging.impl.Log4JLogger.<init>(Log4JLogger.java:65)
>         at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
>         at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
>         at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
>         at java.lang.reflect.Constructor.newInstance(Constructor.java:494)
>         at org.apache.commons.logging.impl.LogFactoryImpl.newInstance(LogFactoryImpl.java:529)
>         at org.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:235)
>         at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:370)
>         at org.apache.hadoop.conf.Configuration.<clinit>(Configuration.java:54)
>         at org.apache.hadoop.dfs.DFSShell.main(DFSShell.java:307)
> log4j:ERROR Either File or DatePattern options are not set for appender [DRFA].
> Delete failed

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun  2 23:23:27 2006
Return-Path: 
 <hadoop-dev-return-1841-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 59174 invoked from network); 2 Jun 2006 23:23:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Jun 2006 23:23:27 -0000
Received: (qmail 80731 invoked by uid 500); 2 Jun 2006 23:23:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 80583 invoked by uid 500); 2 Jun 2006 23:23:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 80574 invoked by uid 99); 2 Jun 2006 23:23:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 16:23:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 16:23:25 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8E24A7141E6
	for <hadoop-dev@lucene.apache.org>; Fri,  2 Jun 2006 23:22:30 +0000 (GMT)
Message-ID: <16966156.1149290550579.JavaMail.jira@brutus>
Date: Fri, 2 Jun 2006 23:22:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-256) Implement a C api for hadoop dfs
In-Reply-To: <6195280.1148675669863.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-256?page=all ]
     
Doug Cutting resolved HADOOP-256:
---------------------------------

    Resolution: Fixed

> Implement a C api for hadoop dfs
> --------------------------------
>
>          Key: HADOOP-256
>          URL: http://issues.apache.org/jira/browse/HADOOP-256
>      Project: Hadoop
>         Type: New Feature

>   Components: dfs
>     Reporter: Arun C Murthy
>      Fix For: 0.3.0
>  Attachments: libhdfs-new.patch.tgz, libhdfs.patch
>
> Implement a C api for hadoop dfs to ease talking to hadoop's dfs from native C/C++ applications.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun  2 23:44:26 2006
Return-Path: 
 <hadoop-dev-return-1842-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 65478 invoked from network); 2 Jun 2006 23:44:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Jun 2006 23:44:26 -0000
Received: (qmail 4575 invoked by uid 500); 2 Jun 2006 23:44:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 4551 invoked by uid 500); 2 Jun 2006 23:44:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 4542 invoked by uid 99); 2 Jun 2006 23:44:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 16:44:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 16:44:25 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A31807141E6
	for <hadoop-dev@lucene.apache.org>; Fri,  2 Jun 2006 23:43:30 +0000 (GMT)
Message-ID: <14767671.1149291810665.JavaMail.jira@brutus>
Date: Fri, 2 Jun 2006 23:43:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-272) bin/hadoop dfs -rm <dir> crashes in
 log4j code
In-Reply-To: <13890984.1149289469881.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-272?page=all ]
     
Doug Cutting resolved HADOOP-272:
---------------------------------

    Fix Version: 0.3.1
     Resolution: Fixed

I just fixed this.

> bin/hadoop dfs -rm <dir> crashes in log4j code
> ----------------------------------------------
>
>          Key: HADOOP-272
>          URL: http://issues.apache.org/jira/browse/HADOOP-272
>      Project: Hadoop
>         Type: Bug

>     Versions: 0.3.0
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.3.1

>
> When I run "bin/hadoop dfs -rm out-dir" I get the following error messages:
> log4j:ERROR setFile(null,true) call failed.
> java.io.FileNotFoundException: /local/owen/hadoop/run/log (Is a directory)
>         at java.io.FileOutputStream.openAppend(Native Method)
>         at java.io.FileOutputStream.<init>(FileOutputStream.java:177)
>         at java.io.FileOutputStream.<init>(FileOutputStream.java:102)
>         at org.apache.log4j.FileAppender.setFile(FileAppender.java:289)
>         at org.apache.log4j.FileAppender.activateOptions(FileAppender.java:163)
>         at org.apache.log4j.DailyRollingFileAppender.activateOptions(DailyRollingFileAppender.java:215)
>         at org.apache.log4j.config.PropertySetter.activate(PropertySetter.java:256)
>         at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:132)
>         at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:96)
>         at org.apache.log4j.PropertyConfigurator.parseAppender(PropertyConfigurator.java:654)
>         at org.apache.log4j.PropertyConfigurator.parseCategory(PropertyConfigurator.java:612)
>         at org.apache.log4j.PropertyConfigurator.configureRootCategory(PropertyConfigurator.java:509)
>         at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:415)
>         at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:441)
>         at org.apache.log4j.helpers.OptionConverter.selectAndConfigure(OptionConverter.java:468)
>         at org.apache.log4j.LogManager.<clinit>(LogManager.java:122)
>         at org.apache.log4j.Logger.getLogger(Logger.java:104)
>         at org.apache.commons.logging.impl.Log4JLogger.getLogger(Log4JLogger.java:229)
>         at org.apache.commons.logging.impl.Log4JLogger.<init>(Log4JLogger.java:65)
>         at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
>         at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
>         at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
>         at java.lang.reflect.Constructor.newInstance(Constructor.java:494)
>         at org.apache.commons.logging.impl.LogFactoryImpl.newInstance(LogFactoryImpl.java:529)
>         at org.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:235)
>         at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:370)
>         at org.apache.hadoop.conf.Configuration.<clinit>(Configuration.java:54)
>         at org.apache.hadoop.dfs.DFSShell.main(DFSShell.java:307)
> log4j:ERROR Either File or DatePattern options are not set for appender [DRFA].
> Delete failed

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Sat Jun  3 00:45:00 2006
Return-Path: 
 <hadoop-dev-return-1843-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 80296 invoked from network); 3 Jun 2006 00:45:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jun 2006 00:45:00 -0000
Received: (qmail 65704 invoked by uid 500); 3 Jun 2006 00:45:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 65675 invoked by uid 500); 3 Jun 2006 00:45:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 65664 invoked by uid 99); 3 Jun 2006 00:44:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 17:44:59 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.228.160.55] (HELO mercury2.inktomi.com) (66.228.160.55)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 17:44:59 -0700
Received: from inbox2.inktomi.com (inbox2.inktomi.com [66.228.160.112])
	by mercury2.inktomi.com (8.13.4/8.13.4) with ESMTP id k530iF56024123
	for <hadoop-dev@lucene.apache.org>; Fri, 2 Jun 2006 17:44:15 -0700 (PDT)
Received: from [10.72.76.151] ([10.72.76.151]) by
          inbox2.inktomi.com (Netscape Messaging Server 4.1) with ESMTP id
          J09E1R00.ON1 for <hadoop-dev@lucene.apache.org>; Fri, 2 Jun 2006
          17:44:15 -0700
Message-ID: <4480DB59.60404@yahoo-inc.com>
Date: Fri, 02 Jun 2006 17:44:09 -0700
From: Sameer Paranjpye <sameerp@yahoo-inc.com>
User-Agent: Mozilla Thunderbird 0.7.1 (Windows/20040626)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: [jira] Resolved: (HADOOP-272) bin/hadoop dfs -rm <dir> crashes
 in log4j code
References: <14767671.1149291810665.JavaMail.jira@brutus>
In-Reply-To: <14767671.1149291810665.JavaMail.jira@brutus>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Really appreciate your patience in getting this committed, Doug. Thanks 
a lot!

Doug Cutting (JIRA) wrote:

>      [ http://issues.apache.org/jira/browse/HADOOP-272?page=all ]
>      
> Doug Cutting resolved HADOOP-272:
> ---------------------------------
> 
>     Fix Version: 0.3.1
>      Resolution: Fixed
> 
> I just fixed this.
> 
> 
>>bin/hadoop dfs -rm <dir> crashes in log4j code
>>----------------------------------------------
>>
>>         Key: HADOOP-272
>>         URL: http://issues.apache.org/jira/browse/HADOOP-272
>>     Project: Hadoop
>>        Type: Bug
> 
> 
>>    Versions: 0.3.0
>>    Reporter: Owen O'Malley
>>    Assignee: Owen O'Malley
>>     Fix For: 0.3.1
> 
> 
>>When I run "bin/hadoop dfs -rm out-dir" I get the following error messages:
>>log4j:ERROR setFile(null,true) call failed.
>>java.io.FileNotFoundException: /local/owen/hadoop/run/log (Is a directory)
>>        at java.io.FileOutputStream.openAppend(Native Method)
>>        at java.io.FileOutputStream.<init>(FileOutputStream.java:177)
>>        at java.io.FileOutputStream.<init>(FileOutputStream.java:102)
>>        at org.apache.log4j.FileAppender.setFile(FileAppender.java:289)
>>        at org.apache.log4j.FileAppender.activateOptions(FileAppender.java:163)
>>        at org.apache.log4j.DailyRollingFileAppender.activateOptions(DailyRollingFileAppender.java:215)
>>        at org.apache.log4j.config.PropertySetter.activate(PropertySetter.java:256)
>>        at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:132)
>>        at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:96)
>>        at org.apache.log4j.PropertyConfigurator.parseAppender(PropertyConfigurator.java:654)
>>        at org.apache.log4j.PropertyConfigurator.parseCategory(PropertyConfigurator.java:612)
>>        at org.apache.log4j.PropertyConfigurator.configureRootCategory(PropertyConfigurator.java:509)
>>        at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:415)
>>        at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:441)
>>        at org.apache.log4j.helpers.OptionConverter.selectAndConfigure(OptionConverter.java:468)
>>        at org.apache.log4j.LogManager.<clinit>(LogManager.java:122)
>>        at org.apache.log4j.Logger.getLogger(Logger.java:104)
>>        at org.apache.commons.logging.impl.Log4JLogger.getLogger(Log4JLogger.java:229)
>>        at org.apache.commons.logging.impl.Log4JLogger.<init>(Log4JLogger.java:65)
>>        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
>>        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
>>        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
>>        at java.lang.reflect.Constructor.newInstance(Constructor.java:494)
>>        at org.apache.commons.logging.impl.LogFactoryImpl.newInstance(LogFactoryImpl.java:529)
>>        at org.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:235)
>>        at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:370)
>>        at org.apache.hadoop.conf.Configuration.<clinit>(Configuration.java:54)
>>        at org.apache.hadoop.dfs.DFSShell.main(DFSShell.java:307)
>>log4j:ERROR Either File or DatePattern options are not set for appender [DRFA].
>>Delete failed
> 
> 

From MAILER-DAEMON Sat Jun  3 00:52:26 2006
Return-Path: 
 <hadoop-dev-return-1844-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 81904 invoked from network); 3 Jun 2006 00:52:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jun 2006 00:52:26 -0000
Received: (qmail 70602 invoked by uid 500); 3 Jun 2006 00:52:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70578 invoked by uid 500); 3 Jun 2006 00:52:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 70567 invoked by uid 99); 3 Jun 2006 00:52:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 17:52:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 17:52:25 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8ACBC7141E4
	for <hadoop-dev@lucene.apache.org>; Sat,  3 Jun 2006 00:51:30 +0000 (GMT)
Message-ID: <5356719.1149295890565.JavaMail.jira@brutus>
Date: Sat, 3 Jun 2006 00:51:30 +0000 (GMT+00:00)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-136) Overlong UTF8's not handled well
In-Reply-To: <64235546.1145045520182.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-136?page=comments#action_12414546 ] 

Michel Tourn commented on HADOOP-136:
-------------------------------------

Just to verify, which length-encoding scheme are we using for class Text (aka LargeUTF8)

a) The "UTF-8/Lucene" scheme? (highest bit of each byte is an extension bit, which I think is what Doug is describing in his last comment) or 
b) the record-IO scheme in o.a.h.record.Utils.java:readInt

Either way, note that:

1. UTF8.java and its successor Text.java need to read the length in two ways: 
  1a.  consume 1+ bytes from a DataInput and 
  1b. parse the length within a byte array at a given offset 
(1.b is used for the "WritableComparator optimized for UTF8 keys" ).  

o.a.h.record.Utils only supports the DataInput mode.
It is not clear to me what is the best way to extend this Utils code when you need to support both reading modes

2 Methods like UTF8's WritableComparator are to be low overhead, in partic. there should be no Object allocation. 
For the byte array case, the varlen-reader utility needs to be extended to return both: 
 the decoded length and the length of the encoded length.
 (so that the caller can do offset += encodedlength)
   
3. A String length does not need (small) negative integers.

4. One advantage of a) is that it is standard (or at least well-known and natural) and there are no magic constants  (like -120, -121 -124)



> Overlong UTF8's not handled well
> --------------------------------
>
>          Key: HADOOP-136
>          URL: http://issues.apache.org/jira/browse/HADOOP-136
>      Project: Hadoop
>         Type: Bug

>   Components: io
>     Versions: 0.2
>     Reporter: Dick King
>     Assignee: Michel Tourn
>     Priority: Minor
>      Fix For: 0.4
>  Attachments: largeutf8.patch
>
> When we feed an overlong string to the UTF8 constructor, two suboptimal things happen.
> First, we truncate to 0xffff/3 characters on the assumption that every character takes three bytes in UTF8.  This can truncate strings that don't need it, and it can be overoptimistic since there are characters that render as four bytes in UTF8.
> Second, the code doesn't actually handle four-byte characters.
> Third, there's a behavioral discontinuity.  If the string is "discovered" to be overlong by the arbitrary limit described above, we truncate with a log message, otherwise we signal a RuntimeException.  One feels that both forms of truncation should be treated alike.  However, this issue is concealed by the second issue; the exception will never be thrown because UTF8.utf8Length can't return more than three times the length of its input.
> I would recommend changing UTF8.utf8Length to let its caller know how many characters of the input string will actually fit if there's an overflow [perhaps by returning the negative of that number] and doing the truncation accurately as needed.
> -dk

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Sat Jun  3 04:47:20 2006
Return-Path: 
 <hadoop-dev-return-1845-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 42290 invoked from network); 3 Jun 2006 04:47:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jun 2006 04:47:20 -0000
Received: (qmail 60403 invoked by uid 500); 3 Jun 2006 04:47:19 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 60263 invoked by uid 500); 3 Jun 2006 04:47:19 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 60254 invoked by uid 99); 3 Jun 2006 04:47:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 21:47:18 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.145.54.171] (HELO mrout1.yahoo.com) (216.145.54.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 21:47:15 -0700
Received: from [10.72.72.249] (snvvpn1-10-72-72-c249.corp.yahoo.com
 [10.72.72.249])
	by mrout1.yahoo.com (8.13.6/8.13.4/y.out) with ESMTP id k534kVLO082380
	for <hadoop-dev@lucene.apache.org>; Fri, 2 Jun 2006 21:46:31 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=message-id:date:from:user-agent:x-accept-language:
	mime-version:to:subject:references:in-reply-to:content-type;
	b=O53nyrETqRKkQdwOnczN2GKz8KLn7oM8zwQ0yOOE6NUnew/ZXKQbMCaKmViBw1jo
Message-ID: <44811427.1030804@yahoo-inc.com>
Date: Fri, 02 Jun 2006 21:46:31 -0700
From: Konstantin Shvachko <shv@yahoo-inc.com>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: hadoop api docs missing on lucene.apache.org?
References: <8BA77DD6-4349-44F0-82D4-D6822064EC79@gmail.com>
 <44808FA7.3030709@apache.org>
In-Reply-To: <44808FA7.3030709@apache.org>
Content-Type: multipart/mixed;
 boundary="------------000507040700000103050304"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--------------000507040700000103050304
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

My nightly build faild again.
TestCopy files and TestDFSIO got errors.
Different ones.
Attaching the logs.

--Konst

Doug Cutting wrote:

> I fixed the nightly build, so the api docs are now back.
>
> I also fixed a problem where nightly build failures were not reported 
> to the developer list, as they should be.
>
> We should still fix things so that old javadoc is not removed when the 
> build fails.  This should be an easy change to:
>
> http://svn.apache.org/viewvc/lucene/hadoop/nightly/nightly.sh?view=markup
>
> Doug
>
> Matt Kangas wrote:
>
>> http://lucene.apache.org/hadoop/docs/api/ is returning 404 for me today.
>>
>> This is at 5:50pm EST, June 1. Is something broken, or merely in- 
>> progress?
>>
>> -- 
>> Matt Kangas / kangas@gmail.com
>>
>>
>>
>
>
>


--------------000507040700000103050304
Content-Type: text/plain;
 name="TEST-org.apache.hadoop.fs.TestDFSIO.txt"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="TEST-org.apache.hadoop.fs.TestDFSIO.txt"

Testsuite: org.apache.hadoop.fs.TestDFSIO
Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 28.077 sec
------------- Standard Error -----------------
060524 122937 parsing file:/C:/Work/Nightly/hadoop/conf/hadoop-default.xml
060524 122937 parsing file:/C:/Work/Nightly/hadoop/src/test/hadoop-site.xml
060524 122937 creating control file: 10 mega bytes, 10 files
060524 122937 created control files for: 10 files
060524 122937 parsing file:/C:/Work/Nightly/hadoop/conf/hadoop-default.xml
060524 122937 parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
060524 122937 parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
060524 122937 parsing file:/C:/Work/Nightly/hadoop/src/test/hadoop-site.xml
060524 122938 parsing file:/C:/Work/Nightly/hadoop/conf/hadoop-default.xml
060524 122939 parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
060524 122939 parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
060524 122939 parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
060524 122939 parsing file:/C:/Work/Nightly/hadoop/src/test/hadoop-site.xml
060524 122939 parsing file:/C:/Work/Nightly/hadoop/conf/hadoop-default.xml
060524 122939 parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
060524 122939 parsing build/test/mapred/local/localRunner/job_p67sge.xml
060524 122939 parsing file:/C:/Work/Nightly/hadoop/src/test/hadoop-site.xml
060524 122939 Running job: job_p67sge
060524 122939 Number of bytes processed = 10485760
060524 122939 Exec time = 282
060524 122939 IO rate = 35.460995
060524 122939 finished test_io_0 ::host = seemeight-dx
060524 122940 Number of bytes processed = 10485760
060524 122940 Exec time = 297
060524 122940 IO rate = 33.670033
060524 122940 finished test_io_1 ::host = seemeight-dx
060524 122940  map 100%  reduce 0%
060524 122941 writing test_io_2@7409664/10485760 ::host = seemeight-dx
060524 122941  map 85%  reduce 0%
060524 122942 Number of bytes processed = 10485760
060524 122942 Exec time = 2484
060524 122942 IO rate = 4.025765
060524 122942 writing test_io_2@10481664/10485760 ::host = seemeight-dx
060524 122942 finished test_io_2 ::host = seemeight-dx
060524 122943  map 100%  reduce 0%
060524 122943 writing test_io_3@6168576/10485760 ::host = seemeight-dx
060524 122944  map 89%  reduce 0%
060524 122944 writing test_io_3@9854976/10485760 ::host = seemeight-dx
060524 122945 Number of bytes processed = 10485760
060524 122945 Exec time = 2703
060524 122945 IO rate = 3.699593
060524 122945 finished test_io_3 ::host = seemeight-dx
060524 122945  map 100%  reduce 0%
060524 122946 writing test_io_4@7340032/10485760 ::host = seemeight-dx
060524 122946  map 91%  reduce 0%
060524 122947 Number of bytes processed = 10485760
060524 122947 Exec time = 2000
060524 122947 IO rate = 5.0
060524 122947 writing test_io_4@10481664/10485760 ::host = seemeight-dx
060524 122947 finished test_io_4 ::host = seemeight-dx
060524 122948 Number of bytes processed = 10485760
060524 122948 Exec time = 812
060524 122948 IO rate = 12.315271
060524 122948 finished test_io_5 ::host = seemeight-dx
060524 122948  map 100%  reduce 0%
060524 122949 writing test_io_6@3977216/10485760 ::host = seemeight-dx
060524 122950  map 94%  reduce 0%
060524 122950 Number of bytes processed = 10485760
060524 122950 Exec time = 2234
060524 122950 IO rate = 4.476276
060524 122950 writing test_io_6@10481664/10485760 ::host = seemeight-dx
060524 122950 finished test_io_6 ::host = seemeight-dx
060524 122951  map 100%  reduce 0%
060524 122951 writing test_io_7@4624384/10485760 ::host = seemeight-dx
060524 122952  map 94%  reduce 0%
060524 122952 writing test_io_7@10035200/10485760 ::host = seemeight-dx
060524 122952 Number of bytes processed = 10485760
060524 122952 Exec time = 2125
060524 122952 IO rate = 4.7058825
060524 122952 finished test_io_7 ::host = seemeight-dx
060524 122953  map 100%  reduce 0%
060524 122953 writing test_io_8@3760128/10485760 ::host = seemeight-dx
060524 122954  map 95%  reduce 0%
060524 122955 writing test_io_8@9613312/10485760 ::host = seemeight-dx
060524 122955 Number of bytes processed = 10485760
060524 122955 Exec time = 2672
060524 122955 IO rate = 3.742515
060524 122955 finished test_io_8 ::host = seemeight-dx
060524 122955  map 100%  reduce 0%
060524 122956 writing test_io_9@6119424/10485760 ::host = seemeight-dx
060524 122956  map 96%  reduce 0%
060524 122957 Number of bytes processed = 10485760
060524 122957 Exec time = 2063
060524 122957 IO rate = 4.8473096
060524 122957 finished test_io_9 ::host = seemeight-dx
060524 122957  map 100%  reduce 0%
060524 123001 Starting AccumulatingReducer !!!
060524 123001 Starting AccumulatingReducer on seemeight-dx
060524 123001 finished l:time ::host = seemeight-dx > reduce
060524 123001  map 100%  reduce 100%
060524 123002 Job complete: job_p67sge
060524 123002 parsing file:/C:/Work/Nightly/hadoop/conf/hadoop-default.xml
060524 123002 parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
060524 123002 parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
060524 123002 parsing file:/C:/Work/Nightly/hadoop/src/test/hadoop-site.xml
060524 123002 parsing file:/C:/Work/Nightly/hadoop/conf/hadoop-default.xml
060524 123002 parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
060524 123002 parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
060524 123002 parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
060524 123002 parsing file:/C:/Work/Nightly/hadoop/src/test/hadoop-site.xml
060524 123002 parsing file:/C:/Work/Nightly/hadoop/conf/hadoop-default.xml
060524 123002 parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
060524 123002 parsing build/test/mapred/local/localRunner/job_n8jyrb.xml
060524 123002 parsing file:/C:/Work/Nightly/hadoop/src/test/hadoop-site.xml
060524 123002 Running job: job_n8jyrb
060524 123003 Number of bytes processed = 10485760
060524 123003 Exec time = 110
060524 123003 IO rate = 90.90909
060524 123003 finished test_io_0 ::host = seemeight-dx
060524 123003 Number of bytes processed = 10485760
060524 123003 Exec time = 78
060524 123003 IO rate = 128.20512
060524 123003 finished test_io_1 ::host = seemeight-dx
060524 123003 Number of bytes processed = 10485760
060524 123003 Exec time = 78
060524 123003 IO rate = 128.20512
060524 123003 finished test_io_2 ::host = seemeight-dx
060524 123003 Number of bytes processed = 10485760
060524 123003 Exec time = 78
060524 123003 IO rate = 128.20512
060524 123003 finished test_io_3 ::host = seemeight-dx
060524 123003 Number of bytes processed = 10485760
060524 123003 Exec time = 110
060524 123003 IO rate = 90.90909
060524 123003 finished test_io_4 ::host = seemeight-dx
060524 123003 Number of bytes processed = 10485760
060524 123003 Exec time = 62
060524 123003 IO rate = 161.29033
060524 123003 finished test_io_5 ::host = seemeight-dx
060524 123003 Number of bytes processed = 10485760
060524 123003 Exec time = 62
060524 123003 IO rate = 161.29033
060524 123003 finished test_io_6 ::host = seemeight-dx
060524 123003 Number of bytes processed = 10485760
060524 123003 Exec time = 78
060524 123003 IO rate = 128.20512
060524 123003 finished test_io_7 ::host = seemeight-dx
060524 123003  map 100%  reduce 0%
060524 123003 Number of bytes processed = 10485760
060524 123003 Exec time = 93
060524 123003 IO rate = 107.52688
060524 123003 finished test_io_8 ::host = seemeight-dx
060524 123004 Number of bytes processed = 10485760
060524 123004 Exec time = 78
060524 123004 IO rate = 128.20512
060524 123004 finished test_io_9 ::host = seemeight-dx
060524 123004 Starting AccumulatingReducer !!!
060524 123004 Starting AccumulatingReducer on seemeight-dx
060524 123004 finished l:time ::host = seemeight-dx > reduce
060524 123004 Job complete: job_n8jyrb
------------- ---------------- ---------------

Testcase: testIOs took 28.062 sec

--------------000507040700000103050304
Content-Type: text/plain;
 name="TEST-org.apache.hadoop.fs.TestCopyFiles.txt"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="TEST-org.apache.hadoop.fs.TestCopyFiles.txt"

Testsuite: org.apache.hadoop.fs.TestCopyFiles
Tests run: 4, Failures: 0, Errors: 0, Time elapsed: 46.812 sec
------------- Standard Error -----------------
060524 122849 parsing file:/C:/Work/Nightly/hadoop/conf/hadoop-default.xml
060524 122849 parsing file:/C:/Work/Nightly/hadoop/src/test/hadoop-site.xml
060524 122849 parsing file:/C:/Work/Nightly/hadoop/conf/hadoop-default.xml
060524 122850 parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
060524 122850 parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
060524 122850 parsing file:/C:/Work/Nightly/hadoop/src/test/hadoop-site.xml
060524 122853 parsing file:/C:/Work/Nightly/hadoop/conf/hadoop-default.xml
060524 122853 parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
060524 122853 parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
060524 122853 parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
060524 122853 parsing file:/C:/Work/Nightly/hadoop/src/test/hadoop-site.xml
060524 122853 parsing file:/C:/Work/Nightly/hadoop/conf/hadoop-default.xml
060524 122854 parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
060524 122854 parsing build/test/mapred/local/localRunner/job_aaan2d.xml
060524 122854 parsing file:/C:/Work/Nightly/hadoop/src/test/hadoop-site.xml
060524 122854 Running job: job_aaan2d
060524 122855  map 0%  reduce 0%
060524 122855 Total bytes copied: 78619
060524 122855 reduce > reduce
060524 122856 Job complete: job_aaan2d
060524 122856 parsing file:/C:/Work/Nightly/hadoop/conf/hadoop-default.xml
060524 122856 parsing file:/C:/Work/Nightly/hadoop/src/test/hadoop-site.xml
060524 122857 Server listener on port 65314: starting
060524 122857 Server handler 0 on 65314: starting
060524 122857 Server handler 1 on 65314: starting
060524 122857 Server handler 2 on 65314: starting
060524 122857 Server handler 3 on 65314: starting
060524 122857 Server handler 4 on 65314: starting
060524 122857 Server handler 5 on 65314: starting
060524 122857 Server handler 6 on 65314: starting
060524 122857 Server handler 7 on 65314: starting
060524 122857 Server handler 8 on 65314: starting
060524 122857 Server handler 9 on 65314: starting
060524 122857 Opened server at 50010
060524 122857 Starting DataNode in: C:\Work\Nightly\hadoop\build\test\data\dfs\data\data
060524 122857 using BLOCKREPORT_INTERVAL of 3503998msec
060524 122857 Server connection on port 65314 from 127.0.0.1: starting
060524 122857 Client connection to 127.0.0.1:65314: starting
060524 122857 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-7960685935010283723
060524 122857 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-755499550818801881
060524 122857 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-736046554480229208
060524 122857 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-301337573335246351
060524 122857 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_1120525972576040502
060524 122857 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_6352713786858598048
060524 122857 Deleting block blk_-7960685935010283723
060524 122857 Deleting block blk_-755499550818801881
060524 122857 Deleting block blk_-736046554480229208
060524 122857 Deleting block blk_-301337573335246351
060524 122857 Deleting block blk_1120525972576040502
060524 122857 Deleting block blk_6352713786858598048
060524 122857 parsing file:/C:/Work/Nightly/hadoop/conf/hadoop-default.xml
060524 122857 parsing file:/C:/Work/Nightly/hadoop/src/test/hadoop-site.xml
060524 122857 Received block blk_340686665350677992 from /66.228.175.136
060524 122857 DIR* FSDirectory.mkdirs: failed to create directory /srcdat
060524 122858 Received block blk_-1906062337706563571 from /66.228.175.136
060524 122858 DIR* FSDirectory.mkdirs: failed to create directory /srcdat
060524 122858 Received block blk_-1643886220858035366 from /66.228.175.136
060524 122858 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/zero
060524 122858 Received block blk_-8822573062929339018 from /66.228.175.136
060524 122858 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/zero
060524 122858 Received block blk_3062102511614697350 from /66.228.175.136
060524 122858 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/two/five
060524 122858 Received block blk_-6485929151738927189 from /66.228.175.136
060524 122858 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/two/five
060524 122858 Received block blk_-1589274123679998618 from /66.228.175.136
060524 122858 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/nine/eight
060524 122858 Received block blk_-2043826059568044052 from /66.228.175.136
060524 122858 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/nine/eight
060524 122858 Received block blk_-7236533791580221271 from /66.228.175.136
060524 122858 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/three/four
060524 122858 Received block blk_-9048315589297022590 from /66.228.175.136
060524 122858 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/three/four
060524 122858 Received block blk_4222401063713652130 from /66.228.175.136
060524 122858 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/eight/seven
060524 122858 Received block blk_-4393368270903061301 from /66.228.175.136
060524 122858 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/eight/seven
060524 122858 Received block blk_-1641465203814062973 from /66.228.175.136
060524 122858 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/one/seven
060524 122858 Received block blk_2448841141547192214 from /66.228.175.136
060524 122858 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/one/seven
060524 122858 Received block blk_-7042905403606246454 from /66.228.175.136
060524 122858 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/seven/nine
060524 122858 Received block blk_2100558714486259377 from /66.228.175.136
060524 122858 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/seven/nine
060524 122858 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/seven
060524 122858 Received block blk_-1083062281738314246 from /66.228.175.136
060524 122858 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/seven
060524 122858 Received block blk_4819092547098148031 from /66.228.175.136
060524 122858 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/seven
060524 122858 DIR* FSDirectory.mkdirs: failed to create directory /srcdat
060524 122858 Received block blk_-8102352271502426482 from /66.228.175.136
060524 122858 DIR* FSDirectory.mkdirs: failed to create directory /srcdat
060524 122858 Received block blk_-642721120705426866 from /66.228.175.136
060524 122858 DIR* FSDirectory.mkdirs: failed to create directory /srcdat
060524 122858 Received block blk_-7519909964804949462 from /66.228.175.136
060524 122858 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/six/five
060524 122858 Received block blk_4549082350148238119 from /66.228.175.136
060524 122858 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/six/five
060524 122858 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/one
060524 122858 Received block blk_-4230333846051285485 from /66.228.175.136
060524 122858 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/one
060524 122858 Received block blk_2643404900056491240 from /66.228.175.136
060524 122858 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/one
060524 122858 Received block blk_2726041063316914913 from /66.228.175.136
060524 122858 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/four
060524 122858 Received block blk_-7252543374344494384 from /66.228.175.136
060524 122858 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/four
060524 122858 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/nine
060524 122858 Received block blk_-2650164784973416845 from /66.228.175.136
060524 122858 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/nine
060524 122858 Received block blk_-874301000054209831 from /66.228.175.136
060524 122858 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/nine
060524 122858 DIR* FSDirectory.mkdirs: failed to create directory /srcdat
060524 122858 Received block blk_3762558499694948642 from /66.228.175.136
060524 122858 DIR* FSDirectory.mkdirs: failed to create directory /srcdat
060524 122858 Received block blk_-7835884231057100788 from /66.228.175.136
060524 122858 DIR* FSDirectory.mkdirs: failed to create directory /srcdat
060524 122858 DIR* FSDirectory.mkdirs: failed to create directory /srcdat
060524 122858 Received block blk_6945295050848231992 from /66.228.175.136
060524 122858 DIR* FSDirectory.mkdirs: failed to create directory /srcdat
060524 122859 Received block blk_843670147784519184 from /66.228.175.136
060524 122859 DIR* FSDirectory.mkdirs: failed to create directory /srcdat
060524 122859 DIR* FSDirectory.mkdirs: failed to create directory /srcdat
060524 122859 Received block blk_-3587967017351880797 from /66.228.175.136
060524 122859 DIR* FSDirectory.mkdirs: failed to create directory /srcdat
060524 122859 Received block blk_-6210475381773927933 from /66.228.175.136
060524 122859 DIR* FSDirectory.mkdirs: failed to create directory /srcdat
060524 122859 DIR* FSDirectory.mkdirs: failed to create directory /srcdat
060524 122859 Received block blk_-8597284761664477979 from /66.228.175.136
060524 122859 DIR* FSDirectory.mkdirs: failed to create directory /srcdat
060524 122859 Received block blk_-4502657069383293812 from /66.228.175.136
060524 122859 DIR* FSDirectory.mkdirs: failed to create directory /srcdat
060524 122859 DIR* FSDirectory.mkdirs: failed to create directory /srcdat
060524 122859 Received block blk_-1022171641183613618 from /66.228.175.136
060524 122859 DIR* FSDirectory.mkdirs: failed to create directory /srcdat
060524 122859 Received block blk_6710422912826226992 from /66.228.175.136
060524 122859 DIR* FSDirectory.mkdirs: failed to create directory /srcdat
060524 122859 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/eight
060524 122859 Received block blk_265032411525840237 from /66.228.175.136
060524 122859 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/eight
060524 122859 Received block blk_-6628725883194013979 from /66.228.175.136
060524 122859 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/eight
060524 122859 parsing file:/C:/Work/Nightly/hadoop/conf/hadoop-default.xml
060524 122859 parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
060524 122859 parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
060524 122859 parsing file:/C:/Work/Nightly/hadoop/src/test/hadoop-site.xml
060524 122859 parsing file:/C:/Work/Nightly/hadoop/conf/hadoop-default.xml
060524 122859 parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
060524 122859 parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
060524 122859 parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
060524 122859 parsing file:/C:/Work/Nightly/hadoop/src/test/hadoop-site.xml
060524 122859 parsing file:/C:/Work/Nightly/hadoop/conf/hadoop-default.xml
060524 122859 parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
060524 122859 parsing build/test/mapred/local/localRunner/job_vrlt6t.xml
060524 122859 parsing file:/C:/Work/Nightly/hadoop/src/test/hadoop-site.xml
060524 122859 Running job: job_vrlt6t
060524 122859 Served block blk_6945295050848231992 to /66.228.175.136
060524 122859 Served block blk_843670147784519184 to /66.228.175.136
060524 122859 Received block blk_-2610974658769031229 from /66.228.175.136
060524 122859 DIR* FSDirectory.mkdirs: failed to create directory /destdat
060524 122859 Received block blk_4644392885097422308 from /66.228.175.136
060524 122859 DIR* FSDirectory.mkdirs: failed to create directory /destdat
060524 122859 Served block blk_-1022171641183613618 to /66.228.175.136
060524 122859 DIR* FSDirectory.mkdirs: failed to create directory /destdat
060524 122900 Served block blk_6710422912826226992 to /66.228.175.136
060524 122900 Received block blk_483385166912198842 from /66.228.175.136
060524 122900 DIR* FSDirectory.mkdirs: failed to create directory /destdat
060524 122900 Received block blk_231371737977099971 from /66.228.175.136
060524 122900 DIR* FSDirectory.mkdirs: failed to create directory /destdat
060524 122900 Served block blk_340686665350677992 to /66.228.175.136
060524 122900 DIR* FSDirectory.mkdirs: failed to create directory /destdat
060524 122900 Served block blk_-1906062337706563571 to /66.228.175.136
060524 122900 Received block blk_-6974837552425462315 from /66.228.175.136
060524 122900 DIR* FSDirectory.mkdirs: failed to create directory /destdat
060524 122900 Received block blk_-1657968006474893630 from /66.228.175.136
060524 122900 DIR* FSDirectory.mkdirs: failed to create directory /destdat
060524 122900 Served block blk_-3587967017351880797 to /66.228.175.136
060524 122900 DIR* FSDirectory.mkdirs: failed to create directory /destdat
060524 122900 Served block blk_-6210475381773927933 to /66.228.175.136
060524 122900 Received block blk_7850416823065828391 from /66.228.175.136
060524 122900 DIR* FSDirectory.mkdirs: failed to create directory /destdat
060524 122900 Received block blk_-3911063179491850908 from /66.228.175.136
060524 122900 DIR* FSDirectory.mkdirs: failed to create directory /destdat
060524 122900 Served block blk_-8102352271502426482 to /66.228.175.136
060524 122900 DIR* FSDirectory.mkdirs: failed to create directory /destdat
060524 122900 Served block blk_-642721120705426866 to /66.228.175.136
060524 122900 Received block blk_6957127663115065865 from /66.228.175.136
060524 122900 DIR* FSDirectory.mkdirs: failed to create directory /destdat
060524 122900 Received block blk_5497771048786044737 from /66.228.175.136
060524 122900 DIR* FSDirectory.mkdirs: failed to create directory /destdat
060524 122900 Served block blk_3762558499694948642 to /66.228.175.136
060524 122900 DIR* FSDirectory.mkdirs: failed to create directory /destdat
060524 122900 Served block blk_-7835884231057100788 to /66.228.175.136
060524 122900 Received block blk_-1447900648499183610 from /66.228.175.136
060524 122900 DIR* FSDirectory.mkdirs: failed to create directory /destdat
060524 122900 Received block blk_1329629712403485210 from /66.228.175.136
060524 122900 DIR* FSDirectory.mkdirs: failed to create directory /destdat
060524 122900 Served block blk_-8597284761664477979 to /66.228.175.136
060524 122900 DIR* FSDirectory.mkdirs: failed to create directory /destdat
060524 122900 Served block blk_-4502657069383293812 to /66.228.175.136
060524 122900 Received block blk_3121304093359269146 from /66.228.175.136
060524 122900 DIR* FSDirectory.mkdirs: failed to create directory /destdat
060524 122900 Received block blk_7602382057267785262 from /66.228.175.136
060524 122900 DIR* FSDirectory.mkdirs: failed to create directory /destdat
060524 122900 Served block blk_265032411525840237 to /66.228.175.136
060524 122900 Served block blk_-6628725883194013979 to /66.228.175.136
060524 122900 Received block blk_-4650534772216759780 from /66.228.175.136
060524 122900 DIR* FSDirectory.mkdirs: failed to create directory /destdat/eight
060524 122900 Received block blk_-8933216312682137397 from /66.228.175.136
060524 122900 DIR* FSDirectory.mkdirs: failed to create directory /destdat/eight
060524 122900 Served block blk_2726041063316914913 to /66.228.175.136
060524 122900 Served block blk_-7252543374344494384 to /66.228.175.136
060524 122900  map 0%  reduce 0%
060524 122900 Received block blk_-4396017827038527369 from /66.228.175.136
060524 122900 DIR* FSDirectory.mkdirs: failed to create directory /destdat/four
060524 122900 Received block blk_6390779861323398183 from /66.228.175.136
060524 122900 DIR* FSDirectory.mkdirs: failed to create directory /destdat/four
060524 122900 Total bytes copied: 41893
060524 122900 Served block blk_-2650164784973416845 to /66.228.175.136
060524 122900 Served block blk_-874301000054209831 to /66.228.175.136
060524 122900 Received block blk_-2556208479979980768 from /66.228.175.136
060524 122900 DIR* FSDirectory.mkdirs: failed to create directory /destdat/nine
060524 122901 Received block blk_-6816242163454791568 from /66.228.175.136
060524 122901 DIR* FSDirectory.mkdirs: failed to create directory /destdat/nine
060524 122901 Served block blk_-4230333846051285485 to /66.228.175.136
060524 122901 Served block blk_2643404900056491240 to /66.228.175.136
060524 122901 Received block blk_-52724423688455997 from /66.228.175.136
060524 122901 DIR* FSDirectory.mkdirs: failed to create directory /destdat/one
060524 122901 Received block blk_2741092713732200992 from /66.228.175.136
060524 122901 DIR* FSDirectory.mkdirs: failed to create directory /destdat/one
060524 122901 Served block blk_-1083062281738314246 to /66.228.175.136
060524 122901 Served block blk_4819092547098148031 to /66.228.175.136
060524 122901 Received block blk_-5918829962491549121 from /66.228.175.136
060524 122901 DIR* FSDirectory.mkdirs: failed to create directory /destdat/seven
060524 122901 Received block blk_-1336961893754111594 from /66.228.175.136
060524 122901 DIR* FSDirectory.mkdirs: failed to create directory /destdat/seven
060524 122901 Served block blk_-1643886220858035366 to /66.228.175.136
060524 122901 Served block blk_-8822573062929339018 to /66.228.175.136
060524 122901 Received block blk_4338165561604821077 from /66.228.175.136
060524 122901 DIR* FSDirectory.mkdirs: failed to create directory /destdat/zero
060524 122901 Received block blk_3508875261594673122 from /66.228.175.136
060524 122901 DIR* FSDirectory.mkdirs: failed to create directory /destdat/zero
060524 122901 Served block blk_4222401063713652130 to /66.228.175.136
060524 122901 Served block blk_-4393368270903061301 to /66.228.175.136
060524 122901 Received block blk_-7300781686082560613 from /66.228.175.136
060524 122901 DIR* FSDirectory.mkdirs: failed to create directory /destdat/eight/seven
060524 122901 Received block blk_-761549383417103136 from /66.228.175.136
060524 122901 DIR* FSDirectory.mkdirs: failed to create directory /destdat/eight/seven
060524 122901 Served block blk_-1589274123679998618 to /66.228.175.136
060524 122901 Served block blk_-2043826059568044052 to /66.228.175.136
060524 122901 Received block blk_2821418513346838966 from /66.228.175.136
060524 122901 DIR* FSDirectory.mkdirs: failed to create directory /destdat/nine/eight
060524 122901 Received block blk_2262838557277649543 from /66.228.175.136
060524 122901 DIR* FSDirectory.mkdirs: failed to create directory /destdat/nine/eight
060524 122901 Served block blk_-1641465203814062973 to /66.228.175.136
060524 122901 Served block blk_2448841141547192214 to /66.228.175.136
060524 122901 Received block blk_1948302872630552263 from /66.228.175.136
060524 122901 DIR* FSDirectory.mkdirs: failed to create directory /destdat/one/seven
060524 122901 Received block blk_1500462591959513474 from /66.228.175.136
060524 122901 DIR* FSDirectory.mkdirs: failed to create directory /destdat/one/seven
060524 122901 Served block blk_-7042905403606246454 to /66.228.175.136
060524 122901 Served block blk_2100558714486259377 to /66.228.175.136
060524 122901 Received block blk_-5078984209259097563 from /66.228.175.136
060524 122901 DIR* FSDirectory.mkdirs: failed to create directory /destdat/seven/nine
060524 122901  map 38%  reduce 0%
060524 122901 Received block blk_-2351405262419868928 from /66.228.175.136
060524 122901 DIR* FSDirectory.mkdirs: failed to create directory /destdat/seven/nine
060524 122901 Served block blk_-7519909964804949462 to /66.228.175.136
060524 122901 Served block blk_4549082350148238119 to /66.228.175.136
060524 122901 Received block blk_-1575613920508126131 from /66.228.175.136
060524 122901 DIR* FSDirectory.mkdirs: failed to create directory /destdat/six/five
060524 122901 Received block blk_773800975261205448 from /66.228.175.136
060524 122901 DIR* FSDirectory.mkdirs: failed to create directory /destdat/six/five
060524 122901 Total bytes copied: 72158
060524 122901 Served block blk_-7236533791580221271 to /66.228.175.136
060524 122901 Served block blk_-9048315589297022590 to /66.228.175.136
060524 122902 Received block blk_-9035434222317423594 from /66.228.175.136
060524 122902 DIR* FSDirectory.mkdirs: failed to create directory /destdat/three/four
060524 122902 Received block blk_-8364175065252404081 from /66.228.175.136
060524 122902 DIR* FSDirectory.mkdirs: failed to create directory /destdat/three/four
060524 122902 Served block blk_3062102511614697350 to /66.228.175.136
060524 122902 Served block blk_-6485929151738927189 to /66.228.175.136
060524 122902 Received block blk_-356505291665596120 from /66.228.175.136
060524 122902 DIR* FSDirectory.mkdirs: failed to create directory /destdat/two/five
060524 122902 Received block blk_5182217664360190861 from /66.228.175.136
060524 122902 DIR* FSDirectory.mkdirs: failed to create directory /destdat/two/five
060524 122902 Total bytes copied: 77969
060524 122902 reduce > reduce
060524 122902 Job complete: job_vrlt6t
060524 122902 Served block blk_-6974837552425462315 to /66.228.175.136
060524 122902 Served block blk_-1657968006474893630 to /66.228.175.136
060524 122902 Served block blk_4338165561604821077 to /66.228.175.136
060524 122902 Served block blk_3508875261594673122 to /66.228.175.136
060524 122902 Served block blk_-356505291665596120 to /66.228.175.136
060524 122902 Served block blk_5182217664360190861 to /66.228.175.136
060524 122902 Served block blk_2821418513346838966 to /66.228.175.136
060524 122903 Served block blk_2262838557277649543 to /66.228.175.136
060524 122903 Served block blk_-9035434222317423594 to /66.228.175.136
060524 122903 Served block blk_-8364175065252404081 to /66.228.175.136
060524 122903 Served block blk_-7300781686082560613 to /66.228.175.136
060524 122903 Served block blk_-761549383417103136 to /66.228.175.136
060524 122903 Served block blk_1948302872630552263 to /66.228.175.136
060524 122903 Served block blk_1500462591959513474 to /66.228.175.136
060524 122903 Served block blk_-5078984209259097563 to /66.228.175.136
060524 122903 Served block blk_-2351405262419868928 to /66.228.175.136
060524 122903 Served block blk_-5918829962491549121 to /66.228.175.136
060524 122903 Served block blk_-1336961893754111594 to /66.228.175.136
060524 122903 Served block blk_6957127663115065865 to /66.228.175.136
060524 122903 Served block blk_5497771048786044737 to /66.228.175.136
060524 122903 Served block blk_-1575613920508126131 to /66.228.175.136
060524 122903 Served block blk_773800975261205448 to /66.228.175.136
060524 122903 Served block blk_-52724423688455997 to /66.228.175.136
060524 122903 Served block blk_2741092713732200992 to /66.228.175.136
060524 122903 Served block blk_-4396017827038527369 to /66.228.175.136
060524 122903 Served block blk_6390779861323398183 to /66.228.175.136
060524 122903 Served block blk_-2556208479979980768 to /66.228.175.136
060524 122903 Served block blk_-6816242163454791568 to /66.228.175.136
060524 122903 Served block blk_-1447900648499183610 to /66.228.175.136
060524 122903 Served block blk_1329629712403485210 to /66.228.175.136
060524 122903 Served block blk_-2610974658769031229 to /66.228.175.136
060524 122903 Served block blk_4644392885097422308 to /66.228.175.136
060524 122903 Served block blk_7850416823065828391 to /66.228.175.136
060524 122903 Served block blk_-3911063179491850908 to /66.228.175.136
060524 122903 Served block blk_3121304093359269146 to /66.228.175.136
060524 122903 Served block blk_7602382057267785262 to /66.228.175.136
060524 122903 Served block blk_483385166912198842 to /66.228.175.136
060524 122903 Served block blk_231371737977099971 to /66.228.175.136
060524 122903 Served block blk_-4650534772216759780 to /66.228.175.136
060524 122903 Served block blk_-8933216312682137397 to /66.228.175.136
060524 122904 Stopping server on 65314
060524 122906 Client connection to 127.0.0.1:65314: closing
060524 122906 Server connection on port 65314 from 127.0.0.1: exiting
060524 122906 Server handler 9 on 65314: exiting
060524 122907 Server listener on port 65314: exiting
060524 122908 Server handler 7 on 65314: exiting
060524 122908 Server handler 2 on 65314: exiting
060524 122908 Server handler 1 on 65314: exiting
060524 122908 Server handler 8 on 65314: exiting
060524 122908 Server handler 0 on 65314: exiting
060524 122908 Server handler 3 on 65314: exiting
060524 122908 Server handler 4 on 65314: exiting
060524 122908 Server handler 6 on 65314: exiting
060524 122908 Server handler 5 on 65314: exiting
060524 122909 Exiting DataXceiveServer due to java.net.SocketException: socket closed
060524 122909 parsing file:/C:/Work/Nightly/hadoop/conf/hadoop-default.xml
060524 122909 parsing file:/C:/Work/Nightly/hadoop/src/test/hadoop-site.xml
060524 122910 Server listener on port 65316: starting
060524 122910 Server handler 0 on 65316: starting
060524 122910 Server handler 1 on 65316: starting
060524 122910 Server handler 2 on 65316: starting
060524 122910 Server handler 3 on 65316: starting
060524 122910 Server handler 4 on 65316: starting
060524 122910 Server handler 5 on 65316: starting
060524 122910 Server handler 6 on 65316: starting
060524 122910 Server handler 7 on 65316: starting
060524 122910 Server handler 8 on 65316: starting
060524 122910 Server handler 9 on 65316: starting
060524 122910 Opened server at 50010
060524 122910 Starting DataNode in: C:\Work\Nightly\hadoop\build\test\data\dfs\data\data
060524 122910 using BLOCKREPORT_INTERVAL of 3546967msec
060524 122910 Server connection on port 65316 from 127.0.0.1: starting
060524 122910 Client connection to 127.0.0.1:65316: starting
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-9048315589297022590
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-9035434222317423594
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-8933216312682137397
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-8822573062929339018
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-8597284761664477979
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-8364175065252404081
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-8102352271502426482
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-7835884231057100788
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-7519909964804949462
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-7300781686082560613
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-7252543374344494384
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-7236533791580221271
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-7042905403606246454
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-6974837552425462315
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-6816242163454791568
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-6628725883194013979
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-6485929151738927189
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-6210475381773927933
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-5918829962491549121
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-5078984209259097563
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-4650534772216759780
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-4502657069383293812
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-4396017827038527369
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-4393368270903061301
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-4230333846051285485
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-3911063179491850908
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-3587967017351880797
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-2650164784973416845
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-2610974658769031229
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-2556208479979980768
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-2351405262419868928
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-2043826059568044052
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-1906062337706563571
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-1657968006474893630
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-1643886220858035366
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-1641465203814062973
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-1589274123679998618
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-1575613920508126131
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-1447900648499183610
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-1336961893754111594
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-1083062281738314246
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-1022171641183613618
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-874301000054209831
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-761549383417103136
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-642721120705426866
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-356505291665596120
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-52724423688455997
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_231371737977099971
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_265032411525840237
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_340686665350677992
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_483385166912198842
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_773800975261205448
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_843670147784519184
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_1329629712403485210
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_1500462591959513474
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_1948302872630552263
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_2100558714486259377
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_2262838557277649543
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_2448841141547192214
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_2643404900056491240
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_2726041063316914913
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_2741092713732200992
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_2821418513346838966
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_3062102511614697350
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_3121304093359269146
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_3508875261594673122
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_3762558499694948642
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_4222401063713652130
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_4338165561604821077
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_4549082350148238119
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_4644392885097422308
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_4819092547098148031
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_5182217664360190861
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_5497771048786044737
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_6390779861323398183
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_6710422912826226992
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_6945295050848231992
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_6957127663115065865
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_7602382057267785262
060524 122910 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_7850416823065828391
060524 122910 Deleting block blk_-9048315589297022590
060524 122910 Deleting block blk_-9035434222317423594
060524 122910 Deleting block blk_-8933216312682137397
060524 122910 Deleting block blk_-8822573062929339018
060524 122910 Deleting block blk_-8597284761664477979
060524 122910 Deleting block blk_-8364175065252404081
060524 122910 Deleting block blk_-8102352271502426482
060524 122910 Deleting block blk_-7835884231057100788
060524 122910 Deleting block blk_-7519909964804949462
060524 122910 Deleting block blk_-7300781686082560613
060524 122910 Deleting block blk_-7252543374344494384
060524 122910 Deleting block blk_-7236533791580221271
060524 122910 Deleting block blk_-7042905403606246454
060524 122910 Deleting block blk_-6974837552425462315
060524 122910 Deleting block blk_-6816242163454791568
060524 122910 Deleting block blk_-6628725883194013979
060524 122910 Deleting block blk_-6485929151738927189
060524 122910 Deleting block blk_-6210475381773927933
060524 122910 Deleting block blk_-5918829962491549121
060524 122910 Deleting block blk_-5078984209259097563
060524 122910 Deleting block blk_-4650534772216759780
060524 122910 Deleting block blk_-4502657069383293812
060524 122910 Deleting block blk_-4396017827038527369
060524 122910 Deleting block blk_-4393368270903061301
060524 122910 Deleting block blk_-4230333846051285485
060524 122910 Deleting block blk_-3911063179491850908
060524 122910 Deleting block blk_-3587967017351880797
060524 122910 Deleting block blk_-2650164784973416845
060524 122910 Deleting block blk_-2610974658769031229
060524 122910 Deleting block blk_-2556208479979980768
060524 122910 Deleting block blk_-2351405262419868928
060524 122910 Deleting block blk_-2043826059568044052
060524 122910 Deleting block blk_-1906062337706563571
060524 122910 Deleting block blk_-1657968006474893630
060524 122910 Deleting block blk_-1643886220858035366
060524 122910 Deleting block blk_-1641465203814062973
060524 122910 Deleting block blk_-1589274123679998618
060524 122910 Deleting block blk_-1575613920508126131
060524 122910 Deleting block blk_-1447900648499183610
060524 122910 Deleting block blk_-1336961893754111594
060524 122910 Deleting block blk_-1083062281738314246
060524 122910 Deleting block blk_-1022171641183613618
060524 122910 Deleting block blk_-874301000054209831
060524 122910 Deleting block blk_-761549383417103136
060524 122910 Deleting block blk_-642721120705426866
060524 122910 Deleting block blk_-356505291665596120
060524 122910 Deleting block blk_-52724423688455997
060524 122910 Deleting block blk_231371737977099971
060524 122910 Deleting block blk_265032411525840237
060524 122910 Deleting block blk_340686665350677992
060524 122910 Deleting block blk_483385166912198842
060524 122910 Deleting block blk_773800975261205448
060524 122910 Deleting block blk_843670147784519184
060524 122910 Deleting block blk_1329629712403485210
060524 122910 Deleting block blk_1500462591959513474
060524 122910 Deleting block blk_1948302872630552263
060524 122910 Deleting block blk_2100558714486259377
060524 122910 Deleting block blk_2262838557277649543
060524 122910 Deleting block blk_2448841141547192214
060524 122910 Deleting block blk_2643404900056491240
060524 122910 Deleting block blk_2726041063316914913
060524 122910 Deleting block blk_2741092713732200992
060524 122910 Deleting block blk_2821418513346838966
060524 122910 Deleting block blk_3062102511614697350
060524 122910 Deleting block blk_3121304093359269146
060524 122910 Deleting block blk_3508875261594673122
060524 122910 Deleting block blk_3762558499694948642
060524 122910 Deleting block blk_4222401063713652130
060524 122910 Deleting block blk_4338165561604821077
060524 122910 Deleting block blk_4549082350148238119
060524 122910 Deleting block blk_4644392885097422308
060524 122910 Deleting block blk_4819092547098148031
060524 122910 Deleting block blk_5182217664360190861
060524 122910 Deleting block blk_5497771048786044737
060524 122910 Deleting block blk_6390779861323398183
060524 122910 Deleting block blk_6710422912826226992
060524 122910 Deleting block blk_6945295050848231992
060524 122910 Deleting block blk_6957127663115065865
060524 122910 Deleting block blk_7602382057267785262
060524 122910 Deleting block blk_7850416823065828391
060524 122911 Exception: java.net.SocketTimeoutException: timed out waiting for rpc response
060524 122911 Finishing DataNode in: C:\Work\Nightly\hadoop\build\test\data\dfs\data\data
060524 122911 parsing file:/C:/Work/Nightly/hadoop/conf/hadoop-default.xml
060524 122911 parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
060524 122911 parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
060524 122911 parsing file:/C:/Work/Nightly/hadoop/src/test/hadoop-site.xml
060524 122911 parsing file:/C:/Work/Nightly/hadoop/conf/hadoop-default.xml
060524 122911 parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
060524 122911 parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
060524 122911 parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
060524 122911 parsing file:/C:/Work/Nightly/hadoop/src/test/hadoop-site.xml
060524 122911 parsing file:/C:/Work/Nightly/hadoop/conf/hadoop-default.xml
060524 122911 parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
060524 122911 parsing build/test/mapred/local/localRunner/job_17t80a.xml
060524 122911 parsing file:/C:/Work/Nightly/hadoop/src/test/hadoop-site.xml
060524 122911 Running job: job_17t80a
060524 122911 Received block blk_8812332068488493486 from /66.228.175.136
060524 122911 DIR* FSDirectory.mkdirs: failed to create directory /destdat
060524 122911 Received block blk_-8076164649985518771 from /66.228.175.136
060524 122911 DIR* FSDirectory.mkdirs: failed to create directory /destdat
060524 122911 DIR* FSDirectory.mkdirs: failed to create directory /destdat
060524 122911 Received block blk_3500239700483129162 from /66.228.175.136
060524 122911 DIR* FSDirectory.mkdirs: failed to create directory /destdat
060524 122911 Received block blk_3616013204111123140 from /66.228.175.136
060524 122911 DIR* FSDirectory.mkdirs: failed to create directory /destdat
060524 122912 DIR* FSDirectory.mkdirs: failed to create directory /destdat
060524 122912 Received block blk_8511195313176221513 from /66.228.175.136
060524 122912 DIR* FSDirectory.mkdirs: failed to create directory /destdat
060524 122912 Received block blk_-3750724935857614171 from /66.228.175.136
060524 122912 DIR* FSDirectory.mkdirs: failed to create directory /destdat
060524 122912 DIR* FSDirectory.mkdirs: failed to create directory /destdat
060524 122912 Received block blk_9010134371438891543 from /66.228.175.136
060524 122912 DIR* FSDirectory.mkdirs: failed to create directory /destdat
060524 122912 Received block blk_8693659776744446963 from /66.228.175.136
060524 122912 DIR* FSDirectory.mkdirs: failed to create directory /destdat
060524 122912 DIR* FSDirectory.mkdirs: failed to create directory /destdat
060524 122912 Received block blk_218717313004778997 from /66.228.175.136
060524 122912 DIR* FSDirectory.mkdirs: failed to create directory /destdat
060524 122912 Received block blk_1065523068234468311 from /66.228.175.136
060524 122912 DIR* FSDirectory.mkdirs: failed to create directory /destdat
060524 122912 DIR* FSDirectory.mkdirs: failed to create directory /destdat
060524 122912 Received block blk_-329072615235813144 from /66.228.175.136
060524 122912  map 0%  reduce 0%
060524 122912 DIR* FSDirectory.mkdirs: failed to create directory /destdat
060524 122912 Received block blk_-417895825885865805 from /66.228.175.136
060524 122912 DIR* FSDirectory.mkdirs: failed to create directory /destdat
060524 122912 Total bytes copied: 19932
060524 122912 DIR* FSDirectory.mkdirs: failed to create directory /destdat
060524 122912 Received block blk_-3018125249961929228 from /66.228.175.136
060524 122912 DIR* FSDirectory.mkdirs: failed to create directory /destdat
060524 122912 Received block blk_-5208506109097347978 from /66.228.175.136
060524 122912 DIR* FSDirectory.mkdirs: failed to create directory /destdat
060524 122912 DIR* FSDirectory.mkdirs: failed to create directory /destdat
060524 122912 Received block blk_-4095894950473430646 from /66.228.175.136
060524 122912 DIR* FSDirectory.mkdirs: failed to create directory /destdat
060524 122912 Received block blk_-5910321301978550223 from /66.228.175.136
060524 122912 DIR* FSDirectory.mkdirs: failed to create directory /destdat
060524 122912 DIR* FSDirectory.mkdirs: failed to create directory /destdat
060524 122912 Received block blk_4517103531783995710 from /66.228.175.136
060524 122912 DIR* FSDirectory.mkdirs: failed to create directory /destdat
060524 122912 Received block blk_-1400245207742446358 from /66.228.175.136
060524 122912 DIR* FSDirectory.mkdirs: failed to create directory /destdat
060524 122912 DIR* FSDirectory.mkdirs: failed to create directory /destdat
060524 122912 Received block blk_-3157031607867794756 from /66.228.175.136
060524 122912 DIR* FSDirectory.mkdirs: failed to create directory /destdat
060524 122912 Received block blk_8351012538492720560 from /66.228.175.136
060524 122912 DIR* FSDirectory.mkdirs: failed to create directory /destdat
060524 122912 Received block blk_348636325175807484 from /66.228.175.136
060524 122912 DIR* FSDirectory.mkdirs: failed to create directory /destdat/eight
060524 122912 Received block blk_7467802521850756847 from /66.228.175.136
060524 122912 DIR* FSDirectory.mkdirs: failed to create directory /destdat/eight
060524 122912 Received block blk_-3636869401836536139 from /66.228.175.136
060524 122912 DIR* FSDirectory.mkdirs: failed to create directory /destdat/five
060524 122912 Received block blk_-5661371275368200443 from /66.228.175.136
060524 122912 DIR* FSDirectory.mkdirs: failed to create directory /destdat/five
060524 122913 Received block blk_-1781142570823864050 from /66.228.175.136
060524 122913 DIR* FSDirectory.mkdirs: failed to create directory /destdat/four
060524 122913 Received block blk_-8944402732473908203 from /66.228.175.136
060524 122913 DIR* FSDirectory.mkdirs: failed to create directory /destdat/four
060524 122913 Received block blk_879569003839100315 from /66.228.175.136
060524 122913 DIR* FSDirectory.mkdirs: failed to create directory /destdat/six
060524 122913 Received block blk_2683596313300863770 from /66.228.175.136
060524 122913 DIR* FSDirectory.mkdirs: failed to create directory /destdat/six
060524 122913 Received block blk_8930801981453574279 from /66.228.175.136
060524 122913 DIR* FSDirectory.mkdirs: failed to create directory /destdat/three
060524 122913 Received block blk_-2886951485580886978 from /66.228.175.136
060524 122913 DIR* FSDirectory.mkdirs: failed to create directory /destdat/three
060524 122913 Received block blk_951962168243757068 from /66.228.175.136
060524 122913 DIR* FSDirectory.mkdirs: failed to create directory /destdat/nine/one
060524 122913 Received block blk_7657688937960407147 from /66.228.175.136
060524 122913 DIR* FSDirectory.mkdirs: failed to create directory /destdat/nine/one
060524 122913 Received block blk_-8156829729899854293 from /66.228.175.136
060524 122913  map 26%  reduce 0%
060524 122913 DIR* FSDirectory.mkdirs: failed to create directory /destdat/seven/eight
060524 122913 Received block blk_7137043870304554018 from /66.228.175.136
060524 122913 DIR* FSDirectory.mkdirs: failed to create directory /destdat/seven/eight
060524 122913 Received block blk_7572994177043093913 from /66.228.175.136
060524 122913 DIR* FSDirectory.mkdirs: failed to create directory /destdat/three/seven
060524 122913 Received block blk_4141031067243363212 from /66.228.175.136
060524 122913 DIR* FSDirectory.mkdirs: failed to create directory /destdat/three/seven
060524 122913 Received block blk_4242549737972761080 from /66.228.175.136
060524 122913 DIR* FSDirectory.mkdirs: failed to create directory /destdat/zero/seven
060524 122913 Received block blk_628334130628680654 from /66.228.175.136
060524 122913 DIR* FSDirectory.mkdirs: failed to create directory /destdat/zero/seven
060524 122913 Total bytes copied: 82619
060524 122913 Received block blk_3760293094919611206 from /66.228.175.136
060524 122913 DIR* FSDirectory.mkdirs: failed to create directory /destdat/zero/two
060524 122913 Received block blk_-7545224556457675359 from /66.228.175.136
060524 122913 DIR* FSDirectory.mkdirs: failed to create directory /destdat/zero/two
060524 122913 Total bytes copied: 84366
060524 122913 reduce > reduce
060524 122914 Job complete: job_17t80a
060524 122914 Served block blk_7572994177043093913 to /66.228.175.136
060524 122914 Served block blk_4141031067243363212 to /66.228.175.136
060524 122914 Served block blk_218717313004778997 to /66.228.175.136
060524 122914 Served block blk_1065523068234468311 to /66.228.175.136
060524 122914 Served block blk_-4095894950473430646 to /66.228.175.136
060524 122914 Served block blk_-5910321301978550223 to /66.228.175.136
060524 122914 Served block blk_3500239700483129162 to /66.228.175.136
060524 122914 Served block blk_3616013204111123140 to /66.228.175.136
060524 122914 Served block blk_879569003839100315 to /66.228.175.136
060524 122914 Served block blk_2683596313300863770 to /66.228.175.136
060524 122914 Served block blk_8930801981453574279 to /66.228.175.136
060524 122914 Served block blk_-2886951485580886978 to /66.228.175.136
060524 122914 Served block blk_-1781142570823864050 to /66.228.175.136
060524 122914 Served block blk_-8944402732473908203 to /66.228.175.136
060524 122914 Served block blk_-3636869401836536139 to /66.228.175.136
060524 122914 Served block blk_-5661371275368200443 to /66.228.175.136
060524 122914 Served block blk_8511195313176221513 to /66.228.175.136
060524 122914 Served block blk_-3750724935857614171 to /66.228.175.136
060524 122914 Served block blk_3760293094919611206 to /66.228.175.136
060524 122914 Served block blk_-7545224556457675359 to /66.228.175.136
060524 122914 Served block blk_-329072615235813144 to /66.228.175.136
060524 122914 Served block blk_-417895825885865805 to /66.228.175.136
060524 122914 Served block blk_348636325175807484 to /66.228.175.136
060524 122914 Served block blk_7467802521850756847 to /66.228.175.136
060524 122914 Served block blk_951962168243757068 to /66.228.175.136
060524 122914 Served block blk_7657688937960407147 to /66.228.175.136
060524 122914 Served block blk_8812332068488493486 to /66.228.175.136
060524 122914 Served block blk_-8076164649985518771 to /66.228.175.136
060524 122914 Served block blk_4242549737972761080 to /66.228.175.136
060524 122915 Served block blk_628334130628680654 to /66.228.175.136
060524 122915 Served block blk_4517103531783995710 to /66.228.175.136
060524 122915 Served block blk_-1400245207742446358 to /66.228.175.136
060524 122915 Served block blk_-3018125249961929228 to /66.228.175.136
060524 122915 Served block blk_-5208506109097347978 to /66.228.175.136
060524 122915 Served block blk_9010134371438891543 to /66.228.175.136
060524 122915 Served block blk_8693659776744446963 to /66.228.175.136
060524 122915 Served block blk_-3157031607867794756 to /66.228.175.136
060524 122915 Served block blk_8351012538492720560 to /66.228.175.136
060524 122915 Served block blk_-8156829729899854293 to /66.228.175.136
060524 122915 Served block blk_7137043870304554018 to /66.228.175.136
060524 122918 Stopping server on 65316
060524 122919 Server connection on port 65316 from 127.0.0.1: exiting
060524 122919 Client connection to 127.0.0.1:65316: closing
060524 122919 Server handler 6 on 65316: exiting
060524 122920 Server listener on port 65316: exiting
060524 122920 Server handler 8 on 65316: exiting
060524 122920 Server handler 9 on 65316: exiting
060524 122920 Server handler 0 on 65316: exiting
060524 122920 Server handler 1 on 65316: exiting
060524 122920 Server handler 2 on 65316: exiting
060524 122920 Server handler 3 on 65316: exiting
060524 122920 Server handler 4 on 65316: exiting
060524 122920 Server handler 5 on 65316: exiting
060524 122921 Server handler 7 on 65316: exiting
060524 122923 Exiting DataXceiveServer due to java.net.SocketException: socket closed
060524 122923 parsing file:/C:/Work/Nightly/hadoop/conf/hadoop-default.xml
060524 122923 parsing file:/C:/Work/Nightly/hadoop/src/test/hadoop-site.xml
060524 122923 Server listener on port 65318: starting
060524 122923 Server handler 0 on 65318: starting
060524 122923 Server handler 1 on 65318: starting
060524 122923 Server handler 2 on 65318: starting
060524 122923 Server handler 3 on 65318: starting
060524 122923 Server handler 4 on 65318: starting
060524 122923 Server handler 5 on 65318: starting
060524 122923 Server handler 6 on 65318: starting
060524 122923 Server handler 7 on 65318: starting
060524 122923 Server handler 8 on 65318: starting
060524 122923 Server handler 9 on 65318: starting
060524 122923 Opened server at 50010
060524 122923 Starting DataNode in: C:\Work\Nightly\hadoop\build\test\data\dfs\data\data
060524 122923 using BLOCKREPORT_INTERVAL of 3477905msec
060524 122923 Server connection on port 65318 from 127.0.0.1: starting
060524 122923 Client connection to 127.0.0.1:65318: starting
060524 122923 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-8944402732473908203
060524 122923 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-8156829729899854293
060524 122923 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-8076164649985518771
060524 122923 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-7545224556457675359
060524 122923 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-5910321301978550223
060524 122923 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-5661371275368200443
060524 122923 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-5208506109097347978
060524 122923 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-4095894950473430646
060524 122923 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-3750724935857614171
060524 122923 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-3636869401836536139
060524 122923 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-3157031607867794756
060524 122923 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-3018125249961929228
060524 122923 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-2886951485580886978
060524 122923 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-1781142570823864050
060524 122923 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-1400245207742446358
060524 122923 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-417895825885865805
060524 122923 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-329072615235813144
060524 122923 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_218717313004778997
060524 122923 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_348636325175807484
060524 122923 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_628334130628680654
060524 122923 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_879569003839100315
060524 122923 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_951962168243757068
060524 122923 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_1065523068234468311
060524 122923 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_2683596313300863770
060524 122923 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_3500239700483129162
060524 122923 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_3616013204111123140
060524 122923 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_3760293094919611206
060524 122923 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_4141031067243363212
060524 122923 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_4242549737972761080
060524 122923 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_4517103531783995710
060524 122923 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_7137043870304554018
060524 122923 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_7467802521850756847
060524 122923 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_7572994177043093913
060524 122923 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_7657688937960407147
060524 122923 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_8351012538492720560
060524 122923 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_8511195313176221513
060524 122923 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_8693659776744446963
060524 122923 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_8812332068488493486
060524 122923 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_8930801981453574279
060524 122923 BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_9010134371438891543
060524 122923 Deleting block blk_-8944402732473908203
060524 122923 Deleting block blk_-8156829729899854293
060524 122923 Deleting block blk_-8076164649985518771
060524 122923 Deleting block blk_-7545224556457675359
060524 122923 Deleting block blk_-5910321301978550223
060524 122923 Deleting block blk_-5661371275368200443
060524 122923 Deleting block blk_-5208506109097347978
060524 122923 Deleting block blk_-4095894950473430646
060524 122923 Deleting block blk_-3750724935857614171
060524 122923 Deleting block blk_-3636869401836536139
060524 122923 Deleting block blk_-3157031607867794756
060524 122923 Deleting block blk_-3018125249961929228
060524 122923 Deleting block blk_-2886951485580886978
060524 122923 Deleting block blk_-1781142570823864050
060524 122923 Deleting block blk_-1400245207742446358
060524 122923 Deleting block blk_-417895825885865805
060524 122923 Deleting block blk_-329072615235813144
060524 122923 Deleting block blk_218717313004778997
060524 122923 Deleting block blk_348636325175807484
060524 122923 Deleting block blk_628334130628680654
060524 122923 Deleting block blk_879569003839100315
060524 122923 Deleting block blk_951962168243757068
060524 122923 Deleting block blk_1065523068234468311
060524 122923 Deleting block blk_2683596313300863770
060524 122923 Deleting block blk_3500239700483129162
060524 122923 Deleting block blk_3616013204111123140
060524 122923 Deleting block blk_3760293094919611206
060524 122923 Deleting block blk_4141031067243363212
060524 122923 Deleting block blk_4242549737972761080
060524 122923 Deleting block blk_4517103531783995710
060524 122923 Deleting block blk_7137043870304554018
060524 122923 Deleting block blk_7467802521850756847
060524 122923 Deleting block blk_7572994177043093913
060524 122923 Deleting block blk_7657688937960407147
060524 122923 Deleting block blk_8351012538492720560
060524 122923 Deleting block blk_8511195313176221513
060524 122923 Deleting block blk_8693659776744446963
060524 122923 Deleting block blk_8812332068488493486
060524 122923 Deleting block blk_8930801981453574279
060524 122923 Deleting block blk_9010134371438891543
060524 122924 Exception: java.net.SocketTimeoutException: timed out waiting for rpc response
060524 122924 Finishing DataNode in: C:\Work\Nightly\hadoop\build\test\data\dfs\data\data
060524 122924 Received block blk_-2210337628765356902 from /66.228.175.136
060524 122924 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/five
060524 122924 Received block blk_-2680499439077561056 from /66.228.175.136
060524 122924 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/five
060524 122924 Received block blk_-2697387660211651060 from /66.228.175.136
060524 122924 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/six/nine
060524 122924 Received block blk_-4573235646835094812 from /66.228.175.136
060524 122924 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/six/nine
060524 122924 Received block blk_-3238052669998200331 from /66.228.175.136
060524 122924 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/four/four
060524 122924 Received block blk_8892831369366782541 from /66.228.175.136
060524 122924 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/four/four
060524 122924 Received block blk_-47322419737815720 from /66.228.175.136
060524 122924 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/two
060524 122924 Received block blk_-2863626004550399710 from /66.228.175.136
060524 122924 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/two
060524 122924 DIR* FSDirectory.mkdirs: failed to create directory /srcdat
060524 122924 Received block blk_-472835451606508641 from /66.228.175.136
060524 122924 DIR* FSDirectory.mkdirs: failed to create directory /srcdat
060524 122924 Received block blk_-5569003723911097252 from /66.228.175.136
060524 122924 DIR* FSDirectory.mkdirs: failed to create directory /srcdat
060524 122924 Received block blk_-6715107242843268727 from /66.228.175.136
060524 122924 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/one
060524 122924 Received block blk_1065142937193123390 from /66.228.175.136
060524 122924 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/one
060524 122924 Received block blk_776817803669209954 from /66.228.175.136
060524 122924 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/two/three
060524 122924 Received block blk_3356953894669916585 from /66.228.175.136
060524 122924 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/two/three
060524 122924 DIR* FSDirectory.mkdirs: failed to create directory /srcdat
060524 122924 Received block blk_-2917424306199696779 from /66.228.175.136
060524 122924 DIR* FSDirectory.mkdirs: failed to create directory /srcdat
060524 122924 Received block blk_4037001314731521709 from /66.228.175.136
060524 122924 DIR* FSDirectory.mkdirs: failed to create directory /srcdat
060524 122924 DIR* FSDirectory.mkdirs: failed to create directory /srcdat
060524 122925 Received block blk_-2312907232574880321 from /66.228.175.136
060524 122925 DIR* FSDirectory.mkdirs: failed to create directory /srcdat
060524 122925 Received block blk_4946282997551717475 from /66.228.175.136
060524 122925 DIR* FSDirectory.mkdirs: failed to create directory /srcdat
060524 122925 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/two
060524 122925 Received block blk_-7321095885563588124 from /66.228.175.136
060524 122925 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/two
060524 122925 Received block blk_-8234759520201024519 from /66.228.175.136
060524 122925 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/two
060524 122925 Received block blk_5754952010429119590 from /66.228.175.136
060524 122925 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/five/one
060524 122925 Received block blk_8732519936255680781 from /66.228.175.136
060524 122925 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/five/one
060524 122925 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/two
060524 122925 Received block blk_-686131070233965036 from /66.228.175.136
060524 122925 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/two
060524 122925 Received block blk_-6325106630837607617 from /66.228.175.136
060524 122925 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/two
060524 122925 Received block blk_-8099410838082336576 from /66.228.175.136
060524 122925 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/seven
060524 122925 Received block blk_-9222607291455398655 from /66.228.175.136
060524 122925 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/seven
060524 122925 Received block blk_8697662690857741364 from /66.228.175.136
060524 122925 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/seven/three
060524 122925 Received block blk_-8146881636759708752 from /66.228.175.136
060524 122925 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/seven/three
060524 122925 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/five
060524 122925 Received block blk_8297869313701959269 from /66.228.175.136
060524 122925 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/five
060524 122925 Received block blk_7360482145684798696 from /66.228.175.136
060524 122925 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/five
060524 122925 DIR* FSDirectory.mkdirs: failed to create directory /srcdat
060524 122925 Received block blk_2091852805496255209 from /66.228.175.136
060524 122925 DIR* FSDirectory.mkdirs: failed to create directory /srcdat
060524 122925 Received block blk_2280441596187766035 from /66.228.175.136
060524 122925 DIR* FSDirectory.mkdirs: failed to create directory /srcdat
060524 122925 Received block blk_1637961734810955174 from /66.228.175.136
060524 122925 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/five/two
060524 122925 Received block blk_-7638745106216830141 from /66.228.175.136
060524 122925 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/five/two
060524 122925 DIR* FSDirectory.mkdirs: failed to create directory /srcdat
060524 122925 Received block blk_5318762412216163531 from /66.228.175.136
060524 122925 DIR* FSDirectory.mkdirs: failed to create directory /srcdat
060524 122925 Received block blk_-995812875359480255 from /66.228.175.136
060524 122925 DIR* FSDirectory.mkdirs: failed to create directory /srcdat
060524 122925 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/four
060524 122925 Received block blk_7328316686581929476 from /66.228.175.136
060524 122925 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/four
060524 122925 Received block blk_8170344175769634534 from /66.228.175.136
060524 122925 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/four
060524 122925 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/six
060524 122925 Received block blk_2523910874701210345 from /66.228.175.136
060524 122925 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/six
060524 122925 Received block blk_5495816712496642984 from /66.228.175.136
060524 122925 DIR* FSDirectory.mkdirs: failed to create directory /srcdat/six
060524 122925 parsing file:/C:/Work/Nightly/hadoop/conf/hadoop-default.xml
060524 122925 parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
060524 122925 parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
060524 122925 parsing file:/C:/Work/Nightly/hadoop/src/test/hadoop-site.xml
060524 122925 parsing file:/C:/Work/Nightly/hadoop/conf/hadoop-default.xml
060524 122925 parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
060524 122925 parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
060524 122925 parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
060524 122925 parsing file:/C:/Work/Nightly/hadoop/src/test/hadoop-site.xml
060524 122925 parsing file:/C:/Work/Nightly/hadoop/conf/hadoop-default.xml
060524 122925 parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
060524 122925 parsing build/test/mapred/local/localRunner/job_ri8260.xml
060524 122925 parsing file:/C:/Work/Nightly/hadoop/src/test/hadoop-site.xml
060524 122925 Running job: job_ri8260
060524 122925 Served block blk_-2917424306199696779 to /66.228.175.136
060524 122926 Served block blk_4037001314731521709 to /66.228.175.136
060524 122926 Served block blk_-2312907232574880321 to /66.228.175.136
060524 122926 Served block blk_4946282997551717475 to /66.228.175.136
060524 122926 Served block blk_-472835451606508641 to /66.228.175.136
060524 122926 Served block blk_-5569003723911097252 to /66.228.175.136
060524 122926 Served block blk_5318762412216163531 to /66.228.175.136
060524 122926 Served block blk_-995812875359480255 to /66.228.175.136
060524 122926 Served block blk_2091852805496255209 to /66.228.175.136
060524 122926 Served block blk_2280441596187766035 to /66.228.175.136
060524 122926 Served block blk_8297869313701959269 to /66.228.175.136
060524 122926 Served block blk_7360482145684798696 to /66.228.175.136
060524 122926 Served block blk_-2210337628765356902 to /66.228.175.136
060524 122926 Served block blk_-2680499439077561056 to /66.228.175.136
060524 122926 Served block blk_7328316686581929476 to /66.228.175.136
060524 122926 Served block blk_8170344175769634534 to /66.228.175.136
060524 122926 Served block blk_-6715107242843268727 to /66.228.175.136
060524 122926 Served block blk_1065142937193123390 to /66.228.175.136
060524 122926 Served block blk_-8099410838082336576 to /66.228.175.136
060524 122926 Served block blk_-9222607291455398655 to /66.228.175.136
060524 122926 Served block blk_2523910874701210345 to /66.228.175.136
060524 122926 Served block blk_5495816712496642984 to /66.228.175.136
060524 122926 Served block blk_-686131070233965036 to /66.228.175.136
060524 122926 Served block blk_-6325106630837607617 to /66.228.175.136
060524 122926 Served block blk_-47322419737815720 to /66.228.175.136
060524 122926 Served block blk_-2863626004550399710 to /66.228.175.136
060524 122926  map 0%  reduce 0%
060524 122926 Served block blk_-7321095885563588124 to /66.228.175.136
060524 122927 Served block blk_-8234759520201024519 to /66.228.175.136
060524 122927 Total bytes copied: 34385
060524 122927 Served block blk_5754952010429119590 to /66.228.175.136
060524 122927 Served block blk_8732519936255680781 to /66.228.175.136
060524 122927 Served block blk_1637961734810955174 to /66.228.175.136
060524 122927 Served block blk_-7638745106216830141 to /66.228.175.136
060524 122927 Served block blk_-3238052669998200331 to /66.228.175.136
060524 122927 Served block blk_8892831369366782541 to /66.228.175.136
060524 122927 Served block blk_8697662690857741364 to /66.228.175.136
060524 122927 Served block blk_-8146881636759708752 to /66.228.175.136
060524 122927 Served block blk_-2697387660211651060 to /66.228.175.136
060524 122927  map 63%  reduce 0%
060524 122927 Served block blk_-4573235646835094812 to /66.228.175.136
060524 122928 Served block blk_776817803669209954 to /66.228.175.136
060524 122928 Served block blk_3356953894669916585 to /66.228.175.136
060524 122928 Total bytes copied: 48019
060524 122928 reduce > reduce
060524 122928 Job complete: job_ri8260
060524 122931 Stopping server on 65318
060524 122932 Server connection on port 65318 from 127.0.0.1: exiting
060524 122932 Client connection to 127.0.0.1:65318: closing
060524 122932 Server handler 6 on 65318: exiting
060524 122932 Server handler 3 on 65318: exiting
060524 122932 Server handler 0 on 65318: exiting
060524 122932 Server handler 4 on 65318: exiting
060524 122932 Server handler 7 on 65318: exiting
060524 122932 Server handler 8 on 65318: exiting
060524 122932 Server handler 1 on 65318: exiting
060524 122933 Server listener on port 65318: exiting
060524 122934 Server handler 2 on 65318: exiting
060524 122934 Server handler 5 on 65318: exiting
060524 122934 Server handler 9 on 65318: exiting
060524 122936 Exiting DataXceiveServer due to java.net.SocketException: socket closed
------------- ---------------- ---------------

Testcase: testCopyFromLocalToLocal took 7.437 sec
Testcase: testCopyFromDfsToDfs took 13.203 sec
Testcase: testCopyFromLocalToDfs took 13.11 sec
Testcase: testCopyFromDfsToLocal took 13.062 sec

--------------000507040700000103050304
Content-Type: message/rfc822;
 name="Attached Message"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="Attached Message"

X-Account-Key: account2
Return-Path: <shv@inktomi.com>
Received: from mrin4.corp.yahoo.com (mrin4.corp.yahoo.com [216.145.48.97])
	by pop1.yahoo.com (8.12.10/8.12.10/pop) with ESMTP id k531XWcp071039
	for <shv@pop1.corp.yahoo.com>; Fri, 2 Jun 2006 18:33:33 -0700 (PDT)
Received: from misery.yst.corp.yahoo.com (misery.yst.corp.yahoo.com
 [66.228.164.22])
	by mrin4.corp.yahoo.com (8.13.6/8.13.6/y.in) with ESMTP id k531XMXC082551
	for <shv@yahoo-inc.com>; Fri, 2 Jun 2006 18:33:22 -0700 (PDT)
Received: from cdev6023.yst.corp.yahoo.com (cdev6023.yst.corp.yahoo.com
 [66.228.165.125])
	by misery.yst.corp.yahoo.com (Postfix) with ESMTP id 908A6FF17
	for <shv@yahoo-inc.com>; Sat,  3 Jun 2006 01:33:12 +0000 (UTC)
Received: by cdev6023.yst.corp.yahoo.com (Postfix, from userid 22644)
	id 76046782D6; Sat,  3 Jun 2006 01:33:12 +0000 (UTC)
To: shv@yahoo-inc.com
Subject: Hadoop-Build-Failed
Message-Id: <20060603013312.76046782D6@cdev6023.yst.corp.yahoo.com>
Date: Sat,  3 Jun 2006 01:33:12 +0000 (UTC)
From: shv@inktomi.com (Konstantin Shvachko)

U    site\index.pdf
U    site\index.html
A    conf\commons-logging.properties
A    conf\log4j.properties
U    CHANGES.txt
A    lib\commons-logging-1.0.4.jar
A    lib\log4j-1.2.13.jar
U    src\test\org\apache\hadoop\io\TestSequenceFile.java
U    src\test\org\apache\hadoop\io\TestSetFile.java
U    src\test\org\apache\hadoop\io\TestArrayFile.java
U    src\test\org\apache\hadoop\fs\TestDFSIO.java
U    src\test\org\apache\hadoop\fs\TestFileSystem.java
U    src\test\org\apache\hadoop\fs\DFSCIOTest.java
U    src\test\org\apache\hadoop\fs\DistributedFSCheck.java
U    src\test\org\apache\hadoop\fs\TestCopyFiles.java
U    src\test\org\apache\hadoop\mapred\TestSequenceFileInputFormat.java
U    src\test\org\apache\hadoop\mapred\TestMapRed.java
U    src\test\org\apache\hadoop\mapred\TestTextInputFormat.java
U    src\test\org\apache\hadoop\ipc\TestRPC.java
U    src\test\org\apache\hadoop\ipc\TestIPC.java
U    src\test\org\apache\hadoop\dfs\ClusterTestDFSNamespaceLogging.java
U    src\test\org\apache\hadoop\dfs\ClusterTestDFS.java
U    src\test\org\apache\hadoop\record\test\TestMapRed.java
U    src\test\org\apache\hadoop\record\test\TestWritable.java
A    src\test\log4j.properties
U    src\contrib\streaming\src\java\org\apache\hadoop\streaming\StreamInputFormat.java
U    src\contrib\streaming\src\java\org\apache\hadoop\streaming\StreamJob.java
U    src\contrib\streaming\src\java\org\apache\hadoop\streaming\StreamBaseRecordReader.java
U    src\java\org\apache\hadoop\conf\Configuration.java
U    src\java\org\apache\hadoop\io\SequenceFile.java
U    src\java\org\apache\hadoop\io\MapFile.java
U    src\java\org\apache\hadoop\io\UTF8.java
U    src\java\org\apache\hadoop\fs\LocalFileSystem.java
U    src\java\org\apache\hadoop\fs\FileSystem.java
U    src\java\org\apache\hadoop\fs\FSDataInputStream.java
U    src\java\org\apache\hadoop\mapred\TaskInProgress.java
U    src\java\org\apache\hadoop\mapred\TaskTracker.java
U    src\java\org\apache\hadoop\mapred\JobInProgress.java
U    src\java\org\apache\hadoop\mapred\JobTracker.java
U    src\java\org\apache\hadoop\mapred\Task.java
U    src\java\org\apache\hadoop\mapred\InputFormatBase.java
U    src\java\org\apache\hadoop\mapred\JobClient.java
U    src\java\org\apache\hadoop\mapred\InterTrackerProtocol.java
U    src\java\org\apache\hadoop\mapred\LocalJobRunner.java
U    src\java\org\apache\hadoop\mapred\ReduceTaskRunner.java
U    src\java\org\apache\hadoop\mapred\TaskRunner.java
U    src\java\org\apache\hadoop\ipc\RPC.java
U    src\java\org\apache\hadoop\ipc\Server.java
U    src\java\org\apache\hadoop\ipc\Client.java
U    src\java\org\apache\hadoop\dfs\DFSClient.java
U    src\java\org\apache\hadoop\dfs\FSNamesystem.java
U    src\java\org\apache\hadoop\dfs\DataNode.java
U    src\java\org\apache\hadoop\dfs\NameNode.java
U    src\java\org\apache\hadoop\dfs\DFSck.java
U    src\java\org\apache\hadoop\dfs\FSDirectory.java
U    src\java\org\apache\hadoop\util\DiskChecker.java
U    src\java\org\apache\hadoop\util\LogFormatter.java
U    src\site\src\documentation\content\xdocs\index.xml
U    bin\hadoop-daemon.sh
U    bin\hadoop
U    build.xml
Updated to revision 411353.
Buildfile: build.xml

init:

record-parser:

compile:
    [javac] Compiling 29 source files to C:\Work\Nightly\hadoop\build\classes
    [javac] Note: C:\Work\Nightly\hadoop\src\java\org\apache\hadoop\mapred\LocalJobRunner.java uses or overrides a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.

jar:
      [tar] Building tar: C:\Work\Nightly\hadoop\build\classes\bin.tgz
      [jar] Building jar: C:\Work\Nightly\hadoop\build\hadoop-0.4-dev.jar

compile-examples:

examples:
      [jar] Building jar: C:\Work\Nightly\hadoop\build\hadoop-0.4-dev-examples.jar

compile-test:
    [javac] Compiling 17 source files to C:\Work\Nightly\hadoop\build\test\classes
    [javac] Note: C:\Work\Nightly\hadoop\src\test\org\apache\hadoop\record\test\TestMapRed.java uses or overrides a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
      [jar] Building jar: C:\Work\Nightly\hadoop\build\hadoop-0.4-dev-test.jar

test:
   [delete] Deleting directory C:\Work\Nightly\hadoop\build\test\data
    [mkdir] Created dir: C:\Work\Nightly\hadoop\build\test\data
    [junit] Running org.apache.hadoop.dfs.TestLocalDFS
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 7.5 sec
    [junit] Running org.apache.hadoop.fs.TestCopyFiles
    [junit] Tests run: 4, Failures: 0, Errors: 2, Time elapsed: 271.92 sec
    [junit] Test org.apache.hadoop.fs.TestCopyFiles FAILED
    [junit] Running org.apache.hadoop.fs.TestDFSIO
    [junit] Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 19.609 sec
    [junit] Test org.apache.hadoop.fs.TestDFSIO FAILED
    [junit] Running org.apache.hadoop.fs.TestFileSystem
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 9.078 sec
    [junit] Running org.apache.hadoop.fs.TestLocalFileSystem
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.359 sec
    [junit] Running org.apache.hadoop.fs.TestPath
    [junit] Tests run: 5, Failures: 0, Errors: 0, Time elapsed: 0.015 sec
    [junit] Running org.apache.hadoop.io.TestArrayFile
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 1.219 sec
    [junit] Running org.apache.hadoop.io.TestBytesWritable
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.032 sec
    [junit] Running org.apache.hadoop.io.TestMD5Hash
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.031 sec
    [junit] Running org.apache.hadoop.io.TestSequenceFile
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 2.625 sec
    [junit] Running org.apache.hadoop.io.TestSetFile
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.89 sec
    [junit] Running org.apache.hadoop.io.TestUTF8
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.219 sec
    [junit] Running org.apache.hadoop.io.TestVersionedWritable
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.032 sec
    [junit] Running org.apache.hadoop.io.TestWritable
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.016 sec
    [junit] Running org.apache.hadoop.ipc.TestIPC
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 7.719 sec
    [junit] Running org.apache.hadoop.ipc.TestRPC
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 5.157 sec
    [junit] Running org.apache.hadoop.mapred.TestMapRed
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 3.844 sec
    [junit] Running org.apache.hadoop.mapred.TestSequenceFileInputFormat
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 3.468 sec
    [junit] Running org.apache.hadoop.mapred.TestTextInputFormat
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 13.188 sec
    [junit] Running org.apache.hadoop.record.test.TestMapRed
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 3.859 sec
    [junit] Running org.apache.hadoop.record.test.TestRecordIO
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.141 sec
    [junit] Running org.apache.hadoop.record.test.TestWritable
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 3.407 sec

BUILD FAILED
C:\Work\Nightly\hadoop\build.xml:266: Tests failed!

Total time: 6 minutes 30 seconds




--------------000507040700000103050304--

From MAILER-DAEMON Sat Jun  3 06:02:02 2006
Return-Path: 
 <hadoop-dev-return-1846-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 61572 invoked from network); 3 Jun 2006 06:02:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jun 2006 06:02:02 -0000
Received: (qmail 10267 invoked by uid 500); 3 Jun 2006 06:02:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 10231 invoked by uid 500); 3 Jun 2006 06:02:02 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 10217 invoked by uid 99); 3 Jun 2006 06:02:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 23:02:02 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.145.54.172] (HELO mrout2.yahoo.com) (216.145.54.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 23:01:58 -0700
Received: from [10.72.76.231] (snvvpn2-10-72-76-c231.corp.yahoo.com
 [10.72.76.231])
	by mrout2.yahoo.com (8.13.6/8.13.4/y.out) with ESMTP id k5360KFc046522
	for <hadoop-dev@lucene.apache.org>; Fri, 2 Jun 2006 23:00:21 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=message-id:date:from:user-agent:x-accept-language:
	mime-version:to:subject:references:in-reply-to:content-type;
	b=gQTHfODHQGrW2v2YhWvh687didv1yNfoM49ekgKar1gEGBsI5vQjweh+50BoAwAw
Message-ID: <44812574.3010107@yahoo-inc.com>
Date: Fri, 02 Jun 2006 23:00:20 -0700
From: Konstantin Shvachko <shv@yahoo-inc.com>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: hadoop api docs missing on lucene.apache.org?
References: <8BA77DD6-4349-44F0-82D4-D6822064EC79@gmail.com>
 <44808FA7.3030709@apache.org> <44811427.1030804@yahoo-inc.com>
In-Reply-To: <44811427.1030804@yahoo-inc.com>
Content-Type: multipart/mixed;
 boundary="------------020403080400060401080302"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--------------020403080400060401080302
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Sorry,
I attached wrong log files last time.
Here are the right ones.
--Konst

Konstantin Shvachko wrote:

> My nightly build faild again.
> TestCopy files and TestDFSIO got errors.
> Different ones.
> Attaching the logs.
>
> --Konst
>
> Doug Cutting wrote:
>
>> I fixed the nightly build, so the api docs are now back.
>>
>> I also fixed a problem where nightly build failures were not reported 
>> to the developer list, as they should be.
>>
>> We should still fix things so that old javadoc is not removed when 
>> the build fails.  This should be an easy change to:
>>
>> http://svn.apache.org/viewvc/lucene/hadoop/nightly/nightly.sh?view=markup 
>>
>>
>> Doug
>>
>> Matt Kangas wrote:
>>
>>> http://lucene.apache.org/hadoop/docs/api/ is returning 404 for me 
>>> today.
>>>
>>> This is at 5:50pm EST, June 1. Is something broken, or merely in- 
>>> progress?
>>>
>>> -- 
>>> Matt Kangas / kangas@gmail.com
>>>
>>>
>>>
>>
>>
>>
>


--------------020403080400060401080302
Content-Type: x-message-display;
 name="Attached Message"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="Attached Message"

<html>
<head>
<title>Hadoop-Build-Failed</title>
<link rel="important stylesheet" href="chrome://messenger/skin/messageBody.css">
</head>
<body>
<table border=0 cellspacing=0 cellpadding=0 width="100%" class="header-part1"><tr><td><div class="headerdisplayname" style="display:inline;">Subject: </div>Hadoop-Build-Failed</td></tr><tr><td><div class="headerdisplayname" style="display:inline;">From: </div>shv@inktomi.com (Konstantin Shvachko)</td></tr><tr><td><div class="headerdisplayname" style="display:inline;">Date: </div>Sat,  3 Jun 2006 01:33:12 +0000 (UTC)</td></tr></table><table border=0 cellspacing=0 cellpadding=0 width="100%" class="header-part2"><tr><td><div class="headerdisplayname" style="display:inline;">To: </div>shv@yahoo-inc.com</td></tr></table><br>
<div class="moz-text-plain" wrap=true graphical-quote=true style="font-family: -moz-fixed; font-size: 13px;" lang="x-western"><pre wrap>U    site\index.pdf
U    site\index.html
A    conf\commons-logging.properties
A    conf\log4j.properties
U    CHANGES.txt
A    lib\commons-logging-1.0.4.jar
A    lib\log4j-1.2.13.jar
U    src\test\org\apache\hadoop\io\TestSequenceFile.java
U    src\test\org\apache\hadoop\io\TestSetFile.java
U    src\test\org\apache\hadoop\io\TestArrayFile.java
U    src\test\org\apache\hadoop\fs\TestDFSIO.java
U    src\test\org\apache\hadoop\fs\TestFileSystem.java
U    src\test\org\apache\hadoop\fs\DFSCIOTest.java
U    src\test\org\apache\hadoop\fs\DistributedFSCheck.java
U    src\test\org\apache\hadoop\fs\TestCopyFiles.java
U    src\test\org\apache\hadoop\mapred\TestSequenceFileInputFormat.java
U    src\test\org\apache\hadoop\mapred\TestMapRed.java
U    src\test\org\apache\hadoop\mapred\TestTextInputFormat.java
U    src\test\org\apache\hadoop\ipc\TestRPC.java
U    src\test\org\apache\hadoop\ipc\TestIPC.java
U    src\test\org\apache\hadoop\dfs\ClusterTestDFSNamespaceLogging.java
U    src\test\org\apache\hadoop\dfs\ClusterTestDFS.java
U    src\test\org\apache\hadoop\record\test\TestMapRed.java
U    src\test\org\apache\hadoop\record\test\TestWritable.java
A    src\test\log4j.properties
U    src\contrib\streaming\src\java\org\apache\hadoop\streaming\StreamInputFormat.java
U    src\contrib\streaming\src\java\org\apache\hadoop\streaming\StreamJob.java
U    src\contrib\streaming\src\java\org\apache\hadoop\streaming\StreamBaseRecordReader.java
U    src\java\org\apache\hadoop\conf\Configuration.java
U    src\java\org\apache\hadoop\io\SequenceFile.java
U    src\java\org\apache\hadoop\io\MapFile.java
U    src\java\org\apache\hadoop\io\UTF8.java
U    src\java\org\apache\hadoop\fs\LocalFileSystem.java
U    src\java\org\apache\hadoop\fs\FileSystem.java
U    src\java\org\apache\hadoop\fs\FSDataInputStream.java
U    src\java\org\apache\hadoop\mapred\TaskInProgress.java
U    src\java\org\apache\hadoop\mapred\TaskTracker.java
U    src\java\org\apache\hadoop\mapred\JobInProgress.java
U    src\java\org\apache\hadoop\mapred\JobTracker.java
U    src\java\org\apache\hadoop\mapred\Task.java
U    src\java\org\apache\hadoop\mapred\InputFormatBase.java
U    src\java\org\apache\hadoop\mapred\JobClient.java
U    src\java\org\apache\hadoop\mapred\InterTrackerProtocol.java
U    src\java\org\apache\hadoop\mapred\LocalJobRunner.java
U    src\java\org\apache\hadoop\mapred\ReduceTaskRunner.java
U    src\java\org\apache\hadoop\mapred\TaskRunner.java
U    src\java\org\apache\hadoop\ipc\RPC.java
U    src\java\org\apache\hadoop\ipc\Server.java
U    src\java\org\apache\hadoop\ipc\Client.java
U    src\java\org\apache\hadoop\dfs\DFSClient.java
U    src\java\org\apache\hadoop\dfs\FSNamesystem.java
U    src\java\org\apache\hadoop\dfs\DataNode.java
U    src\java\org\apache\hadoop\dfs\NameNode.java
U    src\java\org\apache\hadoop\dfs\DFSck.java
U    src\java\org\apache\hadoop\dfs\FSDirectory.java
U    src\java\org\apache\hadoop\util\DiskChecker.java
U    src\java\org\apache\hadoop\util\LogFormatter.java
U    src\site\src\documentation\content\xdocs\index.xml
U    bin\hadoop-daemon.sh
U    bin\hadoop
U    build.xml
Updated to revision 411353.
Buildfile: build.xml

init:

record-parser:

compile:
    [javac] Compiling 29 source files to C:\Work\Nightly\hadoop\build\classes
    [javac] Note: C:\Work\Nightly\hadoop\src\java\org\apache\hadoop\mapred\LocalJobRunner.java uses or overrides a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.

jar:
      [tar] Building tar: C:\Work\Nightly\hadoop\build\classes\bin.tgz
      [jar] Building jar: C:\Work\Nightly\hadoop\build\hadoop-0.4-dev.jar

compile-examples:

examples:
      [jar] Building jar: C:\Work\Nightly\hadoop\build\hadoop-0.4-dev-examples.jar

compile-test:
    [javac] Compiling 17 source files to C:\Work\Nightly\hadoop\build\test\classes
    [javac] Note: C:\Work\Nightly\hadoop\src\test\org\apache\hadoop\record\test\TestMapRed.java uses or overrides a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
      [jar] Building jar: C:\Work\Nightly\hadoop\build\hadoop-0.4-dev-test.jar

test:
   [delete] Deleting directory C:\Work\Nightly\hadoop\build\test\data
    [mkdir] Created dir: C:\Work\Nightly\hadoop\build\test\data
    [junit] Running org.apache.hadoop.dfs.TestLocalDFS
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 7.5 sec
    [junit] Running org.apache.hadoop.fs.TestCopyFiles
    [junit] Tests run: 4, Failures: 0, Errors: 2, Time elapsed: 271.92 sec
    [junit] Test org.apache.hadoop.fs.TestCopyFiles FAILED
    [junit] Running org.apache.hadoop.fs.TestDFSIO
    [junit] Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 19.609 sec
    [junit] Test org.apache.hadoop.fs.TestDFSIO FAILED
    [junit] Running org.apache.hadoop.fs.TestFileSystem
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 9.078 sec
    [junit] Running org.apache.hadoop.fs.TestLocalFileSystem
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.359 sec
    [junit] Running org.apache.hadoop.fs.TestPath
    [junit] Tests run: 5, Failures: 0, Errors: 0, Time elapsed: 0.015 sec
    [junit] Running org.apache.hadoop.io.TestArrayFile
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 1.219 sec
    [junit] Running org.apache.hadoop.io.TestBytesWritable
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.032 sec
    [junit] Running org.apache.hadoop.io.TestMD5Hash
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.031 sec
    [junit] Running org.apache.hadoop.io.TestSequenceFile
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 2.625 sec
    [junit] Running org.apache.hadoop.io.TestSetFile
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.89 sec
    [junit] Running org.apache.hadoop.io.TestUTF8
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.219 sec
    [junit] Running org.apache.hadoop.io.TestVersionedWritable
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.032 sec
    [junit] Running org.apache.hadoop.io.TestWritable
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.016 sec
    [junit] Running org.apache.hadoop.ipc.TestIPC
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 7.719 sec
    [junit] Running org.apache.hadoop.ipc.TestRPC
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 5.157 sec
    [junit] Running org.apache.hadoop.mapred.TestMapRed
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 3.844 sec
    [junit] Running org.apache.hadoop.mapred.TestSequenceFileInputFormat
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 3.468 sec
    [junit] Running org.apache.hadoop.mapred.TestTextInputFormat
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 13.188 sec
    [junit] Running org.apache.hadoop.record.test.TestMapRed
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 3.859 sec
    [junit] Running org.apache.hadoop.record.test.TestRecordIO
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.141 sec
    [junit] Running org.apache.hadoop.record.test.TestWritable
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 3.407 sec

BUILD FAILED
C:\Work\Nightly\hadoop\build.xml:266: Tests failed!

Total time: 6 minutes 30 seconds



</pre></div></body>
</html>
<center><table border><tr><td><div align=right class="headerdisplayname" style="display:inline;">TEST-org.apache.hadoop.fs.TestDFSIO.txt</div></td><td><table border=0></table></td></tr></table></center><br><hr width="90%" size=4><center><table border><tr><td><div align=right class="headerdisplayname" style="display:inline;">TEST-org.apache.hadoop.fs.TestCopyFiles.txt</div></td><td><table border=0></table></td></tr></table></center><br><hr width="90%" size=4><center><table border><tr><td><div align=right class="headerdisplayname" style="display:inline;">Attached Message</div></td><td><table border=0></table></td></tr></table></center><br>
--------------020403080400060401080302
Content-Type: text/plain;
 name="TEST-org.apache.hadoop.fs.TestDFSIO.txt"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="TEST-org.apache.hadoop.fs.TestDFSIO.txt"

Testsuite: org.apache.hadoop.fs.TestDFSIO
Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 19.609 sec
------------- Standard Output ---------------
2006-06-02 18:31:46,946 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/conf/hadoop-default.xml
2006-06-02 18:31:47,009 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/src/test/hadoop-site.xml
2006-06-02 18:31:47,025 INFO  mapred.InputFormatBase (TestDFSIO.java:createControlFile(109)) - creating control file: 10 mega bytes, 10 files
2006-06-02 18:31:47,196 INFO  mapred.InputFormatBase (TestDFSIO.java:createControlFile(129)) - created control files for: 10 files
2006-06-02 18:31:47,196 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/conf/hadoop-default.xml
2006-06-02 18:31:47,228 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
2006-06-02 18:31:47,243 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
2006-06-02 18:31:47,243 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/src/test/hadoop-site.xml
2006-06-02 18:31:47,353 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/conf/hadoop-default.xml
2006-06-02 18:31:47,384 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
2006-06-02 18:31:47,384 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
2006-06-02 18:31:47,400 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
2006-06-02 18:31:47,400 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/src/test/hadoop-site.xml
2006-06-02 18:31:47,431 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/conf/hadoop-default.xml
2006-06-02 18:31:47,462 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
2006-06-02 18:31:47,478 INFO  conf.Configuration (Configuration.java:loadResource(404)) - parsing build/test/mapred/local/localRunner/job_mhsyzb.xml
2006-06-02 18:31:47,493 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/src/test/hadoop-site.xml
2006-06-02 18:31:47,509 INFO  mapred.JobClient (JobClient.java:runJob(314)) - Running job: job_mhsyzb
2006-06-02 18:31:47,728 INFO  mapred.InputFormatBase (TestDFSIO.java:collectStats(159)) - Number of bytes processed = 10485760
2006-06-02 18:31:47,728 INFO  mapred.InputFormatBase (TestDFSIO.java:collectStats(160)) - Exec time = 188
2006-06-02 18:31:47,728 INFO  mapred.InputFormatBase (TestDFSIO.java:collectStats(161)) - IO rate = 53.19149
2006-06-02 18:31:47,728 INFO  mapred.LocalJobRunner (LocalJobRunner.java:progress(140)) - finished test_io_0 ::host = seemeight-dx
2006-06-02 18:31:47,900 INFO  mapred.InputFormatBase (TestDFSIO.java:collectStats(159)) - Number of bytes processed = 10485760
2006-06-02 18:31:47,900 INFO  mapred.InputFormatBase (TestDFSIO.java:collectStats(160)) - Exec time = 157
2006-06-02 18:31:47,900 INFO  mapred.InputFormatBase (TestDFSIO.java:collectStats(161)) - IO rate = 63.694267
2006-06-02 18:31:47,900 INFO  mapred.LocalJobRunner (LocalJobRunner.java:progress(140)) - finished test_io_1 ::host = seemeight-dx
2006-06-02 18:31:48,509 INFO  mapred.JobClient (JobClient.java:runJob(328)) -  map 100%  reduce 0%
2006-06-02 18:31:49,212 INFO  mapred.LocalJobRunner (LocalJobRunner.java:progress(140)) - writing test_io_2@7847936/10485760 ::host = seemeight-dx
2006-06-02 18:31:49,509 INFO  mapred.JobClient (JobClient.java:runJob(328)) -  map 85%  reduce 0%
2006-06-02 18:31:49,696 INFO  mapred.InputFormatBase (TestDFSIO.java:collectStats(159)) - Number of bytes processed = 10485760
2006-06-02 18:31:49,696 INFO  mapred.InputFormatBase (TestDFSIO.java:collectStats(160)) - Exec time = 1781
2006-06-02 18:31:49,696 INFO  mapred.InputFormatBase (TestDFSIO.java:collectStats(161)) - IO rate = 5.6148233
2006-06-02 18:31:49,696 INFO  mapred.LocalJobRunner (LocalJobRunner.java:progress(140)) - finished test_io_2 ::host = seemeight-dx
2006-06-02 18:31:50,509 INFO  mapred.JobClient (JobClient.java:runJob(328)) -  map 100%  reduce 0%
2006-06-02 18:31:50,915 INFO  mapred.LocalJobRunner (LocalJobRunner.java:progress(140)) - writing test_io_3@5332992/10485760 ::host = seemeight-dx
2006-06-02 18:31:51,509 INFO  mapred.JobClient (JobClient.java:runJob(328)) -  map 89%  reduce 0%
2006-06-02 18:31:51,618 INFO  mapred.InputFormatBase (TestDFSIO.java:collectStats(159)) - Number of bytes processed = 10485760
2006-06-02 18:31:51,618 INFO  mapred.InputFormatBase (TestDFSIO.java:collectStats(160)) - Exec time = 1906
2006-06-02 18:31:51,618 INFO  mapred.InputFormatBase (TestDFSIO.java:collectStats(161)) - IO rate = 5.2465897
2006-06-02 18:31:51,618 INFO  mapred.LocalJobRunner (LocalJobRunner.java:progress(140)) - finished test_io_3 ::host = seemeight-dx
2006-06-02 18:31:52,509 INFO  mapred.JobClient (JobClient.java:runJob(328)) -  map 100%  reduce 0%
2006-06-02 18:31:52,696 INFO  mapred.LocalJobRunner (LocalJobRunner.java:progress(140)) - writing test_io_4@2297856/10485760 ::host = seemeight-dx
2006-06-02 18:31:53,509 INFO  mapred.JobClient (JobClient.java:runJob(328)) -  map 91%  reduce 0%
2006-06-02 18:31:53,728 INFO  mapred.LocalJobRunner (LocalJobRunner.java:progress(140)) - writing test_io_4@8044544/10485760 ::host = seemeight-dx
2006-06-02 18:31:54,384 INFO  mapred.InputFormatBase (TestDFSIO.java:collectStats(159)) - Number of bytes processed = 10485760
2006-06-02 18:31:54,384 INFO  mapred.InputFormatBase (TestDFSIO.java:collectStats(160)) - Exec time = 2641
2006-06-02 18:31:54,384 INFO  mapred.InputFormatBase (TestDFSIO.java:collectStats(161)) - IO rate = 3.7864444
2006-06-02 18:31:54,399 INFO  mapred.LocalJobRunner (LocalJobRunner.java:progress(140)) - finished test_io_4 ::host = seemeight-dx
2006-06-02 18:31:54,509 INFO  mapred.JobClient (JobClient.java:runJob(328)) -  map 100%  reduce 0%
2006-06-02 18:31:55,415 INFO  mapred.LocalJobRunner (LocalJobRunner.java:progress(140)) - writing test_io_5@6414336/10485760 ::host = seemeight-dx
2006-06-02 18:31:55,509 INFO  mapred.JobClient (JobClient.java:runJob(328)) -  map 92%  reduce 0%
2006-06-02 18:31:56,415 INFO  mapred.InputFormatBase (TestDFSIO.java:collectStats(159)) - Number of bytes processed = 10485760
2006-06-02 18:31:56,415 INFO  mapred.InputFormatBase (TestDFSIO.java:collectStats(160)) - Exec time = 2016
2006-06-02 18:31:56,415 INFO  mapred.InputFormatBase (TestDFSIO.java:collectStats(161)) - IO rate = 4.9603176
2006-06-02 18:31:56,415 INFO  mapred.LocalJobRunner (LocalJobRunner.java:progress(140)) - finished test_io_5 ::host = seemeight-dx
2006-06-02 18:31:56,509 INFO  mapred.JobClient (JobClient.java:runJob(328)) -  map 100%  reduce 0%
2006-06-02 18:31:57,603 INFO  mapred.LocalJobRunner (LocalJobRunner.java:progress(140)) - writing test_io_6@6070272/10485760 ::host = seemeight-dx
2006-06-02 18:31:58,509 INFO  mapred.JobClient (JobClient.java:runJob(328)) -  map 94%  reduce 0%
2006-06-02 18:31:58,649 INFO  mapred.InputFormatBase (TestDFSIO.java:collectStats(159)) - Number of bytes processed = 10485760
2006-06-02 18:31:58,649 INFO  mapred.InputFormatBase (TestDFSIO.java:collectStats(160)) - Exec time = 2125
2006-06-02 18:31:58,649 INFO  mapred.InputFormatBase (TestDFSIO.java:collectStats(161)) - IO rate = 4.7058825
2006-06-02 18:31:58,649 INFO  mapred.LocalJobRunner (LocalJobRunner.java:progress(140)) - writing test_io_6@10481664/10485760 ::host = seemeight-dx
2006-06-02 18:31:58,696 INFO  mapred.LocalJobRunner (LocalJobRunner.java:progress(140)) - finished test_io_6 ::host = seemeight-dx
2006-06-02 18:31:59,509 INFO  mapred.JobClient (JobClient.java:runJob(328)) -  map 100%  reduce 0%
2006-06-02 18:32:00,384 INFO  mapred.InputFormatBase (TestDFSIO.java:collectStats(159)) - Number of bytes processed = 10485760
2006-06-02 18:32:00,399 INFO  mapred.InputFormatBase (TestDFSIO.java:collectStats(160)) - Exec time = 1672
2006-06-02 18:32:00,399 INFO  mapred.InputFormatBase (TestDFSIO.java:collectStats(161)) - IO rate = 5.980861
2006-06-02 18:32:00,399 INFO  mapred.LocalJobRunner (LocalJobRunner.java:progress(140)) - writing test_io_7@10481664/10485760 ::host = seemeight-dx
2006-06-02 18:32:00,399 INFO  mapred.LocalJobRunner (LocalJobRunner.java:progress(140)) - finished test_io_7 ::host = seemeight-dx
2006-06-02 18:32:01,181 INFO  mapred.InputFormatBase (TestDFSIO.java:collectStats(159)) - Number of bytes processed = 10485760
2006-06-02 18:32:01,181 INFO  mapred.InputFormatBase (TestDFSIO.java:collectStats(160)) - Exec time = 782
2006-06-02 18:32:01,181 INFO  mapred.InputFormatBase (TestDFSIO.java:collectStats(161)) - IO rate = 12.787724
2006-06-02 18:32:01,181 INFO  mapred.LocalJobRunner (LocalJobRunner.java:progress(140)) - finished test_io_8 ::host = seemeight-dx
2006-06-02 18:32:02,196 INFO  mapred.LocalJobRunner (LocalJobRunner.java:progress(140)) - writing test_io_9@4452352/10485760 ::host = seemeight-dx
2006-06-02 18:32:02,509 INFO  mapred.JobClient (JobClient.java:runJob(328)) -  map 96%  reduce 0%
2006-06-02 18:32:03,571 INFO  mapred.InputFormatBase (TestDFSIO.java:collectStats(159)) - Number of bytes processed = 10485760
2006-06-02 18:32:03,571 INFO  mapred.InputFormatBase (TestDFSIO.java:collectStats(160)) - Exec time = 2375
2006-06-02 18:32:03,571 INFO  mapred.InputFormatBase (TestDFSIO.java:collectStats(161)) - IO rate = 4.2105265
2006-06-02 18:32:03,571 INFO  mapred.LocalJobRunner (LocalJobRunner.java:progress(140)) - writing test_io_9@10481664/10485760 ::host = seemeight-dx
2006-06-02 18:32:03,571 INFO  mapred.LocalJobRunner (LocalJobRunner.java:progress(140)) - finished test_io_9 ::host = seemeight-dx
2006-06-02 18:32:04,509 INFO  mapred.JobClient (JobClient.java:runJob(328)) -  map 100%  reduce 0%
2006-06-02 18:32:05,868 WARN  mapred.LocalJobRunner (LocalJobRunner.java:run(119)) - job_mhsyzb
java.lang.NoSuchFieldError: LOG
	at org.apache.hadoop.fs.AccumulatingReducer.<init>(AccumulatingReducer.java:35)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:494)
	at java.lang.Class.newInstance0(Class.java:350)
	at java.lang.Class.newInstance(Class.java:303)
	at org.apache.hadoop.mapred.JobConf.newInstance(JobConf.java:438)
	at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:178)
	at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:111)
------------- ---------------- ---------------

Testcase: testIOs took 19.594 sec
	Caused an ERROR
Job failed!
java.io.IOException: Job failed!
	at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:342)
	at org.apache.hadoop.fs.TestDFSIO.runIOTest(TestDFSIO.java:234)
	at org.apache.hadoop.fs.TestDFSIO.writeTest(TestDFSIO.java:214)
	at org.apache.hadoop.fs.TestDFSIO.testIOs(TestDFSIO.java:100)
	at org.apache.hadoop.fs.TestDFSIO.testIOs(TestDFSIO.java:84)


--------------020403080400060401080302
Content-Type: text/plain;
 name="TEST-org.apache.hadoop.fs.TestCopyFiles.txt"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="TEST-org.apache.hadoop.fs.TestCopyFiles.txt"

Testsuite: org.apache.hadoop.fs.TestCopyFiles
Tests run: 4, Failures: 0, Errors: 2, Time elapsed: 271.92 sec
------------- Standard Output ---------------
2006-06-02 18:27:14,104 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/conf/hadoop-default.xml
2006-06-02 18:27:14,151 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/src/test/hadoop-site.xml
2006-06-02 18:27:14,370 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/conf/hadoop-default.xml
2006-06-02 18:27:14,386 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
2006-06-02 18:27:14,401 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
2006-06-02 18:27:14,401 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/src/test/hadoop-site.xml
2006-06-02 18:27:14,792 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/conf/hadoop-default.xml
2006-06-02 18:27:14,808 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
2006-06-02 18:27:14,823 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
2006-06-02 18:27:14,823 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
2006-06-02 18:27:14,839 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/src/test/hadoop-site.xml
2006-06-02 18:27:14,854 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/conf/hadoop-default.xml
2006-06-02 18:27:14,886 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
2006-06-02 18:27:14,917 INFO  conf.Configuration (Configuration.java:loadResource(404)) - parsing build/test/mapred/local/localRunner/job_l3v1w7.xml
2006-06-02 18:27:14,933 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/src/test/hadoop-site.xml
2006-06-02 18:27:14,933 INFO  mapred.JobClient (JobClient.java:runJob(314)) - Running job: job_l3v1w7
2006-06-02 18:27:15,214 INFO  mapred.LocalJobRunner (LocalJobRunner.java:progress(140)) - Total bytes copied: 95712
2006-06-02 18:27:15,245 INFO  io.SequenceFile (SequenceFile.java:run(586)) - flushing segment 0
2006-06-02 18:27:15,276 INFO  mapred.LocalJobRunner (LocalJobRunner.java:progress(140)) - reduce > reduce
2006-06-02 18:27:15,933 INFO  mapred.JobClient (JobClient.java:runJob(344)) - Job complete: job_l3v1w7
2006-06-02 18:27:16,464 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/conf/hadoop-default.xml
2006-06-02 18:27:16,479 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/src/test/hadoop-site.xml
2006-06-02 18:27:16,604 INFO  dfs.DataNode (DataNode.java:<init>(134)) - Opened server at 50010
2006-06-02 18:27:16,729 INFO  ipc.Server (Server.java:run(101)) - Server listener on port 65314: starting
2006-06-02 18:27:16,729 INFO  ipc.Server (Server.java:run(206)) - Server handler 0 on 65314: starting
2006-06-02 18:27:16,729 INFO  ipc.Server (Server.java:run(206)) - Server handler 1 on 65314: starting
2006-06-02 18:27:16,729 INFO  ipc.Server (Server.java:run(206)) - Server handler 2 on 65314: starting
2006-06-02 18:27:16,745 INFO  ipc.Server (Server.java:run(206)) - Server handler 3 on 65314: starting
2006-06-02 18:27:16,745 INFO  ipc.Server (Server.java:run(206)) - Server handler 4 on 65314: starting
2006-06-02 18:27:16,745 INFO  ipc.Server (Server.java:run(206)) - Server handler 5 on 65314: starting
2006-06-02 18:27:16,745 INFO  ipc.Server (Server.java:run(206)) - Server handler 6 on 65314: starting
2006-06-02 18:27:16,745 INFO  ipc.Server (Server.java:run(206)) - Server handler 7 on 65314: starting
2006-06-02 18:27:16,745 INFO  ipc.Server (Server.java:run(206)) - Server handler 8 on 65314: starting
2006-06-02 18:27:16,745 INFO  ipc.Server (Server.java:run(206)) - Server handler 9 on 65314: starting
2006-06-02 18:27:16,761 INFO  ipc.Server (Server.java:run(152)) - Server connection on port 65314 from 127.0.0.1: starting
2006-06-02 18:27:16,761 INFO  ipc.Client (Client.java:run(142)) - Client connection to 127.0.0.1:65314: starting
2006-06-02 18:27:16,761 INFO  dfs.DataNode (DataNode.java:run(820)) - Starting DataNode in: C:\Work\Nightly\hadoop\build\test\data\dfs\data\data
2006-06-02 18:27:16,761 INFO  dfs.DataNode (DataNode.java:offerService(215)) - using BLOCKREPORT_INTERVAL of 3420729msec
2006-06-02 18:27:16,776 INFO  dfs.StateChange (FSNamesystem.java:processReport(1269)) - BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-7082671442599026642
2006-06-02 18:27:16,776 INFO  dfs.StateChange (FSNamesystem.java:processReport(1269)) - BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-3100497460895801747
2006-06-02 18:27:16,776 INFO  dfs.StateChange (FSNamesystem.java:processReport(1269)) - BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_-3052497027663287400
2006-06-02 18:27:16,776 INFO  dfs.StateChange (FSNamesystem.java:processReport(1269)) - BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_1388874995182409387
2006-06-02 18:27:16,776 INFO  dfs.StateChange (FSNamesystem.java:processReport(1269)) - BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_4956294976120812402
2006-06-02 18:27:16,776 INFO  dfs.StateChange (FSNamesystem.java:processReport(1269)) - BLOCK* NameSystem.processReport: ask seemeight-dx:50010 to delete blk_8063129635329460889
2006-06-02 18:27:17,604 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/conf/hadoop-default.xml
2006-06-02 18:27:17,636 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/src/test/hadoop-site.xml
2006-06-02 18:27:17,745 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_6122581388282243352 from /66.228.175.136
2006-06-02 18:27:17,839 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_-303207780539762691 from /66.228.175.136
2006-06-02 18:27:17,948 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_8441727878314173234 from /66.228.175.136
2006-06-02 18:27:18,011 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_-1152851203241427168 from /66.228.175.136
2006-06-02 18:27:18,042 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_-6539051000011542013 from /66.228.175.136
2006-06-02 18:27:18,073 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_-939264310845685241 from /66.228.175.136
2006-06-02 18:27:18,136 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_-6812010831612327631 from /66.228.175.136
2006-06-02 18:27:18,167 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_-3834509143167342248 from /66.228.175.136
2006-06-02 18:27:18,198 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_-3515866034248955270 from /66.228.175.136
2006-06-02 18:27:18,214 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_-6970771865462818773 from /66.228.175.136
2006-06-02 18:27:18,261 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_-2807813093770336520 from /66.228.175.136
2006-06-02 18:27:18,308 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_-8853366155651393299 from /66.228.175.136
2006-06-02 18:27:18,354 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_-8283277437850005339 from /66.228.175.136
2006-06-02 18:27:18,464 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_-2238100008368532345 from /66.228.175.136
2006-06-02 18:27:18,573 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_7064362463617777696 from /66.228.175.136
2006-06-02 18:27:18,620 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_5807946040204007358 from /66.228.175.136
2006-06-02 18:27:18,667 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_-8859017298642791760 from /66.228.175.136
2006-06-02 18:27:18,698 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_5869562480341134044 from /66.228.175.136
2006-06-02 18:27:18,745 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_-7101054293214919543 from /66.228.175.136
2006-06-02 18:27:18,823 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_8923042963161431952 from /66.228.175.136
2006-06-02 18:27:18,901 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_3016284376043801422 from /66.228.175.136
2006-06-02 18:27:18,979 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_5258397125218433298 from /66.228.175.136
2006-06-02 18:27:19,089 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_7083174994467984599 from /66.228.175.136
2006-06-02 18:27:19,120 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_-4953081049506868598 from /66.228.175.136
2006-06-02 18:27:19,167 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_7778067044620578355 from /66.228.175.136
2006-06-02 18:27:19,198 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_7958009868423743410 from /66.228.175.136
2006-06-02 18:27:19,229 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_-5248057008832948496 from /66.228.175.136
2006-06-02 18:27:19,245 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_390144658093908921 from /66.228.175.136
2006-06-02 18:27:19,276 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_130520752571319449 from /66.228.175.136
2006-06-02 18:27:19,307 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_5196233136812415594 from /66.228.175.136
2006-06-02 18:27:19,323 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_7712339720262802047 from /66.228.175.136
2006-06-02 18:27:19,370 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_-5956211356288774259 from /66.228.175.136
2006-06-02 18:27:19,417 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_-7107183067379902020 from /66.228.175.136
2006-06-02 18:27:19,464 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_6178340768448393357 from /66.228.175.136
2006-06-02 18:27:19,511 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_8323981765256088949 from /66.228.175.136
2006-06-02 18:27:19,557 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_7854252541751346266 from /66.228.175.136
2006-06-02 18:27:19,604 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_-2423827762866669730 from /66.228.175.136
2006-06-02 18:27:19,682 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_8703103853409326480 from /66.228.175.136
2006-06-02 18:27:19,729 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_-4309204208950263678 from /66.228.175.136
2006-06-02 18:27:19,776 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_-4568412801334093096 from /66.228.175.136
2006-06-02 18:27:19,807 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/conf/hadoop-default.xml
2006-06-02 18:27:19,823 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
2006-06-02 18:27:19,823 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
2006-06-02 18:27:19,823 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/src/test/hadoop-site.xml
2006-06-02 18:27:19,917 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/conf/hadoop-default.xml
2006-06-02 18:27:19,917 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
2006-06-02 18:27:19,932 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
2006-06-02 18:27:19,932 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
2006-06-02 18:27:19,932 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/src/test/hadoop-site.xml
2006-06-02 18:27:19,948 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/conf/hadoop-default.xml
2006-06-02 18:27:19,995 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
2006-06-02 18:27:19,995 INFO  conf.Configuration (Configuration.java:loadResource(404)) - parsing build/test/mapred/local/localRunner/job_sbklao.xml
2006-06-02 18:27:20,011 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/src/test/hadoop-site.xml
2006-06-02 18:27:20,011 INFO  mapred.JobClient (JobClient.java:runJob(314)) - Running job: job_sbklao
2006-06-02 18:27:20,042 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_8441727878314173234 to /66.228.175.136
2006-06-02 18:27:20,057 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_-1152851203241427168 to /66.228.175.136
2006-06-02 18:27:20,073 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_3676630106659779140 from /66.228.175.136
2006-06-02 18:27:20,089 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_-3292495106115976818 from /66.228.175.136
2006-06-02 18:27:20,120 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_8323981765256088949 to /66.228.175.136
2006-06-02 18:27:20,120 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_7854252541751346266 to /66.228.175.136
2006-06-02 18:27:20,151 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_-8681373436569994336 from /66.228.175.136
2006-06-02 18:27:20,167 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_5419782376111734436 from /66.228.175.136
2006-06-02 18:27:20,198 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_3016284376043801422 to /66.228.175.136
2006-06-02 18:27:20,198 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_5258397125218433298 to /66.228.175.136
2006-06-02 18:27:20,214 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_2393407236204398262 from /66.228.175.136
2006-06-02 18:27:20,245 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_-3921028916568307259 from /66.228.175.136
2006-06-02 18:27:20,292 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_-6539051000011542013 to /66.228.175.136
2006-06-02 18:27:20,307 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_-939264310845685241 to /66.228.175.136
2006-06-02 18:27:20,323 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_4573162731756020361 from /66.228.175.136
2006-06-02 18:27:20,354 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_-275117285867493699 from /66.228.175.136
2006-06-02 18:27:20,370 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_-2423827762866669730 to /66.228.175.136
2006-06-02 18:27:20,386 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_8703103853409326480 to /66.228.175.136
2006-06-02 18:27:20,401 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_-6648975403543263997 from /66.228.175.136
2006-06-02 18:27:20,432 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_-6817361391708233449 from /66.228.175.136
2006-06-02 18:27:20,448 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_7778067044620578355 to /66.228.175.136
2006-06-02 18:27:20,464 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_7958009868423743410 to /66.228.175.136
2006-06-02 18:27:20,479 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_6417255514325936444 from /66.228.175.136
2006-06-02 18:27:20,511 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_6060732311186660871 from /66.228.175.136
2006-06-02 18:27:20,526 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_-8859017298642791760 to /66.228.175.136
2006-06-02 18:27:20,542 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_5869562480341134044 to /66.228.175.136
2006-06-02 18:27:20,557 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_6956616852486295035 from /66.228.175.136
2006-06-02 18:27:20,589 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_-2481611156517984118 from /66.228.175.136
2006-06-02 18:27:20,604 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_-2807813093770336520 to /66.228.175.136
2006-06-02 18:27:20,620 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_-8853366155651393299 to /66.228.175.136
2006-06-02 18:27:20,636 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_3119229890221512828 from /66.228.175.136
2006-06-02 18:27:20,651 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_8610629717310462923 from /66.228.175.136
2006-06-02 18:27:20,682 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_-8283277437850005339 to /66.228.175.136
2006-06-02 18:27:20,698 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_-2238100008368532345 to /66.228.175.136
2006-06-02 18:27:20,714 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_9093189725379256179 from /66.228.175.136
2006-06-02 18:27:20,729 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_-4798993237303242808 from /66.228.175.136
2006-06-02 18:27:20,761 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_-5248057008832948496 to /66.228.175.136
2006-06-02 18:27:20,761 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_390144658093908921 to /66.228.175.136
2006-06-02 18:27:20,792 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_3395420509518275152 from /66.228.175.136
2006-06-02 18:27:20,807 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_-5456404942753878987 from /66.228.175.136
2006-06-02 18:27:20,823 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_7064362463617777696 to /66.228.175.136
2006-06-02 18:27:20,839 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_5807946040204007358 to /66.228.175.136
2006-06-02 18:27:20,854 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_-4067857933016633147 from /66.228.175.136
2006-06-02 18:27:20,886 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_4241904270394213792 from /66.228.175.136
2006-06-02 18:27:20,901 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_-3515866034248955270 to /66.228.175.136
2006-06-02 18:27:20,917 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_-6970771865462818773 to /66.228.175.136
2006-06-02 18:27:20,932 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_8905085549370312325 from /66.228.175.136
2006-06-02 18:27:20,964 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_-4696687411998676779 from /66.228.175.136
2006-06-02 18:27:20,995 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_-7107183067379902020 to /66.228.175.136
2006-06-02 18:27:20,995 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_6178340768448393357 to /66.228.175.136
2006-06-02 18:27:21,011 INFO  mapred.JobClient (JobClient.java:runJob(328)) -  map 0%  reduce 0%
2006-06-02 18:27:21,026 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_-7016133304877834419 from /66.228.175.136
2006-06-02 18:27:21,042 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_5887788395212421251 from /66.228.175.136
2006-06-02 18:27:21,057 INFO  mapred.LocalJobRunner (LocalJobRunner.java:progress(140)) - Total bytes copied: 55381
2006-06-02 18:27:21,089 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_-7101054293214919543 to /66.228.175.136
2006-06-02 18:27:21,104 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_8923042963161431952 to /66.228.175.136
2006-06-02 18:27:21,104 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_3902672412656207655 from /66.228.175.136
2006-06-02 18:27:21,136 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_3615403691457773855 from /66.228.175.136
2006-06-02 18:27:21,151 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_6122581388282243352 to /66.228.175.136
2006-06-02 18:27:21,167 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_-303207780539762691 to /66.228.175.136
2006-06-02 18:27:21,182 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_-551437417451918611 from /66.228.175.136
2006-06-02 18:27:21,214 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_-3678645562948819192 from /66.228.175.136
2006-06-02 18:27:21,229 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_130520752571319449 to /66.228.175.136
2006-06-02 18:27:21,245 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_5196233136812415594 to /66.228.175.136
2006-06-02 18:27:21,261 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_-5405851275944547060 from /66.228.175.136
2006-06-02 18:27:21,276 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_-3560141991131278613 from /66.228.175.136
2006-06-02 18:27:21,354 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_7083174994467984599 to /66.228.175.136
2006-06-02 18:27:21,370 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_-4953081049506868598 to /66.228.175.136
2006-06-02 18:27:21,386 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_4335654176709460618 from /66.228.175.136
2006-06-02 18:27:21,401 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_8964116838291357800 from /66.228.175.136
2006-06-02 18:27:21,432 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_-4309204208950263678 to /66.228.175.136
2006-06-02 18:27:21,448 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_-4568412801334093096 to /66.228.175.136
2006-06-02 18:27:21,464 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_-8827831858291745719 from /66.228.175.136
2006-06-02 18:27:21,479 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_-8600487782711930123 from /66.228.175.136
2006-06-02 18:27:21,495 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_-6812010831612327631 to /66.228.175.136
2006-06-02 18:27:21,511 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_-3834509143167342248 to /66.228.175.136
2006-06-02 18:27:21,526 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_7795933834266075276 from /66.228.175.136
2006-06-02 18:27:21,557 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_9160684608113333506 from /66.228.175.136
2006-06-02 18:27:21,573 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_7712339720262802047 to /66.228.175.136
2006-06-02 18:27:21,589 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_-5956211356288774259 to /66.228.175.136
2006-06-02 18:27:21,604 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_7468279983057238202 from /66.228.175.136
2006-06-02 18:27:21,636 INFO  dfs.DataNode (DataNode.java:writeBlock(697)) - Received block blk_-5013867384676956834 from /66.228.175.136
2006-06-02 18:27:21,636 INFO  mapred.LocalJobRunner (LocalJobRunner.java:progress(140)) - Total bytes copied: 79176
2006-06-02 18:27:21,651 INFO  io.SequenceFile (SequenceFile.java:run(586)) - flushing segment 0
2006-06-02 18:27:21,682 INFO  mapred.LocalJobRunner (LocalJobRunner.java:progress(140)) - reduce > reduce
2006-06-02 18:27:22,011 INFO  mapred.JobClient (JobClient.java:runJob(344)) - Job complete: job_sbklao
2006-06-02 18:27:22,073 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_-551437417451918611 to /66.228.175.136
2006-06-02 18:27:22,073 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_-3678645562948819192 to /66.228.175.136
2006-06-02 18:27:22,089 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_3676630106659779140 to /66.228.175.136
2006-06-02 18:27:22,104 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_-3292495106115976818 to /66.228.175.136
2006-06-02 18:27:22,120 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_4573162731756020361 to /66.228.175.136
2006-06-02 18:27:22,136 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_-275117285867493699 to /66.228.175.136
2006-06-02 18:27:22,151 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_7795933834266075276 to /66.228.175.136
2006-06-02 18:27:22,167 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_9160684608113333506 to /66.228.175.136
2006-06-02 18:27:22,182 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_8905085549370312325 to /66.228.175.136
2006-06-02 18:27:22,198 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_-4696687411998676779 to /66.228.175.136
2006-06-02 18:27:22,214 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_3119229890221512828 to /66.228.175.136
2006-06-02 18:27:22,214 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_8610629717310462923 to /66.228.175.136
2006-06-02 18:27:22,229 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_9093189725379256179 to /66.228.175.136
2006-06-02 18:27:22,245 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_-4798993237303242808 to /66.228.175.136
2006-06-02 18:27:22,261 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_-4067857933016633147 to /66.228.175.136
2006-06-02 18:27:22,276 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_4241904270394213792 to /66.228.175.136
2006-06-02 18:27:22,276 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_6956616852486295035 to /66.228.175.136
2006-06-02 18:27:22,292 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_-2481611156517984118 to /66.228.175.136
2006-06-02 18:27:22,307 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_3902672412656207655 to /66.228.175.136
2006-06-02 18:27:22,323 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_3615403691457773855 to /66.228.175.136
2006-06-02 18:27:22,339 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_2393407236204398262 to /66.228.175.136
2006-06-02 18:27:22,354 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_-3921028916568307259 to /66.228.175.136
2006-06-02 18:27:22,370 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_4335654176709460618 to /66.228.175.136
2006-06-02 18:27:22,370 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_8964116838291357800 to /66.228.175.136
2006-06-02 18:27:22,386 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_6417255514325936444 to /66.228.175.136
2006-06-02 18:27:22,401 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_6060732311186660871 to /66.228.175.136
2006-06-02 18:27:22,417 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_3395420509518275152 to /66.228.175.136
2006-06-02 18:27:22,432 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_-5456404942753878987 to /66.228.175.136
2006-06-02 18:27:22,432 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_-5405851275944547060 to /66.228.175.136
2006-06-02 18:27:22,448 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_-3560141991131278613 to /66.228.175.136
2006-06-02 18:27:22,464 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_7468279983057238202 to /66.228.175.136
2006-06-02 18:27:22,479 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_-5013867384676956834 to /66.228.175.136
2006-06-02 18:27:22,495 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_-7016133304877834419 to /66.228.175.136
2006-06-02 18:27:22,495 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_5887788395212421251 to /66.228.175.136
2006-06-02 18:27:22,511 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_-8681373436569994336 to /66.228.175.136
2006-06-02 18:27:22,526 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_5419782376111734436 to /66.228.175.136
2006-06-02 18:27:22,542 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_-6648975403543263997 to /66.228.175.136
2006-06-02 18:27:22,557 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_-6817361391708233449 to /66.228.175.136
2006-06-02 18:27:22,573 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_-8827831858291745719 to /66.228.175.136
2006-06-02 18:27:22,589 INFO  dfs.DataNode (DataNode.java:readBlock(501)) - Served block blk_-8600487782711930123 to /66.228.175.136
2006-06-02 18:27:22,729 INFO  ipc.Server (Server.java:stop(299)) - Stopping server on 65314
2006-06-02 18:27:26,745 INFO  ipc.Server (Server.java:run(129)) - Server listener on port 65314: exiting
2006-06-02 18:27:27,511 INFO  ipc.Server (Server.java:run(255)) - Server handler 0 on 65314: exiting
2006-06-02 18:27:27,511 INFO  ipc.Server (Server.java:run(255)) - Server handler 6 on 65314: exiting
2006-06-02 18:27:27,526 INFO  ipc.Server (Server.java:run(255)) - Server handler 8 on 65314: exiting
2006-06-02 18:27:27,542 INFO  ipc.Server (Server.java:run(255)) - Server handler 2 on 65314: exiting
2006-06-02 18:27:27,557 INFO  ipc.Server (Server.java:run(255)) - Server handler 4 on 65314: exiting
2006-06-02 18:27:27,557 INFO  ipc.Server (Server.java:run(255)) - Server handler 3 on 65314: exiting
2006-06-02 18:27:27,589 INFO  ipc.Server (Server.java:run(255)) - Server handler 9 on 65314: exiting
2006-06-02 18:27:27,589 INFO  ipc.Server (Server.java:run(255)) - Server handler 1 on 65314: exiting
2006-06-02 18:27:27,589 INFO  ipc.Server (Server.java:run(255)) - Server handler 5 on 65314: exiting
2006-06-02 18:27:27,589 INFO  ipc.Server (Server.java:run(192)) - Server connection on port 65314 from 127.0.0.1: exiting
2006-06-02 18:27:27,589 INFO  ipc.Client (Client.java:close(215)) - Client connection to 127.0.0.1:65314: closing
2006-06-02 18:27:27,589 INFO  ipc.Server (Server.java:run(255)) - Server handler 7 on 65314: exiting
2006-06-02 18:27:27,729 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/conf/hadoop-default.xml
2006-06-02 18:27:27,729 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/src/test/hadoop-site.xml
2006-06-02 18:27:27,761 INFO  ipc.Server (Server.java:run(101)) - Server listener on port 65316: starting
2006-06-02 18:27:27,761 INFO  ipc.Server (Server.java:run(206)) - Server handler 0 on 65316: starting
2006-06-02 18:27:27,761 INFO  ipc.Server (Server.java:run(206)) - Server handler 1 on 65316: starting
2006-06-02 18:27:27,761 INFO  ipc.Server (Server.java:run(206)) - Server handler 2 on 65316: starting
2006-06-02 18:27:27,761 INFO  ipc.Server (Server.java:run(206)) - Server handler 3 on 65316: starting
2006-06-02 18:27:27,776 INFO  ipc.Server (Server.java:run(206)) - Server handler 4 on 65316: starting
2006-06-02 18:27:27,776 INFO  ipc.Server (Server.java:run(206)) - Server handler 5 on 65316: starting
2006-06-02 18:27:27,776 INFO  ipc.Server (Server.java:run(206)) - Server handler 6 on 65316: starting
2006-06-02 18:27:27,776 INFO  ipc.Server (Server.java:run(206)) - Server handler 7 on 65316: starting
2006-06-02 18:27:27,776 INFO  ipc.Server (Server.java:run(206)) - Server handler 8 on 65316: starting
2006-06-02 18:27:27,776 INFO  ipc.Server (Server.java:run(206)) - Server handler 9 on 65316: starting
2006-06-02 18:27:28,761 INFO  ipc.Server (Server.java:run(152)) - Server connection on port 65316 from 127.0.0.1: starting
2006-06-02 18:27:28,761 INFO  ipc.Client (Client.java:run(142)) - Client connection to 127.0.0.1:65316: starting
2006-06-02 18:27:28,979 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/conf/hadoop-default.xml
2006-06-02 18:27:28,979 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
2006-06-02 18:27:28,995 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
2006-06-02 18:27:28,995 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/src/test/hadoop-site.xml
2006-06-02 18:27:29,042 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/conf/hadoop-default.xml
2006-06-02 18:27:29,042 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
2006-06-02 18:27:29,057 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
2006-06-02 18:27:29,057 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
2006-06-02 18:27:29,057 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/src/test/hadoop-site.xml
2006-06-02 18:27:29,073 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/conf/hadoop-default.xml
2006-06-02 18:27:29,073 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/src/test/mapred-default.xml
2006-06-02 18:27:29,089 INFO  conf.Configuration (Configuration.java:loadResource(404)) - parsing build/test/mapred/local/localRunner/job_drcszv.xml
2006-06-02 18:27:29,089 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/src/test/hadoop-site.xml
2006-06-02 18:27:29,089 INFO  mapred.JobClient (JobClient.java:runJob(314)) - Running job: job_drcszv
2006-06-02 18:27:29,104 WARN  fs.FSNamesystem (FSNamesystem.java:chooseTargets(1644)) - Replication requested of 1 is larger than cluster size (0). Using cluster size.
2006-06-02 18:27:29,104 WARN  dfs.StateChange (FSNamesystem.java:startFile(388)) - DIR* NameSystem.startFile: failed to create file /destdat/.329581711353948808.crc on client seemeight-dx because target-length is 0, below MIN_REPLICATION (1)
2006-06-02 18:27:29,104 INFO  ipc.Server (Server.java:run(233)) - Server handler 2 on 65316 call error: java.io.IOException: failed to create file /destdat/.329581711353948808.crc on client seemeight-dx because target-length is 0, below MIN_REPLICATION (1)
java.io.IOException: failed to create file /destdat/.329581711353948808.crc on client seemeight-dx because target-length is 0, below MIN_REPLICATION (1)
	at org.apache.hadoop.dfs.FSNamesystem.startFile(FSNamesystem.java:354)
	at org.apache.hadoop.dfs.NameNode.create(NameNode.java:165)
	at sun.reflect.GeneratedMethodAccessor2.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:585)
	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:243)
	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:231)
2006-06-02 18:27:29,120 INFO  fs.DFSClient (DFSClient.java:locateNewBlock(819)) - org.apache.hadoop.ipc.RemoteException: java.io.IOException: failed to create file /destdat/.329581711353948808.crc on client seemeight-dx because target-length is 0, below MIN_REPLICATION (1)
	at org.apache.hadoop.dfs.FSNamesystem.startFile(FSNamesystem.java:354)
	at org.apache.hadoop.dfs.NameNode.create(NameNode.java:165)
	at sun.reflect.GeneratedMethodAccessor2.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:585)
	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:243)
	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:231)

	at org.apache.hadoop.ipc.Client$Connection.run(Client.java:158)

2006-06-02 18:27:30,089 INFO  mapred.JobClient (JobClient.java:runJob(328)) -  map 0%  reduce 0%
2006-06-02 18:28:29,120 WARN  fs.FSNamesystem (FSNamesystem.java:chooseTargets(1644)) - Replication requested of 1 is larger than cluster size (0). Using cluster size.
2006-06-02 18:28:29,120 WARN  dfs.StateChange (FSNamesystem.java:startFile(388)) - DIR* NameSystem.startFile: failed to create file /destdat/.329581711353948808.crc on client seemeight-dx because target-length is 0, below MIN_REPLICATION (1)
2006-06-02 18:28:29,120 INFO  ipc.Server (Server.java:run(233)) - Server handler 3 on 65316 call error: java.io.IOException: failed to create file /destdat/.329581711353948808.crc on client seemeight-dx because target-length is 0, below MIN_REPLICATION (1)
java.io.IOException: failed to create file /destdat/.329581711353948808.crc on client seemeight-dx because target-length is 0, below MIN_REPLICATION (1)
	at org.apache.hadoop.dfs.FSNamesystem.startFile(FSNamesystem.java:354)
	at org.apache.hadoop.dfs.NameNode.create(NameNode.java:165)
	at sun.reflect.GeneratedMethodAccessor2.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:585)
	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:243)
	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:231)
2006-06-02 18:28:29,151 INFO  fs.DFSClient (DFSClient.java:locateNewBlock(819)) - org.apache.hadoop.ipc.RemoteException: java.io.IOException: failed to create file /destdat/.329581711353948808.crc on client seemeight-dx because target-length is 0, below MIN_REPLICATION (1)
	at org.apache.hadoop.dfs.FSNamesystem.startFile(FSNamesystem.java:354)
	at org.apache.hadoop.dfs.NameNode.create(NameNode.java:165)
	at sun.reflect.GeneratedMethodAccessor2.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:585)
	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:243)
	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:231)

	at org.apache.hadoop.ipc.Client$Connection.run(Client.java:158)

2006-06-02 18:29:29,150 WARN  fs.FSNamesystem (FSNamesystem.java:chooseTargets(1644)) - Replication requested of 1 is larger than cluster size (0). Using cluster size.
2006-06-02 18:29:29,150 WARN  dfs.StateChange (FSNamesystem.java:startFile(388)) - DIR* NameSystem.startFile: failed to create file /destdat/.329581711353948808.crc on client seemeight-dx because target-length is 0, below MIN_REPLICATION (1)
2006-06-02 18:29:29,150 INFO  ipc.Server (Server.java:run(233)) - Server handler 4 on 65316 call error: java.io.IOException: failed to create file /destdat/.329581711353948808.crc on client seemeight-dx because target-length is 0, below MIN_REPLICATION (1)
java.io.IOException: failed to create file /destdat/.329581711353948808.crc on client seemeight-dx because target-length is 0, below MIN_REPLICATION (1)
	at org.apache.hadoop.dfs.FSNamesystem.startFile(FSNamesystem.java:354)
	at org.apache.hadoop.dfs.NameNode.create(NameNode.java:165)
	at sun.reflect.GeneratedMethodAccessor2.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:585)
	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:243)
	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:231)
2006-06-02 18:29:29,150 INFO  fs.FSNamesystem (FSNamesystem.java:abandonFileInProgress(495)) - Attempt to release a lock from an unknown lease holder DFSClient_-306399254 for /destdat/.329581711353948808.crc
2006-06-02 18:29:29,166 WARN  mapred.LocalJobRunner (LocalJobRunner.java:run(119)) - job_drcszv
org.apache.hadoop.ipc.RemoteException: java.io.IOException: failed to create file /destdat/.329581711353948808.crc on client seemeight-dx because target-length is 0, below MIN_REPLICATION (1)
	at org.apache.hadoop.dfs.FSNamesystem.startFile(FSNamesystem.java:354)
	at org.apache.hadoop.dfs.NameNode.create(NameNode.java:165)
	at sun.reflect.GeneratedMethodAccessor2.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:585)
	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:243)
	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:231)

	at org.apache.hadoop.ipc.Client$Connection.run(Client.java:158)
2006-06-02 18:29:30,088 INFO  fs.FSNamesystem (FSNamesystem.java:abandonFileInProgress(495)) - Attempt to release a lock from an unknown lease holder DFSClient_-306399254 for /destdat/329581711353948808
2006-06-02 18:29:31,760 INFO  ipc.Server (Server.java:stop(299)) - Stopping server on 65316
2006-06-02 18:29:32,775 INFO  ipc.Server (Server.java:run(255)) - Server handler 7 on 65316: exiting
2006-06-02 18:29:32,775 INFO  ipc.Server (Server.java:run(255)) - Server handler 8 on 65316: exiting
2006-06-02 18:29:32,775 INFO  ipc.Server (Server.java:run(255)) - Server handler 9 on 65316: exiting
2006-06-02 18:29:33,760 INFO  ipc.Server (Server.java:run(129)) - Server listener on port 65316: exiting
2006-06-02 18:29:33,760 INFO  ipc.Server (Server.java:run(255)) - Server handler 0 on 65316: exiting
2006-06-02 18:29:34,104 INFO  ipc.Server (Server.java:run(255)) - Server handler 1 on 65316: exiting
2006-06-02 18:29:34,119 INFO  ipc.Server (Server.java:run(255)) - Server handler 2 on 65316: exiting
2006-06-02 18:29:34,150 INFO  ipc.Server (Server.java:run(255)) - Server handler 3 on 65316: exiting
2006-06-02 18:29:34,150 INFO  ipc.Server (Server.java:run(255)) - Server handler 4 on 65316: exiting
2006-06-02 18:29:34,150 INFO  ipc.Server (Server.java:run(255)) - Server handler 5 on 65316: exiting
2006-06-02 18:29:35,088 INFO  ipc.Server (Server.java:run(192)) - Server connection on port 65316 from 127.0.0.1: exiting
2006-06-02 18:29:35,088 INFO  ipc.Client (Client.java:close(215)) - Client connection to 127.0.0.1:65316: closing
2006-06-02 18:29:35,088 INFO  ipc.Server (Server.java:run(255)) - Server handler 6 on 65316: exiting
2006-06-02 18:29:36,775 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/conf/hadoop-default.xml
2006-06-02 18:29:36,775 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/C:/Work/Nightly/hadoop/src/test/hadoop-site.xml
2006-06-02 18:29:36,807 INFO  ipc.Server (Server.java:run(101)) - Server listener on port 65318: starting
2006-06-02 18:29:36,807 INFO  ipc.Server (Server.java:run(206)) - Server handler 0 on 65318: starting
2006-06-02 18:29:36,807 INFO  ipc.Server (Server.java:run(206)) - Server handler 1 on 65318: starting
2006-06-02 18:29:36,807 INFO  ipc.Server (Server.java:run(206)) - Server handler 2 on 65318: starting
2006-06-02 18:29:36,807 INFO  ipc.Server (Server.java:run(206)) - Server handler 3 on 65318: starting
2006-06-02 18:29:36,807 INFO  ipc.Server (Server.java:run(206)) - Server handler 4 on 65318: starting
2006-06-02 18:29:36,807 INFO  ipc.Server (Server.java:run(206)) - Server handler 5 on 65318: starting
2006-06-02 18:29:36,807 INFO  ipc.Server (Server.java:run(206)) - Server handler 6 on 65318: starting
2006-06-02 18:29:36,807 INFO  ipc.Server (Server.java:run(206)) - Server handler 7 on 65318: starting
2006-06-02 18:29:36,807 INFO  ipc.Server (Server.java:run(206)) - Server handler 8 on 65318: starting
2006-06-02 18:29:36,807 INFO  ipc.Server (Server.java:run(206)) - Server handler 9 on 65318: starting
2006-06-02 18:29:37,807 INFO  ipc.Server (Server.java:run(152)) - Server connection on port 65318 from 127.0.0.1: starting
2006-06-02 18:29:37,807 INFO  ipc.Client (Client.java:run(142)) - Client connection to 127.0.0.1:65318: starting
2006-06-02 18:29:37,807 WARN  fs.FSNamesystem (FSNamesystem.java:chooseTargets(1644)) - Replication requested of 1 is larger than cluster size (0). Using cluster size.
2006-06-02 18:29:37,807 WARN  dfs.StateChange (FSNamesystem.java:startFile(388)) - DIR* NameSystem.startFile: failed to create file /srcdat/two/.5392051171629545065.crc on client seemeight-dx because target-length is 0, below MIN_REPLICATION (1)
2006-06-02 18:29:37,807 INFO  ipc.Server (Server.java:run(233)) - Server handler 2 on 65318 call error: java.io.IOException: failed to create file /srcdat/two/.5392051171629545065.crc on client seemeight-dx because target-length is 0, below MIN_REPLICATION (1)
java.io.IOException: failed to create file /srcdat/two/.5392051171629545065.crc on client seemeight-dx because target-length is 0, below MIN_REPLICATION (1)
	at org.apache.hadoop.dfs.FSNamesystem.startFile(FSNamesystem.java:354)
	at org.apache.hadoop.dfs.NameNode.create(NameNode.java:165)
	at sun.reflect.GeneratedMethodAccessor2.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:585)
	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:243)
	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:231)
2006-06-02 18:29:37,822 INFO  fs.DFSClient (DFSClient.java:locateNewBlock(819)) - org.apache.hadoop.ipc.RemoteException: java.io.IOException: failed to create file /srcdat/two/.5392051171629545065.crc on client seemeight-dx because target-length is 0, below MIN_REPLICATION (1)
	at org.apache.hadoop.dfs.FSNamesystem.startFile(FSNamesystem.java:354)
	at org.apache.hadoop.dfs.NameNode.create(NameNode.java:165)
	at sun.reflect.GeneratedMethodAccessor2.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:585)
	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:243)
	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:231)

	at org.apache.hadoop.ipc.Client$Connection.run(Client.java:158)

2006-06-02 18:30:37,822 WARN  fs.FSNamesystem (FSNamesystem.java:chooseTargets(1644)) - Replication requested of 1 is larger than cluster size (0). Using cluster size.
2006-06-02 18:30:37,822 WARN  dfs.StateChange (FSNamesystem.java:startFile(388)) - DIR* NameSystem.startFile: failed to create file /srcdat/two/.5392051171629545065.crc on client seemeight-dx because target-length is 0, below MIN_REPLICATION (1)
2006-06-02 18:30:37,822 INFO  ipc.Server (Server.java:run(233)) - Server handler 3 on 65318 call error: java.io.IOException: failed to create file /srcdat/two/.5392051171629545065.crc on client seemeight-dx because target-length is 0, below MIN_REPLICATION (1)
java.io.IOException: failed to create file /srcdat/two/.5392051171629545065.crc on client seemeight-dx because target-length is 0, below MIN_REPLICATION (1)
	at org.apache.hadoop.dfs.FSNamesystem.startFile(FSNamesystem.java:354)
	at org.apache.hadoop.dfs.NameNode.create(NameNode.java:165)
	at sun.reflect.GeneratedMethodAccessor2.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:585)
	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:243)
	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:231)
2006-06-02 18:30:37,822 INFO  fs.DFSClient (DFSClient.java:locateNewBlock(819)) - org.apache.hadoop.ipc.RemoteException: java.io.IOException: failed to create file /srcdat/two/.5392051171629545065.crc on client seemeight-dx because target-length is 0, below MIN_REPLICATION (1)
	at org.apache.hadoop.dfs.FSNamesystem.startFile(FSNamesystem.java:354)
	at org.apache.hadoop.dfs.NameNode.create(NameNode.java:165)
	at sun.reflect.GeneratedMethodAccessor2.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:585)
	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:243)
	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:231)

	at org.apache.hadoop.ipc.Client$Connection.run(Client.java:158)

2006-06-02 18:31:37,821 WARN  fs.FSNamesystem (FSNamesystem.java:chooseTargets(1644)) - Replication requested of 1 is larger than cluster size (0). Using cluster size.
2006-06-02 18:31:37,821 WARN  dfs.StateChange (FSNamesystem.java:startFile(388)) - DIR* NameSystem.startFile: failed to create file /srcdat/two/.5392051171629545065.crc on client seemeight-dx because target-length is 0, below MIN_REPLICATION (1)
2006-06-02 18:31:37,821 INFO  ipc.Server (Server.java:run(233)) - Server handler 4 on 65318 call error: java.io.IOException: failed to create file /srcdat/two/.5392051171629545065.crc on client seemeight-dx because target-length is 0, below MIN_REPLICATION (1)
java.io.IOException: failed to create file /srcdat/two/.5392051171629545065.crc on client seemeight-dx because target-length is 0, below MIN_REPLICATION (1)
	at org.apache.hadoop.dfs.FSNamesystem.startFile(FSNamesystem.java:354)
	at org.apache.hadoop.dfs.NameNode.create(NameNode.java:165)
	at sun.reflect.GeneratedMethodAccessor2.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:585)
	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:243)
	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:231)
2006-06-02 18:31:37,821 INFO  fs.FSNamesystem (FSNamesystem.java:abandonFileInProgress(495)) - Attempt to release a lock from an unknown lease holder DFSClient_-65219207 for /srcdat/two/.5392051171629545065.crc
2006-06-02 18:31:37,821 INFO  fs.FSNamesystem (FSNamesystem.java:abandonFileInProgress(495)) - Attempt to release a lock from an unknown lease holder DFSClient_-65219207 for /srcdat/two/5392051171629545065
2006-06-02 18:31:40,790 INFO  ipc.Server (Server.java:stop(299)) - Stopping server on 65318
2006-06-02 18:31:41,806 INFO  ipc.Server (Server.java:run(255)) - Server handler 7 on 65318: exiting
2006-06-02 18:31:41,806 INFO  ipc.Server (Server.java:run(255)) - Server handler 8 on 65318: exiting
2006-06-02 18:31:41,806 INFO  ipc.Server (Server.java:run(255)) - Server handler 9 on 65318: exiting
2006-06-02 18:31:42,806 INFO  ipc.Server (Server.java:run(129)) - Server listener on port 65318: exiting
2006-06-02 18:31:42,806 INFO  ipc.Server (Server.java:run(255)) - Server handler 0 on 65318: exiting
2006-06-02 18:31:42,806 INFO  ipc.Server (Server.java:run(255)) - Server handler 1 on 65318: exiting
2006-06-02 18:31:42,821 INFO  ipc.Server (Server.java:run(255)) - Server handler 2 on 65318: exiting
2006-06-02 18:31:42,821 INFO  ipc.Server (Server.java:run(255)) - Server handler 3 on 65318: exiting
2006-06-02 18:31:42,821 INFO  ipc.Server (Server.java:run(255)) - Server handler 4 on 65318: exiting
2006-06-02 18:31:42,821 INFO  ipc.Server (Server.java:run(192)) - Server connection on port 65318 from 127.0.0.1: exiting
2006-06-02 18:31:42,821 INFO  ipc.Client (Client.java:close(215)) - Client connection to 127.0.0.1:65318: closing
2006-06-02 18:31:42,821 INFO  ipc.Server (Server.java:run(255)) - Server handler 5 on 65318: exiting
2006-06-02 18:31:42,821 INFO  ipc.Server (Server.java:run(255)) - Server handler 6 on 65318: exiting
------------- ---------------- ---------------
------------- Standard Error -----------------
Data node crashed:
java.lang.NoSuchFieldError: LOG
	at org.apache.hadoop.dfs.FSDataset.invalidate(FSDataset.java:422)
	at org.apache.hadoop.dfs.DataNode.offerService(DataNode.java:293)
	at org.apache.hadoop.dfs.DataNode.run(DataNode.java:823)
	at org.apache.hadoop.dfs.MiniDFSCluster$DataNodeRunner.run(MiniDFSCluster.java:65)
	at java.lang.Thread.run(Thread.java:595)
Data node crashed:
java.io.IOException: Cannot start multiple Datanode instances sharing the same data directory.
storage is locked. 
	at org.apache.hadoop.dfs.DataStorage.lock(DataStorage.java:98)
	at org.apache.hadoop.dfs.DataStorage.<init>(DataStorage.java:61)
	at org.apache.hadoop.dfs.DataStorage.<init>(DataStorage.java:40)
	at org.apache.hadoop.dfs.DataNode.<init>(DataNode.java:123)
	at org.apache.hadoop.dfs.DataNode.<init>(DataNode.java:105)
	at org.apache.hadoop.dfs.MiniDFSCluster$DataNodeRunner.run(MiniDFSCluster.java:64)
	at java.lang.Thread.run(Thread.java:595)
Data node crashed:
java.io.IOException: Cannot start multiple Datanode instances sharing the same data directory.
storage is locked. 
	at org.apache.hadoop.dfs.DataStorage.lock(DataStorage.java:98)
	at org.apache.hadoop.dfs.DataStorage.<init>(DataStorage.java:61)
	at org.apache.hadoop.dfs.DataStorage.<init>(DataStorage.java:40)
	at org.apache.hadoop.dfs.DataNode.<init>(DataNode.java:123)
	at org.apache.hadoop.dfs.DataNode.<init>(DataNode.java:105)
	at org.apache.hadoop.dfs.MiniDFSCluster$DataNodeRunner.run(MiniDFSCluster.java:64)
	at java.lang.Thread.run(Thread.java:595)
------------- ---------------- ---------------

Testcase: testCopyFromLocalToLocal took 2.594 sec
Testcase: testCopyFromDfsToDfs took 11.265 sec
Testcase: testCopyFromLocalToDfs took 129.031 sec
	Caused an ERROR
Job failed!
java.io.IOException: Job failed!
	at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:342)
	at org.apache.hadoop.util.CopyFiles.main(CopyFiles.java:367)
	at org.apache.hadoop.fs.TestCopyFiles.testCopyFromLocalToDfs(TestCopyFiles.java:207)

Testcase: testCopyFromDfsToLocal took 129.015 sec
	Caused an ERROR
java.io.IOException: failed to create file /srcdat/two/.5392051171629545065.crc on client seemeight-dx because target-length is 0, below MIN_REPLICATION (1)
	at org.apache.hadoop.dfs.FSNamesystem.startFile(FSNamesystem.java:354)
	at org.apache.hadoop.dfs.NameNode.create(NameNode.java:165)
	at sun.reflect.GeneratedMethodAccessor2.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:585)
	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:243)
	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:231)

org.apache.hadoop.ipc.RemoteException: java.io.IOException: failed to create file /srcdat/two/.5392051171629545065.crc on client seemeight-dx because target-length is 0, below MIN_REPLICATION (1)
	at org.apache.hadoop.dfs.FSNamesystem.startFile(FSNamesystem.java:354)
	at org.apache.hadoop.dfs.NameNode.create(NameNode.java:165)
	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:243)
	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:231)

	at org.apache.hadoop.ipc.Client$Connection.run(Client.java:158)


--------------020403080400060401080302--

From MAILER-DAEMON Sat Jun  3 06:26:33 2006
Return-Path: 
 <hadoop-dev-return-1847-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68273 invoked from network); 3 Jun 2006 06:26:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jun 2006 06:26:33 -0000
Received: (qmail 26883 invoked by uid 500); 3 Jun 2006 06:26:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26745 invoked by uid 500); 3 Jun 2006 06:26:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26735 invoked by uid 99); 3 Jun 2006 06:26:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 23:26:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 23:26:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2F6D1714022
	for <hadoop-dev@lucene.apache.org>; Sat,  3 Jun 2006 06:25:35 +0000 (GMT)
Message-ID: <32105740.1149315935191.JavaMail.jira@brutus>
Date: Sat, 3 Jun 2006 06:25:35 +0000 (GMT+00:00)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-211) logging improvements for Hadoop
In-Reply-To: <11693488.1147389488398.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-211?page=comments#action_12414555 ] 

Arun C Murthy commented on HADOOP-211:
--------------------------------------

Apologise for all the troubles... we assumed fine->info, finer->debug, finest->trace mappings; we should have run this through you once. 

Next time please throw out the patch if we screw up and let us scramble to fix the mess we created... appreciate your patience. Thanks!

> logging improvements for Hadoop
> -------------------------------
>
>          Key: HADOOP-211
>          URL: http://issues.apache.org/jira/browse/HADOOP-211
>      Project: Hadoop
>         Type: Improvement

>     Versions: 0.2
>     Reporter: Sameer Paranjpye
>     Assignee: Sameer Paranjpye
>     Priority: Minor
>      Fix For: 0.3.0
>  Attachments: acl-log4j-II.patch.tgz, acl-log4j.patch, commons_logging_patch
>
> Here's a proposal for some impovements to the way Hadoop does logging. It advocates 3 
> broad changes to the way logging is currently done, these being:
> - The use of a uniform logging format by all Hadoop subsystems
> - The use of Apache commons logging as a facade above an underlying logging framework
> - The use of Log4J as the underlying logging framework instead of java.util.logging
> This is largely polishing work, but it seems like it would make log analysis and debugging
> easier in the short term. In the long term, it would future proof logging to the extent of
> allowing the logging framework used to change while requiring minimal code change. The 
> propos changes are motivated by the following requirements which we think Hadoops 
> logging should meet:
> - Hadoops logs should be amenable to analysis by tools like grep, sed, awk etc.
> - Log entries should be clearly annotated with a timestamp and a logging level
> - Log entries should be traceable to the subsystem from which they originated
> - The logging implementation should allow log entries to be annotated with source code 
> location information like classname, methodname, file and line number, without requiring
> code changes
> - It should be possible to change the logging implementation used without having to change
> thousands of lines of code
> - The mapping of loggers to destinations (files, directories, servers etc.) should be 
> specified and modifiable via configuration
> Uniform logging format:
> All Hadoop logs should have the following structure.
> <Header>\n
> <LogEntry>\n [<Exception>\n]
> .
> .
> .
> where the header line specifies the format of each log entry. The header line has the format:
> '# <Fieldname> <Fieldname>...\n'. 
> The default format of each log entry is: '# Timestamp Level LoggerName Message', where:
> - Timestamp is a date and time in the format MM/DD/YYYY:HH:MM:SS
> - Level is the logging level (FATAL, WARN, DEBUG, TRACE, etc.)
> - LoggerName is the short name of the logging subsystem from which the message originated e.g.
> fs.FSNamesystem, dfs.Datanode etc.
> - Message is the log message produced
> Why Apache commons logging and Log4J?
> Apache commons logging is a facade meant to be used as a wrapper around an underlying logging
> implementation. Bridges from Apache commons logging to popular logging implementations 
> (Java logging, Log4J, Avalon etc.) are implemented and available as part of the commons logging
> distribution. Implementing a bridge to an unsupported implementation is fairly striaghtforward
> and involves the implementation of subclasses of the commons logging LogFactory and Logger 
> classes. Using Apache commons logging and making all logging calls through it enables us to
> move to a different logging implementation by simply changing configuration in the best case.
> Even otherwise, it incurs minimal code churn overhead.
> Log4J offers a few benefits over java.util.logging that make it a more desirable choice for the
> logging back end.
> - Configuration Flexibility: The mapping of loggers to destinations (files, sockets etc.)
> can be completely specified in configuration. It is possible to do this with Java logging as
> well, however, configuration is a lot more restrictive. For instance, with Java logging all 
> log files must have names derived from the same pattern. For the namenode, log files could 
> be named with the pattern "%h/namenode%u.log" which would put log files in the user.home
> directory with names like namenode0.log etc. With Log4J it would be possible to configure
> the namenode to emit log files with different names, say heartbeats.log, namespace.log,
> clients.log etc. Configuration variables in Log4J can also have the values of system 
> properties embedded in them.
> - Takes wrappers into account: Log4J takes into account the possibility that an application
> may be invoking it via a wrapper, such as Apache commons logging. This is important because
> logging event objects must be able to infer the context of the logging call such as classname,
> methodname etc. Inferring context is a relatively expensive operation that involves creating
> an exception and examining the stack trace to find the frame just before the first frame 
> of the logging framework. It is therefore done lazily only when this information actually 
> needs to be logged. Log4J can be instructed to look for the frame corresponding to the wrapper
> class, Java logging cannot. In the case of Java logging this means that a) the bridge from 
> Apache commons logging is responsible for inferring the calling context and setting it in the 
> logging event and b) this inference has to be done on every logging call regardless of whether
> or not it is needed.
> - More handy features: Log4J has some handy features that Java logging doesn't. A couple
> of examples of these:
> a) Date based rolling of log files 
> b) Format control through configuration. Log4J has a PatternLayout class that can be 
> configured to generate logs with a user specified pattern. The logging format described
> above can be described as "%d{MM/dd/yyyy:HH:mm:SS} %c{2} %p %m". The format specifiers
> indicate that each log line should have the date and time followed by the logger name followed
> by the logging level or priority followed by the application generated message.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Sat Jun  3 11:50:26 2006
Return-Path: 
 <hadoop-dev-return-1848-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30947 invoked from network); 3 Jun 2006 11:50:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jun 2006 11:50:26 -0000
Received: (qmail 96487 invoked by uid 500); 3 Jun 2006 11:50:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 96460 invoked by uid 500); 3 Jun 2006 11:50:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 96450 invoked by uid 99); 3 Jun 2006 11:50:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Jun 2006 04:50:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Jun 2006 04:50:25 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CD9FE7141ED
	for <hadoop-dev@lucene.apache.org>; Sat,  3 Jun 2006 11:49:29 +0000 (GMT)
Message-ID: <4898117.1149335369839.JavaMail.jira@brutus>
Date: Sat, 3 Jun 2006 11:49:29 +0000 (GMT+00:00)
From: "Marco Paga (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-273) Add a interactive shell for
 admistrative access to the DFS
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Add a interactive shell for admistrative access to the DFS
----------------------------------------------------------

         Key: HADOOP-273
         URL: http://issues.apache.org/jira/browse/HADOOP-273
     Project: Hadoop
        Type: Improvement

  Components: dfs  
    Reporter: Marco Paga
    Priority: Trivial


Implement a shell that allows the user to work in the dfs like on the local fs.

cd /user/
cd test
put text.txt someText.txt
cat someText.txt
rm someText.txt


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Sat Jun  3 11:52:27 2006
Return-Path: 
 <hadoop-dev-return-1849-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31173 invoked from network); 3 Jun 2006 11:52:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jun 2006 11:52:27 -0000
Received: (qmail 98387 invoked by uid 500); 3 Jun 2006 11:52:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98353 invoked by uid 500); 3 Jun 2006 11:52:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98344 invoked by uid 99); 3 Jun 2006 11:52:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Jun 2006 04:52:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Jun 2006 04:52:26 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8A0B97141ED
	for <hadoop-dev@lucene.apache.org>; Sat,  3 Jun 2006 11:51:30 +0000 (GMT)
Message-ID: <27423799.1149335490562.JavaMail.jira@brutus>
Date: Sat, 3 Jun 2006 11:51:30 +0000 (GMT+00:00)
From: "Marco Paga (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-273) Add a interactive shell for
 admistrative access to the DFS
In-Reply-To: <4898117.1149335369839.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-273?page=all ]

Marco Paga updated HADOOP-273:
------------------------------

    Attachment: interactiveShell.patch

Patch implements the interactive shell.

> Add a interactive shell for admistrative access to the DFS
> ----------------------------------------------------------
>
>          Key: HADOOP-273
>          URL: http://issues.apache.org/jira/browse/HADOOP-273
>      Project: Hadoop
>         Type: Improvement

>   Components: dfs
>     Reporter: Marco Paga
>     Priority: Trivial
>  Attachments: interactiveShell.patch
>
> Implement a shell that allows the user to work in the dfs like on the local fs.
> cd /user/
> cd test
> put text.txt someText.txt
> cat someText.txt
> rm someText.txt

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 07:54:25 2006
Return-Path: 
 <hadoop-dev-return-1850-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 54192 invoked from network); 5 Jun 2006 07:54:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 07:54:25 -0000
Received: (qmail 59824 invoked by uid 500); 5 Jun 2006 07:54:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 59789 invoked by uid 500); 5 Jun 2006 07:54:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 59780 invoked by uid 99); 5 Jun 2006 07:54:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 00:54:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of michael.cafarella@gmail.com
 designates 64.233.184.239 as permitted sender)
Received: from [64.233.184.239] (HELO wr-out-0506.google.com) (64.233.184.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 00:54:23 -0700
Received: by wr-out-0506.google.com with SMTP id i20so945458wra
        for <hadoop-dev@lucene.apache.org>;
 Mon, 05 Jun 2006 00:54:02 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=dn2sQzyLmISJaPgwipZCuY7jM5ohHjFLHnl2JV16mUm/EatJWY4HJWmEv8aO9dnFyAAniX9oGeIY1AzvOXpl/XjWnbv8G+2UwjnLMg1YBkAXSHVqT+nhSQDedkpgZKMUrjD89GrubEdANwrgWA9wKwVG/uaWcEwNIt8OfaB8gs4=
Received: by 10.64.195.9 with SMTP id s9mr3193494qbf;
        Mon, 05 Jun 2006 00:54:02 -0700 (PDT)
Received: by 10.64.220.14 with HTTP; Mon, 5 Jun 2006 00:54:01 -0700 (PDT)
Message-ID: <8a8b9f3f0606050054u783637feld3d6f4ca07fefa7a@mail.gmail.com>
Date: Mon, 5 Jun 2006 00:54:01 -0700
From: "Michael Cafarella" <michael.cafarella@gmail.com>
To: hadoop-dev@lucene.apache.org
Subject: Re: HBase Design Ideas, Part II
In-Reply-To: <4da785d8662903a7c7a354f2d3feb052@inktomi.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_Part_33330_31105064.1149494041971"
References: <8a8b9f3f0605152154q2f219948ieb997284b69e6854@mail.gmail.com>
	 <4da785d8662903a7c7a354f2d3feb052@inktomi.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_33330_31105064.1149494041971
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Arkady,

Sorry for the delay in responding to your message.

I think the proposal would handle your log-reporting problem quite
well.  My current plan for iterators that process a lot of rows (instead
of querying for them, or updating just a few) is to ask the user to
implement a MapReduce-like class or method.  This method is submitted
to the system, and is invoked for every tuple that passes the query
criteria.

Imagine the user implements an interface like this:

class UserIterator implements HDataIterator {
  void process(String row, String col, String attr) {};
}

and submits it using a query interface like this:

boolean submitIterator(HDataIterator it, HQuery query);

where HQuery describes the rows for which DataIterator.process()
will be invoked.  The user class can store state across invocations,
making it quite easy to compute sums/averages for log summaries.  I
think this is a better way to do aggregates than a fancy query language,
at least until the system and requirements are better-understood.

BTW, for a completely different look at how to do log processing,
you might take a look at the following quite interesting paper:

*PADX*: Querying large-scale ad hoc data with
XQuery<http://scholar.google.com/url?sa=U&q=http://www.cs.princeton.edu/%7Eyitzhakm/publications/padx_planx.pdf>
M Fernandez, K Fisher, Y Mandelbaum - Submitted to PLAN-X, 2006 -
cs.princeton.edu
http://scholar.google.com/url?sa=U&q=http://www.cs.princeton.edu/~yitzhakm/publications/padx_planx.pdf

Best,
--Mike


On 5/19/06, Arkady Borkovsky <arkady@inktomi.com> wrote:
>
>
> Some potential applications of HBase-like functionality are
> batch-oriented: select (a large) subset of records, process a subset of
> their columns (often a small subset), and either add either new
> columns, or new versions of columns.
> Several applications like this may be running on the same "table"
> simultaneously.

Think, for example, about query log processing, where the key is a
> search query, and the daily stats are represented as columns (several
> columns per day), plus columns for data aggregated by week, by month,
> etc.
>
> How well does the proposal address this kind of uses?
>
> -- ab
>
> On May 15, 2006, at 9:54 PM, Michael Cafarella wrote:
>
> > Hi everyone,
> >
> > My previous mail mentioned a bunch of design ideas that were mainly
> > lifted from Jeff Dean's BigTable talk.  BigTable seems like a useful
> > way to do large-scale row storage, and their decisions largely seem
> > like the right ones.
> >
> > However, BigTable still leaves some things on the table.  Items to
> > improve include a query language and multi-row locking, among
> > other things.
> >
> > Dean said explicitly in his talk that they wanted to avoid multirow
> > locking because it's complicated, error-prone, and maybe not necessary.
> > He's right on at least the first two, and maybe the third.
> >
> > Multiple row locks are useful when you're making a change to
> > several rows that should be atomic; you want all the changes
> > or none of the changes.  It's also used in traditional databases
> > if you want to perform an expensive read operation (like a
> > multiway join) and you want to make sure the results don't
> > get modified while you're reading.
> >
> > Distributed lock acquisition is very hard to do.  It's bug-prone
> > and often has very weird performance ramifications.  It's
> > difficult to get working, difficult to tune, difficult to everything.
> >
> > Here are a few ideas on what to do:
> > 1)  Suck it up and have the client acquire locks on multiple
> > HRegionServers simultaneously.  All clients would have to
> > agree to acquire locks according to some global ordering to
> > avoid deadlock.  HRegions would not be allowed to migrate
> > to a new server if locked.
> >
> > If this is a rare circumstance, a better approach would be
> > to have a dedicated "lock acquirer" through which clients
> > make requests.  It doesn't help the theoretical problem here,
> > but it would make debugging an awful lot easier.
> >
> > 2)  In the case of long-lasting read operations, we can
> > use versioning to guarantee consistency.  If each row is
> > annotated with an edit timestamp, and we know that there
> > is sufficient version history available, the long-lasting job
> > can run over a specific version only.
> >
> > Edits can continue to be made to the database while the
> > read-only job is ongoing.  The operation is performed over
> > the database as of the time the task was submitted.
> >
> > 3) In the case of multiple row updates, we may be able to
> > use different edit semantics to avoid locking.  For example,
> > consider that we want to add a single column/value pair to
> > multiple rows.  We want this to happen atomically, so that
> > both rows get the value or neither of them do so.
> >
> > If it's just an add, then we don't need to lock the rows at
> > all; the add will always succeed, even if other writes
> > intervene. Traditionally there's been no difference between
> > among data "updates", so they all require locking.  If we
> > can get a client to adjust the update semantics slightly,
> > then the locking can be much more relaxed.
> >
> > I'd say that "add" or "append" semantics are likely to be
> > at least as common as "edit" semantics.
> >
> > Can you think of the family of edit semantics you'd like
> > to see offered here?
> >
> > Also, how useful do you think a general-purpose query language
> > would be for HBase?  It would be fairly straightforward to implement,
> > for example, a poor man's version of SQL that has different locking
> > and update behavior (and which chucks out the more exotic elements).
> > This might be compiled into a piece of code that is executed
> > immediately, or it might be transformed into a long-lasting mapreduce
> > job.
> >
> > I have a few ideas for such a language, but I'm worried it's getting
> > a little far afield from what we're interested in for Hadoop.
> >
> > --Mike
>
>

------=_Part_33330_31105064.1149494041971--

From MAILER-DAEMON Mon Jun  5 08:01:50 2006
Return-Path: 
 <hadoop-dev-return-1851-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 55112 invoked from network); 5 Jun 2006 08:01:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 08:01:50 -0000
Received: (qmail 64257 invoked by uid 500); 5 Jun 2006 08:01:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64235 invoked by uid 500); 5 Jun 2006 08:01:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64226 invoked by uid 99); 5 Jun 2006 08:01:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 01:01:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of michael.cafarella@gmail.com
 designates 64.233.184.239 as permitted sender)
Received: from [64.233.184.239] (HELO wr-out-0506.google.com) (64.233.184.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 01:01:49 -0700
Received: by wr-out-0506.google.com with SMTP id i20so946255wra
        for <hadoop-dev@lucene.apache.org>;
 Mon, 05 Jun 2006 01:01:28 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=eMdwVFUdpOjl2AypL6S5p6FHj6aXWWqXk2GHVq9oJ+kMkwJpLX6zmQTKWJQDNlUeiiaysR7r2Gw6CdKyjE7prbOTWMJus50CGzNNQuUpUhbAMOlfc3NDMDmDa2jknoyh3h0U4BYAftod6LPhcCmMM+Q2gTBeh/7jFbSFERcfOhE=
Received: by 10.64.125.17 with SMTP id x17mr3219355qbc;
        Mon, 05 Jun 2006 01:01:28 -0700 (PDT)
Received: by 10.64.220.14 with HTTP; Mon, 5 Jun 2006 01:01:28 -0700 (PDT)
Message-ID: <8a8b9f3f0606050101k7af0628fgdff9054386a9ba0b@mail.gmail.com>
Date: Mon, 5 Jun 2006 01:01:28 -0700
From: "Michael Cafarella" <michael.cafarella@gmail.com>
To: hadoop-dev@lucene.apache.org
Subject: Re: HBase Design Ideas, Part II
In-Reply-To: <F3F3EA58-6A5C-4D97-9133-A3232E24C2DC@media-style.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_Part_33486_32139064.1149494488710"
References: <8a8b9f3f0605152154q2f219948ieb997284b69e6854@mail.gmail.com>
	 <F3F3EA58-6A5C-4D97-9133-A3232E24C2DC@media-style.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_33486_32139064.1149494488710
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Stefan,

On 5/30/06, Stefan Groschupf <sg@media-style.com> wrote:

> In my project we do not need to have multi row locking at all. I need
> to write and read as fast as possible into many rows - column pairs
> but each of them is atomically.
> I'm little bit worry that the goals are to big for now and having
> such difficult to implement functionality will slow down a general
> hadoop kind of big table implementation.
> I really would love to start small and grow may be later with each
> release.


A good point.  I've scaled down my ambitions for the thing.
Locking, query languages, even compression - all that stuff is for
version 2+.   I might have gotten a little carried away, asking for
query language examples before the row store works properly ;)

I personal don't like query languages at all - especially sql. :-)
> They are only really usefully if you work on a admin gui tool and
> want to check your data, from my point of view.
> Since some years I really prefer api based query mechanisms as
> hibernate or db4o provide.
> For example query by example is just easy to use and can be powerful.

A query is any time a string in your code you need to maintain
> queries separately. You need to scan and update your code as soon
> your change just one column name etc.
> But having a API based Query mechanism allows to develop faster from
> my experience. Keywords in my mind are  test driven development,
> refactoring, refactoring tools like eclipse etc.


In theory, a declarative language like SQL should enable all sorts
of cool things on top of BigTable.  In practice, it might take 10 years
before
the query optimizer works right ;)  So for the moment, no SQL
for us.

Though there is probably a great query language waiting to be written
on top of a BigTable-like store.

--Mike

------=_Part_33486_32139064.1149494488710--

From MAILER-DAEMON Mon Jun  5 08:11:06 2006
Return-Path: 
 <hadoop-dev-return-1852-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 56974 invoked from network); 5 Jun 2006 08:11:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 08:11:06 -0000
Received: (qmail 66789 invoked by uid 500); 5 Jun 2006 08:11:06 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66761 invoked by uid 500); 5 Jun 2006 08:11:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66752 invoked by uid 99); 5 Jun 2006 08:11:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 01:11:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of michael.cafarella@gmail.com
 designates 64.233.184.226 as permitted sender)
Received: from [64.233.184.226] (HELO wr-out-0506.google.com) (64.233.184.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 01:11:04 -0700
Received: by wr-out-0506.google.com with SMTP id i20so947293wra
        for <hadoop-dev@lucene.apache.org>;
 Mon, 05 Jun 2006 01:10:44 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=MB+WlE1IMYvvyXsJFSKCI55nCC6thWiuTWYe+dkHIQ9FXdujXbaXOtFHbr4dfRDTCRLIudsT+0DFBa4PjaqidXRylevGMIYq0RbmcSbEm/Y3qqe4auuQTyiGGL23uXCQcr+B9YT+zTiuiO+c0Ql1Sc6v9LaaJO37ha8CJY6lkWA=
Received: by 10.65.219.7 with SMTP id w7mr3320820qbq;
        Mon, 05 Jun 2006 01:10:44 -0700 (PDT)
Received: by 10.64.220.14 with HTTP; Mon, 5 Jun 2006 01:10:44 -0700 (PDT)
Message-ID: <8a8b9f3f0606050110x39554a4dodd4b7e31027e937a@mail.gmail.com>
Date: Mon, 5 Jun 2006 01:10:44 -0700
From: "Michael Cafarella" <michael.cafarella@gmail.com>
To: hadoop-dev@lucene.apache.org
Subject: Re: HBase Design Ideas, terminology
In-Reply-To: <A059A39F-5DAB-49EC-8C9F-7A0C2FF24E35@media-style.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_Part_33642_23150924.1149495044160"
References: <A059A39F-5DAB-49EC-8C9F-7A0C2FF24E35@media-style.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_33642_23150924.1149495044160
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Stefan,

I'm continuing to plug away at code myself.  My goal is to have a
fully-working
(though feature-poor) system before committing any code.  I don't want to
clutter
the Hadoop workspace with experimental stuff.  (I feel like I did that a
little
too much in the early days of DFS, and I want to avoid that experience ;)

A wiki for current docs, status, etc, is a good idea.  I'll look to add that
to the Hadoop pages.  (Also, let's talk offline about how we can best work
together
on this.  Once the first commit is finished, then I think it should enter
the general bug-patch-commit development mode.)

Storing namenode and MapReduce status in a BigTable-like structure is
intriguing,
but seems dangerous.  (All the database stuff is built on top of DFS
and MapReduce.  What happens when the database needs a file in DFS,
which needs a record from the database?  Oh lord...)

--Mike

On 5/30/06, Stefan Groschupf <sg@media-style.com> wrote:
>
> Hi Michael,
>
> what you think are the next steps?
> I really would love to help in the implementation,
> ideally we define interfaces or create lists of functionality and may
> be people can provide implementations for the different components.
> Or is your idea to provide a first implementation and continue on a
> patch file kind of development?
>
> What you think to create a wiki page were we at least list all
> components within a short description and list of functionalities.
> We can start with your emails and discuss each component in detail
> here in the list.
>
> Makes that sense?
>
> BTW,
> Yoram and me discussed that a kind of big table could be a
> interesting storage for data that are hold in memory in jobtracker
> and namenode and cause some scalability problems.
> What you think?
>
>
> Greetings,
> Stefan
>
>
>

------=_Part_33642_23150924.1149495044160--

From MAILER-DAEMON Mon Jun  5 10:47:56 2006
Return-Path: 
 <hadoop-dev-return-1853-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92724 invoked from network); 5 Jun 2006 10:47:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 10:47:56 -0000
Received: (qmail 40416 invoked by uid 500); 5 Jun 2006 10:47:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40380 invoked by uid 500); 5 Jun 2006 10:47:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 40352 invoked by uid 99); 5 Jun 2006 10:47:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 03:47:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 03:47:46 -0700
Received: from [192.168.0.252] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id k55AlTd06249
	for <hadoop-dev@lucene.apache.org>; Mon, 5 Jun 2006 05:47:30 -0500
Message-ID: <44840BC9.1060805@getopt.org>
Date: Mon, 05 Jun 2006 12:47:37 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: HBase Design Ideas, terminology
References: <A059A39F-5DAB-49EC-8C9F-7A0C2FF24E35@media-style.com>
 <8a8b9f3f0606050110x39554a4dodd4b7e31027e937a@mail.gmail.com>
In-Reply-To: <8a8b9f3f0606050110x39554a4dodd4b7e31027e937a@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Michael Cafarella wrote:
> Storing namenode and MapReduce status in a BigTable-like structure is
> intriguing,
> but seems dangerous.  (All the database stuff is built on top of DFS
> and MapReduce.  What happens when the database needs a file in DFS,
> which needs a record from the database?  Oh lord...)

Let me pipe-in with a "me too" comment: I think it's important to 
implement HBase in a way that other parts of Hadoop don't depend on it. 
So far we have a very nice separation of layers: DFS can run 
independently of map-reduce, and DFS + map-reduce should run 
independently of HBase, too. IMHO, any tricks like the one you guys 
describe would better be left to the high-level applications, and not 
hard-wired into the infrastructure ...

-- 
Best regards,
Andrzej Bialecki     <><
 ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com



From MAILER-DAEMON Mon Jun  5 12:24:52 2006
Return-Path: 
 <hadoop-dev-return-1854-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 27058 invoked from network); 5 Jun 2006 12:24:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 12:24:52 -0000
Received: (qmail 65349 invoked by uid 500); 5 Jun 2006 12:24:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 65317 invoked by uid 500); 5 Jun 2006 12:24:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 65308 invoked by uid 99); 5 Jun 2006 12:24:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 05:24:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [80.64.182.137] (HELO mslinux.media-style.com) (80.64.182.137)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 05:24:49 -0700
Received: from localhost (localhost [127.0.0.1])
	by mslinux.media-style.com (Postfix) with ESMTP id 94C13144605
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 14:01:35 +0200 (CEST)
Received: from mslinux.media-style.com ([127.0.0.1])
	by localhost (mslinux.media-style.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 20233-02 for <hadoop-dev@lucene.apache.org>;
	Mon, 5 Jun 2006 14:01:35 +0200 (CEST)
Received: from [192.168.0.141] (unknown [80.64.182.137])
	by mslinux.media-style.com (Postfix) with ESMTP id 6C03F1445E7
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 14:01:35 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v750)
In-Reply-To: <8a8b9f3f0606050110x39554a4dodd4b7e31027e937a@mail.gmail.com>
References: <A059A39F-5DAB-49EC-8C9F-7A0C2FF24E35@media-style.com>
 <8a8b9f3f0606050110x39554a4dodd4b7e31027e937a@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <2A1890D1-0913-48D6-B288-76129F7FACC5@media-style.com>
Content-Transfer-Encoding: 7bit
From: Stefan Groschupf <sg@media-style.com>
Subject: Re: HBase Design Ideas, terminology
Date: Mon, 5 Jun 2006 14:24:25 +0200
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.750)
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at media-style.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

> Storing namenode and MapReduce status in a BigTable-like structure is
> intriguing,
> but seems dangerous.  (All the database stuff is built on top of DFS
> and MapReduce.  What happens when the database needs a file in DFS,
> which needs a record from the database?  Oh lord...)

Right, I missed that. :-) In general I also completely agree also  
with Andrzej, having HBase as a independent component using io, rpc,  
dfs and map reduce is the way we should go.

Stefan 

From MAILER-DAEMON Mon Jun  5 16:55:07 2006
Return-Path: 
 <hadoop-dev-return-1857-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 18252 invoked from network); 5 Jun 2006 16:55:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 16:55:07 -0000
Received: (qmail 82839 invoked by uid 500); 5 Jun 2006 16:55:07 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 82820 invoked by uid 500); 5 Jun 2006 16:55:06 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 82811 invoked by uid 99); 5 Jun 2006 16:55:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 09:55:06 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.145.54.173] (HELO mrout3.yahoo.com) (216.145.54.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 09:55:05 -0700
Received: from SNV-XCHMAIL.xch.corp.yahoo.com (snv-xch1.xch.corp.yahoo.com
 [216.145.51.233])
	by mrout3.yahoo.com (8.13.6/8.13.4/y.out) with ESMTP id k55Gr2qW061765
	for <hadoop-dev@lucene.apache.org>; Mon, 5 Jun 2006 09:53:02 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=received:mime-version:in-reply-to:references:content-type:
	message-id:content-transfer-encoding:from:subject:date:to:x-mailer:
	return-path:x-originalarrivaltime;
	b=m64xybUU0Z0hSRFEdOFFPMWuTA3a18qutSENkpMkHaZRGOk9KHOFa0/DueIZGsgI
Received: from [207.126.231.236] ([207.126.231.236]) by
 SNV-XCHMAIL.xch.corp.yahoo.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Mon, 5 Jun 2006 09:53:01 -0700
Mime-Version: 1.0 (Apple Message framework v750)
In-Reply-To: <447DEE3F.2000909@apache.org>
References: <6576b8459b29602803a33c6249ec1480@yahoo-inc.com>
 <447DEE3F.2000909@apache.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <02AF11D4-991A-4F90-A8BE-96A99E8676E9@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Eric Baldeschwieler <eric14@yahoo-inc.com>
Subject: Re: java 1.4 versus 1.5
Date: Mon, 5 Jun 2006 08:50:33 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.750)
X-OriginalArrivalTime: 05 Jun 2006 16:53:01.0993 (UTC)
 FILETIME=[81D49990:01C688C0]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

+1

On May 31, 2006, at 12:27 PM, Doug Cutting wrote:

> Owen O'Malley wrote:
>> Java 1.5 has been out for a couple of years now and has some nice  
>> improvements in the libraries. In particular, I wish I had access  
>> to the timeout settings on UrlConnections. Would anyone object if  
>> starting with the 0.3 release this week, we required java 1.5 to  
>> compile and run Hadoop?
>
> Since you contributed a non-Java-1.5 patch for HADOOP-259, let's go  
> ahead and release 0.3 without a Java 1.5 requirement, then start  
> permitting Java 1.5 in changes for 0.4.  That way we give folks a  
> bit more notice and a bit more time to object.  I doubt we'll hear  
> many objections, but I don't want to surprise folks too much with  
> this kind of change.
>
> Does this sound like a reasonable plan?
>
> Doug


From MAILER-DAEMON Mon Jun  5 16:27:31 2006
Return-Path: 
 <hadoop-dev-return-1855-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8153 invoked from network); 5 Jun 2006 16:27:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 16:27:31 -0000
Received: (qmail 20266 invoked by uid 500); 5 Jun 2006 16:27:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 20246 invoked by uid 500); 5 Jun 2006 16:27:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 20232 invoked by uid 99); 5 Jun 2006 16:27:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 09:27:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 09:27:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D46DB7142A7
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 16:26:30 +0000 (GMT)
Message-ID: <3236189.1149524790867.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 16:26:30 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-274) The new logging framework puts
 application logs into server directory in hadoop.log
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The new logging framework puts application logs into server directory in hadoop.log
-----------------------------------------------------------------------------------

         Key: HADOOP-274
         URL: http://issues.apache.org/jira/browse/HADOOP-274
     Project: Hadoop
        Type: Bug

    Reporter: Owen O'Malley
 Assigned to: Owen O'Malley 


The new logging infrastructure puts application logs into the server log directory under hadoop.log. I think it would be less confusing to use the old behavior of writing out to stderr (for applications).

Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 16:46:22 2006
Return-Path: 
 <hadoop-dev-return-1856-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 14803 invoked from network); 5 Jun 2006 16:46:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 16:46:22 -0000
Received: (qmail 61967 invoked by uid 500); 5 Jun 2006 16:46:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 61950 invoked by uid 500); 5 Jun 2006 16:46:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 61941 invoked by uid 99); 5 Jun 2006 16:46:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 09:46:21 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,MSGID_FROM_MTA_HEADER,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lin_yuan@msn.com designates
 65.54.229.19 as permitted sender)
Received: from [65.54.229.19] (HELO hotmail.com) (65.54.229.19)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 09:46:20 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Mon, 5 Jun 2006 09:45:59 -0700
Message-ID: <BAY110-F94AABABA180940553DF4AF2940@phx.gbl>
Received: from 65.54.229.220 by by110fd.bay110.hotmail.msn.com with HTTP;
	Mon, 05 Jun 2006 16:45:58 GMT
X-Originating-IP: [221.137.94.47]
X-Originating-Email: [lin_yuan@msn.com]
X-Sender: lin_yuan@msn.com
In-Reply-To: <20671270.1148679330830.JavaMail.jira@brutus>
From: "lin yuan" <lin_yuan@msn.com>
To: hadoop-dev@lucene.apache.org
Subject: unsubscribe
Date: Tue, 06 Jun 2006 00:45:58 +0800
Mime-Version: 1.0
Content-Type: text/plain; charset=gb2312; format=flowed
X-OriginalArrivalTime: 05 Jun 2006 16:45:59.0620 (UTC)
 FILETIME=[86139840:01C688BF]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

unsubscribe

_________________________________________________________________
 MSN Messenger:  http://messenger.msn.com/cn  


From MAILER-DAEMON Mon Jun  5 17:09:30 2006
Return-Path: 
 <hadoop-dev-return-1858-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 25972 invoked from network); 5 Jun 2006 17:09:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 17:09:30 -0000
Received: (qmail 3994 invoked by uid 500); 5 Jun 2006 17:09:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3859 invoked by uid 500); 5 Jun 2006 17:09:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3848 invoked by uid 99); 5 Jun 2006 17:09:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 10:09:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 10:09:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9377671429F
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 17:08:30 +0000 (GMT)
Message-ID: <14331387.1149527310601.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 17:08:30 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-274) The new logging framework puts
 application logs into server directory in hadoop.log
In-Reply-To: <3236189.1149524790867.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-274?page=all ]

Owen O'Malley updated HADOOP-274:
---------------------------------

    Attachment: application-log-to-stdout.patch

Ok, this patch comes pretty close.

I've made applications log to stdout and simplified their log format.

The servers still log to their respective files.

> The new logging framework puts application logs into server directory in hadoop.log
> -----------------------------------------------------------------------------------
>
>          Key: HADOOP-274
>          URL: http://issues.apache.org/jira/browse/HADOOP-274
>      Project: Hadoop
>         Type: Bug

>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>  Attachments: application-log-to-stdout.patch
>
> The new logging infrastructure puts application logs into the server log directory under hadoop.log. I think it would be less confusing to use the old behavior of writing out to stderr (for applications).
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 18:45:35 2006
Return-Path: 
 <hadoop-dev-return-1859-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 69909 invoked from network); 5 Jun 2006 18:45:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 18:45:35 -0000
Received: (qmail 86307 invoked by uid 500); 5 Jun 2006 18:45:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86218 invoked by uid 500); 5 Jun 2006 18:45:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86128 invoked by uid 99); 5 Jun 2006 18:45:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 11:45:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 11:45:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9C8E77142C7
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 18:44:32 +0000 (GMT)
Message-ID: <31733028.1149533072638.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 18:44:32 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-274) The new logging framework puts
 application logs into server directory in hadoop.log
In-Reply-To: <3236189.1149524790867.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-274?page=all ]
     
Doug Cutting resolved HADOOP-274:
---------------------------------

    Fix Version: 0.3.1
     Resolution: Fixed

I just committed this.  Thanks, Owen.

> The new logging framework puts application logs into server directory in hadoop.log
> -----------------------------------------------------------------------------------
>
>          Key: HADOOP-274
>          URL: http://issues.apache.org/jira/browse/HADOOP-274
>      Project: Hadoop
>         Type: Bug

>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.3.1
>  Attachments: application-log-to-stdout.patch
>
> The new logging infrastructure puts application logs into the server log directory under hadoop.log. I think it would be less confusing to use the old behavior of writing out to stderr (for applications).
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 20:00:31 2006
Return-Path: 
 <hadoop-dev-return-1860-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12953 invoked from network); 5 Jun 2006 20:00:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 20:00:31 -0000
Received: (qmail 28765 invoked by uid 500); 5 Jun 2006 20:00:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28742 invoked by uid 500); 5 Jun 2006 20:00:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28733 invoked by uid 99); 5 Jun 2006 20:00:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 13:00:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 13:00:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8F4BD7142C9
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 19:59:30 +0000 (GMT)
Message-ID: <6189183.1149537570584.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 19:59:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-262) the reduce tasks do not report
 progress if they the map output locations is empty.
In-Reply-To: <2702206.1149015749846.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-262?page=all ]
     
Doug Cutting resolved HADOOP-262:
---------------------------------

    Fix Version: 0.3.1
                     (was: 0.3.0)
     Resolution: Fixed

I just committed this.  Thanks, Mahadev.

> the reduce tasks do not report progress if they the map output locations is empty.
> ----------------------------------------------------------------------------------
>
>          Key: HADOOP-262
>          URL: http://issues.apache.org/jira/browse/HADOOP-262
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.3.0
>     Reporter: Mahadev konar
>     Assignee: Mahadev konar
>      Fix For: 0.3.1
>  Attachments: reduce_sleep.patch
>
> The ReduceTaskRunner should report progress even if the number of ouput locations to copy is empty. In case, the last few maps are running on a tasktracker that goes down, all the reduce tasks waiting for these mapoutputs would fail.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 20:19:31 2006
Return-Path: 
 <hadoop-dev-return-1862-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 14789 invoked from network); 5 Jun 2006 20:19:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 20:19:31 -0000
Received: (qmail 34571 invoked by uid 500); 5 Jun 2006 20:19:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 34540 invoked by uid 500); 5 Jun 2006 20:19:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 34531 invoked by uid 99); 5 Jun 2006 20:19:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 13:19:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 13:19:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9BC8471429F
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 20:18:30 +0000 (GMT)
Message-ID: <33330329.1149538710635.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 20:18:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-250) HTTP Browsing interface for DFS
 Health/Status
In-Reply-To: <29976966.1148448150061.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-250?page=comments#action_12414844 ] 

Doug Cutting commented on HADOOP-250:
-------------------------------------

I'd like to commit this, but the changes this requires to FSNamesystem.java now conflict with other changes to that file.  I can try to sort this out, but if someone else gets a chance first that would be great.  Thanks.

> HTTP Browsing interface for DFS Health/Status
> ---------------------------------------------
>
>          Key: HADOOP-250
>          URL: http://issues.apache.org/jira/browse/HADOOP-250
>      Project: Hadoop
>         Type: New Feature

>   Components: dfs
>     Versions: 0.3.0
>     Reporter: Devaraj Das
>      Fix For: 0.3.0
>  Attachments: dfshealth.pdf, http_browsing_dfs.patch, http_browsing_dfs.patch
>
> A web interface to view the DFS health/status (name and data nodes) is to be created. User can connect to the webserver on the namenode and a web page will be displayed. The web page will give some details about that namenode (startup time and the total cluster capacity). The web page will contain a table of 'live' and 'dead' datanodes. Each live datanode will be a link to the complete details of the datanode as given by DatanodeInfo (also see DataNodeReport).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 20:19:23 2006
Return-Path: 
 <hadoop-dev-return-1861-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 14743 invoked from network); 5 Jun 2006 20:19:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 20:19:23 -0000
Received: (qmail 34409 invoked by uid 500); 5 Jun 2006 20:19:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 34366 invoked by uid 500); 5 Jun 2006 20:19:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 34357 invoked by uid 99); 5 Jun 2006 20:19:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 13:19:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [74.0.0.77] (HELO linuxfly.dragonflymc.com) (74.0.0.77)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 13:19:20 -0700
Received: from [192.168.1.246] (unknown [63.133.162.98])
	by linuxfly.dragonflymc.com (Postfix) with ESMTP id 61DA3C2006B
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 15:19:56 -0500 (CDT)
Message-ID: <448491B1.9030609@dragonflymc.com>
Date: Mon, 05 Jun 2006 15:18:57 -0500
From: Dennis Kubes <nutch-dev@dragonflymc.com>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: [jira] Resolved: (HADOOP-262) the reduce tasks do not report
 progress if they the map output locations is empty.
References: <6189183.1149537570584.JavaMail.jira@brutus>
In-Reply-To: <6189183.1149537570584.JavaMail.jira@brutus>
Content-Type: multipart/alternative;
 boundary="------------030808010706030807020602"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--------------030808010706030807020602
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit

Thanks for this.  I have been banging up against errors caused by the 
ReduceTasks failing because of waits for about a week now.  This fixes it.

Dennis

Doug Cutting (JIRA) wrote:
>      [ http://issues.apache.org/jira/browse/HADOOP-262?page=all ]
>      
> Doug Cutting resolved HADOOP-262:
> ---------------------------------
>
>     Fix Version: 0.3.1
>                      (was: 0.3.0)
>      Resolution: Fixed
>
> I just committed this.  Thanks, Mahadev.
>
>   
>> the reduce tasks do not report progress if they the map output locations is empty.
>> ----------------------------------------------------------------------------------
>>
>>          Key: HADOOP-262
>>          URL: http://issues.apache.org/jira/browse/HADOOP-262
>>      Project: Hadoop
>>         Type: Bug
>>     
>
>   
>>   Components: mapred
>>     Versions: 0.3.0
>>     Reporter: Mahadev konar
>>     Assignee: Mahadev konar
>>      Fix For: 0.3.1
>>  Attachments: reduce_sleep.patch
>>
>> The ReduceTaskRunner should report progress even if the number of ouput locations to copy is empty. In case, the last few maps are running on a tasktracker that goes down, all the reduce tasks waiting for these mapoutputs would fail.
>>     
>
>   

--------------030808010706030807020602--

From MAILER-DAEMON Mon Jun  5 20:23:30 2006
Return-Path: 
 <hadoop-dev-return-1863-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16144 invoked from network); 5 Jun 2006 20:23:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 20:23:30 -0000
Received: (qmail 41444 invoked by uid 500); 5 Jun 2006 20:23:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 41421 invoked by uid 500); 5 Jun 2006 20:23:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 41412 invoked by uid 99); 5 Jun 2006 20:23:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 13:23:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 13:23:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2DDE271429F
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 20:22:30 +0000 (GMT)
Message-ID: <21566327.1149538950169.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 20:22:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-153) skip records that throw exceptions
In-Reply-To: <25993970.1145554865659.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-153?page=all ]

Doug Cutting updated HADOOP-153:
--------------------------------

    Fix Version:     (was: 0.3.0)
      Assign To:     (was: Doug Cutting)

> skip records that throw exceptions
> ----------------------------------
>
>          Key: HADOOP-153
>          URL: http://issues.apache.org/jira/browse/HADOOP-153
>      Project: Hadoop
>         Type: New Feature

>   Components: mapred
>     Versions: 0.2
>     Reporter: Doug Cutting

>
> MapReduce should skip records that throw exceptions.
> If the exception is thrown under RecordReader.next() then RecordReader implementations should automatically skip to the start of a subsequent record.
> Exceptions in map and reduce implementations can simply be logged, unless they happen under RecordWriter.write().  Cancelling partial output could be hard.  So such output errors will still result in task failure.
> This behaviour should be optional, but enabled by default.  A count of errors per task and job should be maintained and displayed in the web ui.  Perhaps if some percentage of records (>50%?) result in exceptions then the task should fail.  This would stop jobs early that are misconfigured or have buggy code.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 20:25:30 2006
Return-Path: 
 <hadoop-dev-return-1864-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16584 invoked from network); 5 Jun 2006 20:25:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 20:25:30 -0000
Received: (qmail 43716 invoked by uid 500); 5 Jun 2006 20:25:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 43697 invoked by uid 500); 5 Jun 2006 20:25:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 43688 invoked by uid 99); 5 Jun 2006 20:25:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 13:25:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 13:25:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 29BBF71429F
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 20:24:30 +0000 (GMT)
Message-ID: <3523796.1149539070152.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 20:24:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-50) dfs datanode should store blocks in
 multiple directories
In-Reply-To: <133992549.1140560804844.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-50?page=all ]

Doug Cutting updated HADOOP-50:
-------------------------------

    Fix Version:     (was: 0.3.0)

> dfs datanode should store blocks in multiple directories
> --------------------------------------------------------
>
>          Key: HADOOP-50
>          URL: http://issues.apache.org/jira/browse/HADOOP-50
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.2
>     Reporter: Doug Cutting
>     Assignee: Mike Cafarella
>  Attachments: hadoop.50.patch.1
>
> The datanode currently stores all file blocks in a single directory.  With 32MB blocks and terabyte filesystems, this will create too many files in a single directory for many filesystems.  Thus blocks should be stored in multiple directories, perhaps even a shallow hierarchy.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 20:48:31 2006
Return-Path: 
 <hadoop-dev-return-1865-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30189 invoked from network); 5 Jun 2006 20:48:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 20:48:31 -0000
Received: (qmail 4367 invoked by uid 500); 5 Jun 2006 20:48:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 4347 invoked by uid 500); 5 Jun 2006 20:48:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 4337 invoked by uid 99); 5 Jun 2006 20:48:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 13:48:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 13:48:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 382337142A1
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 20:47:31 +0000 (GMT)
Message-ID: <27278533.1149540451178.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 20:47:31 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-245) record io translator doesn't strip
 path names
In-Reply-To: <13294037.1148416949918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-245?page=all ]
     
Doug Cutting resolved HADOOP-245:
---------------------------------

    Fix Version: 0.3.1
                     (was: 0.3.0)
     Resolution: Fixed

I just committed this.  Thanks!

> record io translator doesn't strip path names
> ---------------------------------------------
>
>          Key: HADOOP-245
>          URL: http://issues.apache.org/jira/browse/HADOOP-245
>      Project: Hadoop
>         Type: Bug

>   Components: record
>     Versions: 0.2.1
>     Reporter: Owen O'Malley
>     Assignee: Milind Bhandarkar
>      Fix For: 0.3.1
>  Attachments: hadoop-245-246.patch
>
> When I run the record translator with a pathname, the path name is not stripped. So for example:
> % bin/rcc --language c++ foo/bar/bat.jr
> generates:
> foo/bar/bat.jr.hh (instead of ./bat.jr.hh)
> and the first line is #ifndef __FOO/BAR/BAT_JR_HH__
> the first was unexpected and the second is clearly wrong.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 20:50:31 2006
Return-Path: 
 <hadoop-dev-return-1866-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31095 invoked from network); 5 Jun 2006 20:50:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 20:50:31 -0000
Received: (qmail 6643 invoked by uid 500); 5 Jun 2006 20:50:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 6624 invoked by uid 500); 5 Jun 2006 20:50:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 6613 invoked by uid 99); 5 Jun 2006 20:50:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 13:50:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 13:50:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 325E071429F
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 20:49:31 +0000 (GMT)
Message-ID: <2414953.1149540571203.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 20:49:31 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-237) Standard set of Performance Metrics
 for Hadoop
In-Reply-To: <14919853.1148078609860.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-237?page=all ]

Doug Cutting updated HADOOP-237:
--------------------------------

    Fix Version:     (was: 0.3.0)

> Standard set of Performance Metrics for Hadoop
> ----------------------------------------------
>
>          Key: HADOOP-237
>          URL: http://issues.apache.org/jira/browse/HADOOP-237
>      Project: Hadoop
>         Type: Improvement

>   Components: metrics
>     Versions: 0.3.0
>  Environment: All
>     Reporter: Milind Bhandarkar
>     Assignee: Milind Bhandarkar

>
> I am starting to use Hadoop's shiny new Metrics API to publish performance (and other) Metrics of running jobs and other daemons.
> Which performance metrics are people interested in seeing ? If possible, please group them according to modules, such as map-reduce, dfs, general-cluster-related etc. I will follow this process:
> 1. collect this list
> 2. assess feasibility of obtaining metric
> 3. assign context/record/metrics names
> 4. seek approval for names
> 5. instrument the code.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 20:54:32 2006
Return-Path: 
 <hadoop-dev-return-1867-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32960 invoked from network); 5 Jun 2006 20:54:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 20:54:32 -0000
Received: (qmail 10302 invoked by uid 500); 5 Jun 2006 20:54:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 10273 invoked by uid 500); 5 Jun 2006 20:54:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 10264 invoked by uid 99); 5 Jun 2006 20:54:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 13:54:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 13:54:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 044B67142A1
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 20:53:31 +0000 (GMT)
Message-ID: <6553084.1149540811014.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 20:53:31 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-155) Add a conf dir parameter to the
 scripts
In-Reply-To: <15786097.1145564465714.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-155?page=all ]

Doug Cutting updated HADOOP-155:
--------------------------------

    Fix Version:     (was: 0.3.0)

> Add a conf dir parameter to the scripts
> ---------------------------------------
>
>          Key: HADOOP-155
>          URL: http://issues.apache.org/jira/browse/HADOOP-155
>      Project: Hadoop
>         Type: Improvement

>   Components: conf
>     Versions: 0.2
>     Reporter: Owen O'Malley
>     Assignee: Mahadev konar

>
> We'd like a conf_dir parameter on the startup scripts (ie. "-c <confdif>"). In particular, it would be nice if it propagated down from hadoop-daemons.sh to slaves.sh to hadoop-daemon.sh using the command line rather than using the ssh -o SendEnv=HADOOP_CONF_DIR, which is not supported in many environments.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 21:01:30 2006
Return-Path: 
 <hadoop-dev-return-1868-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34189 invoked from network); 5 Jun 2006 21:01:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 21:01:30 -0000
Received: (qmail 18097 invoked by uid 500); 5 Jun 2006 21:01:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 18072 invoked by uid 500); 5 Jun 2006 21:01:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 18063 invoked by uid 99); 5 Jun 2006 21:01:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 14:01:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 14:01:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CD4D07142A1
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 21:00:29 +0000 (GMT)
Message-ID: <6001228.1149541229838.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 21:00:29 +0000 (GMT+00:00)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-275) log4j changes for hadoopStreaming
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

log4j changes for hadoopStreaming
---------------------------------

         Key: HADOOP-275
         URL: http://issues.apache.org/jira/browse/HADOOP-275
     Project: Hadoop
        Type: New Feature

  Components: contrib/streaming  
    Reporter: Michel Tourn
 Assigned to: Doug Cutting 


A patch for hadoopStreaming. 
Use log4j 
Still Using short UTF8 strings



-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 21:03:31 2006
Return-Path: 
 <hadoop-dev-return-1869-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 35595 invoked from network); 5 Jun 2006 21:03:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 21:03:31 -0000
Received: (qmail 20064 invoked by uid 500); 5 Jun 2006 21:03:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 19973 invoked by uid 500); 5 Jun 2006 21:03:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 19964 invoked by uid 99); 5 Jun 2006 21:03:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 14:03:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 14:03:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8E5BD71429F
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 21:02:30 +0000 (GMT)
Message-ID: <113017.1149541350580.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 21:02:30 +0000 (GMT+00:00)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-275) log4j changes for hadoopStreaming
In-Reply-To: <6001228.1149541229838.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-275?page=all ]

Michel Tourn updated HADOOP-275:
--------------------------------

    Attachment: streaming.yor.patch

> log4j changes for hadoopStreaming
> ---------------------------------
>
>          Key: HADOOP-275
>          URL: http://issues.apache.org/jira/browse/HADOOP-275
>      Project: Hadoop
>         Type: New Feature

>   Components: contrib/streaming
>     Reporter: Michel Tourn
>     Assignee: Doug Cutting
>  Attachments: streaming.yor.patch
>
> A patch for hadoopStreaming. 
> Use log4j 
> Still Using short UTF8 strings

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 21:14:33 2006
Return-Path: 
 <hadoop-dev-return-1870-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40240 invoked from network); 5 Jun 2006 21:14:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 21:14:33 -0000
Received: (qmail 37021 invoked by uid 500); 5 Jun 2006 21:14:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 36987 invoked by uid 500); 5 Jun 2006 21:14:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 36978 invoked by uid 99); 5 Jun 2006 21:14:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 14:14:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 14:14:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6390F7142C8
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 21:13:32 +0000 (GMT)
Message-ID: <31557423.1149542012404.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 21:13:32 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-242) job fails because of "No valid local
 directories in property: " exception
In-Reply-To: <13734662.1148411729914.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-242?page=all ]

Doug Cutting updated HADOOP-242:
--------------------------------

    Fix Version: 0.4
                     (was: 0.3.0)

> job fails because of "No valid local directories in property: " exception
> -------------------------------------------------------------------------
>
>          Key: HADOOP-242
>          URL: http://issues.apache.org/jira/browse/HADOOP-242
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Reporter: Yoram Arnon
>     Assignee: Owen O'Malley
>      Fix For: 0.4
>  Attachments: no-local.patch
>
> when running a fairly large job, of 70+K map tasks, I get many exceptions as shown below, and eventually the job failes when a task fails four times.
> The exception doesn't really tell us enough information to debug this properly, so the first thing to do would be to add more information (path) to the exception.
> The path indicated in the config file exists, is writable and valid, though 'path' may be anything.
> the exception:
> java.io.IOException: No valid local directories in property: mapred.local.dir at org.apache.hadoop.conf.Configuration.getLocalPath(Configuration.java:293) at org.apache.hadoop.mapred.JobConf.getLocalPath(JobConf.java:153) at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.localizeTask(TaskTracker.java:523) at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.launchTask(TaskTracker.java:572) at org.apache.hadoop.mapred.TaskTracker.startNewTask(TaskTracker.java:389) at org.apache.hadoop.mapred.TaskTracker.offerService(TaskTracker.java:303) at org.apache.hadoop.mapred.TaskTracker.run(TaskTracker.java:418) at org.apache.hadoop.mapred.TaskTracker.main(TaskTracker.java:920)
> the code:
>   public Path getLocalPath(String dirsProp, String path)
>     throws IOException {
>     String[] dirs = getStrings(dirsProp);
>     int hashCode = path.hashCode();
>     FileSystem fs = FileSystem.getNamed("local", this);
>     for (int i = 0; i < dirs.length; i++) {  // try each local dir
>       int index = (hashCode+i & Integer.MAX_VALUE) % dirs.length;
>       Path file = new Path(dirs[index], path);
>       Path dir = file.getParent();
>       if (fs.exists(dir) || fs.mkdirs(dir)) {
>         return file;
>       }
>     }
>     throw new IOException("No valid local directories in property: "+dirsProp);
>   }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 21:16:30 2006
Return-Path: 
 <hadoop-dev-return-1871-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 41204 invoked from network); 5 Jun 2006 21:16:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 21:16:30 -0000
Received: (qmail 38131 invoked by uid 500); 5 Jun 2006 21:16:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38105 invoked by uid 500); 5 Jun 2006 21:16:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38095 invoked by uid 99); 5 Jun 2006 21:16:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 14:16:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 14:16:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2854671429F
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 21:15:30 +0000 (GMT)
Message-ID: <2784081.1149542130162.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 21:15:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-203) remove deprecated java.io.File methods
In-Reply-To: <13879069.1147128020850.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-203?page=all ]

Doug Cutting updated HADOOP-203:
--------------------------------

    Fix Version: 0.4
                     (was: 0.3.0)

> remove deprecated java.io.File methods
> --------------------------------------
>
>          Key: HADOOP-203
>          URL: http://issues.apache.org/jira/browse/HADOOP-203
>      Project: Hadoop
>         Type: Improvement

>   Components: fs
>     Reporter: Doug Cutting
>     Assignee: Doug Cutting
>     Priority: Minor
>      Fix For: 0.4

>
> Now that the 0.2 release is out, we should remove the deprecated FileSystem methods that use java.io.File, since using org.apache.hadoop.fs.Path is less error-prone.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 21:20:31 2006
Return-Path: 
 <hadoop-dev-return-1872-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43637 invoked from network); 5 Jun 2006 21:20:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 21:20:31 -0000
Received: (qmail 41635 invoked by uid 500); 5 Jun 2006 21:20:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 41605 invoked by uid 500); 5 Jun 2006 21:20:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 41596 invoked by uid 99); 5 Jun 2006 21:20:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 14:20:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 14:20:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B07DD7142A1
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 21:19:30 +0000 (GMT)
Message-ID: <13895932.1149542370719.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 21:19:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-260) the start up scripts should take a
 command line parameter --config making it easy to run multiple hadoop
 installation on same machines
In-Reply-To: <32103939.1149014550880.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-260?page=all ]

Doug Cutting updated HADOOP-260:
--------------------------------

    Fix Version: 0.4
                     (was: 0.3.0)

> the start up scripts should take a command line parameter --config making it easy to run multiple hadoop installation on same machines
> --------------------------------------------------------------------------------------------------------------------------------------
>
>          Key: HADOOP-260
>          URL: http://issues.apache.org/jira/browse/HADOOP-260
>      Project: Hadoop
>         Type: Improvement

>     Versions: 0.2
>     Reporter: Mahadev konar
>     Assignee: Mahadev konar
>     Priority: Minor
>      Fix For: 0.4
>  Attachments: config.patch
>
> --config paramter would allow getting rid of SSH_OPTS.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 21:22:31 2006
Return-Path: 
 <hadoop-dev-return-1873-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 44155 invoked from network); 5 Jun 2006 21:22:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 21:22:31 -0000
Received: (qmail 43289 invoked by uid 500); 5 Jun 2006 21:22:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 43265 invoked by uid 500); 5 Jun 2006 21:22:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 43255 invoked by uid 99); 5 Jun 2006 21:22:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 14:22:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 14:22:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A60997142A1
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 21:21:30 +0000 (GMT)
Message-ID: <26566233.1149542490677.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 21:21:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-240) namenode should not log failed
 mkdirs at warning level
In-Reply-To: <10933304.1148404889830.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-240?page=comments#action_12414859 ] 

Doug Cutting commented on HADOOP-240:
-------------------------------------

I'd like to apply this now, but it has conflicts.  I'll try to work through them...

> namenode should not log failed mkdirs at warning level
> ------------------------------------------------------
>
>          Key: HADOOP-240
>          URL: http://issues.apache.org/jira/browse/HADOOP-240
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.2.1
>     Reporter: Hairong Kuang
>     Assignee: Hairong Kuang
>     Priority: Minor
>      Fix For: 0.3.0
>  Attachments: mkdir.patch, mkdir_new.patch
>
> when a namenode creates a directory, it also recursively tries to creates its parent directories. If they already exist, the lastSuccess is  false and the "error" is logged at the warning level.
> The right approach is to set the logging leve lower to fine or simply ignore the the "error".

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 21:57:36 2006
Return-Path: 
 <hadoop-dev-return-1874-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 58092 invoked from network); 5 Jun 2006 21:57:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 21:57:36 -0000
Received: (qmail 89382 invoked by uid 500); 5 Jun 2006 21:57:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 89361 invoked by uid 500); 5 Jun 2006 21:57:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 89352 invoked by uid 99); 5 Jun 2006 21:57:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 14:57:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 14:57:35 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3A5277142C7
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 21:56:31 +0000 (GMT)
Message-ID: <23439580.1149544591235.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 21:56:31 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-276) No appenders could be found for logger
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

No appenders could be found for logger
--------------------------------------

         Key: HADOOP-276
         URL: http://issues.apache.org/jira/browse/HADOOP-276
     Project: Hadoop
        Type: Bug

    Versions: 0.3.0    
    Reporter: Owen O'Malley
 Assigned to: Owen O'Malley 
     Fix For: 0.3.1


When you start the servers with an old configuration directory without the properties files, you get messages about:

log4j:WARN No appenders could be found for logger (org.apache.hadoop.conf.Configuration).
log4j:WARN Please initialize the log4j system properly.

The problem is that the property files are not included in the jar file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 21:59:31 2006
Return-Path: 
 <hadoop-dev-return-1875-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 58682 invoked from network); 5 Jun 2006 21:59:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 21:59:31 -0000
Received: (qmail 91121 invoked by uid 500); 5 Jun 2006 21:59:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 90983 invoked by uid 500); 5 Jun 2006 21:59:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 90974 invoked by uid 99); 5 Jun 2006 21:59:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 14:59:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 14:59:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 92D0C7142A1
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 21:58:30 +0000 (GMT)
Message-ID: <5022710.1149544710598.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 21:58:30 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-276) No appenders could be found for logger
In-Reply-To: <23439580.1149544591235.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-276?page=all ]

Owen O'Malley updated HADOOP-276:
---------------------------------

    Attachment: add-properties.patch

This patch adds the property files to the jar.

> No appenders could be found for logger
> --------------------------------------
>
>          Key: HADOOP-276
>          URL: http://issues.apache.org/jira/browse/HADOOP-276
>      Project: Hadoop
>         Type: Bug

>     Versions: 0.3.0
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.3.1
>  Attachments: add-properties.patch
>
> When you start the servers with an old configuration directory without the properties files, you get messages about:
> log4j:WARN No appenders could be found for logger (org.apache.hadoop.conf.Configuration).
> log4j:WARN Please initialize the log4j system properly.
> The problem is that the property files are not included in the jar file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 22:11:31 2006
Return-Path: 
 <hadoop-dev-return-1876-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 62810 invoked from network); 5 Jun 2006 22:11:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 22:11:31 -0000
Received: (qmail 3515 invoked by uid 500); 5 Jun 2006 22:11:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3494 invoked by uid 500); 5 Jun 2006 22:11:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3485 invoked by uid 99); 5 Jun 2006 22:11:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 15:11:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 15:11:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9FA407142A1
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 22:10:30 +0000 (GMT)
Message-ID: <4260475.1149545430651.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 22:10:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-276) No appenders could be found for
 logger
In-Reply-To: <23439580.1149544591235.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-276?page=all ]
     
Doug Cutting resolved HADOOP-276:
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks!

> No appenders could be found for logger
> --------------------------------------
>
>          Key: HADOOP-276
>          URL: http://issues.apache.org/jira/browse/HADOOP-276
>      Project: Hadoop
>         Type: Bug

>     Versions: 0.3.0
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.3.1
>  Attachments: add-properties.patch
>
> When you start the servers with an old configuration directory without the properties files, you get messages about:
> log4j:WARN No appenders could be found for logger (org.apache.hadoop.conf.Configuration).
> log4j:WARN Please initialize the log4j system properly.
> The problem is that the property files are not included in the jar file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 22:11:32 2006
Return-Path: 
 <hadoop-dev-return-1877-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 62842 invoked from network); 5 Jun 2006 22:11:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 22:11:32 -0000
Received: (qmail 3682 invoked by uid 500); 5 Jun 2006 22:11:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3655 invoked by uid 500); 5 Jun 2006 22:11:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3646 invoked by uid 99); 5 Jun 2006 22:11:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 15:11:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 15:11:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A0D6E7142B7
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 22:10:31 +0000 (GMT)
Message-ID: <29570583.1149545431656.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 22:10:31 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-240) namenode should not log failed mkdirs
 at warning level
In-Reply-To: <10933304.1148404889830.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-240?page=all ]

Doug Cutting updated HADOOP-240:
--------------------------------

    Fix Version: 0.4
                     (was: 0.3.0)

Sorry.  I am unable to get these into 0.3.1, they'll have to wait for 0.4.

> namenode should not log failed mkdirs at warning level
> ------------------------------------------------------
>
>          Key: HADOOP-240
>          URL: http://issues.apache.org/jira/browse/HADOOP-240
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.2.1
>     Reporter: Hairong Kuang
>     Assignee: Hairong Kuang
>     Priority: Minor
>      Fix For: 0.4
>  Attachments: mkdir.patch, mkdir_new.patch
>
> when a namenode creates a directory, it also recursively tries to creates its parent directories. If they already exist, the lastSuccess is  false and the "error" is logged at the warning level.
> The right approach is to set the logging leve lower to fine or simply ignore the the "error".

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 22:11:38 2006
Return-Path: 
 <hadoop-dev-return-1878-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 62894 invoked from network); 5 Jun 2006 22:11:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 22:11:38 -0000
Received: (qmail 3845 invoked by uid 500); 5 Jun 2006 22:11:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3825 invoked by uid 500); 5 Jun 2006 22:11:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3816 invoked by uid 99); 5 Jun 2006 22:11:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 15:11:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 15:11:37 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 982CA7142C7
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 22:10:32 +0000 (GMT)
Message-ID: <24929698.1149545432620.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 22:10:32 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-250) HTTP Browsing interface for DFS
 Health/Status
In-Reply-To: <29976966.1148448150061.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-250?page=all ]

Doug Cutting updated HADOOP-250:
--------------------------------

    Fix Version: 0.4
                     (was: 0.3.0)

Sorry.  I am unable to get these into 0.3.1, they'll have to wait for 0.4.

> HTTP Browsing interface for DFS Health/Status
> ---------------------------------------------
>
>          Key: HADOOP-250
>          URL: http://issues.apache.org/jira/browse/HADOOP-250
>      Project: Hadoop
>         Type: New Feature

>   Components: dfs
>     Versions: 0.3.0
>     Reporter: Devaraj Das
>      Fix For: 0.4
>  Attachments: dfshealth.pdf, http_browsing_dfs.patch, http_browsing_dfs.patch
>
> A web interface to view the DFS health/status (name and data nodes) is to be created. User can connect to the webserver on the namenode and a web page will be displayed. The web page will give some details about that namenode (startup time and the total cluster capacity). The web page will contain a table of 'live' and 'dead' datanodes. Each live datanode will be a link to the complete details of the datanode as given by DatanodeInfo (also see DataNodeReport).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 23:09:32 2006
Return-Path: 
 <hadoop-dev-return-1879-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91537 invoked from network); 5 Jun 2006 23:09:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 23:09:32 -0000
Received: (qmail 63019 invoked by uid 500); 5 Jun 2006 23:09:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62993 invoked by uid 500); 5 Jun 2006 23:09:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62984 invoked by uid 99); 5 Jun 2006 23:09:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:09:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:09:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9319871429F
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 23:08:31 +0000 (GMT)
Message-ID: <16611545.1149548911599.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 23:08:31 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Closed: (HADOOP-75) dfs should check full file availability
 only at close
In-Reply-To: <873621841.1142030138809.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-75?page=all ]
     
Doug Cutting closed HADOOP-75:
------------------------------


> dfs should check full file availability only at close
> -----------------------------------------------------
>
>          Key: HADOOP-75
>          URL: http://issues.apache.org/jira/browse/HADOOP-75
>      Project: Hadoop
>         Type: Improvement

>   Components: dfs
>     Versions: 0.2
>     Reporter: Doug Cutting
>     Assignee: Milind Bhandarkar
>     Priority: Minor
>      Fix For: 0.3.0
>  Attachments: hadoop-75.patch
>
> Currently it appears that dfs checks that the namenode knows about all blocks in a file as each block is written.  It would be more efficient to only check that all blocks are stored somewhere when the file is closed.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 23:09:33 2006
Return-Path: 
 <hadoop-dev-return-1880-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91568 invoked from network); 5 Jun 2006 23:09:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 23:09:33 -0000
Received: (qmail 63185 invoked by uid 500); 5 Jun 2006 23:09:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63152 invoked by uid 500); 5 Jun 2006 23:09:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63143 invoked by uid 99); 5 Jun 2006 23:09:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:09:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:09:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3510E7142A7
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 23:08:33 +0000 (GMT)
Message-ID: <16781985.1149548913214.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 23:08:33 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Closed: (HADOOP-94) disallow more than one datanode running
 on one computing sharing the same data directory
In-Reply-To: <1264551394.1142645179057.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-94?page=all ]
     
Doug Cutting closed HADOOP-94:
------------------------------


> disallow more than one datanode running on one computing sharing the same data directory
> ----------------------------------------------------------------------------------------
>
>          Key: HADOOP-94
>          URL: http://issues.apache.org/jira/browse/HADOOP-94
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.2
>     Reporter: Hairong Kuang
>      Fix For: 0.3.0

>
> Currently dfs disallows more one datanode to run on the same computer if they are started up using the same hadoop conf dir. However, this does not prevent more than one data node gets started, each using a different conf dir (strickly speaking, a different pid file). If every machine has two such datanodes running, namenode will be busy on deleting and replicating blocks or eventually lead to block loss.
> Suggested solution: put pid file in  the data directory and disallow configuration.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 23:09:35 2006
Return-Path: 
 <hadoop-dev-return-1881-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91597 invoked from network); 5 Jun 2006 23:09:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 23:09:35 -0000
Received: (qmail 63334 invoked by uid 500); 5 Jun 2006 23:09:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63312 invoked by uid 500); 5 Jun 2006 23:09:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63303 invoked by uid 99); 5 Jun 2006 23:09:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:09:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:09:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C9A687142C7
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 23:08:34 +0000 (GMT)
Message-ID: <2357036.1149548914821.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 23:08:34 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Closed: (HADOOP-115) permit reduce input types to differ
 from reduce output types
In-Reply-To: <393765989.1143819100222.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-115?page=all ]
     
Doug Cutting closed HADOOP-115:
-------------------------------


> permit reduce input types to differ from reduce output types
> ------------------------------------------------------------
>
>          Key: HADOOP-115
>          URL: http://issues.apache.org/jira/browse/HADOOP-115
>      Project: Hadoop
>         Type: New Feature

>   Components: mapred
>     Reporter: Runping Qi
>     Assignee: Runping Qi
>      Fix For: 0.3.0
>  Attachments: hadoop-115_ReduceTask.patch, hadoop-115_tk.patch, patch_115.txt.2006_05_16
>
> When map tasks write intermediate data out, they always use SequencialFile RecordWriter with key/value classes from the job object.
> When the reducers write the final results out, its output format is obtained from the job object. By default, it is TextOutputFormat, and no conflicts.
> However, if one wants to use SequencialFileFormat for the final results, then the key/value classes are also obtained from the job object, the same as the map tasks' output. Now we have a problem. It is impossible for the map outputs and reducer outputs use different key/value classes, if one wants the reducers generate outputs in SequentialFileFormat.
> A simple fix would be to add another two attributes to JobConf class: mapOutputLeyClass and mapOutputValueClass. That allows the user to have different key/value classes for the intermediate and final outputs.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 23:09:37 2006
Return-Path: 
 <hadoop-dev-return-1882-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91630 invoked from network); 5 Jun 2006 23:09:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 23:09:37 -0000
Received: (qmail 63491 invoked by uid 500); 5 Jun 2006 23:09:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63471 invoked by uid 500); 5 Jun 2006 23:09:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63462 invoked by uid 99); 5 Jun 2006 23:09:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:09:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:09:35 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5797C7142B7
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 23:08:36 +0000 (GMT)
Message-ID: <3442774.1149548916356.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 23:08:36 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Closed: (HADOOP-124) don't permit two datanodes to run from
 same dfs.data.dir
In-Reply-To: <464550433.1144431983681.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-124?page=all ]
     
Doug Cutting closed HADOOP-124:
-------------------------------


> don't permit two datanodes to run from same dfs.data.dir
> --------------------------------------------------------
>
>          Key: HADOOP-124
>          URL: http://issues.apache.org/jira/browse/HADOOP-124
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.2
>  Environment: ~30 node cluster
>     Reporter: Bryan Pendleton
>     Assignee: Konstantin Shvachko
>     Priority: Critical
>      Fix For: 0.3.0
>  Attachments: DatanodeRegister.txt, Hadoop-124-v3.patch, Hadoop-124.patch
>
> DFS files are still rotting.
> I suspect that there's a problem with block accounting/detecting identical hosts in the namenode. I have 30 physical nodes, with various numbers of local disks, meaning that my current 'bin/hadoop dfs -report" shows 80 nodes after a full restart. However, when I discovered the  problem (which resulted in losing about 500gb worth of temporary data because of missing blocks in some of the larger chunks) -report showed 96 nodes. I suspect somehow there were extra datanodes running against the same paths, and that the namenode was counting those as replicated instances, which then showed up over-replicated, and one of them was told to delete its local block, leading to the block actually getting lost.
> I will debug it more the next time the situation arises. This is at least the 5th time I've had a large amount of file data "rot" in DFS since January.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 23:09:38 2006
Return-Path: 
 <hadoop-dev-return-1883-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91661 invoked from network); 5 Jun 2006 23:09:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 23:09:38 -0000
Received: (qmail 63653 invoked by uid 500); 5 Jun 2006 23:09:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63628 invoked by uid 500); 5 Jun 2006 23:09:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63619 invoked by uid 99); 5 Jun 2006 23:09:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:09:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:09:37 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DA16B7142C8
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 23:08:37 +0000 (GMT)
Message-ID: <12253110.1149548917890.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 23:08:37 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Closed: (HADOOP-146) potential conflict in block id's,
 leading to data corruption
In-Reply-To: <2179039.1145398037471.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-146?page=all ]
     
Doug Cutting closed HADOOP-146:
-------------------------------


> potential conflict in block id's, leading to data corruption
> ------------------------------------------------------------
>
>          Key: HADOOP-146
>          URL: http://issues.apache.org/jira/browse/HADOOP-146
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.1.0, 0.1.1
>     Reporter: Yoram Arnon
>     Assignee: Konstantin Shvachko
>      Fix For: 0.3.0
>  Attachments: hadoop-146-random.patch
>
> currently, block id's are generated randomly, and are not tested for collisions with existing id's.
> while ids are 64 bits, given enough time and a large enough FS, collisions are expected.
> when a collision occurs, a random subset of blocks with that id will be removed as extra replicas, and the contents of that portion of the containing file are one random version of the block.
> to solve this one could check for id collision when creating a new block, getting a new id in case of conflict. This approach requires the name node to keep track of all existing block id's (rather than just the ones who have reported in), and to identify old versions of a block id as in valid (in case a data node dies, a file is deleted, then a block id is reused for a new file).
> Alternatively, one could simply use sequential block id's. Here the downsides are: 
> 1. migration from an existing file system is hard, requiring compaction of the entire FS
> 2. once you cycle through 64 bits of id's (quite a few years at full blast), you're in trouble again (or run occasional/background compaction)
> 3. you must never lose the high watermark block id.
> synchronized Block allocateBlock(UTF8 src) {
>         Block b = new Block();
>         FileUnderConstruction v = (FileUnderConstruction) pendingCreates.get(src);
>         v.add(b);
>         pendingCreateBlocks.add(b);
>         return b;
>     }
> static Random r = new Random();
>     /**
>      */
>     public Block() {
>         this.blkid = r.nextLong();
>         this.len = 0;
>     }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 23:09:55 2006
Return-Path: 
 <hadoop-dev-return-1884-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91881 invoked from network); 5 Jun 2006 23:09:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 23:09:55 -0000
Received: (qmail 64679 invoked by uid 500); 5 Jun 2006 23:09:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64634 invoked by uid 500); 5 Jun 2006 23:09:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64623 invoked by uid 99); 5 Jun 2006 23:09:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:09:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:09:51 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 461157142CE
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 23:08:39 +0000 (GMT)
Message-ID: <24552220.1149548919284.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 23:08:39 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Closed: (HADOOP-161) dfs blocks define equal, but not
 hashcode
In-Reply-To: <2765023.1145750645831.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-161?page=all ]
     
Doug Cutting closed HADOOP-161:
-------------------------------


> dfs blocks define equal, but not hashcode
> -----------------------------------------
>
>          Key: HADOOP-161
>          URL: http://issues.apache.org/jira/browse/HADOOP-161
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.1.1
>     Reporter: Owen O'Malley
>     Assignee: Milind Bhandarkar
>      Fix For: 0.3.0
>  Attachments: hadoop-161-correct.patch, hadoop-161.patch
>
> Findbugs reports that dfs.Block defines equals but not hashcode, which is problematic if it is ever put into a hash table.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 23:09:55 2006
Return-Path: 
 <hadoop-dev-return-1885-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91930 invoked from network); 5 Jun 2006 23:09:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 23:09:55 -0000
Received: (qmail 64710 invoked by uid 500); 5 Jun 2006 23:09:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64649 invoked by uid 500); 5 Jun 2006 23:09:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64624 invoked by uid 99); 5 Jun 2006 23:09:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:09:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:09:51 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 999F27142D0
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 23:08:40 +0000 (GMT)
Message-ID: <16142084.1149548920626.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 23:08:40 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Closed: (HADOOP-163) If a DFS datanode cannot write onto its
 file system. it should tell the name node not to assign new blocks to it.
In-Reply-To: <12688000.1145915542692.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-163?page=all ]
     
Doug Cutting closed HADOOP-163:
-------------------------------


> If a DFS datanode cannot write onto its file system. it should tell the name node not to assign new blocks to it.
> -----------------------------------------------------------------------------------------------------------------
>
>          Key: HADOOP-163
>          URL: http://issues.apache.org/jira/browse/HADOOP-163
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.2
>     Reporter: Runping Qi
>     Assignee: Hairong Kuang
>      Fix For: 0.3.0
>  Attachments: disk.patch
>
> I observed that sometime, if a file of a data node is not mounted properly, it may not be writable. In this case, any data writes will fail. The name node should stop assigning new blocks to that data node. The webpage should show that node is in an abnormal state.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 23:09:56 2006
Return-Path: 
 <hadoop-dev-return-1886-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91956 invoked from network); 5 Jun 2006 23:09:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 23:09:56 -0000
Received: (qmail 65016 invoked by uid 500); 5 Jun 2006 23:09:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64760 invoked by uid 500); 5 Jun 2006 23:09:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64697 invoked by uid 99); 5 Jun 2006 23:09:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:09:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:09:52 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7C6167142D3
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 23:08:41 +0000 (GMT)
Message-ID: <9874656.1149548921506.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 23:08:41 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Closed: (HADOOP-179) task tracker ghosts remain after 10
 minutes
In-Reply-To: <1916800.1146508846408.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-179?page=all ]
     
Doug Cutting closed HADOOP-179:
-------------------------------


> task tracker ghosts remain after 10 minutes
> -------------------------------------------
>
>          Key: HADOOP-179
>          URL: http://issues.apache.org/jira/browse/HADOOP-179
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.1.1
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.3.0

>
> I had a bunch of TaskTrackers time out because they were in the middle of job cleanup and the JobTracker restarted them by responding to emitHeartbeat with UNKNOWN_TASKTRACKER. Afterwards, I ended up with both the new and the restarted TaskTrackers on the list:
> node1100_1234, 0-10 seconds since heartbeat
> node1100_4321,  >10,000 seconds since heartbeat

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 23:09:56 2006
Return-Path: 
 <hadoop-dev-return-1887-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91949 invoked from network); 5 Jun 2006 23:09:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 23:09:56 -0000
Received: (qmail 64947 invoked by uid 500); 5 Jun 2006 23:09:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64863 invoked by uid 500); 5 Jun 2006 23:09:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64698 invoked by uid 99); 5 Jun 2006 23:09:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:09:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:09:52 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6DF367142D5
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 23:08:42 +0000 (GMT)
Message-ID: <7870753.1149548922447.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 23:08:42 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Closed: (HADOOP-180) task tracker times out cleaning big job
In-Reply-To: <24018329.1146508966485.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-180?page=all ]
     
Doug Cutting closed HADOOP-180:
-------------------------------


> task tracker times out cleaning big job
> ---------------------------------------
>
>          Key: HADOOP-180
>          URL: http://issues.apache.org/jira/browse/HADOOP-180
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.1.1
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.3.0
>  Attachments: task-cleanup-thread.patch
>
> After completing a big job (63,920 maps, 1880 reduces, 188 nodes), lots of the TaskTrackers timed out because the task cleanup is handled by the same thread as the heartbeats.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 23:09:57 2006
Return-Path: 
 <hadoop-dev-return-1888-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92021 invoked from network); 5 Jun 2006 23:09:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 23:09:57 -0000
Received: (qmail 65396 invoked by uid 500); 5 Jun 2006 23:09:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 65217 invoked by uid 500); 5 Jun 2006 23:09:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 65168 invoked by uid 99); 5 Jun 2006 23:09:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:09:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:09:54 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 558B67142E4
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 23:08:43 +0000 (GMT)
Message-ID: <33289533.1149548923347.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 23:08:43 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Closed: (HADOOP-195) improve performance of map output
 transfers
In-Reply-To: <6413697.1146765138386.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-195?page=all ]
     
Doug Cutting closed HADOOP-195:
-------------------------------


> improve performance of map output transfers
> -------------------------------------------
>
>          Key: HADOOP-195
>          URL: http://issues.apache.org/jira/browse/HADOOP-195
>      Project: Hadoop
>         Type: Improvement

>   Components: mapred
>     Versions: 0.2
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.3.0
>  Attachments: MapFileSimulator.java, data-transfer-chart.pdf, mapfilesimulator-big.txt, mapfilesimulator-sort2.txt, netstat.log, netstat.xls, parallel-copiers.txt
>
> The data transfer of the map output should be transfered via http instead rpc, because rpc is very slow for this application and the timeout behavior is suboptimal. (server sends data and client ignores it because it took more than 10 seconds to be received.)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 23:09:57 2006
Return-Path: 
 <hadoop-dev-return-1889-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91998 invoked from network); 5 Jun 2006 23:09:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 23:09:57 -0000
Received: (qmail 65390 invoked by uid 500); 5 Jun 2006 23:09:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 65310 invoked by uid 500); 5 Jun 2006 23:09:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 65170 invoked by uid 99); 5 Jun 2006 23:09:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:09:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:09:54 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4163B7142E6
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 23:08:44 +0000 (GMT)
Message-ID: <406780.1149548924264.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 23:08:44 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Closed: (HADOOP-200) The map task names are sent to the
 reduces
In-Reply-To: <13737024.1146974120921.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-200?page=all ]
     
Doug Cutting closed HADOOP-200:
-------------------------------


> The map task names are sent to the reduces
> ------------------------------------------
>
>          Key: HADOOP-200
>          URL: http://issues.apache.org/jira/browse/HADOOP-200
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.2
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.3.0
>  Attachments: map-id.patch
>
> As each reduce is created, it is given the entire set of potential map names. For my large sort jobs with 64k maps, this means that each reduce task is given a two dimensional array that is 5 tasks/map * 64k maps = 320k strings. Since the reduce task is passed from the job tracker to the task tracker and down to the task runner, passing the entire list is very expensive. I suspect that this is the cause of the slow downs that I see in the task trackers heart beats when the reduce tasks are being launched.
> I propose that the ReduceTask be changed to just get the count of maps, with ids from 0 .. maps -1.
>   public ReduceTask(String jobFile, String taskId, int maps, int partition);
> Then we need to change the protocol for finding map outputs:
>   MapOutputLocation[] locateMapOutputs(String jobId, int[] mapIds, int partition);

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 23:09:59 2006
Return-Path: 
 <hadoop-dev-return-1890-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92090 invoked from network); 5 Jun 2006 23:09:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 23:09:59 -0000
Received: (qmail 65635 invoked by uid 500); 5 Jun 2006 23:09:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 65599 invoked by uid 500); 5 Jun 2006 23:09:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 65589 invoked by uid 99); 5 Jun 2006 23:09:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:09:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:09:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 301A37142E8
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 23:08:45 +0000 (GMT)
Message-ID: <4946895.1149548925194.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 23:08:45 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Closed: (HADOOP-202) sort should use a smaller number of
 reduces
In-Reply-To: <9539530.1147127300947.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-202?page=all ]
     
Doug Cutting closed HADOOP-202:
-------------------------------


> sort should use a smaller number of reduces
> -------------------------------------------
>
>          Key: HADOOP-202
>          URL: http://issues.apache.org/jira/browse/HADOOP-202
>      Project: Hadoop
>         Type: Improvement

>   Components: mapred
>     Versions: 0.2
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>     Priority: Trivial
>      Fix For: 0.3.0
>  Attachments: sort-default-reduces.patch
>
> We should see better performance with fewer reduces. I'll change the default number of reduces to be equal to the capacity of the cluster.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 23:09:59 2006
Return-Path: 
 <hadoop-dev-return-1891-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92093 invoked from network); 5 Jun 2006 23:09:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 23:09:59 -0000
Received: (qmail 65701 invoked by uid 500); 5 Jun 2006 23:09:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 65609 invoked by uid 500); 5 Jun 2006 23:09:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 65590 invoked by uid 99); 5 Jun 2006 23:09:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:09:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:09:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 166AE7142EA
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 23:08:46 +0000 (GMT)
Message-ID: <20149344.1149548926089.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 23:08:46 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Closed: (HADOOP-204) Need to tweak a few things in the
 metrics package to support the Simon plugin
In-Reply-To: <22942249.1147204985788.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-204?page=all ]
     
Doug Cutting closed HADOOP-204:
-------------------------------


> Need to tweak a few things in the metrics package to support the Simon plugin
> -----------------------------------------------------------------------------
>
>          Key: HADOOP-204
>          URL: http://issues.apache.org/jira/browse/HADOOP-204
>      Project: Hadoop
>         Type: Improvement

>   Components: metrics
>     Reporter: David Bowen
>     Assignee: David Bowen
>      Fix For: 0.3.0
>  Attachments: tweaks.patch
>
> (1) added an extra metrics.jar target to the build.xml so that I can build a stand-alone library containing only the
> metrics package and its subpackages.
> (2) added serialversionUIDs to a bunch of classes to make Eclipse happy
> (3) made AbstractMetricsContext.createRecord final, and added a protected newRecord that subclasses can use
> to customize record creation without breaking the parent class.
> (4) minor fix to how errors in callbacks are handled
> (5) constructor in MetricsRecordImpl made protected rather than package private so that it can be subclassed
> (6) extended Util.parse(String serverSpecs, int defaultPort) to handle the case of a null serverSpecs by defaulting to localhost

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 23:10:00 2006
Return-Path: 
 <hadoop-dev-return-1892-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92167 invoked from network); 5 Jun 2006 23:10:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 23:10:00 -0000
Received: (qmail 65962 invoked by uid 500); 5 Jun 2006 23:09:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 65917 invoked by uid 500); 5 Jun 2006 23:09:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 65907 invoked by uid 99); 5 Jun 2006 23:09:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:09:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:09:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6646B7142EB
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 23:08:47 +0000 (GMT)
Message-ID: <1620644.1149548927416.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 23:08:47 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Closed: (HADOOP-205) the job tracker does not schedule
 enough map on the cluster
In-Reply-To: <10031675.1147208284547.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-205?page=all ]
     
Doug Cutting closed HADOOP-205:
-------------------------------


> the job tracker does not schedule enough map on the cluster
> -----------------------------------------------------------
>
>          Key: HADOOP-205
>          URL: http://issues.apache.org/jira/browse/HADOOP-205
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.2
>     Reporter: Owen O'Malley
>     Assignee: Mahadev konar
>      Fix For: 0.3.0
>  Attachments: maplaunch.patch
>
> The job tracker during my big sort runs only has 80-120 maps running at a time with 2 tasks/node and 179 nodes and a large queue of map tasks. It seems to be caused by the load balancing using the current load rather than the required load to run all of the queued tasks.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 23:10:00 2006
Return-Path: 
 <hadoop-dev-return-1893-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92176 invoked from network); 5 Jun 2006 23:10:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 23:10:00 -0000
Received: (qmail 66043 invoked by uid 500); 5 Jun 2006 23:09:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 65929 invoked by uid 500); 5 Jun 2006 23:09:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 65908 invoked by uid 99); 5 Jun 2006 23:09:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:09:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:09:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4AE337142F0
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 23:08:48 +0000 (GMT)
Message-ID: <13761897.1149548928304.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 23:08:48 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Closed: (HADOOP-208) add failure page to webapp
In-Reply-To: <25090401.1147300384509.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-208?page=all ]
     
Doug Cutting closed HADOOP-208:
-------------------------------


> add failure page to webapp
> --------------------------
>
>          Key: HADOOP-208
>          URL: http://issues.apache.org/jira/browse/HADOOP-208
>      Project: Hadoop
>         Type: Improvement

>   Components: mapred
>     Versions: 0.2
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.3.0
>  Attachments: failure-list-2.patch, failure-list.patch
>
> I'd like a webapp page that just lists the failures in a job so that I can find them more easily. I also want to put back the job detail page.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 23:10:16 2006
Return-Path: 
 <hadoop-dev-return-1894-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92330 invoked from network); 5 Jun 2006 23:10:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 23:10:16 -0000
Received: (qmail 66405 invoked by uid 500); 5 Jun 2006 23:10:14 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66343 invoked by uid 500); 5 Jun 2006 23:10:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66328 invoked by uid 99); 5 Jun 2006 23:10:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:12 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3185D7142F1
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 23:08:49 +0000 (GMT)
Message-ID: <8409762.1149548929200.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 23:08:49 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Closed: (HADOOP-209) Add a program to recursively copy
 directories across file systems
In-Reply-To: <25124034.1147302364527.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-209?page=all ]
     
Doug Cutting closed HADOOP-209:
-------------------------------


> Add a program to recursively copy directories across file systems
> -----------------------------------------------------------------
>
>          Key: HADOOP-209
>          URL: http://issues.apache.org/jira/browse/HADOOP-209
>      Project: Hadoop
>         Type: New Feature

>   Components: fs
>     Versions: 0.3.0
>  Environment: All
>     Reporter: Milind Bhandarkar
>      Fix For: 0.3.0
>  Attachments: CopyDir.patch
>
> A useful feature would be a simple command to copy directories recursively across filesystems. The source and destination path should be specified using a filesystem-neutral URI, such as:
> hadoop cp dfs://namenode1:port1/path/to/srcdir file:///path/to/local/destination/dir
> "cp" command would invoke a map-reduce program to copy files recursively.
> I willl attach a patch as soon as svn is up and running.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 23:10:19 2006
Return-Path: 
 <hadoop-dev-return-1897-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92421 invoked from network); 5 Jun 2006 23:10:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 23:10:19 -0000
Received: (qmail 66872 invoked by uid 500); 5 Jun 2006 23:10:16 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66488 invoked by uid 500); 5 Jun 2006 23:10:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66332 invoked by uid 99); 5 Jun 2006 23:10:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:12 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 863807142F5
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 23:08:50 +0000 (GMT)
Message-ID: <25436190.1149548930547.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 23:08:50 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Closed: (HADOOP-211) logging improvements for Hadoop
In-Reply-To: <11693488.1147389488398.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-211?page=all ]
     
Doug Cutting closed HADOOP-211:
-------------------------------


> logging improvements for Hadoop
> -------------------------------
>
>          Key: HADOOP-211
>          URL: http://issues.apache.org/jira/browse/HADOOP-211
>      Project: Hadoop
>         Type: Improvement

>     Versions: 0.2
>     Reporter: Sameer Paranjpye
>     Assignee: Sameer Paranjpye
>     Priority: Minor
>      Fix For: 0.3.0
>  Attachments: acl-log4j-II.patch.tgz, acl-log4j.patch, commons_logging_patch
>
> Here's a proposal for some impovements to the way Hadoop does logging. It advocates 3 
> broad changes to the way logging is currently done, these being:
> - The use of a uniform logging format by all Hadoop subsystems
> - The use of Apache commons logging as a facade above an underlying logging framework
> - The use of Log4J as the underlying logging framework instead of java.util.logging
> This is largely polishing work, but it seems like it would make log analysis and debugging
> easier in the short term. In the long term, it would future proof logging to the extent of
> allowing the logging framework used to change while requiring minimal code change. The 
> propos changes are motivated by the following requirements which we think Hadoops 
> logging should meet:
> - Hadoops logs should be amenable to analysis by tools like grep, sed, awk etc.
> - Log entries should be clearly annotated with a timestamp and a logging level
> - Log entries should be traceable to the subsystem from which they originated
> - The logging implementation should allow log entries to be annotated with source code 
> location information like classname, methodname, file and line number, without requiring
> code changes
> - It should be possible to change the logging implementation used without having to change
> thousands of lines of code
> - The mapping of loggers to destinations (files, directories, servers etc.) should be 
> specified and modifiable via configuration
> Uniform logging format:
> All Hadoop logs should have the following structure.
> <Header>\n
> <LogEntry>\n [<Exception>\n]
> .
> .
> .
> where the header line specifies the format of each log entry. The header line has the format:
> '# <Fieldname> <Fieldname>...\n'. 
> The default format of each log entry is: '# Timestamp Level LoggerName Message', where:
> - Timestamp is a date and time in the format MM/DD/YYYY:HH:MM:SS
> - Level is the logging level (FATAL, WARN, DEBUG, TRACE, etc.)
> - LoggerName is the short name of the logging subsystem from which the message originated e.g.
> fs.FSNamesystem, dfs.Datanode etc.
> - Message is the log message produced
> Why Apache commons logging and Log4J?
> Apache commons logging is a facade meant to be used as a wrapper around an underlying logging
> implementation. Bridges from Apache commons logging to popular logging implementations 
> (Java logging, Log4J, Avalon etc.) are implemented and available as part of the commons logging
> distribution. Implementing a bridge to an unsupported implementation is fairly striaghtforward
> and involves the implementation of subclasses of the commons logging LogFactory and Logger 
> classes. Using Apache commons logging and making all logging calls through it enables us to
> move to a different logging implementation by simply changing configuration in the best case.
> Even otherwise, it incurs minimal code churn overhead.
> Log4J offers a few benefits over java.util.logging that make it a more desirable choice for the
> logging back end.
> - Configuration Flexibility: The mapping of loggers to destinations (files, sockets etc.)
> can be completely specified in configuration. It is possible to do this with Java logging as
> well, however, configuration is a lot more restrictive. For instance, with Java logging all 
> log files must have names derived from the same pattern. For the namenode, log files could 
> be named with the pattern "%h/namenode%u.log" which would put log files in the user.home
> directory with names like namenode0.log etc. With Log4J it would be possible to configure
> the namenode to emit log files with different names, say heartbeats.log, namespace.log,
> clients.log etc. Configuration variables in Log4J can also have the values of system 
> properties embedded in them.
> - Takes wrappers into account: Log4J takes into account the possibility that an application
> may be invoking it via a wrapper, such as Apache commons logging. This is important because
> logging event objects must be able to infer the context of the logging call such as classname,
> methodname etc. Inferring context is a relatively expensive operation that involves creating
> an exception and examining the stack trace to find the frame just before the first frame 
> of the logging framework. It is therefore done lazily only when this information actually 
> needs to be logged. Log4J can be instructed to look for the frame corresponding to the wrapper
> class, Java logging cannot. In the case of Java logging this means that a) the bridge from 
> Apache commons logging is responsible for inferring the calling context and setting it in the 
> logging event and b) this inference has to be done on every logging call regardless of whether
> or not it is needed.
> - More handy features: Log4J has some handy features that Java logging doesn't. A couple
> of examples of these:
> a) Date based rolling of log files 
> b) Format control through configuration. Log4J has a PatternLayout class that can be 
> configured to generate logs with a user specified pattern. The logging format described
> above can be described as "%d{MM/dd/yyyy:HH:mm:SS} %c{2} %p %m". The format specifiers
> indicate that each log line should have the date and time followed by the logger name followed
> by the logging level or priority followed by the application generated message.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 23:10:20 2006
Return-Path: 
 <hadoop-dev-return-1896-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92425 invoked from network); 5 Jun 2006 23:10:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 23:10:20 -0000
Received: (qmail 66636 invoked by uid 500); 5 Jun 2006 23:10:14 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66384 invoked by uid 500); 5 Jun 2006 23:10:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66330 invoked by uid 99); 5 Jun 2006 23:10:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:12 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DCCFD7142F7
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 23:08:51 +0000 (GMT)
Message-ID: <29790339.1149548931901.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 23:08:51 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Closed: (HADOOP-212) allow changes to dfs block size
In-Reply-To: <28825893.1147448769761.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-212?page=all ]
     
Doug Cutting closed HADOOP-212:
-------------------------------


> allow changes to dfs block size
> -------------------------------
>
>          Key: HADOOP-212
>          URL: http://issues.apache.org/jira/browse/HADOOP-212
>      Project: Hadoop
>         Type: Improvement

>   Components: dfs
>     Versions: 0.2
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>     Priority: Critical
>      Fix For: 0.3.0
>  Attachments: TEST-org.apache.hadoop.fs.TestCopyFiles.txt, dfs-blocksize-2.patch, dfs-blocksize.patch
>
> Trying to change the DFS block size, led the realization that the 32,000,000 was hard coded into the source code. I propose:
>   1. Change the default block size to 64 * 1024 * 1024.
>   2. Add the config variable dfs.block.size that sets the default block size.
>   3. Add a parameter to the FileSystem, DFSClient, and ClientProtocol create method that let's the user control the block size.
>   4. Rename the FileSystem.getBlockSize to getDefaultBlockSize.
>   5. Add a new method to FileSytem.getBlockSize that takes a pathname.
>   6. Use long for the block size in the API, which is what was used before. However, the implementation will not work if block size is set bigger than 2**31.
>   7. Have the InputFormatBase use the blocksize of each file to determine the split size.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 23:10:18 2006
Return-Path: 
 <hadoop-dev-return-1895-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92368 invoked from network); 5 Jun 2006 23:10:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 23:10:18 -0000
Received: (qmail 66501 invoked by uid 500); 5 Jun 2006 23:10:14 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66362 invoked by uid 500); 5 Jun 2006 23:10:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66329 invoked by uid 99); 5 Jun 2006 23:10:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:12 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C0B3A71429F
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 23:08:52 +0000 (GMT)
Message-ID: <30075276.1149548932786.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 23:08:52 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Closed: (HADOOP-216) Task Detail web page missing progress
In-Reply-To: <799322.1147467609309.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-216?page=all ]
     
Doug Cutting closed HADOOP-216:
-------------------------------


> Task Detail web page missing progress
> -------------------------------------
>
>          Key: HADOOP-216
>          URL: http://issues.apache.org/jira/browse/HADOOP-216
>      Project: Hadoop
>         Type: Improvement

>   Components: mapred
>     Reporter: Bryan Pendleton
>     Assignee: Doug Cutting
>     Priority: Trivial
>      Fix For: 0.3.0
>  Attachments: betterprogressdetail.patch.txt
>
> You can see progress on the job view web page, but not the individual task page.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 23:10:32 2006
Return-Path: 
 <hadoop-dev-return-1901-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92670 invoked from network); 5 Jun 2006 23:10:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 23:10:32 -0000
Received: (qmail 67649 invoked by uid 500); 5 Jun 2006 23:10:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 67036 invoked by uid 500); 5 Jun 2006 23:10:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66387 invoked by uid 99); 5 Jun 2006 23:10:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:13 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 21D827142A7
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 23:08:54 +0000 (GMT)
Message-ID: <11633020.1149548934136.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 23:08:54 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Closed: (HADOOP-217) IllegalAcessException when creating a
 Block object via WritableFactories
In-Reply-To: <1616267.1147481890143.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-217?page=all ]
     
Doug Cutting closed HADOOP-217:
-------------------------------


> IllegalAcessException when creating a Block object via WritableFactories
> ------------------------------------------------------------------------
>
>          Key: HADOOP-217
>          URL: http://issues.apache.org/jira/browse/HADOOP-217
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.3.0
>     Reporter: Hairong Kuang
>     Assignee: Hairong Kuang
>      Fix For: 0.3.0
>  Attachments: access.patch, block.patch
>
> When I ran the dfs namenode, I received an error message listed below. Changing Block class to be public will be able to fix the problem.
> java.lang.RuntimeException: java.lang.IllegalAccessException: Class org.apache.hadoop.io.WritableFactories can not access a member of class org.apache.hadoop.dfs.Block with modifiers "public"
> java.lang.RuntimeException: java.lang.IllegalAccessException: Class org.apache.hadoop.io.WritableFactories can not access a member of class org.apache.hadoop.dfs.Block with modifiers "public"
>         at org.apache.hadoop.io.WritableFactories.newInstance(WritableFactories.java:49)
>         at org.apache.hadoop.io.ObjectWritable.readObject(ObjectWritable.java:226)
>         at org.apache.hadoop.io.ObjectWritable.readObject(ObjectWritable.java:163)
>         at org.apache.hadoop.io.ObjectWritable.readObject(ObjectWritable.java:211)
>         at org.apache.hadoop.ipc.RPC$Invocation.readFields(RPC.java:88)
>         at org.apache.hadoop.ipc.Server$Connection.run(Server.java:154)
> Caused by: java.lang.IllegalAccessException: Class org.apache.hadoop.io.WritableFactories can not access a member of class org.apache.hadoop.dfs.Block with modifiers "public"
>         at sun.reflect.Reflection.ensureMemberAccess(Reflection.java:65)
>         at java.lang.Class.newInstance0(Class.java:344)
>         at java.lang.Class.newInstance(Class.java:303)
>         at org.apache.hadoop.io.WritableFactories.newInstance(WritableFactories.java:45)
>         ... 5 more

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 23:10:21 2006
Return-Path: 
 <hadoop-dev-return-1898-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92524 invoked from network); 5 Jun 2006 23:10:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 23:10:21 -0000
Received: (qmail 66989 invoked by uid 500); 5 Jun 2006 23:10:16 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66575 invoked by uid 500); 5 Jun 2006 23:10:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66378 invoked by uid 99); 5 Jun 2006 23:10:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:13 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 73E0B7142C7
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 23:08:55 +0000 (GMT)
Message-ID: <4313702.1149548935472.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 23:08:55 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Closed: (HADOOP-219) SequenceFile#handleChecksumException
 NPE
In-Reply-To: <8800423.1147717266857.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-219?page=all ]
     
Doug Cutting closed HADOOP-219:
-------------------------------


> SequenceFile#handleChecksumException NPE
> ----------------------------------------
>
>          Key: HADOOP-219
>          URL: http://issues.apache.org/jira/browse/HADOOP-219
>      Project: Hadoop
>         Type: Bug

>   Components: io
>     Reporter: stack@archive.org
>     Assignee: Doug Cutting
>     Priority: Trivial
>      Fix For: 0.3.0
>  Attachments: hadoop-219.patch
>
> The SequenceFile#handleChecksumException assumes the conf data member has been set.  It will not be set if we use the 'Reader(FileSystem fs, Path file, int bufferSize, long start, long length)' constructor.  The latter is used by ReduceTask Sorter:
> java.lang.NullPointerException
> 	at org.apache.hadoop.io.SequenceFile$Reader.handleChecksumException(SequenceFile.java:407)
> 	at org.apache.hadoop.io.SequenceFile$Reader.next(SequenceFile.java:400)
> 	at org.apache.hadoop.io.SequenceFile$Sorter$MergeStream.next(SequenceFile.java:837)
> 	at org.apache.hadoop.io.SequenceFile$Sorter$MergeQueue.merge(SequenceFile.java:881)
> 	at org.apache.hadoop.io.SequenceFile$Sorter$MergePass.run(SequenceFile.java:766)
> 	at org.apache.hadoop.io.SequenceFile$Sorter.mergePass(SequenceFile.java:702)
> 	at org.apache.hadoop.io.SequenceFile$Sorter.sort(SequenceFile.java:528)
> 	at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:253)
> 	at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:787)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 23:10:20 2006
Return-Path: 
 <hadoop-dev-return-1900-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92434 invoked from network); 5 Jun 2006 23:10:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 23:10:20 -0000
Received: (qmail 66959 invoked by uid 500); 5 Jun 2006 23:10:16 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66697 invoked by uid 500); 5 Jun 2006 23:10:15 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66381 invoked by uid 99); 5 Jun 2006 23:10:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:13 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 06E6A7142F8
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 23:08:55 +0000 (GMT)
Message-ID: <9742175.1149548935025.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 23:08:55 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Closed: (HADOOP-218) Inefficient calls to get configuration
 values in TaskInprogress
In-Reply-To: <22268273.1147644545906.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-218?page=all ]
     
Doug Cutting closed HADOOP-218:
-------------------------------


> Inefficient calls to get configuration values in TaskInprogress
> ---------------------------------------------------------------
>
>          Key: HADOOP-218
>          URL: http://issues.apache.org/jira/browse/HADOOP-218
>      Project: Hadoop
>         Type: Improvement

>   Components: mapred
>     Reporter: Mahadev konar
>     Assignee: Mahadev konar
>     Priority: Minor
>      Fix For: 0.3.0
>  Attachments: speculative.patch
>
> Each time a pollforNewTask in called on the JobTracker, the taskinprogress makes a call to hasSpeculativeTask() which current does a conf.getSpeculativeExecution() each time its called. The fix would be to store it in the TaskInProgress as soon as it is created and make only a single call to conf.getSpeculativeExecution().

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 23:10:19 2006
Return-Path: 
 <hadoop-dev-return-1899-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92408 invoked from network); 5 Jun 2006 23:10:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 23:10:19 -0000
Received: (qmail 66864 invoked by uid 500); 5 Jun 2006 23:10:16 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66637 invoked by uid 500); 5 Jun 2006 23:10:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66380 invoked by uid 99); 5 Jun 2006 23:10:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:13 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3D70B7142B7
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 23:08:57 +0000 (GMT)
Message-ID: <27495133.1149548937248.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 23:08:57 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Closed: (HADOOP-220) Add -dfs and -jt command-line
 parameters to specify namenode and jobtracker.
In-Reply-To: <19210133.1147731605899.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-220?page=all ]
     
Doug Cutting closed HADOOP-220:
-------------------------------


> Add -dfs and -jt command-line parameters to specify namenode and jobtracker.
> ----------------------------------------------------------------------------
>
>          Key: HADOOP-220
>          URL: http://issues.apache.org/jira/browse/HADOOP-220
>      Project: Hadoop
>         Type: Sub-task

>   Components: fs
>  Environment: All
>     Reporter: Milind Bhandarkar
>     Assignee: Milind Bhandarkar
>      Fix For: 0.3.0
>  Attachments: hadoop-220-228-229.patch, hadoop-220.patch
>
> Most hadoop commands accept -df and -jt commandline parameters. Make the cp command to accept those as well.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 23:10:46 2006
Return-Path: 
 <hadoop-dev-return-1905-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92817 invoked from network); 5 Jun 2006 23:10:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 23:10:46 -0000
Received: (qmail 69115 invoked by uid 500); 5 Jun 2006 23:10:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 67616 invoked by uid 500); 5 Jun 2006 23:10:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66909 invoked by uid 99); 5 Jun 2006 23:10:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:14 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 237547142FA
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 23:08:58 +0000 (GMT)
Message-ID: <7029918.1149548938142.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 23:08:58 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Closed: (HADOOP-221) make the number of map output
 configurable
In-Reply-To: <9402608.1147750732522.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-221?page=all ]
     
Doug Cutting closed HADOOP-221:
-------------------------------


> make the number of map output configurable
> ------------------------------------------
>
>          Key: HADOOP-221
>          URL: http://issues.apache.org/jira/browse/HADOOP-221
>      Project: Hadoop
>         Type: Improvement

>   Components: mapred
>     Versions: 0.2
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.3.0
>  Attachments: more-map-output-servers.patch
>
> The number of map output server threads in each task tracker is currently set to the number of task slots. Since the optimum setting depends on the network, it would be nice to have more threads serving map output files than reduces.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 23:10:38 2006
Return-Path: 
 <hadoop-dev-return-1903-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92761 invoked from network); 5 Jun 2006 23:10:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 23:10:38 -0000
Received: (qmail 68095 invoked by uid 500); 5 Jun 2006 23:10:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 67565 invoked by uid 500); 5 Jun 2006 23:10:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66903 invoked by uid 99); 5 Jun 2006 23:10:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:14 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1E4A97142C9
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 23:08:59 +0000 (GMT)
Message-ID: <500785.1149548939121.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 23:08:59 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Closed: (HADOOP-222) Set replication from dfsshell
In-Reply-To: <12449154.1147778285869.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-222?page=all ]
     
Doug Cutting closed HADOOP-222:
-------------------------------


> Set replication from dfsshell
> -----------------------------
>
>          Key: HADOOP-222
>          URL: http://issues.apache.org/jira/browse/HADOOP-222
>      Project: Hadoop
>         Type: New Feature

>   Components: dfs
>     Versions: 0.3.0
>     Reporter: Johan Oskarson
>     Priority: Trivial
>      Fix For: 0.3.0
>  Attachments: setrep-v2.patch, setrep.patch
>
> Added ability to set replication for a directory/file from the command line.
> Not heavily tested...

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 23:10:33 2006
Return-Path: 
 <hadoop-dev-return-1902-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92679 invoked from network); 5 Jun 2006 23:10:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 23:10:33 -0000
Received: (qmail 67828 invoked by uid 500); 5 Jun 2006 23:10:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 67173 invoked by uid 500); 5 Jun 2006 23:10:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 67064 invoked by uid 99); 5 Jun 2006 23:10:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:15 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 74BA97142FB
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 23:09:00 +0000 (GMT)
Message-ID: <9146000.1149548940475.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 23:09:00 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Closed: (HADOOP-228) hadoop cp should have a -config option
In-Reply-To: <1170975.1147911125959.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-228?page=all ]
     
Doug Cutting closed HADOOP-228:
-------------------------------


> hadoop cp should have a -config option
> --------------------------------------
>
>          Key: HADOOP-228
>          URL: http://issues.apache.org/jira/browse/HADOOP-228
>      Project: Hadoop
>         Type: Bug

>   Components: fs
>     Reporter: Yoram Arnon
>     Assignee: Milind Bhandarkar
>     Priority: Minor
>      Fix For: 0.3.0

>
> hadoop cp should have a -config option to enable overriding of default parameters.
> it  would perhaps be good to rename the command as well to something like dcp or distcp, since it's not a simple command, but rather an entire map-recude job

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 23:10:29 2006
Return-Path: 
 <hadoop-dev-return-1904-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92611 invoked from network); 5 Jun 2006 23:10:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 23:10:29 -0000
Received: (qmail 67835 invoked by uid 500); 5 Jun 2006 23:10:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 67577 invoked by uid 500); 5 Jun 2006 23:10:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66917 invoked by uid 99); 5 Jun 2006 23:10:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:15 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C86217142CF
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 23:09:01 +0000 (GMT)
Message-ID: <26079090.1149548941818.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 23:09:01 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Closed: (HADOOP-229) hadoop cp should generate a better
 number of map tasks
In-Reply-To: <2422002.1147911845993.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-229?page=all ]
     
Doug Cutting closed HADOOP-229:
-------------------------------


> hadoop cp should generate a better number of map tasks
> ------------------------------------------------------
>
>          Key: HADOOP-229
>          URL: http://issues.apache.org/jira/browse/HADOOP-229
>      Project: Hadoop
>         Type: Bug

>   Components: fs
>     Reporter: Yoram Arnon
>     Assignee: Milind Bhandarkar
>     Priority: Minor
>      Fix For: 0.3.0

>
> hadoop cp currently assigns 10 files to copy per map task.
> in case of a small number of large files on a large cluster (say 300 files of 30GB each on a 300 node cluster), this results in long execution times.
> better would be to assign files per task such that the entire cluster is utilized: one file per map, with a cap of 10000 maps total, so as not to over burden the job tracker.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 23:10:49 2006
Return-Path: 
 <hadoop-dev-return-1912-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93055 invoked from network); 5 Jun 2006 23:10:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 23:10:49 -0000
Received: (qmail 70025 invoked by uid 500); 5 Jun 2006 23:10:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68595 invoked by uid 500); 5 Jun 2006 23:10:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 67261 invoked by uid 99); 5 Jun 2006 23:10:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:16 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B70F27142D4
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 23:09:02 +0000 (GMT)
Message-ID: <23158886.1149548942747.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 23:09:02 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Closed: (HADOOP-233) add a http status server for the task
 trackers
In-Reply-To: <29031689.1147997166807.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-233?page=all ]
     
Doug Cutting closed HADOOP-233:
-------------------------------


> add a http status server for the task trackers
> ----------------------------------------------
>
>          Key: HADOOP-233
>          URL: http://issues.apache.org/jira/browse/HADOOP-233
>      Project: Hadoop
>         Type: New Feature

>   Components: mapred
>     Versions: 0.2.1
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.3.0
>  Attachments: task-tracker-webapp-2.patch, task-tracker-webapp.patch
>
> I'd like to have:
>   1. a jetty server on each task tracker to serve up logs and status
>   2. the jetty server on the job tracker serve up logs

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 23:10:31 2006
Return-Path: 
 <hadoop-dev-return-1909-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92644 invoked from network); 5 Jun 2006 23:10:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 23:10:31 -0000
Received: (qmail 68467 invoked by uid 500); 5 Jun 2006 23:10:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68222 invoked by uid 500); 5 Jun 2006 23:10:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 67244 invoked by uid 99); 5 Jun 2006 23:10:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:16 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9D3577142D9
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 23:09:03 +0000 (GMT)
Message-ID: <12641951.1149548943641.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 23:09:03 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Closed: (HADOOP-235) LocalFileSystem.openRaw() throws the
 wrong string for FileNotFoundException
In-Reply-To: <10557622.1148064449849.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-235?page=all ]
     
Doug Cutting closed HADOOP-235:
-------------------------------


> LocalFileSystem.openRaw() throws the wrong string for FileNotFoundException
> ---------------------------------------------------------------------------
>
>          Key: HADOOP-235
>          URL: http://issues.apache.org/jira/browse/HADOOP-235
>      Project: Hadoop
>         Type: Bug

>     Reporter: Benjamin Reed
>      Fix For: 0.3.0
>  Attachments: missing-f.patch
>
> openRaw should throw f.toString() on an error, not toString().

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 23:10:52 2006
Return-Path: 
 <hadoop-dev-return-1910-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93295 invoked from network); 5 Jun 2006 23:10:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 23:10:52 -0000
Received: (qmail 69713 invoked by uid 500); 5 Jun 2006 23:10:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68336 invoked by uid 500); 5 Jun 2006 23:10:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 67246 invoked by uid 99); 5 Jun 2006 23:10:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:16 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7DAC57142E5
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 23:09:04 +0000 (GMT)
Message-ID: <33392049.1149548944512.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 23:09:04 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Closed: (HADOOP-238) map outputs transfers fail with
 EOFException
In-Reply-To: <32406774.1148192609892.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-238?page=all ]
     
Doug Cutting closed HADOOP-238:
-------------------------------


> map outputs transfers fail with EOFException
> --------------------------------------------
>
>          Key: HADOOP-238
>          URL: http://issues.apache.org/jira/browse/HADOOP-238
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.3.0
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>     Priority: Blocker
>      Fix For: 0.3.0
>  Attachments: transfer.patch
>
> My patch on Friday unintentionally included part of my explorations with the file transfers, which broke map output transfers.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 23:10:52 2006
Return-Path: 
 <hadoop-dev-return-1913-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93303 invoked from network); 5 Jun 2006 23:10:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 23:10:52 -0000
Received: (qmail 69952 invoked by uid 500); 5 Jun 2006 23:10:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68630 invoked by uid 500); 5 Jun 2006 23:10:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 67264 invoked by uid 99); 5 Jun 2006 23:10:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:16 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CE3887142C8
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 23:09:05 +0000 (GMT)
Message-ID: <19280493.1149548945841.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 23:09:05 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Closed: (HADOOP-241) TestCopyFiles fails under cygwin due to
 incorrect path
In-Reply-To: <17055124.1148408609943.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-241?page=all ]
     
Doug Cutting closed HADOOP-241:
-------------------------------


> TestCopyFiles fails under cygwin due to incorrect path
> ------------------------------------------------------
>
>          Key: HADOOP-241
>          URL: http://issues.apache.org/jira/browse/HADOOP-241
>      Project: Hadoop
>         Type: Bug

>   Components: fs
>  Environment: Windows
>     Reporter: Konstantin Shvachko
>     Assignee: Milind Bhandarkar
>     Priority: Minor
>      Fix For: 0.3.0
>  Attachments: hadoop-241.patch
>
> Under cygwin TestCopyFiles generates an incorrect url which includes windows style path.
> This is the result of concatenation of a win path with unix path.
> File.getPath() should be used to produce a consistent path.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 23:10:49 2006
Return-Path: 
 <hadoop-dev-return-1911-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93041 invoked from network); 5 Jun 2006 23:10:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 23:10:49 -0000
Received: (qmail 69021 invoked by uid 500); 5 Jun 2006 23:10:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68445 invoked by uid 500); 5 Jun 2006 23:10:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 67322 invoked by uid 99); 5 Jun 2006 23:10:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:17 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2E3F2714300
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 23:09:07 +0000 (GMT)
Message-ID: <2251566.1149548947186.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 23:09:07 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Closed: (HADOOP-245) record io translator doesn't strip path
 names
In-Reply-To: <13294037.1148416949918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-245?page=all ]
     
Doug Cutting closed HADOOP-245:
-------------------------------


> record io translator doesn't strip path names
> ---------------------------------------------
>
>          Key: HADOOP-245
>          URL: http://issues.apache.org/jira/browse/HADOOP-245
>      Project: Hadoop
>         Type: Bug

>   Components: record
>     Versions: 0.2.1
>     Reporter: Owen O'Malley
>     Assignee: Milind Bhandarkar
>      Fix For: 0.3.1
>  Attachments: hadoop-245-246.patch
>
> When I run the record translator with a pathname, the path name is not stripped. So for example:
> % bin/rcc --language c++ foo/bar/bat.jr
> generates:
> foo/bar/bat.jr.hh (instead of ./bat.jr.hh)
> and the first line is #ifndef __FOO/BAR/BAT_JR_HH__
> the first was unexpected and the second is clearly wrong.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 23:10:31 2006
Return-Path: 
 <hadoop-dev-return-1906-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92643 invoked from network); 5 Jun 2006 23:10:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 23:10:31 -0000
Received: (qmail 68144 invoked by uid 500); 5 Jun 2006 23:10:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 67710 invoked by uid 500); 5 Jun 2006 23:10:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 67374 invoked by uid 99); 5 Jun 2006 23:10:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:17 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 813D7714302
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 23:09:08 +0000 (GMT)
Message-ID: <12664037.1149548948526.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 23:09:08 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Closed: (HADOOP-246) the record-io generated c++ has wrong
 comments
In-Reply-To: <3975508.1148417189940.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-246?page=all ]
     
Doug Cutting closed HADOOP-246:
-------------------------------


> the record-io generated c++ has wrong comments
> ----------------------------------------------
>
>          Key: HADOOP-246
>          URL: http://issues.apache.org/jira/browse/HADOOP-246
>      Project: Hadoop
>         Type: Bug

>   Components: record
>     Versions: 0.2.1
>     Reporter: Owen O'Malley
>     Assignee: Milind Bhandarkar
>      Fix For: 0.3.0

>
> The comments on the namespaces on the closing come out backward:
> } // end namespace org
> } // end namespace apache
> } // end namespace hadoop
> } // end namespace record
> } // end namespace test

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 23:10:46 2006
Return-Path: 
 <hadoop-dev-return-1908-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92818 invoked from network); 5 Jun 2006 23:10:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 23:10:46 -0000
Received: (qmail 68874 invoked by uid 500); 5 Jun 2006 23:10:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68189 invoked by uid 500); 5 Jun 2006 23:10:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 67325 invoked by uid 99); 5 Jun 2006 23:10:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:17 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 670D2714303
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 23:09:09 +0000 (GMT)
Message-ID: <18904661.1149548949419.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 23:09:09 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Closed: (HADOOP-247) The Reduce Task thread for reporting
 progress during the sort exits in case of any IOException
In-Reply-To: <8121535.1148417549865.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-247?page=all ]
     
Doug Cutting closed HADOOP-247:
-------------------------------


> The Reduce Task thread for reporting progress during the sort exits in case of any IOException
> ----------------------------------------------------------------------------------------------
>
>          Key: HADOOP-247
>          URL: http://issues.apache.org/jira/browse/HADOOP-247
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Reporter: Mahadev konar
>     Assignee: Mahadev konar
>     Priority: Critical
>      Fix For: 0.3.0
>  Attachments: sortprogress.patch
>
> The Reduce task thread for reporting progress during the sort, exits in case of any exception (except InterruptedException). The solution would be to continue the thread in case of an exception.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 23:10:48 2006
Return-Path: 
 <hadoop-dev-return-1907-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93013 invoked from network); 5 Jun 2006 23:10:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 23:10:48 -0000
Received: (qmail 68688 invoked by uid 500); 5 Jun 2006 23:10:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 67760 invoked by uid 500); 5 Jun 2006 23:10:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 67324 invoked by uid 99); 5 Jun 2006 23:10:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5D6E67142FF
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 23:09:10 +0000 (GMT)
Message-ID: <14710457.1149548950380.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 23:09:10 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Closed: (HADOOP-251) progress report failures kill task
In-Reply-To: <23760059.1148506949851.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-251?page=all ]
     
Doug Cutting closed HADOOP-251:
-------------------------------


> progress report failures kill task
> ----------------------------------
>
>          Key: HADOOP-251
>          URL: http://issues.apache.org/jira/browse/HADOOP-251
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.2.1
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.3.0
>  Attachments: no-progress-failure.patch
>
> Communication problems in reporting progress to the task tracker kill the task because the exceptions are not caught. Since reporting progress is not critical, my patch catches the exception, logs it, and ignores it.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 23:10:53 2006
Return-Path: 
 <hadoop-dev-return-1917-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93361 invoked from network); 5 Jun 2006 23:10:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 23:10:53 -0000
Received: (qmail 70550 invoked by uid 500); 5 Jun 2006 23:10:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70098 invoked by uid 500); 5 Jun 2006 23:10:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68856 invoked by uid 99); 5 Jun 2006 23:10:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 45ADB714306
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 23:09:11 +0000 (GMT)
Message-ID: <24162730.1149548951282.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 23:09:11 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Closed: (HADOOP-254) use http to shuffle data between the
 maps and the reduces
In-Reply-To: <30577878.1148576129850.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-254?page=all ]
     
Doug Cutting closed HADOOP-254:
-------------------------------


> use http to shuffle data between the maps and the reduces
> ---------------------------------------------------------
>
>          Key: HADOOP-254
>          URL: http://issues.apache.org/jira/browse/HADOOP-254
>      Project: Hadoop
>         Type: Improvement

>   Components: mapred
>     Versions: 0.2.1
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.3.0
>  Attachments: http-shuffle-2.patch, http-shuffle.patch
>
> To speed up the shuffle time, I'll use http (via the task tracker's jetty server) to send the map outputs.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 23:10:55 2006
Return-Path: 
 <hadoop-dev-return-1919-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93509 invoked from network); 5 Jun 2006 23:10:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 23:10:55 -0000
Received: (qmail 70790 invoked by uid 500); 5 Jun 2006 23:10:43 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70235 invoked by uid 500); 5 Jun 2006 23:10:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68857 invoked by uid 99); 5 Jun 2006 23:10:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2B639714307
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 23:09:12 +0000 (GMT)
Message-ID: <32028807.1149548952175.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 23:09:12 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Closed: (HADOOP-256) Implement a C api for hadoop dfs
In-Reply-To: <6195280.1148675669863.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-256?page=all ]
     
Doug Cutting closed HADOOP-256:
-------------------------------


> Implement a C api for hadoop dfs
> --------------------------------
>
>          Key: HADOOP-256
>          URL: http://issues.apache.org/jira/browse/HADOOP-256
>      Project: Hadoop
>         Type: New Feature

>   Components: dfs
>     Reporter: Arun C Murthy
>      Fix For: 0.3.0
>  Attachments: libhdfs-new.patch.tgz, libhdfs.patch
>
> Implement a C api for hadoop dfs to ease talking to hadoop's dfs from native C/C++ applications.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 23:10:53 2006
Return-Path: 
 <hadoop-dev-return-1921-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93360 invoked from network); 5 Jun 2006 23:10:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 23:10:53 -0000
Received: (qmail 70628 invoked by uid 500); 5 Jun 2006 23:10:43 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70407 invoked by uid 500); 5 Jun 2006 23:10:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68860 invoked by uid 99); 5 Jun 2006 23:10:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0F5FF714309
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 23:09:13 +0000 (GMT)
Message-ID: <24825719.1149548953060.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 23:09:13 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Closed: (HADOOP-259) map output http client does not timeout
In-Reply-To: <30473871.1148883389827.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-259?page=all ]
     
Doug Cutting closed HADOOP-259:
-------------------------------


> map output http client does not timeout
> ---------------------------------------
>
>          Key: HADOOP-259
>          URL: http://issues.apache.org/jira/browse/HADOOP-259
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.3.0
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.3.0
>  Attachments: http-client-timeout-2.patch, http-client-timeout.patch
>
> The new map output http client uses java.net.URLConnection to fetch the data file. However under Java 1.4 there is no way to specify a timeout and it is set to infinite (or if not infinite at least 12 hours).  This causes reduce tasks to get "stuck" in the "reduce > copy" phase even after the "Task failed to report status for 600 seconds. Killing." message.
> I will add the code in the ReduceTaskRunner to make sure that copies in-flight don't get stuck, but this is another point where a switch to java 1.5 would be helpful. Under 1.5 I could set the timeout on the connection and the read would timeout after the given interval and my entire change would be local to MapOutputLocation.copyFile.
> For now, I'll assume that we need to maintain support for 1.4 and make the corresponding fix, but I'm grumbling...

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 23:10:55 2006
Return-Path: 
 <hadoop-dev-return-1920-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93510 invoked from network); 5 Jun 2006 23:10:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 23:10:55 -0000
Received: (qmail 70926 invoked by uid 500); 5 Jun 2006 23:10:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70304 invoked by uid 500); 5 Jun 2006 23:10:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68858 invoked by uid 99); 5 Jun 2006 23:10:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EC8E27142CE
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 23:09:13 +0000 (GMT)
Message-ID: <31410659.1149548953966.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 23:09:13 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Closed: (HADOOP-262) the reduce tasks do not report progress
 if they the map output locations is empty.
In-Reply-To: <2702206.1149015749846.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-262?page=all ]
     
Doug Cutting closed HADOOP-262:
-------------------------------


> the reduce tasks do not report progress if they the map output locations is empty.
> ----------------------------------------------------------------------------------
>
>          Key: HADOOP-262
>          URL: http://issues.apache.org/jira/browse/HADOOP-262
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.3.0
>     Reporter: Mahadev konar
>     Assignee: Mahadev konar
>      Fix For: 0.3.1
>  Attachments: reduce_sleep.patch
>
> The ReduceTaskRunner should report progress even if the number of ouput locations to copy is empty. In case, the last few maps are running on a tasktracker that goes down, all the reduce tasks waiting for these mapoutputs would fail.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 23:10:51 2006
Return-Path: 
 <hadoop-dev-return-1914-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93215 invoked from network); 5 Jun 2006 23:10:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 23:10:51 -0000
Received: (qmail 70331 invoked by uid 500); 5 Jun 2006 23:10:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 69641 invoked by uid 500); 5 Jun 2006 23:10:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68933 invoked by uid 99); 5 Jun 2006 23:10:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D289B7142D3
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 23:09:14 +0000 (GMT)
Message-ID: <10015877.1149548954859.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 23:09:14 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Closed: (HADOOP-264) WritableFactory has no permissions to
 create DatanodeRegistration
In-Reply-To: <15795140.1149117510008.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-264?page=all ]
     
Doug Cutting closed HADOOP-264:
-------------------------------


> WritableFactory has no permissions to create DatanodeRegistration
> -----------------------------------------------------------------
>
>          Key: HADOOP-264
>          URL: http://issues.apache.org/jira/browse/HADOOP-264
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.3.0
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>     Priority: Blocker
>      Fix For: 0.3.0
>  Attachments: PublicDatanodeRegistration.patch, fix-datanode-registration-perm-2.patch, fix-datanode-registration-perm.patch
>
> The datanode can not come up because the DatanodeRegistration is package local and the factory registration doesn't happen.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 23:10:52 2006
Return-Path: 
 <hadoop-dev-return-1918-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93294 invoked from network); 5 Jun 2006 23:10:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 23:10:52 -0000
Received: (qmail 70595 invoked by uid 500); 5 Jun 2006 23:10:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70137 invoked by uid 500); 5 Jun 2006 23:10:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68895 invoked by uid 99); 5 Jun 2006 23:10:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B9CBA7142D5
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 23:09:15 +0000 (GMT)
Message-ID: <27215398.1149548955757.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 23:09:15 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Closed: (HADOOP-265) Abort tasktracker if it can not write
 to its local directories
In-Reply-To: <32270485.1149120509884.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-265?page=all ]
     
Doug Cutting closed HADOOP-265:
-------------------------------


> Abort tasktracker if it can not write to its local directories
> --------------------------------------------------------------
>
>          Key: HADOOP-265
>          URL: http://issues.apache.org/jira/browse/HADOOP-265
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.3.0
>     Reporter: Hairong Kuang
>     Assignee: Hairong Kuang
>      Fix For: 0.3.0
>  Attachments: mapred_disk.patch
>
> Currently if a task tracker is not able to write to any of its local directories, it continues to run and all the tasks assigned to it fail.
> A task tracker should not start upif it has a problem reading/writing any of its local directories. It should abort if it gets the problem at run time.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 23:10:52 2006
Return-Path: 
 <hadoop-dev-return-1915-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93298 invoked from network); 5 Jun 2006 23:10:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 23:10:52 -0000
Received: (qmail 70416 invoked by uid 500); 5 Jun 2006 23:10:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 69817 invoked by uid 500); 5 Jun 2006 23:10:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68932 invoked by uid 99); 5 Jun 2006 23:10:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A4E7C7142E4
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 23:09:16 +0000 (GMT)
Message-ID: <26150021.1149548956672.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 23:09:16 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Closed: (HADOOP-270) possible deadlock when shut down a
 datanode thread
In-Reply-To: <27302315.1149194729831.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-270?page=all ]
     
Doug Cutting closed HADOOP-270:
-------------------------------


> possible deadlock when shut down a datanode thread
> --------------------------------------------------
>
>          Key: HADOOP-270
>          URL: http://issues.apache.org/jira/browse/HADOOP-270
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.3.0
>     Reporter: Hairong Kuang
>     Assignee: Hairong Kuang
>      Fix For: 0.3.0
>  Attachments: datanode_deadlock.patch
>
> The DataNode class provides a method "shutdown" that can be used to notify a data node thread to abort itself gracefully. In addition this method waits for its data receiving server to terminate. This may cause possible deadlock if the method is called by the data receiving server.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 23:10:52 2006
Return-Path: 
 <hadoop-dev-return-1916-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93301 invoked from network); 5 Jun 2006 23:10:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 23:10:52 -0000
Received: (qmail 70442 invoked by uid 500); 5 Jun 2006 23:10:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70050 invoked by uid 500); 5 Jun 2006 23:10:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68954 invoked by uid 99); 5 Jun 2006 23:10:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 919457142E8
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 23:09:17 +0000 (GMT)
Message-ID: <22819126.1149548957593.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 23:09:17 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Closed: (HADOOP-272) bin/hadoop dfs -rm <dir> crashes in
 log4j code
In-Reply-To: <13890984.1149289469881.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-272?page=all ]
     
Doug Cutting closed HADOOP-272:
-------------------------------


> bin/hadoop dfs -rm <dir> crashes in log4j code
> ----------------------------------------------
>
>          Key: HADOOP-272
>          URL: http://issues.apache.org/jira/browse/HADOOP-272
>      Project: Hadoop
>         Type: Bug

>     Versions: 0.3.0
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.3.1

>
> When I run "bin/hadoop dfs -rm out-dir" I get the following error messages:
> log4j:ERROR setFile(null,true) call failed.
> java.io.FileNotFoundException: /local/owen/hadoop/run/log (Is a directory)
>         at java.io.FileOutputStream.openAppend(Native Method)
>         at java.io.FileOutputStream.<init>(FileOutputStream.java:177)
>         at java.io.FileOutputStream.<init>(FileOutputStream.java:102)
>         at org.apache.log4j.FileAppender.setFile(FileAppender.java:289)
>         at org.apache.log4j.FileAppender.activateOptions(FileAppender.java:163)
>         at org.apache.log4j.DailyRollingFileAppender.activateOptions(DailyRollingFileAppender.java:215)
>         at org.apache.log4j.config.PropertySetter.activate(PropertySetter.java:256)
>         at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:132)
>         at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:96)
>         at org.apache.log4j.PropertyConfigurator.parseAppender(PropertyConfigurator.java:654)
>         at org.apache.log4j.PropertyConfigurator.parseCategory(PropertyConfigurator.java:612)
>         at org.apache.log4j.PropertyConfigurator.configureRootCategory(PropertyConfigurator.java:509)
>         at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:415)
>         at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:441)
>         at org.apache.log4j.helpers.OptionConverter.selectAndConfigure(OptionConverter.java:468)
>         at org.apache.log4j.LogManager.<clinit>(LogManager.java:122)
>         at org.apache.log4j.Logger.getLogger(Logger.java:104)
>         at org.apache.commons.logging.impl.Log4JLogger.getLogger(Log4JLogger.java:229)
>         at org.apache.commons.logging.impl.Log4JLogger.<init>(Log4JLogger.java:65)
>         at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
>         at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
>         at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
>         at java.lang.reflect.Constructor.newInstance(Constructor.java:494)
>         at org.apache.commons.logging.impl.LogFactoryImpl.newInstance(LogFactoryImpl.java:529)
>         at org.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:235)
>         at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:370)
>         at org.apache.hadoop.conf.Configuration.<clinit>(Configuration.java:54)
>         at org.apache.hadoop.dfs.DFSShell.main(DFSShell.java:307)
> log4j:ERROR Either File or DatePattern options are not set for appender [DRFA].
> Delete failed

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 23:10:54 2006
Return-Path: 
 <hadoop-dev-return-1923-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93444 invoked from network); 5 Jun 2006 23:10:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 23:10:54 -0000
Received: (qmail 71051 invoked by uid 500); 5 Jun 2006 23:10:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70711 invoked by uid 500); 5 Jun 2006 23:10:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 70419 invoked by uid 99); 5 Jun 2006 23:10:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:41 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7565971430A
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 23:09:18 +0000 (GMT)
Message-ID: <8638383.1149548958478.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 23:09:18 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Closed: (HADOOP-274) The new logging framework puts
 application logs into server directory in hadoop.log
In-Reply-To: <3236189.1149524790867.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-274?page=all ]
     
Doug Cutting closed HADOOP-274:
-------------------------------


> The new logging framework puts application logs into server directory in hadoop.log
> -----------------------------------------------------------------------------------
>
>          Key: HADOOP-274
>          URL: http://issues.apache.org/jira/browse/HADOOP-274
>      Project: Hadoop
>         Type: Bug

>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.3.1
>  Attachments: application-log-to-stdout.patch
>
> The new logging infrastructure puts application logs into the server log directory under hadoop.log. I think it would be less confusing to use the old behavior of writing out to stderr (for applications).
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 23:10:54 2006
Return-Path: 
 <hadoop-dev-return-1922-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93441 invoked from network); 5 Jun 2006 23:10:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 23:10:54 -0000
Received: (qmail 70876 invoked by uid 500); 5 Jun 2006 23:10:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70454 invoked by uid 500); 5 Jun 2006 23:10:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 69305 invoked by uid 99); 5 Jun 2006 23:10:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:10:36 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5BFA97142E7
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 23:09:19 +0000 (GMT)
Message-ID: <31393665.1149548959374.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 23:09:19 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Closed: (HADOOP-276) No appenders could be found for logger
In-Reply-To: <23439580.1149544591235.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-276?page=all ]
     
Doug Cutting closed HADOOP-276:
-------------------------------


> No appenders could be found for logger
> --------------------------------------
>
>          Key: HADOOP-276
>          URL: http://issues.apache.org/jira/browse/HADOOP-276
>      Project: Hadoop
>         Type: Bug

>     Versions: 0.3.0
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.3.1
>  Attachments: add-properties.patch
>
> When you start the servers with an old configuration directory without the properties files, you get messages about:
> log4j:WARN No appenders could be found for logger (org.apache.hadoop.conf.Configuration).
> log4j:WARN Please initialize the log4j system properly.
> The problem is that the property files are not included in the jar file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun  5 23:42:31 2006
Return-Path: 
 <hadoop-dev-return-1924-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8446 invoked from network); 5 Jun 2006 23:42:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 23:42:31 -0000
Received: (qmail 29961 invoked by uid 500); 5 Jun 2006 23:42:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 29940 invoked by uid 500); 5 Jun 2006 23:42:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 29927 invoked by uid 99); 5 Jun 2006 23:42:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:42:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:42:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AB8237142A1
	for <hadoop-dev@lucene.apache.org>; Mon,  5 Jun 2006 23:41:30 +0000 (GMT)
Message-ID: <26189946.1149550890656.JavaMail.jira@brutus>
Date: Mon, 5 Jun 2006 23:41:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-275) log4j changes for hadoopStreaming
In-Reply-To: <6001228.1149541229838.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-275?page=all ]
     
Doug Cutting resolved HADOOP-275:
---------------------------------

    Fix Version: 0.4
     Resolution: Fixed

I just committed this.  Thanks, Michel.

> log4j changes for hadoopStreaming
> ---------------------------------
>
>          Key: HADOOP-275
>          URL: http://issues.apache.org/jira/browse/HADOOP-275
>      Project: Hadoop
>         Type: New Feature

>   Components: contrib/streaming
>     Reporter: Michel Tourn
>     Assignee: Doug Cutting
>      Fix For: 0.4
>  Attachments: streaming.yor.patch
>
> A patch for hadoopStreaming. 
> Use log4j 
> Still Using short UTF8 strings

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun  6 01:13:30 2006
Return-Path: 
 <hadoop-dev-return-1925-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 41043 invoked from network); 6 Jun 2006 01:13:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 01:13:30 -0000
Received: (qmail 12684 invoked by uid 500); 6 Jun 2006 01:13:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 12661 invoked by uid 500); 6 Jun 2006 01:13:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 12652 invoked by uid 99); 6 Jun 2006 01:13:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 18:13:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 18:13:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D1F047142A1
	for <hadoop-dev@lucene.apache.org>; Tue,  6 Jun 2006 01:12:29 +0000 (GMT)
Message-ID: <674337.1149556349857.JavaMail.jira@brutus>
Date: Tue, 6 Jun 2006 01:12:29 +0000 (GMT+00:00)
From: "paul sutter (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-277) Race condition in
 Configuration.getLocalPath()
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Race condition in Configuration.getLocalPath()
----------------------------------------------

         Key: HADOOP-277
         URL: http://issues.apache.org/jira/browse/HADOOP-277
     Project: Hadoop
        Type: Bug

 Environment: linux, 64 bit, dual core, 4x400GB disk, 4GB RAM
    Reporter: paul sutter


(attached: a patch to fix the problem, and a logfile showing the problem occuring twice)

There is a race condition in Configuration.java:

       Path file = new Path(dirs[index], path);
       Path dir = file.getParent();
       if (fs.exists(dir) || fs.mkdirs(dir)) {
         return file;

If two threads simultaneously process this code with the same target directory, fs.exists() will return false, but from fs.mkdirs() only one of the two threads will return true. From the Java documentation:
 "returns: true if and only if the directory was created, along with all necessary parent directories; false otherwise"

That is, if the first thread successfully creates the directory, the second will not, and therefore return false, even though the directory exists.

This was really happening. We use four temporary directories, and we had reducers failing all over the place with  bizarre impossible errors. I modified the ReduceTaskRunner to output the filename that it creates to find the problem, and the log output is below.

Here you can see copies initiated for two files that hash to the same temp directory, simultaneously. map_4.out is created in the correct directory (/data2...), but map_15.out is created in the next directory (/data3...) becuase of this race condition. Minutes later, when the appender tries to locate the file, that race condition does not occur (the directory already exists), and the appender looks for the file map_15.out in the correct directory, where it does not exist.

060605 142414 task_0001_r_000009_1 Copying task_0001_m_000004_0 output from rmr05.
060605 142414 task_0001_r_000009_1 Copying task_0001_m_000015_0 output from rmr04.
...
060605 142416 task_0001_r_000009_1 done copying task_0001_m_000004_0 output from rmr05 into /data2/tmp/mapred/local/task_0001_r_000009_1/map_4.out
...
060605 142418 task_0001_r_000009_1 done copying task_0001_m_000015_0 output from rmr04 into /data3/tmp/mapred/local/task_0001_r_000009_1/map_15.out
...
060605 142531 task_0001_r_000009_1 0.31808624% reduce > append > /data2/tmp/mapred/local/task_0001_r_000009_1/map_4.out
...
060605 142725 task_0001_r_000009_1 java.io.FileNotFoundException: /data2/tmp/mapred/local/task_0001_r_000009_1/map_15.out




-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun  6 01:15:31 2006
Return-Path: 
 <hadoop-dev-return-1926-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 41359 invoked from network); 6 Jun 2006 01:15:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 01:15:31 -0000
Received: (qmail 13446 invoked by uid 500); 6 Jun 2006 01:15:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13414 invoked by uid 500); 6 Jun 2006 01:15:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13405 invoked by uid 99); 6 Jun 2006 01:15:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 18:15:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 18:15:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8B50C7142A1
	for <hadoop-dev@lucene.apache.org>; Tue,  6 Jun 2006 01:14:30 +0000 (GMT)
Message-ID: <22736611.1149556470568.JavaMail.jira@brutus>
Date: Tue, 6 Jun 2006 01:14:30 +0000 (GMT+00:00)
From: "paul sutter (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-277) Race condition in
 Configuration.getLocalPath()
In-Reply-To: <674337.1149556349857.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-277?page=all ]

paul sutter updated HADOOP-277:
-------------------------------

    Attachment: hadoop-277.patch

> Race condition in Configuration.getLocalPath()
> ----------------------------------------------
>
>          Key: HADOOP-277
>          URL: http://issues.apache.org/jira/browse/HADOOP-277
>      Project: Hadoop
>         Type: Bug

>  Environment: linux, 64 bit, dual core, 4x400GB disk, 4GB RAM
>     Reporter: paul sutter
>  Attachments: hadoop-277.patch, hadoop-task_1_r_9.log
>
> (attached: a patch to fix the problem, and a logfile showing the problem occuring twice)
> There is a race condition in Configuration.java:
>        Path file = new Path(dirs[index], path);
>        Path dir = file.getParent();
>        if (fs.exists(dir) || fs.mkdirs(dir)) {
>          return file;
> If two threads simultaneously process this code with the same target directory, fs.exists() will return false, but from fs.mkdirs() only one of the two threads will return true. From the Java documentation:
>  "returns: true if and only if the directory was created, along with all necessary parent directories; false otherwise"
> That is, if the first thread successfully creates the directory, the second will not, and therefore return false, even though the directory exists.
> This was really happening. We use four temporary directories, and we had reducers failing all over the place with  bizarre impossible errors. I modified the ReduceTaskRunner to output the filename that it creates to find the problem, and the log output is below.
> Here you can see copies initiated for two files that hash to the same temp directory, simultaneously. map_4.out is created in the correct directory (/data2...), but map_15.out is created in the next directory (/data3...) becuase of this race condition. Minutes later, when the appender tries to locate the file, that race condition does not occur (the directory already exists), and the appender looks for the file map_15.out in the correct directory, where it does not exist.
> 060605 142414 task_0001_r_000009_1 Copying task_0001_m_000004_0 output from rmr05.
> 060605 142414 task_0001_r_000009_1 Copying task_0001_m_000015_0 output from rmr04.
> ...
> 060605 142416 task_0001_r_000009_1 done copying task_0001_m_000004_0 output from rmr05 into /data2/tmp/mapred/local/task_0001_r_000009_1/map_4.out
> ...
> 060605 142418 task_0001_r_000009_1 done copying task_0001_m_000015_0 output from rmr04 into /data3/tmp/mapred/local/task_0001_r_000009_1/map_15.out
> ...
> 060605 142531 task_0001_r_000009_1 0.31808624% reduce > append > /data2/tmp/mapred/local/task_0001_r_000009_1/map_4.out
> ...
> 060605 142725 task_0001_r_000009_1 java.io.FileNotFoundException: /data2/tmp/mapred/local/task_0001_r_000009_1/map_15.out

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun  6 01:15:32 2006
Return-Path: 
 <hadoop-dev-return-1927-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 41385 invoked from network); 6 Jun 2006 01:15:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 01:15:32 -0000
Received: (qmail 13731 invoked by uid 500); 6 Jun 2006 01:15:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13591 invoked by uid 500); 6 Jun 2006 01:15:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13582 invoked by uid 99); 6 Jun 2006 01:15:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 18:15:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 18:15:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 67C727142A7
	for <hadoop-dev@lucene.apache.org>; Tue,  6 Jun 2006 01:14:31 +0000 (GMT)
Message-ID: <19534719.1149556471422.JavaMail.jira@brutus>
Date: Tue, 6 Jun 2006 01:14:31 +0000 (GMT+00:00)
From: "paul sutter (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-277) Race condition in
 Configuration.getLocalPath()
In-Reply-To: <674337.1149556349857.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-277?page=all ]

paul sutter updated HADOOP-277:
-------------------------------

    Attachment: hadoop-task_1_r_9.log

> Race condition in Configuration.getLocalPath()
> ----------------------------------------------
>
>          Key: HADOOP-277
>          URL: http://issues.apache.org/jira/browse/HADOOP-277
>      Project: Hadoop
>         Type: Bug

>  Environment: linux, 64 bit, dual core, 4x400GB disk, 4GB RAM
>     Reporter: paul sutter
>  Attachments: hadoop-277.patch, hadoop-task_1_r_9.log
>
> (attached: a patch to fix the problem, and a logfile showing the problem occuring twice)
> There is a race condition in Configuration.java:
>        Path file = new Path(dirs[index], path);
>        Path dir = file.getParent();
>        if (fs.exists(dir) || fs.mkdirs(dir)) {
>          return file;
> If two threads simultaneously process this code with the same target directory, fs.exists() will return false, but from fs.mkdirs() only one of the two threads will return true. From the Java documentation:
>  "returns: true if and only if the directory was created, along with all necessary parent directories; false otherwise"
> That is, if the first thread successfully creates the directory, the second will not, and therefore return false, even though the directory exists.
> This was really happening. We use four temporary directories, and we had reducers failing all over the place with  bizarre impossible errors. I modified the ReduceTaskRunner to output the filename that it creates to find the problem, and the log output is below.
> Here you can see copies initiated for two files that hash to the same temp directory, simultaneously. map_4.out is created in the correct directory (/data2...), but map_15.out is created in the next directory (/data3...) becuase of this race condition. Minutes later, when the appender tries to locate the file, that race condition does not occur (the directory already exists), and the appender looks for the file map_15.out in the correct directory, where it does not exist.
> 060605 142414 task_0001_r_000009_1 Copying task_0001_m_000004_0 output from rmr05.
> 060605 142414 task_0001_r_000009_1 Copying task_0001_m_000015_0 output from rmr04.
> ...
> 060605 142416 task_0001_r_000009_1 done copying task_0001_m_000004_0 output from rmr05 into /data2/tmp/mapred/local/task_0001_r_000009_1/map_4.out
> ...
> 060605 142418 task_0001_r_000009_1 done copying task_0001_m_000015_0 output from rmr04 into /data3/tmp/mapred/local/task_0001_r_000009_1/map_15.out
> ...
> 060605 142531 task_0001_r_000009_1 0.31808624% reduce > append > /data2/tmp/mapred/local/task_0001_r_000009_1/map_4.out
> ...
> 060605 142725 task_0001_r_000009_1 java.io.FileNotFoundException: /data2/tmp/mapred/local/task_0001_r_000009_1/map_15.out

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun  6 03:13:33 2006
Return-Path: 
 <hadoop-dev-return-1928-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76847 invoked from network); 6 Jun 2006 03:13:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 03:13:33 -0000
Received: (qmail 55395 invoked by uid 500); 6 Jun 2006 03:13:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55236 invoked by uid 500); 6 Jun 2006 03:13:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55227 invoked by uid 99); 6 Jun 2006 03:13:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 20:13:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 20:13:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E1DC67142B7
	for <hadoop-dev@lucene.apache.org>; Tue,  6 Jun 2006 03:12:31 +0000 (GMT)
Message-ID: <15700247.1149563551922.JavaMail.jira@brutus>
Date: Tue, 6 Jun 2006 03:12:31 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-277) Race condition in
 Configuration.getLocalPath()
In-Reply-To: <674337.1149556349857.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-277?page=all ]

Owen O'Malley updated HADOOP-277:
---------------------------------

    Attachment: mkdirs.patch

This patch is closer to what we did for the routine above it last week. (Sorry about not fixing this one too at the same time. It wasn't biting us, but that was no reason not to fix the obviously parallel code.)  Is there some reason that you need the synchronized block around the mkdirs? File.mkdirs does a File.exists internally, so you don't need to call it yourself.

> Race condition in Configuration.getLocalPath()
> ----------------------------------------------
>
>          Key: HADOOP-277
>          URL: http://issues.apache.org/jira/browse/HADOOP-277
>      Project: Hadoop
>         Type: Bug

>  Environment: linux, 64 bit, dual core, 4x400GB disk, 4GB RAM
>     Reporter: paul sutter
>  Attachments: hadoop-277.patch, hadoop-task_1_r_9.log, mkdirs.patch
>
> (attached: a patch to fix the problem, and a logfile showing the problem occuring twice)
> There is a race condition in Configuration.java:
>        Path file = new Path(dirs[index], path);
>        Path dir = file.getParent();
>        if (fs.exists(dir) || fs.mkdirs(dir)) {
>          return file;
> If two threads simultaneously process this code with the same target directory, fs.exists() will return false, but from fs.mkdirs() only one of the two threads will return true. From the Java documentation:
>  "returns: true if and only if the directory was created, along with all necessary parent directories; false otherwise"
> That is, if the first thread successfully creates the directory, the second will not, and therefore return false, even though the directory exists.
> This was really happening. We use four temporary directories, and we had reducers failing all over the place with  bizarre impossible errors. I modified the ReduceTaskRunner to output the filename that it creates to find the problem, and the log output is below.
> Here you can see copies initiated for two files that hash to the same temp directory, simultaneously. map_4.out is created in the correct directory (/data2...), but map_15.out is created in the next directory (/data3...) becuase of this race condition. Minutes later, when the appender tries to locate the file, that race condition does not occur (the directory already exists), and the appender looks for the file map_15.out in the correct directory, where it does not exist.
> 060605 142414 task_0001_r_000009_1 Copying task_0001_m_000004_0 output from rmr05.
> 060605 142414 task_0001_r_000009_1 Copying task_0001_m_000015_0 output from rmr04.
> ...
> 060605 142416 task_0001_r_000009_1 done copying task_0001_m_000004_0 output from rmr05 into /data2/tmp/mapred/local/task_0001_r_000009_1/map_4.out
> ...
> 060605 142418 task_0001_r_000009_1 done copying task_0001_m_000015_0 output from rmr04 into /data3/tmp/mapred/local/task_0001_r_000009_1/map_15.out
> ...
> 060605 142531 task_0001_r_000009_1 0.31808624% reduce > append > /data2/tmp/mapred/local/task_0001_r_000009_1/map_4.out
> ...
> 060605 142725 task_0001_r_000009_1 java.io.FileNotFoundException: /data2/tmp/mapred/local/task_0001_r_000009_1/map_15.out

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun  6 04:17:32 2006
Return-Path: 
 <hadoop-dev-return-1929-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92400 invoked from network); 6 Jun 2006 04:17:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 04:17:32 -0000
Received: (qmail 13724 invoked by uid 500); 6 Jun 2006 04:17:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13698 invoked by uid 500); 6 Jun 2006 04:17:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13689 invoked by uid 99); 6 Jun 2006 04:17:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 21:17:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 21:17:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 050527142A7
	for <hadoop-dev@lucene.apache.org>; Tue,  6 Jun 2006 04:16:31 +0000 (GMT)
Message-ID: <20457995.1149567391017.JavaMail.jira@brutus>
Date: Tue, 6 Jun 2006 04:16:31 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-277) Race condition in
 Configuration.getLocalPath()
In-Reply-To: <674337.1149556349857.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-277?page=comments#action_12414901 ] 

Owen O'Malley commented on HADOOP-277:
--------------------------------------

By the way, if there is a need for the sync block around the mkdirs, we should go ahead and change the function above it so that next week we don't get a third bug. *smile*

> Race condition in Configuration.getLocalPath()
> ----------------------------------------------
>
>          Key: HADOOP-277
>          URL: http://issues.apache.org/jira/browse/HADOOP-277
>      Project: Hadoop
>         Type: Bug

>  Environment: linux, 64 bit, dual core, 4x400GB disk, 4GB RAM
>     Reporter: paul sutter
>  Attachments: hadoop-277.patch, hadoop-task_1_r_9.log, mkdirs.patch
>
> (attached: a patch to fix the problem, and a logfile showing the problem occuring twice)
> There is a race condition in Configuration.java:
>        Path file = new Path(dirs[index], path);
>        Path dir = file.getParent();
>        if (fs.exists(dir) || fs.mkdirs(dir)) {
>          return file;
> If two threads simultaneously process this code with the same target directory, fs.exists() will return false, but from fs.mkdirs() only one of the two threads will return true. From the Java documentation:
>  "returns: true if and only if the directory was created, along with all necessary parent directories; false otherwise"
> That is, if the first thread successfully creates the directory, the second will not, and therefore return false, even though the directory exists.
> This was really happening. We use four temporary directories, and we had reducers failing all over the place with  bizarre impossible errors. I modified the ReduceTaskRunner to output the filename that it creates to find the problem, and the log output is below.
> Here you can see copies initiated for two files that hash to the same temp directory, simultaneously. map_4.out is created in the correct directory (/data2...), but map_15.out is created in the next directory (/data3...) becuase of this race condition. Minutes later, when the appender tries to locate the file, that race condition does not occur (the directory already exists), and the appender looks for the file map_15.out in the correct directory, where it does not exist.
> 060605 142414 task_0001_r_000009_1 Copying task_0001_m_000004_0 output from rmr05.
> 060605 142414 task_0001_r_000009_1 Copying task_0001_m_000015_0 output from rmr04.
> ...
> 060605 142416 task_0001_r_000009_1 done copying task_0001_m_000004_0 output from rmr05 into /data2/tmp/mapred/local/task_0001_r_000009_1/map_4.out
> ...
> 060605 142418 task_0001_r_000009_1 done copying task_0001_m_000015_0 output from rmr04 into /data3/tmp/mapred/local/task_0001_r_000009_1/map_15.out
> ...
> 060605 142531 task_0001_r_000009_1 0.31808624% reduce > append > /data2/tmp/mapred/local/task_0001_r_000009_1/map_4.out
> ...
> 060605 142725 task_0001_r_000009_1 java.io.FileNotFoundException: /data2/tmp/mapred/local/task_0001_r_000009_1/map_15.out

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun  6 06:08:32 2006
Return-Path: 
 <hadoop-dev-return-1930-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 26745 invoked from network); 6 Jun 2006 06:08:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 06:08:32 -0000
Received: (qmail 63072 invoked by uid 500); 6 Jun 2006 06:08:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62931 invoked by uid 500); 6 Jun 2006 06:08:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62922 invoked by uid 99); 6 Jun 2006 06:08:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 23:08:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 23:08:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 20D6E7142A7
	for <hadoop-dev@lucene.apache.org>; Tue,  6 Jun 2006 06:07:31 +0000 (GMT)
Message-ID: <18811880.1149574051131.JavaMail.jira@brutus>
Date: Tue, 6 Jun 2006 06:07:31 +0000 (GMT+00:00)
From: "Naveen Nalam (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-277) Race condition in
 Configuration.getLocalPath()
In-Reply-To: <674337.1149556349857.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-277?page=comments#action_12414918 ] 

Naveen Nalam commented on HADOOP-277:
-------------------------------------

If we take out the sync block, the code would look like:

if (fs.exists(dir)) {
  return file;
}
fs.mkdirs(dir);
if (fs.exists(dir)) {
  return file;
}

we added the sync block around the mkdirs because we were not sure exactly how mkdirs() handles race cases. for example if one thread is creating the directory hierarchy, can the other thread return error while the first thread is still creating the hierarchy? if so when the second thread executes fs.exists(), it would return false since the directories are still be created. 

but perhaps this isn't the behavior mkdirs() exhibits. it could return false only if it can't create the final leaf directory in the directory hierarchy (because the other thread just created the leaf). if that's the case then the sync would not be needed. the sun java api doc isn't clear on this.

> Race condition in Configuration.getLocalPath()
> ----------------------------------------------
>
>          Key: HADOOP-277
>          URL: http://issues.apache.org/jira/browse/HADOOP-277
>      Project: Hadoop
>         Type: Bug

>  Environment: linux, 64 bit, dual core, 4x400GB disk, 4GB RAM
>     Reporter: paul sutter
>  Attachments: hadoop-277.patch, hadoop-task_1_r_9.log, mkdirs.patch
>
> (attached: a patch to fix the problem, and a logfile showing the problem occuring twice)
> There is a race condition in Configuration.java:
>        Path file = new Path(dirs[index], path);
>        Path dir = file.getParent();
>        if (fs.exists(dir) || fs.mkdirs(dir)) {
>          return file;
> If two threads simultaneously process this code with the same target directory, fs.exists() will return false, but from fs.mkdirs() only one of the two threads will return true. From the Java documentation:
>  "returns: true if and only if the directory was created, along with all necessary parent directories; false otherwise"
> That is, if the first thread successfully creates the directory, the second will not, and therefore return false, even though the directory exists.
> This was really happening. We use four temporary directories, and we had reducers failing all over the place with  bizarre impossible errors. I modified the ReduceTaskRunner to output the filename that it creates to find the problem, and the log output is below.
> Here you can see copies initiated for two files that hash to the same temp directory, simultaneously. map_4.out is created in the correct directory (/data2...), but map_15.out is created in the next directory (/data3...) becuase of this race condition. Minutes later, when the appender tries to locate the file, that race condition does not occur (the directory already exists), and the appender looks for the file map_15.out in the correct directory, where it does not exist.
> 060605 142414 task_0001_r_000009_1 Copying task_0001_m_000004_0 output from rmr05.
> 060605 142414 task_0001_r_000009_1 Copying task_0001_m_000015_0 output from rmr04.
> ...
> 060605 142416 task_0001_r_000009_1 done copying task_0001_m_000004_0 output from rmr05 into /data2/tmp/mapred/local/task_0001_r_000009_1/map_4.out
> ...
> 060605 142418 task_0001_r_000009_1 done copying task_0001_m_000015_0 output from rmr04 into /data3/tmp/mapred/local/task_0001_r_000009_1/map_15.out
> ...
> 060605 142531 task_0001_r_000009_1 0.31808624% reduce > append > /data2/tmp/mapred/local/task_0001_r_000009_1/map_4.out
> ...
> 060605 142725 task_0001_r_000009_1 java.io.FileNotFoundException: /data2/tmp/mapred/local/task_0001_r_000009_1/map_15.out

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun  6 14:15:21 2006
Return-Path: 
 <hadoop-dev-return-1931-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99628 invoked from network); 6 Jun 2006 14:15:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 14:15:21 -0000
Received: (qmail 69592 invoked by uid 500); 6 Jun 2006 14:15:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 69554 invoked by uid 500); 6 Jun 2006 14:15:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 69544 invoked by uid 99); 6 Jun 2006 14:15:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 07:15:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [134.130.3.130] (HELO ms-dienst.rz.rwth-aachen.de)
 (134.130.3.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 07:15:17 -0700
Received: from circe (circe.rz.RWTH-Aachen.DE [134.130.3.36])
 by ms-dienst.rz.rwth-aachen.de
 (iPlanet Messaging Server 5.2 Patch 2 (built Jul 14 2004))
 with ESMTP id <0J0F00M42ZKUC9@ms-dienst.rz.rwth-aachen.de> for
 hadoop-dev@lucene.apache.org; Tue, 06 Jun 2006 16:14:55 +0200 (MEST)
Received: from talos.rz.RWTH-Aachen.DE ([134.130.3.22])
	by circe (MailMonitor for SMTP v1.2.2 ) ; Tue,
 06 Jun 2006 16:14:54 +0200 (MEST)
Received: from mail.halifax.rwth-aachen.de
 (mail.halifax.RWTH-Aachen.DE [134.130.48.4])	by smarthost.rwth-aachen.de
 (8.13.1/8.13.1/1) with ESMTP id k56EEsar029874	for
 <hadoop-dev@lucene.apache.org>; Tue, 06 Jun 2006 16:14:54 +0200
Received: from localhost (localhost [127.0.0.1])	by
 mail.halifax.rwth-aachen.de
 (Postfix) with ESMTP id CD8148D387	for <hadoop-dev@lucene.apache.org>; Tue,
 06 Jun 2006 16:12:26 +0200 (CEST)
Received: from mail.halifax.rwth-aachen.de ([127.0.0.1])
	by localhost (uranus [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 00797-10 for <hadoop-dev@lucene.apache.org>; Tue,
 06 Jun 2006 16:12:26 +0200 (CEST)
Received: from pos-laptop.halifax.rwth-aachen.de
 (pos-laptop.halifax.rwth-aachen.de [134.130.49.155])
	by mail.halifax.rwth-aachen.de (Postfix) with ESMTP id AF6538D318	for
 <hadoop-dev@lucene.apache.org>; Tue, 06 Jun 2006 16:12:26 +0200 (CEST)
Date: Tue, 06 Jun 2006 16:14:55 +0200
From: Dominik Friedrich <dominik@wipe-records.org>
Subject: Random thoughts
To: hadoop-dev@lucene.apache.org
Message-id: <200606061614.55212.dominik@wipe-records.org>
MIME-version: 1.0
Content-type: text/plain; charset=us-ascii
Content-transfer-encoding: 7BIT
Content-disposition: inline
User-Agent: KMail/1.9.1
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at
 halifax.rwth-aachen.de
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

This is a collection about different aspects of hadoop and nutch. Some of 
these I implemented in parts a few months ago but never got so far that I 
would make sense to make the code public as some kind of proof of concept. 
Because I don't have the time to finish a proof of concept I'll summerize in 
this mail my ideas and the experiences with implementing so far.

In the discussion about the namenode performance and scalabilty the idea of 
using creating a java nio based implmentation came up. This was exactly one 
of my ideas I tried to implement. 

The architecture in my experimental server was one selector thread that 
received the messages and put them into a blocking incomming queue, several 
worker threads that read the messages from this queue and handled them, one 
blocking outgoing queue that where this worker threads put their outgoing 
(reply) messages and one sender thread that pulled messages from that 
out-queue and sent them to the right target.

The messages themself were simple serialized java objects. I used the 
externizable interface for serialization but in hadoop one would use the 
writable interface I think. When a worker thread creates a new message it 
includes the target address so the sender thread knows where to send the 
message to and for every incoming message the receiver thread includes the 
source address so the worker thread know where it came from. 
In order to deserialize the received data into the correct object I put a one 
byte identifier and a two byte length field ahead of every serialized 
message. Every message class contained this one byte identifier as public 
static id and all messages that the system understands have been registered 
with the deserializer at system startup but could also be un-/registered 
while runtime. To register this messages the message class has been passed to 
the register function and the deserializer put them into a hashmap with the 
id as key. This way the "protocol" the system understand is just a collection 
of registered messages and can easily be extended, even at runtime. This 
system can also extended to be able to send messages larger than the max 
network packet size. 

To implementing a failover system for the namenode one could send all packages 
to the server via multicast so all namenodes in that multicast group receive 
those messages and update their filesystem accordingly but only the current 
master responds. A heartbeat system between the n namenodes selects the 
current master.

The performance of a dummy client server system I used for simple test was 
quite good. The throughput was almost independend of the number concurrent 
connections. My estimation is that this architecture should be able to handle 
a serveral 1000 node cluster with 20-40 threads. The big problem I ran into 
when I tried to convert namenode and datanode from RPC to this architecture 
was the asynchrony I introduces. If the worker threads read a message from 
the in-queue and just respond to them its easy to implement but if a worker 
thread sends a message and has to wait for a reply you might need some kind 
of sessions so the worker thread that reads the response has all data it 
needs to work on that response correctly. I think in the namenode you could 
just put flags the namesystem since most message will update/read from it. On 
the client side I think you'll need to implement a session memory (maybe just 
a hashmap with sessesion id ->session data) if you don't want to block the 
worker threads. To handle the concurrency in such a system is not that 
difficult with the java.util.concurrent classes introduced in java 1.5 
(another reason to switch :).

When using a message system like above a way to transfer big data chunks is 
needed, too. I'd implent this as a simple tcp server that streams the data. 
E.g. if one tasktracker needs the map output from another one it opens a tcp 
port and sends a message to the other tasktracker to send that chunk to the 
given port. This way both sides can do on-the-fly work on the stream like 
sorting or something else and a connection loss is detected instantly when 
one side closes the port.

Another big archtectural change I tried at that time was using an osgi server 
and implement namenode, datanode, jobtracker and tasktracker as osgi 
services. The basic idea behind this was to improve maintainability and using 
an environment with good tool support (Eclipse 3.2 is based on an osgi kernel 
itself and includes some good tools for osgi service development and 
testing). The nice thing about osgi services is that you can define 
dependencies between them, versioning is supported and you can 
enable/disable/update any service at runtime. Other nice things like 
configuration service, http service and so on are also available. 

A hadoop based on osgi services would work like this. You deploy a basic 
configuration of the osgi server on all of your machines (e.g. 
namenode/jobtracker enabled on one machine, datanode/tasktracker enabled on 
the other machines). The actual service jars don't have to be copied to every 
machine at that time because you can specify an url where the osgi server 
downloads it from. This feature is also used when distributing new versions 
or tasktrackers need certain jar files for a job. Since the osgi server 
supports versioning and caches already downloaded plugins jar files will only 
be downloaded once and you can specify the min/max version of the plugin for 
each job. All service and plugin jars will be hosted on one distribution 
server so you have only to put the correct jar on this one server and the 
actual deploying is automaticaly done by the system.

To test if this idea works I'd ported namenode, datanode and jobtracker to 
osgi services and deployed them. This was not much work and worked fine. 
Porting the tasktracker was more complicated because of the osgi classloader 
but I got it running more or less, too. Then I tried to split nutch (hadoop 
wasn't created at that time yet) into more smaller services and things became 
really complicated because in nutch classes different packages depend on each 
other and so on. My goal was to put certain basic classes like RPC or 
configuration into seperate osgi services so jobtracker, namenode and every 
other server that would need them just uses one defined interface and those 
services could easily be replaced. 

I think the current documentation of hadoop and nutch is quite sparse. The 
best souce of information is currently the mailinglist, the source code and 
there are some articles in the wiki but there is nothing like user guide, 
administrators guide and developer guide in pdf format. This makes the 
learning curve for beginners unecessary steep. My proposal is to create such 
guides in docbook format. From docbook you can create pdfs and html pages, it 
can be versioned in svn, building pdf and html pages can be included in the 
ant script and last but not least everybody can use his favourite editor ;)  
If there are other who would work on such documents I'd be glad to write some 
chapters, too.

Best regards,
Dominik


From MAILER-DAEMON Tue Jun  6 14:37:09 2006
Return-Path: 
 <hadoop-dev-return-1932-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 6738 invoked from network); 6 Jun 2006 14:37:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 14:37:09 -0000
Received: (qmail 36116 invoked by uid 500); 6 Jun 2006 14:37:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 35964 invoked by uid 500); 6 Jun 2006 14:37:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 35942 invoked by uid 99); 6 Jun 2006 14:37:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 07:37:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [80.64.182.137] (HELO mslinux.media-style.com) (80.64.182.137)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 07:37:04 -0700
Received: from localhost (localhost [127.0.0.1])
	by mslinux.media-style.com (Postfix) with ESMTP id 1BF44144638
	for <hadoop-dev@lucene.apache.org>; Tue,  6 Jun 2006 16:13:36 +0200 (CEST)
Received: from mslinux.media-style.com ([127.0.0.1])
	by localhost (mslinux.media-style.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 32137-10 for <hadoop-dev@lucene.apache.org>;
	Tue, 6 Jun 2006 16:13:35 +0200 (CEST)
Received: from [192.168.0.141] (unknown [80.64.182.137])
	by mslinux.media-style.com (Postfix) with ESMTP id E4A971445E2
	for <hadoop-dev@lucene.apache.org>; Tue,  6 Jun 2006 16:13:35 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v750)
Content-Transfer-Encoding: 7bit
Message-Id: <79433D67-1259-4A20-9B84-C703B96B4A91@media-style.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: hadoop-dev@lucene.apache.org
From: Stefan Groschupf <sg@media-style.com>
Subject: dfs incompatibility .3 and .4-dev?
Date: Tue, 6 Jun 2006 16:36:38 +0200
X-Mailer: Apple Mail (2.750)
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at media-style.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,
we discussed the three  kinds of data looses, hardware, software or  
human errors.
I would love to figure out what was my problem today. :)

Scenario:
+ updated from hadoop .2.1 to .4.
+ problems to get all datanodes started
+ downgrade to hadoop .3.1
+ error message of incompatible dfs (I guess . already had started to  
write to the log)

All transaction done with .2 during last hours lost. Means the data I  
created and copy was not in the dfs any more.
I guess the update / downgrade process destroyed the log but the  
image itself was still ok.

I ended up with a complete corrupted dfs - I guess since the lost dfs  
namenode transaction log.

Wouldn't be better in case we discover a version conflict in the dfs,  
that the user need to do manually confirm that the data have to  
converted into a new format.
Any thoughts?

Thanks.
Stefan


From MAILER-DAEMON Tue Jun  6 16:47:45 2006
Return-Path: 
 <hadoop-dev-return-1933-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 70878 invoked from network); 6 Jun 2006 16:47:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 16:47:45 -0000
Received: (qmail 65045 invoked by uid 500); 6 Jun 2006 16:47:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 65021 invoked by uid 500); 6 Jun 2006 16:47:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 65012 invoked by uid 99); 6 Jun 2006 16:47:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 09:47:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 09:47:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9CB6E7142CE
	for <hadoop-dev@lucene.apache.org>; Tue,  6 Jun 2006 16:46:31 +0000 (GMT)
Message-ID: <8753851.1149612391639.JavaMail.jira@brutus>
Date: Tue, 6 Jun 2006 16:46:31 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-277) Race condition in
 Configuration.getLocalPath()
In-Reply-To: <674337.1149556349857.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-277?page=comments#action_12414990 ] 

Owen O'Malley commented on HADOOP-277:
--------------------------------------

The File.mkdirs (based on what I see in eclipse) looks like:

    public boolean mkdirs() {
        if (exists()) {
            return false;
        }
        if (mkdir()) {
            return true;
        }
        ... <handle recursive mkdirs>...
    }

in any case, the final mkdir would need to be the last thing done. Without the sync block, I believe your code is functionally identical to my proposal of:

if (fs.mkdirs(dir) || fs.exists(dir)) {
   return file;
}

Or am I missing something? If we need to synchronize, we really need to do it everywhere and do it consistently.

On a side note, the Configuration's getFile roll-over between local directories is problematic. The problem is that readers need to find the file regardless of where it was written. So if the writer can spill over to other directories, there should be a findFile(?) that looks in all of the directories (in the right order) until it finds it. That way readers can find the file regardless of which directory the writer was spilled in to.

> Race condition in Configuration.getLocalPath()
> ----------------------------------------------
>
>          Key: HADOOP-277
>          URL: http://issues.apache.org/jira/browse/HADOOP-277
>      Project: Hadoop
>         Type: Bug

>  Environment: linux, 64 bit, dual core, 4x400GB disk, 4GB RAM
>     Reporter: paul sutter
>  Attachments: hadoop-277.patch, hadoop-task_1_r_9.log, mkdirs.patch
>
> (attached: a patch to fix the problem, and a logfile showing the problem occuring twice)
> There is a race condition in Configuration.java:
>        Path file = new Path(dirs[index], path);
>        Path dir = file.getParent();
>        if (fs.exists(dir) || fs.mkdirs(dir)) {
>          return file;
> If two threads simultaneously process this code with the same target directory, fs.exists() will return false, but from fs.mkdirs() only one of the two threads will return true. From the Java documentation:
>  "returns: true if and only if the directory was created, along with all necessary parent directories; false otherwise"
> That is, if the first thread successfully creates the directory, the second will not, and therefore return false, even though the directory exists.
> This was really happening. We use four temporary directories, and we had reducers failing all over the place with  bizarre impossible errors. I modified the ReduceTaskRunner to output the filename that it creates to find the problem, and the log output is below.
> Here you can see copies initiated for two files that hash to the same temp directory, simultaneously. map_4.out is created in the correct directory (/data2...), but map_15.out is created in the next directory (/data3...) becuase of this race condition. Minutes later, when the appender tries to locate the file, that race condition does not occur (the directory already exists), and the appender looks for the file map_15.out in the correct directory, where it does not exist.
> 060605 142414 task_0001_r_000009_1 Copying task_0001_m_000004_0 output from rmr05.
> 060605 142414 task_0001_r_000009_1 Copying task_0001_m_000015_0 output from rmr04.
> ...
> 060605 142416 task_0001_r_000009_1 done copying task_0001_m_000004_0 output from rmr05 into /data2/tmp/mapred/local/task_0001_r_000009_1/map_4.out
> ...
> 060605 142418 task_0001_r_000009_1 done copying task_0001_m_000015_0 output from rmr04 into /data3/tmp/mapred/local/task_0001_r_000009_1/map_15.out
> ...
> 060605 142531 task_0001_r_000009_1 0.31808624% reduce > append > /data2/tmp/mapred/local/task_0001_r_000009_1/map_4.out
> ...
> 060605 142725 task_0001_r_000009_1 java.io.FileNotFoundException: /data2/tmp/mapred/local/task_0001_r_000009_1/map_15.out

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun  6 17:18:15 2006
Return-Path: 
 <hadoop-dev-return-1934-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 74787 invoked from network); 6 Jun 2006 17:18:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 17:18:15 -0000
Received: (qmail 79395 invoked by uid 500); 6 Jun 2006 17:17:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 79090 invoked by uid 500); 6 Jun 2006 17:17:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 78892 invoked by uid 99); 6 Jun 2006 17:17:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 10:17:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 09:57:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 72F3B7142C8
	for <hadoop-dev@lucene.apache.org>; Tue,  6 Jun 2006 16:56:31 +0000 (GMT)
Message-ID: <24951444.1149612991468.JavaMail.jira@brutus>
Date: Tue, 6 Jun 2006 16:56:31 +0000 (GMT+00:00)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-277) Race condition in
 Configuration.getLocalPath()
In-Reply-To: <674337.1149556349857.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-277?page=comments#action_12414991 ] 

Sameer Paranjpye commented on HADOOP-277:
-----------------------------------------

Not sure I understand that, a sync block would still not  protect againt multiple processes trying to create the same hierarchy, and the races would still bite you...

Maybe the safest thing to do is to traverse the hierarchy in getLocalPath(), creating each directory and checking
for it's existence.
  



> Race condition in Configuration.getLocalPath()
> ----------------------------------------------
>
>          Key: HADOOP-277
>          URL: http://issues.apache.org/jira/browse/HADOOP-277
>      Project: Hadoop
>         Type: Bug

>  Environment: linux, 64 bit, dual core, 4x400GB disk, 4GB RAM
>     Reporter: paul sutter
>  Attachments: hadoop-277.patch, hadoop-task_1_r_9.log, mkdirs.patch
>
> (attached: a patch to fix the problem, and a logfile showing the problem occuring twice)
> There is a race condition in Configuration.java:
>        Path file = new Path(dirs[index], path);
>        Path dir = file.getParent();
>        if (fs.exists(dir) || fs.mkdirs(dir)) {
>          return file;
> If two threads simultaneously process this code with the same target directory, fs.exists() will return false, but from fs.mkdirs() only one of the two threads will return true. From the Java documentation:
>  "returns: true if and only if the directory was created, along with all necessary parent directories; false otherwise"
> That is, if the first thread successfully creates the directory, the second will not, and therefore return false, even though the directory exists.
> This was really happening. We use four temporary directories, and we had reducers failing all over the place with  bizarre impossible errors. I modified the ReduceTaskRunner to output the filename that it creates to find the problem, and the log output is below.
> Here you can see copies initiated for two files that hash to the same temp directory, simultaneously. map_4.out is created in the correct directory (/data2...), but map_15.out is created in the next directory (/data3...) becuase of this race condition. Minutes later, when the appender tries to locate the file, that race condition does not occur (the directory already exists), and the appender looks for the file map_15.out in the correct directory, where it does not exist.
> 060605 142414 task_0001_r_000009_1 Copying task_0001_m_000004_0 output from rmr05.
> 060605 142414 task_0001_r_000009_1 Copying task_0001_m_000015_0 output from rmr04.
> ...
> 060605 142416 task_0001_r_000009_1 done copying task_0001_m_000004_0 output from rmr05 into /data2/tmp/mapred/local/task_0001_r_000009_1/map_4.out
> ...
> 060605 142418 task_0001_r_000009_1 done copying task_0001_m_000015_0 output from rmr04 into /data3/tmp/mapred/local/task_0001_r_000009_1/map_15.out
> ...
> 060605 142531 task_0001_r_000009_1 0.31808624% reduce > append > /data2/tmp/mapred/local/task_0001_r_000009_1/map_4.out
> ...
> 060605 142725 task_0001_r_000009_1 java.io.FileNotFoundException: /data2/tmp/mapred/local/task_0001_r_000009_1/map_15.out

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun  6 17:34:51 2006
Return-Path: 
 <hadoop-dev-return-1937-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 82664 invoked from network); 6 Jun 2006 17:34:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 17:34:51 -0000
Received: (qmail 16473 invoked by uid 500); 6 Jun 2006 17:34:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14261 invoked by uid 500); 6 Jun 2006 17:34:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13397 invoked by uid 99); 6 Jun 2006 17:34:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 10:34:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 10:01:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CB73E7142A1
	for <hadoop-dev@lucene.apache.org>; Tue,  6 Jun 2006 17:00:29 +0000 (GMT)
Message-ID: <6294549.1149613229830.JavaMail.jira@brutus>
Date: Tue, 6 Jun 2006 17:00:29 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-278) a missing map/reduce input directory
 does not produce a user-visible error message
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

a missing map/reduce input directory does not produce a user-visible error message
----------------------------------------------------------------------------------

         Key: HADOOP-278
         URL: http://issues.apache.org/jira/browse/HADOOP-278
     Project: Hadoop
        Type: Bug

  Components: mapred  
    Versions: 0.3.1    
    Reporter: Owen O'Malley
 Assigned to: Owen O'Malley 
     Fix For: 0.4.0


If map/reduce's input directory is in DFS and does not exist, the user has to find the problem in the jobtracker logs rather than either the launching program or the webapp.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun  6 17:28:33 2006
Return-Path: 
 <hadoop-dev-return-1935-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 80850 invoked from network); 6 Jun 2006 17:28:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 17:28:33 -0000
Received: (qmail 5913 invoked by uid 500); 6 Jun 2006 17:28:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 5773 invoked by uid 500); 6 Jun 2006 17:28:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 5764 invoked by uid 99); 6 Jun 2006 17:28:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 10:28:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 10:28:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2B3707142C7
	for <hadoop-dev@lucene.apache.org>; Tue,  6 Jun 2006 17:27:31 +0000 (GMT)
Message-ID: <22112489.1149614851174.JavaMail.jira@brutus>
Date: Tue, 6 Jun 2006 17:27:31 +0000 (GMT+00:00)
From: "alan wootton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-123) mini map/reduce cluster for junit
 tests
In-Reply-To: <927904038.1144348524414.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-123?page=comments#action_12414993 ] 

alan wootton commented on HADOOP-123:
-------------------------------------

I'm putting together the patch today.

> mini map/reduce cluster for junit tests
> ---------------------------------------
>
>          Key: HADOOP-123
>          URL: http://issues.apache.org/jira/browse/HADOOP-123
>      Project: Hadoop
>         Type: New Feature

>   Components: mapred
>     Versions: 0.3.0
>     Reporter: Owen O'Malley
>     Assignee: Milind Bhandarkar
>      Fix For: 0.4.0

>
> I would like a single process map-reduce pseduo-distributed cluster that can be used for unit tests. We should add a unit test with a word count map/reduce.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun  6 17:33:33 2006
Return-Path: 
 <hadoop-dev-return-1936-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 81912 invoked from network); 6 Jun 2006 17:33:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 17:33:33 -0000
Received: (qmail 13026 invoked by uid 500); 6 Jun 2006 17:33:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13000 invoked by uid 500); 6 Jun 2006 17:33:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 12990 invoked by uid 99); 6 Jun 2006 17:33:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 10:33:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 10:33:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B0F057142C8
	for <hadoop-dev@lucene.apache.org>; Tue,  6 Jun 2006 17:32:31 +0000 (GMT)
Message-ID: <20538563.1149615151721.JavaMail.jira@brutus>
Date: Tue, 6 Jun 2006 17:32:31 +0000 (GMT+00:00)
From: "paul sutter (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-277) Race condition in
 Configuration.getLocalPath()
In-Reply-To: <674337.1149556349857.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-277?page=comments#action_12414996 ] 

paul sutter commented on HADOOP-277:
------------------------------------


Sameer -> I think you're right. Ultimately, the synchronize is not good enough, and it seems that you've got the right solution.

Owen ->  here's the case Naveen described: lets say five directory levels are created by the call to mkdirs(), and there are two threads entering mkrdirs() at about the same time. Will one of the two threads exit before the fifth directory is created? I dont have the source code, but it seems to me that it could. If that would happen, that thread will step ahead to the next directory because when it does the exists() check, the directory will not exist. Which leads to Sameer's point that even the synchronize is not good enough.





> Race condition in Configuration.getLocalPath()
> ----------------------------------------------
>
>          Key: HADOOP-277
>          URL: http://issues.apache.org/jira/browse/HADOOP-277
>      Project: Hadoop
>         Type: Bug

>  Environment: linux, 64 bit, dual core, 4x400GB disk, 4GB RAM
>     Reporter: paul sutter
>  Attachments: hadoop-277.patch, hadoop-task_1_r_9.log, mkdirs.patch
>
> (attached: a patch to fix the problem, and a logfile showing the problem occuring twice)
> There is a race condition in Configuration.java:
>        Path file = new Path(dirs[index], path);
>        Path dir = file.getParent();
>        if (fs.exists(dir) || fs.mkdirs(dir)) {
>          return file;
> If two threads simultaneously process this code with the same target directory, fs.exists() will return false, but from fs.mkdirs() only one of the two threads will return true. From the Java documentation:
>  "returns: true if and only if the directory was created, along with all necessary parent directories; false otherwise"
> That is, if the first thread successfully creates the directory, the second will not, and therefore return false, even though the directory exists.
> This was really happening. We use four temporary directories, and we had reducers failing all over the place with  bizarre impossible errors. I modified the ReduceTaskRunner to output the filename that it creates to find the problem, and the log output is below.
> Here you can see copies initiated for two files that hash to the same temp directory, simultaneously. map_4.out is created in the correct directory (/data2...), but map_15.out is created in the next directory (/data3...) becuase of this race condition. Minutes later, when the appender tries to locate the file, that race condition does not occur (the directory already exists), and the appender looks for the file map_15.out in the correct directory, where it does not exist.
> 060605 142414 task_0001_r_000009_1 Copying task_0001_m_000004_0 output from rmr05.
> 060605 142414 task_0001_r_000009_1 Copying task_0001_m_000015_0 output from rmr04.
> ...
> 060605 142416 task_0001_r_000009_1 done copying task_0001_m_000004_0 output from rmr05 into /data2/tmp/mapred/local/task_0001_r_000009_1/map_4.out
> ...
> 060605 142418 task_0001_r_000009_1 done copying task_0001_m_000015_0 output from rmr04 into /data3/tmp/mapred/local/task_0001_r_000009_1/map_15.out
> ...
> 060605 142531 task_0001_r_000009_1 0.31808624% reduce > append > /data2/tmp/mapred/local/task_0001_r_000009_1/map_4.out
> ...
> 060605 142725 task_0001_r_000009_1 java.io.FileNotFoundException: /data2/tmp/mapred/local/task_0001_r_000009_1/map_15.out

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun  6 17:47:32 2006
Return-Path: 
 <hadoop-dev-return-1938-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 87747 invoked from network); 6 Jun 2006 17:47:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 17:47:32 -0000
Received: (qmail 40100 invoked by uid 500); 6 Jun 2006 17:47:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40075 invoked by uid 500); 6 Jun 2006 17:47:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 40066 invoked by uid 99); 6 Jun 2006 17:47:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 10:47:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 10:47:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 943DF7142A1
	for <hadoop-dev@lucene.apache.org>; Tue,  6 Jun 2006 17:46:30 +0000 (GMT)
Message-ID: <17304715.1149615990604.JavaMail.jira@brutus>
Date: Tue, 6 Jun 2006 17:46:30 +0000 (GMT+00:00)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-250) HTTP Browsing interface for DFS
 Health/Status
In-Reply-To: <29976966.1148448150061.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-250?page=all ]

Devaraj Das updated HADOOP-250:
-------------------------------

    Attachment: http_browsing_dfs.new.patch

Doug, created this patch again against the current trunk.

> HTTP Browsing interface for DFS Health/Status
> ---------------------------------------------
>
>          Key: HADOOP-250
>          URL: http://issues.apache.org/jira/browse/HADOOP-250
>      Project: Hadoop
>         Type: New Feature

>   Components: dfs
>     Versions: 0.3.0
>     Reporter: Devaraj Das
>      Fix For: 0.4.0
>  Attachments: dfshealth.pdf, http_browsing_dfs.new.patch, http_browsing_dfs.patch, http_browsing_dfs.patch
>
> A web interface to view the DFS health/status (name and data nodes) is to be created. User can connect to the webserver on the namenode and a web page will be displayed. The web page will give some details about that namenode (startup time and the total cluster capacity). The web page will contain a table of 'live' and 'dead' datanodes. Each live datanode will be a link to the complete details of the datanode as given by DatanodeInfo (also see DataNodeReport).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun  6 18:02:33 2006
Return-Path: 
 <hadoop-dev-return-1939-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91190 invoked from network); 6 Jun 2006 18:02:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 18:02:33 -0000
Received: (qmail 70962 invoked by uid 500); 6 Jun 2006 18:02:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70937 invoked by uid 500); 6 Jun 2006 18:02:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 70928 invoked by uid 99); 6 Jun 2006 18:02:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 11:02:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 11:02:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 72B2F7142C8
	for <hadoop-dev@lucene.apache.org>; Tue,  6 Jun 2006 18:01:31 +0000 (GMT)
Message-ID: <11450262.1149616891467.JavaMail.jira@brutus>
Date: Tue, 6 Jun 2006 18:01:31 +0000 (GMT+00:00)
From: "Naveen Nalam (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-277) Race condition in
 Configuration.getLocalPath()
In-Reply-To: <674337.1149556349857.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-277?page=comments#action_12414999 ] 

Naveen Nalam commented on HADOOP-277:
-------------------------------------

Below is what mkdirs looks like according to the jad decompiler (File.class from is from Sun JDK 1.5).

It looks like to me if two processes/threads are trying to create "/a/b/c/d/e/" and nothing yet exists, they both try to create "/a". One will fail, while the other succeeds. The failing process will return failure early, while the other process continues to create "b/c/d/e/". If the failing process after returning from mkdirs() now calls exists("/a/b/c/d/e"), exists() could  return false because the other process is still creating the directories along the path.

So probably Sameer's suggestion of traversing in getLocalPath() is the best solution.

public boolean mkdirs()
    {
        if(exists())
            return false;
        if(mkdir())
            return true;
        File file = null;
        try
        {
            file = getCanonicalFile();
        }
        catch(IOException ioexception)
        {
            return false;
        }
        String s = file.getParent();
        return s != null && (new File(s, fs.prefixLength(s))).mkdirs() && file.mkdir();
    }


> Race condition in Configuration.getLocalPath()
> ----------------------------------------------
>
>          Key: HADOOP-277
>          URL: http://issues.apache.org/jira/browse/HADOOP-277
>      Project: Hadoop
>         Type: Bug

>  Environment: linux, 64 bit, dual core, 4x400GB disk, 4GB RAM
>     Reporter: paul sutter
>  Attachments: hadoop-277.patch, hadoop-task_1_r_9.log, mkdirs.patch
>
> (attached: a patch to fix the problem, and a logfile showing the problem occuring twice)
> There is a race condition in Configuration.java:
>        Path file = new Path(dirs[index], path);
>        Path dir = file.getParent();
>        if (fs.exists(dir) || fs.mkdirs(dir)) {
>          return file;
> If two threads simultaneously process this code with the same target directory, fs.exists() will return false, but from fs.mkdirs() only one of the two threads will return true. From the Java documentation:
>  "returns: true if and only if the directory was created, along with all necessary parent directories; false otherwise"
> That is, if the first thread successfully creates the directory, the second will not, and therefore return false, even though the directory exists.
> This was really happening. We use four temporary directories, and we had reducers failing all over the place with  bizarre impossible errors. I modified the ReduceTaskRunner to output the filename that it creates to find the problem, and the log output is below.
> Here you can see copies initiated for two files that hash to the same temp directory, simultaneously. map_4.out is created in the correct directory (/data2...), but map_15.out is created in the next directory (/data3...) becuase of this race condition. Minutes later, when the appender tries to locate the file, that race condition does not occur (the directory already exists), and the appender looks for the file map_15.out in the correct directory, where it does not exist.
> 060605 142414 task_0001_r_000009_1 Copying task_0001_m_000004_0 output from rmr05.
> 060605 142414 task_0001_r_000009_1 Copying task_0001_m_000015_0 output from rmr04.
> ...
> 060605 142416 task_0001_r_000009_1 done copying task_0001_m_000004_0 output from rmr05 into /data2/tmp/mapred/local/task_0001_r_000009_1/map_4.out
> ...
> 060605 142418 task_0001_r_000009_1 done copying task_0001_m_000015_0 output from rmr04 into /data3/tmp/mapred/local/task_0001_r_000009_1/map_15.out
> ...
> 060605 142531 task_0001_r_000009_1 0.31808624% reduce > append > /data2/tmp/mapred/local/task_0001_r_000009_1/map_4.out
> ...
> 060605 142725 task_0001_r_000009_1 java.io.FileNotFoundException: /data2/tmp/mapred/local/task_0001_r_000009_1/map_15.out

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun  6 18:14:34 2006
Return-Path: 
 <hadoop-dev-return-1940-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93501 invoked from network); 6 Jun 2006 18:14:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 18:14:34 -0000
Received: (qmail 84660 invoked by uid 500); 6 Jun 2006 18:14:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 84620 invoked by uid 500); 6 Jun 2006 18:14:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 84609 invoked by uid 99); 6 Jun 2006 18:14:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 11:14:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 11:14:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 720EF7142C8
	for <hadoop-dev@lucene.apache.org>; Tue,  6 Jun 2006 18:13:31 +0000 (GMT)
Message-ID: <999979.1149617611464.JavaMail.jira@brutus>
Date: Tue, 6 Jun 2006 18:13:31 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-277) Race condition in
 Configuration.getLocalPath()
In-Reply-To: <674337.1149556349857.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-277?page=comments#action_12415002 ] 

Owen O'Malley commented on HADOOP-277:
--------------------------------------

Ok, I see your point. 

Let's go with the traversing, but I think it should be done in the FileSystem.mkdirs rather than in Configuration.

> Race condition in Configuration.getLocalPath()
> ----------------------------------------------
>
>          Key: HADOOP-277
>          URL: http://issues.apache.org/jira/browse/HADOOP-277
>      Project: Hadoop
>         Type: Bug

>  Environment: linux, 64 bit, dual core, 4x400GB disk, 4GB RAM
>     Reporter: paul sutter
>  Attachments: hadoop-277.patch, hadoop-task_1_r_9.log, mkdirs.patch
>
> (attached: a patch to fix the problem, and a logfile showing the problem occuring twice)
> There is a race condition in Configuration.java:
>        Path file = new Path(dirs[index], path);
>        Path dir = file.getParent();
>        if (fs.exists(dir) || fs.mkdirs(dir)) {
>          return file;
> If two threads simultaneously process this code with the same target directory, fs.exists() will return false, but from fs.mkdirs() only one of the two threads will return true. From the Java documentation:
>  "returns: true if and only if the directory was created, along with all necessary parent directories; false otherwise"
> That is, if the first thread successfully creates the directory, the second will not, and therefore return false, even though the directory exists.
> This was really happening. We use four temporary directories, and we had reducers failing all over the place with  bizarre impossible errors. I modified the ReduceTaskRunner to output the filename that it creates to find the problem, and the log output is below.
> Here you can see copies initiated for two files that hash to the same temp directory, simultaneously. map_4.out is created in the correct directory (/data2...), but map_15.out is created in the next directory (/data3...) becuase of this race condition. Minutes later, when the appender tries to locate the file, that race condition does not occur (the directory already exists), and the appender looks for the file map_15.out in the correct directory, where it does not exist.
> 060605 142414 task_0001_r_000009_1 Copying task_0001_m_000004_0 output from rmr05.
> 060605 142414 task_0001_r_000009_1 Copying task_0001_m_000015_0 output from rmr04.
> ...
> 060605 142416 task_0001_r_000009_1 done copying task_0001_m_000004_0 output from rmr05 into /data2/tmp/mapred/local/task_0001_r_000009_1/map_4.out
> ...
> 060605 142418 task_0001_r_000009_1 done copying task_0001_m_000015_0 output from rmr04 into /data3/tmp/mapred/local/task_0001_r_000009_1/map_15.out
> ...
> 060605 142531 task_0001_r_000009_1 0.31808624% reduce > append > /data2/tmp/mapred/local/task_0001_r_000009_1/map_4.out
> ...
> 060605 142725 task_0001_r_000009_1 java.io.FileNotFoundException: /data2/tmp/mapred/local/task_0001_r_000009_1/map_15.out

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun  6 18:47:32 2006
Return-Path: 
 <hadoop-dev-return-1942-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 4395 invoked from network); 6 Jun 2006 18:47:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 18:47:32 -0000
Received: (qmail 50099 invoked by uid 500); 6 Jun 2006 18:47:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 50081 invoked by uid 500); 6 Jun 2006 18:47:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 50070 invoked by uid 99); 6 Jun 2006 18:47:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 11:47:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 11:47:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A111D71429F
	for <hadoop-dev@lucene.apache.org>; Tue,  6 Jun 2006 18:46:30 +0000 (GMT)
Message-ID: <445362.1149619590656.JavaMail.jira@brutus>
Date: Tue, 6 Jun 2006 18:46:30 +0000 (GMT+00:00)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-210) Namenode not able to accept
 connections
In-Reply-To: <22832248.1147306205708.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-210?page=comments#action_12415008 ] 

Devaraj Das commented on HADOOP-210:
------------------------------------

I am implementing this. For now I am using nio only for client accepts and subsequent reads from the client. The handler threads write the output/response directly by themselves to the clients concerned. Clients are disconnected if they don't communicate within a certain timeout. The thing is that time intervals could potentially be different for different protocols (e.g., dfs datanodes' heartbeats and client leases). So for now I am assuming a maximum timeout for the IPC communication (read from the conf file) and that is applicable for all RPC protocol communication. The servers keep track of when a client last communicated with it (either through TCP connect or through TCP write). Comments?

> Namenode not able to accept connections
> ---------------------------------------
>
>          Key: HADOOP-210
>          URL: http://issues.apache.org/jira/browse/HADOOP-210
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>  Environment: linux
>     Reporter: Mahadev konar
>     Assignee: Mahadev konar

>
> I am running owen's random writer on a 627 node cluster (writing 10GB/node).  After running for a while (map 12% reduce 1%) I get the following error on the Namenode:
> Exception in thread "Server listener on port 60000" java.lang.OutOfMemoryError: unable to create new native thread
>         at java.lang.Thread.start0(Native Method)
>         at java.lang.Thread.start(Thread.java:574)
>         at org.apache.hadoop.ipc.Server$Listener.run(Server.java:105)
> After this, the namenode does not seem to be accepting connections from any of the clients. All the DFSClient calls get timeout. Here is a trace for one of them:
> java.net.SocketTimeoutException: timed out waiting for rpc response
> 	at org.apache.hadoop.ipc.Client.call(Client.java:305)
> 	at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:149)
> 	at org.apache.hadoop.dfs.$Proxy1.open(Unknown Source)
> 	at org.apache.hadoop.dfs.DFSClient$DFSInputStream.openInfo(DFSClient.java:419)
> 	at org.apache.hadoop.dfs.DFSClient$DFSInputStream.(DFSClient.java:406)
> 	at org.apache.hadoop.dfs.DFSClient.open(DFSClient.java:171)
> 	at org.apache.hadoop.dfs.DistributedFileSystem.openRaw(DistributedFileSystem.java:78)
> 	at org.apache.hadoop.fs.FSDataInputStream$Checker.(FSDataInputStream.java:46)
> 	at org.apache.hadoop.fs.FSDataInputStream.(FSDataInputStream.java:228)
> 	at org.apache.hadoop.fs.FileSystem.open(FileSystem.java:157)
> 	at org.apache.hadoop.mapred.TextInputFormat.getRecordReader(TextInputFormat.java:43)
> 	at org.apache.hadoop.mapred.MapTask.run(MapTask.java:105)
> 	at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:785).
> The namenode then has around 1% CPU utilization at this time (after the outofmemory exception has been thrown). I have profiled the NameNode and it seems to be using around a maixmum heap size of 57MB (which is not much). So, heap size does not seem to be a problem. It might be happening due to lack of Stack space? Any pointers?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun  6 18:47:23 2006
Return-Path: 
 <hadoop-dev-return-1941-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 4320 invoked from network); 6 Jun 2006 18:47:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 18:47:23 -0000
Received: (qmail 49907 invoked by uid 500); 6 Jun 2006 18:47:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49881 invoked by uid 500); 6 Jun 2006 18:47:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49872 invoked by uid 99); 6 Jun 2006 18:47:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 11:47:22 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of bpendleton@gmail.com designates
 64.233.184.230 as permitted sender)
Received: from [64.233.184.230] (HELO wr-out-0506.google.com) (64.233.184.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 11:47:21 -0700
Received: by wr-out-0506.google.com with SMTP id i20so1325370wra
        for <hadoop-dev@lucene.apache.org>;
 Tue, 06 Jun 2006 11:47:00 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:mime-version:content-type:x-google-sender-auth;
        b=FGP4+35Q0SQL+zs7Ijk01zA8WIq/vVYNU/lEkeZnAFA02H/BK24EV1dftYVI6UtvBltnB/rBn+0/fA1fBzASMYTsSbQjnscH1rbOExmegmupA2YkgJVJcxVJeG3wWnh1HQwtKxm5oPXo4y4XaobfsXfLoet8cZI/SejgMjgDNRw=
Received: by 10.85.2.5 with SMTP id e5mr6617022aui;
        Tue, 06 Jun 2006 11:47:00 -0700 (PDT)
Received: by 10.85.11.13 with HTTP; Tue, 6 Jun 2006 11:47:00 -0700 (PDT)
Message-ID: <1bf79d3e0606061147x4ff856d2h2ffa1ffd478ea8d1@mail.gmail.com>
Date: Tue, 6 Jun 2006 11:47:00 -0700
From: "Bryan A. Pendleton" <bp@geekdom.net>
Sender: bpendleton@gmail.com
To: hadoop-dev@lucene.apache.org
Subject: Recent IPC changes?
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_Part_2466_14546304.1149619620284"
X-Google-Sender-Auth: c4ccc7cc0bb1e007
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_2466_14546304.1149619620284
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I've been mostly tracking TRUNK. In particular, I update every few days. I
updated to the post 0.3 trunk yesterday, and now I'm seeing very weird
slowdowns in job distribution.

What appears to be happening is that that heartbeats aren't registering with
the job tracker, except after an RPC timeout. If my RPC timeout is the
default (60s), it takes 60s for the refresh cycle - effectively meaning that
it takes 60s for *any* tasks to start being distributed, after a job starts
up. If I turn the IPC timeout down to 10s, then the heartbeats happen at 10s
instead. Is this intended? Is there some new setting that I should be
setting (that's not in hadoop-default, I guess)?

-- 
Bryan A. Pendleton
Ph: (877) geek-1-bp

------=_Part_2466_14546304.1149619620284--

From MAILER-DAEMON Tue Jun  6 20:01:35 2006
Return-Path: 
 <hadoop-dev-return-1943-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34736 invoked from network); 6 Jun 2006 20:01:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 20:01:35 -0000
Received: (qmail 50703 invoked by uid 500); 6 Jun 2006 20:01:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 50596 invoked by uid 500); 6 Jun 2006 20:01:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 50586 invoked by uid 99); 6 Jun 2006 20:01:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 13:01:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 13:01:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 69DB67142C9
	for <hadoop-dev@lucene.apache.org>; Tue,  6 Jun 2006 20:00:32 +0000 (GMT)
Message-ID: <15729149.1149624032430.JavaMail.jira@brutus>
Date: Tue, 6 Jun 2006 20:00:32 +0000 (GMT+00:00)
From: "Naveen Nalam (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-277) Race condition in
 Configuration.getLocalPath()
In-Reply-To: <674337.1149556349857.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-277?page=comments#action_12415024 ] 

Naveen Nalam commented on HADOOP-277:
-------------------------------------

FileSystem.mkdirs is an abstract method. It would have been nice to put the traversal logic there. FSDirectory.mkdirs() already does a traversal like we need, so perhaps that code can be copied and modified for LocalFileSystem.mkdirs() ?

> Race condition in Configuration.getLocalPath()
> ----------------------------------------------
>
>          Key: HADOOP-277
>          URL: http://issues.apache.org/jira/browse/HADOOP-277
>      Project: Hadoop
>         Type: Bug

>  Environment: linux, 64 bit, dual core, 4x400GB disk, 4GB RAM
>     Reporter: paul sutter
>  Attachments: hadoop-277.patch, hadoop-task_1_r_9.log, mkdirs.patch
>
> (attached: a patch to fix the problem, and a logfile showing the problem occuring twice)
> There is a race condition in Configuration.java:
>        Path file = new Path(dirs[index], path);
>        Path dir = file.getParent();
>        if (fs.exists(dir) || fs.mkdirs(dir)) {
>          return file;
> If two threads simultaneously process this code with the same target directory, fs.exists() will return false, but from fs.mkdirs() only one of the two threads will return true. From the Java documentation:
>  "returns: true if and only if the directory was created, along with all necessary parent directories; false otherwise"
> That is, if the first thread successfully creates the directory, the second will not, and therefore return false, even though the directory exists.
> This was really happening. We use four temporary directories, and we had reducers failing all over the place with  bizarre impossible errors. I modified the ReduceTaskRunner to output the filename that it creates to find the problem, and the log output is below.
> Here you can see copies initiated for two files that hash to the same temp directory, simultaneously. map_4.out is created in the correct directory (/data2...), but map_15.out is created in the next directory (/data3...) becuase of this race condition. Minutes later, when the appender tries to locate the file, that race condition does not occur (the directory already exists), and the appender looks for the file map_15.out in the correct directory, where it does not exist.
> 060605 142414 task_0001_r_000009_1 Copying task_0001_m_000004_0 output from rmr05.
> 060605 142414 task_0001_r_000009_1 Copying task_0001_m_000015_0 output from rmr04.
> ...
> 060605 142416 task_0001_r_000009_1 done copying task_0001_m_000004_0 output from rmr05 into /data2/tmp/mapred/local/task_0001_r_000009_1/map_4.out
> ...
> 060605 142418 task_0001_r_000009_1 done copying task_0001_m_000015_0 output from rmr04 into /data3/tmp/mapred/local/task_0001_r_000009_1/map_15.out
> ...
> 060605 142531 task_0001_r_000009_1 0.31808624% reduce > append > /data2/tmp/mapred/local/task_0001_r_000009_1/map_4.out
> ...
> 060605 142725 task_0001_r_000009_1 java.io.FileNotFoundException: /data2/tmp/mapred/local/task_0001_r_000009_1/map_15.out

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun  6 20:13:33 2006
Return-Path: 
 <hadoop-dev-return-1944-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 36325 invoked from network); 6 Jun 2006 20:13:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 20:13:33 -0000
Received: (qmail 60849 invoked by uid 500); 6 Jun 2006 20:13:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 60712 invoked by uid 500); 6 Jun 2006 20:13:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 60701 invoked by uid 99); 6 Jun 2006 20:13:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 13:13:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 13:13:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8196E7142C8
	for <hadoop-dev@lucene.apache.org>; Tue,  6 Jun 2006 20:12:31 +0000 (GMT)
Message-ID: <28930217.1149624751527.JavaMail.jira@brutus>
Date: Tue, 6 Jun 2006 20:12:31 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-277) Race condition in
 Configuration.getLocalPath()
In-Reply-To: <674337.1149556349857.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-277?page=all ]

Owen O'Malley reassigned HADOOP-277:
------------------------------------

    Assign To: Sameer Paranjpye

Sameer is working on a fix for this in LocalFileSystem.mkdirs()

> Race condition in Configuration.getLocalPath()
> ----------------------------------------------
>
>          Key: HADOOP-277
>          URL: http://issues.apache.org/jira/browse/HADOOP-277
>      Project: Hadoop
>         Type: Bug

>  Environment: linux, 64 bit, dual core, 4x400GB disk, 4GB RAM
>     Reporter: paul sutter
>     Assignee: Sameer Paranjpye
>  Attachments: hadoop-277.patch, hadoop-task_1_r_9.log, mkdirs.patch
>
> (attached: a patch to fix the problem, and a logfile showing the problem occuring twice)
> There is a race condition in Configuration.java:
>        Path file = new Path(dirs[index], path);
>        Path dir = file.getParent();
>        if (fs.exists(dir) || fs.mkdirs(dir)) {
>          return file;
> If two threads simultaneously process this code with the same target directory, fs.exists() will return false, but from fs.mkdirs() only one of the two threads will return true. From the Java documentation:
>  "returns: true if and only if the directory was created, along with all necessary parent directories; false otherwise"
> That is, if the first thread successfully creates the directory, the second will not, and therefore return false, even though the directory exists.
> This was really happening. We use four temporary directories, and we had reducers failing all over the place with  bizarre impossible errors. I modified the ReduceTaskRunner to output the filename that it creates to find the problem, and the log output is below.
> Here you can see copies initiated for two files that hash to the same temp directory, simultaneously. map_4.out is created in the correct directory (/data2...), but map_15.out is created in the next directory (/data3...) becuase of this race condition. Minutes later, when the appender tries to locate the file, that race condition does not occur (the directory already exists), and the appender looks for the file map_15.out in the correct directory, where it does not exist.
> 060605 142414 task_0001_r_000009_1 Copying task_0001_m_000004_0 output from rmr05.
> 060605 142414 task_0001_r_000009_1 Copying task_0001_m_000015_0 output from rmr04.
> ...
> 060605 142416 task_0001_r_000009_1 done copying task_0001_m_000004_0 output from rmr05 into /data2/tmp/mapred/local/task_0001_r_000009_1/map_4.out
> ...
> 060605 142418 task_0001_r_000009_1 done copying task_0001_m_000015_0 output from rmr04 into /data3/tmp/mapred/local/task_0001_r_000009_1/map_15.out
> ...
> 060605 142531 task_0001_r_000009_1 0.31808624% reduce > append > /data2/tmp/mapred/local/task_0001_r_000009_1/map_4.out
> ...
> 060605 142725 task_0001_r_000009_1 java.io.FileNotFoundException: /data2/tmp/mapred/local/task_0001_r_000009_1/map_15.out

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun  6 20:15:32 2006
Return-Path: 
 <hadoop-dev-return-1945-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 36625 invoked from network); 6 Jun 2006 20:15:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 20:15:32 -0000
Received: (qmail 64292 invoked by uid 500); 6 Jun 2006 20:15:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64270 invoked by uid 500); 6 Jun 2006 20:15:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64258 invoked by uid 99); 6 Jun 2006 20:15:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 13:15:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 13:15:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C9A4171429F
	for <hadoop-dev@lucene.apache.org>; Tue,  6 Jun 2006 20:14:29 +0000 (GMT)
Message-ID: <7237468.1149624869823.JavaMail.jira@brutus>
Date: Tue, 6 Jun 2006 20:14:29 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-279) running without the hadoop script
 causes warnings about log4j not being configured correctly
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

running without the hadoop script causes warnings about log4j not being configured correctly
--------------------------------------------------------------------------------------------

         Key: HADOOP-279
         URL: http://issues.apache.org/jira/browse/HADOOP-279
     Project: Hadoop
        Type: Improvement

  Components: mapred  
    Versions: 0.3.1    
    Reporter: Owen O'Malley
 Assigned to: Owen O'Malley 
     Fix For: 0.3.1


Anyone who runs hadoop programs without the bin/hadoop script will get a message about log4j not being configured correctly. The problem is that the config file uses the system property "hadoop.root.logger", which is set in the script.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun  6 20:21:32 2006
Return-Path: 
 <hadoop-dev-return-1946-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37977 invoked from network); 6 Jun 2006 20:21:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 20:21:32 -0000
Received: (qmail 69099 invoked by uid 500); 6 Jun 2006 20:21:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 69076 invoked by uid 500); 6 Jun 2006 20:21:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 69067 invoked by uid 99); 6 Jun 2006 20:21:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 13:21:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 13:21:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 92F9A71429F
	for <hadoop-dev@lucene.apache.org>; Tue,  6 Jun 2006 20:20:30 +0000 (GMT)
Message-ID: <16110196.1149625230599.JavaMail.jira@brutus>
Date: Tue, 6 Jun 2006 20:20:30 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-279) running without the hadoop script
 causes warnings about log4j not being configured correctly
In-Reply-To: <7237468.1149624869823.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-279?page=all ]

Owen O'Malley updated HADOOP-279:
---------------------------------

    Attachment: default-hadoop-root-logger.patch

This patch sets default values for the three system properties that are used in the default property files.

hadoop.root.logger=INFO,stdout
hadoop.log.dir=.
hadoop.log.file=hadoop.log

It also includes some examples of increasing logging levels.

> running without the hadoop script causes warnings about log4j not being configured correctly
> --------------------------------------------------------------------------------------------
>
>          Key: HADOOP-279
>          URL: http://issues.apache.org/jira/browse/HADOOP-279
>      Project: Hadoop
>         Type: Improvement

>   Components: mapred
>     Versions: 0.3.1
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.3.1
>  Attachments: default-hadoop-root-logger.patch
>
> Anyone who runs hadoop programs without the bin/hadoop script will get a message about log4j not being configured correctly. The problem is that the config file uses the system property "hadoop.root.logger", which is set in the script.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun  6 20:25:23 2006
Return-Path: 
 <hadoop-dev-return-1947-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 38734 invoked from network); 6 Jun 2006 20:25:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 20:25:23 -0000
Received: (qmail 72311 invoked by uid 500); 6 Jun 2006 20:25:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72170 invoked by uid 500); 6 Jun 2006 20:25:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72161 invoked by uid 99); 6 Jun 2006 20:25:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 13:25:22 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.145.54.172] (HELO mrout2.yahoo.com) (216.145.54.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 13:25:21 -0700
Received: from [207.126.231.161] (oom-mac.corp.yahoo.com [207.126.231.161])
	by mrout2.yahoo.com (8.13.6/8.13.4/y.out) with ESMTP id k56KOTbt002117
	for <hadoop-dev@lucene.apache.org>; Tue, 6 Jun 2006 13:24:29 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=RhGwssbmRma+FAC5V9B5e0+SMlbbZEvH7ZpjzItbHeuzgaf4/1eHXkXzfUpTJ10/
Mime-Version: 1.0 (Apple Message framework v624)
In-Reply-To: <1bf79d3e0606061147x4ff856d2h2ffa1ffd478ea8d1@mail.gmail.com>
References: <1bf79d3e0606061147x4ff856d2h2ffa1ffd478ea8d1@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <1301b884e8fd40b28c85a06b5b6206e9@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: "Owen O'Malley" <owen@yahoo-inc.com>
Subject: Re: Recent IPC changes?
Date: Tue, 6 Jun 2006 13:24:34 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.624)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 6, 2006, at 11:47 AM, Bryan A. Pendleton wrote:

> What appears to be happening is that that heartbeats aren't 
> registering with
> the job tracker, except after an RPC timeout. If my RPC timeout is the
> default (60s), it takes 60s for the refresh cycle - effectively 
> meaning that
> it takes 60s for *any* tasks to start being distributed, after a job 
> starts
> up. If I turn the IPC timeout down to 10s, then the heartbeats happen 
> at 10s
> instead. Is this intended? Is there some new setting that I should be
> setting (that's not in hadoop-default, I guess)?

There shouldn't be. Which call is timing out? It should be in the log 
of the relevant task tracker. Look for the SocketTimeoutException in 
the log. The call stack will tell us which call is causing the problem.

-- Owen


From MAILER-DAEMON Tue Jun  6 20:48:36 2006
Return-Path: 
 <hadoop-dev-return-1948-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 45222 invoked from network); 6 Jun 2006 20:48:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 20:48:36 -0000
Received: (qmail 97191 invoked by uid 500); 6 Jun 2006 20:48:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97075 invoked by uid 500); 6 Jun 2006 20:48:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 96952 invoked by uid 99); 6 Jun 2006 20:48:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 13:48:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 13:48:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5E78C7142CE
	for <hadoop-dev@lucene.apache.org>; Tue,  6 Jun 2006 20:47:32 +0000 (GMT)
Message-ID: <11221355.1149626852383.JavaMail.jira@brutus>
Date: Tue, 6 Jun 2006 20:47:32 +0000 (GMT+00:00)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-280) AllTestDriver has incorrect class name
 for DistributedFSCheck test
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

AllTestDriver has incorrect class name for DistributedFSCheck test
------------------------------------------------------------------

         Key: HADOOP-280
         URL: http://issues.apache.org/jira/browse/HADOOP-280
     Project: Hadoop
        Type: Bug

    Reporter: Konstantin Shvachko


It has TestDFSIO instead.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun  6 20:50:32 2006
Return-Path: 
 <hadoop-dev-return-1949-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46332 invoked from network); 6 Jun 2006 20:50:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 20:50:32 -0000
Received: (qmail 4065 invoked by uid 500); 6 Jun 2006 20:50:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 4045 invoked by uid 500); 6 Jun 2006 20:50:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 4036 invoked by uid 99); 6 Jun 2006 20:50:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 13:50:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 13:50:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8BF9F7142C7
	for <hadoop-dev@lucene.apache.org>; Tue,  6 Jun 2006 20:49:30 +0000 (GMT)
Message-ID: <1814139.1149626970570.JavaMail.jira@brutus>
Date: Tue, 6 Jun 2006 20:49:30 +0000 (GMT+00:00)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-280) AllTestDriver has incorrect class name
 for DistributedFSCheck test
In-Reply-To: <11221355.1149626852383.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-280?page=all ]

Konstantin Shvachko updated HADOOP-280:
---------------------------------------

    Attachment: AllTestDriver.patch

TestDFSIO. class is replaced by DuistributedFSCheck.class

> AllTestDriver has incorrect class name for DistributedFSCheck test
> ------------------------------------------------------------------
>
>          Key: HADOOP-280
>          URL: http://issues.apache.org/jira/browse/HADOOP-280
>      Project: Hadoop
>         Type: Bug

>     Reporter: Konstantin Shvachko
>  Attachments: AllTestDriver.patch
>
> It has TestDFSIO instead.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun  6 20:52:35 2006
Return-Path: 
 <hadoop-dev-return-1950-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 47080 invoked from network); 6 Jun 2006 20:52:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 20:52:35 -0000
Received: (qmail 8130 invoked by uid 500); 6 Jun 2006 20:52:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 8015 invoked by uid 500); 6 Jun 2006 20:52:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 7910 invoked by uid 99); 6 Jun 2006 20:52:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 13:52:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 13:52:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 73C497142C7
	for <hadoop-dev@lucene.apache.org>; Tue,  6 Jun 2006 20:51:31 +0000 (GMT)
Message-ID: <10346177.1149627091471.JavaMail.jira@brutus>
Date: Tue, 6 Jun 2006 20:51:31 +0000 (GMT+00:00)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-240) namenode should not log failed mkdirs
 at warning level
In-Reply-To: <10933304.1148404889830.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-240?page=all ]

Hairong Kuang updated HADOOP-240:
---------------------------------

    Attachment: mkdir.patch

Doug,  I rebuilt the patch and here it is. I hope that you are able to apply it.

> namenode should not log failed mkdirs at warning level
> ------------------------------------------------------
>
>          Key: HADOOP-240
>          URL: http://issues.apache.org/jira/browse/HADOOP-240
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.2.1
>     Reporter: Hairong Kuang
>     Assignee: Hairong Kuang
>     Priority: Minor
>      Fix For: 0.4.0
>  Attachments: mkdir.patch, mkdir.patch, mkdir_new.patch
>
> when a namenode creates a directory, it also recursively tries to creates its parent directories. If they already exist, the lastSuccess is  false and the "error" is logged at the warning level.
> The right approach is to set the logging leve lower to fine or simply ignore the the "error".

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun  6 20:56:36 2006
Return-Path: 
 <hadoop-dev-return-1951-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 48552 invoked from network); 6 Jun 2006 20:56:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 20:56:36 -0000
Received: (qmail 14667 invoked by uid 500); 6 Jun 2006 20:56:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14612 invoked by uid 500); 6 Jun 2006 20:56:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 14581 invoked by uid 99); 6 Jun 2006 20:56:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 13:56:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 13:56:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 76CF37142C9
	for <hadoop-dev@lucene.apache.org>; Tue,  6 Jun 2006 20:55:32 +0000 (GMT)
Message-ID: <23988530.1149627332483.JavaMail.jira@brutus>
Date: Tue, 6 Jun 2006 20:55:32 +0000 (GMT+00:00)
From: "alan wootton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-123) mini map/reduce cluster for junit
 tests
In-Reply-To: <927904038.1144348524414.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-123?page=all ]

alan wootton updated HADOOP-123:
--------------------------------

    Attachment: ClusterTestWordCount.patch

> mini map/reduce cluster for junit tests
> ---------------------------------------
>
>          Key: HADOOP-123
>          URL: http://issues.apache.org/jira/browse/HADOOP-123
>      Project: Hadoop
>         Type: New Feature

>   Components: mapred
>     Versions: 0.3.0
>     Reporter: Owen O'Malley
>     Assignee: Milind Bhandarkar
>      Fix For: 0.4.0
>  Attachments: ClusterTestWordCount.patch
>
> I would like a single process map-reduce pseduo-distributed cluster that can be used for unit tests. We should add a unit test with a word count map/reduce.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun  6 20:58:33 2006
Return-Path: 
 <hadoop-dev-return-1952-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 48898 invoked from network); 6 Jun 2006 20:58:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 20:58:33 -0000
Received: (qmail 15665 invoked by uid 500); 6 Jun 2006 20:58:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15524 invoked by uid 500); 6 Jun 2006 20:58:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 15515 invoked by uid 99); 6 Jun 2006 20:58:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 13:58:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 13:58:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 085C77142C8
	for <hadoop-dev@lucene.apache.org>; Tue,  6 Jun 2006 20:57:31 +0000 (GMT)
Message-ID: <2762595.1149627451031.JavaMail.jira@brutus>
Date: Tue, 6 Jun 2006 20:57:31 +0000 (GMT+00:00)
From: "alan wootton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-123) mini map/reduce cluster for junit
 tests
In-Reply-To: <927904038.1144348524414.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-123?page=comments#action_12415047 ] 

alan wootton commented on HADOOP-123:
-------------------------------------

I put my changes into the latest trunk, and built a patch. It doesn't work yet, but the outline is there.

Notes:

There is an added conf to override the hostname for nodes (DataNode and TaskTracker)

There is a DNS hack so that java resolves all names in the form localhostN to 127.0.0.1 (MyNameService)
This requires the system property 'sun.net.spi.nameservice.provider.1' to be set in the command line 
or in the ant script.

dfs sim = RunDfsSim.java
mapred sim = RunMapRedSim.java

The dfs sim works pretty good. The MapRed sim is broken. It's always config issues. 
Generally you want for the TaskTrackers to use their local config's and avoid loading the
default configs (which are all for localmode).

I changed the build xml so that the 'test-cluster' target runs all tests that start with 'ClusterTest'.
The ClusterTestDFS.java test is working but needs to be refactored to use RunDfsSim.java

'new JobConf(conf)' used to simply drop the conf on the floor, so there is a fix to Configuration for that.

I had to add code to close the editlog in FSNamesystem or ClusterTestDFS.java fails on the second pass.

Oops, the multiple editlogs patch, in FSDirectory, is also in this patch, but the default case changes nothing.

There is a small change to the test-cluster target of build.xml to support the sims.

Tell me what you think.









> mini map/reduce cluster for junit tests
> ---------------------------------------
>
>          Key: HADOOP-123
>          URL: http://issues.apache.org/jira/browse/HADOOP-123
>      Project: Hadoop
>         Type: New Feature

>   Components: mapred
>     Versions: 0.3.0
>     Reporter: Owen O'Malley
>     Assignee: Milind Bhandarkar
>      Fix For: 0.4.0
>  Attachments: ClusterTestWordCount.patch
>
> I would like a single process map-reduce pseduo-distributed cluster that can be used for unit tests. We should add a unit test with a word count map/reduce.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun  6 21:08:32 2006
Return-Path: 
 <hadoop-dev-return-1953-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52926 invoked from network); 6 Jun 2006 21:08:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 21:08:32 -0000
Received: (qmail 34385 invoked by uid 500); 6 Jun 2006 21:08:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 34366 invoked by uid 500); 6 Jun 2006 21:08:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 34357 invoked by uid 99); 6 Jun 2006 21:08:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 14:08:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 14:08:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 94C0D71429F
	for <hadoop-dev@lucene.apache.org>; Tue,  6 Jun 2006 21:07:30 +0000 (GMT)
Message-ID: <10578113.1149628050606.JavaMail.jira@brutus>
Date: Tue, 6 Jun 2006 21:07:30 +0000 (GMT+00:00)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-280) AllTestDriver has incorrect class name
 for DistributedFSCheck test
In-Reply-To: <11221355.1149626852383.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-280?page=all ]

Konstantin Shvachko updated HADOOP-280:
---------------------------------------

    Attachment:     (was: AllTestDriver.patch)

> AllTestDriver has incorrect class name for DistributedFSCheck test
> ------------------------------------------------------------------
>
>          Key: HADOOP-280
>          URL: http://issues.apache.org/jira/browse/HADOOP-280
>      Project: Hadoop
>         Type: Bug

>     Reporter: Konstantin Shvachko
>  Attachments: AllTestDriver.patch
>
> It has TestDFSIO instead.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun  6 21:08:33 2006
Return-Path: 
 <hadoop-dev-return-1954-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52957 invoked from network); 6 Jun 2006 21:08:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 21:08:33 -0000
Received: (qmail 34573 invoked by uid 500); 6 Jun 2006 21:08:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 34541 invoked by uid 500); 6 Jun 2006 21:08:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 34507 invoked by uid 99); 6 Jun 2006 21:08:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 14:08:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 14:08:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 78C2A7142A1
	for <hadoop-dev@lucene.apache.org>; Tue,  6 Jun 2006 21:07:31 +0000 (GMT)
Message-ID: <20500828.1149628051492.JavaMail.jira@brutus>
Date: Tue, 6 Jun 2006 21:07:31 +0000 (GMT+00:00)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-280) AllTestDriver has incorrect class name
 for DistributedFSCheck test
In-Reply-To: <11221355.1149626852383.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-280?page=all ]

Konstantin Shvachko updated HADOOP-280:
---------------------------------------

    Attachment: AllTestDriver.patch

> AllTestDriver has incorrect class name for DistributedFSCheck test
> ------------------------------------------------------------------
>
>          Key: HADOOP-280
>          URL: http://issues.apache.org/jira/browse/HADOOP-280
>      Project: Hadoop
>         Type: Bug

>     Reporter: Konstantin Shvachko
>  Attachments: AllTestDriver.patch
>
> It has TestDFSIO instead.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun  6 21:29:33 2006
Return-Path: 
 <hadoop-dev-return-1955-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 63066 invoked from network); 6 Jun 2006 21:29:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 21:29:33 -0000
Received: (qmail 58153 invoked by uid 500); 6 Jun 2006 21:29:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58015 invoked by uid 500); 6 Jun 2006 21:29:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58006 invoked by uid 99); 6 Jun 2006 21:29:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 14:29:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 14:29:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AF2047142A1
	for <hadoop-dev@lucene.apache.org>; Tue,  6 Jun 2006 21:28:30 +0000 (GMT)
Message-ID: <22893804.1149629310714.JavaMail.jira@brutus>
Date: Tue, 6 Jun 2006 21:28:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-279) running without the hadoop script
 causes warnings about log4j not being configured correctly
In-Reply-To: <7237468.1149624869823.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-279?page=all ]
     
Doug Cutting resolved HADOOP-279:
---------------------------------

    Fix Version: 0.3.2
                     (was: 0.3.1)
     Resolution: Fixed

I just committed this.  Thanks, Owen.

> running without the hadoop script causes warnings about log4j not being configured correctly
> --------------------------------------------------------------------------------------------
>
>          Key: HADOOP-279
>          URL: http://issues.apache.org/jira/browse/HADOOP-279
>      Project: Hadoop
>         Type: Improvement

>   Components: mapred
>     Versions: 0.3.1
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.3.2
>  Attachments: default-hadoop-root-logger.patch
>
> Anyone who runs hadoop programs without the bin/hadoop script will get a message about log4j not being configured correctly. The problem is that the config file uses the system property "hadoop.root.logger", which is set in the script.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun  6 21:31:32 2006
Return-Path: 
 <hadoop-dev-return-1956-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 63529 invoked from network); 6 Jun 2006 21:31:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 21:31:32 -0000
Received: (qmail 62784 invoked by uid 500); 6 Jun 2006 21:31:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62765 invoked by uid 500); 6 Jun 2006 21:31:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62756 invoked by uid 99); 6 Jun 2006 21:31:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 14:31:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 14:31:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9528671429F
	for <hadoop-dev@lucene.apache.org>; Tue,  6 Jun 2006 21:30:30 +0000 (GMT)
Message-ID: <15485352.1149629430607.JavaMail.jira@brutus>
Date: Tue, 6 Jun 2006 21:30:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-275) log4j changes for hadoopStreaming
In-Reply-To: <6001228.1149541229838.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-275?page=all ]

Doug Cutting updated HADOOP-275:
--------------------------------

    Fix Version: 0.3.2
                     (was: 0.4.0)

> log4j changes for hadoopStreaming
> ---------------------------------
>
>          Key: HADOOP-275
>          URL: http://issues.apache.org/jira/browse/HADOOP-275
>      Project: Hadoop
>         Type: New Feature

>   Components: contrib/streaming
>     Reporter: Michel Tourn
>     Assignee: Doug Cutting
>      Fix For: 0.3.2
>  Attachments: streaming.yor.patch
>
> A patch for hadoopStreaming. 
> Use log4j 
> Still Using short UTF8 strings

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun  6 21:31:35 2006
Return-Path: 
 <hadoop-dev-return-1957-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 63569 invoked from network); 6 Jun 2006 21:31:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 21:31:35 -0000
Received: (qmail 62954 invoked by uid 500); 6 Jun 2006 21:31:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62931 invoked by uid 500); 6 Jun 2006 21:31:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62922 invoked by uid 99); 6 Jun 2006 21:31:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 14:31:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 14:31:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DA4247142C9
	for <hadoop-dev@lucene.apache.org>; Tue,  6 Jun 2006 21:30:32 +0000 (GMT)
Message-ID: <5668730.1149629432891.JavaMail.jira@brutus>
Date: Tue, 6 Jun 2006 21:30:32 +0000 (GMT+00:00)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-277) Race condition in
 Configuration.getLocalPath()
In-Reply-To: <674337.1149556349857.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-277?page=all ]

Sameer Paranjpye updated HADOOP-277:
------------------------------------

    Attachment: mkdir-p.patch.txt

Attached patch for mkdir issue. LocalFileSystem.mkdirs() now traverses the hierarchy creating each directory along the way. This patch changes the semantics of  'mkdirs' in the FileSystem interface. The semantics are now those of 'mkdir -p', in that existence of the specified directory or any ancestor of it is no longer an error.

Also updates mkdirs in dfs.FSDirectory so that it has the same behavior.

> Race condition in Configuration.getLocalPath()
> ----------------------------------------------
>
>          Key: HADOOP-277
>          URL: http://issues.apache.org/jira/browse/HADOOP-277
>      Project: Hadoop
>         Type: Bug

>  Environment: linux, 64 bit, dual core, 4x400GB disk, 4GB RAM
>     Reporter: paul sutter
>     Assignee: Sameer Paranjpye
>  Attachments: hadoop-277.patch, hadoop-task_1_r_9.log, mkdir-p.patch.txt, mkdirs.patch
>
> (attached: a patch to fix the problem, and a logfile showing the problem occuring twice)
> There is a race condition in Configuration.java:
>        Path file = new Path(dirs[index], path);
>        Path dir = file.getParent();
>        if (fs.exists(dir) || fs.mkdirs(dir)) {
>          return file;
> If two threads simultaneously process this code with the same target directory, fs.exists() will return false, but from fs.mkdirs() only one of the two threads will return true. From the Java documentation:
>  "returns: true if and only if the directory was created, along with all necessary parent directories; false otherwise"
> That is, if the first thread successfully creates the directory, the second will not, and therefore return false, even though the directory exists.
> This was really happening. We use four temporary directories, and we had reducers failing all over the place with  bizarre impossible errors. I modified the ReduceTaskRunner to output the filename that it creates to find the problem, and the log output is below.
> Here you can see copies initiated for two files that hash to the same temp directory, simultaneously. map_4.out is created in the correct directory (/data2...), but map_15.out is created in the next directory (/data3...) becuase of this race condition. Minutes later, when the appender tries to locate the file, that race condition does not occur (the directory already exists), and the appender looks for the file map_15.out in the correct directory, where it does not exist.
> 060605 142414 task_0001_r_000009_1 Copying task_0001_m_000004_0 output from rmr05.
> 060605 142414 task_0001_r_000009_1 Copying task_0001_m_000015_0 output from rmr04.
> ...
> 060605 142416 task_0001_r_000009_1 done copying task_0001_m_000004_0 output from rmr05 into /data2/tmp/mapred/local/task_0001_r_000009_1/map_4.out
> ...
> 060605 142418 task_0001_r_000009_1 done copying task_0001_m_000015_0 output from rmr04 into /data3/tmp/mapred/local/task_0001_r_000009_1/map_15.out
> ...
> 060605 142531 task_0001_r_000009_1 0.31808624% reduce > append > /data2/tmp/mapred/local/task_0001_r_000009_1/map_4.out
> ...
> 060605 142725 task_0001_r_000009_1 java.io.FileNotFoundException: /data2/tmp/mapred/local/task_0001_r_000009_1/map_15.out

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun  6 21:44:33 2006
Return-Path: 
 <hadoop-dev-return-1958-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 69891 invoked from network); 6 Jun 2006 21:44:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 21:44:33 -0000
Received: (qmail 74154 invoked by uid 500); 6 Jun 2006 21:44:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 74117 invoked by uid 500); 6 Jun 2006 21:44:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 74107 invoked by uid 99); 6 Jun 2006 21:44:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 14:44:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 14:44:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AA8D77142A1
	for <hadoop-dev@lucene.apache.org>; Tue,  6 Jun 2006 21:43:30 +0000 (GMT)
Message-ID: <7803826.1149630210695.JavaMail.jira@brutus>
Date: Tue, 6 Jun 2006 21:43:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-280) AllTestDriver has incorrect class
 name for DistributedFSCheck test
In-Reply-To: <11221355.1149626852383.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-280?page=all ]
     
Doug Cutting resolved HADOOP-280:
---------------------------------

    Fix Version: 0.3.2
     Resolution: Fixed

I just committed this.  Thanks!

> AllTestDriver has incorrect class name for DistributedFSCheck test
> ------------------------------------------------------------------
>
>          Key: HADOOP-280
>          URL: http://issues.apache.org/jira/browse/HADOOP-280
>      Project: Hadoop
>         Type: Bug

>     Reporter: Konstantin Shvachko
>      Fix For: 0.3.2
>  Attachments: AllTestDriver.patch
>
> It has TestDFSIO instead.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun  6 22:45:29 2006
Return-Path: 
 <hadoop-dev-return-1959-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 89234 invoked from network); 6 Jun 2006 22:45:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 22:45:29 -0000
Received: (qmail 42095 invoked by uid 500); 6 Jun 2006 22:45:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 42070 invoked by uid 500); 6 Jun 2006 22:45:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 42061 invoked by uid 99); 6 Jun 2006 22:45:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 15:45:28 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.109.112.27] (HELO mrout1-b.corp.dcn.yahoo.com)
 (216.109.112.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 15:45:27 -0700
Received: from [10.72.104.183] (enoughhot-lx.corp.yahoo.com [10.72.104.183])
	by mrout1-b.corp.dcn.yahoo.com (8.13.6/8.13.4/y.out) with ESMTP id
 k56Mij7o048559
	for <hadoop-dev@lucene.apache.org>; Tue, 6 Jun 2006 15:44:45 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=message-id:date:from:user-agent:x-accept-language:
	mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
	b=Y3cnfXMgXCoCA4HSeSF89psJsEG1cBdt2tCOtwmkZcTwZ+InbgicZD1Uy+7x7eUc
Message-ID: <4486055C.5020307@yahoo-inc.com>
Date: Tue, 06 Jun 2006 15:44:44 -0700
From: Konstantin Shvachko <shv@yahoo-inc.com>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: dfs incompatibility .3 and .4-dev?
References: <79433D67-1259-4A20-9B84-C703B96B4A91@media-style.com>
In-Reply-To: <79433D67-1259-4A20-9B84-C703B96B4A91@media-style.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Stefan,

I'm trying to investigate the problem.
Could you give some more information about what happened to you.
- what is your cluster size
- amount of data
- how long did dfs ran without restarting the name node before upgrading

> we discussed the three  kinds of data looses, hardware, software or  
> human errors.
> I would love to figure out what was my problem today. :)

Looks like you are not alone :-(

>
> Scenario:
> + updated from hadoop .2.1 to .4.
> + problems to get all datanodes started

what was the problem with datanodes?

> + downgrade to hadoop .3.1
> + error message of incompatible dfs (I guess . already had started to  
> write to the log)

What is the message?

> All transaction done with .2 during last hours lost. Means the data I  
> created and copy was not in the dfs any more.
> I guess the update / downgrade process destroyed the log but the  
> image itself was still ok.
>
> I ended up with a complete corrupted dfs - I guess since the lost dfs  
> namenode transaction log.
>
> Wouldn't be better in case we discover a version conflict in the dfs,  
> that the user need to do manually confirm that the data have to  
> converted into a new format.
> Any thoughts?

Thanks,
Konstantin

From MAILER-DAEMON Tue Jun  6 22:55:35 2006
Return-Path: 
 <hadoop-dev-return-1960-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94669 invoked from network); 6 Jun 2006 22:55:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 22:55:35 -0000
Received: (qmail 50534 invoked by uid 500); 6 Jun 2006 22:55:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 50510 invoked by uid 500); 6 Jun 2006 22:55:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 50495 invoked by uid 99); 6 Jun 2006 22:55:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 15:55:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 15:55:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 734427142C7
	for <hadoop-dev@lucene.apache.org>; Tue,  6 Jun 2006 22:54:32 +0000 (GMT)
Message-ID: <13491808.1149634472469.JavaMail.jira@brutus>
Date: Tue, 6 Jun 2006 22:54:32 +0000 (GMT+00:00)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-277) Race condition in
 Configuration.getLocalPath()
In-Reply-To: <674337.1149556349857.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-277?page=all ]

Sameer Paranjpye updated HADOOP-277:
------------------------------------

    Version: 0.3.1

> Race condition in Configuration.getLocalPath()
> ----------------------------------------------
>
>          Key: HADOOP-277
>          URL: http://issues.apache.org/jira/browse/HADOOP-277
>      Project: Hadoop
>         Type: Bug

>     Versions: 0.3.1
>  Environment: linux, 64 bit, dual core, 4x400GB disk, 4GB RAM
>     Reporter: paul sutter
>     Assignee: Sameer Paranjpye
>  Attachments: hadoop-277.patch, hadoop-task_1_r_9.log, mkdir-p.patch.txt, mkdirs.patch
>
> (attached: a patch to fix the problem, and a logfile showing the problem occuring twice)
> There is a race condition in Configuration.java:
>        Path file = new Path(dirs[index], path);
>        Path dir = file.getParent();
>        if (fs.exists(dir) || fs.mkdirs(dir)) {
>          return file;
> If two threads simultaneously process this code with the same target directory, fs.exists() will return false, but from fs.mkdirs() only one of the two threads will return true. From the Java documentation:
>  "returns: true if and only if the directory was created, along with all necessary parent directories; false otherwise"
> That is, if the first thread successfully creates the directory, the second will not, and therefore return false, even though the directory exists.
> This was really happening. We use four temporary directories, and we had reducers failing all over the place with  bizarre impossible errors. I modified the ReduceTaskRunner to output the filename that it creates to find the problem, and the log output is below.
> Here you can see copies initiated for two files that hash to the same temp directory, simultaneously. map_4.out is created in the correct directory (/data2...), but map_15.out is created in the next directory (/data3...) becuase of this race condition. Minutes later, when the appender tries to locate the file, that race condition does not occur (the directory already exists), and the appender looks for the file map_15.out in the correct directory, where it does not exist.
> 060605 142414 task_0001_r_000009_1 Copying task_0001_m_000004_0 output from rmr05.
> 060605 142414 task_0001_r_000009_1 Copying task_0001_m_000015_0 output from rmr04.
> ...
> 060605 142416 task_0001_r_000009_1 done copying task_0001_m_000004_0 output from rmr05 into /data2/tmp/mapred/local/task_0001_r_000009_1/map_4.out
> ...
> 060605 142418 task_0001_r_000009_1 done copying task_0001_m_000015_0 output from rmr04 into /data3/tmp/mapred/local/task_0001_r_000009_1/map_15.out
> ...
> 060605 142531 task_0001_r_000009_1 0.31808624% reduce > append > /data2/tmp/mapred/local/task_0001_r_000009_1/map_4.out
> ...
> 060605 142725 task_0001_r_000009_1 java.io.FileNotFoundException: /data2/tmp/mapred/local/task_0001_r_000009_1/map_15.out

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun  6 23:07:32 2006
Return-Path: 
 <hadoop-dev-return-1961-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 97180 invoked from network); 6 Jun 2006 23:07:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 23:07:32 -0000
Received: (qmail 63309 invoked by uid 500); 6 Jun 2006 23:07:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63274 invoked by uid 500); 6 Jun 2006 23:07:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63265 invoked by uid 99); 6 Jun 2006 23:07:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 16:07:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 16:07:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BFC5371429F
	for <hadoop-dev@lucene.apache.org>; Tue,  6 Jun 2006 23:06:29 +0000 (GMT)
Message-ID: <19818580.1149635189767.JavaMail.jira@brutus>
Date: Tue, 6 Jun 2006 23:06:29 +0000 (GMT+00:00)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-281) dfs.FSDirectory.mkdirs can create
 sub-directories of a file!
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

dfs.FSDirectory.mkdirs can create sub-directories of a file!
------------------------------------------------------------

         Key: HADOOP-281
         URL: http://issues.apache.org/jira/browse/HADOOP-281
     Project: Hadoop
        Type: Bug

    Versions: 0.3.1    
    Reporter: Sameer Paranjpye


dfs.FSDirectory.mkdirs will merrily adds children to a directory tree node without checking whether it represents a directory. So it is possible to create a subdirectories of a file.



-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun  6 23:09:32 2006
Return-Path: 
 <hadoop-dev-return-1962-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 97321 invoked from network); 6 Jun 2006 23:09:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 23:09:32 -0000
Received: (qmail 63753 invoked by uid 500); 6 Jun 2006 23:09:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63728 invoked by uid 500); 6 Jun 2006 23:09:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63716 invoked by uid 99); 6 Jun 2006 23:09:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 16:09:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 16:09:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DE4C17142A1
	for <hadoop-dev@lucene.apache.org>; Tue,  6 Jun 2006 23:08:29 +0000 (GMT)
Message-ID: <19002384.1149635309907.JavaMail.jira@brutus>
Date: Tue, 6 Jun 2006 23:08:29 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-282) the datanode crashes if it starts
 before the namenode
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

the datanode crashes if it starts before the namenode
-----------------------------------------------------

         Key: HADOOP-282
         URL: http://issues.apache.org/jira/browse/HADOOP-282
     Project: Hadoop
        Type: Bug

  Components: dfs  
    Versions: 0.3.1    
    Reporter: Owen O'Malley
 Assigned to: Owen O'Malley 
    Priority: Critical
     Fix For: 0.3.2
 Attachments: data-node-first.patch

If the datanode tries to register before the namenode is offering service, it crashes with a uncaught exception.

java.net.ConnectE
xception: Connection refused
        at java.net.PlainSocketImpl.socketConnect(Native Method)
        at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:333)
        at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:195)
        at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:182)
        at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
        at java.net.Socket.connect(Socket.java:507)
        at java.net.Socket.connect(Socket.java:457)
        at java.net.Socket.<init>(Socket.java:365)
        at java.net.Socket.<init>(Socket.java:207)
        at org.apache.hadoop.ipc.Client$Connection.<init>(Client.java:112)
        at org.apache.hadoop.ipc.Client.getConnection(Client.java:351)
        at org.apache.hadoop.ipc.Client.call(Client.java:289)
        at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:150)
        at org.apache.hadoop.dfs.$Proxy0.register(Unknown Source)
        at org.apache.hadoop.dfs.DataNode.register(DataNode.java:176)
        at org.apache.hadoop.dfs.DataNode.<init>(DataNode.java:109)
        at org.apache.hadoop.dfs.DataNode.makeInstanceForDir(DataNode.java:892)
        at org.apache.hadoop.dfs.DataNode.run(DataNode.java:846)
        at org.apache.hadoop.dfs.DataNode.runAndWait(DataNode.java:862)
        at org.apache.hadoop.dfs.DataNode.main(DataNode.java:917)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun  6 23:09:33 2006
Return-Path: 
 <hadoop-dev-return-1963-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 97363 invoked from network); 6 Jun 2006 23:09:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 23:09:33 -0000
Received: (qmail 64035 invoked by uid 500); 6 Jun 2006 23:09:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63893 invoked by uid 500); 6 Jun 2006 23:09:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63884 invoked by uid 99); 6 Jun 2006 23:09:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 16:09:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 16:09:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C63247142C8
	for <hadoop-dev@lucene.apache.org>; Tue,  6 Jun 2006 23:08:30 +0000 (GMT)
Message-ID: <23701717.1149635310808.JavaMail.jira@brutus>
Date: Tue, 6 Jun 2006 23:08:30 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-282) the datanode crashes if it starts
 before the namenode
In-Reply-To: <19002384.1149635309907.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-282?page=all ]

Owen O'Malley updated HADOOP-282:
---------------------------------

    Attachment: data-node-first.patch

This patch moves the datanode registration into the offerService method, so that if an exception is thrown it will retry again in 5 seconds.

> the datanode crashes if it starts before the namenode
> -----------------------------------------------------
>
>          Key: HADOOP-282
>          URL: http://issues.apache.org/jira/browse/HADOOP-282
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.3.1
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>     Priority: Critical
>      Fix For: 0.3.2
>  Attachments: data-node-first.patch
>
> If the datanode tries to register before the namenode is offering service, it crashes with a uncaught exception.
> java.net.ConnectE
> xception: Connection refused
>         at java.net.PlainSocketImpl.socketConnect(Native Method)
>         at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:333)
>         at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:195)
>         at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:182)
>         at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
>         at java.net.Socket.connect(Socket.java:507)
>         at java.net.Socket.connect(Socket.java:457)
>         at java.net.Socket.<init>(Socket.java:365)
>         at java.net.Socket.<init>(Socket.java:207)
>         at org.apache.hadoop.ipc.Client$Connection.<init>(Client.java:112)
>         at org.apache.hadoop.ipc.Client.getConnection(Client.java:351)
>         at org.apache.hadoop.ipc.Client.call(Client.java:289)
>         at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:150)
>         at org.apache.hadoop.dfs.$Proxy0.register(Unknown Source)
>         at org.apache.hadoop.dfs.DataNode.register(DataNode.java:176)
>         at org.apache.hadoop.dfs.DataNode.<init>(DataNode.java:109)
>         at org.apache.hadoop.dfs.DataNode.makeInstanceForDir(DataNode.java:892)
>         at org.apache.hadoop.dfs.DataNode.run(DataNode.java:846)
>         at org.apache.hadoop.dfs.DataNode.runAndWait(DataNode.java:862)
>         at org.apache.hadoop.dfs.DataNode.main(DataNode.java:917)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun  6 23:17:00 2006
Return-Path: 
 <hadoop-dev-return-1964-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99182 invoked from network); 6 Jun 2006 23:17:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 23:17:00 -0000
Received: (qmail 68600 invoked by uid 500); 6 Jun 2006 23:17:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68578 invoked by uid 500); 6 Jun 2006 23:17:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68569 invoked by uid 99); 6 Jun 2006 23:17:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 16:17:00 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.109.112.27] (HELO mrout1-b.corp.dcn.yahoo.com)
 (216.109.112.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 16:16:59 -0700
Received: from explainfloorlx (explainfloor-lx.corp.yahoo.com
 [207.126.231.230])
	by mrout1-b.corp.dcn.yahoo.com (8.13.6/8.13.4/y.out) with ESMTP id
 k56NGFkL051714
	for <hadoop-dev@lucene.apache.org>; Tue, 6 Jun 2006 16:16:17 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=from:to:subject:date:message-id:mime-version:content-type:
	x-mailer:x-mimeole:thread-index;
	b=X0kUbu/m1eKBps6pnIH9AfHrXSQhwmkLVnbug3EDt2abApDJ0gGiL+mQpKBOMGAO
From: "Runping Qi" <runping@yahoo-inc.com>
To: <hadoop-dev@lucene.apache.org>
Subject: Not replicated yet exception
Date: Tue, 6 Jun 2006 16:16:14 -0700
Message-ID: <002d01c689bf$3679f940$e6e77ecf@ds.corp.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_002E_01C68984.8A1B2140"
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-Index: AcaJvzUDuBtbjkTcQt+R3M77bbLGfg==
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_002E_01C68984.8A1B2140
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

 

Lately, when I use Hadoop dfs utility  copyFromLocal to load dfs files, I
got the following exceptions:

 

 

copyFromLocal: org.apache.hadoop.dfs.NotReplicatedYetException: Not
replicated yet

        at
org.apache.hadoop.dfs.FSNamesystem.getAdditionalBlock(FSNamesystem.java:429)

        at org.apache.hadoop.dfs.NameNode.addBlock(NameNode.java:190)

        at sun.reflect.GeneratedMethodAccessor13.invoke(Unknown Source)

        at
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl
.java:25)

        at java.lang.reflect.Method.invoke(Method.java:585)

        at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:243)

        at org.apache.hadoop.ipc.Server$Handler.run(Server.java:231)

 

Anybody encountered similar problems? Any ideas?

 

 

 

Thanks.

 

Runping

 


------=_NextPart_000_002E_01C68984.8A1B2140--


From MAILER-DAEMON Wed Jun  7 00:07:33 2006
Return-Path: 
 <hadoop-dev-return-1965-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 19744 invoked from network); 7 Jun 2006 00:07:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 00:07:33 -0000
Received: (qmail 9191 invoked by uid 500); 7 Jun 2006 00:07:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9163 invoked by uid 500); 7 Jun 2006 00:07:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9154 invoked by uid 99); 7 Jun 2006 00:07:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 17:07:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 17:07:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 76FF27142C8
	for <hadoop-dev@lucene.apache.org>; Wed,  7 Jun 2006 00:06:31 +0000 (GMT)
Message-ID: <13980949.1149638791484.JavaMail.jira@brutus>
Date: Wed, 7 Jun 2006 00:06:31 +0000 (GMT+00:00)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-277) Race condition in
 Configuration.getLocalPath()
In-Reply-To: <674337.1149556349857.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-277?page=all ]

Sameer Paranjpye updated HADOOP-277:
------------------------------------

    Fix Version: 0.3.2

> Race condition in Configuration.getLocalPath()
> ----------------------------------------------
>
>          Key: HADOOP-277
>          URL: http://issues.apache.org/jira/browse/HADOOP-277
>      Project: Hadoop
>         Type: Bug

>     Versions: 0.3.1
>  Environment: linux, 64 bit, dual core, 4x400GB disk, 4GB RAM
>     Reporter: paul sutter
>     Assignee: Sameer Paranjpye
>      Fix For: 0.3.2
>  Attachments: hadoop-277.patch, hadoop-task_1_r_9.log, mkdir-p.patch.txt, mkdirs.patch
>
> (attached: a patch to fix the problem, and a logfile showing the problem occuring twice)
> There is a race condition in Configuration.java:
>        Path file = new Path(dirs[index], path);
>        Path dir = file.getParent();
>        if (fs.exists(dir) || fs.mkdirs(dir)) {
>          return file;
> If two threads simultaneously process this code with the same target directory, fs.exists() will return false, but from fs.mkdirs() only one of the two threads will return true. From the Java documentation:
>  "returns: true if and only if the directory was created, along with all necessary parent directories; false otherwise"
> That is, if the first thread successfully creates the directory, the second will not, and therefore return false, even though the directory exists.
> This was really happening. We use four temporary directories, and we had reducers failing all over the place with  bizarre impossible errors. I modified the ReduceTaskRunner to output the filename that it creates to find the problem, and the log output is below.
> Here you can see copies initiated for two files that hash to the same temp directory, simultaneously. map_4.out is created in the correct directory (/data2...), but map_15.out is created in the next directory (/data3...) becuase of this race condition. Minutes later, when the appender tries to locate the file, that race condition does not occur (the directory already exists), and the appender looks for the file map_15.out in the correct directory, where it does not exist.
> 060605 142414 task_0001_r_000009_1 Copying task_0001_m_000004_0 output from rmr05.
> 060605 142414 task_0001_r_000009_1 Copying task_0001_m_000015_0 output from rmr04.
> ...
> 060605 142416 task_0001_r_000009_1 done copying task_0001_m_000004_0 output from rmr05 into /data2/tmp/mapred/local/task_0001_r_000009_1/map_4.out
> ...
> 060605 142418 task_0001_r_000009_1 done copying task_0001_m_000015_0 output from rmr04 into /data3/tmp/mapred/local/task_0001_r_000009_1/map_15.out
> ...
> 060605 142531 task_0001_r_000009_1 0.31808624% reduce > append > /data2/tmp/mapred/local/task_0001_r_000009_1/map_4.out
> ...
> 060605 142725 task_0001_r_000009_1 java.io.FileNotFoundException: /data2/tmp/mapred/local/task_0001_r_000009_1/map_15.out

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun  7 00:09:32 2006
Return-Path: 
 <hadoop-dev-return-1966-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20309 invoked from network); 7 Jun 2006 00:09:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 00:09:32 -0000
Received: (qmail 10591 invoked by uid 500); 7 Jun 2006 00:09:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 10560 invoked by uid 500); 7 Jun 2006 00:09:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 10547 invoked by uid 99); 7 Jun 2006 00:09:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 17:09:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 17:09:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 98E0871429F
	for <hadoop-dev@lucene.apache.org>; Wed,  7 Jun 2006 00:08:30 +0000 (GMT)
Message-ID: <11326578.1149638910623.JavaMail.jira@brutus>
Date: Wed, 7 Jun 2006 00:08:30 +0000 (GMT+00:00)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-240) namenode should not log failed mkdirs
 at warning level
In-Reply-To: <10933304.1148404889830.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-240?page=all ]

Sameer Paranjpye updated HADOOP-240:
------------------------------------

    Fix Version: 0.3.2
                     (was: 0.4.0)

> namenode should not log failed mkdirs at warning level
> ------------------------------------------------------
>
>          Key: HADOOP-240
>          URL: http://issues.apache.org/jira/browse/HADOOP-240
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.2.1
>     Reporter: Hairong Kuang
>     Assignee: Hairong Kuang
>     Priority: Minor
>      Fix For: 0.3.2
>  Attachments: mkdir.patch, mkdir.patch, mkdir_new.patch
>
> when a namenode creates a directory, it also recursively tries to creates its parent directories. If they already exist, the lastSuccess is  false and the "error" is logged at the warning level.
> The right approach is to set the logging leve lower to fine or simply ignore the the "error".

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun  7 01:28:32 2006
Return-Path: 
 <hadoop-dev-return-1967-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51836 invoked from network); 7 Jun 2006 01:28:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 01:28:32 -0000
Received: (qmail 90790 invoked by uid 500); 7 Jun 2006 01:28:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 90653 invoked by uid 500); 7 Jun 2006 01:28:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 90644 invoked by uid 99); 7 Jun 2006 01:28:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 18:28:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 18:28:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 562E771429F
	for <hadoop-dev@lucene.apache.org>; Wed,  7 Jun 2006 01:27:30 +0000 (GMT)
Message-ID: <32588668.1149643650295.JavaMail.jira@brutus>
Date: Wed, 7 Jun 2006 01:27:30 +0000 (GMT+00:00)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-281) dfs.FSDirectory.mkdirs can create
 sub-directories of a file!
In-Reply-To: <19818580.1149635189767.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-281?page=all ]

Sameer Paranjpye updated HADOOP-281:
------------------------------------

    Fix Version: 0.4.0

> dfs.FSDirectory.mkdirs can create sub-directories of a file!
> ------------------------------------------------------------
>
>          Key: HADOOP-281
>          URL: http://issues.apache.org/jira/browse/HADOOP-281
>      Project: Hadoop
>         Type: Bug

>     Versions: 0.3.1
>     Reporter: Sameer Paranjpye
>      Fix For: 0.4.0

>
> dfs.FSDirectory.mkdirs will merrily adds children to a directory tree node without checking whether it represents a directory. So it is possible to create a subdirectories of a file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun  7 01:38:40 2006
Return-Path: 
 <hadoop-dev-return-1968-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 54575 invoked from network); 7 Jun 2006 01:38:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 01:38:40 -0000
Received: (qmail 6901 invoked by uid 500); 7 Jun 2006 01:38:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 6776 invoked by uid 500); 7 Jun 2006 01:38:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 6670 invoked by uid 99); 7 Jun 2006 01:38:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 18:38:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 18:38:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A425C7142CF
	for <hadoop-dev@lucene.apache.org>; Wed,  7 Jun 2006 01:37:33 +0000 (GMT)
Message-ID: <9570698.1149644253669.JavaMail.jira@brutus>
Date: Wed, 7 Jun 2006 01:37:33 +0000 (GMT+00:00)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-283) Counting of running maps/reduces in
 tasktrackerstatus
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Counting of running maps/reduces in tasktrackerstatus 
------------------------------------------------------

         Key: HADOOP-283
         URL: http://issues.apache.org/jira/browse/HADOOP-283
     Project: Hadoop
        Type: Improvement

    Versions: 0.4.0    
    Reporter: Mahadev konar
 Assigned to: Mahadev konar 
    Priority: Minor


The functions countreducetasks and countmaptasks currently return the total number of maps/reduces on the tasktracker. They should only return the number of running maps/reduces. Because they return the total count, the jobtracker is not able to schedule tasks on these tasktrackers in the current cycle, when a task is finished and the tasktracker is runnning max number of maps/reduces.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun  7 01:40:33 2006
Return-Path: 
 <hadoop-dev-return-1969-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 54944 invoked from network); 7 Jun 2006 01:40:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 01:40:33 -0000
Received: (qmail 8515 invoked by uid 500); 7 Jun 2006 01:40:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 8494 invoked by uid 500); 7 Jun 2006 01:40:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 8485 invoked by uid 99); 7 Jun 2006 01:40:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 18:40:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 18:40:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 937E671429F
	for <hadoop-dev@lucene.apache.org>; Wed,  7 Jun 2006 01:39:30 +0000 (GMT)
Message-ID: <10350774.1149644370601.JavaMail.jira@brutus>
Date: Wed, 7 Jun 2006 01:39:30 +0000 (GMT+00:00)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-283) Counting of running maps/reduces in
 tasktrackerstatus
In-Reply-To: <9570698.1149644253669.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-283?page=all ]

Mahadev konar updated HADOOP-283:
---------------------------------

    Attachment: tasktrackerstatus.patch

> Counting of running maps/reduces in tasktrackerstatus
> -----------------------------------------------------
>
>          Key: HADOOP-283
>          URL: http://issues.apache.org/jira/browse/HADOOP-283
>      Project: Hadoop
>         Type: Improvement

>     Versions: 0.4.0
>     Reporter: Mahadev konar
>     Assignee: Mahadev konar
>     Priority: Minor
>  Attachments: tasktrackerstatus.patch
>
> The functions countreducetasks and countmaptasks currently return the total number of maps/reduces on the tasktracker. They should only return the number of running maps/reduces. Because they return the total count, the jobtracker is not able to schedule tasks on these tasktrackers in the current cycle, when a task is finished and the tasktracker is runnning max number of maps/reduces.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun  7 05:39:33 2006
Return-Path: 
 <hadoop-dev-return-1970-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96896 invoked from network); 7 Jun 2006 05:39:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 05:39:33 -0000
Received: (qmail 95701 invoked by uid 500); 7 Jun 2006 05:39:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95558 invoked by uid 500); 7 Jun 2006 05:39:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95548 invoked by uid 99); 7 Jun 2006 05:39:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 22:39:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 22:39:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DA2507142A1
	for <hadoop-dev@lucene.apache.org>; Wed,  7 Jun 2006 05:38:29 +0000 (GMT)
Message-ID: <11449145.1149658709890.JavaMail.jira@brutus>
Date: Wed, 7 Jun 2006 05:38:29 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-284) dfs timeout on open
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

dfs timeout on open
-------------------

         Key: HADOOP-284
         URL: http://issues.apache.org/jira/browse/HADOOP-284
     Project: Hadoop
        Type: Bug

  Components: dfs =20
    Versions: 0.3.1   =20
    Reporter: Owen O'Malley
     Fix For: 0.4.0


In my sort benchmark, I've started seeing hundred's of maps dying with time=
out exceptions in the dfs.open() code:

java.net.SocketTimeoutException: timed out waiting for rpc response at org.=
apache.hadoop.ipc.Client.call(Client.java:305) at org.apache.hadoop.ipc.RPC=
$Invoker.invoke(RPC.java:153) at org.apache.hadoop.dfs.$Proxy1.open(Unknown=
 Source) at org.apache.hadoop.dfs.DFSClient$DFSInputStream.openInfo(DFSClie=
nt.java:457) at org.apache.hadoop.dfs.DFSClient$DFSInputStream.(DFSClient.j=
ava:444) at org.apache.hadoop.dfs.DFSClient.open(DFSClient.java:207) at org=
.apache.hadoop.dfs.DistributedFileSystem.openRaw(DistributedFileSystem.java=
:90) at org.apache.hadoop.fs.FSDataInputStream$Checker.(FSDataInputStream.j=
ava:46) at org.apache.hadoop.fs.FSDataInputStream.(FSDataInputStream.java:2=
28) at org.apache.hadoop.fs.FileSystem.open(FileSystem.java:157) at org.apa=
che.hadoop.fs.FileUtil.copy(FileUtil.java:72) at org.apache.hadoop.dfs.Dist=
ributedFileSystem.copyToLocalFile(DistributedFileSystem.java:182) at org.ap=
ache.hadoop.mapred.TaskTracker$TaskInProgress.localizeTask(TaskTracker.java=
:535) at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.launchTask(Tas=
kTracker.java:584) at org.apache.hadoop.mapred.TaskTracker.startNewTask(Tas=
kTracker.java:395) at org.apache.hadoop.mapred.TaskTracker.offerService(Tas=
kTracker.java:308) at org.apache.hadoop.mapred.TaskTracker.run(TaskTracker.=
java:424) at org.apache.hadoop.mapred.TaskTracker.main(TaskTracker.java:961=
)


--=20
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun  7 07:30:52 2006
Return-Path: 
 <hadoop-dev-return-1971-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33015 invoked from network); 7 Jun 2006 07:30:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 07:30:52 -0000
Received: (qmail 34519 invoked by uid 500); 7 Jun 2006 07:30:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 34382 invoked by uid 500); 7 Jun 2006 07:30:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 34373 invoked by uid 99); 7 Jun 2006 07:30:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 00:30:51 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.145.54.173] (HELO mrout3.yahoo.com) (216.145.54.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 00:30:49 -0700
Received: from [10.1.1.102] (snvvpn-10-72-66-c47.corp.yahoo.com [10.72.66.47])
	by mrout3.yahoo.com (8.13.6/8.13.4/y.out) with ESMTP id k577TmnN041731
	for <hadoop-dev@lucene.apache.org>; Wed, 7 Jun 2006 00:29:49 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:content-transfer-encoding:message-id:
	content-type:to:from:subject:date:x-mailer;
	b=n5OSqA7Sw+UlcXrNI4HW6dx0sgaHmvu7pJHRW1TBa5nVMMpG9j9ZF0lY2WCTHT4N
Mime-Version: 1.0 (Apple Message framework v624)
Content-Transfer-Encoding: 7bit
Message-Id: <cc024fae1248a2ecf43b9a258d011665@yahoo-inc.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
To: hadoop-dev@lucene.apache.org
From: "Owen O'Malley" <owen@yahoo-inc.com>
Subject: Re: dfs incompatibility .3 and .4-dev?
Date: Wed, 7 Jun 2006 00:29:54 -0700
X-Mailer: Apple Mail (2.624)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Jun 6, 2006, at 7:36 AM, Stefan Groschupf wrote:

> Hi,
> we discussed the three  kinds of data looses, hardware, software or 
> human errors.
> I would love to figure out what was my problem today. :)
>
> Scenario:
> + updated from hadoop .2.1 to .4.
> + problems to get all datanodes started
> + downgrade to hadoop .3.1
> + error message of incompatible dfs (I guess . already had started to 
> write to the log)

Actually, you must have downgraded to pre-HADOOP-124. Since I just did 
that downgrade on one of my clusters, I figured out the format changes. 
(This is only for those of you who are stuck and feel very comfortable 
editing binary files in the editor of your choice. Please be careful 
and keep backups.)

For downgrading dfs namenodes from 0.3.* or 0.4-dev to 0.3-dev (svn rev 
<= 410634):

1. For <name-node-dir>/image/fsimage
   a. change byte 4 from fe to ff
   b. delete bytes 5 to 8

2. For <name-node-dir>/edits:
   a. change byte 4 from fe to ff

-- Owen


From MAILER-DAEMON Wed Jun  7 08:28:33 2006
Return-Path: 
 <hadoop-dev-return-1972-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51946 invoked from network); 7 Jun 2006 08:28:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 08:28:33 -0000
Received: (qmail 16772 invoked by uid 500); 7 Jun 2006 08:28:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 16635 invoked by uid 500); 7 Jun 2006 08:28:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 16626 invoked by uid 99); 7 Jun 2006 08:28:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 01:28:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 01:28:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DA61A71429F
	for <hadoop-dev@lucene.apache.org>; Wed,  7 Jun 2006 08:27:29 +0000 (GMT)
Message-ID: <6190310.1149668849891.JavaMail.jira@brutus>
Date: Wed, 7 Jun 2006 08:27:29 +0000 (GMT+00:00)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-285) Data nodes cannot re-join the cluster
 once connection is lost
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Data nodes cannot re-join the cluster once connection is lost
-------------------------------------------------------------

         Key: HADOOP-285
         URL: http://issues.apache.org/jira/browse/HADOOP-285
     Project: Hadoop
        Type: Bug

  Components: dfs  
    Versions: 0.3.0    
    Reporter: Konstantin Shvachko


A data node looses connection to a name node and then tries to offerService() again.
HADOOP-270 changes force it to start dataXceiveServer, which is already started and in this case
throws IllegalThreadStateException, which goes on in a loop, and never reaches the heartbeat section.
So the data node never re-joins the cluster, while from the out side it looks it's still running.
This is another reason why we see missing data, and don't see failed data nodes.


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun  7 10:55:34 2006
Return-Path: 
 <hadoop-dev-return-1973-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93731 invoked from network); 7 Jun 2006 10:55:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 10:55:34 -0000
Received: (qmail 7851 invoked by uid 500); 7 Jun 2006 10:55:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 7826 invoked by uid 500); 7 Jun 2006 10:55:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 7817 invoked by uid 99); 7 Jun 2006 10:55:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 03:55:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 03:55:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0FA297142A1
	for <hadoop-dev@lucene.apache.org>; Wed,  7 Jun 2006 10:54:31 +0000 (GMT)
Message-ID: <19070403.1149677671061.JavaMail.jira@brutus>
Date: Wed, 7 Jun 2006 10:54:31 +0000 (GMT+00:00)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-211) logging improvements for Hadoop
In-Reply-To: <11693488.1147389488398.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-211?page=all ]

Arun C Murthy updated HADOOP-211:
---------------------------------

    Attachment: acl-log4j-webapps.patch

We seemed to have missed out getMapOutput.jsp in the earlier patch... here's the fix. Thanks!

> logging improvements for Hadoop
> -------------------------------
>
>          Key: HADOOP-211
>          URL: http://issues.apache.org/jira/browse/HADOOP-211
>      Project: Hadoop
>         Type: Improvement

>     Versions: 0.2.0
>     Reporter: Sameer Paranjpye
>     Assignee: Sameer Paranjpye
>     Priority: Minor
>      Fix For: 0.3.0
>  Attachments: acl-log4j-II.patch.tgz, acl-log4j-webapps.patch, acl-log4j.patch, commons_logging_patch
>
> Here's a proposal for some impovements to the way Hadoop does logging. It advocates 3 
> broad changes to the way logging is currently done, these being:
> - The use of a uniform logging format by all Hadoop subsystems
> - The use of Apache commons logging as a facade above an underlying logging framework
> - The use of Log4J as the underlying logging framework instead of java.util.logging
> This is largely polishing work, but it seems like it would make log analysis and debugging
> easier in the short term. In the long term, it would future proof logging to the extent of
> allowing the logging framework used to change while requiring minimal code change. The 
> propos changes are motivated by the following requirements which we think Hadoops 
> logging should meet:
> - Hadoops logs should be amenable to analysis by tools like grep, sed, awk etc.
> - Log entries should be clearly annotated with a timestamp and a logging level
> - Log entries should be traceable to the subsystem from which they originated
> - The logging implementation should allow log entries to be annotated with source code 
> location information like classname, methodname, file and line number, without requiring
> code changes
> - It should be possible to change the logging implementation used without having to change
> thousands of lines of code
> - The mapping of loggers to destinations (files, directories, servers etc.) should be 
> specified and modifiable via configuration
> Uniform logging format:
> All Hadoop logs should have the following structure.
> <Header>\n
> <LogEntry>\n [<Exception>\n]
> .
> .
> .
> where the header line specifies the format of each log entry. The header line has the format:
> '# <Fieldname> <Fieldname>...\n'. 
> The default format of each log entry is: '# Timestamp Level LoggerName Message', where:
> - Timestamp is a date and time in the format MM/DD/YYYY:HH:MM:SS
> - Level is the logging level (FATAL, WARN, DEBUG, TRACE, etc.)
> - LoggerName is the short name of the logging subsystem from which the message originated e.g.
> fs.FSNamesystem, dfs.Datanode etc.
> - Message is the log message produced
> Why Apache commons logging and Log4J?
> Apache commons logging is a facade meant to be used as a wrapper around an underlying logging
> implementation. Bridges from Apache commons logging to popular logging implementations 
> (Java logging, Log4J, Avalon etc.) are implemented and available as part of the commons logging
> distribution. Implementing a bridge to an unsupported implementation is fairly striaghtforward
> and involves the implementation of subclasses of the commons logging LogFactory and Logger 
> classes. Using Apache commons logging and making all logging calls through it enables us to
> move to a different logging implementation by simply changing configuration in the best case.
> Even otherwise, it incurs minimal code churn overhead.
> Log4J offers a few benefits over java.util.logging that make it a more desirable choice for the
> logging back end.
> - Configuration Flexibility: The mapping of loggers to destinations (files, sockets etc.)
> can be completely specified in configuration. It is possible to do this with Java logging as
> well, however, configuration is a lot more restrictive. For instance, with Java logging all 
> log files must have names derived from the same pattern. For the namenode, log files could 
> be named with the pattern "%h/namenode%u.log" which would put log files in the user.home
> directory with names like namenode0.log etc. With Log4J it would be possible to configure
> the namenode to emit log files with different names, say heartbeats.log, namespace.log,
> clients.log etc. Configuration variables in Log4J can also have the values of system 
> properties embedded in them.
> - Takes wrappers into account: Log4J takes into account the possibility that an application
> may be invoking it via a wrapper, such as Apache commons logging. This is important because
> logging event objects must be able to infer the context of the logging call such as classname,
> methodname etc. Inferring context is a relatively expensive operation that involves creating
> an exception and examining the stack trace to find the frame just before the first frame 
> of the logging framework. It is therefore done lazily only when this information actually 
> needs to be logged. Log4J can be instructed to look for the frame corresponding to the wrapper
> class, Java logging cannot. In the case of Java logging this means that a) the bridge from 
> Apache commons logging is responsible for inferring the calling context and setting it in the 
> logging event and b) this inference has to be done on every logging call regardless of whether
> or not it is needed.
> - More handy features: Log4J has some handy features that Java logging doesn't. A couple
> of examples of these:
> a) Date based rolling of log files 
> b) Format control through configuration. Log4J has a PatternLayout class that can be 
> configured to generate logs with a user specified pattern. The logging format described
> above can be described as "%d{MM/dd/yyyy:HH:mm:SS} %c{2} %p %m". The format specifiers
> indicate that each log line should have the date and time followed by the logger name followed
> by the logging level or priority followed by the application generated message.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun  7 13:15:14 2006
Return-Path: 
 <hadoop-dev-return-1974-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 41959 invoked from network); 7 Jun 2006 13:15:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 13:15:14 -0000
Received: (qmail 5938 invoked by uid 500); 7 Jun 2006 13:15:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 5918 invoked by uid 500); 7 Jun 2006 13:15:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 5909 invoked by uid 99); 7 Jun 2006 13:15:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 06:15:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [80.64.182.137] (HELO mslinux.media-style.com) (80.64.182.137)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 06:15:10 -0700
Received: from localhost (localhost [127.0.0.1])
	by mslinux.media-style.com (Postfix) with ESMTP id B616914465E
	for <hadoop-dev@lucene.apache.org>; Wed,  7 Jun 2006 14:51:35 +0200 (CEST)
Received: from mslinux.media-style.com ([127.0.0.1])
	by localhost (mslinux.media-style.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 08657-07 for <hadoop-dev@lucene.apache.org>;
	Wed, 7 Jun 2006 14:51:35 +0200 (CEST)
Received: from [192.168.200.61] (unknown [80.64.182.137])
	by mslinux.media-style.com (Postfix) with ESMTP id 5D776144656
	for <hadoop-dev@lucene.apache.org>; Wed,  7 Jun 2006 14:51:35 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v746.2)
Content-Transfer-Encoding: 7bit
Message-Id: <9294A311-9E5A-44DC-BDFD-C63B30AEEC19@media-style.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: hadoop-dev@lucene.apache.org
From: Marko Bauhardt <mb@media-style.com>
Subject: hadoop-daemon.sh: tasktracker etc. does not stop on osx 
Date: Wed, 7 Jun 2006 15:14:52 +0200
X-Mailer: Apple Mail (2.746.2)
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at media-style.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi all,
the stopping of namenodes or datanodes etc. does not work correctly  
on os x system.
e.g.
bin/hadoop-daemon.sh stop namenode
no namenode to stop

The reason is, the "/proc" directory does not exists on os x. The  
using of the "ps" command could be solve this problem. This command  
works on os x and linux etc.
Make that sense?


Index: bin/hadoop-daemon.sh
===================================================================
--- bin/hadoop-daemon.sh        (revision 412219)
+++ bin/hadoop-daemon.sh        (working copy)
@@ -92,7 +92,9 @@
    (stop)
      if [ -f $pid ]; then
-      if [ -a /proc/`cat $pid` ]; then
+      procid=`cat $pid`
+      idcount=`ps -p $procid | wc -l`
+      if [ $idcount -eq 2 ]; then
          echo stopping $command
          kill `cat $pid`
        else



Marko


From MAILER-DAEMON Wed Jun  7 16:54:23 2006
Return-Path: 
 <hadoop-dev-return-1975-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 39813 invoked from network); 7 Jun 2006 16:54:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 16:54:23 -0000
Received: (qmail 30699 invoked by uid 500); 7 Jun 2006 16:54:16 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 30590 invoked by uid 500); 7 Jun 2006 16:54:16 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 30517 invoked by uid 99); 7 Jun 2006 16:54:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 09:54:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 09:54:14 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7AB7F7142D9
	for <hadoop-dev@lucene.apache.org>; Wed,  7 Jun 2006 16:53:12 +0000 (GMT)
Message-ID: <19846443.1149699192499.JavaMail.jira@brutus>
Date: Wed, 7 Jun 2006 16:53:12 +0000 (GMT+00:00)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-286) copyFromLocal throws
 LeaseExpiredException
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

copyFromLocal throws LeaseExpiredException
------------------------------------------

         Key: HADOOP-286
         URL: http://issues.apache.org/jira/browse/HADOOP-286
     Project: Hadoop
        Type: Bug

  Components: dfs  
    Versions: 0.3.0    
 Environment: redhar linux
    Reporter: Runping Qi



Loading local files to dfs through hadoop dfs -copyFromLocal failed due to the following exception:

copyFromLocal: org.apache.hadoop.dfs.LeaseExpiredException: No lease on output_crawled.1.txt
        at org.apache.hadoop.dfs.FSNamesystem.getAdditionalBlock(FSNamesystem.java:414)
        at org.apache.hadoop.dfs.NameNode.addBlock(NameNode.java:190)
        at sun.reflect.GeneratedMethodAccessor9.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:243)
        at org.apache.hadoop.ipc.Server$Handler.run(Server.java:231)


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun  7 17:02:10 2006
Return-Path: 
 <hadoop-dev-return-1976-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43157 invoked from network); 7 Jun 2006 17:02:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 17:02:10 -0000
Received: (qmail 46853 invoked by uid 500); 7 Jun 2006 17:02:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 46835 invoked by uid 500); 7 Jun 2006 17:02:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46826 invoked by uid 99); 7 Jun 2006 17:02:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 10:02:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [80.64.182.137] (HELO mslinux.media-style.com) (80.64.182.137)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 10:02:08 -0700
Received: from localhost (localhost [127.0.0.1])
	by mslinux.media-style.com (Postfix) with ESMTP id 3D410144671
	for <hadoop-dev@lucene.apache.org>; Wed,  7 Jun 2006 18:38:32 +0200 (CEST)
Received: from mslinux.media-style.com ([127.0.0.1])
	by localhost (mslinux.media-style.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 10621-04 for <hadoop-dev@lucene.apache.org>;
	Wed, 7 Jun 2006 18:38:32 +0200 (CEST)
Received: from [192.168.0.141] (unknown [80.64.182.137])
	by mslinux.media-style.com (Postfix) with ESMTP id 0D497144670
	for <hadoop-dev@lucene.apache.org>; Wed,  7 Jun 2006 18:38:32 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v750)
In-Reply-To: <4486055C.5020307@yahoo-inc.com>
References: <79433D67-1259-4A20-9B84-C703B96B4A91@media-style.com>
 <4486055C.5020307@yahoo-inc.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <B865213A-7620-4149-BEDD-A098027D8134@media-style.com>
Content-Transfer-Encoding: 7bit
From: Stefan Groschupf <sg@media-style.com>
Subject: Re: dfs incompatibility .3 and .4-dev?
Date: Wed, 7 Jun 2006 19:01:44 +0200
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.750)
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at media-style.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Konstantin,
> Could you give some more information about what happened to you.
> - what is your cluster size
9 datanode, 1 namenode.
> - amount of data
Total raw bytes: 6023680622592 (5609.98 Gb)
Used raw bytes: 2357053984804 (2195.17 Gb)

> - how long did dfs ran without restarting the name node before  
> upgrading
I would say 2 weeks.

>
>> we discussed the three  kinds of data looses, hardware, software  
>> or  human errors.
>> I would love to figure out what was my problem today. :)
>
> Looks like you are not alone :-(
Too bad that the other didn't report it earlier. :)

>
>>
>> Scenario:
>> + updated from hadoop .2.1 to .4.
>> + problems to get all datanodes started
>
> what was the problem with datanodes?
I don't think there was a real problem. I notice that the datanodes  
was not able to connect to the namenode.
Later one I just add a "sleep 5" into the dfs starting script after  
starteing the name node and that sloved the problem.
However at this time I updated, notice that problem, was thinking  
"ok, not working yet, lets wait another week", downgrading.

>
>> + downgrade to hadoop .3.1
>> + error message of incompatible dfs (I guess . already had started  
>> to  write to the log)
>
> What is the message?

Sorry I can not find the exception anymore in the logs. :-(
Something like "version conflict -1 vs -2" :-o Sorry didn't remember  
exactly.

> Thanks,

Thank you!

Stefan


From MAILER-DAEMON Wed Jun  7 17:25:34 2006
Return-Path: 
 <hadoop-dev-return-1977-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 49807 invoked from network); 7 Jun 2006 17:25:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 17:25:34 -0000
Received: (qmail 4195 invoked by uid 500); 7 Jun 2006 17:25:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 4157 invoked by uid 500); 7 Jun 2006 17:25:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 4148 invoked by uid 99); 7 Jun 2006 17:25:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 10:25:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 10:25:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 050B17142C9
	for <hadoop-dev@lucene.apache.org>; Wed,  7 Jun 2006 17:24:31 +0000 (GMT)
Message-ID: <2176305.1149701071017.JavaMail.jira@brutus>
Date: Wed, 7 Jun 2006 17:24:31 +0000 (GMT+00:00)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-285) Data nodes cannot re-join the cluster
 once connection is lost
In-Reply-To: <6190310.1149668849891.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-285?page=all ]

Hairong Kuang reassigned HADOOP-285:
------------------------------------

    Assign To: Hairong Kuang

> Data nodes cannot re-join the cluster once connection is lost
> -------------------------------------------------------------
>
>          Key: HADOOP-285
>          URL: http://issues.apache.org/jira/browse/HADOOP-285
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.3.0
>     Reporter: Konstantin Shvachko
>     Assignee: Hairong Kuang

>
> A data node looses connection to a name node and then tries to offerService() again.
> HADOOP-270 changes force it to start dataXceiveServer, which is already started and in this case
> throws IllegalThreadStateException, which goes on in a loop, and never reaches the heartbeat section.
> So the data node never re-joins the cluster, while from the out side it looks it's still running.
> This is another reason why we see missing data, and don't see failed data nodes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun  7 17:29:38 2006
Return-Path: 
 <hadoop-dev-return-1978-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52647 invoked from network); 7 Jun 2006 17:29:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 17:29:38 -0000
Received: (qmail 24311 invoked by uid 500); 7 Jun 2006 17:29:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24266 invoked by uid 500); 7 Jun 2006 17:29:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24256 invoked by uid 99); 7 Jun 2006 17:29:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 10:29:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 10:29:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1077C71429B
	for <hadoop-dev@lucene.apache.org>; Wed,  7 Jun 2006 17:28:31 +0000 (GMT)
Message-ID: <6525474.1149701311064.JavaMail.jira@brutus>
Date: Wed, 7 Jun 2006 17:28:31 +0000 (GMT+00:00)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-285) Data nodes cannot re-join the cluster
 once connection is lost
In-Reply-To: <6190310.1149668849891.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-285?page=all ]

Hairong Kuang updated HADOOP-285:
---------------------------------

    Attachment: datanode.patch

This patch starts the data receiver thread in "run" instead of "offerservice". So it will not be restarted after a connect is lost.

> Data nodes cannot re-join the cluster once connection is lost
> -------------------------------------------------------------
>
>          Key: HADOOP-285
>          URL: http://issues.apache.org/jira/browse/HADOOP-285
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.3.0
>     Reporter: Konstantin Shvachko
>     Assignee: Hairong Kuang
>  Attachments: datanode.patch
>
> A data node looses connection to a name node and then tries to offerService() again.
> HADOOP-270 changes force it to start dataXceiveServer, which is already started and in this case
> throws IllegalThreadStateException, which goes on in a loop, and never reaches the heartbeat section.
> So the data node never re-joins the cluster, while from the out side it looks it's still running.
> This is another reason why we see missing data, and don't see failed data nodes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun  7 18:12:42 2006
Return-Path: 
 <hadoop-dev-return-1979-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67599 invoked from network); 7 Jun 2006 18:12:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 18:12:42 -0000
Received: (qmail 5623 invoked by uid 500); 7 Jun 2006 18:12:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 5488 invoked by uid 500); 7 Jun 2006 18:12:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 5477 invoked by uid 99); 7 Jun 2006 18:12:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 11:12:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 11:12:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 713577142C8
	for <hadoop-dev@lucene.apache.org>; Wed,  7 Jun 2006 18:11:31 +0000 (GMT)
Message-ID: <2549420.1149703891459.JavaMail.jira@brutus>
Date: Wed, 7 Jun 2006 18:11:31 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-285) Data nodes cannot re-join the cluster
 once connection is lost
In-Reply-To: <6190310.1149668849891.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-285?page=all ]

Owen O'Malley updated HADOOP-285:
---------------------------------

    Fix Version: 0.3.2
       Priority: Blocker  (was: Major)

> Data nodes cannot re-join the cluster once connection is lost
> -------------------------------------------------------------
>
>          Key: HADOOP-285
>          URL: http://issues.apache.org/jira/browse/HADOOP-285
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.3.0
>     Reporter: Konstantin Shvachko
>     Assignee: Hairong Kuang
>     Priority: Blocker
>      Fix For: 0.3.2
>  Attachments: datanode.patch
>
> A data node looses connection to a name node and then tries to offerService() again.
> HADOOP-270 changes force it to start dataXceiveServer, which is already started and in this case
> throws IllegalThreadStateException, which goes on in a loop, and never reaches the heartbeat section.
> So the data node never re-joins the cluster, while from the out side it looks it's still running.
> This is another reason why we see missing data, and don't see failed data nodes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun  7 18:18:34 2006
Return-Path: 
 <hadoop-dev-return-1980-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 69185 invoked from network); 7 Jun 2006 18:18:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 18:18:34 -0000
Received: (qmail 17379 invoked by uid 500); 7 Jun 2006 18:18:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17358 invoked by uid 500); 7 Jun 2006 18:18:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17349 invoked by uid 99); 7 Jun 2006 18:18:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 11:18:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 11:18:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8E3D171429F
	for <hadoop-dev@lucene.apache.org>; Wed,  7 Jun 2006 18:17:30 +0000 (GMT)
Message-ID: <24223528.1149704250579.JavaMail.jira@brutus>
Date: Wed, 7 Jun 2006 18:17:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-240) namenode should not log failed mkdirs
 at warning level
In-Reply-To: <10933304.1148404889830.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-240?page=all ]
     
Doug Cutting resolved HADOOP-240:
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Hairong.

> namenode should not log failed mkdirs at warning level
> ------------------------------------------------------
>
>          Key: HADOOP-240
>          URL: http://issues.apache.org/jira/browse/HADOOP-240
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.2.1
>     Reporter: Hairong Kuang
>     Assignee: Hairong Kuang
>     Priority: Minor
>      Fix For: 0.3.2
>  Attachments: mkdir.patch, mkdir.patch, mkdir_new.patch
>
> when a namenode creates a directory, it also recursively tries to creates its parent directories. If they already exist, the lastSuccess is  false and the "error" is logged at the warning level.
> The right approach is to set the logging leve lower to fine or simply ignore the the "error".

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun  7 18:24:36 2006
Return-Path: 
 <hadoop-dev-return-1981-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 71022 invoked from network); 7 Jun 2006 18:24:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 18:24:36 -0000
Received: (qmail 24654 invoked by uid 500); 7 Jun 2006 18:24:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24634 invoked by uid 500); 7 Jun 2006 18:24:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24624 invoked by uid 99); 7 Jun 2006 18:24:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 11:24:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 11:24:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 201B77142C8
	for <hadoop-dev@lucene.apache.org>; Wed,  7 Jun 2006 18:23:32 +0000 (GMT)
Message-ID: <6748224.1149704612127.JavaMail.jira@brutus>
Date: Wed, 7 Jun 2006 18:23:32 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-277) Race condition in
 Configuration.getLocalPath()
In-Reply-To: <674337.1149556349857.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-277?page=comments#action_12415189 ] 

Doug Cutting commented on HADOOP-277:
-------------------------------------

This patch conflicts with HADOOP-240, which I just committed.  Can you please resolve this?  Thanks.

> Race condition in Configuration.getLocalPath()
> ----------------------------------------------
>
>          Key: HADOOP-277
>          URL: http://issues.apache.org/jira/browse/HADOOP-277
>      Project: Hadoop
>         Type: Bug

>     Versions: 0.3.1
>  Environment: linux, 64 bit, dual core, 4x400GB disk, 4GB RAM
>     Reporter: paul sutter
>     Assignee: Sameer Paranjpye
>      Fix For: 0.3.2
>  Attachments: hadoop-277.patch, hadoop-task_1_r_9.log, mkdir-p.patch.txt, mkdirs.patch
>
> (attached: a patch to fix the problem, and a logfile showing the problem occuring twice)
> There is a race condition in Configuration.java:
>        Path file = new Path(dirs[index], path);
>        Path dir = file.getParent();
>        if (fs.exists(dir) || fs.mkdirs(dir)) {
>          return file;
> If two threads simultaneously process this code with the same target directory, fs.exists() will return false, but from fs.mkdirs() only one of the two threads will return true. From the Java documentation:
>  "returns: true if and only if the directory was created, along with all necessary parent directories; false otherwise"
> That is, if the first thread successfully creates the directory, the second will not, and therefore return false, even though the directory exists.
> This was really happening. We use four temporary directories, and we had reducers failing all over the place with  bizarre impossible errors. I modified the ReduceTaskRunner to output the filename that it creates to find the problem, and the log output is below.
> Here you can see copies initiated for two files that hash to the same temp directory, simultaneously. map_4.out is created in the correct directory (/data2...), but map_15.out is created in the next directory (/data3...) becuase of this race condition. Minutes later, when the appender tries to locate the file, that race condition does not occur (the directory already exists), and the appender looks for the file map_15.out in the correct directory, where it does not exist.
> 060605 142414 task_0001_r_000009_1 Copying task_0001_m_000004_0 output from rmr05.
> 060605 142414 task_0001_r_000009_1 Copying task_0001_m_000015_0 output from rmr04.
> ...
> 060605 142416 task_0001_r_000009_1 done copying task_0001_m_000004_0 output from rmr05 into /data2/tmp/mapred/local/task_0001_r_000009_1/map_4.out
> ...
> 060605 142418 task_0001_r_000009_1 done copying task_0001_m_000015_0 output from rmr04 into /data3/tmp/mapred/local/task_0001_r_000009_1/map_15.out
> ...
> 060605 142531 task_0001_r_000009_1 0.31808624% reduce > append > /data2/tmp/mapred/local/task_0001_r_000009_1/map_4.out
> ...
> 060605 142725 task_0001_r_000009_1 java.io.FileNotFoundException: /data2/tmp/mapred/local/task_0001_r_000009_1/map_15.out

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun  7 19:08:43 2006
Return-Path: 
 <hadoop-dev-return-1982-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 89294 invoked from network); 7 Jun 2006 19:08:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 19:08:43 -0000
Received: (qmail 99451 invoked by uid 500); 7 Jun 2006 19:08:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 99433 invoked by uid 500); 7 Jun 2006 19:08:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 99424 invoked by uid 99); 7 Jun 2006 19:08:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 12:08:42 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.145.54.171] (HELO mrout1.yahoo.com) (216.145.54.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 12:08:40 -0700
Received: from [10.72.104.183] (enoughhot-lx.corp.yahoo.com [10.72.104.183])
	by mrout1.yahoo.com (8.13.6/8.13.4/y.out) with ESMTP id k57J676M076350
	for <hadoop-dev@lucene.apache.org>; Wed, 7 Jun 2006 12:06:07 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=message-id:date:from:user-agent:x-accept-language:
	mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
	b=CG2ZKPbhvBY0WOLYDDua/buSlOA9uhMu1kFglO7vH+BoNX31oR7YdjsZxKz6VcaF
Message-ID: <4487239F.6010106@yahoo-inc.com>
Date: Wed, 07 Jun 2006 12:06:07 -0700
From: Konstantin Shvachko <shv@yahoo-inc.com>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: dfs incompatibility .3 and .4-dev?
References: <79433D67-1259-4A20-9B84-C703B96B4A91@media-style.com>
 <4486055C.5020307@yahoo-inc.com>
 <B865213A-7620-4149-BEDD-A098027D8134@media-style.com>
In-Reply-To: <B865213A-7620-4149-BEDD-A098027D8134@media-style.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks Stefan.

I spend some time investigating the problem.
There are 3 of them actually.
1). At startup data nodes are now registering with the name node. If 
registering doesn't work,
because the name node is busy at the moment, which could easily be the 
case if it is loading
a two week long log, then the data node would just fail and won't start 
at all.
See HADOOP-282.
2). When the cluster is running and the name node gets busy, and the 
data node as the result
fails to connect to it, then the data node falls into an infinite loop 
doing nothing but throwing an
exception. So for the name node it is dead, since it is not sending any 
heartbeats.
See HADOOP-285.
3). People say that they have seen loss of recent data, while the old 
data is still present.
And this is happening when the cluster was brought down (for the 
upgrade), and restarted.
We know HADOOP-227 that logs/edits are accumulating as long as the 
cluster is running.
So if it was up for 2 weeks then the edits file is most probably huge. 
If it is corrupted then
the data is lost.
I could not reproduce that, just don't have any 2-week old edits files yet.
I thoroughly examined one cluster and found missing blocks on the nodes 
that pretended to be
up as in (2) above. Didn't see any data loss at all. I think large edits 
files should be further
investigated.

There are patches fixing HADOOP-282 and HADOOP-285. We do not have patch
for HADOOP-227 yet, so people need to restart the name node (just the 
name node) depending
on the activity on the cluster, namely depending on the size of the 
edits file.


Stefan Groschupf wrote:

> Hi Konstantin,
>
>> Could you give some more information about what happened to you.
>> - what is your cluster size
>
> 9 datanode, 1 namenode.
>
>> - amount of data
>
> Total raw bytes: 6023680622592 (5609.98 Gb)
> Used raw bytes: 2357053984804 (2195.17 Gb)
>
>> - how long did dfs ran without restarting the name node before  
>> upgrading
>
> I would say 2 weeks.
>
>>> I would love to figure out what was my problem today. :)
>>
>> we discussed the three  kinds of data looses, hardware, software  or  
>> human errors.
>>
>> Looks like you are not alone :-(
>
> Too bad that the other didn't report it earlier. :)

Everything was happening in the same time.

>>> + updated from hadoop .2.1 to .4.
>>> + problems to get all datanodes started
>>
>>
>> what was the problem with datanodes?
>
> Scenario:
> I don't think there was a real problem. I notice that the datanodes  
> was not able to connect to the namenode.
> Later one I just add a "sleep 5" into the dfs starting script after  
> starteing the name node and that sloved the problem.

That is right, we did the same.

> However at this time I updated, notice that problem, was thinking  
> "ok, not working yet, lets wait another week", downgrading.

>>> + downgrade to hadoop .3.1
>>> + error message of incompatible dfs (I guess . already had started  
>>> to  write to the log)
>>
>>
>> What is the message?
>
>
> Sorry I can not find the exception anymore in the logs. :-(
> Something like "version conflict -1 vs -2" :-o Sorry didn't remember  
> exactly.

Yes. You are running the old version (-1) code that would not accept the 
"future" version (-2) images.
The image was converted to v. -2 when you tried to run the upgraded hadoop.

Regards,
Konstantin

From MAILER-DAEMON Wed Jun  7 19:20:38 2006
Return-Path: 
 <hadoop-dev-return-1983-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96738 invoked from network); 7 Jun 2006 19:20:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 19:20:38 -0000
Received: (qmail 19101 invoked by uid 500); 7 Jun 2006 19:20:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 19025 invoked by uid 500); 7 Jun 2006 19:20:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 18972 invoked by uid 99); 7 Jun 2006 19:20:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 12:20:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 12:20:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 77E9F7142C8
	for <hadoop-dev@lucene.apache.org>; Wed,  7 Jun 2006 19:19:31 +0000 (GMT)
Message-ID: <8027194.1149707971488.JavaMail.jira@brutus>
Date: Wed, 7 Jun 2006 19:19:31 +0000 (GMT+00:00)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-277) Race condition in
 Configuration.getLocalPath()
In-Reply-To: <674337.1149556349857.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-277?page=all ]

Sameer Paranjpye updated HADOOP-277:
------------------------------------

    Attachment: mkdir-p2.patch.txt

Attached new patch.

> Race condition in Configuration.getLocalPath()
> ----------------------------------------------
>
>          Key: HADOOP-277
>          URL: http://issues.apache.org/jira/browse/HADOOP-277
>      Project: Hadoop
>         Type: Bug

>     Versions: 0.3.1
>  Environment: linux, 64 bit, dual core, 4x400GB disk, 4GB RAM
>     Reporter: paul sutter
>     Assignee: Sameer Paranjpye
>      Fix For: 0.3.2
>  Attachments: hadoop-277.patch, hadoop-task_1_r_9.log, mkdir-p.patch.txt, mkdir-p2.patch.txt, mkdirs.patch
>
> (attached: a patch to fix the problem, and a logfile showing the problem occuring twice)
> There is a race condition in Configuration.java:
>        Path file = new Path(dirs[index], path);
>        Path dir = file.getParent();
>        if (fs.exists(dir) || fs.mkdirs(dir)) {
>          return file;
> If two threads simultaneously process this code with the same target directory, fs.exists() will return false, but from fs.mkdirs() only one of the two threads will return true. From the Java documentation:
>  "returns: true if and only if the directory was created, along with all necessary parent directories; false otherwise"
> That is, if the first thread successfully creates the directory, the second will not, and therefore return false, even though the directory exists.
> This was really happening. We use four temporary directories, and we had reducers failing all over the place with  bizarre impossible errors. I modified the ReduceTaskRunner to output the filename that it creates to find the problem, and the log output is below.
> Here you can see copies initiated for two files that hash to the same temp directory, simultaneously. map_4.out is created in the correct directory (/data2...), but map_15.out is created in the next directory (/data3...) becuase of this race condition. Minutes later, when the appender tries to locate the file, that race condition does not occur (the directory already exists), and the appender looks for the file map_15.out in the correct directory, where it does not exist.
> 060605 142414 task_0001_r_000009_1 Copying task_0001_m_000004_0 output from rmr05.
> 060605 142414 task_0001_r_000009_1 Copying task_0001_m_000015_0 output from rmr04.
> ...
> 060605 142416 task_0001_r_000009_1 done copying task_0001_m_000004_0 output from rmr05 into /data2/tmp/mapred/local/task_0001_r_000009_1/map_4.out
> ...
> 060605 142418 task_0001_r_000009_1 done copying task_0001_m_000015_0 output from rmr04 into /data3/tmp/mapred/local/task_0001_r_000009_1/map_15.out
> ...
> 060605 142531 task_0001_r_000009_1 0.31808624% reduce > append > /data2/tmp/mapred/local/task_0001_r_000009_1/map_4.out
> ...
> 060605 142725 task_0001_r_000009_1 java.io.FileNotFoundException: /data2/tmp/mapred/local/task_0001_r_000009_1/map_15.out

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun  7 19:31:35 2006
Return-Path: 
 <hadoop-dev-return-1984-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 6562 invoked from network); 7 Jun 2006 19:31:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 19:31:35 -0000
Received: (qmail 42948 invoked by uid 500); 7 Jun 2006 19:31:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 42811 invoked by uid 500); 7 Jun 2006 19:31:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 42802 invoked by uid 99); 7 Jun 2006 19:31:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 12:31:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 12:31:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 63E8A71428E
	for <hadoop-dev@lucene.apache.org>; Wed,  7 Jun 2006 19:30:31 +0000 (GMT)
Message-ID: <4011192.1149708631406.JavaMail.jira@brutus>
Date: Wed, 7 Jun 2006 19:30:31 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-285) Data nodes cannot re-join the cluster
 once connection is lost
In-Reply-To: <6190310.1149668849891.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-285?page=all ]
     
Doug Cutting resolved HADOOP-285:
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Owen!

> Data nodes cannot re-join the cluster once connection is lost
> -------------------------------------------------------------
>
>          Key: HADOOP-285
>          URL: http://issues.apache.org/jira/browse/HADOOP-285
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.3.0
>     Reporter: Konstantin Shvachko
>     Assignee: Hairong Kuang
>     Priority: Blocker
>      Fix For: 0.3.2
>  Attachments: datanode.patch
>
> A data node looses connection to a name node and then tries to offerService() again.
> HADOOP-270 changes force it to start dataXceiveServer, which is already started and in this case
> throws IllegalThreadStateException, which goes on in a loop, and never reaches the heartbeat section.
> So the data node never re-joins the cluster, while from the out side it looks it's still running.
> This is another reason why we see missing data, and don't see failed data nodes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun  7 19:37:35 2006
Return-Path: 
 <hadoop-dev-return-1985-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9333 invoked from network); 7 Jun 2006 19:37:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 19:37:35 -0000
Received: (qmail 50885 invoked by uid 500); 7 Jun 2006 19:37:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 50749 invoked by uid 500); 7 Jun 2006 19:37:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 50740 invoked by uid 99); 7 Jun 2006 19:37:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 12:37:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 12:37:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AB3547142C8
	for <hadoop-dev@lucene.apache.org>; Wed,  7 Jun 2006 19:36:31 +0000 (GMT)
Message-ID: <26873732.1149708991698.JavaMail.jira@brutus>
Date: Wed, 7 Jun 2006 19:36:31 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-277) Race condition in
 Configuration.getLocalPath()
In-Reply-To: <674337.1149556349857.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-277?page=all ]
     
Doug Cutting resolved HADOOP-277:
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Sameer!

> Race condition in Configuration.getLocalPath()
> ----------------------------------------------
>
>          Key: HADOOP-277
>          URL: http://issues.apache.org/jira/browse/HADOOP-277
>      Project: Hadoop
>         Type: Bug

>     Versions: 0.3.1
>  Environment: linux, 64 bit, dual core, 4x400GB disk, 4GB RAM
>     Reporter: paul sutter
>     Assignee: Sameer Paranjpye
>      Fix For: 0.3.2
>  Attachments: hadoop-277.patch, hadoop-task_1_r_9.log, mkdir-p.patch.txt, mkdir-p2.patch.txt, mkdirs.patch
>
> (attached: a patch to fix the problem, and a logfile showing the problem occuring twice)
> There is a race condition in Configuration.java:
>        Path file = new Path(dirs[index], path);
>        Path dir = file.getParent();
>        if (fs.exists(dir) || fs.mkdirs(dir)) {
>          return file;
> If two threads simultaneously process this code with the same target directory, fs.exists() will return false, but from fs.mkdirs() only one of the two threads will return true. From the Java documentation:
>  "returns: true if and only if the directory was created, along with all necessary parent directories; false otherwise"
> That is, if the first thread successfully creates the directory, the second will not, and therefore return false, even though the directory exists.
> This was really happening. We use four temporary directories, and we had reducers failing all over the place with  bizarre impossible errors. I modified the ReduceTaskRunner to output the filename that it creates to find the problem, and the log output is below.
> Here you can see copies initiated for two files that hash to the same temp directory, simultaneously. map_4.out is created in the correct directory (/data2...), but map_15.out is created in the next directory (/data3...) becuase of this race condition. Minutes later, when the appender tries to locate the file, that race condition does not occur (the directory already exists), and the appender looks for the file map_15.out in the correct directory, where it does not exist.
> 060605 142414 task_0001_r_000009_1 Copying task_0001_m_000004_0 output from rmr05.
> 060605 142414 task_0001_r_000009_1 Copying task_0001_m_000015_0 output from rmr04.
> ...
> 060605 142416 task_0001_r_000009_1 done copying task_0001_m_000004_0 output from rmr05 into /data2/tmp/mapred/local/task_0001_r_000009_1/map_4.out
> ...
> 060605 142418 task_0001_r_000009_1 done copying task_0001_m_000015_0 output from rmr04 into /data3/tmp/mapred/local/task_0001_r_000009_1/map_15.out
> ...
> 060605 142531 task_0001_r_000009_1 0.31808624% reduce > append > /data2/tmp/mapred/local/task_0001_r_000009_1/map_4.out
> ...
> 060605 142725 task_0001_r_000009_1 java.io.FileNotFoundException: /data2/tmp/mapred/local/task_0001_r_000009_1/map_15.out

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun  7 20:38:34 2006
Return-Path: 
 <hadoop-dev-return-1986-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34941 invoked from network); 7 Jun 2006 20:38:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 20:38:34 -0000
Received: (qmail 88606 invoked by uid 500); 7 Jun 2006 20:38:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 88578 invoked by uid 500); 7 Jun 2006 20:38:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88569 invoked by uid 99); 7 Jun 2006 20:38:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 13:38:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 13:38:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 92A8B71429F
	for <hadoop-dev@lucene.apache.org>; Wed,  7 Jun 2006 20:37:30 +0000 (GMT)
Message-ID: <51736.1149712650597.JavaMail.jira@brutus>
Date: Wed, 7 Jun 2006 20:37:30 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-282) the datanode crashes if it starts
 before the namenode
In-Reply-To: <19002384.1149635309907.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-282?page=all ]

Owen O'Malley updated HADOOP-282:
---------------------------------

    Attachment: data-node-first-2.patch

Ok, this patch fixes the problem without the bad side effects that the old patch had. It passes the regressions and I'm currently installing this on my 200 node cluster. I'll post a message when I can tell how it goes.

> the datanode crashes if it starts before the namenode
> -----------------------------------------------------
>
>          Key: HADOOP-282
>          URL: http://issues.apache.org/jira/browse/HADOOP-282
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.3.1
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>     Priority: Critical
>      Fix For: 0.3.2
>  Attachments: data-node-first-2.patch, data-node-first.patch
>
> If the datanode tries to register before the namenode is offering service, it crashes with a uncaught exception.
> java.net.ConnectE
> xception: Connection refused
>         at java.net.PlainSocketImpl.socketConnect(Native Method)
>         at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:333)
>         at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:195)
>         at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:182)
>         at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
>         at java.net.Socket.connect(Socket.java:507)
>         at java.net.Socket.connect(Socket.java:457)
>         at java.net.Socket.<init>(Socket.java:365)
>         at java.net.Socket.<init>(Socket.java:207)
>         at org.apache.hadoop.ipc.Client$Connection.<init>(Client.java:112)
>         at org.apache.hadoop.ipc.Client.getConnection(Client.java:351)
>         at org.apache.hadoop.ipc.Client.call(Client.java:289)
>         at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:150)
>         at org.apache.hadoop.dfs.$Proxy0.register(Unknown Source)
>         at org.apache.hadoop.dfs.DataNode.register(DataNode.java:176)
>         at org.apache.hadoop.dfs.DataNode.<init>(DataNode.java:109)
>         at org.apache.hadoop.dfs.DataNode.makeInstanceForDir(DataNode.java:892)
>         at org.apache.hadoop.dfs.DataNode.run(DataNode.java:846)
>         at org.apache.hadoop.dfs.DataNode.runAndWait(DataNode.java:862)
>         at org.apache.hadoop.dfs.DataNode.main(DataNode.java:917)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun  7 21:10:35 2006
Return-Path: 
 <hadoop-dev-return-1987-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46026 invoked from network); 7 Jun 2006 21:10:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 21:10:35 -0000
Received: (qmail 65209 invoked by uid 500); 7 Jun 2006 21:10:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 65070 invoked by uid 500); 7 Jun 2006 21:10:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 65054 invoked by uid 99); 7 Jun 2006 21:10:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 14:10:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 14:10:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1634B71429F
	for <hadoop-dev@lucene.apache.org>; Wed,  7 Jun 2006 21:09:31 +0000 (GMT)
Message-ID: <13003737.1149714571087.JavaMail.jira@brutus>
Date: Wed, 7 Jun 2006 21:09:31 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-282) the datanode crashes if it starts
 before the namenode
In-Reply-To: <19002384.1149635309907.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-282?page=all ]
     
Doug Cutting resolved HADOOP-282:
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks!

> the datanode crashes if it starts before the namenode
> -----------------------------------------------------
>
>          Key: HADOOP-282
>          URL: http://issues.apache.org/jira/browse/HADOOP-282
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.3.1
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>     Priority: Critical
>      Fix For: 0.3.2
>  Attachments: data-node-first-2.patch, data-node-first.patch
>
> If the datanode tries to register before the namenode is offering service, it crashes with a uncaught exception.
> java.net.ConnectE
> xception: Connection refused
>         at java.net.PlainSocketImpl.socketConnect(Native Method)
>         at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:333)
>         at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:195)
>         at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:182)
>         at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
>         at java.net.Socket.connect(Socket.java:507)
>         at java.net.Socket.connect(Socket.java:457)
>         at java.net.Socket.<init>(Socket.java:365)
>         at java.net.Socket.<init>(Socket.java:207)
>         at org.apache.hadoop.ipc.Client$Connection.<init>(Client.java:112)
>         at org.apache.hadoop.ipc.Client.getConnection(Client.java:351)
>         at org.apache.hadoop.ipc.Client.call(Client.java:289)
>         at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:150)
>         at org.apache.hadoop.dfs.$Proxy0.register(Unknown Source)
>         at org.apache.hadoop.dfs.DataNode.register(DataNode.java:176)
>         at org.apache.hadoop.dfs.DataNode.<init>(DataNode.java:109)
>         at org.apache.hadoop.dfs.DataNode.makeInstanceForDir(DataNode.java:892)
>         at org.apache.hadoop.dfs.DataNode.run(DataNode.java:846)
>         at org.apache.hadoop.dfs.DataNode.runAndWait(DataNode.java:862)
>         at org.apache.hadoop.dfs.DataNode.main(DataNode.java:917)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun  7 21:42:47 2006
Return-Path: 
 <hadoop-dev-return-1988-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57859 invoked from network); 7 Jun 2006 21:42:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 21:42:47 -0000
Received: (qmail 36630 invoked by uid 500); 7 Jun 2006 21:42:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 36580 invoked by uid 500); 7 Jun 2006 21:42:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 36542 invoked by uid 99); 7 Jun 2006 21:42:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 14:42:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 14:42:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D8AA571429F
	for <hadoop-dev@lucene.apache.org>; Wed,  7 Jun 2006 21:41:29 +0000 (GMT)
Message-ID: <30420683.1149716489884.JavaMail.jira@brutus>
Date: Wed, 7 Jun 2006 21:41:29 +0000 (GMT+00:00)
From: "Benjamin Reed (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-287) Speed up SequenceFile sort with memory
 reduction
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Speed up SequenceFile sort with memory reduction
------------------------------------------------

         Key: HADOOP-287
         URL: http://issues.apache.org/jira/browse/HADOOP-287
     Project: Hadoop
        Type: Improvement

  Components: io  
    Versions: 0.3.2    
    Reporter: Benjamin Reed
 Attachments: zoom-sort.patch

I replaced the merge sort with a quick sort and it yielded approx 30% improvement in sort time. It also reduced the memory requirement for sorting because the sort is done in place.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun  7 21:42:48 2006
Return-Path: 
 <hadoop-dev-return-1989-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57878 invoked from network); 7 Jun 2006 21:42:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 21:42:48 -0000
Received: (qmail 36904 invoked by uid 500); 7 Jun 2006 21:42:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 36855 invoked by uid 500); 7 Jun 2006 21:42:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 36708 invoked by uid 99); 7 Jun 2006 21:42:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 14:42:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 14:42:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B3E867142A1
	for <hadoop-dev@lucene.apache.org>; Wed,  7 Jun 2006 21:41:30 +0000 (GMT)
Message-ID: <25848476.1149716490734.JavaMail.jira@brutus>
Date: Wed, 7 Jun 2006 21:41:30 +0000 (GMT+00:00)
From: "Benjamin Reed (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-287) Speed up SequenceFile sort with memory
 reduction
In-Reply-To: <30420683.1149716489884.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-287?page=all ]

Benjamin Reed updated HADOOP-287:
---------------------------------

    Attachment: zoom-sort.patch

> Speed up SequenceFile sort with memory reduction
> ------------------------------------------------
>
>          Key: HADOOP-287
>          URL: http://issues.apache.org/jira/browse/HADOOP-287
>      Project: Hadoop
>         Type: Improvement

>   Components: io
>     Versions: 0.3.2
>     Reporter: Benjamin Reed
>  Attachments: zoom-sort.patch
>
> I replaced the merge sort with a quick sort and it yielded approx 30% improvement in sort time. It also reduced the memory requirement for sorting because the sort is done in place.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun  7 22:09:52 2006
Return-Path: 
 <hadoop-dev-return-1990-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67475 invoked from network); 7 Jun 2006 22:09:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 22:09:52 -0000
Received: (qmail 93740 invoked by uid 500); 7 Jun 2006 22:09:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 93699 invoked by uid 500); 7 Jun 2006 22:09:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 93690 invoked by uid 99); 7 Jun 2006 22:09:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 15:09:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [74.0.0.77] (HELO linuxfly.dragonflymc.com) (74.0.0.77)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 15:09:50 -0700
Received: from [192.168.1.246] (unknown [63.133.162.98])
	by linuxfly.dragonflymc.com (Postfix) with ESMTP id E7AE0C2006B
	for <hadoop-dev@lucene.apache.org>; Wed,  7 Jun 2006 17:10:28 -0500 (CDT)
Message-ID: <44874E96.5070902@dragonflymc.com>
Date: Wed, 07 Jun 2006 17:09:26 -0500
From: Dennis Kubes <nutch-dev@dragonflymc.com>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: dfs incompatibility .3 and .4-dev?
References: <79433D67-1259-4A20-9B84-C703B96B4A91@media-style.com>
 <4486055C.5020307@yahoo-inc.com>
 <B865213A-7620-4149-BEDD-A098027D8134@media-style.com>
 <4487239F.6010106@yahoo-inc.com>
In-Reply-To: <4487239F.6010106@yahoo-inc.com>
Content-Type: multipart/alternative;
 boundary="------------000507050000060802080309"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--------------000507050000060802080309
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit

I don't know if this is the same problem or not but here is what I am 
experiencing.

I have an 11 node cluster deployed a fresh nutch install with 3.1.  
Startup completed fine.  Filesystem healthy.  Performed 1st inject, 
generate, fetch for 1000 urls.  Filesystem intact.  Performed 2nd 
inject, generate, fetch for 1000 urls.  Filesystem healthy. Merged 
crawldbs.  Filesystem healthy.  Merged segments.  Filesystem healthy.  
Inverted links. Healthy.  Indexed.  Healthy.  Performed searches. 
Healthy.  Now here is where it gets interested.  Shutdown all servers 
via stop-all.sh.  Started all server via start-all.sh.  Filesystem 
reports healthy.  Performed inject and generate of 1000 urls.  
Filesystem reports healthy.  Performed fetch of the new segments and get 
errors below and full corrupted filesystem (both new segments and old data).

java.io.IOException: Could not obtain block: blk_6625125900957460239 file=/user/phoenix/temp/segments1/20060607165425/crawl_generate/part-00006 offset=0
	at org.apache.hadoop.dfs.DFSClient$DFSInputStream.blockSeekTo(DFSClient.java:529)
	at org.apache.hadoop.dfs.DFSClient$DFSInputStream.read(DFSClient.java:638)
	at org.apache.hadoop.fs.FSDataInputStream$Checker.read(FSDataInputStream.java:84)
	at org.apache.hadoop.fs.FSDataInputStream$PositionCache.read(FSDataInputStream.java:159)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
	at java.io.BufferedInputStream.read1(BufferedInputStream.java:256)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:313)
	at java.io.DataInputStream.readFully(DataInputStream.java:176)
	at java.io.DataInputStream.readFully(DataInputStream.java:152)
	at org.apache.hadoop.io.SequenceFile$Reader.init(SequenceFile.java:263)
	at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:247)
	at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:237)
	at org.apache.hadoop.mapred.SequenceFileRecordReader.(SequenceFileRecordReader.java:36)
	at org.apache.hadoop.mapred.SequenceFileInputFormat.getRecordReader(SequenceFileInputFormat.java:53)
	at org.apache.hadoop.mapred.MapTask.run(MapTask.java:105)
	at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:847)

Hope this helps in tracking down the problem if it is even the same problem.

Dennis

Konstantin Shvachko wrote:
> Thanks Stefan.
>
> I spend some time investigating the problem.
> There are 3 of them actually.
> 1). At startup data nodes are now registering with the name node. If 
> registering doesn't work,
> because the name node is busy at the moment, which could easily be the 
> case if it is loading
> a two week long log, then the data node would just fail and won't 
> start at all.
> See HADOOP-282.
> 2). When the cluster is running and the name node gets busy, and the 
> data node as the result
> fails to connect to it, then the data node falls into an infinite loop 
> doing nothing but throwing an
> exception. So for the name node it is dead, since it is not sending 
> any heartbeats.
> See HADOOP-285.
> 3). People say that they have seen loss of recent data, while the old 
> data is still present.
> And this is happening when the cluster was brought down (for the 
> upgrade), and restarted.
> We know HADOOP-227 that logs/edits are accumulating as long as the 
> cluster is running.
> So if it was up for 2 weeks then the edits file is most probably huge. 
> If it is corrupted then
> the data is lost.
> I could not reproduce that, just don't have any 2-week old edits files 
> yet.
> I thoroughly examined one cluster and found missing blocks on the 
> nodes that pretended to be
> up as in (2) above. Didn't see any data loss at all. I think large 
> edits files should be further
> investigated.
>
> There are patches fixing HADOOP-282 and HADOOP-285. We do not have patch
> for HADOOP-227 yet, so people need to restart the name node (just the 
> name node) depending
> on the activity on the cluster, namely depending on the size of the 
> edits file.
>
>
> Stefan Groschupf wrote:
>
>> Hi Konstantin,
>>
>>> Could you give some more information about what happened to you.
>>> - what is your cluster size
>>
>> 9 datanode, 1 namenode.
>>
>>> - amount of data
>>
>> Total raw bytes: 6023680622592 (5609.98 Gb)
>> Used raw bytes: 2357053984804 (2195.17 Gb)
>>
>>> - how long did dfs ran without restarting the name node before  
>>> upgrading
>>
>> I would say 2 weeks.
>>
>>>> I would love to figure out what was my problem today. :)
>>>
>>> we discussed the three  kinds of data looses, hardware, software  
>>> or  human errors.
>>>
>>> Looks like you are not alone :-(
>>
>> Too bad that the other didn't report it earlier. :)
>
> Everything was happening in the same time.
>
>>>> + updated from hadoop .2.1 to .4.
>>>> + problems to get all datanodes started
>>>
>>>
>>> what was the problem with datanodes?
>>
>> Scenario:
>> I don't think there was a real problem. I notice that the datanodes  
>> was not able to connect to the namenode.
>> Later one I just add a "sleep 5" into the dfs starting script after  
>> starteing the name node and that sloved the problem.
>
> That is right, we did the same.
>
>> However at this time I updated, notice that problem, was thinking  
>> "ok, not working yet, lets wait another week", downgrading.
>
>>>> + downgrade to hadoop .3.1
>>>> + error message of incompatible dfs (I guess . already had started  
>>>> to  write to the log)
>>>
>>>
>>> What is the message?
>>
>>
>> Sorry I can not find the exception anymore in the logs. :-(
>> Something like "version conflict -1 vs -2" :-o Sorry didn't remember  
>> exactly.
>
> Yes. You are running the old version (-1) code that would not accept 
> the "future" version (-2) images.
> The image was converted to v. -2 when you tried to run the upgraded 
> hadoop.
>
> Regards,
> Konstantin

--------------000507050000060802080309--

From MAILER-DAEMON Wed Jun  7 22:13:38 2006
Return-Path: 
 <hadoop-dev-return-1991-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 69316 invoked from network); 7 Jun 2006 22:13:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 22:13:38 -0000
Received: (qmail 4513 invoked by uid 500); 7 Jun 2006 22:13:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 4414 invoked by uid 500); 7 Jun 2006 22:13:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 4182 invoked by uid 99); 7 Jun 2006 22:13:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 15:13:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 15:13:35 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 093A67142CE
	for <hadoop-dev@lucene.apache.org>; Wed,  7 Jun 2006 22:12:33 +0000 (GMT)
Message-ID: <16711771.1149718353034.JavaMail.jira@brutus>
Date: Wed, 7 Jun 2006 22:12:33 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-287) Speed up SequenceFile sort with
 memory reduction
In-Reply-To: <30420683.1149716489884.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-287?page=comments#action_12415223 ] 

Doug Cutting commented on HADOOP-287:
-------------------------------------

This looks good, but it doesn't pass unit tests any longer.  In particular, the following fails for me:

ant -Dtestcase=TestSequenceFile test

This results in something like the following for me:

java.lang.RuntimeException: wrong key at 2838
	at org.apache.hadoop.io.TestSequenceFile.checkSort(TestSequenceFile.java:146)
	at org.apache.hadoop.io.TestSequenceFile.testSequenceFile(TestSequenceFile.java:53)


> Speed up SequenceFile sort with memory reduction
> ------------------------------------------------
>
>          Key: HADOOP-287
>          URL: http://issues.apache.org/jira/browse/HADOOP-287
>      Project: Hadoop
>         Type: Improvement

>   Components: io
>     Versions: 0.3.2
>     Reporter: Benjamin Reed
>  Attachments: zoom-sort.patch
>
> I replaced the merge sort with a quick sort and it yielded approx 30% improvement in sort time. It also reduced the memory requirement for sorting because the sort is done in place.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun  7 22:22:19 2006
Return-Path: 
 <hadoop-dev-return-1992-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75534 invoked from network); 7 Jun 2006 22:22:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 22:22:19 -0000
Received: (qmail 25529 invoked by uid 500); 7 Jun 2006 22:22:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 25508 invoked by uid 500); 7 Jun 2006 22:22:18 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 25499 invoked by uid 99); 7 Jun 2006 22:22:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 15:22:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [74.0.0.77] (HELO linuxfly.dragonflymc.com) (74.0.0.77)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 15:22:17 -0700
Received: from [192.168.1.246] (unknown [63.133.162.98])
	by linuxfly.dragonflymc.com (Postfix) with ESMTP id 2E30DC2006B
	for <hadoop-dev@lucene.apache.org>; Wed,  7 Jun 2006 17:22:56 -0500 (CDT)
Message-ID: <44875182.8000201@dragonflymc.com>
Date: Wed, 07 Jun 2006 17:21:54 -0500
From: Dennis Kubes <nutch-dev@dragonflymc.com>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: dfs incompatibility .3 and .4-dev?
References: <79433D67-1259-4A20-9B84-C703B96B4A91@media-style.com>
 <4486055C.5020307@yahoo-inc.com>
 <B865213A-7620-4149-BEDD-A098027D8134@media-style.com>
 <4487239F.6010106@yahoo-inc.com> <44874E96.5070902@dragonflymc.com>
In-Reply-To: <44874E96.5070902@dragonflymc.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Another interesting thing is that every single file is corrupt and 
missing exactly one block.

Dennis Kubes wrote:
> I don't know if this is the same problem or not but here is what I am 
> experiencing.
>
> I have an 11 node cluster deployed a fresh nutch install with 3.1.  
> Startup completed fine.  Filesystem healthy.  Performed 1st inject, 
> generate, fetch for 1000 urls.  Filesystem intact.  Performed 2nd 
> inject, generate, fetch for 1000 urls.  Filesystem healthy. Merged 
> crawldbs.  Filesystem healthy.  Merged segments.  Filesystem healthy.  
> Inverted links. Healthy.  Indexed.  Healthy.  Performed searches. 
> Healthy.  Now here is where it gets interested.  Shutdown all servers 
> via stop-all.sh.  Started all server via start-all.sh.  Filesystem 
> reports healthy.  Performed inject and generate of 1000 urls.  
> Filesystem reports healthy.  Performed fetch of the new segments and 
> get errors below and full corrupted filesystem (both new segments and 
> old data).
>
> java.io.IOException: Could not obtain block: blk_6625125900957460239 
> file=/user/phoenix/temp/segments1/20060607165425/crawl_generate/part-00006 
> offset=0
>     at 
> org.apache.hadoop.dfs.DFSClient$DFSInputStream.blockSeekTo(DFSClient.java:529) 
>
>     at 
> org.apache.hadoop.dfs.DFSClient$DFSInputStream.read(DFSClient.java:638)
>     at 
> org.apache.hadoop.fs.FSDataInputStream$Checker.read(FSDataInputStream.java:84) 
>
>     at 
> org.apache.hadoop.fs.FSDataInputStream$PositionCache.read(FSDataInputStream.java:159) 
>
>     at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
>     at java.io.BufferedInputStream.read1(BufferedInputStream.java:256)
>     at java.io.BufferedInputStream.read(BufferedInputStream.java:313)
>     at java.io.DataInputStream.readFully(DataInputStream.java:176)
>     at java.io.DataInputStream.readFully(DataInputStream.java:152)
>     at 
> org.apache.hadoop.io.SequenceFile$Reader.init(SequenceFile.java:263)
>     at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:247)
>     at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:237)
>     at 
> org.apache.hadoop.mapred.SequenceFileRecordReader.(SequenceFileRecordReader.java:36) 
>
>     at 
> org.apache.hadoop.mapred.SequenceFileInputFormat.getRecordReader(SequenceFileInputFormat.java:53) 
>
>     at org.apache.hadoop.mapred.MapTask.run(MapTask.java:105)
>     at 
> org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:847)
>
> Hope this helps in tracking down the problem if it is even the same 
> problem.
>
> Dennis
>
> Konstantin Shvachko wrote:
>> Thanks Stefan.
>>
>> I spend some time investigating the problem.
>> There are 3 of them actually.
>> 1). At startup data nodes are now registering with the name node. If 
>> registering doesn't work,
>> because the name node is busy at the moment, which could easily be 
>> the case if it is loading
>> a two week long log, then the data node would just fail and won't 
>> start at all.
>> See HADOOP-282.
>> 2). When the cluster is running and the name node gets busy, and the 
>> data node as the result
>> fails to connect to it, then the data node falls into an infinite 
>> loop doing nothing but throwing an
>> exception. So for the name node it is dead, since it is not sending 
>> any heartbeats.
>> See HADOOP-285.
>> 3). People say that they have seen loss of recent data, while the old 
>> data is still present.
>> And this is happening when the cluster was brought down (for the 
>> upgrade), and restarted.
>> We know HADOOP-227 that logs/edits are accumulating as long as the 
>> cluster is running.
>> So if it was up for 2 weeks then the edits file is most probably 
>> huge. If it is corrupted then
>> the data is lost.
>> I could not reproduce that, just don't have any 2-week old edits 
>> files yet.
>> I thoroughly examined one cluster and found missing blocks on the 
>> nodes that pretended to be
>> up as in (2) above. Didn't see any data loss at all. I think large 
>> edits files should be further
>> investigated.
>>
>> There are patches fixing HADOOP-282 and HADOOP-285. We do not have patch
>> for HADOOP-227 yet, so people need to restart the name node (just the 
>> name node) depending
>> on the activity on the cluster, namely depending on the size of the 
>> edits file.
>>
>>
>> Stefan Groschupf wrote:
>>
>>> Hi Konstantin,
>>>
>>>> Could you give some more information about what happened to you.
>>>> - what is your cluster size
>>>
>>> 9 datanode, 1 namenode.
>>>
>>>> - amount of data
>>>
>>> Total raw bytes: 6023680622592 (5609.98 Gb)
>>> Used raw bytes: 2357053984804 (2195.17 Gb)
>>>
>>>> - how long did dfs ran without restarting the name node before  
>>>> upgrading
>>>
>>> I would say 2 weeks.
>>>
>>>>> I would love to figure out what was my problem today. :)
>>>>
>>>> we discussed the three  kinds of data looses, hardware, software  
>>>> or  human errors.
>>>>
>>>> Looks like you are not alone :-(
>>>
>>> Too bad that the other didn't report it earlier. :)
>>
>> Everything was happening in the same time.
>>
>>>>> + updated from hadoop .2.1 to .4.
>>>>> + problems to get all datanodes started
>>>>
>>>>
>>>> what was the problem with datanodes?
>>>
>>> Scenario:
>>> I don't think there was a real problem. I notice that the datanodes  
>>> was not able to connect to the namenode.
>>> Later one I just add a "sleep 5" into the dfs starting script after  
>>> starteing the name node and that sloved the problem.
>>
>> That is right, we did the same.
>>
>>> However at this time I updated, notice that problem, was thinking  
>>> "ok, not working yet, lets wait another week", downgrading.
>>
>>>>> + downgrade to hadoop .3.1
>>>>> + error message of incompatible dfs (I guess . already had 
>>>>> started  to  write to the log)
>>>>
>>>>
>>>> What is the message?
>>>
>>>
>>> Sorry I can not find the exception anymore in the logs. :-(
>>> Something like "version conflict -1 vs -2" :-o Sorry didn't 
>>> remember  exactly.
>>
>> Yes. You are running the old version (-1) code that would not accept 
>> the "future" version (-2) images.
>> The image was converted to v. -2 when you tried to run the upgraded 
>> hadoop.
>>
>> Regards,
>> Konstantin
>

From MAILER-DAEMON Wed Jun  7 22:40:03 2006
Return-Path: 
 <hadoop-dev-return-1993-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85138 invoked from network); 7 Jun 2006 22:40:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 22:40:03 -0000
Received: (qmail 49762 invoked by uid 500); 7 Jun 2006 22:39:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49709 invoked by uid 500); 7 Jun 2006 22:39:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49675 invoked by uid 99); 7 Jun 2006 22:39:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 15:39:59 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.145.54.172] (HELO mrout2.yahoo.com) (216.145.54.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 15:39:58 -0700
Received: from [10.72.104.183] (enoughhot-lx.corp.yahoo.com [10.72.104.183])
	by mrout2.yahoo.com (8.13.6/8.13.4/y.out) with ESMTP id k57Mce6D094566
	for <hadoop-dev@lucene.apache.org>; Wed, 7 Jun 2006 15:38:40 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=message-id:date:from:user-agent:x-accept-language:
	mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
	b=LM9hmrfPkBh9HvXmhvZln9JvrrzkI5uUb9901Tl8hUYOyyOfowA8P0znsckp74To
Message-ID: <44875570.10104@yahoo-inc.com>
Date: Wed, 07 Jun 2006 15:38:40 -0700
From: Konstantin Shvachko <shv@yahoo-inc.com>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: dfs incompatibility .3 and .4-dev?
References: <79433D67-1259-4A20-9B84-C703B96B4A91@media-style.com>
 <4486055C.5020307@yahoo-inc.com>
 <B865213A-7620-4149-BEDD-A098027D8134@media-style.com>
 <4487239F.6010106@yahoo-inc.com> <44874E96.5070902@dragonflymc.com>
 <44875182.8000201@dragonflymc.com>
In-Reply-To: <44875182.8000201@dragonflymc.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

That might be the same problem.
Related changes to hadoop have been committed just 1 hour before your 
initial email.
So they are probably not in nutch yet.
Although "exactly one block missing in each file" looks suspicious.
Try
bin/hadoop dfs -report
to see how many data nodes you have now.
If all of them are reported then this is different.

--Konstantin

Dennis Kubes wrote:

> Another interesting thing is that every single file is corrupt and 
> missing exactly one block.
>
> Dennis Kubes wrote:
>
>> I don't know if this is the same problem or not but here is what I am 
>> experiencing.
>>
>> I have an 11 node cluster deployed a fresh nutch install with 3.1.  
>> Startup completed fine.  Filesystem healthy.  Performed 1st inject, 
>> generate, fetch for 1000 urls.  Filesystem intact.  Performed 2nd 
>> inject, generate, fetch for 1000 urls.  Filesystem healthy. Merged 
>> crawldbs.  Filesystem healthy.  Merged segments.  Filesystem 
>> healthy.  Inverted links. Healthy.  Indexed.  Healthy.  Performed 
>> searches. Healthy.  Now here is where it gets interested.  Shutdown 
>> all servers via stop-all.sh.  Started all server via start-all.sh.  
>> Filesystem reports healthy.  Performed inject and generate of 1000 
>> urls.  Filesystem reports healthy.  Performed fetch of the new 
>> segments and get errors below and full corrupted filesystem (both new 
>> segments and old data).
>>
>> java.io.IOException: Could not obtain block: blk_6625125900957460239 
>> file=/user/phoenix/temp/segments1/20060607165425/crawl_generate/part-00006 
>> offset=0
>>     at 
>> org.apache.hadoop.dfs.DFSClient$DFSInputStream.blockSeekTo(DFSClient.java:529) 
>>
>>     at 
>> org.apache.hadoop.dfs.DFSClient$DFSInputStream.read(DFSClient.java:638)
>>     at 
>> org.apache.hadoop.fs.FSDataInputStream$Checker.read(FSDataInputStream.java:84) 
>>
>>     at 
>> org.apache.hadoop.fs.FSDataInputStream$PositionCache.read(FSDataInputStream.java:159) 
>>
>>     at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
>>     at java.io.BufferedInputStream.read1(BufferedInputStream.java:256)
>>     at java.io.BufferedInputStream.read(BufferedInputStream.java:313)
>>     at java.io.DataInputStream.readFully(DataInputStream.java:176)
>>     at java.io.DataInputStream.readFully(DataInputStream.java:152)
>>     at 
>> org.apache.hadoop.io.SequenceFile$Reader.init(SequenceFile.java:263)
>>     at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:247)
>>     at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:237)
>>     at 
>> org.apache.hadoop.mapred.SequenceFileRecordReader.(SequenceFileRecordReader.java:36) 
>>
>>     at 
>> org.apache.hadoop.mapred.SequenceFileInputFormat.getRecordReader(SequenceFileInputFormat.java:53) 
>>
>>     at org.apache.hadoop.mapred.MapTask.run(MapTask.java:105)
>>     at 
>> org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:847)
>>
>> Hope this helps in tracking down the problem if it is even the same 
>> problem.
>>
>> Dennis
>>
>> Konstantin Shvachko wrote:
>>
>>> Thanks Stefan.
>>>
>>> I spend some time investigating the problem.
>>> There are 3 of them actually.
>>> 1). At startup data nodes are now registering with the name node. If 
>>> registering doesn't work,
>>> because the name node is busy at the moment, which could easily be 
>>> the case if it is loading
>>> a two week long log, then the data node would just fail and won't 
>>> start at all.
>>> See HADOOP-282.
>>> 2). When the cluster is running and the name node gets busy, and the 
>>> data node as the result
>>> fails to connect to it, then the data node falls into an infinite 
>>> loop doing nothing but throwing an
>>> exception. So for the name node it is dead, since it is not sending 
>>> any heartbeats.
>>> See HADOOP-285.
>>> 3). People say that they have seen loss of recent data, while the 
>>> old data is still present.
>>> And this is happening when the cluster was brought down (for the 
>>> upgrade), and restarted.
>>> We know HADOOP-227 that logs/edits are accumulating as long as the 
>>> cluster is running.
>>> So if it was up for 2 weeks then the edits file is most probably 
>>> huge. If it is corrupted then
>>> the data is lost.
>>> I could not reproduce that, just don't have any 2-week old edits 
>>> files yet.
>>> I thoroughly examined one cluster and found missing blocks on the 
>>> nodes that pretended to be
>>> up as in (2) above. Didn't see any data loss at all. I think large 
>>> edits files should be further
>>> investigated.
>>>
>>> There are patches fixing HADOOP-282 and HADOOP-285. We do not have 
>>> patch
>>> for HADOOP-227 yet, so people need to restart the name node (just 
>>> the name node) depending
>>> on the activity on the cluster, namely depending on the size of the 
>>> edits file.
>>>
>>>
>>> Stefan Groschupf wrote:
>>>
>>>> Hi Konstantin,
>>>>
>>>>> Could you give some more information about what happened to you.
>>>>> - what is your cluster size
>>>>
>>>>
>>>> 9 datanode, 1 namenode.
>>>>
>>>>> - amount of data
>>>>
>>>>
>>>> Total raw bytes: 6023680622592 (5609.98 Gb)
>>>> Used raw bytes: 2357053984804 (2195.17 Gb)
>>>>
>>>>> - how long did dfs ran without restarting the name node before  
>>>>> upgrading
>>>>
>>>>
>>>> I would say 2 weeks.
>>>>
>>>>>> I would love to figure out what was my problem today. :)
>>>>>
>>>>>
>>>>> we discussed the three  kinds of data looses, hardware, software  
>>>>> or  human errors.
>>>>>
>>>>> Looks like you are not alone :-(
>>>>
>>>>
>>>> Too bad that the other didn't report it earlier. :)
>>>
>>>
>>> Everything was happening in the same time.
>>>
>>>>>> + updated from hadoop .2.1 to .4.
>>>>>> + problems to get all datanodes started
>>>>>
>>>>>
>>>>>
>>>>> what was the problem with datanodes?
>>>>
>>>>
>>>> Scenario:
>>>> I don't think there was a real problem. I notice that the 
>>>> datanodes  was not able to connect to the namenode.
>>>> Later one I just add a "sleep 5" into the dfs starting script 
>>>> after  starteing the name node and that sloved the problem.
>>>
>>>
>>> That is right, we did the same.
>>>
>>>> However at this time I updated, notice that problem, was thinking  
>>>> "ok, not working yet, lets wait another week", downgrading.
>>>
>>>
>>>>>> + downgrade to hadoop .3.1
>>>>>> + error message of incompatible dfs (I guess . already had 
>>>>>> started  to  write to the log)
>>>>>
>>>>>
>>>>>
>>>>> What is the message?
>>>>
>>>>
>>>>
>>>> Sorry I can not find the exception anymore in the logs. :-(
>>>> Something like "version conflict -1 vs -2" :-o Sorry didn't 
>>>> remember  exactly.
>>>
>>>
>>> Yes. You are running the old version (-1) code that would not accept 
>>> the "future" version (-2) images.
>>> The image was converted to v. -2 when you tried to run the upgraded 
>>> hadoop.
>>>
>>> Regards,
>>> Konstantin
>>
>>
>
>
>


From MAILER-DAEMON Wed Jun  7 22:45:42 2006
Return-Path: 
 <hadoop-dev-return-1994-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 87052 invoked from network); 7 Jun 2006 22:45:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 22:45:42 -0000
Received: (qmail 54833 invoked by uid 500); 7 Jun 2006 22:45:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 54809 invoked by uid 500); 7 Jun 2006 22:45:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 54799 invoked by uid 99); 7 Jun 2006 22:45:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 15:45:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [74.0.0.77] (HELO linuxfly.dragonflymc.com) (74.0.0.77)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 15:45:40 -0700
Received: from [192.168.1.246] (unknown [63.133.162.98])
	by linuxfly.dragonflymc.com (Postfix) with ESMTP id BB5D6C2006B
	for <hadoop-dev@lucene.apache.org>; Wed,  7 Jun 2006 17:46:19 -0500 (CDT)
Message-ID: <448756FD.8040002@dragonflymc.com>
Date: Wed, 07 Jun 2006 17:45:17 -0500
From: Dennis Kubes <nutch-dev@dragonflymc.com>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: dfs incompatibility .3 and .4-dev?
References: <79433D67-1259-4A20-9B84-C703B96B4A91@media-style.com>
 <4486055C.5020307@yahoo-inc.com>
 <B865213A-7620-4149-BEDD-A098027D8134@media-style.com>
 <4487239F.6010106@yahoo-inc.com> <44874E96.5070902@dragonflymc.com>
 <44875182.8000201@dragonflymc.com> <44875570.10104@yahoo-inc.com>
In-Reply-To: <44875570.10104@yahoo-inc.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

All of the data nodes are there via bin/hadoop dfs -report.  One 
interesting thing.  I shut down via stop-all.sh again and restarted via 
start-all.sh and everything seems to be working.  I reran fsck and 
everything is not reporting healthy.  I have not tried another fetch yet 
but a generate was successful as was and updatedb and readdb.  I am 
seeing alot of the errors below in the log but I think those are fixed 
by some of the recent patches.

2006-06-07 17:44:19,916 INFO org.apache.hadoop.dfs.DataNode: Lost 
connection to namenode.  Retrying...
2006-06-07 17:44:24,920 INFO org.apache.hadoop.dfs.DataNode: Exception: 
java.lang.IllegalThreadStateException
2006-06-07 17:44:24,921 INFO org.apache.hadoop.dfs.DataNode: Lost 
connection to namenode.  Retrying...
2006-06-07 17:44:29,925 INFO org.apache.hadoop.dfs.DataNode: Exception: 
java.lang.IllegalThreadStateException
2006-06-07 17:44:29,925 INFO org.apache.hadoop.dfs.DataNode: Lost 
connection to namenode.  Retrying...
2006-06-07 17:44:34,929 INFO org.apache.hadoop.dfs.DataNode: Exception: 
java.lang.IllegalThreadStateException
2006-06-07 17:44:34,929 INFO org.apache.hadoop.dfs.DataNode: Lost 
connection to namenode.  Retrying...

Dennis

Konstantin Shvachko wrote:
> That might be the same problem.
> Related changes to hadoop have been committed just 1 hour before your 
> initial email.
> So they are probably not in nutch yet.
> Although "exactly one block missing in each file" looks suspicious.
> Try
> bin/hadoop dfs -report
> to see how many data nodes you have now.
> If all of them are reported then this is different.
>
> --Konstantin
>
> Dennis Kubes wrote:
>
>> Another interesting thing is that every single file is corrupt and 
>> missing exactly one block.
>>
>> Dennis Kubes wrote:
>>
>>> I don't know if this is the same problem or not but here is what I 
>>> am experiencing.
>>>
>>> I have an 11 node cluster deployed a fresh nutch install with 3.1.  
>>> Startup completed fine.  Filesystem healthy.  Performed 1st inject, 
>>> generate, fetch for 1000 urls.  Filesystem intact.  Performed 2nd 
>>> inject, generate, fetch for 1000 urls.  Filesystem healthy. Merged 
>>> crawldbs.  Filesystem healthy.  Merged segments.  Filesystem 
>>> healthy.  Inverted links. Healthy.  Indexed.  Healthy.  Performed 
>>> searches. Healthy.  Now here is where it gets interested.  Shutdown 
>>> all servers via stop-all.sh.  Started all server via start-all.sh.  
>>> Filesystem reports healthy.  Performed inject and generate of 1000 
>>> urls.  Filesystem reports healthy.  Performed fetch of the new 
>>> segments and get errors below and full corrupted filesystem (both 
>>> new segments and old data).
>>>
>>> java.io.IOException: Could not obtain block: blk_6625125900957460239 
>>> file=/user/phoenix/temp/segments1/20060607165425/crawl_generate/part-00006 
>>> offset=0
>>>     at 
>>> org.apache.hadoop.dfs.DFSClient$DFSInputStream.blockSeekTo(DFSClient.java:529) 
>>>
>>>     at 
>>> org.apache.hadoop.dfs.DFSClient$DFSInputStream.read(DFSClient.java:638)
>>>     at 
>>> org.apache.hadoop.fs.FSDataInputStream$Checker.read(FSDataInputStream.java:84) 
>>>
>>>     at 
>>> org.apache.hadoop.fs.FSDataInputStream$PositionCache.read(FSDataInputStream.java:159) 
>>>
>>>     at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
>>>     at java.io.BufferedInputStream.read1(BufferedInputStream.java:256)
>>>     at java.io.BufferedInputStream.read(BufferedInputStream.java:313)
>>>     at java.io.DataInputStream.readFully(DataInputStream.java:176)
>>>     at java.io.DataInputStream.readFully(DataInputStream.java:152)
>>>     at 
>>> org.apache.hadoop.io.SequenceFile$Reader.init(SequenceFile.java:263)
>>>     at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:247)
>>>     at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:237)
>>>     at 
>>> org.apache.hadoop.mapred.SequenceFileRecordReader.(SequenceFileRecordReader.java:36) 
>>>
>>>     at 
>>> org.apache.hadoop.mapred.SequenceFileInputFormat.getRecordReader(SequenceFileInputFormat.java:53) 
>>>
>>>     at org.apache.hadoop.mapred.MapTask.run(MapTask.java:105)
>>>     at 
>>> org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:847)
>>>
>>> Hope this helps in tracking down the problem if it is even the same 
>>> problem.
>>>
>>> Dennis
>>>
>>> Konstantin Shvachko wrote:
>>>
>>>> Thanks Stefan.
>>>>
>>>> I spend some time investigating the problem.
>>>> There are 3 of them actually.
>>>> 1). At startup data nodes are now registering with the name node. 
>>>> If registering doesn't work,
>>>> because the name node is busy at the moment, which could easily be 
>>>> the case if it is loading
>>>> a two week long log, then the data node would just fail and won't 
>>>> start at all.
>>>> See HADOOP-282.
>>>> 2). When the cluster is running and the name node gets busy, and 
>>>> the data node as the result
>>>> fails to connect to it, then the data node falls into an infinite 
>>>> loop doing nothing but throwing an
>>>> exception. So for the name node it is dead, since it is not sending 
>>>> any heartbeats.
>>>> See HADOOP-285.
>>>> 3). People say that they have seen loss of recent data, while the 
>>>> old data is still present.
>>>> And this is happening when the cluster was brought down (for the 
>>>> upgrade), and restarted.
>>>> We know HADOOP-227 that logs/edits are accumulating as long as the 
>>>> cluster is running.
>>>> So if it was up for 2 weeks then the edits file is most probably 
>>>> huge. If it is corrupted then
>>>> the data is lost.
>>>> I could not reproduce that, just don't have any 2-week old edits 
>>>> files yet.
>>>> I thoroughly examined one cluster and found missing blocks on the 
>>>> nodes that pretended to be
>>>> up as in (2) above. Didn't see any data loss at all. I think large 
>>>> edits files should be further
>>>> investigated.
>>>>
>>>> There are patches fixing HADOOP-282 and HADOOP-285. We do not have 
>>>> patch
>>>> for HADOOP-227 yet, so people need to restart the name node (just 
>>>> the name node) depending
>>>> on the activity on the cluster, namely depending on the size of the 
>>>> edits file.
>>>>
>>>>
>>>> Stefan Groschupf wrote:
>>>>
>>>>> Hi Konstantin,
>>>>>
>>>>>> Could you give some more information about what happened to you.
>>>>>> - what is your cluster size
>>>>>
>>>>>
>>>>> 9 datanode, 1 namenode.
>>>>>
>>>>>> - amount of data
>>>>>
>>>>>
>>>>> Total raw bytes: 6023680622592 (5609.98 Gb)
>>>>> Used raw bytes: 2357053984804 (2195.17 Gb)
>>>>>
>>>>>> - how long did dfs ran without restarting the name node before  
>>>>>> upgrading
>>>>>
>>>>>
>>>>> I would say 2 weeks.
>>>>>
>>>>>>> I would love to figure out what was my problem today. :)
>>>>>>
>>>>>>
>>>>>> we discussed the three  kinds of data looses, hardware, software  
>>>>>> or  human errors.
>>>>>>
>>>>>> Looks like you are not alone :-(
>>>>>
>>>>>
>>>>> Too bad that the other didn't report it earlier. :)
>>>>
>>>>
>>>> Everything was happening in the same time.
>>>>
>>>>>>> + updated from hadoop .2.1 to .4.
>>>>>>> + problems to get all datanodes started
>>>>>>
>>>>>>
>>>>>>
>>>>>> what was the problem with datanodes?
>>>>>
>>>>>
>>>>> Scenario:
>>>>> I don't think there was a real problem. I notice that the 
>>>>> datanodes  was not able to connect to the namenode.
>>>>> Later one I just add a "sleep 5" into the dfs starting script 
>>>>> after  starteing the name node and that sloved the problem.
>>>>
>>>>
>>>> That is right, we did the same.
>>>>
>>>>> However at this time I updated, notice that problem, was thinking  
>>>>> "ok, not working yet, lets wait another week", downgrading.
>>>>
>>>>
>>>>>>> + downgrade to hadoop .3.1
>>>>>>> + error message of incompatible dfs (I guess . already had 
>>>>>>> started  to  write to the log)
>>>>>>
>>>>>>
>>>>>>
>>>>>> What is the message?
>>>>>
>>>>>
>>>>>
>>>>> Sorry I can not find the exception anymore in the logs. :-(
>>>>> Something like "version conflict -1 vs -2" :-o Sorry didn't 
>>>>> remember  exactly.
>>>>
>>>>
>>>> Yes. You are running the old version (-1) code that would not 
>>>> accept the "future" version (-2) images.
>>>> The image was converted to v. -2 when you tried to run the upgraded 
>>>> hadoop.
>>>>
>>>> Regards,
>>>> Konstantin
>>>
>>>
>>
>>
>>
>

From MAILER-DAEMON Wed Jun  7 22:47:48 2006
Return-Path: 
 <hadoop-dev-return-1995-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 87443 invoked from network); 7 Jun 2006 22:47:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 22:47:48 -0000
Received: (qmail 58009 invoked by uid 500); 7 Jun 2006 22:47:48 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 57865 invoked by uid 500); 7 Jun 2006 22:47:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 57856 invoked by uid 99); 7 Jun 2006 22:47:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 15:47:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [74.0.0.77] (HELO linuxfly.dragonflymc.com) (74.0.0.77)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 15:47:46 -0700
Received: from [192.168.1.246] (unknown [63.133.162.98])
	by linuxfly.dragonflymc.com (Postfix) with ESMTP id 91BCEC2006B
	for <hadoop-dev@lucene.apache.org>; Wed,  7 Jun 2006 17:48:25 -0500 (CDT)
Message-ID: <4487577B.3060601@dragonflymc.com>
Date: Wed, 07 Jun 2006 17:47:23 -0500
From: Dennis Kubes <nutch-dev@dragonflymc.com>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: dfs incompatibility .3 and .4-dev?
References: <79433D67-1259-4A20-9B84-C703B96B4A91@media-style.com>
 <4486055C.5020307@yahoo-inc.com>
 <B865213A-7620-4149-BEDD-A098027D8134@media-style.com>
 <4487239F.6010106@yahoo-inc.com> <44874E96.5070902@dragonflymc.com>
 <44875182.8000201@dragonflymc.com> <44875570.10104@yahoo-inc.com>
 <448756FD.8040002@dragonflymc.com>
In-Reply-To: <448756FD.8040002@dragonflymc.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

sorry that should have been now reporting healthy.  Everything is 
working after the restart.

Dennis Kubes wrote:
> All of the data nodes are there via bin/hadoop dfs -report.  One 
> interesting thing.  I shut down via stop-all.sh again and restarted 
> via start-all.sh and everything seems to be working.  I reran fsck and 
> everything is not reporting healthy.  I have not tried another fetch 
> yet but a generate was successful as was and updatedb and readdb.  I 
> am seeing alot of the errors below in the log but I think those are 
> fixed by some of the recent patches.
>
> 2006-06-07 17:44:19,916 INFO org.apache.hadoop.dfs.DataNode: Lost 
> connection to namenode.  Retrying...
> 2006-06-07 17:44:24,920 INFO org.apache.hadoop.dfs.DataNode: 
> Exception: java.lang.IllegalThreadStateException
> 2006-06-07 17:44:24,921 INFO org.apache.hadoop.dfs.DataNode: Lost 
> connection to namenode.  Retrying...
> 2006-06-07 17:44:29,925 INFO org.apache.hadoop.dfs.DataNode: 
> Exception: java.lang.IllegalThreadStateException
> 2006-06-07 17:44:29,925 INFO org.apache.hadoop.dfs.DataNode: Lost 
> connection to namenode.  Retrying...
> 2006-06-07 17:44:34,929 INFO org.apache.hadoop.dfs.DataNode: 
> Exception: java.lang.IllegalThreadStateException
> 2006-06-07 17:44:34,929 INFO org.apache.hadoop.dfs.DataNode: Lost 
> connection to namenode.  Retrying...
>
> Dennis
>
> Konstantin Shvachko wrote:
>> That might be the same problem.
>> Related changes to hadoop have been committed just 1 hour before your 
>> initial email.
>> So they are probably not in nutch yet.
>> Although "exactly one block missing in each file" looks suspicious.
>> Try
>> bin/hadoop dfs -report
>> to see how many data nodes you have now.
>> If all of them are reported then this is different.
>>
>> --Konstantin
>>
>> Dennis Kubes wrote:
>>
>>> Another interesting thing is that every single file is corrupt and 
>>> missing exactly one block.
>>>
>>> Dennis Kubes wrote:
>>>
>>>> I don't know if this is the same problem or not but here is what I 
>>>> am experiencing.
>>>>
>>>> I have an 11 node cluster deployed a fresh nutch install with 3.1.  
>>>> Startup completed fine.  Filesystem healthy.  Performed 1st inject, 
>>>> generate, fetch for 1000 urls.  Filesystem intact.  Performed 2nd 
>>>> inject, generate, fetch for 1000 urls.  Filesystem healthy. Merged 
>>>> crawldbs.  Filesystem healthy.  Merged segments.  Filesystem 
>>>> healthy.  Inverted links. Healthy.  Indexed.  Healthy.  Performed 
>>>> searches. Healthy.  Now here is where it gets interested.  Shutdown 
>>>> all servers via stop-all.sh.  Started all server via start-all.sh.  
>>>> Filesystem reports healthy.  Performed inject and generate of 1000 
>>>> urls.  Filesystem reports healthy.  Performed fetch of the new 
>>>> segments and get errors below and full corrupted filesystem (both 
>>>> new segments and old data).
>>>>
>>>> java.io.IOException: Could not obtain block: 
>>>> blk_6625125900957460239 
>>>> file=/user/phoenix/temp/segments1/20060607165425/crawl_generate/part-00006 
>>>> offset=0
>>>>     at 
>>>> org.apache.hadoop.dfs.DFSClient$DFSInputStream.blockSeekTo(DFSClient.java:529) 
>>>>
>>>>     at 
>>>> org.apache.hadoop.dfs.DFSClient$DFSInputStream.read(DFSClient.java:638) 
>>>>
>>>>     at 
>>>> org.apache.hadoop.fs.FSDataInputStream$Checker.read(FSDataInputStream.java:84) 
>>>>
>>>>     at 
>>>> org.apache.hadoop.fs.FSDataInputStream$PositionCache.read(FSDataInputStream.java:159) 
>>>>
>>>>     at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
>>>>     at java.io.BufferedInputStream.read1(BufferedInputStream.java:256)
>>>>     at java.io.BufferedInputStream.read(BufferedInputStream.java:313)
>>>>     at java.io.DataInputStream.readFully(DataInputStream.java:176)
>>>>     at java.io.DataInputStream.readFully(DataInputStream.java:152)
>>>>     at 
>>>> org.apache.hadoop.io.SequenceFile$Reader.init(SequenceFile.java:263)
>>>>     at 
>>>> org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:247)
>>>>     at 
>>>> org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:237)
>>>>     at 
>>>> org.apache.hadoop.mapred.SequenceFileRecordReader.(SequenceFileRecordReader.java:36) 
>>>>
>>>>     at 
>>>> org.apache.hadoop.mapred.SequenceFileInputFormat.getRecordReader(SequenceFileInputFormat.java:53) 
>>>>
>>>>     at org.apache.hadoop.mapred.MapTask.run(MapTask.java:105)
>>>>     at 
>>>> org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:847)
>>>>
>>>> Hope this helps in tracking down the problem if it is even the same 
>>>> problem.
>>>>
>>>> Dennis
>>>>
>>>> Konstantin Shvachko wrote:
>>>>
>>>>> Thanks Stefan.
>>>>>
>>>>> I spend some time investigating the problem.
>>>>> There are 3 of them actually.
>>>>> 1). At startup data nodes are now registering with the name node. 
>>>>> If registering doesn't work,
>>>>> because the name node is busy at the moment, which could easily be 
>>>>> the case if it is loading
>>>>> a two week long log, then the data node would just fail and won't 
>>>>> start at all.
>>>>> See HADOOP-282.
>>>>> 2). When the cluster is running and the name node gets busy, and 
>>>>> the data node as the result
>>>>> fails to connect to it, then the data node falls into an infinite 
>>>>> loop doing nothing but throwing an
>>>>> exception. So for the name node it is dead, since it is not 
>>>>> sending any heartbeats.
>>>>> See HADOOP-285.
>>>>> 3). People say that they have seen loss of recent data, while the 
>>>>> old data is still present.
>>>>> And this is happening when the cluster was brought down (for the 
>>>>> upgrade), and restarted.
>>>>> We know HADOOP-227 that logs/edits are accumulating as long as the 
>>>>> cluster is running.
>>>>> So if it was up for 2 weeks then the edits file is most probably 
>>>>> huge. If it is corrupted then
>>>>> the data is lost.
>>>>> I could not reproduce that, just don't have any 2-week old edits 
>>>>> files yet.
>>>>> I thoroughly examined one cluster and found missing blocks on the 
>>>>> nodes that pretended to be
>>>>> up as in (2) above. Didn't see any data loss at all. I think large 
>>>>> edits files should be further
>>>>> investigated.
>>>>>
>>>>> There are patches fixing HADOOP-282 and HADOOP-285. We do not have 
>>>>> patch
>>>>> for HADOOP-227 yet, so people need to restart the name node (just 
>>>>> the name node) depending
>>>>> on the activity on the cluster, namely depending on the size of 
>>>>> the edits file.
>>>>>
>>>>>
>>>>> Stefan Groschupf wrote:
>>>>>
>>>>>> Hi Konstantin,
>>>>>>
>>>>>>> Could you give some more information about what happened to you.
>>>>>>> - what is your cluster size
>>>>>>
>>>>>>
>>>>>> 9 datanode, 1 namenode.
>>>>>>
>>>>>>> - amount of data
>>>>>>
>>>>>>
>>>>>> Total raw bytes: 6023680622592 (5609.98 Gb)
>>>>>> Used raw bytes: 2357053984804 (2195.17 Gb)
>>>>>>
>>>>>>> - how long did dfs ran without restarting the name node before  
>>>>>>> upgrading
>>>>>>
>>>>>>
>>>>>> I would say 2 weeks.
>>>>>>
>>>>>>>> I would love to figure out what was my problem today. :)
>>>>>>>
>>>>>>>
>>>>>>> we discussed the three  kinds of data looses, hardware, 
>>>>>>> software  or  human errors.
>>>>>>>
>>>>>>> Looks like you are not alone :-(
>>>>>>
>>>>>>
>>>>>> Too bad that the other didn't report it earlier. :)
>>>>>
>>>>>
>>>>> Everything was happening in the same time.
>>>>>
>>>>>>>> + updated from hadoop .2.1 to .4.
>>>>>>>> + problems to get all datanodes started
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> what was the problem with datanodes?
>>>>>>
>>>>>>
>>>>>> Scenario:
>>>>>> I don't think there was a real problem. I notice that the 
>>>>>> datanodes  was not able to connect to the namenode.
>>>>>> Later one I just add a "sleep 5" into the dfs starting script 
>>>>>> after  starteing the name node and that sloved the problem.
>>>>>
>>>>>
>>>>> That is right, we did the same.
>>>>>
>>>>>> However at this time I updated, notice that problem, was 
>>>>>> thinking  "ok, not working yet, lets wait another week", 
>>>>>> downgrading.
>>>>>
>>>>>
>>>>>>>> + downgrade to hadoop .3.1
>>>>>>>> + error message of incompatible dfs (I guess . already had 
>>>>>>>> started  to  write to the log)
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> What is the message?
>>>>>>
>>>>>>
>>>>>>
>>>>>> Sorry I can not find the exception anymore in the logs. :-(
>>>>>> Something like "version conflict -1 vs -2" :-o Sorry didn't 
>>>>>> remember  exactly.
>>>>>
>>>>>
>>>>> Yes. You are running the old version (-1) code that would not 
>>>>> accept the "future" version (-2) images.
>>>>> The image was converted to v. -2 when you tried to run the 
>>>>> upgraded hadoop.
>>>>>
>>>>> Regards,
>>>>> Konstantin
>>>>
>>>>
>>>
>>>
>>>
>>

From MAILER-DAEMON Wed Jun  7 22:50:06 2006
Return-Path: 
 <hadoop-dev-return-1996-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 88188 invoked from network); 7 Jun 2006 22:50:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 22:50:06 -0000
Received: (qmail 60351 invoked by uid 500); 7 Jun 2006 22:50:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 60323 invoked by uid 500); 7 Jun 2006 22:50:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 60313 invoked by uid 99); 7 Jun 2006 22:50:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 15:50:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 15:50:03 -0700
Received: from [192.168.0.252] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id k57Mnxo11706
	for <hadoop-dev@lucene.apache.org>; Wed, 7 Jun 2006 17:50:00 -0500
Message-ID: <4487580D.8020601@getopt.org>
Date: Thu, 08 Jun 2006 00:49:49 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: dfs incompatibility .3 and .4-dev?
References: <79433D67-1259-4A20-9B84-C703B96B4A91@media-style.com>
 <4486055C.5020307@yahoo-inc.com>
 <B865213A-7620-4149-BEDD-A098027D8134@media-style.com>
 <4487239F.6010106@yahoo-inc.com> <44874E96.5070902@dragonflymc.com>
 <44875182.8000201@dragonflymc.com>
In-Reply-To: <44875182.8000201@dragonflymc.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Dennis Kubes wrote:
> Another interesting thing is that every single file is corrupt and 
> missing exactly one block.

Could you check if your data dirs contain any subdirs on the same level 
as block files? There was a patch by Mike Cafarella that implemented 
multi-level block storage, to improve the performance by reducing the 
number of files in a directory ...

-- 
Best regards,
Andrzej Bialecki     <><
 ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com



From MAILER-DAEMON Wed Jun  7 22:57:25 2006
Return-Path: 
 <hadoop-dev-return-1997-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92363 invoked from network); 7 Jun 2006 22:57:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 22:57:25 -0000
Received: (qmail 70020 invoked by uid 500); 7 Jun 2006 22:57:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70002 invoked by uid 500); 7 Jun 2006 22:57:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 69993 invoked by uid 99); 7 Jun 2006 22:57:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 15:57:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [74.0.0.77] (HELO linuxfly.dragonflymc.com) (74.0.0.77)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 15:57:23 -0700
Received: from [192.168.1.246] (unknown [63.133.162.98])
	by linuxfly.dragonflymc.com (Postfix) with ESMTP id EB5D1C2006B
	for <hadoop-dev@lucene.apache.org>; Wed,  7 Jun 2006 17:58:02 -0500 (CDT)
Message-ID: <448759BD.30707@dragonflymc.com>
Date: Wed, 07 Jun 2006 17:57:01 -0500
From: Dennis Kubes <nutch-dev@dragonflymc.com>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: dfs incompatibility .3 and .4-dev?
References: <79433D67-1259-4A20-9B84-C703B96B4A91@media-style.com>
 <4486055C.5020307@yahoo-inc.com>
 <B865213A-7620-4149-BEDD-A098027D8134@media-style.com>
 <4487239F.6010106@yahoo-inc.com> <44874E96.5070902@dragonflymc.com>
 <44875182.8000201@dragonflymc.com> <4487580D.8020601@getopt.org>
In-Reply-To: <4487580D.8020601@getopt.org>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

No directories under the data directory.  Structure looks like this

./data/blk_-8280038235202708144
./data/blk_-3748631268872881542
./data/blk_-2366722915033235688
./data/blk_-589924729148805588
./data/blk_8344412421587849551
./data/blk_-2480133294694356389
./data/blk_-7677596302070429274
./tmp
./tmp/blk_1832286714640595668
./storage


Andrzej Bialecki wrote:
> Dennis Kubes wrote:
>> Another interesting thing is that every single file is corrupt and 
>> missing exactly one block.
>
> Could you check if your data dirs contain any subdirs on the same 
> level as block files? There was a patch by Mike Cafarella that 
> implemented multi-level block storage, to improve the performance by 
> reducing the number of files in a directory ...
>

From MAILER-DAEMON Thu Jun  8 01:29:34 2006
Return-Path: 
 <hadoop-dev-return-1998-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78814 invoked from network); 8 Jun 2006 01:29:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jun 2006 01:29:34 -0000
Received: (qmail 72686 invoked by uid 500); 8 Jun 2006 01:29:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72535 invoked by uid 500); 8 Jun 2006 01:29:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72523 invoked by uid 99); 8 Jun 2006 01:29:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 18:29:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 18:29:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D43FF7142C8
	for <hadoop-dev@lucene.apache.org>; Thu,  8 Jun 2006 01:28:29 +0000 (GMT)
Message-ID: <6015694.1149730109866.JavaMail.jira@brutus>
Date: Thu, 8 Jun 2006 01:28:29 +0000 (GMT+00:00)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-288) RFC: Efficient file caching
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

RFC: Efficient file caching 
----------------------------

         Key: HADOOP-288
         URL: http://issues.apache.org/jira/browse/HADOOP-288
     Project: Hadoop
        Type: Bug

    Reporter: Michel Tourn
 Assigned to: Michel Tourn 


RFC: Efficient file caching 
(on Hadoop Task nodes, for benefit of MapReduce Tasks)
------------------------------------------------------

We will start implementing this soon. Please provide feedback and improvements to this plan.

The header "Options:" indicates places where simple choices must be made.


Problem:
-------
o MapReduce tasks require access to additional out-of-band data ("dictionaries")

This out-of-band data is:

o in addition to the map/reduce inputs.
o large (1GB+)
o broadcast (same data is required on all the Task nodes)
o changes "infrequently", in particular:
oo it is always constant for all the Tasks in a Job. 
oo it is often constant for a month at a time 
oo it may be shared across team members
o sometimes used by pure-Java MapReduce programs
o sometimes used by non-Java MapReduce programs (using Hadoop-Streaming)
o (future) used by programs that use HDFS and Task-trackers but not MapReduce.

Existing Solutions to the problem:
---------------------------------
These solutions are not good enough. The present proposal is to do Sol 1 with caching.

Sol 1: Pure Hadoop: package the out-of-band data in the MapReduce Job jar file.
Sol 2: Non  Hadoop: for each task node run rsync from single source for data.
Sol 3: Non  Hadoop: use BitTorrent, etc.

Sol.1 is correct but slow for many reasons:
 The Job submitter must recreate a large jar(tar) file for every Job.
  (The jar contains both changing programs and stable dictionaries)
 The large Jar file must be propagated from the client to HDFS with 
 a large replication factor. 
 At the beginning of every Task, the Task tracker gets the job jar from HDFS 
 and unjars it in the working directory. This can dominate task execution time.
 
Sol.2 has nice properties but also some problems.
 It does not scale well with large clusters (many concurrent rsync read requests i.e. single-source broadcast)
 It assumes that Hadoop users can upload data using rsync to the cluster nodes. As a policy, this is not allowed.
 It requires rsync.
 
Sol.3 alleviates the rsync scalability problems but 
      It is a dependency on an external system. 
      We want something simpler and more tightly integrated with Hadoop.
      

Staging (uploading) out-of-band data:
------------------------------------
The out-of-band data will often originate on the local filesystem of a user machine 
 (i.e. a MapReduce job submitter)
Nevertheless it makes sense to use HDFS to store the original out-of-band data because:
o HDFS has (wide) replication. This enables scalable broadcast later.
o HDFS is an available channel to move data from clients to all task machines.
o HDFS is convenient as a shared location among Hadoop team members.


Accessing (downloading) out-of-band data:
----------------------------------------
The non-Java MapReduce programs do not have or want[1] APIs for HDFS.
Instead these programs just want to access out-of-band data as 
 local files at predefined paths.
([1] Existing programs should be reusable with no changes. 
 This is often possible bec. communication is over stdin/stdout.)



Job's jar file as a special case:
--------------------------------
One use case is to allow users to make the job jar itself cachable.

This is only useful in cases where NOTHING changes when a job is resubmitted
 (no MapRed code changes and no changes in shipped data)
This situation might occur with an 'extractor' job (gets data from an external source: like Nutch crawler)

Currently the Hadoop mapred-jar mechanism works in this way:
 the job jar data is unjarred in the "working directory" of the Task 
 the jar contains both MapRed java code (added to classpath)



Cache synchronization:
---------------------

The efficient implementation of the out-of-band data distribution
is mostly a cache synchronization problem.
A list of the various aspects where choices must be made follows.


Cache key:
---------
How do you test that the cached copy is out-of-date?

Options: 
1. the archive/file timestamp 
2. the MD5 of the archive/file content

Comparing source and destination Timestamps is problematic bec. it assumes synchronized clocks.
Also there is no last-modif metadata in HDFS (for good reasons, like scalability of metadata ops)

Timestamps stored with the source ('last-propagate-time') do 
 not require synchronized clocks, only locally monotonic time. 
(and the worse which can happen at daylight-savings switch is a missed update or an extra-update)

The cache code could store a copy of the local timestamp 
in the same way that it caches the value of the content hash along with the source data.
 


Cachable unit:
-------------
Options: individual files or archives or both.

Note:
At the API level, directories will be processed recursively 
(and the local FS directories will parallel HDFS directories)
So bulk operations are always possible using directories.
The question here is whether to handle archives as an additional bulk mechanism.


Archives are special because:
o unarchiving occurs transparently as part of the cache sync
o The cache key is computed on the archive and preserved although 
  the archive itself is not preserved.
Supported archive format will be: tar (maybe tgz or compressed jar)
Archive detection test: by filename extension ".tar" or ".jar"

Suppose we don't handle archives as special files:
Pros:
 o less code, no discussion about which archive formats are supported
 o fine for large dictionary files. And when files are not large, user may as well
   put them in the Job jar as usual.
 o user code could always check and unarchive specific cached files
   (as a side-effect of MapRed task initialization)
Cons:
 o handling small files may be inefficient 
  (multiple HDFS operations, multiple hash computation, 
   one 'metadata' hash file along with each small file)
 o It will not be possible to handle the Job's jar file as a special case of caching 



Cache isolation: 
---------------
In some cases it may be a problem if the cached HDFS files are updated while a Job is in progress:
The file may become unavailable for a short period of time and some tasks fail.
The file may change (atomically) and different tasks use a different version.

This isolation problem is not addressed in this proposal.
Standard solutions to the isolation problem are:

o Assume that Jobs and interfering cache updates won't occur concurrently.

o Put a version number in the HDFS file paths and refer to a hard-coded version in the Job code.

o Before running the MapRed job, run a non-distributed application that tests
  what is the latest available version of the out-of-band data. 
  Then make this version available to the MapRed job.
  Two ways to do this. 
  o either set a job property just-in-time:
    addCachePathPair("/mydata/v1234/", "localcache/mydata_latest"); 
    (see Job Configuration for meaning of this)
  o or publish the decision as an HDFS file containing the version.
    then rely on user code to read the version, and manually populate the cache:
    Cache.syncCache("/hdfs/path/fileordir", "relative/local/fileordir");
    (see MapReduce API for meaning of this)


Cache synchronization stages:
----------------------------
There are two stages: Client-to-HDFS and HDFS-to-TaskTracker

o Client-to-HDFS stage.
Options: A simple option is to not do anything here, i.e. rely on the user.

This is a reasonable option given previous remarks on the role of HDFS:
 HDFS is a staging/publishing area and a natural shared location.
In particular this means that the system need not track 
where the client files come from.


o HDFS-to-TaskTracker:
Client-to-HDFS synchronization (if done at all) should happen before this.
Then HDFS-to-TaskTracker synchronization must happen right before 
the data is needed on a node.



MapReduce cache API:
-------------------
Options:

1. No change in MapReduce framework code:
require the user to put this logic in map() (or reduce) function:

 in MyMapper constructor (or in map() on first record) user is asked to add:
 
    Cache.syncCache("/hdfs/path/fileordir", "relative/local/fileordir");
    Cache.syncCache("..."); //etc.
  
-----

2. Put this logic in MapReduce framework and use Job properties to
   communicate the list of pairs (hdfs path; local path)
 
Directories are processed recursively.
If archives are treated specially then they are unarchived on destination.

 
MapReduce Job Configuration:
---------------------------
Options:

with No change in MapReduce framework code (see above)
 no special Job configuration: 
   it is up to the MapRed writer to configure and run the cache operations.

---
with Logic in MapReduce framework (see above)
 some simple Job configuration

JobConf.addCachePathPair(String, String)
JobConf.addCachePathPair("/hdfs/path/fileordir", "relative/local/fileordir");



-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun  8 01:47:43 2006
Return-Path: 
 <hadoop-dev-return-1999-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 81586 invoked from network); 8 Jun 2006 01:47:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jun 2006 01:47:43 -0000
Received: (qmail 87437 invoked by uid 500); 8 Jun 2006 01:47:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 87301 invoked by uid 500); 8 Jun 2006 01:47:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 87292 invoked by uid 99); 8 Jun 2006 01:47:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 18:47:42 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.145.54.172] (HELO mrout2.yahoo.com) (216.145.54.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 18:47:41 -0700
Received: from SNV-XCHMAIL.xch.corp.yahoo.com (snv-xch1.xch.corp.yahoo.com
 [216.145.51.233])
	by mrout2.yahoo.com (8.13.6/8.13.4/y.out) with ESMTP id k581kkrp042405
	for <hadoop-dev@lucene.apache.org>; Wed, 7 Jun 2006 18:46:46 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=received:mime-version:in-reply-to:references:content-type:
	message-id:content-transfer-encoding:from:subject:date:to:x-mailer:
	return-path:x-originalarrivaltime;
	b=K3T/nE2BVgtXiVtB7i6U78GfIwAkj85eBv/gAqWnzJfuSzAgeag2sI+NXYRScXEn
Received: from [10.0.1.2] ([172.21.179.130]) by SNV-XCHMAIL.xch.corp.yahoo.com
 with Microsoft SMTPSVC(5.0.2195.6713);
	 Wed, 7 Jun 2006 18:46:45 -0700
Mime-Version: 1.0 (Apple Message framework v750)
In-Reply-To: <6015694.1149730109866.JavaMail.jira@brutus>
References: <6015694.1149730109866.JavaMail.jira@brutus>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <94287917-1D77-4A48-80E6-B283AFC62074@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Eric Baldeschwieler <eric14@yahoo-inc.com>
Subject: Re: [jira] Created: (HADOOP-288) RFC: Efficient file caching
Date: Wed, 7 Jun 2006 18:46:42 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.750)
X-OriginalArrivalTime: 08 Jun 2006 01:46:45.0805 (UTC)
 FILETIME=[665605D0:01C68A9D]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Seems like we should do our best to be sure that every task does get  
the same file.  This would be a nice property and maybe not that  
hard.  Could at least check signatures and fail if there is a change.

Right now the jar file is copied and uncompressed with each task,  
correct?  If so, there is more utility to caching this file than you  
propose.

I don't understand your proposed API, when you start talking about  
files and recursive directories.  I propose we support only archives  
as inputs (or single files).  Can enforce extensions, or provide an  
unpacking config option.

Where would you extend the existing map reduce API?  To what extent  
is this "just library code"?  What APIs are added to job config, the  
task tracker, etc?

On Jun 7, 2006, at 6:28 PM, Michel Tourn (JIRA) wrote:

> RFC: Efficient file caching
> ----------------------------
>
>          Key: HADOOP-288
>          URL: http://issues.apache.org/jira/browse/HADOOP-288
>      Project: Hadoop
>         Type: Bug
>
>     Reporter: Michel Tourn
>  Assigned to: Michel Tourn
>
>
> RFC: Efficient file caching
> (on Hadoop Task nodes, for benefit of MapReduce Tasks)
> ------------------------------------------------------
>
> We will start implementing this soon. Please provide feedback and  
> improvements to this plan.
>
> The header "Options:" indicates places where simple choices must be  
> made.
>
>
> Problem:
> -------
> o MapReduce tasks require access to additional out-of-band data  
> ("dictionaries")
>
> This out-of-band data is:
>
> o in addition to the map/reduce inputs.
> o large (1GB+)
> o broadcast (same data is required on all the Task nodes)
> o changes "infrequently", in particular:
> oo it is always constant for all the Tasks in a Job.
> oo it is often constant for a month at a time
> oo it may be shared across team members
> o sometimes used by pure-Java MapReduce programs
> o sometimes used by non-Java MapReduce programs (using Hadoop- 
> Streaming)
> o (future) used by programs that use HDFS and Task-trackers but not  
> MapReduce.
>
> Existing Solutions to the problem:
> ---------------------------------
> These solutions are not good enough. The present proposal is to do  
> Sol 1 with caching.
>
> Sol 1: Pure Hadoop: package the out-of-band data in the MapReduce  
> Job jar file.
> Sol 2: Non  Hadoop: for each task node run rsync from single source  
> for data.
> Sol 3: Non  Hadoop: use BitTorrent, etc.
>
> Sol.1 is correct but slow for many reasons:
>  The Job submitter must recreate a large jar(tar) file for every Job.
>   (The jar contains both changing programs and stable dictionaries)
>  The large Jar file must be propagated from the client to HDFS with
>  a large replication factor.
>  At the beginning of every Task, the Task tracker gets the job jar  
> from HDFS
>  and unjars it in the working directory. This can dominate task  
> execution time.
>
> Sol.2 has nice properties but also some problems.
>  It does not scale well with large clusters (many concurrent rsync  
> read requests i.e. single-source broadcast)
>  It assumes that Hadoop users can upload data using rsync to the  
> cluster nodes. As a policy, this is not allowed.
>  It requires rsync.
>
> Sol.3 alleviates the rsync scalability problems but
>       It is a dependency on an external system.
>       We want something simpler and more tightly integrated with  
> Hadoop.
>
>
> Staging (uploading) out-of-band data:
> ------------------------------------
> The out-of-band data will often originate on the local filesystem  
> of a user machine
>  (i.e. a MapReduce job submitter)
> Nevertheless it makes sense to use HDFS to store the original out- 
> of-band data because:
> o HDFS has (wide) replication. This enables scalable broadcast later.
> o HDFS is an available channel to move data from clients to all  
> task machines.
> o HDFS is convenient as a shared location among Hadoop team members.
>
>
> Accessing (downloading) out-of-band data:
> ----------------------------------------
> The non-Java MapReduce programs do not have or want[1] APIs for HDFS.
> Instead these programs just want to access out-of-band data as
>  local files at predefined paths.
> ([1] Existing programs should be reusable with no changes.
>  This is often possible bec. communication is over stdin/stdout.)
>
>
>
> Job's jar file as a special case:
> --------------------------------
> One use case is to allow users to make the job jar itself cachable.
>
> This is only useful in cases where NOTHING changes when a job is  
> resubmitted
>  (no MapRed code changes and no changes in shipped data)
> This situation might occur with an 'extractor' job (gets data from  
> an external source: like Nutch crawler)
>
> Currently the Hadoop mapred-jar mechanism works in this way:
>  the job jar data is unjarred in the "working directory" of the Task
>  the jar contains both MapRed java code (added to classpath)
>
>
>
> Cache synchronization:
> ---------------------
>
> The efficient implementation of the out-of-band data distribution
> is mostly a cache synchronization problem.
> A list of the various aspects where choices must be made follows.
>
>
> Cache key:
> ---------
> How do you test that the cached copy is out-of-date?
>
> Options:
> 1. the archive/file timestamp
> 2. the MD5 of the archive/file content
>
> Comparing source and destination Timestamps is problematic bec. it  
> assumes synchronized clocks.
> Also there is no last-modif metadata in HDFS (for good reasons,  
> like scalability of metadata ops)
>
> Timestamps stored with the source ('last-propagate-time') do
>  not require synchronized clocks, only locally monotonic time.
> (and the worse which can happen at daylight-savings switch is a  
> missed update or an extra-update)
>
> The cache code could store a copy of the local timestamp
> in the same way that it caches the value of the content hash along  
> with the source data.
>
>
>
> Cachable unit:
> -------------
> Options: individual files or archives or both.
>
> Note:
> At the API level, directories will be processed recursively
> (and the local FS directories will parallel HDFS directories)
> So bulk operations are always possible using directories.
> The question here is whether to handle archives as an additional  
> bulk mechanism.
>
>
> Archives are special because:
> o unarchiving occurs transparently as part of the cache sync
> o The cache key is computed on the archive and preserved although
>   the archive itself is not preserved.
> Supported archive format will be: tar (maybe tgz or compressed jar)
> Archive detection test: by filename extension ".tar" or ".jar"
>
> Suppose we don't handle archives as special files:
> Pros:
>  o less code, no discussion about which archive formats are supported
>  o fine for large dictionary files. And when files are not large,  
> user may as well
>    put them in the Job jar as usual.
>  o user code could always check and unarchive specific cached files
>    (as a side-effect of MapRed task initialization)
> Cons:
>  o handling small files may be inefficient
>   (multiple HDFS operations, multiple hash computation,
>    one 'metadata' hash file along with each small file)
>  o It will not be possible to handle the Job's jar file as a  
> special case of caching
>
>
>
> Cache isolation:
> ---------------
> In some cases it may be a problem if the cached HDFS files are  
> updated while a Job is in progress:
> The file may become unavailable for a short period of time and some  
> tasks fail.
> The file may change (atomically) and different tasks use a  
> different version.
>
> This isolation problem is not addressed in this proposal.
> Standard solutions to the isolation problem are:
>
> o Assume that Jobs and interfering cache updates won't occur  
> concurrently.
>
> o Put a version number in the HDFS file paths and refer to a hard- 
> coded version in the Job code.
>
> o Before running the MapRed job, run a non-distributed application  
> that tests
>   what is the latest available version of the out-of-band data.
>   Then make this version available to the MapRed job.
>   Two ways to do this.
>   o either set a job property just-in-time:
>     addCachePathPair("/mydata/v1234/", "localcache/mydata_latest");
>     (see Job Configuration for meaning of this)
>   o or publish the decision as an HDFS file containing the version.
>     then rely on user code to read the version, and manually  
> populate the cache:
>     Cache.syncCache("/hdfs/path/fileordir", "relative/local/ 
> fileordir");
>     (see MapReduce API for meaning of this)
>
>
> Cache synchronization stages:
> ----------------------------
> There are two stages: Client-to-HDFS and HDFS-to-TaskTracker
>
> o Client-to-HDFS stage.
> Options: A simple option is to not do anything here, i.e. rely on  
> the user.
>
> This is a reasonable option given previous remarks on the role of  
> HDFS:
>  HDFS is a staging/publishing area and a natural shared location.
> In particular this means that the system need not track
> where the client files come from.
>
>
> o HDFS-to-TaskTracker:
> Client-to-HDFS synchronization (if done at all) should happen  
> before this.
> Then HDFS-to-TaskTracker synchronization must happen right before
> the data is needed on a node.
>
>
>
> MapReduce cache API:
> -------------------
> Options:
>
> 1. No change in MapReduce framework code:
> require the user to put this logic in map() (or reduce) function:
>
>  in MyMapper constructor (or in map() on first record) user is  
> asked to add:
>
>     Cache.syncCache("/hdfs/path/fileordir", "relative/local/ 
> fileordir");
>     Cache.syncCache("..."); //etc.
>
> -----
>
> 2. Put this logic in MapReduce framework and use Job properties to
>    communicate the list of pairs (hdfs path; local path)
>
> Directories are processed recursively.
> If archives are treated specially then they are unarchived on  
> destination.
>
>
> MapReduce Job Configuration:
> ---------------------------
> Options:
>
> with No change in MapReduce framework code (see above)
>  no special Job configuration:
>    it is up to the MapRed writer to configure and run the cache  
> operations.
>
> ---
> with Logic in MapReduce framework (see above)
>  some simple Job configuration
>
> JobConf.addCachePathPair(String, String)
> JobConf.addCachePathPair("/hdfs/path/fileordir", "relative/local/ 
> fileordir");
>
>
>
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the  
> administrators:
>    http://issues.apache.org/jira/secure/Administrators.jspa
> -
> For more information on JIRA, see:
>    http://www.atlassian.com/software/jira
>


From MAILER-DAEMON Thu Jun  8 02:35:34 2006
Return-Path: 
 <hadoop-dev-return-2000-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91101 invoked from network); 8 Jun 2006 02:35:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jun 2006 02:35:34 -0000
Received: (qmail 39905 invoked by uid 500); 8 Jun 2006 02:35:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 39865 invoked by uid 500); 8 Jun 2006 02:35:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 39856 invoked by uid 99); 8 Jun 2006 02:35:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 19:35:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 19:35:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D1CA57142C8
	for <hadoop-dev@lucene.apache.org>; Thu,  8 Jun 2006 02:34:29 +0000 (GMT)
Message-ID: <19949403.1149734069856.JavaMail.jira@brutus>
Date: Thu, 8 Jun 2006 02:34:29 +0000 (GMT+00:00)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-289) Datanodes need to catch
 SocketTimeoutException and UnregisteredDatanodeException
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Datanodes need to catch SocketTimeoutException and UnregisteredDatanodeException
--------------------------------------------------------------------------------

         Key: HADOOP-289
         URL: http://issues.apache.org/jira/browse/HADOOP-289
     Project: Hadoop
        Type: Bug

  Components: dfs  
    Versions: 0.3.1    
    Reporter: Konstantin Shvachko
 Assigned to: Konstantin Shvachko 
     Fix For: 0.3.2


- Datanode needs to catch SocketTimeoutException when registering otherwise it goes down
the same way as when the namenode is not available (HADOOP-282).
- UnregisteredDatanodeException need to be caught for all non-registering requests. The data
node should be shutdown in this case. Otherwise it will loop infinitely and consume namenode resources.


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun  8 02:44:35 2006
Return-Path: 
 <hadoop-dev-return-2001-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93641 invoked from network); 8 Jun 2006 02:44:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jun 2006 02:44:35 -0000
Received: (qmail 56221 invoked by uid 500); 8 Jun 2006 02:44:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 56195 invoked by uid 500); 8 Jun 2006 02:44:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 56186 invoked by uid 99); 8 Jun 2006 02:44:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 19:44:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 19:44:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E8EEA7142C8
	for <hadoop-dev@lucene.apache.org>; Thu,  8 Jun 2006 02:43:30 +0000 (GMT)
Message-ID: <521510.1149734610951.JavaMail.jira@brutus>
Date: Thu, 8 Jun 2006 02:43:30 +0000 (GMT+00:00)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-289) Datanodes need to catch
 SocketTimeoutException and UnregisteredDatanodeException
In-Reply-To: <19949403.1149734069856.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-289?page=all ]

Konstantin Shvachko updated HADOOP-289:
---------------------------------------

    Attachment: DatanodeExceptions.patch

This patch fixes the two problems described.
I placed all registration logic inside the DataNode.register(), seems more logical to me.
There is also a simple null value checkup included for FSNamesystem,
didn't want to create a separate  issue for that.


> Datanodes need to catch SocketTimeoutException and UnregisteredDatanodeException
> --------------------------------------------------------------------------------
>
>          Key: HADOOP-289
>          URL: http://issues.apache.org/jira/browse/HADOOP-289
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.3.1
>     Reporter: Konstantin Shvachko
>     Assignee: Konstantin Shvachko
>      Fix For: 0.3.2
>  Attachments: DatanodeExceptions.patch
>
> - Datanode needs to catch SocketTimeoutException when registering otherwise it goes down
> the same way as when the namenode is not available (HADOOP-282).
> - UnregisteredDatanodeException need to be caught for all non-registering requests. The data
> node should be shutdown in this case. Otherwise it will loop infinitely and consume namenode resources.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun  8 04:20:40 2006
Return-Path: 
 <hadoop-dev-return-2002-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 21054 invoked from network); 8 Jun 2006 04:20:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jun 2006 04:20:40 -0000
Received: (qmail 67862 invoked by uid 500); 8 Jun 2006 04:20:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 67831 invoked by uid 500); 8 Jun 2006 04:20:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 67753 invoked by uid 99); 8 Jun 2006 04:20:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 21:20:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 21:20:36 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9E4477142CF
	for <hadoop-dev@lucene.apache.org>; Thu,  8 Jun 2006 04:19:33 +0000 (GMT)
Message-ID: <16313882.1149740373561.JavaMail.jira@brutus>
Date: Thu, 8 Jun 2006 04:19:33 +0000 (GMT+00:00)
From: "Dennis Kubes (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-290) Fix Datanode transfer thread logging
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Fix Datanode transfer thread logging
------------------------------------

         Key: HADOOP-290
         URL: http://issues.apache.org/jira/browse/HADOOP-290
     Project: Hadoop
        Type: Bug

  Components: dfs  
    Versions: 0.4.0    
 Environment: linux, java 1.5
    Reporter: Dennis Kubes
    Priority: Minor


Under the current datanode the logging of "Starting thread to transfer block" doesn't print out the hosts that it is transferring to, it prints out a java array toString.  This patch fixes this and prints out the hostnames and ports for all hosts we are tranferring to.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun  8 04:22:34 2006
Return-Path: 
 <hadoop-dev-return-2003-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 22443 invoked from network); 8 Jun 2006 04:22:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jun 2006 04:22:34 -0000
Received: (qmail 69222 invoked by uid 500); 8 Jun 2006 04:22:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 69205 invoked by uid 500); 8 Jun 2006 04:22:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 69194 invoked by uid 99); 8 Jun 2006 04:22:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 21:22:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 21:22:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8D3EB7142C8
	for <hadoop-dev@lucene.apache.org>; Thu,  8 Jun 2006 04:21:30 +0000 (GMT)
Message-ID: <9779450.1149740490575.JavaMail.jira@brutus>
Date: Thu, 8 Jun 2006 04:21:30 +0000 (GMT+00:00)
From: "Dennis Kubes (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-290) Fix Datanode transfer thread logging
In-Reply-To: <16313882.1149740373561.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-290?page=all ]

Dennis Kubes updated HADOOP-290:
--------------------------------

    Attachment: logging_patch

Patch fixes logging in datanode to print out transfer hosts.

> Fix Datanode transfer thread logging
> ------------------------------------
>
>          Key: HADOOP-290
>          URL: http://issues.apache.org/jira/browse/HADOOP-290
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.4.0
>  Environment: linux, java 1.5
>     Reporter: Dennis Kubes
>     Priority: Minor
>  Attachments: logging_patch
>
> Under the current datanode the logging of "Starting thread to transfer block" doesn't print out the hosts that it is transferring to, it prints out a java array toString.  This patch fixes this and prints out the hostnames and ports for all hosts we are tranferring to.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun  8 10:42:34 2006
Return-Path: 
 <hadoop-dev-return-2004-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 29511 invoked from network); 8 Jun 2006 10:42:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jun 2006 10:42:34 -0000
Received: (qmail 22970 invoked by uid 500); 8 Jun 2006 10:42:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 22944 invoked by uid 500); 8 Jun 2006 10:42:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22935 invoked by uid 99); 8 Jun 2006 10:42:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 03:42:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 03:42:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D43F27141F1
	for <hadoop-dev@lucene.apache.org>; Thu,  8 Jun 2006 10:41:29 +0000 (GMT)
Message-ID: <10733487.1149763289866.JavaMail.jira@brutus>
Date: Thu, 8 Jun 2006 10:41:29 +0000 (GMT+00:00)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-291) Hadoop Log Archiver/Analyzer utility
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hadoop Log Archiver/Analyzer utility
------------------------------------

         Key: HADOOP-291
         URL: http://issues.apache.org/jira/browse/HADOOP-291
     Project: Hadoop
        Type: New Feature

  Components: util  
    Reporter: Arun C Murthy


Overview of the log archiver/analyzer utility...

1. Input
  The tool takes as input a list of directory URLs, each url could also we associated with a file-pattern to specify what pattern of files in that directory are to be used.
  e.g. http://g1015:50030/logs/hadoop-sameer-jobtracker-*
         file:///export/crawlspace/sanjay/hadoop/trunk/run/logs/haddop-sanjay-namenode-* (local disk on the machine on which the job was submitted)

2. The tool supports 2 main functions:

  a) Archival
    Archive the logs in the DFS in the following hierarchy:
   /users/<username>/log-archive/YYYY/mm/dd/HHMMSS.log by default 
   Or a user-specified directory and then: 
   <input-dir>/YYYY/mm/dd/HHMMSS.log

  b) Processing with simple sort/grep primitives
    Archive the logs as above and then grep for lines with given pattern (e.g. INFO) and then sort with spec e.g. <logger><level><date>. (Note: This is proposed with current log4j based logging in mind... do we need anything more generic?). The sort/grep specs are user-provided; along with directory URLs.

3. Thoughts on implementation...

  a) Archival
    Current idea is to put a .jsp page (src/webapps) on each of the nodes; which then does a *copyFromLocal* of the log-file into the DFS. The jobtracker will fire n map-tasks which only hit the jsp page as per the directory URLs. The reduce-task is a no-op and only collects statistics on failures (if any).

  b) Processing with sort/grep
    Here, the tool first archives the files as above and then another set of map-reduce tasks will do the sort/grep on the files in DFS with given specs.


                                                                                          - * - * - 

 Suggestions/corrections welcome...

thanks,
Arun

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun  8 15:44:36 2006
Return-Path: 
 <hadoop-dev-return-2005-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52290 invoked from network); 8 Jun 2006 15:44:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jun 2006 15:44:36 -0000
Received: (qmail 22516 invoked by uid 500); 8 Jun 2006 15:44:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 22494 invoked by uid 500); 8 Jun 2006 15:44:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22483 invoked by uid 99); 8 Jun 2006 15:44:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 08:44:35 -0700
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=INFO_TLD
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 08:44:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CD8AE7142C9
	for <hadoop-dev@lucene.apache.org>; Thu,  8 Jun 2006 15:43:30 +0000 (GMT)
Message-ID: <13147329.1149781410838.JavaMail.jira@brutus>
Date: Thu, 8 Jun 2006 15:43:30 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-290) Fix Datanode transfer thread logging
In-Reply-To: <16313882.1149740373561.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-290?page=comments#action_12415367 ] 

Owen O'Malley commented on HADOOP-290:
--------------------------------------

If you are doing anything other than a simple expression for logging, you should wrap the whole block in a check to see if it will be logged.

if (LOG.isInfoEnabled()) {
   ...
   LOG.info(...);
}

That way if someone has logging turned off, they don't do the work of constructing the message. 

> Fix Datanode transfer thread logging
> ------------------------------------
>
>          Key: HADOOP-290
>          URL: http://issues.apache.org/jira/browse/HADOOP-290
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.4.0
>  Environment: linux, java 1.5
>     Reporter: Dennis Kubes
>     Priority: Minor
>  Attachments: logging_patch
>
> Under the current datanode the logging of "Starting thread to transfer block" doesn't print out the hosts that it is transferring to, it prints out a java array toString.  This patch fixes this and prints out the hostnames and ports for all hosts we are tranferring to.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun  8 17:37:36 2006
Return-Path: 
 <hadoop-dev-return-2006-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93966 invoked from network); 8 Jun 2006 17:37:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jun 2006 17:37:36 -0000
Received: (qmail 81004 invoked by uid 500); 8 Jun 2006 17:37:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 80974 invoked by uid 500); 8 Jun 2006 17:37:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 80964 invoked by uid 99); 8 Jun 2006 17:37:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 10:37:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 10:37:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 21B2C7142C9
	for <hadoop-dev@lucene.apache.org>; Thu,  8 Jun 2006 17:36:31 +0000 (GMT)
Message-ID: <26382438.1149788191135.JavaMail.jira@brutus>
Date: Thu, 8 Jun 2006 17:36:31 +0000 (GMT+00:00)
From: "Benjamin Reed (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-287) Speed up SequenceFile sort with memory
 reduction
In-Reply-To: <30420683.1149716489884.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-287?page=all ]

Benjamin Reed updated HADOOP-287:
---------------------------------

    Attachment: zoom-sort.patch

My previous patch had two minor typos that gave incorrect results. This patch should work.

> Speed up SequenceFile sort with memory reduction
> ------------------------------------------------
>
>          Key: HADOOP-287
>          URL: http://issues.apache.org/jira/browse/HADOOP-287
>      Project: Hadoop
>         Type: Improvement

>   Components: io
>     Versions: 0.3.2
>     Reporter: Benjamin Reed
>  Attachments: zoom-sort.patch, zoom-sort.patch
>
> I replaced the merge sort with a quick sort and it yielded approx 30% improvement in sort time. It also reduced the memory requirement for sorting because the sort is done in place.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun  8 19:19:36 2006
Return-Path: 
 <hadoop-dev-return-2007-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 28411 invoked from network); 8 Jun 2006 19:19:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jun 2006 19:19:36 -0000
Received: (qmail 17263 invoked by uid 500); 8 Jun 2006 19:19:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17238 invoked by uid 500); 8 Jun 2006 19:19:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17211 invoked by uid 99); 8 Jun 2006 19:19:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 12:19:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 12:19:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8EC277142C9
	for <hadoop-dev@lucene.apache.org>; Thu,  8 Jun 2006 19:18:30 +0000 (GMT)
Message-ID: <24748037.1149794310581.JavaMail.jira@brutus>
Date: Thu, 8 Jun 2006 19:18:30 +0000 (GMT+00:00)
From: "Dennis Kubes (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-290) Fix Datanode transfer thread logging
In-Reply-To: <16313882.1149740373561.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-290?page=all ]

Dennis Kubes updated HADOOP-290:
--------------------------------

    Attachment: logging_patch2

Updated patch with LOG.isInfoEnabled().  Thanks for the tip Owen.

> Fix Datanode transfer thread logging
> ------------------------------------
>
>          Key: HADOOP-290
>          URL: http://issues.apache.org/jira/browse/HADOOP-290
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.4.0
>  Environment: linux, java 1.5
>     Reporter: Dennis Kubes
>     Priority: Minor
>  Attachments: logging_patch, logging_patch2
>
> Under the current datanode the logging of "Starting thread to transfer block" doesn't print out the hosts that it is transferring to, it prints out a java array toString.  This patch fixes this and prints out the hostnames and ports for all hosts we are tranferring to.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun  8 19:21:38 2006
Return-Path: 
 <hadoop-dev-return-2008-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34892 invoked from network); 8 Jun 2006 19:21:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jun 2006 19:21:38 -0000
Received: (qmail 20033 invoked by uid 500); 8 Jun 2006 19:21:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 19973 invoked by uid 500); 8 Jun 2006 19:21:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 19937 invoked by uid 99); 8 Jun 2006 19:21:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 12:21:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 12:21:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8F9F37142C9
	for <hadoop-dev@lucene.apache.org>; Thu,  8 Jun 2006 19:20:30 +0000 (GMT)
Message-ID: <682537.1149794430584.JavaMail.jira@brutus>
Date: Thu, 8 Jun 2006 19:20:30 +0000 (GMT+00:00)
From: "Dennis Kubes (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-290) Fix Datanode transfer thread logging
In-Reply-To: <16313882.1149740373561.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-290?page=comments#action_12415412 ] 

Dennis Kubes commented on HADOOP-290:
-------------------------------------

The logging_patch2 is the updated patch with LOG.isInfoEnabled(). 

> Fix Datanode transfer thread logging
> ------------------------------------
>
>          Key: HADOOP-290
>          URL: http://issues.apache.org/jira/browse/HADOOP-290
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.4.0
>  Environment: linux, java 1.5
>     Reporter: Dennis Kubes
>     Priority: Minor
>  Attachments: logging_patch, logging_patch2
>
> Under the current datanode the logging of "Starting thread to transfer block" doesn't print out the hosts that it is transferring to, it prints out a java array toString.  This patch fixes this and prints out the hostnames and ports for all hosts we are tranferring to.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun  8 20:16:49 2006
Return-Path: 
 <hadoop-dev-return-2009-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51425 invoked from network); 8 Jun 2006 20:16:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jun 2006 20:16:49 -0000
Received: (qmail 92110 invoked by uid 500); 8 Jun 2006 20:16:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 91736 invoked by uid 500); 8 Jun 2006 20:16:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 91716 invoked by uid 99); 8 Jun 2006 20:16:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 13:16:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 13:16:35 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E12497142CC
	for <hadoop-dev@lucene.apache.org>; Thu,  8 Jun 2006 20:15:31 +0000 (GMT)
Message-ID: <2571647.1149797731919.JavaMail.jira@brutus>
Date: Thu, 8 Jun 2006 20:15:31 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-289) Datanodes need to catch
 SocketTimeoutException and UnregisteredDatanodeException
In-Reply-To: <19949403.1149734069856.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-289?page=comments#action_12415420 ] 

Doug Cutting commented on HADOOP-289:
-------------------------------------

This patch causes unit tests to fail for me.  For example, TestLocalDFS fails with:

2006-06-08 12:56:54,423 INFO  ipc.Client (Client.java:run(142)) - Client connection to 127.0.0.1:65312: starting
2006-06-08 12:56:54,432 INFO  ipc.Server (Server.java:run(233)) - Server handler 0 on 65312 call error: org.apache.hadoop.dfs.IncorrectVersionException: Unexpected version of data node reported: 0. Expecting = -2.
org.apache.hadoop.dfs.IncorrectVersionException: Unexpected version of data node reported: 0. Expecting = -2.
	at org.apache.hadoop.dfs.NameNode.verifyVersion(NameNode.java:474)
	at org.apache.hadoop.dfs.NameNode.register(NameNode.java:362)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:585)
	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:243)
	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:231)
2006-06-08 12:56:55,370 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/home/cutting/src/hadoop/test/conf/hadoop-default.xml
2006-06-08 12:56:55,390 INFO  conf.Configuration (Configuration.java:loadResource(397)) - parsing file:/home/cutting/src/hadoop/test/src/test/hadoop-site.xml
2006-06-08 12:56:55,395 WARN  fs.FSNamesystem (FSNamesystem.java:chooseTargets(1646)) - Replication requested of 1 is larger than cluster size (0). Using cluster size.
2006-06-08 12:56:55,395 WARN  dfs.StateChange (FSNamesystem.java:startFile(388)) - DIR* NameSystem.startFile: failed to create file /user/cutting/somewhat/.random.txt.crc on client hadoop because target-length is 0, below MIN_REPLICATION (1)
2006-06-08 12:56:55,396 INFO  ipc.Server (Server.java:run(233)) - Server handler 1 on 65312 call error: java.io.IOException: failed to create file /user/cutting/somewhat/.random.txt.crc on client hadoop because target-length is 0, below MIN_REPLICATION (1)
java.io.IOException: failed to create file /user/cutting/somewhat/.random.txt.crc on client hadoop because target-length is 0, below MIN_REPLICATION (1)
	at org.apache.hadoop.dfs.FSNamesystem.startFile(FSNamesystem.java:354)
	at org.apache.hadoop.dfs.NameNode.create(NameNode.java:165)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:585)
	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:243)
	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:231)


> Datanodes need to catch SocketTimeoutException and UnregisteredDatanodeException
> --------------------------------------------------------------------------------
>
>          Key: HADOOP-289
>          URL: http://issues.apache.org/jira/browse/HADOOP-289
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.3.1
>     Reporter: Konstantin Shvachko
>     Assignee: Konstantin Shvachko
>      Fix For: 0.3.2
>  Attachments: DatanodeExceptions.patch
>
> - Datanode needs to catch SocketTimeoutException when registering otherwise it goes down
> the same way as when the namenode is not available (HADOOP-282).
> - UnregisteredDatanodeException need to be caught for all non-registering requests. The data
> node should be shutdown in this case. Otherwise it will loop infinitely and consume namenode resources.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun  8 20:56:49 2006
Return-Path: 
 <hadoop-dev-return-2010-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 61095 invoked from network); 8 Jun 2006 20:56:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jun 2006 20:56:49 -0000
Received: (qmail 51395 invoked by uid 500); 8 Jun 2006 20:56:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 51300 invoked by uid 500); 8 Jun 2006 20:56:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 51192 invoked by uid 99); 8 Jun 2006 20:56:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 13:56:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 13:56:35 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 094B47142CF
	for <hadoop-dev@lucene.apache.org>; Thu,  8 Jun 2006 20:55:32 +0000 (GMT)
Message-ID: <7750003.1149800132035.JavaMail.jira@brutus>
Date: Thu, 8 Jun 2006 20:55:32 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-287) Speed up SequenceFile sort with
 memory reduction
In-Reply-To: <30420683.1149716489884.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-287?page=comments#action_12415425 ] 

Doug Cutting commented on HADOOP-287:
-------------------------------------

This works for me now.  Thanks!  I'll commit it once we get 0.3.2 out the door.

> Speed up SequenceFile sort with memory reduction
> ------------------------------------------------
>
>          Key: HADOOP-287
>          URL: http://issues.apache.org/jira/browse/HADOOP-287
>      Project: Hadoop
>         Type: Improvement

>   Components: io
>     Versions: 0.3.2
>     Reporter: Benjamin Reed
>  Attachments: zoom-sort.patch, zoom-sort.patch
>
> I replaced the merge sort with a quick sort and it yielded approx 30% improvement in sort time. It also reduced the memory requirement for sorting because the sort is done in place.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun  8 20:58:36 2006
Return-Path: 
 <hadoop-dev-return-2011-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 61405 invoked from network); 8 Jun 2006 20:58:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jun 2006 20:58:36 -0000
Received: (qmail 53550 invoked by uid 500); 8 Jun 2006 20:58:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53515 invoked by uid 500); 8 Jun 2006 20:58:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53489 invoked by uid 99); 8 Jun 2006 20:58:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 13:58:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 13:58:35 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3393C7142C9
	for <hadoop-dev@lucene.apache.org>; Thu,  8 Jun 2006 20:57:31 +0000 (GMT)
Message-ID: <7440705.1149800251208.JavaMail.jira@brutus>
Date: Thu, 8 Jun 2006 20:57:31 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-287) Speed up SequenceFile sort with
 memory reduction
In-Reply-To: <30420683.1149716489884.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-287?page=all ]

Doug Cutting reassigned HADOOP-287:
-----------------------------------

    Assign To: Doug Cutting

> Speed up SequenceFile sort with memory reduction
> ------------------------------------------------
>
>          Key: HADOOP-287
>          URL: http://issues.apache.org/jira/browse/HADOOP-287
>      Project: Hadoop
>         Type: Improvement

>   Components: io
>     Versions: 0.3.2
>     Reporter: Benjamin Reed
>     Assignee: Doug Cutting
>  Attachments: zoom-sort.patch, zoom-sort.patch
>
> I replaced the merge sort with a quick sort and it yielded approx 30% improvement in sort time. It also reduced the memory requirement for sorting because the sort is done in place.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun  8 21:24:37 2006
Return-Path: 
 <hadoop-dev-return-2012-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68092 invoked from network); 8 Jun 2006 21:24:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jun 2006 21:24:37 -0000
Received: (qmail 89189 invoked by uid 500); 8 Jun 2006 21:24:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 89160 invoked by uid 500); 8 Jun 2006 21:24:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 89151 invoked by uid 99); 8 Jun 2006 21:24:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 14:24:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 14:24:35 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F35B271429B
	for <hadoop-dev@lucene.apache.org>; Thu,  8 Jun 2006 21:23:31 +0000 (GMT)
Message-ID: <11644124.1149801811978.JavaMail.jira@brutus>
Date: Thu, 8 Jun 2006 21:23:31 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-269) add FAQ to Wiki
In-Reply-To: <21882133.1149188669764.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-269?page=all ]
     
Doug Cutting resolved HADOOP-269:
---------------------------------

    Fix Version: 0.3.2
                     (was: 0.4.0)
     Resolution: Fixed

I just added an FAQ to the wiki.

http://wiki.apache.org/lucene-hadoop/FAQ


> add FAQ to Wiki
> ---------------
>
>          Key: HADOOP-269
>          URL: http://issues.apache.org/jira/browse/HADOOP-269
>      Project: Hadoop
>         Type: Improvement

>   Components: documentation
>     Reporter: Doug Cutting
>     Assignee: Doug Cutting
>      Fix For: 0.3.2

>
> Hadoop should have an FAQ in the Wiki.  We can bootstrap this by reviewing the mailing list archives.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun  9 00:48:35 2006
Return-Path: 
 <hadoop-dev-return-2013-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12567 invoked from network); 9 Jun 2006 00:48:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2006 00:48:35 -0000
Received: (qmail 26668 invoked by uid 500); 9 Jun 2006 00:48:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26644 invoked by uid 500); 9 Jun 2006 00:48:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26635 invoked by uid 99); 9 Jun 2006 00:48:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 17:48:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 17:48:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CC5257142C9
	for <hadoop-dev@lucene.apache.org>; Fri,  9 Jun 2006 00:47:29 +0000 (GMT)
Message-ID: <6080104.1149814049834.JavaMail.jira@brutus>
Date: Fri, 9 Jun 2006 00:47:29 +0000 (GMT+00:00)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-292) hadoop dfs commands should not output
 superfluous data to stdout
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hadoop dfs commands should not output superfluous data to stdout
----------------------------------------------------------------

         Key: HADOOP-292
         URL: http://issues.apache.org/jira/browse/HADOOP-292
     Project: Hadoop
        Type: Bug

  Components: dfs  
    Reporter: Yoram Arnon
    Priority: Minor


running a command such as hadoop dfs -ls /data
produces output such as the following:
06/06/08 17:42:32 INFO conf.Configuration: parsing jar:file: /hadoop/hadoop-0.4-dev/hadoop-0.4-dev.jar!/hadoop-default.xml
06/06/08 17:42:32 INFO conf.Configuration: parsing file:hadoop/hadoop-site.xml
06/06/08 17:42:32 INFO dfs.DistributedFileSystem: No FS indicated, using default:kry1200:8020
06/06/08 17:42:32 INFO ipc.Client: Client connection to 72.30.117.134:8020: starting
Found 2 items
/data/a <dir>
/data/b     <dir>

the first few lines shouldn't be there.
it's especially annoying when running -cat into a file or into some post processing program, but in general, the output should be clean.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun  9 00:50:35 2006
Return-Path: 
 <hadoop-dev-return-2014-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12892 invoked from network); 9 Jun 2006 00:50:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2006 00:50:35 -0000
Received: (qmail 27257 invoked by uid 500); 9 Jun 2006 00:50:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 27234 invoked by uid 500); 9 Jun 2006 00:50:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 27221 invoked by uid 99); 9 Jun 2006 00:50:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 17:50:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 17:50:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CEC3A7142C9
	for <hadoop-dev@lucene.apache.org>; Fri,  9 Jun 2006 00:49:29 +0000 (GMT)
Message-ID: <25233677.1149814169844.JavaMail.jira@brutus>
Date: Fri, 9 Jun 2006 00:49:29 +0000 (GMT+00:00)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-293) map reduce job fail without reporting
 a reason
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

map reduce job fail without reporting a reason
----------------------------------------------

         Key: HADOOP-293
         URL: http://issues.apache.org/jira/browse/HADOOP-293
     Project: Hadoop
        Type: Bug

  Components: mapred  
    Versions: 0.3.1    
    Reporter: Yoram Arnon
     Fix For: 0.4.0


Often I see in the WI reports of tasks failing without information reported as to the reason of the failure.
It makes analysis and fixing the problem much harder.
The reason for the failure should always be reported in the WI.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun  9 00:53:36 2006
Return-Path: 
 <hadoop-dev-return-2015-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 13783 invoked from network); 9 Jun 2006 00:53:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2006 00:53:36 -0000
Received: (qmail 29231 invoked by uid 500); 9 Jun 2006 00:53:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 29199 invoked by uid 500); 9 Jun 2006 00:53:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 29190 invoked by uid 99); 9 Jun 2006 00:53:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 17:53:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 17:53:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8D7DD71429B
	for <hadoop-dev@lucene.apache.org>; Fri,  9 Jun 2006 00:52:30 +0000 (GMT)
Message-ID: <30628167.1149814350576.JavaMail.jira@brutus>
Date: Fri, 9 Jun 2006 00:52:30 +0000 (GMT+00:00)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-289) Datanodes need to catch
 SocketTimeoutException and UnregisteredDatanodeException
In-Reply-To: <19949403.1149734069856.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-289?page=all ]

Konstantin Shvachko updated HADOOP-289:
---------------------------------------

    Attachment: DatanodeExceptions-2.patch

Resubmitted the patch under DatanodeExceptions-2.patch. 
Not failing this time. Sorry.

> Datanodes need to catch SocketTimeoutException and UnregisteredDatanodeException
> --------------------------------------------------------------------------------
>
>          Key: HADOOP-289
>          URL: http://issues.apache.org/jira/browse/HADOOP-289
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.3.1
>     Reporter: Konstantin Shvachko
>     Assignee: Konstantin Shvachko
>      Fix For: 0.3.2
>  Attachments: DatanodeExceptions-2.patch, DatanodeExceptions.patch
>
> - Datanode needs to catch SocketTimeoutException when registering otherwise it goes down
> the same way as when the namenode is not available (HADOOP-282).
> - UnregisteredDatanodeException need to be caught for all non-registering requests. The data
> node should be shutdown in this case. Otherwise it will loop infinitely and consume namenode resources.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun  9 01:10:36 2006
Return-Path: 
 <hadoop-dev-return-2016-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16821 invoked from network); 9 Jun 2006 01:10:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2006 01:10:36 -0000
Received: (qmail 45270 invoked by uid 500); 9 Jun 2006 01:10:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 45236 invoked by uid 500); 9 Jun 2006 01:10:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 45227 invoked by uid 99); 9 Jun 2006 01:10:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 18:10:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 18:10:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A39977142C9
	for <hadoop-dev@lucene.apache.org>; Fri,  9 Jun 2006 01:09:30 +0000 (GMT)
Message-ID: <33012699.1149815370667.JavaMail.jira@brutus>
Date: Fri, 9 Jun 2006 01:09:30 +0000 (GMT+00:00)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-292) hadoop dfs commands should not output
 superfluous data to stdout
In-Reply-To: <6080104.1149814049834.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-292?page=all ]

Yoram Arnon updated HADOOP-292:
-------------------------------

    Description: 
running a command such as hadoop dfs -ls /data
produces output such as the following:
06/06/08 17:42:32 INFO conf.Configuration: parsing jar:file: /hadoop/hadoop-0.4-dev/hadoop-0.4-dev.jar!/hadoop-default.xml
06/06/08 17:42:32 INFO conf.Configuration: parsing file:hadoop/hadoop-site.xml
06/06/08 17:42:32 INFO dfs.DistributedFileSystem: No FS indicated, using default:kry1200:8020
06/06/08 17:42:32 INFO ipc.Client: Client connection to 172.30.111.134:8020: starting
Found 2 items
/data/a <dir>
/data/b     <dir>

the first few lines shouldn't be there.
it's especially annoying when running -cat into a file or into some post processing program, but in general, the output should be clean.

  was:
running a command such as hadoop dfs -ls /data
produces output such as the following:
06/06/08 17:42:32 INFO conf.Configuration: parsing jar:file: /hadoop/hadoop-0.4-dev/hadoop-0.4-dev.jar!/hadoop-default.xml
06/06/08 17:42:32 INFO conf.Configuration: parsing file:hadoop/hadoop-site.xml
06/06/08 17:42:32 INFO dfs.DistributedFileSystem: No FS indicated, using default:kry1200:8020
06/06/08 17:42:32 INFO ipc.Client: Client connection to 72.30.117.134:8020: starting
Found 2 items
/data/a <dir>
/data/b     <dir>

the first few lines shouldn't be there.
it's especially annoying when running -cat into a file or into some post processing program, but in general, the output should be clean.


> hadoop dfs commands should not output superfluous data to stdout
> ----------------------------------------------------------------
>
>          Key: HADOOP-292
>          URL: http://issues.apache.org/jira/browse/HADOOP-292
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Reporter: Yoram Arnon
>     Priority: Minor

>
> running a command such as hadoop dfs -ls /data
> produces output such as the following:
> 06/06/08 17:42:32 INFO conf.Configuration: parsing jar:file: /hadoop/hadoop-0.4-dev/hadoop-0.4-dev.jar!/hadoop-default.xml
> 06/06/08 17:42:32 INFO conf.Configuration: parsing file:hadoop/hadoop-site.xml
> 06/06/08 17:42:32 INFO dfs.DistributedFileSystem: No FS indicated, using default:kry1200:8020
> 06/06/08 17:42:32 INFO ipc.Client: Client connection to 172.30.111.134:8020: starting
> Found 2 items
> /data/a <dir>
> /data/b     <dir>
> the first few lines shouldn't be there.
> it's especially annoying when running -cat into a file or into some post processing program, but in general, the output should be clean.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun  9 02:15:36 2006
Return-Path: 
 <hadoop-dev-return-2017-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32071 invoked from network); 9 Jun 2006 02:15:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2006 02:15:36 -0000
Received: (qmail 974 invoked by uid 500); 9 Jun 2006 02:15:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 919 invoked by uid 500); 9 Jun 2006 02:15:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 910 invoked by uid 99); 9 Jun 2006 02:15:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 19:15:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 19:15:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8CD2B714283
	for <hadoop-dev@lucene.apache.org>; Fri,  9 Jun 2006 02:14:30 +0000 (GMT)
Message-ID: <24076260.1149819270573.JavaMail.jira@brutus>
Date: Fri, 9 Jun 2006 02:14:30 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-292) hadoop dfs commands should not output
 superfluous data to stdout
In-Reply-To: <6080104.1149814049834.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-292?page=all ]

Owen O'Malley updated HADOOP-292:
---------------------------------

    Attachment: stderr-log.patch

This patch renames the "stdout" log4j appender to "console" and sends the log events to stderr instead of stdout. This _partially_ fixes Yoram's problem.

> hadoop dfs commands should not output superfluous data to stdout
> ----------------------------------------------------------------
>
>          Key: HADOOP-292
>          URL: http://issues.apache.org/jira/browse/HADOOP-292
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Reporter: Yoram Arnon
>     Priority: Minor
>  Attachments: stderr-log.patch
>
> running a command such as hadoop dfs -ls /data
> produces output such as the following:
> 06/06/08 17:42:32 INFO conf.Configuration: parsing jar:file: /hadoop/hadoop-0.4-dev/hadoop-0.4-dev.jar!/hadoop-default.xml
> 06/06/08 17:42:32 INFO conf.Configuration: parsing file:hadoop/hadoop-site.xml
> 06/06/08 17:42:32 INFO dfs.DistributedFileSystem: No FS indicated, using default:kry1200:8020
> 06/06/08 17:42:32 INFO ipc.Client: Client connection to 172.30.111.134:8020: starting
> Found 2 items
> /data/a <dir>
> /data/b     <dir>
> the first few lines shouldn't be there.
> it's especially annoying when running -cat into a file or into some post processing program, but in general, the output should be clean.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun  9 02:55:36 2006
Return-Path: 
 <hadoop-dev-return-2018-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 38345 invoked from network); 9 Jun 2006 02:55:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2006 02:55:36 -0000
Received: (qmail 26556 invoked by uid 500); 9 Jun 2006 02:55:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26531 invoked by uid 500); 9 Jun 2006 02:55:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26522 invoked by uid 99); 9 Jun 2006 02:55:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 19:55:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 19:55:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8FD887141FA
	for <hadoop-dev@lucene.apache.org>; Fri,  9 Jun 2006 02:54:30 +0000 (GMT)
Message-ID: <25422273.1149821670586.JavaMail.jira@brutus>
Date: Fri, 9 Jun 2006 02:54:30 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-292) hadoop dfs commands should not
 output superfluous data to stdout
In-Reply-To: <6080104.1149814049834.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-292?page=comments#action_12415465 ] 

Owen O'Malley commented on HADOOP-292:
--------------------------------------

It is also arguable whether the default logger for applications should be "WARN,console" or "INFO,console". The default is currently info, which is why you're seeing those messages. The default can be changed via the environment variable HADOOP_ROOT_LOGGER or the log4j.properties file in the config directory.

> hadoop dfs commands should not output superfluous data to stdout
> ----------------------------------------------------------------
>
>          Key: HADOOP-292
>          URL: http://issues.apache.org/jira/browse/HADOOP-292
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Reporter: Yoram Arnon
>     Priority: Minor
>  Attachments: stderr-log.patch
>
> running a command such as hadoop dfs -ls /data
> produces output such as the following:
> 06/06/08 17:42:32 INFO conf.Configuration: parsing jar:file: /hadoop/hadoop-0.4-dev/hadoop-0.4-dev.jar!/hadoop-default.xml
> 06/06/08 17:42:32 INFO conf.Configuration: parsing file:hadoop/hadoop-site.xml
> 06/06/08 17:42:32 INFO dfs.DistributedFileSystem: No FS indicated, using default:kry1200:8020
> 06/06/08 17:42:32 INFO ipc.Client: Client connection to 172.30.111.134:8020: starting
> Found 2 items
> /data/a <dir>
> /data/b     <dir>
> the first few lines shouldn't be there.
> it's especially annoying when running -cat into a file or into some post processing program, but in general, the output should be clean.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun  9 03:10:36 2006
Return-Path: 
 <hadoop-dev-return-2019-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40125 invoked from network); 9 Jun 2006 03:10:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2006 03:10:36 -0000
Received: (qmail 34970 invoked by uid 500); 9 Jun 2006 03:10:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 34941 invoked by uid 500); 9 Jun 2006 03:10:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 34932 invoked by uid 99); 9 Jun 2006 03:10:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 20:10:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 20:10:35 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A71E07141FA
	for <hadoop-dev@lucene.apache.org>; Fri,  9 Jun 2006 03:09:30 +0000 (GMT)
Message-ID: <3723310.1149822570681.JavaMail.jira@brutus>
Date: Fri, 9 Jun 2006 03:09:30 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-289) Datanodes need to catch
 SocketTimeoutException and UnregisteredDatanodeException
In-Reply-To: <19949403.1149734069856.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-289?page=comments#action_12415467 ] 

Owen O'Malley commented on HADOOP-289:
--------------------------------------

Please replace the getLocalizedMessage and implicit toString with calls to StringUtils.stringifyException, which includes both the message and the call stack. The call stack helps a lot in finding and debugging the problem.

> Datanodes need to catch SocketTimeoutException and UnregisteredDatanodeException
> --------------------------------------------------------------------------------
>
>          Key: HADOOP-289
>          URL: http://issues.apache.org/jira/browse/HADOOP-289
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.3.1
>     Reporter: Konstantin Shvachko
>     Assignee: Konstantin Shvachko
>      Fix For: 0.3.2
>  Attachments: DatanodeExceptions-2.patch, DatanodeExceptions.patch
>
> - Datanode needs to catch SocketTimeoutException when registering otherwise it goes down
> the same way as when the namenode is not available (HADOOP-282).
> - UnregisteredDatanodeException need to be caught for all non-registering requests. The data
> node should be shutdown in this case. Otherwise it will loop infinitely and consume namenode resources.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun  9 17:19:37 2006
Return-Path: 
 <hadoop-dev-return-2020-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84463 invoked from network); 9 Jun 2006 17:19:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2006 17:19:37 -0000
Received: (qmail 23105 invoked by uid 500); 9 Jun 2006 17:19:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23077 invoked by uid 500); 9 Jun 2006 17:19:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23068 invoked by uid 99); 9 Jun 2006 17:19:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 10:19:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 10:19:35 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 909E57141FA
	for <hadoop-dev@lucene.apache.org>; Fri,  9 Jun 2006 17:18:30 +0000 (GMT)
Message-ID: <118208.1149873510589.JavaMail.jira@brutus>
Date: Fri, 9 Jun 2006 17:18:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-289) Datanodes need to catch
 SocketTimeoutException and UnregisteredDatanodeException
In-Reply-To: <19949403.1149734069856.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-289?page=all ]
     
Doug Cutting resolved HADOOP-289:
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Konstantin.

> Datanodes need to catch SocketTimeoutException and UnregisteredDatanodeException
> --------------------------------------------------------------------------------
>
>          Key: HADOOP-289
>          URL: http://issues.apache.org/jira/browse/HADOOP-289
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.3.1
>     Reporter: Konstantin Shvachko
>     Assignee: Konstantin Shvachko
>      Fix For: 0.3.2
>  Attachments: DatanodeExceptions-2.patch, DatanodeExceptions.patch
>
> - Datanode needs to catch SocketTimeoutException when registering otherwise it goes down
> the same way as when the namenode is not available (HADOOP-282).
> - UnregisteredDatanodeException need to be caught for all non-registering requests. The data
> node should be shutdown in this case. Otherwise it will loop infinitely and consume namenode resources.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun  9 18:06:37 2006
Return-Path: 
 <hadoop-dev-return-2021-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 98949 invoked from network); 9 Jun 2006 18:06:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2006 18:06:37 -0000
Received: (qmail 96162 invoked by uid 500); 9 Jun 2006 18:06:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 96134 invoked by uid 500); 9 Jun 2006 18:06:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 96125 invoked by uid 99); 9 Jun 2006 18:06:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 11:06:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 11:06:36 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 03EE97141FA
	for <hadoop-dev@lucene.apache.org>; Fri,  9 Jun 2006 18:05:31 +0000 (GMT)
Message-ID: <2069600.1149876331013.JavaMail.jira@brutus>
Date: Fri, 9 Jun 2006 18:05:31 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-292) hadoop dfs commands should not output
 superfluous data to stdout
In-Reply-To: <6080104.1149814049834.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-292?page=all ]
     
Doug Cutting resolved HADOOP-292:
---------------------------------

    Fix Version: 0.3.2
     Resolution: Fixed
      Assign To: Owen O'Malley

I just committed Owen's patch, for inclusion in 0.3.2.  If this fix is not sufficient, please file a new bug.  Thanks!

> hadoop dfs commands should not output superfluous data to stdout
> ----------------------------------------------------------------
>
>          Key: HADOOP-292
>          URL: http://issues.apache.org/jira/browse/HADOOP-292
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Reporter: Yoram Arnon
>     Assignee: Owen O'Malley
>     Priority: Minor
>      Fix For: 0.3.2
>  Attachments: stderr-log.patch
>
> running a command such as hadoop dfs -ls /data
> produces output such as the following:
> 06/06/08 17:42:32 INFO conf.Configuration: parsing jar:file: /hadoop/hadoop-0.4-dev/hadoop-0.4-dev.jar!/hadoop-default.xml
> 06/06/08 17:42:32 INFO conf.Configuration: parsing file:hadoop/hadoop-site.xml
> 06/06/08 17:42:32 INFO dfs.DistributedFileSystem: No FS indicated, using default:kry1200:8020
> 06/06/08 17:42:32 INFO ipc.Client: Client connection to 172.30.111.134:8020: starting
> Found 2 items
> /data/a <dir>
> /data/b     <dir>
> the first few lines shouldn't be there.
> it's especially annoying when running -cat into a file or into some post processing program, but in general, the output should be clean.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun  9 18:13:40 2006
Return-Path: 
 <hadoop-dev-return-2022-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 961 invoked from network); 9 Jun 2006 18:13:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2006 18:13:40 -0000
Received: (qmail 11439 invoked by uid 500); 9 Jun 2006 18:13:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 11299 invoked by uid 500); 9 Jun 2006 18:13:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 11275 invoked by uid 99); 9 Jun 2006 18:13:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 11:13:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 11:13:35 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 501947141FA
	for <hadoop-dev@lucene.apache.org>; Fri,  9 Jun 2006 18:12:30 +0000 (GMT)
Message-ID: <31148169.1149876750324.JavaMail.jira@brutus>
Date: Fri, 9 Jun 2006 18:12:30 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-294) dfs client error retries aren't
 happening (already being created and not replicated yet)
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

dfs client error retries aren't happening (already being created and not replicated yet)
----------------------------------------------------------------------------------------

         Key: HADOOP-294
         URL: http://issues.apache.org/jira/browse/HADOOP-294
     Project: Hadoop
        Type: Bug

  Components: dfs  
    Versions: 0.3.1    
    Reporter: Owen O'Malley
 Assigned to: Owen O'Malley 
     Fix For: 0.3.2


The conditions for catching the dfs error conditions that need to be retried were broken in a previous patch (HADOOP-124).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun  9 18:15:37 2006
Return-Path: 
 <hadoop-dev-return-2023-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1518 invoked from network); 9 Jun 2006 18:15:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2006 18:15:37 -0000
Received: (qmail 16973 invoked by uid 500); 9 Jun 2006 18:15:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 16949 invoked by uid 500); 9 Jun 2006 18:15:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 16939 invoked by uid 99); 9 Jun 2006 18:15:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 11:15:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 11:15:36 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D30757141F6
	for <hadoop-dev@lucene.apache.org>; Fri,  9 Jun 2006 18:14:30 +0000 (GMT)
Message-ID: <1061879.1149876870861.JavaMail.jira@brutus>
Date: Fri, 9 Jun 2006 18:14:30 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-294) dfs client error retries aren't
 happening (already being created and not replicated yet)
In-Reply-To: <31148169.1149876750324.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-294?page=all ]

Owen O'Malley updated HADOOP-294:
---------------------------------

    Attachment: fix-dfs-err-catch.patch

There were two missing not operators in the relevant string checks.

> dfs client error retries aren't happening (already being created and not replicated yet)
> ----------------------------------------------------------------------------------------
>
>          Key: HADOOP-294
>          URL: http://issues.apache.org/jira/browse/HADOOP-294
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.3.1
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.3.2
>  Attachments: fix-dfs-err-catch.patch
>
> The conditions for catching the dfs error conditions that need to be retried were broken in a previous patch (HADOOP-124).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun  9 18:37:37 2006
Return-Path: 
 <hadoop-dev-return-2024-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8878 invoked from network); 9 Jun 2006 18:37:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2006 18:37:37 -0000
Received: (qmail 56838 invoked by uid 500); 9 Jun 2006 18:37:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 56814 invoked by uid 500); 9 Jun 2006 18:37:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 56805 invoked by uid 99); 9 Jun 2006 18:37:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 11:37:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 11:37:36 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A69507141F6
	for <hadoop-dev@lucene.apache.org>; Fri,  9 Jun 2006 18:36:30 +0000 (GMT)
Message-ID: <14964127.1149878190679.JavaMail.jira@brutus>
Date: Fri, 9 Jun 2006 18:36:30 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-294) dfs client error retries aren't
 happening (already being created and not replicated yet)
In-Reply-To: <31148169.1149876750324.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-294?page=all ]

Owen O'Malley updated HADOOP-294:
---------------------------------

    Description: The conditions for catching the dfs error conditions that need to be retried were broken in a previous patch.  (was: The conditions for catching the dfs error conditions that need to be retried were broken in a previous patch (HADOOP-124).)

> dfs client error retries aren't happening (already being created and not replicated yet)
> ----------------------------------------------------------------------------------------
>
>          Key: HADOOP-294
>          URL: http://issues.apache.org/jira/browse/HADOOP-294
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.3.1
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.3.2
>  Attachments: fix-dfs-err-catch.patch
>
> The conditions for catching the dfs error conditions that need to be retried were broken in a previous patch.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun  9 18:41:44 2006
Return-Path: 
 <hadoop-dev-return-2025-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10652 invoked from network); 9 Jun 2006 18:41:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2006 18:41:44 -0000
Received: (qmail 64349 invoked by uid 500); 9 Jun 2006 18:41:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64300 invoked by uid 500); 9 Jun 2006 18:41:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64217 invoked by uid 99); 9 Jun 2006 18:41:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 11:41:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 11:41:36 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5BE167141F6
	for <hadoop-dev@lucene.apache.org>; Fri,  9 Jun 2006 18:40:31 +0000 (GMT)
Message-ID: <13700305.1149878431373.JavaMail.jira@brutus>
Date: Fri, 9 Jun 2006 18:40:31 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-294) dfs client error retries aren't
 happening (already being created and not replicated yet)
In-Reply-To: <31148169.1149876750324.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-294?page=all ]
     
Doug Cutting resolved HADOOP-294:
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Owen.

> dfs client error retries aren't happening (already being created and not replicated yet)
> ----------------------------------------------------------------------------------------
>
>          Key: HADOOP-294
>          URL: http://issues.apache.org/jira/browse/HADOOP-294
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.3.1
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.3.2
>  Attachments: fix-dfs-err-catch.patch
>
> The conditions for catching the dfs error conditions that need to be retried were broken in a previous patch.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun  9 19:33:38 2006
Return-Path: 
 <hadoop-dev-return-2026-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33854 invoked from network); 9 Jun 2006 19:33:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2006 19:33:38 -0000
Received: (qmail 49985 invoked by uid 500); 9 Jun 2006 19:33:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49935 invoked by uid 500); 9 Jun 2006 19:33:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49926 invoked by uid 99); 9 Jun 2006 19:33:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 12:33:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 12:33:36 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0FAA27141F6
	for <hadoop-dev@lucene.apache.org>; Fri,  9 Jun 2006 19:32:31 +0000 (GMT)
Message-ID: <3604356.1149881551061.JavaMail.jira@brutus>
Date: Fri, 9 Jun 2006 19:32:31 +0000 (GMT+00:00)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-123) mini map/reduce cluster for junit
 tests
In-Reply-To: <927904038.1144348524414.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-123?page=all ]

Milind Bhandarkar updated HADOOP-123:
-------------------------------------

    Attachment: minimr.patch

I have added a patch that now includes a mini-map-reduce cluster in unit tests. There are three unit tests added that use the mini-map-reduce cluster. Main changes (other than test additions) are: Now jobtracker, and tasktrackers can be cleanly shut down (earlier ctrl-c was the only way). Class path changes in test.classpath (job-tracker and task-tracker need webapps, and a temporary overriding mechanism to overriding src/test/hadoop-site.xml). Multiple task-trackers can be spawned on the same node with their respective mapred.local.dir, therefore unless explicitly overridden in hadoop-site.xml, the task uses task-tracker's mapred.local.dir.

The three new unit tests take 15 seconds, 115 seconds, and 119 seconds respectively, on my linux box. They test mini MR cluster's bringup-shutdown, a map-reduce job with local file system, and a map-reduce job with mini-DFS cluster.

By the way, Hadoop now satisfies an important requirement of being a parallel programming infrastructure. I have included a map-reduce job that estimates the value of PI using monte-carlo method :-)


> mini map/reduce cluster for junit tests
> ---------------------------------------
>
>          Key: HADOOP-123
>          URL: http://issues.apache.org/jira/browse/HADOOP-123
>      Project: Hadoop
>         Type: New Feature

>   Components: mapred
>     Versions: 0.3.0
>     Reporter: Owen O'Malley
>     Assignee: Milind Bhandarkar
>      Fix For: 0.4.0
>  Attachments: ClusterTestWordCount.patch, minimr.patch
>
> I would like a single process map-reduce pseduo-distributed cluster that can be used for unit tests. We should add a unit test with a word count map/reduce.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun 12 08:06:39 2006
Return-Path: 
 <hadoop-dev-return-2027-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 25896 invoked from network); 12 Jun 2006 08:06:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2006 08:06:39 -0000
Received: (qmail 44780 invoked by uid 500); 12 Jun 2006 08:06:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 44639 invoked by uid 500); 12 Jun 2006 08:06:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 44630 invoked by uid 99); 12 Jun 2006 08:06:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 01:06:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [74.0.0.77] (HELO linuxfly.dragonflymc.com) (74.0.0.77)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 01:06:36 -0700
Received: from [192.168.1.101] (pool-71-240-160-159.dllstx.fios.verizon.net
 [71.240.160.159])
	by linuxfly.dragonflymc.com (Postfix) with ESMTP id 2E3C0C2006B
	for <hadoop-dev@lucene.apache.org>; Mon, 12 Jun 2006 03:06:17 -0500 (CDT)
Message-ID: <448D2077.8050903@dragonflymc.com>
Date: Mon, 12 Jun 2006 03:06:15 -0500
From: Dennis Kubes <nutch-dev@dragonflymc.com>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Lease Being Release Before Completed
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi All,

I am seeing the following.  A file is attempting to close but has to 
replicate, before the replication gets finished the lease times out and 
is closed which then causes the write to fail.  Here is the log in sequence.

2006-06-12 01:58:07,999 INFO org.apache.hadoop.dfs.StateChange: BLOCK* 
NameSystem.pendingTransfer: ask andromeda01.visvo.com:50010 to replicate 
blk_-80500146
83592461050 to datanode(s) andromeda07.visvo.com:50010
2006-06-12 02:02:16,915 INFO org.apache.hadoop.fs.FSNamesystem: Removing 
lease [Lease.  Holder: DFSClient_1073590514, heldlocks: 0, 
pendingcreates: 0], leases remaining: 11
2006-06-12 02:02:20,175 INFO org.apache.hadoop.ipc.Server: Server 
connection on port 9000 from 192.168.1.240: exiting
2006-06-12 02:02:27,293 WARN org.apache.hadoop.dfs.StateChange: DIR* 
NameSystem.completeFile: failed to complete 
/user/phoenix/crawl/newsegs/20060612002155/parse_data/part-00008/data 
because dir.getFile()==null and null
2006-06-12 02:02:27,324 INFO org.apache.hadoop.ipc.Server: Server 
handler 0 on 9000 call error: java.io.IOException: Could not complete 
write to file 
/user/phoenix/crawl/newsegs/20060612002155/parse_data/part-00008/data by 
DFSClient_1073590514
java.io.IOException: Could not complete write to file 
/user/phoenix/crawl/newsegs/20060612002155/parse_data/part-00008/data by 
DFSClient_1073590514
   at org.apache.hadoop.dfs.NameNode.complete(NameNode.java:240)
   at sun.reflect.GeneratedMethodAccessor70.invoke(Unknown Source)
   at 
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
   at java.lang.reflect.Method.invoke(Method.java:585)
   at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:243)
   at org.apache.hadoop.ipc.Server$Handler.run(Server.java:231)
2006-06-12 02:02:27,962 INFO org.apache.hadoop.ipc.Server: Server 
connection on port 9000 from 192.168.1.237: exiting
2006-06-12 02:02:28,791 INFO org.apache.hadoop.ipc.Server: Server 
connection on port 9000 from 192.168.1.243: exiting

I think that in DFSOutputStream in the DFSClient file on line 1073, the 
following should be added.

namenode.renewLease( clientName.toString());

This will renew the lease while it is waiting on file completion (most 
likely replication).  The problem is that I don't know the core of 
hadoop well enough yet to understand if this will cause other problems 
so I wanted to get some feedback on this before I submit a patch.  
Please let me know if this is a valid change or if it causes other problems.

Dennis

From MAILER-DAEMON Mon Jun 12 17:18:42 2006
Return-Path: 
 <hadoop-dev-return-2028-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10314 invoked from network); 12 Jun 2006 17:18:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2006 17:18:42 -0000
Received: (qmail 72814 invoked by uid 500); 12 Jun 2006 17:18:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72794 invoked by uid 500); 12 Jun 2006 17:18:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72784 invoked by uid 99); 12 Jun 2006 17:18:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 10:18:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 10:18:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 976B771428E
	for <hadoop-dev@lucene.apache.org>; Mon, 12 Jun 2006 17:17:30 +0000 (GMT)
Message-ID: <1085439.1150132650617.JavaMail.jira@brutus>
Date: Mon, 12 Jun 2006 17:17:30 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-271) add links to task tracker http
 server from task details and failure pages
In-Reply-To: <18980326.1149204689854.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-271?page=comments#action_12415878 ] 

Owen O'Malley commented on HADOOP-271:
--------------------------------------

Don't commit this, yet. If the task tracker has been timed out, it can't find the relevant object and gets a null pointer exception. I'll change the patch to just put in the task tracker name without the link in that case.

> add links to task tracker http server from task details and failure pages
> -------------------------------------------------------------------------
>
>          Key: HADOOP-271
>          URL: http://issues.apache.org/jira/browse/HADOOP-271
>      Project: Hadoop
>         Type: Improvement

>   Components: mapred
>     Versions: 0.2.1
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>     Priority: Minor
>      Fix For: 0.4.0
>  Attachments: add-machine-links.patch
>
> Make the machine name in the list of task attempts and failures into links to the correct task tracker http server.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun 12 19:36:42 2006
Return-Path: 
 <hadoop-dev-return-2029-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68436 invoked from network); 12 Jun 2006 19:36:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2006 19:36:42 -0000
Received: (qmail 1416 invoked by uid 500); 12 Jun 2006 19:36:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 1387 invoked by uid 500); 12 Jun 2006 19:36:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 1378 invoked by uid 99); 12 Jun 2006 19:36:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 12:36:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 12:36:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8C9A57141FA
	for <hadoop-dev@lucene.apache.org>; Mon, 12 Jun 2006 19:35:30 +0000 (GMT)
Message-ID: <7055650.1150140930573.JavaMail.jira@brutus>
Date: Mon, 12 Jun 2006 19:35:30 +0000 (GMT+00:00)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-210) Namenode not able to accept
 connections
In-Reply-To: <22832248.1147306205708.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-210?page=all ]

Devaraj Das updated HADOOP-210:
-------------------------------

    Attachment: nio.patch

Attached is the patch for doing selector-based RPC communication.

> Namenode not able to accept connections
> ---------------------------------------
>
>          Key: HADOOP-210
>          URL: http://issues.apache.org/jira/browse/HADOOP-210
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>  Environment: linux
>     Reporter: Mahadev konar
>     Assignee: Mahadev konar
>  Attachments: nio.patch
>
> I am running owen's random writer on a 627 node cluster (writing 10GB/node).  After running for a while (map 12% reduce 1%) I get the following error on the Namenode:
> Exception in thread "Server listener on port 60000" java.lang.OutOfMemoryError: unable to create new native thread
>         at java.lang.Thread.start0(Native Method)
>         at java.lang.Thread.start(Thread.java:574)
>         at org.apache.hadoop.ipc.Server$Listener.run(Server.java:105)
> After this, the namenode does not seem to be accepting connections from any of the clients. All the DFSClient calls get timeout. Here is a trace for one of them:
> java.net.SocketTimeoutException: timed out waiting for rpc response
> 	at org.apache.hadoop.ipc.Client.call(Client.java:305)
> 	at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:149)
> 	at org.apache.hadoop.dfs.$Proxy1.open(Unknown Source)
> 	at org.apache.hadoop.dfs.DFSClient$DFSInputStream.openInfo(DFSClient.java:419)
> 	at org.apache.hadoop.dfs.DFSClient$DFSInputStream.(DFSClient.java:406)
> 	at org.apache.hadoop.dfs.DFSClient.open(DFSClient.java:171)
> 	at org.apache.hadoop.dfs.DistributedFileSystem.openRaw(DistributedFileSystem.java:78)
> 	at org.apache.hadoop.fs.FSDataInputStream$Checker.(FSDataInputStream.java:46)
> 	at org.apache.hadoop.fs.FSDataInputStream.(FSDataInputStream.java:228)
> 	at org.apache.hadoop.fs.FileSystem.open(FileSystem.java:157)
> 	at org.apache.hadoop.mapred.TextInputFormat.getRecordReader(TextInputFormat.java:43)
> 	at org.apache.hadoop.mapred.MapTask.run(MapTask.java:105)
> 	at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:785).
> The namenode then has around 1% CPU utilization at this time (after the outofmemory exception has been thrown). I have profiled the NameNode and it seems to be using around a maixmum heap size of 57MB (which is not much). So, heap size does not seem to be a problem. It might be happening due to lack of Stack space? Any pointers?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun 12 22:27:42 2006
Return-Path: 
 <hadoop-dev-return-2030-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30252 invoked from network); 12 Jun 2006 22:27:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2006 22:27:42 -0000
Received: (qmail 71049 invoked by uid 500); 12 Jun 2006 22:27:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 71023 invoked by uid 500); 12 Jun 2006 22:27:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 71014 invoked by uid 99); 12 Jun 2006 22:27:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 15:27:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 15:27:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 922E97141F5
	for <hadoop-dev@lucene.apache.org>; Mon, 12 Jun 2006 22:26:30 +0000 (GMT)
Message-ID: <31135869.1150151190595.JavaMail.jira@brutus>
Date: Mon, 12 Jun 2006 22:26:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-210) Namenode not able to accept
 connections
In-Reply-To: <22832248.1147306205708.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-210?page=comments#action_12415927 ] 

Doug Cutting commented on HADOOP-210:
-------------------------------------

This looks great to me & passes my tests.

One improvement I'd like to see is for Client.java to not serialize the call twice.  This could easily be done with Hadoop's DataOutputBuffer: write the call to a DataOutputBuffer, write the length, then write the data from the buffer.

Thanks!

> Namenode not able to accept connections
> ---------------------------------------
>
>          Key: HADOOP-210
>          URL: http://issues.apache.org/jira/browse/HADOOP-210
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>  Environment: linux
>     Reporter: Mahadev konar
>     Assignee: Mahadev konar
>  Attachments: nio.patch
>
> I am running owen's random writer on a 627 node cluster (writing 10GB/node).  After running for a while (map 12% reduce 1%) I get the following error on the Namenode:
> Exception in thread "Server listener on port 60000" java.lang.OutOfMemoryError: unable to create new native thread
>         at java.lang.Thread.start0(Native Method)
>         at java.lang.Thread.start(Thread.java:574)
>         at org.apache.hadoop.ipc.Server$Listener.run(Server.java:105)
> After this, the namenode does not seem to be accepting connections from any of the clients. All the DFSClient calls get timeout. Here is a trace for one of them:
> java.net.SocketTimeoutException: timed out waiting for rpc response
> 	at org.apache.hadoop.ipc.Client.call(Client.java:305)
> 	at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:149)
> 	at org.apache.hadoop.dfs.$Proxy1.open(Unknown Source)
> 	at org.apache.hadoop.dfs.DFSClient$DFSInputStream.openInfo(DFSClient.java:419)
> 	at org.apache.hadoop.dfs.DFSClient$DFSInputStream.(DFSClient.java:406)
> 	at org.apache.hadoop.dfs.DFSClient.open(DFSClient.java:171)
> 	at org.apache.hadoop.dfs.DistributedFileSystem.openRaw(DistributedFileSystem.java:78)
> 	at org.apache.hadoop.fs.FSDataInputStream$Checker.(FSDataInputStream.java:46)
> 	at org.apache.hadoop.fs.FSDataInputStream.(FSDataInputStream.java:228)
> 	at org.apache.hadoop.fs.FileSystem.open(FileSystem.java:157)
> 	at org.apache.hadoop.mapred.TextInputFormat.getRecordReader(TextInputFormat.java:43)
> 	at org.apache.hadoop.mapred.MapTask.run(MapTask.java:105)
> 	at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:785).
> The namenode then has around 1% CPU utilization at this time (after the outofmemory exception has been thrown). I have profiled the NameNode and it seems to be using around a maixmum heap size of 57MB (which is not much). So, heap size does not seem to be a problem. It might be happening due to lack of Stack space? Any pointers?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 13 00:28:43 2006
Return-Path: 
 <hadoop-dev-return-2031-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 61457 invoked from network); 13 Jun 2006 00:28:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2006 00:28:43 -0000
Received: (qmail 24740 invoked by uid 500); 13 Jun 2006 00:28:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24703 invoked by uid 500); 13 Jun 2006 00:28:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24688 invoked by uid 99); 13 Jun 2006 00:28:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 17:28:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 17:28:41 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E2BFD7141F5
	for <hadoop-dev@lucene.apache.org>; Tue, 13 Jun 2006 00:27:29 +0000 (GMT)
Message-ID: <14978528.1150158449925.JavaMail.jira@brutus>
Date: Tue, 13 Jun 2006 00:27:29 +0000 (GMT+00:00)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-295) jobs don't get executed in parallel
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

jobs don't get executed in parallel
-----------------------------------

         Key: HADOOP-295
         URL: http://issues.apache.org/jira/browse/HADOOP-295
     Project: Hadoop
        Type: Bug

  Components: mapred  
    Reporter: Yoram Arnon
 Assigned to: Mahadev konar 


we expect tasks to be assigned to nodes up to their configured capacity, with separate slots for map and reduce tasks.
we're observing jobs queueing up, with the map slots free, as exemplified by this copy-paste (converted to text) of the JT WI page.

Cluster Summary
Maps Reduces Tasks/Node Nodes 
0           205             2                 156 
--------------------------------------------------------------------------------
Running Jobs  
Jobid        User           Name          Map % complete Map total Maps completed Reduce % complete Reduce total Reduces completed 
job_0088 runping  DocUpdater   100.00%                  3597                3597                  99.92%                       256                        253 
job_0089 murthij   Term Count        0.00%                  243                        0                     0.00%                        200                            0 
job_0091 zshao     sort                       0.00%                  444                        0                     0.00%                        100                           0 


--------------------------------------------------------------------------------


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 13 02:39:30 2006
Return-Path: 
 <hadoop-dev-return-2032-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 98371 invoked from network); 13 Jun 2006 02:39:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2006 02:39:30 -0000
Received: (qmail 40778 invoked by uid 500); 13 Jun 2006 02:39:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40635 invoked by uid 500); 13 Jun 2006 02:39:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 40626 invoked by uid 99); 13 Jun 2006 02:39:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 19:39:29 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.145.54.171] (HELO mrout1.yahoo.com) (216.145.54.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 19:39:27 -0700
Received: from [10.72.104.183] (enoughhot-lx.corp.yahoo.com [10.72.104.183])
	by mrout1.yahoo.com (8.13.6/8.13.4/y.out) with ESMTP id k5D2Z44a096099
	for <hadoop-dev@lucene.apache.org>; Mon, 12 Jun 2006 19:35:04 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=message-id:date:from:user-agent:x-accept-language:
	mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
	b=aEsN6+F0sIvA+20PRFiLUsLEgWaKVOVuag7ZAlp2XHIKmLFRb1D4YrOesSlL0vI/
Message-ID: <448E2458.7020709@yahoo-inc.com>
Date: Mon, 12 Jun 2006 19:35:04 -0700
From: Konstantin Shvachko <shv@yahoo-inc.com>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: Lease Being Release Before Completed
References: <448D2077.8050903@dragonflymc.com>
In-Reply-To: <448D2077.8050903@dragonflymc.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

You do not need to renew leases manually. There is a LeaseChecker, which 
renews them every 30 secs
in a separate thread. I don't know what causes your problem, but 
renewing lease in the DFSClient line 1073
does not look right.

--Konstantin

Dennis Kubes wrote:

> Hi All,
>
> I am seeing the following.  A file is attempting to close but has to 
> replicate, before the replication gets finished the lease times out 
> and is closed which then causes the write to fail.  Here is the log in 
> sequence.
>
> 2006-06-12 01:58:07,999 INFO org.apache.hadoop.dfs.StateChange: BLOCK* 
> NameSystem.pendingTransfer: ask andromeda01.visvo.com:50010 to 
> replicate blk_-80500146
> 83592461050 to datanode(s) andromeda07.visvo.com:50010
> 2006-06-12 02:02:16,915 INFO org.apache.hadoop.fs.FSNamesystem: 
> Removing lease [Lease.  Holder: DFSClient_1073590514, heldlocks: 0, 
> pendingcreates: 0], leases remaining: 11
> 2006-06-12 02:02:20,175 INFO org.apache.hadoop.ipc.Server: Server 
> connection on port 9000 from 192.168.1.240: exiting
> 2006-06-12 02:02:27,293 WARN org.apache.hadoop.dfs.StateChange: DIR* 
> NameSystem.completeFile: failed to complete 
> /user/phoenix/crawl/newsegs/20060612002155/parse_data/part-00008/data 
> because dir.getFile()==null and null
> 2006-06-12 02:02:27,324 INFO org.apache.hadoop.ipc.Server: Server 
> handler 0 on 9000 call error: java.io.IOException: Could not complete 
> write to file 
> /user/phoenix/crawl/newsegs/20060612002155/parse_data/part-00008/data 
> by DFSClient_1073590514
> java.io.IOException: Could not complete write to file 
> /user/phoenix/crawl/newsegs/20060612002155/parse_data/part-00008/data 
> by DFSClient_1073590514
>   at org.apache.hadoop.dfs.NameNode.complete(NameNode.java:240)
>   at sun.reflect.GeneratedMethodAccessor70.invoke(Unknown Source)
>   at 
> sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 
>
>   at java.lang.reflect.Method.invoke(Method.java:585)
>   at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:243)
>   at org.apache.hadoop.ipc.Server$Handler.run(Server.java:231)
> 2006-06-12 02:02:27,962 INFO org.apache.hadoop.ipc.Server: Server 
> connection on port 9000 from 192.168.1.237: exiting
> 2006-06-12 02:02:28,791 INFO org.apache.hadoop.ipc.Server: Server 
> connection on port 9000 from 192.168.1.243: exiting
>
> I think that in DFSOutputStream in the DFSClient file on line 1073, 
> the following should be added.
>
> namenode.renewLease( clientName.toString());
>
> This will renew the lease while it is waiting on file completion (most 
> likely replication).  The problem is that I don't know the core of 
> hadoop well enough yet to understand if this will cause other problems 
> so I wanted to get some feedback on this before I submit a patch.  
> Please let me know if this is a valid change or if it causes other 
> problems.
>
> Dennis
>
>
>


From MAILER-DAEMON Tue Jun 13 08:31:43 2006
Return-Path: 
 <hadoop-dev-return-2033-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 81020 invoked from network); 13 Jun 2006 08:31:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2006 08:31:43 -0000
Received: (qmail 96835 invoked by uid 500); 13 Jun 2006 08:31:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 96754 invoked by uid 500); 13 Jun 2006 08:31:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 96744 invoked by uid 99); 13 Jun 2006 08:31:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 01:31:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 01:31:41 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 946AD7141F9
	for <hadoop-dev@lucene.apache.org>; Tue, 13 Jun 2006 08:30:30 +0000 (GMT)
Message-ID: <3218940.1150187430605.JavaMail.jira@brutus>
Date: Tue, 13 Jun 2006 08:30:30 +0000 (GMT+00:00)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-210) Namenode not able to accept
 connections
In-Reply-To: <22832248.1147306205708.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-210?page=all ]

Devaraj Das updated HADOOP-210:
-------------------------------

    Attachment: nio.patch

Thanks Doug for the comment. I have updated the patch accordingly.

> Namenode not able to accept connections
> ---------------------------------------
>
>          Key: HADOOP-210
>          URL: http://issues.apache.org/jira/browse/HADOOP-210
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>  Environment: linux
>     Reporter: Mahadev konar
>     Assignee: Mahadev konar
>  Attachments: nio.patch, nio.patch
>
> I am running owen's random writer on a 627 node cluster (writing 10GB/node).  After running for a while (map 12% reduce 1%) I get the following error on the Namenode:
> Exception in thread "Server listener on port 60000" java.lang.OutOfMemoryError: unable to create new native thread
>         at java.lang.Thread.start0(Native Method)
>         at java.lang.Thread.start(Thread.java:574)
>         at org.apache.hadoop.ipc.Server$Listener.run(Server.java:105)
> After this, the namenode does not seem to be accepting connections from any of the clients. All the DFSClient calls get timeout. Here is a trace for one of them:
> java.net.SocketTimeoutException: timed out waiting for rpc response
> 	at org.apache.hadoop.ipc.Client.call(Client.java:305)
> 	at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:149)
> 	at org.apache.hadoop.dfs.$Proxy1.open(Unknown Source)
> 	at org.apache.hadoop.dfs.DFSClient$DFSInputStream.openInfo(DFSClient.java:419)
> 	at org.apache.hadoop.dfs.DFSClient$DFSInputStream.(DFSClient.java:406)
> 	at org.apache.hadoop.dfs.DFSClient.open(DFSClient.java:171)
> 	at org.apache.hadoop.dfs.DistributedFileSystem.openRaw(DistributedFileSystem.java:78)
> 	at org.apache.hadoop.fs.FSDataInputStream$Checker.(FSDataInputStream.java:46)
> 	at org.apache.hadoop.fs.FSDataInputStream.(FSDataInputStream.java:228)
> 	at org.apache.hadoop.fs.FileSystem.open(FileSystem.java:157)
> 	at org.apache.hadoop.mapred.TextInputFormat.getRecordReader(TextInputFormat.java:43)
> 	at org.apache.hadoop.mapred.MapTask.run(MapTask.java:105)
> 	at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:785).
> The namenode then has around 1% CPU utilization at this time (after the outofmemory exception has been thrown). I have profiled the NameNode and it seems to be using around a maixmum heap size of 57MB (which is not much). So, heap size does not seem to be a problem. It might be happening due to lack of Stack space? Any pointers?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 13 11:00:48 2006
Return-Path: 
 <hadoop-dev-return-2034-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 21834 invoked from network); 13 Jun 2006 11:00:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2006 11:00:48 -0000
Received: (qmail 96404 invoked by uid 500); 13 Jun 2006 11:00:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 96312 invoked by uid 500); 13 Jun 2006 11:00:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 96268 invoked by uid 99); 13 Jun 2006 11:00:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 04:00:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 04:00:41 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CF1C07141FA
	for <hadoop-dev@lucene.apache.org>; Tue, 13 Jun 2006 10:59:29 +0000 (GMT)
Message-ID: <12462846.1150196369845.JavaMail.jira@brutus>
Date: Tue, 13 Jun 2006 10:59:29 +0000 (GMT+00:00)
From: "Johan Oskarson (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-296) Do not assign blocks to a datanode
 with < x mb free
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Do not assign blocks to a datanode with < x mb free
---------------------------------------------------

         Key: HADOOP-296
         URL: http://issues.apache.org/jira/browse/HADOOP-296
     Project: Hadoop
        Type: New Feature

  Components: dfs  
    Versions: 0.3.2    
    Reporter: Johan Oskarson


We're running a smallish cluster with very different machines, some with only 60 gb harddrives
This creates a problem when inserting files into the dfs, these machines run out of space quickly and then they cannot run any map reduce operations

A solution would be to not assign any new blocks once the space is below a certain user configurable threshold
This free space could then be used by the map reduce operations instead (if that's on the same disk)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 13 11:14:43 2006
Return-Path: 
 <hadoop-dev-return-2035-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 28888 invoked from network); 13 Jun 2006 11:14:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2006 11:14:43 -0000
Received: (qmail 15151 invoked by uid 500); 13 Jun 2006 11:14:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15127 invoked by uid 500); 13 Jun 2006 11:14:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 15116 invoked by uid 99); 13 Jun 2006 11:14:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 04:14:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 04:14:41 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 996A57141FA
	for <hadoop-dev@lucene.apache.org>; Tue, 13 Jun 2006 11:13:30 +0000 (GMT)
Message-ID: <17487886.1150197210625.JavaMail.jira@brutus>
Date: Tue, 13 Jun 2006 11:13:30 +0000 (GMT+00:00)
From: "Johan Oskarson (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-296) Do not assign blocks to a datanode
 with < x mb free
In-Reply-To: <12462846.1150196369845.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-296?page=all ]

Johan Oskarson updated HADOOP-296:
----------------------------------

    Attachment: minspace.patch

This is a completely untested patch, in fact it's more of an indication of what I mean with this feature request.
(I don't have the time nor the setup to test this right now)
Just thought I'd get this submitted before I forget

> Do not assign blocks to a datanode with < x mb free
> ---------------------------------------------------
>
>          Key: HADOOP-296
>          URL: http://issues.apache.org/jira/browse/HADOOP-296
>      Project: Hadoop
>         Type: New Feature

>   Components: dfs
>     Versions: 0.3.2
>     Reporter: Johan Oskarson
>  Attachments: minspace.patch
>
> We're running a smallish cluster with very different machines, some with only 60 gb harddrives
> This creates a problem when inserting files into the dfs, these machines run out of space quickly and then they cannot run any map reduce operations
> A solution would be to not assign any new blocks once the space is below a certain user configurable threshold
> This free space could then be used by the map reduce operations instead (if that's on the same disk)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 13 16:25:42 2006
Return-Path: 
 <hadoop-dev-return-2036-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 62530 invoked from network); 13 Jun 2006 16:25:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2006 16:25:42 -0000
Received: (qmail 31157 invoked by uid 500); 13 Jun 2006 16:25:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 31133 invoked by uid 500); 13 Jun 2006 16:25:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31124 invoked by uid 99); 13 Jun 2006 16:25:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 09:25:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 09:25:41 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D024F7141FA
	for <hadoop-dev@lucene.apache.org>; Tue, 13 Jun 2006 16:24:29 +0000 (GMT)
Message-ID: <16202595.1150215869849.JavaMail.jira@brutus>
Date: Tue, 13 Jun 2006 16:24:29 +0000 (GMT+00:00)
From: "Johan Oskarson (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-297) When selecting node to put new block
 on, give priority to those with more free space/less blocks
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

When selecting node to put new block on, give priority to those with more free space/less blocks
------------------------------------------------------------------------------------------------

         Key: HADOOP-297
         URL: http://issues.apache.org/jira/browse/HADOOP-297
     Project: Hadoop
        Type: Improvement

  Components: dfs  
    Versions: 0.3.2    
    Reporter: Johan Oskarson
    Priority: Minor


As mentioned in previous bug report:
We're running a smallish cluster with very different machines, some with only 60 gb harddrives
This creates a problem when inserting files into the dfs, these machines run out of space quickly while some have plenty of space free.

So instead of just shuffling the nodes, I've created a quick patch that first sorts the target nodes by (freespace / blocks).
It then randomizes the position of the first third of the nodes (so we don't put all the blocks in the file on the same machine)

I'll let you guys figure out how to improve this.
/Johan

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 13 16:29:43 2006
Return-Path: 
 <hadoop-dev-return-2037-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 64656 invoked from network); 13 Jun 2006 16:29:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2006 16:29:43 -0000
Received: (qmail 38981 invoked by uid 500); 13 Jun 2006 16:29:43 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38959 invoked by uid 500); 13 Jun 2006 16:29:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38948 invoked by uid 99); 13 Jun 2006 16:29:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 09:29:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 09:29:42 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9A7967141FA
	for <hadoop-dev@lucene.apache.org>; Tue, 13 Jun 2006 16:28:30 +0000 (GMT)
Message-ID: <16646543.1150216110629.JavaMail.jira@brutus>
Date: Tue, 13 Jun 2006 16:28:30 +0000 (GMT+00:00)
From: "Johan Oskarson (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-297) When selecting node to put new block
 on, give priority to those with more free space/less blocks
In-Reply-To: <16202595.1150215869849.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-297?page=all ]

Johan Oskarson updated HADOOP-297:
----------------------------------

    Attachment: priorityshuffle_v1.patch

Instead of selecting random nodes, give priority to the ones with lots of free space and few blocks

> When selecting node to put new block on, give priority to those with more free space/less blocks
> ------------------------------------------------------------------------------------------------
>
>          Key: HADOOP-297
>          URL: http://issues.apache.org/jira/browse/HADOOP-297
>      Project: Hadoop
>         Type: Improvement

>   Components: dfs
>     Versions: 0.3.2
>     Reporter: Johan Oskarson
>     Priority: Minor
>  Attachments: priorityshuffle_v1.patch
>
> As mentioned in previous bug report:
> We're running a smallish cluster with very different machines, some with only 60 gb harddrives
> This creates a problem when inserting files into the dfs, these machines run out of space quickly while some have plenty of space free.
> So instead of just shuffling the nodes, I've created a quick patch that first sorts the target nodes by (freespace / blocks).
> It then randomizes the position of the first third of the nodes (so we don't put all the blocks in the file on the same machine)
> I'll let you guys figure out how to improve this.
> /Johan

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 13 17:29:43 2006
Return-Path: 
 <hadoop-dev-return-2038-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78779 invoked from network); 13 Jun 2006 17:29:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2006 17:29:43 -0000
Received: (qmail 19501 invoked by uid 500); 13 Jun 2006 17:29:43 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 19480 invoked by uid 500); 13 Jun 2006 17:29:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 19471 invoked by uid 99); 13 Jun 2006 17:29:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 10:29:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 10:29:42 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8EF6F7141FA
	for <hadoop-dev@lucene.apache.org>; Tue, 13 Jun 2006 17:28:30 +0000 (GMT)
Message-ID: <19785870.1150219710582.JavaMail.jira@brutus>
Date: Tue, 13 Jun 2006 17:28:30 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-271) add links to task tracker http server
 from task details and failure pages
In-Reply-To: <18980326.1149204689854.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-271?page=all ]

Owen O'Malley updated HADOOP-271:
---------------------------------

    Attachment: task-tracker-link.patch

Ok, this patch protects the jsp from not finding the named task tracker by printing the name of the task tracker if it isn't found.

> add links to task tracker http server from task details and failure pages
> -------------------------------------------------------------------------
>
>          Key: HADOOP-271
>          URL: http://issues.apache.org/jira/browse/HADOOP-271
>      Project: Hadoop
>         Type: Improvement

>   Components: mapred
>     Versions: 0.2.1
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>     Priority: Minor
>      Fix For: 0.4.0
>  Attachments: add-machine-links.patch, task-tracker-link.patch
>
> Make the machine name in the list of task attempts and failures into links to the correct task tracker http server.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 13 19:09:46 2006
Return-Path: 
 <hadoop-dev-return-2039-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8269 invoked from network); 13 Jun 2006 19:09:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2006 19:09:46 -0000
Received: (qmail 222 invoked by uid 500); 13 Jun 2006 19:09:43 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 184 invoked by uid 500); 13 Jun 2006 19:09:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 174 invoked by uid 99); 13 Jun 2006 19:09:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 12:09:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 12:09:42 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B48847141F9
	for <hadoop-dev@lucene.apache.org>; Tue, 13 Jun 2006 19:08:30 +0000 (GMT)
Message-ID: <10099210.1150225710735.JavaMail.jira@brutus>
Date: Tue, 13 Jun 2006 19:08:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-210) Namenode not able to accept
 connections
In-Reply-To: <22832248.1147306205708.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-210?page=all ]
     
Doug Cutting resolved HADOOP-210:
---------------------------------

    Fix Version: 0.4.0
     Resolution: Fixed

I just committed this.  Thanks, Devaraj!

> Namenode not able to accept connections
> ---------------------------------------
>
>          Key: HADOOP-210
>          URL: http://issues.apache.org/jira/browse/HADOOP-210
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>  Environment: linux
>     Reporter: Mahadev konar
>     Assignee: Mahadev konar
>      Fix For: 0.4.0
>  Attachments: nio.patch, nio.patch
>
> I am running owen's random writer on a 627 node cluster (writing 10GB/node).  After running for a while (map 12% reduce 1%) I get the following error on the Namenode:
> Exception in thread "Server listener on port 60000" java.lang.OutOfMemoryError: unable to create new native thread
>         at java.lang.Thread.start0(Native Method)
>         at java.lang.Thread.start(Thread.java:574)
>         at org.apache.hadoop.ipc.Server$Listener.run(Server.java:105)
> After this, the namenode does not seem to be accepting connections from any of the clients. All the DFSClient calls get timeout. Here is a trace for one of them:
> java.net.SocketTimeoutException: timed out waiting for rpc response
> 	at org.apache.hadoop.ipc.Client.call(Client.java:305)
> 	at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:149)
> 	at org.apache.hadoop.dfs.$Proxy1.open(Unknown Source)
> 	at org.apache.hadoop.dfs.DFSClient$DFSInputStream.openInfo(DFSClient.java:419)
> 	at org.apache.hadoop.dfs.DFSClient$DFSInputStream.(DFSClient.java:406)
> 	at org.apache.hadoop.dfs.DFSClient.open(DFSClient.java:171)
> 	at org.apache.hadoop.dfs.DistributedFileSystem.openRaw(DistributedFileSystem.java:78)
> 	at org.apache.hadoop.fs.FSDataInputStream$Checker.(FSDataInputStream.java:46)
> 	at org.apache.hadoop.fs.FSDataInputStream.(FSDataInputStream.java:228)
> 	at org.apache.hadoop.fs.FileSystem.open(FileSystem.java:157)
> 	at org.apache.hadoop.mapred.TextInputFormat.getRecordReader(TextInputFormat.java:43)
> 	at org.apache.hadoop.mapred.MapTask.run(MapTask.java:105)
> 	at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:785).
> The namenode then has around 1% CPU utilization at this time (after the outofmemory exception has been thrown). I have profiled the NameNode and it seems to be using around a maixmum heap size of 57MB (which is not much). So, heap size does not seem to be a problem. It might be happening due to lack of Stack space? Any pointers?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 13 19:29:43 2006
Return-Path: 
 <hadoop-dev-return-2040-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37874 invoked from network); 13 Jun 2006 19:29:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2006 19:29:43 -0000
Received: (qmail 28649 invoked by uid 500); 13 Jun 2006 19:29:43 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28504 invoked by uid 500); 13 Jun 2006 19:29:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28494 invoked by uid 99); 13 Jun 2006 19:29:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 12:29:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 12:29:42 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 95A817141F9
	for <hadoop-dev@lucene.apache.org>; Tue, 13 Jun 2006 19:28:30 +0000 (GMT)
Message-ID: <21559906.1150226910610.JavaMail.jira@brutus>
Date: Tue, 13 Jun 2006 19:28:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-250) HTTP Browsing interface for DFS
 Health/Status
In-Reply-To: <29976966.1148448150061.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-250?page=comments#action_12416065 ] 

Doug Cutting commented on HADOOP-250:
-------------------------------------

Unit tests are now failing for me with this patch.  Can you please look into this?  Thanks!

> HTTP Browsing interface for DFS Health/Status
> ---------------------------------------------
>
>          Key: HADOOP-250
>          URL: http://issues.apache.org/jira/browse/HADOOP-250
>      Project: Hadoop
>         Type: New Feature

>   Components: dfs
>     Versions: 0.3.0
>     Reporter: Devaraj Das
>      Fix For: 0.4.0
>  Attachments: dfshealth.pdf, http_browsing_dfs.new.patch, http_browsing_dfs.patch, http_browsing_dfs.patch
>
> A web interface to view the DFS health/status (name and data nodes) is to be created. User can connect to the webserver on the namenode and a web page will be displayed. The web page will give some details about that namenode (startup time and the total cluster capacity). The web page will contain a table of 'live' and 'dead' datanodes. Each live datanode will be a link to the complete details of the datanode as given by DatanodeInfo (also see DataNodeReport).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 13 19:33:43 2006
Return-Path: 
 <hadoop-dev-return-2041-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 44958 invoked from network); 13 Jun 2006 19:33:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2006 19:33:43 -0000
Received: (qmail 36080 invoked by uid 500); 13 Jun 2006 19:33:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 36061 invoked by uid 500); 13 Jun 2006 19:33:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 36049 invoked by uid 99); 13 Jun 2006 19:33:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 12:33:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 12:33:41 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E09477141FA
	for <hadoop-dev@lucene.apache.org>; Tue, 13 Jun 2006 19:32:29 +0000 (GMT)
Message-ID: <31782987.1150227149916.JavaMail.jira@brutus>
Date: Tue, 13 Jun 2006 19:32:29 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-298) nicer reports of progress for distcp
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

nicer reports of progress for distcp
------------------------------------

         Key: HADOOP-298
         URL: http://issues.apache.org/jira/browse/HADOOP-298
     Project: Hadoop
        Type: Improvement

  Components: util  
    Versions: 0.3.2    
    Reporter: Owen O'Malley
 Assigned to: Owen O'Malley 
    Priority: Minor
     Fix For: 0.4.0


The unformatted number of bytes in distcp is difficult to read.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 13 19:35:43 2006
Return-Path: 
 <hadoop-dev-return-2042-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 48353 invoked from network); 13 Jun 2006 19:35:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2006 19:35:43 -0000
Received: (qmail 38149 invoked by uid 500); 13 Jun 2006 19:35:43 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38010 invoked by uid 500); 13 Jun 2006 19:35:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38001 invoked by uid 99); 13 Jun 2006 19:35:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 12:35:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 12:35:42 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9A3917141FA
	for <hadoop-dev@lucene.apache.org>; Tue, 13 Jun 2006 19:34:30 +0000 (GMT)
Message-ID: <7482502.1150227270628.JavaMail.jira@brutus>
Date: Tue, 13 Jun 2006 19:34:30 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-298) nicer reports of progress for distcp
In-Reply-To: <31782987.1150227149916.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-298?page=all ]

Owen O'Malley updated HADOOP-298:
---------------------------------

    Attachment: distcp-progress.patch

This patch adds a percentage complete and a human readable format of the number of bytes copied so far.

> nicer reports of progress for distcp
> ------------------------------------
>
>          Key: HADOOP-298
>          URL: http://issues.apache.org/jira/browse/HADOOP-298
>      Project: Hadoop
>         Type: Improvement

>   Components: util
>     Versions: 0.3.2
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>     Priority: Minor
>      Fix For: 0.4.0
>  Attachments: distcp-progress.patch
>
> The unformatted number of bytes in distcp is difficult to read.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 13 21:25:43 2006
Return-Path: 
 <hadoop-dev-return-2043-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37302 invoked from network); 13 Jun 2006 21:25:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2006 21:25:43 -0000
Received: (qmail 3448 invoked by uid 500); 13 Jun 2006 21:25:43 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3303 invoked by uid 500); 13 Jun 2006 21:25:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3290 invoked by uid 99); 13 Jun 2006 21:25:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 14:25:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 14:25:41 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D2C3D71421B
	for <hadoop-dev@lucene.apache.org>; Tue, 13 Jun 2006 21:24:29 +0000 (GMT)
Message-ID: <7806228.1150233869860.JavaMail.jira@brutus>
Date: Tue, 13 Jun 2006 21:24:29 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-299) maps from second jobs will not run
 until the first job finishes completely
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

maps from second jobs will not run until the first job finishes completely
--------------------------------------------------------------------------

         Key: HADOOP-299
         URL: http://issues.apache.org/jira/browse/HADOOP-299
     Project: Hadoop
        Type: Bug

  Components: mapred  
    Versions: 0.3.2    
    Reporter: Owen O'Malley
 Assigned to: Owen O'Malley 
     Fix For: 0.4.0


Because of the logic in the JobTracker's pollForNewTask, second jobs will rarely start running maps until the first job finishes completely. The JobTracker leaves room to re-run failed maps from the first job and it reserves the total number of maps for the first job. Thus, if you have more maps in the first job than your cluster capacity, none of the second job maps will ever run.

I propose setting the reserve to 1% of the first job's maps.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 13 21:36:43 2006
Return-Path: 
 <hadoop-dev-return-2044-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 58952 invoked from network); 13 Jun 2006 21:36:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2006 21:36:43 -0000
Received: (qmail 23311 invoked by uid 500); 13 Jun 2006 21:36:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23288 invoked by uid 500); 13 Jun 2006 21:36:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23276 invoked by uid 99); 13 Jun 2006 21:36:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 14:36:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 14:36:41 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 10E377141FA
	for <hadoop-dev@lucene.apache.org>; Tue, 13 Jun 2006 21:35:30 +0000 (GMT)
Message-ID: <4755097.1150234530066.JavaMail.jira@brutus>
Date: Tue, 13 Jun 2006 21:35:30 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-300) ability to report numeric progress
 within a particular key
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

ability to report numeric progress within a particular key
----------------------------------------------------------

         Key: HADOOP-300
         URL: http://issues.apache.org/jira/browse/HADOOP-300
     Project: Hadoop
        Type: Improvement

  Components: mapred  
    Versions: 0.3.2    
    Reporter: Owen O'Malley
 Assigned to: Owen O'Malley 
    Priority: Trivial


I'd like some mechanism to report numeric progress in maps that have side effects. In the common case, there is exactly one key/value for each map and they do a lot of work (minutes to hours) while working on that key. It would be nice if mapred.Reporter had a progress(float) method that set the progress within the current key.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 13 21:57:45 2006
Return-Path: 
 <hadoop-dev-return-2045-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94343 invoked from network); 13 Jun 2006 21:57:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2006 21:57:45 -0000
Received: (qmail 50557 invoked by uid 500); 13 Jun 2006 21:57:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 50530 invoked by uid 500); 13 Jun 2006 21:57:44 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 50499 invoked by uid 99); 13 Jun 2006 21:57:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 14:57:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 14:57:43 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 82B3171428D
	for <hadoop-dev@lucene.apache.org>; Tue, 13 Jun 2006 21:56:31 +0000 (GMT)
Message-ID: <22402632.1150235791532.JavaMail.jira@brutus>
Date: Tue, 13 Jun 2006 21:56:31 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-298) nicer reports of progress for distcp
In-Reply-To: <31782987.1150227149916.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-298?page=all ]
     
Doug Cutting resolved HADOOP-298:
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Owen.

> nicer reports of progress for distcp
> ------------------------------------
>
>          Key: HADOOP-298
>          URL: http://issues.apache.org/jira/browse/HADOOP-298
>      Project: Hadoop
>         Type: Improvement

>   Components: util
>     Versions: 0.3.2
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>     Priority: Minor
>      Fix For: 0.4.0
>  Attachments: distcp-progress.patch
>
> The unformatted number of bytes in distcp is difficult to read.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 13 22:39:13 2006
Return-Path: 
 <hadoop-dev-return-2046-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76613 invoked from network); 13 Jun 2006 22:39:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2006 22:39:13 -0000
Received: (qmail 79279 invoked by uid 500); 13 Jun 2006 22:38:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75779 invoked by uid 500); 13 Jun 2006 22:38:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 73379 invoked by uid 99); 13 Jun 2006 22:37:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 15:37:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 15:10:43 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B697A71421B
	for <hadoop-dev@lucene.apache.org>; Tue, 13 Jun 2006 22:09:31 +0000 (GMT)
Message-ID: <27624809.1150236571744.JavaMail.jira@brutus>
Date: Tue, 13 Jun 2006 22:09:31 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-297) When selecting node to put new block
 on, give priority to those with more free space/less blocks
In-Reply-To: <16202595.1150215869849.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-297?page=comments#action_12416089 ] 

Doug Cutting commented on HADOOP-297:
-------------------------------------

This sounds like a reasonable approach to a real problem.  Has anyone tested this on a large cluster?

I worry about performance.  The sort comparator doesn't need to create Long instances, but could instead simply have long variables, no?  Also, the calls to input.remove() make the algorithm quadratic, since each call to Vector.remove() copies all the entries after it.

> When selecting node to put new block on, give priority to those with more free space/less blocks
> ------------------------------------------------------------------------------------------------
>
>          Key: HADOOP-297
>          URL: http://issues.apache.org/jira/browse/HADOOP-297
>      Project: Hadoop
>         Type: Improvement

>   Components: dfs
>     Versions: 0.3.2
>     Reporter: Johan Oskarson
>     Priority: Minor
>  Attachments: priorityshuffle_v1.patch
>
> As mentioned in previous bug report:
> We're running a smallish cluster with very different machines, some with only 60 gb harddrives
> This creates a problem when inserting files into the dfs, these machines run out of space quickly while some have plenty of space free.
> So instead of just shuffling the nodes, I've created a quick patch that first sorts the target nodes by (freespace / blocks).
> It then randomizes the position of the first third of the nodes (so we don't put all the blocks in the file on the same machine)
> I'll let you guys figure out how to improve this.
> /Johan

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 13 23:04:43 2006
Return-Path: 
 <hadoop-dev-return-2047-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 95132 invoked from network); 13 Jun 2006 23:04:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2006 23:04:43 -0000
Received: (qmail 13362 invoked by uid 500); 13 Jun 2006 23:04:43 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13219 invoked by uid 500); 13 Jun 2006 23:04:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13198 invoked by uid 99); 13 Jun 2006 23:04:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 16:04:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 16:04:41 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D13777141FA
	for <hadoop-dev@lucene.apache.org>; Tue, 13 Jun 2006 23:03:29 +0000 (GMT)
Message-ID: <26440939.1150239809853.JavaMail.jira@brutus>
Date: Tue, 13 Jun 2006 23:03:29 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-301) the randomwriter example will clobber
 the output file
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

the randomwriter example will clobber the output file
-----------------------------------------------------

         Key: HADOOP-301
         URL: http://issues.apache.org/jira/browse/HADOOP-301
     Project: Hadoop
        Type: Improvement

  Components: mapred  
    Versions: 0.3.2    
    Reporter: Owen O'Malley
 Assigned to: Owen O'Malley 
     Fix For: 0.4.0


The randomwriter will automatically clobber the output directory, which is dangerous given the lack of permissions in  dfs.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 13 23:06:43 2006
Return-Path: 
 <hadoop-dev-return-2048-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 95656 invoked from network); 13 Jun 2006 23:06:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2006 23:06:43 -0000
Received: (qmail 14952 invoked by uid 500); 13 Jun 2006 23:06:43 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14929 invoked by uid 500); 13 Jun 2006 23:06:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 14920 invoked by uid 99); 13 Jun 2006 23:06:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 16:06:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 16:06:42 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 95E367141FA
	for <hadoop-dev@lucene.apache.org>; Tue, 13 Jun 2006 23:05:30 +0000 (GMT)
Message-ID: <23023055.1150239930611.JavaMail.jira@brutus>
Date: Tue, 13 Jun 2006 23:05:30 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-301) the randomwriter example will clobber
 the output file
In-Reply-To: <26440939.1150239809853.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-301?page=all ]

Owen O'Malley updated HADOOP-301:
---------------------------------

    Attachment: noclobber-rand-write.patch

This checks for the existance of the output directory and aborts with a user message.

> the randomwriter example will clobber the output file
> -----------------------------------------------------
>
>          Key: HADOOP-301
>          URL: http://issues.apache.org/jira/browse/HADOOP-301
>      Project: Hadoop
>         Type: Improvement

>   Components: mapred
>     Versions: 0.3.2
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.4.0
>  Attachments: noclobber-rand-write.patch
>
> The randomwriter will automatically clobber the output directory, which is dangerous given the lack of permissions in  dfs.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 14 00:33:44 2006
Return-Path: 
 <hadoop-dev-return-2049-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 73283 invoked from network); 14 Jun 2006 00:33:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2006 00:33:44 -0000
Received: (qmail 23457 invoked by uid 500); 14 Jun 2006 00:33:43 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23399 invoked by uid 500); 14 Jun 2006 00:33:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23382 invoked by uid 99); 14 Jun 2006 00:33:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 17:33:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 17:33:42 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EB6427141FA
	for <hadoop-dev@lucene.apache.org>; Wed, 14 Jun 2006 00:32:29 +0000 (GMT)
Message-ID: <26017675.1150245149961.JavaMail.jira@brutus>
Date: Wed, 14 Jun 2006 00:32:29 +0000 (GMT+00:00)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-302) class Text (replacement for class
 UTF8) was: HADOOP-136
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

class Text (replacement for class UTF8) was: HADOOP-136
-------------------------------------------------------

         Key: HADOOP-302
         URL: http://issues.apache.org/jira/browse/HADOOP-302
     Project: Hadoop
        Type: Improvement

  Components: io  
    Reporter: Michel Tourn
 Assigned to: Doug Cutting 


Just to verify, which length-encoding scheme are we using for class Text (aka LargeUTF8) 

a) The "UTF-8/Lucene" scheme? (highest bit of each byte is an extension bit, which I think is what Doug is describing in his last comment) or 
b) the record-IO scheme in o.a.h.record.Utils.java:readInt 

Either way, note that: 

1. UTF8.java and its successor Text.java need to read the length in two ways: 
  1a. consume 1+ bytes from a DataInput and 
  1b. parse the length within a byte array at a given offset 
(1.b is used for the "WritableComparator optimized for UTF8 keys" ). 

o.a.h.record.Utils only supports the DataInput mode. 
It is not clear to me what is the best way to extend this Utils code when you need to support both reading modes 

2 Methods like UTF8's WritableComparator are to be low overhead, in partic. there should be no Object allocation. 
For the byte array case, the varlen-reader utility needs to be extended to return both: 
 the decoded length and the length of the encoded length. 
 (so that the caller can do offset += encodedlength) 
    
3. A String length does not need (small) negative integers. 

4. One advantage of a) is that it is standard (or at least well-known and natural) and there are no magic constants (like -120, -121 -124) 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 14 00:51:48 2006
Return-Path: 
 <hadoop-dev-return-2050-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 95305 invoked from network); 14 Jun 2006 00:51:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2006 00:51:48 -0000
Received: (qmail 31763 invoked by uid 500); 14 Jun 2006 00:51:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 31622 invoked by uid 500); 14 Jun 2006 00:51:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31611 invoked by uid 99); 14 Jun 2006 00:51:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 17:51:47 -0700
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of sutter@gmail.com designates
 64.233.162.195 as permitted sender)
Received: from [64.233.162.195] (HELO nz-out-0102.google.com) (64.233.162.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 17:51:46 -0700
Received: by nz-out-0102.google.com with SMTP id 13so10998nzp
        for <hadoop-dev@lucene.apache.org>;
 Tue, 13 Jun 2006 17:51:25 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=VfSb8dh35hLPJn/pbFIkjUTKd1kWWOWN+E+REVTlJtVOjtyE7ByE08zqOhN04q5cyoAALEKOXhVRV5+K94RgEbz1EN15/NNlIXyALcsNTOxoiT/plCACW5HU7TcnurpWwJhDbuAqZvzSwE2FsmDo8sgp5WdSdxqztVpUZFrM20I=
Received: by 10.36.227.78 with SMTP id z78mr113103nzg;
        Tue, 13 Jun 2006 17:51:25 -0700 (PDT)
Received: by 10.36.129.7 with HTTP; Tue, 13 Jun 2006 17:51:25 -0700 (PDT)
Message-ID: <e1d10fc00606131751i51445ab2h73a9708a23be6981@mail.gmail.com>
Date: Tue, 13 Jun 2006 17:51:25 -0700
From: "Paul Sutter" <sutter@gmail.com>
To: hadoop-dev@lucene.apache.org
Subject: Using Hadoop in a production environment
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_Part_2337_13820713.1150246285716"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_2337_13820713.1150246285716
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

We are starting to string together our disparate Hadoop jobs into a running
system, and we have a couple issues that are coming up.

I'm looking for feedback or suggestions on how we can solve them.

(1) Scheduling Hadoop jobs

Could an Ant extension be developed to let a complex set of Hadoop jobs be
controlled using a sort of a build script that decides which jobs need to be
run?

(2) How do we make Hadoop jobs atomic?

One issue we have is that a failing job can leave directories in an
inconsistent format, making a mess for the other jobs.

I'm thiking of an atomic operation we could submit to the nameserver. It
might consist of multiple directory deletions and directory renames, and
would either complete in entirety, or not at all. And in this way, we'd get
the equivalent of a begin/commit/rollback capability for one simple
function.

Im curious to hear others thoughts on this topic.

------=_Part_2337_13820713.1150246285716--

From MAILER-DAEMON Wed Jun 14 01:52:44 2006
Return-Path: 
 <hadoop-dev-return-2051-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93876 invoked from network); 14 Jun 2006 01:52:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2006 01:52:44 -0000
Received: (qmail 78209 invoked by uid 500); 14 Jun 2006 01:52:43 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 78177 invoked by uid 500); 14 Jun 2006 01:52:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 78164 invoked by uid 99); 14 Jun 2006 01:52:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 18:52:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 18:52:42 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9EA927141FA
	for <hadoop-dev@lucene.apache.org>; Wed, 14 Jun 2006 01:51:30 +0000 (GMT)
Message-ID: <24065738.1150249890647.JavaMail.jira@brutus>
Date: Wed, 14 Jun 2006 01:51:30 +0000 (GMT+00:00)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-296) Do not assign blocks to a datanode
 with < x mb free
In-Reply-To: <12462846.1150196369845.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-296?page=comments#action_12416109 ] 

Konstantin Shvachko commented on HADOOP-296:
--------------------------------------------

If you look further down in FSNamesystem.chooseTarget() there is code that selects nodes that have space 
for at least MIN_BLOCKS_FOR_WRITE (5 by default) blocks.
Then, when data nodes calculate remaining disk size (see FSDataset.getRemaining()) they use USABLE_DISK_PCT (98%) 
and the value of the member FSDataset.reserved, which is initially set to 0, and then reflects the amount of space allocated 
for the ongoing block creates. 

I think we should let individual data nodes be in control of the amount of space they need/want to preserve. 
Rather than enforcing it on the name node uniformly for all data nodes. 
This would solve your problem configuring very different machines on the cluster
with respect to their disk capacities.

So I propose to add 2 new configuration parameters for data nodes.
1) dfs.datanode.du.pct   which is just a configurable variant of USABLE_DISK_PCT.
2) dfs.datanode.du.reserved   which specifies the amount of space that should always remain on the node.
Then at startup FSDataset.reserved can be set to dfs.datanode.du.reserved rather than 0, 
and USABLE_DISK_PCT should be replaced by dfs.datanode.du.pct


> Do not assign blocks to a datanode with < x mb free
> ---------------------------------------------------
>
>          Key: HADOOP-296
>          URL: http://issues.apache.org/jira/browse/HADOOP-296
>      Project: Hadoop
>         Type: New Feature

>   Components: dfs
>     Versions: 0.3.2
>     Reporter: Johan Oskarson
>  Attachments: minspace.patch
>
> We're running a smallish cluster with very different machines, some with only 60 gb harddrives
> This creates a problem when inserting files into the dfs, these machines run out of space quickly and then they cannot run any map reduce operations
> A solution would be to not assign any new blocks once the space is below a certain user configurable threshold
> This free space could then be used by the map reduce operations instead (if that's on the same disk)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 14 03:02:44 2006
Return-Path: 
 <hadoop-dev-return-2052-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 3421 invoked from network); 14 Jun 2006 03:02:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2006 03:02:44 -0000
Received: (qmail 34775 invoked by uid 500); 14 Jun 2006 03:02:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 34749 invoked by uid 500); 14 Jun 2006 03:02:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 34740 invoked by uid 99); 14 Jun 2006 03:02:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 20:02:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 20:02:43 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id ED72971421B
	for <hadoop-dev@lucene.apache.org>; Wed, 14 Jun 2006 03:01:30 +0000 (GMT)
Message-ID: <17038583.1150254090969.JavaMail.jira@brutus>
Date: Wed, 14 Jun 2006 03:01:30 +0000 (GMT+00:00)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-297) When selecting node to put new block
 on, give priority to those with more free space/less blocks
In-Reply-To: <16202595.1150215869849.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-297?page=comments#action_12416114 ] 

Konstantin Shvachko commented on HADOOP-297:
--------------------------------------------

This is an important problem.
But sorting for each block allocation seems too expensive, even if done n log n.
Should we just permanently store a TreeMap or a PriorityQueue
of nodes "prioritized" by their remaining space?
This would require updating the map when DFs change,
but will be less expensive for allocations.


> When selecting node to put new block on, give priority to those with more free space/less blocks
> ------------------------------------------------------------------------------------------------
>
>          Key: HADOOP-297
>          URL: http://issues.apache.org/jira/browse/HADOOP-297
>      Project: Hadoop
>         Type: Improvement

>   Components: dfs
>     Versions: 0.3.2
>     Reporter: Johan Oskarson
>     Priority: Minor
>  Attachments: priorityshuffle_v1.patch
>
> As mentioned in previous bug report:
> We're running a smallish cluster with very different machines, some with only 60 gb harddrives
> This creates a problem when inserting files into the dfs, these machines run out of space quickly while some have plenty of space free.
> So instead of just shuffling the nodes, I've created a quick patch that first sorts the target nodes by (freespace / blocks).
> It then randomizes the position of the first third of the nodes (so we don't put all the blocks in the file on the same machine)
> I'll let you guys figure out how to improve this.
> /Johan

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 14 03:15:44 2006
Return-Path: 
 <hadoop-dev-return-2053-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 6441 invoked from network); 14 Jun 2006 03:15:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2006 03:15:44 -0000
Received: (qmail 41646 invoked by uid 500); 14 Jun 2006 03:15:43 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 41617 invoked by uid 500); 14 Jun 2006 03:15:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 41608 invoked by uid 99); 14 Jun 2006 03:15:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 20:15:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 20:15:42 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8C5CC71421B
	for <hadoop-dev@lucene.apache.org>; Wed, 14 Jun 2006 03:14:30 +0000 (GMT)
Message-ID: <31746508.1150254870572.JavaMail.jira@brutus>
Date: Wed, 14 Jun 2006 03:14:30 +0000 (GMT+00:00)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-297) When selecting node to put new block
 on, give priority to those with more free space/less blocks
In-Reply-To: <16202595.1150215869849.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-297?page=comments#action_12416116 ] 

eric baldeschwieler commented on HADOOP-297:
--------------------------------------------

be careful.  You don't want to put all the hot new blocks on new nodes in the cluster.  That can lead to real trouble.  We've seen that before!!  That ios what assigning to the most free node first will do.

You might be able to throw some weight factor in without causing complete destruction.

Also we might want to think about a migration thread that uses a finite amount of bandwidth reballancing the cluster.  Choosing old or random blocks to fill empty drives might work better.  Of course, beware of corner cases where non-functional nodes volunteer for infinite migration and such.

This is a non-trivial problem space.

> When selecting node to put new block on, give priority to those with more free space/less blocks
> ------------------------------------------------------------------------------------------------
>
>          Key: HADOOP-297
>          URL: http://issues.apache.org/jira/browse/HADOOP-297
>      Project: Hadoop
>         Type: Improvement

>   Components: dfs
>     Versions: 0.3.2
>     Reporter: Johan Oskarson
>     Priority: Minor
>  Attachments: priorityshuffle_v1.patch
>
> As mentioned in previous bug report:
> We're running a smallish cluster with very different machines, some with only 60 gb harddrives
> This creates a problem when inserting files into the dfs, these machines run out of space quickly while some have plenty of space free.
> So instead of just shuffling the nodes, I've created a quick patch that first sorts the target nodes by (freespace / blocks).
> It then randomizes the position of the first third of the nodes (so we don't put all the blocks in the file on the same machine)
> I'll let you guys figure out how to improve this.
> /Johan

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 14 03:23:12 2006
Return-Path: 
 <hadoop-dev-return-2054-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8153 invoked from network); 14 Jun 2006 03:23:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2006 03:23:12 -0000
Received: (qmail 49450 invoked by uid 500); 14 Jun 2006 03:23:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49309 invoked by uid 500); 14 Jun 2006 03:23:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49291 invoked by uid 99); 14 Jun 2006 03:23:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 20:23:03 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.126.228.149] (HELO rsmtp1.corp.yahoo.com)
 (207.126.228.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 20:23:02 -0700
Received: from [207.126.231.236] (eric14-mac.corp.yahoo.com [207.126.231.236])
	(authenticated bits=0)
	by rsmtp1.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k5E3MXht090347
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Tue, 13 Jun 2006 20:22:33 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=p1FiqQBd9NE1Bm3t8dHEeox2E8OHySvFFyfYJ7l4hQkIJUaSRPvxlwpTozUMWu/m
Mime-Version: 1.0 (Apple Message framework v750)
In-Reply-To: <e1d10fc00606131751i51445ab2h73a9708a23be6981@mail.gmail.com>
References: <e1d10fc00606131751i51445ab2h73a9708a23be6981@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <D4E895CF-5C2D-4811-B8FA-D35F621EDFDC@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Eric Baldeschwieler <eric14@yahoo-inc.com>
Subject: Re: Using Hadoop in a production environment
Date: Tue, 13 Jun 2006 20:22:28 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.750)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

doing a final rename of the target directory sounds like a good  
simple idea.

Could rename to something else if it failed.

The other approach is simply to drop completion stamps (create a ./ 
COMPLETE file) when all is done.

On Jun 13, 2006, at 5:51 PM, Paul Sutter wrote:

> We are starting to string together our disparate Hadoop jobs into a  
> running
> system, and we have a couple issues that are coming up.
>
> I'm looking for feedback or suggestions on how we can solve them.
>
> (1) Scheduling Hadoop jobs
>
> Could an Ant extension be developed to let a complex set of Hadoop  
> jobs be
> controlled using a sort of a build script that decides which jobs  
> need to be
> run?
>
> (2) How do we make Hadoop jobs atomic?
>
> One issue we have is that a failing job can leave directories in an
> inconsistent format, making a mess for the other jobs.
>
> I'm thiking of an atomic operation we could submit to the  
> nameserver. It
> might consist of multiple directory deletions and directory  
> renames, and
> would either complete in entirety, or not at all. And in this way,  
> we'd get
> the equivalent of a begin/commit/rollback capability for one simple
> function.
>
> Im curious to hear others thoughts on this topic.


From MAILER-DAEMON Wed Jun 14 04:51:53 2006
Return-Path: 
 <hadoop-dev-return-2055-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 61672 invoked from network); 14 Jun 2006 04:51:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2006 04:51:53 -0000
Received: (qmail 28720 invoked by uid 500); 14 Jun 2006 04:51:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28647 invoked by uid 500); 14 Jun 2006 04:51:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28500 invoked by uid 99); 14 Jun 2006 04:51:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 21:51:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 21:51:48 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 88D7C71421B
	for <hadoop-dev@lucene.apache.org>; Wed, 14 Jun 2006 04:50:31 +0000 (GMT)
Message-ID: <1804012.1150260631557.JavaMail.jira@brutus>
Date: Wed, 14 Jun 2006 04:50:31 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-271) add links to task tracker http server
 from task details and failure pages
In-Reply-To: <18980326.1149204689854.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-271?page=all ]

Owen O'Malley updated HADOOP-271:
---------------------------------

    Attachment: task-tracker-link-2.patch

One more iteration to deal with the fact that Windows does not contain the "killall" command. It is unfortunate that Java does not provide a way to send signals to processes or to get pids.

> add links to task tracker http server from task details and failure pages
> -------------------------------------------------------------------------
>
>          Key: HADOOP-271
>          URL: http://issues.apache.org/jira/browse/HADOOP-271
>      Project: Hadoop
>         Type: Improvement

>   Components: mapred
>     Versions: 0.2.1
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>     Priority: Minor
>      Fix For: 0.4.0
>  Attachments: add-machine-links.patch, task-tracker-link-2.patch, task-tracker-link.patch
>
> Make the machine name in the list of task attempts and failures into links to the correct task tracker http server.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 14 05:30:45 2006
Return-Path: 
 <hadoop-dev-return-2056-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94489 invoked from network); 14 Jun 2006 05:30:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2006 05:30:45 -0000
Received: (qmail 69990 invoked by uid 500); 14 Jun 2006 05:30:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 69834 invoked by uid 500); 14 Jun 2006 05:30:44 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 69822 invoked by uid 99); 14 Jun 2006 05:30:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 22:30:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 22:30:43 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 930BD7141FA
	for <hadoop-dev@lucene.apache.org>; Wed, 14 Jun 2006 05:29:30 +0000 (GMT)
Message-ID: <4360810.1150262970599.JavaMail.jira@brutus>
Date: Wed, 14 Jun 2006 05:29:30 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-299) maps from second jobs will not run
 until the first job finishes completely
In-Reply-To: <7806228.1150233869860.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-299?page=all ]

Owen O'Malley updated HADOOP-299:
---------------------------------

    Attachment: map-schedule.patch

This patch does a couple of things:
  1. It makes it more obvious that the task slot padding is only done on clusters bigger than 3 nodes.
  2. Remove the dead avgMaps and avgReduces variables.
  3. Change the default value of PAD_FRACTION from 0.1 to 0.01. (This variable is not in hadoop-default.xml, so the code controls the default value.)
  4. Fix a typo that was counting all of the running jobs' tasks instead of the the running jobs' running tasks. (totalMaps versus totalNeededMaps and totalReduces versus totalNeededReduces)

> maps from second jobs will not run until the first job finishes completely
> --------------------------------------------------------------------------
>
>          Key: HADOOP-299
>          URL: http://issues.apache.org/jira/browse/HADOOP-299
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.3.2
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.4.0
>  Attachments: map-schedule.patch
>
> Because of the logic in the JobTracker's pollForNewTask, second jobs will rarely start running maps until the first job finishes completely. The JobTracker leaves room to re-run failed maps from the first job and it reserves the total number of maps for the first job. Thus, if you have more maps in the first job than your cluster capacity, none of the second job maps will ever run.
> I propose setting the reserve to 1% of the first job's maps.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 14 06:22:47 2006
Return-Path: 
 <hadoop-dev-return-2057-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12408 invoked from network); 14 Jun 2006 06:22:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2006 06:22:47 -0000
Received: (qmail 33940 invoked by uid 500); 14 Jun 2006 06:22:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 33863 invoked by uid 500); 14 Jun 2006 06:22:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 33691 invoked by uid 99); 14 Jun 2006 06:22:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 23:22:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 23:22:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D92957141F9
	for <hadoop-dev@lucene.apache.org>; Wed, 14 Jun 2006 06:21:31 +0000 (GMT)
Message-ID: <24486774.1150266091886.JavaMail.jira@brutus>
Date: Wed, 14 Jun 2006 06:21:31 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-278) a missing map/reduce input directory
 does not produce a user-visible error message
In-Reply-To: <6294549.1149613229830.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-278?page=all ]

Owen O'Malley updated HADOOP-278:
---------------------------------

    Attachment: input-dir-check.patch

This patch adds a method for InputFormat that checks to see if a list of input paths is valid. InputFormatBase implements the simple check to make sure that each path represents a directory. JobClient checks the validity of each path and stops the job submission with a message to the user if any directories are invalid.

> a missing map/reduce input directory does not produce a user-visible error message
> ----------------------------------------------------------------------------------
>
>          Key: HADOOP-278
>          URL: http://issues.apache.org/jira/browse/HADOOP-278
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.3.1
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.4.0
>  Attachments: input-dir-check.patch
>
> If map/reduce's input directory is in DFS and does not exist, the user has to find the problem in the jobtracker logs rather than either the launching program or the webapp.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 14 06:33:44 2006
Return-Path: 
 <hadoop-dev-return-2058-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23952 invoked from network); 14 Jun 2006 06:33:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2006 06:33:44 -0000
Received: (qmail 54721 invoked by uid 500); 14 Jun 2006 06:33:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 54691 invoked by uid 500); 14 Jun 2006 06:33:44 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 54682 invoked by uid 99); 14 Jun 2006 06:33:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 23:33:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 23:33:43 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0E83E714204
	for <hadoop-dev@lucene.apache.org>; Wed, 14 Jun 2006 06:32:31 +0000 (GMT)
Message-ID: <2885517.1150266751056.JavaMail.jira@brutus>
Date: Wed, 14 Jun 2006 06:32:31 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-135) Potential deadlock in JobTracker.
In-Reply-To: <69894223.1144974540263.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-135?page=all ]

Owen O'Malley updated HADOOP-135:
---------------------------------

    Attachment: fix-lock-order.patch

Reverse the order of locking for the two fields so that they are always acquired in the same order.

> Potential deadlock in JobTracker.
> ---------------------------------
>
>          Key: HADOOP-135
>          URL: http://issues.apache.org/jira/browse/HADOOP-135
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.1.0
>     Reporter: Konstantin Shvachko
>     Assignee: Owen O'Malley
>      Fix For: 0.4.0
>  Attachments: fix-lock-order.patch
>
> org.apache.hadoop.mapred.JobTracker.RetireJobs.run()
> locks resources in this order
>                 synchronized (jobs) {
>                     synchronized (jobInitQueue) {
>                         synchronized (jobsByArrival) {
> org.apache.hadoop.mapred.JobTracker.submitJob()
> locks resources in a different order
>         synchronized (jobs) {
>             synchronized (jobsByArrival) {
>                 synchronized (jobInitQueue) {
> This potentially can lead to a deadlock.
> Unless there is common lock on top of it in which case these
> three locks are redundant.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 14 07:24:48 2006
Return-Path: 
 <hadoop-dev-return-2059-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12243 invoked from network); 14 Jun 2006 07:24:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2006 07:24:48 -0000
Received: (qmail 1786 invoked by uid 500); 14 Jun 2006 07:24:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 1693 invoked by uid 500); 14 Jun 2006 07:24:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 1338 invoked by uid 99); 14 Jun 2006 07:24:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 00:24:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 00:24:43 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DB509714204
	for <hadoop-dev@lucene.apache.org>; Wed, 14 Jun 2006 07:23:30 +0000 (GMT)
Message-ID: <26831235.1150269810895.JavaMail.jira@brutus>
Date: Wed, 14 Jun 2006 07:23:30 +0000 (GMT+00:00)
From: "Andrzej Bialecki  (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-299) maps from second jobs will not run
 until the first job finishes completely
In-Reply-To: <7806228.1150233869860.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-299?page=comments#action_12416131 ] 

Andrzej Bialecki  commented on HADOOP-299:
------------------------------------------

It's the same issue that I reported earlier on the mailing list (e.g. http://www.mail-archive.com/hadoop-dev@lucene.apache.org/msg01510.html, http://www.mail-archive.com/hadoop-dev@lucene.apache.org/msg01524.html and http://www.mail-archive.com/hadoop-dev@lucene.apache.org/msg01557.html).

Your patch, although it improves things, could perhaps go one step further if you have some time to spare... ;) I'm thinking specifically about the following:

* don't schedule reduce tasks from jobs, where map tasks had no chance of running yet. This happens when there are a couple available slots, and map tasks cannot be scheduled yet, but the code in JobTracker:743 still allocates reduce tasks from the next job.

* allow simple priority-based preemption, i.e. jobs with a higher priority (presumably short-lived) could be favored in task allocation over already running jobs.

* alternatively, allow setting limits on the min/max % of cluster capacity the job is willing to accept. This gives some leeway to the scheduler to allocate the flexible portion of remaining tasks to old/new jobs.

* allow setting different priorities for maps and reduces - e.g. in Nutch fetcher job, map tasks are very long running and in many cases need to fit within a specified time-frame (e.g. during the night). However, reduce tasks, which simply reshuffle the data, are not so time-critical.


> maps from second jobs will not run until the first job finishes completely
> --------------------------------------------------------------------------
>
>          Key: HADOOP-299
>          URL: http://issues.apache.org/jira/browse/HADOOP-299
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.3.2
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.4.0
>  Attachments: map-schedule.patch
>
> Because of the logic in the JobTracker's pollForNewTask, second jobs will rarely start running maps until the first job finishes completely. The JobTracker leaves room to re-run failed maps from the first job and it reserves the total number of maps for the first job. Thus, if you have more maps in the first job than your cluster capacity, none of the second job maps will ever run.
> I propose setting the reserve to 1% of the first job's maps.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 14 09:43:49 2006
Return-Path: 
 <hadoop-dev-return-2060-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23532 invoked from network); 14 Jun 2006 09:43:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2006 09:43:49 -0000
Received: (qmail 96452 invoked by uid 500); 14 Jun 2006 09:43:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 96283 invoked by uid 500); 14 Jun 2006 09:43:44 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 96211 invoked by uid 99); 14 Jun 2006 09:43:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 02:43:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 02:43:43 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A3E0571428D
	for <hadoop-dev@lucene.apache.org>; Wed, 14 Jun 2006 09:42:30 +0000 (GMT)
Message-ID: <1751865.1150278150668.JavaMail.jira@brutus>
Date: Wed, 14 Jun 2006 09:42:30 +0000 (GMT+00:00)
From: "Johan Oskarson (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-296) Do not assign blocks to a datanode
 with < x mb free
In-Reply-To: <12462846.1150196369845.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-296?page=all ]

Johan Oskarson updated HADOOP-296:
----------------------------------

    Attachment: minspacev2.patch

Thanks for the feedback.
Quick patch that reads dfs.datanode.du.reserved and dfs.datanode.du.pct from the config.

Hope this is what you ment.

/Johan

> Do not assign blocks to a datanode with < x mb free
> ---------------------------------------------------
>
>          Key: HADOOP-296
>          URL: http://issues.apache.org/jira/browse/HADOOP-296
>      Project: Hadoop
>         Type: New Feature

>   Components: dfs
>     Versions: 0.3.2
>     Reporter: Johan Oskarson
>  Attachments: minspace.patch, minspacev2.patch
>
> We're running a smallish cluster with very different machines, some with only 60 gb harddrives
> This creates a problem when inserting files into the dfs, these machines run out of space quickly and then they cannot run any map reduce operations
> A solution would be to not assign any new blocks once the space is below a certain user configurable threshold
> This free space could then be used by the map reduce operations instead (if that's on the same disk)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 14 14:43:45 2006
Return-Path: 
 <hadoop-dev-return-2061-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20676 invoked from network); 14 Jun 2006 14:43:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2006 14:43:45 -0000
Received: (qmail 38462 invoked by uid 500); 14 Jun 2006 14:43:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38436 invoked by uid 500); 14 Jun 2006 14:43:44 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38427 invoked by uid 99); 14 Jun 2006 14:43:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 07:43:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 07:43:43 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A8F2C7142A1
	for <hadoop-dev@lucene.apache.org>; Wed, 14 Jun 2006 14:42:30 +0000 (GMT)
Message-ID: <31193768.1150296150689.JavaMail.jira@brutus>
Date: Wed, 14 Jun 2006 14:42:30 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-299) maps from second jobs will not run
 until the first job finishes completely
In-Reply-To: <7806228.1150233869860.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-299?page=comments#action_12416204 ] 

Owen O'Malley commented on HADOOP-299:
--------------------------------------

*smile* I don't have that much free time! I certainly agree with you that the right long term solution would involve:
  1. Using task killing to make slots available if they were needed.
  2. Not starting reduces until at least one of the maps feeding it has finished and generated output.
  3. For bonus points you could prefer to run a reduce that has local input. (In general that won't help, but there is a sub-class of problem where most of the input for each reduce is coming from a small number of maps.)

> maps from second jobs will not run until the first job finishes completely
> --------------------------------------------------------------------------
>
>          Key: HADOOP-299
>          URL: http://issues.apache.org/jira/browse/HADOOP-299
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.3.2
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.4.0
>  Attachments: map-schedule.patch
>
> Because of the logic in the JobTracker's pollForNewTask, second jobs will rarely start running maps until the first job finishes completely. The JobTracker leaves room to re-run failed maps from the first job and it reserves the total number of maps for the first job. Thus, if you have more maps in the first job than your cluster capacity, none of the second job maps will ever run.
> I propose setting the reserve to 1% of the first job's maps.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 14 16:23:39 2006
Return-Path: 
 <hadoop-dev-return-2062-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12569 invoked from network); 14 Jun 2006 16:23:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2006 16:23:39 -0000
Received: (qmail 55181 invoked by uid 500); 14 Jun 2006 16:23:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55037 invoked by uid 500); 14 Jun 2006 16:23:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55026 invoked by uid 99); 14 Jun 2006 16:23:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 09:23:38 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.109.112.27] (HELO mrout1-b.corp.dcn.yahoo.com)
 (216.109.112.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 09:23:37 -0700
Received: from explainfloorlx (explainfloor-lx.corp.yahoo.com
 [207.126.231.230])
	by mrout1-b.corp.dcn.yahoo.com (8.13.6/8.13.4/y.out) with ESMTP id
 k5EGN9q2054171
	for <hadoop-dev@lucene.apache.org>; Wed, 14 Jun 2006 09:23:10 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=from:to:subject:date:message-id:mime-version:content-type:
	content-transfer-encoding:x-mailer:in-reply-to:thread-index:x-mimeole;
	b=Ygn0btUYlmgmDo1juHXF0tomJrhL8WkHk0IHaB1gzvjV7MqF0IRvrl8AMUBzlJCi
From: "Runping Qi" <runping@yahoo-inc.com>
To: <hadoop-dev@lucene.apache.org>
Subject: RE: Using Hadoop in a production environment
Date: Wed, 14 Jun 2006 09:23:09 -0700
Message-ID: <000101c68fce$d3a63d40$e6e77ecf@ds.corp.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <e1d10fc00606131751i51445ab2h73a9708a23be6981@mail.gmail.com>
Thread-Index: AcaPTMC0uYxKcHSTTei5HEpF8HtPmgAgGgZg
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


I have also been thinking of the Hadoop job scheduling issue too. 

In my applications, some jobs depend on the outputs of other jobs.
Therefore, job dependency forms a DAG. A job is ready to run if and only if
it does not have any dependency or all the jobs it depends are finished
successfully. To help schedule and monitor a group of jobs like that, I am
thinking of implementing a utility class that:
	- accept jobs with dependency specification
      - monitor job status
      - submit jobs when they are ready

With such a utility class, the application can construct its jobs, specify
their dependency and then hand the jobs to the utility class. The utility
class takes care of the details of job submission.

Runping
 

> -----Original Message-----
> From: Paul Sutter [mailto:sutter@gmail.com]
> Sent: Tuesday, June 13, 2006 5:51 PM
> To: hadoop-dev@lucene.apache.org
> Subject: Using Hadoop in a production environment
> 
> We are starting to string together our disparate Hadoop jobs into a
> running
> system, and we have a couple issues that are coming up.
> 
> I'm looking for feedback or suggestions on how we can solve them.
> 
> (1) Scheduling Hadoop jobs
> 
> Could an Ant extension be developed to let a complex set of Hadoop jobs be
> controlled using a sort of a build script that decides which jobs need to
> be
> run?
> 
> (2) How do we make Hadoop jobs atomic?
> 
> One issue we have is that a failing job can leave directories in an
> inconsistent format, making a mess for the other jobs.
> 
> I'm thiking of an atomic operation we could submit to the nameserver. It
> might consist of multiple directory deletions and directory renames, and
> would either complete in entirety, or not at all. And in this way, we'd
> get
> the equivalent of a begin/commit/rollback capability for one simple
> function.
> 
> Im curious to hear others thoughts on this topic.


From MAILER-DAEMON Wed Jun 14 16:45:45 2006
Return-Path: 
 <hadoop-dev-return-2063-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17753 invoked from network); 14 Jun 2006 16:45:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2006 16:45:45 -0000
Received: (qmail 92849 invoked by uid 500); 14 Jun 2006 16:45:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 92831 invoked by uid 500); 14 Jun 2006 16:45:44 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 92822 invoked by uid 99); 14 Jun 2006 16:45:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 09:45:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 09:45:43 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9ADE5714204
	for <hadoop-dev@lucene.apache.org>; Wed, 14 Jun 2006 16:44:30 +0000 (GMT)
Message-ID: <16538580.1150303470631.JavaMail.jira@brutus>
Date: Wed, 14 Jun 2006 16:44:30 +0000 (GMT+00:00)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-296) Do not assign blocks to a datanode
 with < x mb free
In-Reply-To: <12462846.1150196369845.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-296?page=comments#action_12416226 ] 

Yoram Arnon commented on HADOOP-296:
------------------------------------

managing individual configuration files on each node is exceedingly difficult.
when I make a config change, say, when a new config variable is added, it's usually for the entire cluster(s); I make the change on one node, then distribute to all the other nodes. That would override individual changes made to those files. editing each individual file separately is clearly unmanageable, so for larger cluster it's really important to have a *very* small number of configurations.

As a rule, less configuration is better. In this particular case, improving the allocation strategy to do a better job automatically, possibly using a single configured strategy variable but better without, would be far better than individual configuration per node.
At the end of the day, you're going to select values for these two new config items based on some logic, using real world numbers as a guide. Why not just implement that logic in the code?

> Do not assign blocks to a datanode with < x mb free
> ---------------------------------------------------
>
>          Key: HADOOP-296
>          URL: http://issues.apache.org/jira/browse/HADOOP-296
>      Project: Hadoop
>         Type: New Feature

>   Components: dfs
>     Versions: 0.3.2
>     Reporter: Johan Oskarson
>  Attachments: minspace.patch, minspacev2.patch
>
> We're running a smallish cluster with very different machines, some with only 60 gb harddrives
> This creates a problem when inserting files into the dfs, these machines run out of space quickly and then they cannot run any map reduce operations
> A solution would be to not assign any new blocks once the space is below a certain user configurable threshold
> This free space could then be used by the map reduce operations instead (if that's on the same disk)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 14 17:17:30 2006
Return-Path: 
 <hadoop-dev-return-2064-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30192 invoked from network); 14 Jun 2006 17:17:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2006 17:17:30 -0000
Received: (qmail 48847 invoked by uid 500); 14 Jun 2006 17:17:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 48824 invoked by uid 500); 14 Jun 2006 17:17:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 48815 invoked by uid 99); 14 Jun 2006 17:17:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 10:17:29 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.126.228.150] (HELO rsmtp2.corp.yahoo.com)
 (207.126.228.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 10:17:28 -0700
Received: from [172.21.147.237] ([172.21.179.131])
	(authenticated bits=0)
	by rsmtp2.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k5EHGsms010207
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Wed, 14 Jun 2006 10:16:54 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=HxtHS4qwgvnABGVU2hfjr1x5Yc7Z56C03iP8Mk4kEIjsAoaczxcKeRUU+axgIhYc
Mime-Version: 1.0 (Apple Message framework v750)
In-Reply-To: <000101c68fce$d3a63d40$e6e77ecf@ds.corp.yahoo.com>
References: <000101c68fce$d3a63d40$e6e77ecf@ds.corp.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <A3E7B462-FD7F-4A5C-A113-02EF31D76360@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Eric Baldeschwieler <eric14@yahoo-inc.com>
Subject: Re: Using Hadoop in a production environment
Date: Wed, 14 Jun 2006 10:16:45 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.750)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

sounds pretty cool.

On Jun 14, 2006, at 9:23 AM, Runping Qi wrote:

>
> I have also been thinking of the Hadoop job scheduling issue too.
>
> In my applications, some jobs depend on the outputs of other jobs.
> Therefore, job dependency forms a DAG. A job is ready to run if and  
> only if
> it does not have any dependency or all the jobs it depends are  
> finished
> successfully. To help schedule and monitor a group of jobs like  
> that, I am
> thinking of implementing a utility class that:
> 	- accept jobs with dependency specification
>       - monitor job status
>       - submit jobs when they are ready
>
> With such a utility class, the application can construct its jobs,  
> specify
> their dependency and then hand the jobs to the utility class. The  
> utility
> class takes care of the details of job submission.
>
> Runping
>
>
>> -----Original Message-----
>> From: Paul Sutter [mailto:sutter@gmail.com]
>> Sent: Tuesday, June 13, 2006 5:51 PM
>> To: hadoop-dev@lucene.apache.org
>> Subject: Using Hadoop in a production environment
>>
>> We are starting to string together our disparate Hadoop jobs into a
>> running
>> system, and we have a couple issues that are coming up.
>>
>> I'm looking for feedback or suggestions on how we can solve them.
>>
>> (1) Scheduling Hadoop jobs
>>
>> Could an Ant extension be developed to let a complex set of Hadoop  
>> jobs be
>> controlled using a sort of a build script that decides which jobs  
>> need to
>> be
>> run?
>>
>> (2) How do we make Hadoop jobs atomic?
>>
>> One issue we have is that a failing job can leave directories in an
>> inconsistent format, making a mess for the other jobs.
>>
>> I'm thiking of an atomic operation we could submit to the  
>> nameserver. It
>> might consist of multiple directory deletions and directory  
>> renames, and
>> would either complete in entirety, or not at all. And in this way,  
>> we'd
>> get
>> the equivalent of a begin/commit/rollback capability for one simple
>> function.
>>
>> Im curious to hear others thoughts on this topic.
>


From MAILER-DAEMON Wed Jun 14 17:43:53 2006
Return-Path: 
 <hadoop-dev-return-2065-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 54652 invoked from network); 14 Jun 2006 17:43:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2006 17:43:53 -0000
Received: (qmail 94321 invoked by uid 500); 14 Jun 2006 17:43:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94293 invoked by uid 500); 14 Jun 2006 17:43:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94201 invoked by uid 99); 14 Jun 2006 17:43:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 10:43:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 10:43:45 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 92798714294
	for <hadoop-dev@lucene.apache.org>; Wed, 14 Jun 2006 17:42:32 +0000 (GMT)
Message-ID: <1479889.1150306952597.JavaMail.jira@brutus>
Date: Wed, 14 Jun 2006 17:42:32 +0000 (GMT+00:00)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-296) Do not assign blocks to a datanode
 with < x mb free
In-Reply-To: <12462846.1150196369845.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-296?page=comments#action_12416233 ] 

Konstantin Shvachko commented on HADOOP-296:
--------------------------------------------

Yoram, as far as I know you use a large cluster of mostly identical machines.
For such clusters you need one configuration uniformly distributed to other nodes.
The case that Johan describes is different. You can have a uniform config, but should be
able to correct it for one or two nodes that are different from everything else.

Johan, I think this is good.
Please replace 0.98f by USABLE_DISK_PCT_DEFAULT
+1 after that.


> Do not assign blocks to a datanode with < x mb free
> ---------------------------------------------------
>
>          Key: HADOOP-296
>          URL: http://issues.apache.org/jira/browse/HADOOP-296
>      Project: Hadoop
>         Type: New Feature

>   Components: dfs
>     Versions: 0.3.2
>     Reporter: Johan Oskarson
>  Attachments: minspace.patch, minspacev2.patch
>
> We're running a smallish cluster with very different machines, some with only 60 gb harddrives
> This creates a problem when inserting files into the dfs, these machines run out of space quickly and then they cannot run any map reduce operations
> A solution would be to not assign any new blocks once the space is below a certain user configurable threshold
> This free space could then be used by the map reduce operations instead (if that's on the same disk)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 14 17:57:45 2006
Return-Path: 
 <hadoop-dev-return-2066-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84955 invoked from network); 14 Jun 2006 17:57:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2006 17:57:45 -0000
Received: (qmail 14891 invoked by uid 500); 14 Jun 2006 17:57:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14762 invoked by uid 500); 14 Jun 2006 17:57:44 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 14753 invoked by uid 99); 14 Jun 2006 17:57:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 10:57:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 10:57:43 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8CB6771428D
	for <hadoop-dev@lucene.apache.org>; Wed, 14 Jun 2006 17:56:30 +0000 (GMT)
Message-ID: <1434048.1150307790573.JavaMail.jira@brutus>
Date: Wed, 14 Jun 2006 17:56:30 +0000 (GMT+00:00)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-297) When selecting node to put new block
 on, give priority to those with more free space/less blocks
In-Reply-To: <16202595.1150215869849.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-297?page=comments#action_12416234 ] 

Konstantin Shvachko commented on HADOOP-297:
--------------------------------------------

Implementing a good weight function is a non-trivial problem.
It is still a very good thing to implement the framework that would support
prioritized queue of nodes with a simple weight function (=remaining disk space) for a starter.
The function could be fine tuned later on.
The rebalancing/migration thread might be a separate task.

> When selecting node to put new block on, give priority to those with more free space/less blocks
> ------------------------------------------------------------------------------------------------
>
>          Key: HADOOP-297
>          URL: http://issues.apache.org/jira/browse/HADOOP-297
>      Project: Hadoop
>         Type: Improvement

>   Components: dfs
>     Versions: 0.3.2
>     Reporter: Johan Oskarson
>     Priority: Minor
>  Attachments: priorityshuffle_v1.patch
>
> As mentioned in previous bug report:
> We're running a smallish cluster with very different machines, some with only 60 gb harddrives
> This creates a problem when inserting files into the dfs, these machines run out of space quickly while some have plenty of space free.
> So instead of just shuffling the nodes, I've created a quick patch that first sorts the target nodes by (freespace / blocks).
> It then randomizes the position of the first third of the nodes (so we don't put all the blocks in the file on the same machine)
> I'll let you guys figure out how to improve this.
> /Johan

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 14 18:01:54 2006
Return-Path: 
 <hadoop-dev-return-2067-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86840 invoked from network); 14 Jun 2006 18:01:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2006 18:01:54 -0000
Received: (qmail 24206 invoked by uid 500); 14 Jun 2006 18:01:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24040 invoked by uid 500); 14 Jun 2006 18:01:44 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24028 invoked by uid 99); 14 Jun 2006 18:01:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 11:01:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 11:01:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B634E71421B
	for <hadoop-dev@lucene.apache.org>; Wed, 14 Jun 2006 18:00:30 +0000 (GMT)
Message-ID: <23999026.1150308030622.JavaMail.jira@brutus>
Date: Wed, 14 Jun 2006 18:00:30 +0000 (GMT+00:00)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-296) Do not assign blocks to a datanode
 with < x mb free
In-Reply-To: <12462846.1150196369845.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-296?page=comments#action_12416235 ] 

Konstantin Shvachko commented on HADOOP-296:
--------------------------------------------

Oh, and you also need to add those properties into hadoop-default.xml

> Do not assign blocks to a datanode with < x mb free
> ---------------------------------------------------
>
>          Key: HADOOP-296
>          URL: http://issues.apache.org/jira/browse/HADOOP-296
>      Project: Hadoop
>         Type: New Feature

>   Components: dfs
>     Versions: 0.3.2
>     Reporter: Johan Oskarson
>  Attachments: minspace.patch, minspacev2.patch
>
> We're running a smallish cluster with very different machines, some with only 60 gb harddrives
> This creates a problem when inserting files into the dfs, these machines run out of space quickly and then they cannot run any map reduce operations
> A solution would be to not assign any new blocks once the space is below a certain user configurable threshold
> This free space could then be used by the map reduce operations instead (if that's on the same disk)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 14 19:31:37 2006
Return-Path: 
 <hadoop-dev-return-2069-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 89633 invoked from network); 14 Jun 2006 19:31:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2006 19:31:37 -0000
Received: (qmail 28168 invoked by uid 500); 14 Jun 2006 19:28:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 25855 invoked by uid 500); 14 Jun 2006 19:28:19 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 25213 invoked by uid 99); 14 Jun 2006 19:28:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 12:28:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 12:08:43 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D2CD371428D
	for <hadoop-dev@lucene.apache.org>; Wed, 14 Jun 2006 19:07:29 +0000 (GMT)
Message-ID: <205898.1150312049860.JavaMail.jira@brutus>
Date: Wed, 14 Jun 2006 19:07:29 +0000 (GMT+00:00)
From: "Benjamin Reed (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-303) JobClient looking for classes for
 submitted job in the wrong place
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

JobClient looking for classes for submitted job in the wrong place
------------------------------------------------------------------

         Key: HADOOP-303
         URL: http://issues.apache.org/jira/browse/HADOOP-303
     Project: Hadoop
        Type: Bug

  Components: mapred  
    Versions: 0.3.2    
    Reporter: Benjamin Reed
    Priority: Minor


JobClient does some checking of the job being submitted when it submits a jar file along with the job. The problem is that the JobClient pulls classes from the classpath rather than the submitted jar file. Because the jar file may contain newer (or older) versions of classes on the classpath this behavior leads to confusing errors when the job is run. It is also a pain to ensure that the jar file being submitted is on the classpath. Further, if the JobClient uses the submitted jar file rather than the classpath, missing classes from the jar file can be detected earlier.

This patch will cause the JobClient to load the classes for a job from the jar file rather than the classpath. Because of the class loading precedence rules in Java, if the class is on the system class path, it will be loaded from there rather than the submitted jar file, but now users need not (and should not) put job classfiles on the system classpath.

This patch also allows config files to be put in a configuration directory rather than on the classpath, which also eliminates some confusing behavior when there are duplicate instances of config files in different parts of the classpath. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 14 19:32:04 2006
Return-Path: 
 <hadoop-dev-return-2068-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 90357 invoked from network); 14 Jun 2006 19:32:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2006 19:32:04 -0000
Received: (qmail 27080 invoked by uid 500); 14 Jun 2006 19:28:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24117 invoked by uid 500); 14 Jun 2006 19:27:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23535 invoked by uid 99); 14 Jun 2006 19:27:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 12:27:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 12:10:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AA57A7141D1
	for <hadoop-dev@lucene.apache.org>; Wed, 14 Jun 2006 19:09:30 +0000 (GMT)
Message-ID: <11979862.1150312170694.JavaMail.jira@brutus>
Date: Wed, 14 Jun 2006 19:09:30 +0000 (GMT+00:00)
From: "Benjamin Reed (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-303) JobClient looking for classes for
 submitted job in the wrong place
In-Reply-To: <205898.1150312049860.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-303?page=all ]

Benjamin Reed updated HADOOP-303:
---------------------------------

    Attachment: jobcl-fix.patch

> JobClient looking for classes for submitted job in the wrong place
> ------------------------------------------------------------------
>
>          Key: HADOOP-303
>          URL: http://issues.apache.org/jira/browse/HADOOP-303
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.3.2
>     Reporter: Benjamin Reed
>     Priority: Minor
>  Attachments: jobcl-fix.patch
>
> JobClient does some checking of the job being submitted when it submits a jar file along with the job. The problem is that the JobClient pulls classes from the classpath rather than the submitted jar file. Because the jar file may contain newer (or older) versions of classes on the classpath this behavior leads to confusing errors when the job is run. It is also a pain to ensure that the jar file being submitted is on the classpath. Further, if the JobClient uses the submitted jar file rather than the classpath, missing classes from the jar file can be detected earlier.
> This patch will cause the JobClient to load the classes for a job from the jar file rather than the classpath. Because of the class loading precedence rules in Java, if the class is on the system class path, it will be loaded from there rather than the submitted jar file, but now users need not (and should not) put job classfiles on the system classpath.
> This patch also allows config files to be put in a configuration directory rather than on the classpath, which also eliminates some confusing behavior when there are duplicate instances of config files in different parts of the classpath. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 14 19:46:52 2006
Return-Path: 
 <hadoop-dev-return-2070-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 3649 invoked from network); 14 Jun 2006 19:46:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2006 19:46:52 -0000
Received: (qmail 15000 invoked by uid 500); 14 Jun 2006 19:46:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14913 invoked by uid 500); 14 Jun 2006 19:46:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 14698 invoked by uid 99); 14 Jun 2006 19:46:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 12:46:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 12:46:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 93CA0714204
	for <hadoop-dev@lucene.apache.org>; Wed, 14 Jun 2006 19:45:30 +0000 (GMT)
Message-ID: <9297965.1150314330602.JavaMail.jira@brutus>
Date: Wed, 14 Jun 2006 19:45:30 +0000 (GMT+00:00)
From: "Johan Oskarson (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-296) Do not assign blocks to a datanode
 with < x mb free
In-Reply-To: <12462846.1150196369845.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-296?page=all ]

Johan Oskarson updated HADOOP-296:
----------------------------------

    Attachment: minspacev3.patch

Added the changes suggested by Konstantin.

/Johan

> Do not assign blocks to a datanode with < x mb free
> ---------------------------------------------------
>
>          Key: HADOOP-296
>          URL: http://issues.apache.org/jira/browse/HADOOP-296
>      Project: Hadoop
>         Type: New Feature

>   Components: dfs
>     Versions: 0.3.2
>     Reporter: Johan Oskarson
>  Attachments: minspace.patch, minspacev2.patch, minspacev3.patch
>
> We're running a smallish cluster with very different machines, some with only 60 gb harddrives
> This creates a problem when inserting files into the dfs, these machines run out of space quickly and then they cannot run any map reduce operations
> A solution would be to not assign any new blocks once the space is below a certain user configurable threshold
> This free space could then be used by the map reduce operations instead (if that's on the same disk)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 14 19:48:45 2006
Return-Path: 
 <hadoop-dev-return-2071-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 5516 invoked from network); 14 Jun 2006 19:48:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2006 19:48:45 -0000
Received: (qmail 21259 invoked by uid 500); 14 Jun 2006 19:48:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 21116 invoked by uid 500); 14 Jun 2006 19:48:44 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 21107 invoked by uid 99); 14 Jun 2006 19:48:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 12:48:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 12:48:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B4C97714204
	for <hadoop-dev@lucene.apache.org>; Wed, 14 Jun 2006 19:47:30 +0000 (GMT)
Message-ID: <25968787.1150314450737.JavaMail.jira@brutus>
Date: Wed, 14 Jun 2006 19:47:30 +0000 (GMT+00:00)
From: "Johan Oskarson (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-296) Do not assign blocks to a datanode
 with < x mb free
In-Reply-To: <12462846.1150196369845.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-296?page=all ]

Johan Oskarson updated HADOOP-296:
----------------------------------

    Attachment: minspacev3.patch

Arghl, sorry..
Forgot to save before I did the diff

> Do not assign blocks to a datanode with < x mb free
> ---------------------------------------------------
>
>          Key: HADOOP-296
>          URL: http://issues.apache.org/jira/browse/HADOOP-296
>      Project: Hadoop
>         Type: New Feature

>   Components: dfs
>     Versions: 0.3.2
>     Reporter: Johan Oskarson
>  Attachments: minspace.patch, minspacev2.patch, minspacev3.patch, minspacev3.patch
>
> We're running a smallish cluster with very different machines, some with only 60 gb harddrives
> This creates a problem when inserting files into the dfs, these machines run out of space quickly and then they cannot run any map reduce operations
> A solution would be to not assign any new blocks once the space is below a certain user configurable threshold
> This free space could then be used by the map reduce operations instead (if that's on the same disk)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 14 20:05:45 2006
Return-Path: 
 <hadoop-dev-return-2072-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 11119 invoked from network); 14 Jun 2006 20:05:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2006 20:05:45 -0000
Received: (qmail 51969 invoked by uid 500); 14 Jun 2006 20:05:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 51938 invoked by uid 500); 14 Jun 2006 20:05:44 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 51929 invoked by uid 99); 14 Jun 2006 20:05:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 13:05:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 13:05:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A707E714204
	for <hadoop-dev@lucene.apache.org>; Wed, 14 Jun 2006 20:04:30 +0000 (GMT)
Message-ID: <31912561.1150315470681.JavaMail.jira@brutus>
Date: Wed, 14 Jun 2006 20:04:30 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-210) Namenode not able to accept
 connections
In-Reply-To: <22832248.1147306205708.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-210?page=comments#action_12416253 ] 

Owen O'Malley commented on HADOOP-210:
--------------------------------------

I'm having problems with this patch seeming to cause servers to stop serving requests. Usually, I can do a bit of work, but when I try to submit a job it, the job never seems to show up in the webapp.

> Namenode not able to accept connections
> ---------------------------------------
>
>          Key: HADOOP-210
>          URL: http://issues.apache.org/jira/browse/HADOOP-210
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>  Environment: linux
>     Reporter: Mahadev konar
>     Assignee: Mahadev konar
>      Fix For: 0.4.0
>  Attachments: nio.patch, nio.patch
>
> I am running owen's random writer on a 627 node cluster (writing 10GB/node).  After running for a while (map 12% reduce 1%) I get the following error on the Namenode:
> Exception in thread "Server listener on port 60000" java.lang.OutOfMemoryError: unable to create new native thread
>         at java.lang.Thread.start0(Native Method)
>         at java.lang.Thread.start(Thread.java:574)
>         at org.apache.hadoop.ipc.Server$Listener.run(Server.java:105)
> After this, the namenode does not seem to be accepting connections from any of the clients. All the DFSClient calls get timeout. Here is a trace for one of them:
> java.net.SocketTimeoutException: timed out waiting for rpc response
> 	at org.apache.hadoop.ipc.Client.call(Client.java:305)
> 	at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:149)
> 	at org.apache.hadoop.dfs.$Proxy1.open(Unknown Source)
> 	at org.apache.hadoop.dfs.DFSClient$DFSInputStream.openInfo(DFSClient.java:419)
> 	at org.apache.hadoop.dfs.DFSClient$DFSInputStream.(DFSClient.java:406)
> 	at org.apache.hadoop.dfs.DFSClient.open(DFSClient.java:171)
> 	at org.apache.hadoop.dfs.DistributedFileSystem.openRaw(DistributedFileSystem.java:78)
> 	at org.apache.hadoop.fs.FSDataInputStream$Checker.(FSDataInputStream.java:46)
> 	at org.apache.hadoop.fs.FSDataInputStream.(FSDataInputStream.java:228)
> 	at org.apache.hadoop.fs.FileSystem.open(FileSystem.java:157)
> 	at org.apache.hadoop.mapred.TextInputFormat.getRecordReader(TextInputFormat.java:43)
> 	at org.apache.hadoop.mapred.MapTask.run(MapTask.java:105)
> 	at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:785).
> The namenode then has around 1% CPU utilization at this time (after the outofmemory exception has been thrown). I have profiled the NameNode and it seems to be using around a maixmum heap size of 57MB (which is not much). So, heap size does not seem to be a problem. It might be happening due to lack of Stack space? Any pointers?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 14 20:42:46 2006
Return-Path: 
 <hadoop-dev-return-2073-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57815 invoked from network); 14 Jun 2006 20:42:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2006 20:42:46 -0000
Received: (qmail 16916 invoked by uid 500); 14 Jun 2006 20:42:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 16837 invoked by uid 500); 14 Jun 2006 20:42:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 16828 invoked by uid 99); 14 Jun 2006 20:42:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 13:42:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 13:42:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 36425714204
	for <hadoop-dev@lucene.apache.org>; Wed, 14 Jun 2006 20:41:31 +0000 (GMT)
Message-ID: <14756158.1150317691219.JavaMail.jira@brutus>
Date: Wed, 14 Jun 2006 20:41:31 +0000 (GMT+00:00)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-59) support generic command-line options
In-Reply-To: <321463887.1140733957324.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-59?page=all ]

Hairong Kuang reassigned HADOOP-59:
-----------------------------------

    Assign To: Hairong Kuang  (was: Michel Tourn)

> support generic command-line options
> ------------------------------------
>
>          Key: HADOOP-59
>          URL: http://issues.apache.org/jira/browse/HADOOP-59
>      Project: Hadoop
>         Type: Improvement

>   Components: conf
>     Versions: 0.2.0
>     Reporter: Doug Cutting
>     Assignee: Hairong Kuang
>     Priority: Minor
>      Fix For: 0.4.0
>  Attachments: Tool.java, ToolBase.java, bashfile.patch, toolbase.patch
>
> Hadoop commands should all support some common options.  For example, it should be possible to specify the namenode, datanode, and, for that matter, any config option, in a generic way.
> This could be implemented with code like:
> public interface Tool extends Configurable {
>   void run(String[] args) throws Exception;
> }
> public class ToolBase implements Tool extends Configured {
>   public final void main(String[] args) throws Exception {
>     Configuration conf = new Configuration();
>     ... parse config options from args into conf ...
>     this.configure(conf);
>     this.run();
>   }
> }
> public MyTool extends ExcecutableBase {
>   public static void main(String[] args) throws Exception {
>     new MyTool().main(args);
>   }
> }
> The general command line syntax could be:
> bin/hadoop [generalOptions] command [commandOptions]
> Where generalOptions are things that ToolBase handles, and only the commandOptions are passed to Tool.run().  The most important generalOption would be '-D', which would define name/value pairs that are set in the configuration.  This alone would permit folks to set the namenode, datanode, etc.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 14 21:49:45 2006
Return-Path: 
 <hadoop-dev-return-2074-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32353 invoked from network); 14 Jun 2006 21:49:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2006 21:49:45 -0000
Received: (qmail 12004 invoked by uid 500); 14 Jun 2006 21:49:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 11962 invoked by uid 500); 14 Jun 2006 21:49:44 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 11945 invoked by uid 99); 14 Jun 2006 21:49:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 14:49:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 14:49:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 99CC4714204
	for <hadoop-dev@lucene.apache.org>; Wed, 14 Jun 2006 21:48:30 +0000 (GMT)
Message-ID: <27685113.1150321710626.JavaMail.jira@brutus>
Date: Wed, 14 Jun 2006 21:48:30 +0000 (GMT+00:00)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-59) support generic command-line options
In-Reply-To: <321463887.1140733957324.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-59?page=comments#action_12416263 ] 

Hairong Kuang commented on HADOOP-59:
-------------------------------------

I am thinking to design the ToolBase as follows:

public class ToolBase implements Tool extends Configured { 
  public final void main(String[] args) throws Exception { 
    Configuration conf = new Configuration(); 
    String [] commandOptions = parseGeneralOptions( conf, args );
    this.configure( conf ); 
    this.run( commandOptions ); 
  } 
} 

ParseGeneralOptions parses the arguments, looks for general options, and sets configuration accordingly. It returns command-specific options.

I plan to support 4 general options:

-fs <local | namenode:port>             specify file system 
-jt <local | jobtracker:port>                 specify job tracker
-config <configuration file>                specify a file that contains application-specific configuration
-Dname=value                                     set a porperty to be value

> support generic command-line options
> ------------------------------------
>
>          Key: HADOOP-59
>          URL: http://issues.apache.org/jira/browse/HADOOP-59
>      Project: Hadoop
>         Type: Improvement

>   Components: conf
>     Versions: 0.2.0
>     Reporter: Doug Cutting
>     Assignee: Hairong Kuang
>     Priority: Minor
>      Fix For: 0.4.0
>  Attachments: Tool.java, ToolBase.java, bashfile.patch, toolbase.patch
>
> Hadoop commands should all support some common options.  For example, it should be possible to specify the namenode, datanode, and, for that matter, any config option, in a generic way.
> This could be implemented with code like:
> public interface Tool extends Configurable {
>   void run(String[] args) throws Exception;
> }
> public class ToolBase implements Tool extends Configured {
>   public final void main(String[] args) throws Exception {
>     Configuration conf = new Configuration();
>     ... parse config options from args into conf ...
>     this.configure(conf);
>     this.run();
>   }
> }
> public MyTool extends ExcecutableBase {
>   public static void main(String[] args) throws Exception {
>     new MyTool().main(args);
>   }
> }
> The general command line syntax could be:
> bin/hadoop [generalOptions] command [commandOptions]
> Where generalOptions are things that ToolBase handles, and only the commandOptions are passed to Tool.run().  The most important generalOption would be '-D', which would define name/value pairs that are set in the configuration.  This alone would permit folks to set the namenode, datanode, etc.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 14 21:51:45 2006
Return-Path: 
 <hadoop-dev-return-2075-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34661 invoked from network); 14 Jun 2006 21:51:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2006 21:51:45 -0000
Received: (qmail 13650 invoked by uid 500); 14 Jun 2006 21:51:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13616 invoked by uid 500); 14 Jun 2006 21:51:44 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13605 invoked by uid 99); 14 Jun 2006 21:51:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 14:51:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 14:51:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 93E94714204
	for <hadoop-dev@lucene.apache.org>; Wed, 14 Jun 2006 21:50:30 +0000 (GMT)
Message-ID: <20156732.1150321830603.JavaMail.jira@brutus>
Date: Wed, 14 Jun 2006 21:50:30 +0000 (GMT+00:00)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-296) Do not assign blocks to a datanode
 with < x mb free
In-Reply-To: <12462846.1150196369845.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-296?page=comments#action_12416264 ] 

Konstantin Shvachko commented on HADOOP-296:
--------------------------------------------

Works for me.
Although you don't need "fs.space.min" any more.

> Do not assign blocks to a datanode with < x mb free
> ---------------------------------------------------
>
>          Key: HADOOP-296
>          URL: http://issues.apache.org/jira/browse/HADOOP-296
>      Project: Hadoop
>         Type: New Feature

>   Components: dfs
>     Versions: 0.3.2
>     Reporter: Johan Oskarson
>  Attachments: minspace.patch, minspacev2.patch, minspacev3.patch, minspacev3.patch
>
> We're running a smallish cluster with very different machines, some with only 60 gb harddrives
> This creates a problem when inserting files into the dfs, these machines run out of space quickly and then they cannot run any map reduce operations
> A solution would be to not assign any new blocks once the space is below a certain user configurable threshold
> This free space could then be used by the map reduce operations instead (if that's on the same disk)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 14 22:36:45 2006
Return-Path: 
 <hadoop-dev-return-2076-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52884 invoked from network); 14 Jun 2006 22:36:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2006 22:36:45 -0000
Received: (qmail 60984 invoked by uid 500); 14 Jun 2006 22:36:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 60961 invoked by uid 500); 14 Jun 2006 22:36:44 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 60952 invoked by uid 99); 14 Jun 2006 22:36:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 15:36:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 15:36:43 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EE021714204
	for <hadoop-dev@lucene.apache.org>; Wed, 14 Jun 2006 22:35:29 +0000 (GMT)
Message-ID: <17688881.1150324529971.JavaMail.jira@brutus>
Date: Wed, 14 Jun 2006 22:35:29 +0000 (GMT+00:00)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-304) UnregisteredDatanodeException message
 correction
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

UnregisteredDatanodeException message correction
------------------------------------------------

         Key: HADOOP-304
         URL: http://issues.apache.org/jira/browse/HADOOP-304
     Project: Hadoop
        Type: Bug

    Versions: 0.3.2    
    Reporter: Konstantin Shvachko
 Assigned to: Konstantin Shvachko 
    Priority: Trivial




-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 14 22:39:45 2006
Return-Path: 
 <hadoop-dev-return-2077-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 53487 invoked from network); 14 Jun 2006 22:39:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2006 22:39:45 -0000
Received: (qmail 63598 invoked by uid 500); 14 Jun 2006 22:39:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63453 invoked by uid 500); 14 Jun 2006 22:39:44 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63444 invoked by uid 99); 14 Jun 2006 22:39:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 15:39:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 15:39:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 91A877141D1
	for <hadoop-dev@lucene.apache.org>; Wed, 14 Jun 2006 22:38:30 +0000 (GMT)
Message-ID: <25841377.1150324710593.JavaMail.jira@brutus>
Date: Wed, 14 Jun 2006 22:38:30 +0000 (GMT+00:00)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-304) UnregisteredDatanodeException message
 correction
In-Reply-To: <17688881.1150324529971.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-304?page=all ]

Konstantin Shvachko updated HADOOP-304:
---------------------------------------

    Attachment: UnregisteredDatanodeException.patch

UnregisteredDatanodeException should report the expected node name rather than its storage id.


> UnregisteredDatanodeException message correction
> ------------------------------------------------
>
>          Key: HADOOP-304
>          URL: http://issues.apache.org/jira/browse/HADOOP-304
>      Project: Hadoop
>         Type: Bug

>     Versions: 0.3.2
>     Reporter: Konstantin Shvachko
>     Assignee: Konstantin Shvachko
>     Priority: Trivial
>  Attachments: UnregisteredDatanodeException.patch
>


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 14 22:42:47 2006
Return-Path: 
 <hadoop-dev-return-2078-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 54235 invoked from network); 14 Jun 2006 22:42:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2006 22:42:47 -0000
Received: (qmail 68184 invoked by uid 500); 14 Jun 2006 22:42:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68133 invoked by uid 500); 14 Jun 2006 22:42:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68113 invoked by uid 99); 14 Jun 2006 22:42:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 15:42:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 15:42:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 902A8714204
	for <hadoop-dev@lucene.apache.org>; Wed, 14 Jun 2006 22:41:30 +0000 (GMT)
Message-ID: <10825379.1150324890587.JavaMail.jira@brutus>
Date: Wed, 14 Jun 2006 22:41:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Reopened: (HADOOP-210) Namenode not able to accept
 connections
In-Reply-To: <22832248.1147306205708.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-210?page=all ]
     
Doug Cutting reopened HADOOP-210:
---------------------------------

     Assign To: Sameer Paranjpye  (was: Mahadev konar)

I reverted this for now, since it (for unknown reasons) seemed to break distributed operation.

> Namenode not able to accept connections
> ---------------------------------------
>
>          Key: HADOOP-210
>          URL: http://issues.apache.org/jira/browse/HADOOP-210
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>  Environment: linux
>     Reporter: Mahadev konar
>     Assignee: Sameer Paranjpye
>      Fix For: 0.4.0
>  Attachments: nio.patch, nio.patch
>
> I am running owen's random writer on a 627 node cluster (writing 10GB/node).  After running for a while (map 12% reduce 1%) I get the following error on the Namenode:
> Exception in thread "Server listener on port 60000" java.lang.OutOfMemoryError: unable to create new native thread
>         at java.lang.Thread.start0(Native Method)
>         at java.lang.Thread.start(Thread.java:574)
>         at org.apache.hadoop.ipc.Server$Listener.run(Server.java:105)
> After this, the namenode does not seem to be accepting connections from any of the clients. All the DFSClient calls get timeout. Here is a trace for one of them:
> java.net.SocketTimeoutException: timed out waiting for rpc response
> 	at org.apache.hadoop.ipc.Client.call(Client.java:305)
> 	at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:149)
> 	at org.apache.hadoop.dfs.$Proxy1.open(Unknown Source)
> 	at org.apache.hadoop.dfs.DFSClient$DFSInputStream.openInfo(DFSClient.java:419)
> 	at org.apache.hadoop.dfs.DFSClient$DFSInputStream.(DFSClient.java:406)
> 	at org.apache.hadoop.dfs.DFSClient.open(DFSClient.java:171)
> 	at org.apache.hadoop.dfs.DistributedFileSystem.openRaw(DistributedFileSystem.java:78)
> 	at org.apache.hadoop.fs.FSDataInputStream$Checker.(FSDataInputStream.java:46)
> 	at org.apache.hadoop.fs.FSDataInputStream.(FSDataInputStream.java:228)
> 	at org.apache.hadoop.fs.FileSystem.open(FileSystem.java:157)
> 	at org.apache.hadoop.mapred.TextInputFormat.getRecordReader(TextInputFormat.java:43)
> 	at org.apache.hadoop.mapred.MapTask.run(MapTask.java:105)
> 	at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:785).
> The namenode then has around 1% CPU utilization at this time (after the outofmemory exception has been thrown). I have profiled the NameNode and it seems to be using around a maixmum heap size of 57MB (which is not much). So, heap size does not seem to be a problem. It might be happening due to lack of Stack space? Any pointers?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun 15 12:30:46 2006
Return-Path: 
 <hadoop-dev-return-2079-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 61055 invoked from network); 15 Jun 2006 12:30:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jun 2006 12:30:46 -0000
Received: (qmail 9999 invoked by uid 500); 15 Jun 2006 12:28:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9909 invoked by uid 500); 15 Jun 2006 12:28:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9860 invoked by uid 99); 15 Jun 2006 12:28:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 05:28:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 05:28:46 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7C19B71428E
	for <hadoop-dev@lucene.apache.org>; Thu, 15 Jun 2006 12:27:31 +0000 (GMT)
Message-ID: <1535168.1150374451505.JavaMail.jira@brutus>
Date: Thu, 15 Jun 2006 12:27:31 +0000 (GMT+00:00)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-250) HTTP Browsing interface for DFS
 Health/Status
In-Reply-To: <29976966.1148448150061.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-250?page=all ]

Devaraj Das updated HADOOP-250:
-------------------------------

    Attachment: http_browsing_dfs.patch

The problems here were mostly setup related (admit I should have run the unit tests before submitting the patch!). 
Since I start a StatusHttpServer in FSNameSystem class, the "build" directory should be included in the classpath (so webapps resource can be found) and hadoop.log.dir should be set, otherwise, StatusHttpServer cannot be constructed properly [updated patch patches build.xml file with these settings].

Also, the stop method of StatusHttpServer should be called every time the namenode is stopped, otherwise a subsequent test trying to create a NameNode object may fail since StatusHttpServer fails to open the port. 

Another thing that causes some failures to happen (once in a while) is the sleep/timeout values in MiniDFSCluster.java. A NameNode is started and after sleeping for 1 sec, a datanode is started. But if the namenode hasn't fully come up by then, then RPCs will fail (the ipc.client.timeout of 1 sec seems to be too small). So I changed all 1000 msec to 2000 msec in MiniDFSCluster.java and the tests seem to be passing consistently after that. Updated patch is attached.

> HTTP Browsing interface for DFS Health/Status
> ---------------------------------------------
>
>          Key: HADOOP-250
>          URL: http://issues.apache.org/jira/browse/HADOOP-250
>      Project: Hadoop
>         Type: New Feature

>   Components: dfs
>     Versions: 0.3.0
>     Reporter: Devaraj Das
>      Fix For: 0.4.0
>  Attachments: dfshealth.pdf, http_browsing_dfs.new.patch, http_browsing_dfs.patch, http_browsing_dfs.patch, http_browsing_dfs.patch
>
> A web interface to view the DFS health/status (name and data nodes) is to be created. User can connect to the webserver on the namenode and a web page will be displayed. The web page will give some details about that namenode (startup time and the total cluster capacity). The web page will contain a table of 'live' and 'dead' datanodes. Each live datanode will be a link to the complete details of the datanode as given by DatanodeInfo (also see DataNodeReport).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun 15 12:33:46 2006
Return-Path: 
 <hadoop-dev-return-2080-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 65397 invoked from network); 15 Jun 2006 12:33:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jun 2006 12:33:46 -0000
Received: (qmail 30352 invoked by uid 500); 15 Jun 2006 12:33:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 30206 invoked by uid 500); 15 Jun 2006 12:33:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 30197 invoked by uid 99); 15 Jun 2006 12:33:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 05:33:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 05:33:45 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 94EB071428D
	for <hadoop-dev@lucene.apache.org>; Thu, 15 Jun 2006 12:32:30 +0000 (GMT)
Message-ID: <11881851.1150374750607.JavaMail.jira@brutus>
Date: Thu, 15 Jun 2006 12:32:30 +0000 (GMT+00:00)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-210) Namenode not able to accept
 connections
In-Reply-To: <22832248.1147306205708.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-210?page=comments#action_12416324 ] 

Devaraj Das commented on HADOOP-210:
------------------------------------

I think I will need to work with Owen to have a quick resolution on this.

> Namenode not able to accept connections
> ---------------------------------------
>
>          Key: HADOOP-210
>          URL: http://issues.apache.org/jira/browse/HADOOP-210
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>  Environment: linux
>     Reporter: Mahadev konar
>     Assignee: Sameer Paranjpye
>      Fix For: 0.4.0
>  Attachments: nio.patch, nio.patch
>
> I am running owen's random writer on a 627 node cluster (writing 10GB/node).  After running for a while (map 12% reduce 1%) I get the following error on the Namenode:
> Exception in thread "Server listener on port 60000" java.lang.OutOfMemoryError: unable to create new native thread
>         at java.lang.Thread.start0(Native Method)
>         at java.lang.Thread.start(Thread.java:574)
>         at org.apache.hadoop.ipc.Server$Listener.run(Server.java:105)
> After this, the namenode does not seem to be accepting connections from any of the clients. All the DFSClient calls get timeout. Here is a trace for one of them:
> java.net.SocketTimeoutException: timed out waiting for rpc response
> 	at org.apache.hadoop.ipc.Client.call(Client.java:305)
> 	at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:149)
> 	at org.apache.hadoop.dfs.$Proxy1.open(Unknown Source)
> 	at org.apache.hadoop.dfs.DFSClient$DFSInputStream.openInfo(DFSClient.java:419)
> 	at org.apache.hadoop.dfs.DFSClient$DFSInputStream.(DFSClient.java:406)
> 	at org.apache.hadoop.dfs.DFSClient.open(DFSClient.java:171)
> 	at org.apache.hadoop.dfs.DistributedFileSystem.openRaw(DistributedFileSystem.java:78)
> 	at org.apache.hadoop.fs.FSDataInputStream$Checker.(FSDataInputStream.java:46)
> 	at org.apache.hadoop.fs.FSDataInputStream.(FSDataInputStream.java:228)
> 	at org.apache.hadoop.fs.FileSystem.open(FileSystem.java:157)
> 	at org.apache.hadoop.mapred.TextInputFormat.getRecordReader(TextInputFormat.java:43)
> 	at org.apache.hadoop.mapred.MapTask.run(MapTask.java:105)
> 	at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:785).
> The namenode then has around 1% CPU utilization at this time (after the outofmemory exception has been thrown). I have profiled the NameNode and it seems to be using around a maixmum heap size of 57MB (which is not much). So, heap size does not seem to be a problem. It might be happening due to lack of Stack space? Any pointers?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun 15 12:37:47 2006
Return-Path: 
 <hadoop-dev-return-2081-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 73163 invoked from network); 15 Jun 2006 12:37:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jun 2006 12:37:47 -0000
Received: (qmail 36289 invoked by uid 500); 15 Jun 2006 12:37:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 36260 invoked by uid 500); 15 Jun 2006 12:37:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 36226 invoked by uid 99); 15 Jun 2006 12:37:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 05:37:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 05:37:45 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1F7B671428E
	for <hadoop-dev@lucene.apache.org>; Thu, 15 Jun 2006 12:36:31 +0000 (GMT)
Message-ID: <21369073.1150374991126.JavaMail.jira@brutus>
Date: Thu, 15 Jun 2006 12:36:31 +0000 (GMT+00:00)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-250) HTTP Browsing interface for DFS
 Health/Status
In-Reply-To: <29976966.1148448150061.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-250?page=comments#action_12416326 ] 

Devaraj Das commented on HADOOP-250:
------------------------------------

Starting an HTTP server within the namenode may be the cause for a slightly longer namenode startup time.

> HTTP Browsing interface for DFS Health/Status
> ---------------------------------------------
>
>          Key: HADOOP-250
>          URL: http://issues.apache.org/jira/browse/HADOOP-250
>      Project: Hadoop
>         Type: New Feature

>   Components: dfs
>     Versions: 0.3.0
>     Reporter: Devaraj Das
>      Fix For: 0.4.0
>  Attachments: dfshealth.pdf, http_browsing_dfs.new.patch, http_browsing_dfs.patch, http_browsing_dfs.patch, http_browsing_dfs.patch
>
> A web interface to view the DFS health/status (name and data nodes) is to be created. User can connect to the webserver on the namenode and a web page will be displayed. The web page will give some details about that namenode (startup time and the total cluster capacity). The web page will contain a table of 'live' and 'dead' datanodes. Each live datanode will be a link to the complete details of the datanode as given by DatanodeInfo (also see DataNodeReport).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun 15 18:44:07 2006
Return-Path: 
 <hadoop-dev-return-2082-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 82670 invoked from network); 15 Jun 2006 18:44:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jun 2006 18:44:07 -0000
Received: (qmail 35832 invoked by uid 500); 15 Jun 2006 18:44:07 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 35803 invoked by uid 500); 15 Jun 2006 18:44:06 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 35794 invoked by uid 99); 15 Jun 2006 18:44:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 11:44:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [63.203.238.114] (HELO dns.duboce.net) (63.203.238.114)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 11:44:05 -0700
Received: from [192.168.1.105] ([192.168.1.105])
	by dns-eth1.duboce.net (8.10.2/8.10.2) with ESMTP id k5FHTBv32280;
	Thu, 15 Jun 2006 10:29:11 -0700
Message-ID: <4491AAA7.7060607@archive.org>
Date: Thu, 15 Jun 2006 11:44:55 -0700
From: Michael Stack <stack@archive.org>
User-Agent: Mozilla/5.0 (Macintosh; U; PPC Mac OS X Mach-O; en-US;
 rv:1.8.0.4) Gecko/20060516 SeaMonkey/1.0.2
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: Using Hadoop in a production environment
References: <000101c68fce$d3a63d40$e6e77ecf@ds.corp.yahoo.com>
In-Reply-To: <000101c68fce$d3a63d40$e6e77ecf@ds.corp.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Runping Qi wrote:
> I have also been thinking of the Hadoop job scheduling issue too. 
>
> In my applications, some jobs depend on the outputs of other jobs.
> Therefore, job dependency forms a DAG. A job is ready to run if and only if
> it does not have any dependency or all the jobs it depends are finished
> successfully. To help schedule and monitor a group of jobs like that, I am
> thinking of implementing a utility class that:
> 	- accept jobs with dependency specification
>       - monitor job status
>       - submit jobs when they are ready
>
> With such a utility class, the application can construct its jobs, specify
> their dependency and then hand the jobs to the utility class. The utility
> class takes care of the details of job submission.
>   
A general solution would be sweet. 

Up to this, I've been using a bit of beanshell wrapper scheduling jobs.  
If jobs are interdependent, I'll have the wrapper script let out the 
exception and stop the processing else, catch the exception, log which 
job failed, and schedule a new one.

St.Ack

From MAILER-DAEMON Thu Jun 15 22:48:47 2006
Return-Path: 
 <hadoop-dev-return-2083-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 61141 invoked from network); 15 Jun 2006 22:48:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jun 2006 22:48:47 -0000
Received: (qmail 17452 invoked by uid 500); 15 Jun 2006 22:48:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17303 invoked by uid 500); 15 Jun 2006 22:48:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17294 invoked by uid 99); 15 Jun 2006 22:48:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 15:48:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 15:48:45 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D284641000D
	for <hadoop-dev@lucene.apache.org>; Thu, 15 Jun 2006 22:47:29 +0000 (GMT)
Message-ID: <6692632.1150411649859.JavaMail.jira@brutus>
Date: Thu, 15 Jun 2006 22:47:29 +0000 (GMT+00:00)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-305) tasktracker waits for 10 seconds for
 asking for a task.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

tasktracker waits for 10 seconds for asking for a task.
-------------------------------------------------------

         Key: HADOOP-305
         URL: http://issues.apache.org/jira/browse/HADOOP-305
     Project: Hadoop
        Type: Improvement

  Components: mapred  
    Versions: 0.4.0    
    Reporter: Mahadev konar
 Assigned to: Mahadev konar 
    Priority: Minor


the tasktracker should ask for a job as soon as a job running on it is finished. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun 15 22:58:48 2006
Return-Path: 
 <hadoop-dev-return-2084-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 62372 invoked from network); 15 Jun 2006 22:58:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jun 2006 22:58:48 -0000
Received: (qmail 24065 invoked by uid 500); 15 Jun 2006 22:58:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24033 invoked by uid 500); 15 Jun 2006 22:58:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24014 invoked by uid 99); 15 Jun 2006 22:58:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 15:58:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 15:58:46 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 993CB410006
	for <hadoop-dev@lucene.apache.org>; Thu, 15 Jun 2006 22:57:30 +0000 (GMT)
Message-ID: <32728515.1150412250624.JavaMail.jira@brutus>
Date: Thu, 15 Jun 2006 22:57:30 +0000 (GMT+00:00)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-305) tasktracker waits for 10 seconds for
 asking for a task.
In-Reply-To: <6692632.1150411649859.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-305?page=all ]

Mahadev konar updated HADOOP-305:
---------------------------------

    Attachment: tasktracker.patch

This patch lets the tasktracker ask for a new task as soon as a task is finished, else it just waits for 10 seconds to get a new task. This is part of Ben's patch submitted to HADOOP-249. This patch also combines the patch to HADOOP-283.
Thanks Ben for your help in integrating the patch.

> tasktracker waits for 10 seconds for asking for a task.
> -------------------------------------------------------
>
>          Key: HADOOP-305
>          URL: http://issues.apache.org/jira/browse/HADOOP-305
>      Project: Hadoop
>         Type: Improvement

>   Components: mapred
>     Versions: 0.4.0
>     Reporter: Mahadev konar
>     Assignee: Mahadev konar
>     Priority: Minor
>  Attachments: tasktracker.patch
>
> the tasktracker should ask for a job as soon as a job running on it is finished. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun 16 14:40:55 2006
Return-Path: 
 <hadoop-dev-return-2085-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32703 invoked from network); 16 Jun 2006 14:40:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2006 14:40:55 -0000
Received: (qmail 5574 invoked by uid 500); 16 Jun 2006 14:40:48 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 5498 invoked by uid 500); 16 Jun 2006 14:40:48 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 5442 invoked by uid 99); 16 Jun 2006 14:40:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jun 2006 07:40:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jun 2006 07:40:47 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0A03071429D
	for <hadoop-dev@lucene.apache.org>; Fri, 16 Jun 2006 14:39:31 +0000 (GMT)
Message-ID: <16287554.1150468771038.JavaMail.jira@brutus>
Date: Fri, 16 Jun 2006 14:39:31 +0000 (GMT+00:00)
From: "Johan Oskarson (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-296) Do not assign blocks to a datanode
 with < x mb free
In-Reply-To: <12462846.1150196369845.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-296?page=all ]

Johan Oskarson updated HADOOP-296:
----------------------------------

    Attachment: minspacev4.patch

Right, removed fs.space.min...
Note to self, don't post anything when you're in a hurry...

> Do not assign blocks to a datanode with < x mb free
> ---------------------------------------------------
>
>          Key: HADOOP-296
>          URL: http://issues.apache.org/jira/browse/HADOOP-296
>      Project: Hadoop
>         Type: New Feature

>   Components: dfs
>     Versions: 0.3.2
>     Reporter: Johan Oskarson
>  Attachments: minspace.patch, minspacev2.patch, minspacev3.patch, minspacev3.patch, minspacev4.patch
>
> We're running a smallish cluster with very different machines, some with only 60 gb harddrives
> This creates a problem when inserting files into the dfs, these machines run out of space quickly and then they cannot run any map reduce operations
> A solution would be to not assign any new blocks once the space is below a certain user configurable threshold
> This free space could then be used by the map reduce operations instead (if that's on the same disk)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun 16 18:40:54 2006
Return-Path: 
 <hadoop-dev-return-2086-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 29830 invoked from network); 16 Jun 2006 18:40:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2006 18:40:54 -0000
Received: (qmail 71029 invoked by uid 500); 16 Jun 2006 18:40:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 71006 invoked by uid 500); 16 Jun 2006 18:40:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 70995 invoked by uid 99); 16 Jun 2006 18:40:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jun 2006 11:40:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jun 2006 11:40:52 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B4BD57142CE
	for <hadoop-dev@lucene.apache.org>; Fri, 16 Jun 2006 18:39:30 +0000 (GMT)
Message-ID: <32874284.1150483170737.JavaMail.jira@brutus>
Date: Fri, 16 Jun 2006 18:39:30 +0000 (GMT+00:00)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-296) Do not assign blocks to a datanode
 with < x mb free
In-Reply-To: <12462846.1150196369845.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-296?page=comments#action_12416570 ] 

Konstantin Shvachko commented on HADOOP-296:
--------------------------------------------

I think it is reasonable to commit this patch now.
+1

> Do not assign blocks to a datanode with < x mb free
> ---------------------------------------------------
>
>          Key: HADOOP-296
>          URL: http://issues.apache.org/jira/browse/HADOOP-296
>      Project: Hadoop
>         Type: New Feature

>   Components: dfs
>     Versions: 0.3.2
>     Reporter: Johan Oskarson
>  Attachments: minspace.patch, minspacev2.patch, minspacev3.patch, minspacev3.patch, minspacev4.patch
>
> We're running a smallish cluster with very different machines, some with only 60 gb harddrives
> This creates a problem when inserting files into the dfs, these machines run out of space quickly and then they cannot run any map reduce operations
> A solution would be to not assign any new blocks once the space is below a certain user configurable threshold
> This free space could then be used by the map reduce operations instead (if that's on the same disk)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Sat Jun 17 00:59:48 2006
Return-Path: 
 <hadoop-dev-return-2087-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40455 invoked from network); 17 Jun 2006 00:59:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jun 2006 00:59:48 -0000
Received: (qmail 63095 invoked by uid 500); 17 Jun 2006 00:59:48 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63065 invoked by uid 500); 17 Jun 2006 00:59:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63052 invoked by uid 99); 17 Jun 2006 00:59:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jun 2006 17:59:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jun 2006 17:59:46 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CFFF17141E3
	for <hadoop-dev@lucene.apache.org>; Sat, 17 Jun 2006 00:58:29 +0000 (GMT)
Message-ID: <5719318.1150505909849.JavaMail.jira@brutus>
Date: Sat, 17 Jun 2006 00:58:29 +0000 (GMT+00:00)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-306) Safe mode and name node startup
 procedures
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Safe mode and name node startup procedures
------------------------------------------

         Key: HADOOP-306
         URL: http://issues.apache.org/jira/browse/HADOOP-306
     Project: Hadoop
        Type: New Feature

    Versions: 0.3.2    
    Reporter: Konstantin Shvachko
     Fix For: 0.4.0


This is a proposal to improve DFS cluster startup process.
The data node startup procedures were described and implemented in HADOOP-124.
I'm trying to extend them to the name node here.
The main idea is to introduce safe mode, which can be entered manually for administration
purposes, or automatically when a configurable threshold of active data nodes is breached,
or at startup when the node stays in safe mode until the minimal limit of active
nodes is reached.

This are high level requirements intended to improve the name node and cluster reliability.
    = The name node safe mode means that the name node is not changing the state of the
       file system. Meta data is read-only, and block replication / removal is not taking place.
    = In safe mode the name node accepts data node registrations and
       processes their block reports.
    = The name node always starts in safe mode and stays safe until the majority
        (a configurable parameter: safemode.threshold) of data nodes (or blocks?)
        is reported.
    = The name node can also fall into safe mode when the number of non-active
        (heartbeats stopped coming in) data nodes becomes critical.
    = The startup "silent period", when the name node is in safe mode and is
        not issuing any block requests to the data nodes, is initially set to a
        configurable value safemode.timeout.increment. By the end of the timeout
        the name node checks the safemode.threshold and decides whether to switch
        to the normal mode or to stay in safe. If the normal mode criteria is not
        met, then the silent period is extended by incrementing the safemode timeout.
    = The name node stays in safe mode not longer than a configurable value of
        safemode.timeout.max, in which case it logs missing data nodes and shuts
        itself down.
    = When the name node switches to normal mode it checks whether all required
        data nodes have actually registered, based on the list of active data storages
        from the last session. Then it logs missing nodes, if any, and starts
        replicating and/or deleting blocks as required.
    = A historical list of data storages (nodes) ever registered with the cluster is
        persistently stored in the image and log files. The list is used in two ways:
        a) at startup to verify whether all nodes have registered, and to report
        missing nodes;
        b) at runtime if a data node registers with a new storage id the
        name node verifies that no new blocks are reported from that storage,
        which would prevent us from accidentally connecting data nodes from a
        different cluster.
    = The name node should have an option to run in safe mode. Starting with
        that option would mean it never leaves safe mode.
        This is useful for testing the cluster.
    = Data nodes that can not connect to the name node for a long time (configurable)
        should shut down themselves.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Sat Jun 17 11:39:06 2006
Return-Path: 
 <hadoop-dev-return-2088-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 59509 invoked from network); 17 Jun 2006 11:39:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jun 2006 11:39:06 -0000
Received: (qmail 55252 invoked by uid 500); 17 Jun 2006 11:38:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 52585 invoked by uid 500); 17 Jun 2006 11:38:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 50020 invoked by uid 99); 17 Jun 2006 11:38:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 17 Jun 2006 04:38:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 17 Jun 2006 04:37:48 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9B7B17141EF
	for <hadoop-dev@lucene.apache.org>; Sat, 17 Jun 2006 11:36:30 +0000 (GMT)
Message-ID: <31199911.1150544190633.JavaMail.jira@brutus>
Date: Sat, 17 Jun 2006 11:36:30 +0000 (GMT+00:00)
From: "Johan Oskarson (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-296) Do not assign blocks to a datanode
 with < x mb free
In-Reply-To: <12462846.1150196369845.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-296?page=all ]

Johan Oskarson updated HADOOP-296:
----------------------------------

    Attachment: minspacev5.patch

Terribly sorry guys, this is a corrected version, disregard the previous ones.
How hard can it be to do a five line patch? :)

I'm a bit stressed out by other things, probably shouldn't send patches right now :)

> Do not assign blocks to a datanode with < x mb free
> ---------------------------------------------------
>
>          Key: HADOOP-296
>          URL: http://issues.apache.org/jira/browse/HADOOP-296
>      Project: Hadoop
>         Type: New Feature

>   Components: dfs
>     Versions: 0.3.2
>     Reporter: Johan Oskarson
>  Attachments: minspace.patch, minspacev2.patch, minspacev3.patch, minspacev3.patch, minspacev4.patch, minspacev5.patch
>
> We're running a smallish cluster with very different machines, some with only 60 gb harddrives
> This creates a problem when inserting files into the dfs, these machines run out of space quickly and then they cannot run any map reduce operations
> A solution would be to not assign any new blocks once the space is below a certain user configurable threshold
> This free space could then be used by the map reduce operations instead (if that's on the same disk)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Sun Jun 18 13:16:51 2006
Return-Path: 
 <hadoop-dev-return-2089-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 7063 invoked from network); 18 Jun 2006 13:16:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jun 2006 13:16:51 -0000
Received: (qmail 3316 invoked by uid 500); 18 Jun 2006 13:16:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3286 invoked by uid 500); 18 Jun 2006 13:16:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3277 invoked by uid 99); 18 Jun 2006 13:16:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Jun 2006 06:16:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Jun 2006 06:16:49 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CD1DA410006
	for <hadoop-dev@lucene.apache.org>; Sun, 18 Jun 2006 13:15:29 +0000 (GMT)
Message-ID: <13009062.1150636529837.JavaMail.jira@brutus>
Date: Sun, 18 Jun 2006 13:15:29 +0000 (GMT+00:00)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-307) Many small jobs benchmark for
 MapReduce
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Many small jobs benchmark for MapReduce
---------------------------------------

         Key: HADOOP-307
         URL: http://issues.apache.org/jira/browse/HADOOP-307
     Project: Hadoop
        Type: Task

  Components: mapred  
    Reporter: Sanjay Dahiya
    Priority: Minor


A benchmark that runs many small MapReduce tasks in sequence. A single map reduce implementation is used, it is invoked multiple times with input as the output from previous run. The input to first Map is a TextInputFormat ( a text file with few hundred KBs). Input records are passed to output without much processing. The idea is to benchmark the time taken by initialization of Mapper and Reducer. An initial prototyping on a single machine with 20 MR tasks in sequence took ~47 seconds per task. Looking for suggestions on what else can be included in the benchmark. 



-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun 19 14:55:04 2006
Return-Path: 
 <hadoop-dev-return-2090-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20700 invoked from network); 19 Jun 2006 14:55:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jun 2006 14:55:04 -0000
Received: (qmail 84411 invoked by uid 500); 19 Jun 2006 14:55:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 84260 invoked by uid 500); 19 Jun 2006 14:54:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 84168 invoked by uid 99); 19 Jun 2006 14:54:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 07:54:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 07:54:51 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B0C59410006
	for <hadoop-dev@lucene.apache.org>; Mon, 19 Jun 2006 14:53:30 +0000 (GMT)
Message-ID: <26596205.1150728810721.JavaMail.jira@brutus>
Date: Mon, 19 Jun 2006 14:53:30 +0000 (GMT+00:00)
From: "Johan Oskarson (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-27) MapRed tries to allocate tasks to nodes
 that have no available disk space
In-Reply-To: <1424617142.1139335680270.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-27?page=all ]

Johan Oskarson updated HADOOP-27:
---------------------------------

    Attachment: minspace_mapredtask.patch

To begin with, disregard my last comment, I have no idea what I was thinking :)

Created this patch to stop a job from losing the map tasks already completed when a task tracker runs out of space.
Instead, the task tracker will stop accepting new tasks if the space runs below a certain threshold.
However, if for some reason space clears up it will start accepting tasks again.

If for example a reduce operation previously have been assigned to the task tracker there's a chance it will run out of space anyway. So if the tracker goes below a second threshold it will completely stop accepting new tasks until the job is done and also kill the reduce operation running, or if none is found a map task. It will try to take the one with the least progress.

The solution might not be ideal, but it's at least better then having the job fail all the time because the task trackers drop off one by one.

Suggestions are of course welcome.
I've tested this on our tiny cluster and it seems to work fine, just saved me a couple of hours of redundant computation on a big job

/Johan

> MapRed tries to allocate tasks to nodes that have no available disk space
> -------------------------------------------------------------------------
>
>          Key: HADOOP-27
>          URL: http://issues.apache.org/jira/browse/HADOOP-27
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Reporter: Mike Cafarella
>  Attachments: minspace_mapredtask.patch
>
>   What it says above.  MapRed TaskTrackers should not offer task service if the local disk
> space is too constrained.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun 19 15:43:12 2006
Return-Path: 
 <hadoop-dev-return-2091-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 35789 invoked from network); 19 Jun 2006 15:43:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jun 2006 15:43:12 -0000
Received: (qmail 3923 invoked by uid 500); 19 Jun 2006 15:43:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3779 invoked by uid 500); 19 Jun 2006 15:43:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3770 invoked by uid 99); 19 Jun 2006 15:43:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 08:43:11 -0700
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of sutter@gmail.com designates
 64.233.162.202 as permitted sender)
Received: from [64.233.162.202] (HELO nz-out-0102.google.com) (64.233.162.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 08:43:10 -0700
Received: by nz-out-0102.google.com with SMTP id 13so1062297nzp
        for <hadoop-dev@lucene.apache.org>;
 Mon, 19 Jun 2006 08:42:50 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=BGLXey3G/Ckk85OAIBN6aK2kRT0ufyoQRtVzNtu4YYgZXyOVKq4xKeO+wZ37ZtX7K1bBkhNouSf+H3WxV4NDNd2Qd1lANpPgTBYT88JjlBnAQ+jwWt9HObKkdbvt16E3j2Bq6uPd8hwAYt4NlsX7P3OVDOvj5rKmbjuGAqlEu/w=
Received: by 10.37.13.61 with SMTP id q61mr4284271nzi;
        Mon, 19 Jun 2006 08:42:49 -0700 (PDT)
Received: by 10.36.132.16 with HTTP; Mon, 19 Jun 2006 08:42:49 -0700 (PDT)
Message-ID: <e1d10fc00606190842w5a35f717g8a0afc0bcd0fc418@mail.gmail.com>
Date: Mon, 19 Jun 2006 08:42:49 -0700
From: "Paul Sutter" <sutter@gmail.com>
To: hadoop-dev@lucene.apache.org
Subject: Redundant (?) lengths in SequenceFile
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_Part_1468_10952730.1150731769935"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_1468_10952730.1150731769935
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Is there a reason for the key and record length included in the SequenceFile
format?

Since every Writable has to be able to read and write itself, those objects
already describe their own length (either implicitly or
explicitly). Sequence file has to resort to extra buffer copies and waste
space to get those lengths, is there any reason we cant just leave them
out?

------=_Part_1468_10952730.1150731769935--

From MAILER-DAEMON Mon Jun 19 16:26:53 2006
Return-Path: 
 <hadoop-dev-return-2092-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 62600 invoked from network); 19 Jun 2006 16:26:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jun 2006 16:26:53 -0000
Received: (qmail 42132 invoked by uid 500); 19 Jun 2006 16:26:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 42102 invoked by uid 500); 19 Jun 2006 16:26:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 42093 invoked by uid 99); 19 Jun 2006 16:26:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 09:26:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 09:26:51 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A46A1410006
	for <hadoop-dev@lucene.apache.org>; Mon, 19 Jun 2006 16:25:30 +0000 (GMT)
Message-ID: <23905519.1150734330670.JavaMail.jira@brutus>
Date: Mon, 19 Jun 2006 16:25:30 +0000 (GMT+00:00)
From: "alan wootton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-215) New method for obtaining report of
 NameNode and JobTracker internals
In-Reply-To: <9733318.1147467008377.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-215?page=comments#action_12416783 ] 

alan wootton commented on HADOOP-215:
-------------------------------------

I think we are abandoning this. Please close this issue.

> New method for obtaining report of NameNode and JobTracker internals
> --------------------------------------------------------------------
>
>          Key: HADOOP-215
>          URL: http://issues.apache.org/jira/browse/HADOOP-215
>      Project: Hadoop
>         Type: New Feature

>   Components: mapred, dfs
>     Reporter: alan wootton
>     Priority: Minor

>
> Many weeks ago we (at shopping.com research) decided we wanted to be able to get reports from the internals of JobTracker and NameNode. The hadoop web server provides some of this, but we wanted a more structured output, and easier extensibility.
> So, we decided to use xml, and I wrote it.
> There is a very thin interface to ClientProtocol, and JobSubmissionProtocol like this:
> public XmlReporter getXmlReport(String classname, String question);
> The implementation (in JobTracker and NameNode ) looks like this:
> public XmlReporter getXmlReport(String classname, String question)
>     {
> 		XmlReporter reporter = XmlReporter.getInstance( classname, this,  question);
> 		reporter.report();
> 		return reporter;
>     }
> The idea being that you pass in some xml (question), an XmlReporter (classname) is instanciated and passed back. 
> An XmlReporter object consists of nothing more that two org.w3c.dom.Document objects (one in the question, the other is the answer). The Writable interface, for the RPC, simply serializes the dom tree to a string, and then parses it back to a dom tree.
> Anyway, here it is. I would like for it to either make it into the code, or for me to find anoher way. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun 19 17:36:03 2006
Return-Path: 
 <hadoop-dev-return-2093-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 89570 invoked from network); 19 Jun 2006 17:36:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jun 2006 17:36:03 -0000
Received: (qmail 86280 invoked by uid 500); 19 Jun 2006 17:36:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86255 invoked by uid 500); 19 Jun 2006 17:36:02 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86244 invoked by uid 99); 19 Jun 2006 17:36:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 10:36:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [209.10.110.95] (HELO londo.swishmail.com) (209.10.110.95)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 10:36:00 -0700
Received: (qmail 64407 invoked by uid 89); 19 Jun 2006 17:35:37 -0000
Received: from unknown (HELO ?192.168.0.10?) (69.181.97.11)
  by londo.swishmail.com with SMTP; 19 Jun 2006 17:35:35 -0000
Message-ID: <4496E066.2060701@apache.org>
Date: Mon, 19 Jun 2006 10:35:34 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.2 (X11/20060522)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: Redundant (?) lengths in SequenceFile
References: <e1d10fc00606190842w5a35f717g8a0afc0bcd0fc418@mail.gmail.com>
In-Reply-To: <e1d10fc00606190842w5a35f717g8a0afc0bcd0fc418@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Paul Sutter wrote:
> Is there a reason for the key and record length included in the 
> SequenceFile
> format?

This permits code to process entries without parsing them, an important 
optimization.  For example, when seeking a MapFile, keys are parsed but 
not values.  When sorting, if a comparator is defined that can compare 
raw binary data, then even keys are not parsed.

Doug

From MAILER-DAEMON Mon Jun 19 17:46:33 2006
Return-Path: 
 <hadoop-dev-return-2094-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94258 invoked from network); 19 Jun 2006 17:46:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jun 2006 17:46:33 -0000
Received: (qmail 2651 invoked by uid 500); 19 Jun 2006 17:46:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 2617 invoked by uid 500); 19 Jun 2006 17:46:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 2547 invoked by uid 99); 19 Jun 2006 17:46:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 10:46:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of sutter@gmail.com designates
 64.233.162.205 as permitted sender)
Received: from [64.233.162.205] (HELO nz-out-0102.google.com) (64.233.162.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 10:46:30 -0700
Received: by nz-out-0102.google.com with SMTP id 13so1089075nzp
        for <hadoop-dev@lucene.apache.org>;
 Mon, 19 Jun 2006 10:46:09 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=QXPFGBFidtLCOZsAj2uAWkJ5j8WK8o96CvoAcTUDQQilFaVsmVvT0Ri/tA3zQNCLz3pDEc8o3b8ZiEoGy/DGeoxaAVhgF7V3SaqqD98Jrzu1yJUKiLbEpBY+kAndmkuCv3hVuAbUDVQHKCLkbcrFusI6ckUEfGFL9ayx1qgRjHg=
Received: by 10.36.48.8 with SMTP id v8mr3705094nzv;
        Mon, 19 Jun 2006 10:46:09 -0700 (PDT)
Received: by 10.36.132.16 with HTTP; Mon, 19 Jun 2006 10:46:09 -0700 (PDT)
Message-ID: <e1d10fc00606191046h4ad4aaf5l1e640c91244e39c0@mail.gmail.com>
Date: Mon, 19 Jun 2006 10:46:09 -0700
From: "Paul Sutter" <sutter@gmail.com>
To: hadoop-dev@lucene.apache.org
Subject: Re: Redundant (?) lengths in SequenceFile
In-Reply-To: <4496E066.2060701@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_Part_2278_8295951.1150739169445"
References: <e1d10fc00606190842w5a35f717g8a0afc0bcd0fc418@mail.gmail.com>
	 <4496E066.2060701@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_2278_8295951.1150739169445
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

How can I define a comparator that can compare raw binary data? (our keys
are raw binary data)


On 6/19/06, Doug Cutting <cutting@apache.org> wrote:
>
> Paul Sutter wrote:
> > Is there a reason for the key and record length included in the
> > SequenceFile
> > format?
>
> This permits code to process entries without parsing them, an important
> optimization.  For example, when seeking a MapFile, keys are parsed but
> not values.  When sorting, if a comparator is defined that can compare
> raw binary data, then even keys are not parsed.
>
> Doug
>

------=_Part_2278_8295951.1150739169445--

From MAILER-DAEMON Mon Jun 19 17:56:40 2006
Return-Path: 
 <hadoop-dev-return-2095-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96578 invoked from network); 19 Jun 2006 17:56:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jun 2006 17:56:40 -0000
Received: (qmail 25237 invoked by uid 500); 19 Jun 2006 17:56:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 25216 invoked by uid 500); 19 Jun 2006 17:56:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 25207 invoked by uid 99); 19 Jun 2006 17:56:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 10:56:39 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [209.10.110.95] (HELO londo.swishmail.com) (209.10.110.95)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 10:56:38 -0700
Received: (qmail 21482 invoked by uid 89); 19 Jun 2006 17:56:17 -0000
Received: from unknown (HELO ?192.168.0.10?) (69.181.97.11)
  by londo.swishmail.com with SMTP; 19 Jun 2006 17:56:17 -0000
Message-ID: <4496E540.3070403@apache.org>
Date: Mon, 19 Jun 2006 10:56:16 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.2 (X11/20060522)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: Redundant (?) lengths in SequenceFile
References: <e1d10fc00606190842w5a35f717g8a0afc0bcd0fc418@mail.gmail.com>
	 <4496E066.2060701@apache.org>
 <e1d10fc00606191046h4ad4aaf5l1e640c91244e39c0@mail.gmail.com>
In-Reply-To: <e1d10fc00606191046h4ad4aaf5l1e640c91244e39c0@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Paul Sutter wrote:
> How can I define a comparator that can compare raw binary data? (our keys
> are raw binary data)

Implement the following method:

http://lucene.apache.org/hadoop/docs/api/org/apache/hadoop/io/WritableComparator.html#compare(byte[],%20int,%20int,%20byte[],%20int,%20int)

To make a comparator the default for a class, call:

http://lucene.apache.org/hadoop/docs/api/org/apache/hadoop/io/WritableComparator.html#define(java.lang.Class,%20org.apache.hadoop.io.WritableComparator)

This is already done for most WritableComparable implementations.  The 
the bottom of, e.g., IntWritable.java for an example of the idiom.

http://svn.apache.org/viewvc/lucene/hadoop/trunk/src/java/org/apache/hadoop/io/IntWritable.java?view=markup

Doug

From MAILER-DAEMON Mon Jun 19 18:03:09 2006
Return-Path: 
 <hadoop-dev-return-2096-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 97910 invoked from network); 19 Jun 2006 18:03:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jun 2006 18:03:09 -0000
Received: (qmail 35452 invoked by uid 500); 19 Jun 2006 18:03:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 35412 invoked by uid 500); 19 Jun 2006 18:03:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 35374 invoked by uid 99); 19 Jun 2006 18:03:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 11:03:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.109.112.28] (HELO mrout2-b.corp.dcn.yahoo.com)
 (216.109.112.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 11:03:07 -0700
Received: from [207.126.231.161] (oom-mac.corp.yahoo.com [207.126.231.161])
	by mrout2-b.corp.dcn.yahoo.com (8.13.6/8.13.4/y.out) with ESMTP id
 k5JI2RNN082013
	for <hadoop-dev@lucene.apache.org>; Mon, 19 Jun 2006 11:02:28 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=KquVAyNOS9u2zpwGt2uAQ5uz3p7vU8De2iYYs14ISzKSJsdq23hm3njOlFhrK24l
Mime-Version: 1.0 (Apple Message framework v624)
In-Reply-To: <e1d10fc00606191046h4ad4aaf5l1e640c91244e39c0@mail.gmail.com>
References: <e1d10fc00606190842w5a35f717g8a0afc0bcd0fc418@mail.gmail.com>
 <4496E066.2060701@apache.org>
 <e1d10fc00606191046h4ad4aaf5l1e640c91244e39c0@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <238b647beae2c486eae4cd21eab67fcd@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: "Owen O'Malley" <owen@yahoo-inc.com>
Subject: Re: Redundant (?) lengths in SequenceFile
Date: Mon, 19 Jun 2006 11:02:48 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.624)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 19, 2006, at 10:46 AM, Paul Sutter wrote:

> How can I define a comparator that can compare raw binary data? (our 
> keys
> are raw binary data)

Paul,
    Look at what I did for BytesWritable (lines 147-165). You need to 
define a Comparator class and register it with WritableComparable.

-- Owen


From MAILER-DAEMON Mon Jun 19 18:06:52 2006
Return-Path: 
 <hadoop-dev-return-2097-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99797 invoked from network); 19 Jun 2006 18:06:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jun 2006 18:06:52 -0000
Received: (qmail 38852 invoked by uid 500); 19 Jun 2006 18:06:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38819 invoked by uid 500); 19 Jun 2006 18:06:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38809 invoked by uid 99); 19 Jun 2006 18:06:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 11:06:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 11:06:51 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D2660410007
	for <hadoop-dev@lucene.apache.org>; Mon, 19 Jun 2006 18:05:29 +0000 (GMT)
Message-ID: <25979762.1150740329858.JavaMail.jira@brutus>
Date: Mon, 19 Jun 2006 18:05:29 +0000 (GMT+00:00)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-308) Task Tracker does not handle the case
 of read only local dir  case correctly
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Task Tracker does not handle the case of read only local dir  case correctly
----------------------------------------------------------------------------

         Key: HADOOP-308
         URL: http://issues.apache.org/jira/browse/HADOOP-308
     Project: Hadoop
        Type: Bug

    Versions: 0.3.2    
 Environment: all
    Reporter: Runping Qi



In case that the local dir is not writable on a node, the tasks on the  node will fail as expected, with an exception like:

(Read-only file system) at java.io.FileOutputStream.open(Native Method) 
at java.io.FileOutputStream.(FileOutputStream.java:179) 
at java.io.FileOutputStream.(FileOutputStream.java:131) 
at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.(DFSClient.java:723) 
at org.apache.hadoop.dfs.DFSClient.create(DFSClient.java:241) 
at org.apache.hadoop.dfs.DistributedFileSystem.createRaw(DistributedFileSystem.java:96) 
at org.apache.hadoop.fs.FSDataOutputStream$Summer.(FSDataOutputStream.java:44) 
at org.apache.hadoop.fs.FSDataOutputStream.(FSDataOutputStream.java:134) 
at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:224) 
at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:176) 
....
at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:265) 
at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:847)

However, the task tracker will continue accept new tasks and continue to fail.
The runloop of tasktracker should detect such a problem and exits.



-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun 19 19:05:53 2006
Return-Path: 
 <hadoop-dev-return-2098-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 14430 invoked from network); 19 Jun 2006 19:05:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jun 2006 19:05:53 -0000
Received: (qmail 11405 invoked by uid 500); 19 Jun 2006 19:05:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 11385 invoked by uid 500); 19 Jun 2006 19:05:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 11376 invoked by uid 99); 19 Jun 2006 19:05:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 12:05:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 12:05:52 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A273A410006
	for <hadoop-dev@lucene.apache.org>; Mon, 19 Jun 2006 19:04:30 +0000 (GMT)
Message-ID: <28638320.1150743870662.JavaMail.jira@brutus>
Date: Mon, 19 Jun 2006 19:04:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-299) maps from second jobs will not run
 until the first job finishes completely
In-Reply-To: <7806228.1150233869860.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-299?page=all ]
     
Doug Cutting resolved HADOOP-299:
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Owen!

> maps from second jobs will not run until the first job finishes completely
> --------------------------------------------------------------------------
>
>          Key: HADOOP-299
>          URL: http://issues.apache.org/jira/browse/HADOOP-299
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.3.2
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.4.0
>  Attachments: map-schedule.patch
>
> Because of the logic in the JobTracker's pollForNewTask, second jobs will rarely start running maps until the first job finishes completely. The JobTracker leaves room to re-run failed maps from the first job and it reserves the total number of maps for the first job. Thus, if you have more maps in the first job than your cluster capacity, none of the second job maps will ever run.
> I propose setting the reserve to 1% of the first job's maps.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun 19 19:09:53 2006
Return-Path: 
 <hadoop-dev-return-2099-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17173 invoked from network); 19 Jun 2006 19:09:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jun 2006 19:09:53 -0000
Received: (qmail 19674 invoked by uid 500); 19 Jun 2006 19:09:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 19650 invoked by uid 500); 19 Jun 2006 19:09:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 19641 invoked by uid 99); 19 Jun 2006 19:09:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 12:09:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 12:09:52 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A4017410006
	for <hadoop-dev@lucene.apache.org>; Mon, 19 Jun 2006 19:08:30 +0000 (GMT)
Message-ID: <25715511.1150744110668.JavaMail.jira@brutus>
Date: Mon, 19 Jun 2006 19:08:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-250) HTTP Browsing interface for DFS
 Health/Status
In-Reply-To: <29976966.1148448150061.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-250?page=all ]
     
Doug Cutting resolved HADOOP-250:
---------------------------------

    Resolution: Fixed

I just committed this.  I made two additional changes.  In FSNameSystem.java I moved the initialization of the static variable fsNameSystemObject to before where Jetty is started, since the jsp pages require a non-null value for this and the servlet init was failing with a null pointer exception.  I also added an entry to hadoop-default.xml for the new dfs.info.port parameter.

> HTTP Browsing interface for DFS Health/Status
> ---------------------------------------------
>
>          Key: HADOOP-250
>          URL: http://issues.apache.org/jira/browse/HADOOP-250
>      Project: Hadoop
>         Type: New Feature

>   Components: dfs
>     Versions: 0.3.0
>     Reporter: Devaraj Das
>      Fix For: 0.4.0
>  Attachments: dfshealth.pdf, http_browsing_dfs.new.patch, http_browsing_dfs.patch, http_browsing_dfs.patch, http_browsing_dfs.patch
>
> A web interface to view the DFS health/status (name and data nodes) is to be created. User can connect to the webserver on the namenode and a web page will be displayed. The web page will give some details about that namenode (startup time and the total cluster capacity). The web page will contain a table of 'live' and 'dead' datanodes. Each live datanode will be a link to the complete details of the datanode as given by DatanodeInfo (also see DataNodeReport).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun 19 21:25:54 2006
Return-Path: 
 <hadoop-dev-return-2100-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 72651 invoked from network); 19 Jun 2006 21:25:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jun 2006 21:25:54 -0000
Received: (qmail 85920 invoked by uid 500); 19 Jun 2006 21:25:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 85779 invoked by uid 500); 19 Jun 2006 21:25:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 85770 invoked by uid 99); 19 Jun 2006 21:25:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 14:25:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 14:25:52 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D9A61410006
	for <hadoop-dev@lucene.apache.org>; Mon, 19 Jun 2006 21:24:30 +0000 (GMT)
Message-ID: <16219283.1150752270888.JavaMail.jira@brutus>
Date: Mon, 19 Jun 2006 21:24:30 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-215) New method for obtaining report of
 NameNode and JobTracker internals
In-Reply-To: <9733318.1147467008377.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-215?page=all ]
     
Owen O'Malley resolved HADOOP-215:
----------------------------------

    Resolution: Won't Fix

Alan asked to close this.

> New method for obtaining report of NameNode and JobTracker internals
> --------------------------------------------------------------------
>
>          Key: HADOOP-215
>          URL: http://issues.apache.org/jira/browse/HADOOP-215
>      Project: Hadoop
>         Type: New Feature

>   Components: mapred, dfs
>     Reporter: alan wootton
>     Priority: Minor

>
> Many weeks ago we (at shopping.com research) decided we wanted to be able to get reports from the internals of JobTracker and NameNode. The hadoop web server provides some of this, but we wanted a more structured output, and easier extensibility.
> So, we decided to use xml, and I wrote it.
> There is a very thin interface to ClientProtocol, and JobSubmissionProtocol like this:
> public XmlReporter getXmlReport(String classname, String question);
> The implementation (in JobTracker and NameNode ) looks like this:
> public XmlReporter getXmlReport(String classname, String question)
>     {
> 		XmlReporter reporter = XmlReporter.getInstance( classname, this,  question);
> 		reporter.report();
> 		return reporter;
>     }
> The idea being that you pass in some xml (question), an XmlReporter (classname) is instanciated and passed back. 
> An XmlReporter object consists of nothing more that two org.w3c.dom.Document objects (one in the question, the other is the answer). The Writable interface, for the RPC, simply serializes the dom tree to a string, and then parses it back to a dom tree.
> Anyway, here it is. I would like for it to either make it into the code, or for me to find anoher way. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun 19 21:42:57 2006
Return-Path: 
 <hadoop-dev-return-2101-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77360 invoked from network); 19 Jun 2006 21:42:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jun 2006 21:42:57 -0000
Received: (qmail 15804 invoked by uid 500); 19 Jun 2006 21:42:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15652 invoked by uid 500); 19 Jun 2006 21:42:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 15530 invoked by uid 99); 19 Jun 2006 21:42:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 14:42:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 14:42:52 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 47915410006
	for <hadoop-dev@lucene.apache.org>; Mon, 19 Jun 2006 21:41:31 +0000 (GMT)
Message-ID: <284481.1150753291289.JavaMail.jira@brutus>
Date: Mon, 19 Jun 2006 21:41:31 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-271) add links to task tracker http server
 from task details and failure pages
In-Reply-To: <18980326.1149204689854.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-271?page=all ]

Owen O'Malley updated HADOOP-271:
---------------------------------

    Attachment: task-tracker-link-3.patch

Updated to apply against the current sources.

> add links to task tracker http server from task details and failure pages
> -------------------------------------------------------------------------
>
>          Key: HADOOP-271
>          URL: http://issues.apache.org/jira/browse/HADOOP-271
>      Project: Hadoop
>         Type: Improvement

>   Components: mapred
>     Versions: 0.2.1
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>     Priority: Minor
>      Fix For: 0.4.0
>  Attachments: add-machine-links.patch, task-tracker-link-2.patch, task-tracker-link-3.patch, task-tracker-link.patch
>
> Make the machine name in the list of task attempts and failures into links to the correct task tracker http server.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun 19 21:52:34 2006
Return-Path: 
 <hadoop-dev-return-2102-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78691 invoked from network); 19 Jun 2006 21:52:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jun 2006 21:52:34 -0000
Received: (qmail 23528 invoked by uid 500); 19 Jun 2006 21:52:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23415 invoked by uid 500); 19 Jun 2006 21:52:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 20126 invoked by uid 99); 19 Jun 2006 21:50:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 14:50:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 14:50:52 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 17E25410007
	for <hadoop-dev@lucene.apache.org>; Mon, 19 Jun 2006 21:49:31 +0000 (GMT)
Message-ID: <26030900.1150753771094.JavaMail.jira@brutus>
Date: Mon, 19 Jun 2006 21:49:31 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-123) mini map/reduce cluster for junit
 tests
In-Reply-To: <927904038.1144348524414.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-123?page=all ]
     
Doug Cutting resolved HADOOP-123:
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Milind!

> mini map/reduce cluster for junit tests
> ---------------------------------------
>
>          Key: HADOOP-123
>          URL: http://issues.apache.org/jira/browse/HADOOP-123
>      Project: Hadoop
>         Type: New Feature

>   Components: mapred
>     Versions: 0.3.0
>     Reporter: Owen O'Malley
>     Assignee: Milind Bhandarkar
>      Fix For: 0.4.0
>  Attachments: ClusterTestWordCount.patch, minimr.patch
>
> I would like a single process map-reduce pseduo-distributed cluster that can be used for unit tests. We should add a unit test with a word count map/reduce.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 20 00:13:54 2006
Return-Path: 
 <hadoop-dev-return-2103-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16114 invoked from network); 20 Jun 2006 00:13:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2006 00:13:54 -0000
Received: (qmail 20708 invoked by uid 500); 20 Jun 2006 00:13:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 20681 invoked by uid 500); 20 Jun 2006 00:13:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 20672 invoked by uid 99); 20 Jun 2006 00:13:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 17:13:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 17:13:52 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A01BC410005
	for <hadoop-dev@lucene.apache.org>; Tue, 20 Jun 2006 00:12:30 +0000 (GMT)
Message-ID: <8264298.1150762350652.JavaMail.jira@brutus>
Date: Tue, 20 Jun 2006 00:12:30 +0000 (GMT+00:00)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-288) RFC: Efficient file caching
In-Reply-To: <6015694.1149730109866.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-288?page=comments#action_12416824 ] 

Michel Tourn commented on HADOOP-288:
-------------------------------------

Hadoop proposal: file caching
updated description with more details.
----------

Efficient file caching 
(on Hadoop Task nodes, for benefit of MapReduce Tasks)

Overview
========
This document describes a mechanism for caching files or archives on taskTracker nodes' local file system.
Exporting and extracting large archives from HDFS to local filesystem is expensive.
And is often required by the applications.
Currently this would happen at the beginning of every Task of a MapReduce Job.

The purpose of the Hadoop file cache is to minimize this overhead by
preserving and reusing the extracted data

During a MapRed job there are two kinds of data being uploaded to a Hadoop cluster:
  Java code and Out-of-band data.

Java code may include libraries so this can easily get large. (megabytes)

Out-of-band data is any data used by the job, in addition to the map input or the reduce input.
For example a large dictionary of words. This can also get large (gigabytes)


There are two main kinds of cacheable files:
1. The MapReduce job jar. 
   This contains Java code and possibly out-of-band data.
2. Additional archives
   This contains out-of-band data.

The proposed solution suggests that
Cacheable files:
are stored in HDFS, and specified in the JobConf of a MapReduce job.
A special case is the job jar file, which will get cached by default.

Supported formats for cacheable files are jar, tar and gzip, 
Additional formats could be added at a future time.
Regular files are also supported


Workflow:
========
For out-of-band data, the user must first explicitly upload archives to HDFS.
This can be done using any HDFS client.
It is typical for out-of-band data to be reused across Jobs and users.

The user specifies the out-of-band data using:
JobConf.addCachedArchive() or JobConf.addCachedFile()

The user specifies the job jar as today:
JobConf.setJar("f.jar") which implicitly has the effect of:
JobConf.addCachedArchive("f.jar"). 

When a Job starts, the JobTracker does the following for each cached archive.
Compute a strong hash of the archive and store the hash in the HDFS.
To avoid reading and scanning the archive, the strong hash is based
on the existing HDFS block-CRC codes rather than on the actual content.

When a Task starts, the TaskTracker does the following for each cached archive.
Retrieve the strong hash from HDFS, compare with the hash of the local copy.
If the local hash does not exist or is different, then
  retrieve the archive, unarchive it, update the local hash.
If the archive is the job jar, then
  copy or hard-link the archive contents to the Task working directory.
Then start the TaskRunner as usual.

Once the Task is running, the user code may access the cached archive contents.
This usually happens at initialization time.
If the JobConf added the cached archive: /hdfsdir/path/f.jar
Then the task can expect to access the archive content at:
$HADOOP_CACHE/hdfsdir/path/fdir/ffile 
or maybe:
$HADOOP_CACHE/hdfsdir/path/f_jar/fdir/ffile
The second option guarantees that multiple archives 
in the same directory will not clobber each other.
The translation of f.jar to f_jar is a convention to ease the distinction of file names and directory names.


Note that in the above, the HDFS paths are mirrored on the local filesystem.
The intent is to provide namespace protection.
[i.e. the contents of hdfs1/archive.jar and hdfs2/archive.jar should not collide in the cache]
The intent is not to make cache paths interchangeable with HDFS paths. 


The variable HADOOP_CACHE is made available to the task as
a JobConf property that is dynamically set by the TaskRunner code.

Cache size control:
------------------
We cannot let the cache grow unbounded.

The cache is always up-to-date at the start of a job.
So the configurable parameter should not be the age of the cached data 
but the total size of the cache. 
The cache size is a static TaskTracker configuration parameter.

LRU (least recently used) policy:
On each Task tracker, the cache manager will measure the total size of the cache
and expire the oldest cached items. 
When a cached item is requested again in a different job, it goes back to the top.

The cached archive contents are required for the MapReduce task to function.
So when the promised cache contents cannot be provided, 
the cache manager will force a job failure 

Before new files are added to the cache, we do this size test.
If the cache size limit WOULD require to expire files...
1. .. expire files for completed jobs then everything is fine: delete them.
2. .. expire files for jobs that are already running, then the NEW job fails.
3. .. expire files for the new job then the new job fails.

Note that a file (archive) may belong to multiple jobs.

In normal use the cache size is expected to be significantly larger 
than the files requested by a single job. 
So the failure modes due to cache overflow should rarely occur.

THE END.


> RFC: Efficient file caching
> ---------------------------
>
>          Key: HADOOP-288
>          URL: http://issues.apache.org/jira/browse/HADOOP-288
>      Project: Hadoop
>         Type: Bug

>     Reporter: Michel Tourn
>     Assignee: Michel Tourn

>
> RFC: Efficient file caching 
> (on Hadoop Task nodes, for benefit of MapReduce Tasks)
> ------------------------------------------------------
> We will start implementing this soon. Please provide feedback and improvements to this plan.
> The header "Options:" indicates places where simple choices must be made.
> Problem:
> -------
> o MapReduce tasks require access to additional out-of-band data ("dictionaries")
> This out-of-band data is:
> o in addition to the map/reduce inputs.
> o large (1GB+)
> o broadcast (same data is required on all the Task nodes)
> o changes "infrequently", in particular:
> oo it is always constant for all the Tasks in a Job. 
> oo it is often constant for a month at a time 
> oo it may be shared across team members
> o sometimes used by pure-Java MapReduce programs
> o sometimes used by non-Java MapReduce programs (using Hadoop-Streaming)
> o (future) used by programs that use HDFS and Task-trackers but not MapReduce.
> Existing Solutions to the problem:
> ---------------------------------
> These solutions are not good enough. The present proposal is to do Sol 1 with caching.
> Sol 1: Pure Hadoop: package the out-of-band data in the MapReduce Job jar file.
> Sol 2: Non  Hadoop: for each task node run rsync from single source for data.
> Sol 3: Non  Hadoop: use BitTorrent, etc.
> Sol.1 is correct but slow for many reasons:
>  The Job submitter must recreate a large jar(tar) file for every Job.
>   (The jar contains both changing programs and stable dictionaries)
>  The large Jar file must be propagated from the client to HDFS with 
>  a large replication factor. 
>  At the beginning of every Task, the Task tracker gets the job jar from HDFS 
>  and unjars it in the working directory. This can dominate task execution time.
>  
> Sol.2 has nice properties but also some problems.
>  It does not scale well with large clusters (many concurrent rsync read requests i.e. single-source broadcast)
>  It assumes that Hadoop users can upload data using rsync to the cluster nodes. As a policy, this is not allowed.
>  It requires rsync.
>  
> Sol.3 alleviates the rsync scalability problems but 
>       It is a dependency on an external system. 
>       We want something simpler and more tightly integrated with Hadoop.
>       
> Staging (uploading) out-of-band data:
> ------------------------------------
> The out-of-band data will often originate on the local filesystem of a user machine 
>  (i.e. a MapReduce job submitter)
> Nevertheless it makes sense to use HDFS to store the original out-of-band data because:
> o HDFS has (wide) replication. This enables scalable broadcast later.
> o HDFS is an available channel to move data from clients to all task machines.
> o HDFS is convenient as a shared location among Hadoop team members.
> Accessing (downloading) out-of-band data:
> ----------------------------------------
> The non-Java MapReduce programs do not have or want[1] APIs for HDFS.
> Instead these programs just want to access out-of-band data as 
>  local files at predefined paths.
> ([1] Existing programs should be reusable with no changes. 
>  This is often possible bec. communication is over stdin/stdout.)
> Job's jar file as a special case:
> --------------------------------
> One use case is to allow users to make the job jar itself cachable.
> This is only useful in cases where NOTHING changes when a job is resubmitted
>  (no MapRed code changes and no changes in shipped data)
> This situation might occur with an 'extractor' job (gets data from an external source: like Nutch crawler)
> Currently the Hadoop mapred-jar mechanism works in this way:
>  the job jar data is unjarred in the "working directory" of the Task 
>  the jar contains both MapRed java code (added to classpath)
> Cache synchronization:
> ---------------------
> The efficient implementation of the out-of-band data distribution
> is mostly a cache synchronization problem.
> A list of the various aspects where choices must be made follows.
> Cache key:
> ---------
> How do you test that the cached copy is out-of-date?
> Options: 
> 1. the archive/file timestamp 
> 2. the MD5 of the archive/file content
> Comparing source and destination Timestamps is problematic bec. it assumes synchronized clocks.
> Also there is no last-modif metadata in HDFS (for good reasons, like scalability of metadata ops)
> Timestamps stored with the source ('last-propagate-time') do 
>  not require synchronized clocks, only locally monotonic time. 
> (and the worse which can happen at daylight-savings switch is a missed update or an extra-update)
> The cache code could store a copy of the local timestamp 
> in the same way that it caches the value of the content hash along with the source data.
>  
> Cachable unit:
> -------------
> Options: individual files or archives or both.
> Note:
> At the API level, directories will be processed recursively 
> (and the local FS directories will parallel HDFS directories)
> So bulk operations are always possible using directories.
> The question here is whether to handle archives as an additional bulk mechanism.
> Archives are special because:
> o unarchiving occurs transparently as part of the cache sync
> o The cache key is computed on the archive and preserved although 
>   the archive itself is not preserved.
> Supported archive format will be: tar (maybe tgz or compressed jar)
> Archive detection test: by filename extension ".tar" or ".jar"
> Suppose we don't handle archives as special files:
> Pros:
>  o less code, no discussion about which archive formats are supported
>  o fine for large dictionary files. And when files are not large, user may as well
>    put them in the Job jar as usual.
>  o user code could always check and unarchive specific cached files
>    (as a side-effect of MapRed task initialization)
> Cons:
>  o handling small files may be inefficient 
>   (multiple HDFS operations, multiple hash computation, 
>    one 'metadata' hash file along with each small file)
>  o It will not be possible to handle the Job's jar file as a special case of caching 
> Cache isolation: 
> ---------------
> In some cases it may be a problem if the cached HDFS files are updated while a Job is in progress:
> The file may become unavailable for a short period of time and some tasks fail.
> The file may change (atomically) and different tasks use a different version.
> This isolation problem is not addressed in this proposal.
> Standard solutions to the isolation problem are:
> o Assume that Jobs and interfering cache updates won't occur concurrently.
> o Put a version number in the HDFS file paths and refer to a hard-coded version in the Job code.
> o Before running the MapRed job, run a non-distributed application that tests
>   what is the latest available version of the out-of-band data. 
>   Then make this version available to the MapRed job.
>   Two ways to do this. 
>   o either set a job property just-in-time:
>     addCachePathPair("/mydata/v1234/", "localcache/mydata_latest"); 
>     (see Job Configuration for meaning of this)
>   o or publish the decision as an HDFS file containing the version.
>     then rely on user code to read the version, and manually populate the cache:
>     Cache.syncCache("/hdfs/path/fileordir", "relative/local/fileordir");
>     (see MapReduce API for meaning of this)
> Cache synchronization stages:
> ----------------------------
> There are two stages: Client-to-HDFS and HDFS-to-TaskTracker
> o Client-to-HDFS stage.
> Options: A simple option is to not do anything here, i.e. rely on the user.
> This is a reasonable option given previous remarks on the role of HDFS:
>  HDFS is a staging/publishing area and a natural shared location.
> In particular this means that the system need not track 
> where the client files come from.
> o HDFS-to-TaskTracker:
> Client-to-HDFS synchronization (if done at all) should happen before this.
> Then HDFS-to-TaskTracker synchronization must happen right before 
> the data is needed on a node.
> MapReduce cache API:
> -------------------
> Options:
> 1. No change in MapReduce framework code:
> require the user to put this logic in map() (or reduce) function:
>  in MyMapper constructor (or in map() on first record) user is asked to add:
>  
>     Cache.syncCache("/hdfs/path/fileordir", "relative/local/fileordir");
>     Cache.syncCache("..."); //etc.
>   
> -----
> 2. Put this logic in MapReduce framework and use Job properties to
>    communicate the list of pairs (hdfs path; local path)
>  
> Directories are processed recursively.
> If archives are treated specially then they are unarchived on destination.
>  
> MapReduce Job Configuration:
> ---------------------------
> Options:
> with No change in MapReduce framework code (see above)
>  no special Job configuration: 
>    it is up to the MapRed writer to configure and run the cache operations.
> ---
> with Logic in MapReduce framework (see above)
>  some simple Job configuration
> JobConf.addCachePathPair(String, String)
> JobConf.addCachePathPair("/hdfs/path/fileordir", "relative/local/fileordir");

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 20 00:32:54 2006
Return-Path: 
 <hadoop-dev-return-2104-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 21483 invoked from network); 20 Jun 2006 00:32:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2006 00:32:54 -0000
Received: (qmail 40337 invoked by uid 500); 20 Jun 2006 00:32:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40316 invoked by uid 500); 20 Jun 2006 00:32:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 40307 invoked by uid 99); 20 Jun 2006 00:32:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 17:32:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 17:32:52 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D12EF410005
	for <hadoop-dev@lucene.apache.org>; Tue, 20 Jun 2006 00:31:30 +0000 (GMT)
Message-ID: <23798958.1150763490854.JavaMail.jira@brutus>
Date: Tue, 20 Jun 2006 00:31:30 +0000 (GMT+00:00)
From: "paul sutter (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-288) RFC: Efficient file caching
In-Reply-To: <6015694.1149730109866.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-288?page=comments#action_12416826 ] 

paul sutter commented on HADOOP-288:
------------------------------------


Why not 
- leave the "archived" data in DFS,
- with its replication level set to infinite, and
- make a change to the DFS client so that it will replicate blocks of such files locally when they are accessed, and
- ensure that blocks that are local are accessed through the local file system instead of through DFS

Wouldnt that be simpler than having a whole new mechanism?



> RFC: Efficient file caching
> ---------------------------
>
>          Key: HADOOP-288
>          URL: http://issues.apache.org/jira/browse/HADOOP-288
>      Project: Hadoop
>         Type: Bug

>     Reporter: Michel Tourn
>     Assignee: Michel Tourn

>
> RFC: Efficient file caching 
> (on Hadoop Task nodes, for benefit of MapReduce Tasks)
> ------------------------------------------------------
> We will start implementing this soon. Please provide feedback and improvements to this plan.
> The header "Options:" indicates places where simple choices must be made.
> Problem:
> -------
> o MapReduce tasks require access to additional out-of-band data ("dictionaries")
> This out-of-band data is:
> o in addition to the map/reduce inputs.
> o large (1GB+)
> o broadcast (same data is required on all the Task nodes)
> o changes "infrequently", in particular:
> oo it is always constant for all the Tasks in a Job. 
> oo it is often constant for a month at a time 
> oo it may be shared across team members
> o sometimes used by pure-Java MapReduce programs
> o sometimes used by non-Java MapReduce programs (using Hadoop-Streaming)
> o (future) used by programs that use HDFS and Task-trackers but not MapReduce.
> Existing Solutions to the problem:
> ---------------------------------
> These solutions are not good enough. The present proposal is to do Sol 1 with caching.
> Sol 1: Pure Hadoop: package the out-of-band data in the MapReduce Job jar file.
> Sol 2: Non  Hadoop: for each task node run rsync from single source for data.
> Sol 3: Non  Hadoop: use BitTorrent, etc.
> Sol.1 is correct but slow for many reasons:
>  The Job submitter must recreate a large jar(tar) file for every Job.
>   (The jar contains both changing programs and stable dictionaries)
>  The large Jar file must be propagated from the client to HDFS with 
>  a large replication factor. 
>  At the beginning of every Task, the Task tracker gets the job jar from HDFS 
>  and unjars it in the working directory. This can dominate task execution time.
>  
> Sol.2 has nice properties but also some problems.
>  It does not scale well with large clusters (many concurrent rsync read requests i.e. single-source broadcast)
>  It assumes that Hadoop users can upload data using rsync to the cluster nodes. As a policy, this is not allowed.
>  It requires rsync.
>  
> Sol.3 alleviates the rsync scalability problems but 
>       It is a dependency on an external system. 
>       We want something simpler and more tightly integrated with Hadoop.
>       
> Staging (uploading) out-of-band data:
> ------------------------------------
> The out-of-band data will often originate on the local filesystem of a user machine 
>  (i.e. a MapReduce job submitter)
> Nevertheless it makes sense to use HDFS to store the original out-of-band data because:
> o HDFS has (wide) replication. This enables scalable broadcast later.
> o HDFS is an available channel to move data from clients to all task machines.
> o HDFS is convenient as a shared location among Hadoop team members.
> Accessing (downloading) out-of-band data:
> ----------------------------------------
> The non-Java MapReduce programs do not have or want[1] APIs for HDFS.
> Instead these programs just want to access out-of-band data as 
>  local files at predefined paths.
> ([1] Existing programs should be reusable with no changes. 
>  This is often possible bec. communication is over stdin/stdout.)
> Job's jar file as a special case:
> --------------------------------
> One use case is to allow users to make the job jar itself cachable.
> This is only useful in cases where NOTHING changes when a job is resubmitted
>  (no MapRed code changes and no changes in shipped data)
> This situation might occur with an 'extractor' job (gets data from an external source: like Nutch crawler)
> Currently the Hadoop mapred-jar mechanism works in this way:
>  the job jar data is unjarred in the "working directory" of the Task 
>  the jar contains both MapRed java code (added to classpath)
> Cache synchronization:
> ---------------------
> The efficient implementation of the out-of-band data distribution
> is mostly a cache synchronization problem.
> A list of the various aspects where choices must be made follows.
> Cache key:
> ---------
> How do you test that the cached copy is out-of-date?
> Options: 
> 1. the archive/file timestamp 
> 2. the MD5 of the archive/file content
> Comparing source and destination Timestamps is problematic bec. it assumes synchronized clocks.
> Also there is no last-modif metadata in HDFS (for good reasons, like scalability of metadata ops)
> Timestamps stored with the source ('last-propagate-time') do 
>  not require synchronized clocks, only locally monotonic time. 
> (and the worse which can happen at daylight-savings switch is a missed update or an extra-update)
> The cache code could store a copy of the local timestamp 
> in the same way that it caches the value of the content hash along with the source data.
>  
> Cachable unit:
> -------------
> Options: individual files or archives or both.
> Note:
> At the API level, directories will be processed recursively 
> (and the local FS directories will parallel HDFS directories)
> So bulk operations are always possible using directories.
> The question here is whether to handle archives as an additional bulk mechanism.
> Archives are special because:
> o unarchiving occurs transparently as part of the cache sync
> o The cache key is computed on the archive and preserved although 
>   the archive itself is not preserved.
> Supported archive format will be: tar (maybe tgz or compressed jar)
> Archive detection test: by filename extension ".tar" or ".jar"
> Suppose we don't handle archives as special files:
> Pros:
>  o less code, no discussion about which archive formats are supported
>  o fine for large dictionary files. And when files are not large, user may as well
>    put them in the Job jar as usual.
>  o user code could always check and unarchive specific cached files
>    (as a side-effect of MapRed task initialization)
> Cons:
>  o handling small files may be inefficient 
>   (multiple HDFS operations, multiple hash computation, 
>    one 'metadata' hash file along with each small file)
>  o It will not be possible to handle the Job's jar file as a special case of caching 
> Cache isolation: 
> ---------------
> In some cases it may be a problem if the cached HDFS files are updated while a Job is in progress:
> The file may become unavailable for a short period of time and some tasks fail.
> The file may change (atomically) and different tasks use a different version.
> This isolation problem is not addressed in this proposal.
> Standard solutions to the isolation problem are:
> o Assume that Jobs and interfering cache updates won't occur concurrently.
> o Put a version number in the HDFS file paths and refer to a hard-coded version in the Job code.
> o Before running the MapRed job, run a non-distributed application that tests
>   what is the latest available version of the out-of-band data. 
>   Then make this version available to the MapRed job.
>   Two ways to do this. 
>   o either set a job property just-in-time:
>     addCachePathPair("/mydata/v1234/", "localcache/mydata_latest"); 
>     (see Job Configuration for meaning of this)
>   o or publish the decision as an HDFS file containing the version.
>     then rely on user code to read the version, and manually populate the cache:
>     Cache.syncCache("/hdfs/path/fileordir", "relative/local/fileordir");
>     (see MapReduce API for meaning of this)
> Cache synchronization stages:
> ----------------------------
> There are two stages: Client-to-HDFS and HDFS-to-TaskTracker
> o Client-to-HDFS stage.
> Options: A simple option is to not do anything here, i.e. rely on the user.
> This is a reasonable option given previous remarks on the role of HDFS:
>  HDFS is a staging/publishing area and a natural shared location.
> In particular this means that the system need not track 
> where the client files come from.
> o HDFS-to-TaskTracker:
> Client-to-HDFS synchronization (if done at all) should happen before this.
> Then HDFS-to-TaskTracker synchronization must happen right before 
> the data is needed on a node.
> MapReduce cache API:
> -------------------
> Options:
> 1. No change in MapReduce framework code:
> require the user to put this logic in map() (or reduce) function:
>  in MyMapper constructor (or in map() on first record) user is asked to add:
>  
>     Cache.syncCache("/hdfs/path/fileordir", "relative/local/fileordir");
>     Cache.syncCache("..."); //etc.
>   
> -----
> 2. Put this logic in MapReduce framework and use Job properties to
>    communicate the list of pairs (hdfs path; local path)
>  
> Directories are processed recursively.
> If archives are treated specially then they are unarchived on destination.
>  
> MapReduce Job Configuration:
> ---------------------------
> Options:
> with No change in MapReduce framework code (see above)
>  no special Job configuration: 
>    it is up to the MapRed writer to configure and run the cache operations.
> ---
> with Logic in MapReduce framework (see above)
>  some simple Job configuration
> JobConf.addCachePathPair(String, String)
> JobConf.addCachePathPair("/hdfs/path/fileordir", "relative/local/fileordir");

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 20 00:39:52 2006
Return-Path: 
 <hadoop-dev-return-2105-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 22301 invoked from network); 20 Jun 2006 00:39:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2006 00:39:52 -0000
Received: (qmail 44228 invoked by uid 500); 20 Jun 2006 00:39:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 44205 invoked by uid 500); 20 Jun 2006 00:39:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 44189 invoked by uid 99); 20 Jun 2006 00:39:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 17:39:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 17:39:51 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DDC17410006
	for <hadoop-dev@lucene.apache.org>; Tue, 20 Jun 2006 00:38:29 +0000 (GMT)
Message-ID: <25077876.1150763909904.JavaMail.jira@brutus>
Date: Tue, 20 Jun 2006 00:38:29 +0000 (GMT+00:00)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-309) NullPointerException in
 StatusHttpServer
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

NullPointerException in StatusHttpServer
----------------------------------------

         Key: HADOOP-309
         URL: http://issues.apache.org/jira/browse/HADOOP-309
     Project: Hadoop
        Type: Bug

  Components: dfs, mapred  
    Versions: 0.3.2    
    Reporter: Konstantin Shvachko


The NullPointerException happens in the constructor of StatusHttpServer because the System property "hadoop.log.dir" is undefined.
I see it trying to start the Namenode directly without using any scripts.

Exception in thread "main" java.lang.NullPointerException
	at org.mortbay.util.Resource.newResource(Resource.java:99)
	at org.mortbay.http.ResourceCache.setResourceBase(ResourceCache.java:140)
	at org.mortbay.http.HttpContext.setResourceBase(HttpContext.java:2207)
	at org.apache.hadoop.mapred.StatusHttpServer.<init>(StatusHttpServer.java:66)
	at org.apache.hadoop.dfs.FSNamesystem.<init>(FSNamesystem.java:172)
	at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:97)
	at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:88)
	at org.apache.hadoop.dfs.NameNode.main(NameNode.java:496)

In general I think the sources should not rely on the system properties and environment variables defined in hadoop scripts.


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 20 01:40:53 2006
Return-Path: 
 <hadoop-dev-return-2106-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 41077 invoked from network); 20 Jun 2006 01:40:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2006 01:40:53 -0000
Received: (qmail 97571 invoked by uid 500); 20 Jun 2006 01:40:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97542 invoked by uid 500); 20 Jun 2006 01:40:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97533 invoked by uid 99); 20 Jun 2006 01:40:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 18:40:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 18:40:52 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A2F35410006
	for <hadoop-dev@lucene.apache.org>; Tue, 20 Jun 2006 01:39:30 +0000 (GMT)
Message-ID: <13826897.1150767570664.JavaMail.jira@brutus>
Date: Tue, 20 Jun 2006 01:39:30 +0000 (GMT+00:00)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-309) NullPointerException in
 StatusHttpServer
In-Reply-To: <25077876.1150763909904.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-309?page=comments#action_12416831 ] 

Konstantin Shvachko commented on HADOOP-309:
--------------------------------------------

Even if I get through this I get yet another NullPointerException.
Now because webapps resource is not defined.

Exception in thread "main" java.lang.NullPointerException
	at org.apache.hadoop.mapred.StatusHttpServer.getWebAppsPath(StatusHttpServer.java:108)
	at org.apache.hadoop.mapred.StatusHttpServer.<init>(StatusHttpServer.java:71)
	at org.apache.hadoop.dfs.FSNamesystem.<init>(FSNamesystem.java:172)
	at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:97)
	at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:88)
	at org.apache.hadoop.dfs.NameNode.main(NameNode.java:496)

> NullPointerException in StatusHttpServer
> ----------------------------------------
>
>          Key: HADOOP-309
>          URL: http://issues.apache.org/jira/browse/HADOOP-309
>      Project: Hadoop
>         Type: Bug

>   Components: dfs, mapred
>     Versions: 0.3.2
>     Reporter: Konstantin Shvachko

>
> The NullPointerException happens in the constructor of StatusHttpServer because the System property "hadoop.log.dir" is undefined.
> I see it trying to start the Namenode directly without using any scripts.
> Exception in thread "main" java.lang.NullPointerException
> 	at org.mortbay.util.Resource.newResource(Resource.java:99)
> 	at org.mortbay.http.ResourceCache.setResourceBase(ResourceCache.java:140)
> 	at org.mortbay.http.HttpContext.setResourceBase(HttpContext.java:2207)
> 	at org.apache.hadoop.mapred.StatusHttpServer.<init>(StatusHttpServer.java:66)
> 	at org.apache.hadoop.dfs.FSNamesystem.<init>(FSNamesystem.java:172)
> 	at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:97)
> 	at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:88)
> 	at org.apache.hadoop.dfs.NameNode.main(NameNode.java:496)
> In general I think the sources should not rely on the system properties and environment variables defined in hadoop scripts.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 20 04:33:56 2006
Return-Path: 
 <hadoop-dev-return-2107-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 74126 invoked from network); 20 Jun 2006 04:33:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2006 04:33:56 -0000
Received: (qmail 31080 invoked by uid 500); 20 Jun 2006 04:33:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 31052 invoked by uid 500); 20 Jun 2006 04:33:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31043 invoked by uid 99); 20 Jun 2006 04:33:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 21:33:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 21:33:54 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9C728410005
	for <hadoop-dev@lucene.apache.org>; Tue, 20 Jun 2006 04:32:32 +0000 (GMT)
Message-ID: <7294204.1150777952637.JavaMail.jira@brutus>
Date: Tue, 20 Jun 2006 04:32:32 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-309) NullPointerException in
 StatusHttpServer
In-Reply-To: <25077876.1150763909904.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-309?page=all ]

Owen O'Malley updated HADOOP-309:
---------------------------------

    Fix Version: 0.4.0
       Priority: Minor  (was: Major)

As we discussed offline, this is just caused because you didn't define a value for "hadoop.log.dir" on your java command line. It would be good to have the server not crash when the property is not defined, but the property should be defined for the servers. The two obvious "fixes" are to:
  1. Remove the "/logs" context when no "hadoop.log.dir" property is defined. This will be confusing to users.
  2. See if we can get the value from log4j via the jakarta commons logging api. It looks like there might be routines that will work.

In any case, I believe this is a pretty low priority bug.

> NullPointerException in StatusHttpServer
> ----------------------------------------
>
>          Key: HADOOP-309
>          URL: http://issues.apache.org/jira/browse/HADOOP-309
>      Project: Hadoop
>         Type: Bug

>   Components: mapred, dfs
>     Versions: 0.3.2
>     Reporter: Konstantin Shvachko
>     Priority: Minor
>      Fix For: 0.4.0

>
> The NullPointerException happens in the constructor of StatusHttpServer because the System property "hadoop.log.dir" is undefined.
> I see it trying to start the Namenode directly without using any scripts.
> Exception in thread "main" java.lang.NullPointerException
> 	at org.mortbay.util.Resource.newResource(Resource.java:99)
> 	at org.mortbay.http.ResourceCache.setResourceBase(ResourceCache.java:140)
> 	at org.mortbay.http.HttpContext.setResourceBase(HttpContext.java:2207)
> 	at org.apache.hadoop.mapred.StatusHttpServer.<init>(StatusHttpServer.java:66)
> 	at org.apache.hadoop.dfs.FSNamesystem.<init>(FSNamesystem.java:172)
> 	at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:97)
> 	at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:88)
> 	at org.apache.hadoop.dfs.NameNode.main(NameNode.java:496)
> In general I think the sources should not rely on the system properties and environment variables defined in hadoop scripts.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 20 06:02:54 2006
Return-Path: 
 <hadoop-dev-return-2108-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 98273 invoked from network); 20 Jun 2006 06:02:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2006 06:02:54 -0000
Received: (qmail 30706 invoked by uid 500); 20 Jun 2006 06:02:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 30564 invoked by uid 500); 20 Jun 2006 06:02:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 30555 invoked by uid 99); 20 Jun 2006 06:02:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 23:02:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 23:02:52 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 953B6410008
	for <hadoop-dev@lucene.apache.org>; Tue, 20 Jun 2006 06:01:30 +0000 (GMT)
Message-ID: <6306980.1150783290608.JavaMail.jira@brutus>
Date: Tue, 20 Jun 2006 06:01:30 +0000 (GMT+00:00)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-309) NullPointerException in
 StatusHttpServer
In-Reply-To: <25077876.1150763909904.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-309?page=comments#action_12416851 ] 

Devaraj Das commented on HADOOP-309:
------------------------------------

These were the exact same problems I encountered when I ran the unit tests. I had to define hadoop.log.dir (in the build.xml file) and had to put the "build" directory (which contains the webapps) in the CLASSPATH.

> NullPointerException in StatusHttpServer
> ----------------------------------------
>
>          Key: HADOOP-309
>          URL: http://issues.apache.org/jira/browse/HADOOP-309
>      Project: Hadoop
>         Type: Bug

>   Components: mapred, dfs
>     Versions: 0.3.2
>     Reporter: Konstantin Shvachko
>     Priority: Minor
>      Fix For: 0.4.0

>
> The NullPointerException happens in the constructor of StatusHttpServer because the System property "hadoop.log.dir" is undefined.
> I see it trying to start the Namenode directly without using any scripts.
> Exception in thread "main" java.lang.NullPointerException
> 	at org.mortbay.util.Resource.newResource(Resource.java:99)
> 	at org.mortbay.http.ResourceCache.setResourceBase(ResourceCache.java:140)
> 	at org.mortbay.http.HttpContext.setResourceBase(HttpContext.java:2207)
> 	at org.apache.hadoop.mapred.StatusHttpServer.<init>(StatusHttpServer.java:66)
> 	at org.apache.hadoop.dfs.FSNamesystem.<init>(FSNamesystem.java:172)
> 	at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:97)
> 	at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:88)
> 	at org.apache.hadoop.dfs.NameNode.main(NameNode.java:496)
> In general I think the sources should not rely on the system properties and environment variables defined in hadoop scripts.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 20 18:14:54 2006
Return-Path: 
 <hadoop-dev-return-2109-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 25076 invoked from network); 20 Jun 2006 18:14:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2006 18:14:54 -0000
Received: (qmail 40860 invoked by uid 500); 20 Jun 2006 18:14:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40695 invoked by uid 500); 20 Jun 2006 18:14:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 40679 invoked by uid 99); 20 Jun 2006 18:14:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 11:14:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 11:14:52 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C8618410007
	for <hadoop-dev@lucene.apache.org>; Tue, 20 Jun 2006 18:13:29 +0000 (GMT)
Message-ID: <20550379.1150827209817.JavaMail.jira@brutus>
Date: Tue, 20 Jun 2006 18:13:29 +0000 (GMT+00:00)
From: "paul sutter (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-310) Additional constructor requested in
 BytesWritable
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Additional constructor requested in BytesWritable
-------------------------------------------------

         Key: HADOOP-310
         URL: http://issues.apache.org/jira/browse/HADOOP-310
     Project: Hadoop
        Type: Improvement

  Components: io  
    Reporter: paul sutter
    Priority: Minor



It would be grand if BytesWritable.java had an additional constructor as below. This allows me to use the BytesWritable class without doing a buffer copy, since we have a less-than-fully-utilized byte array holding our key.

Thanks!
 
 /**
   * Create a BytesWritable using the byte array as the initial value.
   * @param bytes This array becomes the backing storage for the object.
   */
  public BytesWritable(byte[] bytes, int size) {
    this.bytes = bytes;
    this.size = size;
  }
  


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 20 18:53:55 2006
Return-Path: 
 <hadoop-dev-return-2110-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 42575 invoked from network); 20 Jun 2006 18:53:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2006 18:53:55 -0000
Received: (qmail 98744 invoked by uid 500); 20 Jun 2006 18:53:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98717 invoked by uid 500); 20 Jun 2006 18:53:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98708 invoked by uid 99); 20 Jun 2006 18:53:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 11:53:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 11:53:53 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9A327410006
	for <hadoop-dev@lucene.apache.org>; Tue, 20 Jun 2006 18:52:30 +0000 (GMT)
Message-ID: <21157088.1150829550628.JavaMail.jira@brutus>
Date: Tue, 20 Jun 2006 18:52:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-271) add links to task tracker http server
 from task details and failure pages
In-Reply-To: <18980326.1149204689854.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-271?page=all ]
     
Doug Cutting resolved HADOOP-271:
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Owen.

> add links to task tracker http server from task details and failure pages
> -------------------------------------------------------------------------
>
>          Key: HADOOP-271
>          URL: http://issues.apache.org/jira/browse/HADOOP-271
>      Project: Hadoop
>         Type: Improvement

>   Components: mapred
>     Versions: 0.2.1
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>     Priority: Minor
>      Fix For: 0.4.0
>  Attachments: add-machine-links.patch, task-tracker-link-2.patch, task-tracker-link-3.patch, task-tracker-link.patch
>
> Make the machine name in the list of task attempts and failures into links to the correct task tracker http server.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 20 20:12:56 2006
Return-Path: 
 <hadoop-dev-return-2111-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75032 invoked from network); 20 Jun 2006 20:12:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2006 20:12:56 -0000
Received: (qmail 25444 invoked by uid 500); 20 Jun 2006 20:12:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 25417 invoked by uid 500); 20 Jun 2006 20:12:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 25408 invoked by uid 99); 20 Jun 2006 20:12:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 13:12:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 13:12:54 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8BDD9410007
	for <hadoop-dev@lucene.apache.org>; Tue, 20 Jun 2006 20:11:31 +0000 (GMT)
Message-ID: <16865937.1150834291570.JavaMail.jira@brutus>
Date: Tue, 20 Jun 2006 20:11:31 +0000 (GMT+00:00)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-288) RFC: Efficient file caching
In-Reply-To: <6015694.1149730109866.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-288?page=comments#action_12416978 ] 

Michel Tourn commented on HADOOP-288:
-------------------------------------

Yes, staying within the context of DFS could be simpler. 
Note however that we have these requirements:
1. archive files are sometimes used by non-Java non-Hadoop MapReduce programs (using http://wiki.apache.org/lucene-
hadoop/HadoopStreaming) 
2. avoid repetitive expansion of the job jar and of other archives for each Task in the Job.
3. In case of many small files, avoid a per-file overhead for DFS and cache operations.

Because of 1. the files must really be native OS files, not DFS files. 
For such general tools, the "common-denominator API" is only: the base directory for the cache.

Today, unarchiving the job jar occurs in Hadoop, not in the MapRed application. But it is not cached.
Because of 2. and 3. the unarchiving process itself must be cacheable.
So unarchiving must occur in the Hadoop framework, not the MapRed application.


> RFC: Efficient file caching
> ---------------------------
>
>          Key: HADOOP-288
>          URL: http://issues.apache.org/jira/browse/HADOOP-288
>      Project: Hadoop
>         Type: Bug

>     Reporter: Michel Tourn
>     Assignee: Michel Tourn

>
> RFC: Efficient file caching 
> (on Hadoop Task nodes, for benefit of MapReduce Tasks)
> ------------------------------------------------------
> We will start implementing this soon. Please provide feedback and improvements to this plan.
> The header "Options:" indicates places where simple choices must be made.
> Problem:
> -------
> o MapReduce tasks require access to additional out-of-band data ("dictionaries")
> This out-of-band data is:
> o in addition to the map/reduce inputs.
> o large (1GB+)
> o broadcast (same data is required on all the Task nodes)
> o changes "infrequently", in particular:
> oo it is always constant for all the Tasks in a Job. 
> oo it is often constant for a month at a time 
> oo it may be shared across team members
> o sometimes used by pure-Java MapReduce programs
> o sometimes used by non-Java MapReduce programs (using Hadoop-Streaming)
> o (future) used by programs that use HDFS and Task-trackers but not MapReduce.
> Existing Solutions to the problem:
> ---------------------------------
> These solutions are not good enough. The present proposal is to do Sol 1 with caching.
> Sol 1: Pure Hadoop: package the out-of-band data in the MapReduce Job jar file.
> Sol 2: Non  Hadoop: for each task node run rsync from single source for data.
> Sol 3: Non  Hadoop: use BitTorrent, etc.
> Sol.1 is correct but slow for many reasons:
>  The Job submitter must recreate a large jar(tar) file for every Job.
>   (The jar contains both changing programs and stable dictionaries)
>  The large Jar file must be propagated from the client to HDFS with 
>  a large replication factor. 
>  At the beginning of every Task, the Task tracker gets the job jar from HDFS 
>  and unjars it in the working directory. This can dominate task execution time.
>  
> Sol.2 has nice properties but also some problems.
>  It does not scale well with large clusters (many concurrent rsync read requests i.e. single-source broadcast)
>  It assumes that Hadoop users can upload data using rsync to the cluster nodes. As a policy, this is not allowed.
>  It requires rsync.
>  
> Sol.3 alleviates the rsync scalability problems but 
>       It is a dependency on an external system. 
>       We want something simpler and more tightly integrated with Hadoop.
>       
> Staging (uploading) out-of-band data:
> ------------------------------------
> The out-of-band data will often originate on the local filesystem of a user machine 
>  (i.e. a MapReduce job submitter)
> Nevertheless it makes sense to use HDFS to store the original out-of-band data because:
> o HDFS has (wide) replication. This enables scalable broadcast later.
> o HDFS is an available channel to move data from clients to all task machines.
> o HDFS is convenient as a shared location among Hadoop team members.
> Accessing (downloading) out-of-band data:
> ----------------------------------------
> The non-Java MapReduce programs do not have or want[1] APIs for HDFS.
> Instead these programs just want to access out-of-band data as 
>  local files at predefined paths.
> ([1] Existing programs should be reusable with no changes. 
>  This is often possible bec. communication is over stdin/stdout.)
> Job's jar file as a special case:
> --------------------------------
> One use case is to allow users to make the job jar itself cachable.
> This is only useful in cases where NOTHING changes when a job is resubmitted
>  (no MapRed code changes and no changes in shipped data)
> This situation might occur with an 'extractor' job (gets data from an external source: like Nutch crawler)
> Currently the Hadoop mapred-jar mechanism works in this way:
>  the job jar data is unjarred in the "working directory" of the Task 
>  the jar contains both MapRed java code (added to classpath)
> Cache synchronization:
> ---------------------
> The efficient implementation of the out-of-band data distribution
> is mostly a cache synchronization problem.
> A list of the various aspects where choices must be made follows.
> Cache key:
> ---------
> How do you test that the cached copy is out-of-date?
> Options: 
> 1. the archive/file timestamp 
> 2. the MD5 of the archive/file content
> Comparing source and destination Timestamps is problematic bec. it assumes synchronized clocks.
> Also there is no last-modif metadata in HDFS (for good reasons, like scalability of metadata ops)
> Timestamps stored with the source ('last-propagate-time') do 
>  not require synchronized clocks, only locally monotonic time. 
> (and the worse which can happen at daylight-savings switch is a missed update or an extra-update)
> The cache code could store a copy of the local timestamp 
> in the same way that it caches the value of the content hash along with the source data.
>  
> Cachable unit:
> -------------
> Options: individual files or archives or both.
> Note:
> At the API level, directories will be processed recursively 
> (and the local FS directories will parallel HDFS directories)
> So bulk operations are always possible using directories.
> The question here is whether to handle archives as an additional bulk mechanism.
> Archives are special because:
> o unarchiving occurs transparently as part of the cache sync
> o The cache key is computed on the archive and preserved although 
>   the archive itself is not preserved.
> Supported archive format will be: tar (maybe tgz or compressed jar)
> Archive detection test: by filename extension ".tar" or ".jar"
> Suppose we don't handle archives as special files:
> Pros:
>  o less code, no discussion about which archive formats are supported
>  o fine for large dictionary files. And when files are not large, user may as well
>    put them in the Job jar as usual.
>  o user code could always check and unarchive specific cached files
>    (as a side-effect of MapRed task initialization)
> Cons:
>  o handling small files may be inefficient 
>   (multiple HDFS operations, multiple hash computation, 
>    one 'metadata' hash file along with each small file)
>  o It will not be possible to handle the Job's jar file as a special case of caching 
> Cache isolation: 
> ---------------
> In some cases it may be a problem if the cached HDFS files are updated while a Job is in progress:
> The file may become unavailable for a short period of time and some tasks fail.
> The file may change (atomically) and different tasks use a different version.
> This isolation problem is not addressed in this proposal.
> Standard solutions to the isolation problem are:
> o Assume that Jobs and interfering cache updates won't occur concurrently.
> o Put a version number in the HDFS file paths and refer to a hard-coded version in the Job code.
> o Before running the MapRed job, run a non-distributed application that tests
>   what is the latest available version of the out-of-band data. 
>   Then make this version available to the MapRed job.
>   Two ways to do this. 
>   o either set a job property just-in-time:
>     addCachePathPair("/mydata/v1234/", "localcache/mydata_latest"); 
>     (see Job Configuration for meaning of this)
>   o or publish the decision as an HDFS file containing the version.
>     then rely on user code to read the version, and manually populate the cache:
>     Cache.syncCache("/hdfs/path/fileordir", "relative/local/fileordir");
>     (see MapReduce API for meaning of this)
> Cache synchronization stages:
> ----------------------------
> There are two stages: Client-to-HDFS and HDFS-to-TaskTracker
> o Client-to-HDFS stage.
> Options: A simple option is to not do anything here, i.e. rely on the user.
> This is a reasonable option given previous remarks on the role of HDFS:
>  HDFS is a staging/publishing area and a natural shared location.
> In particular this means that the system need not track 
> where the client files come from.
> o HDFS-to-TaskTracker:
> Client-to-HDFS synchronization (if done at all) should happen before this.
> Then HDFS-to-TaskTracker synchronization must happen right before 
> the data is needed on a node.
> MapReduce cache API:
> -------------------
> Options:
> 1. No change in MapReduce framework code:
> require the user to put this logic in map() (or reduce) function:
>  in MyMapper constructor (or in map() on first record) user is asked to add:
>  
>     Cache.syncCache("/hdfs/path/fileordir", "relative/local/fileordir");
>     Cache.syncCache("..."); //etc.
>   
> -----
> 2. Put this logic in MapReduce framework and use Job properties to
>    communicate the list of pairs (hdfs path; local path)
>  
> Directories are processed recursively.
> If archives are treated specially then they are unarchived on destination.
>  
> MapReduce Job Configuration:
> ---------------------------
> Options:
> with No change in MapReduce framework code (see above)
>  no special Job configuration: 
>    it is up to the MapRed writer to configure and run the cache operations.
> ---
> with Logic in MapReduce framework (see above)
>  some simple Job configuration
> JobConf.addCachePathPair(String, String)
> JobConf.addCachePathPair("/hdfs/path/fileordir", "relative/local/fileordir");

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 20 20:20:55 2006
Return-Path: 
 <hadoop-dev-return-2112-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75843 invoked from network); 20 Jun 2006 20:20:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2006 20:20:55 -0000
Received: (qmail 30808 invoked by uid 500); 20 Jun 2006 20:20:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 30776 invoked by uid 500); 20 Jun 2006 20:20:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 30766 invoked by uid 99); 20 Jun 2006 20:20:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 13:20:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 13:20:54 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 25B43410007
	for <hadoop-dev@lucene.apache.org>; Tue, 20 Jun 2006 20:19:31 +0000 (GMT)
Message-ID: <31087173.1150834771151.JavaMail.jira@brutus>
Date: Tue, 20 Jun 2006 20:19:31 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-293) map reduce job fail without reporting
 a reason
In-Reply-To: <25233677.1149814169844.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-293?page=all ]

Owen O'Malley reassigned HADOOP-293:
------------------------------------

    Assign To: Owen O'Malley

> map reduce job fail without reporting a reason
> ----------------------------------------------
>
>          Key: HADOOP-293
>          URL: http://issues.apache.org/jira/browse/HADOOP-293
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.3.1
>     Reporter: Yoram Arnon
>     Assignee: Owen O'Malley
>      Fix For: 0.4.0

>
> Often I see in the WI reports of tasks failing without information reported as to the reason of the failure.
> It makes analysis and fixing the problem much harder.
> The reason for the failure should always be reported in the WI.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 20 20:29:54 2006
Return-Path: 
 <hadoop-dev-return-2113-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78313 invoked from network); 20 Jun 2006 20:29:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2006 20:29:54 -0000
Received: (qmail 38059 invoked by uid 500); 20 Jun 2006 20:29:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38028 invoked by uid 500); 20 Jun 2006 20:29:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38015 invoked by uid 99); 20 Jun 2006 20:29:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 13:29:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 13:29:53 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D040D410006
	for <hadoop-dev@lucene.apache.org>; Tue, 20 Jun 2006 20:28:29 +0000 (GMT)
Message-ID: <8159708.1150835309850.JavaMail.jira@brutus>
Date: Tue, 20 Jun 2006 20:28:29 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-311) dfs client timeout on read kills task
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

dfs client timeout on read kills task
-------------------------------------

         Key: HADOOP-311
         URL: http://issues.apache.org/jira/browse/HADOOP-311
     Project: Hadoop
        Type: Bug

  Components: dfs  
    Versions: 0.3.2    
    Reporter: Owen O'Malley
 Assigned to: Owen O'Malley 
     Fix For: 0.4.0


If a DFS client reads a file and times out, it immediately throws an exception to the client, which will kill the task.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 20 20:31:57 2006
Return-Path: 
 <hadoop-dev-return-2114-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 79778 invoked from network); 20 Jun 2006 20:31:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2006 20:31:57 -0000
Received: (qmail 41451 invoked by uid 500); 20 Jun 2006 20:31:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 41402 invoked by uid 500); 20 Jun 2006 20:31:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 41383 invoked by uid 99); 20 Jun 2006 20:31:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 13:31:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 13:31:53 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AE5A9410006
	for <hadoop-dev@lucene.apache.org>; Tue, 20 Jun 2006 20:30:30 +0000 (GMT)
Message-ID: <9017946.1150835430711.JavaMail.jira@brutus>
Date: Tue, 20 Jun 2006 20:30:30 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-311) dfs client timeout on read kills task
In-Reply-To: <8159708.1150835309850.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-311?page=all ]

Owen O'Malley updated HADOOP-311:
---------------------------------

    Attachment: dfs-read-retries.patch

This patch gives the client 2 retries to read the data before throwing the exception out to the client.

> dfs client timeout on read kills task
> -------------------------------------
>
>          Key: HADOOP-311
>          URL: http://issues.apache.org/jira/browse/HADOOP-311
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.3.2
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.4.0
>  Attachments: dfs-read-retries.patch
>
> If a DFS client reads a file and times out, it immediately throws an exception to the client, which will kill the task.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 21 00:28:43 2006
Return-Path: 
 <hadoop-dev-return-2115-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 56759 invoked from network); 21 Jun 2006 00:28:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 00:28:43 -0000
Received: (qmail 39614 invoked by uid 500); 21 Jun 2006 00:28:43 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 39581 invoked by uid 500); 21 Jun 2006 00:28:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 39570 invoked by uid 99); 21 Jun 2006 00:28:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 17:28:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of sutter@gmail.com designates
 64.233.162.197 as permitted sender)
Received: from [64.233.162.197] (HELO nz-out-0102.google.com) (64.233.162.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 17:28:41 -0700
Received: by nz-out-0102.google.com with SMTP id n29so35936nzf
        for <hadoop-dev@lucene.apache.org>;
 Tue, 20 Jun 2006 17:28:20 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=OXVQIE8wD0EIoYnHA5fbtLsb5YNUkpB3fTNZhglWLz6uWCp3YzBk9nqV+6l8M09dHxTK1d4ccGj7x7t/gu6t0RKtB53yymRoZ95YeDkzWDXPnaPQqz7tlPKoonju4XEi5U0BR9l+QWZASR70/V6MehOZUkSEaSedDNIiVu/q97k=
Received: by 10.36.135.5 with SMTP id i5mr37638nzd;
        Tue, 20 Jun 2006 17:28:20 -0700 (PDT)
Received: by 10.36.132.16 with HTTP; Tue, 20 Jun 2006 17:28:20 -0700 (PDT)
Message-ID: <e1d10fc00606201728w4bcff45aj5f29e9e3594d7f4b@mail.gmail.com>
Date: Tue, 20 Jun 2006 17:28:20 -0700
From: "Paul Sutter" <sutter@gmail.com>
To: hadoop-dev@lucene.apache.org
Subject: Re: [jira] Commented: (HADOOP-288) RFC: Efficient file caching
In-Reply-To: <16865937.1150834291570.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_Part_1273_15045402.1150849700646"
References: <6015694.1149730109866.JavaMail.jira@brutus>
	 <16865937.1150834291570.JavaMail.jira@brutus>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_1273_15045402.1150849700646
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Great, it sounds like you've really thought it through.

One last little suggestion: For case (1), It may be easier to provide a C
language API to DFS than to create all that caching infrastructure, which
may have some other benefits, but you certainly know what your needs are.

And yes, if you have lots of little files, DFS isnt the place for them.

On 6/20/06, Michel Tourn (JIRA) <jira@apache.org> wrote:
>
>    [
> http://issues.apache.org/jira/browse/HADOOP-288?page=comments#action_12416978]
>
> Michel Tourn commented on HADOOP-288:
> -------------------------------------
>
> Yes, staying within the context of DFS could be simpler.
> Note however that we have these requirements:
> 1. archive files are sometimes used by non-Java non-Hadoop MapReduce
> programs (using http://wiki.apache.org/lucene-
> hadoop/HadoopStreaming)
> 2. avoid repetitive expansion of the job jar and of other archives for
> each Task in the Job.
> 3. In case of many small files, avoid a per-file overhead for DFS and
> cache operations.
>
> Because of 1. the files must really be native OS files, not DFS files.
> For such general tools, the "common-denominator API" is only: the base
> directory for the cache.
>
> Today, unarchiving the job jar occurs in Hadoop, not in the MapRed
> application. But it is not cached.
> Because of 2. and 3. the unarchiving process itself must be cacheable.
> So unarchiving must occur in the Hadoop framework, not the MapRed
> application.
>
>
> > RFC: Efficient file caching
> > ---------------------------
> >
> >          Key: HADOOP-288
> >          URL: http://issues.apache.org/jira/browse/HADOOP-288
> >      Project: Hadoop
> >         Type: Bug
>
> >     Reporter: Michel Tourn
> >     Assignee: Michel Tourn
>
> >
> > RFC: Efficient file caching
> > (on Hadoop Task nodes, for benefit of MapReduce Tasks)
> > ------------------------------------------------------
> > We will start implementing this soon. Please provide feedback and
> improvements to this plan.
> > The header "Options:" indicates places where simple choices must be
> made.
> > Problem:
> > -------
> > o MapReduce tasks require access to additional out-of-band data
> ("dictionaries")
> > This out-of-band data is:
> > o in addition to the map/reduce inputs.
> > o large (1GB+)
> > o broadcast (same data is required on all the Task nodes)
> > o changes "infrequently", in particular:
> > oo it is always constant for all the Tasks in a Job.
> > oo it is often constant for a month at a time
> > oo it may be shared across team members
> > o sometimes used by pure-Java MapReduce programs
> > o sometimes used by non-Java MapReduce programs (using Hadoop-Streaming)
> > o (future) used by programs that use HDFS and Task-trackers but not
> MapReduce.
> > Existing Solutions to the problem:
> > ---------------------------------
> > These solutions are not good enough. The present proposal is to do Sol 1
> with caching.
> > Sol 1: Pure Hadoop: package the out-of-band data in the MapReduce Job
> jar file.
> > Sol 2: Non  Hadoop: for each task node run rsync from single source for
> data.
> > Sol 3: Non  Hadoop: use BitTorrent, etc.
> > Sol.1 is correct but slow for many reasons:
> >  The Job submitter must recreate a large jar(tar) file for every Job.
> >   (The jar contains both changing programs and stable dictionaries)
> >  The large Jar file must be propagated from the client to HDFS with
> >  a large replication factor.
> >  At the beginning of every Task, the Task tracker gets the job jar from
> HDFS
> >  and unjars it in the working directory. This can dominate task
> execution time.
> >
> > Sol.2 has nice properties but also some problems.
> >  It does not scale well with large clusters (many concurrent rsync read
> requests i.e. single-source broadcast)
> >  It assumes that Hadoop users can upload data using rsync to the cluster
> nodes. As a policy, this is not allowed.
> >  It requires rsync.
> >
> > Sol.3 alleviates the rsync scalability problems but
> >       It is a dependency on an external system.
> >       We want something simpler and more tightly integrated with Hadoop.
> >
> > Staging (uploading) out-of-band data:
> > ------------------------------------
> > The out-of-band data will often originate on the local filesystem of a
> user machine
> >  (i.e. a MapReduce job submitter)
> > Nevertheless it makes sense to use HDFS to store the original
> out-of-band data because:
> > o HDFS has (wide) replication. This enables scalable broadcast later.
> > o HDFS is an available channel to move data from clients to all task
> machines.
> > o HDFS is convenient as a shared location among Hadoop team members.
> > Accessing (downloading) out-of-band data:
> > ----------------------------------------
> > The non-Java MapReduce programs do not have or want[1] APIs for HDFS.
> > Instead these programs just want to access out-of-band data as
> >  local files at predefined paths.
> > ([1] Existing programs should be reusable with no changes.
> >  This is often possible bec. communication is over stdin/stdout.)
> > Job's jar file as a special case:
> > --------------------------------
> > One use case is to allow users to make the job jar itself cachable.
> > This is only useful in cases where NOTHING changes when a job is
> resubmitted
> >  (no MapRed code changes and no changes in shipped data)
> > This situation might occur with an 'extractor' job (gets data from an
> external source: like Nutch crawler)
> > Currently the Hadoop mapred-jar mechanism works in this way:
> >  the job jar data is unjarred in the "working directory" of the Task
> >  the jar contains both MapRed java code (added to classpath)
> > Cache synchronization:
> > ---------------------
> > The efficient implementation of the out-of-band data distribution
> > is mostly a cache synchronization problem.
> > A list of the various aspects where choices must be made follows.
> > Cache key:
> > ---------
> > How do you test that the cached copy is out-of-date?
> > Options:
> > 1. the archive/file timestamp
> > 2. the MD5 of the archive/file content
> > Comparing source and destination Timestamps is problematic bec. it
> assumes synchronized clocks.
> > Also there is no last-modif metadata in HDFS (for good reasons, like
> scalability of metadata ops)
> > Timestamps stored with the source ('last-propagate-time') do
> >  not require synchronized clocks, only locally monotonic time.
> > (and the worse which can happen at daylight-savings switch is a missed
> update or an extra-update)
> > The cache code could store a copy of the local timestamp
> > in the same way that it caches the value of the content hash along with
> the source data.
> >
> > Cachable unit:
> > -------------
> > Options: individual files or archives or both.
> > Note:
> > At the API level, directories will be processed recursively
> > (and the local FS directories will parallel HDFS directories)
> > So bulk operations are always possible using directories.
> > The question here is whether to handle archives as an additional bulk
> mechanism.
> > Archives are special because:
> > o unarchiving occurs transparently as part of the cache sync
> > o The cache key is computed on the archive and preserved although
> >   the archive itself is not preserved.
> > Supported archive format will be: tar (maybe tgz or compressed jar)
> > Archive detection test: by filename extension ".tar" or ".jar"
> > Suppose we don't handle archives as special files:
> > Pros:
> >  o less code, no discussion about which archive formats are supported
> >  o fine for large dictionary files. And when files are not large, user
> may as well
> >    put them in the Job jar as usual.
> >  o user code could always check and unarchive specific cached files
> >    (as a side-effect of MapRed task initialization)
> > Cons:
> >  o handling small files may be inefficient
> >   (multiple HDFS operations, multiple hash computation,
> >    one 'metadata' hash file along with each small file)
> >  o It will not be possible to handle the Job's jar file as a special
> case of caching
> > Cache isolation:
> > ---------------
> > In some cases it may be a problem if the cached HDFS files are updated
> while a Job is in progress:
> > The file may become unavailable for a short period of time and some
> tasks fail.
> > The file may change (atomically) and different tasks use a different
> version.
> > This isolation problem is not addressed in this proposal.
> > Standard solutions to the isolation problem are:
> > o Assume that Jobs and interfering cache updates won't occur
> concurrently.
> > o Put a version number in the HDFS file paths and refer to a hard-coded
> version in the Job code.
> > o Before running the MapRed job, run a non-distributed application that
> tests
> >   what is the latest available version of the out-of-band data.
> >   Then make this version available to the MapRed job.
> >   Two ways to do this.
> >   o either set a job property just-in-time:
> >     addCachePathPair("/mydata/v1234/", "localcache/mydata_latest");
> >     (see Job Configuration for meaning of this)
> >   o or publish the decision as an HDFS file containing the version.
> >     then rely on user code to read the version, and manually populate
> the cache:
> >     Cache.syncCache("/hdfs/path/fileordir", "relative/local/fileordir");
> >     (see MapReduce API for meaning of this)
> > Cache synchronization stages:
> > ----------------------------
> > There are two stages: Client-to-HDFS and HDFS-to-TaskTracker
> > o Client-to-HDFS stage.
> > Options: A simple option is to not do anything here, i.e. rely on the
> user.
> > This is a reasonable option given previous remarks on the role of HDFS:
> >  HDFS is a staging/publishing area and a natural shared location.
> > In particular this means that the system need not track
> > where the client files come from.
> > o HDFS-to-TaskTracker:
> > Client-to-HDFS synchronization (if done at all) should happen before
> this.
> > Then HDFS-to-TaskTracker synchronization must happen right before
> > the data is needed on a node.
> > MapReduce cache API:
> > -------------------
> > Options:
> > 1. No change in MapReduce framework code:
> > require the user to put this logic in map() (or reduce) function:
> >  in MyMapper constructor (or in map() on first record) user is asked to
> add:
> >
> >     Cache.syncCache("/hdfs/path/fileordir", "relative/local/fileordir");
> >     Cache.syncCache("..."); //etc.
> >
> > -----
> > 2. Put this logic in MapReduce framework and use Job properties to
> >    communicate the list of pairs (hdfs path; local path)
> >
> > Directories are processed recursively.
> > If archives are treated specially then they are unarchived on
> destination.
> >
> > MapReduce Job Configuration:
> > ---------------------------
> > Options:
> > with No change in MapReduce framework code (see above)
> >  no special Job configuration:
> >    it is up to the MapRed writer to configure and run the cache
> operations.
> > ---
> > with Logic in MapReduce framework (see above)
> >  some simple Job configuration
> > JobConf.addCachePathPair(String, String)
> > JobConf.addCachePathPair("/hdfs/path/fileordir",
> "relative/local/fileordir");
>
> --
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the administrators:
>   http://issues.apache.org/jira/secure/Administrators.jspa
> -
> For more information on JIRA, see:
>   http://www.atlassian.com/software/jira
>
>

------=_Part_1273_15045402.1150849700646--

From MAILER-DAEMON Wed Jun 21 05:00:55 2006
Return-Path: 
 <hadoop-dev-return-2116-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32476 invoked from network); 21 Jun 2006 05:00:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 05:00:55 -0000
Received: (qmail 68826 invoked by uid 500); 21 Jun 2006 05:00:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68794 invoked by uid 500); 21 Jun 2006 05:00:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68785 invoked by uid 99); 21 Jun 2006 05:00:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 22:00:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 22:00:54 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A9C97410005
	for <hadoop-dev@lucene.apache.org>; Wed, 21 Jun 2006 04:59:30 +0000 (GMT)
Message-ID: <2168354.1150865970692.JavaMail.jira@brutus>
Date: Wed, 21 Jun 2006 04:59:30 +0000 (GMT+00:00)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-210) Namenode not able to accept
 connections
In-Reply-To: <22832248.1147306205708.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-210?page=all ]

Devaraj Das updated HADOOP-210:
-------------------------------

    Attachment: nio.new.patch

This patch was tested by Owen.

> Namenode not able to accept connections
> ---------------------------------------
>
>          Key: HADOOP-210
>          URL: http://issues.apache.org/jira/browse/HADOOP-210
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>  Environment: linux
>     Reporter: Mahadev konar
>     Assignee: Sameer Paranjpye
>      Fix For: 0.4.0
>  Attachments: nio.new.patch, nio.patch, nio.patch
>
> I am running owen's random writer on a 627 node cluster (writing 10GB/node).  After running for a while (map 12% reduce 1%) I get the following error on the Namenode:
> Exception in thread "Server listener on port 60000" java.lang.OutOfMemoryError: unable to create new native thread
>         at java.lang.Thread.start0(Native Method)
>         at java.lang.Thread.start(Thread.java:574)
>         at org.apache.hadoop.ipc.Server$Listener.run(Server.java:105)
> After this, the namenode does not seem to be accepting connections from any of the clients. All the DFSClient calls get timeout. Here is a trace for one of them:
> java.net.SocketTimeoutException: timed out waiting for rpc response
> 	at org.apache.hadoop.ipc.Client.call(Client.java:305)
> 	at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:149)
> 	at org.apache.hadoop.dfs.$Proxy1.open(Unknown Source)
> 	at org.apache.hadoop.dfs.DFSClient$DFSInputStream.openInfo(DFSClient.java:419)
> 	at org.apache.hadoop.dfs.DFSClient$DFSInputStream.(DFSClient.java:406)
> 	at org.apache.hadoop.dfs.DFSClient.open(DFSClient.java:171)
> 	at org.apache.hadoop.dfs.DistributedFileSystem.openRaw(DistributedFileSystem.java:78)
> 	at org.apache.hadoop.fs.FSDataInputStream$Checker.(FSDataInputStream.java:46)
> 	at org.apache.hadoop.fs.FSDataInputStream.(FSDataInputStream.java:228)
> 	at org.apache.hadoop.fs.FileSystem.open(FileSystem.java:157)
> 	at org.apache.hadoop.mapred.TextInputFormat.getRecordReader(TextInputFormat.java:43)
> 	at org.apache.hadoop.mapred.MapTask.run(MapTask.java:105)
> 	at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:785).
> The namenode then has around 1% CPU utilization at this time (after the outofmemory exception has been thrown). I have profiled the NameNode and it seems to be using around a maixmum heap size of 57MB (which is not much). So, heap size does not seem to be a problem. It might be happening due to lack of Stack space? Any pointers?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 21 18:17:57 2006
Return-Path: 
 <hadoop-dev-return-2117-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 55778 invoked from network); 21 Jun 2006 18:17:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 18:17:57 -0000
Received: (qmail 99015 invoked by uid 500); 21 Jun 2006 18:17:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98993 invoked by uid 500); 21 Jun 2006 18:17:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98983 invoked by uid 99); 21 Jun 2006 18:17:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 11:17:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 11:17:55 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 99833410005
	for <hadoop-dev@lucene.apache.org>; Wed, 21 Jun 2006 18:16:30 +0000 (GMT)
Message-ID: <2273124.1150913790625.JavaMail.jira@brutus>
Date: Wed, 21 Jun 2006 18:16:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-210) Namenode not able to accept
 connections
In-Reply-To: <22832248.1147306205708.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-210?page=all ]
     
Doug Cutting resolved HADOOP-210:
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Devaraj!

> Namenode not able to accept connections
> ---------------------------------------
>
>          Key: HADOOP-210
>          URL: http://issues.apache.org/jira/browse/HADOOP-210
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>  Environment: linux
>     Reporter: Mahadev konar
>     Assignee: Sameer Paranjpye
>      Fix For: 0.4.0
>  Attachments: nio.new.patch, nio.patch, nio.patch
>
> I am running owen's random writer on a 627 node cluster (writing 10GB/node).  After running for a while (map 12% reduce 1%) I get the following error on the Namenode:
> Exception in thread "Server listener on port 60000" java.lang.OutOfMemoryError: unable to create new native thread
>         at java.lang.Thread.start0(Native Method)
>         at java.lang.Thread.start(Thread.java:574)
>         at org.apache.hadoop.ipc.Server$Listener.run(Server.java:105)
> After this, the namenode does not seem to be accepting connections from any of the clients. All the DFSClient calls get timeout. Here is a trace for one of them:
> java.net.SocketTimeoutException: timed out waiting for rpc response
> 	at org.apache.hadoop.ipc.Client.call(Client.java:305)
> 	at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:149)
> 	at org.apache.hadoop.dfs.$Proxy1.open(Unknown Source)
> 	at org.apache.hadoop.dfs.DFSClient$DFSInputStream.openInfo(DFSClient.java:419)
> 	at org.apache.hadoop.dfs.DFSClient$DFSInputStream.(DFSClient.java:406)
> 	at org.apache.hadoop.dfs.DFSClient.open(DFSClient.java:171)
> 	at org.apache.hadoop.dfs.DistributedFileSystem.openRaw(DistributedFileSystem.java:78)
> 	at org.apache.hadoop.fs.FSDataInputStream$Checker.(FSDataInputStream.java:46)
> 	at org.apache.hadoop.fs.FSDataInputStream.(FSDataInputStream.java:228)
> 	at org.apache.hadoop.fs.FileSystem.open(FileSystem.java:157)
> 	at org.apache.hadoop.mapred.TextInputFormat.getRecordReader(TextInputFormat.java:43)
> 	at org.apache.hadoop.mapred.MapTask.run(MapTask.java:105)
> 	at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:785).
> The namenode then has around 1% CPU utilization at this time (after the outofmemory exception has been thrown). I have profiled the NameNode and it seems to be using around a maixmum heap size of 57MB (which is not much). So, heap size does not seem to be a problem. It might be happening due to lack of Stack space? Any pointers?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 21 18:38:01 2006
Return-Path: 
 <hadoop-dev-return-2118-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 62341 invoked from network); 21 Jun 2006 18:38:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 18:38:01 -0000
Received: (qmail 31684 invoked by uid 500); 21 Jun 2006 18:37:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 31447 invoked by uid 500); 21 Jun 2006 18:37:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31436 invoked by uid 99); 21 Jun 2006 18:37:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 11:37:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 11:37:55 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 99E44410006
	for <hadoop-dev@lucene.apache.org>; Wed, 21 Jun 2006 18:36:30 +0000 (GMT)
Message-ID: <12166179.1150914990627.JavaMail.jira@brutus>
Date: Wed, 21 Jun 2006 18:36:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-311) dfs client timeout on read kills task
In-Reply-To: <8159708.1150835309850.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-311?page=all ]
     
Doug Cutting resolved HADOOP-311:
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Owen!

> dfs client timeout on read kills task
> -------------------------------------
>
>          Key: HADOOP-311
>          URL: http://issues.apache.org/jira/browse/HADOOP-311
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.3.2
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.4.0
>  Attachments: dfs-read-retries.patch
>
> If a DFS client reads a file and times out, it immediately throws an exception to the client, which will kill the task.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 21 18:56:58 2006
Return-Path: 
 <hadoop-dev-return-2119-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68766 invoked from network); 21 Jun 2006 18:56:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 18:56:58 -0000
Received: (qmail 60750 invoked by uid 500); 21 Jun 2006 18:56:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 60685 invoked by uid 500); 21 Jun 2006 18:56:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 60628 invoked by uid 99); 21 Jun 2006 18:56:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 11:56:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 11:56:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EB5BD41000A
	for <hadoop-dev@lucene.apache.org>; Wed, 21 Jun 2006 18:55:31 +0000 (GMT)
Message-ID: <13061881.1150916131961.JavaMail.jira@brutus>
Date: Wed, 21 Jun 2006 18:55:31 +0000 (GMT+00:00)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-312) Connections should not be cached
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Connections should not be cached 
---------------------------------

         Key: HADOOP-312
         URL: http://issues.apache.org/jira/browse/HADOOP-312
     Project: Hadoop
        Type: Improvement

  Components: ipc  
    Versions: 0.4.0    
    Reporter: Devaraj Das


Servers and clients (client include datanodes, tasktrackers, DFSClients & tasks) should not cache connections or maybe cache them for very short periods of time. Clients should set up & tear down connections to the servers everytime they need to contact the servers (including the heartbeats). If connection is cached, then reuse the existing connection for a few subsequent transactions until the connection expires. The heartbeat interval should be more so that many more clients (order of  tens of thousands) can be accomodated within 1 heartbeat interval.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 21 20:16:04 2006
Return-Path: 
 <hadoop-dev-return-2120-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 28463 invoked from network); 21 Jun 2006 20:16:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 20:16:04 -0000
Received: (qmail 41543 invoked by uid 500); 21 Jun 2006 20:16:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 41386 invoked by uid 500); 21 Jun 2006 20:16:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 41376 invoked by uid 99); 21 Jun 2006 20:16:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 13:16:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 13:16:02 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 813AE410009
	for <hadoop-dev@lucene.apache.org>; Wed, 21 Jun 2006 20:14:32 +0000 (GMT)
Message-ID: <12604187.1150920872459.JavaMail.jira@brutus>
Date: Wed, 21 Jun 2006 20:14:32 +0000 (GMT+00:00)
From: "Andrzej Bialecki  (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-310) Additional constructor requested in
 BytesWritable
In-Reply-To: <20550379.1150827209817.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-310?page=comments#action_12417172 ] 

Andrzej Bialecki  commented on HADOOP-310:
------------------------------------------

Perhaps a more general constructor, similar to the ones used in many other places, would be better:

/**
   * Create a BytesWritable using a part of the byte array as the initial value.
   */
  public BytesWritable(byte[] bytes, int offset, int length) {
    ....
  }

This way it would satisfy your requirement, and perhaps help to avoid many other cases of copying ...


> Additional constructor requested in BytesWritable
> -------------------------------------------------
>
>          Key: HADOOP-310
>          URL: http://issues.apache.org/jira/browse/HADOOP-310
>      Project: Hadoop
>         Type: Improvement

>   Components: io
>     Reporter: paul sutter
>     Priority: Minor

>
> It would be grand if BytesWritable.java had an additional constructor as below. This allows me to use the BytesWritable class without doing a buffer copy, since we have a less-than-fully-utilized byte array holding our key.
> Thanks!
>  
>  /**
>    * Create a BytesWritable using the byte array as the initial value.
>    * @param bytes This array becomes the backing storage for the object.
>    */
>   public BytesWritable(byte[] bytes, int size) {
>     this.bytes = bytes;
>     this.size = size;
>   }
>   

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 21 20:28:12 2006
Return-Path: 
 <hadoop-dev-return-2121-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32920 invoked from network); 21 Jun 2006 20:28:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 20:28:12 -0000
Received: (qmail 64071 invoked by uid 500); 21 Jun 2006 20:27:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64034 invoked by uid 500); 21 Jun 2006 20:27:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64025 invoked by uid 99); 21 Jun 2006 20:27:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 13:27:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 13:27:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1267B41000A
	for <hadoop-dev@lucene.apache.org>; Wed, 21 Jun 2006 20:26:32 +0000 (GMT)
Message-ID: <4665977.1150921592072.JavaMail.jira@brutus>
Date: Wed, 21 Jun 2006 20:26:32 +0000 (GMT+00:00)
From: "paul sutter (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-310) Additional constructor requested in
 BytesWritable
In-Reply-To: <20550379.1150827209817.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-310?page=comments#action_12417176 ] 

paul sutter commented on HADOOP-310:
------------------------------------


That would be even better... but would require a rewrite and retest of the rest of the class (the class already supports a length, but not an offset). 

> Additional constructor requested in BytesWritable
> -------------------------------------------------
>
>          Key: HADOOP-310
>          URL: http://issues.apache.org/jira/browse/HADOOP-310
>      Project: Hadoop
>         Type: Improvement

>   Components: io
>     Reporter: paul sutter
>     Priority: Minor

>
> It would be grand if BytesWritable.java had an additional constructor as below. This allows me to use the BytesWritable class without doing a buffer copy, since we have a less-than-fully-utilized byte array holding our key.
> Thanks!
>  
>  /**
>    * Create a BytesWritable using the byte array as the initial value.
>    * @param bytes This array becomes the backing storage for the object.
>    */
>   public BytesWritable(byte[] bytes, int size) {
>     this.bytes = bytes;
>     this.size = size;
>   }
>   

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 21 20:35:57 2006
Return-Path: 
 <hadoop-dev-return-2122-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 36778 invoked from network); 21 Jun 2006 20:35:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 20:35:57 -0000
Received: (qmail 76475 invoked by uid 500); 21 Jun 2006 20:35:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 76441 invoked by uid 500); 21 Jun 2006 20:35:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 76432 invoked by uid 99); 21 Jun 2006 20:35:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 13:35:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 13:35:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 66A39410007
	for <hadoop-dev@lucene.apache.org>; Wed, 21 Jun 2006 20:34:31 +0000 (GMT)
Message-ID: <14609747.1150922071414.JavaMail.jira@brutus>
Date: Wed, 21 Jun 2006 20:34:31 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-310) Additional constructor requested in
 BytesWritable
In-Reply-To: <20550379.1150827209817.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-310?page=comments#action_12417177 ] 

Owen O'Malley commented on HADOOP-310:
--------------------------------------

I'm ok with either change. Obviously introducing an offset is a bigger change. Clearly if the BytesWritable needs to grow, the offset should go to 0. Equivalently, the offset should not be saved as part of the serialization.

> Additional constructor requested in BytesWritable
> -------------------------------------------------
>
>          Key: HADOOP-310
>          URL: http://issues.apache.org/jira/browse/HADOOP-310
>      Project: Hadoop
>         Type: Improvement

>   Components: io
>     Reporter: paul sutter
>     Priority: Minor

>
> It would be grand if BytesWritable.java had an additional constructor as below. This allows me to use the BytesWritable class without doing a buffer copy, since we have a less-than-fully-utilized byte array holding our key.
> Thanks!
>  
>  /**
>    * Create a BytesWritable using the byte array as the initial value.
>    * @param bytes This array becomes the backing storage for the object.
>    */
>   public BytesWritable(byte[] bytes, int size) {
>     this.bytes = bytes;
>     this.size = size;
>   }
>   

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 21 23:32:56 2006
Return-Path: 
 <hadoop-dev-return-2123-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8872 invoked from network); 21 Jun 2006 23:32:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 23:32:56 -0000
Received: (qmail 68286 invoked by uid 500); 21 Jun 2006 23:32:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68136 invoked by uid 500); 21 Jun 2006 23:32:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68127 invoked by uid 99); 21 Jun 2006 23:32:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 16:32:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 16:32:55 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DA5CC410006
	for <hadoop-dev@lucene.apache.org>; Wed, 21 Jun 2006 23:31:29 +0000 (GMT)
Message-ID: <10995504.1150932689891.JavaMail.jira@brutus>
Date: Wed, 21 Jun 2006 23:31:29 +0000 (GMT+00:00)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-313) running a reduce task standalone
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

running a reduce task standalone
--------------------------------

         Key: HADOOP-313
         URL: http://issues.apache.org/jira/browse/HADOOP-313
     Project: Hadoop
        Type: Bug

    Reporter: Michel Tourn
 Attachments: sareduce.patch

This is a tool to reproduce problems and to run unit tests involving a reduce task.
You just give it a reduce directory on the command line.

Usage: java org.apache.hadoop.mapred.StandaloneReduceTask <taskdir> [<limitmaps>]
taskdir name encodes: task_<jobid>_r_<partition>_<attempt>
taskdir contains job.xml and one or more input files named: map_<dddd>.out
You should run with the same -Xmx option as the TaskTracker child JVM



-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 21 23:32:57 2006
Return-Path: 
 <hadoop-dev-return-2124-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8906 invoked from network); 21 Jun 2006 23:32:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 23:32:57 -0000
Received: (qmail 68455 invoked by uid 500); 21 Jun 2006 23:32:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68304 invoked by uid 500); 21 Jun 2006 23:32:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68294 invoked by uid 99); 21 Jun 2006 23:32:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 16:32:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 16:32:55 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C9EA2410005
	for <hadoop-dev@lucene.apache.org>; Wed, 21 Jun 2006 23:31:30 +0000 (GMT)
Message-ID: <1620458.1150932690824.JavaMail.jira@brutus>
Date: Wed, 21 Jun 2006 23:31:30 +0000 (GMT+00:00)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-313) running a reduce task standalone
In-Reply-To: <10995504.1150932689891.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-313?page=all ]

Michel Tourn reassigned HADOOP-313:
-----------------------------------

    Assign To: Michel Tourn

> running a reduce task standalone
> --------------------------------
>
>          Key: HADOOP-313
>          URL: http://issues.apache.org/jira/browse/HADOOP-313
>      Project: Hadoop
>         Type: Bug

>     Reporter: Michel Tourn
>     Assignee: Michel Tourn
>  Attachments: sareduce.patch
>
> This is a tool to reproduce problems and to run unit tests involving a reduce task.
> You just give it a reduce directory on the command line.
> Usage: java org.apache.hadoop.mapred.StandaloneReduceTask <taskdir> [<limitmaps>]
> taskdir name encodes: task_<jobid>_r_<partition>_<attempt>
> taskdir contains job.xml and one or more input files named: map_<dddd>.out
> You should run with the same -Xmx option as the TaskTracker child JVM

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 21 23:32:58 2006
Return-Path: 
 <hadoop-dev-return-2125-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8948 invoked from network); 21 Jun 2006 23:32:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 23:32:58 -0000
Received: (qmail 68499 invoked by uid 500); 21 Jun 2006 23:32:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68479 invoked by uid 500); 21 Jun 2006 23:32:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68470 invoked by uid 99); 21 Jun 2006 23:32:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 16:32:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 16:32:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B6D6F410007
	for <hadoop-dev@lucene.apache.org>; Wed, 21 Jun 2006 23:31:31 +0000 (GMT)
Message-ID: <136513.1150932691746.JavaMail.jira@brutus>
Date: Wed, 21 Jun 2006 23:31:31 +0000 (GMT+00:00)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-313) running a reduce task standalone
In-Reply-To: <10995504.1150932689891.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-313?page=all ]

Michel Tourn updated HADOOP-313:
--------------------------------

    Attachment: sareduce.patch

> running a reduce task standalone
> --------------------------------
>
>          Key: HADOOP-313
>          URL: http://issues.apache.org/jira/browse/HADOOP-313
>      Project: Hadoop
>         Type: Bug

>     Reporter: Michel Tourn
>     Assignee: Michel Tourn
>  Attachments: sareduce.patch
>
> This is a tool to reproduce problems and to run unit tests involving a reduce task.
> You just give it a reduce directory on the command line.
> Usage: java org.apache.hadoop.mapred.StandaloneReduceTask <taskdir> [<limitmaps>]
> taskdir name encodes: task_<jobid>_r_<partition>_<attempt>
> taskdir contains job.xml and one or more input files named: map_<dddd>.out
> You should run with the same -Xmx option as the TaskTracker child JVM

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun 22 15:51:57 2006
Return-Path: 
 <hadoop-dev-return-2126-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68082 invoked from network); 22 Jun 2006 15:51:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 15:51:57 -0000
Received: (qmail 86396 invoked by uid 500); 22 Jun 2006 15:51:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86365 invoked by uid 500); 22 Jun 2006 15:51:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86351 invoked by uid 99); 22 Jun 2006 15:51:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 08:51:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 08:51:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D8AEC410008
	for <hadoop-dev@lucene.apache.org>; Thu, 22 Jun 2006 15:50:29 +0000 (GMT)
Message-ID: <27628206.1150991429884.JavaMail.jira@brutus>
Date: Thu, 22 Jun 2006 15:50:29 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-314) remove the append phase in sorting the
 reduce inputs
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

remove the append phase in sorting the reduce inputs
----------------------------------------------------

         Key: HADOOP-314
         URL: http://issues.apache.org/jira/browse/HADOOP-314
     Project: Hadoop
        Type: Improvement

  Components: mapred  
    Versions: 0.3.2    
    Reporter: Owen O'Malley
 Assigned to: Owen O'Malley 
     Fix For: 0.4.0
 Attachments: no-append.patch

This patch creates a new interface to SequenceFile.sort that allows both a list of files to be passed as input and specifying whether the inputs should be deleted. The ReduceTask is changed to pass the list of map inputs and to delete them as they are sorted.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun 22 15:51:58 2006
Return-Path: 
 <hadoop-dev-return-2127-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68130 invoked from network); 22 Jun 2006 15:51:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 15:51:58 -0000
Received: (qmail 86562 invoked by uid 500); 22 Jun 2006 15:51:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86513 invoked by uid 500); 22 Jun 2006 15:51:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86452 invoked by uid 99); 22 Jun 2006 15:51:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 08:51:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 08:51:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BC8DC41000A
	for <hadoop-dev@lucene.apache.org>; Thu, 22 Jun 2006 15:50:30 +0000 (GMT)
Message-ID: <2417846.1150991430769.JavaMail.jira@brutus>
Date: Thu, 22 Jun 2006 15:50:30 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-314) remove the append phase in sorting the
 reduce inputs
In-Reply-To: <27628206.1150991429884.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-314?page=all ]

Owen O'Malley updated HADOOP-314:
---------------------------------

    Attachment: no-append.patch

> remove the append phase in sorting the reduce inputs
> ----------------------------------------------------
>
>          Key: HADOOP-314
>          URL: http://issues.apache.org/jira/browse/HADOOP-314
>      Project: Hadoop
>         Type: Improvement

>   Components: mapred
>     Versions: 0.3.2
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.4.0
>  Attachments: no-append.patch
>
> This patch creates a new interface to SequenceFile.sort that allows both a list of files to be passed as input and specifying whether the inputs should be deleted. The ReduceTask is changed to pass the list of map inputs and to delete them as they are sorted.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun 22 18:16:57 2006
Return-Path: 
 <hadoop-dev-return-2128-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 60408 invoked from network); 22 Jun 2006 18:16:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 18:16:57 -0000
Received: (qmail 78187 invoked by uid 500); 22 Jun 2006 18:16:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 78166 invoked by uid 500); 22 Jun 2006 18:16:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 78157 invoked by uid 99); 22 Jun 2006 18:16:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 11:16:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 11:16:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DBE52410007
	for <hadoop-dev@lucene.apache.org>; Thu, 22 Jun 2006 18:15:29 +0000 (GMT)
Message-ID: <1381008.1151000129897.JavaMail.jira@brutus>
Date: Thu, 22 Jun 2006 18:15:29 +0000 (GMT+00:00)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-315) bobo Exception in TestRPC
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

bobo Exception in TestRPC
-------------------------

         Key: HADOOP-315
         URL: http://issues.apache.org/jira/browse/HADOOP-315
     Project: Hadoop
        Type: Bug

  Components: ipc  
    Versions: 0.3.2    
    Reporter: Konstantin Shvachko
    Priority: Minor


We are getting a bobo exceptions in TestRPC.
It looks like the test should fail in this case after throwing bobo.
By the way, does anybody know whether "bobo" means anything?

error: java.io.IOException: bobo
java.io.IOException: bobo
    at org.apache.hadoop.ipc.TestRPC$TestImpl.error(TestRPC.java:84)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:585)
    at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:243)
    at org.apache.hadoop.ipc.Server$Handler.run(Server.java:467)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun 22 18:29:57 2006
Return-Path: 
 <hadoop-dev-return-2129-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 66034 invoked from network); 22 Jun 2006 18:29:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 18:29:57 -0000
Received: (qmail 1835 invoked by uid 500); 22 Jun 2006 18:29:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 1686 invoked by uid 500); 22 Jun 2006 18:29:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 1674 invoked by uid 99); 22 Jun 2006 18:29:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 11:29:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 11:29:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CAFF7410008
	for <hadoop-dev@lucene.apache.org>; Thu, 22 Jun 2006 18:28:29 +0000 (GMT)
Message-ID: <24793551.1151000909828.JavaMail.jira@brutus>
Date: Thu, 22 Jun 2006 18:28:29 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-316) job tracker has a deadlock
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

job tracker has a deadlock
--------------------------

         Key: HADOOP-316
         URL: http://issues.apache.org/jira/browse/HADOOP-316
     Project: Hadoop
        Type: Bug

  Components: mapred  
    Versions: 0.3.2    
    Reporter: Owen O'Malley
 Assigned to: Owen O'Malley 
     Fix For: 0.4.0


The JobTracker has a deadlock in the ExpireLaunchingTasks stuff.

In particular, it locks the JobTracker and launchingTasks inconsistently.

This deadlocks has been observed in the wild and causes the JobTracker to stop responding to rpc and http (other than the root page).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun 22 18:31:58 2006
Return-Path: 
 <hadoop-dev-return-2130-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67268 invoked from network); 22 Jun 2006 18:31:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 18:31:58 -0000
Received: (qmail 6491 invoked by uid 500); 22 Jun 2006 18:31:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 6470 invoked by uid 500); 22 Jun 2006 18:31:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 6461 invoked by uid 99); 22 Jun 2006 18:31:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 11:31:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 11:31:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9C920410008
	for <hadoop-dev@lucene.apache.org>; Thu, 22 Jun 2006 18:30:30 +0000 (GMT)
Message-ID: <624004.1151001030637.JavaMail.jira@brutus>
Date: Thu, 22 Jun 2006 18:30:30 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-316) job tracker has a deadlock
In-Reply-To: <24793551.1151000909828.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-316?page=all ]

Owen O'Malley updated HADOOP-316:
---------------------------------

    Attachment: fix-expire-task-deadlock.patch

Make sure that the JobTracker is locked first.

> job tracker has a deadlock
> --------------------------
>
>          Key: HADOOP-316
>          URL: http://issues.apache.org/jira/browse/HADOOP-316
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.3.2
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.4.0
>  Attachments: fix-expire-task-deadlock.patch
>
> The JobTracker has a deadlock in the ExpireLaunchingTasks stuff.
> In particular, it locks the JobTracker and launchingTasks inconsistently.
> This deadlocks has been observed in the wild and causes the JobTracker to stop responding to rpc and http (other than the root page).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun 22 18:54:58 2006
Return-Path: 
 <hadoop-dev-return-2131-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 81139 invoked from network); 22 Jun 2006 18:54:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 18:54:58 -0000
Received: (qmail 52925 invoked by uid 500); 22 Jun 2006 18:54:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 52904 invoked by uid 500); 22 Jun 2006 18:54:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 52895 invoked by uid 99); 22 Jun 2006 18:54:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 11:54:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 11:54:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 721D9410007
	for <hadoop-dev@lucene.apache.org>; Thu, 22 Jun 2006 18:53:30 +0000 (GMT)
Message-ID: <24457544.1151002410464.JavaMail.jira@brutus>
Date: Thu, 22 Jun 2006 18:53:30 +0000 (GMT+00:00)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-317) "connection was forcibly closed"
 Exception in RPC on Windows
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

"connection was forcibly closed" Exception in RPC on Windows
------------------------------------------------------------

         Key: HADOOP-317
         URL: http://issues.apache.org/jira/browse/HADOOP-317
     Project: Hadoop
        Type: Bug

  Components: ipc  
    Versions: 0.3.2    
    Reporter: Konstantin Shvachko


I see a lot of exceptions caused by RPC in the nightly build on Windows.
The most often is thrown by RPC on the namenode, saying

06/06/21 19:28:36 INFO ipc.Server: Server listener on port 7017: readAndProcess threw exception java.io.IOException: An existing connection was forcibly closed by the remote host. Count of bytes read: 0
java.io.IOException: An existing connection was forcibly closed by the remote host
    at sun.nio.ch.SocketDispatcher.read0(Native Method)
    at sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:25)
    at sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:233)
    at sun.nio.ch.IOUtil.read(IOUtil.java:200)
    at sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:207)
    at org.apache.hadoop.ipc.Server$Connection.readAndProcess(Server.java:374)
    at org.apache.hadoop.ipc.Server$Listener.doRead(Server.java:289)
    at org.apache.hadoop.ipc.Server$Listener.run(Server.java:210)

I am not sure how serious that is, since the tests do not fail, and the name node does not crash.
Besides the RPC we should probably also check that the unit tests actually fail if they need to.


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun 22 19:15:58 2006
Return-Path: 
 <hadoop-dev-return-2132-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86501 invoked from network); 22 Jun 2006 19:15:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 19:15:58 -0000
Received: (qmail 2845 invoked by uid 500); 22 Jun 2006 19:15:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 2797 invoked by uid 500); 22 Jun 2006 19:15:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 2788 invoked by uid 99); 22 Jun 2006 19:15:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 12:15:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 12:15:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id ADD79410007
	for <hadoop-dev@lucene.apache.org>; Thu, 22 Jun 2006 19:14:30 +0000 (GMT)
Message-ID: <29162692.1151003670709.JavaMail.jira@brutus>
Date: Thu, 22 Jun 2006 19:14:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-314) remove the append phase in sorting
 the reduce inputs
In-Reply-To: <27628206.1150991429884.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-314?page=all ]
     
Doug Cutting resolved HADOOP-314:
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Owen!

> remove the append phase in sorting the reduce inputs
> ----------------------------------------------------
>
>          Key: HADOOP-314
>          URL: http://issues.apache.org/jira/browse/HADOOP-314
>      Project: Hadoop
>         Type: Improvement

>   Components: mapred
>     Versions: 0.3.2
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.4.0
>  Attachments: no-append.patch
>
> This patch creates a new interface to SequenceFile.sort that allows both a list of files to be passed as input and specifying whether the inputs should be deleted. The ReduceTask is changed to pass the list of map inputs and to delete them as they are sorted.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun 22 19:39:58 2006
Return-Path: 
 <hadoop-dev-return-2133-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 14663 invoked from network); 22 Jun 2006 19:39:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 19:39:58 -0000
Received: (qmail 56224 invoked by uid 500); 22 Jun 2006 19:39:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 56198 invoked by uid 500); 22 Jun 2006 19:39:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 56189 invoked by uid 99); 22 Jun 2006 19:39:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 12:39:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 12:39:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B5CDA410007
	for <hadoop-dev@lucene.apache.org>; Thu, 22 Jun 2006 19:38:30 +0000 (GMT)
Message-ID: <2430823.1151005110741.JavaMail.jira@brutus>
Date: Thu, 22 Jun 2006 19:38:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-316) job tracker has a deadlock
In-Reply-To: <24793551.1151000909828.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-316?page=all ]
     
Doug Cutting resolved HADOOP-316:
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Owen!

> job tracker has a deadlock
> --------------------------
>
>          Key: HADOOP-316
>          URL: http://issues.apache.org/jira/browse/HADOOP-316
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.3.2
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.4.0
>  Attachments: fix-expire-task-deadlock.patch
>
> The JobTracker has a deadlock in the ExpireLaunchingTasks stuff.
> In particular, it locks the JobTracker and launchingTasks inconsistently.
> This deadlocks has been observed in the wild and causes the JobTracker to stop responding to rpc and http (other than the root page).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun 22 19:42:00 2006
Return-Path: 
 <hadoop-dev-return-2134-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 15454 invoked from network); 22 Jun 2006 19:42:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 19:42:00 -0000
Received: (qmail 58713 invoked by uid 500); 22 Jun 2006 19:41:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58689 invoked by uid 500); 22 Jun 2006 19:41:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58680 invoked by uid 99); 22 Jun 2006 19:41:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 12:41:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 12:41:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0224F410007
	for <hadoop-dev@lucene.apache.org>; Thu, 22 Jun 2006 19:40:32 +0000 (GMT)
Message-ID: <11553134.1151005232005.JavaMail.jira@brutus>
Date: Thu, 22 Jun 2006 19:40:32 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-313) running a reduce task standalone
In-Reply-To: <10995504.1150932689891.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-313?page=comments#action_12417356 ] 

Doug Cutting commented on HADOOP-313:
-------------------------------------

Shouldn't this go into the "test" tree rather than the core?

> running a reduce task standalone
> --------------------------------
>
>          Key: HADOOP-313
>          URL: http://issues.apache.org/jira/browse/HADOOP-313
>      Project: Hadoop
>         Type: Bug

>     Reporter: Michel Tourn
>     Assignee: Michel Tourn
>  Attachments: sareduce.patch
>
> This is a tool to reproduce problems and to run unit tests involving a reduce task.
> You just give it a reduce directory on the command line.
> Usage: java org.apache.hadoop.mapred.StandaloneReduceTask <taskdir> [<limitmaps>]
> taskdir name encodes: task_<jobid>_r_<partition>_<attempt>
> taskdir contains job.xml and one or more input files named: map_<dddd>.out
> You should run with the same -Xmx option as the TaskTracker child JVM

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun 22 20:16:57 2006
Return-Path: 
 <hadoop-dev-return-2135-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 28982 invoked from network); 22 Jun 2006 20:16:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 20:16:57 -0000
Received: (qmail 5075 invoked by uid 500); 22 Jun 2006 20:16:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 5047 invoked by uid 500); 22 Jun 2006 20:16:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 5038 invoked by uid 99); 22 Jun 2006 20:16:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 13:16:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 13:16:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CA5A2410007
	for <hadoop-dev@lucene.apache.org>; Thu, 22 Jun 2006 20:15:29 +0000 (GMT)
Message-ID: <3721347.1151007329825.JavaMail.jira@brutus>
Date: Thu, 22 Jun 2006 20:15:29 +0000 (GMT+00:00)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-318) Progress in writing a DFS file does
 not count towards Job progress and can make the task timeout
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Progress in writing a DFS file does not count towards Job progress and can make the task timeout
------------------------------------------------------------------------------------------------

         Key: HADOOP-318
         URL: http://issues.apache.org/jira/browse/HADOOP-318
     Project: Hadoop
        Type: Bug

  Components: mapred  
    Versions: 0.3.2    
 Environment: all, but especially on big busy clusters
    Reporter: Milind Bhandarkar
 Assigned to: Milind Bhandarkar 
     Fix For: 0.4.0


When a task writes to DFS file, depending on how busy the cluster is, it can timeout after 10 minutes by default, because the progress towards writing a DFS file does not count as progress of the task. The solution (patch is forthcoming) is to provide a way to callback reporter to report task progress from DFSOutputStream.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun 22 20:18:58 2006
Return-Path: 
 <hadoop-dev-return-2136-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 29544 invoked from network); 22 Jun 2006 20:18:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 20:18:58 -0000
Received: (qmail 8929 invoked by uid 500); 22 Jun 2006 20:18:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 8903 invoked by uid 500); 22 Jun 2006 20:18:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 8894 invoked by uid 99); 22 Jun 2006 20:18:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 13:18:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 13:18:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 94707410007
	for <hadoop-dev@lucene.apache.org>; Thu, 22 Jun 2006 20:17:30 +0000 (GMT)
Message-ID: <26784786.1151007450605.JavaMail.jira@brutus>
Date: Thu, 22 Jun 2006 20:17:30 +0000 (GMT+00:00)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-318) Progress in writing a DFS file does
 not count towards Job progress and can make the task timeout
In-Reply-To: <3721347.1151007329825.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-318?page=all ]

Milind Bhandarkar updated HADOOP-318:
-------------------------------------

    Attachment: hadoop-latency.patch

Patch for the dfs file-writing progress reporting.

> Progress in writing a DFS file does not count towards Job progress and can make the task timeout
> ------------------------------------------------------------------------------------------------
>
>          Key: HADOOP-318
>          URL: http://issues.apache.org/jira/browse/HADOOP-318
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.3.2
>  Environment: all, but especially on big busy clusters
>     Reporter: Milind Bhandarkar
>     Assignee: Milind Bhandarkar
>      Fix For: 0.4.0
>  Attachments: hadoop-latency.patch
>
> When a task writes to DFS file, depending on how busy the cluster is, it can timeout after 10 minutes by default, because the progress towards writing a DFS file does not count as progress of the task. The solution (patch is forthcoming) is to provide a way to callback reporter to report task progress from DFSOutputStream.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun 22 20:23:58 2006
Return-Path: 
 <hadoop-dev-return-2137-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31388 invoked from network); 22 Jun 2006 20:23:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 20:23:58 -0000
Received: (qmail 15682 invoked by uid 500); 22 Jun 2006 20:23:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15657 invoked by uid 500); 22 Jun 2006 20:23:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 15648 invoked by uid 99); 22 Jun 2006 20:23:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 13:23:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 13:23:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 98A2B410005
	for <hadoop-dev@lucene.apache.org>; Thu, 22 Jun 2006 20:22:30 +0000 (GMT)
Message-ID: <16339361.1151007750622.JavaMail.jira@brutus>
Date: Thu, 22 Jun 2006 20:22:30 +0000 (GMT+00:00)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-318) Progress in writing a DFS file does
 not count towards Job progress and can make the task timeout
In-Reply-To: <3721347.1151007329825.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-318?page=all ]

Milind Bhandarkar updated HADOOP-318:
-------------------------------------

    Attachment: hadoop-latency-new.patch

After svn update, the earlier patch failed to compile.
I have attached a new patch now.

> Progress in writing a DFS file does not count towards Job progress and can make the task timeout
> ------------------------------------------------------------------------------------------------
>
>          Key: HADOOP-318
>          URL: http://issues.apache.org/jira/browse/HADOOP-318
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.3.2
>  Environment: all, but especially on big busy clusters
>     Reporter: Milind Bhandarkar
>     Assignee: Milind Bhandarkar
>      Fix For: 0.4.0
>  Attachments: hadoop-latency-new.patch, hadoop-latency.patch
>
> When a task writes to DFS file, depending on how busy the cluster is, it can timeout after 10 minutes by default, because the progress towards writing a DFS file does not count as progress of the task. The solution (patch is forthcoming) is to provide a way to callback reporter to report task progress from DFSOutputStream.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun 22 20:52:06 2006
Return-Path: 
 <hadoop-dev-return-2138-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 39279 invoked from network); 22 Jun 2006 20:52:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 20:52:06 -0000
Received: (qmail 54436 invoked by uid 500); 22 Jun 2006 20:51:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 54358 invoked by uid 500); 22 Jun 2006 20:51:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 54335 invoked by uid 99); 22 Jun 2006 20:51:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 13:51:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 13:51:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CDC26410007
	for <hadoop-dev@lucene.apache.org>; Thu, 22 Jun 2006 20:50:29 +0000 (GMT)
Message-ID: <17005151.1151009429839.JavaMail.jira@brutus>
Date: Thu, 22 Jun 2006 20:50:29 +0000 (GMT+00:00)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-319) FileSystem "close" does not remove the
 closed fs from the fs map
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

FileSystem "close" does not remove the closed fs from the fs map
----------------------------------------------------------------

         Key: HADOOP-319
         URL: http://issues.apache.org/jira/browse/HADOOP-319
     Project: Hadoop
        Type: Bug

  Components: fs  
    Versions: 0.3.2    
    Reporter: Hairong Kuang
 Assigned to: Hairong Kuang 
     Fix For: 0.4.0


The close methods of both DistributedFileSystem and LocalFileSystem do not remove the closed file system from the fs map in FileSystem. As a result, a subsequent call to FileSystem.getNamed may return the handle to the closed file system and receive errors if perform any operation on the fs handle.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun 22 20:53:58 2006
Return-Path: 
 <hadoop-dev-return-2139-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40236 invoked from network); 22 Jun 2006 20:53:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 20:53:58 -0000
Received: (qmail 60083 invoked by uid 500); 22 Jun 2006 20:53:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 60046 invoked by uid 500); 22 Jun 2006 20:53:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 60021 invoked by uid 99); 22 Jun 2006 20:53:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 13:53:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 13:53:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E425F410007
	for <hadoop-dev@lucene.apache.org>; Thu, 22 Jun 2006 20:52:30 +0000 (GMT)
Message-ID: <17519486.1151009550931.JavaMail.jira@brutus>
Date: Thu, 22 Jun 2006 20:52:30 +0000 (GMT+00:00)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-319) FileSystem "close" does not remove the
 closed fs from the fs map
In-Reply-To: <17005151.1151009429839.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-319?page=all ]

Hairong Kuang updated HADOOP-319:
---------------------------------

    Attachment: fs_close.patch

Here is the patch.

> FileSystem "close" does not remove the closed fs from the fs map
> ----------------------------------------------------------------
>
>          Key: HADOOP-319
>          URL: http://issues.apache.org/jira/browse/HADOOP-319
>      Project: Hadoop
>         Type: Bug

>   Components: fs
>     Versions: 0.3.2
>     Reporter: Hairong Kuang
>     Assignee: Hairong Kuang
>      Fix For: 0.4.0
>  Attachments: fs_close.patch
>
> The close methods of both DistributedFileSystem and LocalFileSystem do not remove the closed file system from the fs map in FileSystem. As a result, a subsequent call to FileSystem.getNamed may return the handle to the closed file system and receive errors if perform any operation on the fs handle.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun 22 21:05:00 2006
Return-Path: 
 <hadoop-dev-return-2140-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43308 invoked from network); 22 Jun 2006 21:05:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 21:05:00 -0000
Received: (qmail 72383 invoked by uid 500); 22 Jun 2006 21:04:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72337 invoked by uid 500); 22 Jun 2006 21:04:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72318 invoked by uid 99); 22 Jun 2006 21:04:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 14:04:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 14:04:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 06837410005
	for <hadoop-dev@lucene.apache.org>; Thu, 22 Jun 2006 21:03:31 +0000 (GMT)
Message-ID: <15005582.1151010211023.JavaMail.jira@brutus>
Date: Thu, 22 Jun 2006 21:03:31 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-315) bobo Exception in TestRPC
In-Reply-To: <1381008.1151000129897.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-315?page=comments#action_12417365 ] 

Doug Cutting commented on HADOOP-315:
-------------------------------------

This is normal.  This is testing the RPC error handler.  RPC errors have always been logged on the server.  Unless you think we ought to change this, I will resolve this as "won't fix".

Also, "bobo" was a pejorative term used at Excite, meaning, roughly, "messed up".  I don't know the origin.

> bobo Exception in TestRPC
> -------------------------
>
>          Key: HADOOP-315
>          URL: http://issues.apache.org/jira/browse/HADOOP-315
>      Project: Hadoop
>         Type: Bug

>   Components: ipc
>     Versions: 0.3.2
>     Reporter: Konstantin Shvachko
>     Priority: Minor

>
> We are getting a bobo exceptions in TestRPC.
> It looks like the test should fail in this case after throwing bobo.
> By the way, does anybody know whether "bobo" means anything?
> error: java.io.IOException: bobo
> java.io.IOException: bobo
>     at org.apache.hadoop.ipc.TestRPC$TestImpl.error(TestRPC.java:84)
>     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
>     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>     at java.lang.reflect.Method.invoke(Method.java:585)
>     at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:243)
>     at org.apache.hadoop.ipc.Server$Handler.run(Server.java:467)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun 22 21:09:59 2006
Return-Path: 
 <hadoop-dev-return-2141-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 44959 invoked from network); 22 Jun 2006 21:09:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 21:09:59 -0000
Received: (qmail 82421 invoked by uid 500); 22 Jun 2006 21:09:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 82275 invoked by uid 500); 22 Jun 2006 21:09:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 82266 invoked by uid 99); 22 Jun 2006 21:09:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 14:09:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 14:09:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 309B0410005
	for <hadoop-dev@lucene.apache.org>; Thu, 22 Jun 2006 21:08:31 +0000 (GMT)
Message-ID: <14760139.1151010511196.JavaMail.jira@brutus>
Date: Thu, 22 Jun 2006 21:08:31 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-317) "connection was forcibly closed"
 Exception in RPC on Windows
In-Reply-To: <24457544.1151002410464.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-317?page=all ]
     
Doug Cutting resolved HADOOP-317:
---------------------------------

    Fix Version: 0.4.0
     Resolution: Fixed
      Assign To: Doug Cutting

I just committed a fix to this.

> "connection was forcibly closed" Exception in RPC on Windows
> ------------------------------------------------------------
>
>          Key: HADOOP-317
>          URL: http://issues.apache.org/jira/browse/HADOOP-317
>      Project: Hadoop
>         Type: Bug

>   Components: ipc
>     Versions: 0.3.2
>     Reporter: Konstantin Shvachko
>     Assignee: Doug Cutting
>      Fix For: 0.4.0

>
> I see a lot of exceptions caused by RPC in the nightly build on Windows.
> The most often is thrown by RPC on the namenode, saying
> 06/06/21 19:28:36 INFO ipc.Server: Server listener on port 7017: readAndProcess threw exception java.io.IOException: An existing connection was forcibly closed by the remote host. Count of bytes read: 0
> java.io.IOException: An existing connection was forcibly closed by the remote host
>     at sun.nio.ch.SocketDispatcher.read0(Native Method)
>     at sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:25)
>     at sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:233)
>     at sun.nio.ch.IOUtil.read(IOUtil.java:200)
>     at sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:207)
>     at org.apache.hadoop.ipc.Server$Connection.readAndProcess(Server.java:374)
>     at org.apache.hadoop.ipc.Server$Listener.doRead(Server.java:289)
>     at org.apache.hadoop.ipc.Server$Listener.run(Server.java:210)
> I am not sure how serious that is, since the tests do not fail, and the name node does not crash.
> Besides the RPC we should probably also check that the unit tests actually fail if they need to.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun 22 21:21:58 2006
Return-Path: 
 <hadoop-dev-return-2142-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 47825 invoked from network); 22 Jun 2006 21:21:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 21:21:58 -0000
Received: (qmail 3423 invoked by uid 500); 22 Jun 2006 21:21:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3397 invoked by uid 500); 22 Jun 2006 21:21:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3388 invoked by uid 99); 22 Jun 2006 21:21:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 14:21:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 14:21:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 94A31410008
	for <hadoop-dev@lucene.apache.org>; Thu, 22 Jun 2006 21:20:30 +0000 (GMT)
Message-ID: <25908614.1151011230605.JavaMail.jira@brutus>
Date: Thu, 22 Jun 2006 21:20:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-318) Progress in writing a DFS file does
 not count towards Job progress and can make the task timeout
In-Reply-To: <3721347.1151007329825.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-318?page=comments#action_12417370 ] 

Doug Cutting commented on HADOOP-318:
-------------------------------------

This looks good, except it is not back-compatible.  Any user code that implements an OutputFormat will no longer compile after this change is made.  Sigh.  I don't see an easy way around this...

> Progress in writing a DFS file does not count towards Job progress and can make the task timeout
> ------------------------------------------------------------------------------------------------
>
>          Key: HADOOP-318
>          URL: http://issues.apache.org/jira/browse/HADOOP-318
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.3.2
>  Environment: all, but especially on big busy clusters
>     Reporter: Milind Bhandarkar
>     Assignee: Milind Bhandarkar
>      Fix For: 0.4.0
>  Attachments: hadoop-latency-new.patch, hadoop-latency.patch
>
> When a task writes to DFS file, depending on how busy the cluster is, it can timeout after 10 minutes by default, because the progress towards writing a DFS file does not count as progress of the task. The solution (patch is forthcoming) is to provide a way to callback reporter to report task progress from DFSOutputStream.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun 22 21:25:58 2006
Return-Path: 
 <hadoop-dev-return-2143-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 48529 invoked from network); 22 Jun 2006 21:25:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 21:25:58 -0000
Received: (qmail 10964 invoked by uid 500); 22 Jun 2006 21:25:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 10943 invoked by uid 500); 22 Jun 2006 21:25:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 10925 invoked by uid 99); 22 Jun 2006 21:25:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 14:25:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 14:25:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 94599410005
	for <hadoop-dev@lucene.apache.org>; Thu, 22 Jun 2006 21:24:30 +0000 (GMT)
Message-ID: <653633.1151011470604.JavaMail.jira@brutus>
Date: Thu, 22 Jun 2006 21:24:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-319) FileSystem "close" does not remove
 the closed fs from the fs map
In-Reply-To: <17005151.1151009429839.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-319?page=comments#action_12417372 ] 

Doug Cutting commented on HADOOP-319:
-------------------------------------

I am unable to apply this patch:

% patch -p 0 < ~/Desktop/fs_close.patch
patching file src/java/org/apache/hadoop/fs/FileSystem.java
patching file src/java/org/apache/hadoop/dfs/DistributedFileSystem.java
patching file src/java/org/apache/hadoop/fs/LocalFileSystem.java
patching file src/test/org/apache/hadoop/fs/TestCopyFiles.java
patch: **** malformed patch at line 51: @@ -171,12 +171,10 @@

Does it work for you?  Thanks!

> FileSystem "close" does not remove the closed fs from the fs map
> ----------------------------------------------------------------
>
>          Key: HADOOP-319
>          URL: http://issues.apache.org/jira/browse/HADOOP-319
>      Project: Hadoop
>         Type: Bug

>   Components: fs
>     Versions: 0.3.2
>     Reporter: Hairong Kuang
>     Assignee: Hairong Kuang
>      Fix For: 0.4.0
>  Attachments: fs_close.patch
>
> The close methods of both DistributedFileSystem and LocalFileSystem do not remove the closed file system from the fs map in FileSystem. As a result, a subsequent call to FileSystem.getNamed may return the handle to the closed file system and receive errors if perform any operation on the fs handle.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun 22 21:37:58 2006
Return-Path: 
 <hadoop-dev-return-2144-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52335 invoked from network); 22 Jun 2006 21:37:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 21:37:58 -0000
Received: (qmail 26226 invoked by uid 500); 22 Jun 2006 21:37:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26120 invoked by uid 500); 22 Jun 2006 21:37:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26111 invoked by uid 99); 22 Jun 2006 21:37:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 14:37:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 14:37:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 994BA410005
	for <hadoop-dev@lucene.apache.org>; Thu, 22 Jun 2006 21:36:30 +0000 (GMT)
Message-ID: <1945544.1151012190625.JavaMail.jira@brutus>
Date: Thu, 22 Jun 2006 21:36:30 +0000 (GMT+00:00)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-319) FileSystem "close" does not remove the
 closed fs from the fs map
In-Reply-To: <17005151.1151009429839.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-319?page=all ]

Hairong Kuang updated HADOOP-319:
---------------------------------

    Attachment: fs_close.patch

Hope this one works.

> FileSystem "close" does not remove the closed fs from the fs map
> ----------------------------------------------------------------
>
>          Key: HADOOP-319
>          URL: http://issues.apache.org/jira/browse/HADOOP-319
>      Project: Hadoop
>         Type: Bug

>   Components: fs
>     Versions: 0.3.2
>     Reporter: Hairong Kuang
>     Assignee: Hairong Kuang
>      Fix For: 0.4.0
>  Attachments: fs_close.patch, fs_close.patch
>
> The close methods of both DistributedFileSystem and LocalFileSystem do not remove the closed file system from the fs map in FileSystem. As a result, a subsequent call to FileSystem.getNamed may return the handle to the closed file system and receive errors if perform any operation on the fs handle.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun 22 21:55:58 2006
Return-Path: 
 <hadoop-dev-return-2145-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 58370 invoked from network); 22 Jun 2006 21:55:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 21:55:58 -0000
Received: (qmail 58263 invoked by uid 500); 22 Jun 2006 21:55:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58229 invoked by uid 500); 22 Jun 2006 21:55:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58220 invoked by uid 99); 22 Jun 2006 21:55:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 14:55:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 14:55:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 93ED4410005
	for <hadoop-dev@lucene.apache.org>; Thu, 22 Jun 2006 21:54:30 +0000 (GMT)
Message-ID: <21908947.1151013270602.JavaMail.jira@brutus>
Date: Thu, 22 Jun 2006 21:54:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-319) FileSystem "close" does not remove
 the closed fs from the fs map
In-Reply-To: <17005151.1151009429839.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-319?page=comments#action_12417378 ] 

Doug Cutting commented on HADOOP-319:
-------------------------------------

FileSystem.close(String) should not be called by anything other than an implementation, so it should be protected instead of public.  Alternately, one could change FileSystem.close() to call NAME_TO_FS.remove(getName()), then just add a call to super.close() in the implementations (and document that all FileSystem implementations should do this).

> FileSystem "close" does not remove the closed fs from the fs map
> ----------------------------------------------------------------
>
>          Key: HADOOP-319
>          URL: http://issues.apache.org/jira/browse/HADOOP-319
>      Project: Hadoop
>         Type: Bug

>   Components: fs
>     Versions: 0.3.2
>     Reporter: Hairong Kuang
>     Assignee: Hairong Kuang
>      Fix For: 0.4.0
>  Attachments: fs_close.patch, fs_close.patch
>
> The close methods of both DistributedFileSystem and LocalFileSystem do not remove the closed file system from the fs map in FileSystem. As a result, a subsequent call to FileSystem.getNamed may return the handle to the closed file system and receive errors if perform any operation on the fs handle.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun 22 22:26:58 2006
Return-Path: 
 <hadoop-dev-return-2146-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 65483 invoked from network); 22 Jun 2006 22:26:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 22:26:58 -0000
Received: (qmail 99467 invoked by uid 500); 22 Jun 2006 22:26:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 99435 invoked by uid 500); 22 Jun 2006 22:26:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 99426 invoked by uid 99); 22 Jun 2006 22:26:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 15:26:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 15:26:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id ABDF1410008
	for <hadoop-dev@lucene.apache.org>; Thu, 22 Jun 2006 22:25:30 +0000 (GMT)
Message-ID: <2251870.1151015130701.JavaMail.jira@brutus>
Date: Thu, 22 Jun 2006 22:25:30 +0000 (GMT+00:00)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-319) FileSystem "close" does not remove the
 closed fs from the fs map
In-Reply-To: <17005151.1151009429839.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-319?page=all ]

Hairong Kuang updated HADOOP-319:
---------------------------------

    Attachment: fs_close.patch

Doug, thanks for the comment. The attached patch takes the 2nd approach that you suggested.

> FileSystem "close" does not remove the closed fs from the fs map
> ----------------------------------------------------------------
>
>          Key: HADOOP-319
>          URL: http://issues.apache.org/jira/browse/HADOOP-319
>      Project: Hadoop
>         Type: Bug

>   Components: fs
>     Versions: 0.3.2
>     Reporter: Hairong Kuang
>     Assignee: Hairong Kuang
>      Fix For: 0.4.0
>  Attachments: fs_close.patch, fs_close.patch, fs_close.patch
>
> The close methods of both DistributedFileSystem and LocalFileSystem do not remove the closed file system from the fs map in FileSystem. As a result, a subsequent call to FileSystem.getNamed may return the handle to the closed file system and receive errors if perform any operation on the fs handle.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun 22 23:06:58 2006
Return-Path: 
 <hadoop-dev-return-2147-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75291 invoked from network); 22 Jun 2006 23:06:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 23:06:58 -0000
Received: (qmail 46251 invoked by uid 500); 22 Jun 2006 23:06:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 46207 invoked by uid 500); 22 Jun 2006 23:06:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46194 invoked by uid 99); 22 Jun 2006 23:06:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 16:06:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 16:06:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CF4F6410007
	for <hadoop-dev@lucene.apache.org>; Thu, 22 Jun 2006 23:05:29 +0000 (GMT)
Message-ID: <20152082.1151017529846.JavaMail.jira@brutus>
Date: Thu, 22 Jun 2006 23:05:29 +0000 (GMT+00:00)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-320) bin/hadoop dfs -mv does not mv
  source's checksum file if source is a file
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

bin/hadoop dfs -mv does not mv  source's checksum file if source is a file
--------------------------------------------------------------------------

         Key: HADOOP-320
         URL: http://issues.apache.org/jira/browse/HADOOP-320
     Project: Hadoop
        Type: Bug

  Components: dfs  
    Versions: 0.3.2    
    Reporter: Hairong Kuang
 Assigned to: Hairong Kuang 
     Fix For: 0.4.0


None of the rename operation of DistributedSystem or DFSClient checks if the source is a file or not. Need also to rename the checksum file accordingly if the source is a file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun 22 23:18:58 2006
Return-Path: 
 <hadoop-dev-return-2148-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78000 invoked from network); 22 Jun 2006 23:18:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 23:18:58 -0000
Received: (qmail 64535 invoked by uid 500); 22 Jun 2006 23:18:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64504 invoked by uid 500); 22 Jun 2006 23:18:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64495 invoked by uid 99); 22 Jun 2006 23:18:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 16:18:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 16:18:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8ED7C410005
	for <hadoop-dev@lucene.apache.org>; Thu, 22 Jun 2006 23:17:30 +0000 (GMT)
Message-ID: <7150013.1151018250582.JavaMail.jira@brutus>
Date: Thu, 22 Jun 2006 23:17:30 +0000 (GMT+00:00)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-320) bin/hadoop dfs -mv does not mv
  source's checksum file if source is a file
In-Reply-To: <20152082.1151017529846.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-320?page=all ]

Hairong Kuang updated HADOOP-320:
---------------------------------

    Attachment: rename.patch

Here is the patch.

> bin/hadoop dfs -mv does not mv  source's checksum file if source is a file
> --------------------------------------------------------------------------
>
>          Key: HADOOP-320
>          URL: http://issues.apache.org/jira/browse/HADOOP-320
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.3.2
>     Reporter: Hairong Kuang
>     Assignee: Hairong Kuang
>      Fix For: 0.4.0
>  Attachments: rename.patch
>
> None of the rename operation of DistributedSystem or DFSClient checks if the source is a file or not. Need also to rename the checksum file accordingly if the source is a file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun 23 00:14:59 2006
Return-Path: 
 <hadoop-dev-return-2149-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92421 invoked from network); 23 Jun 2006 00:14:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Jun 2006 00:14:59 -0000
Received: (qmail 23663 invoked by uid 500); 23 Jun 2006 00:14:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23637 invoked by uid 500); 23 Jun 2006 00:14:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23626 invoked by uid 99); 23 Jun 2006 00:14:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 17:14:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 17:14:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 136B4410008
	for <hadoop-dev@lucene.apache.org>; Fri, 23 Jun 2006 00:13:31 +0000 (GMT)
Message-ID: <3101088.1151021611076.JavaMail.jira@brutus>
Date: Fri, 23 Jun 2006 00:13:31 +0000 (GMT+00:00)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-211) logging improvements for Hadoop
In-Reply-To: <11693488.1147389488398.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-211?page=comments#action_12417395 ] 

Sanjay Dahiya commented on HADOOP-211:
--------------------------------------

New extensions to hadoop logging - 
 - Rolling based on both time and size. 
 - compress
 - Move rolled over files to DFS

Log4J 1.3 has a better way of defining rollover policies and actions, I have a working implementation of above  but they depend on Log4J 1.3. Also the properties file will change to an XML format as the .properties format doesn't support all the configurations yet. Are we willing to move to 1.3 and XML log4j properties ?

> logging improvements for Hadoop
> -------------------------------
>
>          Key: HADOOP-211
>          URL: http://issues.apache.org/jira/browse/HADOOP-211
>      Project: Hadoop
>         Type: Improvement

>     Versions: 0.2.0
>     Reporter: Sameer Paranjpye
>     Assignee: Sameer Paranjpye
>     Priority: Minor
>      Fix For: 0.3.0
>  Attachments: acl-log4j-II.patch.tgz, acl-log4j-webapps.patch, acl-log4j.patch, commons_logging_patch
>
> Here's a proposal for some impovements to the way Hadoop does logging. It advocates 3 
> broad changes to the way logging is currently done, these being:
> - The use of a uniform logging format by all Hadoop subsystems
> - The use of Apache commons logging as a facade above an underlying logging framework
> - The use of Log4J as the underlying logging framework instead of java.util.logging
> This is largely polishing work, but it seems like it would make log analysis and debugging
> easier in the short term. In the long term, it would future proof logging to the extent of
> allowing the logging framework used to change while requiring minimal code change. The 
> propos changes are motivated by the following requirements which we think Hadoops 
> logging should meet:
> - Hadoops logs should be amenable to analysis by tools like grep, sed, awk etc.
> - Log entries should be clearly annotated with a timestamp and a logging level
> - Log entries should be traceable to the subsystem from which they originated
> - The logging implementation should allow log entries to be annotated with source code 
> location information like classname, methodname, file and line number, without requiring
> code changes
> - It should be possible to change the logging implementation used without having to change
> thousands of lines of code
> - The mapping of loggers to destinations (files, directories, servers etc.) should be 
> specified and modifiable via configuration
> Uniform logging format:
> All Hadoop logs should have the following structure.
> <Header>\n
> <LogEntry>\n [<Exception>\n]
> .
> .
> .
> where the header line specifies the format of each log entry. The header line has the format:
> '# <Fieldname> <Fieldname>...\n'. 
> The default format of each log entry is: '# Timestamp Level LoggerName Message', where:
> - Timestamp is a date and time in the format MM/DD/YYYY:HH:MM:SS
> - Level is the logging level (FATAL, WARN, DEBUG, TRACE, etc.)
> - LoggerName is the short name of the logging subsystem from which the message originated e.g.
> fs.FSNamesystem, dfs.Datanode etc.
> - Message is the log message produced
> Why Apache commons logging and Log4J?
> Apache commons logging is a facade meant to be used as a wrapper around an underlying logging
> implementation. Bridges from Apache commons logging to popular logging implementations 
> (Java logging, Log4J, Avalon etc.) are implemented and available as part of the commons logging
> distribution. Implementing a bridge to an unsupported implementation is fairly striaghtforward
> and involves the implementation of subclasses of the commons logging LogFactory and Logger 
> classes. Using Apache commons logging and making all logging calls through it enables us to
> move to a different logging implementation by simply changing configuration in the best case.
> Even otherwise, it incurs minimal code churn overhead.
> Log4J offers a few benefits over java.util.logging that make it a more desirable choice for the
> logging back end.
> - Configuration Flexibility: The mapping of loggers to destinations (files, sockets etc.)
> can be completely specified in configuration. It is possible to do this with Java logging as
> well, however, configuration is a lot more restrictive. For instance, with Java logging all 
> log files must have names derived from the same pattern. For the namenode, log files could 
> be named with the pattern "%h/namenode%u.log" which would put log files in the user.home
> directory with names like namenode0.log etc. With Log4J it would be possible to configure
> the namenode to emit log files with different names, say heartbeats.log, namespace.log,
> clients.log etc. Configuration variables in Log4J can also have the values of system 
> properties embedded in them.
> - Takes wrappers into account: Log4J takes into account the possibility that an application
> may be invoking it via a wrapper, such as Apache commons logging. This is important because
> logging event objects must be able to infer the context of the logging call such as classname,
> methodname etc. Inferring context is a relatively expensive operation that involves creating
> an exception and examining the stack trace to find the frame just before the first frame 
> of the logging framework. It is therefore done lazily only when this information actually 
> needs to be logged. Log4J can be instructed to look for the frame corresponding to the wrapper
> class, Java logging cannot. In the case of Java logging this means that a) the bridge from 
> Apache commons logging is responsible for inferring the calling context and setting it in the 
> logging event and b) this inference has to be done on every logging call regardless of whether
> or not it is needed.
> - More handy features: Log4J has some handy features that Java logging doesn't. A couple
> of examples of these:
> a) Date based rolling of log files 
> b) Format control through configuration. Log4J has a PatternLayout class that can be 
> configured to generate logs with a user specified pattern. The logging format described
> above can be described as "%d{MM/dd/yyyy:HH:mm:SS} %c{2} %p %m". The format specifiers
> indicate that each log line should have the date and time followed by the logger name followed
> by the logging level or priority followed by the application generated message.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun 23 01:11:00 2006
Return-Path: 
 <hadoop-dev-return-2150-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 509 invoked from network); 23 Jun 2006 01:11:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Jun 2006 01:11:00 -0000
Received: (qmail 52902 invoked by uid 500); 23 Jun 2006 01:10:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 52871 invoked by uid 500); 23 Jun 2006 01:10:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 52856 invoked by uid 99); 23 Jun 2006 01:10:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 18:10:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 18:10:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DD20A410007
	for <hadoop-dev@lucene.apache.org>; Fri, 23 Jun 2006 01:09:29 +0000 (GMT)
Message-ID: <20976373.1151024969902.JavaMail.jira@brutus>
Date: Fri, 23 Jun 2006 01:09:29 +0000 (GMT+00:00)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-321) DatanodeInfo refactoring
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

DatanodeInfo refactoring
------------------------

         Key: HADOOP-321
         URL: http://issues.apache.org/jira/browse/HADOOP-321
     Project: Hadoop
        Type: Improvement

  Components: dfs  
    Reporter: Konstantin Shvachko


I'm trying to refactor some name node classes, which seem to be similar.
So DatanodeInfo is a public api now for purely external ( to name node) use.
The name node class that stores information about data nodes including the
set of its blocks is called DatanodeDescriptor.
The DatanodeReport is removed since it was a variation of DatanodeInfo.
Previously DatanodeInfo and DatanodeDescriptor were the same class, and
DatanodeReport was used for reporting node statistics only.
This is a preparation step for HADOOP-306.


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun 23 01:28:59 2006
Return-Path: 
 <hadoop-dev-return-2151-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8147 invoked from network); 23 Jun 2006 01:28:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Jun 2006 01:28:59 -0000
Received: (qmail 61843 invoked by uid 500); 23 Jun 2006 01:28:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 61814 invoked by uid 500); 23 Jun 2006 01:28:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 61805 invoked by uid 99); 23 Jun 2006 01:28:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 18:28:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 18:28:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9FB2D410007
	for <hadoop-dev@lucene.apache.org>; Fri, 23 Jun 2006 01:27:30 +0000 (GMT)
Message-ID: <3289221.1151026050651.JavaMail.jira@brutus>
Date: Fri, 23 Jun 2006 01:27:30 +0000 (GMT+00:00)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-321) DatanodeInfo refactoring
In-Reply-To: <20976373.1151024969902.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-321?page=all ]

Konstantin Shvachko updated HADOOP-321:
---------------------------------------

    Attachment: DatanodeInfo_refactor.patch

> DatanodeInfo refactoring
> ------------------------
>
>          Key: HADOOP-321
>          URL: http://issues.apache.org/jira/browse/HADOOP-321
>      Project: Hadoop
>         Type: Improvement

>   Components: dfs
>     Reporter: Konstantin Shvachko
>  Attachments: DatanodeInfo_refactor.patch
>
> I'm trying to refactor some name node classes, which seem to be similar.
> So DatanodeInfo is a public api now for purely external ( to name node) use.
> The name node class that stores information about data nodes including the
> set of its blocks is called DatanodeDescriptor.
> The DatanodeReport is removed since it was a variation of DatanodeInfo.
> Previously DatanodeInfo and DatanodeDescriptor were the same class, and
> DatanodeReport was used for reporting node statistics only.
> This is a preparation step for HADOOP-306.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun 23 02:26:58 2006
Return-Path: 
 <hadoop-dev-return-2152-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 21220 invoked from network); 23 Jun 2006 02:26:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Jun 2006 02:26:58 -0000
Received: (qmail 95257 invoked by uid 500); 23 Jun 2006 02:26:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95231 invoked by uid 500); 23 Jun 2006 02:26:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95216 invoked by uid 99); 23 Jun 2006 02:26:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 19:26:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 19:26:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C877B410005
	for <hadoop-dev@lucene.apache.org>; Fri, 23 Jun 2006 02:25:30 +0000 (GMT)
Message-ID: <15993351.1151029530818.JavaMail.jira@brutus>
Date: Fri, 23 Jun 2006 02:25:30 +0000 (GMT+00:00)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-321) DatanodeInfo refactoring
In-Reply-To: <20976373.1151024969902.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-321?page=all ]

Konstantin Shvachko updated HADOOP-321:
---------------------------------------

    Attachment:     (was: DatanodeInfo_refactor.patch)

> DatanodeInfo refactoring
> ------------------------
>
>          Key: HADOOP-321
>          URL: http://issues.apache.org/jira/browse/HADOOP-321
>      Project: Hadoop
>         Type: Improvement

>   Components: dfs
>     Reporter: Konstantin Shvachko
>  Attachments: DatanodeInfo_refactor.patch
>
> I'm trying to refactor some name node classes, which seem to be similar.
> So DatanodeInfo is a public api now for purely external ( to name node) use.
> The name node class that stores information about data nodes including the
> set of its blocks is called DatanodeDescriptor.
> The DatanodeReport is removed since it was a variation of DatanodeInfo.
> Previously DatanodeInfo and DatanodeDescriptor were the same class, and
> DatanodeReport was used for reporting node statistics only.
> This is a preparation step for HADOOP-306.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun 23 02:27:00 2006
Return-Path: 
 <hadoop-dev-return-2153-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 21266 invoked from network); 23 Jun 2006 02:27:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Jun 2006 02:27:00 -0000
Received: (qmail 95434 invoked by uid 500); 23 Jun 2006 02:26:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95398 invoked by uid 500); 23 Jun 2006 02:26:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95389 invoked by uid 99); 23 Jun 2006 02:26:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 19:26:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 19:26:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AEEDB410007
	for <hadoop-dev@lucene.apache.org>; Fri, 23 Jun 2006 02:25:31 +0000 (GMT)
Message-ID: <27729599.1151029531713.JavaMail.jira@brutus>
Date: Fri, 23 Jun 2006 02:25:31 +0000 (GMT+00:00)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-321) DatanodeInfo refactoring
In-Reply-To: <20976373.1151024969902.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-321?page=all ]

Konstantin Shvachko updated HADOOP-321:
---------------------------------------

    Attachment: DatanodeInfo_refactor.patch

DatanodeDescriptor should not be public.

> DatanodeInfo refactoring
> ------------------------
>
>          Key: HADOOP-321
>          URL: http://issues.apache.org/jira/browse/HADOOP-321
>      Project: Hadoop
>         Type: Improvement

>   Components: dfs
>     Reporter: Konstantin Shvachko
>  Attachments: DatanodeInfo_refactor.patch
>
> I'm trying to refactor some name node classes, which seem to be similar.
> So DatanodeInfo is a public api now for purely external ( to name node) use.
> The name node class that stores information about data nodes including the
> set of its blocks is called DatanodeDescriptor.
> The DatanodeReport is removed since it was a variation of DatanodeInfo.
> Previously DatanodeInfo and DatanodeDescriptor were the same class, and
> DatanodeReport was used for reporting node statistics only.
> This is a preparation step for HADOOP-306.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun 23 16:08:42 2006
Return-Path: 
 <hadoop-dev-return-2154-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 62939 invoked from network); 23 Jun 2006 16:08:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Jun 2006 16:08:42 -0000
Received: (qmail 32907 invoked by uid 500); 23 Jun 2006 16:05:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 32840 invoked by uid 500); 23 Jun 2006 16:05:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 32801 invoked by uid 99); 23 Jun 2006 16:04:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jun 2006 09:04:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jun 2006 09:04:59 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 53B1D41000B
	for <hadoop-dev@lucene.apache.org>; Fri, 23 Jun 2006 16:03:31 +0000 (GMT)
Message-ID: <32852386.1151078611339.JavaMail.jira@brutus>
Date: Fri, 23 Jun 2006 16:03:31 +0000 (GMT+00:00)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-295) jobs don't get executed in parallel
In-Reply-To: <14978528.1150158449925.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-295?page=all ]
     
Mahadev konar resolved HADOOP-295:
----------------------------------

    Resolution: Fixed
     Assign To: Owen O'Malley  (was: Mahadev konar)

was a duplicate of Hadoop 299

> jobs don't get executed in parallel
> -----------------------------------
>
>          Key: HADOOP-295
>          URL: http://issues.apache.org/jira/browse/HADOOP-295
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Reporter: Yoram Arnon
>     Assignee: Owen O'Malley

>
> we expect tasks to be assigned to nodes up to their configured capacity, with separate slots for map and reduce tasks.
> we're observing jobs queueing up, with the map slots free, as exemplified by this copy-paste (converted to text) of the JT WI page.
> Cluster Summary
> Maps Reduces Tasks/Node Nodes 
> 0           205             2                 156 
> --------------------------------------------------------------------------------
> Running Jobs  
> Jobid        User           Name          Map % complete Map total Maps completed Reduce % complete Reduce total Reduces completed 
> job_0088 runping  DocUpdater   100.00%                  3597                3597                  99.92%                       256                        253 
> job_0089 murthij   Term Count        0.00%                  243                        0                     0.00%                        200                            0 
> job_0091 zshao     sort                       0.00%                  444                        0                     0.00%                        100                           0 
> --------------------------------------------------------------------------------

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun 23 16:41:00 2006
Return-Path: 
 <hadoop-dev-return-2155-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 73327 invoked from network); 23 Jun 2006 16:41:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Jun 2006 16:41:00 -0000
Received: (qmail 54012 invoked by uid 500); 23 Jun 2006 16:41:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53984 invoked by uid 500); 23 Jun 2006 16:40:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53975 invoked by uid 99); 23 Jun 2006 16:40:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jun 2006 09:40:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jun 2006 09:40:59 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3A4CA41000B
	for <hadoop-dev@lucene.apache.org>; Fri, 23 Jun 2006 16:39:31 +0000 (GMT)
Message-ID: <10754784.1151080771235.JavaMail.jira@brutus>
Date: Fri, 23 Jun 2006 16:39:31 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-242) job fails because of "No valid local
 directories in property: " exception
In-Reply-To: <13734662.1148411729914.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-242?page=all ]
     
Owen O'Malley resolved HADOOP-242:
----------------------------------

    Fix Version: 0.3.2
                     (was: 0.4.0)
     Resolution: Fixed

I think the fix for HADOOP-277 fixed this one. We've seen it since, but only when the local dir was running out of space.

> job fails because of "No valid local directories in property: " exception
> -------------------------------------------------------------------------
>
>          Key: HADOOP-242
>          URL: http://issues.apache.org/jira/browse/HADOOP-242
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Reporter: Yoram Arnon
>     Assignee: Owen O'Malley
>      Fix For: 0.3.2
>  Attachments: no-local.patch
>
> when running a fairly large job, of 70+K map tasks, I get many exceptions as shown below, and eventually the job failes when a task fails four times.
> The exception doesn't really tell us enough information to debug this properly, so the first thing to do would be to add more information (path) to the exception.
> The path indicated in the config file exists, is writable and valid, though 'path' may be anything.
> the exception:
> java.io.IOException: No valid local directories in property: mapred.local.dir at org.apache.hadoop.conf.Configuration.getLocalPath(Configuration.java:293) at org.apache.hadoop.mapred.JobConf.getLocalPath(JobConf.java:153) at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.localizeTask(TaskTracker.java:523) at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.launchTask(TaskTracker.java:572) at org.apache.hadoop.mapred.TaskTracker.startNewTask(TaskTracker.java:389) at org.apache.hadoop.mapred.TaskTracker.offerService(TaskTracker.java:303) at org.apache.hadoop.mapred.TaskTracker.run(TaskTracker.java:418) at org.apache.hadoop.mapred.TaskTracker.main(TaskTracker.java:920)
> the code:
>   public Path getLocalPath(String dirsProp, String path)
>     throws IOException {
>     String[] dirs = getStrings(dirsProp);
>     int hashCode = path.hashCode();
>     FileSystem fs = FileSystem.getNamed("local", this);
>     for (int i = 0; i < dirs.length; i++) {  // try each local dir
>       int index = (hashCode+i & Integer.MAX_VALUE) % dirs.length;
>       Path file = new Path(dirs[index], path);
>       Path dir = file.getParent();
>       if (fs.exists(dir) || fs.mkdirs(dir)) {
>         return file;
>       }
>     }
>     throw new IOException("No valid local directories in property: "+dirsProp);
>   }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun 23 17:01:59 2006
Return-Path: 
 <hadoop-dev-return-2156-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77640 invoked from network); 23 Jun 2006 17:01:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Jun 2006 17:01:59 -0000
Received: (qmail 96726 invoked by uid 500); 23 Jun 2006 17:01:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 96705 invoked by uid 500); 23 Jun 2006 17:01:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 96696 invoked by uid 99); 23 Jun 2006 17:01:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jun 2006 10:01:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jun 2006 10:01:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 96B47410007
	for <hadoop-dev@lucene.apache.org>; Fri, 23 Jun 2006 17:00:30 +0000 (GMT)
Message-ID: <2009071.1151082030614.JavaMail.jira@brutus>
Date: Fri, 23 Jun 2006 17:00:30 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-318) Progress in writing a DFS file does
 not count towards Job progress and can make the task timeout
In-Reply-To: <3721347.1151007329825.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-318?page=comments#action_12417527 ] 

Owen O'Malley commented on HADOOP-318:
--------------------------------------

The only way around it that I can see is if we had:

FSDataOutputStream:
    setProgressable(Progressable prog)

RecordWriter:
   setProgressable(Progressable prog)

which just pushes the problem down a level.

> Progress in writing a DFS file does not count towards Job progress and can make the task timeout
> ------------------------------------------------------------------------------------------------
>
>          Key: HADOOP-318
>          URL: http://issues.apache.org/jira/browse/HADOOP-318
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.3.2
>  Environment: all, but especially on big busy clusters
>     Reporter: Milind Bhandarkar
>     Assignee: Milind Bhandarkar
>      Fix For: 0.4.0
>  Attachments: hadoop-latency-new.patch, hadoop-latency.patch
>
> When a task writes to DFS file, depending on how busy the cluster is, it can timeout after 10 minutes by default, because the progress towards writing a DFS file does not count as progress of the task. The solution (patch is forthcoming) is to provide a way to callback reporter to report task progress from DFSOutputStream.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun 23 17:55:28 2006
Return-Path: 
 <hadoop-dev-return-2157-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86248 invoked from network); 23 Jun 2006 17:55:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Jun 2006 17:55:28 -0000
Received: (qmail 43352 invoked by uid 500); 23 Jun 2006 17:54:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 42350 invoked by uid 500); 23 Jun 2006 17:54:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 41783 invoked by uid 99); 23 Jun 2006 17:54:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jun 2006 10:54:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jun 2006 10:30:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9370641000A
	for <hadoop-dev@lucene.apache.org>; Fri, 23 Jun 2006 17:29:30 +0000 (GMT)
Message-ID: <2712644.1151083770601.JavaMail.jira@brutus>
Date: Fri, 23 Jun 2006 17:29:30 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-313) running a reduce task standalone
In-Reply-To: <10995504.1150932689891.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-313?page=comments#action_12417531 ] 

Owen O'Malley commented on HADOOP-313:
--------------------------------------

Actually, it isn't for testing at all. It is for debugging a reduce crash in place on the production machines. Michel manually caught the reduce inputs, but in general we also need to add a configuration setting that lets a job request that some reduce task's inputs be kept. Maybe something like:
mapred.keep.reduce.inputs=...
Where the legal values are "all", "none", or a list of integers of which reduce tasks to keep the inputs for. 


> running a reduce task standalone
> --------------------------------
>
>          Key: HADOOP-313
>          URL: http://issues.apache.org/jira/browse/HADOOP-313
>      Project: Hadoop
>         Type: Bug

>     Reporter: Michel Tourn
>     Assignee: Michel Tourn
>  Attachments: sareduce.patch
>
> This is a tool to reproduce problems and to run unit tests involving a reduce task.
> You just give it a reduce directory on the command line.
> Usage: java org.apache.hadoop.mapred.StandaloneReduceTask <taskdir> [<limitmaps>]
> taskdir name encodes: task_<jobid>_r_<partition>_<attempt>
> taskdir contains job.xml and one or more input files named: map_<dddd>.out
> You should run with the same -Xmx option as the TaskTracker child JVM

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun 23 18:19:59 2006
Return-Path: 
 <hadoop-dev-return-2158-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96502 invoked from network); 23 Jun 2006 18:19:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Jun 2006 18:19:59 -0000
Received: (qmail 4265 invoked by uid 500); 23 Jun 2006 18:19:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 4213 invoked by uid 500); 23 Jun 2006 18:19:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 4195 invoked by uid 99); 23 Jun 2006 18:19:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jun 2006 11:19:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jun 2006 11:19:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 95B57410007
	for <hadoop-dev@lucene.apache.org>; Fri, 23 Jun 2006 18:18:30 +0000 (GMT)
Message-ID: <30921551.1151086710610.JavaMail.jira@brutus>
Date: Fri, 23 Jun 2006 18:18:30 +0000 (GMT+00:00)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-318) Progress in writing a DFS file does
 not count towards Job progress and can make the task timeout
In-Reply-To: <3721347.1151007329825.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-318?page=comments#action_12417539 ] 

Milind Bhandarkar commented on HADOOP-318:
------------------------------------------

I don't see how this can be done without breaking backward-compatibility. Therefore I have made changes so that with minimum porting any other output formats could be incorporated. An additional getRecordWriter method needs to be implemented that takes an additional parameter. This parameter can be passed to fs.create (or even ignored as in the case of local filesystem.)


> Progress in writing a DFS file does not count towards Job progress and can make the task timeout
> ------------------------------------------------------------------------------------------------
>
>          Key: HADOOP-318
>          URL: http://issues.apache.org/jira/browse/HADOOP-318
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.3.2
>  Environment: all, but especially on big busy clusters
>     Reporter: Milind Bhandarkar
>     Assignee: Milind Bhandarkar
>      Fix For: 0.4.0
>  Attachments: hadoop-latency-new.patch, hadoop-latency.patch
>
> When a task writes to DFS file, depending on how busy the cluster is, it can timeout after 10 minutes by default, because the progress towards writing a DFS file does not count as progress of the task. The solution (patch is forthcoming) is to provide a way to callback reporter to report task progress from DFSOutputStream.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun 23 18:23:00 2006
Return-Path: 
 <hadoop-dev-return-2159-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 98488 invoked from network); 23 Jun 2006 18:23:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Jun 2006 18:23:00 -0000
Received: (qmail 7615 invoked by uid 500); 23 Jun 2006 18:22:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 7582 invoked by uid 500); 23 Jun 2006 18:22:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 7572 invoked by uid 99); 23 Jun 2006 18:22:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jun 2006 11:22:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jun 2006 11:22:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9E023410007
	for <hadoop-dev@lucene.apache.org>; Fri, 23 Jun 2006 18:21:30 +0000 (GMT)
Message-ID: <1150443.1151086890644.JavaMail.jira@brutus>
Date: Fri, 23 Jun 2006 18:21:30 +0000 (GMT+00:00)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-59) support generic command-line options
In-Reply-To: <321463887.1140733957324.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-59?page=all ]

Hairong Kuang updated HADOOP-59:
--------------------------------

    Attachment: genericCommand.patch

This patch provides a general framework to support general command options. Tool provides an interface and ToolBase processes general command options.

General command options supported are
-conf <configuration file>      specify an application configuration file
-D <property=value>               use value for given property
-fs <local|namenode:port>    specify a name node
-jt <local|jobtracker:port>       specify a job tracker

The syntax to run bin/hadoop becomes
bin/hadoop command [general options] [command options and arguments]

The patch also includes changes to four tools, DFSShell, DFSck, JobClient, and CopyFiles to inherit from ToolBase. 

Examples using general options are
bin/hadoop dfs -fs darwin:8020 -ls /data
bin/hadoop dfs -Dfs.default.name=darwin:8020 -ls /data
bin/hadoop dfs -conf hadoop-site.xml -ls /data
bin/hadoop job -jt darwin:50020 -status job_0001
bin/hadoop distcp -Dfs.default.name=darwin:8020 -Dmapred.job.tracker=darwin:50020 srcurl dsturl
bin/hadoop fsck -fs dawin:8020 /data

Last, the patch includes a junit test for general options.

> support generic command-line options
> ------------------------------------
>
>          Key: HADOOP-59
>          URL: http://issues.apache.org/jira/browse/HADOOP-59
>      Project: Hadoop
>         Type: Improvement

>   Components: conf
>     Versions: 0.2.0
>     Reporter: Doug Cutting
>     Assignee: Hairong Kuang
>     Priority: Minor
>      Fix For: 0.4.0
>  Attachments: Tool.java, ToolBase.java, bashfile.patch, genericCommand.patch, toolbase.patch
>
> Hadoop commands should all support some common options.  For example, it should be possible to specify the namenode, datanode, and, for that matter, any config option, in a generic way.
> This could be implemented with code like:
> public interface Tool extends Configurable {
>   void run(String[] args) throws Exception;
> }
> public class ToolBase implements Tool extends Configured {
>   public final void main(String[] args) throws Exception {
>     Configuration conf = new Configuration();
>     ... parse config options from args into conf ...
>     this.configure(conf);
>     this.run();
>   }
> }
> public MyTool extends ExcecutableBase {
>   public static void main(String[] args) throws Exception {
>     new MyTool().main(args);
>   }
> }
> The general command line syntax could be:
> bin/hadoop [generalOptions] command [commandOptions]
> Where generalOptions are things that ToolBase handles, and only the commandOptions are passed to Tool.run().  The most important generalOption would be '-D', which would define name/value pairs that are set in the configuration.  This alone would permit folks to set the namenode, datanode, etc.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun 23 18:26:00 2006
Return-Path: 
 <hadoop-dev-return-2160-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 354 invoked from network); 23 Jun 2006 18:26:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Jun 2006 18:26:00 -0000
Received: (qmail 14973 invoked by uid 500); 23 Jun 2006 18:25:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14952 invoked by uid 500); 23 Jun 2006 18:25:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 14943 invoked by uid 99); 23 Jun 2006 18:25:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jun 2006 11:25:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jun 2006 11:25:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9D4C8410007
	for <hadoop-dev@lucene.apache.org>; Fri, 23 Jun 2006 18:24:30 +0000 (GMT)
Message-ID: <32656811.1151087070641.JavaMail.jira@brutus>
Date: Fri, 23 Jun 2006 18:24:30 +0000 (GMT+00:00)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-59) support generic command-line options
In-Reply-To: <321463887.1140733957324.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-59?page=all ]

Hairong Kuang updated HADOOP-59:
--------------------------------

    Attachment: commons-cli-2.0-SNAPSHOT.jar

In the patch submitted above, the processing of general options are implemented using commons CLI with a fix. The fix has not committed yet. So I attached the jar here.

> support generic command-line options
> ------------------------------------
>
>          Key: HADOOP-59
>          URL: http://issues.apache.org/jira/browse/HADOOP-59
>      Project: Hadoop
>         Type: Improvement

>   Components: conf
>     Versions: 0.2.0
>     Reporter: Doug Cutting
>     Assignee: Hairong Kuang
>     Priority: Minor
>      Fix For: 0.4.0
>  Attachments: Tool.java, ToolBase.java, bashfile.patch, commons-cli-2.0-SNAPSHOT.jar, genericCommand.patch, toolbase.patch
>
> Hadoop commands should all support some common options.  For example, it should be possible to specify the namenode, datanode, and, for that matter, any config option, in a generic way.
> This could be implemented with code like:
> public interface Tool extends Configurable {
>   void run(String[] args) throws Exception;
> }
> public class ToolBase implements Tool extends Configured {
>   public final void main(String[] args) throws Exception {
>     Configuration conf = new Configuration();
>     ... parse config options from args into conf ...
>     this.configure(conf);
>     this.run();
>   }
> }
> public MyTool extends ExcecutableBase {
>   public static void main(String[] args) throws Exception {
>     new MyTool().main(args);
>   }
> }
> The general command line syntax could be:
> bin/hadoop [generalOptions] command [commandOptions]
> Where generalOptions are things that ToolBase handles, and only the commandOptions are passed to Tool.run().  The most important generalOption would be '-D', which would define name/value pairs that are set in the configuration.  This alone would permit folks to set the namenode, datanode, etc.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Sat Jun 24 05:17:00 2006
Return-Path: 
 <hadoop-dev-return-2161-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 25604 invoked from network); 24 Jun 2006 05:17:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jun 2006 05:17:00 -0000
Received: (qmail 92809 invoked by uid 500); 24 Jun 2006 05:16:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 92769 invoked by uid 500); 24 Jun 2006 05:16:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 92756 invoked by uid 99); 24 Jun 2006 05:16:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jun 2006 22:16:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jun 2006 22:16:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D22CE410008
	for <hadoop-dev@lucene.apache.org>; Sat, 24 Jun 2006 05:15:29 +0000 (GMT)
Message-ID: <4931825.1151126129857.JavaMail.jira@brutus>
Date: Sat, 24 Jun 2006 05:15:29 +0000 (GMT+00:00)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-322) Need a job control utility to submit
 and monitor a group of jobs which have DAG dependency
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Need a job control utility to submit and monitor a group of jobs which have DAG dependency
------------------------------------------------------------------------------------------

         Key: HADOOP-322
         URL: http://issues.apache.org/jira/browse/HADOOP-322
     Project: Hadoop
        Type: New Feature

    Reporter: Runping Qi
 Assigned to: Runping Qi 



In my applications, some jobs depend on the outputs of other jobs. Therefore, job dependency forms a DAG. A job is ready to run if and only if it does not have any dependency or all the jobs it depends are finished successfully. To help schedule and monitor a group of jobs like that, I am thinking of implementing a utility that:
	- accept jobs with dependency specification
      - monitor job status
      - submit jobs when they are ready

With such a utility, the application can construct its jobs, specify their dependency and then hand the jobs to the utility class. The utility takes care of the details of job submission.

I'll post my design skech for comments/suggestion.
Eventually, I'll submit a patch for the utility.





-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Sat Jun 24 14:29:01 2006
Return-Path: 
 <hadoop-dev-return-2162-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 14644 invoked from network); 24 Jun 2006 14:29:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jun 2006 14:29:01 -0000
Received: (qmail 23910 invoked by uid 500); 24 Jun 2006 14:29:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23872 invoked by uid 500); 24 Jun 2006 14:29:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23863 invoked by uid 99); 24 Jun 2006 14:29:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 24 Jun 2006 07:29:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 24 Jun 2006 07:29:00 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B19B57141E4
	for <hadoop-dev@lucene.apache.org>; Sat, 24 Jun 2006 14:27:30 +0000 (GMT)
Message-ID: <4334912.1151159250724.JavaMail.jira@brutus>
Date: Sat, 24 Jun 2006 14:27:30 +0000 (GMT+00:00)
From: "paul sutter (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-322) Need a job control utility to submit
 and monitor a group of jobs which have DAG dependency
In-Reply-To: <4931825.1151126129857.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-322?page=comments#action_12417636 ] 

paul sutter commented on HADOOP-322:
------------------------------------


Would Ant solve the problem, if a few extensions were developed? (such as an extentsion to check for completion metadata in a .completed file)?



> Need a job control utility to submit and monitor a group of jobs which have DAG dependency
> ------------------------------------------------------------------------------------------
>
>          Key: HADOOP-322
>          URL: http://issues.apache.org/jira/browse/HADOOP-322
>      Project: Hadoop
>         Type: New Feature

>     Reporter: Runping Qi
>     Assignee: Runping Qi

>
> In my applications, some jobs depend on the outputs of other jobs. Therefore, job dependency forms a DAG. A job is ready to run if and only if it does not have any dependency or all the jobs it depends are finished successfully. To help schedule and monitor a group of jobs like that, I am thinking of implementing a utility that:
> 	- accept jobs with dependency specification
>       - monitor job status
>       - submit jobs when they are ready
> With such a utility, the application can construct its jobs, specify their dependency and then hand the jobs to the utility class. The utility takes care of the details of job submission.
> I'll post my design skech for comments/suggestion.
> Eventually, I'll submit a patch for the utility.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun 26 01:00:04 2006
Return-Path: 
 <hadoop-dev-return-2163-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99581 invoked from network); 26 Jun 2006 01:00:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jun 2006 01:00:04 -0000
Received: (qmail 13304 invoked by uid 500); 26 Jun 2006 01:00:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13162 invoked by uid 500); 26 Jun 2006 01:00:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13149 invoked by uid 99); 26 Jun 2006 01:00:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Jun 2006 18:00:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Jun 2006 18:00:02 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 948337141EF
	for <hadoop-dev@lucene.apache.org>; Mon, 26 Jun 2006 00:58:30 +0000 (GMT)
Message-ID: <32789921.1151283510605.JavaMail.jira@brutus>
Date: Mon, 26 Jun 2006 00:58:30 +0000 (GMT+00:00)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-59) support generic command-line options
In-Reply-To: <321463887.1140733957324.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-59?page=comments#action_12417706 ] 

eric baldeschwieler commented on HADOOP-59:
-------------------------------------------

Any reason we need to segregate general options from command options?  
That seems a little confusing.


> support generic command-line options
> ------------------------------------
>
>          Key: HADOOP-59
>          URL: http://issues.apache.org/jira/browse/HADOOP-59
>      Project: Hadoop
>         Type: Improvement

>   Components: conf
>     Versions: 0.2.0
>     Reporter: Doug Cutting
>     Assignee: Hairong Kuang
>     Priority: Minor
>      Fix For: 0.4.0
>  Attachments: Tool.java, ToolBase.java, bashfile.patch, commons-cli-2.0-SNAPSHOT.jar, genericCommand.patch, toolbase.patch
>
> Hadoop commands should all support some common options.  For example, it should be possible to specify the namenode, datanode, and, for that matter, any config option, in a generic way.
> This could be implemented with code like:
> public interface Tool extends Configurable {
>   void run(String[] args) throws Exception;
> }
> public class ToolBase implements Tool extends Configured {
>   public final void main(String[] args) throws Exception {
>     Configuration conf = new Configuration();
>     ... parse config options from args into conf ...
>     this.configure(conf);
>     this.run();
>   }
> }
> public MyTool extends ExcecutableBase {
>   public static void main(String[] args) throws Exception {
>     new MyTool().main(args);
>   }
> }
> The general command line syntax could be:
> bin/hadoop [generalOptions] command [commandOptions]
> Where generalOptions are things that ToolBase handles, and only the commandOptions are passed to Tool.run().  The most important generalOption would be '-D', which would define name/value pairs that are set in the configuration.  This alone would permit folks to set the namenode, datanode, etc.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun 26 01:06:04 2006
Return-Path: 
 <hadoop-dev-return-2164-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 456 invoked from network); 26 Jun 2006 01:06:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jun 2006 01:06:04 -0000
Received: (qmail 17467 invoked by uid 500); 26 Jun 2006 01:06:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17295 invoked by uid 500); 26 Jun 2006 01:06:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17279 invoked by uid 99); 26 Jun 2006 01:06:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Jun 2006 18:06:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Jun 2006 18:06:02 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0215C7141EF
	for <hadoop-dev@lucene.apache.org>; Mon, 26 Jun 2006 01:04:31 +0000 (GMT)
Message-ID: <22687629.1151283871005.JavaMail.jira@brutus>
Date: Mon, 26 Jun 2006 01:04:31 +0000 (GMT+00:00)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-313) running a reduce task standalone
In-Reply-To: <10995504.1150932689891.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-313?page=comments#action_12417708 ] 

eric baldeschwieler commented on HADOOP-313:
--------------------------------------------

Why not an option to keep inputs for failed reduces?
Also recall HADOOP-91.

> running a reduce task standalone
> --------------------------------
>
>          Key: HADOOP-313
>          URL: http://issues.apache.org/jira/browse/HADOOP-313
>      Project: Hadoop
>         Type: Bug

>     Reporter: Michel Tourn
>     Assignee: Michel Tourn
>  Attachments: sareduce.patch
>
> This is a tool to reproduce problems and to run unit tests involving a reduce task.
> You just give it a reduce directory on the command line.
> Usage: java org.apache.hadoop.mapred.StandaloneReduceTask <taskdir> [<limitmaps>]
> taskdir name encodes: task_<jobid>_r_<partition>_<attempt>
> taskdir contains job.xml and one or more input files named: map_<dddd>.out
> You should run with the same -Xmx option as the TaskTracker child JVM

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun 26 11:03:04 2006
Return-Path: 
 <hadoop-dev-return-2165-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 70317 invoked from network); 26 Jun 2006 11:03:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jun 2006 11:03:04 -0000
Received: (qmail 23073 invoked by uid 500); 26 Jun 2006 11:03:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23049 invoked by uid 500); 26 Jun 2006 11:03:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23040 invoked by uid 99); 26 Jun 2006 11:03:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 04:03:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 04:03:02 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A348A410008
	for <hadoop-dev@lucene.apache.org>; Mon, 26 Jun 2006 11:01:30 +0000 (GMT)
Message-ID: <18022923.1151319690665.JavaMail.jira@brutus>
Date: Mon, 26 Jun 2006 11:01:30 +0000 (GMT+00:00)
From: "Johan Oskarson (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-27) MapRed tries to allocate tasks to
 nodes that have no available disk space
In-Reply-To: <1424617142.1139335680270.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-27?page=comments#action_12417779 ] 

Johan Oskarson commented on HADOOP-27:
--------------------------------------

Does anyone have any comments on the patch?
I guess this issue is beneath the radar since it doesn't have a "affects version" added to it.
It is very important to me though, since we run a cluster with limited disk space on a few of the nodes.

> MapRed tries to allocate tasks to nodes that have no available disk space
> -------------------------------------------------------------------------
>
>          Key: HADOOP-27
>          URL: http://issues.apache.org/jira/browse/HADOOP-27
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Reporter: Mike Cafarella
>  Attachments: minspace_mapredtask.patch
>
>   What it says above.  MapRed TaskTrackers should not offer task service if the local disk
> space is too constrained.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun 26 17:20:18 2006
Return-Path: 
 <hadoop-dev-return-2167-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 3668 invoked from network); 26 Jun 2006 17:20:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jun 2006 17:20:18 -0000
Received: (qmail 90882 invoked by uid 500); 26 Jun 2006 17:20:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 90850 invoked by uid 500); 26 Jun 2006 17:20:16 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 90840 invoked by uid 99); 26 Jun 2006 17:20:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 10:20:16 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.126.228.150] (HELO rsmtp2.corp.yahoo.com)
 (207.126.228.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 10:20:16 -0700
Received: from [207.126.231.236] (eric14-mac.corp.yahoo.com [207.126.231.236])
	(authenticated bits=0)
	by rsmtp2.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k5QHJpXU089142
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Mon, 26 Jun 2006 10:19:52 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=tMRs0hMkKL67Kwq6JCItOuJ5GA7bhEjPDdTPcNtlfnIwTOkNdQpvaMW+XGBEd6UW
Mime-Version: 1.0 (Apple Message framework v750)
In-Reply-To: <238b647beae2c486eae4cd21eab67fcd@yahoo-inc.com>
References: <e1d10fc00606190842w5a35f717g8a0afc0bcd0fc418@mail.gmail.com>
 <4496E066.2060701@apache.org>
 <e1d10fc00606191046h4ad4aaf5l1e640c91244e39c0@mail.gmail.com>
 <238b647beae2c486eae4cd21eab67fcd@yahoo-inc.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <49B33F79-152B-4054-9421-AE2546E8918D@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Eric Baldeschwieler <eric14@yahoo-inc.com>
Subject: Re: Redundant (?) lengths in SequenceFile
Date: Mon, 26 Jun 2006 08:34:44 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.750)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Can we turn this around and assume that writables will be given a  
stream and a length when they read?  That would also let us remove  
redundant info...

On Jun 19, 2006, at 11:02 AM, Owen O'Malley wrote:

>
> On Jun 19, 2006, at 10:46 AM, Paul Sutter wrote:
>
>> How can I define a comparator that can compare raw binary data?  
>> (our keys
>> are raw binary data)
>
> Paul,
>    Look at what I did for BytesWritable (lines 147-165). You need  
> to define a Comparator class and register it with WritableComparable.
>
> -- Owen
>


From MAILER-DAEMON Mon Jun 26 16:26:05 2006
Return-Path: 
 <hadoop-dev-return-2166-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86809 invoked from network); 26 Jun 2006 16:26:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jun 2006 16:26:05 -0000
Received: (qmail 20775 invoked by uid 500); 26 Jun 2006 16:26:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 20626 invoked by uid 500); 26 Jun 2006 16:26:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 20617 invoked by uid 99); 26 Jun 2006 16:26:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 09:26:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 09:26:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 999DF410007
	for <hadoop-dev@lucene.apache.org>; Mon, 26 Jun 2006 16:24:30 +0000 (GMT)
Message-ID: <25834068.1151339070626.JavaMail.jira@brutus>
Date: Mon, 26 Jun 2006 16:24:30 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-313) running a reduce task standalone
In-Reply-To: <10995504.1150932689891.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-313?page=comments#action_12417837 ] 

Owen O'Malley commented on HADOOP-313:
--------------------------------------

An option to keep failed reduces would be useful, but I've certainly seen cases before where I wanted to run a particular fragment in the debugger, even if it didn't crash.

> running a reduce task standalone
> --------------------------------
>
>          Key: HADOOP-313
>          URL: http://issues.apache.org/jira/browse/HADOOP-313
>      Project: Hadoop
>         Type: Bug

>     Reporter: Michel Tourn
>     Assignee: Michel Tourn
>  Attachments: sareduce.patch
>
> This is a tool to reproduce problems and to run unit tests involving a reduce task.
> You just give it a reduce directory on the command line.
> Usage: java org.apache.hadoop.mapred.StandaloneReduceTask <taskdir> [<limitmaps>]
> taskdir name encodes: task_<jobid>_r_<partition>_<attempt>
> taskdir contains job.xml and one or more input files named: map_<dddd>.out
> You should run with the same -Xmx option as the TaskTracker child JVM

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun 26 17:34:06 2006
Return-Path: 
 <hadoop-dev-return-2168-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8108 invoked from network); 26 Jun 2006 17:34:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jun 2006 17:34:06 -0000
Received: (qmail 12596 invoked by uid 500); 26 Jun 2006 17:34:06 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 12573 invoked by uid 500); 26 Jun 2006 17:34:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 12564 invoked by uid 99); 26 Jun 2006 17:34:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 10:34:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 10:34:05 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 573BF41000A
	for <hadoop-dev@lucene.apache.org>; Mon, 26 Jun 2006 17:32:32 +0000 (GMT)
Message-ID: <31525140.1151343152354.JavaMail.jira@brutus>
Date: Mon, 26 Jun 2006 17:32:32 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-319) FileSystem "close" does not remove
 the closed fs from the fs map
In-Reply-To: <17005151.1151009429839.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-319?page=all ]
     
Doug Cutting resolved HADOOP-319:
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Hairong.

> FileSystem "close" does not remove the closed fs from the fs map
> ----------------------------------------------------------------
>
>          Key: HADOOP-319
>          URL: http://issues.apache.org/jira/browse/HADOOP-319
>      Project: Hadoop
>         Type: Bug

>   Components: fs
>     Versions: 0.3.2
>     Reporter: Hairong Kuang
>     Assignee: Hairong Kuang
>      Fix For: 0.4.0
>  Attachments: fs_close.patch, fs_close.patch, fs_close.patch
>
> The close methods of both DistributedFileSystem and LocalFileSystem do not remove the closed file system from the fs map in FileSystem. As a result, a subsequent call to FileSystem.getNamed may return the handle to the closed file system and receive errors if perform any operation on the fs handle.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun 26 17:39:05 2006
Return-Path: 
 <hadoop-dev-return-2169-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9717 invoked from network); 26 Jun 2006 17:39:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jun 2006 17:39:05 -0000
Received: (qmail 19182 invoked by uid 500); 26 Jun 2006 17:39:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 19032 invoked by uid 500); 26 Jun 2006 17:39:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 19023 invoked by uid 99); 26 Jun 2006 17:39:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 10:39:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 10:39:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1874A410009
	for <hadoop-dev@lucene.apache.org>; Mon, 26 Jun 2006 17:37:31 +0000 (GMT)
Message-ID: <15038775.1151343451097.JavaMail.jira@brutus>
Date: Mon, 26 Jun 2006 17:37:31 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-135) Potential deadlock in JobTracker.
In-Reply-To: <69894223.1144974540263.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-135?page=all ]
     
Doug Cutting resolved HADOOP-135:
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Owen.

> Potential deadlock in JobTracker.
> ---------------------------------
>
>          Key: HADOOP-135
>          URL: http://issues.apache.org/jira/browse/HADOOP-135
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.1.0
>     Reporter: Konstantin Shvachko
>     Assignee: Owen O'Malley
>      Fix For: 0.4.0
>  Attachments: fix-lock-order.patch
>
> org.apache.hadoop.mapred.JobTracker.RetireJobs.run()
> locks resources in this order
>                 synchronized (jobs) {
>                     synchronized (jobInitQueue) {
>                         synchronized (jobsByArrival) {
> org.apache.hadoop.mapred.JobTracker.submitJob()
> locks resources in a different order
>         synchronized (jobs) {
>             synchronized (jobsByArrival) {
>                 synchronized (jobInitQueue) {
> This potentially can lead to a deadlock.
> Unless there is common lock on top of it in which case these
> three locks are redundant.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun 26 17:49:04 2006
Return-Path: 
 <hadoop-dev-return-2170-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12085 invoked from network); 26 Jun 2006 17:49:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jun 2006 17:49:04 -0000
Received: (qmail 33433 invoked by uid 500); 26 Jun 2006 17:49:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 33414 invoked by uid 500); 26 Jun 2006 17:49:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 33405 invoked by uid 99); 26 Jun 2006 17:49:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 10:49:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 10:49:02 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 18126410008
	for <hadoop-dev@lucene.apache.org>; Mon, 26 Jun 2006 17:47:30 +0000 (GMT)
Message-ID: <7831319.1151344050095.JavaMail.jira@brutus>
Date: Mon, 26 Jun 2006 17:47:30 +0000 (GMT+00:00)
From: "KuroSaka TeruHiko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-323) IO Exception at
 LocalFileSystem.renameRaw, when running Nutch nightly builds (0.8-dev).
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

IO Exception at LocalFileSystem.renameRaw, when running Nutch nightly builds (0.8-dev).
---------------------------------------------------------------------------------------

         Key: HADOOP-323
         URL: http://issues.apache.org/jira/browse/HADOOP-323
     Project: Hadoop
        Type: Bug

  Components: fs  
    Versions: 0.3.2    
 Environment: Windows XP + CygWin
    Reporter: KuroSaka TeruHiko


IO Exception at LocalFileSystem.renameRaw, when running Nutch nightly builds (0.8-dev).
Please see the deatil descriptions in:
http://issues.apache.org/jira/browse/NUTCH-266

Not knowing how to reclassify an existing bug, I am opening this new bug under Hadoop.

The version number is 0.3.3 but because I don't see it in the jira list, I chose the closest matching version.  The Nutch-with-GUI build was running with hadoop-0.2 but stopped running, exhibiting the same symptom with other nightly builds, when switched to use hadoop-0.3.3.

I checked "fs" as component but this bug could also be caused by the order in which jobs are scheduled, I suspect.



-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun 26 17:51:04 2006
Return-Path: 
 <hadoop-dev-return-2171-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12967 invoked from network); 26 Jun 2006 17:51:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jun 2006 17:51:04 -0000
Received: (qmail 40007 invoked by uid 500); 26 Jun 2006 17:51:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 39977 invoked by uid 500); 26 Jun 2006 17:51:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 39968 invoked by uid 99); 26 Jun 2006 17:51:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 10:51:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 10:51:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9DCDD410008
	for <hadoop-dev@lucene.apache.org>; Mon, 26 Jun 2006 17:49:30 +0000 (GMT)
Message-ID: <1048698.1151344170643.JavaMail.jira@brutus>
Date: Mon, 26 Jun 2006 17:49:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-278) a missing map/reduce input directory
 does not produce a user-visible error message
In-Reply-To: <6294549.1149613229830.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-278?page=all ]
     
Doug Cutting resolved HADOOP-278:
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Owen!

> a missing map/reduce input directory does not produce a user-visible error message
> ----------------------------------------------------------------------------------
>
>          Key: HADOOP-278
>          URL: http://issues.apache.org/jira/browse/HADOOP-278
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.3.1
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.4.0
>  Attachments: input-dir-check.patch
>
> If map/reduce's input directory is in DFS and does not exist, the user has to find the problem in the jobtracker logs rather than either the launching program or the webapp.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun 26 18:19:04 2006
Return-Path: 
 <hadoop-dev-return-2172-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23339 invoked from network); 26 Jun 2006 18:19:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jun 2006 18:19:04 -0000
Received: (qmail 83703 invoked by uid 500); 26 Jun 2006 18:19:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 83677 invoked by uid 500); 26 Jun 2006 18:19:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 83667 invoked by uid 99); 26 Jun 2006 18:19:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 11:19:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 11:19:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 981B4410008
	for <hadoop-dev@lucene.apache.org>; Mon, 26 Jun 2006 18:17:30 +0000 (GMT)
Message-ID: <11698651.1151345850620.JavaMail.jira@brutus>
Date: Mon, 26 Jun 2006 18:17:30 +0000 (GMT+00:00)
From: "Bryan Pendleton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-27) MapRed tries to allocate tasks to
 nodes that have no available disk space
In-Reply-To: <1424617142.1139335680270.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-27?page=comments#action_12417866 ] 

Bryan Pendleton commented on HADOOP-27:
---------------------------------------

I still think this issue is important. The point of MapReduce is to squeeze as much performance out of what you've got as possible. I regularly have machines with hundreds of gigs of space fail because one of their 4 drives is full. And, yes, the cascading failure problem is the real kicker. It sounds like your patch attacks both of those things - as soon as I have a chance, I'll test it against my current cluster and see how it performs.

> MapRed tries to allocate tasks to nodes that have no available disk space
> -------------------------------------------------------------------------
>
>          Key: HADOOP-27
>          URL: http://issues.apache.org/jira/browse/HADOOP-27
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Reporter: Mike Cafarella
>  Attachments: minspace_mapredtask.patch
>
>   What it says above.  MapRed TaskTrackers should not offer task service if the local disk
> space is too constrained.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun 26 18:25:09 2006
Return-Path: 
 <hadoop-dev-return-2173-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 25415 invoked from network); 26 Jun 2006 18:25:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jun 2006 18:25:09 -0000
Received: (qmail 98442 invoked by uid 500); 26 Jun 2006 18:25:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98329 invoked by uid 500); 26 Jun 2006 18:25:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98320 invoked by uid 99); 26 Jun 2006 18:25:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 11:25:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 11:25:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 019CE410008
	for <hadoop-dev@lucene.apache.org>; Mon, 26 Jun 2006 18:23:31 +0000 (GMT)
Message-ID: <14906073.1151346211002.JavaMail.jira@brutus>
Date: Mon, 26 Jun 2006 18:23:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-301) the randomwriter example will clobber
 the output file
In-Reply-To: <26440939.1150239809853.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-301?page=all ]
     
Doug Cutting resolved HADOOP-301:
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Owen.

> the randomwriter example will clobber the output file
> -----------------------------------------------------
>
>          Key: HADOOP-301
>          URL: http://issues.apache.org/jira/browse/HADOOP-301
>      Project: Hadoop
>         Type: Improvement

>   Components: mapred
>     Versions: 0.3.2
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.4.0
>  Attachments: noclobber-rand-write.patch
>
> The randomwriter will automatically clobber the output directory, which is dangerous given the lack of permissions in  dfs.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun 26 18:31:09 2006
Return-Path: 
 <hadoop-dev-return-2174-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 26943 invoked from network); 26 Jun 2006 18:31:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jun 2006 18:31:09 -0000
Received: (qmail 8857 invoked by uid 500); 26 Jun 2006 18:31:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 8827 invoked by uid 500); 26 Jun 2006 18:31:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 8817 invoked by uid 99); 26 Jun 2006 18:31:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 11:31:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 11:31:08 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A3F94410007
	for <hadoop-dev@lucene.apache.org>; Mon, 26 Jun 2006 18:29:30 +0000 (GMT)
Message-ID: <17449851.1151346570668.JavaMail.jira@brutus>
Date: Mon, 26 Jun 2006 18:29:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-304) UnregisteredDatanodeException message
 correction
In-Reply-To: <17688881.1150324529971.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-304?page=all ]
     
Doug Cutting resolved HADOOP-304:
---------------------------------

    Fix Version: 0.4.0
     Resolution: Fixed

I just committed this.  Thanks, Konstantin.

> UnregisteredDatanodeException message correction
> ------------------------------------------------
>
>          Key: HADOOP-304
>          URL: http://issues.apache.org/jira/browse/HADOOP-304
>      Project: Hadoop
>         Type: Bug

>     Versions: 0.3.2
>     Reporter: Konstantin Shvachko
>     Assignee: Konstantin Shvachko
>     Priority: Trivial
>      Fix For: 0.4.0
>  Attachments: UnregisteredDatanodeException.patch
>


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun 26 18:40:04 2006
Return-Path: 
 <hadoop-dev-return-2175-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 28575 invoked from network); 26 Jun 2006 18:40:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jun 2006 18:40:04 -0000
Received: (qmail 23832 invoked by uid 500); 26 Jun 2006 18:40:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23805 invoked by uid 500); 26 Jun 2006 18:40:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23796 invoked by uid 99); 26 Jun 2006 18:40:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 11:40:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 11:40:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B20E0410007
	for <hadoop-dev@lucene.apache.org>; Mon, 26 Jun 2006 18:38:30 +0000 (GMT)
Message-ID: <1273037.1151347110726.JavaMail.jira@brutus>
Date: Mon, 26 Jun 2006 18:38:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-305) tasktracker waits for 10 seconds for
 asking for a task.
In-Reply-To: <6692632.1150411649859.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-305?page=all ]
     
Doug Cutting resolved HADOOP-305:
---------------------------------

    Fix Version: 0.4.0
     Resolution: Fixed

I just committed this.  Thanks, Mahadev.

> tasktracker waits for 10 seconds for asking for a task.
> -------------------------------------------------------
>
>          Key: HADOOP-305
>          URL: http://issues.apache.org/jira/browse/HADOOP-305
>      Project: Hadoop
>         Type: Improvement

>   Components: mapred
>     Versions: 0.4.0
>     Reporter: Mahadev konar
>     Assignee: Mahadev konar
>     Priority: Minor
>      Fix For: 0.4.0
>  Attachments: tasktracker.patch
>
> the tasktracker should ask for a job as soon as a job running on it is finished. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun 26 18:48:04 2006
Return-Path: 
 <hadoop-dev-return-2176-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30440 invoked from network); 26 Jun 2006 18:48:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jun 2006 18:48:04 -0000
Received: (qmail 37552 invoked by uid 500); 26 Jun 2006 18:48:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 37517 invoked by uid 500); 26 Jun 2006 18:48:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 37506 invoked by uid 99); 26 Jun 2006 18:48:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 11:48:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 11:48:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9CE3D410007
	for <hadoop-dev@lucene.apache.org>; Mon, 26 Jun 2006 18:46:30 +0000 (GMT)
Message-ID: <19717561.1151347590639.JavaMail.jira@brutus>
Date: Mon, 26 Jun 2006 18:46:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-59) support generic command-line options
In-Reply-To: <321463887.1140733957324.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-59?page=comments#action_12417877 ] 

Doug Cutting commented on HADOOP-59:
------------------------------------

The analogy is with the cvs and svn command line programs, which support both general options, determining which servers to talk to, etc., then command-specific options.  The documentation then can be organized similarly, describing general options, then each command and its options.  The set of commands is extensible (any class with a main() can be specified to bin/hadoop), and each command need only provide documentation for its options.

> support generic command-line options
> ------------------------------------
>
>          Key: HADOOP-59
>          URL: http://issues.apache.org/jira/browse/HADOOP-59
>      Project: Hadoop
>         Type: Improvement

>   Components: conf
>     Versions: 0.2.0
>     Reporter: Doug Cutting
>     Assignee: Hairong Kuang
>     Priority: Minor
>      Fix For: 0.4.0
>  Attachments: Tool.java, ToolBase.java, bashfile.patch, commons-cli-2.0-SNAPSHOT.jar, genericCommand.patch, toolbase.patch
>
> Hadoop commands should all support some common options.  For example, it should be possible to specify the namenode, datanode, and, for that matter, any config option, in a generic way.
> This could be implemented with code like:
> public interface Tool extends Configurable {
>   void run(String[] args) throws Exception;
> }
> public class ToolBase implements Tool extends Configured {
>   public final void main(String[] args) throws Exception {
>     Configuration conf = new Configuration();
>     ... parse config options from args into conf ...
>     this.configure(conf);
>     this.run();
>   }
> }
> public MyTool extends ExcecutableBase {
>   public static void main(String[] args) throws Exception {
>     new MyTool().main(args);
>   }
> }
> The general command line syntax could be:
> bin/hadoop [generalOptions] command [commandOptions]
> Where generalOptions are things that ToolBase handles, and only the commandOptions are passed to Tool.run().  The most important generalOption would be '-D', which would define name/value pairs that are set in the configuration.  This alone would permit folks to set the namenode, datanode, etc.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun 26 21:02:03 2006
Return-Path: 
 <hadoop-dev-return-2177-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 74801 invoked from network); 26 Jun 2006 21:02:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jun 2006 21:02:03 -0000
Received: (qmail 43567 invoked by uid 500); 26 Jun 2006 21:02:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 43420 invoked by uid 500); 26 Jun 2006 21:02:02 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 43408 invoked by uid 99); 26 Jun 2006 21:02:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 14:02:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [74.0.0.77] (HELO linuxfly.dragonflymc.com) (74.0.0.77)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 14:02:01 -0700
Received: from [192.168.1.246] (unknown [63.133.162.98])
	by linuxfly.dragonflymc.com (Postfix) with ESMTP id DC92CC2006B
	for <hadoop-dev@lucene.apache.org>; Mon, 26 Jun 2006 16:01:50 -0500 (CDT)
Message-ID: <44A04B2B.4050803@dragonflymc.com>
Date: Mon, 26 Jun 2006 16:01:31 -0500
From: Dennis Kubes <nutch-dev@dragonflymc.com>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Error on Build
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Is anybody else seeing this error on the build?

BUILD FAILED
C:\PROGRAMMING\java\eclipse\workspace\hadoop-dev\build.xml:138: 
java.lang.IncompatibleClassChangeError: class 
org.apache.jasper.runtime.JspFragmentHelper has interface 
javax.servlet.jsp.tagext.JspFragment as super class

Total time: 1 second


From MAILER-DAEMON Mon Jun 26 21:05:01 2006
Return-Path: 
 <hadoop-dev-return-2178-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75360 invoked from network); 26 Jun 2006 21:05:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jun 2006 21:05:01 -0000
Received: (qmail 47472 invoked by uid 500); 26 Jun 2006 21:05:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47451 invoked by uid 500); 26 Jun 2006 21:05:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47440 invoked by uid 99); 26 Jun 2006 21:05:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 14:05:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [74.0.0.77] (HELO linuxfly.dragonflymc.com) (74.0.0.77)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 14:05:00 -0700
Received: from [192.168.1.246] (unknown [63.133.162.98])
	by linuxfly.dragonflymc.com (Postfix) with ESMTP id 81D76C2006B
	for <hadoop-dev@lucene.apache.org>; Mon, 26 Jun 2006 16:04:50 -0500 (CDT)
Message-ID: <44A04BE4.7020106@dragonflymc.com>
Date: Mon, 26 Jun 2006 16:04:36 -0500
From: Dennis Kubes <nutch-dev@dragonflymc.com>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: Error on Build
References: <44A04B2B.4050803@dragonflymc.com>
In-Reply-To: <44A04B2B.4050803@dragonflymc.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Never mind, old j2ee.jar file from something else in ant home lib 
directory. :-)

Dennis Kubes wrote:
> Is anybody else seeing this error on the build?
>
> BUILD FAILED
> C:\PROGRAMMING\java\eclipse\workspace\hadoop-dev\build.xml:138: 
> java.lang.IncompatibleClassChangeError: class 
> org.apache.jasper.runtime.JspFragmentHelper has interface 
> javax.servlet.jsp.tagext.JspFragment as super class
>
> Total time: 1 second
>

From MAILER-DAEMON Mon Jun 26 21:13:05 2006
Return-Path: 
 <hadoop-dev-return-2179-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77133 invoked from network); 26 Jun 2006 21:13:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jun 2006 21:13:05 -0000
Received: (qmail 57017 invoked by uid 500); 26 Jun 2006 21:13:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 56989 invoked by uid 500); 26 Jun 2006 21:13:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 56980 invoked by uid 99); 26 Jun 2006 21:13:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 14:13:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 14:13:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C2CF0410008
	for <hadoop-dev@lucene.apache.org>; Mon, 26 Jun 2006 21:11:30 +0000 (GMT)
Message-ID: <19927367.1151356290795.JavaMail.jira@brutus>
Date: Mon, 26 Jun 2006 21:11:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-59) support generic command-line options
In-Reply-To: <321463887.1140733957324.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-59?page=all ]
     
Doug Cutting resolved HADOOP-59:
--------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Hairong!

> support generic command-line options
> ------------------------------------
>
>          Key: HADOOP-59
>          URL: http://issues.apache.org/jira/browse/HADOOP-59
>      Project: Hadoop
>         Type: Improvement

>   Components: conf
>     Versions: 0.2.0
>     Reporter: Doug Cutting
>     Assignee: Hairong Kuang
>     Priority: Minor
>      Fix For: 0.4.0
>  Attachments: Tool.java, ToolBase.java, bashfile.patch, commons-cli-2.0-SNAPSHOT.jar, genericCommand.patch, toolbase.patch
>
> Hadoop commands should all support some common options.  For example, it should be possible to specify the namenode, datanode, and, for that matter, any config option, in a generic way.
> This could be implemented with code like:
> public interface Tool extends Configurable {
>   void run(String[] args) throws Exception;
> }
> public class ToolBase implements Tool extends Configured {
>   public final void main(String[] args) throws Exception {
>     Configuration conf = new Configuration();
>     ... parse config options from args into conf ...
>     this.configure(conf);
>     this.run();
>   }
> }
> public MyTool extends ExcecutableBase {
>   public static void main(String[] args) throws Exception {
>     new MyTool().main(args);
>   }
> }
> The general command line syntax could be:
> bin/hadoop [generalOptions] command [commandOptions]
> Where generalOptions are things that ToolBase handles, and only the commandOptions are passed to Tool.run().  The most important generalOption would be '-D', which would define name/value pairs that are set in the configuration.  This alone would permit folks to set the namenode, datanode, etc.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun 26 21:26:05 2006
Return-Path: 
 <hadoop-dev-return-2180-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 79698 invoked from network); 26 Jun 2006 21:26:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jun 2006 21:26:05 -0000
Received: (qmail 81520 invoked by uid 500); 26 Jun 2006 21:26:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 81374 invoked by uid 500); 26 Jun 2006 21:26:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 81365 invoked by uid 99); 26 Jun 2006 21:26:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 14:26:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 14:26:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A1C39410007
	for <hadoop-dev@lucene.apache.org>; Mon, 26 Jun 2006 21:24:30 +0000 (GMT)
Message-ID: <17430417.1151357070659.JavaMail.jira@brutus>
Date: Mon, 26 Jun 2006 21:24:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-321) DatanodeInfo refactoring
In-Reply-To: <20976373.1151024969902.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-321?page=comments#action_12417893 ] 

Doug Cutting commented on HADOOP-321:
-------------------------------------

I like this.  However we cannot simply remove DataNodeReport, since it's public, and may be referenced by user code.  Rather, we should change it to a deprecated subclass of DatanodeInfo that defines no methods, and file a bug to remove it from the next release.  Also, DatanodeInfo subclasses the non-public DatanodeID, so that class should probably be made public too.

> DatanodeInfo refactoring
> ------------------------
>
>          Key: HADOOP-321
>          URL: http://issues.apache.org/jira/browse/HADOOP-321
>      Project: Hadoop
>         Type: Improvement

>   Components: dfs
>     Reporter: Konstantin Shvachko
>  Attachments: DatanodeInfo_refactor.patch
>
> I'm trying to refactor some name node classes, which seem to be similar.
> So DatanodeInfo is a public api now for purely external ( to name node) use.
> The name node class that stores information about data nodes including the
> set of its blocks is called DatanodeDescriptor.
> The DatanodeReport is removed since it was a variation of DatanodeInfo.
> Previously DatanodeInfo and DatanodeDescriptor were the same class, and
> DatanodeReport was used for reporting node statistics only.
> This is a preparation step for HADOOP-306.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun 26 21:30:05 2006
Return-Path: 
 <hadoop-dev-return-2181-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 80510 invoked from network); 26 Jun 2006 21:30:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jun 2006 21:30:05 -0000
Received: (qmail 85477 invoked by uid 500); 26 Jun 2006 21:30:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 85456 invoked by uid 500); 26 Jun 2006 21:30:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 85447 invoked by uid 99); 26 Jun 2006 21:30:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 14:30:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 14:30:04 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1B631410008
	for <hadoop-dev@lucene.apache.org>; Mon, 26 Jun 2006 21:28:31 +0000 (GMT)
Message-ID: <28571706.1151357311109.JavaMail.jira@brutus>
Date: Mon, 26 Jun 2006 21:28:31 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-320) bin/hadoop dfs -mv does not mv
  source's checksum file if source is a file
In-Reply-To: <20152082.1151017529846.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-320?page=comments#action_12417895 ] 

Doug Cutting commented on HADOOP-320:
-------------------------------------

FileSystem.rename() already renames the .crc file, no?  That's the primary difference between 'rename' and 'renameRaw'.  Unless I hear otherwise, I will resolve this as "cannot reproduce".

> bin/hadoop dfs -mv does not mv  source's checksum file if source is a file
> --------------------------------------------------------------------------
>
>          Key: HADOOP-320
>          URL: http://issues.apache.org/jira/browse/HADOOP-320
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.3.2
>     Reporter: Hairong Kuang
>     Assignee: Hairong Kuang
>      Fix For: 0.4.0
>  Attachments: rename.patch
>
> None of the rename operation of DistributedSystem or DFSClient checks if the source is a file or not. Need also to rename the checksum file accordingly if the source is a file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun 26 21:49:09 2006
Return-Path: 
 <hadoop-dev-return-2182-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 83659 invoked from network); 26 Jun 2006 21:49:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jun 2006 21:49:09 -0000
Received: (qmail 6551 invoked by uid 500); 26 Jun 2006 21:49:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 6504 invoked by uid 500); 26 Jun 2006 21:49:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 6475 invoked by uid 99); 26 Jun 2006 21:49:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 14:49:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [209.10.110.95] (HELO londo.swishmail.com) (209.10.110.95)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 14:48:59 -0700
Received: (qmail 2980 invoked by uid 89); 26 Jun 2006 21:48:38 -0000
Received: from unknown (HELO ?192.168.0.10?) (69.181.97.11)
  by londo.swishmail.com with SMTP; 26 Jun 2006 21:48:38 -0000
Message-ID: <44A0562F.1010204@apache.org>
Date: Mon, 26 Jun 2006 14:48:31 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.4 (X11/20060615)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: Redundant (?) lengths in SequenceFile
References: <e1d10fc00606190842w5a35f717g8a0afc0bcd0fc418@mail.gmail.com>
 <4496E066.2060701@apache.org>
 <e1d10fc00606191046h4ad4aaf5l1e640c91244e39c0@mail.gmail.com>
 <238b647beae2c486eae4cd21eab67fcd@yahoo-inc.com>
 <49B33F79-152B-4054-9421-AE2546E8918D@yahoo-inc.com>
In-Reply-To: <49B33F79-152B-4054-9421-AE2546E8918D@yahoo-inc.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Eric Baldeschwieler wrote:
> Can we turn this around and assume that writables will be given a stream 
> and a length when they read?  That would also let us remove redundant 
> info...

Unless I misunderstand, that would make it harder to nest writables, 
since all containers would need to store the length.  Currently only 
top-level containers (SequenceFile and the RPC protocol) need to write 
lengths.  Even these are optional, used only to optimize things.

Doug

From MAILER-DAEMON Mon Jun 26 22:00:08 2006
Return-Path: 
 <hadoop-dev-return-2183-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85874 invoked from network); 26 Jun 2006 22:00:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jun 2006 22:00:08 -0000
Received: (qmail 23945 invoked by uid 500); 26 Jun 2006 22:00:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23860 invoked by uid 500); 26 Jun 2006 22:00:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23840 invoked by uid 99); 26 Jun 2006 22:00:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 15:00:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 15:00:04 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E6C71410009
	for <hadoop-dev@lucene.apache.org>; Mon, 26 Jun 2006 21:58:30 +0000 (GMT)
Message-ID: <11207244.1151359110942.JavaMail.jira@brutus>
Date: Mon, 26 Jun 2006 21:58:30 +0000 (GMT+00:00)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-322) Need a job control utility to submit
 and monitor a group of jobs which have DAG dependency
In-Reply-To: <4931825.1151126129857.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-322?page=all ]

Runping Qi updated HADOOP-322:
------------------------------

    Attachment: job_control_patch.txt


My patch is attached.

It has two classes: hadoop.jobs.Job and hadoop.jobs.JobControl.

Job class encapsulates a MapReduce job and its dependency. It monitors 
the states of the depending jobs and updates the state of this job.
A job starts in the WAITING state. If it does not have any deoending jobs, or
all of the depending jobs are in SUCCESS state, then the job state will become
READY. If any depending jobs fail, the job will fail too. 
When in READY state, the job can be submitted to Hadoop for execution, with
the state changing into RUNNING state. From RUNNING state, the job can get into 
SUCCESS or FAILED state, depending the status of the jon execution.

JobControl class encapsulates a set of MapReduce jobs and its dependency. It tracks 
the states of the jobs by placing them into different tables according to their 
states.  This class provides APIs for the client app to add  jobs to the group and to get 
the jobs in different states. When a 
job is added, an ID unique to the group is assigned to the job. 
This class has a thread that submits jobs when they become ready, monitors the
states of the running jobs, and updates the states of jobs based on the state changes 
of their depending jobs states. The class provides APIs for suspending/resuming
the thread,and for stopping the thread.

A typical use scenarios is as follows:

    create a set of Map/Reduce job confs
    create a Job object per map/reduce job conf with proper depency 
    create a JobControl object
    add the Job objects to the JobControl object
   create a control thread and run it:

                     Thread theController = new Thread(theControl);
	theController.start();
	while (!theControl.allFinished()) {	
	        System.out.println("Jobs in waiting state: " + theControl.getWaitingJobs().size());
	        System.out.println("Jobs in ready state: " + theControl.getReadyJobs().size());
	        System.out.println("Jobs in running state: " + theControl.getRunningJobs().size());
	        System.out.println("Jobs in success state: " + theControl.getSuccessfulJobs().size());
	        System.out.println("Jobs in failed state: " + theControl.getFailedJobs().size());
	        System.out.println("\n");
			
	        try {
	                Thread.sleep(60000);
	        } catch (Exception e) {
				
	        }
	}
	theControl.stop();



> Need a job control utility to submit and monitor a group of jobs which have DAG dependency
> ------------------------------------------------------------------------------------------
>
>          Key: HADOOP-322
>          URL: http://issues.apache.org/jira/browse/HADOOP-322
>      Project: Hadoop
>         Type: New Feature

>     Reporter: Runping Qi
>     Assignee: Runping Qi
>  Attachments: job_control_patch.txt
>
> In my applications, some jobs depend on the outputs of other jobs. Therefore, job dependency forms a DAG. A job is ready to run if and only if it does not have any dependency or all the jobs it depends are finished successfully. To help schedule and monitor a group of jobs like that, I am thinking of implementing a utility that:
> 	- accept jobs with dependency specification
>       - monitor job status
>       - submit jobs when they are ready
> With such a utility, the application can construct its jobs, specify their dependency and then hand the jobs to the utility class. The utility takes care of the details of job submission.
> I'll post my design skech for comments/suggestion.
> Eventually, I'll submit a patch for the utility.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun 26 22:00:09 2006
Return-Path: 
 <hadoop-dev-return-2184-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85884 invoked from network); 26 Jun 2006 22:00:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jun 2006 22:00:09 -0000
Received: (qmail 24464 invoked by uid 500); 26 Jun 2006 22:00:07 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24387 invoked by uid 500); 26 Jun 2006 22:00:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24354 invoked by uid 99); 26 Jun 2006 22:00:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 15:00:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 15:00:05 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E08C641000C
	for <hadoop-dev@lucene.apache.org>; Mon, 26 Jun 2006 21:58:32 +0000 (GMT)
Message-ID: <365521.1151359112916.JavaMail.jira@brutus>
Date: Mon, 26 Jun 2006 21:58:32 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-296) Do not assign blocks to a datanode
 with < x mb free
In-Reply-To: <12462846.1150196369845.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-296?page=all ]
     
Doug Cutting resolved HADOOP-296:
---------------------------------

    Fix Version: 0.4.0
     Resolution: Fixed

I just committed this.  Thanks, Johan!

> Do not assign blocks to a datanode with < x mb free
> ---------------------------------------------------
>
>          Key: HADOOP-296
>          URL: http://issues.apache.org/jira/browse/HADOOP-296
>      Project: Hadoop
>         Type: New Feature

>   Components: dfs
>     Versions: 0.3.2
>     Reporter: Johan Oskarson
>      Fix For: 0.4.0
>  Attachments: minspace.patch, minspacev2.patch, minspacev3.patch, minspacev3.patch, minspacev4.patch, minspacev5.patch
>
> We're running a smallish cluster with very different machines, some with only 60 gb harddrives
> This creates a problem when inserting files into the dfs, these machines run out of space quickly and then they cannot run any map reduce operations
> A solution would be to not assign any new blocks once the space is below a certain user configurable threshold
> This free space could then be used by the map reduce operations instead (if that's on the same disk)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun 26 22:27:05 2006
Return-Path: 
 <hadoop-dev-return-2185-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91016 invoked from network); 26 Jun 2006 22:27:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jun 2006 22:27:05 -0000
Received: (qmail 53631 invoked by uid 500); 26 Jun 2006 22:27:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53610 invoked by uid 500); 26 Jun 2006 22:27:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53601 invoked by uid 99); 26 Jun 2006 22:27:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 15:27:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 15:27:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9B9D5410009
	for <hadoop-dev@lucene.apache.org>; Mon, 26 Jun 2006 22:25:30 +0000 (GMT)
Message-ID: <5373794.1151360730634.JavaMail.jira@brutus>
Date: Mon, 26 Jun 2006 22:25:30 +0000 (GMT+00:00)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-288) RFC: Efficient file caching
In-Reply-To: <6015694.1149730109866.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-288?page=comments#action_12417918 ] 

Michel Tourn commented on HADOOP-288:
-------------------------------------

A problematic choice must be made to implement the following.
--
Currently without caching: in Hadoop the Task working directory contains the expanded contents of the job jar. 
Later with caching: the Task working directory contents should be efficiently created from the filecache contents.
--
So how to synchronize the task working directory job jar data with the file cache?
Or how to work around the need to do this?

Some options follow, all have problems. 
Which one is best?
---------------------------------------
Option 1. Symbolic links
This includes Symbolic links to jar files.
It is probably brittle to have classpath elements as symbolic links.
But cross-platform support is a little easier than hard links (next)
--
Option 2. Hard links
Problematic for cross-platform support. Both NTFS and UFS can create hard-linked files.
At best it works on all platforms but requires launching native/cygwin tools.
And possibly cygwin is not good enough to handle hard links on NTFS.
--
Option 2.5 File copy as a fallback mechanism for Option 2.
Problem is that this is slower and partially defeats the purpose of caching.
--
Option 3. 
change the MapReduce Job jar location.
The current convention is "working directory" contains MapReduce code jar and resources.
The modified convention would be that this directory is a parameter (pointing to a specific directory in the archive cache area)
 This new parameter could be exposed to the MapRed job as JobConf param, as a system property or as environment variable.
Upside: pure java. 
Downside: not fully backward compatible
--


> RFC: Efficient file caching
> ---------------------------
>
>          Key: HADOOP-288
>          URL: http://issues.apache.org/jira/browse/HADOOP-288
>      Project: Hadoop
>         Type: Bug

>     Reporter: Michel Tourn
>     Assignee: Michel Tourn

>
> RFC: Efficient file caching 
> (on Hadoop Task nodes, for benefit of MapReduce Tasks)
> ------------------------------------------------------
> We will start implementing this soon. Please provide feedback and improvements to this plan.
> The header "Options:" indicates places where simple choices must be made.
> Problem:
> -------
> o MapReduce tasks require access to additional out-of-band data ("dictionaries")
> This out-of-band data is:
> o in addition to the map/reduce inputs.
> o large (1GB+)
> o broadcast (same data is required on all the Task nodes)
> o changes "infrequently", in particular:
> oo it is always constant for all the Tasks in a Job. 
> oo it is often constant for a month at a time 
> oo it may be shared across team members
> o sometimes used by pure-Java MapReduce programs
> o sometimes used by non-Java MapReduce programs (using Hadoop-Streaming)
> o (future) used by programs that use HDFS and Task-trackers but not MapReduce.
> Existing Solutions to the problem:
> ---------------------------------
> These solutions are not good enough. The present proposal is to do Sol 1 with caching.
> Sol 1: Pure Hadoop: package the out-of-band data in the MapReduce Job jar file.
> Sol 2: Non  Hadoop: for each task node run rsync from single source for data.
> Sol 3: Non  Hadoop: use BitTorrent, etc.
> Sol.1 is correct but slow for many reasons:
>  The Job submitter must recreate a large jar(tar) file for every Job.
>   (The jar contains both changing programs and stable dictionaries)
>  The large Jar file must be propagated from the client to HDFS with 
>  a large replication factor. 
>  At the beginning of every Task, the Task tracker gets the job jar from HDFS 
>  and unjars it in the working directory. This can dominate task execution time.
>  
> Sol.2 has nice properties but also some problems.
>  It does not scale well with large clusters (many concurrent rsync read requests i.e. single-source broadcast)
>  It assumes that Hadoop users can upload data using rsync to the cluster nodes. As a policy, this is not allowed.
>  It requires rsync.
>  
> Sol.3 alleviates the rsync scalability problems but 
>       It is a dependency on an external system. 
>       We want something simpler and more tightly integrated with Hadoop.
>       
> Staging (uploading) out-of-band data:
> ------------------------------------
> The out-of-band data will often originate on the local filesystem of a user machine 
>  (i.e. a MapReduce job submitter)
> Nevertheless it makes sense to use HDFS to store the original out-of-band data because:
> o HDFS has (wide) replication. This enables scalable broadcast later.
> o HDFS is an available channel to move data from clients to all task machines.
> o HDFS is convenient as a shared location among Hadoop team members.
> Accessing (downloading) out-of-band data:
> ----------------------------------------
> The non-Java MapReduce programs do not have or want[1] APIs for HDFS.
> Instead these programs just want to access out-of-band data as 
>  local files at predefined paths.
> ([1] Existing programs should be reusable with no changes. 
>  This is often possible bec. communication is over stdin/stdout.)
> Job's jar file as a special case:
> --------------------------------
> One use case is to allow users to make the job jar itself cachable.
> This is only useful in cases where NOTHING changes when a job is resubmitted
>  (no MapRed code changes and no changes in shipped data)
> This situation might occur with an 'extractor' job (gets data from an external source: like Nutch crawler)
> Currently the Hadoop mapred-jar mechanism works in this way:
>  the job jar data is unjarred in the "working directory" of the Task 
>  the jar contains both MapRed java code (added to classpath)
> Cache synchronization:
> ---------------------
> The efficient implementation of the out-of-band data distribution
> is mostly a cache synchronization problem.
> A list of the various aspects where choices must be made follows.
> Cache key:
> ---------
> How do you test that the cached copy is out-of-date?
> Options: 
> 1. the archive/file timestamp 
> 2. the MD5 of the archive/file content
> Comparing source and destination Timestamps is problematic bec. it assumes synchronized clocks.
> Also there is no last-modif metadata in HDFS (for good reasons, like scalability of metadata ops)
> Timestamps stored with the source ('last-propagate-time') do 
>  not require synchronized clocks, only locally monotonic time. 
> (and the worse which can happen at daylight-savings switch is a missed update or an extra-update)
> The cache code could store a copy of the local timestamp 
> in the same way that it caches the value of the content hash along with the source data.
>  
> Cachable unit:
> -------------
> Options: individual files or archives or both.
> Note:
> At the API level, directories will be processed recursively 
> (and the local FS directories will parallel HDFS directories)
> So bulk operations are always possible using directories.
> The question here is whether to handle archives as an additional bulk mechanism.
> Archives are special because:
> o unarchiving occurs transparently as part of the cache sync
> o The cache key is computed on the archive and preserved although 
>   the archive itself is not preserved.
> Supported archive format will be: tar (maybe tgz or compressed jar)
> Archive detection test: by filename extension ".tar" or ".jar"
> Suppose we don't handle archives as special files:
> Pros:
>  o less code, no discussion about which archive formats are supported
>  o fine for large dictionary files. And when files are not large, user may as well
>    put them in the Job jar as usual.
>  o user code could always check and unarchive specific cached files
>    (as a side-effect of MapRed task initialization)
> Cons:
>  o handling small files may be inefficient 
>   (multiple HDFS operations, multiple hash computation, 
>    one 'metadata' hash file along with each small file)
>  o It will not be possible to handle the Job's jar file as a special case of caching 
> Cache isolation: 
> ---------------
> In some cases it may be a problem if the cached HDFS files are updated while a Job is in progress:
> The file may become unavailable for a short period of time and some tasks fail.
> The file may change (atomically) and different tasks use a different version.
> This isolation problem is not addressed in this proposal.
> Standard solutions to the isolation problem are:
> o Assume that Jobs and interfering cache updates won't occur concurrently.
> o Put a version number in the HDFS file paths and refer to a hard-coded version in the Job code.
> o Before running the MapRed job, run a non-distributed application that tests
>   what is the latest available version of the out-of-band data. 
>   Then make this version available to the MapRed job.
>   Two ways to do this. 
>   o either set a job property just-in-time:
>     addCachePathPair("/mydata/v1234/", "localcache/mydata_latest"); 
>     (see Job Configuration for meaning of this)
>   o or publish the decision as an HDFS file containing the version.
>     then rely on user code to read the version, and manually populate the cache:
>     Cache.syncCache("/hdfs/path/fileordir", "relative/local/fileordir");
>     (see MapReduce API for meaning of this)
> Cache synchronization stages:
> ----------------------------
> There are two stages: Client-to-HDFS and HDFS-to-TaskTracker
> o Client-to-HDFS stage.
> Options: A simple option is to not do anything here, i.e. rely on the user.
> This is a reasonable option given previous remarks on the role of HDFS:
>  HDFS is a staging/publishing area and a natural shared location.
> In particular this means that the system need not track 
> where the client files come from.
> o HDFS-to-TaskTracker:
> Client-to-HDFS synchronization (if done at all) should happen before this.
> Then HDFS-to-TaskTracker synchronization must happen right before 
> the data is needed on a node.
> MapReduce cache API:
> -------------------
> Options:
> 1. No change in MapReduce framework code:
> require the user to put this logic in map() (or reduce) function:
>  in MyMapper constructor (or in map() on first record) user is asked to add:
>  
>     Cache.syncCache("/hdfs/path/fileordir", "relative/local/fileordir");
>     Cache.syncCache("..."); //etc.
>   
> -----
> 2. Put this logic in MapReduce framework and use Job properties to
>    communicate the list of pairs (hdfs path; local path)
>  
> Directories are processed recursively.
> If archives are treated specially then they are unarchived on destination.
>  
> MapReduce Job Configuration:
> ---------------------------
> Options:
> with No change in MapReduce framework code (see above)
>  no special Job configuration: 
>    it is up to the MapRed writer to configure and run the cache operations.
> ---
> with Logic in MapReduce framework (see above)
>  some simple Job configuration
> JobConf.addCachePathPair(String, String)
> JobConf.addCachePathPair("/hdfs/path/fileordir", "relative/local/fileordir");

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun 26 23:35:05 2006
Return-Path: 
 <hadoop-dev-return-2186-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 4387 invoked from network); 26 Jun 2006 23:35:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jun 2006 23:35:05 -0000
Received: (qmail 9418 invoked by uid 500); 26 Jun 2006 23:35:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9388 invoked by uid 500); 26 Jun 2006 23:35:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9377 invoked by uid 99); 26 Jun 2006 23:35:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 16:35:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 16:35:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9AA6C410009
	for <hadoop-dev@lucene.apache.org>; Mon, 26 Jun 2006 23:33:30 +0000 (GMT)
Message-ID: <4213400.1151364810630.JavaMail.jira@brutus>
Date: Mon, 26 Jun 2006 23:33:30 +0000 (GMT+00:00)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-322) Need a job control utility to submit
 and monitor a group of jobs which have DAG dependency
In-Reply-To: <4931825.1151126129857.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-322?page=all ]

Runping Qi updated HADOOP-322:
------------------------------

    Attachment:     (was: job_control_patch.txt)

> Need a job control utility to submit and monitor a group of jobs which have DAG dependency
> ------------------------------------------------------------------------------------------
>
>          Key: HADOOP-322
>          URL: http://issues.apache.org/jira/browse/HADOOP-322
>      Project: Hadoop
>         Type: New Feature

>     Reporter: Runping Qi
>     Assignee: Runping Qi

>
> In my applications, some jobs depend on the outputs of other jobs. Therefore, job dependency forms a DAG. A job is ready to run if and only if it does not have any dependency or all the jobs it depends are finished successfully. To help schedule and monitor a group of jobs like that, I am thinking of implementing a utility that:
> 	- accept jobs with dependency specification
>       - monitor job status
>       - submit jobs when they are ready
> With such a utility, the application can construct its jobs, specify their dependency and then hand the jobs to the utility class. The utility takes care of the details of job submission.
> I'll post my design skech for comments/suggestion.
> Eventually, I'll submit a patch for the utility.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jun 26 23:35:14 2006
Return-Path: 
 <hadoop-dev-return-2187-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 4421 invoked from network); 26 Jun 2006 23:35:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jun 2006 23:35:14 -0000
Received: (qmail 9618 invoked by uid 500); 26 Jun 2006 23:35:14 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9588 invoked by uid 500); 26 Jun 2006 23:35:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9579 invoked by uid 99); 26 Jun 2006 23:35:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 16:35:13 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of sutter@gmail.com designates
 64.233.162.198 as permitted sender)
Received: from [64.233.162.198] (HELO nz-out-0102.google.com) (64.233.162.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 16:35:12 -0700
Received: by nz-out-0102.google.com with SMTP id 16so1251557nzp
        for <hadoop-dev@lucene.apache.org>;
 Mon, 26 Jun 2006 16:34:52 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=RHxJmEPvGCJhVMsZGNoMd8DtACJ4SOhHYIWHkx2N69gzdzAPP13QsHpNRefcyigs16z+bGKJfK6HkSF2rf8ca8O9U715cL3KxGrw8pHoKkeJ7KqHQFPqewNgl23P15SpfuOASbtRUglEtIIKQGDtLqxIG4M2RL54AQBsV6T/OOk=
Received: by 10.36.10.20 with SMTP id 20mr308849nzj;
        Mon, 26 Jun 2006 16:34:52 -0700 (PDT)
Received: by 10.36.132.16 with HTTP; Mon, 26 Jun 2006 16:34:52 -0700 (PDT)
Message-ID: <e1d10fc00606261634t7a1b13f3u5838475802dc80c@mail.gmail.com>
Date: Mon, 26 Jun 2006 16:34:52 -0700
From: "Paul Sutter" <sutter@gmail.com>
To: hadoop-dev@lucene.apache.org
Subject: Re: Redundant (?) lengths in SequenceFile
In-Reply-To: <44A0562F.1010204@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_Part_1127_5126169.1151364892161"
References: <e1d10fc00606190842w5a35f717g8a0afc0bcd0fc418@mail.gmail.com>
	 <4496E066.2060701@apache.org>
	 <e1d10fc00606191046h4ad4aaf5l1e640c91244e39c0@mail.gmail.com>
	 <238b647beae2c486eae4cd21eab67fcd@yahoo-inc.com>
	 <49B33F79-152B-4054-9421-AE2546E8918D@yahoo-inc.com>
	 <44A0562F.1010204@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_1127_5126169.1151364892161
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I agree, there's no easy way around this one without separate interfaces
(one where the caller keeps the counts, and one where the writable keeps the
counts), and that would be silly.

However -> It still seems to me that the key length in the sequence file is
redundant.  Since each key must write its own length, know its own length,
or be able to figure it out - even via the high speed interface - there's no
reason to have that key length in the file.

Why do I care about 4 bytes per record? Because we're integrating an
external sort, and right now it has to look at a record with two key
lengths. And I assume that others (such as Yahoo) will want to incorporate
an external sort. And if we're going to be reading the sequence file in
another language, we might as well be sure about the format to use.

Thanks!

Paul

On 6/26/06, Doug Cutting <cutting@apache.org> wrote:
>
> Eric Baldeschwieler wrote:
> > Can we turn this around and assume that writables will be given a stream
> > and a length when they read?  That would also let us remove redundant
> > info...
>
> Unless I misunderstand, that would make it harder to nest writables,
> since all containers would need to store the length.  Currently only
> top-level containers (SequenceFile and the RPC protocol) need to write
> lengths.  Even these are optional, used only to optimize things.
>
> Doug
>

------=_Part_1127_5126169.1151364892161--

From MAILER-DAEMON Mon Jun 26 23:37:11 2006
Return-Path: 
 <hadoop-dev-return-2188-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 4567 invoked from network); 26 Jun 2006 23:37:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jun 2006 23:37:11 -0000
Received: (qmail 10613 invoked by uid 500); 26 Jun 2006 23:37:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 10466 invoked by uid 500); 26 Jun 2006 23:37:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 10457 invoked by uid 99); 26 Jun 2006 23:37:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 16:37:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 16:37:09 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B9D7F410009
	for <hadoop-dev@lucene.apache.org>; Mon, 26 Jun 2006 23:35:31 +0000 (GMT)
Message-ID: <12402632.1151364931758.JavaMail.jira@brutus>
Date: Mon, 26 Jun 2006 23:35:31 +0000 (GMT+00:00)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-322) Need a job control utility to submit
 and monitor a group of jobs which have DAG dependency
In-Reply-To: <4931825.1151126129857.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-322?page=all ]

Runping Qi updated HADOOP-322:
------------------------------

    Attachment: job_control_patch.txt


Fix a bug due to wrong commenting


> Need a job control utility to submit and monitor a group of jobs which have DAG dependency
> ------------------------------------------------------------------------------------------
>
>          Key: HADOOP-322
>          URL: http://issues.apache.org/jira/browse/HADOOP-322
>      Project: Hadoop
>         Type: New Feature

>     Reporter: Runping Qi
>     Assignee: Runping Qi
>  Attachments: job_control_patch.txt
>
> In my applications, some jobs depend on the outputs of other jobs. Therefore, job dependency forms a DAG. A job is ready to run if and only if it does not have any dependency or all the jobs it depends are finished successfully. To help schedule and monitor a group of jobs like that, I am thinking of implementing a utility that:
> 	- accept jobs with dependency specification
>       - monitor job status
>       - submit jobs when they are ready
> With such a utility, the application can construct its jobs, specify their dependency and then hand the jobs to the utility class. The utility takes care of the details of job submission.
> I'll post my design skech for comments/suggestion.
> Eventually, I'll submit a patch for the utility.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 27 01:01:04 2006
Return-Path: 
 <hadoop-dev-return-2189-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17289 invoked from network); 27 Jun 2006 01:01:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 01:01:04 -0000
Received: (qmail 74748 invoked by uid 500); 27 Jun 2006 01:01:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 74700 invoked by uid 500); 27 Jun 2006 01:01:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 74691 invoked by uid 99); 27 Jun 2006 01:01:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 18:01:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 18:01:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D3879410124
	for <hadoop-dev@lucene.apache.org>; Tue, 27 Jun 2006 00:59:29 +0000 (GMT)
Message-ID: <18409093.1151369969863.JavaMail.jira@brutus>
Date: Tue, 27 Jun 2006 00:59:29 +0000 (GMT+00:00)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-324) "IOException: No space left on device"
 is handled incorrectly
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

"IOException: No space left on device" is handled incorrectly
-------------------------------------------------------------

         Key: HADOOP-324
         URL: http://issues.apache.org/jira/browse/HADOOP-324
     Project: Hadoop
        Type: Bug

    Versions: 0.3.2    
    Reporter: Konstantin Shvachko


When a data node disk is almost full the name node still assigns blocks to the data node.
By the time the data node actually tries to write that data to disk the disk may become full.
Current implementation forces the data node to shutdown after that.
The expected behavior is to report the block write failure and continue.

The Exception looks as follows:

java.io.IOException: No space left on device
at java.io.FileOutputStream.writeBytes(Native Method)
at java.io.FileOutputStream.write(FileOutputStream.java:260)
at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
at java.io.BufferedOutputStream.write(BufferedOutputStream.java:109)
at java.io.DataOutputStream.write(DataOutputStream.java:90)
at org.apache.hadoop.dfs.DataNode$DataXceiver.writeBlock(DataNode.java:623)
at org.apache.hadoop.dfs.DataNode$DataXceiver.run(DataNode.java:410)
at java.lang.Thread.run(Thread.java:595)
2006-06-26 08:26:04,751 INFO org.apache.hadoop.dfs.DataNode: Finishing DataNode in: /tmp/hadoop/dfs/data/data



-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 27 01:18:18 2006
Return-Path: 
 <hadoop-dev-return-2190-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 19222 invoked from network); 27 Jun 2006 01:18:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 01:18:18 -0000
Received: (qmail 88433 invoked by uid 500); 27 Jun 2006 01:18:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 88407 invoked by uid 500); 27 Jun 2006 01:18:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88398 invoked by uid 99); 27 Jun 2006 01:18:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 18:18:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [209.10.110.95] (HELO londo.swishmail.com) (209.10.110.95)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 18:18:16 -0700
Received: (qmail 20984 invoked by uid 89); 27 Jun 2006 01:17:55 -0000
Received: from unknown (HELO ?192.168.0.10?) (69.181.97.11)
  by londo.swishmail.com with SMTP; 27 Jun 2006 01:17:54 -0000
Message-ID: <44A0873C.30306@apache.org>
Date: Mon, 26 Jun 2006 18:17:48 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.4 (X11/20060615)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: Redundant (?) lengths in SequenceFile
References: <e1d10fc00606190842w5a35f717g8a0afc0bcd0fc418@mail.gmail.com>
	 <4496E066.2060701@apache.org>
	 <e1d10fc00606191046h4ad4aaf5l1e640c91244e39c0@mail.gmail.com>
	 <238b647beae2c486eae4cd21eab67fcd@yahoo-inc.com>
	 <49B33F79-152B-4054-9421-AE2546E8918D@yahoo-inc.com>
	 <44A0562F.1010204@apache.org>
 <e1d10fc00606261634t7a1b13f3u5838475802dc80c@mail.gmail.com>
In-Reply-To: <e1d10fc00606261634t7a1b13f3u5838475802dc80c@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Paul Sutter wrote:
> However -> It still seems to me that the key length in the sequence file is
> redundant.

What if your keys are compound, containing, say, a combination of 
floats, ints and strings?  Then the key may not include a length of the 
entire key entry.  So you're seeking to optimize a special (if common) case.

Doug

From MAILER-DAEMON Tue Jun 27 02:25:05 2006
Return-Path: 
 <hadoop-dev-return-2191-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 36230 invoked from network); 27 Jun 2006 02:25:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 02:25:05 -0000
Received: (qmail 50098 invoked by uid 500); 27 Jun 2006 02:25:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 50066 invoked by uid 500); 27 Jun 2006 02:25:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 50057 invoked by uid 99); 27 Jun 2006 02:25:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 19:25:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 19:25:04 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B2F71410123
	for <hadoop-dev@lucene.apache.org>; Tue, 27 Jun 2006 02:23:30 +0000 (GMT)
Message-ID: <24118840.1151375010730.JavaMail.jira@brutus>
Date: Tue, 27 Jun 2006 02:23:30 +0000 (GMT+00:00)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-321) DatanodeInfo refactoring
In-Reply-To: <20976373.1151024969902.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-321?page=all ]

Konstantin Shvachko updated HADOOP-321:
---------------------------------------

    Attachment:     (was: DatanodeInfo_refactor.patch)

> DatanodeInfo refactoring
> ------------------------
>
>          Key: HADOOP-321
>          URL: http://issues.apache.org/jira/browse/HADOOP-321
>      Project: Hadoop
>         Type: Improvement

>   Components: dfs
>     Reporter: Konstantin Shvachko
>  Attachments: DatanodeInfo_refactor.patch
>
> I'm trying to refactor some name node classes, which seem to be similar.
> So DatanodeInfo is a public api now for purely external ( to name node) use.
> The name node class that stores information about data nodes including the
> set of its blocks is called DatanodeDescriptor.
> The DatanodeReport is removed since it was a variation of DatanodeInfo.
> Previously DatanodeInfo and DatanodeDescriptor were the same class, and
> DatanodeReport was used for reporting node statistics only.
> This is a preparation step for HADOOP-306.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 27 02:25:06 2006
Return-Path: 
 <hadoop-dev-return-2192-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 36261 invoked from network); 27 Jun 2006 02:25:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 02:25:06 -0000
Received: (qmail 50382 invoked by uid 500); 27 Jun 2006 02:25:06 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 50236 invoked by uid 500); 27 Jun 2006 02:25:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 50227 invoked by uid 99); 27 Jun 2006 02:25:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 19:25:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 19:25:04 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 98425410124
	for <hadoop-dev@lucene.apache.org>; Tue, 27 Jun 2006 02:23:31 +0000 (GMT)
Message-ID: <24303491.1151375011621.JavaMail.jira@brutus>
Date: Tue, 27 Jun 2006 02:23:31 +0000 (GMT+00:00)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-321) DatanodeInfo refactoring
In-Reply-To: <20976373.1151024969902.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-321?page=all ]

Konstantin Shvachko updated HADOOP-321:
---------------------------------------

    Attachment: DatanodeInfo_refactor.patch

I've updated the patch.


> DatanodeInfo refactoring
> ------------------------
>
>          Key: HADOOP-321
>          URL: http://issues.apache.org/jira/browse/HADOOP-321
>      Project: Hadoop
>         Type: Improvement

>   Components: dfs
>     Reporter: Konstantin Shvachko
>  Attachments: DatanodeInfo_refactor.patch
>
> I'm trying to refactor some name node classes, which seem to be similar.
> So DatanodeInfo is a public api now for purely external ( to name node) use.
> The name node class that stores information about data nodes including the
> set of its blocks is called DatanodeDescriptor.
> The DatanodeReport is removed since it was a variation of DatanodeInfo.
> Previously DatanodeInfo and DatanodeDescriptor were the same class, and
> DatanodeReport was used for reporting node statistics only.
> This is a preparation step for HADOOP-306.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 27 03:07:26 2006
Return-Path: 
 <hadoop-dev-return-2193-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 41735 invoked from network); 27 Jun 2006 03:07:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 03:07:26 -0000
Received: (qmail 72712 invoked by uid 500); 27 Jun 2006 03:07:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72670 invoked by uid 500); 27 Jun 2006 03:07:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72661 invoked by uid 99); 27 Jun 2006 03:07:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 20:07:25 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.126.228.150] (HELO rsmtp2.corp.yahoo.com)
 (207.126.228.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 20:07:24 -0700
Received: from [10.0.1.2] ([172.21.179.131])
	(authenticated bits=0)
	by rsmtp2.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k5R37114002943
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Mon, 26 Jun 2006 20:07:02 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=yjLVgBLrXdJYAr+K7td3A38YX8f9qKn55l2JPLuAHMhB2x0tcvatQK31kXH/F1aL
Mime-Version: 1.0 (Apple Message framework v750)
In-Reply-To: <e1d10fc00606261634t7a1b13f3u5838475802dc80c@mail.gmail.com>
References: <e1d10fc00606190842w5a35f717g8a0afc0bcd0fc418@mail.gmail.com>
 <4496E066.2060701@apache.org>
 <e1d10fc00606191046h4ad4aaf5l1e640c91244e39c0@mail.gmail.com>
 <238b647beae2c486eae4cd21eab67fcd@yahoo-inc.com>
 <49B33F79-152B-4054-9421-AE2546E8918D@yahoo-inc.com>
 <44A0562F.1010204@apache.org>
 <e1d10fc00606261634t7a1b13f3u5838475802dc80c@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <416B4E19-64E4-4EB7-9C3A-A35B09EF977A@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Eric Baldeschwieler <eric14@yahoo-inc.com>
Subject: Re: Redundant (?) lengths in SequenceFile
Date: Mon, 26 Jun 2006 20:06:53 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.750)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Yikes, but this assumes that your external code can grock whatever  
strange thing is stored in the writable.  This is a non-trivial  
assumption when you go multi-lingual.

We're going to take a crack at a block compressed format soon.  This  
will vastly reduce the storage impact of this kind of issue anyway.


On Jun 26, 2006, at 4:34 PM, Paul Sutter wrote:

> I agree, there's no easy way around this one without separate  
> interfaces
> (one where the caller keeps the counts, and one where the writable  
> keeps the
> counts), and that would be silly.
>
> However -> It still seems to me that the key length in the sequence  
> file is
> redundant.  Since each key must write its own length, know its own  
> length,
> or be able to figure it out - even via the high speed interface -  
> there's no
> reason to have that key length in the file.
>
> Why do I care about 4 bytes per record? Because we're integrating an
> external sort, and right now it has to look at a record with two key
> lengths. And I assume that others (such as Yahoo) will want to  
> incorporate
> an external sort. And if we're going to be reading the sequence  
> file in
> another language, we might as well be sure about the format to use.
>
> Thanks!
>
> Paul
>
> On 6/26/06, Doug Cutting <cutting@apache.org> wrote:
>>
>> Eric Baldeschwieler wrote:
>> > Can we turn this around and assume that writables will be given  
>> a stream
>> > and a length when they read?  That would also let us remove  
>> redundant
>> > info...
>>
>> Unless I misunderstand, that would make it harder to nest writables,
>> since all containers would need to store the length.  Currently only
>> top-level containers (SequenceFile and the RPC protocol) need to  
>> write
>> lengths.  Even these are optional, used only to optimize things.
>>
>> Doug
>>


From MAILER-DAEMON Tue Jun 27 03:22:07 2006
Return-Path: 
 <hadoop-dev-return-2194-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 44604 invoked from network); 27 Jun 2006 03:22:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 03:22:07 -0000
Received: (qmail 82785 invoked by uid 500); 27 Jun 2006 03:22:07 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 82636 invoked by uid 500); 27 Jun 2006 03:22:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 82626 invoked by uid 99); 27 Jun 2006 03:22:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 20:22:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 20:22:06 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C9408410123
	for <hadoop-dev@lucene.apache.org>; Tue, 27 Jun 2006 03:20:32 +0000 (GMT)
Message-ID: <11619877.1151378432821.JavaMail.jira@brutus>
Date: Tue, 27 Jun 2006 03:20:32 +0000 (GMT+00:00)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-307) Many small jobs benchmark for
 MapReduce
In-Reply-To: <13009062.1150636529837.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-307?page=comments#action_12417951 ] 

eric baldeschwieler commented on HADOOP-307:
--------------------------------------------

What configuration options does it have?

Can you set an arbitrary number of map and reduce tasks?
Do you validate that the right bytes get sent through the system?
Set the number of steps?



> Many small jobs benchmark for MapReduce
> ---------------------------------------
>
>          Key: HADOOP-307
>          URL: http://issues.apache.org/jira/browse/HADOOP-307
>      Project: Hadoop
>         Type: Task

>   Components: mapred
>     Reporter: Sanjay Dahiya
>     Priority: Minor

>
> A benchmark that runs many small MapReduce tasks in sequence. A single map reduce implementation is used, it is invoked multiple times with input as the output from previous run. The input to first Map is a TextInputFormat ( a text file with few hundred KBs). Input records are passed to output without much processing. The idea is to benchmark the time taken by initialization of Mapper and Reducer. An initial prototyping on a single machine with 20 MR tasks in sequence took ~47 seconds per task. Looking for suggestions on what else can be included in the benchmark. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 27 03:55:05 2006
Return-Path: 
 <hadoop-dev-return-2195-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 48917 invoked from network); 27 Jun 2006 03:55:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 03:55:05 -0000
Received: (qmail 2842 invoked by uid 500); 27 Jun 2006 03:55:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 2812 invoked by uid 500); 27 Jun 2006 03:55:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 2803 invoked by uid 99); 27 Jun 2006 03:55:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 20:55:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 20:55:04 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AEC02410124
	for <hadoop-dev@lucene.apache.org>; Tue, 27 Jun 2006 03:53:30 +0000 (GMT)
Message-ID: <26742924.1151380410712.JavaMail.jira@brutus>
Date: Tue, 27 Jun 2006 03:53:30 +0000 (GMT+00:00)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-288) RFC: Efficient file caching
In-Reply-To: <6015694.1149730109866.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-288?page=comments#action_12417955 ] 

eric baldeschwieler commented on HADOOP-288:
--------------------------------------------

Option #3 seems like the simplest to implement, maintain and explain.  
Would this blow anything up in nutch?  

We could of course provide a flag that causes the backwards compatible copy for a release or two if really needed.

> RFC: Efficient file caching
> ---------------------------
>
>          Key: HADOOP-288
>          URL: http://issues.apache.org/jira/browse/HADOOP-288
>      Project: Hadoop
>         Type: Bug

>     Reporter: Michel Tourn
>     Assignee: Michel Tourn

>
> RFC: Efficient file caching 
> (on Hadoop Task nodes, for benefit of MapReduce Tasks)
> ------------------------------------------------------
> We will start implementing this soon. Please provide feedback and improvements to this plan.
> The header "Options:" indicates places where simple choices must be made.
> Problem:
> -------
> o MapReduce tasks require access to additional out-of-band data ("dictionaries")
> This out-of-band data is:
> o in addition to the map/reduce inputs.
> o large (1GB+)
> o broadcast (same data is required on all the Task nodes)
> o changes "infrequently", in particular:
> oo it is always constant for all the Tasks in a Job. 
> oo it is often constant for a month at a time 
> oo it may be shared across team members
> o sometimes used by pure-Java MapReduce programs
> o sometimes used by non-Java MapReduce programs (using Hadoop-Streaming)
> o (future) used by programs that use HDFS and Task-trackers but not MapReduce.
> Existing Solutions to the problem:
> ---------------------------------
> These solutions are not good enough. The present proposal is to do Sol 1 with caching.
> Sol 1: Pure Hadoop: package the out-of-band data in the MapReduce Job jar file.
> Sol 2: Non  Hadoop: for each task node run rsync from single source for data.
> Sol 3: Non  Hadoop: use BitTorrent, etc.
> Sol.1 is correct but slow for many reasons:
>  The Job submitter must recreate a large jar(tar) file for every Job.
>   (The jar contains both changing programs and stable dictionaries)
>  The large Jar file must be propagated from the client to HDFS with 
>  a large replication factor. 
>  At the beginning of every Task, the Task tracker gets the job jar from HDFS 
>  and unjars it in the working directory. This can dominate task execution time.
>  
> Sol.2 has nice properties but also some problems.
>  It does not scale well with large clusters (many concurrent rsync read requests i.e. single-source broadcast)
>  It assumes that Hadoop users can upload data using rsync to the cluster nodes. As a policy, this is not allowed.
>  It requires rsync.
>  
> Sol.3 alleviates the rsync scalability problems but 
>       It is a dependency on an external system. 
>       We want something simpler and more tightly integrated with Hadoop.
>       
> Staging (uploading) out-of-band data:
> ------------------------------------
> The out-of-band data will often originate on the local filesystem of a user machine 
>  (i.e. a MapReduce job submitter)
> Nevertheless it makes sense to use HDFS to store the original out-of-band data because:
> o HDFS has (wide) replication. This enables scalable broadcast later.
> o HDFS is an available channel to move data from clients to all task machines.
> o HDFS is convenient as a shared location among Hadoop team members.
> Accessing (downloading) out-of-band data:
> ----------------------------------------
> The non-Java MapReduce programs do not have or want[1] APIs for HDFS.
> Instead these programs just want to access out-of-band data as 
>  local files at predefined paths.
> ([1] Existing programs should be reusable with no changes. 
>  This is often possible bec. communication is over stdin/stdout.)
> Job's jar file as a special case:
> --------------------------------
> One use case is to allow users to make the job jar itself cachable.
> This is only useful in cases where NOTHING changes when a job is resubmitted
>  (no MapRed code changes and no changes in shipped data)
> This situation might occur with an 'extractor' job (gets data from an external source: like Nutch crawler)
> Currently the Hadoop mapred-jar mechanism works in this way:
>  the job jar data is unjarred in the "working directory" of the Task 
>  the jar contains both MapRed java code (added to classpath)
> Cache synchronization:
> ---------------------
> The efficient implementation of the out-of-band data distribution
> is mostly a cache synchronization problem.
> A list of the various aspects where choices must be made follows.
> Cache key:
> ---------
> How do you test that the cached copy is out-of-date?
> Options: 
> 1. the archive/file timestamp 
> 2. the MD5 of the archive/file content
> Comparing source and destination Timestamps is problematic bec. it assumes synchronized clocks.
> Also there is no last-modif metadata in HDFS (for good reasons, like scalability of metadata ops)
> Timestamps stored with the source ('last-propagate-time') do 
>  not require synchronized clocks, only locally monotonic time. 
> (and the worse which can happen at daylight-savings switch is a missed update or an extra-update)
> The cache code could store a copy of the local timestamp 
> in the same way that it caches the value of the content hash along with the source data.
>  
> Cachable unit:
> -------------
> Options: individual files or archives or both.
> Note:
> At the API level, directories will be processed recursively 
> (and the local FS directories will parallel HDFS directories)
> So bulk operations are always possible using directories.
> The question here is whether to handle archives as an additional bulk mechanism.
> Archives are special because:
> o unarchiving occurs transparently as part of the cache sync
> o The cache key is computed on the archive and preserved although 
>   the archive itself is not preserved.
> Supported archive format will be: tar (maybe tgz or compressed jar)
> Archive detection test: by filename extension ".tar" or ".jar"
> Suppose we don't handle archives as special files:
> Pros:
>  o less code, no discussion about which archive formats are supported
>  o fine for large dictionary files. And when files are not large, user may as well
>    put them in the Job jar as usual.
>  o user code could always check and unarchive specific cached files
>    (as a side-effect of MapRed task initialization)
> Cons:
>  o handling small files may be inefficient 
>   (multiple HDFS operations, multiple hash computation, 
>    one 'metadata' hash file along with each small file)
>  o It will not be possible to handle the Job's jar file as a special case of caching 
> Cache isolation: 
> ---------------
> In some cases it may be a problem if the cached HDFS files are updated while a Job is in progress:
> The file may become unavailable for a short period of time and some tasks fail.
> The file may change (atomically) and different tasks use a different version.
> This isolation problem is not addressed in this proposal.
> Standard solutions to the isolation problem are:
> o Assume that Jobs and interfering cache updates won't occur concurrently.
> o Put a version number in the HDFS file paths and refer to a hard-coded version in the Job code.
> o Before running the MapRed job, run a non-distributed application that tests
>   what is the latest available version of the out-of-band data. 
>   Then make this version available to the MapRed job.
>   Two ways to do this. 
>   o either set a job property just-in-time:
>     addCachePathPair("/mydata/v1234/", "localcache/mydata_latest"); 
>     (see Job Configuration for meaning of this)
>   o or publish the decision as an HDFS file containing the version.
>     then rely on user code to read the version, and manually populate the cache:
>     Cache.syncCache("/hdfs/path/fileordir", "relative/local/fileordir");
>     (see MapReduce API for meaning of this)
> Cache synchronization stages:
> ----------------------------
> There are two stages: Client-to-HDFS and HDFS-to-TaskTracker
> o Client-to-HDFS stage.
> Options: A simple option is to not do anything here, i.e. rely on the user.
> This is a reasonable option given previous remarks on the role of HDFS:
>  HDFS is a staging/publishing area and a natural shared location.
> In particular this means that the system need not track 
> where the client files come from.
> o HDFS-to-TaskTracker:
> Client-to-HDFS synchronization (if done at all) should happen before this.
> Then HDFS-to-TaskTracker synchronization must happen right before 
> the data is needed on a node.
> MapReduce cache API:
> -------------------
> Options:
> 1. No change in MapReduce framework code:
> require the user to put this logic in map() (or reduce) function:
>  in MyMapper constructor (or in map() on first record) user is asked to add:
>  
>     Cache.syncCache("/hdfs/path/fileordir", "relative/local/fileordir");
>     Cache.syncCache("..."); //etc.
>   
> -----
> 2. Put this logic in MapReduce framework and use Job properties to
>    communicate the list of pairs (hdfs path; local path)
>  
> Directories are processed recursively.
> If archives are treated specially then they are unarchived on destination.
>  
> MapReduce Job Configuration:
> ---------------------------
> Options:
> with No change in MapReduce framework code (see above)
>  no special Job configuration: 
>    it is up to the MapRed writer to configure and run the cache operations.
> ---
> with Logic in MapReduce framework (see above)
>  some simple Job configuration
> JobConf.addCachePathPair(String, String)
> JobConf.addCachePathPair("/hdfs/path/fileordir", "relative/local/fileordir");

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 27 04:07:56 2006
Return-Path: 
 <hadoop-dev-return-2196-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50746 invoked from network); 27 Jun 2006 04:07:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 04:07:56 -0000
Received: (qmail 15102 invoked by uid 500); 27 Jun 2006 04:07:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15069 invoked by uid 500); 27 Jun 2006 04:07:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 15060 invoked by uid 99); 27 Jun 2006 04:07:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 21:07:55 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of sutter@gmail.com designates
 64.233.162.198 as permitted sender)
Received: from [64.233.162.198] (HELO nz-out-0102.google.com) (64.233.162.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 21:07:54 -0700
Received: by nz-out-0102.google.com with SMTP id s1so1621158nze
        for <hadoop-dev@lucene.apache.org>;
 Mon, 26 Jun 2006 21:07:34 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=HfH2rUOZnH/AY3kh6lRfuGe09lHENrq4N1aeXjU4TJklF3BVg/SOtXas9v1ge78SFSlpMAtXOnSckVW/f+bq+NJ1aC5pgnXmdolEjLTcQZ2/S7eALoKryjN4RGeWqmOrsca61QcsMrTh3Yh3tLXFppd8FzgDk/gNPlcUdvxdDeA=
Received: by 10.36.178.19 with SMTP id a19mr91936nzf;
        Mon, 26 Jun 2006 21:07:34 -0700 (PDT)
Received: by 10.36.132.16 with HTTP; Mon, 26 Jun 2006 21:07:34 -0700 (PDT)
Message-ID: <e1d10fc00606262107g4abbb626gb66b0a99236dd0fc@mail.gmail.com>
Date: Mon, 26 Jun 2006 21:07:34 -0700
From: "Paul Sutter" <sutter@gmail.com>
To: hadoop-dev@lucene.apache.org
Subject: Re: Redundant (?) lengths in SequenceFile
In-Reply-To: <44A0873C.30306@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_Part_3679_10934229.1151381254097"
References: <e1d10fc00606190842w5a35f717g8a0afc0bcd0fc418@mail.gmail.com>
	 <4496E066.2060701@apache.org>
	 <e1d10fc00606191046h4ad4aaf5l1e640c91244e39c0@mail.gmail.com>
	 <238b647beae2c486eae4cd21eab67fcd@yahoo-inc.com>
	 <49B33F79-152B-4054-9421-AE2546E8918D@yahoo-inc.com>
	 <44A0562F.1010204@apache.org>
	 <e1d10fc00606261634t7a1b13f3u5838475802dc80c@mail.gmail.com>
	 <44A0873C.30306@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_3679_10934229.1151381254097
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

its fine either way, i just wanted to know that its deleberate. it certainly
doesnt cost much space.

an external sorter can work only on keytypes it understands, and our keys
are compound and may include strings, floats, and ints.

the length is no problem at all.

On 6/26/06, Doug Cutting <cutting@apache.org> wrote:
>
> Paul Sutter wrote:
> > However -> It still seems to me that the key length in the sequence file
> is
> > redundant.
>
> What if your keys are compound, containing, say, a combination of
> floats, ints and strings?  Then the key may not include a length of the
> entire key entry.  So you're seeking to optimize a special (if common)
> case.
>
> Doug
>

------=_Part_3679_10934229.1151381254097--

From MAILER-DAEMON Tue Jun 27 05:37:06 2006
Return-Path: 
 <hadoop-dev-return-2197-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68298 invoked from network); 27 Jun 2006 05:37:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 05:37:06 -0000
Received: (qmail 98248 invoked by uid 500); 27 Jun 2006 05:37:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98213 invoked by uid 500); 27 Jun 2006 05:37:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98204 invoked by uid 99); 27 Jun 2006 05:37:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 22:37:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 22:37:04 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A4A18410123
	for <hadoop-dev@lucene.apache.org>; Tue, 27 Jun 2006 05:35:30 +0000 (GMT)
Message-ID: <1920818.1151386530671.JavaMail.jira@brutus>
Date: Tue, 27 Jun 2006 05:35:30 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-59) support generic command-line options
In-Reply-To: <321463887.1140733957324.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-59?page=comments#action_12417960 ] 

Owen O'Malley commented on HADOOP-59:
-------------------------------------

I'm sorry that I didn't pay paid attention to this issue earlier. 

I think that it is confusing having the cli options segregated. For example, I have a patch for distcp (aka CopyFiles) that adds a "-i" option to ignore read errors. With this setup, the user needs to specify the -i *last*.  It implies that the user need to remember what is a generic option versus what is a command option. (Ok, raise your hand if you can tell me the difference between "cvs -d foo co bar" and "cvs co -d foo bar". The sad thing is that I do know and I'm sure a few of you do too. But it certainly does confuse non-experts.)

Furthermore, each application needs to handle --help themselves (and as a side effect adding a new generic option means updating the usage string in each application).

I haven't used the commons cli library, but I would have prefered something less inhertiance-based, more like::

Parser cliParser = new GenericOptionsParser();
cliParser.addOption("i", false, "ignore read errors");
cliParser.parse(args, conf);
boolean ignoreErrors = cliParser.hasOption("i");


> support generic command-line options
> ------------------------------------
>
>          Key: HADOOP-59
>          URL: http://issues.apache.org/jira/browse/HADOOP-59
>      Project: Hadoop
>         Type: Improvement

>   Components: conf
>     Versions: 0.2.0
>     Reporter: Doug Cutting
>     Assignee: Hairong Kuang
>     Priority: Minor
>      Fix For: 0.4.0
>  Attachments: Tool.java, ToolBase.java, bashfile.patch, commons-cli-2.0-SNAPSHOT.jar, genericCommand.patch, toolbase.patch
>
> Hadoop commands should all support some common options.  For example, it should be possible to specify the namenode, datanode, and, for that matter, any config option, in a generic way.
> This could be implemented with code like:
> public interface Tool extends Configurable {
>   void run(String[] args) throws Exception;
> }
> public class ToolBase implements Tool extends Configured {
>   public final void main(String[] args) throws Exception {
>     Configuration conf = new Configuration();
>     ... parse config options from args into conf ...
>     this.configure(conf);
>     this.run();
>   }
> }
> public MyTool extends ExcecutableBase {
>   public static void main(String[] args) throws Exception {
>     new MyTool().main(args);
>   }
> }
> The general command line syntax could be:
> bin/hadoop [generalOptions] command [commandOptions]
> Where generalOptions are things that ToolBase handles, and only the commandOptions are passed to Tool.run().  The most important generalOption would be '-D', which would define name/value pairs that are set in the configuration.  This alone would permit folks to set the namenode, datanode, etc.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 27 06:01:04 2006
Return-Path: 
 <hadoop-dev-return-2198-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 74348 invoked from network); 27 Jun 2006 06:01:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 06:01:04 -0000
Received: (qmail 19337 invoked by uid 500); 27 Jun 2006 06:01:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 19315 invoked by uid 500); 27 Jun 2006 06:01:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 19305 invoked by uid 99); 27 Jun 2006 06:01:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 23:01:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 23:01:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CF046410124
	for <hadoop-dev@lucene.apache.org>; Tue, 27 Jun 2006 05:59:29 +0000 (GMT)
Message-ID: <701634.1151387969845.JavaMail.jira@brutus>
Date: Tue, 27 Jun 2006 05:59:29 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-325) ClassNotFoundException under jvm 1.6
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

ClassNotFoundException under jvm 1.6
------------------------------------

         Key: HADOOP-325
         URL: http://issues.apache.org/jira/browse/HADOOP-325
     Project: Hadoop
        Type: Bug

  Components: ipc  
    Versions: 0.3.2    
    Reporter: Owen O'Malley
 Assigned to: Owen O'Malley 
     Fix For: 0.4.0


We have been having problems with classes that are returned by RPC methods not being loaded/initialized correctly. The work around has been to put in the servers, code of the form:

static { new FooBar(); }  // to resolve the ClassNotFoundException for class FooBar.

When I tried running under java 1.6, that stopped working because one of the classes had to be instantiated from a package that didn't have visibility to create an instance. So I tracked the problem down to how the classes were being loaded via reflection.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 27 06:03:05 2006
Return-Path: 
 <hadoop-dev-return-2199-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 74473 invoked from network); 27 Jun 2006 06:03:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 06:03:05 -0000
Received: (qmail 19919 invoked by uid 500); 27 Jun 2006 06:03:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 19889 invoked by uid 500); 27 Jun 2006 06:03:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 19880 invoked by uid 99); 27 Jun 2006 06:03:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 23:03:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 23:03:04 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B104C410124
	for <hadoop-dev@lucene.apache.org>; Tue, 27 Jun 2006 06:01:30 +0000 (GMT)
Message-ID: <11029574.1151388090722.JavaMail.jira@brutus>
Date: Tue, 27 Jun 2006 06:01:30 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-325) ClassNotFoundException under jvm 1.6
In-Reply-To: <701634.1151387969845.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-325?page=all ]

Owen O'Malley updated HADOOP-325:
---------------------------------

    Attachment: class-load-init.patch

This patch uses the required classloader, but makes sure the class is initialized.

I found and removed the object creation blocks from the 4 servers, but if there are others hiding somewhere, please let me know.

> ClassNotFoundException under jvm 1.6
> ------------------------------------
>
>          Key: HADOOP-325
>          URL: http://issues.apache.org/jira/browse/HADOOP-325
>      Project: Hadoop
>         Type: Bug

>   Components: ipc
>     Versions: 0.3.2
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.4.0
>  Attachments: class-load-init.patch
>
> We have been having problems with classes that are returned by RPC methods not being loaded/initialized correctly. The work around has been to put in the servers, code of the form:
> static { new FooBar(); }  // to resolve the ClassNotFoundException for class FooBar.
> When I tried running under java 1.6, that stopped working because one of the classes had to be instantiated from a package that didn't have visibility to create an instance. So I tracked the problem down to how the classes were being loaded via reflection.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 27 06:13:05 2006
Return-Path: 
 <hadoop-dev-return-2200-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75782 invoked from network); 27 Jun 2006 06:13:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 06:13:05 -0000
Received: (qmail 26223 invoked by uid 500); 27 Jun 2006 06:13:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26073 invoked by uid 500); 27 Jun 2006 06:13:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26055 invoked by uid 99); 27 Jun 2006 06:13:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 23:13:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 23:13:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DFB33410124
	for <hadoop-dev@lucene.apache.org>; Tue, 27 Jun 2006 06:11:29 +0000 (GMT)
Message-ID: <14594247.1151388689913.JavaMail.jira@brutus>
Date: Tue, 27 Jun 2006 06:11:29 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-326) cleanup of dead field (map ouput port)
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

cleanup of dead field (map ouput port)
--------------------------------------

         Key: HADOOP-326
         URL: http://issues.apache.org/jira/browse/HADOOP-326
     Project: Hadoop
        Type: Improvement

  Components: mapred  
    Versions: 0.3.2    
    Reporter: Owen O'Malley
 Assigned to: Owen O'Malley 
    Priority: Minor
     Fix For: 0.4.0
 Attachments: remove-old-map-output-port.patch

The TaskTrackerStatus retains a field that records the port of the map outuput server, even though that server no longer exists in the current code base.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 27 06:13:08 2006
Return-Path: 
 <hadoop-dev-return-2201-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75859 invoked from network); 27 Jun 2006 06:13:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 06:13:08 -0000
Received: (qmail 26661 invoked by uid 500); 27 Jun 2006 06:13:07 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26632 invoked by uid 500); 27 Jun 2006 06:13:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26620 invoked by uid 99); 27 Jun 2006 06:13:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 23:13:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 23:13:05 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 50C4E410335
	for <hadoop-dev@lucene.apache.org>; Tue, 27 Jun 2006 06:11:32 +0000 (GMT)
Message-ID: <29450677.1151388692328.JavaMail.jira@brutus>
Date: Tue, 27 Jun 2006 06:11:32 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-326) cleanup of dead field (map ouput port)
In-Reply-To: <14594247.1151388689913.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-326?page=all ]

Owen O'Malley updated HADOOP-326:
---------------------------------

    Attachment: remove-old-map-output-port.patch

> cleanup of dead field (map ouput port)
> --------------------------------------
>
>          Key: HADOOP-326
>          URL: http://issues.apache.org/jira/browse/HADOOP-326
>      Project: Hadoop
>         Type: Improvement

>   Components: mapred
>     Versions: 0.3.2
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>     Priority: Minor
>      Fix For: 0.4.0
>  Attachments: remove-old-map-output-port.patch
>
> The TaskTrackerStatus retains a field that records the port of the map outuput server, even though that server no longer exists in the current code base.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 27 06:17:07 2006
Return-Path: 
 <hadoop-dev-return-2202-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76752 invoked from network); 27 Jun 2006 06:17:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 06:17:07 -0000
Received: (qmail 32112 invoked by uid 500); 27 Jun 2006 06:17:07 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 31607 invoked by uid 500); 27 Jun 2006 06:17:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31578 invoked by uid 99); 27 Jun 2006 06:17:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 23:17:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 23:17:04 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C4059410334
	for <hadoop-dev@lucene.apache.org>; Tue, 27 Jun 2006 06:15:30 +0000 (GMT)
Message-ID: <20517100.1151388930799.JavaMail.jira@brutus>
Date: Tue, 27 Jun 2006 06:15:30 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-327) ToolBase calls System.exit
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

ToolBase calls System.exit
--------------------------

         Key: HADOOP-327
         URL: http://issues.apache.org/jira/browse/HADOOP-327
     Project: Hadoop
        Type: Bug

  Components: util  
    Versions: 0.4.0    
    Reporter: Owen O'Malley
 Assigned to: Hairong Kuang 
     Fix For: 0.4.0


The new ToolBase class calls System.exit when the main routine finishes. That will break if the application uses threads that need to finish before the jvm exits. The normal semantics is that the program doesn't finish execution until all of the non-daemon threads exit (including the main one) and System.exit should never be called except for critical errors.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 27 06:45:05 2006
Return-Path: 
 <hadoop-dev-return-2203-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 81845 invoked from network); 27 Jun 2006 06:45:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 06:45:05 -0000
Received: (qmail 59240 invoked by uid 500); 27 Jun 2006 06:45:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 59209 invoked by uid 500); 27 Jun 2006 06:45:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 59197 invoked by uid 99); 27 Jun 2006 06:45:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 23:45:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 23:45:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D2D187141F3
	for <hadoop-dev@lucene.apache.org>; Tue, 27 Jun 2006 06:43:29 +0000 (GMT)
Message-ID: <16817701.1151390609860.JavaMail.jira@brutus>
Date: Tue, 27 Jun 2006 06:43:29 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-328) add a -i option to distcp to ignore
 read errors of the input files
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

add a -i option to distcp to ignore read errors of the input files
------------------------------------------------------------------

         Key: HADOOP-328
         URL: http://issues.apache.org/jira/browse/HADOOP-328
     Project: Hadoop
        Type: Improvement

  Components: util  
    Versions: 0.3.2    
    Reporter: Owen O'Malley
 Assigned to: Owen O'Malley 
     Fix For: 0.4.0


Add an option "-i" to ignore problems reading files and just copy what can be copied.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 27 06:50:05 2006
Return-Path: 
 <hadoop-dev-return-2204-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 83527 invoked from network); 27 Jun 2006 06:50:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 06:50:05 -0000
Received: (qmail 66206 invoked by uid 500); 27 Jun 2006 06:50:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66185 invoked by uid 500); 27 Jun 2006 06:50:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66176 invoked by uid 99); 27 Jun 2006 06:50:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 23:50:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 23:50:04 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 96C5F7141F5
	for <hadoop-dev@lucene.apache.org>; Tue, 27 Jun 2006 06:48:30 +0000 (GMT)
Message-ID: <3814482.1151390910614.JavaMail.jira@brutus>
Date: Tue, 27 Jun 2006 06:48:30 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-328) add a -i option to distcp to ignore
 read errors of the input files
In-Reply-To: <16817701.1151390609860.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-328?page=all ]

Owen O'Malley updated HADOOP-328:
---------------------------------

    Attachment: distcp-ignore-error.patch

Adds the -i option to distcp, which makes the copy ignore read errors. The -i option must come after the generic options. The failure to copy is only reported back in the web ui.

> add a -i option to distcp to ignore read errors of the input files
> ------------------------------------------------------------------
>
>          Key: HADOOP-328
>          URL: http://issues.apache.org/jira/browse/HADOOP-328
>      Project: Hadoop
>         Type: Improvement

>   Components: util
>     Versions: 0.3.2
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.4.0
>  Attachments: distcp-ignore-error.patch
>
> Add an option "-i" to ignore problems reading files and just copy what can be copied.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 27 17:40:07 2006
Return-Path: 
 <hadoop-dev-return-2205-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68407 invoked from network); 27 Jun 2006 17:40:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 17:40:07 -0000
Received: (qmail 63419 invoked by uid 500); 27 Jun 2006 17:40:06 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63376 invoked by uid 500); 27 Jun 2006 17:40:06 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63358 invoked by uid 99); 27 Jun 2006 17:40:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 10:40:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 10:40:05 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D5AE27141F4
	for <hadoop-dev@lucene.apache.org>; Tue, 27 Jun 2006 17:38:30 +0000 (GMT)
Message-ID: <2580890.1151429910871.JavaMail.jira@brutus>
Date: Tue, 27 Jun 2006 17:38:30 +0000 (GMT+00:00)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-318) Progress in writing a DFS file does
 not count towards Job progress and can make the task timeout
In-Reply-To: <3721347.1151007329825.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-318?page=all ]

Milind Bhandarkar updated HADOOP-318:
-------------------------------------

    Attachment: hadoop-datanode-allocation.patch

This is an updated patch for this issue that does not have any errors "task reported no progress for 600 seconds" even if there is progress. In fact it is a datanode allocation patch. Each datanode sends an additional load data to namenode that indicates how many bllocks it is currently writing or reading. The namenode, when choosing datanodes for new block takes this load into consideration, and discards datanodes whose load is more than twice that of average.

Thiss is in addition to the requirement that the datanode has enough space to store min_num_blocks.

With this patch, I never see the "no progress for 600 seconds, killing task" error. Therefore, on my 240 node cluster, the randomwriter times went down from 3997 seconds to 2404 seconds.

This patch includes the file-writing progress patch as well. So, please discard  the two patches I submitted earlier.

> Progress in writing a DFS file does not count towards Job progress and can make the task timeout
> ------------------------------------------------------------------------------------------------
>
>          Key: HADOOP-318
>          URL: http://issues.apache.org/jira/browse/HADOOP-318
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.3.2
>  Environment: all, but especially on big busy clusters
>     Reporter: Milind Bhandarkar
>     Assignee: Milind Bhandarkar
>      Fix For: 0.4.0
>  Attachments: hadoop-datanode-allocation.patch, hadoop-latency-new.patch, hadoop-latency.patch
>
> When a task writes to DFS file, depending on how busy the cluster is, it can timeout after 10 minutes by default, because the progress towards writing a DFS file does not count as progress of the task. The solution (patch is forthcoming) is to provide a way to callback reporter to report task progress from DFSOutputStream.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 27 18:04:13 2006
Return-Path: 
 <hadoop-dev-return-2206-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76052 invoked from network); 27 Jun 2006 18:04:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 18:04:13 -0000
Received: (qmail 6463 invoked by uid 500); 27 Jun 2006 18:04:06 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 6399 invoked by uid 500); 27 Jun 2006 18:04:06 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 6315 invoked by uid 99); 27 Jun 2006 18:04:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 11:04:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 11:04:05 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BA1DF7141E3
	for <hadoop-dev@lucene.apache.org>; Tue, 27 Jun 2006 18:02:30 +0000 (GMT)
Message-ID: <4071239.1151431350759.JavaMail.jira@brutus>
Date: Tue, 27 Jun 2006 18:02:30 +0000 (GMT+00:00)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-321) DatanodeInfo refactoring
In-Reply-To: <20976373.1151024969902.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-321?page=all ]

Konstantin Shvachko updated HADOOP-321:
---------------------------------------

    Attachment:     (was: DatanodeInfo_refactor.patch)

> DatanodeInfo refactoring
> ------------------------
>
>          Key: HADOOP-321
>          URL: http://issues.apache.org/jira/browse/HADOOP-321
>      Project: Hadoop
>         Type: Improvement

>   Components: dfs
>     Reporter: Konstantin Shvachko

>
> I'm trying to refactor some name node classes, which seem to be similar.
> So DatanodeInfo is a public api now for purely external ( to name node) use.
> The name node class that stores information about data nodes including the
> set of its blocks is called DatanodeDescriptor.
> The DatanodeReport is removed since it was a variation of DatanodeInfo.
> Previously DatanodeInfo and DatanodeDescriptor were the same class, and
> DatanodeReport was used for reporting node statistics only.
> This is a preparation step for HADOOP-306.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 27 18:06:08 2006
Return-Path: 
 <hadoop-dev-return-2207-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76933 invoked from network); 27 Jun 2006 18:06:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 18:06:08 -0000
Received: (qmail 11949 invoked by uid 500); 27 Jun 2006 18:06:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 11917 invoked by uid 500); 27 Jun 2006 18:06:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 11831 invoked by uid 99); 27 Jun 2006 18:06:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 11:06:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 11:06:06 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 254067141F0
	for <hadoop-dev@lucene.apache.org>; Tue, 27 Jun 2006 18:04:32 +0000 (GMT)
Message-ID: <22481268.1151431472148.JavaMail.jira@brutus>
Date: Tue, 27 Jun 2006 18:04:32 +0000 (GMT+00:00)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-321) DatanodeInfo refactoring
In-Reply-To: <20976373.1151024969902.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-321?page=all ]

Konstantin Shvachko updated HADOOP-321:
---------------------------------------

    Attachment: DatanodeInfo_refactor.patch

DatanodeInfo.lastUpdate() is deprecated.
DatanodeInfo.getLastUpdate() should be the name.


> DatanodeInfo refactoring
> ------------------------
>
>          Key: HADOOP-321
>          URL: http://issues.apache.org/jira/browse/HADOOP-321
>      Project: Hadoop
>         Type: Improvement

>   Components: dfs
>     Reporter: Konstantin Shvachko
>  Attachments: DatanodeInfo_refactor.patch
>
> I'm trying to refactor some name node classes, which seem to be similar.
> So DatanodeInfo is a public api now for purely external ( to name node) use.
> The name node class that stores information about data nodes including the
> set of its blocks is called DatanodeDescriptor.
> The DatanodeReport is removed since it was a variation of DatanodeInfo.
> Previously DatanodeInfo and DatanodeDescriptor were the same class, and
> DatanodeReport was used for reporting node statistics only.
> This is a preparation step for HADOOP-306.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 27 18:52:06 2006
Return-Path: 
 <hadoop-dev-return-2208-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 89971 invoked from network); 27 Jun 2006 18:52:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 18:52:06 -0000
Received: (qmail 1566 invoked by uid 500); 27 Jun 2006 18:52:06 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 1540 invoked by uid 500); 27 Jun 2006 18:52:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 1531 invoked by uid 99); 27 Jun 2006 18:52:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 11:52:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 11:52:05 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AD6A97141F0
	for <hadoop-dev@lucene.apache.org>; Tue, 27 Jun 2006 18:50:30 +0000 (GMT)
Message-ID: <12645302.1151434230707.JavaMail.jira@brutus>
Date: Tue, 27 Jun 2006 18:50:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-27) MapRed tries to allocate tasks to
 nodes that have no available disk space
In-Reply-To: <1424617142.1139335680270.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-27?page=comments#action_12418085 ] 

Doug Cutting commented on HADOOP-27:
------------------------------------

I think this is a good change to make, but the patch still has a few issues.

I don't think it is sufficient to check if any device has enough room, but rather, one should check that all devices have enough room.  Local file names are hashed to determine which device to store a file on.  Unless that algorithm changes (Configuration.getLocalPath()), we should make sure that all local devices have a minimum amount of space.

Also, the indentation and formatting of the patch is non-standard, using tabs instead of spaces, and one chunk of the patch fails to apply cleanly.

Thanks!

> MapRed tries to allocate tasks to nodes that have no available disk space
> -------------------------------------------------------------------------
>
>          Key: HADOOP-27
>          URL: http://issues.apache.org/jira/browse/HADOOP-27
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Reporter: Mike Cafarella
>  Attachments: minspace_mapredtask.patch
>
>   What it says above.  MapRed TaskTrackers should not offer task service if the local disk
> space is too constrained.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 27 18:56:07 2006
Return-Path: 
 <hadoop-dev-return-2209-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91185 invoked from network); 27 Jun 2006 18:56:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 18:56:07 -0000
Received: (qmail 5891 invoked by uid 500); 27 Jun 2006 18:56:06 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 5866 invoked by uid 500); 27 Jun 2006 18:56:06 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 5857 invoked by uid 99); 27 Jun 2006 18:56:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 11:56:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 11:56:05 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 51EF37141F0
	for <hadoop-dev@lucene.apache.org>; Tue, 27 Jun 2006 18:54:31 +0000 (GMT)
Message-ID: <15835507.1151434471332.JavaMail.jira@brutus>
Date: Tue, 27 Jun 2006 18:54:31 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-318) Progress in writing a DFS file does
 not count towards Job progress and can make the task timeout
In-Reply-To: <3721347.1151007329825.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-318?page=comments#action_12418086 ] 

Doug Cutting commented on HADOOP-318:
-------------------------------------

Sigh, I also don't see a compatible way to make this change.  So we'll have to upgrade some Nutch InputFormat implementations to define the new method.  Could you please construct a patch for Nutch too?  That would make my life easier.  Thanks.

> Progress in writing a DFS file does not count towards Job progress and can make the task timeout
> ------------------------------------------------------------------------------------------------
>
>          Key: HADOOP-318
>          URL: http://issues.apache.org/jira/browse/HADOOP-318
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.3.2
>  Environment: all, but especially on big busy clusters
>     Reporter: Milind Bhandarkar
>     Assignee: Milind Bhandarkar
>      Fix For: 0.4.0
>  Attachments: hadoop-datanode-allocation.patch, hadoop-latency-new.patch, hadoop-latency.patch
>
> When a task writes to DFS file, depending on how busy the cluster is, it can timeout after 10 minutes by default, because the progress towards writing a DFS file does not count as progress of the task. The solution (patch is forthcoming) is to provide a way to callback reporter to report task progress from DFSOutputStream.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 27 19:11:06 2006
Return-Path: 
 <hadoop-dev-return-2210-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 97017 invoked from network); 27 Jun 2006 19:11:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 19:11:06 -0000
Received: (qmail 35738 invoked by uid 500); 27 Jun 2006 19:11:06 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 35707 invoked by uid 500); 27 Jun 2006 19:11:06 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 35698 invoked by uid 99); 27 Jun 2006 19:11:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 12:11:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 12:11:05 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DABE67141F0
	for <hadoop-dev@lucene.apache.org>; Tue, 27 Jun 2006 19:09:30 +0000 (GMT)
Message-ID: <8064706.1151435370893.JavaMail.jira@brutus>
Date: Tue, 27 Jun 2006 19:09:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-322) Need a job control utility to submit
 and monitor a group of jobs which have DAG dependency
In-Reply-To: <4931825.1151126129857.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-322?page=comments#action_12418092 ] 

Doug Cutting commented on HADOOP-322:
-------------------------------------

This looks like a nice addition to Hadoop.  I'd like to see some unit tests added before it is committed.  Also, tabs are used for indentation, when spaces are preferred.

> Need a job control utility to submit and monitor a group of jobs which have DAG dependency
> ------------------------------------------------------------------------------------------
>
>          Key: HADOOP-322
>          URL: http://issues.apache.org/jira/browse/HADOOP-322
>      Project: Hadoop
>         Type: New Feature

>     Reporter: Runping Qi
>     Assignee: Runping Qi
>  Attachments: job_control_patch.txt
>
> In my applications, some jobs depend on the outputs of other jobs. Therefore, job dependency forms a DAG. A job is ready to run if and only if it does not have any dependency or all the jobs it depends are finished successfully. To help schedule and monitor a group of jobs like that, I am thinking of implementing a utility that:
> 	- accept jobs with dependency specification
>       - monitor job status
>       - submit jobs when they are ready
> With such a utility, the application can construct its jobs, specify their dependency and then hand the jobs to the utility class. The utility takes care of the details of job submission.
> I'll post my design skech for comments/suggestion.
> Eventually, I'll submit a patch for the utility.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 27 19:30:06 2006
Return-Path: 
 <hadoop-dev-return-2211-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10064 invoked from network); 27 Jun 2006 19:30:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 19:30:06 -0000
Received: (qmail 74166 invoked by uid 500); 27 Jun 2006 19:30:06 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 74140 invoked by uid 500); 27 Jun 2006 19:30:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 74131 invoked by uid 99); 27 Jun 2006 19:30:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 12:30:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 12:30:05 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A5E9D7141F0
	for <hadoop-dev@lucene.apache.org>; Tue, 27 Jun 2006 19:28:30 +0000 (GMT)
Message-ID: <16534553.1151436510676.JavaMail.jira@brutus>
Date: Tue, 27 Jun 2006 19:28:30 +0000 (GMT+00:00)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-318) Progress in writing a DFS file does
 not count towards Job progress and can make the task timeout
In-Reply-To: <3721347.1151007329825.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-318?page=comments#action_12418097 ] 

Milind Bhandarkar commented on HADOOP-318:
------------------------------------------

Sure. I will provide a patch for nutch tomorrow.

> Progress in writing a DFS file does not count towards Job progress and can make the task timeout
> ------------------------------------------------------------------------------------------------
>
>          Key: HADOOP-318
>          URL: http://issues.apache.org/jira/browse/HADOOP-318
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.3.2
>  Environment: all, but especially on big busy clusters
>     Reporter: Milind Bhandarkar
>     Assignee: Milind Bhandarkar
>      Fix For: 0.4.0
>  Attachments: hadoop-datanode-allocation.patch, hadoop-latency-new.patch, hadoop-latency.patch
>
> When a task writes to DFS file, depending on how busy the cluster is, it can timeout after 10 minutes by default, because the progress towards writing a DFS file does not count as progress of the task. The solution (patch is forthcoming) is to provide a way to callback reporter to report task progress from DFSOutputStream.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 27 19:34:06 2006
Return-Path: 
 <hadoop-dev-return-2212-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 11013 invoked from network); 27 Jun 2006 19:34:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 19:34:06 -0000
Received: (qmail 79431 invoked by uid 500); 27 Jun 2006 19:34:06 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 79283 invoked by uid 500); 27 Jun 2006 19:34:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 79274 invoked by uid 99); 27 Jun 2006 19:34:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 12:34:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 12:34:05 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CAF9E7141E3
	for <hadoop-dev@lucene.apache.org>; Tue, 27 Jun 2006 19:32:30 +0000 (GMT)
Message-ID: <10244412.1151436750828.JavaMail.jira@brutus>
Date: Tue, 27 Jun 2006 19:32:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-321) DatanodeInfo refactoring
In-Reply-To: <20976373.1151024969902.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-321?page=all ]
     
Doug Cutting resolved HADOOP-321:
---------------------------------

    Fix Version: 0.4.0
     Resolution: Fixed

I just committed this.  Thanks, Konstantin.

> DatanodeInfo refactoring
> ------------------------
>
>          Key: HADOOP-321
>          URL: http://issues.apache.org/jira/browse/HADOOP-321
>      Project: Hadoop
>         Type: Improvement

>   Components: dfs
>     Reporter: Konstantin Shvachko
>      Fix For: 0.4.0
>  Attachments: DatanodeInfo_refactor.patch
>
> I'm trying to refactor some name node classes, which seem to be similar.
> So DatanodeInfo is a public api now for purely external ( to name node) use.
> The name node class that stores information about data nodes including the
> set of its blocks is called DatanodeDescriptor.
> The DatanodeReport is removed since it was a variation of DatanodeInfo.
> Previously DatanodeInfo and DatanodeDescriptor were the same class, and
> DatanodeReport was used for reporting node statistics only.
> This is a preparation step for HADOOP-306.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 27 19:44:06 2006
Return-Path: 
 <hadoop-dev-return-2213-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 14202 invoked from network); 27 Jun 2006 19:44:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 19:44:06 -0000
Received: (qmail 3812 invoked by uid 500); 27 Jun 2006 19:44:06 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3789 invoked by uid 500); 27 Jun 2006 19:44:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3780 invoked by uid 99); 27 Jun 2006 19:44:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 12:44:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 12:44:05 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A40387141F0
	for <hadoop-dev@lucene.apache.org>; Tue, 27 Jun 2006 19:42:30 +0000 (GMT)
Message-ID: <6406075.1151437350668.JavaMail.jira@brutus>
Date: Tue, 27 Jun 2006 19:42:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-325) ClassNotFoundException under jvm 1.6
In-Reply-To: <701634.1151387969845.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-325?page=all ]
     
Doug Cutting resolved HADOOP-325:
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Owen!

> ClassNotFoundException under jvm 1.6
> ------------------------------------
>
>          Key: HADOOP-325
>          URL: http://issues.apache.org/jira/browse/HADOOP-325
>      Project: Hadoop
>         Type: Bug

>   Components: ipc
>     Versions: 0.3.2
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.4.0
>  Attachments: class-load-init.patch
>
> We have been having problems with classes that are returned by RPC methods not being loaded/initialized correctly. The work around has been to put in the servers, code of the form:
> static { new FooBar(); }  // to resolve the ClassNotFoundException for class FooBar.
> When I tried running under java 1.6, that stopped working because one of the classes had to be instantiated from a package that didn't have visibility to create an instance. So I tracked the problem down to how the classes were being loaded via reflection.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 27 19:58:09 2006
Return-Path: 
 <hadoop-dev-return-2214-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17285 invoked from network); 27 Jun 2006 19:58:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 19:58:09 -0000
Received: (qmail 26719 invoked by uid 500); 27 Jun 2006 19:58:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26664 invoked by uid 500); 27 Jun 2006 19:58:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26637 invoked by uid 99); 27 Jun 2006 19:58:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 12:58:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 12:58:06 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 064517141F3
	for <hadoop-dev@lucene.apache.org>; Tue, 27 Jun 2006 19:56:32 +0000 (GMT)
Message-ID: <23420809.1151438192022.JavaMail.jira@brutus>
Date: Tue, 27 Jun 2006 19:56:32 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-326) cleanup of dead field (map ouput
 port)
In-Reply-To: <14594247.1151388689913.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-326?page=all ]
     
Doug Cutting resolved HADOOP-326:
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Owen.

> cleanup of dead field (map ouput port)
> --------------------------------------
>
>          Key: HADOOP-326
>          URL: http://issues.apache.org/jira/browse/HADOOP-326
>      Project: Hadoop
>         Type: Improvement

>   Components: mapred
>     Versions: 0.3.2
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>     Priority: Minor
>      Fix For: 0.4.0
>  Attachments: remove-old-map-output-port.patch
>
> The TaskTrackerStatus retains a field that records the port of the map outuput server, even though that server no longer exists in the current code base.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 27 20:37:07 2006
Return-Path: 
 <hadoop-dev-return-2215-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 28414 invoked from network); 27 Jun 2006 20:37:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 20:37:07 -0000
Received: (qmail 10129 invoked by uid 500); 27 Jun 2006 20:37:06 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9978 invoked by uid 500); 27 Jun 2006 20:37:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9969 invoked by uid 99); 27 Jun 2006 20:37:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 13:37:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 13:37:05 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AF2DB7141F5
	for <hadoop-dev@lucene.apache.org>; Tue, 27 Jun 2006 20:35:30 +0000 (GMT)
Message-ID: <6494273.1151440530714.JavaMail.jira@brutus>
Date: Tue, 27 Jun 2006 20:35:30 +0000 (GMT+00:00)
From: "Johan Oskarson (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-27) MapRed tries to allocate tasks to nodes
 that have no available disk space
In-Reply-To: <1424617142.1139335680270.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-27?page=all ]

Johan Oskarson updated HADOOP-27:
---------------------------------

    Attachment: minspace_mapredtaskv3.patch

Now checks all the local dirs as requested
Also, changed from tab -> space

> MapRed tries to allocate tasks to nodes that have no available disk space
> -------------------------------------------------------------------------
>
>          Key: HADOOP-27
>          URL: http://issues.apache.org/jira/browse/HADOOP-27
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Reporter: Mike Cafarella
>  Attachments: minspace_mapredtask.patch, minspace_mapredtaskv3.patch
>
>   What it says above.  MapRed TaskTrackers should not offer task service if the local disk
> space is too constrained.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 27 21:14:07 2006
Return-Path: 
 <hadoop-dev-return-2216-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40398 invoked from network); 27 Jun 2006 21:14:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 21:14:07 -0000
Received: (qmail 79569 invoked by uid 500); 27 Jun 2006 21:14:06 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 79546 invoked by uid 500); 27 Jun 2006 21:14:06 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 79536 invoked by uid 99); 27 Jun 2006 21:14:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 14:14:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 14:14:05 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C39B47141F5
	for <hadoop-dev@lucene.apache.org>; Tue, 27 Jun 2006 21:12:30 +0000 (GMT)
Message-ID: <11767902.1151442750797.JavaMail.jira@brutus>
Date: Tue, 27 Jun 2006 21:12:30 +0000 (GMT+00:00)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-318) Progress in writing a DFS file does
 not count towards Job progress and can make the task timeout
In-Reply-To: <3721347.1151007329825.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-318?page=comments#action_12418126 ] 

Milind Bhandarkar commented on HADOOP-318:
------------------------------------------

I have attached the patch for nutch to NUTCH-312.
Affter the recent commmits, there are conflicts (espcecially in datanodeInfo etc). I am resolving those issues, and will provide  a new patch for this issue soon. In the meanwhile, I am deleting the currrently attached patches.

> Progress in writing a DFS file does not count towards Job progress and can make the task timeout
> ------------------------------------------------------------------------------------------------
>
>          Key: HADOOP-318
>          URL: http://issues.apache.org/jira/browse/HADOOP-318
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.3.2
>  Environment: all, but especially on big busy clusters
>     Reporter: Milind Bhandarkar
>     Assignee: Milind Bhandarkar
>      Fix For: 0.4.0

>
> When a task writes to DFS file, depending on how busy the cluster is, it can timeout after 10 minutes by default, because the progress towards writing a DFS file does not count as progress of the task. The solution (patch is forthcoming) is to provide a way to callback reporter to report task progress from DFSOutputStream.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 27 21:14:08 2006
Return-Path: 
 <hadoop-dev-return-2217-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40421 invoked from network); 27 Jun 2006 21:14:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 21:14:08 -0000
Received: (qmail 79740 invoked by uid 500); 27 Jun 2006 21:14:07 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 79715 invoked by uid 500); 27 Jun 2006 21:14:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 79689 invoked by uid 99); 27 Jun 2006 21:14:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 14:14:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 14:14:06 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CBAE571421B
	for <hadoop-dev@lucene.apache.org>; Tue, 27 Jun 2006 21:12:31 +0000 (GMT)
Message-ID: <31101885.1151442751831.JavaMail.jira@brutus>
Date: Tue, 27 Jun 2006 21:12:31 +0000 (GMT+00:00)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-318) Progress in writing a DFS file does
 not count towards Job progress and can make the task timeout
In-Reply-To: <3721347.1151007329825.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-318?page=all ]

Milind Bhandarkar updated HADOOP-318:
-------------------------------------

    Attachment:     (was: hadoop-datanode-allocation.patch)

> Progress in writing a DFS file does not count towards Job progress and can make the task timeout
> ------------------------------------------------------------------------------------------------
>
>          Key: HADOOP-318
>          URL: http://issues.apache.org/jira/browse/HADOOP-318
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.3.2
>  Environment: all, but especially on big busy clusters
>     Reporter: Milind Bhandarkar
>     Assignee: Milind Bhandarkar
>      Fix For: 0.4.0

>
> When a task writes to DFS file, depending on how busy the cluster is, it can timeout after 10 minutes by default, because the progress towards writing a DFS file does not count as progress of the task. The solution (patch is forthcoming) is to provide a way to callback reporter to report task progress from DFSOutputStream.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 27 21:14:09 2006
Return-Path: 
 <hadoop-dev-return-2218-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40470 invoked from network); 27 Jun 2006 21:14:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 21:14:09 -0000
Received: (qmail 79918 invoked by uid 500); 27 Jun 2006 21:14:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 79887 invoked by uid 500); 27 Jun 2006 21:14:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 79878 invoked by uid 99); 27 Jun 2006 21:14:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 14:14:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 14:14:07 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D9EB5714204
	for <hadoop-dev@lucene.apache.org>; Tue, 27 Jun 2006 21:12:32 +0000 (GMT)
Message-ID: <20535292.1151442752889.JavaMail.jira@brutus>
Date: Tue, 27 Jun 2006 21:12:32 +0000 (GMT+00:00)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-318) Progress in writing a DFS file does
 not count towards Job progress and can make the task timeout
In-Reply-To: <3721347.1151007329825.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-318?page=all ]

Milind Bhandarkar updated HADOOP-318:
-------------------------------------

    Attachment:     (was: hadoop-latency-new.patch)

> Progress in writing a DFS file does not count towards Job progress and can make the task timeout
> ------------------------------------------------------------------------------------------------
>
>          Key: HADOOP-318
>          URL: http://issues.apache.org/jira/browse/HADOOP-318
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.3.2
>  Environment: all, but especially on big busy clusters
>     Reporter: Milind Bhandarkar
>     Assignee: Milind Bhandarkar
>      Fix For: 0.4.0

>
> When a task writes to DFS file, depending on how busy the cluster is, it can timeout after 10 minutes by default, because the progress towards writing a DFS file does not count as progress of the task. The solution (patch is forthcoming) is to provide a way to callback reporter to report task progress from DFSOutputStream.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 27 21:14:10 2006
Return-Path: 
 <hadoop-dev-return-2219-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40507 invoked from network); 27 Jun 2006 21:14:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 21:14:10 -0000
Received: (qmail 80082 invoked by uid 500); 27 Jun 2006 21:14:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 80055 invoked by uid 500); 27 Jun 2006 21:14:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 80046 invoked by uid 99); 27 Jun 2006 21:14:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 14:14:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 14:14:08 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C9C5F71428D
	for <hadoop-dev@lucene.apache.org>; Tue, 27 Jun 2006 21:12:33 +0000 (GMT)
Message-ID: <14420929.1151442753823.JavaMail.jira@brutus>
Date: Tue, 27 Jun 2006 21:12:33 +0000 (GMT+00:00)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-318) Progress in writing a DFS file does
 not count towards Job progress and can make the task timeout
In-Reply-To: <3721347.1151007329825.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-318?page=all ]

Milind Bhandarkar updated HADOOP-318:
-------------------------------------

    Attachment:     (was: hadoop-latency.patch)

> Progress in writing a DFS file does not count towards Job progress and can make the task timeout
> ------------------------------------------------------------------------------------------------
>
>          Key: HADOOP-318
>          URL: http://issues.apache.org/jira/browse/HADOOP-318
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.3.2
>  Environment: all, but especially on big busy clusters
>     Reporter: Milind Bhandarkar
>     Assignee: Milind Bhandarkar
>      Fix For: 0.4.0

>
> When a task writes to DFS file, depending on how busy the cluster is, it can timeout after 10 minutes by default, because the progress towards writing a DFS file does not count as progress of the task. The solution (patch is forthcoming) is to provide a way to callback reporter to report task progress from DFSOutputStream.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jun 27 22:27:06 2006
Return-Path: 
 <hadoop-dev-return-2220-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 62882 invoked from network); 27 Jun 2006 22:27:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 22:27:06 -0000
Received: (qmail 84431 invoked by uid 500); 27 Jun 2006 22:27:06 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 84283 invoked by uid 500); 27 Jun 2006 22:27:06 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 84273 invoked by uid 99); 27 Jun 2006 22:27:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 15:27:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 15:27:05 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A9EDD7141F5
	for <hadoop-dev@lucene.apache.org>; Tue, 27 Jun 2006 22:25:30 +0000 (GMT)
Message-ID: <3844027.1151447130693.JavaMail.jira@brutus>
Date: Tue, 27 Jun 2006 22:25:30 +0000 (GMT+00:00)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-318) Progress in writing a DFS file does
 not count towards Job progress and can make the task timeout
In-Reply-To: <3721347.1151007329825.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-318?page=all ]

Milind Bhandarkar updated HADOOP-318:
-------------------------------------

    Attachment: hadoop-latency-latest.patch

this is the correct patch after resolving issues arising from conflicts due to recent commits.

> Progress in writing a DFS file does not count towards Job progress and can make the task timeout
> ------------------------------------------------------------------------------------------------
>
>          Key: HADOOP-318
>          URL: http://issues.apache.org/jira/browse/HADOOP-318
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.3.2
>  Environment: all, but especially on big busy clusters
>     Reporter: Milind Bhandarkar
>     Assignee: Milind Bhandarkar
>      Fix For: 0.4.0
>  Attachments: hadoop-latency-latest.patch
>
> When a task writes to DFS file, depending on how busy the cluster is, it can timeout after 10 minutes by default, because the progress towards writing a DFS file does not count as progress of the task. The solution (patch is forthcoming) is to provide a way to callback reporter to report task progress from DFSOutputStream.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 00:11:06 2006
Return-Path: 
 <hadoop-dev-return-2221-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 87006 invoked from network); 28 Jun 2006 00:11:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 00:11:06 -0000
Received: (qmail 96563 invoked by uid 500); 28 Jun 2006 00:11:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 96527 invoked by uid 500); 28 Jun 2006 00:11:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 96518 invoked by uid 99); 28 Jun 2006 00:11:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 17:11:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 17:11:04 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D62017141F4
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 00:09:29 +0000 (GMT)
Message-ID: <23857444.1151453369874.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 00:09:29 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-329) ClassCastException in DFSClient
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

ClassCastException in DFSClient
-------------------------------

         Key: HADOOP-329
         URL: http://issues.apache.org/jira/browse/HADOOP-329
     Project: Hadoop
        Type: Bug

  Components: dfs  
    Versions: 0.4.0    
 Environment: 400 node linux x86
    Reporter: Owen O'Malley


I'm getting the following message back to my launching application:

Exception in thread "main" org.apache.hadoop.ipc.RemoteException: java.io.IOException: java.lang.ClassCastException: org.apache.hadoop.dfs.DatanodeInfo cannot be cast to java.lang.Comparable
        at java.util.TreeMap.getEntry(TreeMap.java:325)
        at java.util.TreeMap.containsKey(TreeMap.java:209)
        at java.util.TreeSet.contains(TreeSet.java:217)
        at org.apache.hadoop.dfs.DFSClient.bestNode(DFSClient.java:373)
        at org.apache.hadoop.dfs.DFSClient.access$100(DFSClient.java:42)
        at org.apache.hadoop.dfs.DFSClient$DFSInputStream.blockSeekTo(DFSClient.java:520)
        at org.apache.hadoop.dfs.DFSClient$DFSInputStream.read(DFSClient.java:638)
        at org.apache.hadoop.fs.FSDataInputStream$PositionCache.read(FSDataInputStream.java:167)
        at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
        at java.io.BufferedInputStream.read1(BufferedInputStream.java:256)
        at java.io.BufferedInputStream.read(BufferedInputStream.java:313)
        at java.io.DataInputStream.readFully(DataInputStream.java:174)
        at java.io.DataInputStream.readFully(DataInputStream.java:150)
        at org.apache.hadoop.fs.FSDataInputStream$Checker.<init>(FSDataInputStream.java:55)
        at org.apache.hadoop.fs.FSDataInputStream.<init>(FSDataInputStream.java:237)
        at org.apache.hadoop.fs.FileSystem.open(FileSystem.java:157)
        at org.apache.hadoop.fs.FileUtil.copy(FileUtil.java:72)
        at org.apache.hadoop.dfs.DistributedFileSystem.copyToLocalFile(DistributedFileSystem.java:182)
        at org.apache.hadoop.mapred.JobInProgress.<init>(JobInProgress.java:83)
        at org.apache.hadoop.mapred.JobTracker.submitJob(JobTracker.java:935)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:589)
        at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:243)
        at org.apache.hadoop.ipc.Server$Handler.run(Server.java:469)

        at org.apache.hadoop.ipc.Client$Connection.run(Client.java:159)


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 00:49:07 2006
Return-Path: 
 <hadoop-dev-return-2222-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93408 invoked from network); 28 Jun 2006 00:49:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 00:49:07 -0000
Received: (qmail 24543 invoked by uid 500); 28 Jun 2006 00:49:06 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24513 invoked by uid 500); 28 Jun 2006 00:49:06 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24495 invoked by uid 99); 28 Jun 2006 00:49:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 17:49:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 17:49:05 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id ACB037141F3
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 00:47:30 +0000 (GMT)
Message-ID: <3182780.1151455650704.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 00:47:30 +0000 (GMT+00:00)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-322) Need a job control utility to submit
 and monitor a group of jobs which have DAG dependency
In-Reply-To: <4931825.1151126129857.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-322?page=comments#action_12418148 ] 

Runping Qi commented on HADOOP-322:
-----------------------------------

OK,

I'll re-submit a new patch with a unit test class (may take a few days though).

> Need a job control utility to submit and monitor a group of jobs which have DAG dependency
> ------------------------------------------------------------------------------------------
>
>          Key: HADOOP-322
>          URL: http://issues.apache.org/jira/browse/HADOOP-322
>      Project: Hadoop
>         Type: New Feature

>     Reporter: Runping Qi
>     Assignee: Runping Qi
>  Attachments: job_control_patch.txt
>
> In my applications, some jobs depend on the outputs of other jobs. Therefore, job dependency forms a DAG. A job is ready to run if and only if it does not have any dependency or all the jobs it depends are finished successfully. To help schedule and monitor a group of jobs like that, I am thinking of implementing a utility that:
> 	- accept jobs with dependency specification
>       - monitor job status
>       - submit jobs when they are ready
> With such a utility, the application can construct its jobs, specify their dependency and then hand the jobs to the utility class. The utility takes care of the details of job submission.
> I'll post my design skech for comments/suggestion.
> Eventually, I'll submit a patch for the utility.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 02:31:08 2006
Return-Path: 
 <hadoop-dev-return-2223-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 15416 invoked from network); 28 Jun 2006 02:31:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 02:31:08 -0000
Received: (qmail 86898 invoked by uid 500); 28 Jun 2006 02:31:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86747 invoked by uid 500); 28 Jun 2006 02:31:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86738 invoked by uid 99); 28 Jun 2006 02:31:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 19:31:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 19:31:06 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BA2DC7141E3
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 02:29:31 +0000 (GMT)
Message-ID: <7288899.1151461771758.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 02:29:31 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-329) ClassCastException in DFSClient
In-Reply-To: <23857444.1151453369874.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-329?page=comments#action_12418154 ] 

Doug Cutting commented on HADOOP-329:
-------------------------------------

This is something that unit tests should have caught.  Perhaps we should add a test that starts a two-datanode DFS system?

> ClassCastException in DFSClient
> -------------------------------
>
>          Key: HADOOP-329
>          URL: http://issues.apache.org/jira/browse/HADOOP-329
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.4.0
>  Environment: 400 node linux x86
>     Reporter: Owen O'Malley

>
> I'm getting the following message back to my launching application:
> Exception in thread "main" org.apache.hadoop.ipc.RemoteException: java.io.IOException: java.lang.ClassCastException: org.apache.hadoop.dfs.DatanodeInfo cannot be cast to java.lang.Comparable
>         at java.util.TreeMap.getEntry(TreeMap.java:325)
>         at java.util.TreeMap.containsKey(TreeMap.java:209)
>         at java.util.TreeSet.contains(TreeSet.java:217)
>         at org.apache.hadoop.dfs.DFSClient.bestNode(DFSClient.java:373)
>         at org.apache.hadoop.dfs.DFSClient.access$100(DFSClient.java:42)
>         at org.apache.hadoop.dfs.DFSClient$DFSInputStream.blockSeekTo(DFSClient.java:520)
>         at org.apache.hadoop.dfs.DFSClient$DFSInputStream.read(DFSClient.java:638)
>         at org.apache.hadoop.fs.FSDataInputStream$PositionCache.read(FSDataInputStream.java:167)
>         at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
>         at java.io.BufferedInputStream.read1(BufferedInputStream.java:256)
>         at java.io.BufferedInputStream.read(BufferedInputStream.java:313)
>         at java.io.DataInputStream.readFully(DataInputStream.java:174)
>         at java.io.DataInputStream.readFully(DataInputStream.java:150)
>         at org.apache.hadoop.fs.FSDataInputStream$Checker.<init>(FSDataInputStream.java:55)
>         at org.apache.hadoop.fs.FSDataInputStream.<init>(FSDataInputStream.java:237)
>         at org.apache.hadoop.fs.FileSystem.open(FileSystem.java:157)
>         at org.apache.hadoop.fs.FileUtil.copy(FileUtil.java:72)
>         at org.apache.hadoop.dfs.DistributedFileSystem.copyToLocalFile(DistributedFileSystem.java:182)
>         at org.apache.hadoop.mapred.JobInProgress.<init>(JobInProgress.java:83)
>         at org.apache.hadoop.mapred.JobTracker.submitJob(JobTracker.java:935)
>         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
>         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>         at java.lang.reflect.Method.invoke(Method.java:589)
>         at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:243)
>         at org.apache.hadoop.ipc.Server$Handler.run(Server.java:469)
>         at org.apache.hadoop.ipc.Client$Connection.run(Client.java:159)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 04:08:33 2006
Return-Path: 
 <hadoop-dev-return-2224-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33165 invoked from network); 28 Jun 2006 04:08:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 04:08:33 -0000
Received: (qmail 43303 invoked by uid 500); 28 Jun 2006 04:08:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 43275 invoked by uid 500); 28 Jun 2006 04:08:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 43266 invoked by uid 99); 28 Jun 2006 04:08:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 21:08:32 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.145.54.173] (HELO mrout3.yahoo.com) (216.145.54.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 21:08:32 -0700
Received: from [10.0.0.11] (snvvpn-10-72-66-c16.corp.yahoo.com [10.72.66.16])
	by mrout3.yahoo.com (8.13.6/8.13.4/y.out) with ESMTP id k5S46iE8015766
	for <hadoop-dev@lucene.apache.org>; Tue, 27 Jun 2006 21:06:44 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:content-transfer-encoding:message-id:
	content-type:to:from:subject:date:x-mailer;
	b=CNLynorS40LoNfSYqnyzLNyV2gxsK3fG/KtJVSGFew6rGALrHOczEAzpE/1ZzMmA
Mime-Version: 1.0 (Apple Message framework v624)
Content-Transfer-Encoding: 7bit
Message-Id: <7ed5b35dce563b9c409c009716aa5a15@yahoo-inc.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
To: hadoop-dev@lucene.apache.org
From: "Owen O'Malley" <owen@yahoo-inc.com>
Subject: svn head broken tonight
Date: Tue, 27 Jun 2006 21:06:47 -0700
X-Mailer: Apple Mail (2.624)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Just a word of warning, the svn head is currently broken. We will get 
it fixed tomorrow.

-- Owen


From MAILER-DAEMON Wed Jun 28 05:16:18 2006
Return-Path: 
 <hadoop-dev-return-2225-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43578 invoked from network); 28 Jun 2006 05:16:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 05:16:18 -0000
Received: (qmail 94403 invoked by uid 500); 28 Jun 2006 05:16:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94306 invoked by uid 500); 28 Jun 2006 05:16:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94205 invoked by uid 99); 28 Jun 2006 05:16:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 22:16:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 22:16:05 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9FE367141E3
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 05:14:30 +0000 (GMT)
Message-ID: <31687261.1151471670651.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 05:14:30 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-321) DatanodeInfo refactoring
In-Reply-To: <20976373.1151024969902.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-321?page=comments#action_12418168 ] 

Owen O'Malley commented on HADOOP-321:
--------------------------------------

This is the patch that broke the system. Having looked at this code, I don't like the use of inheritance between DatanodeInfo and DatanodeDescriptor. I think that composition is a _much_ better approach. They are _not_ logically the sub/super-type of each other. In particular, DatanodeInfo is intended to be Writable and DatanodeDescriptor is intended NOT to be Writable. Making them inherit from each other not only broke the system, it is a really problematic design.

In any case, if you take svn head and revert this patch using:
patch -p0 -R < DatanodeRefactor.patch
you'll have a working system again.

> DatanodeInfo refactoring
> ------------------------
>
>          Key: HADOOP-321
>          URL: http://issues.apache.org/jira/browse/HADOOP-321
>      Project: Hadoop
>         Type: Improvement

>   Components: dfs
>     Reporter: Konstantin Shvachko
>      Fix For: 0.4.0
>  Attachments: DatanodeInfo_refactor.patch
>
> I'm trying to refactor some name node classes, which seem to be similar.
> So DatanodeInfo is a public api now for purely external ( to name node) use.
> The name node class that stores information about data nodes including the
> set of its blocks is called DatanodeDescriptor.
> The DatanodeReport is removed since it was a variation of DatanodeInfo.
> Previously DatanodeInfo and DatanodeDescriptor were the same class, and
> DatanodeReport was used for reporting node statistics only.
> This is a preparation step for HADOOP-306.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 14:08:10 2006
Return-Path: 
 <hadoop-dev-return-2226-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 44951 invoked from network); 28 Jun 2006 14:08:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 14:08:10 -0000
Received: (qmail 129 invoked by uid 500); 28 Jun 2006 14:08:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 99943 invoked by uid 500); 28 Jun 2006 14:08:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 99934 invoked by uid 99); 28 Jun 2006 14:08:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 07:08:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 07:08:07 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1C7217141F4
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 14:06:32 +0000 (GMT)
Message-ID: <31442161.1151503592113.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 14:06:32 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Reopened: (HADOOP-321) DatanodeInfo refactoring
In-Reply-To: <20976373.1151024969902.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-321?page=all ]
     
Doug Cutting reopened HADOOP-321:
---------------------------------

     Assign To: Konstantin Shvachko

I reverted this.

> DatanodeInfo refactoring
> ------------------------
>
>          Key: HADOOP-321
>          URL: http://issues.apache.org/jira/browse/HADOOP-321
>      Project: Hadoop
>         Type: Improvement

>   Components: dfs
>     Reporter: Konstantin Shvachko
>     Assignee: Konstantin Shvachko
>      Fix For: 0.4.0
>  Attachments: DatanodeInfo_refactor.patch
>
> I'm trying to refactor some name node classes, which seem to be similar.
> So DatanodeInfo is a public api now for purely external ( to name node) use.
> The name node class that stores information about data nodes including the
> set of its blocks is called DatanodeDescriptor.
> The DatanodeReport is removed since it was a variation of DatanodeInfo.
> Previously DatanodeInfo and DatanodeDescriptor were the same class, and
> DatanodeReport was used for reporting node statistics only.
> This is a preparation step for HADOOP-306.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 14:10:08 2006
Return-Path: 
 <hadoop-dev-return-2227-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 45495 invoked from network); 28 Jun 2006 14:10:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 14:10:08 -0000
Received: (qmail 3992 invoked by uid 500); 28 Jun 2006 14:10:07 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3930 invoked by uid 500); 28 Jun 2006 14:10:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3918 invoked by uid 99); 28 Jun 2006 14:10:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 07:10:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 07:10:06 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CBFBB7141F3
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 14:08:30 +0000 (GMT)
Message-ID: <941390.1151503710830.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 14:08:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-329) ClassCastException in DFSClient
In-Reply-To: <23857444.1151453369874.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-329?page=all ]
     
Doug Cutting resolved HADOOP-329:
---------------------------------

    Resolution: Fixed

This was fixed when I reverted HADOOP-321.

> ClassCastException in DFSClient
> -------------------------------
>
>          Key: HADOOP-329
>          URL: http://issues.apache.org/jira/browse/HADOOP-329
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.4.0
>  Environment: 400 node linux x86
>     Reporter: Owen O'Malley

>
> I'm getting the following message back to my launching application:
> Exception in thread "main" org.apache.hadoop.ipc.RemoteException: java.io.IOException: java.lang.ClassCastException: org.apache.hadoop.dfs.DatanodeInfo cannot be cast to java.lang.Comparable
>         at java.util.TreeMap.getEntry(TreeMap.java:325)
>         at java.util.TreeMap.containsKey(TreeMap.java:209)
>         at java.util.TreeSet.contains(TreeSet.java:217)
>         at org.apache.hadoop.dfs.DFSClient.bestNode(DFSClient.java:373)
>         at org.apache.hadoop.dfs.DFSClient.access$100(DFSClient.java:42)
>         at org.apache.hadoop.dfs.DFSClient$DFSInputStream.blockSeekTo(DFSClient.java:520)
>         at org.apache.hadoop.dfs.DFSClient$DFSInputStream.read(DFSClient.java:638)
>         at org.apache.hadoop.fs.FSDataInputStream$PositionCache.read(FSDataInputStream.java:167)
>         at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
>         at java.io.BufferedInputStream.read1(BufferedInputStream.java:256)
>         at java.io.BufferedInputStream.read(BufferedInputStream.java:313)
>         at java.io.DataInputStream.readFully(DataInputStream.java:174)
>         at java.io.DataInputStream.readFully(DataInputStream.java:150)
>         at org.apache.hadoop.fs.FSDataInputStream$Checker.<init>(FSDataInputStream.java:55)
>         at org.apache.hadoop.fs.FSDataInputStream.<init>(FSDataInputStream.java:237)
>         at org.apache.hadoop.fs.FileSystem.open(FileSystem.java:157)
>         at org.apache.hadoop.fs.FileUtil.copy(FileUtil.java:72)
>         at org.apache.hadoop.dfs.DistributedFileSystem.copyToLocalFile(DistributedFileSystem.java:182)
>         at org.apache.hadoop.mapred.JobInProgress.<init>(JobInProgress.java:83)
>         at org.apache.hadoop.mapred.JobTracker.submitJob(JobTracker.java:935)
>         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
>         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>         at java.lang.reflect.Method.invoke(Method.java:589)
>         at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:243)
>         at org.apache.hadoop.ipc.Server$Handler.run(Server.java:469)
>         at org.apache.hadoop.ipc.Client$Connection.run(Client.java:159)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 14:17:08 2006
Return-Path: 
 <hadoop-dev-return-2228-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 48160 invoked from network); 28 Jun 2006 14:17:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 14:17:08 -0000
Received: (qmail 25182 invoked by uid 500); 28 Jun 2006 14:17:07 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 25151 invoked by uid 500); 28 Jun 2006 14:17:06 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 25142 invoked by uid 99); 28 Jun 2006 14:17:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 07:17:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 07:17:06 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 998B8410005
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 14:15:30 +0000 (GMT)
Message-ID: <20768512.1151504130626.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 14:15:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-328) add a -i option to distcp to ignore
 read errors of the input files
In-Reply-To: <16817701.1151390609860.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-328?page=all ]
     
Doug Cutting resolved HADOOP-328:
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Owen!

> add a -i option to distcp to ignore read errors of the input files
> ------------------------------------------------------------------
>
>          Key: HADOOP-328
>          URL: http://issues.apache.org/jira/browse/HADOOP-328
>      Project: Hadoop
>         Type: Improvement

>   Components: util
>     Versions: 0.3.2
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.4.0
>  Attachments: distcp-ignore-error.patch
>
> Add an option "-i" to ignore problems reading files and just copy what can be copied.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 14:21:07 2006
Return-Path: 
 <hadoop-dev-return-2229-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 49126 invoked from network); 28 Jun 2006 14:21:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 14:21:07 -0000
Received: (qmail 29814 invoked by uid 500); 28 Jun 2006 14:21:07 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 29770 invoked by uid 500); 28 Jun 2006 14:21:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 29749 invoked by uid 99); 28 Jun 2006 14:21:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 07:21:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 07:21:06 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B15B17141E0
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 14:19:30 +0000 (GMT)
Message-ID: <3775001.1151504370723.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 14:19:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-318) Progress in writing a DFS file does
 not count towards Job progress and can make the task timeout
In-Reply-To: <3721347.1151007329825.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-318?page=comments#action_12418249 ] 

Doug Cutting commented on HADOOP-318:
-------------------------------------

Sigh.  Now, with HADOOP-321 reverted, this no longer applies.

> Progress in writing a DFS file does not count towards Job progress and can make the task timeout
> ------------------------------------------------------------------------------------------------
>
>          Key: HADOOP-318
>          URL: http://issues.apache.org/jira/browse/HADOOP-318
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.3.2
>  Environment: all, but especially on big busy clusters
>     Reporter: Milind Bhandarkar
>     Assignee: Milind Bhandarkar
>      Fix For: 0.4.0
>  Attachments: hadoop-latency-latest.patch
>
> When a task writes to DFS file, depending on how busy the cluster is, it can timeout after 10 minutes by default, because the progress towards writing a DFS file does not count as progress of the task. The solution (patch is forthcoming) is to provide a way to callback reporter to report task progress from DFSOutputStream.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 15:31:08 2006
Return-Path: 
 <hadoop-dev-return-2230-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93883 invoked from network); 28 Jun 2006 15:31:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 15:31:08 -0000
Received: (qmail 33960 invoked by uid 500); 28 Jun 2006 15:31:07 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 33809 invoked by uid 500); 28 Jun 2006 15:31:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 33800 invoked by uid 99); 28 Jun 2006 15:31:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 08:31:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 08:31:06 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A49D07141F3
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 15:29:30 +0000 (GMT)
Message-ID: <13247285.1151508570671.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 15:29:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-27) MapRed tries to allocate tasks to
 nodes that have no available disk space
In-Reply-To: <1424617142.1139335680270.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-27?page=all ]
     
Doug Cutting resolved HADOOP-27:
--------------------------------

    Fix Version: 0.4.0
     Resolution: Fixed

I just committed this.  Thanks, Johan.

> MapRed tries to allocate tasks to nodes that have no available disk space
> -------------------------------------------------------------------------
>
>          Key: HADOOP-27
>          URL: http://issues.apache.org/jira/browse/HADOOP-27
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Reporter: Mike Cafarella
>      Fix For: 0.4.0
>  Attachments: minspace_mapredtask.patch, minspace_mapredtaskv3.patch
>
>   What it says above.  MapRed TaskTrackers should not offer task service if the local disk
> space is too constrained.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 16:38:08 2006
Return-Path: 
 <hadoop-dev-return-2231-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 25315 invoked from network); 28 Jun 2006 16:38:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 16:38:08 -0000
Received: (qmail 3371 invoked by uid 500); 28 Jun 2006 16:38:07 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3342 invoked by uid 500); 28 Jun 2006 16:38:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3312 invoked by uid 99); 28 Jun 2006 16:38:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 09:38:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 09:38:06 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A61D1410005
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 16:36:30 +0000 (GMT)
Message-ID: <10055125.1151512590677.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 16:36:30 +0000 (GMT+00:00)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-54?page=comments#action_12418273 ] 

eric baldeschwieler commented on HADOOP-54:
-------------------------------------------

I've been thinking about this.  I think we should use a very simple scheme like the current sequence file.  The writer would take a configurable buffer, maybe 10 meg by default, fill that with key/values and then compress them.  The result would be stored with start markers like the current sequence file, so the partitioning logic could remain unchanged.

Within a block, I think we should compress the keys together in a block and the values in a following block.  Both blocks' lengths should be stored, so that one can quickly scan the keys and then scan only as far as needed in the value blocks.  This would allow very efficient sub-sampling when you have large data blocks.  Which could be a life saver in some of our typical apps.  You'll also get better compression, since you'll be compressing like items together.

Thoughts?

> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>          Key: HADOOP-54
>          URL: http://issues.apache.org/jira/browse/HADOOP-54
>      Project: Hadoop
>         Type: Improvement

>   Components: io
>     Versions: 0.2.0
>     Reporter: Doug Cutting
>     Assignee: Michel Tourn
>      Fix For: 0.4.0

>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 17:09:08 2006
Return-Path: 
 <hadoop-dev-return-2232-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46410 invoked from network); 28 Jun 2006 17:09:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 17:09:08 -0000
Received: (qmail 40809 invoked by uid 500); 28 Jun 2006 17:09:07 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40769 invoked by uid 500); 28 Jun 2006 17:09:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 40753 invoked by uid 99); 28 Jun 2006 17:09:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 10:09:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 10:09:06 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AA77E410005
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 17:07:30 +0000 (GMT)
Message-ID: <6421942.1151514450694.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 17:07:30 +0000 (GMT+00:00)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-318) Progress in writing a DFS file does
 not count towards Job progress and can make the task timeout
In-Reply-To: <3721347.1151007329825.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-318?page=comments#action_12418277 ] 

Milind Bhandarkar commented on HADOOP-318:
------------------------------------------

I will submit the correct patch again.

> Progress in writing a DFS file does not count towards Job progress and can make the task timeout
> ------------------------------------------------------------------------------------------------
>
>          Key: HADOOP-318
>          URL: http://issues.apache.org/jira/browse/HADOOP-318
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.3.2
>  Environment: all, but especially on big busy clusters
>     Reporter: Milind Bhandarkar
>     Assignee: Milind Bhandarkar
>      Fix For: 0.4.0
>  Attachments: hadoop-latency-latest.patch
>
> When a task writes to DFS file, depending on how busy the cluster is, it can timeout after 10 minutes by default, because the progress towards writing a DFS file does not count as progress of the task. The solution (patch is forthcoming) is to provide a way to callback reporter to report task progress from DFSOutputStream.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 17:46:09 2006
Return-Path: 
 <hadoop-dev-return-2233-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 58560 invoked from network); 28 Jun 2006 17:46:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 17:46:09 -0000
Received: (qmail 97551 invoked by uid 500); 28 Jun 2006 17:46:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97387 invoked by uid 500); 28 Jun 2006 17:46:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97374 invoked by uid 99); 28 Jun 2006 17:46:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 10:46:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 10:46:07 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0E748410005
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 17:44:31 +0000 (GMT)
Message-ID: <1464468.1151516671055.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 17:44:31 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-99) task trackers can only be assigned one
 task every heartbeat
In-Reply-To: <1017503414.1143102720520.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-99?page=all ]
     
Owen O'Malley resolved HADOOP-99:
---------------------------------

    Resolution: Fixed

> task trackers can only be assigned one task every heartbeat
> -----------------------------------------------------------
>
>          Key: HADOOP-99
>          URL: http://issues.apache.org/jira/browse/HADOOP-99
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.1.0
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.4.0

>
> Task trackers only call pollForNewTask once per a heartbeat (10 seconds) rather than when a task finishes. Especially for quick maps this means that the cluster is under utilized, because each map finishes in a cycle and the task tracker never gets a second, third or fourth task to run.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 18:03:12 2006
Return-Path: 
 <hadoop-dev-return-2234-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 65237 invoked from network); 28 Jun 2006 18:03:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 18:03:12 -0000
Received: (qmail 35424 invoked by uid 500); 28 Jun 2006 18:03:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 35367 invoked by uid 500); 28 Jun 2006 18:03:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 35354 invoked by uid 99); 28 Jun 2006 18:03:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 11:03:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 11:03:10 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 05E7A714204
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 18:01:35 +0000 (GMT)
Message-ID: <19403257.1151517695021.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 18:01:35 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-330) Raw SequenceFile Input/Output formats
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Raw SequenceFile Input/Output formats
-------------------------------------

         Key: HADOOP-330
         URL: http://issues.apache.org/jira/browse/HADOOP-330
     Project: Hadoop
        Type: Improvement

  Components: mapred  
    Versions: 0.3.2    
    Reporter: Owen O'Malley
 Assigned to: Owen O'Malley 
     Fix For: 0.5.0


We'd like a raw input/output format for Map/Reduce that allows jobs to get the raw bytes for keys/values. This would allow things like the IdentityMap to be much faster because the values would not be decompressed/compressed or serialized/deserialized.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 19:10:10 2006
Return-Path: 
 <hadoop-dev-return-2235-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86694 invoked from network); 28 Jun 2006 19:10:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 19:10:10 -0000
Received: (qmail 69206 invoked by uid 500); 28 Jun 2006 19:10:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 69172 invoked by uid 500); 28 Jun 2006 19:10:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 69162 invoked by uid 99); 28 Jun 2006 19:10:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 12:10:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 12:10:06 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B5FAC7141F3
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 19:08:30 +0000 (GMT)
Message-ID: <20979386.1151521710742.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 19:08:30 +0000 (GMT+00:00)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-322) Need a job control utility to submit
 and monitor a group of jobs which have DAG dependency
In-Reply-To: <4931825.1151126129857.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-322?page=all ]

Runping Qi updated HADOOP-322:
------------------------------

    Attachment:     (was: job_control_patch.txt)

> Need a job control utility to submit and monitor a group of jobs which have DAG dependency
> ------------------------------------------------------------------------------------------
>
>          Key: HADOOP-322
>          URL: http://issues.apache.org/jira/browse/HADOOP-322
>      Project: Hadoop
>         Type: New Feature

>     Reporter: Runping Qi
>     Assignee: Runping Qi

>
> In my applications, some jobs depend on the outputs of other jobs. Therefore, job dependency forms a DAG. A job is ready to run if and only if it does not have any dependency or all the jobs it depends are finished successfully. To help schedule and monitor a group of jobs like that, I am thinking of implementing a utility that:
> 	- accept jobs with dependency specification
>       - monitor job status
>       - submit jobs when they are ready
> With such a utility, the application can construct its jobs, specify their dependency and then hand the jobs to the utility class. The utility takes care of the details of job submission.
> I'll post my design skech for comments/suggestion.
> Eventually, I'll submit a patch for the utility.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 19:12:12 2006
Return-Path: 
 <hadoop-dev-return-2236-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 87079 invoked from network); 28 Jun 2006 19:12:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 19:12:12 -0000
Received: (qmail 71121 invoked by uid 500); 28 Jun 2006 19:12:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 71010 invoked by uid 500); 28 Jun 2006 19:12:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 70994 invoked by uid 99); 28 Jun 2006 19:12:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 12:12:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 12:12:08 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9548D7141F4
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 19:10:32 +0000 (GMT)
Message-ID: <18064778.1151521832608.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 19:10:32 +0000 (GMT+00:00)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-322) Need a job control utility to submit
 and monitor a group of jobs which have DAG dependency
In-Reply-To: <4931825.1151126129857.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-322?page=all ]

Runping Qi updated HADOOP-322:
------------------------------

    Attachment: job_control_patch.txt


Here is a new patch.

I've replaced tabs with spaces, and added a unit test class TestJobControl.


> Need a job control utility to submit and monitor a group of jobs which have DAG dependency
> ------------------------------------------------------------------------------------------
>
>          Key: HADOOP-322
>          URL: http://issues.apache.org/jira/browse/HADOOP-322
>      Project: Hadoop
>         Type: New Feature

>     Reporter: Runping Qi
>     Assignee: Runping Qi
>  Attachments: job_control_patch.txt
>
> In my applications, some jobs depend on the outputs of other jobs. Therefore, job dependency forms a DAG. A job is ready to run if and only if it does not have any dependency or all the jobs it depends are finished successfully. To help schedule and monitor a group of jobs like that, I am thinking of implementing a utility that:
> 	- accept jobs with dependency specification
>       - monitor job status
>       - submit jobs when they are ready
> With such a utility, the application can construct its jobs, specify their dependency and then hand the jobs to the utility class. The utility takes care of the details of job submission.
> I'll post my design skech for comments/suggestion.
> Eventually, I'll submit a patch for the utility.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 19:24:08 2006
Return-Path: 
 <hadoop-dev-return-2237-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 97156 invoked from network); 28 Jun 2006 19:24:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 19:24:08 -0000
Received: (qmail 97499 invoked by uid 500); 28 Jun 2006 19:24:07 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97479 invoked by uid 500); 28 Jun 2006 19:24:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97466 invoked by uid 99); 28 Jun 2006 19:24:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 12:24:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 12:24:06 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B9508410006
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 19:22:30 +0000 (GMT)
Message-ID: <25536294.1151522550756.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 19:22:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-322) Need a job control utility to submit
 and monitor a group of jobs which have DAG dependency
In-Reply-To: <4931825.1151126129857.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-322?page=comments#action_12418295 ] 

Doug Cutting commented on HADOOP-322:
-------------------------------------

The unit test class should extend junit.framework.TestCase and implement at least one public method named testXXX().

> Need a job control utility to submit and monitor a group of jobs which have DAG dependency
> ------------------------------------------------------------------------------------------
>
>          Key: HADOOP-322
>          URL: http://issues.apache.org/jira/browse/HADOOP-322
>      Project: Hadoop
>         Type: New Feature

>     Reporter: Runping Qi
>     Assignee: Runping Qi
>  Attachments: job_control_patch.txt
>
> In my applications, some jobs depend on the outputs of other jobs. Therefore, job dependency forms a DAG. A job is ready to run if and only if it does not have any dependency or all the jobs it depends are finished successfully. To help schedule and monitor a group of jobs like that, I am thinking of implementing a utility that:
> 	- accept jobs with dependency specification
>       - monitor job status
>       - submit jobs when they are ready
> With such a utility, the application can construct its jobs, specify their dependency and then hand the jobs to the utility class. The utility takes care of the details of job submission.
> I'll post my design skech for comments/suggestion.
> Eventually, I'll submit a patch for the utility.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 19:35:08 2006
Return-Path: 
 <hadoop-dev-return-2238-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 2134 invoked from network); 28 Jun 2006 19:35:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 19:35:08 -0000
Received: (qmail 26563 invoked by uid 500); 28 Jun 2006 19:35:07 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26533 invoked by uid 500); 28 Jun 2006 19:35:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26520 invoked by uid 99); 28 Jun 2006 19:35:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 12:35:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 12:35:06 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A39A37141E0
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 19:33:30 +0000 (GMT)
Message-ID: <33499584.1151523210667.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 19:33:30 +0000 (GMT+00:00)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-322) Need a job control utility to submit
 and monitor a group of jobs which have DAG dependency
In-Reply-To: <4931825.1151126129857.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-322?page=all ]

Runping Qi updated HADOOP-322:
------------------------------

    Attachment:     (was: job_control_patch.txt)

> Need a job control utility to submit and monitor a group of jobs which have DAG dependency
> ------------------------------------------------------------------------------------------
>
>          Key: HADOOP-322
>          URL: http://issues.apache.org/jira/browse/HADOOP-322
>      Project: Hadoop
>         Type: New Feature

>     Reporter: Runping Qi
>     Assignee: Runping Qi
>  Attachments: job_control_patch.txt
>
> In my applications, some jobs depend on the outputs of other jobs. Therefore, job dependency forms a DAG. A job is ready to run if and only if it does not have any dependency or all the jobs it depends are finished successfully. To help schedule and monitor a group of jobs like that, I am thinking of implementing a utility that:
> 	- accept jobs with dependency specification
>       - monitor job status
>       - submit jobs when they are ready
> With such a utility, the application can construct its jobs, specify their dependency and then hand the jobs to the utility class. The utility takes care of the details of job submission.
> I'll post my design skech for comments/suggestion.
> Eventually, I'll submit a patch for the utility.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 19:35:09 2006
Return-Path: 
 <hadoop-dev-return-2239-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 2169 invoked from network); 28 Jun 2006 19:35:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 19:35:09 -0000
Received: (qmail 26731 invoked by uid 500); 28 Jun 2006 19:35:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26705 invoked by uid 500); 28 Jun 2006 19:35:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26696 invoked by uid 99); 28 Jun 2006 19:35:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 12:35:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 12:35:07 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 909127141F3
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 19:33:31 +0000 (GMT)
Message-ID: <431001.1151523211589.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 19:33:31 +0000 (GMT+00:00)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-322) Need a job control utility to submit
 and monitor a group of jobs which have DAG dependency
In-Reply-To: <4931825.1151126129857.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-322?page=all ]

Runping Qi updated HADOOP-322:
------------------------------

    Attachment: job_control_patch.txt

> Need a job control utility to submit and monitor a group of jobs which have DAG dependency
> ------------------------------------------------------------------------------------------
>
>          Key: HADOOP-322
>          URL: http://issues.apache.org/jira/browse/HADOOP-322
>      Project: Hadoop
>         Type: New Feature

>     Reporter: Runping Qi
>     Assignee: Runping Qi
>  Attachments: job_control_patch.txt
>
> In my applications, some jobs depend on the outputs of other jobs. Therefore, job dependency forms a DAG. A job is ready to run if and only if it does not have any dependency or all the jobs it depends are finished successfully. To help schedule and monitor a group of jobs like that, I am thinking of implementing a utility that:
> 	- accept jobs with dependency specification
>       - monitor job status
>       - submit jobs when they are ready
> With such a utility, the application can construct its jobs, specify their dependency and then hand the jobs to the utility class. The utility takes care of the details of job submission.
> I'll post my design skech for comments/suggestion.
> Eventually, I'll submit a patch for the utility.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 19:37:08 2006
Return-Path: 
 <hadoop-dev-return-2240-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 2840 invoked from network); 28 Jun 2006 19:37:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 19:37:08 -0000
Received: (qmail 31288 invoked by uid 500); 28 Jun 2006 19:37:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 31256 invoked by uid 500); 28 Jun 2006 19:37:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31247 invoked by uid 99); 28 Jun 2006 19:37:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 12:37:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 12:37:06 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9E833410005
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 19:35:30 +0000 (GMT)
Message-ID: <26629813.1151523330646.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 19:35:30 +0000 (GMT+00:00)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-318) Progress in writing a DFS file does
 not count towards Job progress and can make the task timeout
In-Reply-To: <3721347.1151007329825.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-318?page=all ]

Milind Bhandarkar updated HADOOP-318:
-------------------------------------

    Attachment:     (was: hadoop-latency-latest.patch)

> Progress in writing a DFS file does not count towards Job progress and can make the task timeout
> ------------------------------------------------------------------------------------------------
>
>          Key: HADOOP-318
>          URL: http://issues.apache.org/jira/browse/HADOOP-318
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.3.2
>  Environment: all, but especially on big busy clusters
>     Reporter: Milind Bhandarkar
>     Assignee: Milind Bhandarkar
>      Fix For: 0.4.0

>
> When a task writes to DFS file, depending on how busy the cluster is, it can timeout after 10 minutes by default, because the progress towards writing a DFS file does not count as progress of the task. The solution (patch is forthcoming) is to provide a way to callback reporter to report task progress from DFSOutputStream.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 19:51:08 2006
Return-Path: 
 <hadoop-dev-return-2241-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 7187 invoked from network); 28 Jun 2006 19:51:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 19:51:08 -0000
Received: (qmail 68983 invoked by uid 500); 28 Jun 2006 19:51:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68835 invoked by uid 500); 28 Jun 2006 19:51:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68826 invoked by uid 99); 28 Jun 2006 19:51:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 12:51:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 12:51:06 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A8E97410005
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 19:49:30 +0000 (GMT)
Message-ID: <18186790.1151524170688.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 19:49:30 +0000 (GMT+00:00)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-318) Progress in writing a DFS file does
 not count towards Job progress and can make the task timeout
In-Reply-To: <3721347.1151007329825.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-318?page=all ]

Milind Bhandarkar updated HADOOP-318:
-------------------------------------

    Attachment: hadoop-latency-latest.patch

After factoring out the changes introduced by recalling patch for hadoop-320, I have not attached a new patch for this bug. Hopefully this is the last patch.

> Progress in writing a DFS file does not count towards Job progress and can make the task timeout
> ------------------------------------------------------------------------------------------------
>
>          Key: HADOOP-318
>          URL: http://issues.apache.org/jira/browse/HADOOP-318
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.3.2
>  Environment: all, but especially on big busy clusters
>     Reporter: Milind Bhandarkar
>     Assignee: Milind Bhandarkar
>      Fix For: 0.4.0
>  Attachments: hadoop-latency-latest.patch
>
> When a task writes to DFS file, depending on how busy the cluster is, it can timeout after 10 minutes by default, because the progress towards writing a DFS file does not count as progress of the task. The solution (patch is forthcoming) is to provide a way to callback reporter to report task progress from DFSOutputStream.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 19:51:09 2006
Return-Path: 
 <hadoop-dev-return-2242-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 7212 invoked from network); 28 Jun 2006 19:51:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 19:51:09 -0000
Received: (qmail 69027 invoked by uid 500); 28 Jun 2006 19:51:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 69004 invoked by uid 500); 28 Jun 2006 19:51:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68993 invoked by uid 99); 28 Jun 2006 19:51:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 12:51:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 12:51:07 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 97918410008
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 19:49:31 +0000 (GMT)
Message-ID: <4658625.1151524171618.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 19:49:31 +0000 (GMT+00:00)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-318) Progress in writing a DFS file does
 not count towards Job progress and can make the task timeout
In-Reply-To: <3721347.1151007329825.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-318?page=comments#action_12418302 ] 

Milind Bhandarkar commented on HADOOP-318:
------------------------------------------

I meant reverting hadoop-321, not hadoop-320.

> Progress in writing a DFS file does not count towards Job progress and can make the task timeout
> ------------------------------------------------------------------------------------------------
>
>          Key: HADOOP-318
>          URL: http://issues.apache.org/jira/browse/HADOOP-318
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.3.2
>  Environment: all, but especially on big busy clusters
>     Reporter: Milind Bhandarkar
>     Assignee: Milind Bhandarkar
>      Fix For: 0.4.0
>  Attachments: hadoop-latency-latest.patch
>
> When a task writes to DFS file, depending on how busy the cluster is, it can timeout after 10 minutes by default, because the progress towards writing a DFS file does not count as progress of the task. The solution (patch is forthcoming) is to provide a way to callback reporter to report task progress from DFSOutputStream.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 19:59:08 2006
Return-Path: 
 <hadoop-dev-return-2243-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8809 invoked from network); 28 Jun 2006 19:59:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 19:59:08 -0000
Received: (qmail 82531 invoked by uid 500); 28 Jun 2006 19:59:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 82385 invoked by uid 500); 28 Jun 2006 19:59:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 82360 invoked by uid 99); 28 Jun 2006 19:59:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 12:59:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 12:59:06 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A0E17410005
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 19:57:30 +0000 (GMT)
Message-ID: <28252445.1151524650656.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 19:57:30 +0000 (GMT+00:00)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-321) DatanodeInfo refactoring
In-Reply-To: <20976373.1151024969902.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-321?page=all ]

Konstantin Shvachko updated HADOOP-321:
---------------------------------------

    Attachment: DatanodeInfo_refactor3.patch

Sorry for submitting a bad path. I'm attaching the correct one.

It look like we have completely different views with Owen on how the inheritance should be used in OOP.
In this particular case the derived class DatanodeDescriptor is intended to inherit and reuse all members
of DatanodeInfo except for the Writable interface (2 methods). So the inheritance seems quite logical to me.
Saves a lot of source code too.


> DatanodeInfo refactoring
> ------------------------
>
>          Key: HADOOP-321
>          URL: http://issues.apache.org/jira/browse/HADOOP-321
>      Project: Hadoop
>         Type: Improvement

>   Components: dfs
>     Reporter: Konstantin Shvachko
>     Assignee: Konstantin Shvachko
>      Fix For: 0.4.0
>  Attachments: DatanodeInfo_refactor.patch, DatanodeInfo_refactor3.patch
>
> I'm trying to refactor some name node classes, which seem to be similar.
> So DatanodeInfo is a public api now for purely external ( to name node) use.
> The name node class that stores information about data nodes including the
> set of its blocks is called DatanodeDescriptor.
> The DatanodeReport is removed since it was a variation of DatanodeInfo.
> Previously DatanodeInfo and DatanodeDescriptor were the same class, and
> DatanodeReport was used for reporting node statistics only.
> This is a preparation step for HADOOP-306.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 20:01:08 2006
Return-Path: 
 <hadoop-dev-return-2244-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9663 invoked from network); 28 Jun 2006 20:01:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 20:01:08 -0000
Received: (qmail 86731 invoked by uid 500); 28 Jun 2006 20:01:07 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86710 invoked by uid 500); 28 Jun 2006 20:01:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86701 invoked by uid 99); 28 Jun 2006 20:01:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 13:01:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 13:01:06 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 94A34410006
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 19:59:30 +0000 (GMT)
Message-ID: <16722739.1151524770605.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 19:59:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-318) Progress in writing a DFS file does
 not count towards Job progress and can make the task timeout
In-Reply-To: <3721347.1151007329825.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-318?page=comments#action_12418304 ] 

Doug Cutting commented on HADOOP-318:
-------------------------------------

Any reason not to delete the old getRecordWriter() method?

> Progress in writing a DFS file does not count towards Job progress and can make the task timeout
> ------------------------------------------------------------------------------------------------
>
>          Key: HADOOP-318
>          URL: http://issues.apache.org/jira/browse/HADOOP-318
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.3.2
>  Environment: all, but especially on big busy clusters
>     Reporter: Milind Bhandarkar
>     Assignee: Milind Bhandarkar
>      Fix For: 0.4.0
>  Attachments: hadoop-latency-latest.patch
>
> When a task writes to DFS file, depending on how busy the cluster is, it can timeout after 10 minutes by default, because the progress towards writing a DFS file does not count as progress of the task. The solution (patch is forthcoming) is to provide a way to callback reporter to report task progress from DFSOutputStream.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 20:05:07 2006
Return-Path: 
 <hadoop-dev-return-2245-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10946 invoked from network); 28 Jun 2006 20:05:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 20:05:07 -0000
Received: (qmail 91053 invoked by uid 500); 28 Jun 2006 20:05:07 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 91027 invoked by uid 500); 28 Jun 2006 20:05:06 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 91018 invoked by uid 99); 28 Jun 2006 20:05:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 13:05:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 13:05:06 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2A800410005
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 20:03:30 +0000 (GMT)
Message-ID: <3810206.1151525010156.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 20:03:30 +0000 (GMT+00:00)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-47) include records/second and bytes/second
 in  task reports
In-Reply-To: <579254540.1140560374384.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-47?page=all ]

Yoram Arnon updated HADOOP-47:
------------------------------

    Fix Version:     (was: 0.4.0)
      Assign To:     (was: Owen O'Malley)

> include records/second and bytes/second in  task reports
> --------------------------------------------------------
>
>          Key: HADOOP-47
>          URL: http://issues.apache.org/jira/browse/HADOOP-47
>      Project: Hadoop
>         Type: New Feature

>   Components: mapred
>     Versions: 0.2.0
>     Reporter: Doug Cutting

>
> TaskReport should include fields for total records processed, total bytes processed and total seconds of task execution.  These should also be reported in the web ui, as bytes/second and records/second.  The job display could sum these to report total bytes/second and records/second for map and reduce.  Better yet would be a graph displaying the total rates over the course of the job...

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 20:07:09 2006
Return-Path: 
 <hadoop-dev-return-2246-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 11174 invoked from network); 28 Jun 2006 20:07:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 20:07:09 -0000
Received: (qmail 94368 invoked by uid 500); 28 Jun 2006 20:07:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94341 invoked by uid 500); 28 Jun 2006 20:07:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94332 invoked by uid 99); 28 Jun 2006 20:07:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 13:07:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 13:07:07 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CD9E2410005
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 20:05:31 +0000 (GMT)
Message-ID: <12267443.1151525131839.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 20:05:31 +0000 (GMT+00:00)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-322) Need a job control utility to submit
 and monitor a group of jobs which have DAG dependency
In-Reply-To: <4931825.1151126129857.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-322?page=all ]

Runping Qi updated HADOOP-322:
------------------------------

    Attachment:     (was: job_control_patch.txt)

> Need a job control utility to submit and monitor a group of jobs which have DAG dependency
> ------------------------------------------------------------------------------------------
>
>          Key: HADOOP-322
>          URL: http://issues.apache.org/jira/browse/HADOOP-322
>      Project: Hadoop
>         Type: New Feature

>     Reporter: Runping Qi
>     Assignee: Runping Qi

>
> In my applications, some jobs depend on the outputs of other jobs. Therefore, job dependency forms a DAG. A job is ready to run if and only if it does not have any dependency or all the jobs it depends are finished successfully. To help schedule and monitor a group of jobs like that, I am thinking of implementing a utility that:
> 	- accept jobs with dependency specification
>       - monitor job status
>       - submit jobs when they are ready
> With such a utility, the application can construct its jobs, specify their dependency and then hand the jobs to the utility class. The utility takes care of the details of job submission.
> I'll post my design skech for comments/suggestion.
> Eventually, I'll submit a patch for the utility.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 20:09:08 2006
Return-Path: 
 <hadoop-dev-return-2247-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 11632 invoked from network); 28 Jun 2006 20:09:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 20:09:08 -0000
Received: (qmail 97693 invoked by uid 500); 28 Jun 2006 20:09:07 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97669 invoked by uid 500); 28 Jun 2006 20:09:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97660 invoked by uid 99); 28 Jun 2006 20:09:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 13:09:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 13:09:06 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 90D20410005
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 20:07:30 +0000 (GMT)
Message-ID: <2071008.1151525250590.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 20:07:30 +0000 (GMT+00:00)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-322) Need a job control utility to submit
 and monitor a group of jobs which have DAG dependency
In-Reply-To: <4931825.1151126129857.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-322?page=all ]

Runping Qi updated HADOOP-322:
------------------------------

    Attachment: job_control_patch.txt


TestJobControl nows extends junit.framework.TestCase and implements public void testJobControl() method.
Also some comments are added to explain what is going on.



> Need a job control utility to submit and monitor a group of jobs which have DAG dependency
> ------------------------------------------------------------------------------------------
>
>          Key: HADOOP-322
>          URL: http://issues.apache.org/jira/browse/HADOOP-322
>      Project: Hadoop
>         Type: New Feature

>     Reporter: Runping Qi
>     Assignee: Runping Qi
>  Attachments: job_control_patch.txt
>
> In my applications, some jobs depend on the outputs of other jobs. Therefore, job dependency forms a DAG. A job is ready to run if and only if it does not have any dependency or all the jobs it depends are finished successfully. To help schedule and monitor a group of jobs like that, I am thinking of implementing a utility that:
> 	- accept jobs with dependency specification
>       - monitor job status
>       - submit jobs when they are ready
> With such a utility, the application can construct its jobs, specify their dependency and then hand the jobs to the utility class. The utility takes care of the details of job submission.
> I'll post my design skech for comments/suggestion.
> Eventually, I'll submit a patch for the utility.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 20:11:08 2006
Return-Path: 
 <hadoop-dev-return-2248-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12315 invoked from network); 28 Jun 2006 20:11:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 20:11:08 -0000
Received: (qmail 1365 invoked by uid 500); 28 Jun 2006 20:11:07 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 1339 invoked by uid 500); 28 Jun 2006 20:11:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 1330 invoked by uid 99); 28 Jun 2006 20:11:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 13:11:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 13:11:06 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A76507141F3
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 20:09:30 +0000 (GMT)
Message-ID: <21337650.1151525370682.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 20:09:30 +0000 (GMT+00:00)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-318) Progress in writing a DFS file does
 not count towards Job progress and can make the task timeout
In-Reply-To: <3721347.1151007329825.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-318?page=comments#action_12418307 ] 

Milind Bhandarkar commented on HADOOP-318:
------------------------------------------

Did not even think about it earlier. But  if compiles, go ahead.

> Progress in writing a DFS file does not count towards Job progress and can make the task timeout
> ------------------------------------------------------------------------------------------------
>
>          Key: HADOOP-318
>          URL: http://issues.apache.org/jira/browse/HADOOP-318
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.3.2
>  Environment: all, but especially on big busy clusters
>     Reporter: Milind Bhandarkar
>     Assignee: Milind Bhandarkar
>      Fix For: 0.4.0
>  Attachments: hadoop-latency-latest.patch
>
> When a task writes to DFS file, depending on how busy the cluster is, it can timeout after 10 minutes by default, because the progress towards writing a DFS file does not count as progress of the task. The solution (patch is forthcoming) is to provide a way to callback reporter to report task progress from DFSOutputStream.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 20:31:34 2006
Return-Path: 
 <hadoop-dev-return-2249-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 18972 invoked from network); 28 Jun 2006 20:31:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 20:31:34 -0000
Received: (qmail 57204 invoked by uid 500); 28 Jun 2006 20:31:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 57180 invoked by uid 500); 28 Jun 2006 20:31:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 57171 invoked by uid 99); 28 Jun 2006 20:31:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 13:31:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [74.0.0.77] (HELO linuxfly.dragonflymc.com) (74.0.0.77)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 13:31:31 -0700
Received: from [192.168.1.246] (unknown [63.133.162.98])
	by linuxfly.dragonflymc.com (Postfix) with ESMTP id 42F1BC2006B
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 15:31:22 -0500 (CDT)
Message-ID: <44A2E710.3020307@dragonflymc.com>
Date: Wed, 28 Jun 2006 15:31:12 -0500
From: Dennis Kubes <nutch-dev@dragonflymc.com>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Code in Configuration Constructor
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Anybody know what this code is the configuration constructor is for? 

 if (LOG.isDebugEnabled()) {
      LOG.debug(StringUtils.stringifyException(new 
IOException("config()")));
    }

From MAILER-DAEMON Wed Jun 28 20:37:08 2006
Return-Path: 
 <hadoop-dev-return-2250-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20975 invoked from network); 28 Jun 2006 20:37:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 20:37:08 -0000
Received: (qmail 71445 invoked by uid 500); 28 Jun 2006 20:37:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 71413 invoked by uid 500); 28 Jun 2006 20:37:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 71399 invoked by uid 99); 28 Jun 2006 20:37:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 13:37:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 13:37:07 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C71E3410006
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 20:35:30 +0000 (GMT)
Message-ID: <1563500.1151526930812.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 20:35:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-322) Need a job control utility to submit
 and monitor a group of jobs which have DAG dependency
In-Reply-To: <4931825.1151126129857.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-322?page=comments#action_12418309 ] 

Doug Cutting commented on HADOOP-322:
-------------------------------------

I think the 'try' block should be removed from your test.  Otherwise it will never fail, no?  Instead it should be permitted to throw exceptions if it fails, so that unit tests will fail.

> Need a job control utility to submit and monitor a group of jobs which have DAG dependency
> ------------------------------------------------------------------------------------------
>
>          Key: HADOOP-322
>          URL: http://issues.apache.org/jira/browse/HADOOP-322
>      Project: Hadoop
>         Type: New Feature

>     Reporter: Runping Qi
>     Assignee: Runping Qi
>  Attachments: job_control_patch.txt
>
> In my applications, some jobs depend on the outputs of other jobs. Therefore, job dependency forms a DAG. A job is ready to run if and only if it does not have any dependency or all the jobs it depends are finished successfully. To help schedule and monitor a group of jobs like that, I am thinking of implementing a utility that:
> 	- accept jobs with dependency specification
>       - monitor job status
>       - submit jobs when they are ready
> With such a utility, the application can construct its jobs, specify their dependency and then hand the jobs to the utility class. The utility takes care of the details of job submission.
> I'll post my design skech for comments/suggestion.
> Eventually, I'll submit a patch for the utility.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 20:45:10 2006
Return-Path: 
 <hadoop-dev-return-2252-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 22816 invoked from network); 28 Jun 2006 20:45:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 20:45:10 -0000
Received: (qmail 81893 invoked by uid 500); 28 Jun 2006 20:45:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 81856 invoked by uid 500); 28 Jun 2006 20:45:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 81847 invoked by uid 99); 28 Jun 2006 20:45:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 13:45:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 13:45:07 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8A8F37141F4
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 20:43:31 +0000 (GMT)
Message-ID: <9097738.1151527411564.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 20:43:31 +0000 (GMT+00:00)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-318) Progress in writing a DFS file does
 not count towards Job progress and can make the task timeout
In-Reply-To: <3721347.1151007329825.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-318?page=all ]

Milind Bhandarkar updated HADOOP-318:
-------------------------------------

    Attachment:     (was: hadoop-latency-latest.patch)

> Progress in writing a DFS file does not count towards Job progress and can make the task timeout
> ------------------------------------------------------------------------------------------------
>
>          Key: HADOOP-318
>          URL: http://issues.apache.org/jira/browse/HADOOP-318
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.3.2
>  Environment: all, but especially on big busy clusters
>     Reporter: Milind Bhandarkar
>     Assignee: Milind Bhandarkar
>      Fix For: 0.4.0

>
> When a task writes to DFS file, depending on how busy the cluster is, it can timeout after 10 minutes by default, because the progress towards writing a DFS file does not count as progress of the task. The solution (patch is forthcoming) is to provide a way to callback reporter to report task progress from DFSOutputStream.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 20:44:49 2006
Return-Path: 
 <hadoop-dev-return-2251-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 22712 invoked from network); 28 Jun 2006 20:44:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 20:44:49 -0000
Received: (qmail 81156 invoked by uid 500); 28 Jun 2006 20:44:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 81131 invoked by uid 500); 28 Jun 2006 20:44:48 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 81122 invoked by uid 99); 28 Jun 2006 20:44:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 13:44:48 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.109.112.28] (HELO mrout2-b.corp.dcn.yahoo.com)
 (216.109.112.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 13:44:48 -0700
Received: from [207.126.231.161] (oom-mac.corp.yahoo.com [207.126.231.161])
	by mrout2-b.corp.dcn.yahoo.com (8.13.6/8.13.4/y.out) with ESMTP id
 k5SKhxsv091255
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 13:43:59 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=DsX9RTDbyWAUYjMUgb7s/UWHT8PzsCuDph4Jgr9cCxRPnBzr9DIB0dUqtoH/3Alq
Mime-Version: 1.0 (Apple Message framework v624)
In-Reply-To: <44A2E710.3020307@dragonflymc.com>
References: <44A2E710.3020307@dragonflymc.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <0dbd03e30b0458f206178f18e901309a@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: "Owen O'Malley" <owen@yahoo-inc.com>
Subject: Re: Code in Configuration Constructor
Date: Wed, 28 Jun 2006 13:44:02 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.624)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 28, 2006, at 1:31 PM, Dennis Kubes wrote:

> Anybody know what this code is the configuration constructor is for?
> if (LOG.isDebugEnabled()) {
>      LOG.debug(StringUtils.stringifyException(new 
> IOException("config()")));
>    }

That looks like something I would have done. Sorry about that. It is 
debugging code (obviously) that is effectively printing a call stack 
when that method is called.

-- Owen


From MAILER-DAEMON Wed Jun 28 20:47:09 2006
Return-Path: 
 <hadoop-dev-return-2253-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23659 invoked from network); 28 Jun 2006 20:47:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 20:47:09 -0000
Received: (qmail 85547 invoked by uid 500); 28 Jun 2006 20:47:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 85520 invoked by uid 500); 28 Jun 2006 20:47:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 85511 invoked by uid 99); 28 Jun 2006 20:47:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 13:47:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 13:47:08 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 372417141E0
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 20:45:32 +0000 (GMT)
Message-ID: <24992824.1151527532223.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 20:45:32 +0000 (GMT+00:00)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-318) Progress in writing a DFS file does
 not count towards Job progress and can make the task timeout
In-Reply-To: <3721347.1151007329825.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-318?page=all ]

Milind Bhandarkar updated HADOOP-318:
-------------------------------------

    Attachment: hadoop-latency-latest.patch

Doug. I have removed the extra getRecordWriter method, added progressable documentation, and param doc, and here is the patch. I have also uploaded corresponding patch to nutch-312.

> Progress in writing a DFS file does not count towards Job progress and can make the task timeout
> ------------------------------------------------------------------------------------------------
>
>          Key: HADOOP-318
>          URL: http://issues.apache.org/jira/browse/HADOOP-318
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.3.2
>  Environment: all, but especially on big busy clusters
>     Reporter: Milind Bhandarkar
>     Assignee: Milind Bhandarkar
>      Fix For: 0.4.0
>  Attachments: hadoop-latency-latest.patch
>
> When a task writes to DFS file, depending on how busy the cluster is, it can timeout after 10 minutes by default, because the progress towards writing a DFS file does not count as progress of the task. The solution (patch is forthcoming) is to provide a way to callback reporter to report task progress from DFSOutputStream.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 20:47:11 2006
Return-Path: 
 <hadoop-dev-return-2254-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23700 invoked from network); 28 Jun 2006 20:47:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 20:47:11 -0000
Received: (qmail 85752 invoked by uid 500); 28 Jun 2006 20:47:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 85702 invoked by uid 500); 28 Jun 2006 20:47:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 85693 invoked by uid 99); 28 Jun 2006 20:47:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 13:47:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 13:47:09 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 225F27141F4
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 20:45:33 +0000 (GMT)
Message-ID: <21855266.1151527533138.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 20:45:33 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-322) Need a job control utility to submit
 and monitor a group of jobs which have DAG dependency
In-Reply-To: <4931825.1151126129857.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-322?page=comments#action_12418312 ] 

Doug Cutting commented on HADOOP-322:
-------------------------------------

When I remove the 'try' block and add 'throws Exception' where required, the unit test still passes, although all of the jobs fail:

% ant clean test -Dtestcase=TestJobControl

test:
    [mkdir] Created dir: /home/cutting/src/hadoop/build/test/data
    [mkdir] Created dir: /home/cutting/src/hadoop/build/test/logs
    [junit] Running org.apache.hadoop.jobs.TestJobControl
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 74.29 sec

BUILD SUCCESSFUL
Total time: 1 minute 22 seconds

Yet the log in build/test shows:

java.lang.OutOfMemoryError: Java heap space
Jobs are all done???
Jobs in waiting state: 0
Jobs in ready state: 0
Jobs in running state: 0
Jobs in success state: 0
Jobs in failed state: 4

Shouldn't the test fail if any of the jobs fail?


> Need a job control utility to submit and monitor a group of jobs which have DAG dependency
> ------------------------------------------------------------------------------------------
>
>          Key: HADOOP-322
>          URL: http://issues.apache.org/jira/browse/HADOOP-322
>      Project: Hadoop
>         Type: New Feature

>     Reporter: Runping Qi
>     Assignee: Runping Qi
>  Attachments: job_control_patch.txt
>
> In my applications, some jobs depend on the outputs of other jobs. Therefore, job dependency forms a DAG. A job is ready to run if and only if it does not have any dependency or all the jobs it depends are finished successfully. To help schedule and monitor a group of jobs like that, I am thinking of implementing a utility that:
> 	- accept jobs with dependency specification
>       - monitor job status
>       - submit jobs when they are ready
> With such a utility, the application can construct its jobs, specify their dependency and then hand the jobs to the utility class. The utility takes care of the details of job submission.
> I'll post my design skech for comments/suggestion.
> Eventually, I'll submit a patch for the utility.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 20:49:07 2006
Return-Path: 
 <hadoop-dev-return-2255-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 24087 invoked from network); 28 Jun 2006 20:49:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 20:49:07 -0000
Received: (qmail 86682 invoked by uid 500); 28 Jun 2006 20:49:06 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86657 invoked by uid 500); 28 Jun 2006 20:49:06 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86648 invoked by uid 99); 28 Jun 2006 20:49:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 13:49:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [74.0.0.77] (HELO linuxfly.dragonflymc.com) (74.0.0.77)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 13:49:05 -0700
Received: from [192.168.1.246] (unknown [63.133.162.98])
	by linuxfly.dragonflymc.com (Postfix) with ESMTP id 85209C2006B
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 15:48:57 -0500 (CDT)
Message-ID: <44A2EB30.80200@dragonflymc.com>
Date: Wed, 28 Jun 2006 15:48:48 -0500
From: Dennis Kubes <nutch-dev@dragonflymc.com>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: Code in Configuration Constructor
References: <44A2E710.3020307@dragonflymc.com>
 <0dbd03e30b0458f206178f18e901309a@yahoo-inc.com>
In-Reply-To: <0dbd03e30b0458f206178f18e901309a@yahoo-inc.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Just wanted to make sure I wasn't removing anything important.  I 
figured it was debugging for the reflection stuff you were working on.

Dennis

Owen O'Malley wrote:
>
> On Jun 28, 2006, at 1:31 PM, Dennis Kubes wrote:
>
>> Anybody know what this code is the configuration constructor is for?
>> if (LOG.isDebugEnabled()) {
>>      LOG.debug(StringUtils.stringifyException(new 
>> IOException("config()")));
>>    }
>
> That looks like something I would have done. Sorry about that. It is 
> debugging code (obviously) that is effectively printing a call stack 
> when that method is called.
>
> -- Owen
>

From MAILER-DAEMON Wed Jun 28 20:53:09 2006
Return-Path: 
 <hadoop-dev-return-2256-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 25013 invoked from network); 28 Jun 2006 20:53:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 20:53:09 -0000
Received: (qmail 91966 invoked by uid 500); 28 Jun 2006 20:53:07 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 91930 invoked by uid 500); 28 Jun 2006 20:53:06 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 91916 invoked by uid 99); 28 Jun 2006 20:53:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 13:53:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 13:53:06 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E0D7F7141E0
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 20:51:29 +0000 (GMT)
Message-ID: <25178997.1151527889918.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 20:51:29 +0000 (GMT+00:00)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-331) map outputs should be written to a
 single output file with an index
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

map outputs should be written to a single output file with an index
-------------------------------------------------------------------

         Key: HADOOP-331
         URL: http://issues.apache.org/jira/browse/HADOOP-331
     Project: Hadoop
        Type: Improvement

  Components: mapred  
    Versions: 0.3.2    
    Reporter: eric baldeschwieler
 Assigned to: Yoram Arnon 
     Fix For: 0.5.0


The current strategy of writing a file per target map is consuming a lot of unused buffer space (causing out of memory crashes) and puts a lot of burden on the FS (many opens, inodes used, etc).  

I propose that we write a single file containing all output and also write an index file IDing which byte range in the file goes to each reduce.  This will remove the issue of buffer waste, address scaling issues with number of open files and generally set us up better for scaling.  It will also have advantages with very small inputs, since the buffer cache will reduce the number of seeks needed and the data serving node can open a single file and just keep it open rather than needing to do directory and open ops on every request.

The only issue I see is that in cases where the task output is substantiallyu larger than its input, we may need to spill multiple times.  In this case, we can do a merge after all spills are complete (or during the final spill).


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 21:07:08 2006
Return-Path: 
 <hadoop-dev-return-2257-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 28762 invoked from network); 28 Jun 2006 21:07:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 21:07:08 -0000
Received: (qmail 9263 invoked by uid 500); 28 Jun 2006 21:07:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9231 invoked by uid 500); 28 Jun 2006 21:07:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9210 invoked by uid 99); 28 Jun 2006 21:07:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:07:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:07:06 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B81BD7141E0
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 21:05:30 +0000 (GMT)
Message-ID: <12747941.1151528730750.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 21:05:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-318) Progress in writing a DFS file does
 not count towards Job progress and can make the task timeout
In-Reply-To: <3721347.1151007329825.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-318?page=all ]
     
Doug Cutting resolved HADOOP-318:
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Milind.

> Progress in writing a DFS file does not count towards Job progress and can make the task timeout
> ------------------------------------------------------------------------------------------------
>
>          Key: HADOOP-318
>          URL: http://issues.apache.org/jira/browse/HADOOP-318
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.3.2
>  Environment: all, but especially on big busy clusters
>     Reporter: Milind Bhandarkar
>     Assignee: Milind Bhandarkar
>      Fix For: 0.4.0
>  Attachments: hadoop-latency-latest.patch
>
> When a task writes to DFS file, depending on how busy the cluster is, it can timeout after 10 minutes by default, because the progress towards writing a DFS file does not count as progress of the task. The solution (patch is forthcoming) is to provide a way to callback reporter to report task progress from DFSOutputStream.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 21:09:08 2006
Return-Path: 
 <hadoop-dev-return-2258-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 29341 invoked from network); 28 Jun 2006 21:09:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 21:09:08 -0000
Received: (qmail 13477 invoked by uid 500); 28 Jun 2006 21:09:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13453 invoked by uid 500); 28 Jun 2006 21:09:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13439 invoked by uid 99); 28 Jun 2006 21:09:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:09:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:09:07 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 38F097141E0
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 21:07:31 +0000 (GMT)
Message-ID: <22790987.1151528851230.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 21:07:31 +0000 (GMT+00:00)
From: "paul sutter (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-331) map outputs should be written to a
 single output file with an index
In-Reply-To: <25178997.1151527889918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-331?page=comments#action_12418316 ] 

paul sutter commented on HADOOP-331:
------------------------------------


Sounds like a great direction! Could you clarify a little bit? 

Would you have one map output file per mapper? Or one map output file per mapping-node (wherein the many mappers that run on an individual node will coalesce their outputs into a single file)?

How many ranges will each reducer have to read back from the file? one? one per 100 megabytes of map output? one per combiner flush?

What's a spill?

How does this fit with the compression proposal? Will there be a separate compression context per reducer?

> map outputs should be written to a single output file with an index
> -------------------------------------------------------------------
>
>          Key: HADOOP-331
>          URL: http://issues.apache.org/jira/browse/HADOOP-331
>      Project: Hadoop
>         Type: Improvement

>   Components: mapred
>     Versions: 0.3.2
>     Reporter: eric baldeschwieler
>     Assignee: Yoram Arnon
>      Fix For: 0.5.0

>
> The current strategy of writing a file per target map is consuming a lot of unused buffer space (causing out of memory crashes) and puts a lot of burden on the FS (many opens, inodes used, etc).  
> I propose that we write a single file containing all output and also write an index file IDing which byte range in the file goes to each reduce.  This will remove the issue of buffer waste, address scaling issues with number of open files and generally set us up better for scaling.  It will also have advantages with very small inputs, since the buffer cache will reduce the number of seeks needed and the data serving node can open a single file and just keep it open rather than needing to do directory and open ops on every request.
> The only issue I see is that in cases where the task output is substantiallyu larger than its input, we may need to spill multiple times.  In this case, we can do a merge after all spills are complete (or during the final spill).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 21:11:08 2006
Return-Path: 
 <hadoop-dev-return-2259-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 29626 invoked from network); 28 Jun 2006 21:11:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 21:11:08 -0000
Received: (qmail 16811 invoked by uid 500); 28 Jun 2006 21:11:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 16657 invoked by uid 500); 28 Jun 2006 21:11:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 16648 invoked by uid 99); 28 Jun 2006 21:11:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:11:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:11:07 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 029C57141E0
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 21:09:31 +0000 (GMT)
Message-ID: <1946213.1151528971007.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 21:09:31 +0000 (GMT+00:00)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-322) Need a job control utility to submit
 and monitor a group of jobs which have DAG dependency
In-Reply-To: <4931825.1151126129857.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-322?page=comments#action_12418317 ] 

Runping Qi commented on HADOOP-322:
-----------------------------------


Doug, this is a tricky question. The test class is to test the behavior of JobControl class, not the jobs it controls. In your case, I think the JobControl behaved correctly if job 3 and job 4 were failed without being submitted, due to one or more depending job fail. 

I can add in such logic to the test class to check the job state consistency.


> Need a job control utility to submit and monitor a group of jobs which have DAG dependency
> ------------------------------------------------------------------------------------------
>
>          Key: HADOOP-322
>          URL: http://issues.apache.org/jira/browse/HADOOP-322
>      Project: Hadoop
>         Type: New Feature

>     Reporter: Runping Qi
>     Assignee: Runping Qi
>  Attachments: job_control_patch.txt
>
> In my applications, some jobs depend on the outputs of other jobs. Therefore, job dependency forms a DAG. A job is ready to run if and only if it does not have any dependency or all the jobs it depends are finished successfully. To help schedule and monitor a group of jobs like that, I am thinking of implementing a utility that:
> 	- accept jobs with dependency specification
>       - monitor job status
>       - submit jobs when they are ready
> With such a utility, the application can construct its jobs, specify their dependency and then hand the jobs to the utility class. The utility takes care of the details of job submission.
> I'll post my design skech for comments/suggestion.
> Eventually, I'll submit a patch for the utility.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 21:13:09 2006
Return-Path: 
 <hadoop-dev-return-2260-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30506 invoked from network); 28 Jun 2006 21:13:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 21:13:09 -0000
Received: (qmail 21836 invoked by uid 500); 28 Jun 2006 21:13:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 21692 invoked by uid 500); 28 Jun 2006 21:13:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 21683 invoked by uid 99); 28 Jun 2006 21:13:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:08 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 50000410008
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 21:11:32 +0000 (GMT)
Message-ID: <21447511.1151529092324.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 21:11:32 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-248) locating map outputs via random
 probing is inefficient
In-Reply-To: <7950094.1148426849904.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-248?page=all ]

Doug Cutting updated HADOOP-248:
--------------------------------

    Fix Version: 0.5.0
                     (was: 0.4.0)

> locating map outputs via random probing is inefficient
> ------------------------------------------------------
>
>          Key: HADOOP-248
>          URL: http://issues.apache.org/jira/browse/HADOOP-248
>      Project: Hadoop
>         Type: Improvement

>   Components: mapred
>     Versions: 0.2.1
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.5.0

>
> Currently the ReduceTaskRunner polls the JobTracker for a random list of map tasks asking for their output locations. It would be better if the JobTracker kept an ordered log and the interface was changed to:
> class MapLocationResults {
>    public int getTimestamp();
>    public MapOutputLocation[] getLocations();
> }
> interface InterTrackerProtocol {
>   ...
>   MapLocationResults locateMapOutputs(int prevTimestamp);
> } 
> with the intention that each time a ReduceTaskRunner calls locateMapOutputs, it passes back the "timestamp" that it got from the previous result. That way, reduces can easily find the new MapOutputs. This should help the "ramp up" when the maps first start finishing.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 21:13:10 2006
Return-Path: 
 <hadoop-dev-return-2261-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30538 invoked from network); 28 Jun 2006 21:13:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 21:13:10 -0000
Received: (qmail 21886 invoked by uid 500); 28 Jun 2006 21:13:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 21862 invoked by uid 500); 28 Jun 2006 21:13:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 21852 invoked by uid 99); 28 Jun 2006 21:13:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:09 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 36B97410123
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 21:11:33 +0000 (GMT)
Message-ID: <28798056.1151529093221.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 21:11:33 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-109) Blocks are not replicated when...
In-Reply-To: <985692887.1143603799440.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-109?page=all ]

Doug Cutting updated HADOOP-109:
--------------------------------

    Fix Version: 0.5.0
                     (was: 0.4.0)

> Blocks are not replicated when...
> ---------------------------------
>
>          Key: HADOOP-109
>          URL: http://issues.apache.org/jira/browse/HADOOP-109
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.1.0
>     Reporter: Konstantin Shvachko
>     Assignee: Konstantin Shvachko
>      Fix For: 0.5.0

>
> When the block is under-replicated the namenode places it into
> FSNamesystem.neededReplications list.
> When a datanode D1 sends getBlockwork() request to the namenode, the namenode
> selects another node D2 (which it thinks is up and running) where the new replica of the
> under-replicated block will be stored.
> Then namenode removes the block from the neededReplications list and places it to
> the pendingReplications list, and then asks D1 to replicate the block to D2.
> If D2 is in fact down, then replication will fail and will never be retried later, because
> the block is not in the neededReplications list, but rather in the pendingReplications list,
> which namenode never checks.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 21:13:11 2006
Return-Path: 
 <hadoop-dev-return-2262-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30575 invoked from network); 28 Jun 2006 21:13:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 21:13:11 -0000
Received: (qmail 22062 invoked by uid 500); 28 Jun 2006 21:13:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 22031 invoked by uid 500); 28 Jun 2006 21:13:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22007 invoked by uid 99); 28 Jun 2006 21:13:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:10 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1D58C410124
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 21:11:34 +0000 (GMT)
Message-ID: <15262406.1151529094116.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 21:11:34 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-226) DFSShell problems. Incorrect block
 replication detection in fsck.
In-Reply-To: <24430703.1147903865906.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-226?page=all ]

Doug Cutting updated HADOOP-226:
--------------------------------

    Fix Version: 0.5.0
                     (was: 0.4.0)

> DFSShell problems. Incorrect block replication detection in fsck.
> -----------------------------------------------------------------
>
>          Key: HADOOP-226
>          URL: http://issues.apache.org/jira/browse/HADOOP-226
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.2.0
>  Environment: All
>     Reporter: Konstantin Shvachko
>      Fix For: 0.5.0

>
> 1. We need to adjust Dfsck to the new per-file replication feature.
> fsck checks block replication based on the configured global replication parameter.
> Which is now just the default. The actual file replication is returned in DFSFileInfo.
> So at least the reporting is screwed by that, although I didn't check what will happen with
> other options -move and -delete.
> 2. fsck throws NullPointerException if you type
> bin/hadoop fsck -files /doc
> instead of
> bin/hadoop fsck /doc -files
> 3. Unfortunately, there are several commands that throw different kinds of Exceptions
> rather than at least printing the usage info, when some of its arguments are missing or
> misplaced. ArrayIndexOutOfBoundsException is one them. Try
> bin/hadoop dfs -mv
> bin/hadoop dfs -cp
> bin/hadoop dfs -rm
> 4. In general the shell is growing and getting more sophisticated.
> Should we work out a general convention on how the parameters should be structured, named,
> short/long version of the keywords, help, etc.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 21:13:13 2006
Return-Path: 
 <hadoop-dev-return-2263-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30611 invoked from network); 28 Jun 2006 21:13:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 21:13:13 -0000
Received: (qmail 22223 invoked by uid 500); 28 Jun 2006 21:13:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 22200 invoked by uid 500); 28 Jun 2006 21:13:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22191 invoked by uid 99); 28 Jun 2006 21:13:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:11 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 856044101A8
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 21:11:35 +0000 (GMT)
Message-ID: <9004897.1151529095543.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 21:11:35 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-213) add/change TestDFSIO command line
 arguments
In-Reply-To: <16272983.1147460768545.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-213?page=all ]

Doug Cutting updated HADOOP-213:
--------------------------------

    Fix Version: 0.5.0
                     (was: 0.4.0)

> add/change TestDFSIO command line arguments
> -------------------------------------------
>
>          Key: HADOOP-213
>          URL: http://issues.apache.org/jira/browse/HADOOP-213
>      Project: Hadoop
>         Type: Improvement

>   Components: dfs
>     Versions: 0.3.0
>     Reporter: Yoram Arnon
>     Assignee: Konstantin Shvachko
>     Priority: Minor
>      Fix For: 0.5.0

>
> TestDFSIO would benefit from the follwing changes on the command line:
> 1. allow a "-dfs <dfs>" option, to specify which dfs to test. Just like the hadoop dfs command.
> 2. allow a "-jt <job tracker>" option, to specify a job tracker. Just like the hadoop job command.
> 3. allign the file size units with the dfs block size. Using MB (2^20) when the dfs uses 10^6 skews the results a bit.
> 4. add a "-replication <replication>" option, to specify files' replication factor.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 21:13:14 2006
Return-Path: 
 <hadoop-dev-return-2264-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30647 invoked from network); 28 Jun 2006 21:13:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 21:13:14 -0000
Received: (qmail 22396 invoked by uid 500); 28 Jun 2006 21:13:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 22370 invoked by uid 500); 28 Jun 2006 21:13:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22361 invoked by uid 99); 28 Jun 2006 21:13:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:12 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 74214410005
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 21:11:36 +0000 (GMT)
Message-ID: <13954342.1151529096473.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 21:11:36 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-158) dfs should allocate a random blockid
 range to a file, then assign ids sequentially to blocks in the file
In-Reply-To: <886043.1145639285840.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-158?page=all ]

Doug Cutting updated HADOOP-158:
--------------------------------

    Fix Version: 0.5.0
                     (was: 0.4.0)

> dfs should allocate a random blockid range to a file, then assign ids sequentially to blocks in the file
> --------------------------------------------------------------------------------------------------------
>
>          Key: HADOOP-158
>          URL: http://issues.apache.org/jira/browse/HADOOP-158
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.1.0
>     Reporter: Doug Cutting
>     Assignee: Konstantin Shvachko
>      Fix For: 0.5.0

>
> A random number generator is used to allocate block ids in dfs.  Sometimes a block id is allocated that is already used in the filesystem, which causes filesystem corruption.
> A short-term fix for this is to simply check when allocating block ids whether any file is already using the newly allocated id, and, if it is, generate another one.  There can still be collisions in some rare conditions, but these are harder to fix and will wait, since this simple fix will handle the vast majority of collisions.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 21:13:31 2006
Return-Path: 
 <hadoop-dev-return-2266-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30735 invoked from network); 28 Jun 2006 21:13:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 21:13:31 -0000
Received: (qmail 22762 invoked by uid 500); 28 Jun 2006 21:13:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 22681 invoked by uid 500); 28 Jun 2006 21:13:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22662 invoked by uid 99); 28 Jun 2006 21:13:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DF92A410334
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 21:11:37 +0000 (GMT)
Message-ID: <15799165.1151529097913.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 21:11:37 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-136) Overlong UTF8's not handled well
In-Reply-To: <64235546.1145045520182.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-136?page=all ]

Doug Cutting updated HADOOP-136:
--------------------------------

    Fix Version: 0.5.0
                     (was: 0.4.0)

> Overlong UTF8's not handled well
> --------------------------------
>
>          Key: HADOOP-136
>          URL: http://issues.apache.org/jira/browse/HADOOP-136
>      Project: Hadoop
>         Type: Bug

>   Components: io
>     Versions: 0.2.0
>     Reporter: Dick King
>     Assignee: Michel Tourn
>     Priority: Minor
>      Fix For: 0.5.0
>  Attachments: largeutf8.patch
>
> When we feed an overlong string to the UTF8 constructor, two suboptimal things happen.
> First, we truncate to 0xffff/3 characters on the assumption that every character takes three bytes in UTF8.  This can truncate strings that don't need it, and it can be overoptimistic since there are characters that render as four bytes in UTF8.
> Second, the code doesn't actually handle four-byte characters.
> Third, there's a behavioral discontinuity.  If the string is "discovered" to be overlong by the arbitrary limit described above, we truncate with a log message, otherwise we signal a RuntimeException.  One feels that both forms of truncation should be treated alike.  However, this issue is concealed by the second issue; the exception will never be thrown because UTF8.utf8Length can't return more than three times the length of its input.
> I would recommend changing UTF8.utf8Length to let its caller know how many characters of the input string will actually fit if there's an overflow [perhaps by returning the negative of that number] and doing the truncation accurately as needed.
> -dk

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 21:13:30 2006
Return-Path: 
 <hadoop-dev-return-2265-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30724 invoked from network); 28 Jun 2006 21:13:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 21:13:30 -0000
Received: (qmail 22699 invoked by uid 500); 28 Jun 2006 21:13:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 22671 invoked by uid 500); 28 Jun 2006 21:13:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22661 invoked by uid 99); 28 Jun 2006 21:13:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6352E410335
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 21:11:39 +0000 (GMT)
Message-ID: <16470025.1151529099404.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 21:11:39 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-231) DFSShell Improvement wish list
In-Reply-To: <19513987.1147981445911.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-231?page=all ]

Doug Cutting updated HADOOP-231:
--------------------------------

    Fix Version: 0.5.0
                     (was: 0.4.0)

> DFSShell Improvement wish list
> ------------------------------
>
>          Key: HADOOP-231
>          URL: http://issues.apache.org/jira/browse/HADOOP-231
>      Project: Hadoop
>         Type: Improvement

>   Components: dfs, mapred, util
>     Versions: 0.3.0
>     Reporter: Konstantin Shvachko
>      Fix For: 0.5.0

>
> This is to discuss general DFSShell improvements, standardization, conventions, etc.
> Here are links to assorted ideas on this issue from previous issues.
> We need to generalize them at some point.
> HADOOP-59
> HADOOP-226
> HADOOP-222#action_12412326
> HADOOP-230

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 21:13:33 2006
Return-Path: 
 <hadoop-dev-return-2268-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30805 invoked from network); 28 Jun 2006 21:13:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 21:13:33 -0000
Received: (qmail 23113 invoked by uid 500); 28 Jun 2006 21:13:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23022 invoked by uid 500); 28 Jun 2006 21:13:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22998 invoked by uid 99); 28 Jun 2006 21:13:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 56FE8410336
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 21:11:40 +0000 (GMT)
Message-ID: <4126628.1151529100353.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 21:11:40 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-320) bin/hadoop dfs -mv does not mv
  source's checksum file if source is a file
In-Reply-To: <20152082.1151017529846.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-320?page=all ]

Doug Cutting updated HADOOP-320:
--------------------------------

    Fix Version: 0.5.0
                     (was: 0.4.0)

> bin/hadoop dfs -mv does not mv  source's checksum file if source is a file
> --------------------------------------------------------------------------
>
>          Key: HADOOP-320
>          URL: http://issues.apache.org/jira/browse/HADOOP-320
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.3.2
>     Reporter: Hairong Kuang
>     Assignee: Hairong Kuang
>      Fix For: 0.5.0
>  Attachments: rename.patch
>
> None of the rename operation of DistributedSystem or DFSClient checks if the source is a file or not. Need also to rename the checksum file accordingly if the source is a file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 21:13:33 2006
Return-Path: 
 <hadoop-dev-return-2267-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30801 invoked from network); 28 Jun 2006 21:13:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 21:13:33 -0000
Received: (qmail 23072 invoked by uid 500); 28 Jun 2006 21:13:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23011 invoked by uid 500); 28 Jun 2006 21:13:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22997 invoked by uid 99); 28 Jun 2006 21:13:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 49EB5410337
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 21:11:41 +0000 (GMT)
Message-ID: <3267615.1151529101300.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 21:11:41 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-156) Reducer  threw IOEOFException
In-Reply-To: <6737684.1145567465749.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-156?page=all ]

Doug Cutting updated HADOOP-156:
--------------------------------

    Fix Version: 0.5.0
                     (was: 0.4.0)

> Reducer  threw IOEOFException
> -----------------------------
>
>          Key: HADOOP-156
>          URL: http://issues.apache.org/jira/browse/HADOOP-156
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.3.0
>     Reporter: Runping Qi
>      Fix For: 0.5.0

>
> A job was running with all the map tasks completed.
> The reducers were appending the intermediate files into the large intermediate file.
> java.io.EOFException was thrown when the record reader tried to read the version number
> during initialization. Here is the stack trace:
> java.io.EOFException 
>     at java.io.DataInputStream.readFully(DataInputStream.java:178) 
>     at java.io.DataInputStream.readFully(DataInputStream.java:152) 
>     at org.apache.hadoop.io.SequenceFile$Reader.init(SequenceFile.java:251) 
>     at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:236) 
>     at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:226) 
>     at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:205) 
>     at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:709) 
> Appearantly, the intermediate file was empty. I suspect that one map task
> generated empty intermidiate files for all the reducers, since all the reducers
> failed at the same place, and failed at the same place during retries.
> Unfortunately, we cannot know which map task generated the empty files,
> since the exception does not offer any clue.
> One simple enhancement is that the record reader should catch IOException and re-throw it with additional 
> information, such as the file name.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 21:13:34 2006
Return-Path: 
 <hadoop-dev-return-2270-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30884 invoked from network); 28 Jun 2006 21:13:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 21:13:34 -0000
Received: (qmail 23305 invoked by uid 500); 28 Jun 2006 21:13:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23150 invoked by uid 500); 28 Jun 2006 21:13:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23030 invoked by uid 99); 28 Jun 2006 21:13:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3E9C0410338
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 21:11:42 +0000 (GMT)
Message-ID: <13835313.1151529102253.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 21:11:42 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-284) dfs timeout on open
In-Reply-To: <11449145.1149658709890.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-284?page=3Dall ]

Doug Cutting updated HADOOP-284:
--------------------------------

    Fix Version: 0.5.0
                     (was: 0.4.0)

> dfs timeout on open
> -------------------
>
>          Key: HADOOP-284
>          URL: http://issues.apache.org/jira/browse/HADOOP-284
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.3.1
>     Reporter: Owen O'Malley
>      Fix For: 0.5.0

>
> In my sort benchmark, I've started seeing hundred's of maps dying with ti=
meout exceptions in the dfs.open() code:
> java.net.SocketTimeoutException: timed out waiting for rpc response at or=
g.apache.hadoop.ipc.Client.call(Client.java:305) at org.apache.hadoop.ipc.R=
PC$Invoker.invoke(RPC.java:153) at org.apache.hadoop.dfs.$Proxy1.open(Unkno=
wn Source) at org.apache.hadoop.dfs.DFSClient$DFSInputStream.openInfo(DFSCl=
ient.java:457) at org.apache.hadoop.dfs.DFSClient$DFSInputStream.(DFSClient=
.java:444) at org.apache.hadoop.dfs.DFSClient.open(DFSClient.java:207) at o=
rg.apache.hadoop.dfs.DistributedFileSystem.openRaw(DistributedFileSystem.ja=
va:90) at org.apache.hadoop.fs.FSDataInputStream$Checker.(FSDataInputStream=
.java:46) at org.apache.hadoop.fs.FSDataInputStream.(FSDataInputStream.java=
:228) at org.apache.hadoop.fs.FileSystem.open(FileSystem.java:157) at org.a=
pache.hadoop.fs.FileUtil.copy(FileUtil.java:72) at org.apache.hadoop.dfs.Di=
stributedFileSystem.copyToLocalFile(DistributedFileSystem.java:182) at org.=
apache.hadoop.mapred.TaskTracker$TaskInProgress.localizeTask(TaskTracker.ja=
va:535) at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.launchTask(T=
askTracker.java:584) at org.apache.hadoop.mapred.TaskTracker.startNewTask(T=
askTracker.java:395) at org.apache.hadoop.mapred.TaskTracker.offerService(T=
askTracker.java:308) at org.apache.hadoop.mapred.TaskTracker.run(TaskTracke=
r.java:424) at org.apache.hadoop.mapred.TaskTracker.main(TaskTracker.java:9=
61)

--=20
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 21:13:34 2006
Return-Path: 
 <hadoop-dev-return-2269-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30868 invoked from network); 28 Jun 2006 21:13:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 21:13:34 -0000
Received: (qmail 23264 invoked by uid 500); 28 Jun 2006 21:13:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23111 invoked by uid 500); 28 Jun 2006 21:13:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23020 invoked by uid 99); 28 Jun 2006 21:13:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 56BBE41033A
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 21:11:43 +0000 (GMT)
Message-ID: <27541887.1151529103352.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 21:11:43 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-263) task status should include timestamps
 for when a job transitions
In-Reply-To: <6879018.1149102869840.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-263?page=all ]

Doug Cutting updated HADOOP-263:
--------------------------------

    Fix Version: 0.5.0
                     (was: 0.4.0)

> task status should include timestamps for when a job transitions
> ----------------------------------------------------------------
>
>          Key: HADOOP-263
>          URL: http://issues.apache.org/jira/browse/HADOOP-263
>      Project: Hadoop
>         Type: Improvement

>   Components: mapred
>     Versions: 0.2.1
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.5.0

>
> It would help users to understand what happened if the task status included information about when the task transitioned:
> Map:
>    started
>    finished
> Reduce:
>    started
>    shuffle finished
>    sort finished
>    finished

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 21:13:36 2006
Return-Path: 
 <hadoop-dev-return-2271-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30969 invoked from network); 28 Jun 2006 21:13:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 21:13:36 -0000
Received: (qmail 23517 invoked by uid 500); 28 Jun 2006 21:13:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23436 invoked by uid 500); 28 Jun 2006 21:13:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23396 invoked by uid 99); 28 Jun 2006 21:13:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4B68741033B
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 21:11:44 +0000 (GMT)
Message-ID: <11575058.1151529104306.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 21:11:44 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-252) add versioning to RPC
In-Reply-To: <23799650.1148510309896.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-252?page=all ]

Doug Cutting updated HADOOP-252:
--------------------------------

    Fix Version: 0.5.0
                     (was: 0.4.0)

> add versioning to RPC
> ---------------------
>
>          Key: HADOOP-252
>          URL: http://issues.apache.org/jira/browse/HADOOP-252
>      Project: Hadoop
>         Type: Improvement

>   Components: ipc
>     Versions: 0.3.0
>     Reporter: Yoram Arnon
>      Fix For: 0.5.0

>
> currently, any change to any rpc message breaks the protocol, with mysterious exceptions occurring at run time.
> a versioning sceme would have two benefits:
> - intelligent error messages, indicating that an upgrade is required
> - backwards compatibility could be supported.
> the proposal is to add a "const version" for each protocol, and a method: int getVersion(int version) that sends the client's version and receives the server's version. This would be the first method invoked on connection. Both sides then either agree on the lowest version number, providing backwards compatibility support, or abort the connection as "unsupported version".

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 21:13:37 2006
Return-Path: 
 <hadoop-dev-return-2274-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31042 invoked from network); 28 Jun 2006 21:13:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 21:13:37 -0000
Received: (qmail 23953 invoked by uid 500); 28 Jun 2006 21:13:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23854 invoked by uid 500); 28 Jun 2006 21:13:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23654 invoked by uid 99); 28 Jun 2006 21:13:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B2F3141033C
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 21:11:45 +0000 (GMT)
Message-ID: <18802528.1151529105730.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 21:11:45 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-281) dfs.FSDirectory.mkdirs can create
 sub-directories of a file!
In-Reply-To: <19818580.1149635189767.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-281?page=all ]

Doug Cutting updated HADOOP-281:
--------------------------------

    Fix Version: 0.5.0
                     (was: 0.4.0)

> dfs.FSDirectory.mkdirs can create sub-directories of a file!
> ------------------------------------------------------------
>
>          Key: HADOOP-281
>          URL: http://issues.apache.org/jira/browse/HADOOP-281
>      Project: Hadoop
>         Type: Bug

>     Versions: 0.3.1
>     Reporter: Sameer Paranjpye
>      Fix For: 0.5.0

>
> dfs.FSDirectory.mkdirs will merrily adds children to a directory tree node without checking whether it represents a directory. So it is possible to create a subdirectories of a file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 21:13:36 2006
Return-Path: 
 <hadoop-dev-return-2272-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30968 invoked from network); 28 Jun 2006 21:13:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 21:13:36 -0000
Received: (qmail 23556 invoked by uid 500); 28 Jun 2006 21:13:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23472 invoked by uid 500); 28 Jun 2006 21:13:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23398 invoked by uid 99); 28 Jun 2006 21:13:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3EC9141033D
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 21:11:45 +0000 (GMT)
Message-ID: <28907558.1151529105254.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 21:11:45 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-309) NullPointerException in
 StatusHttpServer
In-Reply-To: <25077876.1150763909904.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-309?page=all ]

Doug Cutting updated HADOOP-309:
--------------------------------

    Fix Version: 0.5.0
                     (was: 0.4.0)

> NullPointerException in StatusHttpServer
> ----------------------------------------
>
>          Key: HADOOP-309
>          URL: http://issues.apache.org/jira/browse/HADOOP-309
>      Project: Hadoop
>         Type: Bug

>   Components: mapred, dfs
>     Versions: 0.3.2
>     Reporter: Konstantin Shvachko
>     Priority: Minor
>      Fix For: 0.5.0

>
> The NullPointerException happens in the constructor of StatusHttpServer because the System property "hadoop.log.dir" is undefined.
> I see it trying to start the Namenode directly without using any scripts.
> Exception in thread "main" java.lang.NullPointerException
> 	at org.mortbay.util.Resource.newResource(Resource.java:99)
> 	at org.mortbay.http.ResourceCache.setResourceBase(ResourceCache.java:140)
> 	at org.mortbay.http.HttpContext.setResourceBase(HttpContext.java:2207)
> 	at org.apache.hadoop.mapred.StatusHttpServer.<init>(StatusHttpServer.java:66)
> 	at org.apache.hadoop.dfs.FSNamesystem.<init>(FSNamesystem.java:172)
> 	at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:97)
> 	at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:88)
> 	at org.apache.hadoop.dfs.NameNode.main(NameNode.java:496)
> In general I think the sources should not rely on the system properties and environment variables defined in hadoop scripts.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 21:13:37 2006
Return-Path: 
 <hadoop-dev-return-2273-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31038 invoked from network); 28 Jun 2006 21:13:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 21:13:37 -0000
Received: (qmail 23920 invoked by uid 500); 28 Jun 2006 21:13:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23816 invoked by uid 500); 28 Jun 2006 21:13:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23684 invoked by uid 99); 28 Jun 2006 21:13:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2397D41033E
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 21:11:47 +0000 (GMT)
Message-ID: <19187297.1151529107143.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 21:11:47 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-64) DataNode should be capable of managing
 multiple volumes
In-Reply-To: <96561968.1141686362086.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-64?page=all ]

Doug Cutting updated HADOOP-64:
-------------------------------

    Fix Version: 0.5.0
                     (was: 0.4.0)

> DataNode should be capable of managing multiple volumes
> -------------------------------------------------------
>
>          Key: HADOOP-64
>          URL: http://issues.apache.org/jira/browse/HADOOP-64
>      Project: Hadoop
>         Type: Improvement

>   Components: dfs
>     Versions: 0.2.0
>     Reporter: Sameer Paranjpye
>     Assignee: Konstantin Shvachko
>     Priority: Minor
>      Fix For: 0.5.0

>
> The dfs Datanode can only store data on a single filesystem volume. When a node runs its disks JBOD this means running a Datanode per disk on the machine. While the scheme works reasonably well on small clusters, on larger installations (several 100 nodes) it implies a very large number of Datanodes with associated management overhead in the Namenode.
> The Datanod should be enhanced to be able to handle multiple volumes on a single machine.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 21:13:53 2006
Return-Path: 
 <hadoop-dev-return-2277-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31245 invoked from network); 28 Jun 2006 21:13:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 21:13:53 -0000
Received: (qmail 24765 invoked by uid 500); 28 Jun 2006 21:13:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24549 invoked by uid 500); 28 Jun 2006 21:13:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24504 invoked by uid 99); 28 Jun 2006 21:13:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:49 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 14CC141033F
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 21:11:48 +0000 (GMT)
Message-ID: <18044181.1151529108082.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 21:11:48 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-48) add user data to task reports
In-Reply-To: <642884722.1140560655919.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-48?page=all ]

Doug Cutting updated HADOOP-48:
-------------------------------

    Fix Version: 0.5.0
                     (was: 0.4.0)

> add user data to task reports
> -----------------------------
>
>          Key: HADOOP-48
>          URL: http://issues.apache.org/jira/browse/HADOOP-48
>      Project: Hadoop
>         Type: New Feature

>   Components: mapred
>     Versions: 0.2.0
>     Reporter: Doug Cutting
>      Fix For: 0.5.0

>
> The Reporter interface should permit tasks to set user-data for a task, either as a String or, better-yet, as a Writable.  This should be returned with each TaskReport.  This would facilitate programmatic instrumentation of tasks.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 21:13:53 2006
Return-Path: 
 <hadoop-dev-return-2278-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31248 invoked from network); 28 Jun 2006 21:13:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 21:13:53 -0000
Received: (qmail 24799 invoked by uid 500); 28 Jun 2006 21:13:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24616 invoked by uid 500); 28 Jun 2006 21:13:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24506 invoked by uid 99); 28 Jun 2006 21:13:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:49 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7B33A410341
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 21:11:49 +0000 (GMT)
Message-ID: <2644426.1151529109502.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 21:11:49 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-249) Improving Map -> Reduce performance
 and Task JVM reuse
In-Reply-To: <12945804.1148431829854.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-249?page=all ]

Doug Cutting updated HADOOP-249:
--------------------------------

    Fix Version: 0.5.0
                     (was: 0.4.0)

> Improving Map -> Reduce performance and Task JVM reuse
> ------------------------------------------------------
>
>          Key: HADOOP-249
>          URL: http://issues.apache.org/jira/browse/HADOOP-249
>      Project: Hadoop
>         Type: Improvement

>     Versions: 0.3.0
>     Reporter: Benjamin Reed
>      Fix For: 0.5.0
>  Attachments: disk_zoom.patch, image001.png, task_zoom.patch
>
> These patches are really just to make Hadoop start trotting. It is still at least an order of magnitude slower than it should be, but I think these patches are a good start.
> I've created two patches for clarity. They are not independent, but could easily be made so.
> The disk-zoom patch is a performance trifecta: less disk IO, less disk space, less CPU, and overall a tremendous improvement. The patch is based on the following observation: every piece of data from a map hits the disk once on the mapper, and 3 (+plus sorting) times on the reducer. Further, the entire input for the reduce step is sorted together maximizing the sort time. This patch causes:
> 1)  the mapper to sort the relatively small fragments at the mapper which causes two hits to the disk, but they are smaller files.
> 2) the reducer copies the map output and may merge (if more than 100 outputs are present) with a couple of other outputs at copy time. No sorting is done since the map outputs are sorted.
> 3) the reducer  will merge the map outputs on the fly in memory at reduce time.
> I'm attaching the performance graph (with just the disk-zoom patch) to show the results. This benchmark uses a random input and null output to remove any DFS performance influences. The cluster of 49 machines I was running on had limited disk space, so I was only able to run to a certain size on unmodified Hadoop. With the patch we use 1/3 the amount of disk space.
> The second patch allows the task tracker to reuse processes to avoid the over-head of starting the JVM. While JVM startup is relatively fast, restarting a Task causes disk IO and DFS operations that have a negative impact on the rest of the system. When a Task finishes, rather than exiting, it reads the next task to run from stdin. We still isolate the Task runtime from TaskTracker, but we only pay the startup penalty once.
> This second patch also fixes two performance issues not related to JVM reuse. (The reuse just makes the problems glaring.) First, the JobTracker counts all jobs not just the running jobs to decide the load on a tracker. Second, the TaskTracker should really ask for a new Task as soon as one finishes rather than wait the 10 secs.
> I've been benchmarking the code alot, but I don't have access to a really good cluster to try the code out on, so please treat it as experimental. I would love to feedback.
> There is another obvious thing to change: ReduceTasks should start after the first batch of MapTasks complete, so that 1) they have something to do, and 2) they are running on the fastest machines.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 21:13:51 2006
Return-Path: 
 <hadoop-dev-return-2275-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31188 invoked from network); 28 Jun 2006 21:13:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 21:13:51 -0000
Received: (qmail 24570 invoked by uid 500); 28 Jun 2006 21:13:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24514 invoked by uid 500); 28 Jun 2006 21:13:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24502 invoked by uid 99); 28 Jun 2006 21:13:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:49 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F1EE9410342
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 21:11:50 +0000 (GMT)
Message-ID: <5678361.1151529110987.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 21:11:50 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-130) Should be able to specify "wide" or
 "full" replication
In-Reply-To: <1115698231.1144702080037.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-130?page=all ]

Doug Cutting updated HADOOP-130:
--------------------------------

    Fix Version: 0.5.0
                     (was: 0.4.0)

> Should be able to specify "wide" or "full" replication
> ------------------------------------------------------
>
>          Key: HADOOP-130
>          URL: http://issues.apache.org/jira/browse/HADOOP-130
>      Project: Hadoop
>         Type: Improvement

>   Components: dfs
>     Versions: 0.2.0
>  Environment: N/A
>     Reporter: Bryan Pendleton
>     Assignee: Konstantin Shvachko
>     Priority: Minor
>      Fix For: 0.5.0

>
> Should be able to specify that a file be "fully" or "widely" replicated, rather than an explicit replication count. This would be useful for job configuration and jar files, and probably other files whose use is wide enough to necessitate reducing latency to access them.
> The current implementation will also complain if you specify replication that is wider than the system's maximum replication value, and has no facility to enable "full" replication should the number of datanodes exceed the current maximum settable value of 32k.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 21:13:51 2006
Return-Path: 
 <hadoop-dev-return-2276-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31192 invoked from network); 28 Jun 2006 21:13:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 21:13:51 -0000
Received: (qmail 24635 invoked by uid 500); 28 Jun 2006 21:13:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24532 invoked by uid 500); 28 Jun 2006 21:13:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24503 invoked by uid 99); 28 Jun 2006 21:13:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:49 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 628EF7141F3
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 21:11:52 +0000 (GMT)
Message-ID: <14381739.1151529112401.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 21:11:52 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-327) ToolBase calls System.exit
In-Reply-To: <20517100.1151388930799.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-327?page=all ]

Doug Cutting updated HADOOP-327:
--------------------------------

    Fix Version: 0.5.0
                     (was: 0.4.0)

> ToolBase calls System.exit
> --------------------------
>
>          Key: HADOOP-327
>          URL: http://issues.apache.org/jira/browse/HADOOP-327
>      Project: Hadoop
>         Type: Bug

>   Components: util
>     Versions: 0.4.0
>     Reporter: Owen O'Malley
>     Assignee: Hairong Kuang
>      Fix For: 0.5.0

>
> The new ToolBase class calls System.exit when the main routine finishes. That will break if the application uses threads that need to finish before the jvm exits. The normal semantics is that the program doesn't finish execution until all of the non-daemon threads exit (including the main one) and System.exit should never be called except for critical errors.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 21:13:57 2006
Return-Path: 
 <hadoop-dev-return-2279-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31376 invoked from network); 28 Jun 2006 21:13:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 21:13:57 -0000
Received: (qmail 25065 invoked by uid 500); 28 Jun 2006 21:13:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24955 invoked by uid 500); 28 Jun 2006 21:13:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24897 invoked by uid 99); 28 Jun 2006 21:13:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:50 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 599457141F4
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 21:11:53 +0000 (GMT)
Message-ID: <19607030.1151529113364.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 21:11:53 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-88) Configuration: separate client config
 from server config (and from other-server config)
In-Reply-To: <1512399529.1142558161467.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-88?page=all ]

Doug Cutting updated HADOOP-88:
-------------------------------

    Fix Version: 0.5.0
                     (was: 0.4.0)

> Configuration: separate client config from server config (and from other-server config)
> ---------------------------------------------------------------------------------------
>
>          Key: HADOOP-88
>          URL: http://issues.apache.org/jira/browse/HADOOP-88
>      Project: Hadoop
>         Type: Wish

>   Components: conf
>     Reporter: Michel Tourn
>     Priority: Minor
>      Fix For: 0.5.0

>
> servers = JobTracker, NameNode, TaskTracker, DataNode
> clients =  runs JobClient (to submit MapReduce jobs), or runs DFSShell (to browse )
> Server machines are administered together.
> So it is OK to have all server config together (esp file paths and network ports).
> This is stored in hadoop-default.xml or hadoop-mycluster.xml
> Client machines:
> there may be as many client machines as there are MapRed developers.
> the temp space for DFS needs to be writable by the active user.
> So it should be possible to select the client temp space directory for the machine and for the user.
> (The global /tmp is not an option as discussed elsewhere: partition may be full)
> Current situation: 
> Both the server and the clients have a copy of the server config: hadoop-default.xml
> But the XML property  "dfs.data.dir" is being used as a LOCAL directory path 
> on both the server machines (Data nodes) and the client machines.
> Effect:
> Exception in thread "main" java.io.IOException: No valid local directories in property: dfs.data.dir
>  at org.apache.hadoop.conf.Configuration.getFile(Configuration.java:286)
>  at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.newBackupFile(DFSClient.java:560)
>  ...
>  at org.apache.hadoop.mapred.JobClient.submitJob(JobClient.java:267)
> Current Workaround:
> On the client use hadoop-site.xml to override dfs.data.dir
> One proposed solution:
> For the purpose of JobClient operations, use a different property in place of dfs.data.dir.
> (Ex: dfs.client.data.dir) 
> On the client, set this property in hadoop-site.xml so that it will override hadoop-default.xml 
> Another proposed solution:
> Handle the fact that the world is made of a federation of independant Hadoop systems.
> They can talk to each other (as peers) but they are administered separately.
> Each Hadoop system should have its own separate XML config file.
> Clients should be able to specify the Hadoop system they want to talk to.
> An advantage is that clients can then easily sync their local copy of a given Hadoop system config:
>  just pull its config file
> In this view of the world, a Job client is also a kind of independant (serverless) Hadoop system
> In this case the client config file may have its own dfs.data.dir, which is 
> separate from the dfs.data.dir in the server config file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 21:13:59 2006
Return-Path: 
 <hadoop-dev-return-2280-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31441 invoked from network); 28 Jun 2006 21:13:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 21:13:59 -0000
Received: (qmail 25190 invoked by uid 500); 28 Jun 2006 21:13:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24992 invoked by uid 500); 28 Jun 2006 21:13:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24815 invoked by uid 99); 28 Jun 2006 21:13:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:49 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6394A7141F5
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 21:11:54 +0000 (GMT)
Message-ID: <25199428.1151529114405.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 21:11:54 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-243) WI shows progress as 100.00% before
 actual completion (rounding error)
In-Reply-To: <32908038.1148411909849.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-243?page=all ]

Doug Cutting updated HADOOP-243:
--------------------------------

    Fix Version: 0.5.0
                     (was: 0.4.0)

> WI shows progress as 100.00% before actual completion (rounding error)
> ----------------------------------------------------------------------
>
>          Key: HADOOP-243
>          URL: http://issues.apache.org/jira/browse/HADOOP-243
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.1.0
>     Reporter: Yoram Arnon
>     Priority: Trivial
>      Fix For: 0.5.0

>
> For jobs of over 50000 tasks, the rounding error in the WI is confusing.
> When less than 0.005% of the map (or reduce) tasks remain to execute, the WI shows progress as 100.00%, which is misleading.
> Rounding down to the nearest .01% would be better.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 21:14:01 2006
Return-Path: 
 <hadoop-dev-return-2282-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31615 invoked from network); 28 Jun 2006 21:14:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 21:14:01 -0000
Received: (qmail 25724 invoked by uid 500); 28 Jun 2006 21:13:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 25151 invoked by uid 500); 28 Jun 2006 21:13:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24895 invoked by uid 99); 28 Jun 2006 21:13:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:50 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5DE2C410006
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 21:11:55 +0000 (GMT)
Message-ID: <32644083.1151529115382.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 21:11:55 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-225) tasks are left over when a job fails
In-Reply-To: <14555788.1147888325909.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-225?page=all ]

Doug Cutting updated HADOOP-225:
--------------------------------

    Fix Version: 0.5.0
                     (was: 0.4.0)

> tasks are left over when a job fails
> ------------------------------------
>
>          Key: HADOOP-225
>          URL: http://issues.apache.org/jira/browse/HADOOP-225
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.2.0
>     Reporter: Yoram Arnon
>     Priority: Minor
>      Fix For: 0.5.0

>
> when jobs are stopped or otherwise fail, tasks are often left around.
> the job tracker shows that there are map or reduce (mostly reduce) tasks running, when no job is running.
> these accumulate over time.
> eventually there are so many of those, that the job tracker can't launch new tasks, requiring a restart of the MR cluster.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 21:13:59 2006
Return-Path: 
 <hadoop-dev-return-2281-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31436 invoked from network); 28 Jun 2006 21:13:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 21:13:59 -0000
Received: (qmail 25320 invoked by uid 500); 28 Jun 2006 21:13:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 25033 invoked by uid 500); 28 Jun 2006 21:13:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24888 invoked by uid 99); 28 Jun 2006 21:13:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:49 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5397B7141FA
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 21:11:56 +0000 (GMT)
Message-ID: <11763326.1151529116339.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 21:11:56 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-165) long response times from task trackers
 under load
In-Reply-To: <28414302.1145982857680.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-165?page=all ]

Doug Cutting updated HADOOP-165:
--------------------------------

    Fix Version: 0.5.0
                     (was: 0.4.0)

> long response times from task trackers under load
> -------------------------------------------------
>
>          Key: HADOOP-165
>          URL: http://issues.apache.org/jira/browse/HADOOP-165
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.2.0
>  Environment: 190 redhat linux boxes, each with 2 hyperthreaded cpus, 2gb memory
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.5.0

>
> we are seeing very slow response times from the task tracker. I put in some instrumentation to measure how long each call took for the RPC.Sever code to run the method (so it does not include serialization/deserialization time). The top of the list (in ms) looks like:
> 7581 progress node1192
> 7022 ping node1192
> 5393 ping node1162
> 4854 progress node1162
> 4749 progress node1194
> 4709 ping node1194
> 3813 ping node1100
> 3486 ping node1190
> 3266 progress node1190
> 3187 progress node1265
> 3078 ping node1203
> 2972 progress node1203
> 2947 progress node1240
> 2889 progress node1100
> 2875 ping node1116
> 2843 ping node1189
> 2772 ping node1183
> 2737 ping node1110
> 2727 progress node1183
> 2710 ping node1123
> 2563 ping node1304
> 2527 progress node1144
> 2479 ping node1137
> 2476 progress node1304
> 2430 ping node1240
> 2416 ping node1144
> 2377 progress node1176
> 2339 ping node1109
> 2321 progress node1114
> 2311 ping node1157
> 2185 ping node1265
> 2185 ping node1109
> 2172 ping node1114
> 2145 progress node1109
> 2127 ping node1176
> 2083 progress node1189
> 2076 ping node1229
> 2073 progress node1188
> 2072 progress node1123
> 2048 ping node1161
> 2003 progress node1110
> 1989 ping node1180
> 1963 ping node1114

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 21:13:58 2006
Return-Path: 
 <hadoop-dev-return-2283-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31401 invoked from network); 28 Jun 2006 21:13:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 21:13:58 -0000
Received: (qmail 25448 invoked by uid 500); 28 Jun 2006 21:13:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 25222 invoked by uid 500); 28 Jun 2006 21:13:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24980 invoked by uid 99); 28 Jun 2006 21:13:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:50 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4AA89410005
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 21:11:57 +0000 (GMT)
Message-ID: <16895968.1151529117303.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 21:11:57 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-260) the start up scripts should take a
 command line parameter --config making it easy to run multiple hadoop
 installation on same machines
In-Reply-To: <32103939.1149014550880.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-260?page=all ]

Doug Cutting updated HADOOP-260:
--------------------------------

    Fix Version: 0.5.0
                     (was: 0.4.0)

> the start up scripts should take a command line parameter --config making it easy to run multiple hadoop installation on same machines
> --------------------------------------------------------------------------------------------------------------------------------------
>
>          Key: HADOOP-260
>          URL: http://issues.apache.org/jira/browse/HADOOP-260
>      Project: Hadoop
>         Type: Improvement

>     Versions: 0.2.0
>     Reporter: Mahadev konar
>     Assignee: Mahadev konar
>     Priority: Minor
>      Fix For: 0.5.0
>  Attachments: config.patch
>
> --config paramter would allow getting rid of SSH_OPTS.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 21:14:00 2006
Return-Path: 
 <hadoop-dev-return-2285-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31532 invoked from network); 28 Jun 2006 21:14:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 21:14:00 -0000
Received: (qmail 25837 invoked by uid 500); 28 Jun 2006 21:13:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 25338 invoked by uid 500); 28 Jun 2006 21:13:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 25048 invoked by uid 99); 28 Jun 2006 21:13:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:50 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B26D3410124
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 21:11:58 +0000 (GMT)
Message-ID: <8365811.1151529118728.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 21:11:58 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-232) jar files sent to task tracker should
 override existing jar
In-Reply-To: <25736722.1147990685938.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-232?page=all ]

Doug Cutting updated HADOOP-232:
--------------------------------

    Fix Version: 0.5.0
                     (was: 0.4.0)

> jar files sent to task tracker should override existing jar
> -----------------------------------------------------------
>
>          Key: HADOOP-232
>          URL: http://issues.apache.org/jira/browse/HADOOP-232
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.2.0
>     Reporter: Yoram Arnon
>     Assignee: Milind Bhandarkar
>     Priority: Minor
>      Fix For: 0.5.0
>  Attachments: hadoop-232.patch
>
> jar files sent to task tracker are appended to list, rather than prepended to it.
> this results in the original jar getting executed, although a new one was sent  - not the intent.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 21:14:00 2006
Return-Path: 
 <hadoop-dev-return-2284-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31536 invoked from network); 28 Jun 2006 21:14:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 21:14:00 -0000
Received: (qmail 25539 invoked by uid 500); 28 Jun 2006 21:13:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 25276 invoked by uid 500); 28 Jun 2006 21:13:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 25029 invoked by uid 99); 28 Jun 2006 21:13:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:50 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7E610410123
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 21:12:00 +0000 (GMT)
Message-ID: <22243640.1151529120515.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 21:12:00 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-53) MapReduce log files should be storable
 in dfs.
In-Reply-To: <13654009.1140640359390.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-53?page=all ]

Doug Cutting updated HADOOP-53:
-------------------------------

    Fix Version: 0.5.0
                     (was: 0.4.0)

> MapReduce log files should be storable in dfs.
> ----------------------------------------------
>
>          Key: HADOOP-53
>          URL: http://issues.apache.org/jira/browse/HADOOP-53
>      Project: Hadoop
>         Type: New Feature

>   Components: mapred
>     Versions: 0.2.0
>     Reporter: Doug Cutting
>     Assignee: Sameer Paranjpye
>      Fix For: 0.5.0

>
> It should be possible to cause a job's log output to be stored in dfs.  The jobtracker's log output and (optionally) all tasktracker log output related to a job should be storable in a job-specified dfs directory.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 21:14:00 2006
Return-Path: 
 <hadoop-dev-return-2286-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31537 invoked from network); 28 Jun 2006 21:14:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 21:14:00 -0000
Received: (qmail 25625 invoked by uid 500); 28 Jun 2006 21:13:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 25467 invoked by uid 500); 28 Jun 2006 21:13:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 25056 invoked by uid 99); 28 Jun 2006 21:13:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:50 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 067034101A8
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 21:12:00 +0000 (GMT)
Message-ID: <22227838.1151529120022.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 21:12:00 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-234) Support for writing Map/Reduce
 functions in C++
In-Reply-To: <6140265.1148030971246.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-234?page=all ]

Doug Cutting updated HADOOP-234:
--------------------------------

    Fix Version: 0.5.0
                     (was: 0.4.0)

> Support for writing Map/Reduce functions in C++
> -----------------------------------------------
>
>          Key: HADOOP-234
>          URL: http://issues.apache.org/jira/browse/HADOOP-234
>      Project: Hadoop
>         Type: New Feature

>   Components: mapred
>     Reporter: Sanjay Dahiya
>      Fix For: 0.5.0
>  Attachments: Hadoop MaReduce Developer doc.pdf, Hadoop MaReduce Developer doc.pdf
>
> MapReduce C++ support
> Requirements 
> 1. Allow users to write Map and Reduce functions in C++, rest of the 
> infrastructure already present in Java should be reused. 
> 2. Avoid users having to write both Java and C++ for this to work. 
> 3. Avoid users having to work with JNI methods directly by wrapping them in helper functions. 
> 4. Use Record IO for describing record format, both MR java framework and C++ should 
> 	use the same format to work seemlessly. 
> 5. Allow users to write simple map reduce tasks without learning record IO if keys and values are 
> 	simple strings. 
> Implementation notes
> - If keys and values are simple strings then user passes SimpleNativeMapper in JobConf and implements 
> 	mapper and reducer methods in C++. 
> - For composite Record IO types user starts with defining a record format using Record IO DDL. 
> - User generates Java and C++ classes from the DDL using record IO. 
> - Users configures JobConf to use the generated Java classes as the MR input/output, key/value classes. 
> - User writes Map and Reduce functions in C++ using a standard interface ( given below ) , this interface 
>   makes a serialized record IO format available to the C++ function which should be deserialized in corrosponding
>   generated C++ record IO classes. 
> - User uses the helper functions to pass the serialized format of generated output key/value pairs to output collector. 
> Following is a pseudocode for the Mapper ( Reducer can be implemented similarly ) - 
> Native(JNI) Java proxy for the Mapper : 
> ---------------------------------------
> Without Record IO :-
> --------------------
> public class SimpleNativeMapper extends MapReduceBase implements Mapper {
> 	/**
> 	  * Works on simple strings. 
> 	  **/
> 	public void map(WritableComparable key, Writable value,
> 			OutputCollector output, Reporter reporter) throws IOException {
> 		mapNative(key.toString().getBytes()
> 				, value.toString().getBytes(), output, reporter); 
> 	}
> 	
> 	/**
> 	  * Native implementation. 
> 	  **/
> 	private native void mapNative(byte[] key, byte[] value, 
> 			OutputCollector output, Reporter reporter) throws IOException;
> }
> With Record IO :- 
> ------------------
> public class RecordIONativeMapper extends MapReduceBase implements Mapper {
> 	/**
> 	 * Implementation of map method, this acts as a JNI proxy for actual map 
> 	 * method implemented in C++. Works for Record IO based records. 
> 	 * @see map(byte[] , byte[],	OutputCollector, Reporter)
> 	 */
> 	public void map(WritableComparable key, Writable value,
> 			OutputCollector output, Reporter reporter) throws IOException {
> 		
> 		byte[] keyBytes = null ;
> 		byte[] valueBytes = null ;
> 		
> 		try{
> 			// we need to serialize the key and record and pass the serialized 
> 			// format to C++ / JNI methods so they can interpret it using appropriate 
> 			// record IO classes. 
> 			{
> 				ByteArrayOutputStream keyStream = new ByteArrayOutputStream() ; 
> 				BinaryOutputArchive boa = new BinaryOutputArchive(new DataOutputStream(keyStream)) ;
> 				
> 				((Record)key).serialize(boa, "WhatIsTag");
> 				keyBytes = keyStream.toByteArray();
> 			}
> 			{
> 				ByteArrayOutputStream valueStream = new ByteArrayOutputStream() ; 
> 				BinaryOutputArchive boa = new BinaryOutputArchive(new DataOutputStream(valueStream)) ;
> 				
> 				((Record)key).serialize(boa, "WhatIsTag");
> 				valueBytes = valueStream.toByteArray();
> 			}
> 		}catch(ClassCastException e){
> 			// throw better exceptions
> 			throw new IOException("Input record must be of Record IO Type"); 
> 		}
> 		// pass the serialized byte[] to C++ implementation. 
> 		mapNative(keyBytes, valueBytes, output, reporter); 
> 	}
> 	/**
> 	 * Implementation in C++.
> 	 */
> 	private native void mapNative(byte[] key, byte[] value, 
> 			OutputCollector output, Reporter reporter) throws IOException;
> }
> OutputCollector Proxy for C++
> ------------------------------
> public class NativeOutputCollector implements OutputCollector {
> 	// standard method from interface
> 	public void collect(WritableComparable key, Writable value)
> 			throws IOException {
> 	}
> 	
> 	// deserializes key and value and calls collect(WritableComparable, Writable)
> 	public void collectFromNative(byte[]key, byte[]value){
> 		// deserialize key and value to java types ( as configured in JobConf )
> 		// call actual collect method 
> 	}
> }
> Core Native functions ( helper for user provided Mapper and Reducer ) 
> ---------------------------------------------------------------------
> #include "org_apache_hadoop_mapred_NativeMapper.h"
> #include "UserMapper.h"
> /**
> 	* A C++ proxy method, calls actual implementation of the Mapper. This method 
> 	signature is generated by javah.
> **/
> JNIEXPORT void JNICALL Java_org_apache_hadoop_mapred_NativeMapper_mapNative
>   (JNIEnv *env, jobject thisObj, jbyteArray key, jbyteArray value, 
>   	jobject output_collector, jobject reporter);
> {
>  
>  	// convert char* and pass on to user defined map method. 
>  	// user's map method should take care of converting it to correct record IO 
>  	// type.
>  	int keyLen = (*env)->GetArrayLength(env, key) ;
>  	int valueLen = (*env)->GetArrayLength(env, valueLen) ;
>  	const char *keyBuf = (*env)->GetByteArrayElements(env,key, keyLen, JNI_FALSE) ;
>  	const char *valueuf = (*env)->GetByteArrayElements(env,value, valueLen, JNI_FALSE) ;
>  	
>  	// Call User defined method 
>  	user_map(keyBuf, valueBuf, output_collector, reporter) ;
>  	
>  	(*env)->ReleaseByteArrayElements(env, key, keyBuf,  JNI_ABORT) ; 
>  	(*env)->ReleaseByteArrayElements(env, value, ValueBuf, JNI_ABORT) ; 
> }
> /**
> 	Helper method, acts as a proxy to OutputCollector in java. key and value 
> 	must be serialized forms of records as specified in JobConf. 
> **/
> void output_collector(const char * key, const char *value,
> 	jobject output_collector, jobject reporter){
> 	
> 	// invoke java NativeOutputCollector.collect with key and value. 
> }
> User defined Mapper ( and Reducer ) 
> ------------------------------------
> /**
> 	implements user defined map operation. 
> **/
> void user_mapper(const char *key, const char *value, jobject collector, jobject recorder) {
> 	//1. deserialize key/value in the appropriate format using record IO. 
> 	
> 	//2. process key/value and generate the intermediate key/values in record IO format. 
> 	
> 	//3. Deserialize intermediate key/values to intermed_key and intermed_value
> 	
> 	//4. pass intermed_key/intermed_value using helper function - 
> 	// 		output_collector(intermed_key, intermed_value, collector, recorder);
> 	
> 	
> }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 21:14:05 2006
Return-Path: 
 <hadoop-dev-return-2292-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31802 invoked from network); 28 Jun 2006 21:14:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 21:14:05 -0000
Received: (qmail 26623 invoked by uid 500); 28 Jun 2006 21:13:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26210 invoked by uid 500); 28 Jun 2006 21:13:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 25492 invoked by uid 99); 28 Jun 2006 21:13:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:52 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7E3564101BC
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 21:12:02 +0000 (GMT)
Message-ID: <7764110.1151529122514.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 21:12:02 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-76) Implement speculative re-execution of
 reduces
In-Reply-To: <1176204687.1142031469402.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-76?page=all ]

Doug Cutting updated HADOOP-76:
-------------------------------

    Fix Version: 0.5.0
                     (was: 0.4.0)

> Implement speculative re-execution of reduces
> ---------------------------------------------
>
>          Key: HADOOP-76
>          URL: http://issues.apache.org/jira/browse/HADOOP-76
>      Project: Hadoop
>         Type: Improvement

>   Components: mapred
>     Versions: 0.1.0
>     Reporter: Doug Cutting
>     Assignee: Owen O'Malley
>     Priority: Minor
>      Fix For: 0.5.0

>
> As a first step, reduce task outputs should go to temporary files which are renamed when the task completes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 21:14:02 2006
Return-Path: 
 <hadoop-dev-return-2290-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31635 invoked from network); 28 Jun 2006 21:14:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 21:14:02 -0000
Received: (qmail 26481 invoked by uid 500); 28 Jun 2006 21:13:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26088 invoked by uid 500); 28 Jun 2006 21:13:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 25488 invoked by uid 99); 28 Jun 2006 21:13:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:52 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DA11C410340
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 21:12:03 +0000 (GMT)
Message-ID: <936774.1151529123890.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 21:12:03 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-54?page=all ]

Doug Cutting updated HADOOP-54:
-------------------------------

    Fix Version: 0.5.0
                     (was: 0.4.0)

> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>          Key: HADOOP-54
>          URL: http://issues.apache.org/jira/browse/HADOOP-54
>      Project: Hadoop
>         Type: Improvement

>   Components: io
>     Versions: 0.2.0
>     Reporter: Doug Cutting
>     Assignee: Michel Tourn
>      Fix For: 0.5.0

>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 21:14:05 2006
Return-Path: 
 <hadoop-dev-return-2294-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31789 invoked from network); 28 Jun 2006 21:14:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 21:14:05 -0000
Received: (qmail 26829 invoked by uid 500); 28 Jun 2006 21:13:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26359 invoked by uid 500); 28 Jun 2006 21:13:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 25466 invoked by uid 99); 28 Jun 2006 21:13:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:52 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 42BF7410339
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 21:12:05 +0000 (GMT)
Message-ID: <18053359.1151529125270.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 21:12:05 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-268) TaskTracker latency is slowing down
 maps because progress reporting is done inline
In-Reply-To: <13624142.1149185609819.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-268?page=all ]

Doug Cutting updated HADOOP-268:
--------------------------------

    Fix Version: 0.5.0
                     (was: 0.4.0)

> TaskTracker latency is slowing down maps because progress reporting is done inline
> ----------------------------------------------------------------------------------
>
>          Key: HADOOP-268
>          URL: http://issues.apache.org/jira/browse/HADOOP-268
>      Project: Hadoop
>         Type: Improvement

>   Components: mapred
>     Versions: 0.2.1
>     Reporter: Owen O'Malley
>     Assignee: Sameer Paranjpye
>      Fix For: 0.5.0

>
> Moving the progress reporter to a separate thread should free up the user application to run faster.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 21:14:01 2006
Return-Path: 
 <hadoop-dev-return-2287-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31613 invoked from network); 28 Jun 2006 21:14:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 21:14:01 -0000
Received: (qmail 26177 invoked by uid 500); 28 Jun 2006 21:13:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 25748 invoked by uid 500); 28 Jun 2006 21:13:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 25530 invoked by uid 99); 28 Jun 2006 21:13:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:52 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AEB48410346
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 21:12:06 +0000 (GMT)
Message-ID: <24123123.1151529126713.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 21:12:06 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-306) Safe mode and name node startup
 procedures
In-Reply-To: <5719318.1150505909849.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-306?page=all ]

Doug Cutting updated HADOOP-306:
--------------------------------

    Fix Version: 0.5.0
                     (was: 0.4.0)

> Safe mode and name node startup procedures
> ------------------------------------------
>
>          Key: HADOOP-306
>          URL: http://issues.apache.org/jira/browse/HADOOP-306
>      Project: Hadoop
>         Type: New Feature

>     Versions: 0.3.2
>     Reporter: Konstantin Shvachko
>      Fix For: 0.5.0

>
> This is a proposal to improve DFS cluster startup process.
> The data node startup procedures were described and implemented in HADOOP-124.
> I'm trying to extend them to the name node here.
> The main idea is to introduce safe mode, which can be entered manually for administration
> purposes, or automatically when a configurable threshold of active data nodes is breached,
> or at startup when the node stays in safe mode until the minimal limit of active
> nodes is reached.
> This are high level requirements intended to improve the name node and cluster reliability.
>     = The name node safe mode means that the name node is not changing the state of the
>        file system. Meta data is read-only, and block replication / removal is not taking place.
>     = In safe mode the name node accepts data node registrations and
>        processes their block reports.
>     = The name node always starts in safe mode and stays safe until the majority
>         (a configurable parameter: safemode.threshold) of data nodes (or blocks?)
>         is reported.
>     = The name node can also fall into safe mode when the number of non-active
>         (heartbeats stopped coming in) data nodes becomes critical.
>     = The startup "silent period", when the name node is in safe mode and is
>         not issuing any block requests to the data nodes, is initially set to a
>         configurable value safemode.timeout.increment. By the end of the timeout
>         the name node checks the safemode.threshold and decides whether to switch
>         to the normal mode or to stay in safe. If the normal mode criteria is not
>         met, then the silent period is extended by incrementing the safemode timeout.
>     = The name node stays in safe mode not longer than a configurable value of
>         safemode.timeout.max, in which case it logs missing data nodes and shuts
>         itself down.
>     = When the name node switches to normal mode it checks whether all required
>         data nodes have actually registered, based on the list of active data storages
>         from the last session. Then it logs missing nodes, if any, and starts
>         replicating and/or deleting blocks as required.
>     = A historical list of data storages (nodes) ever registered with the cluster is
>         persistently stored in the image and log files. The list is used in two ways:
>         a) at startup to verify whether all nodes have registered, and to report
>         missing nodes;
>         b) at runtime if a data node registers with a new storage id the
>         name node verifies that no new blocks are reported from that storage,
>         which would prevent us from accidentally connecting data nodes from a
>         different cluster.
>     = The name node should have an option to run in safe mode. Starting with
>         that option would mean it never leaves safe mode.
>         This is useful for testing the cluster.
>     = Data nodes that can not connect to the name node for a long time (configurable)
>         should shut down themselves.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 21:14:01 2006
Return-Path: 
 <hadoop-dev-return-2288-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31611 invoked from network); 28 Jun 2006 21:14:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 21:14:01 -0000
Received: (qmail 26271 invoked by uid 500); 28 Jun 2006 21:13:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26013 invoked by uid 500); 28 Jun 2006 21:13:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 25580 invoked by uid 99); 28 Jun 2006 21:13:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:53 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9F04D410343
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 21:12:07 +0000 (GMT)
Message-ID: <12926252.1151529127648.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 21:12:07 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-261) when map outputs are lost, nothing is
 shown in the webapp about why the map task failed
In-Reply-To: <18552838.1149014909866.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-261?page=all ]

Doug Cutting updated HADOOP-261:
--------------------------------

    Fix Version: 0.5.0
                     (was: 0.4.0)

> when map outputs are lost, nothing is shown in the webapp about why the map task failed
> ---------------------------------------------------------------------------------------
>
>          Key: HADOOP-261
>          URL: http://issues.apache.org/jira/browse/HADOOP-261
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.2.1
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.5.0

>
> When a task tracker invokes mapOutputLost, it does not include a diagnostic that lets the user (or the web app) know what failed in the map. I want to add a diagnostic message.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 21:14:01 2006
Return-Path: 
 <hadoop-dev-return-2289-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31614 invoked from network); 28 Jun 2006 21:14:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 21:14:01 -0000
Received: (qmail 26392 invoked by uid 500); 28 Jun 2006 21:13:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26047 invoked by uid 500); 28 Jun 2006 21:13:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 25579 invoked by uid 99); 28 Jun 2006 21:13:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:53 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 288E8410348
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 21:12:09 +0000 (GMT)
Message-ID: <15381742.1151529129163.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 21:12:09 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-293) map reduce job fail without reporting
 a reason
In-Reply-To: <25233677.1149814169844.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-293?page=all ]

Doug Cutting updated HADOOP-293:
--------------------------------

    Fix Version: 0.5.0
                     (was: 0.4.0)

> map reduce job fail without reporting a reason
> ----------------------------------------------
>
>          Key: HADOOP-293
>          URL: http://issues.apache.org/jira/browse/HADOOP-293
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.3.1
>     Reporter: Yoram Arnon
>     Assignee: Owen O'Malley
>      Fix For: 0.5.0

>
> Often I see in the WI reports of tasks failing without information reported as to the reason of the failure.
> It makes analysis and fixing the problem much harder.
> The reason for the failure should always be reported in the WI.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 21:14:04 2006
Return-Path: 
 <hadoop-dev-return-2291-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31736 invoked from network); 28 Jun 2006 21:14:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 21:14:04 -0000
Received: (qmail 26527 invoked by uid 500); 28 Jun 2006 21:13:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26130 invoked by uid 500); 28 Jun 2006 21:13:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 25585 invoked by uid 99); 28 Jun 2006 21:13:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:53 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 236D1410349
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 21:12:10 +0000 (GMT)
Message-ID: <10825139.1151529130142.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 21:12:10 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-236) job tracker should refuse connection
 from a task tracker with a different version number
In-Reply-To: <22977378.1148066309828.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-236?page=all ]

Doug Cutting updated HADOOP-236:
--------------------------------

    Fix Version: 0.5.0
                     (was: 0.4.0)

> job tracker should refuse connection from a task tracker with a different version number
> ----------------------------------------------------------------------------------------
>
>          Key: HADOOP-236
>          URL: http://issues.apache.org/jira/browse/HADOOP-236
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.2.1
>     Reporter: Hairong Kuang
>      Fix For: 0.5.0

>
> After one mapred system upgrade, we noticed that all tasks assigned to one task tracker failed. It turned out that for some reason the task tracker was not upgraded.
> To avoid this, a task tracker should reports its version # when it registers itsself with a job tracker. If the job tracker receives an inconsistent version #, it should refuse the connection.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 21:14:05 2006
Return-Path: 
 <hadoop-dev-return-2293-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31796 invoked from network); 28 Jun 2006 21:14:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 21:14:05 -0000
Received: (qmail 26702 invoked by uid 500); 28 Jun 2006 21:13:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26319 invoked by uid 500); 28 Jun 2006 21:13:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 25621 invoked by uid 99); 28 Jun 2006 21:13:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:13:53 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0F2E641034B
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 21:12:11 +0000 (GMT)
Message-ID: <26385667.1151529131059.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 21:12:11 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-258) Cannot obtain block errors
In-Reply-To: <27132555.1148714249850.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-258?page=3Dall ]

Doug Cutting updated HADOOP-258:
--------------------------------

    Fix Version: 0.5.0
                     (was: 0.4.0)

> Cannot obtain block errors
> --------------------------
>
>          Key: HADOOP-258
>          URL: http://issues.apache.org/jira/browse/HADOOP-258
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.3.0
>     Reporter: Owen O'Malley
>     Assignee: Sameer Paranjpye
>      Fix For: 0.5.0

>
> I've been seeing a lot of errors from dfs for the last couple days. The e=
xception that I see is:
> java.io.IOException: Could not obtain block: blk_2867431916903738534 file=
=3D/user/oom/big-rand/part000271 offset=3D0 at org.apache.hadoop.dfs.DFSCli=
ent$DFSInputStream.blockSeekTo(DFSClient.java:532) at org.apache.hadoop.dfs=
.DFSClient$DFSInputStream.read(DFSClient.java:641) at org.apache.hadoop.fs.=
FSDataInputStream$Checker.read(FSDataInputStream.java:83) at org.apache.had=
oop.fs.FSDataInputStream$PositionCache.read(FSDataInputStream.java:158) at =
java.io.BufferedInputStream.fill(BufferedInputStream.java:218) at java.io.B=
ufferedInputStream.read1(BufferedInputStream.java:256) at java.io.BufferedI=
nputStream.read(BufferedInputStream.java:313) at java.io.DataInputStream.re=
adFully(DataInputStream.java:176) at java.io.DataInputStream.readFully(Data=
InputStream.java:152) at org.apache.hadoop.io.SequenceFile$Reader.init(Sequ=
enceFile.java:264) at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFil=
e.java:248) at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:=
238) at org.apache.hadoop.mapred.SequenceFileRecordReader.(SequenceFileReco=
rdReader.java:36) at org.apache.hadoop.mapred.SequenceFileInputFormat.getRe=
cordReader(SequenceFileInputFormat.java:53) at org.apache.hadoop.mapred.Map=
Task.run(MapTask.java:105) at org.apache.hadoop.mapred.TaskTracker$Child.ma=
in(TaskTracker.java:866)
> I haven't had my fingers in that code recently, does it ring any bells fo=
r anyone?

--=20
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 21:14:13 2006
Return-Path: 
 <hadoop-dev-return-2296-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32050 invoked from network); 28 Jun 2006 21:14:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 21:14:13 -0000
Received: (qmail 28441 invoked by uid 500); 28 Jun 2006 21:14:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28334 invoked by uid 500); 28 Jun 2006 21:14:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28299 invoked by uid 99); 28 Jun 2006 21:14:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:14:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:14:09 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 69EE741034D
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 21:12:12 +0000 (GMT)
Message-ID: <18345882.1151529132431.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 21:12:12 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-227) Namespace check pointing is not
 performed until the namenode restarts.
In-Reply-To: <17890828.1147909205885.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-227?page=all ]

Doug Cutting updated HADOOP-227:
--------------------------------

    Fix Version: 0.5.0
                     (was: 0.4.0)

> Namespace check pointing is not performed until the namenode restarts.
> ----------------------------------------------------------------------
>
>          Key: HADOOP-227
>          URL: http://issues.apache.org/jira/browse/HADOOP-227
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.2.0
>     Reporter: Konstantin Shvachko
>      Fix For: 0.5.0

>
> In current implementation when the name node starts, it reads its image file, then
> the edits file, and then saves the updated image back into the image file.
> The image file is never updated after that.
> In order to provide the system reliability reliability the namespace information should
> be check pointed periodically, and the edits file should be kept relatively small.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 21:14:11 2006
Return-Path: 
 <hadoop-dev-return-2295-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32003 invoked from network); 28 Jun 2006 21:14:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 21:14:11 -0000
Received: (qmail 28361 invoked by uid 500); 28 Jun 2006 21:14:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28310 invoked by uid 500); 28 Jun 2006 21:14:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28298 invoked by uid 99); 28 Jun 2006 21:14:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:14:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:14:09 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 55375410334
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 21:12:13 +0000 (GMT)
Message-ID: <7074151.1151529133346.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 21:12:13 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-321) DatanodeInfo refactoring
In-Reply-To: <20976373.1151024969902.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-321?page=all ]

Doug Cutting updated HADOOP-321:
--------------------------------

    Fix Version: 0.5.0
                     (was: 0.4.0)

> DatanodeInfo refactoring
> ------------------------
>
>          Key: HADOOP-321
>          URL: http://issues.apache.org/jira/browse/HADOOP-321
>      Project: Hadoop
>         Type: Improvement

>   Components: dfs
>     Reporter: Konstantin Shvachko
>     Assignee: Konstantin Shvachko
>      Fix For: 0.5.0
>  Attachments: DatanodeInfo_refactor.patch, DatanodeInfo_refactor3.patch
>
> I'm trying to refactor some name node classes, which seem to be similar.
> So DatanodeInfo is a public api now for purely external ( to name node) use.
> The name node class that stores information about data nodes including the
> set of its blocks is called DatanodeDescriptor.
> The DatanodeReport is removed since it was a variation of DatanodeInfo.
> Previously DatanodeInfo and DatanodeDescriptor were the same class, and
> DatanodeReport was used for reporting node statistics only.
> This is a preparation step for HADOOP-306.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 21:14:13 2006
Return-Path: 
 <hadoop-dev-return-2297-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32057 invoked from network); 28 Jun 2006 21:14:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 21:14:13 -0000
Received: (qmail 28532 invoked by uid 500); 28 Jun 2006 21:14:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28366 invoked by uid 500); 28 Jun 2006 21:14:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28300 invoked by uid 99); 28 Jun 2006 21:14:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:14:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:14:09 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C2587410335
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 21:12:13 +0000 (GMT)
Message-ID: <5591988.1151529133793.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 21:12:13 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-203) remove deprecated java.io.File methods
In-Reply-To: <13879069.1147128020850.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-203?page=all ]

Doug Cutting updated HADOOP-203:
--------------------------------

    Fix Version: 0.5.0
                     (was: 0.4.0)

> remove deprecated java.io.File methods
> --------------------------------------
>
>          Key: HADOOP-203
>          URL: http://issues.apache.org/jira/browse/HADOOP-203
>      Project: Hadoop
>         Type: Improvement

>   Components: fs
>     Reporter: Doug Cutting
>     Assignee: Doug Cutting
>     Priority: Minor
>      Fix For: 0.5.0

>
> Now that the 0.2 release is out, we should remove the deprecated FileSystem methods that use java.io.File, since using org.apache.hadoop.fs.Path is less error-prone.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 21:14:13 2006
Return-Path: 
 <hadoop-dev-return-2298-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32065 invoked from network); 28 Jun 2006 21:14:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 21:14:13 -0000
Received: (qmail 28600 invoked by uid 500); 28 Jun 2006 21:14:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28404 invoked by uid 500); 28 Jun 2006 21:14:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28301 invoked by uid 99); 28 Jun 2006 21:14:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:14:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:14:09 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E6EDF410338
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 21:12:15 +0000 (GMT)
Message-ID: <28051244.1151529135943.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 21:12:15 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-181) task trackers should not restart for
 having a late heartbeat
In-Reply-To: <701484.1146509206378.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-181?page=all ]

Doug Cutting updated HADOOP-181:
--------------------------------

    Fix Version: 0.5.0
                     (was: 0.4.0)

> task trackers should not restart for having a late heartbeat
> ------------------------------------------------------------
>
>          Key: HADOOP-181
>          URL: http://issues.apache.org/jira/browse/HADOOP-181
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.1.1
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.5.0

>
> TaskTrackers should not close and restart themselves for having a late heartbeat. The JobTracker should just accept their current status.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 21:20:08 2006
Return-Path: 
 <hadoop-dev-return-2299-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33234 invoked from network); 28 Jun 2006 21:20:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 21:20:08 -0000
Received: (qmail 36725 invoked by uid 500); 28 Jun 2006 21:20:07 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 36704 invoked by uid 500); 28 Jun 2006 21:20:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 36693 invoked by uid 99); 28 Jun 2006 21:20:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:20:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:20:06 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 98EF5410005
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 21:18:30 +0000 (GMT)
Message-ID: <25445940.1151529510623.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 21:18:30 +0000 (GMT+00:00)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-283) Counting of running maps/reduces in
 tasktrackerstatus
In-Reply-To: <9570698.1149644253669.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-283?page=all ]
     
Mahadev konar resolved HADOOP-283:
----------------------------------

    Resolution: Fixed

resolved with HADOOP-305

> Counting of running maps/reduces in tasktrackerstatus
> -----------------------------------------------------
>
>          Key: HADOOP-283
>          URL: http://issues.apache.org/jira/browse/HADOOP-283
>      Project: Hadoop
>         Type: Improvement

>     Versions: 0.4.0
>     Reporter: Mahadev konar
>     Assignee: Mahadev konar
>     Priority: Minor
>  Attachments: tasktrackerstatus.patch
>
> The functions countreducetasks and countmaptasks currently return the total number of maps/reduces on the tasktracker. They should only return the number of running maps/reduces. Because they return the total count, the jobtracker is not able to schedule tasks on these tasktrackers in the current cycle, when a task is finished and the tasktracker is runnning max number of maps/reduces.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 21:36:09 2006
Return-Path: 
 <hadoop-dev-return-2300-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37939 invoked from network); 28 Jun 2006 21:36:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 21:36:09 -0000
Received: (qmail 65214 invoked by uid 500); 28 Jun 2006 21:36:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 65068 invoked by uid 500); 28 Jun 2006 21:36:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 65059 invoked by uid 99); 28 Jun 2006 21:36:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:36:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:36:07 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E2FA5410005
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 21:34:30 +0000 (GMT)
Message-ID: <32927538.1151530470926.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 21:34:30 +0000 (GMT+00:00)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-306) Safe mode and name node startup
 procedures
In-Reply-To: <5719318.1150505909849.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-306?page=all ]

Konstantin Shvachko reassigned HADOOP-306:
------------------------------------------

    Assign To: Konstantin Shvachko

> Safe mode and name node startup procedures
> ------------------------------------------
>
>          Key: HADOOP-306
>          URL: http://issues.apache.org/jira/browse/HADOOP-306
>      Project: Hadoop
>         Type: New Feature

>     Versions: 0.3.2
>     Reporter: Konstantin Shvachko
>     Assignee: Konstantin Shvachko
>      Fix For: 0.5.0

>
> This is a proposal to improve DFS cluster startup process.
> The data node startup procedures were described and implemented in HADOOP-124.
> I'm trying to extend them to the name node here.
> The main idea is to introduce safe mode, which can be entered manually for administration
> purposes, or automatically when a configurable threshold of active data nodes is breached,
> or at startup when the node stays in safe mode until the minimal limit of active
> nodes is reached.
> This are high level requirements intended to improve the name node and cluster reliability.
>     = The name node safe mode means that the name node is not changing the state of the
>        file system. Meta data is read-only, and block replication / removal is not taking place.
>     = In safe mode the name node accepts data node registrations and
>        processes their block reports.
>     = The name node always starts in safe mode and stays safe until the majority
>         (a configurable parameter: safemode.threshold) of data nodes (or blocks?)
>         is reported.
>     = The name node can also fall into safe mode when the number of non-active
>         (heartbeats stopped coming in) data nodes becomes critical.
>     = The startup "silent period", when the name node is in safe mode and is
>         not issuing any block requests to the data nodes, is initially set to a
>         configurable value safemode.timeout.increment. By the end of the timeout
>         the name node checks the safemode.threshold and decides whether to switch
>         to the normal mode or to stay in safe. If the normal mode criteria is not
>         met, then the silent period is extended by incrementing the safemode timeout.
>     = The name node stays in safe mode not longer than a configurable value of
>         safemode.timeout.max, in which case it logs missing data nodes and shuts
>         itself down.
>     = When the name node switches to normal mode it checks whether all required
>         data nodes have actually registered, based on the list of active data storages
>         from the last session. Then it logs missing nodes, if any, and starts
>         replicating and/or deleting blocks as required.
>     = A historical list of data storages (nodes) ever registered with the cluster is
>         persistently stored in the image and log files. The list is used in two ways:
>         a) at startup to verify whether all nodes have registered, and to report
>         missing nodes;
>         b) at runtime if a data node registers with a new storage id the
>         name node verifies that no new blocks are reported from that storage,
>         which would prevent us from accidentally connecting data nodes from a
>         different cluster.
>     = The name node should have an option to run in safe mode. Starting with
>         that option would mean it never leaves safe mode.
>         This is useful for testing the cluster.
>     = Data nodes that can not connect to the name node for a long time (configurable)
>         should shut down themselves.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 22:22:08 2006
Return-Path: 
 <hadoop-dev-return-2301-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50210 invoked from network); 28 Jun 2006 22:22:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 22:22:08 -0000
Received: (qmail 24713 invoked by uid 500); 28 Jun 2006 22:22:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24681 invoked by uid 500); 28 Jun 2006 22:22:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24672 invoked by uid 99); 28 Jun 2006 22:22:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 15:22:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 15:22:06 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A1211410005
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 22:20:30 +0000 (GMT)
Message-ID: <11344778.1151533230655.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 22:20:30 +0000 (GMT+00:00)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-322) Need a job control utility to submit
 and monitor a group of jobs which have DAG dependency
In-Reply-To: <4931825.1151126129857.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-322?page=all ]

Runping Qi updated HADOOP-322:
------------------------------

    Attachment:     (was: job_control_patch.txt)

> Need a job control utility to submit and monitor a group of jobs which have DAG dependency
> ------------------------------------------------------------------------------------------
>
>          Key: HADOOP-322
>          URL: http://issues.apache.org/jira/browse/HADOOP-322
>      Project: Hadoop
>         Type: New Feature

>     Reporter: Runping Qi
>     Assignee: Runping Qi

>
> In my applications, some jobs depend on the outputs of other jobs. Therefore, job dependency forms a DAG. A job is ready to run if and only if it does not have any dependency or all the jobs it depends are finished successfully. To help schedule and monitor a group of jobs like that, I am thinking of implementing a utility that:
> 	- accept jobs with dependency specification
>       - monitor job status
>       - submit jobs when they are ready
> With such a utility, the application can construct its jobs, specify their dependency and then hand the jobs to the utility class. The utility takes care of the details of job submission.
> I'll post my design skech for comments/suggestion.
> Eventually, I'll submit a patch for the utility.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 22:25:08 2006
Return-Path: 
 <hadoop-dev-return-2302-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51781 invoked from network); 28 Jun 2006 22:25:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 22:25:08 -0000
Received: (qmail 29070 invoked by uid 500); 28 Jun 2006 22:25:07 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 29044 invoked by uid 500); 28 Jun 2006 22:25:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 29035 invoked by uid 99); 28 Jun 2006 22:25:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 15:25:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 15:25:06 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9FFE4410005
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 22:23:30 +0000 (GMT)
Message-ID: <6109702.1151533410652.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 22:23:30 +0000 (GMT+00:00)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-322) Need a job control utility to submit
 and monitor a group of jobs which have DAG dependency
In-Reply-To: <4931825.1151126129857.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-322?page=all ]

Runping Qi updated HADOOP-322:
------------------------------

    Attachment: job_control_patch.txt

Job state consistency check is added to TestJobControl class

> Need a job control utility to submit and monitor a group of jobs which have DAG dependency
> ------------------------------------------------------------------------------------------
>
>          Key: HADOOP-322
>          URL: http://issues.apache.org/jira/browse/HADOOP-322
>      Project: Hadoop
>         Type: New Feature

>     Reporter: Runping Qi
>     Assignee: Runping Qi
>  Attachments: job_control_patch.txt
>
> In my applications, some jobs depend on the outputs of other jobs. Therefore, job dependency forms a DAG. A job is ready to run if and only if it does not have any dependency or all the jobs it depends are finished successfully. To help schedule and monitor a group of jobs like that, I am thinking of implementing a utility that:
> 	- accept jobs with dependency specification
>       - monitor job status
>       - submit jobs when they are ready
> With such a utility, the application can construct its jobs, specify their dependency and then hand the jobs to the utility class. The utility takes care of the details of job submission.
> I'll post my design skech for comments/suggestion.
> Eventually, I'll submit a patch for the utility.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jun 28 22:32:08 2006
Return-Path: 
 <hadoop-dev-return-2303-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52533 invoked from network); 28 Jun 2006 22:32:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 22:32:08 -0000
Received: (qmail 36723 invoked by uid 500); 28 Jun 2006 22:32:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 36575 invoked by uid 500); 28 Jun 2006 22:32:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 36566 invoked by uid 99); 28 Jun 2006 22:32:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 15:32:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 15:32:07 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 245647141E0
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 22:30:31 +0000 (GMT)
Message-ID: <18521426.1151533831146.JavaMail.jira@brutus>
Date: Wed, 28 Jun 2006 22:30:31 +0000 (GMT+00:00)
From: "paul sutter (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-331) map outputs should be written to a
 single output file with an index
In-Reply-To: <25178997.1151527889918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-331?page=comments#action_12418332 ] 

paul sutter commented on HADOOP-331:
------------------------------------


.. and further, when considering the plumbing for transferring this data to the reducer, it would be great if the mechanism allows the reducer to receive this data as it is generated by the mapper. in this way, the sorter could begin sorting immediately, and the map output data would only come back off disk in the case of a second execution of a failed reducer (since the first transfer would happen "for free" out of the file cache)

This wouldnt be necessary in the first version, but it would be good if this were considered in the design.



> map outputs should be written to a single output file with an index
> -------------------------------------------------------------------
>
>          Key: HADOOP-331
>          URL: http://issues.apache.org/jira/browse/HADOOP-331
>      Project: Hadoop
>         Type: Improvement

>   Components: mapred
>     Versions: 0.3.2
>     Reporter: eric baldeschwieler
>     Assignee: Yoram Arnon
>      Fix For: 0.5.0

>
> The current strategy of writing a file per target map is consuming a lot of unused buffer space (causing out of memory crashes) and puts a lot of burden on the FS (many opens, inodes used, etc).  
> I propose that we write a single file containing all output and also write an index file IDing which byte range in the file goes to each reduce.  This will remove the issue of buffer waste, address scaling issues with number of open files and generally set us up better for scaling.  It will also have advantages with very small inputs, since the buffer cache will reduce the number of seeks needed and the data serving node can open a single file and just keep it open rather than needing to do directory and open ops on every request.
> The only issue I see is that in cases where the task output is substantiallyu larger than its input, we may need to spill multiple times.  In this case, we can do a merge after all spills are complete (or during the final spill).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun 29 00:16:08 2006
Return-Path: 
 <hadoop-dev-return-2304-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78184 invoked from network); 29 Jun 2006 00:16:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 00:16:08 -0000
Received: (qmail 63928 invoked by uid 500); 29 Jun 2006 00:16:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63799 invoked by uid 500); 29 Jun 2006 00:16:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63788 invoked by uid 99); 29 Jun 2006 00:16:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 17:16:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 17:16:07 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AB7297141E0
	for <hadoop-dev@lucene.apache.org>; Thu, 29 Jun 2006 00:14:30 +0000 (GMT)
Message-ID: <8738254.1151540070699.JavaMail.jira@brutus>
Date: Thu, 29 Jun 2006 00:14:30 +0000 (GMT+00:00)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-321) DatanodeInfo refactoring
In-Reply-To: <20976373.1151024969902.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-321?page=comments#action_12418345 ] 

eric baldeschwieler commented on HADOOP-321:
--------------------------------------------

If you are saying you think an object should inherit methods that don't work, I'm not happy with the idea.  Saving lines of code isn't a good enough reason to do this.

Maybe you need to refactor the base class if what you are trying to do does make sense.

> DatanodeInfo refactoring
> ------------------------
>
>          Key: HADOOP-321
>          URL: http://issues.apache.org/jira/browse/HADOOP-321
>      Project: Hadoop
>         Type: Improvement

>   Components: dfs
>     Reporter: Konstantin Shvachko
>     Assignee: Konstantin Shvachko
>      Fix For: 0.5.0
>  Attachments: DatanodeInfo_refactor.patch, DatanodeInfo_refactor3.patch
>
> I'm trying to refactor some name node classes, which seem to be similar.
> So DatanodeInfo is a public api now for purely external ( to name node) use.
> The name node class that stores information about data nodes including the
> set of its blocks is called DatanodeDescriptor.
> The DatanodeReport is removed since it was a variation of DatanodeInfo.
> Previously DatanodeInfo and DatanodeDescriptor were the same class, and
> DatanodeReport was used for reporting node statistics only.
> This is a preparation step for HADOOP-306.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun 29 00:31:10 2006
Return-Path: 
 <hadoop-dev-return-2305-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 82219 invoked from network); 29 Jun 2006 00:31:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 00:31:10 -0000
Received: (qmail 83793 invoked by uid 500); 29 Jun 2006 00:31:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 83642 invoked by uid 500); 29 Jun 2006 00:31:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 83632 invoked by uid 99); 29 Jun 2006 00:31:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 17:31:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 17:31:07 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2BAB47141F4
	for <hadoop-dev@lucene.apache.org>; Thu, 29 Jun 2006 00:29:31 +0000 (GMT)
Message-ID: <12101027.1151540971175.JavaMail.jira@brutus>
Date: Thu, 29 Jun 2006 00:29:31 +0000 (GMT+00:00)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-331) map outputs should be written to a
 single output file with an index
In-Reply-To: <25178997.1151527889918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-331?page=comments#action_12418346 ] 

eric baldeschwieler commented on HADOOP-331:
--------------------------------------------

I think we should do this in an incremental fashion, so...

Each map task would continue to output its own state only.  Although centralizing this per node is an interesting idea.  I can see how this might be a real benefit in some cases.  Perhaps you should file this enhancement idea.

Ditto with the transmition to other nodes.  Interesting, but complicated idea.  Maybe you should file it.  Think that can be taken up at a later date.  Although feedback on how you would enhance this change to support such later work welcome.

A spill is dumping the buffered output to disk when we accumulate enough info.  Yes, something like a 100mB buffer seems right.  (configurable possibly)

I think the goal should be that each reduce only reads a single range.  That will keep the client code simple an will keep us from thrashing as we scale.  This may require some thought, since if you have a small number of reduce tasks, reading from multipule ranges may prove more seek efficient than doing the merge.

If we do block compression for intermediates, you would need to align those to reduce targets, but I don't think we should try to do that in the first version of this.  Especially given that this data will not be sorted the return to block compression may not be that great.  (yes, I can construct counter examples, but let's deal with this as a seperate project).  Checksums also need to be target aligned.

> map outputs should be written to a single output file with an index
> -------------------------------------------------------------------
>
>          Key: HADOOP-331
>          URL: http://issues.apache.org/jira/browse/HADOOP-331
>      Project: Hadoop
>         Type: Improvement

>   Components: mapred
>     Versions: 0.3.2
>     Reporter: eric baldeschwieler
>     Assignee: Yoram Arnon
>      Fix For: 0.5.0

>
> The current strategy of writing a file per target map is consuming a lot of unused buffer space (causing out of memory crashes) and puts a lot of burden on the FS (many opens, inodes used, etc).  
> I propose that we write a single file containing all output and also write an index file IDing which byte range in the file goes to each reduce.  This will remove the issue of buffer waste, address scaling issues with number of open files and generally set us up better for scaling.  It will also have advantages with very small inputs, since the buffer cache will reduce the number of seeks needed and the data serving node can open a single file and just keep it open rather than needing to do directory and open ops on every request.
> The only issue I see is that in cases where the task output is substantiallyu larger than its input, we may need to spill multiple times.  In this case, we can do a merge after all spills are complete (or during the final spill).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun 29 00:49:21 2006
Return-Path: 
 <hadoop-dev-return-2306-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 89626 invoked from network); 29 Jun 2006 00:49:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 00:49:21 -0000
Received: (qmail 10373 invoked by uid 500); 29 Jun 2006 00:49:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 10286 invoked by uid 500); 29 Jun 2006 00:49:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 10273 invoked by uid 99); 29 Jun 2006 00:49:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 17:49:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 17:49:07 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1D9B1410005
	for <hadoop-dev@lucene.apache.org>; Thu, 29 Jun 2006 00:47:31 +0000 (GMT)
Message-ID: <30422033.1151542051118.JavaMail.jira@brutus>
Date: Thu, 29 Jun 2006 00:47:31 +0000 (GMT+00:00)
From: "paul sutter (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-331) map outputs should be written to a
 single output file with an index
In-Reply-To: <25178997.1151527889918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-331?page=comments#action_12418354 ] 

paul sutter commented on HADOOP-331:
------------------------------------


sounds great. the simpler the better.

+1

> map outputs should be written to a single output file with an index
> -------------------------------------------------------------------
>
>          Key: HADOOP-331
>          URL: http://issues.apache.org/jira/browse/HADOOP-331
>      Project: Hadoop
>         Type: Improvement

>   Components: mapred
>     Versions: 0.3.2
>     Reporter: eric baldeschwieler
>     Assignee: Yoram Arnon
>      Fix For: 0.5.0

>
> The current strategy of writing a file per target map is consuming a lot of unused buffer space (causing out of memory crashes) and puts a lot of burden on the FS (many opens, inodes used, etc).  
> I propose that we write a single file containing all output and also write an index file IDing which byte range in the file goes to each reduce.  This will remove the issue of buffer waste, address scaling issues with number of open files and generally set us up better for scaling.  It will also have advantages with very small inputs, since the buffer cache will reduce the number of seeks needed and the data serving node can open a single file and just keep it open rather than needing to do directory and open ops on every request.
> The only issue I see is that in cases where the task output is substantiallyu larger than its input, we may need to spill multiple times.  In this case, we can do a merge after all spills are complete (or during the final spill).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun 29 01:51:12 2006
Return-Path: 
 <hadoop-dev-return-2307-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 7870 invoked from network); 29 Jun 2006 01:51:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 01:51:12 -0000
Received: (qmail 81735 invoked by uid 500); 29 Jun 2006 01:51:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 81674 invoked by uid 500); 29 Jun 2006 01:51:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 81639 invoked by uid 99); 29 Jun 2006 01:51:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 18:51:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 18:51:08 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 991B7410008
	for <hadoop-dev@lucene.apache.org>; Thu, 29 Jun 2006 01:49:31 +0000 (GMT)
Message-ID: <15481880.1151545771624.JavaMail.jira@brutus>
Date: Thu, 29 Jun 2006 01:49:31 +0000 (GMT+00:00)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-321) DatanodeInfo refactoring
In-Reply-To: <20976373.1151024969902.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-321?page=comments#action_12418366 ] 

Konstantin Shvachko commented on HADOOP-321:
--------------------------------------------

In fact DatanodeDescriptor needs everything that it inherits from DatanodeInfo
even the Writable.read() and Writable.write().
The last two are going to be used for logging and check pointing of DatanodeDescriptor-s.
What is not used in DatanodeDescriptor is the Writable factory, because descriptors are not
meant to be used in RPC communications. That is why the factory is defined for DatanodeInfo
but not for the descriptor class.
So if we go the composition way we will particularly need to implement Writable for
DatanodeDescriptor, the only purpose of which would be to call the DatanodeInfo Writable methods.
Why? With inheritance it is already there. And the same applies to all other methods.

A few words about the bug that caused this discussion.
I did not realize that RPC sends classes based on the actual object instances rather than on the type declarations.
So DatanodeDescriptor was sent even though the variable was declared as DatanodeInfo.
The receiving side then was not able to instantiate the received DatanodeDescriptor class because the factory is
not defined for it. DatanodeInfo was expected to be received.


> DatanodeInfo refactoring
> ------------------------
>
>          Key: HADOOP-321
>          URL: http://issues.apache.org/jira/browse/HADOOP-321
>      Project: Hadoop
>         Type: Improvement

>   Components: dfs
>     Reporter: Konstantin Shvachko
>     Assignee: Konstantin Shvachko
>      Fix For: 0.5.0
>  Attachments: DatanodeInfo_refactor.patch, DatanodeInfo_refactor3.patch
>
> I'm trying to refactor some name node classes, which seem to be similar.
> So DatanodeInfo is a public api now for purely external ( to name node) use.
> The name node class that stores information about data nodes including the
> set of its blocks is called DatanodeDescriptor.
> The DatanodeReport is removed since it was a variation of DatanodeInfo.
> Previously DatanodeInfo and DatanodeDescriptor were the same class, and
> DatanodeReport was used for reporting node statistics only.
> This is a preparation step for HADOOP-306.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun 29 02:40:08 2006
Return-Path: 
 <hadoop-dev-return-2308-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 13953 invoked from network); 29 Jun 2006 02:40:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 02:40:08 -0000
Received: (qmail 18047 invoked by uid 500); 29 Jun 2006 02:40:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 18008 invoked by uid 500); 29 Jun 2006 02:40:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17999 invoked by uid 99); 29 Jun 2006 02:40:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 19:40:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 19:40:07 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A77017141E0
	for <hadoop-dev@lucene.apache.org>; Thu, 29 Jun 2006 02:38:30 +0000 (GMT)
Message-ID: <15952657.1151548710683.JavaMail.jira@brutus>
Date: Thu, 29 Jun 2006 02:38:30 +0000 (GMT+00:00)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-321) DatanodeInfo refactoring
In-Reply-To: <20976373.1151024969902.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-321?page=all ]

Konstantin Shvachko updated HADOOP-321:
---------------------------------------

    Attachment: DatanodeInfo_refactor4.patch

This one is updated in synch with the last release.

> DatanodeInfo refactoring
> ------------------------
>
>          Key: HADOOP-321
>          URL: http://issues.apache.org/jira/browse/HADOOP-321
>      Project: Hadoop
>         Type: Improvement

>   Components: dfs
>     Reporter: Konstantin Shvachko
>     Assignee: Konstantin Shvachko
>      Fix For: 0.5.0
>  Attachments: DatanodeInfo_refactor.patch, DatanodeInfo_refactor3.patch, DatanodeInfo_refactor4.patch
>
> I'm trying to refactor some name node classes, which seem to be similar.
> So DatanodeInfo is a public api now for purely external ( to name node) use.
> The name node class that stores information about data nodes including the
> set of its blocks is called DatanodeDescriptor.
> The DatanodeReport is removed since it was a variation of DatanodeInfo.
> Previously DatanodeInfo and DatanodeDescriptor were the same class, and
> DatanodeReport was used for reporting node statistics only.
> This is a preparation step for HADOOP-306.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun 29 04:01:08 2006
Return-Path: 
 <hadoop-dev-return-2309-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 29997 invoked from network); 29 Jun 2006 04:01:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 04:01:08 -0000
Received: (qmail 99112 invoked by uid 500); 29 Jun 2006 04:01:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 99072 invoked by uid 500); 29 Jun 2006 04:01:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 99063 invoked by uid 99); 29 Jun 2006 04:01:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 21:01:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 21:01:07 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A26F17141F3
	for <hadoop-dev@lucene.apache.org>; Thu, 29 Jun 2006 03:59:30 +0000 (GMT)
Message-ID: <25035796.1151553570662.JavaMail.jira@brutus>
Date: Thu, 29 Jun 2006 03:59:30 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-321) DatanodeInfo refactoring
In-Reply-To: <20976373.1151024969902.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-321?page=comments#action_12418380 ] 

Owen O'Malley commented on HADOOP-321:
--------------------------------------

DatanodeDescriptor may in the future be Writable, but the current version in your patch is not. It doesn't implement readFields or write and just inherits the ones from DatanodeInfo, which will ignore the TreeMap in the DatanodeDescriptor.

In my experience, using inheritance for implementation is extremely brittle. It leads to confusing code that is easy to break. This has been born out both by this bad patch and Milind's very reasonable attempt to fix it that was incorrect because of this design idiom. Another instance when it caused trouble was having the FSNameSystem.FileUnderConstruction inherit from Vector. It was fine, until I tried to make changes to it and the code broke in strange ways. Obviously it can work, I just think create problematic code.

I think that composition is a much better idiom for doing this kind of stuff.

> DatanodeInfo refactoring
> ------------------------
>
>          Key: HADOOP-321
>          URL: http://issues.apache.org/jira/browse/HADOOP-321
>      Project: Hadoop
>         Type: Improvement

>   Components: dfs
>     Reporter: Konstantin Shvachko
>     Assignee: Konstantin Shvachko
>      Fix For: 0.5.0
>  Attachments: DatanodeInfo_refactor.patch, DatanodeInfo_refactor3.patch, DatanodeInfo_refactor4.patch
>
> I'm trying to refactor some name node classes, which seem to be similar.
> So DatanodeInfo is a public api now for purely external ( to name node) use.
> The name node class that stores information about data nodes including the
> set of its blocks is called DatanodeDescriptor.
> The DatanodeReport is removed since it was a variation of DatanodeInfo.
> Previously DatanodeInfo and DatanodeDescriptor were the same class, and
> DatanodeReport was used for reporting node statistics only.
> This is a preparation step for HADOOP-306.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun 29 04:07:29 2006
Return-Path: 
 <hadoop-dev-return-2310-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32823 invoked from network); 29 Jun 2006 04:07:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 04:07:29 -0000
Received: (qmail 5628 invoked by uid 500); 29 Jun 2006 04:07:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 5481 invoked by uid 500); 29 Jun 2006 04:07:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 5471 invoked by uid 99); 29 Jun 2006 04:07:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 21:07:28 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [202.46.19.1] (HELO arunc.bangalore.corp.yahoo.com)
 (202.46.19.1)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 21:07:27 -0700
Received: (from arunc@localhost)
	by arunc.bangalore.corp.yahoo.com (8.13.3/8.13.3) id k5T46xGh075102
	for hadoop-dev@lucene.apache.org; Thu, 29 Jun 2006 09:36:59 +0530 (IST)
	(envelope-from arunc@yahoo-inc.com)
X-Authentication-Warning: arunc.bangalore.corp.yahoo.com: arunc set sender to
 arunc@yahoo-inc.com using -f
Date: Thu, 29 Jun 2006 09:36:59 +0530
From: Arun C Murthy <arunc@yahoo-inc.com>
To: hadoop-dev@lucene.apache.org
Subject: JobConf.setOutputKeyComparatorClass
Message-ID: <20060629040659.GB73836@yahoo-inc.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.4.2.1i
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

All,

  <background>
      I have a *map* which does some processing and then a *reduce* which sorts the results. 
      TextInputFormat & TextOutputFormat are the input/output formats respectively.

      However the *sort* I want to perform is as follows:
      I want to sort output by 'comparing' 'columns' of 'key's in the Comparator and not the entire 'key'.

      E.g. spec: column1, column0 is the sort-spec.
      aaa ccc ggg
      bbb aaa hhh

      should result in:
      bbb aaa hhh
      aaa ccc ggg
  </background>

  I can't seem to find an 'elegant' way to do this via the MR framework i.e. I can't seem to be able to set a *policy* (i.e. set the sort-spec) for the WritableComparable via the framework. Is there something I'm missing? In essence I probably need a *configure* callback for the WritableComparable interface too? Is there a better way? Or is this outside the scope of the framework.

thanks!
Arun

From MAILER-DAEMON Thu Jun 29 04:34:24 2006
Return-Path: 
 <hadoop-dev-return-2311-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37307 invoked from network); 29 Jun 2006 04:34:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 04:34:24 -0000
Received: (qmail 26463 invoked by uid 500); 29 Jun 2006 04:34:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26423 invoked by uid 500); 29 Jun 2006 04:34:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26414 invoked by uid 99); 29 Jun 2006 04:34:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 21:34:23 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.126.228.149] (HELO rsmtp1.corp.yahoo.com)
 (207.126.228.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 21:34:23 -0700
Received: from [10.0.1.2] (snvvpn2-10-72-76-c189.corp.yahoo.com
 [10.72.76.189])
	(authenticated bits=0)
	by rsmtp1.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k5T4XwSA071151
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 21:33:58 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=NXbSRDVbdpQxgBenSxLEeHkdDuDypaY0pLpPqhl1hq3WGOMrZk9ctMKeOYMc2TG+
Mime-Version: 1.0 (Apple Message framework v750)
In-Reply-To: <20060629040659.GB73836@yahoo-inc.com>
References: <20060629040659.GB73836@yahoo-inc.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <87D3EA00-2B44-4B6E-8231-4FDBE772E6CD@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Eric Baldeschwieler <eric14@yahoo-inc.com>
Subject: Re: JobConf.setOutputKeyComparatorClass
Date: Wed, 28 Jun 2006 21:33:54 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.750)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

you should really send this to hadoop-users, not dev.

On Jun 28, 2006, at 9:06 PM, Arun C Murthy wrote:

> All,
>
>   <background>
>       I have a *map* which does some processing and then a *reduce*  
> which sorts the results.
>       TextInputFormat & TextOutputFormat are the input/output  
> formats respectively.
>
>       However the *sort* I want to perform is as follows:
>       I want to sort output by 'comparing' 'columns' of 'key's in  
> the Comparator and not the entire 'key'.
>
>       E.g. spec: column1, column0 is the sort-spec.
>       aaa ccc ggg
>       bbb aaa hhh
>
>       should result in:
>       bbb aaa hhh
>       aaa ccc ggg
>   </background>
>
>   I can't seem to find an 'elegant' way to do this via the MR  
> framework i.e. I can't seem to be able to set a *policy* (i.e. set  
> the sort-spec) for the WritableComparable via the framework. Is  
> there something I'm missing? In essence I probably need a  
> *configure* callback for the WritableComparable interface too? Is  
> there a better way? Or is this outside the scope of the framework.
>
> thanks!
> Arun


From MAILER-DAEMON Thu Jun 29 04:44:10 2006
Return-Path: 
 <hadoop-dev-return-2312-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 38921 invoked from network); 29 Jun 2006 04:44:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 04:44:10 -0000
Received: (qmail 36271 invoked by uid 500); 29 Jun 2006 04:44:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 36238 invoked by uid 500); 29 Jun 2006 04:44:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 36229 invoked by uid 99); 29 Jun 2006 04:44:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 21:44:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 21:44:09 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 89D627141F3
	for <hadoop-dev@lucene.apache.org>; Thu, 29 Jun 2006 04:42:32 +0000 (GMT)
Message-ID: <23462953.1151556152558.JavaMail.jira@brutus>
Date: Thu, 29 Jun 2006 04:42:32 +0000 (GMT+00:00)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-239) job tracker WI drops jobs after 24
 hours
In-Reply-To: <7996228.1148318969883.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-239?page=comments#action_12418381 ] 

eric baldeschwieler commented on HADOOP-239:
--------------------------------------------

This info should be logged, so that it is durable in the face of jobtracker restarts too

> job tracker WI drops jobs after 24 hours
> ----------------------------------------
>
>          Key: HADOOP-239
>          URL: http://issues.apache.org/jira/browse/HADOOP-239
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Reporter: Yoram Arnon
>     Priority: Minor

>
> The jobtracker's WI, keeps track of jobs executed in the past 24 hours.
> if the cluster was idle for a day (say Sunday) it drops all its history.
> Monday morning, the page is empty.
> Better would be to store a fixed number of jobs (say 10 each of succeeded and failed jobs).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun 29 04:54:08 2006
Return-Path: 
 <hadoop-dev-return-2313-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40950 invoked from network); 29 Jun 2006 04:54:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 04:54:08 -0000
Received: (qmail 42114 invoked by uid 500); 29 Jun 2006 04:54:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 41969 invoked by uid 500); 29 Jun 2006 04:54:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 41960 invoked by uid 99); 29 Jun 2006 04:54:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 21:54:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 21:54:07 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AE57C7141F3
	for <hadoop-dev@lucene.apache.org>; Thu, 29 Jun 2006 04:52:30 +0000 (GMT)
Message-ID: <3565945.1151556750710.JavaMail.jira@brutus>
Date: Thu, 29 Jun 2006 04:52:30 +0000 (GMT+00:00)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-324) "IOException: No space left on
 device" is handled incorrectly
In-Reply-To: <18409093.1151369969863.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-324?page=comments#action_12418384 ] 

eric baldeschwieler commented on HADOOP-324:
--------------------------------------------

Perhaps the datanode should behave as if any assigned incomplete (IE write locked) block is expect to become full size and only allow new blocks if it has enough space considering all currently locked blocks?

As part of its heart beat it and block creation ack it could report if it is ready to take another block.

We should be able to configure an amount of working space to be left on each device with a home directory too...  Is this currently handled?

> "IOException: No space left on device" is handled incorrectly
> -------------------------------------------------------------
>
>          Key: HADOOP-324
>          URL: http://issues.apache.org/jira/browse/HADOOP-324
>      Project: Hadoop
>         Type: Bug

>     Versions: 0.3.2
>     Reporter: Konstantin Shvachko

>
> When a data node disk is almost full the name node still assigns blocks to the data node.
> By the time the data node actually tries to write that data to disk the disk may become full.
> Current implementation forces the data node to shutdown after that.
> The expected behavior is to report the block write failure and continue.
> The Exception looks as follows:
> java.io.IOException: No space left on device
> at java.io.FileOutputStream.writeBytes(Native Method)
> at java.io.FileOutputStream.write(FileOutputStream.java:260)
> at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
> at java.io.BufferedOutputStream.write(BufferedOutputStream.java:109)
> at java.io.DataOutputStream.write(DataOutputStream.java:90)
> at org.apache.hadoop.dfs.DataNode$DataXceiver.writeBlock(DataNode.java:623)
> at org.apache.hadoop.dfs.DataNode$DataXceiver.run(DataNode.java:410)
> at java.lang.Thread.run(Thread.java:595)
> 2006-06-26 08:26:04,751 INFO org.apache.hadoop.dfs.DataNode: Finishing DataNode in: /tmp/hadoop/dfs/data/data

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun 29 05:01:11 2006
Return-Path: 
 <hadoop-dev-return-2314-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 42374 invoked from network); 29 Jun 2006 05:01:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 05:01:11 -0000
Received: (qmail 49364 invoked by uid 500); 29 Jun 2006 05:01:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49327 invoked by uid 500); 29 Jun 2006 05:01:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49318 invoked by uid 99); 29 Jun 2006 05:01:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 22:01:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 22:01:09 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B102C410005
	for <hadoop-dev@lucene.apache.org>; Thu, 29 Jun 2006 04:59:32 +0000 (GMT)
Message-ID: <7061214.1151557172722.JavaMail.jira@brutus>
Date: Thu, 29 Jun 2006 04:59:32 +0000 (GMT+00:00)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-252) add versioning to RPC
In-Reply-To: <23799650.1148510309896.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-252?page=comments#action_12418385 ] 

eric baldeschwieler commented on HADOOP-252:
--------------------------------------------

Associating this with a connection seems like a violation of abstraction to me.  Sending this info with every request is probably more appropriate.  Or for stateful protocols, you can do it in the setup phase.

> add versioning to RPC
> ---------------------
>
>          Key: HADOOP-252
>          URL: http://issues.apache.org/jira/browse/HADOOP-252
>      Project: Hadoop
>         Type: Improvement

>   Components: ipc
>     Versions: 0.3.0
>     Reporter: Yoram Arnon
>      Fix For: 0.5.0

>
> currently, any change to any rpc message breaks the protocol, with mysterious exceptions occurring at run time.
> a versioning sceme would have two benefits:
> - intelligent error messages, indicating that an upgrade is required
> - backwards compatibility could be supported.
> the proposal is to add a "const version" for each protocol, and a method: int getVersion(int version) that sends the client's version and receives the server's version. This would be the first method invoked on connection. Both sides then either agree on the lowest version number, providing backwards compatibility support, or abort the connection as "unsupported version".

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun 29 05:32:08 2006
Return-Path: 
 <hadoop-dev-return-2315-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46400 invoked from network); 29 Jun 2006 05:32:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 05:32:08 -0000
Received: (qmail 74529 invoked by uid 500); 29 Jun 2006 05:32:07 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 74492 invoked by uid 500); 29 Jun 2006 05:32:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 74479 invoked by uid 99); 29 Jun 2006 05:32:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 22:32:07 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.145.54.171] (HELO mrout1.yahoo.com) (216.145.54.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 22:32:06 -0700
Received: from [10.0.0.11] (snvvpn-10-72-66-c10.corp.yahoo.com [10.72.66.10])
	by mrout1.yahoo.com (8.13.6/8.13.6/y.out) with ESMTP id k5T5VO38054781
	for <hadoop-dev@lucene.apache.org>; Wed, 28 Jun 2006 22:31:25 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=lSDIk7EjtEw/fxVl8BzdAqSgKIf0qgDeRleyNE74pngI2umStg1As5TILXO0Q19s
Mime-Version: 1.0 (Apple Message framework v624)
In-Reply-To: <20060629040659.GB73836@yahoo-inc.com>
References: <20060629040659.GB73836@yahoo-inc.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <d67097aa82f9c7814513557df7a2c83a@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: "Owen O'Malley" <owen@yahoo-inc.com>
Subject: Re: JobConf.setOutputKeyComparatorClass
Date: Wed, 28 Jun 2006 22:31:28 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.624)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 28, 2006, at 9:06 PM, Arun C Murthy wrote:

> All,
>
>   <background>
>       I have a *map* which does some processing and then a *reduce* 
> which sorts the results.
>       TextInputFormat & TextOutputFormat are the input/output formats 
> respectively.
>
>       However the *sort* I want to perform is as follows:
>       I want to sort output by 'comparing' 'columns' of 'key's in the 
> Comparator and not the entire 'key'.
>
>       E.g. spec: column1, column0 is the sort-spec.
>       aaa ccc ggg
>       bbb aaa hhh
>
>       should result in:
>       bbb aaa hhh
>       aaa ccc ggg
>   </background>
>
>   I can't seem to find an 'elegant' way to do this via the MR 
> framework i.e. I can't seem to be able to set a *policy* (i.e. set the 
> sort-spec) for the WritableComparable via the framework. Is there 
> something I'm missing? In essence I probably need a *configure* 
> callback for the WritableComparable interface too? Is there a better 
> way? Or is this outside the scope of the framework.

There is a way to do it, but it isn't surprising that you missed it. 
When JobConf creates a new instance of objects, if they are 
Configurable, they get sent the Configuration. So, if you make a 
ConfigurableComparator that extends WritableComparator and implements 
Configurable, it will get its setConf method called with the job's 
JobConf. Now do something like:

JobConf conf = new JobConf();
conf.set("my.sort.order", "1,0,2");
conf.setOutputKeyComparatorClass(ConfigurableComparator.class);

you should get the information where it needs to go.

-- Owen


From MAILER-DAEMON Thu Jun 29 05:35:08 2006
Return-Path: 
 <hadoop-dev-return-2316-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 47106 invoked from network); 29 Jun 2006 05:35:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 05:35:08 -0000
Received: (qmail 75687 invoked by uid 500); 29 Jun 2006 05:35:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75664 invoked by uid 500); 29 Jun 2006 05:35:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75645 invoked by uid 99); 29 Jun 2006 05:35:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 22:35:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 22:35:07 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A72A37141E0
	for <hadoop-dev@lucene.apache.org>; Thu, 29 Jun 2006 05:33:30 +0000 (GMT)
Message-ID: <29843650.1151559210680.JavaMail.jira@brutus>
Date: Thu, 29 Jun 2006 05:33:30 +0000 (GMT+00:00)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-324) "IOException: No space left on
 device" is handled incorrectly
In-Reply-To: <18409093.1151369969863.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-324?page=comments#action_12418388 ] 

Konstantin Shvachko commented on HADOOP-324:
--------------------------------------------

The amount of working space to be left on each device is addressed by HADOOP-296
I think that if the disk is full we should just try again. In my experience it was the taskTracker
who filled the disk to the capacity. There night be other programs that write temporary data
into disk and then remove it.
The data node should not shutdown itself anyway, it might be useful for something anyways.

> "IOException: No space left on device" is handled incorrectly
> -------------------------------------------------------------
>
>          Key: HADOOP-324
>          URL: http://issues.apache.org/jira/browse/HADOOP-324
>      Project: Hadoop
>         Type: Bug

>     Versions: 0.3.2
>     Reporter: Konstantin Shvachko

>
> When a data node disk is almost full the name node still assigns blocks to the data node.
> By the time the data node actually tries to write that data to disk the disk may become full.
> Current implementation forces the data node to shutdown after that.
> The expected behavior is to report the block write failure and continue.
> The Exception looks as follows:
> java.io.IOException: No space left on device
> at java.io.FileOutputStream.writeBytes(Native Method)
> at java.io.FileOutputStream.write(FileOutputStream.java:260)
> at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
> at java.io.BufferedOutputStream.write(BufferedOutputStream.java:109)
> at java.io.DataOutputStream.write(DataOutputStream.java:90)
> at org.apache.hadoop.dfs.DataNode$DataXceiver.writeBlock(DataNode.java:623)
> at org.apache.hadoop.dfs.DataNode$DataXceiver.run(DataNode.java:410)
> at java.lang.Thread.run(Thread.java:595)
> 2006-06-26 08:26:04,751 INFO org.apache.hadoop.dfs.DataNode: Finishing DataNode in: /tmp/hadoop/dfs/data/data

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun 29 05:55:12 2006
Return-Path: 
 <hadoop-dev-return-2317-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52717 invoked from network); 29 Jun 2006 05:55:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 05:55:12 -0000
Received: (qmail 90716 invoked by uid 500); 29 Jun 2006 05:55:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 90672 invoked by uid 500); 29 Jun 2006 05:55:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 90653 invoked by uid 99); 29 Jun 2006 05:55:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 22:55:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 22:55:07 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B922A7141E0
	for <hadoop-dev@lucene.apache.org>; Thu, 29 Jun 2006 05:53:30 +0000 (GMT)
Message-ID: <31545503.1151560410755.JavaMail.jira@brutus>
Date: Thu, 29 Jun 2006 05:53:30 +0000 (GMT+00:00)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-321) DatanodeInfo refactoring
In-Reply-To: <20976373.1151024969902.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-321?page=comments#action_12418390 ] 

Konstantin Shvachko commented on HADOOP-321:
--------------------------------------------

If class A is supposed to work with each and every method of class B is it the reason to derive A from B or not?

> DatanodeInfo refactoring
> ------------------------
>
>          Key: HADOOP-321
>          URL: http://issues.apache.org/jira/browse/HADOOP-321
>      Project: Hadoop
>         Type: Improvement

>   Components: dfs
>     Reporter: Konstantin Shvachko
>     Assignee: Konstantin Shvachko
>      Fix For: 0.5.0
>  Attachments: DatanodeInfo_refactor.patch, DatanodeInfo_refactor3.patch, DatanodeInfo_refactor4.patch
>
> I'm trying to refactor some name node classes, which seem to be similar.
> So DatanodeInfo is a public api now for purely external ( to name node) use.
> The name node class that stores information about data nodes including the
> set of its blocks is called DatanodeDescriptor.
> The DatanodeReport is removed since it was a variation of DatanodeInfo.
> Previously DatanodeInfo and DatanodeDescriptor were the same class, and
> DatanodeReport was used for reporting node statistics only.
> This is a preparation step for HADOOP-306.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun 29 06:22:08 2006
Return-Path: 
 <hadoop-dev-return-2318-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57963 invoked from network); 29 Jun 2006 06:22:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 06:22:08 -0000
Received: (qmail 20925 invoked by uid 500); 29 Jun 2006 06:22:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 20901 invoked by uid 500); 29 Jun 2006 06:22:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 20889 invoked by uid 99); 29 Jun 2006 06:22:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 23:22:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 23:22:07 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A1379410005
	for <hadoop-dev@lucene.apache.org>; Thu, 29 Jun 2006 06:20:30 +0000 (GMT)
Message-ID: <9000383.1151562030657.JavaMail.jira@brutus>
Date: Thu, 29 Jun 2006 06:20:30 +0000 (GMT+00:00)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-252) add versioning to RPC
In-Reply-To: <23799650.1148510309896.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-252?page=comments#action_12418394 ] 

Yoram Arnon commented on HADOOP-252:
------------------------------------

having a handshake when setting up a connection is fairly standard.
Both sides may either agree on the lowest common denominator, and send messages in a previously supported format, or decide to throw. It's better than a version in each message for two reasons:
1(minor) a few bytes less per message
2(major) allows a new component to avoid sending new messages to an old component, that doesn't support it.

> add versioning to RPC
> ---------------------
>
>          Key: HADOOP-252
>          URL: http://issues.apache.org/jira/browse/HADOOP-252
>      Project: Hadoop
>         Type: Improvement

>   Components: ipc
>     Versions: 0.3.0
>     Reporter: Yoram Arnon
>      Fix For: 0.5.0

>
> currently, any change to any rpc message breaks the protocol, with mysterious exceptions occurring at run time.
> a versioning sceme would have two benefits:
> - intelligent error messages, indicating that an upgrade is required
> - backwards compatibility could be supported.
> the proposal is to add a "const version" for each protocol, and a method: int getVersion(int version) that sends the client's version and receives the server's version. This would be the first method invoked on connection. Both sides then either agree on the lowest version number, providing backwards compatibility support, or abort the connection as "unsupported version".

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun 29 06:30:08 2006
Return-Path: 
 <hadoop-dev-return-2319-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 59893 invoked from network); 29 Jun 2006 06:30:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 06:30:08 -0000
Received: (qmail 26919 invoked by uid 500); 29 Jun 2006 06:30:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26766 invoked by uid 500); 29 Jun 2006 06:30:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26752 invoked by uid 99); 29 Jun 2006 06:30:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 23:30:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 23:30:06 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DC3377141F4
	for <hadoop-dev@lucene.apache.org>; Thu, 29 Jun 2006 06:28:29 +0000 (GMT)
Message-ID: <10603792.1151562509899.JavaMail.jira@brutus>
Date: Thu, 29 Jun 2006 06:28:29 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-332) Implement remote replication of dfs
 namespace images and transaction logs
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Implement remote replication of dfs namespace images and transaction logs
-------------------------------------------------------------------------

         Key: HADOOP-332
         URL: http://issues.apache.org/jira/browse/HADOOP-332
     Project: Hadoop
        Type: Improvement

  Components: dfs  
    Versions: 0.4.0    
    Reporter: Owen O'Malley
 Assigned to: Owen O'Malley 
     Fix For: 0.5.0


The namespace information (image and transaction logs) needs to be replicated on hosts other than the namenode to prevent data loss if a namenode crashes. In the short term we will add a new protocol to the datanodes to receive and store the namespace information.

In the long term, it would be nice to have read-only namenodes that could receive the information and serve it up for users that want to read data, but do not need to write to the namespace.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun 29 12:47:09 2006
Return-Path: 
 <hadoop-dev-return-2320-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 3083 invoked from network); 29 Jun 2006 12:47:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 12:47:09 -0000
Received: (qmail 95575 invoked by uid 500); 29 Jun 2006 12:47:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95544 invoked by uid 500); 29 Jun 2006 12:47:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95535 invoked by uid 99); 29 Jun 2006 12:47:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 05:47:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 05:47:07 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A4FC3410006
	for <hadoop-dev@lucene.apache.org>; Thu, 29 Jun 2006 12:45:30 +0000 (GMT)
Message-ID: <9639401.1151585130673.JavaMail.jira@brutus>
Date: Thu, 29 Jun 2006 12:45:30 +0000 (GMT+00:00)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-307) Many small jobs benchmark for
 MapReduce
In-Reply-To: <13009062.1150636529837.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-307?page=comments#action_12418458 ] 

Sanjay Dahiya commented on HADOOP-307:
--------------------------------------

Configuration options are - 
    input ( local file ), 
    output - DFS Path, 
    times ( no of times to execute the job ) 
    jarFile ( Mapper & Reducer )
    wordDir ( temp output from intermediate tasks) 
    maps ( num Maps)
    reduces ( num Reduces) 
    
I am not yet validating the bytes but I will add that. Also number of map and reduce tasks can be configured, its passed to JobConf . The benchmark sets up multiple MapReduce tasks in sequence and output of each job is passed as input to next execution of same job). Its using a TextInputFormat by default and thats not configurable yet.

I was sick and out so delay in response. I am yet to run on a cluster, by tomorrow I should post the results. 

> Many small jobs benchmark for MapReduce
> ---------------------------------------
>
>          Key: HADOOP-307
>          URL: http://issues.apache.org/jira/browse/HADOOP-307
>      Project: Hadoop
>         Type: Task

>   Components: mapred
>     Reporter: Sanjay Dahiya
>     Priority: Minor

>
> A benchmark that runs many small MapReduce tasks in sequence. A single map reduce implementation is used, it is invoked multiple times with input as the output from previous run. The input to first Map is a TextInputFormat ( a text file with few hundred KBs). Input records are passed to output without much processing. The idea is to benchmark the time taken by initialization of Mapper and Reducer. An initial prototyping on a single machine with 20 MR tasks in sequence took ~47 seconds per task. Looking for suggestions on what else can be included in the benchmark. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun 29 17:23:14 2006
Return-Path: 
 <hadoop-dev-return-2321-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 6189 invoked from network); 29 Jun 2006 17:23:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 17:23:14 -0000
Received: (qmail 66839 invoked by uid 500); 29 Jun 2006 17:23:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66494 invoked by uid 500); 29 Jun 2006 17:23:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66464 invoked by uid 99); 29 Jun 2006 17:23:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 10:23:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 10:23:10 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D814F410336
	for <hadoop-dev@lucene.apache.org>; Thu, 29 Jun 2006 17:21:32 +0000 (GMT)
Message-ID: <22178088.1151601692882.JavaMail.jira@brutus>
Date: Thu, 29 Jun 2006 17:21:32 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-333) we should have some checks that the
 sort benchmark generates correct outputs
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

we should have some checks that the sort benchmark generates correct outputs
----------------------------------------------------------------------------

         Key: HADOOP-333
         URL: http://issues.apache.org/jira/browse/HADOOP-333
     Project: Hadoop
        Type: Improvement

    Reporter: Owen O'Malley


We should implement some checks of the input versus output of the sort benchmark to get some correctness guarantees:

1. the number of records
2. the number of bytes
3. the output records are in fact sorted
4. the xor of the md5 of each record's key/value pair

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun 29 17:25:22 2006
Return-Path: 
 <hadoop-dev-return-2322-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 7332 invoked from network); 29 Jun 2006 17:25:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 17:25:22 -0000
Received: (qmail 74353 invoked by uid 500); 29 Jun 2006 17:25:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 74250 invoked by uid 500); 29 Jun 2006 17:25:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 74203 invoked by uid 99); 29 Jun 2006 17:25:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 10:25:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 10:25:08 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0A023410123
	for <hadoop-dev@lucene.apache.org>; Thu, 29 Jun 2006 17:23:31 +0000 (GMT)
Message-ID: <13577077.1151601811037.JavaMail.jira@brutus>
Date: Thu, 29 Jun 2006 17:23:31 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-333) we should have some checks that the
 sort benchmark generates correct outputs
In-Reply-To: <22178088.1151601692882.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-333?page=all ]

Owen O'Malley reassigned HADOOP-333:
------------------------------------

    Assign To: Owen O'Malley

> we should have some checks that the sort benchmark generates correct outputs
> ----------------------------------------------------------------------------
>
>          Key: HADOOP-333
>          URL: http://issues.apache.org/jira/browse/HADOOP-333
>      Project: Hadoop
>         Type: Improvement

>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley

>
> We should implement some checks of the input versus output of the sort benchmark to get some correctness guarantees:
> 1. the number of records
> 2. the number of bytes
> 3. the output records are in fact sorted
> 4. the xor of the md5 of each record's key/value pair

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun 29 17:29:11 2006
Return-Path: 
 <hadoop-dev-return-2323-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9189 invoked from network); 29 Jun 2006 17:29:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 17:29:11 -0000
Received: (qmail 83286 invoked by uid 500); 29 Jun 2006 17:29:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 83260 invoked by uid 500); 29 Jun 2006 17:29:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 83251 invoked by uid 99); 29 Jun 2006 17:29:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 10:29:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 10:29:10 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CEB9D410123
	for <hadoop-dev@lucene.apache.org>; Thu, 29 Jun 2006 17:27:29 +0000 (GMT)
Message-ID: <27865237.1151602049843.JavaMail.jira@brutus>
Date: Thu, 29 Jun 2006 17:27:29 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-334) Redesign the dfs namespace
 datastructures to be copy on write
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Redesign the dfs namespace datastructures to be copy on write
-------------------------------------------------------------

         Key: HADOOP-334
         URL: http://issues.apache.org/jira/browse/HADOOP-334
     Project: Hadoop
        Type: Improvement

  Components: dfs  
    Versions: 0.4.0    
    Reporter: Owen O'Malley
 Assigned to: Owen O'Malley 


The namespace datastructures should be copy on write so that the namespace does not need to be completely locked down from user changes while the checkpoint is being made.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun 29 17:32:09 2006
Return-Path: 
 <hadoop-dev-return-2324-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9985 invoked from network); 29 Jun 2006 17:32:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 17:32:09 -0000
Received: (qmail 92464 invoked by uid 500); 29 Jun 2006 17:32:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 92437 invoked by uid 500); 29 Jun 2006 17:32:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 92425 invoked by uid 99); 29 Jun 2006 17:32:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 10:32:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 10:32:07 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CC827410123
	for <hadoop-dev@lucene.apache.org>; Thu, 29 Jun 2006 17:30:29 +0000 (GMT)
Message-ID: <14300759.1151602229834.JavaMail.jira@brutus>
Date: Thu, 29 Jun 2006 17:30:29 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-335) factor out the namespace
 image/transaction log writing
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

factor out the namespace image/transaction log writing
------------------------------------------------------

         Key: HADOOP-335
         URL: http://issues.apache.org/jira/browse/HADOOP-335
     Project: Hadoop
        Type: Improvement

    Reporter: Owen O'Malley


Factor the checkpoint/transaction log handling code out of FSNameSystem into its own class.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun 29 17:35:05 2006
Return-Path: 
 <hadoop-dev-return-2325-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 11104 invoked from network); 29 Jun 2006 17:35:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 17:35:05 -0000
Received: (qmail 99212 invoked by uid 500); 29 Jun 2006 17:34:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 99179 invoked by uid 500); 29 Jun 2006 17:34:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 99155 invoked by uid 99); 29 Jun 2006 17:34:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 10:34:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 10:34:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1CF604101BC
	for <hadoop-dev@lucene.apache.org>; Thu, 29 Jun 2006 17:32:31 +0000 (GMT)
Message-ID: <23863911.1151602351115.JavaMail.jira@brutus>
Date: Thu, 29 Jun 2006 17:32:31 +0000 (GMT+00:00)
From: "paul sutter (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-331) map outputs should be written to a
 single output file with an index
In-Reply-To: <25178997.1151527889918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-331?page=comments#action_12418501 ] 

paul sutter commented on HADOOP-331:
------------------------------------


one more suggestion (plea): could the map-output-spill-extraction take place on the mapper side (perhaps in the http server), such that the reducer be able to retreive fully-formed map outputs as currently?

incidently, we have individual map inputs that are 5-10GB in size, which are compressed so they cant be split, which would yield potentially 50-100 spills per mapper. it would be nice if the reducer (or whatever process is fetching the files) didnt have to do that reassembly, but rather that it happened on the mapper side.

> map outputs should be written to a single output file with an index
> -------------------------------------------------------------------
>
>          Key: HADOOP-331
>          URL: http://issues.apache.org/jira/browse/HADOOP-331
>      Project: Hadoop
>         Type: Improvement

>   Components: mapred
>     Versions: 0.3.2
>     Reporter: eric baldeschwieler
>     Assignee: Yoram Arnon
>      Fix For: 0.5.0

>
> The current strategy of writing a file per target map is consuming a lot of unused buffer space (causing out of memory crashes) and puts a lot of burden on the FS (many opens, inodes used, etc).  
> I propose that we write a single file containing all output and also write an index file IDing which byte range in the file goes to each reduce.  This will remove the issue of buffer waste, address scaling issues with number of open files and generally set us up better for scaling.  It will also have advantages with very small inputs, since the buffer cache will reduce the number of seeks needed and the data serving node can open a single file and just keep it open rather than needing to do directory and open ops on every request.
> The only issue I see is that in cases where the task output is substantiallyu larger than its input, we may need to spill multiple times.  In this case, we can do a merge after all spills are complete (or during the final spill).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun 29 18:09:09 2006
Return-Path: 
 <hadoop-dev-return-2326-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20021 invoked from network); 29 Jun 2006 18:09:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 18:09:09 -0000
Received: (qmail 84570 invoked by uid 500); 29 Jun 2006 18:09:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 84545 invoked by uid 500); 29 Jun 2006 18:09:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 84536 invoked by uid 99); 29 Jun 2006 18:09:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 11:09:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 11:09:08 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9E80C410005
	for <hadoop-dev@lucene.apache.org>; Thu, 29 Jun 2006 18:07:30 +0000 (GMT)
Message-ID: <18146024.1151604450646.JavaMail.jira@brutus>
Date: Thu, 29 Jun 2006 18:07:30 +0000 (GMT+00:00)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-312) Connections should not be cached
In-Reply-To: <13061881.1150916131961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-312?page=comments#action_12418508 ] 

Devaraj Das commented on HADOOP-312:
------------------------------------

The way I have designed this is to have the connection caching configurable. Given any IPC server (like the namenode or jobtracker) the caching can range from fully cached (which is the current behavior) to number of transactions per created connection. The configuration related to caching can be set in the client's hadoop config file like:
<property>
  <name>ipc.connection.notcached.address</name>
  <value>server1:port=num_transactions, server2:port=num_transactions</value>
  <description>Defines the connections that should not be cached.
  </description>
</property>
The above means that clients close the connections to server1:port after it has done num_transactions (a transaction is defined as one request-response). Any number of such servers can be specified by a comma-separated list. Connections to servers not explicitly mentioned in the config is cached (though the server will disconnect clients that have not communicated with it for a specified period of time).
Doing this will limit the number of connections cached significantly. For example, one can always specify in the config that connections to the namenode should not be cached at all (num_transactions = 1) and so on.
The patch is ready but I can probably incorporate any inputs you may have before I submit that.

> Connections should not be cached
> --------------------------------
>
>          Key: HADOOP-312
>          URL: http://issues.apache.org/jira/browse/HADOOP-312
>      Project: Hadoop
>         Type: Improvement

>   Components: ipc
>     Versions: 0.4.0
>     Reporter: Devaraj Das

>
> Servers and clients (client include datanodes, tasktrackers, DFSClients & tasks) should not cache connections or maybe cache them for very short periods of time. Clients should set up & tear down connections to the servers everytime they need to contact the servers (including the heartbeats). If connection is cached, then reuse the existing connection for a few subsequent transactions until the connection expires. The heartbeat interval should be more so that many more clients (order of  tens of thousands) can be accomodated within 1 heartbeat interval.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jun 29 22:37:10 2006
Return-Path: 
 <hadoop-dev-return-2327-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92173 invoked from network); 29 Jun 2006 22:37:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 22:37:10 -0000
Received: (qmail 78634 invoked by uid 500); 29 Jun 2006 22:37:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 78476 invoked by uid 500); 29 Jun 2006 22:37:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 78466 invoked by uid 99); 29 Jun 2006 22:37:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 15:37:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 15:37:08 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A3116410006
	for <hadoop-dev@lucene.apache.org>; Thu, 29 Jun 2006 22:35:30 +0000 (GMT)
Message-ID: <32136724.1151620530665.JavaMail.jira@brutus>
Date: Thu, 29 Jun 2006 22:35:30 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-284) dfs timeout on open
In-Reply-To: <11449145.1149658709890.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-284?page=3Dall ]
    =20
Owen O'Malley resolved HADOOP-284:
----------------------------------

    Fix Version: 0.3.2
                     (was: 0.5.0)
     Resolution: Fixed
      Assign To: Owen O'Malley

This was fixed already.

> dfs timeout on open
> -------------------
>
>          Key: HADOOP-284
>          URL: http://issues.apache.org/jira/browse/HADOOP-284
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.3.1
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.3.2

>
> In my sort benchmark, I've started seeing hundred's of maps dying with ti=
meout exceptions in the dfs.open() code:
> java.net.SocketTimeoutException: timed out waiting for rpc response at or=
g.apache.hadoop.ipc.Client.call(Client.java:305) at org.apache.hadoop.ipc.R=
PC$Invoker.invoke(RPC.java:153) at org.apache.hadoop.dfs.$Proxy1.open(Unkno=
wn Source) at org.apache.hadoop.dfs.DFSClient$DFSInputStream.openInfo(DFSCl=
ient.java:457) at org.apache.hadoop.dfs.DFSClient$DFSInputStream.(DFSClient=
.java:444) at org.apache.hadoop.dfs.DFSClient.open(DFSClient.java:207) at o=
rg.apache.hadoop.dfs.DistributedFileSystem.openRaw(DistributedFileSystem.ja=
va:90) at org.apache.hadoop.fs.FSDataInputStream$Checker.(FSDataInputStream=
.java:46) at org.apache.hadoop.fs.FSDataInputStream.(FSDataInputStream.java=
:228) at org.apache.hadoop.fs.FileSystem.open(FileSystem.java:157) at org.a=
pache.hadoop.fs.FileUtil.copy(FileUtil.java:72) at org.apache.hadoop.dfs.Di=
stributedFileSystem.copyToLocalFile(DistributedFileSystem.java:182) at org.=
apache.hadoop.mapred.TaskTracker$TaskInProgress.localizeTask(TaskTracker.ja=
va:535) at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.launchTask(T=
askTracker.java:584) at org.apache.hadoop.mapred.TaskTracker.startNewTask(T=
askTracker.java:395) at org.apache.hadoop.mapred.TaskTracker.offerService(T=
askTracker.java:308) at org.apache.hadoop.mapred.TaskTracker.run(TaskTracke=
r.java:424) at org.apache.hadoop.mapred.TaskTracker.main(TaskTracker.java:9=
61)

--=20
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun 30 15:35:11 2006
Return-Path: 
 <hadoop-dev-return-2328-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 69777 invoked from network); 30 Jun 2006 15:35:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 15:35:11 -0000
Received: (qmail 13379 invoked by uid 500); 30 Jun 2006 15:35:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13353 invoked by uid 500); 30 Jun 2006 15:35:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13344 invoked by uid 99); 30 Jun 2006 15:35:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 08:35:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 08:35:09 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9A5B8410340
	for <hadoop-dev@lucene.apache.org>; Fri, 30 Jun 2006 15:33:30 +0000 (GMT)
Message-ID: <28656095.1151681610629.JavaMail.jira@brutus>
Date: Fri, 30 Jun 2006 15:33:30 +0000 (GMT+00:00)
From: "Johan Oskarson (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-76) Implement speculative re-execution of
 reduces
In-Reply-To: <1176204687.1142031469402.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-76?page=all ]

Johan Oskarson updated HADOOP-76:
---------------------------------

    Attachment: spec_reducev.patch

I've tried to implement speculative reduces and it seems to be working, however I'd like you to take a look at it since I'm not familiar with some of the inner workings of hadoop.

As suggested it writes output to a temporary name and the first one to finish moves it to the correct output name.
The patch adds a String tmpName to getRecordWriter in OutputFormatBase
and a close method. Basically the OutputFormatBase keeps track of the tmpName and the final name
once close is called it moves the tmp to the final.

This means the current output formats doesn't have to be changed.

This patch would ideally be complemented by a better tasktracker selection, I've seen instances where there's two final reduce tips and then a speculative reduce is assigned to the same node that is already running the other task.

A speculative reduce will be started if finishedReduces / numReduceTasks >= 0.7

That's about it, looking forward to hear your input

> Implement speculative re-execution of reduces
> ---------------------------------------------
>
>          Key: HADOOP-76
>          URL: http://issues.apache.org/jira/browse/HADOOP-76
>      Project: Hadoop
>         Type: Improvement

>   Components: mapred
>     Versions: 0.1.0
>     Reporter: Doug Cutting
>     Assignee: Owen O'Malley
>     Priority: Minor
>      Fix For: 0.5.0
>  Attachments: spec_reducev.patch
>
> As a first step, reduce task outputs should go to temporary files which are renamed when the task completes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun 30 16:37:14 2006
Return-Path: 
 <hadoop-dev-return-2329-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 83491 invoked from network); 30 Jun 2006 16:37:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 16:37:14 -0000
Received: (qmail 88452 invoked by uid 500); 30 Jun 2006 16:37:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 88414 invoked by uid 500); 30 Jun 2006 16:37:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88405 invoked by uid 99); 30 Jun 2006 16:37:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 09:37:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 09:37:12 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A08DE410343
	for <hadoop-dev@lucene.apache.org>; Fri, 30 Jun 2006 16:35:30 +0000 (GMT)
Message-ID: <9486227.1151685330654.JavaMail.jira@brutus>
Date: Fri, 30 Jun 2006 16:35:30 +0000 (GMT+00:00)
From: "paul sutter (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-27) MapRed tries to allocate tasks to
 nodes that have no available disk space
In-Reply-To: <1424617142.1139335680270.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-27?page=comments#action_12418673 ] 

paul sutter commented on HADOOP-27:
-----------------------------------


One impact of this fix is that an invalid directory name in the temp files list will now prevent a node from running, whereas before that was tolerated.

We have a couple of nodes in our cluster with 3 drives instead of 4 (they each have a dead drive), and previously we were able to run just fine with one config file on all nodes. 





> MapRed tries to allocate tasks to nodes that have no available disk space
> -------------------------------------------------------------------------
>
>          Key: HADOOP-27
>          URL: http://issues.apache.org/jira/browse/HADOOP-27
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Reporter: Mike Cafarella
>      Fix For: 0.4.0
>  Attachments: minspace_mapredtask.patch, minspace_mapredtaskv3.patch
>
>   What it says above.  MapRed TaskTrackers should not offer task service if the local disk
> space is too constrained.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun 30 17:19:11 2006
Return-Path: 
 <hadoop-dev-return-2330-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91142 invoked from network); 30 Jun 2006 17:19:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 17:19:11 -0000
Received: (qmail 36761 invoked by uid 500); 30 Jun 2006 17:19:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 36736 invoked by uid 500); 30 Jun 2006 17:19:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 36727 invoked by uid 99); 30 Jun 2006 17:19:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 10:19:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 10:19:10 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 15653410346
	for <hadoop-dev@lucene.apache.org>; Fri, 30 Jun 2006 17:17:31 +0000 (GMT)
Message-ID: <2847633.1151687851084.JavaMail.jira@brutus>
Date: Fri, 30 Jun 2006 17:17:31 +0000 (GMT+00:00)
From: "Barry Kaplan (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-211) logging improvements for Hadoop
In-Reply-To: <11693488.1147389488398.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-211?page=comments#action_12418684 ] 

Barry Kaplan commented on HADOOP-211:
-------------------------------------

According to the tomcat 5.5 docs, XML configuration files don't allow you to use naming convention for logs within tomcat. As someone who uses tomcat and hadoop I would prefer not using the xml log. 

You can (and should) be more picky about which packages to include in the logging. Tomcat 5.5 uses defines loggers by Engine and Host names. For example, for a default Catalina localhost log, add this to the end of the log4j.properties above. Note that there are known issues with using this naming convention (with square brackets) in log4j XML based configuration files, so we recommend you use a properties file as described until a future version of log4j allows this convention.



> logging improvements for Hadoop
> -------------------------------
>
>          Key: HADOOP-211
>          URL: http://issues.apache.org/jira/browse/HADOOP-211
>      Project: Hadoop
>         Type: Improvement

>     Versions: 0.2.0
>     Reporter: Sameer Paranjpye
>     Assignee: Sameer Paranjpye
>     Priority: Minor
>      Fix For: 0.3.0
>  Attachments: acl-log4j-II.patch.tgz, acl-log4j-webapps.patch, acl-log4j.patch, commons_logging_patch
>
> Here's a proposal for some impovements to the way Hadoop does logging. It advocates 3 
> broad changes to the way logging is currently done, these being:
> - The use of a uniform logging format by all Hadoop subsystems
> - The use of Apache commons logging as a facade above an underlying logging framework
> - The use of Log4J as the underlying logging framework instead of java.util.logging
> This is largely polishing work, but it seems like it would make log analysis and debugging
> easier in the short term. In the long term, it would future proof logging to the extent of
> allowing the logging framework used to change while requiring minimal code change. The 
> propos changes are motivated by the following requirements which we think Hadoops 
> logging should meet:
> - Hadoops logs should be amenable to analysis by tools like grep, sed, awk etc.
> - Log entries should be clearly annotated with a timestamp and a logging level
> - Log entries should be traceable to the subsystem from which they originated
> - The logging implementation should allow log entries to be annotated with source code 
> location information like classname, methodname, file and line number, without requiring
> code changes
> - It should be possible to change the logging implementation used without having to change
> thousands of lines of code
> - The mapping of loggers to destinations (files, directories, servers etc.) should be 
> specified and modifiable via configuration
> Uniform logging format:
> All Hadoop logs should have the following structure.
> <Header>\n
> <LogEntry>\n [<Exception>\n]
> .
> .
> .
> where the header line specifies the format of each log entry. The header line has the format:
> '# <Fieldname> <Fieldname>...\n'. 
> The default format of each log entry is: '# Timestamp Level LoggerName Message', where:
> - Timestamp is a date and time in the format MM/DD/YYYY:HH:MM:SS
> - Level is the logging level (FATAL, WARN, DEBUG, TRACE, etc.)
> - LoggerName is the short name of the logging subsystem from which the message originated e.g.
> fs.FSNamesystem, dfs.Datanode etc.
> - Message is the log message produced
> Why Apache commons logging and Log4J?
> Apache commons logging is a facade meant to be used as a wrapper around an underlying logging
> implementation. Bridges from Apache commons logging to popular logging implementations 
> (Java logging, Log4J, Avalon etc.) are implemented and available as part of the commons logging
> distribution. Implementing a bridge to an unsupported implementation is fairly striaghtforward
> and involves the implementation of subclasses of the commons logging LogFactory and Logger 
> classes. Using Apache commons logging and making all logging calls through it enables us to
> move to a different logging implementation by simply changing configuration in the best case.
> Even otherwise, it incurs minimal code churn overhead.
> Log4J offers a few benefits over java.util.logging that make it a more desirable choice for the
> logging back end.
> - Configuration Flexibility: The mapping of loggers to destinations (files, sockets etc.)
> can be completely specified in configuration. It is possible to do this with Java logging as
> well, however, configuration is a lot more restrictive. For instance, with Java logging all 
> log files must have names derived from the same pattern. For the namenode, log files could 
> be named with the pattern "%h/namenode%u.log" which would put log files in the user.home
> directory with names like namenode0.log etc. With Log4J it would be possible to configure
> the namenode to emit log files with different names, say heartbeats.log, namespace.log,
> clients.log etc. Configuration variables in Log4J can also have the values of system 
> properties embedded in them.
> - Takes wrappers into account: Log4J takes into account the possibility that an application
> may be invoking it via a wrapper, such as Apache commons logging. This is important because
> logging event objects must be able to infer the context of the logging call such as classname,
> methodname etc. Inferring context is a relatively expensive operation that involves creating
> an exception and examining the stack trace to find the frame just before the first frame 
> of the logging framework. It is therefore done lazily only when this information actually 
> needs to be logged. Log4J can be instructed to look for the frame corresponding to the wrapper
> class, Java logging cannot. In the case of Java logging this means that a) the bridge from 
> Apache commons logging is responsible for inferring the calling context and setting it in the 
> logging event and b) this inference has to be done on every logging call regardless of whether
> or not it is needed.
> - More handy features: Log4J has some handy features that Java logging doesn't. A couple
> of examples of these:
> a) Date based rolling of log files 
> b) Format control through configuration. Log4J has a PatternLayout class that can be 
> configured to generate logs with a user specified pattern. The logging format described
> above can be described as "%d{MM/dd/yyyy:HH:mm:SS} %c{2} %p %m". The format specifiers
> indicate that each log line should have the date and time followed by the logger name followed
> by the logging level or priority followed by the application generated message.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun 30 18:30:59 2006
Return-Path: 
 <hadoop-dev-return-2331-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16722 invoked from network); 30 Jun 2006 18:30:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 18:30:59 -0000
Received: (qmail 50130 invoked by uid 500); 30 Jun 2006 18:30:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 50081 invoked by uid 500); 30 Jun 2006 18:30:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 50032 invoked by uid 99); 30 Jun 2006 18:30:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 11:30:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.126.228.150] (HELO rsmtp2.corp.yahoo.com)
 (207.126.228.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 11:30:54 -0700
Received: from [10.0.1.2] ([172.21.179.133])
	(authenticated bits=0)
	by rsmtp2.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k5UITmmH020974
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Fri, 30 Jun 2006 11:30:08 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=PCZaBtzAHTyjba03TVUtAHlK8MHkPrtuabTWfotIbrtGt1rFInLIfBscLAc5O5P9
Mime-Version: 1.0 (Apple Message framework v750)
In-Reply-To: <28656095.1151681610629.JavaMail.jira@brutus>
References: <28656095.1151681610629.JavaMail.jira@brutus>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <EF9B8E0E-ED13-466E-9433-7873D7974DBC@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Eric Baldeschwieler <eric14@yahoo-inc.com>
Subject: Re: [jira] Updated: (HADOOP-76) Implement speculative re-execution of
 reduces
Date: Fri, 30 Jun 2006 11:30:08 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.750)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

cool.  We'll give it a look.

On Jun 30, 2006, at 8:33 AM, Johan Oskarson (JIRA) wrote:

>      [ http://issues.apache.org/jira/browse/HADOOP-76?page=all ]
>
> Johan Oskarson updated HADOOP-76:
> ---------------------------------
>
>     Attachment: spec_reducev.patch
>
> I've tried to implement speculative reduces and it seems to be  
> working, however I'd like you to take a look at it since I'm not  
> familiar with some of the inner workings of hadoop.
>
> As suggested it writes output to a temporary name and the first one  
> to finish moves it to the correct output name.
> The patch adds a String tmpName to getRecordWriter in OutputFormatBase
> and a close method. Basically the OutputFormatBase keeps track of  
> the tmpName and the final name
> once close is called it moves the tmp to the final.
>
> This means the current output formats doesn't have to be changed.
>
> This patch would ideally be complemented by a better tasktracker  
> selection, I've seen instances where there's two final reduce tips  
> and then a speculative reduce is assigned to the same node that is  
> already running the other task.
>
> A speculative reduce will be started if finishedReduces /  
> numReduceTasks >= 0.7
>
> That's about it, looking forward to hear your input
>
>> Implement speculative re-execution of reduces
>> ---------------------------------------------
>>
>>          Key: HADOOP-76
>>          URL: http://issues.apache.org/jira/browse/HADOOP-76
>>      Project: Hadoop
>>         Type: Improvement
>
>>   Components: mapred
>>     Versions: 0.1.0
>>     Reporter: Doug Cutting
>>     Assignee: Owen O'Malley
>>     Priority: Minor
>>      Fix For: 0.5.0
>>  Attachments: spec_reducev.patch
>>
>> As a first step, reduce task outputs should go to temporary files  
>> which are renamed when the task completes.
>
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the  
> administrators:
>    http://issues.apache.org/jira/secure/Administrators.jspa
> -
> For more information on JIRA, see:
>    http://www.atlassian.com/software/jira
>


From MAILER-DAEMON Fri Jun 30 18:58:11 2006
Return-Path: 
 <hadoop-dev-return-2332-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 22393 invoked from network); 30 Jun 2006 18:58:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 18:58:11 -0000
Received: (qmail 89573 invoked by uid 500); 30 Jun 2006 18:58:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 89550 invoked by uid 500); 30 Jun 2006 18:58:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 89541 invoked by uid 99); 30 Jun 2006 18:58:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 11:58:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 11:58:09 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A3E17410345
	for <hadoop-dev@lucene.apache.org>; Fri, 30 Jun 2006 18:56:30 +0000 (GMT)
Message-ID: <33055827.1151693790668.JavaMail.jira@brutus>
Date: Fri, 30 Jun 2006 18:56:30 +0000 (GMT+00:00)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-312) Connections should not be cached
In-Reply-To: <13061881.1150916131961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-312?page=all ]

Devaraj Das updated HADOOP-312:
-------------------------------

    Attachment: config_connection_cache.patch

Modified the datanode Heartbeat logic to allow the datanodes to choose a random heartbeat interval between specified limits (the range, after some calculations on the constants defined in FSconstants.java, is between 3 sec and 103 sec).

> Connections should not be cached
> --------------------------------
>
>          Key: HADOOP-312
>          URL: http://issues.apache.org/jira/browse/HADOOP-312
>      Project: Hadoop
>         Type: Improvement

>   Components: ipc
>     Versions: 0.4.0
>     Reporter: Devaraj Das
>  Attachments: config_connection_cache.patch
>
> Servers and clients (client include datanodes, tasktrackers, DFSClients & tasks) should not cache connections or maybe cache them for very short periods of time. Clients should set up & tear down connections to the servers everytime they need to contact the servers (including the heartbeats). If connection is cached, then reuse the existing connection for a few subsequent transactions until the connection expires. The heartbeat interval should be more so that many more clients (order of  tens of thousands) can be accomodated within 1 heartbeat interval.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun 30 19:43:16 2006
Return-Path: 
 <hadoop-dev-return-2333-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 41104 invoked from network); 30 Jun 2006 19:43:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 19:43:16 -0000
Received: (qmail 56932 invoked by uid 500); 30 Jun 2006 19:43:16 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 56896 invoked by uid 500); 30 Jun 2006 19:43:15 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 56887 invoked by uid 99); 30 Jun 2006 19:43:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 12:43:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 12:43:15 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A3ABA410347
	for <hadoop-dev@lucene.apache.org>; Fri, 30 Jun 2006 19:41:30 +0000 (GMT)
Message-ID: <16273058.1151696490667.JavaMail.jira@brutus>
Date: Fri, 30 Jun 2006 19:41:30 +0000 (GMT+00:00)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-312) Connections should not be cached
In-Reply-To: <13061881.1150916131961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-312?page=comments#action_12418699 ] 

eric baldeschwieler commented on HADOOP-312:
--------------------------------------------

Could we break the datanode heartbeat thing you are doing into another bug?  It seems unrelated to a redesign of our general IPC and this bug is not complete enough on the motivation of your work for me to understand why randomizing heartbeat intervals is a good idea.

> Connections should not be cached
> --------------------------------
>
>          Key: HADOOP-312
>          URL: http://issues.apache.org/jira/browse/HADOOP-312
>      Project: Hadoop
>         Type: Improvement

>   Components: ipc
>     Versions: 0.4.0
>     Reporter: Devaraj Das
>  Attachments: config_connection_cache.patch
>
> Servers and clients (client include datanodes, tasktrackers, DFSClients & tasks) should not cache connections or maybe cache them for very short periods of time. Clients should set up & tear down connections to the servers everytime they need to contact the servers (including the heartbeats). If connection is cached, then reuse the existing connection for a few subsequent transactions until the connection expires. The heartbeat interval should be more so that many more clients (order of  tens of thousands) can be accomodated within 1 heartbeat interval.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun 30 19:49:11 2006
Return-Path: 
 <hadoop-dev-return-2334-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 41858 invoked from network); 30 Jun 2006 19:49:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 19:49:11 -0000
Received: (qmail 61434 invoked by uid 500); 30 Jun 2006 19:49:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 61408 invoked by uid 500); 30 Jun 2006 19:49:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 61399 invoked by uid 99); 30 Jun 2006 19:49:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 12:49:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 12:49:09 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A51A6410346
	for <hadoop-dev@lucene.apache.org>; Fri, 30 Jun 2006 19:47:30 +0000 (GMT)
Message-ID: <27234985.1151696850673.JavaMail.jira@brutus>
Date: Fri, 30 Jun 2006 19:47:30 +0000 (GMT+00:00)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-312) Connections should not be cached
In-Reply-To: <13061881.1150916131961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-312?page=comments#action_12418700 ] 

eric baldeschwieler commented on HADOOP-312:
--------------------------------------------

I'm very uncomfortable with this direction.  Turning this into a per installation configuration challenge sounds like a very bad and unscalable idea.

-1

> Connections should not be cached
> --------------------------------
>
>          Key: HADOOP-312
>          URL: http://issues.apache.org/jira/browse/HADOOP-312
>      Project: Hadoop
>         Type: Improvement

>   Components: ipc
>     Versions: 0.4.0
>     Reporter: Devaraj Das
>  Attachments: config_connection_cache.patch
>
> Servers and clients (client include datanodes, tasktrackers, DFSClients & tasks) should not cache connections or maybe cache them for very short periods of time. Clients should set up & tear down connections to the servers everytime they need to contact the servers (including the heartbeats). If connection is cached, then reuse the existing connection for a few subsequent transactions until the connection expires. The heartbeat interval should be more so that many more clients (order of  tens of thousands) can be accomodated within 1 heartbeat interval.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun 30 20:24:10 2006
Return-Path: 
 <hadoop-dev-return-2335-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 47553 invoked from network); 30 Jun 2006 20:24:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 20:24:10 -0000
Received: (qmail 19131 invoked by uid 500); 30 Jun 2006 20:24:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 19083 invoked by uid 500); 30 Jun 2006 20:24:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 19069 invoked by uid 99); 30 Jun 2006 20:24:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 13:24:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 13:24:09 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CDA7B410348
	for <hadoop-dev@lucene.apache.org>; Fri, 30 Jun 2006 20:22:29 +0000 (GMT)
Message-ID: <6076498.1151698949839.JavaMail.jira@brutus>
Date: Fri, 30 Jun 2006 20:22:29 +0000 (GMT+00:00)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-336) The task tracker should track disk
 space used, and have a configurable cap
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The task tracker should track disk space used, and have a configurable cap
--------------------------------------------------------------------------

         Key: HADOOP-336
         URL: http://issues.apache.org/jira/browse/HADOOP-336
     Project: Hadoop
        Type: Improvement

  Components: mapred  
    Reporter: eric baldeschwieler


We've been having problems where the task tracker is destabilizing HDFS by filling disks and then releasing them.  Various tasks can also interfere with each other this way.

We should have a configurable max working space for a task (and allow the setting of lower per task limits).  The task tracker should track use against this limit and terminate a job if it overruns it.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun 30 20:42:11 2006
Return-Path: 
 <hadoop-dev-return-2336-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 49753 invoked from network); 30 Jun 2006 20:42:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 20:42:11 -0000
Received: (qmail 42403 invoked by uid 500); 30 Jun 2006 20:42:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 42378 invoked by uid 500); 30 Jun 2006 20:42:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 42369 invoked by uid 99); 30 Jun 2006 20:42:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 13:42:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 13:42:10 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BB0B9410347
	for <hadoop-dev@lucene.apache.org>; Fri, 30 Jun 2006 20:40:30 +0000 (GMT)
Message-ID: <3170032.1151700030762.JavaMail.jira@brutus>
Date: Fri, 30 Jun 2006 20:40:30 +0000 (GMT+00:00)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-252) add versioning to RPC
In-Reply-To: <23799650.1148510309896.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-252?page=comments#action_12418707 ] 

eric baldeschwieler commented on HADOOP-252:
--------------------------------------------

If we had connections dedicated to a protol, your argument would be well founded.  Since we don't, there is no place to hang the tests you describe.  Let's discuss.

> add versioning to RPC
> ---------------------
>
>          Key: HADOOP-252
>          URL: http://issues.apache.org/jira/browse/HADOOP-252
>      Project: Hadoop
>         Type: Improvement

>   Components: ipc
>     Versions: 0.3.0
>     Reporter: Yoram Arnon
>      Fix For: 0.5.0

>
> currently, any change to any rpc message breaks the protocol, with mysterious exceptions occurring at run time.
> a versioning sceme would have two benefits:
> - intelligent error messages, indicating that an upgrade is required
> - backwards compatibility could be supported.
> the proposal is to add a "const version" for each protocol, and a method: int getVersion(int version) that sends the client's version and receives the server's version. This would be the first method invoked on connection. Both sides then either agree on the lowest version number, providing backwards compatibility support, or abort the connection as "unsupported version".

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun 30 21:00:12 2006
Return-Path: 
 <hadoop-dev-return-2337-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52095 invoked from network); 30 Jun 2006 21:00:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 21:00:12 -0000
Received: (qmail 58567 invoked by uid 500); 30 Jun 2006 21:00:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58544 invoked by uid 500); 30 Jun 2006 21:00:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58535 invoked by uid 99); 30 Jun 2006 21:00:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 14:00:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 14:00:10 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 207B4410348
	for <hadoop-dev@lucene.apache.org>; Fri, 30 Jun 2006 20:58:31 +0000 (GMT)
Message-ID: <1499468.1151701111130.JavaMail.jira@brutus>
Date: Fri, 30 Jun 2006 20:58:31 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-313) running a reduce task standalone
In-Reply-To: <10995504.1150932689891.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-313?page=all ]

Owen O'Malley updated HADOOP-313:
---------------------------------

    Attachment: stand-alone-task.patch

This patch does a lot more:
   1. It moves the jobId and partition fields from ReduceTask up into Task.
   2. It replaces Michel's stand-alone reduce runner, with a more general map or reduce runner.
   3. It adds new task localizations into the job.xml.
       For all tasks:
          a. map.task.id = the task id
          b. mapred.task.is.map = is this a map
          c. mapred.task.partition = numeric task id
          d. mapred.job.id = job id
      For maps:
          a. map.input.file = the file that we are reading
          b. map.input.start = the offset in the file to start at
          c. map.input.length = the number of bytes in the split
      For reduces:
          a. mapred.map.tasks = correct number of maps
      These new attributes allow me to reconstruct the MapTask or ReduceTask with just the job.xml.
   4. A new configuration variable keep.failed.task.files that tells the system to keep files/directories for tasks that fail. This attribute can be set on a particular JobConf.
     

> running a reduce task standalone
> --------------------------------
>
>          Key: HADOOP-313
>          URL: http://issues.apache.org/jira/browse/HADOOP-313
>      Project: Hadoop
>         Type: Bug

>     Reporter: Michel Tourn
>     Assignee: Michel Tourn
>  Attachments: sareduce.patch, stand-alone-task.patch
>
> This is a tool to reproduce problems and to run unit tests involving a reduce task.
> You just give it a reduce directory on the command line.
> Usage: java org.apache.hadoop.mapred.StandaloneReduceTask <taskdir> [<limitmaps>]
> taskdir name encodes: task_<jobid>_r_<partition>_<attempt>
> taskdir contains job.xml and one or more input files named: map_<dddd>.out
> You should run with the same -Xmx option as the TaskTracker child JVM

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun 30 21:00:13 2006
Return-Path: 
 <hadoop-dev-return-2338-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52134 invoked from network); 30 Jun 2006 21:00:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 21:00:13 -0000
Received: (qmail 58737 invoked by uid 500); 30 Jun 2006 21:00:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58714 invoked by uid 500); 30 Jun 2006 21:00:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58705 invoked by uid 99); 30 Jun 2006 21:00:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 14:00:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 14:00:11 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 81E34410349
	for <hadoop-dev@lucene.apache.org>; Fri, 30 Jun 2006 20:58:32 +0000 (GMT)
Message-ID: <2414657.1151701112529.JavaMail.jira@brutus>
Date: Fri, 30 Jun 2006 20:58:32 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-313) A stand alone driver for individual
 tasks
In-Reply-To: <10995504.1150932689891.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-313?page=all ]

Owen O'Malley updated HADOOP-313:
---------------------------------

        Summary: A stand alone driver for individual tasks  (was: running a reduce task standalone)
    Description: 
This is a tool to reproduce problems and to run unit tests involving either a map or reduce task.
You just give it a reduce directory on the command line.

Usage: java org.apache.hadoop.mapred.StandaloneReduceTask <taskdir> [<limitmaps>]
taskdir name encodes: task_<jobid>_r_<partition>_<attempt>
taskdir contains job.xml and one or more input files named: map_<dddd>.out
You should run with the same -Xmx option as the TaskTracker child JVM



  was:
This is a tool to reproduce problems and to run unit tests involving a reduce task.
You just give it a reduce directory on the command line.

Usage: java org.apache.hadoop.mapred.StandaloneReduceTask <taskdir> [<limitmaps>]
taskdir name encodes: task_<jobid>_r_<partition>_<attempt>
taskdir contains job.xml and one or more input files named: map_<dddd>.out
You should run with the same -Xmx option as the TaskTracker child JVM




> A stand alone driver for individual tasks
> -----------------------------------------
>
>          Key: HADOOP-313
>          URL: http://issues.apache.org/jira/browse/HADOOP-313
>      Project: Hadoop
>         Type: Bug

>     Reporter: Michel Tourn
>     Assignee: Michel Tourn
>  Attachments: sareduce.patch, stand-alone-task.patch
>
> This is a tool to reproduce problems and to run unit tests involving either a map or reduce task.
> You just give it a reduce directory on the command line.
> Usage: java org.apache.hadoop.mapred.StandaloneReduceTask <taskdir> [<limitmaps>]
> taskdir name encodes: task_<jobid>_r_<partition>_<attempt>
> taskdir contains job.xml and one or more input files named: map_<dddd>.out
> You should run with the same -Xmx option as the TaskTracker child JVM

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun 30 21:02:12 2006
Return-Path: 
 <hadoop-dev-return-2339-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52402 invoked from network); 30 Jun 2006 21:02:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 21:02:12 -0000
Received: (qmail 59471 invoked by uid 500); 30 Jun 2006 21:02:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 59311 invoked by uid 500); 30 Jun 2006 21:02:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 59302 invoked by uid 99); 30 Jun 2006 21:02:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 14:02:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 14:02:11 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id ADD5F410349
	for <hadoop-dev@lucene.apache.org>; Fri, 30 Jun 2006 21:00:31 +0000 (GMT)
Message-ID: <27649653.1151701231709.JavaMail.jira@brutus>
Date: Fri, 30 Jun 2006 21:00:31 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-313) A stand alone driver for individual
 tasks
In-Reply-To: <10995504.1150932689891.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-313?page=comments#action_12418710 ] 

Owen O'Malley commented on HADOOP-313:
--------------------------------------

One more comment, the usage is:

bin/hadoop org.apache.hadoop.mapred.IsolationRunner <local-dir>/taskTracker/<taskid>/job.xml



> A stand alone driver for individual tasks
> -----------------------------------------
>
>          Key: HADOOP-313
>          URL: http://issues.apache.org/jira/browse/HADOOP-313
>      Project: Hadoop
>         Type: Bug

>     Reporter: Michel Tourn
>     Assignee: Michel Tourn
>  Attachments: sareduce.patch, stand-alone-task.patch
>
> This is a tool to reproduce problems and to run unit tests involving either a map or reduce task.
> You just give it a reduce directory on the command line.
> Usage: java org.apache.hadoop.mapred.StandaloneReduceTask <taskdir> [<limitmaps>]
> taskdir name encodes: task_<jobid>_r_<partition>_<attempt>
> taskdir contains job.xml and one or more input files named: map_<dddd>.out
> You should run with the same -Xmx option as the TaskTracker child JVM

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun 30 21:14:11 2006
Return-Path: 
 <hadoop-dev-return-2340-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 54272 invoked from network); 30 Jun 2006 21:14:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 21:14:11 -0000
Received: (qmail 70390 invoked by uid 500); 30 Jun 2006 21:14:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70369 invoked by uid 500); 30 Jun 2006 21:14:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 70360 invoked by uid 99); 30 Jun 2006 21:14:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 14:14:10 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.126.228.150] (HELO rsmtp2.corp.yahoo.com)
 (207.126.228.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 14:14:10 -0700
Received: from [10.0.1.2] ([172.21.179.133])
	(authenticated bits=0)
	by rsmtp2.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k5ULDY5v024820
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Fri, 30 Jun 2006 14:13:35 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=2FE5zDKk0BFqeJuERmX08cC7WH6RdNoDLhjo3drZb9G+uyDYDjGKri0mJvp174HV
Mime-Version: 1.0 (Apple Message framework v750)
In-Reply-To: <23863911.1151602351115.JavaMail.jira@brutus>
References: <23863911.1151602351115.JavaMail.jira@brutus>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <194E10DA-9B7E-4A3C-981D-3C0CBB86ACE8@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Eric Baldeschwieler <eric14@yahoo-inc.com>
Subject: Re: [jira] Commented: (HADOOP-331) map outputs should be written to a
 single output file with an index
Date: Fri, 30 Jun 2006 14:13:33 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.750)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

ok.

Merging on the mapper would certainly make sense in that scenario.

On Jun 29, 2006, at 10:32 AM, paul sutter (JIRA) wrote:

>     [ http://issues.apache.org/jira/browse/HADOOP-331? 
> page=comments#action_12418501 ]
>
> paul sutter commented on HADOOP-331:
> ------------------------------------
>
>
> one more suggestion (plea): could the map-output-spill-extraction  
> take place on the mapper side (perhaps in the http server), such  
> that the reducer be able to retreive fully-formed map outputs as  
> currently?
>
> incidently, we have individual map inputs that are 5-10GB in size,  
> which are compressed so they cant be split, which would yield  
> potentially 50-100 spills per mapper. it would be nice if the  
> reducer (or whatever process is fetching the files) didnt have to  
> do that reassembly, but rather that it happened on the mapper side.
>
>> map outputs should be written to a single output file with an index
>> -------------------------------------------------------------------
>>
>>          Key: HADOOP-331
>>          URL: http://issues.apache.org/jira/browse/HADOOP-331
>>      Project: Hadoop
>>         Type: Improvement
>
>>   Components: mapred
>>     Versions: 0.3.2
>>     Reporter: eric baldeschwieler
>>     Assignee: Yoram Arnon
>>      Fix For: 0.5.0
>
>>
>> The current strategy of writing a file per target map is consuming  
>> a lot of unused buffer space (causing out of memory crashes) and  
>> puts a lot of burden on the FS (many opens, inodes used, etc).
>> I propose that we write a single file containing all output and  
>> also write an index file IDing which byte range in the file goes  
>> to each reduce.  This will remove the issue of buffer waste,  
>> address scaling issues with number of open files and generally set  
>> us up better for scaling.  It will also have advantages with very  
>> small inputs, since the buffer cache will reduce the number of  
>> seeks needed and the data serving node can open a single file and  
>> just keep it open rather than needing to do directory and open ops  
>> on every request.
>> The only issue I see is that in cases where the task output is  
>> substantiallyu larger than its input, we may need to spill  
>> multiple times.  In this case, we can do a merge after all spills  
>> are complete (or during the final spill).
>
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the  
> administrators:
>    http://issues.apache.org/jira/secure/Administrators.jspa
> -
> For more information on JIRA, see:
>    http://www.atlassian.com/software/jira
>


From MAILER-DAEMON Fri Jun 30 21:21:10 2006
Return-Path: 
 <hadoop-dev-return-2341-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 55005 invoked from network); 30 Jun 2006 21:21:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 21:21:10 -0000
Received: (qmail 77489 invoked by uid 500); 30 Jun 2006 21:21:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 77452 invoked by uid 500); 30 Jun 2006 21:21:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 77441 invoked by uid 99); 30 Jun 2006 21:21:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 14:21:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 14:21:09 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D133F410348
	for <hadoop-dev@lucene.apache.org>; Fri, 30 Jun 2006 21:19:29 +0000 (GMT)
Message-ID: <17169077.1151702369853.JavaMail.jira@brutus>
Date: Fri, 30 Jun 2006 21:19:29 +0000 (GMT+00:00)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-337) DFS files should be appendable
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

DFS files should be appendable
------------------------------

         Key: HADOOP-337
         URL: http://issues.apache.org/jira/browse/HADOOP-337
     Project: Hadoop
        Type: New Feature

  Components: dfs  
    Versions: 0.1.0, 0.2.0, 0.1.1, 0.3.0, 0.4.0, 0.2.1, 0.3.1, 0.3.2    
 Environment: all
    Reporter: Runping Qi



Actually two related issues

1. One should be able to open an existing DFS file, to seek to a position and truncate the rest, and to append starting at the end (or where trancation happens) .
2. One should be able to read the writen data of a DFS file while other is writing/appending to the file


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun 30 21:59:10 2006
Return-Path: 
 <hadoop-dev-return-2342-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 59916 invoked from network); 30 Jun 2006 21:59:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 21:59:10 -0000
Received: (qmail 22002 invoked by uid 500); 30 Jun 2006 21:59:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 21976 invoked by uid 500); 30 Jun 2006 21:59:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 21966 invoked by uid 99); 30 Jun 2006 21:59:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 14:59:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 14:59:09 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D3DD6410348
	for <hadoop-dev@lucene.apache.org>; Fri, 30 Jun 2006 21:57:29 +0000 (GMT)
Message-ID: <29595099.1151704649864.JavaMail.jira@brutus>
Date: Fri, 30 Jun 2006 21:57:29 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-338) the number of maps in the JobConf does
 not match reality
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

the number of maps in the JobConf does not match reality
--------------------------------------------------------

         Key: HADOOP-338
         URL: http://issues.apache.org/jira/browse/HADOOP-338
     Project: Hadoop
        Type: Bug

    Versions: 0.4.0    
    Reporter: Owen O'Malley
 Assigned to: Owen O'Malley 


The config value JobConf.getNumMapTasks() returns the hint of how many maps should be run rather than the actual number of input splits that were generated.

The job tracker should fix the job.xml with the actual number of input splits.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


