From MAILER-DAEMON Fri Jun 30 23:20:11 2006
Return-Path: 
 <hadoop-dev-return-2343-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 73585 invoked from network); 30 Jun 2006 23:20:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 23:20:11 -0000
Received: (qmail 25648 invoked by uid 500); 30 Jun 2006 23:20:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 25614 invoked by uid 500); 30 Jun 2006 23:20:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 25605 invoked by uid 99); 30 Jun 2006 23:20:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 16:20:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 16:20:10 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9D4EA410348
	for <hadoop-dev@lucene.apache.org>; Fri, 30 Jun 2006 23:18:30 +0000 (GMT)
Message-ID: <23472998.1151709510641.JavaMail.jira@brutus>
Date: Fri, 30 Jun 2006 23:18:30 +0000 (GMT+00:00)
From: "paul sutter (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-337) DFS files should be appendable
In-Reply-To: <17169077.1151702369853.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-337?page=comments#action_12418732 ] 

paul sutter commented on HADOOP-337:
------------------------------------


I'd suggest a strict prioritization of DFS changes (comments encouraged):

(1) Recoverability (not losing data in the presence of failures)
(2) Scalability
(3) Availability (staying up 24/7/365)
(4) Performance
(5) Features

Wherein features is a _distant_ fifth place, not really in the running.

Its worth noting that the elegant simplicity of HDFS is key to (1), (2), and (3) - we have a lot to gain by avoiding any and all complexity in HDFS.



> DFS files should be appendable
> ------------------------------
>
>          Key: HADOOP-337
>          URL: http://issues.apache.org/jira/browse/HADOOP-337
>      Project: Hadoop
>         Type: New Feature

>   Components: dfs
>     Versions: 0.1.0, 0.2.0, 0.1.1, 0.3.0, 0.4.0, 0.2.1, 0.3.1, 0.3.2
>  Environment: all
>     Reporter: Runping Qi

>
> Actually two related issues
> 1. One should be able to open an existing DFS file, to seek to a position and truncate the rest, and to append starting at the end (or where trancation happens) .
> 2. One should be able to read the writen data of a DFS file while other is writing/appending to the file

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun 30 23:40:10 2006
Return-Path: 
 <hadoop-dev-return-2344-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77656 invoked from network); 30 Jun 2006 23:40:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 23:40:10 -0000
Received: (qmail 54068 invoked by uid 500); 30 Jun 2006 23:40:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 54025 invoked by uid 500); 30 Jun 2006 23:40:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 54016 invoked by uid 99); 30 Jun 2006 23:40:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 16:40:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 16:40:09 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D49AF410348
	for <hadoop-dev@lucene.apache.org>; Fri, 30 Jun 2006 23:38:29 +0000 (GMT)
Message-ID: <17736367.1151710709867.JavaMail.jira@brutus>
Date: Fri, 30 Jun 2006 23:38:29 +0000 (GMT+00:00)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-339) making improvements to the jobclients
 to get information on currenlyl running jobs and the jobqueue
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

making improvements to the jobclients to get information on currenlyl running jobs and the jobqueue
---------------------------------------------------------------------------------------------------

         Key: HADOOP-339
         URL: http://issues.apache.org/jira/browse/HADOOP-339
     Project: Hadoop
        Type: New Feature

    Versions: 0.5.0    
    Reporter: Mahadev konar
 Assigned to: Mahadev konar 
    Priority: Minor


adding a few methods to the joblcient and jobsubmission protocol to support queries to the jobtracker for currently running jobs

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun 30 23:42:11 2006
Return-Path: 
 <hadoop-dev-return-2345-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78078 invoked from network); 30 Jun 2006 23:42:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 23:42:11 -0000
Received: (qmail 60427 invoked by uid 500); 30 Jun 2006 23:42:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 60394 invoked by uid 500); 30 Jun 2006 23:42:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 60384 invoked by uid 99); 30 Jun 2006 23:42:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 16:42:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 16:42:10 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A090641034A
	for <hadoop-dev@lucene.apache.org>; Fri, 30 Jun 2006 23:40:30 +0000 (GMT)
Message-ID: <6510359.1151710830654.JavaMail.jira@brutus>
Date: Fri, 30 Jun 2006 23:40:30 +0000 (GMT+00:00)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-339) making improvements to the jobclients
 to get information on currenlyl running jobs and the jobqueue
In-Reply-To: <17736367.1151710709867.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-339?page=all ]

Mahadev konar updated HADOOP-339:
---------------------------------

    Attachment: extension.patch

This patch adds a another method to the jobsubmission client adn jobclient to get the current jobs (to be run or running). Made JobStatus class public to be accessed outside of hadoop.

> making improvements to the jobclients to get information on currenlyl running jobs and the jobqueue
> ---------------------------------------------------------------------------------------------------
>
>          Key: HADOOP-339
>          URL: http://issues.apache.org/jira/browse/HADOOP-339
>      Project: Hadoop
>         Type: New Feature

>     Versions: 0.5.0
>     Reporter: Mahadev konar
>     Assignee: Mahadev konar
>     Priority: Minor
>  Attachments: extension.patch
>
> adding a few methods to the joblcient and jobsubmission protocol to support queries to the jobtracker for currently running jobs

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun 30 23:53:11 2006
Return-Path: 
 <hadoop-dev-return-2346-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 80159 invoked from network); 30 Jun 2006 23:53:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 23:53:11 -0000
Received: (qmail 73657 invoked by uid 500); 30 Jun 2006 23:53:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 73624 invoked by uid 500); 30 Jun 2006 23:53:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 73610 invoked by uid 99); 30 Jun 2006 23:53:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 16:53:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 16:53:10 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 99ACE410348
	for <hadoop-dev@lucene.apache.org>; Fri, 30 Jun 2006 23:51:30 +0000 (GMT)
Message-ID: <15007165.1151711490626.JavaMail.jira@brutus>
Date: Fri, 30 Jun 2006 23:51:30 +0000 (GMT+00:00)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-337) DFS files should be appendable
In-Reply-To: <17169077.1151702369853.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-337?page=comments#action_12418735 ] 

Runping Qi commented on HADOOP-337:
-----------------------------------


I don't mind pritorization and agree reliability/scalability/availability are all important. However, that does not mean we have to ban new features, especially some features that are essential for some applications. For example, the feature of of the current issue is a must for one of our applications.
 

> DFS files should be appendable
> ------------------------------
>
>          Key: HADOOP-337
>          URL: http://issues.apache.org/jira/browse/HADOOP-337
>      Project: Hadoop
>         Type: New Feature

>   Components: dfs
>     Versions: 0.1.0, 0.2.0, 0.1.1, 0.3.0, 0.4.0, 0.2.1, 0.3.1, 0.3.2
>  Environment: all
>     Reporter: Runping Qi

>
> Actually two related issues
> 1. One should be able to open an existing DFS file, to seek to a position and truncate the rest, and to append starting at the end (or where trancation happens) .
> 2. One should be able to read the writen data of a DFS file while other is writing/appending to the file

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jun 30 23:59:11 2006
Return-Path: 
 <hadoop-dev-return-2347-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 81102 invoked from network); 30 Jun 2006 23:59:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 23:59:11 -0000
Received: (qmail 86801 invoked by uid 500); 30 Jun 2006 23:59:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86761 invoked by uid 500); 30 Jun 2006 23:59:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86746 invoked by uid 99); 30 Jun 2006 23:59:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 16:59:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 16:59:10 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A6682410348
	for <hadoop-dev@lucene.apache.org>; Fri, 30 Jun 2006 23:57:30 +0000 (GMT)
Message-ID: <4965525.1151711850678.JavaMail.jira@brutus>
Date: Fri, 30 Jun 2006 23:57:30 +0000 (GMT+00:00)
From: "paul sutter (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-337) DFS files should be appendable
In-Reply-To: <17169077.1151702369853.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-337?page=comments#action_12418736 ] 

paul sutter commented on HADOOP-337:
------------------------------------


I agree. Beleive me, I love a new feature as much as the next guy. In fact, my temptation was to request multiple concurrent appenders! :)

> DFS files should be appendable
> ------------------------------
>
>          Key: HADOOP-337
>          URL: http://issues.apache.org/jira/browse/HADOOP-337
>      Project: Hadoop
>         Type: New Feature

>   Components: dfs
>     Versions: 0.1.0, 0.2.0, 0.1.1, 0.3.0, 0.4.0, 0.2.1, 0.3.1, 0.3.2
>  Environment: all
>     Reporter: Runping Qi

>
> Actually two related issues
> 1. One should be able to open an existing DFS file, to seek to a position and truncate the rest, and to append starting at the end (or where trancation happens) .
> 2. One should be able to read the writen data of a DFS file while other is writing/appending to the file

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Sat Jul  1 00:30:11 2006
Return-Path: 
 <hadoop-dev-return-2348-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84779 invoked from network); 1 Jul 2006 00:30:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jul 2006 00:30:11 -0000
Received: (qmail 7030 invoked by uid 500); 1 Jul 2006 00:30:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 6882 invoked by uid 500); 1 Jul 2006 00:30:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 6867 invoked by uid 99); 1 Jul 2006 00:30:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 17:30:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 17:30:10 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A13FD410348
	for <hadoop-dev@lucene.apache.org>; Sat,  1 Jul 2006 00:28:30 +0000 (GMT)
Message-ID: <7360546.1151713710657.JavaMail.jira@brutus>
Date: Sat, 1 Jul 2006 00:28:30 +0000 (GMT+00:00)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-252) add versioning to RPC
In-Reply-To: <23799650.1148510309896.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-252?page=comments#action_12418738 ] 

Yoram Arnon commented on HADOOP-252:
------------------------------------

connections are dedicated to a protocol, in that a client connects to a server that's waiting on some port serving a single protocol.
a datanode only serves the datanode protocol. likewise namenode etc.

the idea is that the test is done after the tcp connection setup, as the first message passed between client and server. It's actually one more method of each protocol, identifying both sides' versions of the protocol. It would be part of the protocol; it's technically sound...

> add versioning to RPC
> ---------------------
>
>          Key: HADOOP-252
>          URL: http://issues.apache.org/jira/browse/HADOOP-252
>      Project: Hadoop
>         Type: Improvement

>   Components: ipc
>     Versions: 0.3.0
>     Reporter: Yoram Arnon
>      Fix For: 0.5.0

>
> currently, any change to any rpc message breaks the protocol, with mysterious exceptions occurring at run time.
> a versioning sceme would have two benefits:
> - intelligent error messages, indicating that an upgrade is required
> - backwards compatibility could be supported.
> the proposal is to add a "const version" for each protocol, and a method: int getVersion(int version) that sends the client's version and receives the server's version. This would be the first method invoked on connection. Both sides then either agree on the lowest version number, providing backwards compatibility support, or abort the connection as "unsupported version".

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Sat Jul  1 01:01:00 2006
Return-Path: 
 <hadoop-dev-return-2349-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 89683 invoked from network); 1 Jul 2006 01:01:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jul 2006 01:01:00 -0000
Received: (qmail 31572 invoked by uid 500); 1 Jul 2006 01:01:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 31551 invoked by uid 500); 1 Jul 2006 01:00:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31542 invoked by uid 99); 1 Jul 2006 01:00:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 18:00:59 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.109.112.27] (HELO mrout1-b.corp.dcn.yahoo.com)
 (216.109.112.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 18:00:59 -0700
Received: from [10.72.104.183] (enoughhot-lx.corp.yahoo.com [10.72.104.183])
	by mrout1-b.corp.dcn.yahoo.com (8.13.6/8.13.6/y.out) with ESMTP id
 k6110Gp8076714
	for <hadoop-dev@lucene.apache.org>; Fri, 30 Jun 2006 18:00:16 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=message-id:date:from:user-agent:x-accept-language:
	mime-version:to:subject:content-type:content-transfer-encoding;
	b=SEBWtl6i5ld88szUnxMpYkFzNwlXeljhzoqt4UqyJmv6HNoixaQR/r0nsbG04dG1
Message-ID: <44A5C920.5050808@yahoo-inc.com>
Date: Fri, 30 Jun 2006 18:00:16 -0700
From: Konstantin Shvachko <shv@yahoo-inc.com>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Hadoop Distributed File System requirements on Wiki
Content-Type: text/plain; charset=windows-1251; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I've created a Wiki page that summarizes DFS requirements and proposed 
changes.
This is a summary of discussions held in this mailing list and 
additional internal discussions.
The page is here:

http://wiki.apache.org/lucene-hadoop/DFS_requirements

I see there is an ongoing related discussion in HADOOP-337.
We prioritized our goals as
(1) Reliability (which includes Recoverability and Availability)
(2) Scalability
(3) Functionality
(4) Performance
(5) other
But then gave higher priority to some features like the append 
functionality.

Happy holidays to everybody.

--Konstantin Shvachko

From MAILER-DAEMON Sat Jul  1 01:43:11 2006
Return-Path: 
 <hadoop-dev-return-2350-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1844 invoked from network); 1 Jul 2006 01:43:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jul 2006 01:43:11 -0000
Received: (qmail 62510 invoked by uid 500); 1 Jul 2006 01:43:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62482 invoked by uid 500); 1 Jul 2006 01:43:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62473 invoked by uid 99); 1 Jul 2006 01:43:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 18:43:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 18:43:10 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9ECDC41034A
	for <hadoop-dev@lucene.apache.org>; Sat,  1 Jul 2006 01:41:30 +0000 (GMT)
Message-ID: <15679951.1151718090647.JavaMail.jira@brutus>
Date: Sat, 1 Jul 2006 01:41:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-338) the number of maps in the JobConf
 does not match reality
In-Reply-To: <29595099.1151704649864.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-338?page=comments#action_12418751 ] 

Doug Cutting commented on HADOOP-338:
-------------------------------------

Perhaps a different property should be used for the actual number of tasks allocated.

> the number of maps in the JobConf does not match reality
> --------------------------------------------------------
>
>          Key: HADOOP-338
>          URL: http://issues.apache.org/jira/browse/HADOOP-338
>      Project: Hadoop
>         Type: Bug

>     Versions: 0.4.0
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley

>
> The config value JobConf.getNumMapTasks() returns the hint of how many maps should be run rather than the actual number of input splits that were generated.
> The job tracker should fix the job.xml with the actual number of input splits.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Sat Jul  1 01:45:11 2006
Return-Path: 
 <hadoop-dev-return-2351-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 2171 invoked from network); 1 Jul 2006 01:45:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jul 2006 01:45:11 -0000
Received: (qmail 63842 invoked by uid 500); 1 Jul 2006 01:45:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63817 invoked by uid 500); 1 Jul 2006 01:45:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63808 invoked by uid 99); 1 Jul 2006 01:45:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 18:45:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 18:45:10 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BEDE841034B
	for <hadoop-dev@lucene.apache.org>; Sat,  1 Jul 2006 01:43:30 +0000 (GMT)
Message-ID: <19327777.1151718210778.JavaMail.jira@brutus>
Date: Sat, 1 Jul 2006 01:43:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-337) DFS files should be appendable
In-Reply-To: <17169077.1151702369853.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-337?page=comments#action_12418752 ] 

Doug Cutting commented on HADOOP-337:
-------------------------------------

Can you describe more about the application that requires this feature?  I wonder if there might be a reasonable workaround.  Previously I proposed using a directory of files instead of a single file for a related issue.

> DFS files should be appendable
> ------------------------------
>
>          Key: HADOOP-337
>          URL: http://issues.apache.org/jira/browse/HADOOP-337
>      Project: Hadoop
>         Type: New Feature

>   Components: dfs
>     Versions: 0.1.0, 0.2.0, 0.1.1, 0.3.0, 0.4.0, 0.2.1, 0.3.1, 0.3.2
>  Environment: all
>     Reporter: Runping Qi

>
> Actually two related issues
> 1. One should be able to open an existing DFS file, to seek to a position and truncate the rest, and to append starting at the end (or where trancation happens) .
> 2. One should be able to read the writen data of a DFS file while other is writing/appending to the file

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Sat Jul  1 01:54:11 2006
Return-Path: 
 <hadoop-dev-return-2352-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 3062 invoked from network); 1 Jul 2006 01:54:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jul 2006 01:54:11 -0000
Received: (qmail 69518 invoked by uid 500); 1 Jul 2006 01:54:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 69487 invoked by uid 500); 1 Jul 2006 01:54:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 69478 invoked by uid 99); 1 Jul 2006 01:54:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 18:54:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 18:54:10 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A3F2A410348
	for <hadoop-dev@lucene.apache.org>; Sat,  1 Jul 2006 01:52:30 +0000 (GMT)
Message-ID: <20488905.1151718750668.JavaMail.jira@brutus>
Date: Sat, 1 Jul 2006 01:52:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-252) add versioning to RPC
In-Reply-To: <23799650.1148510309896.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-252?page=comments#action_12418754 ] 

Doug Cutting commented on HADOOP-252:
-------------------------------------

The way the software is currently layered, it makes sense to version the base IPC connection, and perhaps also, in the RPC layer, to check the version of the proxy class with that of the server instance for compatibility.  In the latter case, we might use the same mechanism a RMI, (serialVersionUID static field, defaulting to a hash of method signatures).

> add versioning to RPC
> ---------------------
>
>          Key: HADOOP-252
>          URL: http://issues.apache.org/jira/browse/HADOOP-252
>      Project: Hadoop
>         Type: Improvement

>   Components: ipc
>     Versions: 0.3.0
>     Reporter: Yoram Arnon
>      Fix For: 0.5.0

>
> currently, any change to any rpc message breaks the protocol, with mysterious exceptions occurring at run time.
> a versioning sceme would have two benefits:
> - intelligent error messages, indicating that an upgrade is required
> - backwards compatibility could be supported.
> the proposal is to add a "const version" for each protocol, and a method: int getVersion(int version) that sends the client's version and receives the server's version. This would be the first method invoked on connection. Both sides then either agree on the lowest version number, providing backwards compatibility support, or abort the connection as "unsupported version".

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Sat Jul  1 03:10:12 2006
Return-Path: 
 <hadoop-dev-return-2353-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9369 invoked from network); 1 Jul 2006 03:10:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jul 2006 03:10:12 -0000
Received: (qmail 7099 invoked by uid 500); 1 Jul 2006 03:10:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 6951 invoked by uid 500); 1 Jul 2006 03:10:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 6940 invoked by uid 99); 1 Jul 2006 03:10:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 20:10:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 20:10:10 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B122D41034A
	for <hadoop-dev@lucene.apache.org>; Sat,  1 Jul 2006 03:08:30 +0000 (GMT)
Message-ID: <10609818.1151723310722.JavaMail.jira@brutus>
Date: Sat, 1 Jul 2006 03:08:30 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-338) the number of maps in the JobConf
 does not match reality
In-Reply-To: <29595099.1151704649864.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-338?page=comments#action_12418756 ] 

Owen O'Malley commented on HADOOP-338:
--------------------------------------

It certainly surprised me that conf.getNumMapTasks() didn't return the right number and I _should_ have known better. It seems like if we want to leave access to the desired number of maps, we should change it to getDesiredNumMapTasks() or something closer to the real semantics.


> the number of maps in the JobConf does not match reality
> --------------------------------------------------------
>
>          Key: HADOOP-338
>          URL: http://issues.apache.org/jira/browse/HADOOP-338
>      Project: Hadoop
>         Type: Bug

>     Versions: 0.4.0
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley

>
> The config value JobConf.getNumMapTasks() returns the hint of how many maps should be run rather than the actual number of input splits that were generated.
> The job tracker should fix the job.xml with the actual number of input splits.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Sat Jul  1 06:08:06 2006
Return-Path: 
 <hadoop-dev-return-2354-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 28960 invoked from network); 1 Jul 2006 06:08:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jul 2006 06:08:06 -0000
Received: (qmail 69462 invoked by uid 500); 1 Jul 2006 06:08:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 69439 invoked by uid 500); 1 Jul 2006 06:08:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 69430 invoked by uid 99); 1 Jul 2006 06:08:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 23:08:05 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of emanihc@gmail.com designates
 64.233.162.194 as permitted sender)
Received: from [64.233.162.194] (HELO nz-out-0102.google.com) (64.233.162.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 23:08:04 -0700
Received: by nz-out-0102.google.com with SMTP id v1so520989nzb
        for <hadoop-dev@lucene.apache.org>;
 Fri, 30 Jun 2006 23:07:43 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=ceHJsGxJf8IucXgm6GsAvqPMR+qnXOuTYGXGX2ROoeTCDUk8NqFWeeLPr0HwNyhXjM8TzsTkJdQp0/fnQPGtrpTHYuNSGiLPsBejFXdfewMSRDlM6tq40p58Zo+oLLgV55sJMPIedavw7RG1O7hMAwr6Qfw8+PxOua2X/UMIdKg=
Received: by 10.36.80.17 with SMTP id d17mr1569603nzb;
        Fri, 30 Jun 2006 23:07:43 -0700 (PDT)
Received: by 10.36.61.15 with HTTP; Fri, 30 Jun 2006 23:07:43 -0700 (PDT)
Message-ID: <39209b600606302307u6eb2fc22sdc44e3dfed25735f@mail.gmail.com>
Date: Sat, 1 Jul 2006 14:07:43 +0800
From: emanihc <emanihc@gmail.com>
To: hadoop-dev@lucene.apache.org
Subject: hadoop 0.4.0 could not support windows + cygwin
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_Part_11062_8005253.1151734063786"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_11062_8005253.1151734063786
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

it seems hadoop 0.4.0 could not support windows + cygwin, belows are task
tracker log file content

2006-07-01 14:02:30,265 INFO org.apache.hadoop.mapred.TaskTracker: Problem
launching task: java.io.IOException: df: `/tmp/hadoop/mapred/local': No such
file or directory
 at org.apache.hadoop.fs.DF.doDF(DF.java:61)
 at org.apache.hadoop.fs.DF.<init>(DF.java:50)
 at org.apache.hadoop.fs.DF.<init>(DF.java:43)
 at org.apache.hadoop.mapred.TaskTracker.enoughFreeSpace(TaskTracker.java
:507)
 at org.apache.hadoop.mapred.TaskTracker.offerService(TaskTracker.java:354)
 at org.apache.hadoop.mapred.TaskTracker.run(TaskTracker.java:566)
 at org.apache.hadoop.mapred.TaskTracker.main(TaskTracker.java:1130)

2006-07-01 14:02:30,296 INFO org.apache.hadoop.mapred.TaskTracker: Lost
connection to JobTracker [server2/192.168.0.2:50020].  Retrying...
java.io.IOException: df: `/tmp/hadoop/mapred/local': No such file or
directory
 at org.apache.hadoop.fs.DF.doDF(DF.java:61)
 at org.apache.hadoop.fs.DF.<init>(DF.java:50)
 at org.apache.hadoop.fs.DF.<init>(DF.java:43)
 at org.apache.hadoop.mapred.TaskTracker.enoughFreeSpace(TaskTracker.java
:507)
 at org.apache.hadoop.mapred.TaskTracker.offerService(TaskTracker.java:434)
 at org.apache.hadoop.mapred.TaskTracker.run(TaskTracker.java:566)
 at org.apache.hadoop.mapred.TaskTracker.main(TaskTracker.java:1130)

------=_Part_11062_8005253.1151734063786--

From MAILER-DAEMON Sat Jul  1 20:10:46 2006
Return-Path: 
 <hadoop-dev-return-2355-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 63829 invoked from network); 1 Jul 2006 20:10:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jul 2006 20:10:46 -0000
Received: (qmail 97659 invoked by uid 500); 1 Jul 2006 20:10:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97620 invoked by uid 500); 1 Jul 2006 20:10:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97604 invoked by uid 99); 1 Jul 2006 20:10:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Jul 2006 13:10:45 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of sutter@gmail.com designates
 64.233.162.200 as permitted sender)
Received: from [64.233.162.200] (HELO nz-out-0102.google.com) (64.233.162.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Jul 2006 13:10:44 -0700
Received: by nz-out-0102.google.com with SMTP id v1so592596nzb
        for <hadoop-dev@lucene.apache.org>;
 Sat, 01 Jul 2006 13:10:23 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=cZXG3HczlzQ+zADQGoR3xv40A00vDYkOWN5S93ZrEUV0SfLMWHVXr7dWiZ2vLuX5H2H2Yzcl+iQx9CszN+fDVzthuG1drepDfjpN9d/lAI5BAxW/ybEQThL5rihrx9BCAJbW4igShjNFmwcmpRthMn77stJjOPSZvmvQygDmL24=
Received: by 10.36.19.19 with SMTP id 19mr2037525nzs;
        Sat, 01 Jul 2006 13:10:23 -0700 (PDT)
Received: by 10.36.132.16 with HTTP; Sat, 1 Jul 2006 13:10:23 -0700 (PDT)
Message-ID: <e1d10fc00607011310s2eb59bcdx3de2a5961ac98459@mail.gmail.com>
Date: Sat, 1 Jul 2006 13:10:23 -0700
From: "Paul Sutter" <sutter@gmail.com>
To: hadoop-dev@lucene.apache.org
Subject: Re: Hadoop Distributed File System requirements on Wiki
In-Reply-To: <44A5C920.5050808@yahoo-inc.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_Part_6118_14188224.1151784623771"
References: <44A5C920.5050808@yahoo-inc.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_6118_14188224.1151784623771
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This page is fantastic.

On 6/30/06, Konstantin Shvachko <shv@yahoo-inc.com> wrote:
>
> I've created a Wiki page that summarizes DFS requirements and proposed
> changes.
> This is a summary of discussions held in this mailing list and
> additional internal discussions.
> The page is here:
>
> http://wiki.apache.org/lucene-hadoop/DFS_requirements
>
> I see there is an ongoing related discussion in HADOOP-337.
> We prioritized our goals as
> (1) Reliability (which includes Recoverability and Availability)
> (2) Scalability
> (3) Functionality
> (4) Performance
> (5) other
> But then gave higher priority to some features like the append
> functionality.
>
> Happy holidays to everybody.
>
> --Konstantin Shvachko
>

------=_Part_6118_14188224.1151784623771--

From MAILER-DAEMON Sat Jul  1 21:34:13 2006
Return-Path: 
 <hadoop-dev-return-2356-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 73839 invoked from network); 1 Jul 2006 21:34:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jul 2006 21:34:13 -0000
Received: (qmail 49318 invoked by uid 500); 1 Jul 2006 21:34:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49279 invoked by uid 500); 1 Jul 2006 21:34:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49265 invoked by uid 99); 1 Jul 2006 21:34:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Jul 2006 14:34:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Jul 2006 14:34:11 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A22DC41037B
	for <hadoop-dev@lucene.apache.org>; Sat,  1 Jul 2006 21:32:30 +0000 (GMT)
Message-ID: <32217505.1151789550661.JavaMail.jira@brutus>
Date: Sat, 1 Jul 2006 21:32:30 +0000 (GMT+00:00)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-337) DFS files should be appendable
In-Reply-To: <17169077.1151702369853.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-337?page=comments#action_12418809 ] 

eric baldeschwieler commented on HADOOP-337:
--------------------------------------------

We generally support Paul's prioritization.  But we are also going to be moving up the tempo and volume of data we manage in the system, "A LOT".  If we find a small list of features to be cost effective investments, we'd like to be able to give them back to the community.

If it makes sense for us to invest significant man-power to produce a patch for this and can validate that said patch does not destabilize large clusters over a significant period of operation, I'd assume this wouldn't be that controversial, since this is a very natural extension of the API that does seem eventually inevitable (along with multiple appenders, which would be very, very helpful).  I think the thing we need to agree on is the testing criteria for acceptance, so we're not constantly derailing the community.

Do folks agree with the above?  If so, let's put more energy into thinking about how we are going to establish a testing / validation regime that will support innovation, rather than trying to kill innovation for safety's sake.  That way lies madness.  We'll be happy to help staff / fund such a testing policy.

(Anyone want to create an "enhancement" to discuss HDFS extension validation?)

> DFS files should be appendable
> ------------------------------
>
>          Key: HADOOP-337
>          URL: http://issues.apache.org/jira/browse/HADOOP-337
>      Project: Hadoop
>         Type: New Feature

>   Components: dfs
>     Versions: 0.1.0, 0.2.0, 0.1.1, 0.3.0, 0.4.0, 0.2.1, 0.3.1, 0.3.2
>  Environment: all
>     Reporter: Runping Qi

>
> Actually two related issues
> 1. One should be able to open an existing DFS file, to seek to a position and truncate the rest, and to append starting at the end (or where trancation happens) .
> 2. One should be able to read the writen data of a DFS file while other is writing/appending to the file

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Sat Jul  1 21:38:12 2006
Return-Path: 
 <hadoop-dev-return-2357-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 74437 invoked from network); 1 Jul 2006 21:38:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jul 2006 21:38:12 -0000
Received: (qmail 53165 invoked by uid 500); 1 Jul 2006 21:38:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53135 invoked by uid 500); 1 Jul 2006 21:38:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53126 invoked by uid 99); 1 Jul 2006 21:38:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Jul 2006 14:38:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Jul 2006 14:38:11 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A114341037C
	for <hadoop-dev@lucene.apache.org>; Sat,  1 Jul 2006 21:36:30 +0000 (GMT)
Message-ID: <12344220.1151789790656.JavaMail.jira@brutus>
Date: Sat, 1 Jul 2006 21:36:30 +0000 (GMT+00:00)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-252) add versioning to RPC
In-Reply-To: <23799650.1148510309896.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-252?page=comments#action_12418810 ] 

eric baldeschwieler commented on HADOOP-252:
--------------------------------------------

Maybe you should produce a one pager with a well thought out plan that covers all the corner cases?  Gather a couple of +1s and we can proceed.


> add versioning to RPC
> ---------------------
>
>          Key: HADOOP-252
>          URL: http://issues.apache.org/jira/browse/HADOOP-252
>      Project: Hadoop
>         Type: Improvement

>   Components: ipc
>     Versions: 0.3.0
>     Reporter: Yoram Arnon
>      Fix For: 0.5.0

>
> currently, any change to any rpc message breaks the protocol, with mysterious exceptions occurring at run time.
> a versioning sceme would have two benefits:
> - intelligent error messages, indicating that an upgrade is required
> - backwards compatibility could be supported.
> the proposal is to add a "const version" for each protocol, and a method: int getVersion(int version) that sends the client's version and receives the server's version. This would be the first method invoked on connection. Both sides then either agree on the lowest version number, providing backwards compatibility support, or abort the connection as "unsupported version".

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Sun Jul  2 00:42:13 2006
Return-Path: 
 <hadoop-dev-return-2358-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1571 invoked from network); 2 Jul 2006 00:42:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Jul 2006 00:42:13 -0000
Received: (qmail 51936 invoked by uid 500); 2 Jul 2006 00:42:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 51905 invoked by uid 500); 2 Jul 2006 00:42:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 51896 invoked by uid 99); 2 Jul 2006 00:42:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Jul 2006 17:42:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Jul 2006 17:42:11 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A33A27141F5
	for <hadoop-dev@lucene.apache.org>; Sun,  2 Jul 2006 00:40:30 +0000 (GMT)
Message-ID: <10077622.1151800830665.JavaMail.jira@brutus>
Date: Sun, 2 Jul 2006 00:40:30 +0000 (GMT+00:00)
From: "paul sutter (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-337) DFS files should be appendable
In-Reply-To: <17169077.1151702369853.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-337?page=comments#action_12418815 ] 

paul sutter commented on HADOOP-337:
------------------------------------


If Doug isnt able to talk you out of it, then you must really need it. So give him a chance, but if its OK with him its probably a good thing to do. We'd love to have it, but my intuition is flashing *complexity* when I consider it. Especially with multiple appenders.  Of course, you guys probably have a super elegant approach in mind. 

My last thought: if that "other" elegant distributed replicated block-based filesystem has this feature, its probably valuable. If it doesnt, then its probably superfluous.

> DFS files should be appendable
> ------------------------------
>
>          Key: HADOOP-337
>          URL: http://issues.apache.org/jira/browse/HADOOP-337
>      Project: Hadoop
>         Type: New Feature

>   Components: dfs
>     Versions: 0.1.0, 0.2.0, 0.1.1, 0.3.0, 0.4.0, 0.2.1, 0.3.1, 0.3.2
>  Environment: all
>     Reporter: Runping Qi

>
> Actually two related issues
> 1. One should be able to open an existing DFS file, to seek to a position and truncate the rest, and to append starting at the end (or where trancation happens) .
> 2. One should be able to read the writen data of a DFS file while other is writing/appending to the file

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Sun Jul  2 09:42:23 2006
Return-Path: 
 <hadoop-dev-return-2359-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 73935 invoked from network); 2 Jul 2006 09:42:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Jul 2006 09:42:23 -0000
Received: (qmail 40074 invoked by uid 500); 2 Jul 2006 09:42:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40040 invoked by uid 500); 2 Jul 2006 09:42:19 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 39654 invoked by uid 99); 2 Jul 2006 09:42:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Jul 2006 02:42:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Jul 2006 02:42:11 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D6E5E7141FA
	for <hadoop-dev@lucene.apache.org>; Sun,  2 Jul 2006 09:40:29 +0000 (GMT)
Message-ID: <9594370.1151833229877.JavaMail.jira@brutus>
Date: Sun, 2 Jul 2006 09:40:29 +0000 (GMT+00:00)
From: "Johan Oskarson (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-340) Using wildcards in config pathnames
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Using wildcards in config pathnames
-----------------------------------

         Key: HADOOP-340
         URL: http://issues.apache.org/jira/browse/HADOOP-340
     Project: Hadoop
        Type: Improvement

  Components: conf  
    Versions: 0.4.0    
 Environment: a cluster with different disk setups
    Reporter: Johan Oskarson
    Priority: Minor


In our cluster there's machines with very different disk setups
I've solved this by not rsyncing hadoop-site.xml, but as you probably understand this means new settings will not get copied properly.

I'd like to be able to use wildcards in the dfs.data.dir path for example:
<property>
  <name>dfs.data.dir</name>
    <value>/home/hadoop/disk*/dfs/data</value>
</property>

then every disk mounted in that directory would be used

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jul  3 11:52:15 2006
Return-Path: 
 <hadoop-dev-return-2360-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75151 invoked from network); 3 Jul 2006 11:52:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jul 2006 11:52:15 -0000
Received: (qmail 65976 invoked by uid 500); 3 Jul 2006 11:52:14 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 65941 invoked by uid 500); 3 Jul 2006 11:52:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 65931 invoked by uid 99); 3 Jul 2006 11:52:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 04:52:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 04:52:13 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D1B9071421B
	for <hadoop-dev@lucene.apache.org>; Mon,  3 Jul 2006 11:50:29 +0000 (GMT)
Message-ID: <18620957.1151927429856.JavaMail.jira@brutus>
Date: Mon, 3 Jul 2006 11:50:29 +0000 (GMT+00:00)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-341) Enhance distcp to handle *http* as a
 'source protocol'.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Enhance distcp to handle *http* as a 'source protocol'.
-------------------------------------------------------

         Key: HADOOP-341
         URL: http://issues.apache.org/jira/browse/HADOOP-341
     Project: Hadoop
        Type: Improvement

  Components: util  
    Reporter: Arun C Murthy


Requirements:

  Presently distcp recursively copies a directory from one dfs to another i.e. both source and destination of of the *dfs* protocol.
  Enhance it to handle *http* as the source protocol i.e. support copying files from arbitrary http-based sources into the dfs.

Design:
  
  Follow distcp's current design: one map task per file which needs to be copied.

  Caveat: distcp handles *recursive* copying by listing sub-directories; this is not as feasible with a http-based source since things like 'fancy-indexing' might not be enabled on the web-server (for all sub-locations recursively too), and even if it is enabled it will mean tedious parsing of the html served to glean the sub-directories etc. Hence the idea is to support an input file (via a -f option) which contains a list of the http-based urls which represent multiple source files.


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jul  3 12:28:15 2006
Return-Path: 
 <hadoop-dev-return-2361-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93610 invoked from network); 3 Jul 2006 12:28:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jul 2006 12:28:15 -0000
Received: (qmail 7383 invoked by uid 500); 3 Jul 2006 12:28:14 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 7361 invoked by uid 500); 3 Jul 2006 12:28:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 7352 invoked by uid 99); 3 Jul 2006 12:28:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 05:28:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 05:28:13 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D1445410397
	for <hadoop-dev@lucene.apache.org>; Mon,  3 Jul 2006 12:26:29 +0000 (GMT)
Message-ID: <18424480.1151929589854.JavaMail.jira@brutus>
Date: Mon, 3 Jul 2006 12:26:29 +0000 (GMT+00:00)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-342) Design/Implement a tool to support
 archival and analysis of logfiles.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Design/Implement a tool to support archival and analysis of logfiles.
---------------------------------------------------------------------

         Key: HADOOP-342
         URL: http://issues.apache.org/jira/browse/HADOOP-342
     Project: Hadoop
        Type: New Feature

    Reporter: Arun C Murthy


Requirements:

  a) Create a tool support archival of logfiles (from diverse sources) in hadoop's dfs.
  b) The tool should also support analysis of the logfiles via grep/sort primitives. The tool should allow for fairly generic pattern 'grep's and let users 'sort' the matching lines (from grep) on 'columns' of their choice.

  E.g. from hadoop logs: Look for all log-lines with 'FATAL' and sort them based on timestamps (column x)  and then on column y (column x, followed by column y).


Design/Implementation:

  a) Log Archival

    Archival of logs from diverse sources can be accomplished using the *distcp* tool (HADOOP-341).
  
  b) Log analysis

    The idea is to enable users of the tool to perform analysis of logs via grep/sort primitives.

    This can be accomplished via a relatively simple Map-Reduce task where the map does the *grep* for the given pattern via RegexMapper and then the implicit *sort* (reducer) is used with a custom Comparator which performs the user-specified comparision (columns). 

    The sort/grep specs can be fairly powerful by letting the user of the tool use java's in-built regex patterns (java.util.regex).


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jul  3 12:52:17 2006
Return-Path: 
 <hadoop-dev-return-2362-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 540 invoked from network); 3 Jul 2006 12:52:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jul 2006 12:52:17 -0000
Received: (qmail 46886 invoked by uid 500); 3 Jul 2006 12:52:16 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 46859 invoked by uid 500); 3 Jul 2006 12:52:16 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46850 invoked by uid 99); 3 Jul 2006 12:52:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 05:52:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 05:52:15 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1285B410398
	for <hadoop-dev@lucene.apache.org>; Mon,  3 Jul 2006 12:50:32 +0000 (GMT)
Message-ID: <28365365.1151931032073.JavaMail.jira@brutus>
Date: Mon, 3 Jul 2006 12:50:32 +0000 (GMT+00:00)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-211) logging improvements for Hadoop
In-Reply-To: <11693488.1147389488398.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-211?page=comments#action_12418962 ] 

Sanjay Dahiya commented on HADOOP-211:
--------------------------------------

I'm looking at support logging features like (cap on time/size, gzip) and archiving log files into DFS. Log4j 1.3 with XML configurations makes it real easy to implement all these with the RollingPolicies and Triggers separated from appenders. properties file format doesn't allow for specifying RollingPolicies externally for existing Appenders. 
Are you embedding Tomcat within Hadoop or using Hadoop from a webapp? Is it possible to make tomcat use its own properties file or configure Log4J for the webapp separately in the webapp's class loader? 

> logging improvements for Hadoop
> -------------------------------
>
>          Key: HADOOP-211
>          URL: http://issues.apache.org/jira/browse/HADOOP-211
>      Project: Hadoop
>         Type: Improvement

>     Versions: 0.2.0
>     Reporter: Sameer Paranjpye
>     Assignee: Sameer Paranjpye
>     Priority: Minor
>      Fix For: 0.3.0
>  Attachments: acl-log4j-II.patch.tgz, acl-log4j-webapps.patch, acl-log4j.patch, commons_logging_patch
>
> Here's a proposal for some impovements to the way Hadoop does logging. It advocates 3 
> broad changes to the way logging is currently done, these being:
> - The use of a uniform logging format by all Hadoop subsystems
> - The use of Apache commons logging as a facade above an underlying logging framework
> - The use of Log4J as the underlying logging framework instead of java.util.logging
> This is largely polishing work, but it seems like it would make log analysis and debugging
> easier in the short term. In the long term, it would future proof logging to the extent of
> allowing the logging framework used to change while requiring minimal code change. The 
> propos changes are motivated by the following requirements which we think Hadoops 
> logging should meet:
> - Hadoops logs should be amenable to analysis by tools like grep, sed, awk etc.
> - Log entries should be clearly annotated with a timestamp and a logging level
> - Log entries should be traceable to the subsystem from which they originated
> - The logging implementation should allow log entries to be annotated with source code 
> location information like classname, methodname, file and line number, without requiring
> code changes
> - It should be possible to change the logging implementation used without having to change
> thousands of lines of code
> - The mapping of loggers to destinations (files, directories, servers etc.) should be 
> specified and modifiable via configuration
> Uniform logging format:
> All Hadoop logs should have the following structure.
> <Header>\n
> <LogEntry>\n [<Exception>\n]
> .
> .
> .
> where the header line specifies the format of each log entry. The header line has the format:
> '# <Fieldname> <Fieldname>...\n'. 
> The default format of each log entry is: '# Timestamp Level LoggerName Message', where:
> - Timestamp is a date and time in the format MM/DD/YYYY:HH:MM:SS
> - Level is the logging level (FATAL, WARN, DEBUG, TRACE, etc.)
> - LoggerName is the short name of the logging subsystem from which the message originated e.g.
> fs.FSNamesystem, dfs.Datanode etc.
> - Message is the log message produced
> Why Apache commons logging and Log4J?
> Apache commons logging is a facade meant to be used as a wrapper around an underlying logging
> implementation. Bridges from Apache commons logging to popular logging implementations 
> (Java logging, Log4J, Avalon etc.) are implemented and available as part of the commons logging
> distribution. Implementing a bridge to an unsupported implementation is fairly striaghtforward
> and involves the implementation of subclasses of the commons logging LogFactory and Logger 
> classes. Using Apache commons logging and making all logging calls through it enables us to
> move to a different logging implementation by simply changing configuration in the best case.
> Even otherwise, it incurs minimal code churn overhead.
> Log4J offers a few benefits over java.util.logging that make it a more desirable choice for the
> logging back end.
> - Configuration Flexibility: The mapping of loggers to destinations (files, sockets etc.)
> can be completely specified in configuration. It is possible to do this with Java logging as
> well, however, configuration is a lot more restrictive. For instance, with Java logging all 
> log files must have names derived from the same pattern. For the namenode, log files could 
> be named with the pattern "%h/namenode%u.log" which would put log files in the user.home
> directory with names like namenode0.log etc. With Log4J it would be possible to configure
> the namenode to emit log files with different names, say heartbeats.log, namespace.log,
> clients.log etc. Configuration variables in Log4J can also have the values of system 
> properties embedded in them.
> - Takes wrappers into account: Log4J takes into account the possibility that an application
> may be invoking it via a wrapper, such as Apache commons logging. This is important because
> logging event objects must be able to infer the context of the logging call such as classname,
> methodname etc. Inferring context is a relatively expensive operation that involves creating
> an exception and examining the stack trace to find the frame just before the first frame 
> of the logging framework. It is therefore done lazily only when this information actually 
> needs to be logged. Log4J can be instructed to look for the frame corresponding to the wrapper
> class, Java logging cannot. In the case of Java logging this means that a) the bridge from 
> Apache commons logging is responsible for inferring the calling context and setting it in the 
> logging event and b) this inference has to be done on every logging call regardless of whether
> or not it is needed.
> - More handy features: Log4J has some handy features that Java logging doesn't. A couple
> of examples of these:
> a) Date based rolling of log files 
> b) Format control through configuration. Log4J has a PatternLayout class that can be 
> configured to generate logs with a user specified pattern. The logging format described
> above can be described as "%d{MM/dd/yyyy:HH:mm:SS} %c{2} %p %m". The format specifiers
> indicate that each log line should have the date and time followed by the logger name followed
> by the logging level or priority followed by the application generated message.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jul  3 18:34:18 2006
Return-Path: 
 <hadoop-dev-return-2363-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23450 invoked from network); 3 Jul 2006 18:34:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jul 2006 18:34:18 -0000
Received: (qmail 60231 invoked by uid 500); 3 Jul 2006 18:34:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 60207 invoked by uid 500); 3 Jul 2006 18:34:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 60198 invoked by uid 99); 3 Jul 2006 18:34:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 11:34:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 11:34:14 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9F8AC4103A5
	for <hadoop-dev@lucene.apache.org>; Mon,  3 Jul 2006 18:32:30 +0000 (GMT)
Message-ID: <33274182.1151951550650.JavaMail.jira@brutus>
Date: Mon, 3 Jul 2006 18:32:30 +0000 (GMT+00:00)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-341) Enhance distcp to handle *http* as a
 'source protocol'.
In-Reply-To: <18620957.1151927429856.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-341?page=all ]

Arun C Murthy updated HADOOP-341:
---------------------------------

    Attachment: distcp.patch

Here's a patch which enables distcp to work with http based source files. 

It also provides a -f option to distcp to provide an input file with urls (arbitrary combinations of dfs & http source paths).

> Enhance distcp to handle *http* as a 'source protocol'.
> -------------------------------------------------------
>
>          Key: HADOOP-341
>          URL: http://issues.apache.org/jira/browse/HADOOP-341
>      Project: Hadoop
>         Type: Improvement

>   Components: util
>     Reporter: Arun C Murthy
>  Attachments: distcp.patch
>
> Requirements:
>   Presently distcp recursively copies a directory from one dfs to another i.e. both source and destination of of the *dfs* protocol.
>   Enhance it to handle *http* as the source protocol i.e. support copying files from arbitrary http-based sources into the dfs.
> Design:
>   
>   Follow distcp's current design: one map task per file which needs to be copied.
>   Caveat: distcp handles *recursive* copying by listing sub-directories; this is not as feasible with a http-based source since things like 'fancy-indexing' might not be enabled on the web-server (for all sub-locations recursively too), and even if it is enabled it will mean tedious parsing of the html served to glean the sub-directories etc. Hence the idea is to support an input file (via a -f option) which contains a list of the http-based urls which represent multiple source files.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jul  3 18:38:16 2006
Return-Path: 
 <hadoop-dev-return-2364-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 24992 invoked from network); 3 Jul 2006 18:38:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jul 2006 18:38:16 -0000
Received: (qmail 66795 invoked by uid 500); 3 Jul 2006 18:38:15 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66642 invoked by uid 500); 3 Jul 2006 18:38:15 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66633 invoked by uid 99); 3 Jul 2006 18:38:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 11:38:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 11:38:14 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A039E4103A4
	for <hadoop-dev@lucene.apache.org>; Mon,  3 Jul 2006 18:36:30 +0000 (GMT)
Message-ID: <22493501.1151951790653.JavaMail.jira@brutus>
Date: Mon, 3 Jul 2006 18:36:30 +0000 (GMT+00:00)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-341) Enhance distcp to handle *http* as a
 'source protocol'.
In-Reply-To: <18620957.1151927429856.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-341?page=comments#action_12418999 ] 

Arun C Murthy commented on HADOOP-341:
--------------------------------------

Forgot to add: the above patch (distcp.patch) does a significant refactoring of CopyFiles.java by providing a base CopyFilesMapper class which is subclassed in DFSCopyFilesMapper (which contains Milind's existing code) and HttpCopyFilesMapper (for http-based sources). In future we can add other protocols (ftp?) by creating new subclasses (FtpCopyFilesMapper).

thanks,
Arun

PS: Apologies for the extra spam.

> Enhance distcp to handle *http* as a 'source protocol'.
> -------------------------------------------------------
>
>          Key: HADOOP-341
>          URL: http://issues.apache.org/jira/browse/HADOOP-341
>      Project: Hadoop
>         Type: Improvement

>   Components: util
>     Reporter: Arun C Murthy
>  Attachments: distcp.patch
>
> Requirements:
>   Presently distcp recursively copies a directory from one dfs to another i.e. both source and destination of of the *dfs* protocol.
>   Enhance it to handle *http* as the source protocol i.e. support copying files from arbitrary http-based sources into the dfs.
> Design:
>   
>   Follow distcp's current design: one map task per file which needs to be copied.
>   Caveat: distcp handles *recursive* copying by listing sub-directories; this is not as feasible with a http-based source since things like 'fancy-indexing' might not be enabled on the web-server (for all sub-locations recursively too), and even if it is enabled it will mean tedious parsing of the html served to glean the sub-directories etc. Hence the idea is to support an input file (via a -f option) which contains a list of the http-based urls which represent multiple source files.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jul  3 19:12:16 2006
Return-Path: 
 <hadoop-dev-return-2365-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32870 invoked from network); 3 Jul 2006 19:12:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jul 2006 19:12:16 -0000
Received: (qmail 4591 invoked by uid 500); 3 Jul 2006 19:12:15 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 4560 invoked by uid 500); 3 Jul 2006 19:12:15 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 4551 invoked by uid 99); 3 Jul 2006 19:12:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 12:12:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 12:12:14 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A643C4103A5
	for <hadoop-dev@lucene.apache.org>; Mon,  3 Jul 2006 19:10:30 +0000 (GMT)
Message-ID: <12605878.1151953830678.JavaMail.jira@brutus>
Date: Mon, 3 Jul 2006 19:10:30 +0000 (GMT+00:00)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-342) Design/Implement a tool to support
 archival and analysis of logfiles.
In-Reply-To: <18424480.1151929589854.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-342?page=comments#action_12419007 ] 

eric baldeschwieler commented on HADOOP-342:
--------------------------------------------

Sounds good.  Will the output be one or more DFS files?  stdout?  Will it be text or a sequence file?
Keeping everything in text seems most appropriate.

Contributing a generic sorter sounds very valuable.  Could you spec it in more detail.

> Design/Implement a tool to support archival and analysis of logfiles.
> ---------------------------------------------------------------------
>
>          Key: HADOOP-342
>          URL: http://issues.apache.org/jira/browse/HADOOP-342
>      Project: Hadoop
>         Type: New Feature

>     Reporter: Arun C Murthy

>
> Requirements:
>   a) Create a tool support archival of logfiles (from diverse sources) in hadoop's dfs.
>   b) The tool should also support analysis of the logfiles via grep/sort primitives. The tool should allow for fairly generic pattern 'grep's and let users 'sort' the matching lines (from grep) on 'columns' of their choice.
>   E.g. from hadoop logs: Look for all log-lines with 'FATAL' and sort them based on timestamps (column x)  and then on column y (column x, followed by column y).
> Design/Implementation:
>   a) Log Archival
>     Archival of logs from diverse sources can be accomplished using the *distcp* tool (HADOOP-341).
>   
>   b) Log analysis
>     The idea is to enable users of the tool to perform analysis of logs via grep/sort primitives.
>     This can be accomplished via a relatively simple Map-Reduce task where the map does the *grep* for the given pattern via RegexMapper and then the implicit *sort* (reducer) is used with a custom Comparator which performs the user-specified comparision (columns). 
>     The sort/grep specs can be fairly powerful by letting the user of the tool use java's in-built regex patterns (java.util.regex).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jul  3 19:41:16 2006
Return-Path: 
 <hadoop-dev-return-2366-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 45875 invoked from network); 3 Jul 2006 19:41:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jul 2006 19:41:16 -0000
Received: (qmail 39514 invoked by uid 500); 3 Jul 2006 19:41:15 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 39476 invoked by uid 500); 3 Jul 2006 19:41:15 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 39467 invoked by uid 99); 3 Jul 2006 19:41:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 12:41:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 12:41:14 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9F0A64103A5
	for <hadoop-dev@lucene.apache.org>; Mon,  3 Jul 2006 19:39:30 +0000 (GMT)
Message-ID: <29371765.1151955570648.JavaMail.jira@brutus>
Date: Mon, 3 Jul 2006 19:39:30 +0000 (GMT+00:00)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-342) Design/Implement a tool to support
 archival and analysis of logfiles.
In-Reply-To: <18424480.1151929589854.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-342?page=comments#action_12419011 ] 

Arun C Murthy commented on HADOOP-342:
--------------------------------------

Should have clarified this: the plan is to let the user specify an output directory in which a single text file will contain the output of the 'analysis'.

Generic Sorter:

  The generic sorter basically lets the user specify a column separator and a spec for priority of columns. 
  The Comparator's *compare* function (implements WritableComparable) then splits each sequence of data based on user specified separator and then compares the 2 data streams on the given priorities. 

  E.g. -sortColumnSpec 2,0,1 -separator \t
  (0-based columns)

  If there is enough interest, I can push this into mapred.lib. Appreciate any suggestions.

thanks,
Arun


> Design/Implement a tool to support archival and analysis of logfiles.
> ---------------------------------------------------------------------
>
>          Key: HADOOP-342
>          URL: http://issues.apache.org/jira/browse/HADOOP-342
>      Project: Hadoop
>         Type: New Feature

>     Reporter: Arun C Murthy

>
> Requirements:
>   a) Create a tool support archival of logfiles (from diverse sources) in hadoop's dfs.
>   b) The tool should also support analysis of the logfiles via grep/sort primitives. The tool should allow for fairly generic pattern 'grep's and let users 'sort' the matching lines (from grep) on 'columns' of their choice.
>   E.g. from hadoop logs: Look for all log-lines with 'FATAL' and sort them based on timestamps (column x)  and then on column y (column x, followed by column y).
> Design/Implementation:
>   a) Log Archival
>     Archival of logs from diverse sources can be accomplished using the *distcp* tool (HADOOP-341).
>   
>   b) Log analysis
>     The idea is to enable users of the tool to perform analysis of logs via grep/sort primitives.
>     This can be accomplished via a relatively simple Map-Reduce task where the map does the *grep* for the given pattern via RegexMapper and then the implicit *sort* (reducer) is used with a custom Comparator which performs the user-specified comparision (columns). 
>     The sort/grep specs can be fairly powerful by letting the user of the tool use java's in-built regex patterns (java.util.regex).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jul  4 03:06:17 2006
Return-Path: 
 <hadoop-dev-return-2367-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 49584 invoked from network); 4 Jul 2006 03:06:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Jul 2006 03:06:17 -0000
Received: (qmail 16441 invoked by uid 500); 4 Jul 2006 03:06:16 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 16404 invoked by uid 500); 4 Jul 2006 03:06:16 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 16395 invoked by uid 99); 4 Jul 2006 03:06:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 20:06:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 20:06:15 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 099394103AB
	for <hadoop-dev@lucene.apache.org>; Tue,  4 Jul 2006 03:04:31 +0000 (GMT)
Message-ID: <23952534.1151982271034.JavaMail.jira@brutus>
Date: Tue, 4 Jul 2006 03:04:31 +0000 (GMT+00:00)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-342) Design/Implement a tool to support
 archival and analysis of logfiles.
In-Reply-To: <18424480.1151929589854.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-342?page=all ]

Arun C Murthy updated HADOOP-342:
---------------------------------

    Attachment: logalyzer.patch

Here's the 'logalyzer' tool.

Doug: I felt that it made sense to create a org.apache.hadoop.tools package for logalyzer and other such tools in the future... let me know if you prefer it to be in some other package and i'll update it accordingly.

thanks,
Arun

> Design/Implement a tool to support archival and analysis of logfiles.
> ---------------------------------------------------------------------
>
>          Key: HADOOP-342
>          URL: http://issues.apache.org/jira/browse/HADOOP-342
>      Project: Hadoop
>         Type: New Feature

>     Reporter: Arun C Murthy
>  Attachments: logalyzer.patch
>
> Requirements:
>   a) Create a tool support archival of logfiles (from diverse sources) in hadoop's dfs.
>   b) The tool should also support analysis of the logfiles via grep/sort primitives. The tool should allow for fairly generic pattern 'grep's and let users 'sort' the matching lines (from grep) on 'columns' of their choice.
>   E.g. from hadoop logs: Look for all log-lines with 'FATAL' and sort them based on timestamps (column x)  and then on column y (column x, followed by column y).
> Design/Implementation:
>   a) Log Archival
>     Archival of logs from diverse sources can be accomplished using the *distcp* tool (HADOOP-341).
>   
>   b) Log analysis
>     The idea is to enable users of the tool to perform analysis of logs via grep/sort primitives.
>     This can be accomplished via a relatively simple Map-Reduce task where the map does the *grep* for the given pattern via RegexMapper and then the implicit *sort* (reducer) is used with a custom Comparator which performs the user-specified comparision (columns). 
>     The sort/grep specs can be fairly powerful by letting the user of the tool use java's in-built regex patterns (java.util.regex).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jul  4 05:44:16 2006
Return-Path: 
 <hadoop-dev-return-2368-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76169 invoked from network); 4 Jul 2006 05:44:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Jul 2006 05:44:16 -0000
Received: (qmail 13842 invoked by uid 500); 4 Jul 2006 05:44:16 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13810 invoked by uid 500); 4 Jul 2006 05:44:16 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13800 invoked by uid 99); 4 Jul 2006 05:44:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 22:44:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 22:44:15 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A03E44103AF
	for <hadoop-dev@lucene.apache.org>; Tue,  4 Jul 2006 05:42:30 +0000 (GMT)
Message-ID: <11274280.1151991750653.JavaMail.jira@brutus>
Date: Tue, 4 Jul 2006 05:42:30 +0000 (GMT+00:00)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-312) Connections should not be cached
In-Reply-To: <13061881.1150916131961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-312?page=comments#action_12419048 ] 

Devaraj Das commented on HADOOP-312:
------------------------------------

Had a discussion with Eric/Owen on this subject and decided to do the following:
* Have time-based connection caching - i.e., on the client side, disconnect those connections that have been idle for a (configurable) period of time (default is 1 sec).
* Postpone tweaking the heartbeat logic until we see a problem there.

> Connections should not be cached
> --------------------------------
>
>          Key: HADOOP-312
>          URL: http://issues.apache.org/jira/browse/HADOOP-312
>      Project: Hadoop
>         Type: Improvement

>   Components: ipc
>     Versions: 0.4.0
>     Reporter: Devaraj Das
>  Attachments: config_connection_cache.patch
>
> Servers and clients (client include datanodes, tasktrackers, DFSClients & tasks) should not cache connections or maybe cache them for very short periods of time. Clients should set up & tear down connections to the servers everytime they need to contact the servers (including the heartbeats). If connection is cached, then reuse the existing connection for a few subsequent transactions until the connection expires. The heartbeat interval should be more so that many more clients (order of  tens of thousands) can be accomodated within 1 heartbeat interval.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jul  4 08:34:18 2006
Return-Path: 
 <hadoop-dev-return-2369-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32389 invoked from network); 4 Jul 2006 08:34:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Jul 2006 08:34:18 -0000
Received: (qmail 44053 invoked by uid 500); 4 Jul 2006 08:34:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 43827 invoked by uid 500); 4 Jul 2006 08:34:16 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 43818 invoked by uid 99); 4 Jul 2006 08:34:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jul 2006 01:34:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jul 2006 01:34:15 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9EADC714219
	for <hadoop-dev@lucene.apache.org>; Tue,  4 Jul 2006 08:32:30 +0000 (GMT)
Message-ID: <25609960.1152001950646.JavaMail.jira@brutus>
Date: Tue, 4 Jul 2006 08:32:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-342) Design/Implement a tool to support
 archival and analysis of logfiles.
In-Reply-To: <18424480.1151929589854.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-342?page=comments#action_12419061 ] 

Doug Cutting commented on HADOOP-342:
-------------------------------------

I will look at your patch more closely soon.

I think it would be good, rather than copy the logs into DFS, to use HTTP to retrieve the map input.  Ideally, map tasks would be assigned to nodes where the log data is local.

This could be implemented as an InputFormat that is parameterized by date.  For example, one might specify something like:

job.setInputFormat(LogInputFormat.class);
job.set("log.input.start", "2006-07-13 12:00:00");
job.set("log.input.end", "2006-07-13 15:00:00");

The set of hosts can be determined automatically to be all hosts in the cluster.  One could also specify a job id, in which case the job's start and end time would be used, or a start job id and end job id.

We might implement parts of this by enhancing the web server run on each tasktracker, e.g., to directly support access to logs by date range.

Does this make sense?

> Design/Implement a tool to support archival and analysis of logfiles.
> ---------------------------------------------------------------------
>
>          Key: HADOOP-342
>          URL: http://issues.apache.org/jira/browse/HADOOP-342
>      Project: Hadoop
>         Type: New Feature

>     Reporter: Arun C Murthy
>  Attachments: logalyzer.patch
>
> Requirements:
>   a) Create a tool support archival of logfiles (from diverse sources) in hadoop's dfs.
>   b) The tool should also support analysis of the logfiles via grep/sort primitives. The tool should allow for fairly generic pattern 'grep's and let users 'sort' the matching lines (from grep) on 'columns' of their choice.
>   E.g. from hadoop logs: Look for all log-lines with 'FATAL' and sort them based on timestamps (column x)  and then on column y (column x, followed by column y).
> Design/Implementation:
>   a) Log Archival
>     Archival of logs from diverse sources can be accomplished using the *distcp* tool (HADOOP-341).
>   
>   b) Log analysis
>     The idea is to enable users of the tool to perform analysis of logs via grep/sort primitives.
>     This can be accomplished via a relatively simple Map-Reduce task where the map does the *grep* for the given pattern via RegexMapper and then the implicit *sort* (reducer) is used with a custom Comparator which performs the user-specified comparision (columns). 
>     The sort/grep specs can be fairly powerful by letting the user of the tool use java's in-built regex patterns (java.util.regex).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jul  4 21:04:18 2006
Return-Path: 
 <hadoop-dev-return-2370-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10331 invoked from network); 4 Jul 2006 21:04:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Jul 2006 21:04:18 -0000
Received: (qmail 10287 invoked by uid 500); 4 Jul 2006 21:04:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 10124 invoked by uid 500); 4 Jul 2006 21:04:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 10111 invoked by uid 99); 4 Jul 2006 21:04:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jul 2006 14:04:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jul 2006 14:04:16 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A99777141F4
	for <hadoop-dev@lucene.apache.org>; Tue,  4 Jul 2006 21:02:30 +0000 (GMT)
Message-ID: <23487152.1152046950691.JavaMail.jira@brutus>
Date: Tue, 4 Jul 2006 21:02:30 +0000 (GMT+00:00)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-342) Design/Implement a tool to support
 archival and analysis of logfiles.
In-Reply-To: <18424480.1151929589854.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-342?page=comments#action_12419183 ] 

eric baldeschwieler commented on HADOOP-342:
--------------------------------------------

It does make sense.  It might make sense to do it as a second pass though.

We've got lots of logs from various sources we want this tool to work on.  In many cases loading them into hadoop is a logical first step.

We should make sure the loading (or HTTP scanning) is distinct from the query tools.

> Design/Implement a tool to support archival and analysis of logfiles.
> ---------------------------------------------------------------------
>
>          Key: HADOOP-342
>          URL: http://issues.apache.org/jira/browse/HADOOP-342
>      Project: Hadoop
>         Type: New Feature

>     Reporter: Arun C Murthy
>  Attachments: logalyzer.patch
>
> Requirements:
>   a) Create a tool support archival of logfiles (from diverse sources) in hadoop's dfs.
>   b) The tool should also support analysis of the logfiles via grep/sort primitives. The tool should allow for fairly generic pattern 'grep's and let users 'sort' the matching lines (from grep) on 'columns' of their choice.
>   E.g. from hadoop logs: Look for all log-lines with 'FATAL' and sort them based on timestamps (column x)  and then on column y (column x, followed by column y).
> Design/Implementation:
>   a) Log Archival
>     Archival of logs from diverse sources can be accomplished using the *distcp* tool (HADOOP-341).
>   
>   b) Log analysis
>     The idea is to enable users of the tool to perform analysis of logs via grep/sort primitives.
>     This can be accomplished via a relatively simple Map-Reduce task where the map does the *grep* for the given pattern via RegexMapper and then the implicit *sort* (reducer) is used with a custom Comparator which performs the user-specified comparision (columns). 
>     The sort/grep specs can be fairly powerful by letting the user of the tool use java's in-built regex patterns (java.util.regex).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jul  4 21:22:49 2006
Return-Path: 
 <hadoop-dev-return-2371-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17617 invoked from network); 4 Jul 2006 21:22:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Jul 2006 21:22:49 -0000
Received: (qmail 37446 invoked by uid 500); 4 Jul 2006 21:22:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 37291 invoked by uid 500); 4 Jul 2006 21:22:48 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 37282 invoked by uid 99); 4 Jul 2006 21:22:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jul 2006 14:22:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.228.160.55] (HELO mercury2.inktomi.com) (66.228.160.55)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jul 2006 14:22:47 -0700
Received: from inbox1.inktomi.com (inbox1.inktomi.com [66.228.160.102])
	by mercury2.inktomi.com (8.13.4/8.13.4) with ESMTP id k64LMPHg014629
	for <hadoop-dev@lucene.apache.org>; Tue, 4 Jul 2006 14:22:25 -0700 (PDT)
Received: from [192.168.1.66] ([172.21.179.6]) by
          inbox1.inktomi.com (Netscape Messaging Server 4.1) with ESMTP id
          J1WE1C00.QZO for <hadoop-dev@lucene.apache.org>; Tue, 4 Jul 2006
          14:22:24 -0700
Mime-Version: 1.0 (Apple Message framework v624)
In-Reply-To: <29371765.1151955570648.JavaMail.jira@brutus>
References: <29371765.1151955570648.JavaMail.jira@brutus>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <61242bb3e658cc09ef887f110be91fe2@inktomi.com>
Content-Transfer-Encoding: 7bit
From: "Arkady Borkovsky" <arkady@inktomi.com>
Subject: Re: [jira] Commented: (HADOOP-342) Design/Implement a tool to support
 archival and analysis of logfiles.
Date: Tue, 4 Jul 2006 14:22:20 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.624)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

It would be very nice to  be able to see (analyze) the logs of a task  
that is still running.

-- ab

On Jul 3, 2006, at 12:39 PM, Arun C Murthy (JIRA) wrote:

>     [  
> http://issues.apache.org/jira/browse/HADOOP-342? 
> page=comments#action_12419011 ]
>
> Arun C Murthy commented on HADOOP-342:
> --------------------------------------
>
> Should have clarified this: the plan is to let the user specify an  
> output directory in which a single text file will contain the output  
> of the 'analysis'.
>
> Generic Sorter:
>
>   The generic sorter basically lets the user specify a column  
> separator and a spec for priority of columns.
>   The Comparator's *compare* function (implements WritableComparable)  
> then splits each sequence of data based on user specified separator  
> and then compares the 2 data streams on the given priorities.
>
>   E.g. -sortColumnSpec 2,0,1 -separator \t
>   (0-based columns)
>
>   If there is enough interest, I can push this into mapred.lib.  
> Appreciate any suggestions.
>
> thanks,
> Arun
>
>
>> Design/Implement a tool to support archival and analysis of logfiles.
>> ---------------------------------------------------------------------
>>
>>          Key: HADOOP-342
>>          URL: http://issues.apache.org/jira/browse/HADOOP-342
>>      Project: Hadoop
>>         Type: New Feature
>
>>     Reporter: Arun C Murthy
>
>>
>> Requirements:
>>   a) Create a tool support archival of logfiles (from diverse  
>> sources) in hadoop's dfs.
>>   b) The tool should also support analysis of the logfiles via  
>> grep/sort primitives. The tool should allow for fairly generic  
>> pattern 'grep's and let users 'sort' the matching lines (from grep)  
>> on 'columns' of their choice.
>>   E.g. from hadoop logs: Look for all log-lines with 'FATAL' and sort  
>> them based on timestamps (column x)  and then on column y (column x,  
>> followed by column y).
>> Design/Implementation:
>>   a) Log Archival
>>     Archival of logs from diverse sources can be accomplished using  
>> the *distcp* tool (HADOOP-341).
>>
>>   b) Log analysis
>>     The idea is to enable users of the tool to perform analysis of  
>> logs via grep/sort primitives.
>>     This can be accomplished via a relatively simple Map-Reduce task  
>> where the map does the *grep* for the given pattern via RegexMapper  
>> and then the implicit *sort* (reducer) is used with a custom  
>> Comparator which performs the user-specified comparision (columns).
>>     The sort/grep specs can be fairly powerful by letting the user of  
>> the tool use java's in-built regex patterns (java.util.regex).
>
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the administrators:
>    http://issues.apache.org/jira/secure/Administrators.jspa
> -
> For more information on JIRA, see:
>    http://www.atlassian.com/software/jira
>


From MAILER-DAEMON Wed Jul  5 06:15:41 2006
Return-Path: 
 <hadoop-dev-return-2372-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 21610 invoked from network); 5 Jul 2006 06:15:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jul 2006 06:15:41 -0000
Received: (qmail 967 invoked by uid 500); 5 Jul 2006 06:15:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 941 invoked by uid 500); 5 Jul 2006 06:15:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 930 invoked by uid 99); 5 Jul 2006 06:15:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jul 2006 23:15:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.126.228.150] (HELO rsmtp2.corp.yahoo.com)
 (207.126.228.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jul 2006 23:15:37 -0700
Received: from [10.0.1.2] (snvvpn2-10-72-76-c178.corp.yahoo.com
 [10.72.76.178])
	(authenticated bits=0)
	by rsmtp2.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k656FFgk058080
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Tue, 4 Jul 2006 23:15:15 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=d8+/dKyDs5ZF4VIhSyhkGOTe5/geqQXmLxGvD8vfAJl/VlKIVKFfsBhgerPKmF5y
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <61242bb3e658cc09ef887f110be91fe2@inktomi.com>
References: <29371765.1151955570648.JavaMail.jira@brutus>
 <61242bb3e658cc09ef887f110be91fe2@inktomi.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <0033B6C2-CE17-4DFA-847E-8CC32AE38153@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Eric Baldeschwieler <eric14@yahoo-inc.com>
Subject: Re: [jira] Commented: (HADOOP-342) Design/Implement a tool to support
 archival and analysis of logfiles.
Date: Tue, 4 Jul 2006 23:15:12 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

yupp.  Perhaps the HTTP approach would support that too.  Long term,  
this is one of the reasons atomic appends would be cool.  That would  
allow us to log in realtime to HDFS.

On Jul 4, 2006, at 2:22 PM, Arkady Borkovsky wrote:

> It would be very nice to  be able to see (analyze) the logs of a  
> task that is still running.
>
> -- ab
>
> On Jul 3, 2006, at 12:39 PM, Arun C Murthy (JIRA) wrote:
>
>>     [ http://issues.apache.org/jira/browse/HADOOP-342? 
>> page=comments#action_12419011 ]
>>
>> Arun C Murthy commented on HADOOP-342:
>> --------------------------------------
>>
>> Should have clarified this: the plan is to let the user specify an  
>> output directory in which a single text file will contain the  
>> output of the 'analysis'.
>>
>> Generic Sorter:
>>
>>   The generic sorter basically lets the user specify a column  
>> separator and a spec for priority of columns.
>>   The Comparator's *compare* function (implements  
>> WritableComparable) then splits each sequence of data based on  
>> user specified separator and then compares the 2 data streams on  
>> the given priorities.
>>
>>   E.g. -sortColumnSpec 2,0,1 -separator \t
>>   (0-based columns)
>>
>>   If there is enough interest, I can push this into mapred.lib.  
>> Appreciate any suggestions.
>>
>> thanks,
>> Arun
>>
>>
>>> Design/Implement a tool to support archival and analysis of  
>>> logfiles.
>>> -------------------------------------------------------------------- 
>>> -
>>>
>>>          Key: HADOOP-342
>>>          URL: http://issues.apache.org/jira/browse/HADOOP-342
>>>      Project: Hadoop
>>>         Type: New Feature
>>
>>>     Reporter: Arun C Murthy
>>
>>>
>>> Requirements:
>>>   a) Create a tool support archival of logfiles (from diverse  
>>> sources) in hadoop's dfs.
>>>   b) The tool should also support analysis of the logfiles via  
>>> grep/sort primitives. The tool should allow for fairly generic  
>>> pattern 'grep's and let users 'sort' the matching lines (from  
>>> grep) on 'columns' of their choice.
>>>   E.g. from hadoop logs: Look for all log-lines with 'FATAL' and  
>>> sort them based on timestamps (column x)  and then on column y  
>>> (column x, followed by column y).
>>> Design/Implementation:
>>>   a) Log Archival
>>>     Archival of logs from diverse sources can be accomplished  
>>> using the *distcp* tool (HADOOP-341).
>>>
>>>   b) Log analysis
>>>     The idea is to enable users of the tool to perform analysis  
>>> of logs via grep/sort primitives.
>>>     This can be accomplished via a relatively simple Map-Reduce  
>>> task where the map does the *grep* for the given pattern via  
>>> RegexMapper and then the implicit *sort* (reducer) is used with a  
>>> custom Comparator which performs the user-specified comparision  
>>> (columns).
>>>     The sort/grep specs can be fairly powerful by letting the  
>>> user of the tool use java's in-built regex patterns  
>>> (java.util.regex).
>>
>> -- 
>> This message is automatically generated by JIRA.
>> -
>> If you think it was sent incorrectly contact one of the  
>> administrators:
>>    http://issues.apache.org/jira/secure/Administrators.jspa
>> -
>> For more information on JIRA, see:
>>    http://www.atlassian.com/software/jira
>>
>


From MAILER-DAEMON Wed Jul  5 07:39:48 2006
Return-Path: 
 <hadoop-dev-return-2373-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46952 invoked from network); 5 Jul 2006 07:39:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jul 2006 07:39:48 -0000
Received: (qmail 18048 invoked by uid 500); 5 Jul 2006 07:39:48 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17895 invoked by uid 500); 5 Jul 2006 07:39:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17884 invoked by uid 99); 5 Jul 2006 07:39:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 00:39:47 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.145.54.173] (HELO mrout3.yahoo.com) (216.145.54.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 00:39:46 -0700
Received: from [10.80.32.188] (socks1.corp.yahoo.com [216.145.54.158])
	by mrout3.yahoo.com (8.13.6/8.13.6/y.out) with ESMTP id k657d1aa030231
	for <hadoop-dev@lucene.apache.org>; Wed, 5 Jul 2006 00:39:02 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=ev8FUxyG3DTQ3Njv6BPjpZhvUysVSBmfxPMnGpTPlCIgSGZsOsE1RgRKXlhHnYxH
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <0033B6C2-CE17-4DFA-847E-8CC32AE38153@yahoo-inc.com>
References: <29371765.1151955570648.JavaMail.jira@brutus>
 <61242bb3e658cc09ef887f110be91fe2@inktomi.com>
 <0033B6C2-CE17-4DFA-847E-8CC32AE38153@yahoo-inc.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <8EFCB42A-6C8B-4060-AD62-394A2CA6B6EF@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Sanjay Dahiya <sanjayd@yahoo-inc.com>
Subject: Re: [jira] Commented: (HADOOP-342) Design/Implement a tool to support
 archival and analysis of logfiles.
Date: Wed, 5 Jul 2006 13:09:02 +0530
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On 05-Jul-06, at 11:45 AM, Eric Baldeschwieler wrote:

> yupp.  Perhaps the HTTP approach would support that too.  Long  
> term, this is one of the reasons atomic appends would be cool.   
> That would allow us to log in realtime to HDFS.

For now, I am working on Log4J extension for automatically rolling  
the older logs ( based on time and size ) to a well defined dir  
structure in HDFS. Same needs to be done for Map Reduce jobs where  
all logs generated by the jobs go in a directory ( different for each  
MR job ). This can also be used along with log analysis tools.

~Sanjay

>
> On Jul 4, 2006, at 2:22 PM, Arkady Borkovsky wrote:
>
>> It would be very nice to  be able to see (analyze) the logs of a  
>> task that is still running.
>>
>> -- ab
>>
>> On Jul 3, 2006, at 12:39 PM, Arun C Murthy (JIRA) wrote:
>>
>>>     [ http://issues.apache.org/jira/browse/HADOOP-342? 
>>> page=comments#action_12419011 ]
>>>
>>> Arun C Murthy commented on HADOOP-342:
>>> --------------------------------------
>>>
>>> Should have clarified this: the plan is to let the user specify  
>>> an output directory in which a single text file will contain the  
>>> output of the 'analysis'.
>>>
>>> Generic Sorter:
>>>
>>>   The generic sorter basically lets the user specify a column  
>>> separator and a spec for priority of columns.
>>>   The Comparator's *compare* function (implements  
>>> WritableComparable) then splits each sequence of data based on  
>>> user specified separator and then compares the 2 data streams on  
>>> the given priorities.
>>>
>>>   E.g. -sortColumnSpec 2,0,1 -separator \t
>>>   (0-based columns)
>>>
>>>   If there is enough interest, I can push this into mapred.lib.  
>>> Appreciate any suggestions.
>>>
>>> thanks,
>>> Arun
>>>
>>>
>>>> Design/Implement a tool to support archival and analysis of  
>>>> logfiles.
>>>> ------------------------------------------------------------------- 
>>>> --
>>>>
>>>>          Key: HADOOP-342
>>>>          URL: http://issues.apache.org/jira/browse/HADOOP-342
>>>>      Project: Hadoop
>>>>         Type: New Feature
>>>
>>>>     Reporter: Arun C Murthy
>>>
>>>>
>>>> Requirements:
>>>>   a) Create a tool support archival of logfiles (from diverse  
>>>> sources) in hadoop's dfs.
>>>>   b) The tool should also support analysis of the logfiles via  
>>>> grep/sort primitives. The tool should allow for fairly generic  
>>>> pattern 'grep's and let users 'sort' the matching lines (from  
>>>> grep) on 'columns' of their choice.
>>>>   E.g. from hadoop logs: Look for all log-lines with 'FATAL' and  
>>>> sort them based on timestamps (column x)  and then on column y  
>>>> (column x, followed by column y).
>>>> Design/Implementation:
>>>>   a) Log Archival
>>>>     Archival of logs from diverse sources can be accomplished  
>>>> using the *distcp* tool (HADOOP-341).
>>>>
>>>>   b) Log analysis
>>>>     The idea is to enable users of the tool to perform analysis  
>>>> of logs via grep/sort primitives.
>>>>     This can be accomplished via a relatively simple Map-Reduce  
>>>> task where the map does the *grep* for the given pattern via  
>>>> RegexMapper and then the implicit *sort* (reducer) is used with  
>>>> a custom Comparator which performs the user-specified  
>>>> comparision (columns).
>>>>     The sort/grep specs can be fairly powerful by letting the  
>>>> user of the tool use java's in-built regex patterns  
>>>> (java.util.regex).
>>>
>>> -- 
>>> This message is automatically generated by JIRA.
>>> -
>>> If you think it was sent incorrectly contact one of the  
>>> administrators:
>>>    http://issues.apache.org/jira/secure/Administrators.jspa
>>> -
>>> For more information on JIRA, see:
>>>    http://www.atlassian.com/software/jira
>>>
>>
>
>


From MAILER-DAEMON Wed Jul  5 18:11:19 2006
Return-Path: 
 <hadoop-dev-return-2374-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 24658 invoked from network); 5 Jul 2006 18:11:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jul 2006 18:11:19 -0000
Received: (qmail 97409 invoked by uid 500); 5 Jul 2006 18:11:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97345 invoked by uid 500); 5 Jul 2006 18:11:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97333 invoked by uid 99); 5 Jul 2006 18:11:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 11:11:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 11:11:17 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F31D94103EB
	for <hadoop-dev@lucene.apache.org>; Wed,  5 Jul 2006 18:09:29 +0000 (GMT)
Message-ID: <21351816.1152122969991.JavaMail.jira@brutus>
Date: Wed, 5 Jul 2006 18:09:29 +0000 (GMT+00:00)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-343) In case of dead task tracker, the copy
 mapouts try copying all mapoutputs from this tasktracker
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

In case of dead task tracker, the copy mapouts try copying all mapoutputs from this tasktracker 
------------------------------------------------------------------------------------------------

         Key: HADOOP-343
         URL: http://issues.apache.org/jira/browse/HADOOP-343
     Project: Hadoop
        Type: Bug

  Components: mapred  
    Versions: 0.5.0    
    Reporter: Mahadev konar
 Assigned to: Mahadev konar 


In case of a dead task tracker, the reduces which do not have the updated map out locations try copygin files from this node and since there are failures on copying, this leads to backoff and slowing down of the copy pahse.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jul  5 18:23:19 2006
Return-Path: 
 <hadoop-dev-return-2375-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 29696 invoked from network); 5 Jul 2006 18:23:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jul 2006 18:23:19 -0000
Received: (qmail 16157 invoked by uid 500); 5 Jul 2006 18:23:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 16121 invoked by uid 500); 5 Jul 2006 18:23:18 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 16112 invoked by uid 99); 5 Jul 2006 18:23:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 11:23:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 11:23:17 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AADAF4103EC
	for <hadoop-dev@lucene.apache.org>; Wed,  5 Jul 2006 18:21:30 +0000 (GMT)
Message-ID: <28456345.1152123690696.JavaMail.jira@brutus>
Date: Wed, 5 Jul 2006 18:21:30 +0000 (GMT+00:00)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-343) In case of dead task tracker, the copy
 mapouts try copying all mapoutputs from this tasktracker
In-Reply-To: <21351816.1152122969991.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-343?page=all ]

Mahadev konar updated HADOOP-343:
---------------------------------

    Attachment: bugfix.patch

This patch updates its mapoutput locations in case of any failures on copying from the task tracker. So, in case a copy failed from a task tracker, the map outputs corresponding to this node will be marked stale. The ReduceTask will ask for the mapout locations again for these stale map outputs. This patch also fixes a bug wherein the tasks keep polling the job tracker for map otputs "in a loop" without sleeping/waiting. With this fix the tasks will poll evry MIN_POLL_INTERVAL before querying the job tracker. 

> In case of dead task tracker, the copy mapouts try copying all mapoutputs from this tasktracker
> -----------------------------------------------------------------------------------------------
>
>          Key: HADOOP-343
>          URL: http://issues.apache.org/jira/browse/HADOOP-343
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.5.0
>     Reporter: Mahadev konar
>     Assignee: Mahadev konar
>  Attachments: bugfix.patch
>
> In case of a dead task tracker, the reduces which do not have the updated map out locations try copygin files from this node and since there are failures on copying, this leads to backoff and slowing down of the copy pahse.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jul  5 22:15:18 2006
Return-Path: 
 <hadoop-dev-return-2376-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16827 invoked from network); 5 Jul 2006 22:15:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jul 2006 22:15:18 -0000
Received: (qmail 72529 invoked by uid 500); 5 Jul 2006 22:15:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72381 invoked by uid 500); 5 Jul 2006 22:15:18 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72372 invoked by uid 99); 5 Jul 2006 22:15:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 15:15:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 15:15:17 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D3530410402
	for <hadoop-dev@lucene.apache.org>; Wed,  5 Jul 2006 22:13:29 +0000 (GMT)
Message-ID: <3940552.1152137609862.JavaMail.jira@brutus>
Date: Wed, 5 Jul 2006 22:13:29 +0000 (GMT+00:00)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-344) TaskTracker passes incorrect file path
 to DF under cygwin
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

TaskTracker passes incorrect file path to DF under cygwin
---------------------------------------------------------

         Key: HADOOP-344
         URL: http://issues.apache.org/jira/browse/HADOOP-344
     Project: Hadoop
        Type: Bug

    Versions: 0.4.0    
 Environment: Windows
    Reporter: Konstantin Shvachko
 Attachments: TaskTrackerDF.patch

The path that is passed is OS dependent. The File abstraction should be used in order to make it universal.
I'm attaching a patch that does that.
We might want to change the path parameter for DF. Making it File rather than String should prevent us from 
bugs like that in the future.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jul  5 22:15:20 2006
Return-Path: 
 <hadoop-dev-return-2377-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16865 invoked from network); 5 Jul 2006 22:15:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jul 2006 22:15:20 -0000
Received: (qmail 72705 invoked by uid 500); 5 Jul 2006 22:15:19 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72553 invoked by uid 500); 5 Jul 2006 22:15:19 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72544 invoked by uid 99); 5 Jul 2006 22:15:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 15:15:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 15:15:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C5C6E410401
	for <hadoop-dev@lucene.apache.org>; Wed,  5 Jul 2006 22:13:30 +0000 (GMT)
Message-ID: <3301406.1152137610807.JavaMail.jira@brutus>
Date: Wed, 5 Jul 2006 22:13:30 +0000 (GMT+00:00)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-344) TaskTracker passes incorrect file path
 to DF under cygwin
In-Reply-To: <3940552.1152137609862.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-344?page=all ]

Konstantin Shvachko updated HADOOP-344:
---------------------------------------

    Attachment: TaskTrackerDF.patch

> TaskTracker passes incorrect file path to DF under cygwin
> ---------------------------------------------------------
>
>          Key: HADOOP-344
>          URL: http://issues.apache.org/jira/browse/HADOOP-344
>      Project: Hadoop
>         Type: Bug

>     Versions: 0.4.0
>  Environment: Windows
>     Reporter: Konstantin Shvachko
>  Attachments: TaskTrackerDF.patch
>
> The path that is passed is OS dependent. The File abstraction should be used in order to make it universal.
> I'm attaching a patch that does that.
> We might want to change the path parameter for DF. Making it File rather than String should prevent us from 
> bugs like that in the future.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jul  5 22:15:21 2006
Return-Path: 
 <hadoop-dev-return-2378-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16906 invoked from network); 5 Jul 2006 22:15:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jul 2006 22:15:21 -0000
Received: (qmail 72770 invoked by uid 500); 5 Jul 2006 22:15:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72737 invoked by uid 500); 5 Jul 2006 22:15:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72720 invoked by uid 99); 5 Jul 2006 22:15:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 15:15:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 15:15:19 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B6F7E410404
	for <hadoop-dev@lucene.apache.org>; Wed,  5 Jul 2006 22:13:31 +0000 (GMT)
Message-ID: <12900547.1152137611746.JavaMail.jira@brutus>
Date: Wed, 5 Jul 2006 22:13:31 +0000 (GMT+00:00)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-344) TaskTracker passes incorrect file
 path to DF under cygwin
In-Reply-To: <3940552.1152137609862.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-344?page=all ]

Konstantin Shvachko reassigned HADOOP-344:
------------------------------------------

    Assign To: Konstantin Shvachko

> TaskTracker passes incorrect file path to DF under cygwin
> ---------------------------------------------------------
>
>          Key: HADOOP-344
>          URL: http://issues.apache.org/jira/browse/HADOOP-344
>      Project: Hadoop
>         Type: Bug

>     Versions: 0.4.0
>  Environment: Windows
>     Reporter: Konstantin Shvachko
>     Assignee: Konstantin Shvachko
>  Attachments: TaskTrackerDF.patch
>
> The path that is passed is OS dependent. The File abstraction should be used in order to make it universal.
> I'm attaching a patch that does that.
> We might want to change the path parameter for DF. Making it File rather than String should prevent us from 
> bugs like that in the future.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jul  5 22:17:38 2006
Return-Path: 
 <hadoop-dev-return-2379-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17287 invoked from network); 5 Jul 2006 22:17:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jul 2006 22:17:38 -0000
Received: (qmail 75426 invoked by uid 500); 5 Jul 2006 22:17:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75397 invoked by uid 500); 5 Jul 2006 22:17:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75388 invoked by uid 99); 5 Jul 2006 22:17:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 15:17:38 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.109.112.28] (HELO mrout2-b.corp.dcn.yahoo.com)
 (216.109.112.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 15:17:37 -0700
Received: from [10.72.104.183] (enoughhot-lx.corp.yahoo.com [10.72.104.183])
	by mrout2-b.corp.dcn.yahoo.com (8.13.6/8.13.6/y.out) with ESMTP id
 k65MH1Xu068568
	for <hadoop-dev@lucene.apache.org>; Wed, 5 Jul 2006 15:17:01 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=message-id:date:from:user-agent:x-accept-language:
	mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
	b=k4CoOA+nzcJq4Utsvtjhhqp/p0KjjC8m3lmFqbEqHSsNmTvo6eF6HjAXJdySO7Qx
Message-ID: <44AC3A5D.3060704@yahoo-inc.com>
Date: Wed, 05 Jul 2006 15:17:01 -0700
From: Konstantin Shvachko <shv@yahoo-inc.com>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: hadoop 0.4.0 could not support windows + cygwin
References: <39209b600606302307u6eb2fc22sdc44e3dfed25735f@mail.gmail.com>
In-Reply-To: <39209b600606302307u6eb2fc22sdc44e3dfed25735f@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Yes, you are right.
Please apply patch in HADOOP-344.
Thanks,
--Konstantin

emanihc wrote:

> it seems hadoop 0.4.0 could not support windows + cygwin, belows are task
> tracker log file content
>
> 2006-07-01 14:02:30,265 INFO org.apache.hadoop.mapred.TaskTracker: 
> Problem
> launching task: java.io.IOException: df: `/tmp/hadoop/mapred/local': 
> No such
> file or directory
> at org.apache.hadoop.fs.DF.doDF(DF.java:61)
> at org.apache.hadoop.fs.DF.<init>(DF.java:50)
> at org.apache.hadoop.fs.DF.<init>(DF.java:43)
> at org.apache.hadoop.mapred.TaskTracker.enoughFreeSpace(TaskTracker.java
> :507)
> at 
> org.apache.hadoop.mapred.TaskTracker.offerService(TaskTracker.java:354)
> at org.apache.hadoop.mapred.TaskTracker.run(TaskTracker.java:566)
> at org.apache.hadoop.mapred.TaskTracker.main(TaskTracker.java:1130)
>
> 2006-07-01 14:02:30,296 INFO org.apache.hadoop.mapred.TaskTracker: Lost
> connection to JobTracker [server2/192.168.0.2:50020].  Retrying...
> java.io.IOException: df: `/tmp/hadoop/mapred/local': No such file or
> directory
> at org.apache.hadoop.fs.DF.doDF(DF.java:61)
> at org.apache.hadoop.fs.DF.<init>(DF.java:50)
> at org.apache.hadoop.fs.DF.<init>(DF.java:43)
> at org.apache.hadoop.mapred.TaskTracker.enoughFreeSpace(TaskTracker.java
> :507)
> at 
> org.apache.hadoop.mapred.TaskTracker.offerService(TaskTracker.java:434)
> at org.apache.hadoop.mapred.TaskTracker.run(TaskTracker.java:566)
> at org.apache.hadoop.mapred.TaskTracker.main(TaskTracker.java:1130)
>


From MAILER-DAEMON Wed Jul  5 22:27:19 2006
Return-Path: 
 <hadoop-dev-return-2380-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 19221 invoked from network); 5 Jul 2006 22:27:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jul 2006 22:27:19 -0000
Received: (qmail 87072 invoked by uid 500); 5 Jul 2006 22:27:19 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86922 invoked by uid 500); 5 Jul 2006 22:27:18 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86913 invoked by uid 99); 5 Jul 2006 22:27:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 15:27:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 15:27:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A10B3410401
	for <hadoop-dev@lucene.apache.org>; Wed,  5 Jul 2006 22:25:30 +0000 (GMT)
Message-ID: <8140058.1152138330656.JavaMail.jira@brutus>
Date: Wed, 5 Jul 2006 22:25:30 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-343) In case of dead task tracker, the
 copy mapouts try copying all mapoutputs from this tasktracker
In-Reply-To: <21351816.1152122969991.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-343?page=comments#action_12419349 ] 

Owen O'Malley commented on HADOOP-343:
--------------------------------------

I have concerns about this patch. It might have unintended consequences. In particular, if a node is slow you'll drop what you know about that node and put more load on the job tracker. This patch is certainly addressing a real problem, though.

> In case of dead task tracker, the copy mapouts try copying all mapoutputs from this tasktracker
> -----------------------------------------------------------------------------------------------
>
>          Key: HADOOP-343
>          URL: http://issues.apache.org/jira/browse/HADOOP-343
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Versions: 0.5.0
>     Reporter: Mahadev konar
>     Assignee: Mahadev konar
>  Attachments: bugfix.patch
>
> In case of a dead task tracker, the reduces which do not have the updated map out locations try copygin files from this node and since there are failures on copying, this leads to backoff and slowing down of the copy pahse.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jul  5 23:06:20 2006
Return-Path: 
 <hadoop-dev-return-2381-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 29565 invoked from network); 5 Jul 2006 23:06:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jul 2006 23:06:20 -0000
Received: (qmail 48728 invoked by uid 500); 5 Jul 2006 23:06:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 48705 invoked by uid 500); 5 Jul 2006 23:06:19 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 48696 invoked by uid 99); 5 Jul 2006 23:06:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 16:06:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 16:06:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 37F6C410401
	for <hadoop-dev@lucene.apache.org>; Wed,  5 Jul 2006 23:04:31 +0000 (GMT)
Message-ID: <12038442.1152140671226.JavaMail.jira@brutus>
Date: Wed, 5 Jul 2006 23:04:31 +0000 (GMT+00:00)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-288) RFC: Efficient file caching
In-Reply-To: <6015694.1149730109866.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-288?page=all ]

Mahadev konar reassigned HADOOP-288:
------------------------------------

    Assign To: Mahadev konar  (was: Michel Tourn)

> RFC: Efficient file caching
> ---------------------------
>
>          Key: HADOOP-288
>          URL: http://issues.apache.org/jira/browse/HADOOP-288
>      Project: Hadoop
>         Type: Bug

>     Reporter: Michel Tourn
>     Assignee: Mahadev konar

>
> RFC: Efficient file caching 
> (on Hadoop Task nodes, for benefit of MapReduce Tasks)
> ------------------------------------------------------
> We will start implementing this soon. Please provide feedback and improvements to this plan.
> The header "Options:" indicates places where simple choices must be made.
> Problem:
> -------
> o MapReduce tasks require access to additional out-of-band data ("dictionaries")
> This out-of-band data is:
> o in addition to the map/reduce inputs.
> o large (1GB+)
> o broadcast (same data is required on all the Task nodes)
> o changes "infrequently", in particular:
> oo it is always constant for all the Tasks in a Job. 
> oo it is often constant for a month at a time 
> oo it may be shared across team members
> o sometimes used by pure-Java MapReduce programs
> o sometimes used by non-Java MapReduce programs (using Hadoop-Streaming)
> o (future) used by programs that use HDFS and Task-trackers but not MapReduce.
> Existing Solutions to the problem:
> ---------------------------------
> These solutions are not good enough. The present proposal is to do Sol 1 with caching.
> Sol 1: Pure Hadoop: package the out-of-band data in the MapReduce Job jar file.
> Sol 2: Non  Hadoop: for each task node run rsync from single source for data.
> Sol 3: Non  Hadoop: use BitTorrent, etc.
> Sol.1 is correct but slow for many reasons:
>  The Job submitter must recreate a large jar(tar) file for every Job.
>   (The jar contains both changing programs and stable dictionaries)
>  The large Jar file must be propagated from the client to HDFS with 
>  a large replication factor. 
>  At the beginning of every Task, the Task tracker gets the job jar from HDFS 
>  and unjars it in the working directory. This can dominate task execution time.
>  
> Sol.2 has nice properties but also some problems.
>  It does not scale well with large clusters (many concurrent rsync read requests i.e. single-source broadcast)
>  It assumes that Hadoop users can upload data using rsync to the cluster nodes. As a policy, this is not allowed.
>  It requires rsync.
>  
> Sol.3 alleviates the rsync scalability problems but 
>       It is a dependency on an external system. 
>       We want something simpler and more tightly integrated with Hadoop.
>       
> Staging (uploading) out-of-band data:
> ------------------------------------
> The out-of-band data will often originate on the local filesystem of a user machine 
>  (i.e. a MapReduce job submitter)
> Nevertheless it makes sense to use HDFS to store the original out-of-band data because:
> o HDFS has (wide) replication. This enables scalable broadcast later.
> o HDFS is an available channel to move data from clients to all task machines.
> o HDFS is convenient as a shared location among Hadoop team members.
> Accessing (downloading) out-of-band data:
> ----------------------------------------
> The non-Java MapReduce programs do not have or want[1] APIs for HDFS.
> Instead these programs just want to access out-of-band data as 
>  local files at predefined paths.
> ([1] Existing programs should be reusable with no changes. 
>  This is often possible bec. communication is over stdin/stdout.)
> Job's jar file as a special case:
> --------------------------------
> One use case is to allow users to make the job jar itself cachable.
> This is only useful in cases where NOTHING changes when a job is resubmitted
>  (no MapRed code changes and no changes in shipped data)
> This situation might occur with an 'extractor' job (gets data from an external source: like Nutch crawler)
> Currently the Hadoop mapred-jar mechanism works in this way:
>  the job jar data is unjarred in the "working directory" of the Task 
>  the jar contains both MapRed java code (added to classpath)
> Cache synchronization:
> ---------------------
> The efficient implementation of the out-of-band data distribution
> is mostly a cache synchronization problem.
> A list of the various aspects where choices must be made follows.
> Cache key:
> ---------
> How do you test that the cached copy is out-of-date?
> Options: 
> 1. the archive/file timestamp 
> 2. the MD5 of the archive/file content
> Comparing source and destination Timestamps is problematic bec. it assumes synchronized clocks.
> Also there is no last-modif metadata in HDFS (for good reasons, like scalability of metadata ops)
> Timestamps stored with the source ('last-propagate-time') do 
>  not require synchronized clocks, only locally monotonic time. 
> (and the worse which can happen at daylight-savings switch is a missed update or an extra-update)
> The cache code could store a copy of the local timestamp 
> in the same way that it caches the value of the content hash along with the source data.
>  
> Cachable unit:
> -------------
> Options: individual files or archives or both.
> Note:
> At the API level, directories will be processed recursively 
> (and the local FS directories will parallel HDFS directories)
> So bulk operations are always possible using directories.
> The question here is whether to handle archives as an additional bulk mechanism.
> Archives are special because:
> o unarchiving occurs transparently as part of the cache sync
> o The cache key is computed on the archive and preserved although 
>   the archive itself is not preserved.
> Supported archive format will be: tar (maybe tgz or compressed jar)
> Archive detection test: by filename extension ".tar" or ".jar"
> Suppose we don't handle archives as special files:
> Pros:
>  o less code, no discussion about which archive formats are supported
>  o fine for large dictionary files. And when files are not large, user may as well
>    put them in the Job jar as usual.
>  o user code could always check and unarchive specific cached files
>    (as a side-effect of MapRed task initialization)
> Cons:
>  o handling small files may be inefficient 
>   (multiple HDFS operations, multiple hash computation, 
>    one 'metadata' hash file along with each small file)
>  o It will not be possible to handle the Job's jar file as a special case of caching 
> Cache isolation: 
> ---------------
> In some cases it may be a problem if the cached HDFS files are updated while a Job is in progress:
> The file may become unavailable for a short period of time and some tasks fail.
> The file may change (atomically) and different tasks use a different version.
> This isolation problem is not addressed in this proposal.
> Standard solutions to the isolation problem are:
> o Assume that Jobs and interfering cache updates won't occur concurrently.
> o Put a version number in the HDFS file paths and refer to a hard-coded version in the Job code.
> o Before running the MapRed job, run a non-distributed application that tests
>   what is the latest available version of the out-of-band data. 
>   Then make this version available to the MapRed job.
>   Two ways to do this. 
>   o either set a job property just-in-time:
>     addCachePathPair("/mydata/v1234/", "localcache/mydata_latest"); 
>     (see Job Configuration for meaning of this)
>   o or publish the decision as an HDFS file containing the version.
>     then rely on user code to read the version, and manually populate the cache:
>     Cache.syncCache("/hdfs/path/fileordir", "relative/local/fileordir");
>     (see MapReduce API for meaning of this)
> Cache synchronization stages:
> ----------------------------
> There are two stages: Client-to-HDFS and HDFS-to-TaskTracker
> o Client-to-HDFS stage.
> Options: A simple option is to not do anything here, i.e. rely on the user.
> This is a reasonable option given previous remarks on the role of HDFS:
>  HDFS is a staging/publishing area and a natural shared location.
> In particular this means that the system need not track 
> where the client files come from.
> o HDFS-to-TaskTracker:
> Client-to-HDFS synchronization (if done at all) should happen before this.
> Then HDFS-to-TaskTracker synchronization must happen right before 
> the data is needed on a node.
> MapReduce cache API:
> -------------------
> Options:
> 1. No change in MapReduce framework code:
> require the user to put this logic in map() (or reduce) function:
>  in MyMapper constructor (or in map() on first record) user is asked to add:
>  
>     Cache.syncCache("/hdfs/path/fileordir", "relative/local/fileordir");
>     Cache.syncCache("..."); //etc.
>   
> -----
> 2. Put this logic in MapReduce framework and use Job properties to
>    communicate the list of pairs (hdfs path; local path)
>  
> Directories are processed recursively.
> If archives are treated specially then they are unarchived on destination.
>  
> MapReduce Job Configuration:
> ---------------------------
> Options:
> with No change in MapReduce framework code (see above)
>  no special Job configuration: 
>    it is up to the MapRed writer to configure and run the cache operations.
> ---
> with Logic in MapReduce framework (see above)
>  some simple Job configuration
> JobConf.addCachePathPair(String, String)
> JobConf.addCachePathPair("/hdfs/path/fileordir", "relative/local/fileordir");

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jul  5 23:30:20 2006
Return-Path: 
 <hadoop-dev-return-2382-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 39803 invoked from network); 5 Jul 2006 23:30:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jul 2006 23:30:20 -0000
Received: (qmail 85383 invoked by uid 500); 5 Jul 2006 23:30:19 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 85358 invoked by uid 500); 5 Jul 2006 23:30:19 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 85349 invoked by uid 99); 5 Jul 2006 23:30:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 16:30:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 16:30:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 28DA2410403
	for <hadoop-dev@lucene.apache.org>; Wed,  5 Jul 2006 23:28:31 +0000 (GMT)
Message-ID: <21333926.1152142111164.JavaMail.jira@brutus>
Date: Wed, 5 Jul 2006 23:28:31 +0000 (GMT+00:00)
From: "Barry Kaplan (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-211) logging improvements for Hadoop
In-Reply-To: <11693488.1147389488398.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-211?page=comments#action_12419360 ] 

Barry Kaplan commented on HADOOP-211:
-------------------------------------

I am using Hadoop within tomcat, my guess is there is a way to make hadoop use its own log properties that is separate from tomcat's, but it will be rather annoying to have a separate log4j.properties on a library by library basis.

> logging improvements for Hadoop
> -------------------------------
>
>          Key: HADOOP-211
>          URL: http://issues.apache.org/jira/browse/HADOOP-211
>      Project: Hadoop
>         Type: Improvement

>     Versions: 0.2.0
>     Reporter: Sameer Paranjpye
>     Assignee: Sameer Paranjpye
>     Priority: Minor
>      Fix For: 0.3.0
>  Attachments: acl-log4j-II.patch.tgz, acl-log4j-webapps.patch, acl-log4j.patch, commons_logging_patch
>
> Here's a proposal for some impovements to the way Hadoop does logging. It advocates 3 
> broad changes to the way logging is currently done, these being:
> - The use of a uniform logging format by all Hadoop subsystems
> - The use of Apache commons logging as a facade above an underlying logging framework
> - The use of Log4J as the underlying logging framework instead of java.util.logging
> This is largely polishing work, but it seems like it would make log analysis and debugging
> easier in the short term. In the long term, it would future proof logging to the extent of
> allowing the logging framework used to change while requiring minimal code change. The 
> propos changes are motivated by the following requirements which we think Hadoops 
> logging should meet:
> - Hadoops logs should be amenable to analysis by tools like grep, sed, awk etc.
> - Log entries should be clearly annotated with a timestamp and a logging level
> - Log entries should be traceable to the subsystem from which they originated
> - The logging implementation should allow log entries to be annotated with source code 
> location information like classname, methodname, file and line number, without requiring
> code changes
> - It should be possible to change the logging implementation used without having to change
> thousands of lines of code
> - The mapping of loggers to destinations (files, directories, servers etc.) should be 
> specified and modifiable via configuration
> Uniform logging format:
> All Hadoop logs should have the following structure.
> <Header>\n
> <LogEntry>\n [<Exception>\n]
> .
> .
> .
> where the header line specifies the format of each log entry. The header line has the format:
> '# <Fieldname> <Fieldname>...\n'. 
> The default format of each log entry is: '# Timestamp Level LoggerName Message', where:
> - Timestamp is a date and time in the format MM/DD/YYYY:HH:MM:SS
> - Level is the logging level (FATAL, WARN, DEBUG, TRACE, etc.)
> - LoggerName is the short name of the logging subsystem from which the message originated e.g.
> fs.FSNamesystem, dfs.Datanode etc.
> - Message is the log message produced
> Why Apache commons logging and Log4J?
> Apache commons logging is a facade meant to be used as a wrapper around an underlying logging
> implementation. Bridges from Apache commons logging to popular logging implementations 
> (Java logging, Log4J, Avalon etc.) are implemented and available as part of the commons logging
> distribution. Implementing a bridge to an unsupported implementation is fairly striaghtforward
> and involves the implementation of subclasses of the commons logging LogFactory and Logger 
> classes. Using Apache commons logging and making all logging calls through it enables us to
> move to a different logging implementation by simply changing configuration in the best case.
> Even otherwise, it incurs minimal code churn overhead.
> Log4J offers a few benefits over java.util.logging that make it a more desirable choice for the
> logging back end.
> - Configuration Flexibility: The mapping of loggers to destinations (files, sockets etc.)
> can be completely specified in configuration. It is possible to do this with Java logging as
> well, however, configuration is a lot more restrictive. For instance, with Java logging all 
> log files must have names derived from the same pattern. For the namenode, log files could 
> be named with the pattern "%h/namenode%u.log" which would put log files in the user.home
> directory with names like namenode0.log etc. With Log4J it would be possible to configure
> the namenode to emit log files with different names, say heartbeats.log, namespace.log,
> clients.log etc. Configuration variables in Log4J can also have the values of system 
> properties embedded in them.
> - Takes wrappers into account: Log4J takes into account the possibility that an application
> may be invoking it via a wrapper, such as Apache commons logging. This is important because
> logging event objects must be able to infer the context of the logging call such as classname,
> methodname etc. Inferring context is a relatively expensive operation that involves creating
> an exception and examining the stack trace to find the frame just before the first frame 
> of the logging framework. It is therefore done lazily only when this information actually 
> needs to be logged. Log4J can be instructed to look for the frame corresponding to the wrapper
> class, Java logging cannot. In the case of Java logging this means that a) the bridge from 
> Apache commons logging is responsible for inferring the calling context and setting it in the 
> logging event and b) this inference has to be done on every logging call regardless of whether
> or not it is needed.
> - More handy features: Log4J has some handy features that Java logging doesn't. A couple
> of examples of these:
> a) Date based rolling of log files 
> b) Format control through configuration. Log4J has a PatternLayout class that can be 
> configured to generate logs with a user specified pattern. The logging format described
> above can be described as "%d{MM/dd/yyyy:HH:mm:SS} %c{2} %p %m". The format specifiers
> indicate that each log line should have the date and time followed by the logger name followed
> by the logging level or priority followed by the application generated message.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jul  6 00:44:18 2006
Return-Path: 
 <hadoop-dev-return-2383-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57576 invoked from network); 6 Jul 2006 00:44:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 00:44:18 -0000
Received: (qmail 62012 invoked by uid 500); 6 Jul 2006 00:44:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 61979 invoked by uid 500); 6 Jul 2006 00:44:18 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 61968 invoked by uid 99); 6 Jul 2006 00:44:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 17:44:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 17:44:17 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CCFC5410405
	for <hadoop-dev@lucene.apache.org>; Thu,  6 Jul 2006 00:42:29 +0000 (GMT)
Message-ID: <25954528.1152146549836.JavaMail.jira@brutus>
Date: Thu, 6 Jul 2006 00:42:29 +0000 (GMT+00:00)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-345) JobConf access to name-values
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

JobConf access to name-values
-----------------------------

         Key: HADOOP-345
         URL: http://issues.apache.org/jira/browse/HADOOP-345
     Project: Hadoop
        Type: Improvement

    Reporter: Michel Tourn
 Assigned to: Michel Tourn 


class JobConf (or its base class Configuration) 
should be extended to enable enumeration of all its key-value pairs.
( more precisely: the Properties returned by Configuration.getProps() )

This will be useful to "export" all JobConf properties to environment variables.
We use env.vars to expose some Hadoop context to non-Java MapReduce applications.

Note that the typed properties are also represented as Strings 
(getInt, getStrings, getClass, etc.)
So a single enumeration exposes everything as (untyped) environment variables.

The proposed escaping rules from JobConf properties to env.var are:

1. values are left as-is.
2. keys are escaped as follows:
[A-Za-z0-9] --> unchanged.
all other chars --> underscore.

For example
set("mapred.input.key.class", "com.example.MyKey")
becomes env.var:
export mapred_input_key_class=com.example.MyKey

Justification:
1. Environment variables are case-sensitive. (Although uppercase is the preferred convention)
  So no need to uppercase everything.
2. Some characters are forbidden in env.vars, or at least not shell-friendly:
For example period, colon are problematic.
3. The Hadoop conventions are already hierarchical and provide some namespace protection.
   This means we don't need an additional prefix as protection.
   For example all exported environment variables will start with "mapred." , "dfs." , "ipc." etc.
  This means they will not conflict with standard environemnt variables like PATH, USER, etc.
  And they will not conflict with standard hadoop env.vars because those are upper-case. (like HADOOP_CONF_DIR)










-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jul  6 00:53:20 2006
Return-Path: 
 <hadoop-dev-return-2384-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 59769 invoked from network); 6 Jul 2006 00:53:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 00:53:20 -0000
Received: (qmail 68784 invoked by uid 500); 6 Jul 2006 00:53:19 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68630 invoked by uid 500); 6 Jul 2006 00:53:19 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68616 invoked by uid 99); 6 Jul 2006 00:53:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 17:53:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 17:53:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C54F4410405
	for <hadoop-dev@lucene.apache.org>; Thu,  6 Jul 2006 00:51:30 +0000 (GMT)
Message-ID: <16104821.1152147090805.JavaMail.jira@brutus>
Date: Thu, 6 Jul 2006 00:51:30 +0000 (GMT+00:00)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-345) JobConf access to name-values
In-Reply-To: <25954528.1152146549836.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-345?page=comments#action_12419374 ] 

Michel Tourn commented on HADOOP-345:
-------------------------------------

>class JobConf (or its base class Configuration)
>should be extended to enable enumeration of all its key-value pairs. 

So strictly speaking all that is required is to make this Configuration method public:
>private synchronized Properties getProps()

is that OK?


> JobConf access to name-values
> -----------------------------
>
>          Key: HADOOP-345
>          URL: http://issues.apache.org/jira/browse/HADOOP-345
>      Project: Hadoop
>         Type: Improvement

>     Reporter: Michel Tourn
>     Assignee: Michel Tourn

>
> class JobConf (or its base class Configuration) 
> should be extended to enable enumeration of all its key-value pairs.
> ( more precisely: the Properties returned by Configuration.getProps() )
> This will be useful to "export" all JobConf properties to environment variables.
> We use env.vars to expose some Hadoop context to non-Java MapReduce applications.
> Note that the typed properties are also represented as Strings 
> (getInt, getStrings, getClass, etc.)
> So a single enumeration exposes everything as (untyped) environment variables.
> The proposed escaping rules from JobConf properties to env.var are:
> 1. values are left as-is.
> 2. keys are escaped as follows:
> [A-Za-z0-9] --> unchanged.
> all other chars --> underscore.
> For example
> set("mapred.input.key.class", "com.example.MyKey")
> becomes env.var:
> export mapred_input_key_class=com.example.MyKey
> Justification:
> 1. Environment variables are case-sensitive. (Although uppercase is the preferred convention)
>   So no need to uppercase everything.
> 2. Some characters are forbidden in env.vars, or at least not shell-friendly:
> For example period, colon are problematic.
> 3. The Hadoop conventions are already hierarchical and provide some namespace protection.
>    This means we don't need an additional prefix as protection.
>    For example all exported environment variables will start with "mapred." , "dfs." , "ipc." etc.
>   This means they will not conflict with standard environemnt variables like PATH, USER, etc.
>   And they will not conflict with standard hadoop env.vars because those are upper-case. (like HADOOP_CONF_DIR)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jul  6 02:10:16 2006
Return-Path: 
 <hadoop-dev-return-2385-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 82259 invoked from network); 6 Jul 2006 02:10:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 02:10:16 -0000
Received: (qmail 40523 invoked by uid 500); 6 Jul 2006 02:10:15 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40489 invoked by uid 500); 6 Jul 2006 02:10:15 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 40480 invoked by uid 99); 6 Jul 2006 02:10:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 19:10:15 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=DNS_FROM_RFC_ABUSE,NO_REAL_NAME,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of barry.kaplan@gmail.com
 designates 64.233.184.238 as permitted sender)
Received: from [64.233.184.238] (HELO wr-out-0506.google.com) (64.233.184.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 19:10:14 -0700
Received: by wr-out-0506.google.com with SMTP id i22so1028014wra
        for <hadoop-dev@lucene.apache.org>;
 Wed, 05 Jul 2006 19:09:53 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=Eglj/8g9PoGaKSfit8AmtKgccRD33yzprOAtfjrfmnlP4dT7eQFD+B2UXR/ZiIpxpzhh5JmqIepgDFUnbZ6KJRxMXmT7Gvx5VROZlO+/nM6jNcJfJ0RW0Fod0CSevi10PDVof7jG/zYh2m0xTxhg4ljw9m8sc2dR1ODwvWeBYX0=
Received: by 10.54.118.19 with SMTP id q19mr104677wrc;
        Wed, 05 Jul 2006 19:09:53 -0700 (PDT)
Received: by 10.54.141.13 with HTTP; Wed, 5 Jul 2006 19:09:53 -0700 (PDT)
Message-ID: <cac652840607051909j60480860h4b5601a4688c45db@mail.gmail.com>
Date: Wed, 5 Jul 2006 19:09:53 -0700
From: barry.kaplan@gmail.com
To: hadoop-dev@lucene.apache.org
Subject: Stopping datanode and namenode
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I am using hadoop's DFS in tomcat and was curious how other people are
getting the deployment loader to work in conjunction with hadoop.
Essentially the problem I am having is:

1) tomcat started and war deployed and running
2) New war file dropped into webapps dir
3) tomcat unloads war file, thus shutting down everything...
4) tomcat unpacks and loads new war file
5) servlet not started due to hadoop errors

The issue is there is no way to stop the namenode or datanode, thus
when I unload my app the daemon threads from the first bootup are
still running, causing any subsequent load to have errors because
hadoop dfs's namenodes/datanodes are still up, with open sockets.

I see the code has some calls to stop the namenode for unit testing,
what about opening that up, or adding a calls to namenode and datanode
to shut them down?

Or am I missing something obvious :)

-Barry

From MAILER-DAEMON Thu Jul  6 02:57:09 2006
Return-Path: 
 <hadoop-dev-return-2386-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93147 invoked from network); 6 Jul 2006 02:57:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 02:57:09 -0000
Received: (qmail 6366 invoked by uid 500); 6 Jul 2006 02:57:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 6330 invoked by uid 500); 6 Jul 2006 02:57:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 6321 invoked by uid 99); 6 Jul 2006 02:57:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 19:57:08 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.126.228.150] (HELO rsmtp2.corp.yahoo.com)
 (207.126.228.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 19:57:07 -0700
Received: from [10.0.1.2] (snvvpn2-10-72-76-c206.corp.yahoo.com
 [10.72.76.206])
	(authenticated bits=0)
	by rsmtp2.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k662ud1H086373
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Wed, 5 Jul 2006 19:56:39 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=X3NaaxAPm8aW/jIAbZIk7C+Ck8WibepQPCW+pFgxKqN7rkBEqmIJtDjCrEz0ev3c
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <cac652840607051909j60480860h4b5601a4688c45db@mail.gmail.com>
References: <cac652840607051909j60480860h4b5601a4688c45db@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <B736A161-1DCE-4905-B7B0-BFE552C730AD@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Eric Baldeschwieler <eric14@yahoo-inc.com>
Subject: Re: Stopping datanode and namenode
Date: Wed, 5 Jul 2006 19:56:36 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

what does one gain from running in tomcat?

Doesn't seem to be our standard methodology.

On Jul 5, 2006, at 7:09 PM, barry.kaplan@gmail.com wrote:

> I am using hadoop's DFS in tomcat and was curious how other people are
> getting the deployment loader to work in conjunction with hadoop.
> Essentially the problem I am having is:
>
> 1) tomcat started and war deployed and running
> 2) New war file dropped into webapps dir
> 3) tomcat unloads war file, thus shutting down everything...
> 4) tomcat unpacks and loads new war file
> 5) servlet not started due to hadoop errors
>
> The issue is there is no way to stop the namenode or datanode, thus
> when I unload my app the daemon threads from the first bootup are
> still running, causing any subsequent load to have errors because
> hadoop dfs's namenodes/datanodes are still up, with open sockets.
>
> I see the code has some calls to stop the namenode for unit testing,
> what about opening that up, or adding a calls to namenode and datanode
> to shut them down?
>
> Or am I missing something obvious :)
>
> -Barry


From MAILER-DAEMON Thu Jul  6 05:17:21 2006
Return-Path: 
 <hadoop-dev-return-2387-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 19778 invoked from network); 6 Jul 2006 05:17:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 05:17:21 -0000
Received: (qmail 24230 invoked by uid 500); 6 Jul 2006 05:17:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23823 invoked by uid 500); 6 Jul 2006 05:17:19 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23813 invoked by uid 99); 6 Jul 2006 05:17:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 22:17:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 22:17:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AA969410430
	for <hadoop-dev@lucene.apache.org>; Thu,  6 Jul 2006 05:15:30 +0000 (GMT)
Message-ID: <27334695.1152162930695.JavaMail.jira@brutus>
Date: Thu, 6 Jul 2006 05:15:30 +0000 (GMT+00:00)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-342) Design/Implement a tool to support
 archival and analysis of logfiles.
In-Reply-To: <18424480.1151929589854.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-342?page=comments#action_12419402 ] 

Arun C Murthy commented on HADOOP-342:
--------------------------------------

I concur with the need for (optional?) HTTP based map input... I'll start on it. 
(I have some ideas about generalising this infrastructure, which I'm in the process of compiling and will send it over to a separate email).

Eric: Apologise for not clarifying this earlier: logalyzer (as-is) can be used in either mode independently or together i.e. it can be used either for archival or analysis (assuming logs are already in a given directory) or both.

Doug: Can we get logalyzer as-is into the tree right-away and meanwhile I'll get on to the HTTP-base map input enhancement? There is some interest for using it right-away... hope it isn't too much of a problem.

thanks,
Arun

> Design/Implement a tool to support archival and analysis of logfiles.
> ---------------------------------------------------------------------
>
>          Key: HADOOP-342
>          URL: http://issues.apache.org/jira/browse/HADOOP-342
>      Project: Hadoop
>         Type: New Feature

>     Reporter: Arun C Murthy
>  Attachments: logalyzer.patch
>
> Requirements:
>   a) Create a tool support archival of logfiles (from diverse sources) in hadoop's dfs.
>   b) The tool should also support analysis of the logfiles via grep/sort primitives. The tool should allow for fairly generic pattern 'grep's and let users 'sort' the matching lines (from grep) on 'columns' of their choice.
>   E.g. from hadoop logs: Look for all log-lines with 'FATAL' and sort them based on timestamps (column x)  and then on column y (column x, followed by column y).
> Design/Implementation:
>   a) Log Archival
>     Archival of logs from diverse sources can be accomplished using the *distcp* tool (HADOOP-341).
>   
>   b) Log analysis
>     The idea is to enable users of the tool to perform analysis of logs via grep/sort primitives.
>     This can be accomplished via a relatively simple Map-Reduce task where the map does the *grep* for the given pattern via RegexMapper and then the implicit *sort* (reducer) is used with a custom Comparator which performs the user-specified comparision (columns). 
>     The sort/grep specs can be fairly powerful by letting the user of the tool use java's in-built regex patterns (java.util.regex).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jul  6 05:59:20 2006
Return-Path: 
 <hadoop-dev-return-2388-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34201 invoked from network); 6 Jul 2006 05:59:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 05:59:20 -0000
Received: (qmail 65091 invoked by uid 500); 6 Jul 2006 05:59:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 65063 invoked by uid 500); 6 Jul 2006 05:59:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 65054 invoked by uid 99); 6 Jul 2006 05:59:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 22:59:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 22:59:19 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4581F410433
	for <hadoop-dev@lucene.apache.org>; Thu,  6 Jul 2006 05:57:31 +0000 (GMT)
Message-ID: <30264584.1152165451281.JavaMail.jira@brutus>
Date: Thu, 6 Jul 2006 05:57:31 +0000 (GMT+00:00)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-346) Generic 'Sort' Infrastructure for
 Map-Reduce framework.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Generic 'Sort' Infrastructure for Map-Reduce framework.
-------------------------------------------------------

         Key: HADOOP-346
         URL: http://issues.apache.org/jira/browse/HADOOP-346
     Project: Hadoop
        Type: New Feature

  Components: mapred  
    Reporter: Arun C Murthy
 Assigned to: Arun C Murthy 


It would be useful to add a generic *sort* infrastructure to the Map-Reduce framework to ease usage.
Specifically the idea to add a fairly generic and powerful *comparator* which can be configured by the user to meet his specific needs.

Spec:
--------
 
  The proposal is to model generic (uber) comparator along the lines of the the standard unix *sort* command. The comparator provides the following (configurable) functionality:

  a) Separator for breaking up the data (stream) into 'columns'.
  b) Multiple key ranges for specifying priorities of 'columns'. (ala --keys/-k option of unix sort i.e. -k 2,3 -k 1,4 etc.)
  c) A variant of a) to let user specify byte range-boundaries without using a separator for 'columns'.
  d) Option to sort 'reverse'.
  e) Option to do a 'stable' sort i.e. don't do a last-ditch comparision of all bytes if all key ranges match.
  f) Option to do 'numeric' comparisions instead of lexicographical comparisions?

  Of course all these are optional with the default behaviour as-is today.

     - * - * -

 Anything more/less?

thanks,
Arun


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jul  6 06:37:20 2006
Return-Path: 
 <hadoop-dev-return-2389-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 65225 invoked from network); 6 Jul 2006 06:37:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 06:37:20 -0000
Received: (qmail 31924 invoked by uid 500); 6 Jul 2006 06:37:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 31885 invoked by uid 500); 6 Jul 2006 06:37:19 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31876 invoked by uid 99); 6 Jul 2006 06:37:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 23:37:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 23:37:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CBEFD7141F4
	for <hadoop-dev@lucene.apache.org>; Thu,  6 Jul 2006 06:35:30 +0000 (GMT)
Message-ID: <13942493.1152167730832.JavaMail.jira@brutus>
Date: Thu, 6 Jul 2006 06:35:30 +0000 (GMT+00:00)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-342) Design/Implement a tool to support
 archival and analysis of logfiles.
In-Reply-To: <18424480.1151929589854.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-342?page=comments#action_12419414 ] 

Arun C Murthy commented on HADOOP-342:
--------------------------------------

Summary of logalyzer usage:

Logalyzer.0.0.1
Usage: 
Logalyzer [-archive -logs urlsFile>] -archiveDir <archiveDirectory> -grep <pattern> -sort <column1,column2,...> -separator <separator> -analysis <outputDirectory>

Usage Scenarios:
---------------------------

a) Archive only:

$ java org.apache.hadoop.tools.Logalyzer -archive -logs <urlsFile> -archiveDir <archiveDirectory>

 Fetch the logs specified in <urlsFile> (arbitrary combination of dfs & http based logs) and archive it in <archiveDirectory> (in the dfs).

  Archival of logs from diverse sources is accomplished using the *distcp* tool (HADOOP-341). 


b) Analyse only:
 
 $ java org.apache.hadoop.tools.Logalyzer -archiveDir <archiveDirectory> -grep <pattern> -sort <column1,column2,...> -separator <separator> -analysis <outputDirectory>

  Analyse the logs in <archiveDirectory> i.e. grep/sort-with-separator and store the output (as a single textfile) of 'analysis' in <outputDirectory>.

  This is accomplished via a Map-Reduce task where the map does the *grep* for the given pattern via RegexMapper and then the implicit *sort* (reducer) is used with a custom Comparator which performs the user-specified comparision (columns).


c) Archive and analyse

  $ java org.apache.hadoop.tools.Logalyzer -archive -logs <urlsFile> -archiveDir <archiveDirectory> -grep <pattern> -sort <column1,column2,...> -separator <separator> -analysis <outputDirectory>
 
  Perform both a) and b) tasks.

       - * - * -

Arun

> Design/Implement a tool to support archival and analysis of logfiles.
> ---------------------------------------------------------------------
>
>          Key: HADOOP-342
>          URL: http://issues.apache.org/jira/browse/HADOOP-342
>      Project: Hadoop
>         Type: New Feature

>     Reporter: Arun C Murthy
>  Attachments: logalyzer.patch
>
> Requirements:
>   a) Create a tool support archival of logfiles (from diverse sources) in hadoop's dfs.
>   b) The tool should also support analysis of the logfiles via grep/sort primitives. The tool should allow for fairly generic pattern 'grep's and let users 'sort' the matching lines (from grep) on 'columns' of their choice.
>   E.g. from hadoop logs: Look for all log-lines with 'FATAL' and sort them based on timestamps (column x)  and then on column y (column x, followed by column y).
> Design/Implementation:
>   a) Log Archival
>     Archival of logs from diverse sources can be accomplished using the *distcp* tool (HADOOP-341).
>   
>   b) Log analysis
>     The idea is to enable users of the tool to perform analysis of logs via grep/sort primitives.
>     This can be accomplished via a relatively simple Map-Reduce task where the map does the *grep* for the given pattern via RegexMapper and then the implicit *sort* (reducer) is used with a custom Comparator which performs the user-specified comparision (columns). 
>     The sort/grep specs can be fairly powerful by letting the user of the tool use java's in-built regex patterns (java.util.regex).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jul  6 08:04:20 2006
Return-Path: 
 <hadoop-dev-return-2390-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9538 invoked from network); 6 Jul 2006 08:04:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 08:04:20 -0000
Received: (qmail 71486 invoked by uid 500); 6 Jul 2006 08:04:19 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 71448 invoked by uid 500); 6 Jul 2006 08:04:19 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 71433 invoked by uid 99); 6 Jul 2006 08:04:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 01:04:19 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=DNS_FROM_RFC_ABUSE,NO_REAL_NAME,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of barry.kaplan@gmail.com
 designates 64.233.184.228 as permitted sender)
Received: from [64.233.184.228] (HELO wr-out-0506.google.com) (64.233.184.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 01:04:18 -0700
Received: by wr-out-0506.google.com with SMTP id i22so1065467wra
        for <hadoop-dev@lucene.apache.org>;
 Thu, 06 Jul 2006 01:03:58 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=J/D+BfpV/p1Cx2P4/aqw1MZUlNjUt2Lw6nxUTg4HvZyGqiL2ipYaY2kp75VJA4CZoLz6iVPXSAdwDWabNokT2nTm8/2rzqfH13CeavlMO3/DbztjUUSXczRoTwu6SCi1JpLD5kCUfHzRA6lp1zjBaHqd0uq8hU5GxtoaPpe9EjM=
Received: by 10.54.140.13 with SMTP id n13mr318708wrd;
        Thu, 06 Jul 2006 01:03:57 -0700 (PDT)
Received: by 10.54.141.13 with HTTP; Thu, 6 Jul 2006 01:03:57 -0700 (PDT)
Message-ID: <cac652840607060103o5cfb63a9nef9a5d40e40436e8@mail.gmail.com>
Date: Thu, 6 Jul 2006 01:03:57 -0700
From: barry.kaplan@gmail.com
To: hadoop-dev@lucene.apache.org
Subject: Re: Re: Stopping datanode and namenode
In-Reply-To: <B736A161-1DCE-4905-B7B0-BFE552C730AD@yahoo-inc.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <cac652840607051909j60480860h4b5601a4688c45db@mail.gmail.com>
	 <B736A161-1DCE-4905-B7B0-BFE552C730AD@yahoo-inc.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I am not sure of what you are asking, but we are using DFS inside our
servlet, which runs in tomcat, to allow us to distribute files in a
cleaner, easier, method then an NFS share.

To make things easier for us (especially operations) we have each of
our servlets act as a datanode. This way each of our servers (web
server), which only uses around 10GB of disk space, can take advantage
of the rather cheap 40-100GB drives that are in them for the purpose
of DFS.

From MAILER-DAEMON Thu Jul  6 10:40:20 2006
Return-Path: 
 <hadoop-dev-return-2391-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 69752 invoked from network); 6 Jul 2006 10:40:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 10:40:20 -0000
Received: (qmail 27601 invoked by uid 500); 6 Jul 2006 10:40:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 27568 invoked by uid 500); 6 Jul 2006 10:40:19 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 27559 invoked by uid 99); 6 Jul 2006 10:40:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 03:40:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 03:40:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 16BE1410414
	for <hadoop-dev@lucene.apache.org>; Thu,  6 Jul 2006 10:38:30 +0000 (GMT)
Message-ID: <17227613.1152182310090.JavaMail.jira@brutus>
Date: Thu, 6 Jul 2006 10:38:30 +0000 (GMT+00:00)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-347) Implement HDFS content browsing
 interface
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Implement HDFS content browsing interface
-----------------------------------------

         Key: HADOOP-347
         URL: http://issues.apache.org/jira/browse/HADOOP-347
     Project: Hadoop
        Type: New Feature

  Components: dfs  
    Versions: 0.1.0, 0.2.0, 0.1.1, 0.3.0, 0.4.0, 0.2.1, 0.3.1, 0.3.2    
    Reporter: Devaraj Das
 Assigned to: Devaraj Das 
     Fix For: 0.4.1


Implement HDFS content browsing interface over HTTP. Clients would connect to the NameNode and this would send a redirect to a random DataNode. The DataNode, via dfs client, would proxy to namenode for metadata browsing and to other datanodes for content. One can also view the local blocks on any DataNode. Head, Tail will be provided as shorthands for viewing the first block and the last block of a file. 
For full file viewing, the data displayed per HTTP request will be a block with a PREV/NEXT link. The block size for viewing can be a configurable parameter (the user sets it via the web browser) to the HTTP server (e.g., 256 KB can be the default block size for viewing files).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jul  6 17:43:32 2006
Return-Path: 
 <hadoop-dev-return-2392-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76029 invoked from network); 6 Jul 2006 17:43:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 17:43:32 -0000
Received: (qmail 13994 invoked by uid 500); 6 Jul 2006 17:43:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13892 invoked by uid 500); 6 Jul 2006 17:43:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13845 invoked by uid 99); 6 Jul 2006 17:43:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 10:43:26 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.126.228.150] (HELO rsmtp2.corp.yahoo.com)
 (207.126.228.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 10:43:23 -0700
Received: from [207.126.231.236] (eric14-mac.corp.yahoo.com [207.126.231.236])
	(authenticated bits=0)
	by rsmtp2.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k66Hgruq014872
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Thu, 6 Jul 2006 10:42:54 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=L099uGs9MeMQVzJOAnOtW+1GoCCHQvnjCGiFqXVf/wl6c5HMNeJdMnvTCVtVgJrY
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <cac652840607060103o5cfb63a9nef9a5d40e40436e8@mail.gmail.com>
References: <cac652840607051909j60480860h4b5601a4688c45db@mail.gmail.com>
 <B736A161-1DCE-4905-B7B0-BFE552C730AD@yahoo-inc.com>
 <cac652840607060103o5cfb63a9nef9a5d40e40436e8@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <DE4A9625-1F5D-4D6C-B232-901AF64E30F9@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Eric Baldeschwieler <eric14@yahoo-inc.com>
Subject: Re: Stopping datanode and namenode
Date: Thu, 6 Jul 2006 10:42:50 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thats sounds cool.  Sounds like something that would be great in the  
examples directory.  Then we could put some regressions in place to  
make sure we don't break it as we uplevel things too.

Might it make more sense to run the datanode as a distinct process  
and use the client in your servelet?  I'm no expert on web farms,  
just curious.

On Jul 6, 2006, at 1:03 AM, barry.kaplan@gmail.com wrote:

> I am not sure of what you are asking, but we are using DFS inside our
> servlet, which runs in tomcat, to allow us to distribute files in a
> cleaner, easier, method then an NFS share.
>
> To make things easier for us (especially operations) we have each of
> our servlets act as a datanode. This way each of our servers (web
> server), which only uses around 10GB of disk space, can take advantage
> of the rather cheap 40-100GB drives that are in them for the purpose
> of DFS.


From MAILER-DAEMON Thu Jul  6 18:01:21 2006
Return-Path: 
 <hadoop-dev-return-2393-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 81081 invoked from network); 6 Jul 2006 18:01:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 18:01:21 -0000
Received: (qmail 53016 invoked by uid 500); 6 Jul 2006 18:01:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 52987 invoked by uid 500); 6 Jul 2006 18:01:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 52978 invoked by uid 99); 6 Jul 2006 18:01:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 11:01:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 11:01:19 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A629241042A
	for <hadoop-dev@lucene.apache.org>; Thu,  6 Jul 2006 17:59:30 +0000 (GMT)
Message-ID: <15176591.1152208770677.JavaMail.jira@brutus>
Date: Thu, 6 Jul 2006 17:59:30 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-346) Generic 'Sort' Infrastructure for
 Map-Reduce framework.
In-Reply-To: <30264584.1152165451281.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-346?page=comments#action_12419572 ] 

Owen O'Malley commented on HADOOP-346:
--------------------------------------

This should be done by implementing a new WritableComparator, which can be selected by calling JobConf.setKeyOutputComparator(). It does not need to change the framework's sort code. The configuration should be done via the job conf along the lines of:

conf.set("comparator.generic.utf8.keys",  "2,4,3"); // columns 2, 4, and 3 are the sort key
conf.set("comparator.generic.utf8.deliminator", " "); // how to split columns
conf.setBoolean("comparator.generic.utf8.reverse", true); // sort backwards

I assume this comparator is just limited to keys that are UTF8. The corresponding comparator for Hadoop record io would also make sense, but there the fields would be given by name. For example,

  class Foo {
     int field1;
     int field2;
     ustring field3;
  }

You'd like to set "comparator.generic.record.keys" to "field3,field2". But the record io generic comparator is obviously a different bug. *smile*

You won't be able to implement a stable sort without a lot of work. Do you have applications that need stable sorts?

> Generic 'Sort' Infrastructure for Map-Reduce framework.
> -------------------------------------------------------
>
>          Key: HADOOP-346
>          URL: http://issues.apache.org/jira/browse/HADOOP-346
>      Project: Hadoop
>         Type: New Feature

>   Components: mapred
>     Reporter: Arun C Murthy
>     Assignee: Arun C Murthy

>
> It would be useful to add a generic *sort* infrastructure to the Map-Reduce framework to ease usage.
> Specifically the idea to add a fairly generic and powerful *comparator* which can be configured by the user to meet his specific needs.
> Spec:
> --------
>  
>   The proposal is to model generic (uber) comparator along the lines of the the standard unix *sort* command. The comparator provides the following (configurable) functionality:
>   a) Separator for breaking up the data (stream) into 'columns'.
>   b) Multiple key ranges for specifying priorities of 'columns'. (ala --keys/-k option of unix sort i.e. -k 2,3 -k 1,4 etc.)
>   c) A variant of a) to let user specify byte range-boundaries without using a separator for 'columns'.
>   d) Option to sort 'reverse'.
>   e) Option to do a 'stable' sort i.e. don't do a last-ditch comparision of all bytes if all key ranges match.
>   f) Option to do 'numeric' comparisions instead of lexicographical comparisions?
>   Of course all these are optional with the default behaviour as-is today.
>      - * - * -
>  Anything more/less?
> thanks,
> Arun

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jul  6 18:03:20 2006
Return-Path: 
 <hadoop-dev-return-2394-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 82353 invoked from network); 6 Jul 2006 18:03:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 18:03:20 -0000
Received: (qmail 56872 invoked by uid 500); 6 Jul 2006 18:03:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 56851 invoked by uid 500); 6 Jul 2006 18:03:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 56837 invoked by uid 99); 6 Jul 2006 18:03:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 11:03:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 11:03:19 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9B299410429
	for <hadoop-dev@lucene.apache.org>; Thu,  6 Jul 2006 18:01:30 +0000 (GMT)
Message-ID: <9033338.1152208890632.JavaMail.jira@brutus>
Date: Thu, 6 Jul 2006 18:01:30 +0000 (GMT+00:00)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-347) Implement HDFS content browsing
 interface
In-Reply-To: <17227613.1152182310090.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-347?page=comments#action_12419573 ] 

eric baldeschwieler commented on HADOOP-347:
--------------------------------------------

Sounds good.

Could you provide a little more detail on the UI on the name node?  I image a link on the front page to a page that redirects to a random data node.  That the plan?

Also you probably want to redirect the reader to a node containing the first block of the file when you get the files contents.

The block viewing seems like a good option, we should also provide the ability to simply fetch the full file.  Maybe two links on the directory browsing API could provide this option?  Machine clients would be frustrated by the block structure.

Let's be sure to support tail (-f in the future).  The is very often the desired operation.  A third link on the directory browsing page would do nicely.

I like the blocked view idea.  Perhaps all of this can simply be GET arguments appended to the end of the URL?  IE "HDFS://x.com/myPath?sz=128k&off=512k"  Negative offsets could be used for tail.

So you imagine a badge at the top of the block viewed page with <prev next> links?  Might just add some block size options there too and tail.  Keep the whole API stateless (all info in the URL).


> Implement HDFS content browsing interface
> -----------------------------------------
>
>          Key: HADOOP-347
>          URL: http://issues.apache.org/jira/browse/HADOOP-347
>      Project: Hadoop
>         Type: New Feature

>   Components: dfs
>     Versions: 0.1.0, 0.2.0, 0.1.1, 0.3.0, 0.4.0, 0.2.1, 0.3.1, 0.3.2
>     Reporter: Devaraj Das
>     Assignee: Devaraj Das
>      Fix For: 0.4.1

>
> Implement HDFS content browsing interface over HTTP. Clients would connect to the NameNode and this would send a redirect to a random DataNode. The DataNode, via dfs client, would proxy to namenode for metadata browsing and to other datanodes for content. One can also view the local blocks on any DataNode. Head, Tail will be provided as shorthands for viewing the first block and the last block of a file. 
> For full file viewing, the data displayed per HTTP request will be a block with a PREV/NEXT link. The block size for viewing can be a configurable parameter (the user sets it via the web browser) to the HTTP server (e.g., 256 KB can be the default block size for viewing files).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jul  6 18:30:20 2006
Return-Path: 
 <hadoop-dev-return-2395-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 88875 invoked from network); 6 Jul 2006 18:30:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 18:30:20 -0000
Received: (qmail 97295 invoked by uid 500); 6 Jul 2006 18:30:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97139 invoked by uid 500); 6 Jul 2006 18:30:19 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97128 invoked by uid 99); 6 Jul 2006 18:30:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 11:30:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 11:30:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D246641042A
	for <hadoop-dev@lucene.apache.org>; Thu,  6 Jul 2006 18:28:29 +0000 (GMT)
Message-ID: <6490339.1152210509858.JavaMail.jira@brutus>
Date: Thu, 6 Jul 2006 18:28:29 +0000 (GMT+00:00)
From: "Barry Kaplan (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-348) fs.default.name default not working
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

fs.default.name default not working
-----------------------------------

         Key: HADOOP-348
         URL: http://issues.apache.org/jira/browse/HADOOP-348
     Project: Hadoop
        Type: Bug

  Components: dfs  
    Reporter: Barry Kaplan
    Priority: Minor


in NameNode:84 and FSNamesystem:176 there is a line:

InetSocketAddress addr = DataNode.createSocketAddr(conf.get("fs.default.name", "local"));

This won't ever work as createSocketAddr first checks to make sure there is a : in the string to get the server name and port. It is not a super simple fix of just putting in a :50000 (or something like that) because the NameNode constructor allows you to pass in a port that would need to match the port the in the conf setting. I think the method public NameNode(File dir, int port, Configuration conf) should simply be deprecated.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jul  6 18:32:23 2006
Return-Path: 
 <hadoop-dev-return-2396-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 89260 invoked from network); 6 Jul 2006 18:32:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 18:32:23 -0000
Received: (qmail 4053 invoked by uid 500); 6 Jul 2006 18:32:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 4020 invoked by uid 500); 6 Jul 2006 18:32:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 4008 invoked by uid 99); 6 Jul 2006 18:32:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 11:32:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 11:32:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D3E1E41042A
	for <hadoop-dev@lucene.apache.org>; Thu,  6 Jul 2006 18:30:29 +0000 (GMT)
Message-ID: <24802631.1152210629864.JavaMail.jira@brutus>
Date: Thu, 6 Jul 2006 18:30:29 +0000 (GMT+00:00)
From: "Barry Kaplan (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-349) Allow info server to be turned off/on
 by conf file
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Allow info server to be turned off/on by conf file
--------------------------------------------------

         Key: HADOOP-349
         URL: http://issues.apache.org/jira/browse/HADOOP-349
     Project: Hadoop
        Type: Improvement

  Components: conf  
    Reporter: Barry Kaplan


Since I am using hadoop within my own servlet which is not Jetty, it would be nice to not have to need Jetty to run my servlet. As such I propose adding an if statement/donf setting at FSNamesystem:171 as such         

if(conf.getBoolean("dfs.info.active",true)){
            this.infoPort = conf.getInt("dfs.info.port", 50070);
            this.infoServer = new StatusHttpServer("dfs", infoPort, false);
            this.infoServer.start();
}

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jul  6 18:34:24 2006
Return-Path: 
 <hadoop-dev-return-2397-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 89484 invoked from network); 6 Jul 2006 18:34:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 18:34:24 -0000
Received: (qmail 7855 invoked by uid 500); 6 Jul 2006 18:34:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 7748 invoked by uid 500); 6 Jul 2006 18:34:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 7639 invoked by uid 99); 6 Jul 2006 18:34:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 11:34:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 11:34:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6AD5F410429
	for <hadoop-dev@lucene.apache.org>; Thu,  6 Jul 2006 18:32:33 +0000 (GMT)
Message-ID: <21074015.1152210753434.JavaMail.jira@brutus>
Date: Thu, 6 Jul 2006 18:32:33 +0000 (GMT+00:00)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-347) Implement HDFS content browsing
 interface
In-Reply-To: <17227613.1152182310090.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-347?page=comments#action_12419577 ] 

Devaraj Das commented on HADOOP-347:
------------------------------------

Thanks Eric for the inputs! 
Regarding the UI on the front page, what you say makes sense. The other option being the namenode sending a HTTP REDIRECT to the host the namenode chooses. We can take the first approach since that will not involve sending the REDIRECT (thereby saving some data communication overhead).
I agree in general with the other things like block viewing, etc. you mention. Also, I plan to support tail too (mentioned that when I created this bug).

> Implement HDFS content browsing interface
> -----------------------------------------
>
>          Key: HADOOP-347
>          URL: http://issues.apache.org/jira/browse/HADOOP-347
>      Project: Hadoop
>         Type: New Feature

>   Components: dfs
>     Versions: 0.1.0, 0.2.0, 0.1.1, 0.3.0, 0.4.0, 0.2.1, 0.3.1, 0.3.2
>     Reporter: Devaraj Das
>     Assignee: Devaraj Das
>      Fix For: 0.4.1

>
> Implement HDFS content browsing interface over HTTP. Clients would connect to the NameNode and this would send a redirect to a random DataNode. The DataNode, via dfs client, would proxy to namenode for metadata browsing and to other datanodes for content. One can also view the local blocks on any DataNode. Head, Tail will be provided as shorthands for viewing the first block and the last block of a file. 
> For full file viewing, the data displayed per HTTP request will be a block with a PREV/NEXT link. The block size for viewing can be a configurable parameter (the user sets it via the web browser) to the HTTP server (e.g., 256 KB can be the default block size for viewing files).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jul  6 18:46:21 2006
Return-Path: 
 <hadoop-dev-return-2398-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94196 invoked from network); 6 Jul 2006 18:46:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 18:46:21 -0000
Received: (qmail 53671 invoked by uid 500); 6 Jul 2006 18:46:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53633 invoked by uid 500); 6 Jul 2006 18:46:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53620 invoked by uid 99); 6 Jul 2006 18:46:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 11:46:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 11:46:19 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 99BC1410429
	for <hadoop-dev@lucene.apache.org>; Thu,  6 Jul 2006 18:44:30 +0000 (GMT)
Message-ID: <24709260.1152211470626.JavaMail.jira@brutus>
Date: Thu, 6 Jul 2006 18:44:30 +0000 (GMT+00:00)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-347) Implement HDFS content browsing
 interface
In-Reply-To: <17227613.1152182310090.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-347?page=comments#action_12419579 ] 

eric baldeschwieler commented on HADOOP-347:
--------------------------------------------

looking forward to all this good stuff!

> Implement HDFS content browsing interface
> -----------------------------------------
>
>          Key: HADOOP-347
>          URL: http://issues.apache.org/jira/browse/HADOOP-347
>      Project: Hadoop
>         Type: New Feature

>   Components: dfs
>     Versions: 0.1.0, 0.2.0, 0.1.1, 0.3.0, 0.4.0, 0.2.1, 0.3.1, 0.3.2
>     Reporter: Devaraj Das
>     Assignee: Devaraj Das
>      Fix For: 0.4.1

>
> Implement HDFS content browsing interface over HTTP. Clients would connect to the NameNode and this would send a redirect to a random DataNode. The DataNode, via dfs client, would proxy to namenode for metadata browsing and to other datanodes for content. One can also view the local blocks on any DataNode. Head, Tail will be provided as shorthands for viewing the first block and the last block of a file. 
> For full file viewing, the data displayed per HTTP request will be a block with a PREV/NEXT link. The block size for viewing can be a configurable parameter (the user sets it via the web browser) to the HTTP server (e.g., 256 KB can be the default block size for viewing files).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jul  6 19:02:47 2006
Return-Path: 
 <hadoop-dev-return-2399-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 98951 invoked from network); 6 Jul 2006 19:02:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 19:02:47 -0000
Received: (qmail 92216 invoked by uid 500); 6 Jul 2006 19:02:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 92060 invoked by uid 500); 6 Jul 2006 19:02:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 92051 invoked by uid 99); 6 Jul 2006 19:02:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 12:02:46 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of sutter@gmail.com designates
 64.233.162.193 as permitted sender)
Received: from [64.233.162.193] (HELO nz-out-0102.google.com) (64.233.162.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 12:02:46 -0700
Received: by nz-out-0102.google.com with SMTP id k1so1055099nzf
        for <hadoop-dev@lucene.apache.org>;
 Thu, 06 Jul 2006 12:02:25 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=sF6P1n39IXP0ESfhYZ1VtkXdvLkzraMsRJz4vN8TUNDgOERyvPzOtsLtLSM8R0ntWGhnGwFZoFjvHCoqi+zA/Lx3a2PkpuHp/1T952Ct2lxhhz3VmgIMVeAMHK+qCRaLORXqYYCYpNMO9r74ZIdA95jnzsVonucf9joboioqB50=
Received: by 10.36.67.19 with SMTP id p19mr502105nza;
        Thu, 06 Jul 2006 12:02:25 -0700 (PDT)
Received: by 10.36.132.16 with HTTP; Thu, 6 Jul 2006 12:02:24 -0700 (PDT)
Message-ID: <e1d10fc00607061202j7ee2f796o87f667c835509749@mail.gmail.com>
Date: Thu, 6 Jul 2006 12:02:24 -0700
From: "Paul Sutter" <sutter@gmail.com>
To: hadoop-dev@lucene.apache.org
Subject: Re: Hadoop Distributed File System requirements on Wiki
In-Reply-To: <44A5C920.5050808@yahoo-inc.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_Part_693_24847922.1152212544953"
References: <44A5C920.5050808@yahoo-inc.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_693_24847922.1152212544953
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Konstantin,

I've reviewed the list of proposed changes and they look excellent.

A few suggestions:

*Constant size file blocks (#16),  -1*

I vote to keep variable size blocks, especially because you are adding
atomic append capabilities (#25). Variable length blocks creates the
possibility for blocks that contain only whole records. This:
- improves recoverability for large important files with one or more
irrevocably lost blocks, and
- makes it very clean for mappers to process local data blocks

*Recoverability and Availability Goals*

You might want to consider adding recoverability and availability goals.
Recoverability goals might include data lost in case of a namenode failure
(today its about a year, but it could be day-hour-minute-second-zero at
varying costs). If we have a statistically inclined person on the project,
we could estimate the acceptable block loss probabilities at scale.
Availability goals are probably less stringent than for most storage systems
(dare I say that a few hours downtime is probably OK) Adding these goals to
the document could be valuable for consensus and prioritization.
**
*Backup Scheme*
**
We might want to start discussion of a backup scheme for HDFS, especially
given all the courageous rewriting and feature-addition likely to occur.
We've looked carefully at this, and we think that we can get back into
production by restoring only a subset of the data into our system, but we're
likely to need an effective backup tool to do this.

*Rebalancing (#22,#21)*

I would suggest that keeping disk usage balanced is more than a performance
feature, its important for the success of running jobs with large map
outputs or large sorts. Our most common reducer failure is running out of
disk space during sort, and this is caused by imbalanced block allocation.

Thanks!

Paul

On 6/30/06, Konstantin Shvachko <shv@yahoo-inc.com> wrote:
>
> I've created a Wiki page that summarizes DFS requirements and proposed
> changes.
> This is a summary of discussions held in this mailing list and
> additional internal discussions.
> The page is here:
>
> http://wiki.apache.org/lucene-hadoop/DFS_requirements
>
> I see there is an ongoing related discussion in HADOOP-337.
> We prioritized our goals as
> (1) Reliability (which includes Recoverability and Availability)
> (2) Scalability
> (3) Functionality
> (4) Performance
> (5) other
> But then gave higher priority to some features like the append
> functionality.
>
> Happy holidays to everybody.
>
> --Konstantin Shvachko
>

------=_Part_693_24847922.1152212544953--

From MAILER-DAEMON Thu Jul  6 19:25:09 2006
Return-Path: 
 <hadoop-dev-return-2400-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 13989 invoked from network); 6 Jul 2006 19:25:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 19:25:09 -0000
Received: (qmail 30476 invoked by uid 500); 6 Jul 2006 19:25:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 30319 invoked by uid 500); 6 Jul 2006 19:25:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 30310 invoked by uid 99); 6 Jul 2006 19:25:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 12:25:08 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.126.228.149] (HELO rsmtp1.corp.yahoo.com)
 (207.126.228.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 12:25:07 -0700
Received: from [207.126.231.236] (eric14-mac.corp.yahoo.com [207.126.231.236])
	(authenticated bits=0)
	by rsmtp1.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k66JOic3021155
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Thu, 6 Jul 2006 12:24:44 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=RJp/4TLWyfw0ZsF2s/4/GS7Yu7MTBo//HKoUIa8gm4AZrEyOrssnxFic/Rc9dVR2
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <e1d10fc00607061202j7ee2f796o87f667c835509749@mail.gmail.com>
References: <44A5C920.5050808@yahoo-inc.com>
 <e1d10fc00607061202j7ee2f796o87f667c835509749@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <9DC52EE0-B405-4B34-A420-7A7BBF9EF548@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Eric Baldeschwieler <eric14@yahoo-inc.com>
Subject: Re: Hadoop Distributed File System requirements on Wiki
Date: Thu, 6 Jul 2006 12:24:41 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 6, 2006, at 12:02 PM, Paul Sutter wrote:

...
> *Constant size file blocks (#16),  -1*
>
> I vote to keep variable size blocks, especially because you are adding
> atomic append capabilities (#25). Variable length blocks creates the
> possibility for blocks that contain only whole records. This:
> - improves recoverability for large important files with one or more
> irrevocably lost blocks, and
> - makes it very clean for mappers to process local data blocks

...  I think we can achieve our goal without compromising yours.   
Each block can be of any size up to the files fixed block size.  The  
system can be aware of that and provide an API to report gaps and/or  
an API option to skip them or see them as NULLs.  This reporting can  
be done at the datanode level allowing us to remove all the size data  
& logic at the namenode level.

** If you agree, why don't we just add the above annotation to  
konstantine's doc?

> *Recoverability and Availability Goals*
...
> **
> *Backup Scheme*
> **
> We might want to start discussion of a backup scheme for HDFS,  
> especially
> given all the courageous rewriting and feature-addition likely to  
> occur.

** I agree, this needs to be on the list.  I'm imagining a command  
that hardlinks every datanode's (and namenode's if needed) files into  
a snapshot directory.  And another command that moves all current  
state into a snapshot directory and hardlinks a snapshot's state back  
into the working directory.  This would be very fast and not cost  
much space in the short term.  Thoughts?  (yes, hardlinks are a pain  
on the PC, we can discuss design later)

> *Rebalancing (#22,#21)*
>
> I would suggest that keeping disk usage balanced is more than a  
> performance
> feature, its important for the success of running jobs with large map
> outputs or large sorts. Our most common reducer failure is running  
> out of
> disk space during sort, and this is caused by imbalanced block  
> allocation.

** Good point.  Any interest in helping us with this one?

>
> On 6/30/06, Konstantin Shvachko <shv@yahoo-inc.com> wrote:
>>
>> I've created a Wiki page that summarizes DFS requirements and  
>> proposed
>> changes.
>> This is a summary of discussions held in this mailing list and
>> additional internal discussions.
>> The page is here:
>>
>> http://wiki.apache.org/lucene-hadoop/DFS_requirements
>>
>> I see there is an ongoing related discussion in HADOOP-337.
>> We prioritized our goals as
>> (1) Reliability (which includes Recoverability and Availability)
>> (2) Scalability
>> (3) Functionality
>> (4) Performance
>> (5) other
>> But then gave higher priority to some features like the append
>> functionality.
>>
>> Happy holidays to everybody.
>>
>> --Konstantin Shvachko
>>


From MAILER-DAEMON Thu Jul  6 19:32:20 2006
Return-Path: 
 <hadoop-dev-return-2401-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 18578 invoked from network); 6 Jul 2006 19:32:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 19:32:20 -0000
Received: (qmail 46761 invoked by uid 500); 6 Jul 2006 19:32:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 46735 invoked by uid 500); 6 Jul 2006 19:32:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46725 invoked by uid 99); 6 Jul 2006 19:32:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 12:32:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 12:32:19 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AA1F141042D
	for <hadoop-dev@lucene.apache.org>; Thu,  6 Jul 2006 19:30:30 +0000 (GMT)
Message-ID: <23135992.1152214230694.JavaMail.jira@brutus>
Date: Thu, 6 Jul 2006 19:30:30 +0000 (GMT+00:00)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-346) Generic 'Sort' Infrastructure for
 Map-Reduce framework.
In-Reply-To: <30264584.1152165451281.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-346?page=comments#action_12419587 ] 

eric baldeschwieler commented on HADOOP-346:
--------------------------------------------

I'd like to see the comparators config explicitly modelled after unix sort unless a better model exists in the java world?  Could we add the spec for how it is configured here?  Maybe a single string with unix sort options on it?

This should not be limited to utf8.  We should be able to split on bytes or lengths and handle binary keys too.  

> Generic 'Sort' Infrastructure for Map-Reduce framework.
> -------------------------------------------------------
>
>          Key: HADOOP-346
>          URL: http://issues.apache.org/jira/browse/HADOOP-346
>      Project: Hadoop
>         Type: New Feature

>   Components: mapred
>     Reporter: Arun C Murthy
>     Assignee: Arun C Murthy

>
> It would be useful to add a generic *sort* infrastructure to the Map-Reduce framework to ease usage.
> Specifically the idea to add a fairly generic and powerful *comparator* which can be configured by the user to meet his specific needs.
> Spec:
> --------
>  
>   The proposal is to model generic (uber) comparator along the lines of the the standard unix *sort* command. The comparator provides the following (configurable) functionality:
>   a) Separator for breaking up the data (stream) into 'columns'.
>   b) Multiple key ranges for specifying priorities of 'columns'. (ala --keys/-k option of unix sort i.e. -k 2,3 -k 1,4 etc.)
>   c) A variant of a) to let user specify byte range-boundaries without using a separator for 'columns'.
>   d) Option to sort 'reverse'.
>   e) Option to do a 'stable' sort i.e. don't do a last-ditch comparision of all bytes if all key ranges match.
>   f) Option to do 'numeric' comparisions instead of lexicographical comparisions?
>   Of course all these are optional with the default behaviour as-is today.
>      - * - * -
>  Anything more/less?
> thanks,
> Arun

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jul  6 20:45:20 2006
Return-Path: 
 <hadoop-dev-return-2402-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40384 invoked from network); 6 Jul 2006 20:45:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 20:45:20 -0000
Received: (qmail 43672 invoked by uid 500); 6 Jul 2006 20:45:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 43639 invoked by uid 500); 6 Jul 2006 20:45:19 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 43630 invoked by uid 99); 6 Jul 2006 20:45:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 13:45:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 13:45:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BF91141042B
	for <hadoop-dev@lucene.apache.org>; Thu,  6 Jul 2006 20:43:29 +0000 (GMT)
Message-ID: <4329338.1152218609766.JavaMail.jira@brutus>
Date: Thu, 6 Jul 2006 20:43:29 +0000 (GMT+00:00)
From: "stack@archive.org (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-350) In standalone mode,
 'org.apache.commons.cli cannot be resolved'
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

In standalone mode, 'org.apache.commons.cli cannot be resolved'
---------------------------------------------------------------

         Key: HADOOP-350
         URL: http://issues.apache.org/jira/browse/HADOOP-350
     Project: Hadoop
        Type: Bug

    Versions: 0.5.0    
    Reporter: stack@archive.org
    Priority: Minor


Standalone works fine in 0.4.0 but if I use TRUNK, 'Last Changed Date: 2006-06-28 14:27:33 -0700 (Wed, 28 Jun 2006)', and pass it my fat job jar, I get following exception.

06/07/06 13:18:02 INFO conf.Configuration: parsing file:/tmp/hadoop-unjar29923/nutch-site.xml
06/07/06 13:18:02 INFO conf.Configuration: parsing file:/home/stack/workspace/hadoop-local-conf/hadoop-site.xml
Exception in thread "main" java.lang.Error: Unresolved compilation problems:   
        The import org.apache.commons.cli cannot be resolved
        The import org.apache.commons.cli cannot be resolved
        The import org.apache.commons.cli cannot be resolved
        The import org.apache.commons.cli cannot be resolved       
        The import org.apache.commons.cli cannot be resolved
        The import org.apache.commons.cli cannot be resolved
        The import org.apache.commons.cli cannot be resolved
        The import org.apache.commons.cli cannot be resolved
        The import org.apache.commons.cli cannot be resolved
        Options cannot be resolved to a type
        Option cannot be resolved to a type
        OptionBuilder cannot be resolved
        Option cannot be resolved to a type
        OptionBuilder cannot be resolved
        Option cannot be resolved to a type
        OptionBuilder cannot be resolved
        Option cannot be resolved to a type
        OptionBuilder cannot be resolved
        Options cannot be resolved to a type
        Options cannot be resolved to a type
        CommandLine cannot be resolved to a type
        Options cannot be resolved to a type
        The method buildGeneralOptions() is undefined for the type ToolBase
        CommandLineParser cannot be resolved to a type
        GnuParser cannot be resolved to a type
        CommandLine cannot be resolved to a type
        ParseException cannot be resolved to a type
        e cannot be resolved
        HelpFormatter cannot be resolved to a type
        HelpFormatter cannot be resolved to a type

        at org.apache.hadoop.util.ToolBase.<init>(ToolBase.java:21)
        at org.apache.hadoop.mapred.JobClient.<init>(JobClient.java:178)
        at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:320)
        at org.archive.access.nutch.ImportArcs.importArcs(ImportArcs.java:576)
        at org.archive.access.nutch.Nutchwax.doImport(Nutchwax.java:159)
        at org.archive.access.nutch.Nutchwax.doAll(Nutchwax.java:144)
        at org.archive.access.nutch.Nutchwax.doJob(Nutchwax.java:368)
        at org.archive.access.nutch.Nutchwax.main(Nutchwax.java:621)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at org.apache.hadoop.util.RunJar.main(RunJar.java:128)

I took a bit of a look.  Odd is that command-cli.jar is in hadoop/lib dir so should be found no problem (and we seem to be loading other stuff out of the uncompressed job jar fine -- see mention of nutch-site.xml above).   I tried adding the command-cli to my job jar.  I printed out all that RunJar -- see below -- was adding to its CLASSPATH and saw mention of command-cli but still no workee.

file:/tmp/hadoop-unjar29923/lib/archive-commons-1.8.0.jar
file:/tmp/hadoop-unjar29923/lib/commons-codec-1.3.jar
file:/tmp/hadoop-unjar29923/lib/commons-httpclient-3.0-rc3.jar
file:/tmp/hadoop-unjar29923/lib/commons-logging-1.0.4.jar
file:/tmp/hadoop-unjar29923/lib/dsi.unimi.it-1.2.0.jar
file:/tmp/hadoop-unjar29923/lib/commons-lang-2.1.jar
file:/tmp/hadoop-unjar29923/lib/commons-cli-2.0-SNAPSHOT.jar
file:/tmp/hadoop-unjar29923/lib/lucene-core-1.9.1.jar
file:/tmp/hadoop-unjar29923/lib/lucene-misc-1.9.1.jar
file:/tmp/hadoop-unjar29923/lib/jakarta-oro-2.0.7.jar
file:/tmp/hadoop-unjar29923/lib/xerces-2_6_2-apis.jar
file:/tmp/hadoop-unjar29923/lib/xerces-2_6_2.jar
file:/tmp/hadoop-unjar29923/lib/concurrent-1.3.4.jar
06/07/06 13:18:01 INFO conf.Configuration: parsing file:/home/stack/workspace/hadoop-local-conf/hadoop-default.xml 

Any ideas?

Thanks.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jul  6 20:56:23 2006
Return-Path: 
 <hadoop-dev-return-2403-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43637 invoked from network); 6 Jul 2006 20:56:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 20:56:23 -0000
Received: (qmail 59057 invoked by uid 500); 6 Jul 2006 20:56:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 59033 invoked by uid 500); 6 Jul 2006 20:56:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 59024 invoked by uid 99); 6 Jul 2006 20:56:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 13:56:22 -0700
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of sutter@gmail.com designates
 64.233.162.205 as permitted sender)
Received: from [64.233.162.205] (HELO nz-out-0102.google.com) (64.233.162.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 13:56:22 -0700
Received: by nz-out-0102.google.com with SMTP id k1so1071677nzf
        for <hadoop-dev@lucene.apache.org>;
 Thu, 06 Jul 2006 13:56:01 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=s/XwuDAtuJWx/zvLQiY45VpNG3Ldin62478PT8Am/HAG1+yaJZ1oui+eb/7p/QsI2Vz7IxElsXwzRJhl7FiOlM4AnLHl5qQyvZUMRyTU5eqwrNd0K0jLnv0z6Jc2JOyC5h4xyO8S+t0fngvu0DpV8lOdkskn12Wu+LKn+q3VVp4=
Received: by 10.36.19.4 with SMTP id 4mr1513162nzs;
        Thu, 06 Jul 2006 13:56:01 -0700 (PDT)
Received: by 10.36.132.16 with HTTP; Thu, 6 Jul 2006 13:56:01 -0700 (PDT)
Message-ID: <e1d10fc00607061356h4818e9c6j2966ec2c6ab02482@mail.gmail.com>
Date: Thu, 6 Jul 2006 13:56:01 -0700
From: "Paul Sutter" <sutter@gmail.com>
To: hadoop-dev@lucene.apache.org
Subject: Re: Hadoop Distributed File System requirements on Wiki
In-Reply-To: <9DC52EE0-B405-4B34-A420-7A7BBF9EF548@yahoo-inc.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <44A5C920.5050808@yahoo-inc.com>
	 <e1d10fc00607061202j7ee2f796o87f667c835509749@mail.gmail.com>
	 <9DC52EE0-B405-4B34-A420-7A7BBF9EF548@yahoo-inc.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Eric,

Thanks - response embedded below.

One more suggestion:  store a copy of the per-block metadata on the
datanode. it doesnt have to have an updated copy of the filename, just
the "original file name" and block offset would be fine. since you're
adding truncation features, you'd want some kind of truncation
generation number too. this would make possible a distributed namenode
recovery, which is belt-and-suspenders valuable even after adding
checkpointing features to the namenode. storing this metadata is more
important than writing the recovery program, since the recovery
program could be written after the disaster that makes it necessary.
(just a suggestion).

On 7/6/06, Eric Baldeschwieler <eric14@yahoo-inc.com> wrote:
>
> On Jul 6, 2006, at 12:02 PM, Paul Sutter wrote:
>
> ...
> > *Constant size file blocks (#16),  -1*
> >
> > I vote to keep variable size blocks, especially because you are adding
> > atomic append capabilities (#25). Variable length blocks creates the
> > possibility for blocks that contain only whole records. This:
> > - improves recoverability for large important files with one or more
> > irrevocably lost blocks, and
> > - makes it very clean for mappers to process local data blocks
>
> ...  I think we can achieve our goal without compromising yours.
> Each block can be of any size up to the files fixed block size.  The
> system can be aware of that and provide an API to report gaps and/or
> an API option to skip them or see them as NULLs.  This reporting can
> be done at the datanode level allowing us to remove all the size data
> & logic at the namenode level.
>
> ** If you agree, why don't we just add the above annotation to
> konstantine's doc?

Wow! Good idea, and now I see why you wanted to make the change in the
first place. I agree, please go ahead and add.

Incidently, its probably fine if
- the API just skipped the ghost bytes,
- programs using such files should only ever seek to locations that
had been returned by getPos(), and
- getPos() should return the byte offset of the next block as soon as
a ghost byte is reached.

I think existing programs will work fine within these restrictions.
The last one is intended for code like SequenceFile that checks
current position against file length when reading data.
(SequenceFiles' syncing code might have to get reconsidered, but would
be easier since you'd just advance to the next block on a checksum
failure).

> > *Recoverability and Availability Goals*
> ...
> > **
> > *Backup Scheme*
> > **
> > We might want to start discussion of a backup scheme for HDFS,
> > especially
> > given all the courageous rewriting and feature-addition likely to
> > occur.
>
> ** I agree, this needs to be on the list.  I'm imagining a command
> that hardlinks every datanode's (and namenode's if needed) files into
> a snapshot directory.  And another command that moves all current
> state into a snapshot directory and hardlinks a snapshot's state back
> into the working directory.  This would be very fast and not cost
> much space in the short term.  Thoughts?  (yes, hardlinks are a pain
> on the PC, we can discuss design later)

This is a fantastic idea.

But as for covering my fears, I'll feel safer with key data backed up
in a filesystem that is not DFS, as pedestrian as that sounds. :)

> > *Rebalancing (#22,#21)*
> >
> > I would suggest that keeping disk usage balanced is more than a
> > performance
> > feature, its important for the success of running jobs with large map
> > outputs or large sorts. Our most common reducer failure is running
> > out of
> > disk space during sort, and this is caused by imbalanced block
> > allocation.
>
> ** Good point.  Any interest in helping us with this one?

We'll take a look at it.

> >
> > On 6/30/06, Konstantin Shvachko <shv@yahoo-inc.com> wrote:
> >>
> >> I've created a Wiki page that summarizes DFS requirements and
> >> proposed
> >> changes.
> >> This is a summary of discussions held in this mailing list and
> >> additional internal discussions.
> >> The page is here:
> >>
> >> http://wiki.apache.org/lucene-hadoop/DFS_requirements
> >>
> >> I see there is an ongoing related discussion in HADOOP-337.
> >> We prioritized our goals as
> >> (1) Reliability (which includes Recoverability and Availability)
> >> (2) Scalability
> >> (3) Functionality
> >> (4) Performance
> >> (5) other
> >> But then gave higher priority to some features like the append
> >> functionality.
> >>
> >> Happy holidays to everybody.
> >>
> >> --Konstantin Shvachko
> >>
>
>

From MAILER-DAEMON Thu Jul  6 22:27:20 2006
Return-Path: 
 <hadoop-dev-return-2404-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 70857 invoked from network); 6 Jul 2006 22:27:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 22:27:20 -0000
Received: (qmail 78339 invoked by uid 500); 6 Jul 2006 22:27:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 78316 invoked by uid 500); 6 Jul 2006 22:27:19 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 78307 invoked by uid 99); 6 Jul 2006 22:27:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 15:27:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 15:27:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CF6F441042E
	for <hadoop-dev@lucene.apache.org>; Thu,  6 Jul 2006 22:25:29 +0000 (GMT)
Message-ID: <8704461.1152224729846.JavaMail.jira@brutus>
Date: Thu, 6 Jul 2006 22:25:29 +0000 (GMT+00:00)
From: "Barry Kaplan (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-351) Remove Jetty dependency
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Remove Jetty dependency
-----------------------

         Key: HADOOP-351
         URL: http://issues.apache.org/jira/browse/HADOOP-351
     Project: Hadoop
        Type: Wish

  Components: ipc  
    Reporter: Barry Kaplan


Somewhat related to HADOOP-349, it would be nice to not have a Jetty dependency for those of us embedding Hadoop within our own web applications. In particular the Server object is using SocketChannelOutputStream from the Jetty code base. It seems to me that for an object like this it would be better to simply have a Hadoop version of a blocking output stream on an nio channel if necessary vs. using the Jetty version requiring a Hadoop user's to package yet another jar file (and all the complications that are associated with that).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jul  6 22:29:21 2006
Return-Path: 
 <hadoop-dev-return-2405-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 71115 invoked from network); 6 Jul 2006 22:29:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 22:29:21 -0000
Received: (qmail 80030 invoked by uid 500); 6 Jul 2006 22:29:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 80004 invoked by uid 500); 6 Jul 2006 22:29:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 79994 invoked by uid 99); 6 Jul 2006 22:29:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 15:29:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 15:29:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DCCA541042F
	for <hadoop-dev@lucene.apache.org>; Thu,  6 Jul 2006 22:27:30 +0000 (GMT)
Message-ID: <14866000.1152224850901.JavaMail.jira@brutus>
Date: Thu, 6 Jul 2006 22:27:30 +0000 (GMT+00:00)
From: "Barry Kaplan (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-349) Allow info server to be turned
 off/on by conf file
In-Reply-To: <24802631.1152210629864.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-349?page=comments#action_12419609 ] 

Barry Kaplan commented on HADOOP-349:
-------------------------------------

Also see HADOOP-351

> Allow info server to be turned off/on by conf file
> --------------------------------------------------
>
>          Key: HADOOP-349
>          URL: http://issues.apache.org/jira/browse/HADOOP-349
>      Project: Hadoop
>         Type: Improvement

>   Components: conf
>     Reporter: Barry Kaplan

>
> Since I am using hadoop within my own servlet which is not Jetty, it would be nice to not have to need Jetty to run my servlet. As such I propose adding an if statement/donf setting at FSNamesystem:171 as such         
> if(conf.getBoolean("dfs.info.active",true)){
>             this.infoPort = conf.getInt("dfs.info.port", 50070);
>             this.infoServer = new StatusHttpServer("dfs", infoPort, false);
>             this.infoServer.start();
> }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jul  7 00:14:21 2006
Return-Path: 
 <hadoop-dev-return-2406-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 98276 invoked from network); 7 Jul 2006 00:14:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 00:14:21 -0000
Received: (qmail 97812 invoked by uid 500); 7 Jul 2006 00:14:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97788 invoked by uid 500); 7 Jul 2006 00:14:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97778 invoked by uid 99); 7 Jul 2006 00:14:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 17:14:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 17:14:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D3F4141043C
	for <hadoop-dev@lucene.apache.org>; Fri,  7 Jul 2006 00:12:30 +0000 (GMT)
Message-ID: <29381512.1152231150865.JavaMail.jira@brutus>
Date: Fri, 7 Jul 2006 00:12:30 +0000 (GMT+00:00)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-136) Overlong UTF8's not handled well
In-Reply-To: <64235546.1145045520182.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-136?page=comments#action_12419627 ] 

Michel Tourn commented on HADOOP-136:
-------------------------------------

FYI:
some info on Java-modified UTF-8 
(this was previously posted)
See Modified UTF-8 in: 
http://java.sun.com/developer/technicalArticles/Intl/Supplementary/ 

As far as i understand:
The bottom-line is that supplementary UTF-8 characters:
o would be encoded as 4+ bytes in non-Java programs
o but they are already encoded as two Java char-s (i.e. two-bytes) when our converter code sees them.
o and so the conversion to UTF-8 proceeds on these two chars independently.
o So all the existing Java UTF-8 code that only handles 1..3-bytewide chars is already compliant with Java-modified UTF-8.

What do the java-i18n experts think?

---
Earlier comment:

Concerning 4-bytes-long UTF-8 characters: 
it seems that this situation does not occur in "Java-modified-UTF8" 

The 4-byte chars are represented as 3+3. 
See Modified UTF-8 in: 
http://java.sun.com/developer/technicalArticles/Intl/Supplementary/ 


> Overlong UTF8's not handled well
> --------------------------------
>
>          Key: HADOOP-136
>          URL: http://issues.apache.org/jira/browse/HADOOP-136
>      Project: Hadoop
>         Type: Bug

>   Components: io
>     Versions: 0.2.0
>     Reporter: Dick King
>     Assignee: Michel Tourn
>     Priority: Minor
>      Fix For: 0.5.0
>  Attachments: largeutf8.patch
>
> When we feed an overlong string to the UTF8 constructor, two suboptimal things happen.
> First, we truncate to 0xffff/3 characters on the assumption that every character takes three bytes in UTF8.  This can truncate strings that don't need it, and it can be overoptimistic since there are characters that render as four bytes in UTF8.
> Second, the code doesn't actually handle four-byte characters.
> Third, there's a behavioral discontinuity.  If the string is "discovered" to be overlong by the arbitrary limit described above, we truncate with a log message, otherwise we signal a RuntimeException.  One feels that both forms of truncation should be treated alike.  However, this issue is concealed by the second issue; the exception will never be thrown because UTF8.utf8Length can't return more than three times the length of its input.
> I would recommend changing UTF8.utf8Length to let its caller know how many characters of the input string will actually fit if there's an overflow [perhaps by returning the negative of that number] and doing the truncation accurately as needed.
> -dk

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jul  7 02:22:21 2006
Return-Path: 
 <hadoop-dev-return-2407-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 38380 invoked from network); 7 Jul 2006 02:22:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 02:22:21 -0000
Received: (qmail 49643 invoked by uid 500); 7 Jul 2006 02:22:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49614 invoked by uid 500); 7 Jul 2006 02:22:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49605 invoked by uid 99); 7 Jul 2006 02:22:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 19:22:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 19:22:19 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9599741043D
	for <hadoop-dev@lucene.apache.org>; Fri,  7 Jul 2006 02:20:30 +0000 (GMT)
Message-ID: <12861699.1152238830609.JavaMail.jira@brutus>
Date: Fri, 7 Jul 2006 02:20:30 +0000 (GMT+00:00)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-321) DatanodeInfo refactoring
In-Reply-To: <20976373.1151024969902.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-321?page=all ]

Konstantin Shvachko updated HADOOP-321:
---------------------------------------

    Attachment: DatanodeInfo_refactor4-comp.patch

It took me a while to implement the composition approach.
But here it is. What I don't like about it is:
a) the patch is bigger (41K vs 54), and it's not just more changes
b) it's also the performance, I have to use 2 function calls instead of one,
whenever a member is accessed, but copying arrays just to obtain the inner
classes is what makes me really sad.
The latter can be avoided but will require even more changes.
I think it's not reasonable to spend more time on this issue.
Both versions are fully functional, let's pick one and move on.

> DatanodeInfo refactoring
> ------------------------
>
>          Key: HADOOP-321
>          URL: http://issues.apache.org/jira/browse/HADOOP-321
>      Project: Hadoop
>         Type: Improvement

>   Components: dfs
>     Reporter: Konstantin Shvachko
>     Assignee: Konstantin Shvachko
>      Fix For: 0.5.0
>  Attachments: DatanodeInfo_refactor.patch, DatanodeInfo_refactor3.patch, DatanodeInfo_refactor4-comp.patch, DatanodeInfo_refactor4.patch
>
> I'm trying to refactor some name node classes, which seem to be similar.
> So DatanodeInfo is a public api now for purely external ( to name node) use.
> The name node class that stores information about data nodes including the
> set of its blocks is called DatanodeDescriptor.
> The DatanodeReport is removed since it was a variation of DatanodeInfo.
> Previously DatanodeInfo and DatanodeDescriptor were the same class, and
> DatanodeReport was used for reporting node statistics only.
> This is a preparation step for HADOOP-306.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jul  7 07:31:26 2006
Return-Path: 
 <hadoop-dev-return-2408-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 39584 invoked from network); 7 Jul 2006 07:31:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 07:31:26 -0000
Received: (qmail 70987 invoked by uid 500); 7 Jul 2006 07:31:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70952 invoked by uid 500); 7 Jul 2006 07:31:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 70942 invoked by uid 99); 7 Jul 2006 07:31:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 00:31:25 -0700
X-ASF-Spam-Status: No, hits=1.6 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.145.54.172] (HELO mrout2.yahoo.com) (216.145.54.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 00:31:24 -0700
Received: from [10.72.66.54] (snvvpn-10-72-66-c54.corp.yahoo.com
 [10.72.66.54])
	by mrout2.yahoo.com (8.13.6/8.13.6/y.out) with ESMTP id k677U3VC058094
	for <hadoop-dev@lucene.apache.org>; Fri, 7 Jul 2006 00:30:04 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=message-id:date:from:user-agent:x-accept-language:
	mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
	b=XgaFWEONZ3Q6oyzcX9Kqm8egi8mdFa2cpAiGtTU9QaObPLeqI12+B7TpQrtUjj6O
Message-ID: <44AE0D76.1020905@yahoo-inc.com>
Date: Fri, 07 Jul 2006 00:29:58 -0700
From: Konstantin Shvachko <shv@yahoo-inc.com>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: Hadoop Distributed File System requirements on Wiki
References: <44A5C920.5050808@yahoo-inc.com>
	 <e1d10fc00607061202j7ee2f796o87f667c835509749@mail.gmail.com>
	 <9DC52EE0-B405-4B34-A420-7A7BBF9EF548@yahoo-inc.com>
 <e1d10fc00607061356h4818e9c6j2966ec2c6ab02482@mail.gmail.com>
In-Reply-To: <e1d10fc00607061356h4818e9c6j2966ec2c6ab02482@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Paul,

Paul Sutter wrote:

> Eric,
>
> Thanks - response embedded below.
>
> One more suggestion:  store a copy of the per-block metadata on the
> datanode. it doesnt have to have an updated copy of the filename, just
> the "original file name" and block offset would be fine. since you're
> adding truncation features, you'd want some kind of truncation
> generation number too. this would make possible a distributed namenode
> recovery, which is belt-and-suspenders valuable even after adding
> checkpointing features to the namenode. storing this metadata is more
> important than writing the recovery program, since the recovery
> program could be written after the disaster that makes it necessary.
> (just a suggestion). 

Being able to reconstruct the system even if the checkpoint is lost 
forever is
a nice feature to have. The "original file name" can be placed into the 
crc file (#15)
related to the given block. The offset or the block sequence number to 
be precise
can be a part of the block id followed by a random number. Generation ## 
will
be required as soon as we  start implementing  concurrent appends and 
truncates.
They can be also encoded into the local file name representing the 
block. Say,
<block-id>.<generation#>

> On 7/6/06, Eric Baldeschwieler <eric14@yahoo-inc.com> wrote:
>
>>
>> On Jul 6, 2006, at 12:02 PM, Paul Sutter wrote:
>>
>> ...
>> > *Constant size file blocks (#16),  -1*
>> >
>> > I vote to keep variable size blocks, especially because you are adding
>> > atomic append capabilities (#25). Variable length blocks creates the
>> > possibility for blocks that contain only whole records. This:
>> > - improves recoverability for large important files with one or more
>> > irrevocably lost blocks, and
>> > - makes it very clean for mappers to process local data blocks
>>
>> ...  I think we can achieve our goal without compromising yours.
>> Each block can be of any size up to the files fixed block size.  The
>> system can be aware of that and provide an API to report gaps and/or
>> an API option to skip them or see them as NULLs.  This reporting can
>> be done at the datanode level allowing us to remove all the size data
>> & logic at the namenode level.
>>
>> ** If you agree, why don't we just add the above annotation to
>> konstantine's doc?
>
>
> Wow! Good idea, and now I see why you wanted to make the change in the
> first place. I agree, please go ahead and add.
>
> Incidently, its probably fine if
> - the API just skipped the ghost bytes,
> - programs using such files should only ever seek to locations that
> had been returned by getPos(), and
> - getPos() should return the byte offset of the next block as soon as
> a ghost byte is reached.
>
> I think existing programs will work fine within these restrictions.
> The last one is intended for code like SequenceFile that checks
> current position against file length when reading data.
> (SequenceFiles' syncing code might have to get reconsidered, but would
> be easier since you'd just advance to the next block on a checksum
> failure).

Yes, the intention was not to make the blocks literally of constants 
size, but
to let datanodes deal with incomplete blocks while the namenode would treat
them equally. I'll add this clarifying ideas to the document.
Good thing with Wiki is it's editable :-)

> *Recoverability and Availability Goals*
>
> You might want to consider adding recoverability and availability goals.
> Recoverability goals might include data lost in case of a namenode 
> failure
> (today its about a year, but it could be day-hour-minute-second-zero at
> varying costs). If we have a statistically inclined person on the 
> project,
> we could estimate the acceptable block loss probabilities at scale.

This is an interesting observation. Ideally, we would like to save and 
replicate
fs image file as soon as the edits file reaches a specific size, and we 
would like
to make edits file updates transactional, with the file system locked 
for updates
during the transaction. This would be the zero recoverability goal in 
your terms.
Are we willing to weaken this requirement in favor of the performance?

> Availability goals are probably less stringent than for most storage 
> systems
> (dare I say that a few hours downtime is probably OK) Adding these 
> goals to
> the document could be valuable for consensus and prioritization.

If I understood you correctly, this goal is more related to a specific 
installation of
the system rather than to the system itself as a software product.
Or do you mean that the total time spent by the system on self-maintenance
procedures like backups and checkpointing should not exceed 2 hours a day?
In any case, I agree, high availability should be mentioned, probably in the
"Feature requirements" section.

>> > **
>> > *Backup Scheme*
>> > **
>> > We might want to start discussion of a backup scheme for HDFS,
>> > especially
>> > given all the courageous rewriting and feature-addition likely to
>> > occur.
>>
>> ** I agree, this needs to be on the list.  I'm imagining a command
>> that hardlinks every datanode's (and namenode's if needed) files into
>> a snapshot directory.  And another command that moves all current
>> state into a snapshot directory and hardlinks a snapshot's state back
>> into the working directory.  This would be very fast and not cost
>> much space in the short term.  Thoughts?  (yes, hardlinks are a pain
>> on the PC, we can discuss design later)
>
> This is a fantastic idea.
>
> But as for covering my fears, I'll feel safer with key data backed up
> in a filesystem that is not DFS, as pedestrian as that sounds. :)

Frankly speaking I've never thought about a backup of a 10 PB storage
system. How much space will that require? Isn't it easier just to increase
the replication factor? Just a thought...

>> > *Rebalancing (#22,#21)*
>> >
>> > I would suggest that keeping disk usage balanced is more than a
>> > performance
>> > feature, its important for the success of running jobs with large map
>> > outputs or large sorts. Our most common reducer failure is running
>> > out of
>> > disk space during sort, and this is caused by imbalanced block
>> > allocation.
>>
>> ** Good point.  Any interest in helping us with this one?
>
> We'll take a look at it.

Very true.
Many features and performance tasks can be considered reliability tasks
from certain point of view. We've also seen uneven distribution of data,
which led to task failures. But this is sort of a higher order balancing 
- between
different subsystems competing for the storage resources on the same node.


>> > On 6/30/06, Konstantin Shvachko <shv@yahoo-inc.com> wrote:
>> >>
>> >> I've created a Wiki page that summarizes DFS requirements and
>> >> proposed
>> >> changes.
>> >> This is a summary of discussions held in this mailing list and
>> >> additional internal discussions.
>> >> The page is here:
>> >>
>> >> http://wiki.apache.org/lucene-hadoop/DFS_requirements
>> >>
>> >> I see there is an ongoing related discussion in HADOOP-337.
>> >> We prioritized our goals as
>> >> (1) Reliability (which includes Recoverability and Availability)
>> >> (2) Scalability
>> >> (3) Functionality
>> >> (4) Performance
>> >> (5) other
>> >> But then gave higher priority to some features like the append
>> >> functionality.
>> >>
>> >> Happy holidays to everybody.
>> >>
>> >> --Konstantin Shvachko
>> >>
>>
>>
> >
>
>
>


From MAILER-DAEMON Fri Jul  7 07:51:21 2006
Return-Path: 
 <hadoop-dev-return-2409-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43758 invoked from network); 7 Jul 2006 07:51:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 07:51:21 -0000
Received: (qmail 99969 invoked by uid 500); 7 Jul 2006 07:51:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 99945 invoked by uid 500); 7 Jul 2006 07:51:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 99926 invoked by uid 99); 7 Jul 2006 07:51:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 00:51:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 00:51:19 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 34FB97141F4
	for <hadoop-dev@lucene.apache.org>; Fri,  7 Jul 2006 07:49:30 +0000 (GMT)
Message-ID: <26362716.1152258570186.JavaMail.jira@brutus>
Date: Fri, 7 Jul 2006 07:49:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-350) In standalone mode,
 'org.apache.commons.cli cannot be resolved'
In-Reply-To: <4329338.1152218609766.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-350?page=comments#action_12419648 ] 

Doug Cutting commented on HADOOP-350:
-------------------------------------

What JVM are you using locally?  1.4?  The cli jar (unfortunately) seems to be a version that requires 1.5.  Could that be the issue?

> In standalone mode, 'org.apache.commons.cli cannot be resolved'
> ---------------------------------------------------------------
>
>          Key: HADOOP-350
>          URL: http://issues.apache.org/jira/browse/HADOOP-350
>      Project: Hadoop
>         Type: Bug

>     Versions: 0.5.0
>     Reporter: stack@archive.org
>     Priority: Minor

>
> Standalone works fine in 0.4.0 but if I use TRUNK, 'Last Changed Date: 2006-06-28 14:27:33 -0700 (Wed, 28 Jun 2006)', and pass it my fat job jar, I get following exception.
> 06/07/06 13:18:02 INFO conf.Configuration: parsing file:/tmp/hadoop-unjar29923/nutch-site.xml
> 06/07/06 13:18:02 INFO conf.Configuration: parsing file:/home/stack/workspace/hadoop-local-conf/hadoop-site.xml
> Exception in thread "main" java.lang.Error: Unresolved compilation problems:   
>         The import org.apache.commons.cli cannot be resolved
>         The import org.apache.commons.cli cannot be resolved
>         The import org.apache.commons.cli cannot be resolved
>         The import org.apache.commons.cli cannot be resolved       
>         The import org.apache.commons.cli cannot be resolved
>         The import org.apache.commons.cli cannot be resolved
>         The import org.apache.commons.cli cannot be resolved
>         The import org.apache.commons.cli cannot be resolved
>         The import org.apache.commons.cli cannot be resolved
>         Options cannot be resolved to a type
>         Option cannot be resolved to a type
>         OptionBuilder cannot be resolved
>         Option cannot be resolved to a type
>         OptionBuilder cannot be resolved
>         Option cannot be resolved to a type
>         OptionBuilder cannot be resolved
>         Option cannot be resolved to a type
>         OptionBuilder cannot be resolved
>         Options cannot be resolved to a type
>         Options cannot be resolved to a type
>         CommandLine cannot be resolved to a type
>         Options cannot be resolved to a type
>         The method buildGeneralOptions() is undefined for the type ToolBase
>         CommandLineParser cannot be resolved to a type
>         GnuParser cannot be resolved to a type
>         CommandLine cannot be resolved to a type
>         ParseException cannot be resolved to a type
>         e cannot be resolved
>         HelpFormatter cannot be resolved to a type
>         HelpFormatter cannot be resolved to a type
>         at org.apache.hadoop.util.ToolBase.<init>(ToolBase.java:21)
>         at org.apache.hadoop.mapred.JobClient.<init>(JobClient.java:178)
>         at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:320)
>         at org.archive.access.nutch.ImportArcs.importArcs(ImportArcs.java:576)
>         at org.archive.access.nutch.Nutchwax.doImport(Nutchwax.java:159)
>         at org.archive.access.nutch.Nutchwax.doAll(Nutchwax.java:144)
>         at org.archive.access.nutch.Nutchwax.doJob(Nutchwax.java:368)
>         at org.archive.access.nutch.Nutchwax.main(Nutchwax.java:621)
>         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
>         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>         at java.lang.reflect.Method.invoke(Method.java:585)
>         at org.apache.hadoop.util.RunJar.main(RunJar.java:128)
> I took a bit of a look.  Odd is that command-cli.jar is in hadoop/lib dir so should be found no problem (and we seem to be loading other stuff out of the uncompressed job jar fine -- see mention of nutch-site.xml above).   I tried adding the command-cli to my job jar.  I printed out all that RunJar -- see below -- was adding to its CLASSPATH and saw mention of command-cli but still no workee.
> file:/tmp/hadoop-unjar29923/lib/archive-commons-1.8.0.jar
> file:/tmp/hadoop-unjar29923/lib/commons-codec-1.3.jar
> file:/tmp/hadoop-unjar29923/lib/commons-httpclient-3.0-rc3.jar
> file:/tmp/hadoop-unjar29923/lib/commons-logging-1.0.4.jar
> file:/tmp/hadoop-unjar29923/lib/dsi.unimi.it-1.2.0.jar
> file:/tmp/hadoop-unjar29923/lib/commons-lang-2.1.jar
> file:/tmp/hadoop-unjar29923/lib/commons-cli-2.0-SNAPSHOT.jar
> file:/tmp/hadoop-unjar29923/lib/lucene-core-1.9.1.jar
> file:/tmp/hadoop-unjar29923/lib/lucene-misc-1.9.1.jar
> file:/tmp/hadoop-unjar29923/lib/jakarta-oro-2.0.7.jar
> file:/tmp/hadoop-unjar29923/lib/xerces-2_6_2-apis.jar
> file:/tmp/hadoop-unjar29923/lib/xerces-2_6_2.jar
> file:/tmp/hadoop-unjar29923/lib/concurrent-1.3.4.jar
> 06/07/06 13:18:01 INFO conf.Configuration: parsing file:/home/stack/workspace/hadoop-local-conf/hadoop-default.xml 
> Any ideas?
> Thanks.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jul  7 08:36:19 2006
Return-Path: 
 <hadoop-dev-return-2410-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 58551 invoked from network); 7 Jul 2006 08:36:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 08:36:19 -0000
Received: (qmail 67032 invoked by uid 500); 7 Jul 2006 08:36:19 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66977 invoked by uid 500); 7 Jul 2006 08:36:18 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66968 invoked by uid 99); 7 Jul 2006 08:36:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 01:36:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [209.10.110.95] (HELO londo.swishmail.com) (209.10.110.95)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 01:36:17 -0700
Received: (qmail 85587 invoked by uid 89); 7 Jul 2006 08:35:55 -0000
Received: from unknown (HELO ?86.115.11.24?) (86.115.11.24)
  by londo.swishmail.com with SMTP; 7 Jul 2006 08:35:54 -0000
Message-ID: <44AE1CE9.1000406@apache.org>
Date: Fri, 07 Jul 2006 11:35:53 +0300
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.4 (X11/20060615)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: Stopping datanode and namenode
References: <cac652840607051909j60480860h4b5601a4688c45db@mail.gmail.com>
In-Reply-To: <cac652840607051909j60480860h4b5601a4688c45db@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

barry.kaplan@gmail.com wrote:
> I see the code has some calls to stop the namenode for unit testing,
> what about opening that up, or adding a calls to namenode and datanode
> to shut them down?

+1

The public APIs for all daemons (namenode, datanode, tasktracker, 
jobtracker) should include both start and stop methods.  Please file a 
bug for this.

Doug

From MAILER-DAEMON Fri Jul  7 08:43:22 2006
Return-Path: 
 <hadoop-dev-return-2411-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 60192 invoked from network); 7 Jul 2006 08:43:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 08:43:22 -0000
Received: (qmail 76986 invoked by uid 500); 7 Jul 2006 08:43:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 76958 invoked by uid 500); 7 Jul 2006 08:43:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 76948 invoked by uid 99); 7 Jul 2006 08:43:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 01:43:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 01:43:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EBECD410448
	for <hadoop-dev@lucene.apache.org>; Fri,  7 Jul 2006 08:41:30 +0000 (GMT)
Message-ID: <14775683.1152261690963.JavaMail.jira@brutus>
Date: Fri, 7 Jul 2006 08:41:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-345) JobConf access to name-values
In-Reply-To: <25954528.1152146549836.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-345?page=comments#action_12419659 ] 

Doug Cutting commented on HADOOP-345:
-------------------------------------

Better than exposing the Properties might be adding a method like:

public Iterator<Map.Entry<String,String>> entries();

That would provide abstract, read-only access.

Doug

> JobConf access to name-values
> -----------------------------
>
>          Key: HADOOP-345
>          URL: http://issues.apache.org/jira/browse/HADOOP-345
>      Project: Hadoop
>         Type: Improvement

>     Reporter: Michel Tourn
>     Assignee: Michel Tourn

>
> class JobConf (or its base class Configuration) 
> should be extended to enable enumeration of all its key-value pairs.
> ( more precisely: the Properties returned by Configuration.getProps() )
> This will be useful to "export" all JobConf properties to environment variables.
> We use env.vars to expose some Hadoop context to non-Java MapReduce applications.
> Note that the typed properties are also represented as Strings 
> (getInt, getStrings, getClass, etc.)
> So a single enumeration exposes everything as (untyped) environment variables.
> The proposed escaping rules from JobConf properties to env.var are:
> 1. values are left as-is.
> 2. keys are escaped as follows:
> [A-Za-z0-9] --> unchanged.
> all other chars --> underscore.
> For example
> set("mapred.input.key.class", "com.example.MyKey")
> becomes env.var:
> export mapred_input_key_class=com.example.MyKey
> Justification:
> 1. Environment variables are case-sensitive. (Although uppercase is the preferred convention)
>   So no need to uppercase everything.
> 2. Some characters are forbidden in env.vars, or at least not shell-friendly:
> For example period, colon are problematic.
> 3. The Hadoop conventions are already hierarchical and provide some namespace protection.
>    This means we don't need an additional prefix as protection.
>    For example all exported environment variables will start with "mapred." , "dfs." , "ipc." etc.
>   This means they will not conflict with standard environemnt variables like PATH, USER, etc.
>   And they will not conflict with standard hadoop env.vars because those are upper-case. (like HADOOP_CONF_DIR)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jul  7 09:11:21 2006
Return-Path: 
 <hadoop-dev-return-2412-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 66844 invoked from network); 7 Jul 2006 09:11:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 09:11:21 -0000
Received: (qmail 11607 invoked by uid 500); 7 Jul 2006 09:11:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 11575 invoked by uid 500); 7 Jul 2006 09:11:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 11565 invoked by uid 99); 7 Jul 2006 09:11:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 02:11:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 02:11:19 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E933B41044C
	for <hadoop-dev@lucene.apache.org>; Fri,  7 Jul 2006 09:09:29 +0000 (GMT)
Message-ID: <2256287.1152263369951.JavaMail.jira@brutus>
Date: Fri, 7 Jul 2006 09:09:29 +0000 (GMT+00:00)
From: "Jean-Baptiste Quenot (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-352) Portability of hadoop shell scripts
 for deployment
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Portability of hadoop shell scripts for deployment
--------------------------------------------------

         Key: HADOOP-352
         URL: http://issues.apache.org/jira/browse/HADOOP-352
     Project: Hadoop
        Type: Bug

    Versions: 0.4.0    
    Reporter: Jean-Baptiste Quenot


Hadoop shell scripts are based on /bin/bash, which is a "standard" shell only on GNU/Linux.  On other Unix systems like FreeBSD however the "standard" shell is /bin/sh.  The attached patch addresses these compatiblity issues.  Note that Solaris support is not yet tested.

Also, the best way to set the HADOOP_HOME variable upon ssh connection in a portable way is to set it in .ssh/environment.  The bash startup script ".bashrc" is not an option on systems where "bash" is not installed.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jul  7 09:13:22 2006
Return-Path: 
 <hadoop-dev-return-2413-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67364 invoked from network); 7 Jul 2006 09:13:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 09:13:22 -0000
Received: (qmail 15160 invoked by uid 500); 7 Jul 2006 09:13:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15120 invoked by uid 500); 7 Jul 2006 09:13:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 15105 invoked by uid 99); 7 Jul 2006 09:13:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 02:13:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 02:13:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CCB157141F4
	for <hadoop-dev@lucene.apache.org>; Fri,  7 Jul 2006 09:11:30 +0000 (GMT)
Message-ID: <6371794.1152263490835.JavaMail.jira@brutus>
Date: Fri, 7 Jul 2006 09:11:30 +0000 (GMT+00:00)
From: "Jean-Baptiste Quenot (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-352) Portability of hadoop shell scripts
 for deployment
In-Reply-To: <2256287.1152263369951.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-352?page=all ]

Jean-Baptiste Quenot updated HADOOP-352:
----------------------------------------

    Attachment: hadoop-sh-patch

> Portability of hadoop shell scripts for deployment
> --------------------------------------------------
>
>          Key: HADOOP-352
>          URL: http://issues.apache.org/jira/browse/HADOOP-352
>      Project: Hadoop
>         Type: Bug

>     Versions: 0.4.0
>     Reporter: Jean-Baptiste Quenot
>  Attachments: hadoop-sh-patch
>
> Hadoop shell scripts are based on /bin/bash, which is a "standard" shell only on GNU/Linux.  On other Unix systems like FreeBSD however the "standard" shell is /bin/sh.  The attached patch addresses these compatiblity issues.  Note that Solaris support is not yet tested.
> Also, the best way to set the HADOOP_HOME variable upon ssh connection in a portable way is to set it in .ssh/environment.  The bash startup script ".bashrc" is not an option on systems where "bash" is not installed.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jul  7 09:43:25 2006
Return-Path: 
 <hadoop-dev-return-2414-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 74007 invoked from network); 7 Jul 2006 09:43:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 09:43:25 -0000
Received: (qmail 49486 invoked by uid 500); 7 Jul 2006 09:43:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49452 invoked by uid 500); 7 Jul 2006 09:43:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49428 invoked by uid 99); 7 Jul 2006 09:43:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 02:43:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 02:43:23 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 18DC371421B
	for <hadoop-dev@lucene.apache.org>; Fri,  7 Jul 2006 09:41:33 +0000 (GMT)
Message-ID: <30779929.1152265293098.JavaMail.jira@brutus>
Date: Fri, 7 Jul 2006 09:41:33 +0000 (GMT+00:00)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-211) logging improvements for Hadoop
In-Reply-To: <11693488.1147389488398.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-211?page=comments#action_12419672 ] 

Sanjay Dahiya commented on HADOOP-211:
--------------------------------------

>>From what I understand, you are using hadoop client in tomcat. We need a light weight client for embedding in other apps for these use cases. That client can use apps logging configuration. 
This logging is primarily targeted at Name node, data node, and trackers which generate logs on an ongoing basis. These log configurations need to be separated from Hadoop client in any case. 

> logging improvements for Hadoop
> -------------------------------
>
>          Key: HADOOP-211
>          URL: http://issues.apache.org/jira/browse/HADOOP-211
>      Project: Hadoop
>         Type: Improvement

>     Versions: 0.2.0
>     Reporter: Sameer Paranjpye
>     Assignee: Sameer Paranjpye
>     Priority: Minor
>      Fix For: 0.3.0
>  Attachments: acl-log4j-II.patch.tgz, acl-log4j-webapps.patch, acl-log4j.patch, commons_logging_patch
>
> Here's a proposal for some impovements to the way Hadoop does logging. It advocates 3 
> broad changes to the way logging is currently done, these being:
> - The use of a uniform logging format by all Hadoop subsystems
> - The use of Apache commons logging as a facade above an underlying logging framework
> - The use of Log4J as the underlying logging framework instead of java.util.logging
> This is largely polishing work, but it seems like it would make log analysis and debugging
> easier in the short term. In the long term, it would future proof logging to the extent of
> allowing the logging framework used to change while requiring minimal code change. The 
> propos changes are motivated by the following requirements which we think Hadoops 
> logging should meet:
> - Hadoops logs should be amenable to analysis by tools like grep, sed, awk etc.
> - Log entries should be clearly annotated with a timestamp and a logging level
> - Log entries should be traceable to the subsystem from which they originated
> - The logging implementation should allow log entries to be annotated with source code 
> location information like classname, methodname, file and line number, without requiring
> code changes
> - It should be possible to change the logging implementation used without having to change
> thousands of lines of code
> - The mapping of loggers to destinations (files, directories, servers etc.) should be 
> specified and modifiable via configuration
> Uniform logging format:
> All Hadoop logs should have the following structure.
> <Header>\n
> <LogEntry>\n [<Exception>\n]
> .
> .
> .
> where the header line specifies the format of each log entry. The header line has the format:
> '# <Fieldname> <Fieldname>...\n'. 
> The default format of each log entry is: '# Timestamp Level LoggerName Message', where:
> - Timestamp is a date and time in the format MM/DD/YYYY:HH:MM:SS
> - Level is the logging level (FATAL, WARN, DEBUG, TRACE, etc.)
> - LoggerName is the short name of the logging subsystem from which the message originated e.g.
> fs.FSNamesystem, dfs.Datanode etc.
> - Message is the log message produced
> Why Apache commons logging and Log4J?
> Apache commons logging is a facade meant to be used as a wrapper around an underlying logging
> implementation. Bridges from Apache commons logging to popular logging implementations 
> (Java logging, Log4J, Avalon etc.) are implemented and available as part of the commons logging
> distribution. Implementing a bridge to an unsupported implementation is fairly striaghtforward
> and involves the implementation of subclasses of the commons logging LogFactory and Logger 
> classes. Using Apache commons logging and making all logging calls through it enables us to
> move to a different logging implementation by simply changing configuration in the best case.
> Even otherwise, it incurs minimal code churn overhead.
> Log4J offers a few benefits over java.util.logging that make it a more desirable choice for the
> logging back end.
> - Configuration Flexibility: The mapping of loggers to destinations (files, sockets etc.)
> can be completely specified in configuration. It is possible to do this with Java logging as
> well, however, configuration is a lot more restrictive. For instance, with Java logging all 
> log files must have names derived from the same pattern. For the namenode, log files could 
> be named with the pattern "%h/namenode%u.log" which would put log files in the user.home
> directory with names like namenode0.log etc. With Log4J it would be possible to configure
> the namenode to emit log files with different names, say heartbeats.log, namespace.log,
> clients.log etc. Configuration variables in Log4J can also have the values of system 
> properties embedded in them.
> - Takes wrappers into account: Log4J takes into account the possibility that an application
> may be invoking it via a wrapper, such as Apache commons logging. This is important because
> logging event objects must be able to infer the context of the logging call such as classname,
> methodname etc. Inferring context is a relatively expensive operation that involves creating
> an exception and examining the stack trace to find the frame just before the first frame 
> of the logging framework. It is therefore done lazily only when this information actually 
> needs to be logged. Log4J can be instructed to look for the frame corresponding to the wrapper
> class, Java logging cannot. In the case of Java logging this means that a) the bridge from 
> Apache commons logging is responsible for inferring the calling context and setting it in the 
> logging event and b) this inference has to be done on every logging call regardless of whether
> or not it is needed.
> - More handy features: Log4J has some handy features that Java logging doesn't. A couple
> of examples of these:
> a) Date based rolling of log files 
> b) Format control through configuration. Log4J has a PatternLayout class that can be 
> configured to generate logs with a user specified pattern. The logging format described
> above can be described as "%d{MM/dd/yyyy:HH:mm:SS} %c{2} %p %m". The format specifiers
> indicate that each log line should have the date and time followed by the logger name followed
> by the logging level or priority followed by the application generated message.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jul  7 11:05:23 2006
Return-Path: 
 <hadoop-dev-return-2415-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99136 invoked from network); 7 Jul 2006 11:05:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 11:05:23 -0000
Received: (qmail 86005 invoked by uid 500); 7 Jul 2006 11:05:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 85945 invoked by uid 500); 7 Jul 2006 11:05:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 85928 invoked by uid 99); 7 Jul 2006 11:05:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 04:05:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 04:05:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3157F41044F
	for <hadoop-dev@lucene.apache.org>; Fri,  7 Jul 2006 11:03:31 +0000 (GMT)
Message-ID: <8499679.1152270211199.JavaMail.jira@brutus>
Date: Fri, 7 Jul 2006 11:03:31 +0000 (GMT+00:00)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-351) Remove Jetty dependency
In-Reply-To: <8704461.1152224729846.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-351?page=all ]

Devaraj Das reassigned HADOOP-351:
----------------------------------

    Assign To: Devaraj Das

> Remove Jetty dependency
> -----------------------
>
>          Key: HADOOP-351
>          URL: http://issues.apache.org/jira/browse/HADOOP-351
>      Project: Hadoop
>         Type: Wish

>   Components: ipc
>     Reporter: Barry Kaplan
>     Assignee: Devaraj Das

>
> Somewhat related to HADOOP-349, it would be nice to not have a Jetty dependency for those of us embedding Hadoop within our own web applications. In particular the Server object is using SocketChannelOutputStream from the Jetty code base. It seems to me that for an object like this it would be better to simply have a Hadoop version of a blocking output stream on an nio channel if necessary vs. using the Jetty version requiring a Hadoop user's to package yet another jar file (and all the complications that are associated with that).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jul  7 11:07:22 2006
Return-Path: 
 <hadoop-dev-return-2416-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1283 invoked from network); 7 Jul 2006 11:07:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 11:07:22 -0000
Received: (qmail 90306 invoked by uid 500); 7 Jul 2006 11:07:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 90152 invoked by uid 500); 7 Jul 2006 11:07:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 90143 invoked by uid 99); 7 Jul 2006 11:07:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 04:07:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 04:07:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2D8D341044F
	for <hadoop-dev@lucene.apache.org>; Fri,  7 Jul 2006 11:05:31 +0000 (GMT)
Message-ID: <2121845.1152270331183.JavaMail.jira@brutus>
Date: Fri, 7 Jul 2006 11:05:31 +0000 (GMT+00:00)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-351) Remove Jetty dependency
In-Reply-To: <8704461.1152224729846.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-351?page=comments#action_12419687 ] 

Devaraj Das commented on HADOOP-351:
------------------------------------

Not a problem at all in replicating the class under Hadoop. I will work on it soon.

> Remove Jetty dependency
> -----------------------
>
>          Key: HADOOP-351
>          URL: http://issues.apache.org/jira/browse/HADOOP-351
>      Project: Hadoop
>         Type: Wish

>   Components: ipc
>     Reporter: Barry Kaplan
>     Assignee: Devaraj Das

>
> Somewhat related to HADOOP-349, it would be nice to not have a Jetty dependency for those of us embedding Hadoop within our own web applications. In particular the Server object is using SocketChannelOutputStream from the Jetty code base. It seems to me that for an object like this it would be better to simply have a Hadoop version of a blocking output stream on an nio channel if necessary vs. using the Jetty version requiring a Hadoop user's to package yet another jar file (and all the complications that are associated with that).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jul  7 11:26:22 2006
Return-Path: 
 <hadoop-dev-return-2417-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8066 invoked from network); 7 Jul 2006 11:26:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 11:26:22 -0000
Received: (qmail 16879 invoked by uid 500); 7 Jul 2006 11:26:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 16724 invoked by uid 500); 7 Jul 2006 11:26:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 16715 invoked by uid 99); 7 Jul 2006 11:26:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 04:26:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 04:26:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A541D41044F
	for <hadoop-dev@lucene.apache.org>; Fri,  7 Jul 2006 11:24:30 +0000 (GMT)
Message-ID: <31134528.1152271470673.JavaMail.jira@brutus>
Date: Fri, 7 Jul 2006 11:24:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-352) Portability of hadoop shell scripts
 for deployment
In-Reply-To: <2256287.1152263369951.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-352?page=comments#action_12419691 ] 

Doug Cutting commented on HADOOP-352:
-------------------------------------

These scripts were initially declared to use sh, however they didn't work correctly under all versions of sh.  The problem is that most developers of these scripts develop on Linux, where sh and bash are the same program.  Thus it is *very* easy for bash-specific features to creep into these scripts.  So, if we switch them back to sh but don't have folks who are daily testing the trunk on a non-bash-based sh, then we are likely to deliver releases where these fail in strange ways.  Right now they fail in a predictable way if you don't have bash installed, so there's no confusion.  So I am reluctant to make this change unless I am convinced there are several developers who track trunk changes using a non-bash-based sh.

How hard is it to install bash on FreeBSD?


> Portability of hadoop shell scripts for deployment
> --------------------------------------------------
>
>          Key: HADOOP-352
>          URL: http://issues.apache.org/jira/browse/HADOOP-352
>      Project: Hadoop
>         Type: Bug

>     Versions: 0.4.0
>     Reporter: Jean-Baptiste Quenot
>  Attachments: hadoop-sh-patch
>
> Hadoop shell scripts are based on /bin/bash, which is a "standard" shell only on GNU/Linux.  On other Unix systems like FreeBSD however the "standard" shell is /bin/sh.  The attached patch addresses these compatiblity issues.  Note that Solaris support is not yet tested.
> Also, the best way to set the HADOOP_HOME variable upon ssh connection in a portable way is to set it in .ssh/environment.  The bash startup script ".bashrc" is not an option on systems where "bash" is not installed.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jul  7 12:30:22 2006
Return-Path: 
 <hadoop-dev-return-2418-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 24926 invoked from network); 7 Jul 2006 12:30:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 12:30:22 -0000
Received: (qmail 4539 invoked by uid 500); 7 Jul 2006 12:30:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 4511 invoked by uid 500); 7 Jul 2006 12:30:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 4498 invoked by uid 99); 7 Jul 2006 12:30:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 05:30:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 05:30:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E6E027141F9
	for <hadoop-dev@lucene.apache.org>; Fri,  7 Jul 2006 12:28:30 +0000 (GMT)
Message-ID: <16563940.1152275310942.JavaMail.jira@brutus>
Date: Fri, 7 Jul 2006 12:28:30 +0000 (GMT+00:00)
From: "Jean-Baptiste Quenot (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-352) Portability of hadoop shell scripts
 for deployment
In-Reply-To: <2256287.1152263369951.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-352?page=comments#action_12419697 ] 

Jean-Baptiste Quenot commented on HADOOP-352:
---------------------------------------------

This is the purpose of compile (and testing) farms at SourceForge (see http://sourceforge.net/docman/display_doc.php?docid=762&group_id=1), is there such a possibility at Apache?

I understand your concern that your changes might introduce new incompatibilities.  But at the contrary, you may prevent users from adopting Hadoop by having very Linux-specific constructs.  FYI I'm working in a group of persons that intend to deploy Hadoop on Linux, FreeBSD, Cygwin and Solaris systems.

There are simples rules to follow that could ensure compatibility:

* "> file 2>&1" instead of ">& file"
* ". file" instead of "source file"
* Not using /proc (Linux-specific)

Best regards.

> Portability of hadoop shell scripts for deployment
> --------------------------------------------------
>
>          Key: HADOOP-352
>          URL: http://issues.apache.org/jira/browse/HADOOP-352
>      Project: Hadoop
>         Type: Bug

>     Versions: 0.4.0
>     Reporter: Jean-Baptiste Quenot
>  Attachments: hadoop-sh-patch
>
> Hadoop shell scripts are based on /bin/bash, which is a "standard" shell only on GNU/Linux.  On other Unix systems like FreeBSD however the "standard" shell is /bin/sh.  The attached patch addresses these compatiblity issues.  Note that Solaris support is not yet tested.
> Also, the best way to set the HADOOP_HOME variable upon ssh connection in a portable way is to set it in .ssh/environment.  The bash startup script ".bashrc" is not an option on systems where "bash" is not installed.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jul  7 12:44:22 2006
Return-Path: 
 <hadoop-dev-return-2419-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 28317 invoked from network); 7 Jul 2006 12:44:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 12:44:22 -0000
Received: (qmail 27891 invoked by uid 500); 7 Jul 2006 12:44:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 27735 invoked by uid 500); 7 Jul 2006 12:44:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 27726 invoked by uid 99); 7 Jul 2006 12:44:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 05:44:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 05:44:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A539D7141F9
	for <hadoop-dev@lucene.apache.org>; Fri,  7 Jul 2006 12:42:30 +0000 (GMT)
Message-ID: <30149987.1152276150673.JavaMail.jira@brutus>
Date: Fri, 7 Jul 2006 12:42:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-352) Portability of hadoop shell scripts
 for deployment
In-Reply-To: <2256287.1152263369951.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-352?page=comments#action_12419699 ] 

Doug Cutting commented on HADOOP-352:
-------------------------------------

We currently do not have unit tests for the scripts, nor does Apache have a FreeBSD compilation server.

I think there were more subtle problems with the scripts than those you mention, although I've forgotten the details.  Have you succeeded, with your patch, to use the scripts to manage a FreeBSD cluster?

I do not wish to discourage in any way your group from using Hadoop.  Is installing bash on FreeBSD difficult?  If it is, and your group will be regular Hadoop users, then perhaps we should commit this patch.


> Portability of hadoop shell scripts for deployment
> --------------------------------------------------
>
>          Key: HADOOP-352
>          URL: http://issues.apache.org/jira/browse/HADOOP-352
>      Project: Hadoop
>         Type: Bug

>     Versions: 0.4.0
>     Reporter: Jean-Baptiste Quenot
>  Attachments: hadoop-sh-patch
>
> Hadoop shell scripts are based on /bin/bash, which is a "standard" shell only on GNU/Linux.  On other Unix systems like FreeBSD however the "standard" shell is /bin/sh.  The attached patch addresses these compatiblity issues.  Note that Solaris support is not yet tested.
> Also, the best way to set the HADOOP_HOME variable upon ssh connection in a portable way is to set it in .ssh/environment.  The bash startup script ".bashrc" is not an option on systems where "bash" is not installed.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jul  7 12:53:22 2006
Return-Path: 
 <hadoop-dev-return-2420-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32006 invoked from network); 7 Jul 2006 12:53:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 12:53:22 -0000
Received: (qmail 45943 invoked by uid 500); 7 Jul 2006 12:53:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 45918 invoked by uid 500); 7 Jul 2006 12:53:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 45909 invoked by uid 99); 7 Jul 2006 12:53:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 05:53:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 05:53:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B42D671421B
	for <hadoop-dev@lucene.apache.org>; Fri,  7 Jul 2006 12:51:30 +0000 (GMT)
Message-ID: <763036.1152276690672.JavaMail.jira@brutus>
Date: Fri, 7 Jul 2006 12:51:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-340) Using wildcards in config pathnames
In-Reply-To: <9594370.1151833229877.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-340?page=comments#action_12419700 ] 

Doug Cutting commented on HADOOP-340:
-------------------------------------

Disks listed in dfs.data.dir that do not exist on a host are ignored.  So, instead of a wildcard, you can simply list all possible names used in your cluster, and only those that actually exist on a host will be used.  Similarly for mapred.local.dir.  Does that suffice?

> Using wildcards in config pathnames
> -----------------------------------
>
>          Key: HADOOP-340
>          URL: http://issues.apache.org/jira/browse/HADOOP-340
>      Project: Hadoop
>         Type: Improvement

>   Components: conf
>     Versions: 0.4.0
>  Environment: a cluster with different disk setups
>     Reporter: Johan Oskarson
>     Priority: Minor

>
> In our cluster there's machines with very different disk setups
> I've solved this by not rsyncing hadoop-site.xml, but as you probably understand this means new settings will not get copied properly.
> I'd like to be able to use wildcards in the dfs.data.dir path for example:
> <property>
>   <name>dfs.data.dir</name>
>     <value>/home/hadoop/disk*/dfs/data</value>
> </property>
> then every disk mounted in that directory would be used

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jul  7 13:11:22 2006
Return-Path: 
 <hadoop-dev-return-2421-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40531 invoked from network); 7 Jul 2006 13:11:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 13:11:22 -0000
Received: (qmail 86663 invoked by uid 500); 7 Jul 2006 13:11:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86630 invoked by uid 500); 7 Jul 2006 13:11:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86621 invoked by uid 99); 7 Jul 2006 13:11:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 06:11:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 06:11:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BBCA4714283
	for <hadoop-dev@lucene.apache.org>; Fri,  7 Jul 2006 13:09:30 +0000 (GMT)
Message-ID: <19086996.1152277770766.JavaMail.jira@brutus>
Date: Fri, 7 Jul 2006 13:09:30 +0000 (GMT+00:00)
From: "Jean-Baptiste Quenot (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-352) Portability of hadoop shell scripts
 for deployment
In-Reply-To: <2256287.1152263369951.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-352?page=comments#action_12419705 ] 

Jean-Baptiste Quenot commented on HADOOP-352:
---------------------------------------------

Yes, with my patch, the Hadoop scripts is deployed and runs on FreeBSD.

BTW I didn't mention in the previous comment, "if [ -a file ]" constructs are not compatible.

Installing bash on FreeBSD is straightforward provided that you symlink /bin/bash to /usr/local/bin/bash.  But we must address Solaris deployment soon, and installing bash is more complicated.

> Portability of hadoop shell scripts for deployment
> --------------------------------------------------
>
>          Key: HADOOP-352
>          URL: http://issues.apache.org/jira/browse/HADOOP-352
>      Project: Hadoop
>         Type: Bug

>     Versions: 0.4.0
>     Reporter: Jean-Baptiste Quenot
>  Attachments: hadoop-sh-patch
>
> Hadoop shell scripts are based on /bin/bash, which is a "standard" shell only on GNU/Linux.  On other Unix systems like FreeBSD however the "standard" shell is /bin/sh.  The attached patch addresses these compatiblity issues.  Note that Solaris support is not yet tested.
> Also, the best way to set the HADOOP_HOME variable upon ssh connection in a portable way is to set it in .ssh/environment.  The bash startup script ".bashrc" is not an option on systems where "bash" is not installed.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jul  7 14:59:35 2006
Return-Path: 
 <hadoop-dev-return-2422-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86736 invoked from network); 7 Jul 2006 14:59:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 14:59:35 -0000
Received: (qmail 77878 invoked by uid 500); 7 Jul 2006 14:59:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 77839 invoked by uid 500); 7 Jul 2006 14:59:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 77829 invoked by uid 99); 7 Jul 2006 14:59:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 07:59:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 07:59:26 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A1F57714204
	for <hadoop-dev@lucene.apache.org>; Fri,  7 Jul 2006 14:57:30 +0000 (GMT)
Message-ID: <2730858.1152284250660.JavaMail.jira@brutus>
Date: Fri, 7 Jul 2006 14:57:30 +0000 (GMT+00:00)
From: "Johan Oskarson (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-340) Using wildcards in config pathnames
In-Reply-To: <9594370.1151833229877.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-340?page=comments#action_12419726 ] 

Johan Oskarson commented on HADOOP-340:
---------------------------------------

Ah, I guess I'll just add a massive number of directories to the config then.
Not as clean, but It'll work. Thanks for the info.

A note about this behaviour in the description field in the xml would be nice.

/Johan

> Using wildcards in config pathnames
> -----------------------------------
>
>          Key: HADOOP-340
>          URL: http://issues.apache.org/jira/browse/HADOOP-340
>      Project: Hadoop
>         Type: Improvement

>   Components: conf
>     Versions: 0.4.0
>  Environment: a cluster with different disk setups
>     Reporter: Johan Oskarson
>     Priority: Minor

>
> In our cluster there's machines with very different disk setups
> I've solved this by not rsyncing hadoop-site.xml, but as you probably understand this means new settings will not get copied properly.
> I'd like to be able to use wildcards in the dfs.data.dir path for example:
> <property>
>   <name>dfs.data.dir</name>
>     <value>/home/hadoop/disk*/dfs/data</value>
> </property>
> then every disk mounted in that directory would be used

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jul  7 15:38:52 2006
Return-Path: 
 <hadoop-dev-return-2423-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 97946 invoked from network); 7 Jul 2006 15:38:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 15:38:52 -0000
Received: (qmail 39643 invoked by uid 500); 7 Jul 2006 15:38:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 39619 invoked by uid 500); 7 Jul 2006 15:38:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 39610 invoked by uid 99); 7 Jul 2006 15:38:51 -0000
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 08:38:51 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2E5CF7141F9
	for <hadoop-dev@lucene.apache.org>; Fri,  7 Jul 2006 15:36:31 +0000 (GMT)
Message-ID: <14255518.1152286591187.JavaMail.jira@brutus>
Date: Fri, 7 Jul 2006 15:36:31 +0000 (GMT+00:00)
From: "Johan Oskarson (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-76) Implement speculative re-execution of
 reduces
In-Reply-To: <1176204687.1142031469402.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-76?page=comments#action_12419731 ] 

Johan Oskarson commented on HADOOP-76:
--------------------------------------

As one should've suspected there seems to be a problem with the patch.
It doesn't clean up after the tasks properly, but I do not currently have the time to look at this.
Still, feedback is welcome or if someone wants to use any of it in their own patch, go ahead.


> Implement speculative re-execution of reduces
> ---------------------------------------------
>
>          Key: HADOOP-76
>          URL: http://issues.apache.org/jira/browse/HADOOP-76
>      Project: Hadoop
>         Type: Improvement

>   Components: mapred
>     Versions: 0.1.0
>     Reporter: Doug Cutting
>     Assignee: Owen O'Malley
>     Priority: Minor
>      Fix For: 0.5.0
>  Attachments: spec_reducev.patch
>
> As a first step, reduce task outputs should go to temporary files which are renamed when the task completes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jul  7 15:52:48 2006
Return-Path: 
 <hadoop-dev-return-2424-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1233 invoked from network); 7 Jul 2006 15:52:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 15:52:48 -0000
Received: (qmail 63671 invoked by uid 500); 7 Jul 2006 15:52:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63523 invoked by uid 500); 7 Jul 2006 15:52:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63514 invoked by uid 99); 7 Jul 2006 15:52:47 -0000
Received-SPF: pass (hermes.apache.org: domain of sutter@gmail.com designates
 64.233.162.206 as permitted sender)
Received: from [64.233.162.206] (HELO nz-out-0102.google.com) (64.233.162.206)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 08:52:46 -0700
Received: by nz-out-0102.google.com with SMTP id k1so1183085nzf
        for <hadoop-dev@lucene.apache.org>;
 Fri, 07 Jul 2006 08:51:26 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=XmdxCwXZBvsoClzzH8hx8UvRJnu+qhhWAx0VZNu/L+5GfMt863r6oiH6ZdyQHHB6sNzj/XFKjCgv0H33vJeDRaN4+b9Ghx1qu7MvLhlGbfEziobhTaI1QC6F8xJ333YuDIVPX1DboJ9XPXP7IlXLC7rP9O8iU9aCSVocKSjY6rk=
Received: by 10.36.18.3 with SMTP id 3mr2626901nzr;
        Fri, 07 Jul 2006 08:51:26 -0700 (PDT)
Received: by 10.36.132.16 with HTTP; Fri, 7 Jul 2006 08:51:26 -0700 (PDT)
Message-ID: <e1d10fc00607070851n7e921bcdq9618b250a498b690@mail.gmail.com>
Date: Fri, 7 Jul 2006 08:51:26 -0700
From: "Paul Sutter" <sutter@gmail.com>
To: hadoop-dev@lucene.apache.org
Subject: Re: Hadoop Distributed File System requirements on Wiki
In-Reply-To: <44AE0D76.1020905@yahoo-inc.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <44A5C920.5050808@yahoo-inc.com>
	 <e1d10fc00607061202j7ee2f796o87f667c835509749@mail.gmail.com>
	 <9DC52EE0-B405-4B34-A420-7A7BBF9EF548@yahoo-inc.com>
	 <e1d10fc00607061356h4818e9c6j2966ec2c6ab02482@mail.gmail.com>
	 <44AE0D76.1020905@yahoo-inc.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

thanks! comments below...

On 7/7/06, Konstantin Shvachko <shv@yahoo-inc.com> wrote:
> Paul Sutter wrote:
> > One more suggestion:  store a copy of the per-block metadata on the
> > datanode. ..
> Being able to reconstruct the system even if the checkpoint is lost
> forever is
> a nice feature to have. The "original file name" can be placed into the
> crc file (#15)...

Great place to put it, very nice.

> > *Recoverability and Availability Goals*
> >
> > You might want to consider adding recoverability and availability goals.
>
> This is an interesting observation. Ideally, we would like to save and
> replicate
> fs image file as soon as the edits file reaches a specific size, and we
> would like
> to make edits file updates transactional, with the file system locked
> for updates
> during the transaction. This would be the zero recoverability goal in
> your terms.
> Are we willing to weaken this requirement in favor of the performance?

Actually its OK for me if we lose even an hour of data on a namenode
crash, since I can just resubmit the recent jobs. Less loss is better,
but my suggestion would be to favor simplicity over absolute recovery
if thats a tradeoff. Others might feel differently about acceptable
levels of data loss.

>
> > Availability goals are probably less stringent than for most storage
> > systems
> > (dare I say that a few hours downtime is probably OK) Adding these
> > goals to
> > the document could be valuable for consensus and prioritization.
>
> If I understood you correctly, this goal is more related to a specific
> installation of
> the system rather than to the system itself as a software product.
> Or do you mean that the total time spent by the system on self-maintenance
> procedures like backups and checkpointing should not exceed 2 hours a day?
> In any case, I agree, high availability should be mentioned, probably in the
> "Feature requirements" section.
>

Its about features. Is namenode failover automatic or manual? If its
manual, it takes time. And it should definitely be manual for now.
Seamless namenode failover done right is a lot of work, and
unnecessary.

With manual failover, what is the downtime when a namenode fails?
Well, I imagine that you'd want to take everything down, bring the
filesystem up in safe mode (nice feature!) on the new namenode, and do
some kind of fscheck. And then, when you're comfortable that
everything is copacetic, all your files are present, and that the
filesystem wont do a radical dereplication of every block when you
make it writable, you make it writable. (In fact, the secondary
namenode might always come up in safe mode until manually changed).

How long does this take? Well, during this time the system is
unavailable. And if it fails at 2AM, you're probably not back up
before 10AM.

But thats OK. Better to be down for a few hours (manual failover) than
to have a complex system likely to break (seamless automatic
failover).

> >> > **
> >> > *Backup Scheme*
> >> > **
> >> > We might want to start discussion of a backup scheme for HDFS,
> >> > especially
> >> > given all the courageous rewriting and feature-addition likely to
> >> > occur.
> >>...
> >
> > But as for covering my fears, I'll feel safer with key data backed up
> > in a filesystem that is not DFS, as pedestrian as that sounds. :)
>
> Frankly speaking I've never thought about a backup of a 10 PB storage
> system. How much space will that require? Isn't it easier just to increase
> the replication factor? Just a thought...
>

Increasing replication doesnt protect me against a filesystem bug.

I'm a nervous nelly on this one: file system revisions do scare me,
and I dont have a 10PB system. Lets say I have a 100TB system, and
that to get back into production I need only restore 5TB worth of
critical files. Then once I'm back in production I can gradually
restore the next 25TB and regenerate the rest.

Its feasible and probably prudent. Its not that Im expecting data loss
bugs in  new code. My concern is less about the likelihood of the
problem, and more about the severity of the problem.

To back up a 10PB system, you would want to back it up to a second
10PB system located on an opposite coast. In fact if this system is
important to your business, you must do this. And then there is the
question, do you stagger software updates on these two systems?
Probably.

You might want to find someone from EMC or Netapp, and get their
feedback on how software changes, QA, and beta testing is handled
(including timelines). Storage systems are really a risky type of code
to modify, for lots of reasons more apparent to the downstream
consumers than to developers. :)

From MAILER-DAEMON Fri Jul  7 16:32:14 2006
Return-Path: 
 <hadoop-dev-return-2425-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 11337 invoked from network); 7 Jul 2006 16:32:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 16:32:14 -0000
Received: (qmail 14793 invoked by uid 500); 7 Jul 2006 16:32:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14406 invoked by uid 500); 7 Jul 2006 16:32:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 14025 invoked by uid 99); 7 Jul 2006 16:32:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 09:32:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 09:31:59 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id ACC3A7141F9
	for <hadoop-dev@lucene.apache.org>; Fri,  7 Jul 2006 16:28:31 +0000 (GMT)
Message-ID: <6115084.1152289711704.JavaMail.jira@brutus>
Date: Fri, 7 Jul 2006 16:28:31 +0000 (GMT+00:00)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-353) Be able to run datanode inside a
 tomcat application
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Be able to run datanode inside a tomcat application
---------------------------------------------------

         Key: HADOOP-353
         URL: http://issues.apache.org/jira/browse/HADOOP-353
     Project: Hadoop
        Type: Improvement

    Reporter: eric baldeschwieler


Barry Kaplan is running hadoop data nodes inside tomcat and encountering some issues.

http://issues.apache.org/jira/browse/HADOOP-211#action_12419360

I'm filing this bug to capture discussion about the pros and cons of such an approach.  I'd be curious to know what others on the list (who know more about java/tomcat) think about this proposal.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jul  7 16:34:08 2006
Return-Path: 
 <hadoop-dev-return-2426-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12321 invoked from network); 7 Jul 2006 16:34:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 16:34:08 -0000
Received: (qmail 19493 invoked by uid 500); 7 Jul 2006 16:34:07 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 19336 invoked by uid 500); 7 Jul 2006 16:34:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 19327 invoked by uid 99); 7 Jul 2006 16:34:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 09:34:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 09:34:04 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 24B1671421B
	for <hadoop-dev@lucene.apache.org>; Fri,  7 Jul 2006 16:30:31 +0000 (GMT)
Message-ID: <15634718.1152289831147.JavaMail.jira@brutus>
Date: Fri, 7 Jul 2006 16:30:31 +0000 (GMT+00:00)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-211) logging improvements for Hadoop
In-Reply-To: <11693488.1147389488398.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-211?page=comments#action_12419742 ] 

eric baldeschwieler commented on HADOOP-211:
--------------------------------------------

Is the client code logging?  If so we should file another bug to make this independent of all of the server logging for sure.  As barry explains his rig, I think he is actually running the hadoop servers inside tomcat as well.  This is a more complicated issue.  It may well make sense to support this, don't know enough about the environment to understand the pros and cons.  An obvious pro is that he has fewer processes to shepherd.  A con is that it isn't something anyone else has worked through or made work.  


> logging improvements for Hadoop
> -------------------------------
>
>          Key: HADOOP-211
>          URL: http://issues.apache.org/jira/browse/HADOOP-211
>      Project: Hadoop
>         Type: Improvement

>     Versions: 0.2.0
>     Reporter: Sameer Paranjpye
>     Assignee: Sameer Paranjpye
>     Priority: Minor
>      Fix For: 0.3.0
>  Attachments: acl-log4j-II.patch.tgz, acl-log4j-webapps.patch, acl-log4j.patch, commons_logging_patch
>
> Here's a proposal for some impovements to the way Hadoop does logging. It advocates 3 
> broad changes to the way logging is currently done, these being:
> - The use of a uniform logging format by all Hadoop subsystems
> - The use of Apache commons logging as a facade above an underlying logging framework
> - The use of Log4J as the underlying logging framework instead of java.util.logging
> This is largely polishing work, but it seems like it would make log analysis and debugging
> easier in the short term. In the long term, it would future proof logging to the extent of
> allowing the logging framework used to change while requiring minimal code change. The 
> propos changes are motivated by the following requirements which we think Hadoops 
> logging should meet:
> - Hadoops logs should be amenable to analysis by tools like grep, sed, awk etc.
> - Log entries should be clearly annotated with a timestamp and a logging level
> - Log entries should be traceable to the subsystem from which they originated
> - The logging implementation should allow log entries to be annotated with source code 
> location information like classname, methodname, file and line number, without requiring
> code changes
> - It should be possible to change the logging implementation used without having to change
> thousands of lines of code
> - The mapping of loggers to destinations (files, directories, servers etc.) should be 
> specified and modifiable via configuration
> Uniform logging format:
> All Hadoop logs should have the following structure.
> <Header>\n
> <LogEntry>\n [<Exception>\n]
> .
> .
> .
> where the header line specifies the format of each log entry. The header line has the format:
> '# <Fieldname> <Fieldname>...\n'. 
> The default format of each log entry is: '# Timestamp Level LoggerName Message', where:
> - Timestamp is a date and time in the format MM/DD/YYYY:HH:MM:SS
> - Level is the logging level (FATAL, WARN, DEBUG, TRACE, etc.)
> - LoggerName is the short name of the logging subsystem from which the message originated e.g.
> fs.FSNamesystem, dfs.Datanode etc.
> - Message is the log message produced
> Why Apache commons logging and Log4J?
> Apache commons logging is a facade meant to be used as a wrapper around an underlying logging
> implementation. Bridges from Apache commons logging to popular logging implementations 
> (Java logging, Log4J, Avalon etc.) are implemented and available as part of the commons logging
> distribution. Implementing a bridge to an unsupported implementation is fairly striaghtforward
> and involves the implementation of subclasses of the commons logging LogFactory and Logger 
> classes. Using Apache commons logging and making all logging calls through it enables us to
> move to a different logging implementation by simply changing configuration in the best case.
> Even otherwise, it incurs minimal code churn overhead.
> Log4J offers a few benefits over java.util.logging that make it a more desirable choice for the
> logging back end.
> - Configuration Flexibility: The mapping of loggers to destinations (files, sockets etc.)
> can be completely specified in configuration. It is possible to do this with Java logging as
> well, however, configuration is a lot more restrictive. For instance, with Java logging all 
> log files must have names derived from the same pattern. For the namenode, log files could 
> be named with the pattern "%h/namenode%u.log" which would put log files in the user.home
> directory with names like namenode0.log etc. With Log4J it would be possible to configure
> the namenode to emit log files with different names, say heartbeats.log, namespace.log,
> clients.log etc. Configuration variables in Log4J can also have the values of system 
> properties embedded in them.
> - Takes wrappers into account: Log4J takes into account the possibility that an application
> may be invoking it via a wrapper, such as Apache commons logging. This is important because
> logging event objects must be able to infer the context of the logging call such as classname,
> methodname etc. Inferring context is a relatively expensive operation that involves creating
> an exception and examining the stack trace to find the frame just before the first frame 
> of the logging framework. It is therefore done lazily only when this information actually 
> needs to be logged. Log4J can be instructed to look for the frame corresponding to the wrapper
> class, Java logging cannot. In the case of Java logging this means that a) the bridge from 
> Apache commons logging is responsible for inferring the calling context and setting it in the 
> logging event and b) this inference has to be done on every logging call regardless of whether
> or not it is needed.
> - More handy features: Log4J has some handy features that Java logging doesn't. A couple
> of examples of these:
> a) Date based rolling of log files 
> b) Format control through configuration. Log4J has a PatternLayout class that can be 
> configured to generate logs with a user specified pattern. The logging format described
> above can be described as "%d{MM/dd/yyyy:HH:mm:SS} %c{2} %p %m". The format specifiers
> indicate that each log line should have the date and time followed by the logger name followed
> by the logging level or priority followed by the application generated message.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jul  7 16:36:45 2006
Return-Path: 
 <hadoop-dev-return-2428-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12891 invoked from network); 7 Jul 2006 16:36:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 16:36:45 -0000
Received: (qmail 22770 invoked by uid 500); 7 Jul 2006 16:36:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 22748 invoked by uid 500); 7 Jul 2006 16:36:44 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22739 invoked by uid 99); 7 Jul 2006 16:36:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 09:36:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 09:36:41 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 851257141F9
	for <hadoop-dev@lucene.apache.org>; Fri,  7 Jul 2006 16:32:32 +0000 (GMT)
Message-ID: <12571946.1152289952542.JavaMail.jira@brutus>
Date: Fri, 7 Jul 2006 16:32:32 +0000 (GMT+00:00)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-353) Run datanode (or other hadoop servers)
 inside tomcat
In-Reply-To: <6115084.1152289711704.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-353?page=all ]

eric baldeschwieler updated HADOOP-353:
---------------------------------------

    Summary: Run datanode (or other hadoop servers) inside tomcat  (was: Be able to run datanode inside a tomcat application)

> Run datanode (or other hadoop servers) inside tomcat
> ----------------------------------------------------
>
>          Key: HADOOP-353
>          URL: http://issues.apache.org/jira/browse/HADOOP-353
>      Project: Hadoop
>         Type: Improvement

>     Reporter: eric baldeschwieler

>
> Barry Kaplan is running hadoop data nodes inside tomcat and encountering some issues.
> http://issues.apache.org/jira/browse/HADOOP-211#action_12419360
> I'm filing this bug to capture discussion about the pros and cons of such an approach.  I'd be curious to know what others on the list (who know more about java/tomcat) think about this proposal.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jul  7 16:36:34 2006
Return-Path: 
 <hadoop-dev-return-2427-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12835 invoked from network); 7 Jul 2006 16:36:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 16:36:34 -0000
Received: (qmail 22554 invoked by uid 500); 7 Jul 2006 16:36:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 22526 invoked by uid 500); 7 Jul 2006 16:36:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22517 invoked by uid 99); 7 Jul 2006 16:36:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 09:36:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 09:36:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E5A19714219
	for <hadoop-dev@lucene.apache.org>; Fri,  7 Jul 2006 16:32:33 +0000 (GMT)
Message-ID: <25690547.1152289953937.JavaMail.jira@brutus>
Date: Fri, 7 Jul 2006 16:32:33 +0000 (GMT+00:00)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-211) logging improvements for Hadoop
In-Reply-To: <11693488.1147389488398.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-211?page=comments#action_12419744 ] 

eric baldeschwieler commented on HADOOP-211:
--------------------------------------------

Barry, I've filed a new enhancement bug (ability to run datanodes in tomcat) to serve as an umbrella for this issue.  I think you've filed another bug on jeti related to this as well.  It would be good to tie all the tomcat issues together.  I'd be curious to know what others on the list (who know more about java/tomcat) think about this proposal, but I think we should move the discussion off this bug.


http://issues.apache.org/jira/browse/HADOOP-353 - Run datanode (or other hadoop servers) inside tomcat

> logging improvements for Hadoop
> -------------------------------
>
>          Key: HADOOP-211
>          URL: http://issues.apache.org/jira/browse/HADOOP-211
>      Project: Hadoop
>         Type: Improvement

>     Versions: 0.2.0
>     Reporter: Sameer Paranjpye
>     Assignee: Sameer Paranjpye
>     Priority: Minor
>      Fix For: 0.3.0
>  Attachments: acl-log4j-II.patch.tgz, acl-log4j-webapps.patch, acl-log4j.patch, commons_logging_patch
>
> Here's a proposal for some impovements to the way Hadoop does logging. It advocates 3 
> broad changes to the way logging is currently done, these being:
> - The use of a uniform logging format by all Hadoop subsystems
> - The use of Apache commons logging as a facade above an underlying logging framework
> - The use of Log4J as the underlying logging framework instead of java.util.logging
> This is largely polishing work, but it seems like it would make log analysis and debugging
> easier in the short term. In the long term, it would future proof logging to the extent of
> allowing the logging framework used to change while requiring minimal code change. The 
> propos changes are motivated by the following requirements which we think Hadoops 
> logging should meet:
> - Hadoops logs should be amenable to analysis by tools like grep, sed, awk etc.
> - Log entries should be clearly annotated with a timestamp and a logging level
> - Log entries should be traceable to the subsystem from which they originated
> - The logging implementation should allow log entries to be annotated with source code 
> location information like classname, methodname, file and line number, without requiring
> code changes
> - It should be possible to change the logging implementation used without having to change
> thousands of lines of code
> - The mapping of loggers to destinations (files, directories, servers etc.) should be 
> specified and modifiable via configuration
> Uniform logging format:
> All Hadoop logs should have the following structure.
> <Header>\n
> <LogEntry>\n [<Exception>\n]
> .
> .
> .
> where the header line specifies the format of each log entry. The header line has the format:
> '# <Fieldname> <Fieldname>...\n'. 
> The default format of each log entry is: '# Timestamp Level LoggerName Message', where:
> - Timestamp is a date and time in the format MM/DD/YYYY:HH:MM:SS
> - Level is the logging level (FATAL, WARN, DEBUG, TRACE, etc.)
> - LoggerName is the short name of the logging subsystem from which the message originated e.g.
> fs.FSNamesystem, dfs.Datanode etc.
> - Message is the log message produced
> Why Apache commons logging and Log4J?
> Apache commons logging is a facade meant to be used as a wrapper around an underlying logging
> implementation. Bridges from Apache commons logging to popular logging implementations 
> (Java logging, Log4J, Avalon etc.) are implemented and available as part of the commons logging
> distribution. Implementing a bridge to an unsupported implementation is fairly striaghtforward
> and involves the implementation of subclasses of the commons logging LogFactory and Logger 
> classes. Using Apache commons logging and making all logging calls through it enables us to
> move to a different logging implementation by simply changing configuration in the best case.
> Even otherwise, it incurs minimal code churn overhead.
> Log4J offers a few benefits over java.util.logging that make it a more desirable choice for the
> logging back end.
> - Configuration Flexibility: The mapping of loggers to destinations (files, sockets etc.)
> can be completely specified in configuration. It is possible to do this with Java logging as
> well, however, configuration is a lot more restrictive. For instance, with Java logging all 
> log files must have names derived from the same pattern. For the namenode, log files could 
> be named with the pattern "%h/namenode%u.log" which would put log files in the user.home
> directory with names like namenode0.log etc. With Log4J it would be possible to configure
> the namenode to emit log files with different names, say heartbeats.log, namespace.log,
> clients.log etc. Configuration variables in Log4J can also have the values of system 
> properties embedded in them.
> - Takes wrappers into account: Log4J takes into account the possibility that an application
> may be invoking it via a wrapper, such as Apache commons logging. This is important because
> logging event objects must be able to infer the context of the logging call such as classname,
> methodname etc. Inferring context is a relatively expensive operation that involves creating
> an exception and examining the stack trace to find the frame just before the first frame 
> of the logging framework. It is therefore done lazily only when this information actually 
> needs to be logged. Log4J can be instructed to look for the frame corresponding to the wrapper
> class, Java logging cannot. In the case of Java logging this means that a) the bridge from 
> Apache commons logging is responsible for inferring the calling context and setting it in the 
> logging event and b) this inference has to be done on every logging call regardless of whether
> or not it is needed.
> - More handy features: Log4J has some handy features that Java logging doesn't. A couple
> of examples of these:
> a) Date based rolling of log files 
> b) Format control through configuration. Log4J has a PatternLayout class that can be 
> configured to generate logs with a user specified pattern. The logging format described
> above can be described as "%d{MM/dd/yyyy:HH:mm:SS} %c{2} %p %m". The format specifiers
> indicate that each log line should have the date and time followed by the logger name followed
> by the logging level or priority followed by the application generated message.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jul  7 17:09:53 2006
Return-Path: 
 <hadoop-dev-return-2429-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 21895 invoked from network); 7 Jul 2006 17:09:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 17:09:53 -0000
Received: (qmail 72358 invoked by uid 500); 7 Jul 2006 17:09:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72205 invoked by uid 500); 7 Jul 2006 17:09:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72196 invoked by uid 99); 7 Jul 2006 17:09:52 -0000
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 10:09:52 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1132F71428D
	for <hadoop-dev@lucene.apache.org>; Fri,  7 Jul 2006 17:07:32 +0000 (GMT)
Message-ID: <24581028.1152292052067.JavaMail.jira@brutus>
Date: Fri, 7 Jul 2006 17:07:32 +0000 (GMT+00:00)
From: "Barry Kaplan (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-353) Run datanode (or other hadoop
 servers) inside tomcat
In-Reply-To: <6115084.1152289711704.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-353?page=comments#action_12419751 ] 

Barry Kaplan commented on HADOOP-353:
-------------------------------------

Eric thanks for putting this in... I will help out as much as I can.

To explain my setup we essentially have a web farm running just tomcat, it makes it simple for deployment and upgrades. Essentially all of our servers are used for utility purposes (indexing, statistic calulations, etc...) or as web servers. Ever web server is also a data node. One of our utility servers (we are working on using a poll method) is picked to be the namenode.

The beauty of this design for us, is we can deploy a server and install java,tomcat,war file and have a server that is 100% utilized in our environment. Hadoop's DFS allows us to take advantage of the disk space available across our environment with 0 configuration.

> Run datanode (or other hadoop servers) inside tomcat
> ----------------------------------------------------
>
>          Key: HADOOP-353
>          URL: http://issues.apache.org/jira/browse/HADOOP-353
>      Project: Hadoop
>         Type: Improvement

>     Reporter: eric baldeschwieler

>
> Barry Kaplan is running hadoop data nodes inside tomcat and encountering some issues.
> http://issues.apache.org/jira/browse/HADOOP-211#action_12419360
> I'm filing this bug to capture discussion about the pros and cons of such an approach.  I'd be curious to know what others on the list (who know more about java/tomcat) think about this proposal.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jul  7 17:15:51 2006
Return-Path: 
 <hadoop-dev-return-2430-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23049 invoked from network); 7 Jul 2006 17:15:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 17:15:51 -0000
Received: (qmail 80211 invoked by uid 500); 7 Jul 2006 17:15:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 80056 invoked by uid 500); 7 Jul 2006 17:15:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 80047 invoked by uid 99); 7 Jul 2006 17:15:50 -0000
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 10:15:50 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A95F1714219
	for <hadoop-dev@lucene.apache.org>; Fri,  7 Jul 2006 17:13:30 +0000 (GMT)
Message-ID: <21597970.1152292410690.JavaMail.jira@brutus>
Date: Fri, 7 Jul 2006 17:13:30 +0000 (GMT+00:00)
From: "Barry Kaplan (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-349) Allow info server to be turned off/on
 by conf file
In-Reply-To: <24802631.1152210629864.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-349?page=all ]

Barry Kaplan updated HADOOP-349:
--------------------------------

    Attachment: info_server_patch

adds config setting for turning off the info server

> Allow info server to be turned off/on by conf file
> --------------------------------------------------
>
>          Key: HADOOP-349
>          URL: http://issues.apache.org/jira/browse/HADOOP-349
>      Project: Hadoop
>         Type: Improvement

>   Components: conf
>     Reporter: Barry Kaplan
>  Attachments: info_server_patch
>
> Since I am using hadoop within my own servlet which is not Jetty, it would be nice to not have to need Jetty to run my servlet. As such I propose adding an if statement/donf setting at FSNamesystem:171 as such         
> if(conf.getBoolean("dfs.info.active",true)){
>             this.infoPort = conf.getInt("dfs.info.port", 50070);
>             this.infoServer = new StatusHttpServer("dfs", infoPort, false);
>             this.infoServer.start();
> }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jul  7 17:28:49 2006
Return-Path: 
 <hadoop-dev-return-2431-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 27434 invoked from network); 7 Jul 2006 17:28:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 17:28:49 -0000
Received: (qmail 96155 invoked by uid 500); 7 Jul 2006 17:28:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95995 invoked by uid 500); 7 Jul 2006 17:28:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95986 invoked by uid 99); 7 Jul 2006 17:28:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 10:28:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 10:28:46 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CABBE714219
	for <hadoop-dev@lucene.apache.org>; Fri,  7 Jul 2006 17:26:29 +0000 (GMT)
Message-ID: <17281484.1152293189827.JavaMail.jira@brutus>
Date: Fri, 7 Jul 2006 17:26:29 +0000 (GMT+00:00)
From: "Barry Kaplan (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-354) All daemons should have public methods
 to start and stop them
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

All daemons should have public methods to start and stop them
-------------------------------------------------------------

         Key: HADOOP-354
         URL: http://issues.apache.org/jira/browse/HADOOP-354
     Project: Hadoop
        Type: Bug

  Components: dfs  
    Versions: 0.4.0    
    Reporter: Barry Kaplan
 Attachments: shutdown_patch

To get tomcat working shutdown working properly I needed to make the NameNode stop() method public as well as the DataNode shutdown() method public. (will attach patch file).

Furthermore I noticed that the RPC object has a static client reference that you have no way of stopping, so I added one. (will attach patch)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jul  7 17:28:50 2006
Return-Path: 
 <hadoop-dev-return-2432-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 27466 invoked from network); 7 Jul 2006 17:28:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 17:28:50 -0000
Received: (qmail 96219 invoked by uid 500); 7 Jul 2006 17:28:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 96182 invoked by uid 500); 7 Jul 2006 17:28:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 96164 invoked by uid 99); 7 Jul 2006 17:28:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 10:28:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 10:28:47 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BBDDB714204
	for <hadoop-dev@lucene.apache.org>; Fri,  7 Jul 2006 17:26:30 +0000 (GMT)
Message-ID: <29142693.1152293190766.JavaMail.jira@brutus>
Date: Fri, 7 Jul 2006 17:26:30 +0000 (GMT+00:00)
From: "Barry Kaplan (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-354) All daemons should have public methods
 to start and stop them
In-Reply-To: <17281484.1152293189827.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-354?page=all ]

Barry Kaplan updated HADOOP-354:
--------------------------------

    Attachment: shutdown_patch

modification to NameNode, DataNode, and RPC to allow thread shutdown.

> All daemons should have public methods to start and stop them
> -------------------------------------------------------------
>
>          Key: HADOOP-354
>          URL: http://issues.apache.org/jira/browse/HADOOP-354
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.4.0
>     Reporter: Barry Kaplan
>  Attachments: shutdown_patch
>
> To get tomcat working shutdown working properly I needed to make the NameNode stop() method public as well as the DataNode shutdown() method public. (will attach patch file).
> Furthermore I noticed that the RPC object has a static client reference that you have no way of stopping, so I added one. (will attach patch)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jul  7 17:30:22 2006
Return-Path: 
 <hadoop-dev-return-2433-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 28523 invoked from network); 7 Jul 2006 17:30:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 17:30:22 -0000
Received: (qmail 99691 invoked by uid 500); 7 Jul 2006 17:30:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 99501 invoked by uid 500); 7 Jul 2006 17:30:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 99435 invoked by uid 99); 7 Jul 2006 17:30:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 10:30:10 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=DNS_FROM_RFC_ABUSE,NO_REAL_NAME,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of barry.kaplan@gmail.com
 designates 64.233.184.234 as permitted sender)
Received: from [64.233.184.234] (HELO wr-out-0506.google.com) (64.233.184.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 10:30:01 -0700
Received: by wr-out-0506.google.com with SMTP id i11so1472740wra
        for <hadoop-dev@lucene.apache.org>;
 Fri, 07 Jul 2006 10:29:12 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=SfUuRLKgSOL/1qMLAld8M1OZ+qZCeV3otvMlS2CAEbm4XWSPGrm5RXb1y8pIctCSn/KwfEMH+fEVH9LfWNAzMyaUPxp+ud2nkn+FqYLXlpbkfAVpGM8p4SBFAVo7puZHy/tudHO7TPj9hD2mkDh6CmwUuTwghv1c/eOYG3sTQr0=
Received: by 10.54.81.14 with SMTP id e14mr652550wrb;
        Fri, 07 Jul 2006 10:29:12 -0700 (PDT)
Received: by 10.54.143.14 with HTTP; Fri, 7 Jul 2006 10:29:12 -0700 (PDT)
Message-ID: <cac652840607071029j26cc972fxbe7ae236763e135f@mail.gmail.com>
Date: Fri, 7 Jul 2006 10:29:12 -0700
From: barry.kaplan@gmail.com
To: hadoop-dev@lucene.apache.org
Subject: Re: Re: Stopping datanode and namenode
In-Reply-To: <44AE1CE9.1000406@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <cac652840607051909j60480860h4b5601a4688c45db@mail.gmail.com>
	 <44AE1CE9.1000406@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Maybe, but the way we are doing it now allows us to have a very simple
deployment strategy.

Bug filed, with patch.

On 7/7/06, Doug Cutting <cutting@apache.org> wrote:
> barry.kaplan@gmail.com wrote:
> > I see the code has some calls to stop the namenode for unit testing,
> > what about opening that up, or adding a calls to namenode and datanode
> > to shut them down?
>
> +1
>
> The public APIs for all daemons (namenode, datanode, tasktracker,
> jobtracker) should include both start and stop methods.  Please file a
> bug for this.
>
> Doug
>

From MAILER-DAEMON Fri Jul  7 17:37:54 2006
Return-Path: 
 <hadoop-dev-return-2434-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31793 invoked from network); 7 Jul 2006 17:37:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 17:37:54 -0000
Received: (qmail 17175 invoked by uid 500); 7 Jul 2006 17:37:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17017 invoked by uid 500); 7 Jul 2006 17:37:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17008 invoked by uid 99); 7 Jul 2006 17:37:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 10:37:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 10:37:50 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9F377714219
	for <hadoop-dev@lucene.apache.org>; Fri,  7 Jul 2006 17:35:30 +0000 (GMT)
Message-ID: <25801586.1152293730649.JavaMail.jira@brutus>
Date: Fri, 7 Jul 2006 17:35:30 +0000 (GMT+00:00)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-349) Allow info server to be turned
 off/on by conf file
In-Reply-To: <24802631.1152210629864.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-349?page=comments#action_12419757 ] 

eric baldeschwieler commented on HADOOP-349:
--------------------------------------------

this is kind of pushing the opposite direction we're going.  We are adding more functionality to this server and since we want to have a multi-lingual interoperable protocol down the road, something over HTTP makes sense.  I'm imaging the HTTP server will eventually be the only port to reach these servers.

So a long term solution will need to allow you to use tomcat or run an embedded jeti on another port.  Not just turn of jetty.

> Allow info server to be turned off/on by conf file
> --------------------------------------------------
>
>          Key: HADOOP-349
>          URL: http://issues.apache.org/jira/browse/HADOOP-349
>      Project: Hadoop
>         Type: Improvement

>   Components: conf
>     Reporter: Barry Kaplan
>  Attachments: info_server_patch
>
> Since I am using hadoop within my own servlet which is not Jetty, it would be nice to not have to need Jetty to run my servlet. As such I propose adding an if statement/donf setting at FSNamesystem:171 as such         
> if(conf.getBoolean("dfs.info.active",true)){
>             this.infoPort = conf.getInt("dfs.info.port", 50070);
>             this.infoServer = new StatusHttpServer("dfs", infoPort, false);
>             this.infoServer.start();
> }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jul  7 19:13:52 2006
Return-Path: 
 <hadoop-dev-return-2435-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 62551 invoked from network); 7 Jul 2006 19:13:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 19:13:52 -0000
Received: (qmail 62219 invoked by uid 500); 7 Jul 2006 19:13:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62181 invoked by uid 500); 7 Jul 2006 19:13:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62172 invoked by uid 99); 7 Jul 2006 19:13:51 -0000
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 12:13:51 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 23DE87141F1
	for <hadoop-dev@lucene.apache.org>; Fri,  7 Jul 2006 19:11:31 +0000 (GMT)
Message-ID: <17921613.1152299491144.JavaMail.jira@brutus>
Date: Fri, 7 Jul 2006 19:11:31 +0000 (GMT+00:00)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-302) class Text (replacement for class
 UTF8) was: HADOOP-136
In-Reply-To: <26017675.1150245149961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-302?page=all ]

Hairong Kuang reassigned HADOOP-302:
------------------------------------

    Assign To: Hairong Kuang  (was: Doug Cutting)

> class Text (replacement for class UTF8) was: HADOOP-136
> -------------------------------------------------------
>
>          Key: HADOOP-302
>          URL: http://issues.apache.org/jira/browse/HADOOP-302
>      Project: Hadoop
>         Type: Improvement

>   Components: io
>     Reporter: Michel Tourn
>     Assignee: Hairong Kuang

>
> Just to verify, which length-encoding scheme are we using for class Text (aka LargeUTF8) 
> a) The "UTF-8/Lucene" scheme? (highest bit of each byte is an extension bit, which I think is what Doug is describing in his last comment) or 
> b) the record-IO scheme in o.a.h.record.Utils.java:readInt 
> Either way, note that: 
> 1. UTF8.java and its successor Text.java need to read the length in two ways: 
>   1a. consume 1+ bytes from a DataInput and 
>   1b. parse the length within a byte array at a given offset 
> (1.b is used for the "WritableComparator optimized for UTF8 keys" ). 
> o.a.h.record.Utils only supports the DataInput mode. 
> It is not clear to me what is the best way to extend this Utils code when you need to support both reading modes 
> 2 Methods like UTF8's WritableComparator are to be low overhead, in partic. there should be no Object allocation. 
> For the byte array case, the varlen-reader utility needs to be extended to return both: 
>  the decoded length and the length of the encoded length. 
>  (so that the caller can do offset += encodedlength) 
>     
> 3. A String length does not need (small) negative integers. 
> 4. One advantage of a) is that it is standard (or at least well-known and natural) and there are no magic constants (like -120, -121 -124) 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jul  7 19:33:21 2006
Return-Path: 
 <hadoop-dev-return-2436-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76144 invoked from network); 7 Jul 2006 19:33:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 19:33:21 -0000
Received: (qmail 93676 invoked by uid 500); 7 Jul 2006 19:33:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 93587 invoked by uid 500); 7 Jul 2006 19:33:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 93440 invoked by uid 99); 7 Jul 2006 19:33:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 12:33:16 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.109.112.28] (HELO mrout2-b.corp.dcn.yahoo.com)
 (216.109.112.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 12:33:09 -0700
Received: from [10.72.104.183] (enoughhot-lx.corp.yahoo.com [10.72.104.183])
	by mrout2-b.corp.dcn.yahoo.com (8.13.6/8.13.6/y.out) with ESMTP id
 k67JW2ZB078811
	for <hadoop-dev@lucene.apache.org>; Fri, 7 Jul 2006 12:32:03 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=message-id:date:from:user-agent:x-accept-language:
	mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
	b=EXfqr1l2M46CgBZePy2CBeuP5pgvZ9FF0vaOoyVf5DtEyKz/sgwd8ZLWUaKY7oJU
Message-ID: <44AEB6B8.9030000@yahoo-inc.com>
Date: Fri, 07 Jul 2006 12:32:08 -0700
From: Konstantin Shvachko <shv@yahoo-inc.com>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: Hadoop Distributed File System requirements on Wiki
References: <44A5C920.5050808@yahoo-inc.com>
	 <e1d10fc00607061202j7ee2f796o87f667c835509749@mail.gmail.com>
	 <9DC52EE0-B405-4B34-A420-7A7BBF9EF548@yahoo-inc.com>
	 <e1d10fc00607061356h4818e9c6j2966ec2c6ab02482@mail.gmail.com>
	 <44AE0D76.1020905@yahoo-inc.com>
 <e1d10fc00607070851n7e921bcdq9618b250a498b690@mail.gmail.com>
In-Reply-To: <e1d10fc00607070851n7e921bcdq9618b250a498b690@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Paul Sutter wrote:

> On 7/7/06, Konstantin Shvachko <shv@yahoo-inc.com> wrote:
>
>> > *Recoverability and Availability Goals*
>> >
>> > You might want to consider adding recoverability and availability 
>> goals.
>>
>> This is an interesting observation. Ideally, we would like to save and
>> replicate
>> fs image file as soon as the edits file reaches a specific size, and we
>> would like
>> to make edits file updates transactional, with the file system locked
>> for updates
>> during the transaction. This would be the zero recoverability goal in
>> your terms.
>> Are we willing to weaken this requirement in favor of the performance?
>
> Actually its OK for me if we lose even an hour of data on a namenode
> crash, since I can just resubmit the recent jobs. Less loss is better,
> but my suggestion would be to favor simplicity over absolute recovery
> if thats a tradeoff. Others might feel differently about acceptable
> levels of data loss.

I agree, simplicity is also very important.

>> > Availability goals are probably less stringent than for most storage
>> > systems
>> > (dare I say that a few hours downtime is probably OK) Adding these
>> > goals to
>> > the document could be valuable for consensus and prioritization.
>>
>> If I understood you correctly, this goal is more related to a specific
>> installation of
>> the system rather than to the system itself as a software product.
>> Or do you mean that the total time spent by the system on 
>> self-maintenance
>> procedures like backups and checkpointing should not exceed 2 hours a 
>> day?
>> In any case, I agree, high availability should be mentioned, probably 
>> in the
>> "Feature requirements" section.
>
> Its about features. Is namenode failover automatic or manual? If its
> manual, it takes time. And it should definitely be manual for now.
> Seamless namenode failover done right is a lot of work, and
> unnecessary.
>
> With manual failover, what is the downtime when a namenode fails?
> Well, I imagine that you'd want to take everything down, bring the
> filesystem up in safe mode (nice feature!) on the new namenode, and do
> some kind of fscheck. And then, when you're comfortable that
> everything is copacetic, all your files are present, and that the
> filesystem wont do a radical dereplication of every block when you
> make it writable, you make it writable. (In fact, the secondary
> namenode might always come up in safe mode until manually changed).
>
> How long does this take? Well, during this time the system is
> unavailable. And if it fails at 2AM, you're probably not back up
> before 10AM.
>
> But thats OK. Better to be down for a few hours (manual failover) than
> to have a complex system likely to break (seamless automatic
> failover).

That's a good point. We should probably add a task to define/describe
manual failover procedures and to evaluate the availability goal that we
can reasonably guarantee.

>> >> > *Backup Scheme*
>> >> > **
>> >> > We might want to start discussion of a backup scheme for HDFS,
>> >> > especially
>> >> > given all the courageous rewriting and feature-addition likely to
>> >> > occur.
>> >>...
>> >
>> > But as for covering my fears, I'll feel safer with key data backed up
>> > in a filesystem that is not DFS, as pedestrian as that sounds. :)
>>
>> Frankly speaking I've never thought about a backup of a 10 PB storage
>> system. How much space will that require? Isn't it easier just to 
>> increase
>> the replication factor? Just a thought...
>
> >> > **
>
> Increasing replication doesnt protect me against a filesystem bug.
>
> I'm a nervous nelly on this one: file system revisions do scare me,
> and I dont have a 10PB system. Lets say I have a 100TB system, and
> that to get back into production I need only restore 5TB worth of
> critical files. Then once I'm back in production I can gradually
> restore the next 25TB and regenerate the rest.
>
> Its feasible and probably prudent. Its not that Im expecting data loss
> bugs in  new code. My concern is less about the likelihood of the
> problem, and more about the severity of the problem.
>
> To back up a 10PB system, you would want to back it up to a second
> 10PB system located on an opposite coast. In fact if this system is
> important to your business, you must do this. And then there is the
> question, do you stagger software updates on these two systems?
> Probably.
>
> You might want to find someone from EMC or Netapp, and get their
> feedback on how software changes, QA, and beta testing is handled
> (including timelines). Storage systems are really a risky type of code
> to modify, for lots of reasons more apparent to the downstream
> consumers than to developers. :)

I guess if we want to separate the backup from the original storage
on the hardware level we have two options
a) mirror data to another dfs cluster (earlier version, opposite cost)
b) copy critical data to a different (local) fs
If only 5% of the whole data set is critical you might want to go with (b).
This can be a separate (dfs based) application or an extension to dfs.
If ~100% is critical then (a) is the only way.
On a related issue, do we want to add the upgrade procedures task to the 
list?

Thanks,
Konstantin

From MAILER-DAEMON Fri Jul  7 22:00:30 2006
Return-Path: 
 <hadoop-dev-return-2437-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23684 invoked from network); 7 Jul 2006 22:00:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 22:00:30 -0000
Received: (qmail 35646 invoked by uid 500); 7 Jul 2006 22:00:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 35490 invoked by uid 500); 7 Jul 2006 22:00:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 35481 invoked by uid 99); 7 Jul 2006 22:00:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 15:00:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 15:00:26 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D26907141F4
	for <hadoop-dev@lucene.apache.org>; Fri,  7 Jul 2006 21:58:29 +0000 (GMT)
Message-ID: <31271975.1152309509859.JavaMail.jira@brutus>
Date: Fri, 7 Jul 2006 21:58:29 +0000 (GMT+00:00)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-355) hadoopStreaming: fix APIs, -reduce
 NONE, StreamSequenceRecordReader
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hadoopStreaming: fix APIs, -reduce NONE, StreamSequenceRecordReader
-------------------------------------------------------------------

         Key: HADOOP-355
         URL: http://issues.apache.org/jira/browse/HADOOP-355
     Project: Hadoop
        Type: Improvement

  Components: contrib/streaming  
    Reporter: Michel Tourn


This patch fixes outstanding problems with streaming:
fix APIs
option -reduce NONE
support StreamSequenceRecordReader as an input


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jul  7 22:08:30 2006
Return-Path: 
 <hadoop-dev-return-2438-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 25460 invoked from network); 7 Jul 2006 22:08:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 22:08:30 -0000
Received: (qmail 42379 invoked by uid 500); 7 Jul 2006 22:08:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 42353 invoked by uid 500); 7 Jul 2006 22:08:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 42344 invoked by uid 99); 7 Jul 2006 22:08:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 15:08:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 15:08:27 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A0D547141F2
	for <hadoop-dev@lucene.apache.org>; Fri,  7 Jul 2006 22:06:30 +0000 (GMT)
Message-ID: <4932215.1152309990656.JavaMail.jira@brutus>
Date: Fri, 7 Jul 2006 22:06:30 +0000 (GMT+00:00)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-355) hadoopStreaming: fix APIs, -reduce
 NONE, StreamSequenceRecordReader
In-Reply-To: <31271975.1152309509859.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-355?page=all ]

Michel Tourn updated HADOOP-355:
--------------------------------

    Attachment: validinput.rednone.patch

> hadoopStreaming: fix APIs, -reduce NONE, StreamSequenceRecordReader
> -------------------------------------------------------------------
>
>          Key: HADOOP-355
>          URL: http://issues.apache.org/jira/browse/HADOOP-355
>      Project: Hadoop
>         Type: Improvement

>   Components: contrib/streaming
>     Reporter: Michel Tourn
>  Attachments: validinput.rednone.patch
>
> This patch fixes outstanding problems with streaming:
> fix APIs
> option -reduce NONE
> support StreamSequenceRecordReader as an input

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jul  7 22:18:29 2006
Return-Path: 
 <hadoop-dev-return-2439-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 28970 invoked from network); 7 Jul 2006 22:18:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 22:18:29 -0000
Received: (qmail 53121 invoked by uid 500); 7 Jul 2006 22:18:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53100 invoked by uid 500); 7 Jul 2006 22:18:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53091 invoked by uid 99); 7 Jul 2006 22:18:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 15:18:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 15:18:26 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CB1687141F4
	for <hadoop-dev@lucene.apache.org>; Fri,  7 Jul 2006 22:16:29 +0000 (GMT)
Message-ID: <28376836.1152310589828.JavaMail.jira@brutus>
Date: Fri, 7 Jul 2006 22:16:29 +0000 (GMT+00:00)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-356) Build and test hadoopStreaming nightly
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Build and test hadoopStreaming nightly
--------------------------------------

         Key: HADOOP-356
         URL: http://issues.apache.org/jira/browse/HADOOP-356
     Project: Hadoop
        Type: Improvement

    Reporter: Michel Tourn
 Attachments: nightlystreaming.patch

hadoopStreaming was originally built and tested separately.

It makes sense to keep building the hadoopStreaming code as a separate jar file:
this is all client code that can be uploaded in the Job jar.
this allows quick turnaround on production clusters 
(hadoopStreaming code updates do not require to bring down the MapReduce system.
If necessary users can use their own modified versions of the hadoopStreaming jar but still run on the production cluster.)

On the other hand it makes sense to build this code nightly.
Many recent changes broke either compilation or correctness.
All the problems would have been caught if the hadoopStreaming compilation and tests were run nighlty.

Conclusion:
the updated top-level build.xml adds the following dependencies:

1. Target compile calls target compile in contrib/streaming/build.xml
2. Target test calls target test in contrib/streaming/build.xml










-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jul  7 22:18:30 2006
Return-Path: 
 <hadoop-dev-return-2440-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 29005 invoked from network); 7 Jul 2006 22:18:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 22:18:30 -0000
Received: (qmail 53305 invoked by uid 500); 7 Jul 2006 22:18:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53277 invoked by uid 500); 7 Jul 2006 22:18:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53267 invoked by uid 99); 7 Jul 2006 22:18:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 15:18:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 15:18:27 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BBE277141F2
	for <hadoop-dev@lucene.apache.org>; Fri,  7 Jul 2006 22:16:30 +0000 (GMT)
Message-ID: <30199045.1152310590766.JavaMail.jira@brutus>
Date: Fri, 7 Jul 2006 22:16:30 +0000 (GMT+00:00)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-356) Build and test hadoopStreaming nightly
In-Reply-To: <28376836.1152310589828.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-356?page=all ]

Michel Tourn updated HADOOP-356:
--------------------------------

    Attachment: nightlystreaming.patch

> Build and test hadoopStreaming nightly
> --------------------------------------
>
>          Key: HADOOP-356
>          URL: http://issues.apache.org/jira/browse/HADOOP-356
>      Project: Hadoop
>         Type: Improvement

>     Reporter: Michel Tourn
>  Attachments: nightlystreaming.patch
>
> hadoopStreaming was originally built and tested separately.
> It makes sense to keep building the hadoopStreaming code as a separate jar file:
> this is all client code that can be uploaded in the Job jar.
> this allows quick turnaround on production clusters 
> (hadoopStreaming code updates do not require to bring down the MapReduce system.
> If necessary users can use their own modified versions of the hadoopStreaming jar but still run on the production cluster.)
> On the other hand it makes sense to build this code nightly.
> Many recent changes broke either compilation or correctness.
> All the problems would have been caught if the hadoopStreaming compilation and tests were run nighlty.
> Conclusion:
> the updated top-level build.xml adds the following dependencies:
> 1. Target compile calls target compile in contrib/streaming/build.xml
> 2. Target test calls target test in contrib/streaming/build.xml

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jul  7 23:28:21 2006
Return-Path: 
 <hadoop-dev-return-2441-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 47723 invoked from network); 7 Jul 2006 23:28:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 23:28:21 -0000
Received: (qmail 40891 invoked by uid 500); 7 Jul 2006 23:28:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40856 invoked by uid 500); 7 Jul 2006 23:28:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 40846 invoked by uid 99); 7 Jul 2006 23:28:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 16:28:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 16:28:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CD8FE41045F
	for <hadoop-dev@lucene.apache.org>; Fri,  7 Jul 2006 23:26:29 +0000 (GMT)
Message-ID: <1892029.1152314789839.JavaMail.jira@brutus>
Date: Fri, 7 Jul 2006 23:26:29 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-357) hadoop doesn't handle 0 reduces
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hadoop doesn't handle 0 reduces
-------------------------------

         Key: HADOOP-357
         URL: http://issues.apache.org/jira/browse/HADOOP-357
     Project: Hadoop
        Type: Bug

    Reporter: Owen O'Malley
 Assigned to: Owen O'Malley 


We have cases where we want to use maps for submitting parallel jobs and don't need any reduces. Currently, you are required to have a single reducer. It would be nicer if the framework would let you specify that you don't need any reducers.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Sat Jul  8 00:29:23 2006
Return-Path: 
 <hadoop-dev-return-2442-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 54756 invoked from network); 8 Jul 2006 00:29:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jul 2006 00:29:23 -0000
Received: (qmail 66757 invoked by uid 500); 8 Jul 2006 00:29:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66729 invoked by uid 500); 8 Jul 2006 00:29:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66720 invoked by uid 99); 8 Jul 2006 00:29:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 17:29:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 17:29:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 209877141F4
	for <hadoop-dev@lucene.apache.org>; Sat,  8 Jul 2006 00:27:31 +0000 (GMT)
Message-ID: <3862857.1152318451130.JavaMail.jira@brutus>
Date: Sat, 8 Jul 2006 00:27:31 +0000 (GMT+00:00)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-302) class Text (replacement for class
 UTF8) was: HADOOP-136
In-Reply-To: <26017675.1150245149961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-302?page=comments#action_12419800 ] 

Hairong Kuang commented on HADOOP-302:
--------------------------------------

There are two issues with the current implementation of UTF8.

The first is that it does not handle over long string. The length of a string is limited to a short, not a int. I'd like to address this problem by storing the length of a string in a variable-length formt. The highest bit of each byte is an extension bit. '1' means that more bytes are followed, while '0' means last byte.

The second is that the class chooses Java modified UTF8 as the serialized form.  Some argue that we should use the standard UTF8. It seems to me that serializing a string to Java modified UTF8 is quite efficient. But it is Java's internal representation. If we want to support inter-programming-language communication, it makes more sense to use the standard UTF8.

Also for the name of the class, could I use "StringWritable"? It is consistent with other classes that implement WritableComparable, like IntWritable, FloatWritable etc. 

> class Text (replacement for class UTF8) was: HADOOP-136
> -------------------------------------------------------
>
>          Key: HADOOP-302
>          URL: http://issues.apache.org/jira/browse/HADOOP-302
>      Project: Hadoop
>         Type: Improvement

>   Components: io
>     Reporter: Michel Tourn
>     Assignee: Hairong Kuang

>
> Just to verify, which length-encoding scheme are we using for class Text (aka LargeUTF8) 
> a) The "UTF-8/Lucene" scheme? (highest bit of each byte is an extension bit, which I think is what Doug is describing in his last comment) or 
> b) the record-IO scheme in o.a.h.record.Utils.java:readInt 
> Either way, note that: 
> 1. UTF8.java and its successor Text.java need to read the length in two ways: 
>   1a. consume 1+ bytes from a DataInput and 
>   1b. parse the length within a byte array at a given offset 
> (1.b is used for the "WritableComparator optimized for UTF8 keys" ). 
> o.a.h.record.Utils only supports the DataInput mode. 
> It is not clear to me what is the best way to extend this Utils code when you need to support both reading modes 
> 2 Methods like UTF8's WritableComparator are to be low overhead, in partic. there should be no Object allocation. 
> For the byte array case, the varlen-reader utility needs to be extended to return both: 
>  the decoded length and the length of the encoded length. 
>  (so that the caller can do offset += encodedlength) 
>     
> 3. A String length does not need (small) negative integers. 
> 4. One advantage of a) is that it is standard (or at least well-known and natural) and there are no magic constants (like -120, -121 -124) 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Sat Jul  8 07:18:23 2006
Return-Path: 
 <hadoop-dev-return-2443-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 71116 invoked from network); 8 Jul 2006 07:18:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jul 2006 07:18:23 -0000
Received: (qmail 83049 invoked by uid 500); 8 Jul 2006 07:18:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 83028 invoked by uid 500); 8 Jul 2006 07:18:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 83019 invoked by uid 99); 8 Jul 2006 07:18:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jul 2006 00:18:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jul 2006 00:18:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9F82D41045F
	for <hadoop-dev@lucene.apache.org>; Sat,  8 Jul 2006 07:16:30 +0000 (GMT)
Message-ID: <14155889.1152342990650.JavaMail.jira@brutus>
Date: Sat, 8 Jul 2006 07:16:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-340) Using wildcards in config pathnames
In-Reply-To: <9594370.1151833229877.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-340?page=all ]
     
Doug Cutting resolved HADOOP-340:
---------------------------------

    Fix Version: 0.5.0
     Resolution: Fixed
      Assign To: Doug Cutting

Okay, I added this to the description of these config parameters.

> Using wildcards in config pathnames
> -----------------------------------
>
>          Key: HADOOP-340
>          URL: http://issues.apache.org/jira/browse/HADOOP-340
>      Project: Hadoop
>         Type: Improvement

>   Components: conf
>     Versions: 0.4.0
>  Environment: a cluster with different disk setups
>     Reporter: Johan Oskarson
>     Assignee: Doug Cutting
>     Priority: Minor
>      Fix For: 0.5.0

>
> In our cluster there's machines with very different disk setups
> I've solved this by not rsyncing hadoop-site.xml, but as you probably understand this means new settings will not get copied properly.
> I'd like to be able to use wildcards in the dfs.data.dir path for example:
> <property>
>   <name>dfs.data.dir</name>
>     <value>/home/hadoop/disk*/dfs/data</value>
> </property>
> then every disk mounted in that directory would be used

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Sat Jul  8 07:28:24 2006
Return-Path: 
 <hadoop-dev-return-2444-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78710 invoked from network); 8 Jul 2006 07:28:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jul 2006 07:28:24 -0000
Received: (qmail 89255 invoked by uid 500); 8 Jul 2006 07:28:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 89225 invoked by uid 500); 8 Jul 2006 07:28:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 89216 invoked by uid 99); 8 Jul 2006 07:28:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jul 2006 00:28:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jul 2006 00:28:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1CDD441045F
	for <hadoop-dev@lucene.apache.org>; Sat,  8 Jul 2006 07:26:31 +0000 (GMT)
Message-ID: <2074848.1152343591114.JavaMail.jira@brutus>
Date: Sat, 8 Jul 2006 07:26:31 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-354) All daemons should have public
 methods to start and stop them
In-Reply-To: <17281484.1152293189827.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-354?page=comments#action_12419842 ] 

Doug Cutting commented on HADOOP-354:
-------------------------------------

I wonder if these daemons should implement a Stopable interface?  Is that overkill?

Also, your patch needs to update the javadoc for NameNode.stop().

> All daemons should have public methods to start and stop them
> -------------------------------------------------------------
>
>          Key: HADOOP-354
>          URL: http://issues.apache.org/jira/browse/HADOOP-354
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.4.0
>     Reporter: Barry Kaplan
>  Attachments: shutdown_patch
>
> To get tomcat working shutdown working properly I needed to make the NameNode stop() method public as well as the DataNode shutdown() method public. (will attach patch file).
> Furthermore I noticed that the RPC object has a static client reference that you have no way of stopping, so I added one. (will attach patch)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Sat Jul  8 07:47:23 2006
Return-Path: 
 <hadoop-dev-return-2445-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 80982 invoked from network); 8 Jul 2006 07:47:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jul 2006 07:47:23 -0000
Received: (qmail 4499 invoked by uid 500); 8 Jul 2006 07:47:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 4472 invoked by uid 500); 8 Jul 2006 07:47:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 4463 invoked by uid 99); 8 Jul 2006 07:47:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jul 2006 00:47:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jul 2006 00:47:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A2526410460
	for <hadoop-dev@lucene.apache.org>; Sat,  8 Jul 2006 07:45:30 +0000 (GMT)
Message-ID: <13277163.1152344730662.JavaMail.jira@brutus>
Date: Sat, 8 Jul 2006 07:45:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-349) Allow info server to be turned
 off/on by conf file
In-Reply-To: <24802631.1152210629864.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-349?page=comments#action_12419844 ] 

Doug Cutting commented on HADOOP-349:
-------------------------------------

What is the problem with running a Jetty-based daemon from within Tomcat?

It sounds like you'd like to package daemons as war files.  So, in this scheme, there would be separate namenode, datanode, tasktracker and jobtracker war file, since each exposes a distinct web interface, right?  That's a larger change to Hadoop than simply disabling the jetty daemons, since Hadoop sometimes stores application state in the servlet context, etc.

Short of that, you could simply package the datanode as a war file, but permit it to start its own daemon for it's web interface on a different port.  Is that so horrible?

> Allow info server to be turned off/on by conf file
> --------------------------------------------------
>
>          Key: HADOOP-349
>          URL: http://issues.apache.org/jira/browse/HADOOP-349
>      Project: Hadoop
>         Type: Improvement

>   Components: conf
>     Reporter: Barry Kaplan
>  Attachments: info_server_patch
>
> Since I am using hadoop within my own servlet which is not Jetty, it would be nice to not have to need Jetty to run my servlet. As such I propose adding an if statement/donf setting at FSNamesystem:171 as such         
> if(conf.getBoolean("dfs.info.active",true)){
>             this.infoPort = conf.getInt("dfs.info.port", 50070);
>             this.infoServer = new StatusHttpServer("dfs", infoPort, false);
>             this.infoServer.start();
> }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Sat Jul  8 07:51:23 2006
Return-Path: 
 <hadoop-dev-return-2446-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 81675 invoked from network); 8 Jul 2006 07:51:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jul 2006 07:51:23 -0000
Received: (qmail 8464 invoked by uid 500); 8 Jul 2006 07:51:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 8439 invoked by uid 500); 8 Jul 2006 07:51:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 8430 invoked by uid 99); 8 Jul 2006 07:51:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jul 2006 00:51:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jul 2006 00:51:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 21D7F410460
	for <hadoop-dev@lucene.apache.org>; Sat,  8 Jul 2006 07:49:31 +0000 (GMT)
Message-ID: <27458872.1152344971134.JavaMail.jira@brutus>
Date: Sat, 8 Jul 2006 07:49:31 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-302) class Text (replacement for class
 UTF8) was: HADOOP-136
In-Reply-To: <26017675.1150245149961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-302?page=comments#action_12419845 ] 

Doug Cutting commented on HADOOP-302:
-------------------------------------

I think we should use this opportunity to switch to standard UTF-8 for persistent data.  Optimized code should try to avoid conversion of these to Java strings.  For example, comparision can be done on the binary form (since this yeilds the same results as lexicographic unicode comparisons).

> class Text (replacement for class UTF8) was: HADOOP-136
> -------------------------------------------------------
>
>          Key: HADOOP-302
>          URL: http://issues.apache.org/jira/browse/HADOOP-302
>      Project: Hadoop
>         Type: Improvement

>   Components: io
>     Reporter: Michel Tourn
>     Assignee: Hairong Kuang

>
> Just to verify, which length-encoding scheme are we using for class Text (aka LargeUTF8) 
> a) The "UTF-8/Lucene" scheme? (highest bit of each byte is an extension bit, which I think is what Doug is describing in his last comment) or 
> b) the record-IO scheme in o.a.h.record.Utils.java:readInt 
> Either way, note that: 
> 1. UTF8.java and its successor Text.java need to read the length in two ways: 
>   1a. consume 1+ bytes from a DataInput and 
>   1b. parse the length within a byte array at a given offset 
> (1.b is used for the "WritableComparator optimized for UTF8 keys" ). 
> o.a.h.record.Utils only supports the DataInput mode. 
> It is not clear to me what is the best way to extend this Utils code when you need to support both reading modes 
> 2 Methods like UTF8's WritableComparator are to be low overhead, in partic. there should be no Object allocation. 
> For the byte array case, the varlen-reader utility needs to be extended to return both: 
>  the decoded length and the length of the encoded length. 
>  (so that the caller can do offset += encodedlength) 
>     
> 3. A String length does not need (small) negative integers. 
> 4. One advantage of a) is that it is standard (or at least well-known and natural) and there are no magic constants (like -120, -121 -124) 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Sat Jul  8 18:54:24 2006
Return-Path: 
 <hadoop-dev-return-2447-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 4676 invoked from network); 8 Jul 2006 18:54:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jul 2006 18:54:24 -0000
Received: (qmail 10010 invoked by uid 500); 8 Jul 2006 18:54:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9976 invoked by uid 500); 8 Jul 2006 18:54:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9967 invoked by uid 99); 8 Jul 2006 18:54:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jul 2006 11:54:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jul 2006 11:54:23 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 256144104CA
	for <hadoop-dev@lucene.apache.org>; Sat,  8 Jul 2006 18:52:31 +0000 (GMT)
Message-ID: <17013372.1152384751150.JavaMail.jira@brutus>
Date: Sat, 8 Jul 2006 18:52:31 +0000 (GMT+00:00)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-302) class Text (replacement for class
 UTF8) was: HADOOP-136
In-Reply-To: <26017675.1150245149961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-302?page=comments#action_12419872 ] 

eric baldeschwieler commented on HADOOP-302:
--------------------------------------------

+1 on doug's suggestion.  Let's use real UTF8.  Then we can interoperate with more things.

Agreed that we need to use one of the existing variable length encodings.   Inventing another would be counter productive.  My preference would be to use the recordio scheme, since it is already in hadoop.  If we choose to import the lucene version, we should consider using it for recordio too, easy to change now, since it is still new.


> class Text (replacement for class UTF8) was: HADOOP-136
> -------------------------------------------------------
>
>          Key: HADOOP-302
>          URL: http://issues.apache.org/jira/browse/HADOOP-302
>      Project: Hadoop
>         Type: Improvement

>   Components: io
>     Reporter: Michel Tourn
>     Assignee: Hairong Kuang

>
> Just to verify, which length-encoding scheme are we using for class Text (aka LargeUTF8) 
> a) The "UTF-8/Lucene" scheme? (highest bit of each byte is an extension bit, which I think is what Doug is describing in his last comment) or 
> b) the record-IO scheme in o.a.h.record.Utils.java:readInt 
> Either way, note that: 
> 1. UTF8.java and its successor Text.java need to read the length in two ways: 
>   1a. consume 1+ bytes from a DataInput and 
>   1b. parse the length within a byte array at a given offset 
> (1.b is used for the "WritableComparator optimized for UTF8 keys" ). 
> o.a.h.record.Utils only supports the DataInput mode. 
> It is not clear to me what is the best way to extend this Utils code when you need to support both reading modes 
> 2 Methods like UTF8's WritableComparator are to be low overhead, in partic. there should be no Object allocation. 
> For the byte array case, the varlen-reader utility needs to be extended to return both: 
>  the decoded length and the length of the encoded length. 
>  (so that the caller can do offset += encodedlength) 
>     
> 3. A String length does not need (small) negative integers. 
> 4. One advantage of a) is that it is standard (or at least well-known and natural) and there are no magic constants (like -120, -121 -124) 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Sun Jul  9 06:34:36 2006
Return-Path: 
 <hadoop-dev-return-2448-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 39080 invoked from network); 9 Jul 2006 06:34:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jul 2006 06:34:36 -0000
Received: (qmail 47284 invoked by uid 500); 9 Jul 2006 06:34:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47250 invoked by uid 500); 9 Jul 2006 06:34:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47240 invoked by uid 99); 9 Jul 2006 06:34:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jul 2006 23:34:35 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.126.228.149] (HELO rsmtp1.corp.yahoo.com)
 (207.126.228.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jul 2006 23:34:34 -0700
Received: from [10.0.1.2] ([172.21.179.131])
	(authenticated bits=0)
	by rsmtp1.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k696Y9aK043554
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Sat, 8 Jul 2006 23:34:09 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=b6tGT5TrC89Ft/z3BsvlRq1h/H2nhmKFlbRyEVSzXo/p7RonV9YEk0JTOS58j0Nd
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <44AEB6B8.9030000@yahoo-inc.com>
References: <44A5C920.5050808@yahoo-inc.com>
	 <e1d10fc00607061202j7ee2f796o87f667c835509749@mail.gmail.com>
	 <9DC52EE0-B405-4B34-A420-7A7BBF9EF548@yahoo-inc.com>
	 <e1d10fc00607061356h4818e9c6j2966ec2c6ab02482@mail.gmail.com>
	 <44AE0D76.1020905@yahoo-inc.com>
 <e1d10fc00607070851n7e921bcdq9618b250a498b690@mail.gmail.com>
 <44AEB6B8.9030000@yahoo-inc.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <407BF40F-11EC-4DCC-AA72-462BFD78B628@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Eric Baldeschwieler <eric14@yahoo-inc.com>
Subject: Re: Hadoop Distributed File System requirements on Wiki
Date: Sat, 8 Jul 2006 23:34:03 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I think we need to have task(s) on the list detailing upgrades.
Also process around releasing filesystem changes that change durable  
data.
And testing...

On Jul 7, 2006, at 12:32 PM, Konstantin Shvachko wrote:

> Paul Sutter wrote:
>
>> On 7/7/06, Konstantin Shvachko <shv@yahoo-inc.com> wrote:
>>
>>> > *Recoverability and Availability Goals*
>>> >
>>> > You might want to consider adding recoverability and  
>>> availability goals.
>>>
>>> This is an interesting observation. Ideally, we would like to  
>>> save and
>>> replicate
>>> fs image file as soon as the edits file reaches a specific size,  
>>> and we
>>> would like
>>> to make edits file updates transactional, with the file system  
>>> locked
>>> for updates
>>> during the transaction. This would be the zero recoverability  
>>> goal in
>>> your terms.
>>> Are we willing to weaken this requirement in favor of the  
>>> performance?
>>
>> Actually its OK for me if we lose even an hour of data on a namenode
>> crash, since I can just resubmit the recent jobs. Less loss is  
>> better,
>> but my suggestion would be to favor simplicity over absolute recovery
>> if thats a tradeoff. Others might feel differently about acceptable
>> levels of data loss.
>
> I agree, simplicity is also very important.
>
>>> > Availability goals are probably less stringent than for most  
>>> storage
>>> > systems
>>> > (dare I say that a few hours downtime is probably OK) Adding these
>>> > goals to
>>> > the document could be valuable for consensus and prioritization.
>>>
>>> If I understood you correctly, this goal is more related to a  
>>> specific
>>> installation of
>>> the system rather than to the system itself as a software product.
>>> Or do you mean that the total time spent by the system on self- 
>>> maintenance
>>> procedures like backups and checkpointing should not exceed 2  
>>> hours a day?
>>> In any case, I agree, high availability should be mentioned,  
>>> probably in the
>>> "Feature requirements" section.
>>
>> Its about features. Is namenode failover automatic or manual? If its
>> manual, it takes time. And it should definitely be manual for now.
>> Seamless namenode failover done right is a lot of work, and
>> unnecessary.
>>
>> With manual failover, what is the downtime when a namenode fails?
>> Well, I imagine that you'd want to take everything down, bring the
>> filesystem up in safe mode (nice feature!) on the new namenode,  
>> and do
>> some kind of fscheck. And then, when you're comfortable that
>> everything is copacetic, all your files are present, and that the
>> filesystem wont do a radical dereplication of every block when you
>> make it writable, you make it writable. (In fact, the secondary
>> namenode might always come up in safe mode until manually changed).
>>
>> How long does this take? Well, during this time the system is
>> unavailable. And if it fails at 2AM, you're probably not back up
>> before 10AM.
>>
>> But thats OK. Better to be down for a few hours (manual failover)  
>> than
>> to have a complex system likely to break (seamless automatic
>> failover).
>
> That's a good point. We should probably add a task to define/describe
> manual failover procedures and to evaluate the availability goal  
> that we
> can reasonably guarantee.
>
>>> >> > *Backup Scheme*
>>> >> > **
>>> >> > We might want to start discussion of a backup scheme for HDFS,
>>> >> > especially
>>> >> > given all the courageous rewriting and feature-addition  
>>> likely to
>>> >> > occur.
>>> >>...
>>> >
>>> > But as for covering my fears, I'll feel safer with key data  
>>> backed up
>>> > in a filesystem that is not DFS, as pedestrian as that sounds. :)
>>>
>>> Frankly speaking I've never thought about a backup of a 10 PB  
>>> storage
>>> system. How much space will that require? Isn't it easier just to  
>>> increase
>>> the replication factor? Just a thought...
>>
>> >> > **
>>
>> Increasing replication doesnt protect me against a filesystem bug.
>>
>> I'm a nervous nelly on this one: file system revisions do scare me,
>> and I dont have a 10PB system. Lets say I have a 100TB system, and
>> that to get back into production I need only restore 5TB worth of
>> critical files. Then once I'm back in production I can gradually
>> restore the next 25TB and regenerate the rest.
>>
>> Its feasible and probably prudent. Its not that Im expecting data  
>> loss
>> bugs in  new code. My concern is less about the likelihood of the
>> problem, and more about the severity of the problem.
>>
>> To back up a 10PB system, you would want to back it up to a second
>> 10PB system located on an opposite coast. In fact if this system is
>> important to your business, you must do this. And then there is the
>> question, do you stagger software updates on these two systems?
>> Probably.
>>
>> You might want to find someone from EMC or Netapp, and get their
>> feedback on how software changes, QA, and beta testing is handled
>> (including timelines). Storage systems are really a risky type of  
>> code
>> to modify, for lots of reasons more apparent to the downstream
>> consumers than to developers. :)
>
> I guess if we want to separate the backup from the original storage
> on the hardware level we have two options
> a) mirror data to another dfs cluster (earlier version, opposite cost)
> b) copy critical data to a different (local) fs
> If only 5% of the whole data set is critical you might want to go  
> with (b).
> This can be a separate (dfs based) application or an extension to dfs.
> If ~100% is critical then (a) is the only way.
> On a related issue, do we want to add the upgrade procedures task  
> to the list?
>
> Thanks,
> Konstantin


From MAILER-DAEMON Mon Jul 10 11:24:27 2006
Return-Path: 
 <hadoop-dev-return-2449-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34975 invoked from network); 10 Jul 2006 11:24:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jul 2006 11:24:27 -0000
Received: (qmail 5711 invoked by uid 500); 10 Jul 2006 11:24:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 5553 invoked by uid 500); 10 Jul 2006 11:24:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 5544 invoked by uid 99); 10 Jul 2006 11:24:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 04:24:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 04:24:26 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8C7E7410470
	for <hadoop-dev@lucene.apache.org>; Mon, 10 Jul 2006 11:22:31 +0000 (GMT)
Message-ID: <15431222.1152530551572.JavaMail.jira@brutus>
Date: Mon, 10 Jul 2006 11:22:31 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-313) A stand alone driver for individual
 tasks
In-Reply-To: <10995504.1150932689891.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-313?page=comments#action_12420028 ] 

Doug Cutting commented on HADOOP-313:
-------------------------------------

This looks good, except I think you forgot to add IsolationRunner.java.

> A stand alone driver for individual tasks
> -----------------------------------------
>
>          Key: HADOOP-313
>          URL: http://issues.apache.org/jira/browse/HADOOP-313
>      Project: Hadoop
>         Type: Bug

>     Reporter: Michel Tourn
>     Assignee: Michel Tourn
>  Attachments: sareduce.patch, stand-alone-task.patch
>
> This is a tool to reproduce problems and to run unit tests involving either a map or reduce task.
> You just give it a reduce directory on the command line.
> Usage: java org.apache.hadoop.mapred.StandaloneReduceTask <taskdir> [<limitmaps>]
> taskdir name encodes: task_<jobid>_r_<partition>_<attempt>
> taskdir contains job.xml and one or more input files named: map_<dddd>.out
> You should run with the same -Xmx option as the TaskTracker child JVM

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jul 10 11:30:27 2006
Return-Path: 
 <hadoop-dev-return-2450-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 36505 invoked from network); 10 Jul 2006 11:30:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jul 2006 11:30:27 -0000
Received: (qmail 9745 invoked by uid 500); 10 Jul 2006 11:30:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9722 invoked by uid 500); 10 Jul 2006 11:30:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9713 invoked by uid 99); 10 Jul 2006 11:30:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 04:30:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 04:30:25 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C45A1410471
	for <hadoop-dev@lucene.apache.org>; Mon, 10 Jul 2006 11:28:30 +0000 (GMT)
Message-ID: <5086647.1152530910801.JavaMail.jira@brutus>
Date: Mon, 10 Jul 2006 11:28:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-339) making improvements to the
 jobclients to get information on currenlyl running jobs and the jobqueue
In-Reply-To: <17736367.1151710709867.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-339?page=comments#action_12420031 ] 

Doug Cutting commented on HADOOP-339:
-------------------------------------

This looks good to me, except the new JobSubmissionProtocol method is missing javadoc.  Also, if we make JobStatus public, we should probably improve its javadoc too.

> making improvements to the jobclients to get information on currenlyl running jobs and the jobqueue
> ---------------------------------------------------------------------------------------------------
>
>          Key: HADOOP-339
>          URL: http://issues.apache.org/jira/browse/HADOOP-339
>      Project: Hadoop
>         Type: New Feature

>     Versions: 0.5.0
>     Reporter: Mahadev konar
>     Assignee: Mahadev konar
>     Priority: Minor
>  Attachments: extension.patch
>
> adding a few methods to the joblcient and jobsubmission protocol to support queries to the jobtracker for currently running jobs

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jul 10 11:37:26 2006
Return-Path: 
 <hadoop-dev-return-2451-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 39189 invoked from network); 10 Jul 2006 11:37:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jul 2006 11:37:26 -0000
Received: (qmail 18871 invoked by uid 500); 10 Jul 2006 11:37:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 18721 invoked by uid 500); 10 Jul 2006 11:37:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 18711 invoked by uid 99); 10 Jul 2006 11:37:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 04:37:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 04:37:25 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A50D641046E
	for <hadoop-dev@lucene.apache.org>; Mon, 10 Jul 2006 11:35:30 +0000 (GMT)
Message-ID: <21144319.1152531330673.JavaMail.jira@brutus>
Date: Mon, 10 Jul 2006 11:35:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-341) Enhance distcp to handle *http* as a
 'source protocol'.
In-Reply-To: <18620957.1151927429856.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-341?page=comments#action_12420032 ] 

Doug Cutting commented on HADOOP-341:
-------------------------------------

The TestCopyFiles unit test fails after I apply this patch.

> Enhance distcp to handle *http* as a 'source protocol'.
> -------------------------------------------------------
>
>          Key: HADOOP-341
>          URL: http://issues.apache.org/jira/browse/HADOOP-341
>      Project: Hadoop
>         Type: Improvement

>   Components: util
>     Reporter: Arun C Murthy
>  Attachments: distcp.patch
>
> Requirements:
>   Presently distcp recursively copies a directory from one dfs to another i.e. both source and destination of of the *dfs* protocol.
>   Enhance it to handle *http* as the source protocol i.e. support copying files from arbitrary http-based sources into the dfs.
> Design:
>   
>   Follow distcp's current design: one map task per file which needs to be copied.
>   Caveat: distcp handles *recursive* copying by listing sub-directories; this is not as feasible with a http-based source since things like 'fancy-indexing' might not be enabled on the web-server (for all sub-locations recursively too), and even if it is enabled it will mean tedious parsing of the html served to glean the sub-directories etc. Hence the idea is to support an input file (via a -f option) which contains a list of the http-based urls which represent multiple source files.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jul 10 15:55:34 2006
Return-Path: 
 <hadoop-dev-return-2452-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51633 invoked from network); 10 Jul 2006 15:55:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jul 2006 15:55:34 -0000
Received: (qmail 91832 invoked by uid 500); 10 Jul 2006 15:55:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 91683 invoked by uid 500); 10 Jul 2006 15:55:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 91664 invoked by uid 99); 10 Jul 2006 15:55:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 08:55:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 08:55:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E8A6C410483
	for <hadoop-dev@lucene.apache.org>; Mon, 10 Jul 2006 15:53:29 +0000 (GMT)
Message-ID: <20670929.1152546809950.JavaMail.jira@brutus>
Date: Mon, 10 Jul 2006 15:53:29 +0000 (GMT+00:00)
From: =?utf-8?Q?Fr=C3=A9d=C3=A9ric_Bertin_=28JIRA=29?= <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-358) NPE in Path.equals
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

NPE in Path.equals
------------------

         Key: HADOOP-358
         URL: http://issues.apache.org/jira/browse/HADOOP-358
     Project: Hadoop
        Type: Bug

  Components: fs =20
    Versions: 0.4.0   =20
    Reporter: Fr=C3=A9d=C3=A9ric Bertin
 Attachments: fixPathEquals.patch

An NPE is raised in Path.equals when testing the method with two unequal pa=
thes and with the first one having no drive.

This is due to operator precedence: && has a higher priority level than ?:

See http://java.sun.com/docs/books/tutorial/java/nutsandbolts/expressions.h=
tml

See attached patch (just added some parenthesis and a testcase).

--=20
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jul 10 15:55:35 2006
Return-Path: 
 <hadoop-dev-return-2453-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51667 invoked from network); 10 Jul 2006 15:55:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jul 2006 15:55:35 -0000
Received: (qmail 92015 invoked by uid 500); 10 Jul 2006 15:55:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 91859 invoked by uid 500); 10 Jul 2006 15:55:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 91850 invoked by uid 99); 10 Jul 2006 15:55:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 08:55:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 08:55:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DDC53410485
	for <hadoop-dev@lucene.apache.org>; Mon, 10 Jul 2006 15:53:30 +0000 (GMT)
Message-ID: <15406345.1152546810905.JavaMail.jira@brutus>
Date: Mon, 10 Jul 2006 15:53:30 +0000 (GMT+00:00)
From: =?utf-8?Q?Fr=C3=A9d=C3=A9ric_Bertin_=28JIRA=29?= <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-358) NPE in Path.equals
In-Reply-To: <20670929.1152546809950.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-358?page=3Dall ]

Fr=C3=A9d=C3=A9ric Bertin updated HADOOP-358:
-----------------------------------

    Attachment: fixPathEquals.patch

> NPE in Path.equals
> ------------------
>
>          Key: HADOOP-358
>          URL: http://issues.apache.org/jira/browse/HADOOP-358
>      Project: Hadoop
>         Type: Bug

>   Components: fs
>     Versions: 0.4.0
>     Reporter: Fr=C3=A9d=C3=A9ric Bertin
>  Attachments: fixPathEquals.patch
>
> An NPE is raised in Path.equals when testing the method with two unequal =
pathes and with the first one having no drive.
> This is due to operator precedence: && has a higher priority level than ?=
:
> See http://java.sun.com/docs/books/tutorial/java/nutsandbolts/expressions=
.html
> See attached patch (just added some parenthesis and a testcase).

--=20
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jul 10 17:15:58 2006
Return-Path: 
 <hadoop-dev-return-2454-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 82247 invoked from network); 10 Jul 2006 17:15:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jul 2006 17:15:58 -0000
Received: (qmail 82836 invoked by uid 500); 10 Jul 2006 17:15:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 82805 invoked by uid 500); 10 Jul 2006 17:15:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 82796 invoked by uid 99); 10 Jul 2006 17:15:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 10:15:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 10:15:55 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B5A25410485
	for <hadoop-dev@lucene.apache.org>; Mon, 10 Jul 2006 17:13:31 +0000 (GMT)
Message-ID: <15513766.1152551611741.JavaMail.jira@brutus>
Date: Mon, 10 Jul 2006 17:13:31 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-313) A stand alone driver for individual
 tasks
In-Reply-To: <10995504.1150932689891.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-313?page=all ]

Owen O'Malley updated HADOOP-313:
---------------------------------

    Attachment: stand-alone-task.patch

Here is the updated patch that includes the IsolationRunner.

> A stand alone driver for individual tasks
> -----------------------------------------
>
>          Key: HADOOP-313
>          URL: http://issues.apache.org/jira/browse/HADOOP-313
>      Project: Hadoop
>         Type: Bug

>     Reporter: Michel Tourn
>     Assignee: Michel Tourn
>  Attachments: sareduce.patch, stand-alone-task.patch, stand-alone-task.patch
>
> This is a tool to reproduce problems and to run unit tests involving either a map or reduce task.
> You just give it a reduce directory on the command line.
> Usage: java org.apache.hadoop.mapred.StandaloneReduceTask <taskdir> [<limitmaps>]
> taskdir name encodes: task_<jobid>_r_<partition>_<attempt>
> taskdir contains job.xml and one or more input files named: map_<dddd>.out
> You should run with the same -Xmx option as the TaskTracker child JVM

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jul 10 17:52:17 2006
Return-Path: 
 <hadoop-dev-return-2455-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 97118 invoked from network); 10 Jul 2006 17:52:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jul 2006 17:52:17 -0000
Received: (qmail 43171 invoked by uid 500); 10 Jul 2006 17:52:16 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 43154 invoked by uid 500); 10 Jul 2006 17:52:16 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 43145 invoked by uid 99); 10 Jul 2006 17:52:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 10:52:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 10:52:13 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7FE60410488
	for <hadoop-dev@lucene.apache.org>; Mon, 10 Jul 2006 17:49:32 +0000 (GMT)
Message-ID: <10606104.1152553772521.JavaMail.jira@brutus>
Date: Mon, 10 Jul 2006 17:49:32 +0000 (GMT+00:00)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-327) ToolBase calls System.exit
In-Reply-To: <20517100.1151388930799.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-327?page=all ]

Hairong Kuang updated HADOOP-327:
---------------------------------

    Attachment: exit.patch

The patch removes System.exit from ToolBase and adjusts the interface of method "run" to throw IOException.

> ToolBase calls System.exit
> --------------------------
>
>          Key: HADOOP-327
>          URL: http://issues.apache.org/jira/browse/HADOOP-327
>      Project: Hadoop
>         Type: Bug

>   Components: util
>     Versions: 0.4.0
>     Reporter: Owen O'Malley
>     Assignee: Hairong Kuang
>      Fix For: 0.5.0
>  Attachments: exit.patch
>
> The new ToolBase class calls System.exit when the main routine finishes. That will break if the application uses threads that need to finish before the jvm exits. The normal semantics is that the program doesn't finish execution until all of the non-daemon threads exit (including the main one) and System.exit should never be called except for critical errors.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jul 10 18:03:17 2006
Return-Path: 
 <hadoop-dev-return-2456-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1181 invoked from network); 10 Jul 2006 18:03:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jul 2006 18:03:17 -0000
Received: (qmail 70282 invoked by uid 500); 10 Jul 2006 18:03:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70132 invoked by uid 500); 10 Jul 2006 18:03:16 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 70123 invoked by uid 99); 10 Jul 2006 18:03:16 -0000
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 11:03:16 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1C69F41048A
	for <hadoop-dev@lucene.apache.org>; Mon, 10 Jul 2006 18:00:31 +0000 (GMT)
Message-ID: <27708524.1152554431113.JavaMail.jira@brutus>
Date: Mon, 10 Jul 2006 18:00:31 +0000 (GMT+00:00)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-302) class Text (replacement for class
 UTF8) was: HADOOP-136
In-Reply-To: <26017675.1150245149961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-302?page=comments#action_12420135 ] 

Hairong Kuang commented on HADOOP-302:
--------------------------------------

If we use standard UTF8, comparison on the binary form does not produce the same results as the string comparison. See the following example provided by Addison:

> Consider the sequence U+D800 U+DC00 (a surrogate pair). In String comparison, this compares as less than U+E000 (since 
> D800 < E000). In UTF-8 byte comparisons it is greater than E000 (because the lead byte of the Unicode character U+10000 
> encoded by the surrogate pair is 0xF0, which is bigger than lead byte of U+E000, which is 0xEE). 

Is it an issue? 


> class Text (replacement for class UTF8) was: HADOOP-136
> -------------------------------------------------------
>
>          Key: HADOOP-302
>          URL: http://issues.apache.org/jira/browse/HADOOP-302
>      Project: Hadoop
>         Type: Improvement

>   Components: io
>     Reporter: Michel Tourn
>     Assignee: Hairong Kuang

>
> Just to verify, which length-encoding scheme are we using for class Text (aka LargeUTF8) 
> a) The "UTF-8/Lucene" scheme? (highest bit of each byte is an extension bit, which I think is what Doug is describing in his last comment) or 
> b) the record-IO scheme in o.a.h.record.Utils.java:readInt 
> Either way, note that: 
> 1. UTF8.java and its successor Text.java need to read the length in two ways: 
>   1a. consume 1+ bytes from a DataInput and 
>   1b. parse the length within a byte array at a given offset 
> (1.b is used for the "WritableComparator optimized for UTF8 keys" ). 
> o.a.h.record.Utils only supports the DataInput mode. 
> It is not clear to me what is the best way to extend this Utils code when you need to support both reading modes 
> 2 Methods like UTF8's WritableComparator are to be low overhead, in partic. there should be no Object allocation. 
> For the byte array case, the varlen-reader utility needs to be extended to return both: 
>  the decoded length and the length of the encoded length. 
>  (so that the caller can do offset += encodedlength) 
>     
> 3. A String length does not need (small) negative integers. 
> 4. One advantage of a) is that it is standard (or at least well-known and natural) and there are no magic constants (like -120, -121 -124) 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jul 10 19:00:28 2006
Return-Path: 
 <hadoop-dev-return-2457-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 24474 invoked from network); 10 Jul 2006 19:00:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jul 2006 19:00:28 -0000
Received: (qmail 76594 invoked by uid 500); 10 Jul 2006 19:00:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 76572 invoked by uid 500); 10 Jul 2006 19:00:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 76563 invoked by uid 99); 10 Jul 2006 19:00:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 12:00:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 12:00:26 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2986941048D
	for <hadoop-dev@lucene.apache.org>; Mon, 10 Jul 2006 18:58:31 +0000 (GMT)
Message-ID: <11937808.1152557911165.JavaMail.jira@brutus>
Date: Mon, 10 Jul 2006 18:58:31 +0000 (GMT+00:00)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-302) class Text (replacement for class
 UTF8) was: HADOOP-136
In-Reply-To: <26017675.1150245149961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-302?page=comments#action_12420149 ] 

Hairong Kuang commented on HADOOP-302:
--------------------------------------

If we use the recordio scheme, we need to extend it so that it can read a variable-length integer from a byte array. This is for the support of byte-wise comparison.

> class Text (replacement for class UTF8) was: HADOOP-136
> -------------------------------------------------------
>
>          Key: HADOOP-302
>          URL: http://issues.apache.org/jira/browse/HADOOP-302
>      Project: Hadoop
>         Type: Improvement

>   Components: io
>     Reporter: Michel Tourn
>     Assignee: Hairong Kuang

>
> Just to verify, which length-encoding scheme are we using for class Text (aka LargeUTF8) 
> a) The "UTF-8/Lucene" scheme? (highest bit of each byte is an extension bit, which I think is what Doug is describing in his last comment) or 
> b) the record-IO scheme in o.a.h.record.Utils.java:readInt 
> Either way, note that: 
> 1. UTF8.java and its successor Text.java need to read the length in two ways: 
>   1a. consume 1+ bytes from a DataInput and 
>   1b. parse the length within a byte array at a given offset 
> (1.b is used for the "WritableComparator optimized for UTF8 keys" ). 
> o.a.h.record.Utils only supports the DataInput mode. 
> It is not clear to me what is the best way to extend this Utils code when you need to support both reading modes 
> 2 Methods like UTF8's WritableComparator are to be low overhead, in partic. there should be no Object allocation. 
> For the byte array case, the varlen-reader utility needs to be extended to return both: 
>  the decoded length and the length of the encoded length. 
>  (so that the caller can do offset += encodedlength) 
>     
> 3. A String length does not need (small) negative integers. 
> 4. One advantage of a) is that it is standard (or at least well-known and natural) and there are no magic constants (like -120, -121 -124) 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jul 10 19:13:27 2006
Return-Path: 
 <hadoop-dev-return-2458-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 29664 invoked from network); 10 Jul 2006 19:13:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jul 2006 19:13:27 -0000
Received: (qmail 5107 invoked by uid 500); 10 Jul 2006 19:13:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 4952 invoked by uid 500); 10 Jul 2006 19:13:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 4938 invoked by uid 99); 10 Jul 2006 19:13:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 12:13:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 12:13:26 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AFBF5410489
	for <hadoop-dev@lucene.apache.org>; Mon, 10 Jul 2006 19:11:30 +0000 (GMT)
Message-ID: <21903246.1152558690716.JavaMail.jira@brutus>
Date: Mon, 10 Jul 2006 19:11:30 +0000 (GMT+00:00)
From: "Anonymous (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-339) making improvements to the jobclients
 to get information on currenlyl running jobs and the jobqueue
In-Reply-To: <17736367.1151710709867.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-339?page=all ]

 updated HADOOP-339:
--------------------

    Attachment: extension.patch

> making improvements to the jobclients to get information on currenlyl running jobs and the jobqueue
> ---------------------------------------------------------------------------------------------------
>
>          Key: HADOOP-339
>          URL: http://issues.apache.org/jira/browse/HADOOP-339
>      Project: Hadoop
>         Type: New Feature

>     Versions: 0.5.0
>     Reporter: Mahadev konar
>     Assignee: Mahadev konar
>     Priority: Minor
>  Attachments: extension.patch, extension.patch
>
> adding a few methods to the joblcient and jobsubmission protocol to support queries to the jobtracker for currently running jobs

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jul 10 19:13:28 2006
Return-Path: 
 <hadoop-dev-return-2459-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 29702 invoked from network); 10 Jul 2006 19:13:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jul 2006 19:13:28 -0000
Received: (qmail 5300 invoked by uid 500); 10 Jul 2006 19:13:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 5135 invoked by uid 500); 10 Jul 2006 19:13:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 5126 invoked by uid 99); 10 Jul 2006 19:13:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 12:13:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 12:13:26 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9BD44410486
	for <hadoop-dev@lucene.apache.org>; Mon, 10 Jul 2006 19:11:31 +0000 (GMT)
Message-ID: <21077579.1152558691635.JavaMail.jira@brutus>
Date: Mon, 10 Jul 2006 19:11:31 +0000 (GMT+00:00)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-339) making improvements to the jobclients
 to get information on currenlyl running jobs and the jobqueue
In-Reply-To: <17736367.1151710709867.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-339?page=all ]

Mahadev konar updated HADOOP-339:
---------------------------------

    Attachment:     (was: extension.patch)

> making improvements to the jobclients to get information on currenlyl running jobs and the jobqueue
> ---------------------------------------------------------------------------------------------------
>
>          Key: HADOOP-339
>          URL: http://issues.apache.org/jira/browse/HADOOP-339
>      Project: Hadoop
>         Type: New Feature

>     Versions: 0.5.0
>     Reporter: Mahadev konar
>     Assignee: Mahadev konar
>     Priority: Minor
>  Attachments: extension.patch, extension.patch
>
> adding a few methods to the joblcient and jobsubmission protocol to support queries to the jobtracker for currently running jobs

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jul 10 19:13:29 2006
Return-Path: 
 <hadoop-dev-return-2460-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 29748 invoked from network); 10 Jul 2006 19:13:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jul 2006 19:13:29 -0000
Received: (qmail 5388 invoked by uid 500); 10 Jul 2006 19:13:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 5338 invoked by uid 500); 10 Jul 2006 19:13:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 5329 invoked by uid 99); 10 Jul 2006 19:13:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 12:13:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 12:13:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0ECB941048D
	for <hadoop-dev@lucene.apache.org>; Mon, 10 Jul 2006 19:11:33 +0000 (GMT)
Message-ID: <32575902.1152558693058.JavaMail.jira@brutus>
Date: Mon, 10 Jul 2006 19:11:33 +0000 (GMT+00:00)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-302) class Text (replacement for class
 UTF8) was: HADOOP-136
In-Reply-To: <26017675.1150245149961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-302?page=comments#action_12420152 ] 

Milind Bhandarkar commented on HADOOP-302:
------------------------------------------

There is support for negative numbers as well in recordio scheme, which is not needed here, thus allowing us to save a few more bits.

> class Text (replacement for class UTF8) was: HADOOP-136
> -------------------------------------------------------
>
>          Key: HADOOP-302
>          URL: http://issues.apache.org/jira/browse/HADOOP-302
>      Project: Hadoop
>         Type: Improvement

>   Components: io
>     Reporter: Michel Tourn
>     Assignee: Hairong Kuang

>
> Just to verify, which length-encoding scheme are we using for class Text (aka LargeUTF8) 
> a) The "UTF-8/Lucene" scheme? (highest bit of each byte is an extension bit, which I think is what Doug is describing in his last comment) or 
> b) the record-IO scheme in o.a.h.record.Utils.java:readInt 
> Either way, note that: 
> 1. UTF8.java and its successor Text.java need to read the length in two ways: 
>   1a. consume 1+ bytes from a DataInput and 
>   1b. parse the length within a byte array at a given offset 
> (1.b is used for the "WritableComparator optimized for UTF8 keys" ). 
> o.a.h.record.Utils only supports the DataInput mode. 
> It is not clear to me what is the best way to extend this Utils code when you need to support both reading modes 
> 2 Methods like UTF8's WritableComparator are to be low overhead, in partic. there should be no Object allocation. 
> For the byte array case, the varlen-reader utility needs to be extended to return both: 
>  the decoded length and the length of the encoded length. 
>  (so that the caller can do offset += encodedlength) 
>     
> 3. A String length does not need (small) negative integers. 
> 4. One advantage of a) is that it is standard (or at least well-known and natural) and there are no magic constants (like -120, -121 -124) 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Mon Jul 10 19:13:30 2006
Return-Path: 
 <hadoop-dev-return-2461-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 29785 invoked from network); 10 Jul 2006 19:13:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jul 2006 19:13:30 -0000
Received: (qmail 5556 invoked by uid 500); 10 Jul 2006 19:13:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 5522 invoked by uid 500); 10 Jul 2006 19:13:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 5513 invoked by uid 99); 10 Jul 2006 19:13:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 12:13:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 12:13:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F0D3841048F
	for <hadoop-dev@lucene.apache.org>; Mon, 10 Jul 2006 19:11:33 +0000 (GMT)
Message-ID: <6935391.1152558693983.JavaMail.jira@brutus>
Date: Mon, 10 Jul 2006 19:11:33 +0000 (GMT+00:00)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-339) making improvements to the jobclients
 to get information on currenlyl running jobs and the jobqueue
In-Reply-To: <17736367.1151710709867.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-339?page=all ]

Mahadev konar updated HADOOP-339:
---------------------------------

    Attachment: extension.patch

Here is a new patch. I added javadocs to both the JobStatus and JobSubmissionClient protocol.

> making improvements to the jobclients to get information on currenlyl running jobs and the jobqueue
> ---------------------------------------------------------------------------------------------------
>
>          Key: HADOOP-339
>          URL: http://issues.apache.org/jira/browse/HADOOP-339
>      Project: Hadoop
>         Type: New Feature

>     Versions: 0.5.0
>     Reporter: Mahadev konar
>     Assignee: Mahadev konar
>     Priority: Minor
>  Attachments: extension.patch, extension.patch
>
> adding a few methods to the joblcient and jobsubmission protocol to support queries to the jobtracker for currently running jobs

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jul 11 06:34:29 2006
Return-Path: 
 <hadoop-dev-return-2462-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 61167 invoked from network); 11 Jul 2006 06:34:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 06:34:29 -0000
Received: (qmail 38955 invoked by uid 500); 11 Jul 2006 06:34:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38762 invoked by uid 500); 11 Jul 2006 06:34:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38753 invoked by uid 99); 11 Jul 2006 06:34:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 23:34:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 23:34:27 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3F3467141E3
	for <hadoop-dev@lucene.apache.org>; Tue, 11 Jul 2006 06:32:31 +0000 (GMT)
Message-ID: <20946105.1152599551256.JavaMail.jira@brutus>
Date: Tue, 11 Jul 2006 06:32:31 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-302) class Text (replacement for class
 UTF8) was: HADOOP-136
In-Reply-To: <26017675.1150245149961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-302?page=comments#action_12420227 ] 

Doug Cutting commented on HADOOP-302:
-------------------------------------

Re String comparison: The bug here is with Java.  Since we wish to keep our persistent data structures language-independent, we should order by UTF-8, not UTF-16.

The javadoc is confusing:

http://java.sun.com/j2se/1.5.0/docs/api/java/lang/String.html#compareTo(java.lang.String)

It says it compares unicode characters, when in fact it compares UTF-16.

So any code that orders by Java String and expects things to align with the Hadoop Text class will be buggy when processing text with surrogate pairs.  We should make this clear in the javadoc.

Does this sound reasonable?

> class Text (replacement for class UTF8) was: HADOOP-136
> -------------------------------------------------------
>
>          Key: HADOOP-302
>          URL: http://issues.apache.org/jira/browse/HADOOP-302
>      Project: Hadoop
>         Type: Improvement

>   Components: io
>     Reporter: Michel Tourn
>     Assignee: Hairong Kuang

>
> Just to verify, which length-encoding scheme are we using for class Text (aka LargeUTF8) 
> a) The "UTF-8/Lucene" scheme? (highest bit of each byte is an extension bit, which I think is what Doug is describing in his last comment) or 
> b) the record-IO scheme in o.a.h.record.Utils.java:readInt 
> Either way, note that: 
> 1. UTF8.java and its successor Text.java need to read the length in two ways: 
>   1a. consume 1+ bytes from a DataInput and 
>   1b. parse the length within a byte array at a given offset 
> (1.b is used for the "WritableComparator optimized for UTF8 keys" ). 
> o.a.h.record.Utils only supports the DataInput mode. 
> It is not clear to me what is the best way to extend this Utils code when you need to support both reading modes 
> 2 Methods like UTF8's WritableComparator are to be low overhead, in partic. there should be no Object allocation. 
> For the byte array case, the varlen-reader utility needs to be extended to return both: 
>  the decoded length and the length of the encoded length. 
>  (so that the caller can do offset += encodedlength) 
>     
> 3. A String length does not need (small) negative integers. 
> 4. One advantage of a) is that it is standard (or at least well-known and natural) and there are no magic constants (like -120, -121 -124) 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jul 11 08:09:28 2006
Return-Path: 
 <hadoop-dev-return-2463-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 4154 invoked from network); 11 Jul 2006 08:09:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 08:09:28 -0000
Received: (qmail 82250 invoked by uid 500); 11 Jul 2006 08:09:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 82126 invoked by uid 500); 11 Jul 2006 08:09:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 82117 invoked by uid 99); 11 Jul 2006 08:09:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 01:09:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 01:09:26 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B80C47141E8
	for <hadoop-dev@lucene.apache.org>; Tue, 11 Jul 2006 08:07:30 +0000 (GMT)
Message-ID: <31495922.1152605250751.JavaMail.jira@brutus>
Date: Tue, 11 Jul 2006 08:07:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-352) Portability of hadoop shell scripts
 for deployment
In-Reply-To: <2256287.1152263369951.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-352?page=all ]
     
Doug Cutting resolved HADOOP-352:
---------------------------------

    Fix Version: 0.5.0
     Resolution: Fixed

I just committed this.  Thanks, Jean-Baptiste.

> Portability of hadoop shell scripts for deployment
> --------------------------------------------------
>
>          Key: HADOOP-352
>          URL: http://issues.apache.org/jira/browse/HADOOP-352
>      Project: Hadoop
>         Type: Bug

>     Versions: 0.4.0
>     Reporter: Jean-Baptiste Quenot
>      Fix For: 0.5.0
>  Attachments: hadoop-sh-patch
>
> Hadoop shell scripts are based on /bin/bash, which is a "standard" shell only on GNU/Linux.  On other Unix systems like FreeBSD however the "standard" shell is /bin/sh.  The attached patch addresses these compatiblity issues.  Note that Solaris support is not yet tested.
> Also, the best way to set the HADOOP_HOME variable upon ssh connection in a portable way is to set it in .ssh/environment.  The bash startup script ".bashrc" is not an option on systems where "bash" is not installed.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jul 11 08:18:29 2006
Return-Path: 
 <hadoop-dev-return-2464-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9072 invoked from network); 11 Jul 2006 08:18:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 08:18:29 -0000
Received: (qmail 2326 invoked by uid 500); 11 Jul 2006 08:18:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 2307 invoked by uid 500); 11 Jul 2006 08:18:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 2298 invoked by uid 99); 11 Jul 2006 08:18:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 01:18:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 01:18:27 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8D0107141ED
	for <hadoop-dev@lucene.apache.org>; Tue, 11 Jul 2006 08:16:31 +0000 (GMT)
Message-ID: <25966824.1152605791574.JavaMail.jira@brutus>
Date: Tue, 11 Jul 2006 08:16:31 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-313) A stand alone driver for individual
 tasks
In-Reply-To: <10995504.1150932689891.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-313?page=all ]
     
Doug Cutting resolved HADOOP-313:
---------------------------------

    Fix Version: 0.5.0
     Resolution: Fixed

I just committed this.  Thanks, Owen.

> A stand alone driver for individual tasks
> -----------------------------------------
>
>          Key: HADOOP-313
>          URL: http://issues.apache.org/jira/browse/HADOOP-313
>      Project: Hadoop
>         Type: Bug

>     Reporter: Michel Tourn
>     Assignee: Michel Tourn
>      Fix For: 0.5.0
>  Attachments: sareduce.patch, stand-alone-task.patch, stand-alone-task.patch
>
> This is a tool to reproduce problems and to run unit tests involving either a map or reduce task.
> You just give it a reduce directory on the command line.
> Usage: java org.apache.hadoop.mapred.StandaloneReduceTask <taskdir> [<limitmaps>]
> taskdir name encodes: task_<jobid>_r_<partition>_<attempt>
> taskdir contains job.xml and one or more input files named: map_<dddd>.out
> You should run with the same -Xmx option as the TaskTracker child JVM

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jul 11 08:44:30 2006
Return-Path: 
 <hadoop-dev-return-2465-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16809 invoked from network); 11 Jul 2006 08:44:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 08:44:30 -0000
Received: (qmail 47710 invoked by uid 500); 11 Jul 2006 08:44:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47679 invoked by uid 500); 11 Jul 2006 08:44:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47670 invoked by uid 99); 11 Jul 2006 08:44:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 01:44:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 01:44:27 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9CE1A7141E8
	for <hadoop-dev@lucene.apache.org>; Tue, 11 Jul 2006 08:42:31 +0000 (GMT)
Message-ID: <10166498.1152607351639.JavaMail.jira@brutus>
Date: Tue, 11 Jul 2006 08:42:31 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-339) making improvements to the jobclients
 to get information on currenlyl running jobs and the jobqueue
In-Reply-To: <17736367.1151710709867.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-339?page=all ]
     
Doug Cutting resolved HADOOP-339:
---------------------------------

    Fix Version: 0.5.0
     Resolution: Fixed

I just committed this.  I made a few minor changes.  I made the JobStatus setters non-public, and also removed a javadoc comment for the new method implementation on JobTracker, since the inherited javadoc from the interface seemed more informative.

> making improvements to the jobclients to get information on currenlyl running jobs and the jobqueue
> ---------------------------------------------------------------------------------------------------
>
>          Key: HADOOP-339
>          URL: http://issues.apache.org/jira/browse/HADOOP-339
>      Project: Hadoop
>         Type: New Feature

>     Versions: 0.5.0
>     Reporter: Mahadev konar
>     Assignee: Mahadev konar
>     Priority: Minor
>      Fix For: 0.5.0
>  Attachments: extension.patch, extension.patch
>
> adding a few methods to the joblcient and jobsubmission protocol to support queries to the jobtracker for currently running jobs

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jul 11 09:00:39 2006
Return-Path: 
 <hadoop-dev-return-2466-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 22092 invoked from network); 11 Jul 2006 09:00:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 09:00:39 -0000
Received: (qmail 68780 invoked by uid 500); 11 Jul 2006 09:00:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68631 invoked by uid 500); 11 Jul 2006 09:00:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68622 invoked by uid 99); 11 Jul 2006 09:00:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 02:00:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 02:00:38 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2F32A7141E3
	for <hadoop-dev@lucene.apache.org>; Tue, 11 Jul 2006 08:58:42 +0000 (GMT)
Message-ID: <1056450.1152608322155.JavaMail.jira@brutus>
Date: Tue, 11 Jul 2006 08:58:42 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-355) hadoopStreaming: fix APIs, -reduce
 NONE, StreamSequenceRecordReader
In-Reply-To: <31271975.1152309509859.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-355?page=all ]
     
Doug Cutting resolved HADOOP-355:
---------------------------------

    Fix Version: 0.5.0
     Resolution: Fixed

I just committed this.  Thanks, Michel!

> hadoopStreaming: fix APIs, -reduce NONE, StreamSequenceRecordReader
> -------------------------------------------------------------------
>
>          Key: HADOOP-355
>          URL: http://issues.apache.org/jira/browse/HADOOP-355
>      Project: Hadoop
>         Type: Improvement

>   Components: contrib/streaming
>     Reporter: Michel Tourn
>      Fix For: 0.5.0
>  Attachments: validinput.rednone.patch
>
> This patch fixes outstanding problems with streaming:
> fix APIs
> option -reduce NONE
> support StreamSequenceRecordReader as an input

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jul 11 09:21:28 2006
Return-Path: 
 <hadoop-dev-return-2467-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 28346 invoked from network); 11 Jul 2006 09:21:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 09:21:28 -0000
Received: (qmail 14389 invoked by uid 500); 11 Jul 2006 09:21:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14366 invoked by uid 500); 11 Jul 2006 09:21:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 14344 invoked by uid 99); 11 Jul 2006 09:21:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 02:21:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 02:21:27 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C6C0E7141E3
	for <hadoop-dev@lucene.apache.org>; Tue, 11 Jul 2006 09:19:30 +0000 (GMT)
Message-ID: <22046067.1152609570811.JavaMail.jira@brutus>
Date: Tue, 11 Jul 2006 09:19:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-356) Build and test hadoopStreaming
 nightly
In-Reply-To: <28376836.1152310589828.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-356?page=comments#action_12420254 ] 

Doug Cutting commented on HADOOP-356:
-------------------------------------

I think this is a good idea, but I think it should be more structured.  We should rename the "compile" and "test" targets to be "compile-core" and "test-core", then add new targets named "compile" and "test" that depend on both the "-core" targets and the "-contrib" targets.  Thus the "compile" target will compile both core and contrib code, and the "test" target will test both core and contrib code.  Does that make sense?  That's the way we've done this in Lucene and Nutch.

> Build and test hadoopStreaming nightly
> --------------------------------------
>
>          Key: HADOOP-356
>          URL: http://issues.apache.org/jira/browse/HADOOP-356
>      Project: Hadoop
>         Type: Improvement

>     Reporter: Michel Tourn
>  Attachments: nightlystreaming.patch
>
> hadoopStreaming was originally built and tested separately.
> It makes sense to keep building the hadoopStreaming code as a separate jar file:
> this is all client code that can be uploaded in the Job jar.
> this allows quick turnaround on production clusters 
> (hadoopStreaming code updates do not require to bring down the MapReduce system.
> If necessary users can use their own modified versions of the hadoopStreaming jar but still run on the production cluster.)
> On the other hand it makes sense to build this code nightly.
> Many recent changes broke either compilation or correctness.
> All the problems would have been caught if the hadoopStreaming compilation and tests were run nighlty.
> Conclusion:
> the updated top-level build.xml adds the following dependencies:
> 1. Target compile calls target compile in contrib/streaming/build.xml
> 2. Target test calls target test in contrib/streaming/build.xml

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jul 11 09:27:31 2006
Return-Path: 
 <hadoop-dev-return-2468-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31316 invoked from network); 11 Jul 2006 09:27:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 09:27:31 -0000
Received: (qmail 26900 invoked by uid 500); 11 Jul 2006 09:27:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26884 invoked by uid 500); 11 Jul 2006 09:27:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26872 invoked by uid 99); 11 Jul 2006 09:27:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 02:27:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 02:27:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 008C37141F1
	for <hadoop-dev@lucene.apache.org>; Tue, 11 Jul 2006 09:25:32 +0000 (GMT)
Message-ID: <7431575.1152609931999.JavaMail.jira@brutus>
Date: Tue, 11 Jul 2006 09:25:31 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-358) NPE in Path.equals
In-Reply-To: <20670929.1152546809950.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-358?page=3Dall ]
    =20
Doug Cutting resolved HADOOP-358:
---------------------------------

    Fix Version: 0.5.0
     Resolution: Fixed
      Assign To: Doug Cutting

I just committed this.  Thanks, Fr=C3=A9d=C3=A9ric.

> NPE in Path.equals
> ------------------
>
>          Key: HADOOP-358
>          URL: http://issues.apache.org/jira/browse/HADOOP-358
>      Project: Hadoop
>         Type: Bug

>   Components: fs
>     Versions: 0.4.0
>     Reporter: Fr=C3=A9d=C3=A9ric Bertin
>     Assignee: Doug Cutting
>      Fix For: 0.5.0
>  Attachments: fixPathEquals.patch
>
> An NPE is raised in Path.equals when testing the method with two unequal =
pathes and with the first one having no drive.
> This is due to operator precedence: && has a higher priority level than ?=
:
> See http://java.sun.com/docs/books/tutorial/java/nutsandbolts/expressions=
.html
> See attached patch (just added some parenthesis and a testcase).

--=20
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jul 11 10:53:30 2006
Return-Path: 
 <hadoop-dev-return-2469-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 66212 invoked from network); 11 Jul 2006 10:53:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 10:53:30 -0000
Received: (qmail 84162 invoked by uid 500); 11 Jul 2006 10:53:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 84134 invoked by uid 500); 11 Jul 2006 10:53:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 84125 invoked by uid 99); 11 Jul 2006 10:53:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 03:53:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 03:53:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AD7417141E8
	for <hadoop-dev@lucene.apache.org>; Tue, 11 Jul 2006 10:51:32 +0000 (GMT)
Message-ID: <31487244.1152615092706.JavaMail.jira@brutus>
Date: Tue, 11 Jul 2006 10:51:32 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-327) ToolBase calls System.exit
In-Reply-To: <20517100.1151388930799.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-327?page=comments#action_12420276 ] 

Doug Cutting commented on HADOOP-327:
-------------------------------------

I agree with removing the call to exit(), but I don't see the need to change the exception.

To my thinking, this replaces the standard main() signature:

public static void main(String[] args) throws Exception {
  ...
}

Folks frequently write main() to not throw anything, and then catch exceptions and print the stacktrace.  This just makes the code bigger, since the JVM already prints the stack trace when a main() throws an exception.  It also makes it harder to call the main() programatically (which is ocassionally useful) since you'll have no idea whether it has somehow failed.  So this is why I argue that main() routines should throw Exception, and analagously, why our replacement should do the same.  Otherwise we'll just have folks catching other exceptions and repackaging them in IOException, adding pointless code.


> ToolBase calls System.exit
> --------------------------
>
>          Key: HADOOP-327
>          URL: http://issues.apache.org/jira/browse/HADOOP-327
>      Project: Hadoop
>         Type: Bug

>   Components: util
>     Versions: 0.4.0
>     Reporter: Owen O'Malley
>     Assignee: Hairong Kuang
>      Fix For: 0.5.0
>  Attachments: exit.patch
>
> The new ToolBase class calls System.exit when the main routine finishes. That will break if the application uses threads that need to finish before the jvm exits. The normal semantics is that the program doesn't finish execution until all of the non-daemon threads exit (including the main one) and System.exit should never be called except for critical errors.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jul 11 15:38:30 2006
Return-Path: 
 <hadoop-dev-return-2470-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 15507 invoked from network); 11 Jul 2006 15:38:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 15:38:30 -0000
Received: (qmail 51863 invoked by uid 500); 11 Jul 2006 15:38:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 51812 invoked by uid 500); 11 Jul 2006 15:38:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 51803 invoked by uid 99); 11 Jul 2006 15:38:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 08:38:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 08:38:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CE89D7141E3
	for <hadoop-dev@lucene.apache.org>; Tue, 11 Jul 2006 15:36:31 +0000 (GMT)
Message-ID: <32560730.1152632191843.JavaMail.jira@brutus>
Date: Tue, 11 Jul 2006 15:36:31 +0000 (GMT+00:00)
From: "David Bowen (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-327) ToolBase calls System.exit
In-Reply-To: <20517100.1151388930799.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-327?page=comments#action_12420335 ] 

David Bowen commented on HADOOP-327:
------------------------------------


I think it is better to be as explicit as possible about which (checked) Exceptions your main() routine is not handling.  It is useful to the reader to know that the only checked exception that can be thrown is an IOException.  This doesn't require any additional code, and in any case readability is more important than saving a line or two.



> ToolBase calls System.exit
> --------------------------
>
>          Key: HADOOP-327
>          URL: http://issues.apache.org/jira/browse/HADOOP-327
>      Project: Hadoop
>         Type: Bug

>   Components: util
>     Versions: 0.4.0
>     Reporter: Owen O'Malley
>     Assignee: Hairong Kuang
>      Fix For: 0.5.0
>  Attachments: exit.patch
>
> The new ToolBase class calls System.exit when the main routine finishes. That will break if the application uses threads that need to finish before the jvm exits. The normal semantics is that the program doesn't finish execution until all of the non-daemon threads exit (including the main one) and System.exit should never be called except for critical errors.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jul 11 16:39:29 2006
Return-Path: 
 <hadoop-dev-return-2471-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37199 invoked from network); 11 Jul 2006 16:39:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 16:39:29 -0000
Received: (qmail 67984 invoked by uid 500); 11 Jul 2006 16:39:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 67959 invoked by uid 500); 11 Jul 2006 16:39:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 67950 invoked by uid 99); 11 Jul 2006 16:39:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 09:39:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 09:39:27 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 39A007141E3
	for <hadoop-dev@lucene.apache.org>; Tue, 11 Jul 2006 16:37:31 +0000 (GMT)
Message-ID: <25131776.1152635851233.JavaMail.jira@brutus>
Date: Tue, 11 Jul 2006 16:37:31 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-327) ToolBase calls System.exit
In-Reply-To: <20517100.1151388930799.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-327?page=comments#action_12420348 ] 

Doug Cutting commented on HADOOP-327:
-------------------------------------

But at issue here is not a particular main(), but an interface for main()-like methods.  So we cannot know which specific exceptions might be thrown.

> ToolBase calls System.exit
> --------------------------
>
>          Key: HADOOP-327
>          URL: http://issues.apache.org/jira/browse/HADOOP-327
>      Project: Hadoop
>         Type: Bug

>   Components: util
>     Versions: 0.4.0
>     Reporter: Owen O'Malley
>     Assignee: Hairong Kuang
>      Fix For: 0.5.0
>  Attachments: exit.patch
>
> The new ToolBase class calls System.exit when the main routine finishes. That will break if the application uses threads that need to finish before the jvm exits. The normal semantics is that the program doesn't finish execution until all of the non-daemon threads exit (including the main one) and System.exit should never be called except for critical errors.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jul 11 17:13:29 2006
Return-Path: 
 <hadoop-dev-return-2472-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50178 invoked from network); 11 Jul 2006 17:13:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 17:13:29 -0000
Received: (qmail 50905 invoked by uid 500); 11 Jul 2006 17:13:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 50881 invoked by uid 500); 11 Jul 2006 17:13:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 50872 invoked by uid 99); 11 Jul 2006 17:13:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 10:13:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 10:13:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 31A0B7141E3
	for <hadoop-dev@lucene.apache.org>; Tue, 11 Jul 2006 17:11:31 +0000 (GMT)
Message-ID: <31590283.1152637891200.JavaMail.jira@brutus>
Date: Tue, 11 Jul 2006 17:11:31 +0000 (GMT+00:00)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-302) class Text (replacement for class
 UTF8) was: HADOOP-136
In-Reply-To: <26017675.1150245149961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-302?page=comments#action_12420370 ] 

Hairong Kuang commented on HADOOP-302:
--------------------------------------

Sounds great! I believe that ordering by UTF8 is the right way to go.

> class Text (replacement for class UTF8) was: HADOOP-136
> -------------------------------------------------------
>
>          Key: HADOOP-302
>          URL: http://issues.apache.org/jira/browse/HADOOP-302
>      Project: Hadoop
>         Type: Improvement

>   Components: io
>     Reporter: Michel Tourn
>     Assignee: Hairong Kuang

>
> Just to verify, which length-encoding scheme are we using for class Text (aka LargeUTF8) 
> a) The "UTF-8/Lucene" scheme? (highest bit of each byte is an extension bit, which I think is what Doug is describing in his last comment) or 
> b) the record-IO scheme in o.a.h.record.Utils.java:readInt 
> Either way, note that: 
> 1. UTF8.java and its successor Text.java need to read the length in two ways: 
>   1a. consume 1+ bytes from a DataInput and 
>   1b. parse the length within a byte array at a given offset 
> (1.b is used for the "WritableComparator optimized for UTF8 keys" ). 
> o.a.h.record.Utils only supports the DataInput mode. 
> It is not clear to me what is the best way to extend this Utils code when you need to support both reading modes 
> 2 Methods like UTF8's WritableComparator are to be low overhead, in partic. there should be no Object allocation. 
> For the byte array case, the varlen-reader utility needs to be extended to return both: 
>  the decoded length and the length of the encoded length. 
>  (so that the caller can do offset += encodedlength) 
>     
> 3. A String length does not need (small) negative integers. 
> 4. One advantage of a) is that it is standard (or at least well-known and natural) and there are no magic constants (like -120, -121 -124) 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jul 11 17:15:29 2006
Return-Path: 
 <hadoop-dev-return-2473-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50782 invoked from network); 11 Jul 2006 17:15:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 17:15:29 -0000
Received: (qmail 59872 invoked by uid 500); 11 Jul 2006 17:15:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 59838 invoked by uid 500); 11 Jul 2006 17:15:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 59829 invoked by uid 99); 11 Jul 2006 17:15:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 10:15:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 10:15:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2BFC37141F4
	for <hadoop-dev@lucene.apache.org>; Tue, 11 Jul 2006 17:13:31 +0000 (GMT)
Message-ID: <10295222.1152638011177.JavaMail.jira@brutus>
Date: Tue, 11 Jul 2006 17:13:31 +0000 (GMT+00:00)
From: "David Bowen (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-327) ToolBase calls System.exit
In-Reply-To: <20517100.1151388930799.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-327?page=comments#action_12420372 ] 

David Bowen commented on HADOOP-327:
------------------------------------


Agreed that the interface method needs to throw Exception.  I thought that you were disagreeing with the changes to the more specific IOException in the implementing classes also.


> ToolBase calls System.exit
> --------------------------
>
>          Key: HADOOP-327
>          URL: http://issues.apache.org/jira/browse/HADOOP-327
>      Project: Hadoop
>         Type: Bug

>   Components: util
>     Versions: 0.4.0
>     Reporter: Owen O'Malley
>     Assignee: Hairong Kuang
>      Fix For: 0.5.0
>  Attachments: exit.patch
>
> The new ToolBase class calls System.exit when the main routine finishes. That will break if the application uses threads that need to finish before the jvm exits. The normal semantics is that the program doesn't finish execution until all of the non-daemon threads exit (including the main one) and System.exit should never be called except for critical errors.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jul 11 17:17:37 2006
Return-Path: 
 <hadoop-dev-return-2474-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51670 invoked from network); 11 Jul 2006 17:17:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 17:17:37 -0000
Received: (qmail 65817 invoked by uid 500); 11 Jul 2006 17:17:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 65789 invoked by uid 500); 11 Jul 2006 17:17:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 65768 invoked by uid 99); 11 Jul 2006 17:17:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 10:17:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 10:17:27 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9F1F27141E3
	for <hadoop-dev@lucene.apache.org>; Tue, 11 Jul 2006 17:15:30 +0000 (GMT)
Message-ID: <16137381.1152638130649.JavaMail.jira@brutus>
Date: Tue, 11 Jul 2006 17:15:30 +0000 (GMT+00:00)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-307) Many small jobs benchmark for
 MapReduce
In-Reply-To: <13009062.1150636529837.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-307?page=all ]

Sanjay Dahiya updated HADOOP-307:
---------------------------------

    Attachment: patch.txt

Small jobs benchmark - 

Generates input data and runs a number of small jobs repeatedly to estimate launch overhead for jobs. I am putting it in a separate directory from examples because we dont want this to be a part of hadoop distro on all nodes. Part of what we are benchmarking is transfering Mapper and Reducer jar files through HDFS. 

Quick usage instructions follows - 

Building the benchmark. 
benchmarks/build.xml depends on relative path of hadoop libs, if moving this directory, point the right HADOOP_HOME/lib in build.xml. 
to build - 
$ cd benchmarks 
$ ant

Running the benchmark
$ cd benchmarks
$ bin/run.sh

after successfully running the benchmark see logs/report.txt for consolidated output of all the runs. 

change this script to configure options. 

Configurable options are - 

-inputLines noOfLines 
  no of lines of input to generate. 

-inputType (ascending, descending, random)
  type of input to generate. 

-jar jarFilePath 
  Jar file containing Mapper and Reducer implementations in jar file. By default ant build creates MRBenchmark.jar file containing default Mapper and Reducer. 
  
-times numJobs 
No of times to run each MapReduce task, time is calculated as average of all runs. 

-workDir dfsPath 
DFS path to put output of MR tasks. 

-maps numMaps 
No of maps for wach task 

-reduces numReduces 
No of reduces for each task

-ignoreOutput
Doesn't copy the output back to local disk. Otherwise it creates the output back to a temp location on local disk. 

> Many small jobs benchmark for MapReduce
> ---------------------------------------
>
>          Key: HADOOP-307
>          URL: http://issues.apache.org/jira/browse/HADOOP-307
>      Project: Hadoop
>         Type: Task

>   Components: mapred
>     Reporter: Sanjay Dahiya
>     Priority: Minor
>  Attachments: patch.txt
>
> A benchmark that runs many small MapReduce tasks in sequence. A single map reduce implementation is used, it is invoked multiple times with input as the output from previous run. The input to first Map is a TextInputFormat ( a text file with few hundred KBs). Input records are passed to output without much processing. The idea is to benchmark the time taken by initialization of Mapper and Reducer. An initial prototyping on a single machine with 20 MR tasks in sequence took ~47 seconds per task. Looking for suggestions on what else can be included in the benchmark. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jul 11 18:42:30 2006
Return-Path: 
 <hadoop-dev-return-2475-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 89110 invoked from network); 11 Jul 2006 18:42:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 18:42:30 -0000
Received: (qmail 29454 invoked by uid 500); 11 Jul 2006 18:42:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 29301 invoked by uid 500); 11 Jul 2006 18:42:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 29291 invoked by uid 99); 11 Jul 2006 18:42:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 11:42:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 11:42:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C8C317141E3
	for <hadoop-dev@lucene.apache.org>; Tue, 11 Jul 2006 18:40:31 +0000 (GMT)
Message-ID: <4040452.1152643231819.JavaMail.jira@brutus>
Date: Tue, 11 Jul 2006 18:40:31 +0000 (GMT+00:00)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-327) ToolBase calls System.exit
In-Reply-To: <20517100.1151388930799.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-327?page=all ]

Hairong Kuang updated HADOOP-327:
---------------------------------

    Attachment: exit.patch

Here is the new patch reflecting Doug's suggestion. In addition to removing System.exit, I changed the main function of DFSShell, JobClient, and CopyFiles to throw Exception instead of IOException.

> ToolBase calls System.exit
> --------------------------
>
>          Key: HADOOP-327
>          URL: http://issues.apache.org/jira/browse/HADOOP-327
>      Project: Hadoop
>         Type: Bug

>   Components: util
>     Versions: 0.4.0
>     Reporter: Owen O'Malley
>     Assignee: Hairong Kuang
>      Fix For: 0.5.0
>  Attachments: exit.patch, exit.patch
>
> The new ToolBase class calls System.exit when the main routine finishes. That will break if the application uses threads that need to finish before the jvm exits. The normal semantics is that the program doesn't finish execution until all of the non-daemon threads exit (including the main one) and System.exit should never be called except for critical errors.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jul 11 20:55:29 2006
Return-Path: 
 <hadoop-dev-return-2476-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 63557 invoked from network); 11 Jul 2006 20:55:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 20:55:29 -0000
Received: (qmail 55614 invoked by uid 500); 11 Jul 2006 20:55:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55582 invoked by uid 500); 11 Jul 2006 20:55:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55573 invoked by uid 99); 11 Jul 2006 20:55:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 13:55:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 13:55:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 25C6D7141E3
	for <hadoop-dev@lucene.apache.org>; Tue, 11 Jul 2006 20:53:31 +0000 (GMT)
Message-ID: <5766230.1152651211151.JavaMail.jira@brutus>
Date: Tue, 11 Jul 2006 20:53:31 +0000 (GMT+00:00)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-54?page=comments#action_12420434 ] 

eric baldeschwieler commented on HADOOP-54:
-------------------------------------------

Also, we should be able to specify a custom compressor for keys or values.

> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>          Key: HADOOP-54
>          URL: http://issues.apache.org/jira/browse/HADOOP-54
>      Project: Hadoop
>         Type: Improvement

>   Components: io
>     Versions: 0.2.0
>     Reporter: Doug Cutting
>     Assignee: Michel Tourn
>      Fix For: 0.5.0

>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jul 11 22:16:29 2006
Return-Path: 
 <hadoop-dev-return-2477-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93181 invoked from network); 11 Jul 2006 22:16:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 22:16:29 -0000
Received: (qmail 35194 invoked by uid 500); 11 Jul 2006 22:16:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 35169 invoked by uid 500); 11 Jul 2006 22:16:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 35160 invoked by uid 99); 11 Jul 2006 22:16:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 15:16:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 15:16:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 225447141FA
	for <hadoop-dev@lucene.apache.org>; Tue, 11 Jul 2006 22:14:31 +0000 (GMT)
Message-ID: <9962863.1152656071137.JavaMail.jira@brutus>
Date: Tue, 11 Jul 2006 22:14:31 +0000 (GMT+00:00)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-237) Standard set of Performance Metrics
 for Hadoop
In-Reply-To: <14919853.1148078609860.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-237?page=all ]

Milind Bhandarkar updated HADOOP-237:
-------------------------------------

    Attachment: hadoop-metrics.patch

Attached a patch that uses hadoop metrics API and a properties file that defaults to null context but has examples of file and ganglia output contexts.

All metrics requested in the bug, except for output-bytes for reduce tasks have been included. The output-bytes required a change to recordwriter interface, and therefore has been postponed.

I have tested it with file and null context. Have not tested it with ganglia.

> Standard set of Performance Metrics for Hadoop
> ----------------------------------------------
>
>          Key: HADOOP-237
>          URL: http://issues.apache.org/jira/browse/HADOOP-237
>      Project: Hadoop
>         Type: Improvement

>   Components: metrics
>     Versions: 0.3.0
>  Environment: All
>     Reporter: Milind Bhandarkar
>     Assignee: Milind Bhandarkar
>  Attachments: hadoop-metrics.patch
>
> I am starting to use Hadoop's shiny new Metrics API to publish performance (and other) Metrics of running jobs and other daemons.
> Which performance metrics are people interested in seeing ? If possible, please group them according to modules, such as map-reduce, dfs, general-cluster-related etc. I will follow this process:
> 1. collect this list
> 2. assess feasibility of obtaining metric
> 3. assign context/record/metrics names
> 4. seek approval for names
> 5. instrument the code.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Tue Jul 11 22:46:29 2006
Return-Path: 
 <hadoop-dev-return-2478-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 4409 invoked from network); 11 Jul 2006 22:46:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 22:46:29 -0000
Received: (qmail 83470 invoked by uid 500); 11 Jul 2006 22:46:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 83447 invoked by uid 500); 11 Jul 2006 22:46:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 83438 invoked by uid 99); 11 Jul 2006 22:46:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 15:46:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 15:46:27 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A44467141F1
	for <hadoop-dev@lucene.apache.org>; Tue, 11 Jul 2006 22:44:30 +0000 (GMT)
Message-ID: <33073513.1152657870669.JavaMail.jira@brutus>
Date: Tue, 11 Jul 2006 22:44:30 +0000 (GMT+00:00)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-356) Build and test hadoopStreaming
 nightly
In-Reply-To: <28376836.1152310589828.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-356?page=comments#action_12420460 ] 

Michel Tourn commented on HADOOP-356:
-------------------------------------

Yes, this target separation is better.

In order to not break the build for some people:
I will need to extend and make the regression tests pure-Java, so that they work on non-Linux machines.

So I will update this patch but only after my next iteration for hadoop streaming.


> Build and test hadoopStreaming nightly
> --------------------------------------
>
>          Key: HADOOP-356
>          URL: http://issues.apache.org/jira/browse/HADOOP-356
>      Project: Hadoop
>         Type: Improvement

>     Reporter: Michel Tourn
>  Attachments: nightlystreaming.patch
>
> hadoopStreaming was originally built and tested separately.
> It makes sense to keep building the hadoopStreaming code as a separate jar file:
> this is all client code that can be uploaded in the Job jar.
> this allows quick turnaround on production clusters 
> (hadoopStreaming code updates do not require to bring down the MapReduce system.
> If necessary users can use their own modified versions of the hadoopStreaming jar but still run on the production cluster.)
> On the other hand it makes sense to build this code nightly.
> Many recent changes broke either compilation or correctness.
> All the problems would have been caught if the hadoopStreaming compilation and tests were run nighlty.
> Conclusion:
> the updated top-level build.xml adds the following dependencies:
> 1. Target compile calls target compile in contrib/streaming/build.xml
> 2. Target test calls target test in contrib/streaming/build.xml

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jul 12 03:06:31 2006
Return-Path: 
 <hadoop-dev-return-2479-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84859 invoked from network); 12 Jul 2006 03:06:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 03:06:31 -0000
Received: (qmail 52008 invoked by uid 500); 12 Jul 2006 03:06:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 51983 invoked by uid 500); 12 Jul 2006 03:06:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 51974 invoked by uid 99); 12 Jul 2006 03:06:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 20:06:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 20:06:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 938F67141E8
	for <hadoop-dev@lucene.apache.org>; Wed, 12 Jul 2006 03:04:32 +0000 (GMT)
Message-ID: <22394804.1152673472601.JavaMail.jira@brutus>
Date: Wed, 12 Jul 2006 03:04:32 +0000 (GMT+00:00)
From: "Lorenzo Thione (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-196) Fix buggy uselessness of
 Configuration( Configuration other) constructor
In-Reply-To: <32654100.1146779418355.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-196?page=comments#action_12420478 ] 

Lorenzo Thione commented on HADOOP-196:
---------------------------------------

Is there a reason why the patch was not submitted? I have encountered the same problem and patched it myself in a very similar way before finding out it had already been reported. Currently Configuration(conf) does not behave as expected.

Lorenzo Thione 
Powerset, Inc.

> Fix buggy uselessness of Configuration( Configuration other) constructor
> ------------------------------------------------------------------------
>
>          Key: HADOOP-196
>          URL: http://issues.apache.org/jira/browse/HADOOP-196
>      Project: Hadoop
>         Type: Bug

>   Components: conf
>     Reporter: alan wootton
>  Attachments: ConfigConstructorFix.patch
>
> The constructor 
> public Configuration(Configuration other) 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jul 12 03:22:33 2006
Return-Path: 
 <hadoop-dev-return-2480-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 89671 invoked from network); 12 Jul 2006 03:22:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 03:22:33 -0000
Received: (qmail 70075 invoked by uid 500); 12 Jul 2006 03:22:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70040 invoked by uid 500); 12 Jul 2006 03:22:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 70031 invoked by uid 99); 12 Jul 2006 03:22:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 20:22:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 20:22:27 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D31E57141E3
	for <hadoop-dev@lucene.apache.org>; Wed, 12 Jul 2006 03:20:29 +0000 (GMT)
Message-ID: <4993134.1152674429861.JavaMail.jira@brutus>
Date: Wed, 12 Jul 2006 03:20:29 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-359) add optional compression of map
 outputs
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

add optional compression of map outputs
---------------------------------------

         Key: HADOOP-359
         URL: http://issues.apache.org/jira/browse/HADOOP-359
     Project: Hadoop
        Type: New Feature

  Components: mapred  
    Versions: 0.4.0    
    Reporter: Owen O'Malley
 Assigned to: Owen O'Malley 
     Fix For: 0.5.0


Currently, there is no way to request that the transient data be compressed.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jul 12 03:48:29 2006
Return-Path: 
 <hadoop-dev-return-2481-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96069 invoked from network); 12 Jul 2006 03:48:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 03:48:29 -0000
Received: (qmail 20771 invoked by uid 500); 12 Jul 2006 03:48:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 20608 invoked by uid 500); 12 Jul 2006 03:48:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 20599 invoked by uid 99); 12 Jul 2006 03:48:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 20:48:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 20:48:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B4EA67141E3
	for <hadoop-dev@lucene.apache.org>; Wed, 12 Jul 2006 03:46:30 +0000 (GMT)
Message-ID: <1306879.1152675990738.JavaMail.jira@brutus>
Date: Wed, 12 Jul 2006 03:46:30 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-359) add optional compression of map
 outputs
In-Reply-To: <4993134.1152674429861.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-359?page=all ]

Owen O'Malley updated HADOOP-359:
---------------------------------

    Attachment: compress-map-outputs.patch

This patch:
   1. adds mapred.compress.map.outputs variable in the JobConf to request transient data compression.
   2. extends the unit test to make sure that compression can be turned on or off.
   3. fixes the local runner to use localizeConfiguration.
   4. fixes JobConf.newInstance to use setAccessible(true) so that non-public constructors can be called.
   5. 

> add optional compression of map outputs
> ---------------------------------------
>
>          Key: HADOOP-359
>          URL: http://issues.apache.org/jira/browse/HADOOP-359
>      Project: Hadoop
>         Type: New Feature

>   Components: mapred
>     Versions: 0.4.0
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.5.0
>  Attachments: compress-map-outputs.patch
>
> Currently, there is no way to request that the transient data be compressed.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jul 12 07:05:29 2006
Return-Path: 
 <hadoop-dev-return-2482-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 60935 invoked from network); 12 Jul 2006 07:05:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 07:05:29 -0000
Received: (qmail 78871 invoked by uid 500); 12 Jul 2006 07:05:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 78764 invoked by uid 500); 12 Jul 2006 07:05:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 78755 invoked by uid 99); 12 Jul 2006 07:05:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 00:05:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 00:05:27 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CD7C74104E4
	for <hadoop-dev@lucene.apache.org>; Wed, 12 Jul 2006 07:03:29 +0000 (GMT)
Message-ID: <14627119.1152687809838.JavaMail.jira@brutus>
Date: Wed, 12 Jul 2006 07:03:29 +0000 (GMT+00:00)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-360) hadoop-daemon starts but does not stop
 servers under cygWin
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hadoop-daemon starts but does not stop servers under cygWin
-----------------------------------------------------------

         Key: HADOOP-360
         URL: http://issues.apache.org/jira/browse/HADOOP-360
     Project: Hadoop
        Type: Bug

    Versions: 0.4.0    
 Environment: Windows, cygwin
    Reporter: Konstantin Shvachko


Latest changes HADOOP-352 to the hadoop scripts made them incompatible with cygwin.
The servers start fine, but when  I try to stop them the script reports there is nothing to stop. 
Which in turn messes up consequent server starts.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jul 12 07:46:32 2006
Return-Path: 
 <hadoop-dev-return-2483-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85853 invoked from network); 12 Jul 2006 07:46:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 07:46:32 -0000
Received: (qmail 51573 invoked by uid 500); 12 Jul 2006 07:46:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 51552 invoked by uid 500); 12 Jul 2006 07:46:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 51542 invoked by uid 99); 12 Jul 2006 07:46:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 00:46:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 00:46:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 713F74104E4
	for <hadoop-dev@lucene.apache.org>; Wed, 12 Jul 2006 07:44:32 +0000 (GMT)
Message-ID: <1296005.1152690272461.JavaMail.jira@brutus>
Date: Wed, 12 Jul 2006 07:44:32 +0000 (GMT+00:00)
From: "Philippe Gassmann (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-360) hadoop-daemon starts but does not
 stop servers under cygWin
In-Reply-To: <14627119.1152687809838.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-360?page=comments#action_12420537 ] 

Philippe Gassmann commented on HADOOP-360:
------------------------------------------

You should use "kill -0 `cat $pid`" instead of "ps -p `cat $pid`" in bin/hadoop-daemons.sh

> hadoop-daemon starts but does not stop servers under cygWin
> -----------------------------------------------------------
>
>          Key: HADOOP-360
>          URL: http://issues.apache.org/jira/browse/HADOOP-360
>      Project: Hadoop
>         Type: Bug

>     Versions: 0.4.0
>  Environment: Windows, cygwin
>     Reporter: Konstantin Shvachko

>
> Latest changes HADOOP-352 to the hadoop scripts made them incompatible with cygwin.
> The servers start fine, but when  I try to stop them the script reports there is nothing to stop. 
> Which in turn messes up consequent server starts.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jul 12 08:40:30 2006
Return-Path: 
 <hadoop-dev-return-2484-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 11621 invoked from network); 12 Jul 2006 08:40:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 08:40:30 -0000
Received: (qmail 27040 invoked by uid 500); 12 Jul 2006 08:40:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 27021 invoked by uid 500); 12 Jul 2006 08:40:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 27012 invoked by uid 99); 12 Jul 2006 08:40:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 01:40:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 01:40:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 27FA14104E8
	for <hadoop-dev@lucene.apache.org>; Wed, 12 Jul 2006 08:38:31 +0000 (GMT)
Message-ID: <4927945.1152693511160.JavaMail.jira@brutus>
Date: Wed, 12 Jul 2006 08:38:31 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-327) ToolBase calls System.exit
In-Reply-To: <20517100.1151388930799.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-327?page=all ]
     
Doug Cutting resolved HADOOP-327:
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Hairong.

David: you are right, implementations of the Tool interface can throw more precise exceptions.

> ToolBase calls System.exit
> --------------------------
>
>          Key: HADOOP-327
>          URL: http://issues.apache.org/jira/browse/HADOOP-327
>      Project: Hadoop
>         Type: Bug

>   Components: util
>     Versions: 0.4.0
>     Reporter: Owen O'Malley
>     Assignee: Hairong Kuang
>      Fix For: 0.5.0
>  Attachments: exit.patch, exit.patch
>
> The new ToolBase class calls System.exit when the main routine finishes. That will break if the application uses threads that need to finish before the jvm exits. The normal semantics is that the program doesn't finish execution until all of the non-daemon threads exit (including the main one) and System.exit should never be called except for critical errors.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jul 12 09:07:30 2006
Return-Path: 
 <hadoop-dev-return-2485-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 19488 invoked from network); 12 Jul 2006 09:07:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 09:07:30 -0000
Received: (qmail 58794 invoked by uid 500); 12 Jul 2006 09:07:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58759 invoked by uid 500); 12 Jul 2006 09:07:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58748 invoked by uid 99); 12 Jul 2006 09:07:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 02:07:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 02:07:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BF6E54104EB
	for <hadoop-dev@lucene.apache.org>; Wed, 12 Jul 2006 09:05:30 +0000 (GMT)
Message-ID: <8335476.1152695130780.JavaMail.jira@brutus>
Date: Wed, 12 Jul 2006 09:05:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-307) Many small jobs benchmark for
 MapReduce
In-Reply-To: <13009062.1150636529837.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-307?page=comments#action_12420562 ] 

Doug Cutting commented on HADOOP-307:
-------------------------------------

We already have some benchmarks in the examples source tree.  Any reason not to put this there too?  That way it would be compiled by the "test" task, which means it will be more likely to be maintained, it would't need it's own build.xml, etc.  Also, we might name this something more informative, like, MRJobBenchmark or something.

> Many small jobs benchmark for MapReduce
> ---------------------------------------
>
>          Key: HADOOP-307
>          URL: http://issues.apache.org/jira/browse/HADOOP-307
>      Project: Hadoop
>         Type: Task

>   Components: mapred
>     Reporter: Sanjay Dahiya
>     Priority: Minor
>  Attachments: patch.txt
>
> A benchmark that runs many small MapReduce tasks in sequence. A single map reduce implementation is used, it is invoked multiple times with input as the output from previous run. The input to first Map is a TextInputFormat ( a text file with few hundred KBs). Input records are passed to output without much processing. The idea is to benchmark the time taken by initialization of Mapper and Reducer. An initial prototyping on a single machine with 20 MR tasks in sequence took ~47 seconds per task. Looking for suggestions on what else can be included in the benchmark. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jul 12 09:11:32 2006
Return-Path: 
 <hadoop-dev-return-2486-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20403 invoked from network); 12 Jul 2006 09:11:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 09:11:32 -0000
Received: (qmail 64231 invoked by uid 500); 12 Jul 2006 09:11:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64206 invoked by uid 500); 12 Jul 2006 09:11:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64197 invoked by uid 99); 12 Jul 2006 09:11:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 02:11:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 02:11:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A6A174104EB
	for <hadoop-dev@lucene.apache.org>; Wed, 12 Jul 2006 09:09:32 +0000 (GMT)
Message-ID: <4179860.1152695372676.JavaMail.jira@brutus>
Date: Wed, 12 Jul 2006 09:09:32 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-54?page=comments#action_12420563 ] 

Doug Cutting commented on HADOOP-54:
------------------------------------

I like this proposal.  Long-term, custom compressors make good sense, but for the first version let's just use a fixed algorithm and add that as a separate pass, ok?  That could be a separate issue in Jira.

> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>          Key: HADOOP-54
>          URL: http://issues.apache.org/jira/browse/HADOOP-54
>      Project: Hadoop
>         Type: Improvement

>   Components: io
>     Versions: 0.2.0
>     Reporter: Doug Cutting
>     Assignee: Michel Tourn
>      Fix For: 0.5.0

>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jul 12 09:31:31 2006
Return-Path: 
 <hadoop-dev-return-2487-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 25067 invoked from network); 12 Jul 2006 09:31:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 09:31:31 -0000
Received: (qmail 84106 invoked by uid 500); 12 Jul 2006 09:31:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 84004 invoked by uid 500); 12 Jul 2006 09:31:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 83992 invoked by uid 99); 12 Jul 2006 09:31:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 02:31:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 02:31:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 891D54104AB
	for <hadoop-dev@lucene.apache.org>; Wed, 12 Jul 2006 09:29:31 +0000 (GMT)
Message-ID: <17039733.1152696571558.JavaMail.jira@brutus>
Date: Wed, 12 Jul 2006 09:29:31 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-237) Standard set of Performance Metrics
 for Hadoop
In-Reply-To: <14919853.1148078609860.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-237?page=comments#action_12420566 ] 

Doug Cutting commented on HADOOP-237:
-------------------------------------

This mostly looks good to me.

The indentation is non-standard for Hadoop (using four spaces instead of two), many lines exceed 80 columns, the new package imports section is not separated by a blank line and in NameNode.java I think you add some unused fields.

More importantly, there seems to be a lot of duplicated code.  It looks like we should probably add a MetricsReporter base class whose constructor constructs the context, record, etc.  This should log rather than ignore exceptions.  Then it can have reportMetric(String, int) and reportMetric(String, long) methods.

> Standard set of Performance Metrics for Hadoop
> ----------------------------------------------
>
>          Key: HADOOP-237
>          URL: http://issues.apache.org/jira/browse/HADOOP-237
>      Project: Hadoop
>         Type: Improvement

>   Components: metrics
>     Versions: 0.3.0
>  Environment: All
>     Reporter: Milind Bhandarkar
>     Assignee: Milind Bhandarkar
>  Attachments: hadoop-metrics.patch
>
> I am starting to use Hadoop's shiny new Metrics API to publish performance (and other) Metrics of running jobs and other daemons.
> Which performance metrics are people interested in seeing ? If possible, please group them according to modules, such as map-reduce, dfs, general-cluster-related etc. I will follow this process:
> 1. collect this list
> 2. assess feasibility of obtaining metric
> 3. assign context/record/metrics names
> 4. seek approval for names
> 5. instrument the code.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jul 12 09:54:37 2006
Return-Path: 
 <hadoop-dev-return-2488-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33555 invoked from network); 12 Jul 2006 09:54:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 09:54:37 -0000
Received: (qmail 22797 invoked by uid 500); 12 Jul 2006 09:54:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 22782 invoked by uid 500); 12 Jul 2006 09:54:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22756 invoked by uid 99); 12 Jul 2006 09:54:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 02:54:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 02:54:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2FC774104AE
	for <hadoop-dev@lucene.apache.org>; Wed, 12 Jul 2006 09:52:31 +0000 (GMT)
Message-ID: <18485524.1152697951192.JavaMail.jira@brutus>
Date: Wed, 12 Jul 2006 09:52:31 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-196) Fix buggy uselessness of
 Configuration( Configuration other) constructor
In-Reply-To: <32654100.1146779418355.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-196?page=comments#action_12420572 ] 

Doug Cutting commented on HADOOP-196:
-------------------------------------

> Is there a reason why the patch was not submitted?

Not a good one.  I think it just fell off my radar.

It would be good to add a unit test for this.  I think the use case is roughly:

Configuration c1 = new Configuration();
c1.set("foo", "bar");
Configuratoin c2 = new Configuration(c1);
assertEquals(c2.get("foo"), "bar");

Is that right?

The provided patch would fix this, but by setting all the values except "foo" twice: once when reloaded from resources and once when reloaded from overrides.  Perhaps it would be better to put all resource-loaded properties in a nested Properties instance that's inherited via 'new Properties(Properties)' and only store values set directly in a top-level Properties instance.  Or perhaps we should just set most of the values twice and not worry about it.  Thoughts, anyone?

> Fix buggy uselessness of Configuration( Configuration other) constructor
> ------------------------------------------------------------------------
>
>          Key: HADOOP-196
>          URL: http://issues.apache.org/jira/browse/HADOOP-196
>      Project: Hadoop
>         Type: Bug

>   Components: conf
>     Reporter: alan wootton
>  Attachments: ConfigConstructorFix.patch
>
> The constructor 
> public Configuration(Configuration other) 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jul 12 10:51:56 2006
Return-Path: 
 <hadoop-dev-return-2489-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57569 invoked from network); 12 Jul 2006 10:51:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 10:51:56 -0000
Received: (qmail 31377 invoked by uid 500); 12 Jul 2006 10:51:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 31344 invoked by uid 500); 12 Jul 2006 10:51:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31276 invoked by uid 99); 12 Jul 2006 10:51:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 03:51:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 03:51:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C65944104AE
	for <hadoop-dev@lucene.apache.org>; Wed, 12 Jul 2006 10:49:30 +0000 (GMT)
Message-ID: <11139430.1152701370809.JavaMail.jira@brutus>
Date: Wed, 12 Jul 2006 10:49:30 +0000 (GMT+00:00)
From: "Johan Oskarson (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-64) DataNode should be capable of
 managing multiple volumes
In-Reply-To: <96561968.1141686362086.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-64?page=comments#action_12420585 ] 

Johan Oskarson commented on HADOOP-64:
--------------------------------------

Noticed there's an unanswered question in the comment above.
How well does hadoop handle multiple volumes?
Since it starts one datanode per volume, is there a risk (even though it's a small risk) that a file with replication level 3 might end up with one block on one node, if said node have >=3 volumes?

> DataNode should be capable of managing multiple volumes
> -------------------------------------------------------
>
>          Key: HADOOP-64
>          URL: http://issues.apache.org/jira/browse/HADOOP-64
>      Project: Hadoop
>         Type: Improvement

>   Components: dfs
>     Versions: 0.2.0
>     Reporter: Sameer Paranjpye
>     Assignee: Konstantin Shvachko
>     Priority: Minor
>      Fix For: 0.5.0

>
> The dfs Datanode can only store data on a single filesystem volume. When a node runs its disks JBOD this means running a Datanode per disk on the machine. While the scheme works reasonably well on small clusters, on larger installations (several 100 nodes) it implies a very large number of Datanodes with associated management overhead in the Namenode.
> The Datanod should be enhanced to be able to handle multiple volumes on a single machine.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jul 12 11:38:30 2006
Return-Path: 
 <hadoop-dev-return-2490-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 73713 invoked from network); 12 Jul 2006 11:38:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 11:38:30 -0000
Received: (qmail 34970 invoked by uid 500); 12 Jul 2006 11:38:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 34951 invoked by uid 500); 12 Jul 2006 11:38:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 34942 invoked by uid 99); 12 Jul 2006 11:38:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 04:38:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 04:38:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9CD634104B0
	for <hadoop-dev@lucene.apache.org>; Wed, 12 Jul 2006 11:36:30 +0000 (GMT)
Message-ID: <20771252.1152704190639.JavaMail.jira@brutus>
Date: Wed, 12 Jul 2006 11:36:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-64) DataNode should be capable of
 managing multiple volumes
In-Reply-To: <96561968.1141686362086.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-64?page=comments#action_12420592 ] 

Doug Cutting commented on HADOOP-64:
------------------------------------

The block placement algorithm does check that copies are not placed on nodes on the same host.

> DataNode should be capable of managing multiple volumes
> -------------------------------------------------------
>
>          Key: HADOOP-64
>          URL: http://issues.apache.org/jira/browse/HADOOP-64
>      Project: Hadoop
>         Type: Improvement

>   Components: dfs
>     Versions: 0.2.0
>     Reporter: Sameer Paranjpye
>     Assignee: Konstantin Shvachko
>     Priority: Minor
>      Fix For: 0.5.0

>
> The dfs Datanode can only store data on a single filesystem volume. When a node runs its disks JBOD this means running a Datanode per disk on the machine. While the scheme works reasonably well on small clusters, on larger installations (several 100 nodes) it implies a very large number of Datanodes with associated management overhead in the Namenode.
> The Datanod should be enhanced to be able to handle multiple volumes on a single machine.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jul 12 11:51:30 2006
Return-Path: 
 <hadoop-dev-return-2491-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76933 invoked from network); 12 Jul 2006 11:51:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 11:51:30 -0000
Received: (qmail 60154 invoked by uid 500); 12 Jul 2006 11:51:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 60018 invoked by uid 500); 12 Jul 2006 11:51:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 60009 invoked by uid 99); 12 Jul 2006 11:51:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 04:51:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 04:51:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id ACF724104B2
	for <hadoop-dev@lucene.apache.org>; Wed, 12 Jul 2006 11:49:30 +0000 (GMT)
Message-ID: <9999073.1152704970704.JavaMail.jira@brutus>
Date: Wed, 12 Jul 2006 11:49:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-360) hadoop-daemon starts but does not
 stop servers under cygWin
In-Reply-To: <14627119.1152687809838.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-360?page=all ]
     
Doug Cutting resolved HADOOP-360:
---------------------------------

    Fix Version: 0.5.0
     Resolution: Fixed

I just committed the suggested fix.  Konstantin, can you verify whether this works?

> hadoop-daemon starts but does not stop servers under cygWin
> -----------------------------------------------------------
>
>          Key: HADOOP-360
>          URL: http://issues.apache.org/jira/browse/HADOOP-360
>      Project: Hadoop
>         Type: Bug

>     Versions: 0.4.0
>  Environment: Windows, cygwin
>     Reporter: Konstantin Shvachko
>      Fix For: 0.5.0

>
> Latest changes HADOOP-352 to the hadoop scripts made them incompatible with cygwin.
> The servers start fine, but when  I try to stop them the script reports there is nothing to stop. 
> Which in turn messes up consequent server starts.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jul 12 11:53:30 2006
Return-Path: 
 <hadoop-dev-return-2492-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77507 invoked from network); 12 Jul 2006 11:53:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 11:53:30 -0000
Received: (qmail 62765 invoked by uid 500); 12 Jul 2006 11:53:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62729 invoked by uid 500); 12 Jul 2006 11:53:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62720 invoked by uid 99); 12 Jul 2006 11:53:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 04:53:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 04:53:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A226C4104B2
	for <hadoop-dev@lucene.apache.org>; Wed, 12 Jul 2006 11:51:30 +0000 (GMT)
Message-ID: <21323349.1152705090661.JavaMail.jira@brutus>
Date: Wed, 12 Jul 2006 11:51:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-359) add optional compression of map
 outputs
In-Reply-To: <4993134.1152674429861.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-359?page=all ]
     
Doug Cutting resolved HADOOP-359:
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Owen!

> add optional compression of map outputs
> ---------------------------------------
>
>          Key: HADOOP-359
>          URL: http://issues.apache.org/jira/browse/HADOOP-359
>      Project: Hadoop
>         Type: New Feature

>   Components: mapred
>     Versions: 0.4.0
>     Reporter: Owen O'Malley
>     Assignee: Owen O'Malley
>      Fix For: 0.5.0
>  Attachments: compress-map-outputs.patch
>
> Currently, there is no way to request that the transient data be compressed.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jul 12 12:40:30 2006
Return-Path: 
 <hadoop-dev-return-2493-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 90915 invoked from network); 12 Jul 2006 12:40:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 12:40:30 -0000
Received: (qmail 72677 invoked by uid 500); 12 Jul 2006 12:40:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72643 invoked by uid 500); 12 Jul 2006 12:40:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72634 invoked by uid 99); 12 Jul 2006 12:40:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 05:40:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 05:40:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AC7CB4104D6
	for <hadoop-dev@lucene.apache.org>; Wed, 12 Jul 2006 12:38:30 +0000 (GMT)
Message-ID: <5099442.1152707910703.JavaMail.jira@brutus>
Date: Wed, 12 Jul 2006 12:38:30 +0000 (GMT+00:00)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-307) Many small jobs benchmark for
 MapReduce
In-Reply-To: <13009062.1150636529837.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-307?page=all ]

Sanjay Dahiya updated HADOOP-307:
---------------------------------

    Attachment: patch.txt

The only reason to keep it separate is we dont want these jar files already in classpath on all nodes. Part of the benchmark's goal is to estimate the overhead in transfering the jar file through HDFS. Also there is bin dir in this for scripts to run the benchmark. If this doesnt conflict with existing examples the we can put it there as well. 

Updating the patch, it now generates excel friendly CSV output to plot graphs etc.  


> Many small jobs benchmark for MapReduce
> ---------------------------------------
>
>          Key: HADOOP-307
>          URL: http://issues.apache.org/jira/browse/HADOOP-307
>      Project: Hadoop
>         Type: Task

>   Components: mapred
>     Reporter: Sanjay Dahiya
>     Priority: Minor
>  Attachments: patch.txt
>
> A benchmark that runs many small MapReduce tasks in sequence. A single map reduce implementation is used, it is invoked multiple times with input as the output from previous run. The input to first Map is a TextInputFormat ( a text file with few hundred KBs). Input records are passed to output without much processing. The idea is to benchmark the time taken by initialization of Mapper and Reducer. An initial prototyping on a single machine with 20 MR tasks in sequence took ~47 seconds per task. Looking for suggestions on what else can be included in the benchmark. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jul 12 12:40:31 2006
Return-Path: 
 <hadoop-dev-return-2494-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 90978 invoked from network); 12 Jul 2006 12:40:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 12:40:31 -0000
Received: (qmail 72885 invoked by uid 500); 12 Jul 2006 12:40:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72848 invoked by uid 500); 12 Jul 2006 12:40:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72839 invoked by uid 99); 12 Jul 2006 12:40:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 05:40:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 05:40:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B92E74104E7
	for <hadoop-dev@lucene.apache.org>; Wed, 12 Jul 2006 12:38:31 +0000 (GMT)
Message-ID: <16922484.1152707911755.JavaMail.jira@brutus>
Date: Wed, 12 Jul 2006 12:38:31 +0000 (GMT+00:00)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-307) Many small jobs benchmark for
 MapReduce
In-Reply-To: <13009062.1150636529837.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-307?page=all ]

Sanjay Dahiya updated HADOOP-307:
---------------------------------

    Attachment:     (was: patch.txt)

> Many small jobs benchmark for MapReduce
> ---------------------------------------
>
>          Key: HADOOP-307
>          URL: http://issues.apache.org/jira/browse/HADOOP-307
>      Project: Hadoop
>         Type: Task

>   Components: mapred
>     Reporter: Sanjay Dahiya
>     Priority: Minor
>  Attachments: patch.txt
>
> A benchmark that runs many small MapReduce tasks in sequence. A single map reduce implementation is used, it is invoked multiple times with input as the output from previous run. The input to first Map is a TextInputFormat ( a text file with few hundred KBs). Input records are passed to output without much processing. The idea is to benchmark the time taken by initialization of Mapper and Reducer. An initial prototyping on a single machine with 20 MR tasks in sequence took ~47 seconds per task. Looking for suggestions on what else can be included in the benchmark. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jul 12 12:46:30 2006
Return-Path: 
 <hadoop-dev-return-2495-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92289 invoked from network); 12 Jul 2006 12:46:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 12:46:30 -0000
Received: (qmail 80969 invoked by uid 500); 12 Jul 2006 12:46:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 80948 invoked by uid 500); 12 Jul 2006 12:46:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 80939 invoked by uid 99); 12 Jul 2006 12:46:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 05:46:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 05:46:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E5C404104D6
	for <hadoop-dev@lucene.apache.org>; Wed, 12 Jul 2006 12:44:30 +0000 (GMT)
Message-ID: <30875212.1152708270938.JavaMail.jira@brutus>
Date: Wed, 12 Jul 2006 12:44:30 +0000 (GMT+00:00)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-307) Many small jobs benchmark for
 MapReduce
In-Reply-To: <13009062.1150636529837.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-307?page=all ]

Sanjay Dahiya updated HADOOP-307:
---------------------------------

    Attachment: patch.txt

The only reason to keep it separate is we dont want these jar files already in classpath on all nodes. Part of the benchmark's goal is to estimate the overhead in transfering the jar file through HDFS. Also there is bin dir in this for scripts to run the benchmark. If this doesnt conflict with existing examples the we can put it there as well. 

Updating the patch, it now generates excel friendly CSV output to plot graphs etc. 

> Many small jobs benchmark for MapReduce
> ---------------------------------------
>
>          Key: HADOOP-307
>          URL: http://issues.apache.org/jira/browse/HADOOP-307
>      Project: Hadoop
>         Type: Task

>   Components: mapred
>     Reporter: Sanjay Dahiya
>     Priority: Minor
>  Attachments: patch.txt, patch.txt
>
> A benchmark that runs many small MapReduce tasks in sequence. A single map reduce implementation is used, it is invoked multiple times with input as the output from previous run. The input to first Map is a TextInputFormat ( a text file with few hundred KBs). Input records are passed to output without much processing. The idea is to benchmark the time taken by initialization of Mapper and Reducer. An initial prototyping on a single machine with 20 MR tasks in sequence took ~47 seconds per task. Looking for suggestions on what else can be included in the benchmark. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jul 12 12:48:35 2006
Return-Path: 
 <hadoop-dev-return-2497-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93088 invoked from network); 12 Jul 2006 12:48:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 12:48:35 -0000
Received: (qmail 88409 invoked by uid 500); 12 Jul 2006 12:48:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 88387 invoked by uid 500); 12 Jul 2006 12:48:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88378 invoked by uid 99); 12 Jul 2006 12:48:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 05:48:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 05:48:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9EF764104E7
	for <hadoop-dev@lucene.apache.org>; Wed, 12 Jul 2006 12:46:30 +0000 (GMT)
Message-ID: <22078973.1152708390648.JavaMail.jira@brutus>
Date: Wed, 12 Jul 2006 12:46:30 +0000 (GMT+00:00)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-307) Many small jobs benchmark for
 MapReduce
In-Reply-To: <13009062.1150636529837.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-307?page=all ]

Sanjay Dahiya updated HADOOP-307:
---------------------------------

    Attachment:     (was: patch.txt)

> Many small jobs benchmark for MapReduce
> ---------------------------------------
>
>          Key: HADOOP-307
>          URL: http://issues.apache.org/jira/browse/HADOOP-307
>      Project: Hadoop
>         Type: Task

>   Components: mapred
>     Reporter: Sanjay Dahiya
>     Priority: Minor
>  Attachments: patch.txt
>
> A benchmark that runs many small MapReduce tasks in sequence. A single map reduce implementation is used, it is invoked multiple times with input as the output from previous run. The input to first Map is a TextInputFormat ( a text file with few hundred KBs). Input records are passed to output without much processing. The idea is to benchmark the time taken by initialization of Mapper and Reducer. An initial prototyping on a single machine with 20 MR tasks in sequence took ~47 seconds per task. Looking for suggestions on what else can be included in the benchmark. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jul 12 12:48:30 2006
Return-Path: 
 <hadoop-dev-return-2496-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93030 invoked from network); 12 Jul 2006 12:48:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 12:48:30 -0000
Received: (qmail 88215 invoked by uid 500); 12 Jul 2006 12:48:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 88197 invoked by uid 500); 12 Jul 2006 12:48:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88188 invoked by uid 99); 12 Jul 2006 12:48:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 05:48:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 05:48:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8C3DA4104E8
	for <hadoop-dev@lucene.apache.org>; Wed, 12 Jul 2006 12:46:31 +0000 (GMT)
Message-ID: <20531242.1152708391571.JavaMail.jira@brutus>
Date: Wed, 12 Jul 2006 12:46:31 +0000 (GMT+00:00)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-307) Many small jobs benchmark for
 MapReduce
In-Reply-To: <13009062.1150636529837.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-307?page=all ]

Sanjay Dahiya updated HADOOP-307:
---------------------------------

    Comment: was deleted

> Many small jobs benchmark for MapReduce
> ---------------------------------------
>
>          Key: HADOOP-307
>          URL: http://issues.apache.org/jira/browse/HADOOP-307
>      Project: Hadoop
>         Type: Task

>   Components: mapred
>     Reporter: Sanjay Dahiya
>     Priority: Minor
>  Attachments: patch.txt
>
> A benchmark that runs many small MapReduce tasks in sequence. A single map reduce implementation is used, it is invoked multiple times with input as the output from previous run. The input to first Map is a TextInputFormat ( a text file with few hundred KBs). Input records are passed to output without much processing. The idea is to benchmark the time taken by initialization of Mapper and Reducer. An initial prototyping on a single machine with 20 MR tasks in sequence took ~47 seconds per task. Looking for suggestions on what else can be included in the benchmark. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jul 12 12:52:30 2006
Return-Path: 
 <hadoop-dev-return-2498-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94253 invoked from network); 12 Jul 2006 12:52:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 12:52:30 -0000
Received: (qmail 95343 invoked by uid 500); 12 Jul 2006 12:52:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95319 invoked by uid 500); 12 Jul 2006 12:52:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95310 invoked by uid 99); 12 Jul 2006 12:52:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 05:52:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 05:52:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AE59F4104D6
	for <hadoop-dev@lucene.apache.org>; Wed, 12 Jul 2006 12:50:30 +0000 (GMT)
Message-ID: <23937914.1152708630711.JavaMail.jira@brutus>
Date: Wed, 12 Jul 2006 12:50:30 +0000 (GMT+00:00)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-341) Enhance distcp to handle *http* as a
 'source protocol'.
In-Reply-To: <18620957.1151927429856.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-341?page=all ]

Arun C Murthy updated HADOOP-341:
---------------------------------

    Attachment: distcp2.patch

Verified patch for the TestCopyFiles junit test.

thanks,
Arun

> Enhance distcp to handle *http* as a 'source protocol'.
> -------------------------------------------------------
>
>          Key: HADOOP-341
>          URL: http://issues.apache.org/jira/browse/HADOOP-341
>      Project: Hadoop
>         Type: Improvement

>   Components: util
>     Reporter: Arun C Murthy
>  Attachments: distcp.patch, distcp2.patch
>
> Requirements:
>   Presently distcp recursively copies a directory from one dfs to another i.e. both source and destination of of the *dfs* protocol.
>   Enhance it to handle *http* as the source protocol i.e. support copying files from arbitrary http-based sources into the dfs.
> Design:
>   
>   Follow distcp's current design: one map task per file which needs to be copied.
>   Caveat: distcp handles *recursive* copying by listing sub-directories; this is not as feasible with a http-based source since things like 'fancy-indexing' might not be enabled on the web-server (for all sub-locations recursively too), and even if it is enabled it will mean tedious parsing of the html served to glean the sub-directories etc. Hence the idea is to support an input file (via a -f option) which contains a list of the http-based urls which represent multiple source files.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jul 12 13:21:38 2006
Return-Path: 
 <hadoop-dev-return-2499-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12095 invoked from network); 12 Jul 2006 13:21:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 13:21:38 -0000
Received: (qmail 95286 invoked by uid 500); 12 Jul 2006 13:21:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95241 invoked by uid 500); 12 Jul 2006 13:21:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95182 invoked by uid 99); 12 Jul 2006 13:21:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 06:21:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 06:21:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 84EA14104E9
	for <hadoop-dev@lucene.apache.org>; Wed, 12 Jul 2006 13:19:33 +0000 (GMT)
Message-ID: <10098787.1152710373541.JavaMail.jira@brutus>
Date: Wed, 12 Jul 2006 13:19:33 +0000 (GMT+00:00)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-54?page=comments#action_12420611 ] 

Arun C Murthy commented on HADOOP-54:
-------------------------------------

Here are some thoughts on how to go about this... inputs are much appreciated!
 
 <thoughts>

    The key idea is to compress blocks and not individual 'values' as is done (optionally) today in a SequenceFile.

    The plan is to have a configurable buffer (say default of 1MB? or 10MB?), fill it up with key/value pairs and then compress them. When the buffer is (almost) full we compress the keys together into a block and values into the following block and then write them out to file along with necessary headers and markers. The point of compressing keys and values separately (as Eric points out) is:
    a) (hopefully) better compression since 'like' items are compressed together.
    b) if need be, iterating over 'keys' itself is faster since we don't need to uncompress 'values'.

    We could also write out 'sync' markers everytime the whole key-value compressed buffer is written out to dfs or we can double up the sync and end-of-block marker, thus these sync-markers also double up as end-of-compressed-block-markers. Of course the 'sync' marker is similar to the one used today in SequenceFiles. (thoughts?)


    E.g.
    a) configured buffer size - 4096b
    b) key/values
        keyA - 32b, valueA - 1024b
        keyB - 64b, valueB - 2048b
    c) compressedSize(keyA+keyB) - 75b
    d) compressedSize(valueA+valueB) - 2500b


    On disk:

              no. of k/v pairs       (c)                        (d)
                          |                 |                           |
     ------------------------------------------------------------------------------------------------------------------------------------
    | sync-marker | 2 | 32 | 64 | 75 | 1024 | 2048 | 2500 | compressedKeys (blob) | compressedValues (blob) | sync-marker |
     ------------------------------------------------------------------------------------------------------------------------------------
                                   |                     |     
                              ______           ______
                            (key sizes)     (value sizes)


   Non-graphical version:
    -------------------------
    sync,2,32,64,75,1024,2048,2500,compressedKeys,compressedValuesBlob,sync.

    Clarification: All lengths above are uncompressed and as is on disk. (write/read via writeInt/readInt apis).

   Points to ponder:
    -----------------
    a) Since we need to store keys and values in separate (compressed) blocks on disk does it make sense to:
        i) use 2 buffers (one for each) to store them before compressing i.e. before we hit the configured (1/10/* MB) limit (both buffers combined) - fairly simple to implement!
        ii) interleave them in the buffer and then make 2 passes to compress and write to disk.
    b) Strategy for buffer-size vis-a-vis dfs-block-size? Should we pad out after compressing and before writing to disk? Better to ignore this for now and let dfs handle it better in future?
    c) Thoughts by Eric/Doug w.r.t custom compressors for keys/values.

 </thoughts>


thanks,
Arun



> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>          Key: HADOOP-54
>          URL: http://issues.apache.org/jira/browse/HADOOP-54
>      Project: Hadoop
>         Type: Improvement

>   Components: io
>     Versions: 0.2.0
>     Reporter: Doug Cutting
>     Assignee: Michel Tourn
>      Fix For: 0.5.0

>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jul 12 16:48:31 2006
Return-Path: 
 <hadoop-dev-return-2500-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1715 invoked from network); 12 Jul 2006 16:48:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 16:48:31 -0000
Received: (qmail 70303 invoked by uid 500); 12 Jul 2006 16:48:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70283 invoked by uid 500); 12 Jul 2006 16:48:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 70274 invoked by uid 99); 12 Jul 2006 16:48:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 09:48:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 09:48:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 251294104F1
	for <hadoop-dev@lucene.apache.org>; Wed, 12 Jul 2006 16:46:31 +0000 (GMT)
Message-ID: <855945.1152722791148.JavaMail.jira@brutus>
Date: Wed, 12 Jul 2006 16:46:31 +0000 (GMT+00:00)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-237) Standard set of Performance Metrics
 for Hadoop
In-Reply-To: <14919853.1148078609860.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-237?page=comments#action_12420673 ] 

Milind Bhandarkar commented on HADOOP-237:
------------------------------------------

okay. I will make the necessary modifications and will resubmit the patch. For low overhead, though I would have at least two instances of MetricsReporter, one for each context, dfs, and mapred.

> Standard set of Performance Metrics for Hadoop
> ----------------------------------------------
>
>          Key: HADOOP-237
>          URL: http://issues.apache.org/jira/browse/HADOOP-237
>      Project: Hadoop
>         Type: Improvement

>   Components: metrics
>     Versions: 0.3.0
>  Environment: All
>     Reporter: Milind Bhandarkar
>     Assignee: Milind Bhandarkar
>  Attachments: hadoop-metrics.patch
>
> I am starting to use Hadoop's shiny new Metrics API to publish performance (and other) Metrics of running jobs and other daemons.
> Which performance metrics are people interested in seeing ? If possible, please group them according to modules, such as map-reduce, dfs, general-cluster-related etc. I will follow this process:
> 1. collect this list
> 2. assess feasibility of obtaining metric
> 3. assign context/record/metrics names
> 4. seek approval for names
> 5. instrument the code.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jul 12 17:54:31 2006
Return-Path: 
 <hadoop-dev-return-2501-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30027 invoked from network); 12 Jul 2006 17:54:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 17:54:31 -0000
Received: (qmail 54257 invoked by uid 500); 12 Jul 2006 17:54:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 54235 invoked by uid 500); 12 Jul 2006 17:54:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 54220 invoked by uid 99); 12 Jul 2006 17:54:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 10:54:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 10:54:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A3FBC4104F6
	for <hadoop-dev@lucene.apache.org>; Wed, 12 Jul 2006 17:52:31 +0000 (GMT)
Message-ID: <29433703.1152726751668.JavaMail.jira@brutus>
Date: Wed, 12 Jul 2006 17:52:31 +0000 (GMT+00:00)
From: "David Bowen (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-237) Standard set of Performance Metrics
 for Hadoop
In-Reply-To: <14919853.1148078609860.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-237?page=comments#action_12420694 ] 

David Bowen commented on HADOOP-237:
------------------------------------


This code is not using the metrics API as intended, in that it calls the update method after each metric modification.  The API is record-oriented, so update copies the whole record to the client library.  

I don't think that this will cause significant, observable problems with the metric data, but it could be a significant performance issue.

The preferred model would be to replace per-metric methods like
        void mapInput(long numBytes) 
        void mapOutput(long numBytes) 

with something like
       void mapIO(long numBytesInput, long numBytesOutput)

and have this only call the update method once.


      

> Standard set of Performance Metrics for Hadoop
> ----------------------------------------------
>
>          Key: HADOOP-237
>          URL: http://issues.apache.org/jira/browse/HADOOP-237
>      Project: Hadoop
>         Type: Improvement

>   Components: metrics
>     Versions: 0.3.0
>  Environment: All
>     Reporter: Milind Bhandarkar
>     Assignee: Milind Bhandarkar
>  Attachments: hadoop-metrics.patch
>
> I am starting to use Hadoop's shiny new Metrics API to publish performance (and other) Metrics of running jobs and other daemons.
> Which performance metrics are people interested in seeing ? If possible, please group them according to modules, such as map-reduce, dfs, general-cluster-related etc. I will follow this process:
> 1. collect this list
> 2. assess feasibility of obtaining metric
> 3. assign context/record/metrics names
> 4. seek approval for names
> 5. instrument the code.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jul 12 18:03:31 2006
Return-Path: 
 <hadoop-dev-return-2502-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32114 invoked from network); 12 Jul 2006 18:03:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 18:03:31 -0000
Received: (qmail 69487 invoked by uid 500); 12 Jul 2006 18:03:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 69461 invoked by uid 500); 12 Jul 2006 18:03:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 69452 invoked by uid 99); 12 Jul 2006 18:03:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 11:03:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 11:03:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3B9F94104F3
	for <hadoop-dev@lucene.apache.org>; Wed, 12 Jul 2006 18:01:31 +0000 (GMT)
Message-ID: <32408218.1152727291241.JavaMail.jira@brutus>
Date: Wed, 12 Jul 2006 18:01:31 +0000 (GMT+00:00)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-237) Standard set of Performance Metrics
 for Hadoop
In-Reply-To: <14919853.1148078609860.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-237?page=comments#action_12420695 ] 

Milind Bhandarkar commented on HADOOP-237:
------------------------------------------

But then, mapIO needs to be called everytime eiither numBytesInput or numBytesOutput change (they change in different places). So, I don't see a performance difference. Maybe having a different record for each metric is a better solution performance wise, because it will avoid the record-copy overhead, but then it will increase record update overhead, by sending two separate packets.

> Standard set of Performance Metrics for Hadoop
> ----------------------------------------------
>
>          Key: HADOOP-237
>          URL: http://issues.apache.org/jira/browse/HADOOP-237
>      Project: Hadoop
>         Type: Improvement

>   Components: metrics
>     Versions: 0.3.0
>  Environment: All
>     Reporter: Milind Bhandarkar
>     Assignee: Milind Bhandarkar
>  Attachments: hadoop-metrics.patch
>
> I am starting to use Hadoop's shiny new Metrics API to publish performance (and other) Metrics of running jobs and other daemons.
> Which performance metrics are people interested in seeing ? If possible, please group them according to modules, such as map-reduce, dfs, general-cluster-related etc. I will follow this process:
> 1. collect this list
> 2. assess feasibility of obtaining metric
> 3. assign context/record/metrics names
> 4. seek approval for names
> 5. instrument the code.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jul 12 18:05:30 2006
Return-Path: 
 <hadoop-dev-return-2503-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33056 invoked from network); 12 Jul 2006 18:05:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 18:05:30 -0000
Received: (qmail 71453 invoked by uid 500); 12 Jul 2006 18:05:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 71436 invoked by uid 500); 12 Jul 2006 18:05:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 71427 invoked by uid 99); 12 Jul 2006 18:05:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 11:05:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 11:05:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A7D014104F5
	for <hadoop-dev@lucene.apache.org>; Wed, 12 Jul 2006 18:03:30 +0000 (GMT)
Message-ID: <4012227.1152727410684.JavaMail.jira@brutus>
Date: Wed, 12 Jul 2006 18:03:30 +0000 (GMT+00:00)
From: "Barry Kaplan (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-354) All daemons should have public
 methods to start and stop them
In-Reply-To: <17281484.1152293189827.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-354?page=comments#action_12420696 ] 

Barry Kaplan commented on HADOOP-354:
-------------------------------------

I will add the javadoc. Also in addition to the shutdown on the DataNode, I made a shutdownAll() method that will shutdown all the started datanodes that were created using DatNode.run(conf). I ran into a bit of a head banging issue that manifested itself as a socket timeout because I was starting my DataNodes on my own with offerService, but not starting the DataXceiveServer. I am not sure if there is even a way to start the DataXceiveServer other then dataNode.run(conf).

I will attach the new patch shortly.

I think a stoppable interface would be a bit of overkill right now, but certainly easy enough to add later.

> All daemons should have public methods to start and stop them
> -------------------------------------------------------------
>
>          Key: HADOOP-354
>          URL: http://issues.apache.org/jira/browse/HADOOP-354
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.4.0
>     Reporter: Barry Kaplan
>  Attachments: shutdown_patch
>
> To get tomcat working shutdown working properly I needed to make the NameNode stop() method public as well as the DataNode shutdown() method public. (will attach patch file).
> Furthermore I noticed that the RPC object has a static client reference that you have no way of stopping, so I added one. (will attach patch)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jul 12 19:02:31 2006
Return-Path: 
 <hadoop-dev-return-2504-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 55377 invoked from network); 12 Jul 2006 19:02:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 19:02:31 -0000
Received: (qmail 74130 invoked by uid 500); 12 Jul 2006 19:02:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 73974 invoked by uid 500); 12 Jul 2006 19:02:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 73965 invoked by uid 99); 12 Jul 2006 19:02:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 12:02:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 12:02:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1EED94104F7
	for <hadoop-dev@lucene.apache.org>; Wed, 12 Jul 2006 19:00:31 +0000 (GMT)
Message-ID: <6990187.1152730831123.JavaMail.jira@brutus>
Date: Wed, 12 Jul 2006 19:00:31 +0000 (GMT+00:00)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-360) hadoop-daemon starts but does not
 stop servers under cygWin
In-Reply-To: <14627119.1152687809838.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-360?page=comments#action_12420709 ] 

Konstantin Shvachko commented on HADOOP-360:
--------------------------------------------

Yes, it works fine now. Thanks.
Doug, could you also commit HADOOP-344. 
Windows nightly build fails, and not checking other things.

> hadoop-daemon starts but does not stop servers under cygWin
> -----------------------------------------------------------
>
>          Key: HADOOP-360
>          URL: http://issues.apache.org/jira/browse/HADOOP-360
>      Project: Hadoop
>         Type: Bug

>     Versions: 0.4.0
>  Environment: Windows, cygwin
>     Reporter: Konstantin Shvachko
>      Fix For: 0.5.0

>
> Latest changes HADOOP-352 to the hadoop scripts made them incompatible with cygwin.
> The servers start fine, but when  I try to stop them the script reports there is nothing to stop. 
> Which in turn messes up consequent server starts.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jul 12 19:10:39 2006
Return-Path: 
 <hadoop-dev-return-2505-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 62374 invoked from network); 12 Jul 2006 19:10:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 19:10:39 -0000
Received: (qmail 91337 invoked by uid 500); 12 Jul 2006 19:10:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 91318 invoked by uid 500); 12 Jul 2006 19:10:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 91294 invoked by uid 99); 12 Jul 2006 19:10:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 12:10:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 12:10:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 906F94104F6
	for <hadoop-dev@lucene.apache.org>; Wed, 12 Jul 2006 19:08:31 +0000 (GMT)
Message-ID: <30263508.1152731311588.JavaMail.jira@brutus>
Date: Wed, 12 Jul 2006 19:08:31 +0000 (GMT+00:00)
From: "David Bowen (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-237) Standard set of Performance Metrics
 for Hadoop
In-Reply-To: <14919853.1148078609860.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-237?page=comments#action_12420710 ] 

David Bowen commented on HADOOP-237:
------------------------------------


OK, maybe this is no big deal since the records are small.  The idea of a record was to be a bunch of things that should be updated simultaneously, but maybe using it for a small number of things that are updated independently is OK.  Splitting the record into two would cost a bit of extra space in the client library (since the overhead of an extra record in a hash table outweighs the savings of  4 bytes per record) and would not save much in the cost of an update.



> Standard set of Performance Metrics for Hadoop
> ----------------------------------------------
>
>          Key: HADOOP-237
>          URL: http://issues.apache.org/jira/browse/HADOOP-237
>      Project: Hadoop
>         Type: Improvement

>   Components: metrics
>     Versions: 0.3.0
>  Environment: All
>     Reporter: Milind Bhandarkar
>     Assignee: Milind Bhandarkar
>  Attachments: hadoop-metrics.patch
>
> I am starting to use Hadoop's shiny new Metrics API to publish performance (and other) Metrics of running jobs and other daemons.
> Which performance metrics are people interested in seeing ? If possible, please group them according to modules, such as map-reduce, dfs, general-cluster-related etc. I will follow this process:
> 1. collect this list
> 2. assess feasibility of obtaining metric
> 3. assign context/record/metrics names
> 4. seek approval for names
> 5. instrument the code.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jul 12 20:10:33 2006
Return-Path: 
 <hadoop-dev-return-2506-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94426 invoked from network); 12 Jul 2006 20:10:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 20:10:33 -0000
Received: (qmail 11990 invoked by uid 500); 12 Jul 2006 20:10:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 11967 invoked by uid 500); 12 Jul 2006 20:10:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 11958 invoked by uid 99); 12 Jul 2006 20:10:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 13:10:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 13:10:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AF6864104F5
	for <hadoop-dev@lucene.apache.org>; Wed, 12 Jul 2006 20:08:30 +0000 (GMT)
Message-ID: <8737785.1152734910715.JavaMail.jira@brutus>
Date: Wed, 12 Jul 2006 20:08:30 +0000 (GMT+00:00)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-322) Need a job control utility to submit
 and monitor a group of jobs which have DAG dependency
In-Reply-To: <4931825.1151126129857.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-322?page=comments#action_12420720 ] 

Runping Qi commented on HADOOP-322:
-----------------------------------


Doug,

what is the status about this patch?



> Need a job control utility to submit and monitor a group of jobs which have DAG dependency
> ------------------------------------------------------------------------------------------
>
>          Key: HADOOP-322
>          URL: http://issues.apache.org/jira/browse/HADOOP-322
>      Project: Hadoop
>         Type: New Feature

>     Reporter: Runping Qi
>     Assignee: Runping Qi
>  Attachments: job_control_patch.txt
>
> In my applications, some jobs depend on the outputs of other jobs. Therefore, job dependency forms a DAG. A job is ready to run if and only if it does not have any dependency or all the jobs it depends are finished successfully. To help schedule and monitor a group of jobs like that, I am thinking of implementing a utility that:
> 	- accept jobs with dependency specification
>       - monitor job status
>       - submit jobs when they are ready
> With such a utility, the application can construct its jobs, specify their dependency and then hand the jobs to the utility class. The utility takes care of the details of job submission.
> I'll post my design skech for comments/suggestion.
> Eventually, I'll submit a patch for the utility.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jul 12 21:32:34 2006
Return-Path: 
 <hadoop-dev-return-2507-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 21159 invoked from network); 12 Jul 2006 21:32:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 21:32:34 -0000
Received: (qmail 58446 invoked by uid 500); 12 Jul 2006 21:32:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58175 invoked by uid 500); 12 Jul 2006 21:32:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58068 invoked by uid 99); 12 Jul 2006 21:32:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 14:32:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 14:32:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E43384104FD
	for <hadoop-dev@lucene.apache.org>; Wed, 12 Jul 2006 21:30:30 +0000 (GMT)
Message-ID: <18429830.1152739830930.JavaMail.jira@brutus>
Date: Wed, 12 Jul 2006 21:30:30 +0000 (GMT+00:00)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-361) junit with pure-Java hadoopStreaming
 combiner; remove CRLF in some files
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

junit with pure-Java hadoopStreaming combiner; remove CRLF in some files
------------------------------------------------------------------------

         Key: HADOOP-361
         URL: http://issues.apache.org/jira/browse/HADOOP-361
     Project: Hadoop
        Type: Improvement

  Components: contrib/streaming  
    Reporter: Michel Tourn


junit with pure-Java hadoopStreaming combiner
remove CRLF in some files

When this is committed, the hadoopStreaming tests should be pure-Java.
This implies that hadoopStreaming can safely be built nightly without plaftorm dependencies.

After I check that this is the case I will update the build.xml in this issue:
HADOOP-356  	 Build and test hadoopStreaming nightly



-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jul 12 21:34:30 2006
Return-Path: 
 <hadoop-dev-return-2508-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 21892 invoked from network); 12 Jul 2006 21:34:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 21:34:30 -0000
Received: (qmail 60229 invoked by uid 500); 12 Jul 2006 21:34:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 60199 invoked by uid 500); 12 Jul 2006 21:34:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 60189 invoked by uid 99); 12 Jul 2006 21:34:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 14:34:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 14:34:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CCA454104FB
	for <hadoop-dev@lucene.apache.org>; Wed, 12 Jul 2006 21:32:30 +0000 (GMT)
Message-ID: <5929243.1152739950833.JavaMail.jira@brutus>
Date: Wed, 12 Jul 2006 21:32:30 +0000 (GMT+00:00)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-361) junit with pure-Java hadoopStreaming
 combiner; remove CRLF in some files
In-Reply-To: <18429830.1152739830930.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-361?page=all ]

Michel Tourn updated HADOOP-361:
--------------------------------

    Attachment: streaming.junit.patch

> junit with pure-Java hadoopStreaming combiner; remove CRLF in some files
> ------------------------------------------------------------------------
>
>          Key: HADOOP-361
>          URL: http://issues.apache.org/jira/browse/HADOOP-361
>      Project: Hadoop
>         Type: Improvement

>   Components: contrib/streaming
>     Reporter: Michel Tourn
>  Attachments: streaming.junit.patch
>
> junit with pure-Java hadoopStreaming combiner
> remove CRLF in some files
> When this is committed, the hadoopStreaming tests should be pure-Java.
> This implies that hadoopStreaming can safely be built nightly without plaftorm dependencies.
> After I check that this is the case I will update the build.xml in this issue:
> HADOOP-356  	 Build and test hadoopStreaming nightly

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jul 12 22:09:31 2006
Return-Path: 
 <hadoop-dev-return-2509-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33206 invoked from network); 12 Jul 2006 22:09:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 22:09:31 -0000
Received: (qmail 26791 invoked by uid 500); 12 Jul 2006 22:09:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26628 invoked by uid 500); 12 Jul 2006 22:09:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26619 invoked by uid 99); 12 Jul 2006 22:09:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 15:09:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 15:09:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6501E4104FB
	for <hadoop-dev@lucene.apache.org>; Wed, 12 Jul 2006 22:07:31 +0000 (GMT)
Message-ID: <6223153.1152742051410.JavaMail.jira@brutus>
Date: Wed, 12 Jul 2006 22:07:31 +0000 (GMT+00:00)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-237) Standard set of Performance Metrics
 for Hadoop
In-Reply-To: <14919853.1148078609860.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-237?page=all ]

Milind Bhandarkar updated HADOOP-237:
-------------------------------------

    Attachment:     (was: hadoop-metrics.patch)

> Standard set of Performance Metrics for Hadoop
> ----------------------------------------------
>
>          Key: HADOOP-237
>          URL: http://issues.apache.org/jira/browse/HADOOP-237
>      Project: Hadoop
>         Type: Improvement

>   Components: metrics
>     Versions: 0.3.0
>  Environment: All
>     Reporter: Milind Bhandarkar
>     Assignee: Milind Bhandarkar

>
> I am starting to use Hadoop's shiny new Metrics API to publish performance (and other) Metrics of running jobs and other daemons.
> Which performance metrics are people interested in seeing ? If possible, please group them according to modules, such as map-reduce, dfs, general-cluster-related etc. I will follow this process:
> 1. collect this list
> 2. assess feasibility of obtaining metric
> 3. assign context/record/metrics names
> 4. seek approval for names
> 5. instrument the code.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jul 12 22:13:31 2006
Return-Path: 
 <hadoop-dev-return-2510-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 35438 invoked from network); 12 Jul 2006 22:13:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 22:13:31 -0000
Received: (qmail 32710 invoked by uid 500); 12 Jul 2006 22:13:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 32694 invoked by uid 500); 12 Jul 2006 22:13:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 32683 invoked by uid 99); 12 Jul 2006 22:13:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 15:13:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 15:13:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 209B44104FB
	for <hadoop-dev@lucene.apache.org>; Wed, 12 Jul 2006 22:11:31 +0000 (GMT)
Message-ID: <24248974.1152742291130.JavaMail.jira@brutus>
Date: Wed, 12 Jul 2006 22:11:31 +0000 (GMT+00:00)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-237) Standard set of Performance Metrics
 for Hadoop
In-Reply-To: <14919853.1148078609860.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-237?page=all ]

Milind Bhandarkar updated HADOOP-237:
-------------------------------------

    Attachment: hadoop-metrics.patch

I have attached an updated metrics patch. I have addressed most concerns expressed by Doug and David, except for removing duplicate code. Because the alternative is an overkill. It would not allow localized code updates, compiler cannot inline so increases overhead, because of multiple exit points in some classes, it will leak metrics records and in any case the duplicate code is small and in private classes (3-lines each in 6 classes). Please let me know if you have any more concerns.

> Standard set of Performance Metrics for Hadoop
> ----------------------------------------------
>
>          Key: HADOOP-237
>          URL: http://issues.apache.org/jira/browse/HADOOP-237
>      Project: Hadoop
>         Type: Improvement

>   Components: metrics
>     Versions: 0.3.0
>  Environment: All
>     Reporter: Milind Bhandarkar
>     Assignee: Milind Bhandarkar
>  Attachments: hadoop-metrics.patch
>
> I am starting to use Hadoop's shiny new Metrics API to publish performance (and other) Metrics of running jobs and other daemons.
> Which performance metrics are people interested in seeing ? If possible, please group them according to modules, such as map-reduce, dfs, general-cluster-related etc. I will follow this process:
> 1. collect this list
> 2. assess feasibility of obtaining metric
> 3. assign context/record/metrics names
> 4. seek approval for names
> 5. instrument the code.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jul 12 22:42:36 2006
Return-Path: 
 <hadoop-dev-return-2511-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 42429 invoked from network); 12 Jul 2006 22:42:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 22:42:36 -0000
Received: (qmail 64775 invoked by uid 500); 12 Jul 2006 22:42:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64741 invoked by uid 500); 12 Jul 2006 22:42:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64397 invoked by uid 99); 12 Jul 2006 22:42:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 15:42:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 15:42:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C75404104FF
	for <hadoop-dev@lucene.apache.org>; Wed, 12 Jul 2006 22:40:30 +0000 (GMT)
Message-ID: <22559656.1152744030813.JavaMail.jira@brutus>
Date: Wed, 12 Jul 2006 22:40:30 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-362) tasks can get lost when reporting task
 completion to the JobTracker has an error
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

tasks can get lost when reporting task completion to the JobTracker has an error
--------------------------------------------------------------------------------

         Key: HADOOP-362
         URL: http://issues.apache.org/jira/browse/HADOOP-362
     Project: Hadoop
        Type: Bug

  Components: mapred  
    Reporter: Devaraj Das
 Assigned to: Devaraj Das 


Basically, the JobTracker used to lose some updates about successful map tasks and it would assume that the tasks are still running (the old progress report is what it used to display in the web page). Now this would cause the reduces to also wait for the map output and they would never receive the output. This would cause the job to appear as if it was hung.
 
The following piece of code sends the status of tasks to the JobTracker:
 
            synchronized (this) {
                for (Iterator it = runningTasks.values().iterator();
                     it.hasNext(); ) {
                    TaskInProgress tip = (TaskInProgress) it.next();
                    TaskStatus status = tip.createStatus();
                    taskReports.add(status);
                    if (status.getRunState() != TaskStatus.RUNNING) {
                        if (tip.getTask().isMapTask()) {
                            mapTotal--;
                        } else {
                            reduceTotal--;
                        }
                        it.remove();
                    }
                }
            }
 
            //
            // Xmit the heartbeat
            //
           
            TaskTrackerStatus status =
              new TaskTrackerStatus(taskTrackerName, localHostname,
                                    httpPort, taskReports,
                                    failures);
            int resultCode = jobClient.emitHeartbeat(status, justStarted);
 
 
Notice that the completed TIPs are removed from runningTasks data structure. Now, if the emitHeartBeat threw an exception (if it could not communicate with the JobTracker till the IPC timeout expires) then this update is lost. And the next time it sends the hearbeat this completed task's status is missing and hence the JobTracker doesn't know about this completed task. So, one solution to this is to remove the completed TIPs from runningTasks after emitHeartbeat returns. Here is how the new code would look like:
 
 
            synchronized (this) {
                for (Iterator it = runningTasks.values().iterator();
                     it.hasNext(); ) {
                    TaskInProgress tip = (TaskInProgress) it.next();
                    TaskStatus status = tip.createStatus();
                    taskReports.add(status);
                }
            }
 
            //
            // Xmit the heartbeat
            //
 
            TaskTrackerStatus status =
              new TaskTrackerStatus(taskTrackerName, localHostname,
                                    httpPort, taskReports,
                                    failures);
            int resultCode = jobClient.emitHeartbeat(status, justStarted);
            synchronized (this) {
                for (Iterator it = runningTasks.values().iterator();
                     it.hasNext(); ) {
                    TaskInProgress tip = (TaskInProgress) it.next();
                    if (tip.runstate != TaskStatus.RUNNING) {
                        if (tip.getTask().isMapTask()) {
                            mapTotal--;
                        } else {
                            reduceTotal--;
                        }
                        it.remove();
                    }
                }
            }
 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jul 12 23:04:30 2006
Return-Path: 
 <hadoop-dev-return-2512-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 47474 invoked from network); 12 Jul 2006 23:04:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 23:04:30 -0000
Received: (qmail 84257 invoked by uid 500); 12 Jul 2006 23:04:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 84228 invoked by uid 500); 12 Jul 2006 23:04:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 84219 invoked by uid 99); 12 Jul 2006 23:04:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 16:04:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 16:04:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A06DE4104FE
	for <hadoop-dev@lucene.apache.org>; Wed, 12 Jul 2006 23:02:30 +0000 (GMT)
Message-ID: <28929387.1152745350654.JavaMail.jira@brutus>
Date: Wed, 12 Jul 2006 23:02:30 +0000 (GMT+00:00)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-362) tasks can get lost when reporting task
 completion to the JobTracker has an error
In-Reply-To: <22559656.1152744030813.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-362?page=all ]

Owen O'Malley updated HADOOP-362:
---------------------------------

    Attachment: lost-status-updates.patch

Your patch has a couple of issues. Here is a trial patch, but it needs a lot more testing. The changes are:
   1. if the rpc failed after the server updated the status, the status could be updated twice.
   2. the runningTasks could change from when the status report was generated.

> tasks can get lost when reporting task completion to the JobTracker has an error
> --------------------------------------------------------------------------------
>
>          Key: HADOOP-362
>          URL: http://issues.apache.org/jira/browse/HADOOP-362
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Reporter: Devaraj Das
>     Assignee: Devaraj Das
>  Attachments: lost-status-updates.patch
>
> Basically, the JobTracker used to lose some updates about successful map tasks and it would assume that the tasks are still running (the old progress report is what it used to display in the web page). Now this would cause the reduces to also wait for the map output and they would never receive the output. This would cause the job to appear as if it was hung.
>  
> The following piece of code sends the status of tasks to the JobTracker:
>  
>             synchronized (this) {
>                 for (Iterator it = runningTasks.values().iterator();
>                      it.hasNext(); ) {
>                     TaskInProgress tip = (TaskInProgress) it.next();
>                     TaskStatus status = tip.createStatus();
>                     taskReports.add(status);
>                     if (status.getRunState() != TaskStatus.RUNNING) {
>                         if (tip.getTask().isMapTask()) {
>                             mapTotal--;
>                         } else {
>                             reduceTotal--;
>                         }
>                         it.remove();
>                     }
>                 }
>             }
>  
>             //
>             // Xmit the heartbeat
>             //
>            
>             TaskTrackerStatus status =
>               new TaskTrackerStatus(taskTrackerName, localHostname,
>                                     httpPort, taskReports,
>                                     failures);
>             int resultCode = jobClient.emitHeartbeat(status, justStarted);
>  
>  
> Notice that the completed TIPs are removed from runningTasks data structure. Now, if the emitHeartBeat threw an exception (if it could not communicate with the JobTracker till the IPC timeout expires) then this update is lost. And the next time it sends the hearbeat this completed task's status is missing and hence the JobTracker doesn't know about this completed task. So, one solution to this is to remove the completed TIPs from runningTasks after emitHeartbeat returns. Here is how the new code would look like:
>  
>  
>             synchronized (this) {
>                 for (Iterator it = runningTasks.values().iterator();
>                      it.hasNext(); ) {
>                     TaskInProgress tip = (TaskInProgress) it.next();
>                     TaskStatus status = tip.createStatus();
>                     taskReports.add(status);
>                 }
>             }
>  
>             //
>             // Xmit the heartbeat
>             //
>  
>             TaskTrackerStatus status =
>               new TaskTrackerStatus(taskTrackerName, localHostname,
>                                     httpPort, taskReports,
>                                     failures);
>             int resultCode = jobClient.emitHeartbeat(status, justStarted);
>             synchronized (this) {
>                 for (Iterator it = runningTasks.values().iterator();
>                      it.hasNext(); ) {
>                     TaskInProgress tip = (TaskInProgress) it.next();
>                     if (tip.runstate != TaskStatus.RUNNING) {
>                         if (tip.getTask().isMapTask()) {
>                             mapTotal--;
>                         } else {
>                             reduceTotal--;
>                         }
>                         it.remove();
>                     }
>                 }
>             }
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Wed Jul 12 23:26:30 2006
Return-Path: 
 <hadoop-dev-return-2513-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 53462 invoked from network); 12 Jul 2006 23:26:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 23:26:30 -0000
Received: (qmail 2928 invoked by uid 500); 12 Jul 2006 23:26:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 2903 invoked by uid 500); 12 Jul 2006 23:26:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 2893 invoked by uid 99); 12 Jul 2006 23:26:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 16:26:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 16:26:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A2E474104FD
	for <hadoop-dev@lucene.apache.org>; Wed, 12 Jul 2006 23:24:30 +0000 (GMT)
Message-ID: <32335791.1152746670664.JavaMail.jira@brutus>
Date: Wed, 12 Jul 2006 23:24:30 +0000 (GMT+00:00)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-252) add versioning to RPC
In-Reply-To: <23799650.1148510309896.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-252?page=comments#action_12420748 ] 

Milind Bhandarkar commented on HADOOP-252:
------------------------------------------

I have started thinking about this issue. Here is my proposal so far:

There are 6 protocols that use RPC in hadoop. One is in test, and 5 in source. These are interfaces that are implemented by servers. We modify these interfaces to inherit from a common interface, called VersionedProtocol. VersionedProtocol has exactly one method:

long getProtocolVersion()

The client tries to get a proxy via RPC.getProxy in the setup phase, and passes the required interface class.
This method, upon successfully obtaining the proxy, casts it to VersionedProtocol, calls its getProtocolVersion, compares it with the passed in interface's static final long versionID field, and fails if they do not match.

I think we should not use computed-by-default serialVersionUID field, since it can change even if you sneeze at the class :-) Also, since we do not use serialization runtime to calculate this hash, we are not attached to the name as well. This version needs to change in case of any interface changes to the protocol.

The client, upon version mismatch, prints out an error, and exits cleanly. The server blissfully remains unaware of that.

The objective of this is not to handle backward compatibility, but to detect and fail fast and cleanly if there is a version mismatch between client and server.


> add versioning to RPC
> ---------------------
>
>          Key: HADOOP-252
>          URL: http://issues.apache.org/jira/browse/HADOOP-252
>      Project: Hadoop
>         Type: Improvement

>   Components: ipc
>     Versions: 0.3.0
>     Reporter: Yoram Arnon
>      Fix For: 0.5.0

>
> currently, any change to any rpc message breaks the protocol, with mysterious exceptions occurring at run time.
> a versioning sceme would have two benefits:
> - intelligent error messages, indicating that an upgrade is required
> - backwards compatibility could be supported.
> the proposal is to add a "const version" for each protocol, and a method: int getVersion(int version) that sends the client's version and receives the server's version. This would be the first method invoked on connection. Both sides then either agree on the lowest version number, providing backwards compatibility support, or abort the connection as "unsupported version".

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jul 13 00:30:32 2006
Return-Path: 
 <hadoop-dev-return-2514-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67745 invoked from network); 13 Jul 2006 00:30:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2006 00:30:32 -0000
Received: (qmail 55326 invoked by uid 500); 13 Jul 2006 00:30:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55167 invoked by uid 500); 13 Jul 2006 00:30:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55158 invoked by uid 99); 13 Jul 2006 00:30:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 17:30:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 17:30:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 18717410502
	for <hadoop-dev@lucene.apache.org>; Thu, 13 Jul 2006 00:28:32 +0000 (GMT)
Message-ID: <21634468.1152750512097.JavaMail.jira@brutus>
Date: Thu, 13 Jul 2006 00:28:32 +0000 (GMT+00:00)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-335) factor out the namespace
 image/transaction log writing
In-Reply-To: <14300759.1151602229834.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-335?page=all ]

Konstantin Shvachko updated HADOOP-335:
---------------------------------------

    Attachment: FSImage_Refactor1.patch

I factored out two new classes FSImage and FSEditLog from FSDirectory.
FSImage maintains the dfs image file and checkpointing.
FSEditLog is responsible for the edits file and the namespace updates logging.
Thus, FSDirectory has only namespace methods and the INode class.
This should simplify implementation of checkpointing and logging
upgrades intended to improve the fs reliability.
It should also localize changes related to the namespace versioning.

The INode probably also needs to be factored out into a separate class,
since the type is already referenced in other classes, and it does not have
any dependencies on the outer class.

> factor out the namespace image/transaction log writing
> ------------------------------------------------------
>
>          Key: HADOOP-335
>          URL: http://issues.apache.org/jira/browse/HADOOP-335
>      Project: Hadoop
>         Type: Improvement

>     Reporter: Owen O'Malley
>  Attachments: FSImage_Refactor1.patch
>
> Factor the checkpoint/transaction log handling code out of FSNameSystem into its own class.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jul 13 00:30:33 2006
Return-Path: 
 <hadoop-dev-return-2515-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67791 invoked from network); 13 Jul 2006 00:30:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2006 00:30:33 -0000
Received: (qmail 55396 invoked by uid 500); 13 Jul 2006 00:30:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55349 invoked by uid 500); 13 Jul 2006 00:30:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55340 invoked by uid 99); 13 Jul 2006 00:30:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 17:30:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 17:30:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7D891410505
	for <hadoop-dev@lucene.apache.org>; Thu, 13 Jul 2006 00:28:33 +0000 (GMT)
Message-ID: <2431788.1152750513511.JavaMail.jira@brutus>
Date: Thu, 13 Jul 2006 00:28:33 +0000 (GMT+00:00)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-335) factor out the namespace
 image/transaction log writing
In-Reply-To: <14300759.1151602229834.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-335?page=all ]

Konstantin Shvachko reassigned HADOOP-335:
------------------------------------------

    Assign To: Konstantin Shvachko

> factor out the namespace image/transaction log writing
> ------------------------------------------------------
>
>          Key: HADOOP-335
>          URL: http://issues.apache.org/jira/browse/HADOOP-335
>      Project: Hadoop
>         Type: Improvement

>     Reporter: Owen O'Malley
>     Assignee: Konstantin Shvachko
>  Attachments: FSImage_Refactor1.patch
>
> Factor the checkpoint/transaction log handling code out of FSNameSystem into its own class.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jul 13 06:50:45 2006
Return-Path: 
 <hadoop-dev-return-2516-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 69302 invoked from network); 13 Jul 2006 06:50:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2006 06:50:45 -0000
Received: (qmail 25279 invoked by uid 500); 13 Jul 2006 06:50:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 25261 invoked by uid 500); 13 Jul 2006 06:50:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 25252 invoked by uid 99); 13 Jul 2006 06:50:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 23:50:43 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of himars@gmail.com designates
 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 23:50:42 -0700
Received: by nf-out-0910.google.com with SMTP id p48so60425nfa
        for <hadoop-dev@lucene.apache.org>;
 Wed, 12 Jul 2006 23:50:21 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=GHbeUC7mgogzLKUsLnw8rNmr35KJTklmab4gKxIFkXlmevT+vBGP1eHarHJ1WcW0Wdjj3w0hdR99rR7f6gVzxVnqQjoeAFfcfLeKpREYkVkSfgHL4hiTIdq6XxG9hllQs1oZq8QuvmLbKdE5OYW8I7ftpecRM7QSGATKqiaO3tQ=
Received: by 10.48.1.4 with SMTP id 4mr514386nfa;
        Wed, 12 Jul 2006 23:50:21 -0700 (PDT)
Received: by 10.48.208.14 with HTTP; Wed, 12 Jul 2006 23:50:21 -0700 (PDT)
Message-ID: <1263a5c70607122350q68426c79x1ea0bbac3007837d@mail.gmail.com>
Date: Thu, 13 Jul 2006 14:50:21 +0800
From: "Jack Tang" <himars@gmail.com>
To: hadoop-dev@lucene.apache.org
Subject: Google's upgrading layer for Distributed Systems (aka. upstarts).
MIME-Version: 1.0
Content-Type: text/plain; charset=GB2312; format=flowed
Content-Transfer-Encoding: base64
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

aHR0cDovL3BtZy5jc2FpbC5taXQuZWR1L35ham1hbmkvcGFwZXJzL2Vjb29wMDYtdXBncmFkZXMu
cGRmCgovSmFjawotLSAKS2VlcCBEaXNjb3ZlcmluZyAuLi4gLi4uCkNvcGVuaGFnZW4gU3Bpcml0
ID0KuN+2yLXE1sfBprvutq+horTztai1xMnmz9W+q8nxoaLJ7rDCtcTR0L6/xNrI3dPrv+y77rXE
wNbM7Nb30uW1xLvsus/O76OuCg==

From MAILER-DAEMON Thu Jul 13 12:19:33 2006
Return-Path: 
 <hadoop-dev-return-2517-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12903 invoked from network); 13 Jul 2006 12:19:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2006 12:19:33 -0000
Received: (qmail 43689 invoked by uid 500); 13 Jul 2006 12:19:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 43617 invoked by uid 500); 13 Jul 2006 12:19:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 43593 invoked by uid 99); 13 Jul 2006 12:19:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 05:19:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 05:19:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A54CE410009
	for <hadoop-dev@lucene.apache.org>; Thu, 13 Jul 2006 12:17:30 +0000 (GMT)
Message-ID: <2351012.1152793050674.JavaMail.jira@brutus>
Date: Thu, 13 Jul 2006 12:17:30 +0000 (GMT+00:00)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-362) tasks can get lost when reporting
 task completion to the JobTracker has an error
In-Reply-To: <22559656.1152744030813.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-362?page=comments#action_12420857 ] 

Devaraj Das commented on HADOOP-362:
------------------------------------

Thanks Owen for putting this up on Jira! Well the code snippet that I sent you was a quick & dirty hack for the problem I was facing. Of course, yours is a much more elaborate solution. However, with this patch, the problem appears somewhere else - the reduces don't make progress. Even after all maps finish, the reduces remain stuck at 0% progress.
I haven't yet fully analyzed your patch. I will do that.

> tasks can get lost when reporting task completion to the JobTracker has an error
> --------------------------------------------------------------------------------
>
>          Key: HADOOP-362
>          URL: http://issues.apache.org/jira/browse/HADOOP-362
>      Project: Hadoop
>         Type: Bug

>   Components: mapred
>     Reporter: Devaraj Das
>     Assignee: Devaraj Das
>  Attachments: lost-status-updates.patch
>
> Basically, the JobTracker used to lose some updates about successful map tasks and it would assume that the tasks are still running (the old progress report is what it used to display in the web page). Now this would cause the reduces to also wait for the map output and they would never receive the output. This would cause the job to appear as if it was hung.
>  
> The following piece of code sends the status of tasks to the JobTracker:
>  
>             synchronized (this) {
>                 for (Iterator it = runningTasks.values().iterator();
>                      it.hasNext(); ) {
>                     TaskInProgress tip = (TaskInProgress) it.next();
>                     TaskStatus status = tip.createStatus();
>                     taskReports.add(status);
>                     if (status.getRunState() != TaskStatus.RUNNING) {
>                         if (tip.getTask().isMapTask()) {
>                             mapTotal--;
>                         } else {
>                             reduceTotal--;
>                         }
>                         it.remove();
>                     }
>                 }
>             }
>  
>             //
>             // Xmit the heartbeat
>             //
>            
>             TaskTrackerStatus status =
>               new TaskTrackerStatus(taskTrackerName, localHostname,
>                                     httpPort, taskReports,
>                                     failures);
>             int resultCode = jobClient.emitHeartbeat(status, justStarted);
>  
>  
> Notice that the completed TIPs are removed from runningTasks data structure. Now, if the emitHeartBeat threw an exception (if it could not communicate with the JobTracker till the IPC timeout expires) then this update is lost. And the next time it sends the hearbeat this completed task's status is missing and hence the JobTracker doesn't know about this completed task. So, one solution to this is to remove the completed TIPs from runningTasks after emitHeartbeat returns. Here is how the new code would look like:
>  
>  
>             synchronized (this) {
>                 for (Iterator it = runningTasks.values().iterator();
>                      it.hasNext(); ) {
>                     TaskInProgress tip = (TaskInProgress) it.next();
>                     TaskStatus status = tip.createStatus();
>                     taskReports.add(status);
>                 }
>             }
>  
>             //
>             // Xmit the heartbeat
>             //
>  
>             TaskTrackerStatus status =
>               new TaskTrackerStatus(taskTrackerName, localHostname,
>                                     httpPort, taskReports,
>                                     failures);
>             int resultCode = jobClient.emitHeartbeat(status, justStarted);
>             synchronized (this) {
>                 for (Iterator it = runningTasks.values().iterator();
>                      it.hasNext(); ) {
>                     TaskInProgress tip = (TaskInProgress) it.next();
>                     if (tip.runstate != TaskStatus.RUNNING) {
>                         if (tip.getTask().isMapTask()) {
>                             mapTotal--;
>                         } else {
>                             reduceTotal--;
>                         }
>                         it.remove();
>                     }
>                 }
>             }
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jul 13 12:52:31 2006
Return-Path: 
 <hadoop-dev-return-2518-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 22430 invoked from network); 13 Jul 2006 12:52:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2006 12:52:31 -0000
Received: (qmail 95489 invoked by uid 500); 13 Jul 2006 12:52:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95333 invoked by uid 500); 13 Jul 2006 12:52:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95316 invoked by uid 99); 13 Jul 2006 12:52:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 05:52:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 05:52:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AF74F410007
	for <hadoop-dev@lucene.apache.org>; Thu, 13 Jul 2006 12:50:30 +0000 (GMT)
Message-ID: <8680606.1152795030715.JavaMail.jira@brutus>
Date: Thu, 13 Jul 2006 12:50:30 +0000 (GMT+00:00)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-312) Connections should not be cached
In-Reply-To: <13061881.1150916131961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-312?page=comments#action_12420868 ] 

Devaraj Das commented on HADOOP-312:
------------------------------------

I have a version of the patch for this but am not able to release it because of the problem described in Hadoop-362.  I use randomwriter and sort as my regular test cases. Strangely enough, the problem described in Hadoop-362 surfaces only when I run the sort benchmark *with* the patch for this issue.

> Connections should not be cached
> --------------------------------
>
>          Key: HADOOP-312
>          URL: http://issues.apache.org/jira/browse/HADOOP-312
>      Project: Hadoop
>         Type: Improvement

>   Components: ipc
>     Versions: 0.4.0
>     Reporter: Devaraj Das
>  Attachments: config_connection_cache.patch
>
> Servers and clients (client include datanodes, tasktrackers, DFSClients & tasks) should not cache connections or maybe cache them for very short periods of time. Clients should set up & tear down connections to the servers everytime they need to contact the servers (including the heartbeats). If connection is cached, then reuse the existing connection for a few subsequent transactions until the connection expires. The heartbeat interval should be more so that many more clients (order of  tens of thousands) can be accomodated within 1 heartbeat interval.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jul 13 15:50:32 2006
Return-Path: 
 <hadoop-dev-return-2519-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9786 invoked from network); 13 Jul 2006 15:50:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2006 15:50:32 -0000
Received: (qmail 15687 invoked by uid 500); 13 Jul 2006 15:50:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15644 invoked by uid 500); 13 Jul 2006 15:50:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 15635 invoked by uid 99); 13 Jul 2006 15:50:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 08:50:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 08:50:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A856241000A
	for <hadoop-dev@lucene.apache.org>; Thu, 13 Jul 2006 15:48:30 +0000 (GMT)
Message-ID: <22725687.1152805710686.JavaMail.jira@brutus>
Date: Thu, 13 Jul 2006 15:48:30 +0000 (GMT+00:00)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-347) Implement HDFS content browsing
 interface
In-Reply-To: <17227613.1152182310090.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-347?page=comments#action_12420885 ] 

Yoram Arnon commented on HADOOP-347:
------------------------------------

a typical scenario is for a user to click on a generic link from some front page to browse the dfs, without specifying a file. The namenode will redirect to a datanode, the user browses the directory hierarchy, then views files.
it's thus impossible to direct the client to the datanode that contains the first block of "the file" - it's not known when the client first connects.

one way to go about this, is to have the datanode do redirection too when actual contents are requested. In that case we don't need to stop with the first block. Since GET requests are stateless, the client can be redirected every time he needs a new dfs block.
I suggest pushing this all out for a later version for simplicity. Have the client connect to a random node and keep him there, just load balancing clients.

> Implement HDFS content browsing interface
> -----------------------------------------
>
>          Key: HADOOP-347
>          URL: http://issues.apache.org/jira/browse/HADOOP-347
>      Project: Hadoop
>         Type: New Feature

>   Components: dfs
>     Versions: 0.1.0, 0.2.0, 0.1.1, 0.3.0, 0.4.0, 0.2.1, 0.3.1, 0.3.2
>     Reporter: Devaraj Das
>     Assignee: Devaraj Das
>      Fix For: 0.5.0

>
> Implement HDFS content browsing interface over HTTP. Clients would connect to the NameNode and this would send a redirect to a random DataNode. The DataNode, via dfs client, would proxy to namenode for metadata browsing and to other datanodes for content. One can also view the local blocks on any DataNode. Head, Tail will be provided as shorthands for viewing the first block and the last block of a file. 
> For full file viewing, the data displayed per HTTP request will be a block with a PREV/NEXT link. The block size for viewing can be a configurable parameter (the user sets it via the web browser) to the HTTP server (e.g., 256 KB can be the default block size for viewing files).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jul 13 17:30:32 2006
Return-Path: 
 <hadoop-dev-return-2520-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 49669 invoked from network); 13 Jul 2006 17:30:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2006 17:30:32 -0000
Received: (qmail 35988 invoked by uid 500); 13 Jul 2006 17:30:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 35974 invoked by uid 500); 13 Jul 2006 17:30:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 35965 invoked by uid 99); 13 Jul 2006 17:30:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 10:30:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 10:30:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D21E341000A
	for <hadoop-dev@lucene.apache.org>; Thu, 13 Jul 2006 17:28:30 +0000 (GMT)
Message-ID: <23710251.1152811710857.JavaMail.jira@brutus>
Date: Thu, 13 Jul 2006 17:28:30 +0000 (GMT+00:00)
From: "Barry Kaplan (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-354) All daemons should have public methods
 to start and stop them
In-Reply-To: <17281484.1152293189827.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-354?page=all ]

Barry Kaplan updated HADOOP-354:
--------------------------------

    Attachment: shutdown_patch.txt

Patch includes updated javadoc as well as shutdownAll() method on DataNode

> All daemons should have public methods to start and stop them
> -------------------------------------------------------------
>
>          Key: HADOOP-354
>          URL: http://issues.apache.org/jira/browse/HADOOP-354
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.4.0
>     Reporter: Barry Kaplan
>  Attachments: shutdown_patch, shutdown_patch.txt
>
> To get tomcat working shutdown working properly I needed to make the NameNode stop() method public as well as the DataNode shutdown() method public. (will attach patch file).
> Furthermore I noticed that the RPC object has a static client reference that you have no way of stopping, so I added one. (will attach patch)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jul 13 18:21:32 2006
Return-Path: 
 <hadoop-dev-return-2521-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 72950 invoked from network); 13 Jul 2006 18:21:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2006 18:21:32 -0000
Received: (qmail 26429 invoked by uid 500); 13 Jul 2006 18:21:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26405 invoked by uid 500); 13 Jul 2006 18:21:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26395 invoked by uid 99); 13 Jul 2006 18:21:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 11:21:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 11:21:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A571341000A
	for <hadoop-dev@lucene.apache.org>; Thu, 13 Jul 2006 18:19:30 +0000 (GMT)
Message-ID: <12826454.1152814770674.JavaMail.jira@brutus>
Date: Thu, 13 Jul 2006 18:19:30 +0000 (GMT+00:00)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-347) Implement HDFS content browsing
 interface
In-Reply-To: <17227613.1152182310090.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-347?page=comments#action_12420906 ] 

Devaraj Das commented on HADOOP-347:
------------------------------------

I am taking the approach where the user first connects to the namenode's jetty and he gets redirected to a random datanode. The random datanode (having an embedded DFS client) then gets the directory listing (starting at the root) from the namenode (through the regular IPC channel). The user then probably chooses a file to view - the JSP at the backend lists the blocks of the file and he also gets options to do HEAD, TAIL, DOWNLOAD_FULL_FILE, and, BLOCK_VIEW (view the contents of the block in a chunked fashion with a prev, next for navigation). 

For these options he gets redirected to one of the datanodes which has the block that he ought to view. That can be handled since the LocatedBlock array obtained by doing dfs.namenode.open returns an array of blocks  (in the order of the bytes of the file) and the block number & offset within that can be kept track of since the client sends, as part of each HTTP request, the block number he currently is at along with the offsets (start, end) that he wants to view next. If the current datanode finishes serving up all the chunks for the current block the client gets redirected to one of the datanodes that has the next block with chunk offsets (0, <some-preconfigured-value>). The current datanode knows where to send the client to since it can also obtain the LocatedBlock array from the namenode and figure that out from the array. The offset end (<some-preconfigured-value>) can be customized by the user but must be a factor of the DFS block size that the file was created with.

> Implement HDFS content browsing interface
> -----------------------------------------
>
>          Key: HADOOP-347
>          URL: http://issues.apache.org/jira/browse/HADOOP-347
>      Project: Hadoop
>         Type: New Feature

>   Components: dfs
>     Versions: 0.1.0, 0.2.0, 0.1.1, 0.3.0, 0.4.0, 0.2.1, 0.3.1, 0.3.2
>     Reporter: Devaraj Das
>     Assignee: Devaraj Das
>      Fix For: 0.5.0

>
> Implement HDFS content browsing interface over HTTP. Clients would connect to the NameNode and this would send a redirect to a random DataNode. The DataNode, via dfs client, would proxy to namenode for metadata browsing and to other datanodes for content. One can also view the local blocks on any DataNode. Head, Tail will be provided as shorthands for viewing the first block and the last block of a file. 
> For full file viewing, the data displayed per HTTP request will be a block with a PREV/NEXT link. The block size for viewing can be a configurable parameter (the user sets it via the web browser) to the HTTP server (e.g., 256 KB can be the default block size for viewing files).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jul 13 23:32:32 2006
Return-Path: 
 <hadoop-dev-return-2522-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94349 invoked from network); 13 Jul 2006 23:32:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2006 23:32:32 -0000
Received: (qmail 73760 invoked by uid 500); 13 Jul 2006 23:32:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 73603 invoked by uid 500); 13 Jul 2006 23:32:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 73594 invoked by uid 99); 13 Jul 2006 23:32:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 16:32:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 16:32:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A554D41000C
	for <hadoop-dev@lucene.apache.org>; Thu, 13 Jul 2006 23:30:30 +0000 (GMT)
Message-ID: <25699592.1152833430674.JavaMail.jira@brutus>
Date: Thu, 13 Jul 2006 23:30:30 +0000 (GMT+00:00)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-252) add versioning to RPC
In-Reply-To: <23799650.1148510309896.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-252?page=comments#action_12420965 ] 

Milind Bhandarkar commented on HADOOP-252:
------------------------------------------

One minor change, the VersionedProtocol base interface contains exactly one method:

public long getProtocolVersion(String protocolClassName, long clientVersionID);

This is because servers that implement multiple protocols can return appropriate versionID's corresponding to the proxy.
Later versions can also adapt their behavior according to the client version. If a server is adaptive, then it can return the less of client version and server version. (negotiation is left to the implementor of these adaptive protocols).

Currently, the server ignores the clientVersion, and returns its own version for the requested interface.

I will submit a patch shortly.

> add versioning to RPC
> ---------------------
>
>          Key: HADOOP-252
>          URL: http://issues.apache.org/jira/browse/HADOOP-252
>      Project: Hadoop
>         Type: Improvement

>   Components: ipc
>     Versions: 0.3.0
>     Reporter: Yoram Arnon
>      Fix For: 0.5.0

>
> currently, any change to any rpc message breaks the protocol, with mysterious exceptions occurring at run time.
> a versioning sceme would have two benefits:
> - intelligent error messages, indicating that an upgrade is required
> - backwards compatibility could be supported.
> the proposal is to add a "const version" for each protocol, and a method: int getVersion(int version) that sends the client's version and receives the server's version. This would be the first method invoked on connection. Both sides then either agree on the lowest version number, providing backwards compatibility support, or abort the connection as "unsupported version".

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Thu Jul 13 23:39:41 2006
Return-Path: 
 <hadoop-dev-return-2523-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99079 invoked from network); 13 Jul 2006 23:39:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2006 23:39:41 -0000
Received: (qmail 87142 invoked by uid 500); 13 Jul 2006 23:39:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 87118 invoked by uid 500); 13 Jul 2006 23:39:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 87107 invoked by uid 99); 13 Jul 2006 23:39:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 16:39:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 16:39:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0E5C2410015
	for <hadoop-dev@lucene.apache.org>; Thu, 13 Jul 2006 23:37:34 +0000 (GMT)
Message-ID: <28376519.1152833854056.JavaMail.jira@brutus>
Date: Thu, 13 Jul 2006 23:37:34 +0000 (GMT+00:00)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-252) add versioning to RPC
In-Reply-To: <23799650.1148510309896.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-252?page=all ]

Milind Bhandarkar updated HADOOP-252:
-------------------------------------

    Attachment: rpc-versioning.patch

Added versioning to RPC mechanism.

> add versioning to RPC
> ---------------------
>
>          Key: HADOOP-252
>          URL: http://issues.apache.org/jira/browse/HADOOP-252
>      Project: Hadoop
>         Type: Improvement

>   Components: ipc
>     Versions: 0.3.0
>     Reporter: Yoram Arnon
>      Fix For: 0.5.0
>  Attachments: rpc-versioning.patch
>
> currently, any change to any rpc message breaks the protocol, with mysterious exceptions occurring at run time.
> a versioning sceme would have two benefits:
> - intelligent error messages, indicating that an upgrade is required
> - backwards compatibility could be supported.
> the proposal is to add a "const version" for each protocol, and a method: int getVersion(int version) that sends the client's version and receives the server's version. This would be the first method invoked on connection. Both sides then either agree on the lowest version number, providing backwards compatibility support, or abort the connection as "unsupported version".

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jul 14 07:32:33 2006
Return-Path: 
 <hadoop-dev-return-2524-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 71528 invoked from network); 14 Jul 2006 07:32:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2006 07:32:33 -0000
Received: (qmail 10679 invoked by uid 500); 14 Jul 2006 07:32:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 10571 invoked by uid 500); 14 Jul 2006 07:32:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 10562 invoked by uid 99); 14 Jul 2006 07:32:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 00:32:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 00:32:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id ACA6F41000C
	for <hadoop-dev@lucene.apache.org>; Fri, 14 Jul 2006 07:30:30 +0000 (GMT)
Message-ID: <3534620.1152862230704.JavaMail.jira@brutus>
Date: Fri, 14 Jul 2006 07:30:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-307) Many small jobs benchmark for
 MapReduce
In-Reply-To: <13009062.1150636529837.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-307?page=comments#action_12421030 ] 

Doug Cutting commented on HADOOP-307:
-------------------------------------

> The only reason to keep it separate is we dont want these jar files already in classpath on all nodes.

Then let's put this in src/contrib/small-job-benchmark, ok?  Its build.xml should have "deploy", "test", and "clean" targets.  Michel is working on a patch so that all modules in src/contrib will be compiled and tested by the top-level "test" target.

> Many small jobs benchmark for MapReduce
> ---------------------------------------
>
>          Key: HADOOP-307
>          URL: http://issues.apache.org/jira/browse/HADOOP-307
>      Project: Hadoop
>         Type: Task

>   Components: mapred
>     Reporter: Sanjay Dahiya
>     Priority: Minor
>  Attachments: patch.txt
>
> A benchmark that runs many small MapReduce tasks in sequence. A single map reduce implementation is used, it is invoked multiple times with input as the output from previous run. The input to first Map is a TextInputFormat ( a text file with few hundred KBs). Input records are passed to output without much processing. The idea is to benchmark the time taken by initialization of Mapper and Reducer. An initial prototyping on a single machine with 20 MR tasks in sequence took ~47 seconds per task. Looking for suggestions on what else can be included in the benchmark. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jul 14 07:49:32 2006
Return-Path: 
 <hadoop-dev-return-2525-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75435 invoked from network); 14 Jul 2006 07:49:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2006 07:49:32 -0000
Received: (qmail 30804 invoked by uid 500); 14 Jul 2006 07:49:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 30653 invoked by uid 500); 14 Jul 2006 07:49:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 30641 invoked by uid 99); 14 Jul 2006 07:49:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 00:49:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 00:49:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C5FA4410011
	for <hadoop-dev@lucene.apache.org>; Fri, 14 Jul 2006 07:47:30 +0000 (GMT)
Message-ID: <539823.1152863250778.JavaMail.jira@brutus>
Date: Fri, 14 Jul 2006 07:47:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-341) Enhance distcp to handle *http* as a
 'source protocol'.
In-Reply-To: <18620957.1151927429856.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-341?page=all ]
     
Doug Cutting resolved HADOOP-341:
---------------------------------

    Fix Version: 0.5.0
     Resolution: Fixed

I just committed this.  Thanks, Arun.

> Enhance distcp to handle *http* as a 'source protocol'.
> -------------------------------------------------------
>
>          Key: HADOOP-341
>          URL: http://issues.apache.org/jira/browse/HADOOP-341
>      Project: Hadoop
>         Type: Improvement

>   Components: util
>     Reporter: Arun C Murthy
>      Fix For: 0.5.0
>  Attachments: distcp.patch, distcp2.patch
>
> Requirements:
>   Presently distcp recursively copies a directory from one dfs to another i.e. both source and destination of of the *dfs* protocol.
>   Enhance it to handle *http* as the source protocol i.e. support copying files from arbitrary http-based sources into the dfs.
> Design:
>   
>   Follow distcp's current design: one map task per file which needs to be copied.
>   Caveat: distcp handles *recursive* copying by listing sub-directories; this is not as feasible with a http-based source since things like 'fancy-indexing' might not be enabled on the web-server (for all sub-locations recursively too), and even if it is enabled it will mean tedious parsing of the html served to glean the sub-directories etc. Hence the idea is to support an input file (via a -f option) which contains a list of the http-based urls which represent multiple source files.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jul 14 07:56:32 2006
Return-Path: 
 <hadoop-dev-return-2526-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 81015 invoked from network); 14 Jul 2006 07:56:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2006 07:56:32 -0000
Received: (qmail 41482 invoked by uid 500); 14 Jul 2006 07:56:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 41457 invoked by uid 500); 14 Jul 2006 07:56:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 41447 invoked by uid 99); 14 Jul 2006 07:56:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 00:56:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 00:56:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A895B410011
	for <hadoop-dev@lucene.apache.org>; Fri, 14 Jul 2006 07:54:30 +0000 (GMT)
Message-ID: <26376938.1152863670687.JavaMail.jira@brutus>
Date: Fri, 14 Jul 2006 07:54:30 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-361) junit with pure-Java hadoopStreaming
 combiner; remove CRLF in some files
In-Reply-To: <18429830.1152739830930.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-361?page=all ]
     
Doug Cutting resolved HADOOP-361:
---------------------------------

    Fix Version: 0.5.0
     Resolution: Fixed

I just committed this.  Thanks, Michel!

> junit with pure-Java hadoopStreaming combiner; remove CRLF in some files
> ------------------------------------------------------------------------
>
>          Key: HADOOP-361
>          URL: http://issues.apache.org/jira/browse/HADOOP-361
>      Project: Hadoop
>         Type: Improvement

>   Components: contrib/streaming
>     Reporter: Michel Tourn
>      Fix For: 0.5.0
>  Attachments: streaming.junit.patch
>
> junit with pure-Java hadoopStreaming combiner
> remove CRLF in some files
> When this is committed, the hadoopStreaming tests should be pure-Java.
> This implies that hadoopStreaming can safely be built nightly without plaftorm dependencies.
> After I check that this is the case I will update the build.xml in this issue:
> HADOOP-356  	 Build and test hadoopStreaming nightly

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jul 14 08:09:34 2006
Return-Path: 
 <hadoop-dev-return-2527-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 88266 invoked from network); 14 Jul 2006 08:09:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2006 08:09:34 -0000
Received: (qmail 63513 invoked by uid 500); 14 Jul 2006 08:09:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63479 invoked by uid 500); 14 Jul 2006 08:09:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63470 invoked by uid 99); 14 Jul 2006 08:09:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 01:09:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 01:09:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 308F4410011
	for <hadoop-dev@lucene.apache.org>; Fri, 14 Jul 2006 08:07:31 +0000 (GMT)
Message-ID: <1470846.1152864451196.JavaMail.jira@brutus>
Date: Fri, 14 Jul 2006 08:07:31 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-237) Standard set of Performance Metrics
 for Hadoop
In-Reply-To: <14919853.1148078609860.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-237?page=comments#action_12421035 ] 

Doug Cutting commented on HADOOP-237:
-------------------------------------

I still feel the duplicate could should be removed.  Performance should not motivate this: HotSpot should be able to inline regardless.  Nearly identical code is repeated in eight places, differing only in a constant string, which can easily be made a paramter.  If local modifications are required, then the common implementation can be subclassed or not used, but currently there are effectively no local modifications.

Also, you're still ignoring rather than logging exceptions.

This code will become the prototypical use of the metrics API.  We should make sure that it looks good.  If boilerplate code is required for prototypical use, then that boilerplate should become utility methods and/or classes in the metrics package, and the metrics package-level javadoc should encourage this use.  Insertion of metrics code should be minimally invasive.

> Standard set of Performance Metrics for Hadoop
> ----------------------------------------------
>
>          Key: HADOOP-237
>          URL: http://issues.apache.org/jira/browse/HADOOP-237
>      Project: Hadoop
>         Type: Improvement

>   Components: metrics
>     Versions: 0.3.0
>  Environment: All
>     Reporter: Milind Bhandarkar
>     Assignee: Milind Bhandarkar
>  Attachments: hadoop-metrics.patch
>
> I am starting to use Hadoop's shiny new Metrics API to publish performance (and other) Metrics of running jobs and other daemons.
> Which performance metrics are people interested in seeing ? If possible, please group them according to modules, such as map-reduce, dfs, general-cluster-related etc. I will follow this process:
> 1. collect this list
> 2. assess feasibility of obtaining metric
> 3. assign context/record/metrics names
> 4. seek approval for names
> 5. instrument the code.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jul 14 08:24:33 2006
Return-Path: 
 <hadoop-dev-return-2528-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94852 invoked from network); 14 Jul 2006 08:24:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2006 08:24:33 -0000
Received: (qmail 90470 invoked by uid 500); 14 Jul 2006 08:24:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 90321 invoked by uid 500); 14 Jul 2006 08:24:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 90312 invoked by uid 99); 14 Jul 2006 08:24:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 01:24:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 01:24:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 29C79410013
	for <hadoop-dev@lucene.apache.org>; Fri, 14 Jul 2006 08:22:31 +0000 (GMT)
Message-ID: <28345367.1152865351168.JavaMail.jira@brutus>
Date: Fri, 14 Jul 2006 08:22:31 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-335) factor out the namespace
 image/transaction log writing
In-Reply-To: <14300759.1151602229834.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-335?page=comments#action_12421038 ] 

Doug Cutting commented on HADOOP-335:
-------------------------------------

You mix indentation and style changes with functional changes.  Can you please keep these separate?  If you like, make the style changes, but as a separate patch, so that your patch is easier to evaluate.  It's a good practice to preview your patches and make sure that each change in the patch is required by the issue the patch purports to fix.


> factor out the namespace image/transaction log writing
> ------------------------------------------------------
>
>          Key: HADOOP-335
>          URL: http://issues.apache.org/jira/browse/HADOOP-335
>      Project: Hadoop
>         Type: Improvement

>     Reporter: Owen O'Malley
>     Assignee: Konstantin Shvachko
>  Attachments: FSImage_Refactor1.patch
>
> Factor the checkpoint/transaction log handling code out of FSNameSystem into its own class.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jul 14 08:47:35 2006
Return-Path: 
 <hadoop-dev-return-2529-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 3496 invoked from network); 14 Jul 2006 08:47:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2006 08:47:35 -0000
Received: (qmail 21107 invoked by uid 500); 14 Jul 2006 08:47:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 21072 invoked by uid 500); 14 Jul 2006 08:47:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 21057 invoked by uid 99); 14 Jul 2006 08:47:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 01:47:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 01:47:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6ECB9410015
	for <hadoop-dev@lucene.apache.org>; Fri, 14 Jul 2006 08:45:32 +0000 (GMT)
Message-ID: <384510.1152866732451.JavaMail.jira@brutus>
Date: Fri, 14 Jul 2006 08:45:32 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-354) All daemons should have public
 methods to start and stop them
In-Reply-To: <17281484.1152293189827.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-354?page=all ]
     
Doug Cutting resolved HADOOP-354:
---------------------------------

    Fix Version: 0.5.0
     Resolution: Fixed

I just committed this.  Thanks, Barry!

> All daemons should have public methods to start and stop them
> -------------------------------------------------------------
>
>          Key: HADOOP-354
>          URL: http://issues.apache.org/jira/browse/HADOOP-354
>      Project: Hadoop
>         Type: Bug

>   Components: dfs
>     Versions: 0.4.0
>     Reporter: Barry Kaplan
>      Fix For: 0.5.0
>  Attachments: shutdown_patch, shutdown_patch.txt
>
> To get tomcat working shutdown working properly I needed to make the NameNode stop() method public as well as the DataNode shutdown() method public. (will attach patch file).
> Furthermore I noticed that the RPC object has a static client reference that you have no way of stopping, so I added one. (will attach patch)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jul 14 09:13:33 2006
Return-Path: 
 <hadoop-dev-return-2530-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9713 invoked from network); 14 Jul 2006 09:13:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2006 09:13:33 -0000
Received: (qmail 50218 invoked by uid 500); 14 Jul 2006 09:13:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 50190 invoked by uid 500); 14 Jul 2006 09:13:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 50181 invoked by uid 99); 14 Jul 2006 09:13:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 02:13:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 02:13:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 26306410605
	for <hadoop-dev@lucene.apache.org>; Fri, 14 Jul 2006 09:11:31 +0000 (GMT)
Message-ID: <11726293.1152868291152.JavaMail.jira@brutus>
Date: Fri, 14 Jul 2006 09:11:31 +0000 (GMT+00:00)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-252) add versioning to RPC
In-Reply-To: <23799650.1148510309896.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-252?page=all ]
     
Doug Cutting resolved HADOOP-252:
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Milind!

> add versioning to RPC
> ---------------------
>
>          Key: HADOOP-252
>          URL: http://issues.apache.org/jira/browse/HADOOP-252
>      Project: Hadoop
>         Type: Improvement

>   Components: ipc
>     Versions: 0.3.0
>     Reporter: Yoram Arnon
>      Fix For: 0.5.0
>  Attachments: rpc-versioning.patch
>
> currently, any change to any rpc message breaks the protocol, with mysterious exceptions occurring at run time.
> a versioning sceme would have two benefits:
> - intelligent error messages, indicating that an upgrade is required
> - backwards compatibility could be supported.
> the proposal is to add a "const version" for each protocol, and a method: int getVersion(int version) that sends the client's version and receives the server's version. This would be the first method invoked on connection. Both sides then either agree on the lowest version number, providing backwards compatibility support, or abort the connection as "unsupported version".

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


From MAILER-DAEMON Fri Jul 14 11:39:17 2006
Return-Path: 
 <hadoop-dev-return-2531-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 65223 invoked from network); 14 Jul 2006 11:39:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2006 11:39:17 -0000
Received: (qmail 86751 invoked by uid 500); 14 Jul 2006 11:39:16 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86728 invoked by uid 500); 14 Jul 2006 11:39:16 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86719 invoked by uid 99); 14 Jul 2006 11:39:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 04:39:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 04:39:16 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B65B0410013
	for <hadoop-dev@lucene.apache.org>; Fri, 14 Jul 2006 11:37:14 +0000 (GMT)
Message-ID: <5736065.1152877034743.JavaMail.jira@brutus>
Date: Fri, 14 Jul 2006 04:37:14 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-281) dfs.FSDirectory.mkdirs can create
 sub-directories of a file!
In-Reply-To: <19818580.1149635189767.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-281?page=all ]

Arun C Murthy updated HADOOP-281:
---------------------------------

    Attachment: mkdirs.patch

I have attached a fairly simple patch which essentially checks to ensure that all existing components of the path are directories by checking while 'collecting' the parents in dfs.FSDirectory.mkdirs.

This patch also necessiated (straightforward) changes to a few places where the return-value of 'mkdirs' wasn't being checked...

thanks,
Arun

> dfs.FSDirectory.mkdirs can create sub-directories of a file!
> ------------------------------------------------------------
>
>                 Key: HADOOP-281
>                 URL: http://issues.apache.org/jira/browse/HADOOP-281
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.3.1
>            Reporter: Sameer Paranjpye
>             Fix For: 0.5.0
>
>         Attachments: mkdirs.patch
>
>
> dfs.FSDirectory.mkdirs will merrily adds children to a directory tree node without checking whether it represents a directory. So it is possible to create a subdirectories of a file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 14 17:17:22 2006
Return-Path: 
 <hadoop-dev-return-2532-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 22140 invoked from network); 14 Jul 2006 17:17:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2006 17:17:22 -0000
Received: (qmail 81549 invoked by uid 500); 14 Jul 2006 17:17:19 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 81499 invoked by uid 500); 14 Jul 2006 17:17:19 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 81184 invoked by uid 99); 14 Jul 2006 17:17:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 10:17:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 10:17:17 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DF35D41001C
	for <hadoop-dev@lucene.apache.org>; Fri, 14 Jul 2006 17:15:15 +0000 (GMT)
Message-ID: <29305030.1152897315911.JavaMail.jira@brutus>
Date: Fri, 14 Jul 2006 10:15:15 -0700 (PDT)
From: "Dick King (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-363) When combiners exist, postpone
 mappers' spills of map output to disk until combiners are unsuccessful.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

When combiners exist, postpone mappers' spills of map output to disk until combiners are unsuccessful.
------------------------------------------------------------------------------------------------------

                 Key: HADOOP-363
                 URL: http://issues.apache.org/jira/browse/HADOOP-363
             Project: Hadoop
          Issue Type: Improvement
          Components: mapred
            Reporter: Dick King


When a map/reduce job is set up with a combiner, the mapper tasks each build up an in-heap collection of 100K key/value pairs -- and then apply the combiner to reduce that to whatever it becomes by applying the combiner to sets with like keys before spilling to disk to send it to the reducers.

Typically running the combiner consumes a lot less resources than shipping the data, especially since the data end up in a reducer where probably the same code will be run anyway.

I would like to see this changed so that when the combiner shrinks the 100K key/value pairs to less than, say, 90K, we just keep running the mapper and combiner alternately until we get enough distinct keys to make this unlikely to be worthwhile [or until we run out of input, of course].

This has two costs: the whole internal buffer has to be re-sorted so we can apply the combiner even though as few as 10K new elements have been added, and in some cases we'll call the combiner on many singletons.  

The first of these costs can be avoided by doing a mini-sort in the new pairs section and doing a merge to develop the combiner sets and the new sorted retained elements section.

The second of these costs can be avoided by detecting what would otherwise be singleton combiner calls and not making them, which is a good idea in itself even if we don't decide to do this reform.

The two techniques combine well; recycled elements of the buffer need not be combined if there's no new element with the same key.

-dk



-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 14 17:58:31 2006
Return-Path: 
 <hadoop-dev-return-2534-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37251 invoked from network); 14 Jul 2006 17:58:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2006 17:58:31 -0000
Received: (qmail 65346 invoked by uid 500); 14 Jul 2006 17:58:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 65320 invoked by uid 500); 14 Jul 2006 17:58:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 65311 invoked by uid 99); 14 Jul 2006 17:58:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 10:58:30 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.145.54.171] (HELO mrout1.yahoo.com) (216.145.54.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 10:58:28 -0700
Received: from explainfloorlx (explainfloor-lx.corp.yahoo.com
 [207.126.231.230])
	by mrout1.yahoo.com (8.13.6/8.13.6/y.out) with ESMTP id k6EHvZm5067966
	for <hadoop-dev@lucene.apache.org>; Fri, 14 Jul 2006 10:57:35 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=from:to:subject:date:message-id:mime-version:content-type:
	content-transfer-encoding:x-mailer:in-reply-to:x-mimeole:thread-index;
	b=ycpmt2cQx+3HJXvhMrCy/t+EqoGBonh7N52n2WqP5GImaPvTVU7QZXyUuUnaC/j4
From: "Runping Qi" <runping@yahoo-inc.com>
To: <hadoop-dev@lucene.apache.org>
Subject: RE: [jira] Created: (HADOOP-363) When combiners exist,
 postpone mappers' spills of map output to disk until combiners are
 unsuccessful.
Date: Fri, 14 Jul 2006 10:57:37 -0700
Message-ID: <004001c6a76e$fe253410$e6e77ecf@ds.corp.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <29305030.1152897315911.JavaMail.jira@brutus>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-Index: AcanaWG/QCd36a8xQCijzpYSf5UHXAAA0r7w
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


That is a good idea. There may be an even simpler improvement.
Basically, in the flush method of CombiningCollector class, you can
selectively decide to run reduce for some keys and not to run for other
keys. A selection criteria can be based on the sizes of the value arrays. 
The goal is to reduce the number of values in the hash table to certain
fraction (say 30%) of the 100K limit by calling reduce function for as fewer
keys as possible. One way to achieve this is to scan the table first to get
a histogram list of the value array sizes. Then determine the maximum number
(a size threshold) such that the total number of values of those keys whose
value array sizes are at or lower than the threshold is lower than a given
number. Then we apply reduce to all the keys whose value array sizes are
greater than the threshold and keep the rest in the table. 

Runping


> -----Original Message-----
> From: Dick King (JIRA) [mailto:jira@apache.org]
> Sent: Friday, July 14, 2006 10:15 AM
> To: hadoop-dev@lucene.apache.org
> Subject: [jira] Created: (HADOOP-363) When combiners exist, postpone
> mappers' spills of map output to disk until combiners are unsuccessful.
> 
> When combiners exist, postpone mappers' spills of map output to disk until
> combiners are unsuccessful.
> --------------------------------------------------------------------------
> ----------------------------
> 
>                  Key: HADOOP-363
>                  URL: http://issues.apache.org/jira/browse/HADOOP-363
>              Project: Hadoop
>           Issue Type: Improvement
>           Components: mapred
>             Reporter: Dick King
> 
> 
> When a map/reduce job is set up with a combiner, the mapper tasks each
> build up an in-heap collection of 100K key/value pairs -- and then apply
> the combiner to reduce that to whatever it becomes by applying the
> combiner to sets with like keys before spilling to disk to send it to the
> reducers.
> 
> Typically running the combiner consumes a lot less resources than shipping
> the data, especially since the data end up in a reducer where probably the
> same code will be run anyway.
> 
> I would like to see this changed so that when the combiner shrinks the
> 100K key/value pairs to less than, say, 90K, we just keep running the
> mapper and combiner alternately until we get enough distinct keys to make
> this unlikely to be worthwhile [or until we run out of input, of course].
> 
> This has two costs: the whole internal buffer has to be re-sorted so we
> can apply the combiner even though as few as 10K new elements have been
> added, and in some cases we'll call the combiner on many singletons.
> 
> The first of these costs can be avoided by doing a mini-sort in the new
> pairs section and doing a merge to develop the combiner sets and the new
> sorted retained elements section.
> 
> The second of these costs can be avoided by detecting what would otherwise
> be singleton combiner calls and not making them, which is a good idea in
> itself even if we don't decide to do this reform.
> 
> The two techniques combine well; recycled elements of the buffer need not
> be combined if there's no new element with the same key.
> 
> -dk
> 
> 
> 
> --
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the administrators:
> http://issues.apache.org/jira/secure/Administrators.jspa
> -
> For more information on JIRA, see: http://www.atlassian.com/software/jira
> 
> 



From MAILER-DAEMON Fri Jul 14 17:58:30 2006
Return-Path: 
 <hadoop-dev-return-2533-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37203 invoked from network); 14 Jul 2006 17:58:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2006 17:58:30 -0000
Received: (qmail 65199 invoked by uid 500); 14 Jul 2006 17:58:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 65129 invoked by uid 500); 14 Jul 2006 17:58:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 65120 invoked by uid 99); 14 Jul 2006 17:58:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 10:58:29 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.126.228.150] (HELO rsmtp2.corp.yahoo.com)
 (207.126.228.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 10:58:28 -0700
Received: from [10.0.1.2] ([172.21.179.131])
	(authenticated bits=0)
	by rsmtp2.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k6EHvpnU016695
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Fri, 14 Jul 2006 10:57:52 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=f0AHJD4b8jr0KE8nEZ3Hrm5hGePMhWNscClplivcIdfcspkbcEvAZVi6Uqe0L8uL
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <12826454.1152814770674.JavaMail.jira@brutus>
References: <12826454.1152814770674.JavaMail.jira@brutus>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <C9425A7F-CFA8-4F26-BDCB-87A80389F2A4@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Eric Baldeschwieler <eric14@yahoo-inc.com>
Subject: Re: [jira] Commented: (HADOOP-347) Implement HDFS content browsing
 interface
Date: Fri, 14 Jul 2006 10:57:50 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

sounds good.


On Jul 13, 2006, at 11:19 AM, Devaraj Das (JIRA) wrote:

>     [ http://issues.apache.org/jira/browse/HADOOP-347? 
> page=comments#action_12420906 ]
>
> Devaraj Das commented on HADOOP-347:
> ------------------------------------
>
> I am taking the approach where the user first connects to the  
> namenode's jetty and he gets redirected to a random datanode. The  
> random datanode (having an embedded DFS client) then gets the  
> directory listing (starting at the root) from the namenode (through  
> the regular IPC channel). The user then probably chooses a file to  
> view - the JSP at the backend lists the blocks of the file and he  
> also gets options to do HEAD, TAIL, DOWNLOAD_FULL_FILE, and,  
> BLOCK_VIEW (view the contents of the block in a chunked fashion  
> with a prev, next for navigation).
>
> For these options he gets redirected to one of the datanodes which  
> has the block that he ought to view. That can be handled since the  
> LocatedBlock array obtained by doing dfs.namenode.open returns an  
> array of blocks  (in the order of the bytes of the file) and the  
> block number & offset within that can be kept track of since the  
> client sends, as part of each HTTP request, the block number he  
> currently is at along with the offsets (start, end) that he wants  
> to view next. If the current datanode finishes serving up all the  
> chunks for the current block the client gets redirected to one of  
> the datanodes that has the next block with chunk offsets (0, <some- 
> preconfigured-value>). The current datanode knows where to send the  
> client to since it can also obtain the LocatedBlock array from the  
> namenode and figure that out from the array. The offset end (<some- 
> preconfigured-value>) can be customized by the user but must be a  
> factor of the DFS block size that the file was created with.
>
>> Implement HDFS content browsing interface
>> -----------------------------------------
>>
>>          Key: HADOOP-347
>>          URL: http://issues.apache.org/jira/browse/HADOOP-347
>>      Project: Hadoop
>>         Type: New Feature
>
>>   Components: dfs
>>     Versions: 0.1.0, 0.2.0, 0.1.1, 0.3.0, 0.4.0, 0.2.1, 0.3.1, 0.3.2
>>     Reporter: Devaraj Das
>>     Assignee: Devaraj Das
>>      Fix For: 0.5.0
>
>>
>> Implement HDFS content browsing interface over HTTP. Clients would  
>> connect to the NameNode and this would send a redirect to a random  
>> DataNode. The DataNode, via dfs client, would proxy to namenode  
>> for metadata browsing and to other datanodes for content. One can  
>> also view the local blocks on any DataNode. Head, Tail will be  
>> provided as shorthands for viewing the first block and the last  
>> block of a file.
>> For full file viewing, the data displayed per HTTP request will be  
>> a block with a PREV/NEXT link. The block size for viewing can be a  
>> configurable parameter (the user sets it via the web browser) to  
>> the HTTP server (e.g., 256 KB can be the default block size for  
>> viewing files).
>
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the  
> administrators:
>    http://issues.apache.org/jira/secure/Administrators.jspa
> -
> For more information on JIRA, see:
>    http://www.atlassian.com/software/jira
>


From MAILER-DAEMON Fri Jul 14 18:03:23 2006
Return-Path: 
 <hadoop-dev-return-2535-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40872 invoked from network); 14 Jul 2006 18:03:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2006 18:03:23 -0000
Received: (qmail 75030 invoked by uid 500); 14 Jul 2006 18:03:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 74998 invoked by uid 500); 14 Jul 2006 18:03:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 74989 invoked by uid 99); 14 Jul 2006 18:03:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 11:03:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 11:03:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2526741001C
	for <hadoop-dev@lucene.apache.org>; Fri, 14 Jul 2006 18:01:19 +0000 (GMT)
Message-ID: <7373728.1152900079149.JavaMail.jira@brutus>
Date: Fri, 14 Jul 2006 11:01:19 -0700 (PDT)
From: "Renaud Richardet (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-350) In standalone mode,
 'org.apache.commons.cli cannot be resolved'
In-Reply-To: <4329338.1152218609766.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-350?page=comments#action_12421179 ] 
            
Renaud Richardet commented on HADOOP-350:
-----------------------------------------

Thanks for the tip Doug. JVM 1.4 is the issue. 

Alas, I need to stay on Java 1.4 for my hadoop install, so I tried to recomplile the commons-cli jar. Not sure if I am using the right source code (/branches/commons-configuration-integration/), and I had to patch some classes because of the .withArgPattern in /nutch/trunk/hadoop/src/java/org/apache/hadoop/util/ToolBase.java (see http://issues.apache.org/jira/browse/CLI-12).

Maybe Hairong can provide more details...

Best,
Renaud

> In standalone mode, 'org.apache.commons.cli cannot be resolved'
> ---------------------------------------------------------------
>
>                 Key: HADOOP-350
>                 URL: http://issues.apache.org/jira/browse/HADOOP-350
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.5.0
>            Reporter: stack@archive.org
>            Priority: Minor
>
> Standalone works fine in 0.4.0 but if I use TRUNK, 'Last Changed Date: 2006-06-28 14:27:33 -0700 (Wed, 28 Jun 2006)', and pass it my fat job jar, I get following exception.
> 06/07/06 13:18:02 INFO conf.Configuration: parsing file:/tmp/hadoop-unjar29923/nutch-site.xml
> 06/07/06 13:18:02 INFO conf.Configuration: parsing file:/home/stack/workspace/hadoop-local-conf/hadoop-site.xml
> Exception in thread "main" java.lang.Error: Unresolved compilation problems:   
>         The import org.apache.commons.cli cannot be resolved
>         The import org.apache.commons.cli cannot be resolved
>         The import org.apache.commons.cli cannot be resolved
>         The import org.apache.commons.cli cannot be resolved       
>         The import org.apache.commons.cli cannot be resolved
>         The import org.apache.commons.cli cannot be resolved
>         The import org.apache.commons.cli cannot be resolved
>         The import org.apache.commons.cli cannot be resolved
>         The import org.apache.commons.cli cannot be resolved
>         Options cannot be resolved to a type
>         Option cannot be resolved to a type
>         OptionBuilder cannot be resolved
>         Option cannot be resolved to a type
>         OptionBuilder cannot be resolved
>         Option cannot be resolved to a type
>         OptionBuilder cannot be resolved
>         Option cannot be resolved to a type
>         OptionBuilder cannot be resolved
>         Options cannot be resolved to a type
>         Options cannot be resolved to a type
>         CommandLine cannot be resolved to a type
>         Options cannot be resolved to a type
>         The method buildGeneralOptions() is undefined for the type ToolBase
>         CommandLineParser cannot be resolved to a type
>         GnuParser cannot be resolved to a type
>         CommandLine cannot be resolved to a type
>         ParseException cannot be resolved to a type
>         e cannot be resolved
>         HelpFormatter cannot be resolved to a type
>         HelpFormatter cannot be resolved to a type
>         at org.apache.hadoop.util.ToolBase.<init>(ToolBase.java:21)
>         at org.apache.hadoop.mapred.JobClient.<init>(JobClient.java:178)
>         at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:320)
>         at org.archive.access.nutch.ImportArcs.importArcs(ImportArcs.java:576)
>         at org.archive.access.nutch.Nutchwax.doImport(Nutchwax.java:159)
>         at org.archive.access.nutch.Nutchwax.doAll(Nutchwax.java:144)
>         at org.archive.access.nutch.Nutchwax.doJob(Nutchwax.java:368)
>         at org.archive.access.nutch.Nutchwax.main(Nutchwax.java:621)
>         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
>         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>         at java.lang.reflect.Method.invoke(Method.java:585)
>         at org.apache.hadoop.util.RunJar.main(RunJar.java:128)
> I took a bit of a look.  Odd is that command-cli.jar is in hadoop/lib dir so should be found no problem (and we seem to be loading other stuff out of the uncompressed job jar fine -- see mention of nutch-site.xml above).   I tried adding the command-cli to my job jar.  I printed out all that RunJar -- see below -- was adding to its CLASSPATH and saw mention of command-cli but still no workee.
> file:/tmp/hadoop-unjar29923/lib/archive-commons-1.8.0.jar
> file:/tmp/hadoop-unjar29923/lib/commons-codec-1.3.jar
> file:/tmp/hadoop-unjar29923/lib/commons-httpclient-3.0-rc3.jar
> file:/tmp/hadoop-unjar29923/lib/commons-logging-1.0.4.jar
> file:/tmp/hadoop-unjar29923/lib/dsi.unimi.it-1.2.0.jar
> file:/tmp/hadoop-unjar29923/lib/commons-lang-2.1.jar
> file:/tmp/hadoop-unjar29923/lib/commons-cli-2.0-SNAPSHOT.jar
> file:/tmp/hadoop-unjar29923/lib/lucene-core-1.9.1.jar
> file:/tmp/hadoop-unjar29923/lib/lucene-misc-1.9.1.jar
> file:/tmp/hadoop-unjar29923/lib/jakarta-oro-2.0.7.jar
> file:/tmp/hadoop-unjar29923/lib/xerces-2_6_2-apis.jar
> file:/tmp/hadoop-unjar29923/lib/xerces-2_6_2.jar
> file:/tmp/hadoop-unjar29923/lib/concurrent-1.3.4.jar
> 06/07/06 13:18:01 INFO conf.Configuration: parsing file:/home/stack/workspace/hadoop-local-conf/hadoop-default.xml 
> Any ideas?
> Thanks.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 14 18:05:18 2006
Return-Path: 
 <hadoop-dev-return-2536-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 41323 invoked from network); 14 Jul 2006 18:05:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2006 18:05:18 -0000
Received: (qmail 76727 invoked by uid 500); 14 Jul 2006 18:05:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 76631 invoked by uid 500); 14 Jul 2006 18:05:18 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 76622 invoked by uid 99); 14 Jul 2006 18:05:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 11:05:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 11:05:17 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 789AC410018
	for <hadoop-dev@lucene.apache.org>; Fri, 14 Jul 2006 18:03:15 +0000 (GMT)
Message-ID: <27474249.1152900195491.JavaMail.jira@brutus>
Date: Fri, 14 Jul 2006 11:03:15 -0700 (PDT)
From: "Renaud Richardet (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-350) In standalone mode,
 'org.apache.commons.cli cannot be resolved'
In-Reply-To: <4329338.1152218609766.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-350?page=all ]

Renaud Richardet updated HADOOP-350:
------------------------------------

    Attachment: commons-cli-2.0-SNAPSHOT.jar

commons cli jar using http://svn.apache.org/repos/asf/jakarta/commons/proper/cli/branches/commons-configuration-integration, patched with CLI-12, compiled with Java 1.4

> In standalone mode, 'org.apache.commons.cli cannot be resolved'
> ---------------------------------------------------------------
>
>                 Key: HADOOP-350
>                 URL: http://issues.apache.org/jira/browse/HADOOP-350
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.5.0
>            Reporter: stack@archive.org
>            Priority: Minor
>         Attachments: commons-cli-2.0-SNAPSHOT.jar
>
>
> Standalone works fine in 0.4.0 but if I use TRUNK, 'Last Changed Date: 2006-06-28 14:27:33 -0700 (Wed, 28 Jun 2006)', and pass it my fat job jar, I get following exception.
> 06/07/06 13:18:02 INFO conf.Configuration: parsing file:/tmp/hadoop-unjar29923/nutch-site.xml
> 06/07/06 13:18:02 INFO conf.Configuration: parsing file:/home/stack/workspace/hadoop-local-conf/hadoop-site.xml
> Exception in thread "main" java.lang.Error: Unresolved compilation problems:   
>         The import org.apache.commons.cli cannot be resolved
>         The import org.apache.commons.cli cannot be resolved
>         The import org.apache.commons.cli cannot be resolved
>         The import org.apache.commons.cli cannot be resolved       
>         The import org.apache.commons.cli cannot be resolved
>         The import org.apache.commons.cli cannot be resolved
>         The import org.apache.commons.cli cannot be resolved
>         The import org.apache.commons.cli cannot be resolved
>         The import org.apache.commons.cli cannot be resolved
>         Options cannot be resolved to a type
>         Option cannot be resolved to a type
>         OptionBuilder cannot be resolved
>         Option cannot be resolved to a type
>         OptionBuilder cannot be resolved
>         Option cannot be resolved to a type
>         OptionBuilder cannot be resolved
>         Option cannot be resolved to a type
>         OptionBuilder cannot be resolved
>         Options cannot be resolved to a type
>         Options cannot be resolved to a type
>         CommandLine cannot be resolved to a type
>         Options cannot be resolved to a type
>         The method buildGeneralOptions() is undefined for the type ToolBase
>         CommandLineParser cannot be resolved to a type
>         GnuParser cannot be resolved to a type
>         CommandLine cannot be resolved to a type
>         ParseException cannot be resolved to a type
>         e cannot be resolved
>         HelpFormatter cannot be resolved to a type
>         HelpFormatter cannot be resolved to a type
>         at org.apache.hadoop.util.ToolBase.<init>(ToolBase.java:21)
>         at org.apache.hadoop.mapred.JobClient.<init>(JobClient.java:178)
>         at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:320)
>         at org.archive.access.nutch.ImportArcs.importArcs(ImportArcs.java:576)
>         at org.archive.access.nutch.Nutchwax.doImport(Nutchwax.java:159)
>         at org.archive.access.nutch.Nutchwax.doAll(Nutchwax.java:144)
>         at org.archive.access.nutch.Nutchwax.doJob(Nutchwax.java:368)
>         at org.archive.access.nutch.Nutchwax.main(Nutchwax.java:621)
>         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
>         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>         at java.lang.reflect.Method.invoke(Method.java:585)
>         at org.apache.hadoop.util.RunJar.main(RunJar.java:128)
> I took a bit of a look.  Odd is that command-cli.jar is in hadoop/lib dir so should be found no problem (and we seem to be loading other stuff out of the uncompressed job jar fine -- see mention of nutch-site.xml above).   I tried adding the command-cli to my job jar.  I printed out all that RunJar -- see below -- was adding to its CLASSPATH and saw mention of command-cli but still no workee.
> file:/tmp/hadoop-unjar29923/lib/archive-commons-1.8.0.jar
> file:/tmp/hadoop-unjar29923/lib/commons-codec-1.3.jar
> file:/tmp/hadoop-unjar29923/lib/commons-httpclient-3.0-rc3.jar
> file:/tmp/hadoop-unjar29923/lib/commons-logging-1.0.4.jar
> file:/tmp/hadoop-unjar29923/lib/dsi.unimi.it-1.2.0.jar
> file:/tmp/hadoop-unjar29923/lib/commons-lang-2.1.jar
> file:/tmp/hadoop-unjar29923/lib/commons-cli-2.0-SNAPSHOT.jar
> file:/tmp/hadoop-unjar29923/lib/lucene-core-1.9.1.jar
> file:/tmp/hadoop-unjar29923/lib/lucene-misc-1.9.1.jar
> file:/tmp/hadoop-unjar29923/lib/jakarta-oro-2.0.7.jar
> file:/tmp/hadoop-unjar29923/lib/xerces-2_6_2-apis.jar
> file:/tmp/hadoop-unjar29923/lib/xerces-2_6_2.jar
> file:/tmp/hadoop-unjar29923/lib/concurrent-1.3.4.jar
> 06/07/06 13:18:01 INFO conf.Configuration: parsing file:/home/stack/workspace/hadoop-local-conf/hadoop-default.xml 
> Any ideas?
> Thanks.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 14 18:13:18 2006
Return-Path: 
 <hadoop-dev-return-2537-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 44208 invoked from network); 14 Jul 2006 18:13:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2006 18:13:18 -0000
Received: (qmail 88997 invoked by uid 500); 14 Jul 2006 18:13:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 88983 invoked by uid 500); 14 Jul 2006 18:13:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88974 invoked by uid 99); 14 Jul 2006 18:13:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 11:13:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 11:13:16 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E95C9410015
	for <hadoop-dev@lucene.apache.org>; Fri, 14 Jul 2006 18:11:14 +0000 (GMT)
Message-ID: <20620792.1152900674953.JavaMail.jira@brutus>
Date: Fri, 14 Jul 2006 11:11:14 -0700 (PDT)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-363) When combiners exist, postpone
 mappers' spills of map output to disk until combiners are unsuccessful.
In-Reply-To: <29305030.1152897315911.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-363?page=comments#action_12421184 ] 
            
eric baldeschwieler commented on HADOOP-363:
--------------------------------------------

Sounds like over kill to me.  Do we have a concrete example where this would make a big performance difference today?

I'd suggest a simpler rule of thumb.  If the reduced output is less than a quarter of the allowable RAM/keys, keep it and recombine it, assuming you get at least a quarter buffer full of new keys.  Otherwise spill it.  This should catch the important cases and avoid silly corner cases.

But unless you are tracking RAM usage, this is a bad idea, because combining might not be reducing RAM footprint and we don't want to combine until the VM blows up / thrashes.  The 100k magic number sounds really dangerous to begin with, we need to be tracking RAM.

> When combiners exist, postpone mappers' spills of map output to disk until combiners are unsuccessful.
> ------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-363
>                 URL: http://issues.apache.org/jira/browse/HADOOP-363
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Dick King
>
> When a map/reduce job is set up with a combiner, the mapper tasks each build up an in-heap collection of 100K key/value pairs -- and then apply the combiner to reduce that to whatever it becomes by applying the combiner to sets with like keys before spilling to disk to send it to the reducers.
> Typically running the combiner consumes a lot less resources than shipping the data, especially since the data end up in a reducer where probably the same code will be run anyway.
> I would like to see this changed so that when the combiner shrinks the 100K key/value pairs to less than, say, 90K, we just keep running the mapper and combiner alternately until we get enough distinct keys to make this unlikely to be worthwhile [or until we run out of input, of course].
> This has two costs: the whole internal buffer has to be re-sorted so we can apply the combiner even though as few as 10K new elements have been added, and in some cases we'll call the combiner on many singletons.  
> The first of these costs can be avoided by doing a mini-sort in the new pairs section and doing a merge to develop the combiner sets and the new sorted retained elements section.
> The second of these costs can be avoided by detecting what would otherwise be singleton combiner calls and not making them, which is a good idea in itself even if we don't decide to do this reform.
> The two techniques combine well; recycled elements of the buffer need not be combined if there's no new element with the same key.
> -dk

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 14 19:08:18 2006
Return-Path: 
 <hadoop-dev-return-2538-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 61889 invoked from network); 14 Jul 2006 19:08:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2006 19:08:18 -0000
Received: (qmail 70087 invoked by uid 500); 14 Jul 2006 19:08:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70068 invoked by uid 500); 14 Jul 2006 19:08:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 70058 invoked by uid 99); 14 Jul 2006 19:08:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 12:08:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 12:08:16 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F0F96410018
	for <hadoop-dev@lucene.apache.org>; Fri, 14 Jul 2006 19:06:14 +0000 (GMT)
Message-ID: <10864702.1152903974984.JavaMail.jira@brutus>
Date: Fri, 14 Jul 2006 12:06:14 -0700 (PDT)
From: "Dick King (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-363) When combiners exist, postpone
 mappers' spills of map output to disk until combiners are unsuccessful.
In-Reply-To: <29305030.1152897315911.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-363?page=comments#action_12421194 ] 
            
Dick King commented on HADOOP-363:
----------------------------------

In http://issues.apache.org/jira/browse/HADOOP-363#action_12421184 , Eric asked for a concrete example.

I'm determining word frequencies by inverting documents interpreted as mappings from document to unique word, but of course most documents use mostly common words.  Although the corpus contains documents in multiple languages, I expect my proposal to be effective on this piece of code because for any cluster of a few dozen or hundred documents not very many distinct words will appear.

With my proposal, each mapper would issue not very many pages.  This change would make most document unique word accumulation occur in core.

Then there are runs that produce my word pair frequency tables.  These are mappings from words to mappings from words to counts.  This application is indeed exposed to the problem Eric describes, but again not badly for statistical reasons, with the additional mitigating fact that documents which contain words in one language are deemed to only contain additional words in that same language.

Eric's point about key/value pairs' values being of varying size is in fact salient, and as Eric points out we are already exposed to possible problems even when building the 100K key/value pairs.  That can blow heap space all by itself without the combiner ever having been called.  

We can use something like Runtime.getRuntime().freeMemory() [after a System.gc() call if needed] .  Probably this would be a good idea whether or not we add this enhancement.  There could be a parameter, expected_object_size_for_new_key_value_pairs, that would guide both the number of kv pairs created by each mapper before combining [replacing the 100K magic number] and the number of new elements. 

However, we don't really need such a parameter.  We could instead check for free memory after creating each hundred output key/value pairs to decide whether to continue collecting output or spill.  GCs are much to expensive to perform every hundred objects, but we only need to do one when we call freeMemory() and don't see enough memory to continue without one.

-dk


> When combiners exist, postpone mappers' spills of map output to disk until combiners are unsuccessful.
> ------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-363
>                 URL: http://issues.apache.org/jira/browse/HADOOP-363
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Dick King
>
> When a map/reduce job is set up with a combiner, the mapper tasks each build up an in-heap collection of 100K key/value pairs -- and then apply the combiner to reduce that to whatever it becomes by applying the combiner to sets with like keys before spilling to disk to send it to the reducers.
> Typically running the combiner consumes a lot less resources than shipping the data, especially since the data end up in a reducer where probably the same code will be run anyway.
> I would like to see this changed so that when the combiner shrinks the 100K key/value pairs to less than, say, 90K, we just keep running the mapper and combiner alternately until we get enough distinct keys to make this unlikely to be worthwhile [or until we run out of input, of course].
> This has two costs: the whole internal buffer has to be re-sorted so we can apply the combiner even though as few as 10K new elements have been added, and in some cases we'll call the combiner on many singletons.  
> The first of these costs can be avoided by doing a mini-sort in the new pairs section and doing a merge to develop the combiner sets and the new sorted retained elements section.
> The second of these costs can be avoided by detecting what would otherwise be singleton combiner calls and not making them, which is a good idea in itself even if we don't decide to do this reform.
> The two techniques combine well; recycled elements of the buffer need not be combined if there's no new element with the same key.
> -dk

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 14 19:46:21 2006
Return-Path: 
 <hadoop-dev-return-2539-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 83868 invoked from network); 14 Jul 2006 19:46:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2006 19:46:21 -0000
Received: (qmail 30756 invoked by uid 500); 14 Jul 2006 19:46:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 30733 invoked by uid 500); 14 Jul 2006 19:46:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 30695 invoked by uid 99); 14 Jul 2006 19:46:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 12:46:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 12:46:19 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4B580410015
	for <hadoop-dev@lucene.apache.org>; Fri, 14 Jul 2006 19:44:17 +0000 (GMT)
Message-ID: <20903192.1152906257306.JavaMail.jira@brutus>
Date: Fri, 14 Jul 2006 12:44:17 -0700 (PDT)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-363) When combiners exist, postpone
 mappers' spills of map output to disk until combiners are unsuccessful.
In-Reply-To: <29305030.1152897315911.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-363?page=comments#action_12421206 ] 
            
eric baldeschwieler commented on HADOOP-363:
--------------------------------------------

I'd want actual proof from a run that inefficient combines are causing significant job bloat.

I believe we are serializing to copy objects currently.  If we store and sort serialized forms, than we can simply count the bytes we are storing and manage a fixed size buffer.  This seems like a better approach.


> When combiners exist, postpone mappers' spills of map output to disk until combiners are unsuccessful.
> ------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-363
>                 URL: http://issues.apache.org/jira/browse/HADOOP-363
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Dick King
>
> When a map/reduce job is set up with a combiner, the mapper tasks each build up an in-heap collection of 100K key/value pairs -- and then apply the combiner to reduce that to whatever it becomes by applying the combiner to sets with like keys before spilling to disk to send it to the reducers.
> Typically running the combiner consumes a lot less resources than shipping the data, especially since the data end up in a reducer where probably the same code will be run anyway.
> I would like to see this changed so that when the combiner shrinks the 100K key/value pairs to less than, say, 90K, we just keep running the mapper and combiner alternately until we get enough distinct keys to make this unlikely to be worthwhile [or until we run out of input, of course].
> This has two costs: the whole internal buffer has to be re-sorted so we can apply the combiner even though as few as 10K new elements have been added, and in some cases we'll call the combiner on many singletons.  
> The first of these costs can be avoided by doing a mini-sort in the new pairs section and doing a merge to develop the combiner sets and the new sorted retained elements section.
> The second of these costs can be avoided by detecting what would otherwise be singleton combiner calls and not making them, which is a good idea in itself even if we don't decide to do this reform.
> The two techniques combine well; recycled elements of the buffer need not be combined if there's no new element with the same key.
> -dk

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 14 20:10:18 2006
Return-Path: 
 <hadoop-dev-return-2540-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 89281 invoked from network); 14 Jul 2006 20:10:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2006 20:10:18 -0000
Received: (qmail 68628 invoked by uid 500); 14 Jul 2006 20:10:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68599 invoked by uid 500); 14 Jul 2006 20:10:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68590 invoked by uid 99); 14 Jul 2006 20:10:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 13:10:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 13:10:16 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B9A8A410015
	for <hadoop-dev@lucene.apache.org>; Fri, 14 Jul 2006 20:08:14 +0000 (GMT)
Message-ID: <13363567.1152907694757.JavaMail.jira@brutus>
Date: Fri, 14 Jul 2006 13:08:14 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-363) When combiners exist, postpone
 mappers' spills of map output to disk until combiners are unsuccessful.
In-Reply-To: <29305030.1152897315911.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-363?page=comments#action_12421211 ] 
            
Owen O'Malley commented on HADOOP-363:
--------------------------------------

I agree that the 100k key/value pair count is just a bad approximation to the memory usage, but I'd leave that change to another issue.

The current semantics are that the framework buffers 100k key/value pairs in memory, sorts, combines, writes to disk, and resets the buffer.

The proposal here is to:
  1. Put the output of the combiner back into the buffer instead of to disk.
  2. If the buffer is still X% full, spill to disk, where X is configurable (probably somewhere between 40-80%???)
  3. As an optimization, don't combine if there is just a single value for that key.

This is pretty low hanging fruit and would mean that you rairly spill in the middle of the map, if you have a decent combiner.

> When combiners exist, postpone mappers' spills of map output to disk until combiners are unsuccessful.
> ------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-363
>                 URL: http://issues.apache.org/jira/browse/HADOOP-363
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Dick King
>
> When a map/reduce job is set up with a combiner, the mapper tasks each build up an in-heap collection of 100K key/value pairs -- and then apply the combiner to reduce that to whatever it becomes by applying the combiner to sets with like keys before spilling to disk to send it to the reducers.
> Typically running the combiner consumes a lot less resources than shipping the data, especially since the data end up in a reducer where probably the same code will be run anyway.
> I would like to see this changed so that when the combiner shrinks the 100K key/value pairs to less than, say, 90K, we just keep running the mapper and combiner alternately until we get enough distinct keys to make this unlikely to be worthwhile [or until we run out of input, of course].
> This has two costs: the whole internal buffer has to be re-sorted so we can apply the combiner even though as few as 10K new elements have been added, and in some cases we'll call the combiner on many singletons.  
> The first of these costs can be avoided by doing a mini-sort in the new pairs section and doing a merge to develop the combiner sets and the new sorted retained elements section.
> The second of these costs can be avoided by detecting what would otherwise be singleton combiner calls and not making them, which is a good idea in itself even if we don't decide to do this reform.
> The two techniques combine well; recycled elements of the buffer need not be combined if there's no new element with the same key.
> -dk

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 14 21:34:18 2006
Return-Path: 
 <hadoop-dev-return-2541-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17413 invoked from network); 14 Jul 2006 21:34:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2006 21:34:18 -0000
Received: (qmail 10212 invoked by uid 500); 14 Jul 2006 21:34:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 10053 invoked by uid 500); 14 Jul 2006 21:34:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 10043 invoked by uid 99); 14 Jul 2006 21:34:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 14:34:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 14:34:16 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BF03E41001F
	for <hadoop-dev@lucene.apache.org>; Fri, 14 Jul 2006 21:32:14 +0000 (GMT)
Message-ID: <31222462.1152912734779.JavaMail.jira@brutus>
Date: Fri, 14 Jul 2006 14:32:14 -0700 (PDT)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-363) When combiners exist, postpone
 mappers' spills of map output to disk until combiners are unsuccessful.
In-Reply-To: <29305030.1152897315911.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-363?page=comments#action_12421229 ] 
            
eric baldeschwieler commented on HADOOP-363:
--------------------------------------------

I'd suggest going low on the test, IE 25-40%, not 80.  That way you can convince yourself you are not spinning on the same keys.

You need to watch memory, or at a minimum have a way to turning this behavior off.  (And good documentation)

> When combiners exist, postpone mappers' spills of map output to disk until combiners are unsuccessful.
> ------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-363
>                 URL: http://issues.apache.org/jira/browse/HADOOP-363
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Dick King
>
> When a map/reduce job is set up with a combiner, the mapper tasks each build up an in-heap collection of 100K key/value pairs -- and then apply the combiner to reduce that to whatever it becomes by applying the combiner to sets with like keys before spilling to disk to send it to the reducers.
> Typically running the combiner consumes a lot less resources than shipping the data, especially since the data end up in a reducer where probably the same code will be run anyway.
> I would like to see this changed so that when the combiner shrinks the 100K key/value pairs to less than, say, 90K, we just keep running the mapper and combiner alternately until we get enough distinct keys to make this unlikely to be worthwhile [or until we run out of input, of course].
> This has two costs: the whole internal buffer has to be re-sorted so we can apply the combiner even though as few as 10K new elements have been added, and in some cases we'll call the combiner on many singletons.  
> The first of these costs can be avoided by doing a mini-sort in the new pairs section and doing a merge to develop the combiner sets and the new sorted retained elements section.
> The second of these costs can be avoided by detecting what would otherwise be singleton combiner calls and not making them, which is a good idea in itself even if we don't decide to do this reform.
> The two techniques combine well; recycled elements of the buffer need not be combined if there's no new element with the same key.
> -dk

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 14 22:02:17 2006
Return-Path: 
 <hadoop-dev-return-2542-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 27228 invoked from network); 14 Jul 2006 22:02:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2006 22:02:17 -0000
Received: (qmail 53196 invoked by uid 500); 14 Jul 2006 22:02:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53174 invoked by uid 500); 14 Jul 2006 22:02:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53164 invoked by uid 99); 14 Jul 2006 22:02:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 15:02:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 15:02:16 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B80E941001D
	for <hadoop-dev@lucene.apache.org>; Fri, 14 Jul 2006 22:00:14 +0000 (GMT)
Message-ID: <4166507.1152914414751.JavaMail.jira@brutus>
Date: Fri, 14 Jul 2006 15:00:14 -0700 (PDT)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-356) Build and test hadoopStreaming nightly
In-Reply-To: <28376836.1152310589828.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-356?page=all ]

Michel Tourn updated HADOOP-356:
--------------------------------

    Attachment: buildallcontribs.patch

The patch unblocks HADOOP-307

The patch modifies the following targets:
  <target name="clean-contrib"   depends="compile">
  <target name="compile-contrib" depends="compile-core">
  <target name="compile"         depends="compile-core, compile-contrib">
  <target name="test" depends="test-core, test-contrib">
  <target name="test-contrib">
--
How to add a new "contrib" project:
 add a subdirectory to src/contrib/<projectname>
 see src/contrib/streaming/build.xml for an example build.xml
 There are generic ant targets in src/contrib/build.xml and build-contrib.xml
 To disable a contrib target:
  put an excludes attribute in src/contrib/build.xml (explained inside)


> Build and test hadoopStreaming nightly
> --------------------------------------
>
>                 Key: HADOOP-356
>                 URL: http://issues.apache.org/jira/browse/HADOOP-356
>             Project: Hadoop
>          Issue Type: Improvement
>            Reporter: Michel Tourn
>         Attachments: buildallcontribs.patch, nightlystreaming.patch
>
>
> hadoopStreaming was originally built and tested separately.
> It makes sense to keep building the hadoopStreaming code as a separate jar file:
> this is all client code that can be uploaded in the Job jar.
> this allows quick turnaround on production clusters 
> (hadoopStreaming code updates do not require to bring down the MapReduce system.
> If necessary users can use their own modified versions of the hadoopStreaming jar but still run on the production cluster.)
> On the other hand it makes sense to build this code nightly.
> Many recent changes broke either compilation or correctness.
> All the problems would have been caught if the hadoopStreaming compilation and tests were run nighlty.
> Conclusion:
> the updated top-level build.xml adds the following dependencies:
> 1. Target compile calls target compile in contrib/streaming/build.xml
> 2. Target test calls target test in contrib/streaming/build.xml

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 14 22:12:18 2006
Return-Path: 
 <hadoop-dev-return-2543-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30416 invoked from network); 14 Jul 2006 22:12:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2006 22:12:18 -0000
Received: (qmail 62867 invoked by uid 500); 14 Jul 2006 22:12:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62842 invoked by uid 500); 14 Jul 2006 22:12:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62833 invoked by uid 99); 14 Jul 2006 22:12:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 15:12:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 15:12:16 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D92F741001F
	for <hadoop-dev@lucene.apache.org>; Fri, 14 Jul 2006 22:10:14 +0000 (GMT)
Message-ID: <30819974.1152915014886.JavaMail.jira@brutus>
Date: Fri, 14 Jul 2006 15:10:14 -0700 (PDT)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-281) dfs.FSDirectory.mkdirs can create
 sub-directories of a file!
In-Reply-To: <19818580.1149635189767.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-281?page=all ]

Wendy Chien updated HADOOP-281:
-------------------------------

    Attachment: addNode.patch
                TestDFSMkdirs.java

Hi Arun, 
I was simultaneously working on this bug and had a different fix.  Hairong and I think it would be simpler to check the path/parent is a directory in addNode (which is called by unprotectedMkdir which in turn is called by mkdirs).  I think the check in addNode is required regardless of mkdirs. 

I have attached my patch file along with test code for the change.  

Please look at it and let me know what you think.  

Thanks,
Wendy


> dfs.FSDirectory.mkdirs can create sub-directories of a file!
> ------------------------------------------------------------
>
>                 Key: HADOOP-281
>                 URL: http://issues.apache.org/jira/browse/HADOOP-281
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.3.1
>            Reporter: Sameer Paranjpye
>             Fix For: 0.5.0
>
>         Attachments: addNode.patch, mkdirs.patch, TestDFSMkdirs.java
>
>
> dfs.FSDirectory.mkdirs will merrily adds children to a directory tree node without checking whether it represents a directory. So it is possible to create a subdirectories of a file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 14 22:12:18 2006
Return-Path: 
 <hadoop-dev-return-2544-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30460 invoked from network); 14 Jul 2006 22:12:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2006 22:12:18 -0000
Received: (qmail 63182 invoked by uid 500); 14 Jul 2006 22:12:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63025 invoked by uid 500); 14 Jul 2006 22:12:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62912 invoked by uid 99); 14 Jul 2006 22:12:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 15:12:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 15:12:17 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 074A2410021
	for <hadoop-dev@lucene.apache.org>; Fri, 14 Jul 2006 22:10:15 +0000 (GMT)
Message-ID: <27460867.1152915015026.JavaMail.jira@brutus>
Date: Fri, 14 Jul 2006 15:10:15 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-364) rpc versioning broke out-of-order
 server launches
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

rpc versioning broke out-of-order server launches
-------------------------------------------------

                 Key: HADOOP-364
                 URL: http://issues.apache.org/jira/browse/HADOOP-364
             Project: Hadoop
          Issue Type: Bug
          Components: ipc
    Affects Versions: 0.5.0
            Reporter: Owen O'Malley
         Assigned To: Owen O'Malley
             Fix For: 0.5.0


The change to check the RPCs broke the ability to bring up the datanodes before the namenode and the tasktracker before the jobtracker.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 14 22:36:10 2006
Return-Path: 
 <hadoop-dev-return-2545-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 36491 invoked from network); 14 Jul 2006 22:36:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2006 22:36:10 -0000
Received: (qmail 91974 invoked by uid 500); 14 Jul 2006 22:36:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 91953 invoked by uid 500); 14 Jul 2006 22:36:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 91943 invoked by uid 99); 14 Jul 2006 22:36:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 15:36:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.126.228.150] (HELO rsmtp2.corp.yahoo.com)
 (207.126.228.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 15:36:07 -0700
Received: from [10.0.1.2] ([172.21.179.131])
	(authenticated bits=0)
	by rsmtp2.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k6EMZgCg026873
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Fri, 14 Jul 2006 15:35:42 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=2pxIlZNRHhdE8pU5lIA7ZoPHpIDEGC33EjrAZZUgEeIg9NfLz9pSozCSH2KyNd9f
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <5099442.1152707910703.JavaMail.jira@brutus>
References: <5099442.1152707910703.JavaMail.jira@brutus>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <56A23D10-4003-4683-BAAE-201E5B09C58E@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Eric Baldeschwieler <eric14@yahoo-inc.com>
Subject: Re: [jira] Updated: (HADOOP-307) Many small jobs benchmark for
 MapReduce
Date: Fri, 14 Jul 2006 15:11:42 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

down the road, maybe we should change the build so that examples are  
not distributed by default, but are instead built as standalone  
jars.  Does this make sense?

On Jul 12, 2006, at 5:38 AM, Sanjay Dahiya (JIRA) wrote:

>      [ http://issues.apache.org/jira/browse/HADOOP-307?page=all ]
>
> Sanjay Dahiya updated HADOOP-307:
> ---------------------------------
>
>     Attachment: patch.txt
>
> The only reason to keep it separate is we dont want these jar files  
> already in classpath on all nodes. Part of the benchmark's goal is  
> to estimate the overhead in transfering the jar file through HDFS.  
> Also there is bin dir in this for scripts to run the benchmark. If  
> this doesnt conflict with existing examples the we can put it there  
> as well.
>
> Updating the patch, it now generates excel friendly CSV output to  
> plot graphs etc.
>
>
>> Many small jobs benchmark for MapReduce
>> ---------------------------------------
>>
>>          Key: HADOOP-307
>>          URL: http://issues.apache.org/jira/browse/HADOOP-307
>>      Project: Hadoop
>>         Type: Task
>
>>   Components: mapred
>>     Reporter: Sanjay Dahiya
>>     Priority: Minor
>>  Attachments: patch.txt
>>
>> A benchmark that runs many small MapReduce tasks in sequence. A  
>> single map reduce implementation is used, it is invoked multiple  
>> times with input as the output from previous run. The input to  
>> first Map is a TextInputFormat ( a text file with few hundred  
>> KBs). Input records are passed to output without much processing.  
>> The idea is to benchmark the time taken by initialization of  
>> Mapper and Reducer. An initial prototyping on a single machine  
>> with 20 MR tasks in sequence took ~47 seconds per task. Looking  
>> for suggestions on what else can be included in the benchmark.
>
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the  
> administrators:
>    http://issues.apache.org/jira/secure/Administrators.jspa
> -
> For more information on JIRA, see:
>    http://www.atlassian.com/software/jira
>


From MAILER-DAEMON Fri Jul 14 22:46:23 2006
Return-Path: 
 <hadoop-dev-return-2546-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37827 invoked from network); 14 Jul 2006 22:46:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2006 22:46:23 -0000
Received: (qmail 600 invoked by uid 500); 14 Jul 2006 22:46:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 442 invoked by uid 500); 14 Jul 2006 22:46:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 432 invoked by uid 99); 14 Jul 2006 22:46:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 15:46:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 15:46:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AFEE741001F
	for <hadoop-dev@lucene.apache.org>; Fri, 14 Jul 2006 22:44:14 +0000 (GMT)
Message-ID: <8731478.1152917054718.JavaMail.jira@brutus>
Date: Fri, 14 Jul 2006 15:44:14 -0700 (PDT)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-350) In standalone mode,
 'org.apache.commons.cli cannot be resolved'
In-Reply-To: <4329338.1152218609766.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-350?page=all ]

Hairong Kuang updated HADOOP-350:
---------------------------------

    Attachment: commons-cli-2.0-SNAPSHOT.jar

Hi Renaud,

I recompiled commons-cli using java 1.4. Here is the new jar.  Also I included the source. I did not check if it is the same as yours. But Millind helped me test it and it works. Thanks for your effort on solving this problem. 

Hairong

> In standalone mode, 'org.apache.commons.cli cannot be resolved'
> ---------------------------------------------------------------
>
>                 Key: HADOOP-350
>                 URL: http://issues.apache.org/jira/browse/HADOOP-350
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.5.0
>            Reporter: stack@archive.org
>            Priority: Minor
>         Attachments: commons-cli-2.0-SNAPSHOT.jar, commons-cli-2.0-SNAPSHOT.jar
>
>
> Standalone works fine in 0.4.0 but if I use TRUNK, 'Last Changed Date: 2006-06-28 14:27:33 -0700 (Wed, 28 Jun 2006)', and pass it my fat job jar, I get following exception.
> 06/07/06 13:18:02 INFO conf.Configuration: parsing file:/tmp/hadoop-unjar29923/nutch-site.xml
> 06/07/06 13:18:02 INFO conf.Configuration: parsing file:/home/stack/workspace/hadoop-local-conf/hadoop-site.xml
> Exception in thread "main" java.lang.Error: Unresolved compilation problems:   
>         The import org.apache.commons.cli cannot be resolved
>         The import org.apache.commons.cli cannot be resolved
>         The import org.apache.commons.cli cannot be resolved
>         The import org.apache.commons.cli cannot be resolved       
>         The import org.apache.commons.cli cannot be resolved
>         The import org.apache.commons.cli cannot be resolved
>         The import org.apache.commons.cli cannot be resolved
>         The import org.apache.commons.cli cannot be resolved
>         The import org.apache.commons.cli cannot be resolved
>         Options cannot be resolved to a type
>         Option cannot be resolved to a type
>         OptionBuilder cannot be resolved
>         Option cannot be resolved to a type
>         OptionBuilder cannot be resolved
>         Option cannot be resolved to a type
>         OptionBuilder cannot be resolved
>         Option cannot be resolved to a type
>         OptionBuilder cannot be resolved
>         Options cannot be resolved to a type
>         Options cannot be resolved to a type
>         CommandLine cannot be resolved to a type
>         Options cannot be resolved to a type
>         The method buildGeneralOptions() is undefined for the type ToolBase
>         CommandLineParser cannot be resolved to a type
>         GnuParser cannot be resolved to a type
>         CommandLine cannot be resolved to a type
>         ParseException cannot be resolved to a type
>         e cannot be resolved
>         HelpFormatter cannot be resolved to a type
>         HelpFormatter cannot be resolved to a type
>         at org.apache.hadoop.util.ToolBase.<init>(ToolBase.java:21)
>         at org.apache.hadoop.mapred.JobClient.<init>(JobClient.java:178)
>         at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:320)
>         at org.archive.access.nutch.ImportArcs.importArcs(ImportArcs.java:576)
>         at org.archive.access.nutch.Nutchwax.doImport(Nutchwax.java:159)
>         at org.archive.access.nutch.Nutchwax.doAll(Nutchwax.java:144)
>         at org.archive.access.nutch.Nutchwax.doJob(Nutchwax.java:368)
>         at org.archive.access.nutch.Nutchwax.main(Nutchwax.java:621)
>         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
>         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>         at java.lang.reflect.Method.invoke(Method.java:585)
>         at org.apache.hadoop.util.RunJar.main(RunJar.java:128)
> I took a bit of a look.  Odd is that command-cli.jar is in hadoop/lib dir so should be found no problem (and we seem to be loading other stuff out of the uncompressed job jar fine -- see mention of nutch-site.xml above).   I tried adding the command-cli to my job jar.  I printed out all that RunJar -- see below -- was adding to its CLASSPATH and saw mention of command-cli but still no workee.
> file:/tmp/hadoop-unjar29923/lib/archive-commons-1.8.0.jar
> file:/tmp/hadoop-unjar29923/lib/commons-codec-1.3.jar
> file:/tmp/hadoop-unjar29923/lib/commons-httpclient-3.0-rc3.jar
> file:/tmp/hadoop-unjar29923/lib/commons-logging-1.0.4.jar
> file:/tmp/hadoop-unjar29923/lib/dsi.unimi.it-1.2.0.jar
> file:/tmp/hadoop-unjar29923/lib/commons-lang-2.1.jar
> file:/tmp/hadoop-unjar29923/lib/commons-cli-2.0-SNAPSHOT.jar
> file:/tmp/hadoop-unjar29923/lib/lucene-core-1.9.1.jar
> file:/tmp/hadoop-unjar29923/lib/lucene-misc-1.9.1.jar
> file:/tmp/hadoop-unjar29923/lib/jakarta-oro-2.0.7.jar
> file:/tmp/hadoop-unjar29923/lib/xerces-2_6_2-apis.jar
> file:/tmp/hadoop-unjar29923/lib/xerces-2_6_2.jar
> file:/tmp/hadoop-unjar29923/lib/concurrent-1.3.4.jar
> 06/07/06 13:18:01 INFO conf.Configuration: parsing file:/home/stack/workspace/hadoop-local-conf/hadoop-default.xml 
> Any ideas?
> Thanks.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 14 22:48:18 2006
Return-Path: 
 <hadoop-dev-return-2547-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 38230 invoked from network); 14 Jul 2006 22:48:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2006 22:48:18 -0000
Received: (qmail 1895 invoked by uid 500); 14 Jul 2006 22:48:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 1871 invoked by uid 500); 14 Jul 2006 22:48:18 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 1862 invoked by uid 99); 14 Jul 2006 22:48:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 15:48:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 15:48:17 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BA2BF410020
	for <hadoop-dev@lucene.apache.org>; Fri, 14 Jul 2006 22:46:15 +0000 (GMT)
Message-ID: <26996354.1152917175760.JavaMail.jira@brutus>
Date: Fri, 14 Jul 2006 15:46:15 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-237) Standard set of Performance Metrics
 for Hadoop
In-Reply-To: <14919853.1148078609860.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-237?page=comments#action_12421245 ] 
            
Milind Bhandarkar commented on HADOOP-237:
------------------------------------------

agreed. will re-do the patch soon.


> Standard set of Performance Metrics for Hadoop
> ----------------------------------------------
>
>                 Key: HADOOP-237
>                 URL: http://issues.apache.org/jira/browse/HADOOP-237
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: metrics
>    Affects Versions: 0.3.0
>         Environment: All
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>         Attachments: hadoop-metrics.patch
>
>
> I am starting to use Hadoop's shiny new Metrics API to publish performance (and other) Metrics of running jobs and other daemons.
> Which performance metrics are people interested in seeing ? If possible, please group them according to modules, such as map-reduce, dfs, general-cluster-related etc. I will follow this process:
> 1. collect this list
> 2. assess feasibility of obtaining metric
> 3. assign context/record/metrics names
> 4. seek approval for names
> 5. instrument the code.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 14 23:37:17 2006
Return-Path: 
 <hadoop-dev-return-2548-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50479 invoked from network); 14 Jul 2006 23:37:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2006 23:37:17 -0000
Received: (qmail 81606 invoked by uid 500); 14 Jul 2006 23:37:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 81447 invoked by uid 500); 14 Jul 2006 23:37:16 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 81436 invoked by uid 99); 14 Jul 2006 23:37:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 16:37:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 16:37:16 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E0B2141001F
	for <hadoop-dev@lucene.apache.org>; Fri, 14 Jul 2006 23:35:13 +0000 (GMT)
Message-ID: <16601882.1152920113917.JavaMail.jira@brutus>
Date: Fri, 14 Jul 2006 16:35:13 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-365) datanode crashes on startup with
 ClassCastException
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

datanode crashes on startup with ClassCastException
---------------------------------------------------

                 Key: HADOOP-365
                 URL: http://issues.apache.org/jira/browse/HADOOP-365
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
    Affects Versions: 0.5.0
            Reporter: Owen O'Malley
         Assigned To: Owen O'Malley
             Fix For: 0.5.0


When I bring up a DataNode it gets a ClassCastException:

Exception in thread "main" java.lang.ClassCastException: java.util.HashMap$Entry
        at org.apache.hadoop.dfs.DataNode.runAndWait(DataNode.java:907)
        at org.apache.hadoop.dfs.DataNode.main(DataNode.java:954)

This was introduced by the patch for HADOOP-354.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Jul 15 00:06:18 2006
Return-Path: 
 <hadoop-dev-return-2549-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 56581 invoked from network); 15 Jul 2006 00:06:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jul 2006 00:06:18 -0000
Received: (qmail 7990 invoked by uid 500); 15 Jul 2006 00:06:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 7835 invoked by uid 500); 15 Jul 2006 00:06:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 7826 invoked by uid 99); 15 Jul 2006 00:06:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 17:06:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 17:06:16 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AFAA341001F
	for <hadoop-dev@lucene.apache.org>; Sat, 15 Jul 2006 00:04:14 +0000 (GMT)
Message-ID: <2113093.1152921854717.JavaMail.jira@brutus>
Date: Fri, 14 Jul 2006 17:04:14 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-365) datanode crashes on startup with
 ClassCastException
In-Reply-To: <16601882.1152920113917.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-365?page=all ]

Owen O'Malley updated HADOOP-365:
---------------------------------

    Attachment: datanode-class-cast.patch

This fixes the expression to get the Thread out of the MapEntry.

> datanode crashes on startup with ClassCastException
> ---------------------------------------------------
>
>                 Key: HADOOP-365
>                 URL: http://issues.apache.org/jira/browse/HADOOP-365
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.5.0
>
>         Attachments: datanode-class-cast.patch
>
>
> When I bring up a DataNode it gets a ClassCastException:
> Exception in thread "main" java.lang.ClassCastException: java.util.HashMap$Entry
>         at org.apache.hadoop.dfs.DataNode.runAndWait(DataNode.java:907)
>         at org.apache.hadoop.dfs.DataNode.main(DataNode.java:954)
> This was introduced by the patch for HADOOP-354.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Jul 15 00:15:18 2006
Return-Path: 
 <hadoop-dev-return-2550-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 60265 invoked from network); 15 Jul 2006 00:15:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jul 2006 00:15:18 -0000
Received: (qmail 19451 invoked by uid 500); 15 Jul 2006 00:15:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 19427 invoked by uid 500); 15 Jul 2006 00:15:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 19418 invoked by uid 99); 15 Jul 2006 00:15:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 17:15:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 17:15:16 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AD9CA41001F
	for <hadoop-dev@lucene.apache.org>; Sat, 15 Jul 2006 00:13:14 +0000 (GMT)
Message-ID: <20076531.1152922394708.JavaMail.jira@brutus>
Date: Fri, 14 Jul 2006 17:13:14 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-364) rpc versioning broke out-of-order
 server launches
In-Reply-To: <27460867.1152915015026.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-364?page=all ]

Owen O'Malley updated HADOOP-364:
---------------------------------

    Attachment: rpc-version-fix.patch

This patch:
  1. adds IOException to the getProtocolVersion method. All RPC methods need to declare this exception so that the proxy object can throw IOException if there are communication problems.
  2. creates a RPC.VersionMismatch exception that can be caught and dealt with in a user friendly way.
  3. adds IOException to the signature for getProxy.
  4. adds RPC.waitForProxy that will loop waiting for the server to come up.
  5. make the TaskTracker and DataNode wait for their masters to come up.

> rpc versioning broke out-of-order server launches
> -------------------------------------------------
>
>                 Key: HADOOP-364
>                 URL: http://issues.apache.org/jira/browse/HADOOP-364
>             Project: Hadoop
>          Issue Type: Bug
>          Components: ipc
>    Affects Versions: 0.5.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.5.0
>
>         Attachments: rpc-version-fix.patch
>
>
> The change to check the RPCs broke the ability to bring up the datanodes before the namenode and the tasktracker before the jobtracker.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Jul 15 01:53:44 2006
Return-Path: 
 <hadoop-dev-return-2551-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85623 invoked from network); 15 Jul 2006 01:53:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jul 2006 01:53:44 -0000
Received: (qmail 74096 invoked by uid 500); 15 Jul 2006 01:53:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 74073 invoked by uid 500); 15 Jul 2006 01:53:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 74064 invoked by uid 99); 15 Jul 2006 01:53:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 18:53:43 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.109.112.27] (HELO mrout1-b.corp.dcn.yahoo.com)
 (216.109.112.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 18:53:42 -0700
Received: from [10.72.104.183] (enoughhot-lx.corp.yahoo.com [10.72.104.183])
	by mrout1-b.corp.dcn.yahoo.com (8.13.6/8.13.6/y.out) with ESMTP id
 k6F1r6ku054727
	for <hadoop-dev@lucene.apache.org>; Fri, 14 Jul 2006 18:53:06 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=message-id:date:from:user-agent:x-accept-language:
	mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
	b=R+QC5b6AkQsjW2shoypatfY1e4DDBR/l7vlemUSkRjosJ+TyQ6J+xnbbMQIdvwwy
Message-ID: <44B84A82.9010404@yahoo-inc.com>
Date: Fri, 14 Jul 2006 18:53:06 -0700
From: Konstantin Shvachko <shv@yahoo-inc.com>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: Hadoop Distributed File System requirements on Wiki
References: <44A5C920.5050808@yahoo-inc.com>
	 <e1d10fc00607061202j7ee2f796o87f667c835509749@mail.gmail.com>
	 <9DC52EE0-B405-4B34-A420-7A7BBF9EF548@yahoo-inc.com>
	 <e1d10fc00607061356h4818e9c6j2966ec2c6ab02482@mail.gmail.com>
	 <44AE0D76.1020905@yahoo-inc.com>
 <e1d10fc00607070851n7e921bcdq9618b250a498b690@mail.gmail.com>
In-Reply-To: <e1d10fc00607070851n7e921bcdq9618b250a498b690@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have updated the DFS requirements wiki page to reflect the discussion 
that took place.

http://wiki.apache.org/lucene-hadoop/DFS_requirements

The changes are:
 - two new requirements on recovery and availability;
 - clarification for item #16;
 - and 3 additional tasks that need to be prioritized.

What people think about priorities of these three and other tasks?

Thanks,

Konstantin

Paul Sutter wrote:

> thanks! comments below...
>
> On 7/7/06, Konstantin Shvachko <shv@yahoo-inc.com> wrote:
>
>> Paul Sutter wrote:
>> > One more suggestion:  store a copy of the per-block metadata on the
>> > datanode. ..
>> Being able to reconstruct the system even if the checkpoint is lost
>> forever is
>> a nice feature to have. The "original file name" can be placed into the
>> crc file (#15)...
>
>
> Great place to put it, very nice.
>
>> > *Recoverability and Availability Goals*
>> >
>> > You might want to consider adding recoverability and availability 
>> goals.
>>
>> This is an interesting observation. Ideally, we would like to save and
>> replicate
>> fs image file as soon as the edits file reaches a specific size, and we
>> would like
>> to make edits file updates transactional, with the file system locked
>> for updates
>> during the transaction. This would be the zero recoverability goal in
>> your terms.
>> Are we willing to weaken this requirement in favor of the performance?
>
>
> Actually its OK for me if we lose even an hour of data on a namenode
> crash, since I can just resubmit the recent jobs. Less loss is better,
> but my suggestion would be to favor simplicity over absolute recovery
> if thats a tradeoff. Others might feel differently about acceptable
> levels of data loss.
>
>>
>> > Availability goals are probably less stringent than for most storage
>> > systems
>> > (dare I say that a few hours downtime is probably OK) Adding these
>> > goals to
>> > the document could be valuable for consensus and prioritization.
>>
>> If I understood you correctly, this goal is more related to a specific
>> installation of
>> the system rather than to the system itself as a software product.
>> Or do you mean that the total time spent by the system on 
>> self-maintenance
>> procedures like backups and checkpointing should not exceed 2 hours a 
>> day?
>> In any case, I agree, high availability should be mentioned, probably 
>> in the
>> "Feature requirements" section.
>>
>
> Its about features. Is namenode failover automatic or manual? If its
> manual, it takes time. And it should definitely be manual for now.
> Seamless namenode failover done right is a lot of work, and
> unnecessary.
>
> With manual failover, what is the downtime when a namenode fails?
> Well, I imagine that you'd want to take everything down, bring the
> filesystem up in safe mode (nice feature!) on the new namenode, and do
> some kind of fscheck. And then, when you're comfortable that
> everything is copacetic, all your files are present, and that the
> filesystem wont do a radical dereplication of every block when you
> make it writable, you make it writable. (In fact, the secondary
> namenode might always come up in safe mode until manually changed).
>
> How long does this take? Well, during this time the system is
> unavailable. And if it fails at 2AM, you're probably not back up
> before 10AM.
>
> But thats OK. Better to be down for a few hours (manual failover) than
> to have a complex system likely to break (seamless automatic
> failover).
>
>> >> > **
>> >> > *Backup Scheme*
>> >> > **
>> >> > We might want to start discussion of a backup scheme for HDFS,
>> >> > especially
>> >> > given all the courageous rewriting and feature-addition likely to
>> >> > occur.
>> >>...
>> >
>> > But as for covering my fears, I'll feel safer with key data backed up
>> > in a filesystem that is not DFS, as pedestrian as that sounds. :)
>>
>> Frankly speaking I've never thought about a backup of a 10 PB storage
>> system. How much space will that require? Isn't it easier just to 
>> increase
>> the replication factor? Just a thought...
>>
>
> Increasing replication doesnt protect me against a filesystem bug.
>
> I'm a nervous nelly on this one: file system revisions do scare me,
> and I dont have a 10PB system. Lets say I have a 100TB system, and
> that to get back into production I need only restore 5TB worth of
> critical files. Then once I'm back in production I can gradually
> restore the next 25TB and regenerate the rest.
>
> Its feasible and probably prudent. Its not that Im expecting data loss
> bugs in  new code. My concern is less about the likelihood of the
> problem, and more about the severity of the problem.
>
> To back up a 10PB system, you would want to back it up to a second
> 10PB system located on an opposite coast. In fact if this system is
> important to your business, you must do this. And then there is the
> question, do you stagger software updates on these two systems?
> Probably.
>
> You might want to find someone from EMC or Netapp, and get their
> feedback on how software changes, QA, and beta testing is handled
> (including timelines). Storage systems are really a risky type of code
> to modify, for lots of reasons more apparent to the downstream
> consumers than to developers. :)
>
>
>


From MAILER-DAEMON Sat Jul 15 05:27:19 2006
Return-Path: 
 <hadoop-dev-return-2552-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16780 invoked from network); 15 Jul 2006 05:27:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jul 2006 05:27:19 -0000
Received: (qmail 68356 invoked by uid 500); 15 Jul 2006 05:27:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68329 invoked by uid 500); 15 Jul 2006 05:27:18 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68320 invoked by uid 99); 15 Jul 2006 05:27:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 22:27:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 22:27:17 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3C77741001F
	for <hadoop-dev@lucene.apache.org>; Sat, 15 Jul 2006 05:25:15 +0000 (GMT)
Message-ID: <9883002.1152941115245.JavaMail.jira@brutus>
Date: Fri, 14 Jul 2006 22:25:15 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-335) factor out the namespace
 image/transaction log writing
In-Reply-To: <14300759.1151602229834.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-335?page=comments#action_12421272 ] 
            
Konstantin Shvachko commented on HADOOP-335:
--------------------------------------------

Sorry, this probably needed more explanation than I provided.
This is a pure refactoring patch. It does not introduce new
functionality, or improve performance, or fix a bug. The idea is to
make the code modular, easy to understand, and simplify further
modifications. So restyling seems rather appropriate in the case.
Besides, I restyle only the parts that I change. I find it reasonable
to stick to the same style at least within the same method.
I believe this patch does a minimal modification to the existing code
that achieves the goal stated by Owen in the initial comment to the issue.
Doug, I do not know what tools you use to evaluate patches.
Does it provide "ignore white spaces" option? That usually helps to
distinguish real changes from restyling.
>>From your comment I did not realize is there anything I need to
change in my code, please clarify.


> factor out the namespace image/transaction log writing
> ------------------------------------------------------
>
>                 Key: HADOOP-335
>                 URL: http://issues.apache.org/jira/browse/HADOOP-335
>             Project: Hadoop
>          Issue Type: Improvement
>            Reporter: Owen O'Malley
>         Assigned To: Konstantin Shvachko
>         Attachments: FSImage_Refactor1.patch
>
>
> Factor the checkpoint/transaction log handling code out of FSNameSystem into its own class.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Jul 15 05:39:18 2006
Return-Path: 
 <hadoop-dev-return-2553-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20910 invoked from network); 15 Jul 2006 05:39:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jul 2006 05:39:18 -0000
Received: (qmail 73064 invoked by uid 500); 15 Jul 2006 05:39:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 73032 invoked by uid 500); 15 Jul 2006 05:39:18 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 73022 invoked by uid 99); 15 Jul 2006 05:39:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 22:39:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 22:39:17 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1B06041001F
	for <hadoop-dev@lucene.apache.org>; Sat, 15 Jul 2006 05:37:15 +0000 (GMT)
Message-ID: <14208053.1152941835108.JavaMail.jira@brutus>
Date: Fri, 14 Jul 2006 22:37:15 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-364) rpc versioning broke out-of-order
 server launches
In-Reply-To: <27460867.1152915015026.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-364?page=comments#action_12421277 ] 
            
Owen O'Malley commented on HADOOP-364:
--------------------------------------

The patch also extends the mini-mr cluster and mini-dfs cluster classes to take a boolean on the constructor saying to bring up the datanode/tasktracker first. I changed one of the junit tests to bring up the servers backwards to make sure that the fix works.

> rpc versioning broke out-of-order server launches
> -------------------------------------------------
>
>                 Key: HADOOP-364
>                 URL: http://issues.apache.org/jira/browse/HADOOP-364
>             Project: Hadoop
>          Issue Type: Bug
>          Components: ipc
>    Affects Versions: 0.5.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.5.0
>
>         Attachments: rpc-version-fix.patch
>
>
> The change to check the RPCs broke the ability to bring up the datanodes before the namenode and the tasktracker before the jobtracker.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Jul 15 17:03:19 2006
Return-Path: 
 <hadoop-dev-return-2554-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 41870 invoked from network); 15 Jul 2006 17:03:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jul 2006 17:03:19 -0000
Received: (qmail 90734 invoked by uid 500); 15 Jul 2006 17:03:19 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 90706 invoked by uid 500); 15 Jul 2006 17:03:18 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 90697 invoked by uid 99); 15 Jul 2006 17:03:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Jul 2006 10:03:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Jul 2006 10:03:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B269041000C
	for <hadoop-dev@lucene.apache.org>; Sat, 15 Jul 2006 17:01:14 +0000 (GMT)
Message-ID: <19408714.1152982874728.JavaMail.jira@brutus>
Date: Sat, 15 Jul 2006 10:01:14 -0700 (PDT)
From: "Dick King (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-363) When combiners exist, postpone
 mappers' spills of map output to disk until combiners are unsuccessful.
In-Reply-To: <29305030.1152897315911.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-363?page=comments#action_12421313 ] 
            
Dick King commented on HADOOP-363:
----------------------------------

I have to leave soon, but I'll write a quick comment.

By including a combiner at all you're saying that the cost of one extra deserialization and serialization [to do a little combine internally rather than a massive one in a reducer] is cheaper than the cost of shuffling an extra datum in the big shuffle.  Note that as the output buffer fills with stable items the benefits of an early combine decreases but so do the costs.  Only the costs of the comparisons remains high as the buffer fills.

Having said that, the point of some records' values getting large as many values get folded in under one key is salient. However, this problem isn't necxessarily mitigated by changing the buffer residue trigger point.  Still, I suppose I can support making the test relatively modest simply because it's a conservative thing to do, but this should be a configuration for those who have different ideas for a specific job.

-dk


> When combiners exist, postpone mappers' spills of map output to disk until combiners are unsuccessful.
> ------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-363
>                 URL: http://issues.apache.org/jira/browse/HADOOP-363
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Dick King
>
> When a map/reduce job is set up with a combiner, the mapper tasks each build up an in-heap collection of 100K key/value pairs -- and then apply the combiner to reduce that to whatever it becomes by applying the combiner to sets with like keys before spilling to disk to send it to the reducers.
> Typically running the combiner consumes a lot less resources than shipping the data, especially since the data end up in a reducer where probably the same code will be run anyway.
> I would like to see this changed so that when the combiner shrinks the 100K key/value pairs to less than, say, 90K, we just keep running the mapper and combiner alternately until we get enough distinct keys to make this unlikely to be worthwhile [or until we run out of input, of course].
> This has two costs: the whole internal buffer has to be re-sorted so we can apply the combiner even though as few as 10K new elements have been added, and in some cases we'll call the combiner on many singletons.  
> The first of these costs can be avoided by doing a mini-sort in the new pairs section and doing a merge to develop the combiner sets and the new sorted retained elements section.
> The second of these costs can be avoided by detecting what would otherwise be singleton combiner calls and not making them, which is a good idea in itself even if we don't decide to do this reform.
> The two techniques combine well; recycled elements of the buffer need not be combined if there's no new element with the same key.
> -dk

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sun Jul 16 06:02:29 2006
Return-Path: 
 <hadoop-dev-return-2555-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 70407 invoked from network); 16 Jul 2006 06:02:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jul 2006 06:02:29 -0000
Received: (qmail 77600 invoked by uid 500); 16 Jul 2006 06:02:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 77575 invoked by uid 500); 16 Jul 2006 06:02:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 77566 invoked by uid 99); 16 Jul 2006 06:02:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Jul 2006 23:02:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Jul 2006 23:02:25 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A1EC441001D
	for <hadoop-dev@lucene.apache.org>; Sun, 16 Jul 2006 06:00:15 +0000 (GMT)
Message-ID: <30448413.1153029615660.JavaMail.jira@brutus>
Date: Sat, 15 Jul 2006 23:00:15 -0700 (PDT)
From: "Bryan Pendleton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-54?page=comments#action_12421380 ] 
            
Bryan Pendleton commented on HADOOP-54:
---------------------------------------

Another feature that might be useful: include an (optional) un-compressed copy of the *last* key in a given compression spill. Why? Because, for sorted SequenceFiles (specifically, for the data file of a MapFile), when seeking through to find a given key/value, knowing the last key in a given chunk allows skipping of decompressing the entire key array.

It should, of course, be optional, both because keys potentially be large, and because SequenceFiles aren't all sorted. But, in the MapFile case, it could reduce the cost of finding a hit during lookups.

Might also be useful to try to do some DFS block-aligning, to avoid block requests and CRC calculations for data that's not really going to be used. That sounds like it might be tricky to get, though, because default GFS blocks are so large, and we're probably talking about much smaller compression chunks. Does DFS have variable-length block writing yet?

> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Michel Tourn
>             Fix For: 0.5.0
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 17 02:06:21 2006
Return-Path: 
 <hadoop-dev-return-2556-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 60127 invoked from network); 17 Jul 2006 02:06:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jul 2006 02:06:21 -0000
Received: (qmail 9652 invoked by uid 500); 17 Jul 2006 02:06:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9490 invoked by uid 500); 17 Jul 2006 02:06:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9481 invoked by uid 99); 17 Jul 2006 02:06:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Jul 2006 19:06:20 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.126.228.150] (HELO rsmtp2.corp.yahoo.com)
 (207.126.228.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Jul 2006 19:06:08 -0700
Received: from [10.0.1.2] ([172.21.179.131])
	(authenticated bits=0)
	by rsmtp2.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k6H25cNi030976
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Sun, 16 Jul 2006 19:05:38 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=VHUlpx7rDkTZCCbFzufFBVIvNmM6HTRLwJFK6U+O9zQ2v5Zq3h7L3lWxSLDCx5YO
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <30448413.1153029615660.JavaMail.jira@brutus>
References: <30448413.1153029615660.JavaMail.jira@brutus>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <71BD1212-0C12-48C3-9C44-277BCB37D14E@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Eric Baldeschwieler <eric14@yahoo-inc.com>
Subject: Re: [jira] Commented: (HADOOP-54) SequenceFile should compress
 blocks, not individual entries
Date: Sun, 16 Jul 2006 19:05:36 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Wouldn't knowing the first key of the next chunk suffice?  That is  
inexpensive to uncompress (coming first).

On Jul 15, 2006, at 11:00 PM, Bryan Pendleton (JIRA) wrote:

>     [ http://issues.apache.org/jira/browse/HADOOP-54? 
> page=comments#action_12421380 ]
>
> Bryan Pendleton commented on HADOOP-54:
> ---------------------------------------
>
> Another feature that might be useful: include an (optional) un- 
> compressed copy of the *last* key in a given compression spill.  
> Why? Because, for sorted SequenceFiles (specifically, for the data  
> file of a MapFile), when seeking through to find a given key/value,  
> knowing the last key in a given chunk allows skipping of  
> decompressing the entire key array.
>
> It should, of course, be optional, both because keys potentially be  
> large, and because SequenceFiles aren't all sorted. But, in the  
> MapFile case, it could reduce the cost of finding a hit during  
> lookups.
>
> Might also be useful to try to do some DFS block-aligning, to avoid  
> block requests and CRC calculations for data that's not really  
> going to be used. That sounds like it might be tricky to get,  
> though, because default GFS blocks are so large, and we're probably  
> talking about much smaller compression chunks. Does DFS have  
> variable-length block writing yet?
>
>> SequenceFile should compress blocks, not individual entries
>> -----------------------------------------------------------
>>
>>                 Key: HADOOP-54
>>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>>             Project: Hadoop
>>          Issue Type: Improvement
>>          Components: io
>>    Affects Versions: 0.2.0
>>            Reporter: Doug Cutting
>>         Assigned To: Michel Tourn
>>             Fix For: 0.5.0
>>
>>
>> SequenceFile will optionally compress individual values.  But both  
>> compression and performance would be much better if sequences of  
>> keys and values are compressed together.  Sync marks should only  
>> be placed between blocks.  This will require some changes to  
>> MapFile too, so that all file positions stored there are the  
>> positions of blocks, not entries within blocks.  Probably this can  
>> be accomplished by adding a getBlockStartPosition() method to  
>> SequenceFile.Writer.
>
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the  
> administrators: http://issues.apache.org/jira/secure/ 
> Administrators.jspa
> -
> For more information on JIRA, see: http://www.atlassian.com/ 
> software/jira
>
>


From MAILER-DAEMON Mon Jul 17 12:16:28 2006
Return-Path: 
 <hadoop-dev-return-2557-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 64635 invoked from network); 17 Jul 2006 12:16:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jul 2006 12:16:28 -0000
Received: (qmail 40848 invoked by uid 500); 17 Jul 2006 12:16:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40798 invoked by uid 500); 17 Jul 2006 12:16:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 40770 invoked by uid 99); 17 Jul 2006 12:16:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 05:16:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 05:16:25 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 230C7714204
	for <hadoop-dev@lucene.apache.org>; Mon, 17 Jul 2006 12:14:14 +0000 (GMT)
Message-ID: <32857334.1153138454140.JavaMail.jira@brutus>
Date: Mon, 17 Jul 2006 05:14:14 -0700 (PDT)
From: "Thomas FRIOL (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-366) Should be able to specify more than
 one jar into a JobConf file
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Should be able to specify more than one jar into a JobConf file
---------------------------------------------------------------

                 Key: HADOOP-366
                 URL: http://issues.apache.org/jira/browse/HADOOP-366
             Project: Hadoop
          Issue Type: Improvement
          Components: mapred
    Affects Versions: 0.4.0
            Reporter: Thomas FRIOL


A job should be able to specify more than one jar file into its JobConf file because sometimes custom Map and Reduce classes or just InputFormat classes uses objects coming from other jar files. For now, we have to build a unique jar to make Hadoop mapreduce operations works.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 17 16:18:42 2006
Return-Path: 
 <hadoop-dev-return-2558-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 60888 invoked from network); 17 Jul 2006 16:18:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jul 2006 16:18:42 -0000
Received: (qmail 62337 invoked by uid 500); 17 Jul 2006 16:18:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62317 invoked by uid 500); 17 Jul 2006 16:18:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62308 invoked by uid 99); 17 Jul 2006 16:18:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 09:18:41 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.145.54.172] (HELO mrout2.yahoo.com) (216.145.54.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 09:18:40 -0700
Received: from [207.126.231.161] (oom-mac.corp.yahoo.com [207.126.231.161])
	by mrout2.yahoo.com (8.13.6/8.13.6/y.out) with ESMTP id k6HGHxJx066114
	for <hadoop-dev@lucene.apache.org>; Mon, 17 Jul 2006 09:18:00 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:content-transfer-encoding:message-id:
	content-type:to:from:subject:date:x-mailer;
	b=m1H3mFAt8F6T3tq+e1+yhKNFq0hsIfSteLQ94Ygrg6y8vISlwVmvcA8rb7vPUlIJ
Mime-Version: 1.0 (Apple Message framework v624)
Content-Transfer-Encoding: 7bit
Message-Id: <042fb218b3960814a0f641fcc3fc7ccc@yahoo-inc.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
To: hadoop-dev@lucene.apache.org
From: "Owen O'Malley" <owen@yahoo-inc.com>
Subject: suggestions for doing graphical svn diffs?
Date: Mon, 17 Jul 2006 09:18:09 -0700
X-Mailer: Apple Mail (2.624)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Does anyone have any suggestions for tools to do side-by-side graphical 
svn diffs?

Thanks,
     Owen


From MAILER-DAEMON Mon Jul 17 16:31:28 2006
Return-Path: 
 <hadoop-dev-return-2560-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 70258 invoked from network); 17 Jul 2006 16:31:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jul 2006 16:31:28 -0000
Received: (qmail 2241 invoked by uid 500); 17 Jul 2006 16:31:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 2214 invoked by uid 500); 17 Jul 2006 16:31:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 2176 invoked by uid 99); 17 Jul 2006 16:31:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 09:31:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 09:31:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D4F9B714219
	for <hadoop-dev@lucene.apache.org>; Mon, 17 Jul 2006 16:29:14 +0000 (GMT)
Message-ID: <27997328.1153153754869.JavaMail.jira@brutus>
Date: Mon, 17 Jul 2006 09:29:14 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-366) Should be able to specify more than
 one jar into a JobConf file
In-Reply-To: <32857334.1153138454140.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-366?page=comments#action_12421655 ] 
            
Owen O'Malley commented on HADOOP-366:
--------------------------------------

There is functionality in the system that is close to this functionality. Specifically, you can wrap multiple jars into a single jar in the "lib" directory and they will be expanded. So if you have 3 jars map.jar, reduce.jar and format.jar, you could put them together into:

% mkdir lib
% mv map.jar reduce.jar format.jar lib
% jar uvf app.jar lib

That will make all 3 jars (and the rest of your jar) available to the framework. Does that meet your need?

> Should be able to specify more than one jar into a JobConf file
> ---------------------------------------------------------------
>
>                 Key: HADOOP-366
>                 URL: http://issues.apache.org/jira/browse/HADOOP-366
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.4.0
>            Reporter: Thomas FRIOL
>
> A job should be able to specify more than one jar file into its JobConf file because sometimes custom Map and Reduce classes or just InputFormat classes uses objects coming from other jar files. For now, we have to build a unique jar to make Hadoop mapreduce operations works.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 17 16:30:23 2006
Return-Path: 
 <hadoop-dev-return-2559-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 70087 invoked from network); 17 Jul 2006 16:30:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jul 2006 16:30:23 -0000
Received: (qmail 99076 invoked by uid 500); 17 Jul 2006 16:30:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 99060 invoked by uid 500); 17 Jul 2006 16:30:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 99051 invoked by uid 99); 17 Jul 2006 16:30:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 09:30:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [84.96.21.10] (HELO trinity.anyware-tech.com) (84.96.21.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 09:30:20 -0700
Received: from localhost (localhost [127.0.0.1])
	by trinity.anyware-tech.com (Postfix) with ESMTP id 14E644005C6
	for <hadoop-dev@lucene.apache.org>; Mon, 17 Jul 2006 18:29:58 +0200 (CEST)
Received: from trinity.anyware-tech.com ([127.0.0.1])
	by localhost (trinity.anyware-tech.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 23890-10 for <hadoop-dev@lucene.apache.org>;
	Mon, 17 Jul 2006 18:29:56 +0200 (CEST)
Received: from [10.0.1.45] (cali.anyware [10.0.1.45])
	by trinity.anyware-tech.com (Postfix) with ESMTP id 3381140031F
	for <hadoop-dev@lucene.apache.org>; Mon, 17 Jul 2006 18:29:56 +0200 (CEST)
Message-ID: <44BBBB0F.3050602@anyware-tech.com>
Date: Mon, 17 Jul 2006 18:30:07 +0200
From: Thomas FRIOL <thomas@anyware-tech.com>
User-Agent: Thunderbird 1.5.0.4 (X11/20060615)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: suggestions for doing graphical svn diffs?
References: <042fb218b3960814a0f641fcc3fc7ccc@yahoo-inc.com>
In-Reply-To: <042fb218b3960814a0f641fcc3fc7ccc@yahoo-inc.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Scanned: Debian amavisd-new at anyware-tech.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Owen,

If you are an Eclipse user, I suggest you to use Subversive [1] or 
Subclipse [2] plugin.

[1] http://www.polarion.org/index.php?page=overview&project=subversive
[2] http://subclipse.tigris.org/

Thomas.

Thomas FRIOL
Dveloppeur Eclipse / Eclipse Developer
Solutions & Technologies
ANYWARE TECHNOLOGIES
Tl      : +33 (0)561 000 653
Portable : +33 (0)609 704 810
Fax      : +33 (0)561 005 146
www.anyware-tech.com



Owen O'Malley a crit :
> Does anyone have any suggestions for tools to do side-by-side 
> graphical svn diffs?
>
> Thanks,
>     Owen
>

From MAILER-DAEMON Mon Jul 17 16:49:25 2006
Return-Path: 
 <hadoop-dev-return-2561-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77443 invoked from network); 17 Jul 2006 16:49:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jul 2006 16:49:25 -0000
Received: (qmail 40981 invoked by uid 500); 17 Jul 2006 16:49:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40967 invoked by uid 500); 17 Jul 2006 16:49:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 40958 invoked by uid 99); 17 Jul 2006 16:49:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 09:49:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 09:49:24 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 232A171428D
	for <hadoop-dev@lucene.apache.org>; Mon, 17 Jul 2006 16:47:17 +0000 (GMT)
Message-ID: <21241118.1153154837138.JavaMail.jira@brutus>
Date: Mon, 17 Jul 2006 09:47:17 -0700 (PDT)
From: "Thomas FRIOL (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-366) Should be able to specify more than
 one jar into a JobConf file
In-Reply-To: <32857334.1153138454140.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-366?page=comments#action_12421664 ] 
            
Thomas FRIOL commented on HADOOP-366:
-------------------------------------

Owen,

I think you did not understand correctly my explanations. I will try to be more precise.

In fact, when I am writting a new job using a jobConf.xml file, I am able to define a custom jar using the property 'mapred.jar'. This jar is the uploaded to the DFS and then appended to the Hadoop classpath of each task tracker.

The exact purpose of my problem is that today, we can specify only one jar and I think it could be great to be able to specify a comma separated list of jars so that we do not have to build a single jar with differents existing jars to give it to each Hadoop task tracker.

Am I more precise now ?

Thanks for your help.

> Should be able to specify more than one jar into a JobConf file
> ---------------------------------------------------------------
>
>                 Key: HADOOP-366
>                 URL: http://issues.apache.org/jira/browse/HADOOP-366
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.4.0
>            Reporter: Thomas FRIOL
>
> A job should be able to specify more than one jar file into its JobConf file because sometimes custom Map and Reduce classes or just InputFormat classes uses objects coming from other jar files. For now, we have to build a unique jar to make Hadoop mapreduce operations works.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 17 16:58:34 2006
Return-Path: 
 <hadoop-dev-return-2562-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 79106 invoked from network); 17 Jul 2006 16:58:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jul 2006 16:58:34 -0000
Received: (qmail 53382 invoked by uid 500); 17 Jul 2006 16:58:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53360 invoked by uid 500); 17 Jul 2006 16:58:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53343 invoked by uid 99); 17 Jul 2006 16:58:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 09:58:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 09:58:24 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CF86271429B
	for <hadoop-dev@lucene.apache.org>; Mon, 17 Jul 2006 16:56:17 +0000 (GMT)
Message-ID: <3257817.1153155377847.JavaMail.jira@brutus>
Date: Mon, 17 Jul 2006 09:56:17 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-136) Overlong UTF8's not handled well
In-Reply-To: <64235546.1145045520182.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-136?page=all ]

Owen O'Malley reassigned HADOOP-136:
------------------------------------

    Assignee: Hairong Kuang  (was: Michel Tourn)

> Overlong UTF8's not handled well
> --------------------------------
>
>                 Key: HADOOP-136
>                 URL: http://issues.apache.org/jira/browse/HADOOP-136
>             Project: Hadoop
>          Issue Type: Bug
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Dick King
>         Assigned To: Hairong Kuang
>            Priority: Minor
>             Fix For: 0.5.0
>
>         Attachments: largeutf8.patch
>
>
> When we feed an overlong string to the UTF8 constructor, two suboptimal things happen.
> First, we truncate to 0xffff/3 characters on the assumption that every character takes three bytes in UTF8.  This can truncate strings that don't need it, and it can be overoptimistic since there are characters that render as four bytes in UTF8.
> Second, the code doesn't actually handle four-byte characters.
> Third, there's a behavioral discontinuity.  If the string is "discovered" to be overlong by the arbitrary limit described above, we truncate with a log message, otherwise we signal a RuntimeException.  One feels that both forms of truncation should be treated alike.  However, this issue is concealed by the second issue; the exception will never be thrown because UTF8.utf8Length can't return more than three times the length of its input.
> I would recommend changing UTF8.utf8Length to let its caller know how many characters of the input string will actually fit if there's an overflow [perhaps by returning the negative of that number] and doing the truncation accurately as needed.
> -dk

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 17 17:14:22 2006
Return-Path: 
 <hadoop-dev-return-2563-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84002 invoked from network); 17 Jul 2006 17:14:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jul 2006 17:14:22 -0000
Received: (qmail 82405 invoked by uid 500); 17 Jul 2006 17:14:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 82377 invoked by uid 500); 17 Jul 2006 17:14:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 82368 invoked by uid 99); 17 Jul 2006 17:14:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 10:14:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 10:14:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AC979714293
	for <hadoop-dev@lucene.apache.org>; Mon, 17 Jul 2006 17:12:14 +0000 (GMT)
Message-ID: <3324942.1153156334704.JavaMail.jira@brutus>
Date: Mon, 17 Jul 2006 10:12:14 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-281) dfs.FSDirectory.mkdirs can create
 sub-directories of a file!
In-Reply-To: <19818580.1149635189767.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-281?page=comments#action_12421668 ] 
            
Arun C Murthy commented on HADOOP-281:
--------------------------------------

Hi Wendy,

  Your approach looks fine too... I'll just let Doug/Konstantin or someone else with more experience with dfs codebase decide.

  However, a subtle issue: there are some places in the code base (e.g. FileUtil.java) which makes a call to 'mkdirs' and then fail to check the return-value to ensure that it completed successfully, which lead to other bugs. At the very least we will need to patch FileUtil.java (it's a part of my mkdirs.patch). Could you further test your patch using the dfs shell? 

  E.g. 
  $ hadoop dfs -mkdir /tmp/test-mkdir
  $ hadoop dfs -copyFromLocal ./foo.txt /tmp/test-mkdir/foo.txt
  $ hadoop dfs -mkdir /tmp/test-mkdir/foo.txt/d1/d2
  $ hadoop dfs -mkdir /tmp/test-mkdir/foo.txt/d1
  $ hadoop dfs -put ./some_directory /tmp/test-mkdir/foo.txt/some_directory

  Your patch fails only in the last test-case above (due to non-existent return-value check in FileUtil.java). 
  Could you please take a look and maybe include my patch for FileUtil.java too?

thanks,
Arun
 

> dfs.FSDirectory.mkdirs can create sub-directories of a file!
> ------------------------------------------------------------
>
>                 Key: HADOOP-281
>                 URL: http://issues.apache.org/jira/browse/HADOOP-281
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.3.1
>            Reporter: Sameer Paranjpye
>             Fix For: 0.5.0
>
>         Attachments: addNode.patch, mkdirs.patch, TestDFSMkdirs.java
>
>
> dfs.FSDirectory.mkdirs will merrily adds children to a directory tree node without checking whether it represents a directory. So it is possible to create a subdirectories of a file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 17 17:17:45 2006
Return-Path: 
 <hadoop-dev-return-2564-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84927 invoked from network); 17 Jul 2006 17:17:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jul 2006 17:17:45 -0000
Received: (qmail 90972 invoked by uid 500); 17 Jul 2006 17:17:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 90952 invoked by uid 500); 17 Jul 2006 17:17:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 90940 invoked by uid 99); 17 Jul 2006 17:17:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 10:17:42 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of himars@gmail.com designates
 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 10:17:40 -0700
Received: by nf-out-0910.google.com with SMTP id c29so31940nfb
        for <hadoop-dev@lucene.apache.org>;
 Mon, 17 Jul 2006 10:17:19 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=rVXCuPmYs7wOcKKXLRFdYUfAWVJJ0W9ASJfHE8I+Mvc37OfN0VSTXQ6tZSoPCb9A0XA9CiUoFtCjdgSb9IXrw5VJlykxww5Y/pxcPJ9tpG1QaVqmDpchSOZ4SVhW730uFGJtgpDB4Tw0l3/J7PSetwlL1uHuHS5P0lcRBx3fEzM=
Received: by 10.48.210.20 with SMTP id i20mr2144019nfg;
        Mon, 17 Jul 2006 10:17:18 -0700 (PDT)
Received: by 10.48.208.14 with HTTP; Mon, 17 Jul 2006 10:17:18 -0700 (PDT)
Message-ID: <1263a5c70607171017g6ccc10c3ha20601f51835442c@mail.gmail.com>
Date: Tue, 18 Jul 2006 01:17:18 +0800
From: "Jack Tang" <himars@gmail.com>
To: hadoop-dev@lucene.apache.org
Subject: Re: suggestions for doing graphical svn diffs?
In-Reply-To: <042fb218b3960814a0f641fcc3fc7ccc@yahoo-inc.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=GB2312; format=flowed
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <042fb218b3960814a0f641fcc3fc7ccc@yahoo-inc.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

YmV5b25kIGNvbWFwcmU6Cmh0dHA6Ly93d3cuc2Nvb3RlcnNvZnR3YXJlLmNvbS9ob21lLnBocAoK
L2phY2sKCk9uIDcvMTgvMDYsIE93ZW4gTydNYWxsZXkgPG93ZW5AeWFob28taW5jLmNvbT4gd3Jv
dGU6Cj4gRG9lcyBhbnlvbmUgaGF2ZSBhbnkgc3VnZ2VzdGlvbnMgZm9yIHRvb2xzIHRvIGRvIHNp
ZGUtYnktc2lkZSBncmFwaGljYWwKPiBzdm4gZGlmZnM/Cj4KPiBUaGFua3MsCj4gICAgICBPd2Vu
Cj4KPgoKCi0tIApLZWVwIERpc2NvdmVyaW5nIC4uLiAuLi4KQ29wZW5oYWdlbiBTcGlyaXQgPQq4
37bItcTWx8Gmu+62r6GitPO1qLXEyebP1b6ryfGhosnusMK1xNHQvr/E2sjd0+u/7LvutcTA1szs
1vfS5bXEu+y6z87vo64K

From MAILER-DAEMON Mon Jul 17 17:20:47 2006
Return-Path: 
 <hadoop-dev-return-2565-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85716 invoked from network); 17 Jul 2006 17:20:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jul 2006 17:20:47 -0000
Received: (qmail 97103 invoked by uid 500); 17 Jul 2006 17:20:43 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97084 invoked by uid 500); 17 Jul 2006 17:20:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97067 invoked by uid 99); 17 Jul 2006 17:20:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 10:20:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.109.112.28] (HELO mrout2-b.corp.dcn.yahoo.com)
 (216.109.112.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 10:20:40 -0700
Received: from finishship-lm.corp.yahoo.com (finishship-lm.corp.yahoo.com
 [172.21.39.56])
	by mrout2-b.corp.dcn.yahoo.com (8.13.6/8.13.6/y.out) with ESMTP id
 k6HHJu1w026492
	for <hadoop-dev@lucene.apache.org>; Mon, 17 Jul 2006 10:19:57 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=from:to:subject:date:user-agent:references:in-reply-to:
	mime-version:content-type:content-transfer-encoding:
	content-disposition:message-id;
	b=LqGMI0CEb3bd2XMBA4jdLmv+kiIACjlZyyeyOdyq1mAS46plKjUdXDD85Dc0J/cM
From: Benjamin Reed <breed@yahoo-inc.com>
To: hadoop-dev@lucene.apache.org
Subject: Re: suggestions for doing graphical svn diffs?
Date: Mon, 17 Jul 2006 10:19:57 -0700
User-Agent: KMail/1.9.3
References: <042fb218b3960814a0f641fcc3fc7ccc@yahoo-inc.com>
 <44BBBB0F.3050602@anyware-tech.com>
In-Reply-To: <44BBBB0F.3050602@anyware-tech.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200607171019.57198.breed@yahoo-inc.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I do such diffs all the time with Subclipse. It's great. It's also nice for=
=20
managing patches.

ben

On Monday 17 July 2006 09:30, Thomas FRIOL wrote:
> Hi Owen,
>
> If you are an Eclipse user, I suggest you to use Subversive [1] or
> Subclipse [2] plugin.
>
> [1] http://www.polarion.org/index.php?page=3Doverview&project=3Dsubversive
> [2] http://subclipse.tigris.org/
>
> Thomas.
>
> Thomas FRIOL
> D=E9veloppeur Eclipse / Eclipse Developer
> Solutions & Technologies
> ANYWARE TECHNOLOGIES
> T=E9l      : +33 (0)561 000 653
> Portable : +33 (0)609 704 810
> Fax      : +33 (0)561 005 146
> www.anyware-tech.com
>
> Owen O'Malley a =E9crit :
> > Does anyone have any suggestions for tools to do side-by-side
> > graphical svn diffs?
> >
> > Thanks,
> >     Owen

From MAILER-DAEMON Mon Jul 17 18:08:27 2006
Return-Path: 
 <hadoop-dev-return-2566-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 2802 invoked from network); 17 Jul 2006 18:08:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jul 2006 18:08:27 -0000
Received: (qmail 1125 invoked by uid 500); 17 Jul 2006 18:08:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 1070 invoked by uid 500); 17 Jul 2006 18:08:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 1061 invoked by uid 99); 17 Jul 2006 18:08:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 11:08:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 11:08:26 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A7BB2714293
	for <hadoop-dev@lucene.apache.org>; Mon, 17 Jul 2006 18:06:14 +0000 (GMT)
Message-ID: <24567821.1153159574684.JavaMail.jira@brutus>
Date: Mon, 17 Jul 2006 11:06:14 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-307) Many small jobs benchmark for
 MapReduce
In-Reply-To: <13009062.1150636529837.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-307?page=all ]

Sanjay Dahiya updated HADOOP-307:
---------------------------------

    Attachment: patch.txt

Updated to reside in src/contrib. with build.xml changes for contrib.

> Many small jobs benchmark for MapReduce
> ---------------------------------------
>
>                 Key: HADOOP-307
>                 URL: http://issues.apache.org/jira/browse/HADOOP-307
>             Project: Hadoop
>          Issue Type: Task
>          Components: mapred
>            Reporter: Sanjay Dahiya
>            Priority: Minor
>         Attachments: patch.txt, patch.txt
>
>
> A benchmark that runs many small MapReduce tasks in sequence. A single map reduce implementation is used, it is invoked multiple times with input as the output from previous run. The input to first Map is a TextInputFormat ( a text file with few hundred KBs). Input records are passed to output without much processing. The idea is to benchmark the time taken by initialization of Mapper and Reducer. An initial prototyping on a single machine with 20 MR tasks in sequence took ~47 seconds per task. Looking for suggestions on what else can be included in the benchmark. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 17 18:12:49 2006
Return-Path: 
 <hadoop-dev-return-2567-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 4492 invoked from network); 17 Jul 2006 18:12:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jul 2006 18:12:49 -0000
Received: (qmail 8434 invoked by uid 500); 17 Jul 2006 18:12:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 8411 invoked by uid 500); 17 Jul 2006 18:12:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 8402 invoked by uid 99); 17 Jul 2006 18:12:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 11:12:49 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.126.228.149] (HELO rsmtp1.corp.yahoo.com)
 (207.126.228.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 11:12:47 -0700
Received: from [172.21.147.237] ([172.21.179.130])
	(authenticated bits=0)
	by rsmtp1.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k6HICHKq068366
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Mon, 17 Jul 2006 11:12:17 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=p6AsG41fXPx1+maigSD7pOpE0LhtcAQvytWNmT197JdU6crGE9vnXELwROOLptpb
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <19408714.1152982874728.JavaMail.jira@brutus>
References: <19408714.1152982874728.JavaMail.jira@brutus>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <4785243A-4A72-4A12-B714-78A41F56689B@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Eric Baldeschwieler <eric14@yahoo-inc.com>
Subject: Re: [jira] Commented: (HADOOP-363) When combiners exist,
 postpone mappers' spills of map output to disk until combiners are
 unsuccessful.
Date: Mon, 17 Jul 2006 11:11:34 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I'd be interested in actual data showing that this maters.

On Jul 15, 2006, at 10:01 AM, Dick King (JIRA) wrote:

>     [ http://issues.apache.org/jira/browse/HADOOP-363? 
> page=comments#action_12421313 ]
>
> Dick King commented on HADOOP-363:
> ----------------------------------
>
> I have to leave soon, but I'll write a quick comment.
>
> By including a combiner at all you're saying that the cost of one  
> extra deserialization and serialization [to do a little combine  
> internally rather than a massive one in a reducer] is cheaper than  
> the cost of shuffling an extra datum in the big shuffle.  Note that  
> as the output buffer fills with stable items the benefits of an  
> early combine decreases but so do the costs.  Only the costs of the  
> comparisons remains high as the buffer fills.
>
> Having said that, the point of some records' values getting large  
> as many values get folded in under one key is salient. However,  
> this problem isn't necxessarily mitigated by changing the buffer  
> residue trigger point.  Still, I suppose I can support making the  
> test relatively modest simply because it's a conservative thing to  
> do, but this should be a configuration for those who have different  
> ideas for a specific job.
>
> -dk
>
>
>> When combiners exist, postpone mappers' spills of map output to  
>> disk until combiners are unsuccessful.
>> --------------------------------------------------------------------- 
>> ---------------------------------
>>
>>                 Key: HADOOP-363
>>                 URL: http://issues.apache.org/jira/browse/HADOOP-363
>>             Project: Hadoop
>>          Issue Type: Improvement
>>          Components: mapred
>>            Reporter: Dick King
>>
>> When a map/reduce job is set up with a combiner, the mapper tasks  
>> each build up an in-heap collection of 100K key/value pairs -- and  
>> then apply the combiner to reduce that to whatever it becomes by  
>> applying the combiner to sets with like keys before spilling to  
>> disk to send it to the reducers.
>> Typically running the combiner consumes a lot less resources than  
>> shipping the data, especially since the data end up in a reducer  
>> where probably the same code will be run anyway.
>> I would like to see this changed so that when the combiner shrinks  
>> the 100K key/value pairs to less than, say, 90K, we just keep  
>> running the mapper and combiner alternately until we get enough  
>> distinct keys to make this unlikely to be worthwhile [or until we  
>> run out of input, of course].
>> This has two costs: the whole internal buffer has to be re-sorted  
>> so we can apply the combiner even though as few as 10K new  
>> elements have been added, and in some cases we'll call the  
>> combiner on many singletons.
>> The first of these costs can be avoided by doing a mini-sort in  
>> the new pairs section and doing a merge to develop the combiner  
>> sets and the new sorted retained elements section.
>> The second of these costs can be avoided by detecting what would  
>> otherwise be singleton combiner calls and not making them, which  
>> is a good idea in itself even if we don't decide to do this reform.
>> The two techniques combine well; recycled elements of the buffer  
>> need not be combined if there's no new element with the same key.
>> -dk
>
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the  
> administrators: http://issues.apache.org/jira/secure/ 
> Administrators.jspa
> -
> For more information on JIRA, see: http://www.atlassian.com/ 
> software/jira
>
>


From MAILER-DAEMON Mon Jul 17 18:37:23 2006
Return-Path: 
 <hadoop-dev-return-2568-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 13514 invoked from network); 17 Jul 2006 18:37:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jul 2006 18:37:23 -0000
Received: (qmail 38860 invoked by uid 500); 17 Jul 2006 18:37:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38840 invoked by uid 500); 17 Jul 2006 18:37:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38830 invoked by uid 99); 17 Jul 2006 18:37:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 11:37:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 11:37:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DDC8F71428E
	for <hadoop-dev@lucene.apache.org>; Mon, 17 Jul 2006 18:35:14 +0000 (GMT)
Message-ID: <25981533.1153161314905.JavaMail.jira@brutus>
Date: Mon, 17 Jul 2006 11:35:14 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-341) Enhance distcp to handle *http* as a
 'source protocol'.
In-Reply-To: <18620957.1151927429856.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-341?page=comments#action_12421686 ] 
            
Arun C Murthy commented on HADOOP-341:
--------------------------------------

I have a further enhancement to distcp i.e. -f option now works with urls of scheme http/dfs/file.  Hence I'm reopening this issue and will submit another patch shortly.

Doug, I'll also update logalyzer (HADOOP-342) to reflect these changes and another patch there will be needed too, please hold off commits there.

thanks,
Arun

> Enhance distcp to handle *http* as a 'source protocol'.
> -------------------------------------------------------
>
>                 Key: HADOOP-341
>                 URL: http://issues.apache.org/jira/browse/HADOOP-341
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: util
>            Reporter: Arun C Murthy
>             Fix For: 0.5.0
>
>         Attachments: distcp.patch, distcp2.patch
>
>
> Requirements:
>   Presently distcp recursively copies a directory from one dfs to another i.e. both source and destination of of the *dfs* protocol.
>   Enhance it to handle *http* as the source protocol i.e. support copying files from arbitrary http-based sources into the dfs.
> Design:
>   
>   Follow distcp's current design: one map task per file which needs to be copied.
>   Caveat: distcp handles *recursive* copying by listing sub-directories; this is not as feasible with a http-based source since things like 'fancy-indexing' might not be enabled on the web-server (for all sub-locations recursively too), and even if it is enabled it will mean tedious parsing of the html served to glean the sub-directories etc. Hence the idea is to support an input file (via a -f option) which contains a list of the http-based urls which represent multiple source files.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 17 18:37:24 2006
Return-Path: 
 <hadoop-dev-return-2569-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 13550 invoked from network); 17 Jul 2006 18:37:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jul 2006 18:37:24 -0000
Received: (qmail 39082 invoked by uid 500); 17 Jul 2006 18:37:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 39051 invoked by uid 500); 17 Jul 2006 18:37:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 39042 invoked by uid 99); 17 Jul 2006 18:37:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 11:37:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 11:37:23 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D5968714294
	for <hadoop-dev@lucene.apache.org>; Mon, 17 Jul 2006 18:35:15 +0000 (GMT)
Message-ID: <10910973.1153161315872.JavaMail.jira@brutus>
Date: Mon, 17 Jul 2006 11:35:15 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Reopened: (HADOOP-341) Enhance distcp to handle *http* as a
 'source protocol'.
In-Reply-To: <18620957.1151927429856.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-341?page=all ]

Arun C Murthy reopened HADOOP-341:
----------------------------------

      Assignee: Arun C Murthy
             

> Enhance distcp to handle *http* as a 'source protocol'.
> -------------------------------------------------------
>
>                 Key: HADOOP-341
>                 URL: http://issues.apache.org/jira/browse/HADOOP-341
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: util
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.5.0
>
>         Attachments: distcp.patch, distcp2.patch
>
>
> Requirements:
>   Presently distcp recursively copies a directory from one dfs to another i.e. both source and destination of of the *dfs* protocol.
>   Enhance it to handle *http* as the source protocol i.e. support copying files from arbitrary http-based sources into the dfs.
> Design:
>   
>   Follow distcp's current design: one map task per file which needs to be copied.
>   Caveat: distcp handles *recursive* copying by listing sub-directories; this is not as feasible with a http-based source since things like 'fancy-indexing' might not be enabled on the web-server (for all sub-locations recursively too), and even if it is enabled it will mean tedious parsing of the html served to glean the sub-directories etc. Hence the idea is to support an input file (via a -f option) which contains a list of the http-based urls which represent multiple source files.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 17 18:41:35 2006
Return-Path: 
 <hadoop-dev-return-2570-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16260 invoked from network); 17 Jul 2006 18:41:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jul 2006 18:41:35 -0000
Received: (qmail 51102 invoked by uid 500); 17 Jul 2006 18:41:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 51082 invoked by uid 500); 17 Jul 2006 18:41:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 51064 invoked by uid 99); 17 Jul 2006 18:41:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 11:41:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 11:41:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 85B3871429B
	for <hadoop-dev@lucene.apache.org>; Mon, 17 Jul 2006 18:39:15 +0000 (GMT)
Message-ID: <8699712.1153161555545.JavaMail.jira@brutus>
Date: Mon, 17 Jul 2006 11:39:15 -0700 (PDT)
From: "Renaud Richardet (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-350) In standalone mode,
 'org.apache.commons.cli cannot be resolved'
In-Reply-To: <4329338.1152218609766.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-350?page=comments#action_12421689 ] 
            
Renaud Richardet commented on HADOOP-350:
-----------------------------------------

Thank you Hairong for the fast answer!

I think it would be useful if this jar would be commited to nutch-trunk and hadoop-trunk, WDOT?

Best, Renaud

> In standalone mode, 'org.apache.commons.cli cannot be resolved'
> ---------------------------------------------------------------
>
>                 Key: HADOOP-350
>                 URL: http://issues.apache.org/jira/browse/HADOOP-350
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.5.0
>            Reporter: stack@archive.org
>            Priority: Minor
>         Attachments: commons-cli-2.0-SNAPSHOT.jar, commons-cli-2.0-SNAPSHOT.jar
>
>
> Standalone works fine in 0.4.0 but if I use TRUNK, 'Last Changed Date: 2006-06-28 14:27:33 -0700 (Wed, 28 Jun 2006)', and pass it my fat job jar, I get following exception.
> 06/07/06 13:18:02 INFO conf.Configuration: parsing file:/tmp/hadoop-unjar29923/nutch-site.xml
> 06/07/06 13:18:02 INFO conf.Configuration: parsing file:/home/stack/workspace/hadoop-local-conf/hadoop-site.xml
> Exception in thread "main" java.lang.Error: Unresolved compilation problems:   
>         The import org.apache.commons.cli cannot be resolved
>         The import org.apache.commons.cli cannot be resolved
>         The import org.apache.commons.cli cannot be resolved
>         The import org.apache.commons.cli cannot be resolved       
>         The import org.apache.commons.cli cannot be resolved
>         The import org.apache.commons.cli cannot be resolved
>         The import org.apache.commons.cli cannot be resolved
>         The import org.apache.commons.cli cannot be resolved
>         The import org.apache.commons.cli cannot be resolved
>         Options cannot be resolved to a type
>         Option cannot be resolved to a type
>         OptionBuilder cannot be resolved
>         Option cannot be resolved to a type
>         OptionBuilder cannot be resolved
>         Option cannot be resolved to a type
>         OptionBuilder cannot be resolved
>         Option cannot be resolved to a type
>         OptionBuilder cannot be resolved
>         Options cannot be resolved to a type
>         Options cannot be resolved to a type
>         CommandLine cannot be resolved to a type
>         Options cannot be resolved to a type
>         The method buildGeneralOptions() is undefined for the type ToolBase
>         CommandLineParser cannot be resolved to a type
>         GnuParser cannot be resolved to a type
>         CommandLine cannot be resolved to a type
>         ParseException cannot be resolved to a type
>         e cannot be resolved
>         HelpFormatter cannot be resolved to a type
>         HelpFormatter cannot be resolved to a type
>         at org.apache.hadoop.util.ToolBase.<init>(ToolBase.java:21)
>         at org.apache.hadoop.mapred.JobClient.<init>(JobClient.java:178)
>         at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:320)
>         at org.archive.access.nutch.ImportArcs.importArcs(ImportArcs.java:576)
>         at org.archive.access.nutch.Nutchwax.doImport(Nutchwax.java:159)
>         at org.archive.access.nutch.Nutchwax.doAll(Nutchwax.java:144)
>         at org.archive.access.nutch.Nutchwax.doJob(Nutchwax.java:368)
>         at org.archive.access.nutch.Nutchwax.main(Nutchwax.java:621)
>         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
>         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>         at java.lang.reflect.Method.invoke(Method.java:585)
>         at org.apache.hadoop.util.RunJar.main(RunJar.java:128)
> I took a bit of a look.  Odd is that command-cli.jar is in hadoop/lib dir so should be found no problem (and we seem to be loading other stuff out of the uncompressed job jar fine -- see mention of nutch-site.xml above).   I tried adding the command-cli to my job jar.  I printed out all that RunJar -- see below -- was adding to its CLASSPATH and saw mention of command-cli but still no workee.
> file:/tmp/hadoop-unjar29923/lib/archive-commons-1.8.0.jar
> file:/tmp/hadoop-unjar29923/lib/commons-codec-1.3.jar
> file:/tmp/hadoop-unjar29923/lib/commons-httpclient-3.0-rc3.jar
> file:/tmp/hadoop-unjar29923/lib/commons-logging-1.0.4.jar
> file:/tmp/hadoop-unjar29923/lib/dsi.unimi.it-1.2.0.jar
> file:/tmp/hadoop-unjar29923/lib/commons-lang-2.1.jar
> file:/tmp/hadoop-unjar29923/lib/commons-cli-2.0-SNAPSHOT.jar
> file:/tmp/hadoop-unjar29923/lib/lucene-core-1.9.1.jar
> file:/tmp/hadoop-unjar29923/lib/lucene-misc-1.9.1.jar
> file:/tmp/hadoop-unjar29923/lib/jakarta-oro-2.0.7.jar
> file:/tmp/hadoop-unjar29923/lib/xerces-2_6_2-apis.jar
> file:/tmp/hadoop-unjar29923/lib/xerces-2_6_2.jar
> file:/tmp/hadoop-unjar29923/lib/concurrent-1.3.4.jar
> 06/07/06 13:18:01 INFO conf.Configuration: parsing file:/home/stack/workspace/hadoop-local-conf/hadoop-default.xml 
> Any ideas?
> Thanks.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 17 19:50:23 2006
Return-Path: 
 <hadoop-dev-return-2571-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 54504 invoked from network); 17 Jul 2006 19:50:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jul 2006 19:50:23 -0000
Received: (qmail 90534 invoked by uid 500); 17 Jul 2006 19:50:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 90515 invoked by uid 500); 17 Jul 2006 19:50:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 90506 invoked by uid 99); 17 Jul 2006 19:50:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 12:50:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 12:50:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CAF6D714293
	for <hadoop-dev@lucene.apache.org>; Mon, 17 Jul 2006 19:48:14 +0000 (GMT)
Message-ID: <18729020.1153165694828.JavaMail.jira@brutus>
Date: Mon, 17 Jul 2006 12:48:14 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-281) dfs.FSDirectory.mkdirs can create
 sub-directories of a file!
In-Reply-To: <19818580.1149635189767.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-281?page=comments#action_12421706 ] 
            
Konstantin Shvachko commented on HADOOP-281:
--------------------------------------------

I think addNode() is a good place to check whether the parent is a directory.
mkdirs() does not need to check all parents in the path, just the last one, since
all other parents have already been checked before.
I agree with Arun, the return value of mkdirs() should be checked every time
it is called to make sure the directories were actually created, including FileUtil
copy methods.
For mkdirs() I would let the FileNotFoundException exception thrown by addNode()
go through, rather than catching it and returning boolean, so that whoever calls
mkdirs() could decide what to do.
But there might be different opinions on that, and this will require more code changes.


> dfs.FSDirectory.mkdirs can create sub-directories of a file!
> ------------------------------------------------------------
>
>                 Key: HADOOP-281
>                 URL: http://issues.apache.org/jira/browse/HADOOP-281
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.3.1
>            Reporter: Sameer Paranjpye
>             Fix For: 0.5.0
>
>         Attachments: addNode.patch, mkdirs.patch, TestDFSMkdirs.java
>
>
> dfs.FSDirectory.mkdirs will merrily adds children to a directory tree node without checking whether it represents a directory. So it is possible to create a subdirectories of a file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 17 22:05:22 2006
Return-Path: 
 <hadoop-dev-return-2572-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 4899 invoked from network); 17 Jul 2006 22:05:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jul 2006 22:05:22 -0000
Received: (qmail 88183 invoked by uid 500); 17 Jul 2006 22:05:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 88150 invoked by uid 500); 17 Jul 2006 22:05:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88141 invoked by uid 99); 17 Jul 2006 22:05:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 15:05:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 15:05:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id ACEF7714293
	for <hadoop-dev@lucene.apache.org>; Mon, 17 Jul 2006 22:03:14 +0000 (GMT)
Message-ID: <7515019.1153173794705.JavaMail.jira@brutus>
Date: Mon, 17 Jul 2006 15:03:14 -0700 (PDT)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-281) dfs.FSDirectory.mkdirs can create
 sub-directories of a file!
In-Reply-To: <19818580.1149635189767.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-281?page=comments#action_12421733 ] 
            
Wendy Chien commented on HADOOP-281:
------------------------------------

Yes, the callers of mkdirs will need to check the return value.  I looked over Arun's changes to FileUtil and they seem fine.  I can make a separate patch which includes those changes once we decide if mkdirs should pass along the FilenotFoundException or only return a boolean.



> dfs.FSDirectory.mkdirs can create sub-directories of a file!
> ------------------------------------------------------------
>
>                 Key: HADOOP-281
>                 URL: http://issues.apache.org/jira/browse/HADOOP-281
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.3.1
>            Reporter: Sameer Paranjpye
>             Fix For: 0.5.0
>
>         Attachments: addNode.patch, mkdirs.patch, TestDFSMkdirs.java
>
>
> dfs.FSDirectory.mkdirs will merrily adds children to a directory tree node without checking whether it represents a directory. So it is possible to create a subdirectories of a file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 17 22:16:27 2006
Return-Path: 
 <hadoop-dev-return-2573-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8202 invoked from network); 17 Jul 2006 22:16:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jul 2006 22:16:27 -0000
Received: (qmail 4071 invoked by uid 500); 17 Jul 2006 22:16:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3919 invoked by uid 500); 17 Jul 2006 22:16:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3910 invoked by uid 99); 17 Jul 2006 22:16:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 15:16:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 15:16:25 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E592A714293
	for <hadoop-dev@lucene.apache.org>; Mon, 17 Jul 2006 22:14:13 +0000 (GMT)
Message-ID: <22771983.1153174453937.JavaMail.jira@brutus>
Date: Mon, 17 Jul 2006 15:14:13 -0700 (PDT)
From: "Benjamin Reed (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-367) Static blocks do not automatically run
 when a class is loaded in Java 5.0
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Static blocks do not automatically run when a class is loaded in Java 5.0
-------------------------------------------------------------------------

                 Key: HADOOP-367
                 URL: http://issues.apache.org/jira/browse/HADOOP-367
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
    Affects Versions: 0.4.0
         Environment: Java 5.0
            Reporter: Benjamin Reed


There seems to be a change that happened between 1.4 and 1.5 with respect to static initializers. I can't find this documented, but I can reproduce with a very simple program. Basically, a static initializer is not called unless a static member/method of the class is accessed or an instance is created. This is actually what the JLS says, but until 1.5 the static initializers ran when the class was loaded. Note that this behavior only occurs when running with the 1.5 JRE AND compiling for 1.5.

For many Writables this isn't an issue, so the fallback behavior of the WritableFactory works, but Block is package private, so loadEdits fails when called from org.apache.hadoop.io.ArrayWritable.readFields() yielding the following trace:

Caused by: java.lang.RuntimeException: java.lang.IllegalAccessException: Class org.apache.hadoop.io.WritableFactories can not access a member of class org.apache.hadoop.dfs.Block with modifiers "public"
        at org.apache.hadoop.io.WritableFactories.newInstance(WritableFactories.java:49)
        at org.apache.hadoop.io.ArrayWritable.readFields(ArrayWritable.java:81)
        at org.apache.hadoop.dfs.FSDirectory.loadFSEdits(FSDirectory.java:532)
        at org.apache.hadoop.dfs.FSDirectory.loadFSImage(FSDirectory.java:470)
        at org.apache.hadoop.dfs.FSDirectory.<init>(FSDirectory.java:307)
        at org.apache.hadoop.dfs.FSNamesystem.<init>(FSNamesystem.java:177)
        at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:91)
        at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:84)
        at org.apache.hadoop.dfs.NameNode.main(NameNode.java:491)




-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 18 02:29:22 2006
Return-Path: 
 <hadoop-dev-return-2574-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 13781 invoked from network); 18 Jul 2006 02:29:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2006 02:29:22 -0000
Received: (qmail 24681 invoked by uid 500); 18 Jul 2006 02:29:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24645 invoked by uid 500); 18 Jul 2006 02:29:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24636 invoked by uid 99); 18 Jul 2006 02:29:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 19:29:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 19:29:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DEE4A714293
	for <hadoop-dev@lucene.apache.org>; Tue, 18 Jul 2006 02:27:13 +0000 (GMT)
Message-ID: <26943040.1153189633910.JavaMail.jira@brutus>
Date: Mon, 17 Jul 2006 19:27:13 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-368) DistributedFSCheck should cleanup,
 seek, and report missing files.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

DistributedFSCheck should cleanup, seek, and report missing files.
------------------------------------------------------------------

                 Key: HADOOP-368
                 URL: http://issues.apache.org/jira/browse/HADOOP-368
             Project: Hadoop
          Issue Type: Bug
          Components: fs
    Affects Versions: 0.4.0, 0.3.2
            Reporter: Konstantin Shvachko
         Assigned To: Konstantin Shvachko
            Priority: Minor




-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 18 02:31:23 2006
Return-Path: 
 <hadoop-dev-return-2575-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 13984 invoked from network); 18 Jul 2006 02:31:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2006 02:31:23 -0000
Received: (qmail 25196 invoked by uid 500); 18 Jul 2006 02:31:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 25163 invoked by uid 500); 18 Jul 2006 02:31:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 25153 invoked by uid 99); 18 Jul 2006 02:31:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 19:31:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 19:31:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C2B70714293
	for <hadoop-dev@lucene.apache.org>; Tue, 18 Jul 2006 02:29:14 +0000 (GMT)
Message-ID: <33073948.1153189754795.JavaMail.jira@brutus>
Date: Mon, 17 Jul 2006 19:29:14 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-368) DistributedFSCheck should cleanup,
 seek, and report missing files.
In-Reply-To: <26943040.1153189633910.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-368?page=all ]

Konstantin Shvachko updated HADOOP-368:
---------------------------------------

    Attachment: DistributedFSCheck.patch

1) I included calls to cleanup() for DistributedFSCheck and TestDFSIO.
DistributedFSCheck calls cleanup before and after execution of the main part.
After - in order to restore the files system state.
Before - in order to be able to run if the previous run failed.
TestDFSIO cleans up only within the unit test.
2) DistributedFSCheck snapshots files at the initial state and then reads them.
I added correct processing of files that have been snapshot but disappeared after that.
3) A bug fixed in DistributedFSCheck. The mapper did not seek to the required
offset when reading files.


> DistributedFSCheck should cleanup, seek, and report missing files.
> ------------------------------------------------------------------
>
>                 Key: HADOOP-368
>                 URL: http://issues.apache.org/jira/browse/HADOOP-368
>             Project: Hadoop
>          Issue Type: Bug
>          Components: fs
>    Affects Versions: 0.4.0, 0.3.2
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>            Priority: Minor
>         Attachments: DistributedFSCheck.patch
>
>


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 18 04:04:24 2006
Return-Path: 
 <hadoop-dev-return-2576-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 98175 invoked from network); 18 Jul 2006 04:04:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2006 04:04:24 -0000
Received: (qmail 9431 invoked by uid 500); 18 Jul 2006 04:04:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9274 invoked by uid 500); 18 Jul 2006 04:04:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9262 invoked by uid 99); 18 Jul 2006 04:04:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 21:04:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 21:04:23 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AB2B871429B
	for <hadoop-dev@lucene.apache.org>; Tue, 18 Jul 2006 04:02:15 +0000 (GMT)
Message-ID: <15673951.1153195335698.JavaMail.jira@brutus>
Date: Mon, 17 Jul 2006 21:02:15 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-54?page=comments#action_12421776 ] 
            
Arun C Murthy commented on HADOOP-54:
-------------------------------------

Couple of implementation thoughts/refinements (thanks  by Eric) I wanted to bring to everyone's attention:

  a) We could use BytesWritables for keys/values (which maintain their own sizes), thus the header would then only be:
      sync,no.of k/v pairs, compressed-keys-size, compressed-values-size, compressedKeysBlob, compressedValuesBlob, sync

  b) Use the 'zero-compressed-int-length' that Milind is exporting from recordio for the 'integer' values in the header to save some bytes.

Thoughts? Other refinements?

thanks,
Arun

> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Michel Tourn
>             Fix For: 0.5.0
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 18 08:51:17 2006
Return-Path: 
 <hadoop-dev-return-2577-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 35415 invoked from network); 18 Jul 2006 08:51:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2006 08:51:17 -0000
Received: (qmail 97844 invoked by uid 500); 18 Jul 2006 08:51:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97815 invoked by uid 500); 18 Jul 2006 08:51:16 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97805 invoked by uid 99); 18 Jul 2006 08:51:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 01:51:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [209.10.110.95] (HELO londo.swishmail.com) (209.10.110.95)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 01:51:15 -0700
Received: (qmail 84892 invoked by uid 89); 18 Jul 2006 08:50:53 -0000
Received: from unknown (HELO ?172.17.73.107?) (128.214.173.238)
  by londo.swishmail.com with SMTP; 18 Jul 2006 08:50:53 -0000
Message-ID: <44BCA0FA.30500@apache.org>
Date: Tue, 18 Jul 2006 11:51:06 +0300
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.4 (X11/20060615)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: [jira] Updated: (HADOOP-307) Many small jobs benchmark for
 MapReduce
References: <5099442.1152707910703.JavaMail.jira@brutus>
 <56A23D10-4003-4683-BAAE-201E5B09C58E@yahoo-inc.com>
In-Reply-To: <56A23D10-4003-4683-BAAE-201E5B09C58E@yahoo-inc.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Eric Baldeschwieler wrote:
> down the road, maybe we should change the build so that examples are not 
> distributed by default, but are instead built as standalone jars.  Does 
> this make sense?

Examples are already in separate jar files.  The problem (if any) is 
that we sync too much stuff to the slaves.  For simplicity, we sync the 
full tree, excluding only svn files.  We could exclude more things to 
make the sync faster, or explicitly specify the set of things to be 
sync'd.  We do not need to sync any example code.

In any case, I think this code more naturally belongs in src/contrib, 
where each module has its own build.xml, rather than src/examples.

Doug

From MAILER-DAEMON Tue Jul 18 09:08:26 2006
Return-Path: 
 <hadoop-dev-return-2578-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 39147 invoked from network); 18 Jul 2006 09:08:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2006 09:08:26 -0000
Received: (qmail 16362 invoked by uid 500); 18 Jul 2006 09:08:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 16202 invoked by uid 500); 18 Jul 2006 09:08:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 16193 invoked by uid 99); 18 Jul 2006 09:08:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 02:08:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 02:08:25 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B13E741001C
	for <hadoop-dev@lucene.apache.org>; Tue, 18 Jul 2006 09:06:17 +0000 (GMT)
Message-ID: <10828055.1153213577721.JavaMail.jira@brutus>
Date: Tue, 18 Jul 2006 02:06:17 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-364) rpc versioning broke out-of-order
 server launches
In-Reply-To: <27460867.1152915015026.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-364?page=all ]

Doug Cutting resolved HADOOP-364.
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Owen!

> rpc versioning broke out-of-order server launches
> -------------------------------------------------
>
>                 Key: HADOOP-364
>                 URL: http://issues.apache.org/jira/browse/HADOOP-364
>             Project: Hadoop
>          Issue Type: Bug
>          Components: ipc
>    Affects Versions: 0.5.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.5.0
>
>         Attachments: rpc-version-fix.patch
>
>
> The change to check the RPCs broke the ability to bring up the datanodes before the namenode and the tasktracker before the jobtracker.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 18 09:17:23 2006
Return-Path: 
 <hadoop-dev-return-2579-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 41732 invoked from network); 18 Jul 2006 09:17:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2006 09:17:23 -0000
Received: (qmail 31301 invoked by uid 500); 18 Jul 2006 09:17:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 31271 invoked by uid 500); 18 Jul 2006 09:17:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31262 invoked by uid 99); 18 Jul 2006 09:17:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 02:17:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 02:17:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B1B3C41001A
	for <hadoop-dev@lucene.apache.org>; Tue, 18 Jul 2006 09:15:14 +0000 (GMT)
Message-ID: <317138.1153214114725.JavaMail.jira@brutus>
Date: Tue, 18 Jul 2006 02:15:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-365) datanode crashes on startup with
 ClassCastException
In-Reply-To: <16601882.1152920113917.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-365?page=all ]

Doug Cutting resolved HADOOP-365.
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Owen.

> datanode crashes on startup with ClassCastException
> ---------------------------------------------------
>
>                 Key: HADOOP-365
>                 URL: http://issues.apache.org/jira/browse/HADOOP-365
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.5.0
>
>         Attachments: datanode-class-cast.patch
>
>
> When I bring up a DataNode it gets a ClassCastException:
> Exception in thread "main" java.lang.ClassCastException: java.util.HashMap$Entry
>         at org.apache.hadoop.dfs.DataNode.runAndWait(DataNode.java:907)
>         at org.apache.hadoop.dfs.DataNode.main(DataNode.java:954)
> This was introduced by the patch for HADOOP-354.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 18 09:20:24 2006
Return-Path: 
 <hadoop-dev-return-2580-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 42691 invoked from network); 18 Jul 2006 09:20:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2006 09:20:24 -0000
Received: (qmail 36508 invoked by uid 500); 18 Jul 2006 09:20:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 36483 invoked by uid 500); 18 Jul 2006 09:20:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 36474 invoked by uid 99); 18 Jul 2006 09:20:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 02:20:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 02:20:23 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7503D41001C
	for <hadoop-dev@lucene.apache.org>; Tue, 18 Jul 2006 09:18:15 +0000 (GMT)
Message-ID: <20542163.1153214295476.JavaMail.jira@brutus>
Date: Tue, 18 Jul 2006 02:18:15 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-350) In standalone mode,
 'org.apache.commons.cli cannot be resolved'
In-Reply-To: <4329338.1152218609766.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-350?page=all ]

Doug Cutting resolved HADOOP-350.
---------------------------------

    Fix Version/s: 0.5.0
       Resolution: Fixed

I just committed this.  Thanks all!

> In standalone mode, 'org.apache.commons.cli cannot be resolved'
> ---------------------------------------------------------------
>
>                 Key: HADOOP-350
>                 URL: http://issues.apache.org/jira/browse/HADOOP-350
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.5.0
>            Reporter: stack@archive.org
>            Priority: Minor
>             Fix For: 0.5.0
>
>         Attachments: commons-cli-2.0-SNAPSHOT.jar, commons-cli-2.0-SNAPSHOT.jar
>
>
> Standalone works fine in 0.4.0 but if I use TRUNK, 'Last Changed Date: 2006-06-28 14:27:33 -0700 (Wed, 28 Jun 2006)', and pass it my fat job jar, I get following exception.
> 06/07/06 13:18:02 INFO conf.Configuration: parsing file:/tmp/hadoop-unjar29923/nutch-site.xml
> 06/07/06 13:18:02 INFO conf.Configuration: parsing file:/home/stack/workspace/hadoop-local-conf/hadoop-site.xml
> Exception in thread "main" java.lang.Error: Unresolved compilation problems:   
>         The import org.apache.commons.cli cannot be resolved
>         The import org.apache.commons.cli cannot be resolved
>         The import org.apache.commons.cli cannot be resolved
>         The import org.apache.commons.cli cannot be resolved       
>         The import org.apache.commons.cli cannot be resolved
>         The import org.apache.commons.cli cannot be resolved
>         The import org.apache.commons.cli cannot be resolved
>         The import org.apache.commons.cli cannot be resolved
>         The import org.apache.commons.cli cannot be resolved
>         Options cannot be resolved to a type
>         Option cannot be resolved to a type
>         OptionBuilder cannot be resolved
>         Option cannot be resolved to a type
>         OptionBuilder cannot be resolved
>         Option cannot be resolved to a type
>         OptionBuilder cannot be resolved
>         Option cannot be resolved to a type
>         OptionBuilder cannot be resolved
>         Options cannot be resolved to a type
>         Options cannot be resolved to a type
>         CommandLine cannot be resolved to a type
>         Options cannot be resolved to a type
>         The method buildGeneralOptions() is undefined for the type ToolBase
>         CommandLineParser cannot be resolved to a type
>         GnuParser cannot be resolved to a type
>         CommandLine cannot be resolved to a type
>         ParseException cannot be resolved to a type
>         e cannot be resolved
>         HelpFormatter cannot be resolved to a type
>         HelpFormatter cannot be resolved to a type
>         at org.apache.hadoop.util.ToolBase.<init>(ToolBase.java:21)
>         at org.apache.hadoop.mapred.JobClient.<init>(JobClient.java:178)
>         at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:320)
>         at org.archive.access.nutch.ImportArcs.importArcs(ImportArcs.java:576)
>         at org.archive.access.nutch.Nutchwax.doImport(Nutchwax.java:159)
>         at org.archive.access.nutch.Nutchwax.doAll(Nutchwax.java:144)
>         at org.archive.access.nutch.Nutchwax.doJob(Nutchwax.java:368)
>         at org.archive.access.nutch.Nutchwax.main(Nutchwax.java:621)
>         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
>         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>         at java.lang.reflect.Method.invoke(Method.java:585)
>         at org.apache.hadoop.util.RunJar.main(RunJar.java:128)
> I took a bit of a look.  Odd is that command-cli.jar is in hadoop/lib dir so should be found no problem (and we seem to be loading other stuff out of the uncompressed job jar fine -- see mention of nutch-site.xml above).   I tried adding the command-cli to my job jar.  I printed out all that RunJar -- see below -- was adding to its CLASSPATH and saw mention of command-cli but still no workee.
> file:/tmp/hadoop-unjar29923/lib/archive-commons-1.8.0.jar
> file:/tmp/hadoop-unjar29923/lib/commons-codec-1.3.jar
> file:/tmp/hadoop-unjar29923/lib/commons-httpclient-3.0-rc3.jar
> file:/tmp/hadoop-unjar29923/lib/commons-logging-1.0.4.jar
> file:/tmp/hadoop-unjar29923/lib/dsi.unimi.it-1.2.0.jar
> file:/tmp/hadoop-unjar29923/lib/commons-lang-2.1.jar
> file:/tmp/hadoop-unjar29923/lib/commons-cli-2.0-SNAPSHOT.jar
> file:/tmp/hadoop-unjar29923/lib/lucene-core-1.9.1.jar
> file:/tmp/hadoop-unjar29923/lib/lucene-misc-1.9.1.jar
> file:/tmp/hadoop-unjar29923/lib/jakarta-oro-2.0.7.jar
> file:/tmp/hadoop-unjar29923/lib/xerces-2_6_2-apis.jar
> file:/tmp/hadoop-unjar29923/lib/xerces-2_6_2.jar
> file:/tmp/hadoop-unjar29923/lib/concurrent-1.3.4.jar
> 06/07/06 13:18:01 INFO conf.Configuration: parsing file:/home/stack/workspace/hadoop-local-conf/hadoop-default.xml 
> Any ideas?
> Thanks.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 18 09:46:23 2006
Return-Path: 
 <hadoop-dev-return-2581-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 49804 invoked from network); 18 Jul 2006 09:46:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2006 09:46:23 -0000
Received: (qmail 77294 invoked by uid 500); 18 Jul 2006 09:46:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 77267 invoked by uid 500); 18 Jul 2006 09:46:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 77258 invoked by uid 99); 18 Jul 2006 09:46:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 02:46:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 02:46:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BDCE141001A
	for <hadoop-dev@lucene.apache.org>; Tue, 18 Jul 2006 09:44:14 +0000 (GMT)
Message-ID: <4065856.1153215854774.JavaMail.jira@brutus>
Date: Tue, 18 Jul 2006 02:44:14 -0700 (PDT)
From: =?utf-8?Q?Fr=C3=A9d=C3=A9ric_Bertin_=28JIRA=29?= <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-120) Reading an ArrayWriter does not work
 because valueClass does not get initialized
In-Reply-To: <925820144.1144194883725.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-120?page=3Dcomments#actio=
n_12421827 ]=20
           =20
Fr=C3=A9d=C3=A9ric Bertin commented on HADOOP-120:
----------------------------------------

Hello all,

what is current thinking about this bug and the right way to fix it?

What about adding a simple javadoc comment in this class to warn users that=
 it must be derived to be used as a Reducer value?=20

> Reading an ArrayWriter does not work because valueClass does not get init=
ialized
> -------------------------------------------------------------------------=
-------
>
>                 Key: HADOOP-120
>                 URL: http://issues.apache.org/jira/browse/HADOOP-120
>             Project: Hadoop
>          Issue Type: Bug
>          Components: io
>         Environment: Red Hat =20
>            Reporter: Dick King
>         Attachments: hadoop-120-fix.patch
>
>
> If you have a Reducer whose value type is an ArrayWriter it gets enstream=
ed alright but at reconstruction type when ArrayWriter::readFields(DataInpu=
t in) runs on a DataInput that has a nonempty ArrayWriter , newInstance fai=
ls trying to instantiate the null class.

--=20
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: htt=
p://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

       

From MAILER-DAEMON Tue Jul 18 10:41:24 2006
Return-Path: 
 <hadoop-dev-return-2582-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68089 invoked from network); 18 Jul 2006 10:41:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2006 10:41:24 -0000
Received: (qmail 54303 invoked by uid 500); 18 Jul 2006 10:41:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 54148 invoked by uid 500); 18 Jul 2006 10:41:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 54139 invoked by uid 99); 18 Jul 2006 10:41:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 03:41:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 03:41:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A58DE41000C
	for <hadoop-dev@lucene.apache.org>; Tue, 18 Jul 2006 10:39:14 +0000 (GMT)
Message-ID: <16396054.1153219154675.JavaMail.jira@brutus>
Date: Tue, 18 Jul 2006 03:39:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-356) Build and test hadoopStreaming
 nightly
In-Reply-To: <28376836.1152310589828.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-356?page=all ]

Doug Cutting resolved HADOOP-356.
---------------------------------

    Fix Version/s: 0.5.0
       Resolution: Fixed

I changed this some and committed it.  Since the old "compile" target is now named "compile-core", most of the dependencies on it needed to be changed to "compile-core" too.  Also, I renamed the "compile-test" target to be "compile-core-test".

I note that the contrib packages are not included in distributions (the "tar" target).  They probably should be.  Michel, would you like to modify "tar" to include the contrib code?  This should be done in a separate bug.

> Build and test hadoopStreaming nightly
> --------------------------------------
>
>                 Key: HADOOP-356
>                 URL: http://issues.apache.org/jira/browse/HADOOP-356
>             Project: Hadoop
>          Issue Type: Improvement
>            Reporter: Michel Tourn
>             Fix For: 0.5.0
>
>         Attachments: buildallcontribs.patch, nightlystreaming.patch
>
>
> hadoopStreaming was originally built and tested separately.
> It makes sense to keep building the hadoopStreaming code as a separate jar file:
> this is all client code that can be uploaded in the Job jar.
> this allows quick turnaround on production clusters 
> (hadoopStreaming code updates do not require to bring down the MapReduce system.
> If necessary users can use their own modified versions of the hadoopStreaming jar but still run on the production cluster.)
> On the other hand it makes sense to build this code nightly.
> Many recent changes broke either compilation or correctness.
> All the problems would have been caught if the hadoopStreaming compilation and tests were run nighlty.
> Conclusion:
> the updated top-level build.xml adds the following dependencies:
> 1. Target compile calls target compile in contrib/streaming/build.xml
> 2. Target test calls target test in contrib/streaming/build.xml

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 18 11:07:24 2006
Return-Path: 
 <hadoop-dev-return-2583-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78377 invoked from network); 18 Jul 2006 11:07:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2006 11:07:24 -0000
Received: (qmail 90591 invoked by uid 500); 18 Jul 2006 11:07:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 90433 invoked by uid 500); 18 Jul 2006 11:07:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 90424 invoked by uid 99); 18 Jul 2006 11:07:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 04:07:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 04:07:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CEF1E41000C
	for <hadoop-dev@lucene.apache.org>; Tue, 18 Jul 2006 11:05:14 +0000 (GMT)
Message-ID: <22105838.1153220714845.JavaMail.jira@brutus>
Date: Tue, 18 Jul 2006 04:05:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-307) Many small jobs benchmark for
 MapReduce
In-Reply-To: <13009062.1150636529837.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-307?page=all ]

Doug Cutting resolved HADOOP-307.
---------------------------------

    Fix Version/s: 0.5.0
       Resolution: Fixed

I just committed this.  Thanks!

> Many small jobs benchmark for MapReduce
> ---------------------------------------
>
>                 Key: HADOOP-307
>                 URL: http://issues.apache.org/jira/browse/HADOOP-307
>             Project: Hadoop
>          Issue Type: Task
>          Components: mapred
>            Reporter: Sanjay Dahiya
>            Priority: Minor
>             Fix For: 0.5.0
>
>         Attachments: patch.txt, patch.txt
>
>
> A benchmark that runs many small MapReduce tasks in sequence. A single map reduce implementation is used, it is invoked multiple times with input as the output from previous run. The input to first Map is a TextInputFormat ( a text file with few hundred KBs). Input records are passed to output without much processing. The idea is to benchmark the time taken by initialization of Mapper and Reducer. An initial prototyping on a single machine with 20 MR tasks in sequence took ~47 seconds per task. Looking for suggestions on what else can be included in the benchmark. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 18 11:41:24 2006
Return-Path: 
 <hadoop-dev-return-2584-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92517 invoked from network); 18 Jul 2006 11:41:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2006 11:41:24 -0000
Received: (qmail 51218 invoked by uid 500); 18 Jul 2006 11:41:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 51051 invoked by uid 500); 18 Jul 2006 11:41:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 51042 invoked by uid 99); 18 Jul 2006 11:41:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 04:41:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 04:41:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 06E1041001A
	for <hadoop-dev@lucene.apache.org>; Tue, 18 Jul 2006 11:39:15 +0000 (GMT)
Message-ID: <15363818.1153222755025.JavaMail.jira@brutus>
Date: Tue, 18 Jul 2006 04:39:15 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-368) DistributedFSCheck should cleanup,
 seek, and report missing files.
In-Reply-To: <26943040.1153189633910.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-368?page=all ]

Doug Cutting resolved HADOOP-368.
---------------------------------

    Fix Version/s: 0.5.0
       Resolution: Fixed

I just committed this.  Thanks, Konstantin.

> DistributedFSCheck should cleanup, seek, and report missing files.
> ------------------------------------------------------------------
>
>                 Key: HADOOP-368
>                 URL: http://issues.apache.org/jira/browse/HADOOP-368
>             Project: Hadoop
>          Issue Type: Bug
>          Components: fs
>    Affects Versions: 0.4.0, 0.3.2
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>            Priority: Minor
>             Fix For: 0.5.0
>
>         Attachments: DistributedFSCheck.patch
>
>


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 18 11:46:24 2006
Return-Path: 
 <hadoop-dev-return-2585-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93207 invoked from network); 18 Jul 2006 11:46:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2006 11:46:24 -0000
Received: (qmail 57855 invoked by uid 500); 18 Jul 2006 11:46:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 57702 invoked by uid 500); 18 Jul 2006 11:46:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 57693 invoked by uid 99); 18 Jul 2006 11:46:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 04:46:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 04:46:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C6F1E41000C
	for <hadoop-dev@lucene.apache.org>; Tue, 18 Jul 2006 11:44:14 +0000 (GMT)
Message-ID: <17317845.1153223054812.JavaMail.jira@brutus>
Date: Tue, 18 Jul 2006 04:44:14 -0700 (PDT)
From: "Mikkel Kamstrup Erlandsen (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-7) MapReduce has a series of problems
 concerning task-allocation to worker nodes
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-7?page=comments#action_12421847 ] 
            
Mikkel Kamstrup Erlandsen commented on HADOOP-7:
------------------------------------------------

This is likely me being dumb, but I don't think this issue is fixed.

When I run any of the provided example programs wordcount/grep (also pi with specualtive excecution enabled) reduce tasks does not start before all map tasks have completed.

My cluster contains three nodes and I am running Hadoop 0.4.0.

> MapReduce has a series of problems concerning task-allocation to worker nodes
> -----------------------------------------------------------------------------
>
>                 Key: HADOOP-7
>                 URL: http://issues.apache.org/jira/browse/HADOOP-7
>             Project: Hadoop
>          Issue Type: Bug
>         Environment: All
>            Reporter: Mike Cafarella
>             Fix For: 0.1.0
>
>         Attachments: jobtracker.patch
>
>
> The MapReduce JobTracker is not great at allocating tasks to TaskTracker worker nodes.
> Here are the problems:
> 1) There is no speculative execution of tasks
> 2) Reduce tasks must wait until all map tasks are completed before doing any work
> 3) TaskTrackers don't distinguish between Map and Reduce jobs.  Also, the number of
> tasks at a single node is limited to some constant.  That means you can get weird deadlock
> problems upon machine failure.  The reduces take up all the available execution slots, but they
> don't do productive work, because they're waiting for a map task to complete.  Of course, that
> map task won't even be started until the reduce tasks finish, so you can see the problem...
> 4) The JobTracker is so complicated that it's hard to fix any of these.
> The right solution is a rewrite of the JobTracker to be a lot more flexible in task handling.
> It has to be a lot simpler.  One way to make it simpler is to add an abstraction I'll call
> "TaskInProgress".  Jobs are broken into chunks called TasksInProgress.  All the TaskInProgress
> objects must be complete, somehow, before the Job is complete.
> A single TaskInProgress can be executed by one or more Tasks.  TaskTrackers are assigned Tasks.
> If a Task fails, we report it back to the JobTracker, where the TaskInProgress lives.  The TIP can then
> decide whether to launch additional  Tasks or not.
> Speculative execution is handled within the TIP.  It simply launches multiple Tasks in parallel.  The
> TaskTrackers have no idea that these Tasks are actually doing the same chunk of work.  The TIP
> is complete when any one of its Tasks are complete.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 18 11:50:24 2006
Return-Path: 
 <hadoop-dev-return-2586-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94259 invoked from network); 18 Jul 2006 11:50:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2006 11:50:24 -0000
Received: (qmail 66539 invoked by uid 500); 18 Jul 2006 11:50:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66496 invoked by uid 500); 18 Jul 2006 11:50:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66487 invoked by uid 99); 18 Jul 2006 11:50:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 04:50:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 04:50:23 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2020841000C
	for <hadoop-dev@lucene.apache.org>; Tue, 18 Jul 2006 11:48:15 +0000 (GMT)
Message-ID: <29602731.1153223295128.JavaMail.jira@brutus>
Date: Tue, 18 Jul 2006 04:48:15 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-341) Enhance distcp to handle *http* as a
 'source protocol'.
In-Reply-To: <18620957.1151927429856.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-341?page=all ]

Arun C Murthy updated HADOOP-341:
---------------------------------

    Attachment: distcp_input_uri.patch

Here's a patch to let distcp take an input uri via the '-f' option. The uri can be of dfs/http/file schemes. 
The tool will then hit that uri to fetch a list of log-files to be copied over.

thanks,
Arun

> Enhance distcp to handle *http* as a 'source protocol'.
> -------------------------------------------------------
>
>                 Key: HADOOP-341
>                 URL: http://issues.apache.org/jira/browse/HADOOP-341
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: util
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.5.0
>
>         Attachments: distcp.patch, distcp2.patch, distcp_input_uri.patch
>
>
> Requirements:
>   Presently distcp recursively copies a directory from one dfs to another i.e. both source and destination of of the *dfs* protocol.
>   Enhance it to handle *http* as the source protocol i.e. support copying files from arbitrary http-based sources into the dfs.
> Design:
>   
>   Follow distcp's current design: one map task per file which needs to be copied.
>   Caveat: distcp handles *recursive* copying by listing sub-directories; this is not as feasible with a http-based source since things like 'fancy-indexing' might not be enabled on the web-server (for all sub-locations recursively too), and even if it is enabled it will mean tedious parsing of the html served to glean the sub-directories etc. Hence the idea is to support an input file (via a -f option) which contains a list of the http-based urls which represent multiple source files.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 18 11:52:23 2006
Return-Path: 
 <hadoop-dev-return-2587-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94986 invoked from network); 18 Jul 2006 11:52:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2006 11:52:23 -0000
Received: (qmail 72182 invoked by uid 500); 18 Jul 2006 11:52:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72152 invoked by uid 500); 18 Jul 2006 11:52:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72143 invoked by uid 99); 18 Jul 2006 11:52:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 04:52:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 04:52:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id ADCDA41000C
	for <hadoop-dev@lucene.apache.org>; Tue, 18 Jul 2006 11:50:14 +0000 (GMT)
Message-ID: <10880401.1153223414709.JavaMail.jira@brutus>
Date: Tue, 18 Jul 2006 04:50:14 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-342) Design/Implement a tool to support
 archival and analysis of logfiles.
In-Reply-To: <18424480.1151929589854.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-342?page=all ]

Arun C Murthy updated HADOOP-342:
---------------------------------

    Attachment: logalyzer2.patch

Here's a new patch for logalyzer incorporating changes in distcp (HADOOP-341).

thanks,
Arun

> Design/Implement a tool to support archival and analysis of logfiles.
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-342
>                 URL: http://issues.apache.org/jira/browse/HADOOP-342
>             Project: Hadoop
>          Issue Type: New Feature
>            Reporter: Arun C Murthy
>         Attachments: logalyzer.patch, logalyzer2.patch
>
>
> Requirements:
>   a) Create a tool support archival of logfiles (from diverse sources) in hadoop's dfs.
>   b) The tool should also support analysis of the logfiles via grep/sort primitives. The tool should allow for fairly generic pattern 'grep's and let users 'sort' the matching lines (from grep) on 'columns' of their choice.
>   E.g. from hadoop logs: Look for all log-lines with 'FATAL' and sort them based on timestamps (column x)  and then on column y (column x, followed by column y).
> Design/Implementation:
>   a) Log Archival
>     Archival of logs from diverse sources can be accomplished using the *distcp* tool (HADOOP-341).
>   
>   b) Log analysis
>     The idea is to enable users of the tool to perform analysis of logs via grep/sort primitives.
>     This can be accomplished via a relatively simple Map-Reduce task where the map does the *grep* for the given pattern via RegexMapper and then the implicit *sort* (reducer) is used with a custom Comparator which performs the user-specified comparision (columns). 
>     The sort/grep specs can be fairly powerful by letting the user of the tool use java's in-built regex patterns (java.util.regex).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 18 12:03:24 2006
Return-Path: 
 <hadoop-dev-return-2588-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99705 invoked from network); 18 Jul 2006 12:03:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2006 12:03:24 -0000
Received: (qmail 98861 invoked by uid 500); 18 Jul 2006 12:03:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98841 invoked by uid 500); 18 Jul 2006 12:03:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98832 invoked by uid 99); 18 Jul 2006 12:03:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 05:03:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 05:03:23 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A046E41001D
	for <hadoop-dev@lucene.apache.org>; Tue, 18 Jul 2006 12:01:15 +0000 (GMT)
Message-ID: <16486340.1153224075654.JavaMail.jira@brutus>
Date: Tue, 18 Jul 2006 05:01:15 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-341) Enhance distcp to handle *http* as a
 'source protocol'.
In-Reply-To: <18620957.1151927429856.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-341?page=all ]

Doug Cutting resolved HADOOP-341.
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks!

> Enhance distcp to handle *http* as a 'source protocol'.
> -------------------------------------------------------
>
>                 Key: HADOOP-341
>                 URL: http://issues.apache.org/jira/browse/HADOOP-341
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: util
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.5.0
>
>         Attachments: distcp.patch, distcp2.patch, distcp_input_uri.patch
>
>
> Requirements:
>   Presently distcp recursively copies a directory from one dfs to another i.e. both source and destination of of the *dfs* protocol.
>   Enhance it to handle *http* as the source protocol i.e. support copying files from arbitrary http-based sources into the dfs.
> Design:
>   
>   Follow distcp's current design: one map task per file which needs to be copied.
>   Caveat: distcp handles *recursive* copying by listing sub-directories; this is not as feasible with a http-based source since things like 'fancy-indexing' might not be enabled on the web-server (for all sub-locations recursively too), and even if it is enabled it will mean tedious parsing of the html served to glean the sub-directories etc. Hence the idea is to support an input file (via a -f option) which contains a list of the http-based urls which represent multiple source files.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 18 12:09:23 2006
Return-Path: 
 <hadoop-dev-return-2589-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1279 invoked from network); 18 Jul 2006 12:09:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2006 12:09:23 -0000
Received: (qmail 4411 invoked by uid 500); 18 Jul 2006 12:09:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 4247 invoked by uid 500); 18 Jul 2006 12:09:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 4238 invoked by uid 99); 18 Jul 2006 12:09:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 05:09:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 05:09:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B3C7141000C
	for <hadoop-dev@lucene.apache.org>; Tue, 18 Jul 2006 12:07:14 +0000 (GMT)
Message-ID: <4362804.1153224434733.JavaMail.jira@brutus>
Date: Tue, 18 Jul 2006 05:07:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-342) Design/Implement a tool to support
 archival and analysis of logfiles.
In-Reply-To: <18424480.1151929589854.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-342?page=all ]

Doug Cutting resolved HADOOP-342.
---------------------------------

    Fix Version/s: 0.5.0
       Resolution: Fixed

I just committed this.  Thanks!

> Design/Implement a tool to support archival and analysis of logfiles.
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-342
>                 URL: http://issues.apache.org/jira/browse/HADOOP-342
>             Project: Hadoop
>          Issue Type: New Feature
>            Reporter: Arun C Murthy
>             Fix For: 0.5.0
>
>         Attachments: logalyzer.patch, logalyzer2.patch
>
>
> Requirements:
>   a) Create a tool support archival of logfiles (from diverse sources) in hadoop's dfs.
>   b) The tool should also support analysis of the logfiles via grep/sort primitives. The tool should allow for fairly generic pattern 'grep's and let users 'sort' the matching lines (from grep) on 'columns' of their choice.
>   E.g. from hadoop logs: Look for all log-lines with 'FATAL' and sort them based on timestamps (column x)  and then on column y (column x, followed by column y).
> Design/Implementation:
>   a) Log Archival
>     Archival of logs from diverse sources can be accomplished using the *distcp* tool (HADOOP-341).
>   
>   b) Log analysis
>     The idea is to enable users of the tool to perform analysis of logs via grep/sort primitives.
>     This can be accomplished via a relatively simple Map-Reduce task where the map does the *grep* for the given pattern via RegexMapper and then the implicit *sort* (reducer) is used with a custom Comparator which performs the user-specified comparision (columns). 
>     The sort/grep specs can be fairly powerful by letting the user of the tool use java's in-built regex patterns (java.util.regex).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 18 16:42:23 2006
Return-Path: 
 <hadoop-dev-return-2590-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23655 invoked from network); 18 Jul 2006 16:42:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2006 16:42:23 -0000
Received: (qmail 91948 invoked by uid 500); 18 Jul 2006 16:42:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 91920 invoked by uid 500); 18 Jul 2006 16:42:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 91908 invoked by uid 99); 18 Jul 2006 16:42:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 09:42:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 09:42:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F0BDA41001A
	for <hadoop-dev@lucene.apache.org>; Tue, 18 Jul 2006 16:40:13 +0000 (GMT)
Message-ID: <6586655.1153240813983.JavaMail.jira@brutus>
Date: Tue, 18 Jul 2006 09:40:13 -0700 (PDT)
From: "Johan Oskarson (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-369) Added ability to copy all part-files
 into one output file
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Added ability to copy all part-files into one output file
---------------------------------------------------------

                 Key: HADOOP-369
                 URL: http://issues.apache.org/jira/browse/HADOOP-369
             Project: Hadoop
          Issue Type: New Feature
          Components: dfs
    Affects Versions: 0.4.0
            Reporter: Johan Oskarson
            Priority: Trivial


Since we use the hadoop output in non-hadoop applications it's nice to be able to merge the part-files into one output file on the local filesystem.
So I've added a dfsshell feature that streams from all files in a directory to one output file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 18 16:44:24 2006
Return-Path: 
 <hadoop-dev-return-2591-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 24180 invoked from network); 18 Jul 2006 16:44:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2006 16:44:24 -0000
Received: (qmail 95605 invoked by uid 500); 18 Jul 2006 16:44:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95587 invoked by uid 500); 18 Jul 2006 16:44:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95578 invoked by uid 99); 18 Jul 2006 16:44:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 09:44:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 09:44:23 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C1C1641001A
	for <hadoop-dev@lucene.apache.org>; Tue, 18 Jul 2006 16:42:14 +0000 (GMT)
Message-ID: <11651262.1153240934791.JavaMail.jira@brutus>
Date: Tue, 18 Jul 2006 09:42:14 -0700 (PDT)
From: "Johan Oskarson (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-369) Added ability to copy all part-files
 into one output file
In-Reply-To: <6586655.1153240813983.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-369?page=all ]

Johan Oskarson updated HADOOP-369:
----------------------------------

    Attachment: copymerge.patch

See description above.

> Added ability to copy all part-files into one output file
> ---------------------------------------------------------
>
>                 Key: HADOOP-369
>                 URL: http://issues.apache.org/jira/browse/HADOOP-369
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Johan Oskarson
>            Priority: Trivial
>         Attachments: copymerge.patch
>
>
> Since we use the hadoop output in non-hadoop applications it's nice to be able to merge the part-files into one output file on the local filesystem.
> So I've added a dfsshell feature that streams from all files in a directory to one output file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 18 17:22:46 2006
Return-Path: 
 <hadoop-dev-return-2592-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 36322 invoked from network); 18 Jul 2006 17:22:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2006 17:22:46 -0000
Received: (qmail 59438 invoked by uid 500); 18 Jul 2006 17:22:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 59412 invoked by uid 500); 18 Jul 2006 17:22:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 59403 invoked by uid 99); 18 Jul 2006 17:22:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 10:22:45 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.109.112.27] (HELO mrout1-b.corp.dcn.yahoo.com)
 (216.109.112.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 10:22:44 -0700
Received: from memberfamouslx (memberfamous-lx.corp.yahoo.com [172.21.103.73])
	by mrout1-b.corp.dcn.yahoo.com (8.13.6/8.13.6/y.out) with ESMTP id
 k6IHMCRY029938
	for <hadoop-dev@lucene.apache.org>; Tue, 18 Jul 2006 10:22:12 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=from:to:subject:date:message-id:mime-version:content-type:
	content-transfer-encoding:x-mailer:in-reply-to:x-mimeole:thread-index;
	b=zza7/eUgE+qiAgzndlEEmlwytgEnCH47V1TFwmeaoUA7tEXANXmT+rXoIsXNkkct
From: "Yoram Arnon" <yarnon@yahoo-inc.com>
To: <hadoop-dev@lucene.apache.org>
Subject: RE: [jira] Updated: (HADOOP-307) Many small jobs benchmark for
 MapReduce
Date: Tue, 18 Jul 2006 10:22:12 -0700
Message-ID: <00ad01c6aa8e$b5170320$496715ac@ds.corp.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <44BCA0FA.30500@apache.org>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-Index: AcaqR1rV4UnY4RauQ/+nPqb2tv546QARjBuA
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

+1
Sync'ing the jar files, in addition to adding overhead, sometimes leads to
obscure name conflicts, because the hadoop command includes
$HADOOP_HOME/hadoop-*.jar in the classpath.
Yoram

> -----Original Message-----
> From: Doug Cutting [mailto:cutting@apache.org] 
> Sent: Tuesday, July 18, 2006 1:51 AM
> To: hadoop-dev@lucene.apache.org
> Subject: Re: [jira] Updated: (HADOOP-307) Many small jobs 
> benchmark for MapReduce
> 
> Eric Baldeschwieler wrote:
> > down the road, maybe we should change the build so that 
> examples are not 
> > distributed by default, but are instead built as standalone 
> jars.  Does 
> > this make sense?
> 
> Examples are already in separate jar files.  The problem (if any) is 
> that we sync too much stuff to the slaves.  For simplicity, 
> we sync the 
> full tree, excluding only svn files.  We could exclude more things to 
> make the sync faster, or explicitly specify the set of things to be 
> sync'd.  We do not need to sync any example code.
> 
> In any case, I think this code more naturally belongs in src/contrib, 
> where each module has its own build.xml, rather than src/examples.
> 
> Doug
> 
> 


From MAILER-DAEMON Tue Jul 18 17:29:30 2006
Return-Path: 
 <hadoop-dev-return-2593-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 38330 invoked from network); 18 Jul 2006 17:29:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2006 17:29:30 -0000
Received: (qmail 69886 invoked by uid 500); 18 Jul 2006 17:29:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 69729 invoked by uid 500); 18 Jul 2006 17:29:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 69720 invoked by uid 99); 18 Jul 2006 17:29:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 10:29:29 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.109.112.27] (HELO mrout1-b.corp.dcn.yahoo.com)
 (216.109.112.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 10:29:26 -0700
Received: from memberfamouslx (memberfamous-lx.corp.yahoo.com [172.21.103.73])
	by mrout1-b.corp.dcn.yahoo.com (8.13.6/8.13.6/y.out) with ESMTP id
 k6IHSt2c031026
	for <hadoop-dev@lucene.apache.org>; Tue, 18 Jul 2006 10:28:55 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=from:to:subject:date:message-id:mime-version:content-type:
	content-transfer-encoding:x-mailer:in-reply-to:x-mimeole:thread-index;
	b=EJMxi61/yg7QTXv+GYEJ8+kfysGly5v1rs57BRlFFvWhvP29C8WBdrkgTCtOt5nG
From: "Yoram Arnon" <yarnon@yahoo-inc.com>
To: <hadoop-dev@lucene.apache.org>
Subject: RE: [jira] Commented: (HADOOP-7) MapReduce has a series of problems
 concerning task-allocation to worker nodes
Date: Tue, 18 Jul 2006 10:28:55 -0700
Message-ID: <00af01c6aa8f$a55e1710$496715ac@ds.corp.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <17317845.1153223054812.JavaMail.jira@brutus>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-Index: AcaqX83rfG0iNGg1RyyHbM6/0yV3NAAL1T8w
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

It works for me.
Reduce tasks start executing from the get-go, but they just sit there
waiting for map output to become available. And then, all they can do is
copy it over, waiting for the last map to complete in order to start their
sort-merge-process, so you can't expect more than 25% of recude to be
compete before map is 100% complete, and often you get less. But I do see
some progress from the start.
Do you have mapred.tasktracker.tasks.maximum configured to more than 1? I
use the value 2, creating 2 map tasks and 2 reduce tasks per node.
Yoram 

> -----Original Message-----
> From: Mikkel Kamstrup Erlandsen (JIRA) [mailto:jira@apache.org] 
> Sent: Tuesday, July 18, 2006 4:44 AM
> To: hadoop-dev@lucene.apache.org
> Subject: [jira] Commented: (HADOOP-7) MapReduce has a series 
> of problems concerning task-allocation to worker nodes
> 
>     [ 
> http://issues.apache.org/jira/browse/HADOOP-7?page=comments#ac
> tion_12421847 ] 
>             
> Mikkel Kamstrup Erlandsen commented on HADOOP-7:
> ------------------------------------------------
> 
> This is likely me being dumb, but I don't think this issue is fixed.
> 
> When I run any of the provided example programs 
> wordcount/grep (also pi with specualtive excecution enabled) 
> reduce tasks does not start before all map tasks have completed.
> 
> My cluster contains three nodes and I am running Hadoop 0.4.0.
> 
> > MapReduce has a series of problems concerning 
> task-allocation to worker nodes
> > 
> --------------------------------------------------------------
> ---------------
> >
> >                 Key: HADOOP-7
> >                 URL: http://issues.apache.org/jira/browse/HADOOP-7
> >             Project: Hadoop
> >          Issue Type: Bug
> >         Environment: All
> >            Reporter: Mike Cafarella
> >             Fix For: 0.1.0
> >
> >         Attachments: jobtracker.patch
> >
> >
> > The MapReduce JobTracker is not great at allocating tasks 
> to TaskTracker worker nodes.
> > Here are the problems:
> > 1) There is no speculative execution of tasks
> > 2) Reduce tasks must wait until all map tasks are completed 
> before doing any work
> > 3) TaskTrackers don't distinguish between Map and Reduce 
> jobs.  Also, the number of
> > tasks at a single node is limited to some constant.  That 
> means you can get weird deadlock
> > problems upon machine failure.  The reduces take up all the 
> available execution slots, but they
> > don't do productive work, because they're waiting for a map 
> task to complete.  Of course, that
> > map task won't even be started until the reduce tasks 
> finish, so you can see the problem...
> > 4) The JobTracker is so complicated that it's hard to fix 
> any of these.
> > The right solution is a rewrite of the JobTracker to be a 
> lot more flexible in task handling.
> > It has to be a lot simpler.  One way to make it simpler is 
> to add an abstraction I'll call
> > "TaskInProgress".  Jobs are broken into chunks called 
> TasksInProgress.  All the TaskInProgress
> > objects must be complete, somehow, before the Job is complete.
> > A single TaskInProgress can be executed by one or more 
> Tasks.  TaskTrackers are assigned Tasks.
> > If a Task fails, we report it back to the JobTracker, where 
> the TaskInProgress lives.  The TIP can then
> > decide whether to launch additional  Tasks or not.
> > Speculative execution is handled within the TIP.  It simply 
> launches multiple Tasks in parallel.  The
> > TaskTrackers have no idea that these Tasks are actually 
> doing the same chunk of work.  The TIP
> > is complete when any one of its Tasks are complete.
> 
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the 
> administrators: 
> http://issues.apache.org/jira/secure/Administrators.jspa
> -
> For more information on JIRA, see: 
> http://www.atlassian.com/software/jira
> 
>         
> 
> 


From MAILER-DAEMON Tue Jul 18 17:49:37 2006
Return-Path: 
 <hadoop-dev-return-2594-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 44678 invoked from network); 18 Jul 2006 17:49:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2006 17:49:37 -0000
Received: (qmail 7747 invoked by uid 500); 18 Jul 2006 17:49:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 7724 invoked by uid 500); 18 Jul 2006 17:49:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 7715 invoked by uid 99); 18 Jul 2006 17:49:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 10:49:36 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.109.112.28] (HELO mrout2-b.corp.dcn.yahoo.com)
 (216.109.112.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 10:49:35 -0700
Received: from enemysentdx (enemysent-dx.corp.yahoo.com [66.228.175.168])
	by mrout2-b.corp.dcn.yahoo.com (8.13.6/8.13.6/y.out) with ESMTP id
 k6IHn3rY039419
	for <hadoop-dev@lucene.apache.org>; Tue, 18 Jul 2006 10:49:03 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=from:to:subject:date:message-id:mime-version:content-type:
	content-transfer-encoding:x-mailer:in-reply-to:x-mimeole:thread-index;
	b=igKtBBK4a2zjtrhXm7DU83+AxoIsYrnnAlILta0x30PSVqQGM4KnIFGqXtHkvb7r
From: "Mahadev Konar" <mahadev@yahoo-inc.com>
To: <hadoop-dev@lucene.apache.org>
Subject: RE: [jira] Commented: (HADOOP-7) MapReduce has a series of problems
 concerning task-allocation to worker nodes
Date: Tue, 18 Jul 2006 10:49:03 -0700
Message-ID: <000c01c6aa92$75822b50$a8afe442@ds.corp.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <00af01c6aa8f$a55e1710$496715ac@ds.corp.yahoo.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-Index: AcaqX83rfG0iNGg1RyyHbM6/0yV3NAAL1T8wAAC5ESA=
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

It might be the case that if the Maps are too small (less than 10 seconds)
then the maps are always run first and the reduces are run later.

Regards
Mahadev

-----Original Message-----
From: Yoram Arnon [mailto:yarnon@yahoo-inc.com] 
Sent: Tuesday, July 18, 2006 10:29 AM
To: hadoop-dev@lucene.apache.org
Subject: RE: [jira] Commented: (HADOOP-7) MapReduce has a series of problems
concerning task-allocation to worker nodes

It works for me.
Reduce tasks start executing from the get-go, but they just sit there
waiting for map output to become available. And then, all they can do is
copy it over, waiting for the last map to complete in order to start their
sort-merge-process, so you can't expect more than 25% of recude to be
compete before map is 100% complete, and often you get less. But I do see
some progress from the start.
Do you have mapred.tasktracker.tasks.maximum configured to more than 1? I
use the value 2, creating 2 map tasks and 2 reduce tasks per node.
Yoram 

> -----Original Message-----
> From: Mikkel Kamstrup Erlandsen (JIRA) [mailto:jira@apache.org] 
> Sent: Tuesday, July 18, 2006 4:44 AM
> To: hadoop-dev@lucene.apache.org
> Subject: [jira] Commented: (HADOOP-7) MapReduce has a series 
> of problems concerning task-allocation to worker nodes
> 
>     [ 
> http://issues.apache.org/jira/browse/HADOOP-7?page=comments#ac
> tion_12421847 ] 
>             
> Mikkel Kamstrup Erlandsen commented on HADOOP-7:
> ------------------------------------------------
> 
> This is likely me being dumb, but I don't think this issue is fixed.
> 
> When I run any of the provided example programs 
> wordcount/grep (also pi with specualtive excecution enabled) 
> reduce tasks does not start before all map tasks have completed.
> 
> My cluster contains three nodes and I am running Hadoop 0.4.0.
> 
> > MapReduce has a series of problems concerning 
> task-allocation to worker nodes
> > 
> --------------------------------------------------------------
> ---------------
> >
> >                 Key: HADOOP-7
> >                 URL: http://issues.apache.org/jira/browse/HADOOP-7
> >             Project: Hadoop
> >          Issue Type: Bug
> >         Environment: All
> >            Reporter: Mike Cafarella
> >             Fix For: 0.1.0
> >
> >         Attachments: jobtracker.patch
> >
> >
> > The MapReduce JobTracker is not great at allocating tasks 
> to TaskTracker worker nodes.
> > Here are the problems:
> > 1) There is no speculative execution of tasks
> > 2) Reduce tasks must wait until all map tasks are completed 
> before doing any work
> > 3) TaskTrackers don't distinguish between Map and Reduce 
> jobs.  Also, the number of
> > tasks at a single node is limited to some constant.  That 
> means you can get weird deadlock
> > problems upon machine failure.  The reduces take up all the 
> available execution slots, but they
> > don't do productive work, because they're waiting for a map 
> task to complete.  Of course, that
> > map task won't even be started until the reduce tasks 
> finish, so you can see the problem...
> > 4) The JobTracker is so complicated that it's hard to fix 
> any of these.
> > The right solution is a rewrite of the JobTracker to be a 
> lot more flexible in task handling.
> > It has to be a lot simpler.  One way to make it simpler is 
> to add an abstraction I'll call
> > "TaskInProgress".  Jobs are broken into chunks called 
> TasksInProgress.  All the TaskInProgress
> > objects must be complete, somehow, before the Job is complete.
> > A single TaskInProgress can be executed by one or more 
> Tasks.  TaskTrackers are assigned Tasks.
> > If a Task fails, we report it back to the JobTracker, where 
> the TaskInProgress lives.  The TIP can then
> > decide whether to launch additional  Tasks or not.
> > Speculative execution is handled within the TIP.  It simply 
> launches multiple Tasks in parallel.  The
> > TaskTrackers have no idea that these Tasks are actually 
> doing the same chunk of work.  The TIP
> > is complete when any one of its Tasks are complete.
> 
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the 
> administrators: 
> http://issues.apache.org/jira/secure/Administrators.jspa
> -
> For more information on JIRA, see: 
> http://www.atlassian.com/software/jira
> 
>         
> 
> 



From MAILER-DAEMON Tue Jul 18 18:13:33 2006
Return-Path: 
 <hadoop-dev-return-2595-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 60166 invoked from network); 18 Jul 2006 18:13:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2006 18:13:33 -0000
Received: (qmail 56414 invoked by uid 500); 18 Jul 2006 18:13:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 56388 invoked by uid 500); 18 Jul 2006 18:13:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 56379 invoked by uid 99); 18 Jul 2006 18:13:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 11:13:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 11:13:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D655C41001A
	for <hadoop-dev@lucene.apache.org>; Tue, 18 Jul 2006 18:11:13 +0000 (GMT)
Message-ID: <2837861.1153246273875.JavaMail.jira@brutus>
Date: Tue, 18 Jul 2006 11:11:13 -0700 (PDT)
From: "Bryan Pendleton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-370) TaskTracker startup fails if any
 mapred.local.dir entries don't exist
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

TaskTracker startup fails if any mapred.local.dir entries don't exist
---------------------------------------------------------------------

                 Key: HADOOP-370
                 URL: http://issues.apache.org/jira/browse/HADOOP-370
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
         Environment: ~30 node cluster, various size/number of disks, CPUs, memory
            Reporter: Bryan Pendleton


This appears to have been introduced with the "check for enough free space" before startup.

It's debatable how best to fix this bug. I will submit a patch which ignores directories for which the DF utility fails. This is letting me continue operation on my cluster (where the number of drives varies, so there are entries in mapred.local.dir for drives that aren't on all cluster nodes), but a cleaner solution is probably better. I'd lean towards "check for existence", and ignore the dir if it doesn't  - but don't depend on DF to fail, since DF could fail for other reasons without meaning you're out of disk space. I argue that a TaskTracker should start up if *all* directories that *can be written to* in the list have enough space. Otherwise, a failed drive per cluster machine means no work ever gets done.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 18 18:18:24 2006
Return-Path: 
 <hadoop-dev-return-2596-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 61849 invoked from network); 18 Jul 2006 18:18:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2006 18:18:24 -0000
Received: (qmail 62726 invoked by uid 500); 18 Jul 2006 18:18:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62700 invoked by uid 500); 18 Jul 2006 18:18:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62690 invoked by uid 99); 18 Jul 2006 18:18:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 11:18:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 11:18:23 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CB1D741001C
	for <hadoop-dev@lucene.apache.org>; Tue, 18 Jul 2006 18:16:14 +0000 (GMT)
Message-ID: <21595012.1153246574829.JavaMail.jira@brutus>
Date: Tue, 18 Jul 2006 11:16:14 -0700 (PDT)
From: "Bryan Pendleton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-370) TaskTracker startup fails if any
 mapred.local.dir entries don't exist
In-Reply-To: <2837861.1153246273875.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-370?page=all ]

Bryan Pendleton updated HADOOP-370:
-----------------------------------

    Attachment: fix-freespace-tasktracker-failure.txt

Here's the patch. As mentioned, it will just punt (and log) if something goes wrong with the DF for a specified directory. I believe this is a reasonable (but not as clean as desirable) fix for now.

> TaskTracker startup fails if any mapred.local.dir entries don't exist
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-370
>                 URL: http://issues.apache.org/jira/browse/HADOOP-370
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>         Environment: ~30 node cluster, various size/number of disks, CPUs, memory
>            Reporter: Bryan Pendleton
>         Attachments: fix-freespace-tasktracker-failure.txt
>
>
> This appears to have been introduced with the "check for enough free space" before startup.
> It's debatable how best to fix this bug. I will submit a patch which ignores directories for which the DF utility fails. This is letting me continue operation on my cluster (where the number of drives varies, so there are entries in mapred.local.dir for drives that aren't on all cluster nodes), but a cleaner solution is probably better. I'd lean towards "check for existence", and ignore the dir if it doesn't  - but don't depend on DF to fail, since DF could fail for other reasons without meaning you're out of disk space. I argue that a TaskTracker should start up if *all* directories that *can be written to* in the list have enough space. Otherwise, a failed drive per cluster machine means no work ever gets done.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 18 18:54:23 2006
Return-Path: 
 <hadoop-dev-return-2597-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77290 invoked from network); 18 Jul 2006 18:54:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2006 18:54:23 -0000
Received: (qmail 25045 invoked by uid 500); 18 Jul 2006 18:54:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24885 invoked by uid 500); 18 Jul 2006 18:54:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24876 invoked by uid 99); 18 Jul 2006 18:54:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 11:54:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 11:54:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 23DD041001A
	for <hadoop-dev@lucene.apache.org>; Tue, 18 Jul 2006 18:52:14 +0000 (GMT)
Message-ID: <22441907.1153248734143.JavaMail.jira@brutus>
Date: Tue, 18 Jul 2006 11:52:14 -0700 (PDT)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-371) ant tar should package contrib jars
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

ant tar should package contrib jars
-----------------------------------

                 Key: HADOOP-371
                 URL: http://issues.apache.org/jira/browse/HADOOP-371
             Project: Hadoop
          Issue Type: Improvement
            Reporter: Michel Tourn


>>From Hadoop-356:
>I note that the contrib packages are not included in distributions (the "tar" target).  
>They probably should be.  Michel, would you like to modify "tar" to include the contrib code?  
>This should be done in a separate bug.

OK.
This packaging is done in target deploy-contrib.
So I can just add a dependency to the top-level tar target:
<!-- Make release tarball(s)                                               -->
<target name="tar" depends="package, deploy-contrib">




-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 18 18:56:26 2006
Return-Path: 
 <hadoop-dev-return-2598-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78707 invoked from network); 18 Jul 2006 18:56:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2006 18:56:26 -0000
Received: (qmail 28726 invoked by uid 500); 18 Jul 2006 18:56:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28691 invoked by uid 500); 18 Jul 2006 18:56:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28670 invoked by uid 99); 18 Jul 2006 18:56:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 11:56:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 11:56:25 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9A70441001C
	for <hadoop-dev@lucene.apache.org>; Tue, 18 Jul 2006 18:54:16 +0000 (GMT)
Message-ID: <18871876.1153248856630.JavaMail.jira@brutus>
Date: Tue, 18 Jul 2006 11:54:16 -0700 (PDT)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-371) ant tar should package contrib jars
In-Reply-To: <22441907.1153248734143.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-371?page=all ]

Michel Tourn updated HADOOP-371:
--------------------------------

    Attachment: build.tarcontrib.patch

> ant tar should package contrib jars
> -----------------------------------
>
>                 Key: HADOOP-371
>                 URL: http://issues.apache.org/jira/browse/HADOOP-371
>             Project: Hadoop
>          Issue Type: Improvement
>            Reporter: Michel Tourn
>         Attachments: build.tarcontrib.patch
>
>
> From Hadoop-356:
> >I note that the contrib packages are not included in distributions (the "tar" target).  
> >They probably should be.  Michel, would you like to modify "tar" to include the contrib code?  
> >This should be done in a separate bug.
> OK.
> This packaging is done in target deploy-contrib.
> So I can just add a dependency to the top-level tar target:
> <!-- Make release tarball(s)                                               -->
> <target name="tar" depends="package, deploy-contrib">

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 18 20:46:09 2006
Return-Path: 
 <hadoop-dev-return-2599-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 29392 invoked from network); 18 Jul 2006 20:46:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2006 20:46:09 -0000
Received: (qmail 54763 invoked by uid 500); 18 Jul 2006 20:46:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 54726 invoked by uid 500); 18 Jul 2006 20:46:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 54703 invoked by uid 99); 18 Jul 2006 20:46:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 13:46:08 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.126.228.150] (HELO rsmtp2.corp.yahoo.com)
 (207.126.228.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 13:46:05 -0700
Received: from [172.21.147.237] ([172.21.179.131])
	(authenticated bits=0)
	by rsmtp2.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k6IKjY75021726
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Tue, 18 Jul 2006 13:45:34 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=unCG2/sMp7fYrwCKUX97qjlRuxJHGYSnOPzVygzQ4mAPF5CdpxfDS2k/PSkECjay
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <16396054.1153219154675.JavaMail.jira@brutus>
References: <16396054.1153219154675.JavaMail.jira@brutus>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <8839D56A-FBCB-4BDD-A9EF-6F1E570916FA@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Eric Baldeschwieler <eric14@yahoo-inc.com>
Subject: Re: [jira] Resolved: (HADOOP-356) Build and test hadoopStreaming
 nightly
Date: Tue, 18 Jul 2006 13:45:32 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Should we start to produce more than one tar, so that we don't push  
all contribs to all nodes all the time?

On Jul 18, 2006, at 3:39 AM, Doug Cutting (JIRA) wrote:

>      [ http://issues.apache.org/jira/browse/HADOOP-356?page=all ]
>
> Doug Cutting resolved HADOOP-356.
> ---------------------------------
>
>     Fix Version/s: 0.5.0
>        Resolution: Fixed
>
> I changed this some and committed it.  Since the old "compile"  
> target is now named "compile-core", most of the dependencies on it  
> needed to be changed to "compile-core" too.  Also, I renamed the  
> "compile-test" target to be "compile-core-test".
>
> I note that the contrib packages are not included in distributions  
> (the "tar" target).  They probably should be.  Michel, would you  
> like to modify "tar" to include the contrib code?  This should be  
> done in a separate bug.
>
>> Build and test hadoopStreaming nightly
>> --------------------------------------
>>
>>                 Key: HADOOP-356
>>                 URL: http://issues.apache.org/jira/browse/HADOOP-356
>>             Project: Hadoop
>>          Issue Type: Improvement
>>            Reporter: Michel Tourn
>>             Fix For: 0.5.0
>>
>>         Attachments: buildallcontribs.patch, nightlystreaming.patch
>>
>>
>> hadoopStreaming was originally built and tested separately.
>> It makes sense to keep building the hadoopStreaming code as a  
>> separate jar file:
>> this is all client code that can be uploaded in the Job jar.
>> this allows quick turnaround on production clusters
>> (hadoopStreaming code updates do not require to bring down the  
>> MapReduce system.
>> If necessary users can use their own modified versions of the  
>> hadoopStreaming jar but still run on the production cluster.)
>> On the other hand it makes sense to build this code nightly.
>> Many recent changes broke either compilation or correctness.
>> All the problems would have been caught if the hadoopStreaming  
>> compilation and tests were run nighlty.
>> Conclusion:
>> the updated top-level build.xml adds the following dependencies:
>> 1. Target compile calls target compile in contrib/streaming/build.xml
>> 2. Target test calls target test in contrib/streaming/build.xml
>
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the  
> administrators: http://issues.apache.org/jira/secure/ 
> Administrators.jspa
> -
> For more information on JIRA, see: http://www.atlassian.com/ 
> software/jira
>
>


From MAILER-DAEMON Tue Jul 18 21:37:25 2006
Return-Path: 
 <hadoop-dev-return-2600-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51077 invoked from network); 18 Jul 2006 21:37:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2006 21:37:25 -0000
Received: (qmail 65120 invoked by uid 500); 18 Jul 2006 21:37:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 65098 invoked by uid 500); 18 Jul 2006 21:37:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 65089 invoked by uid 99); 18 Jul 2006 21:37:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 14:37:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 14:37:23 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3709A41000C
	for <hadoop-dev@lucene.apache.org>; Tue, 18 Jul 2006 21:35:15 +0000 (GMT)
Message-ID: <20808281.1153258515222.JavaMail.jira@brutus>
Date: Tue, 18 Jul 2006 14:35:15 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-237) Standard set of Performance Metrics
 for Hadoop
In-Reply-To: <14919853.1148078609860.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-237?page=all ]

Milind Bhandarkar updated HADOOP-237:
-------------------------------------

    Attachment:     (was: hadoop-metrics.patch)

> Standard set of Performance Metrics for Hadoop
> ----------------------------------------------
>
>                 Key: HADOOP-237
>                 URL: http://issues.apache.org/jira/browse/HADOOP-237
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: metrics
>    Affects Versions: 0.3.0
>         Environment: All
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>
> I am starting to use Hadoop's shiny new Metrics API to publish performance (and other) Metrics of running jobs and other daemons.
> Which performance metrics are people interested in seeing ? If possible, please group them according to modules, such as map-reduce, dfs, general-cluster-related etc. I will follow this process:
> 1. collect this list
> 2. assess feasibility of obtaining metric
> 3. assign context/record/metrics names
> 4. seek approval for names
> 5. instrument the code.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 18 21:39:24 2006
Return-Path: 
 <hadoop-dev-return-2601-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51598 invoked from network); 18 Jul 2006 21:39:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2006 21:39:24 -0000
Received: (qmail 67945 invoked by uid 500); 18 Jul 2006 21:39:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 67787 invoked by uid 500); 18 Jul 2006 21:39:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 67778 invoked by uid 99); 18 Jul 2006 21:39:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 14:39:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 14:39:23 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2D25741000C
	for <hadoop-dev@lucene.apache.org>; Tue, 18 Jul 2006 21:37:15 +0000 (GMT)
Message-ID: <458142.1153258635182.JavaMail.jira@brutus>
Date: Tue, 18 Jul 2006 14:37:15 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-237) Standard set of Performance Metrics
 for Hadoop
In-Reply-To: <14919853.1148078609860.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-237?page=all ]

Milind Bhandarkar updated HADOOP-237:
-------------------------------------

    Attachment: hadoop-metrics.patch

Hopefully this patch addresses alll your concerns, Doug.

> Standard set of Performance Metrics for Hadoop
> ----------------------------------------------
>
>                 Key: HADOOP-237
>                 URL: http://issues.apache.org/jira/browse/HADOOP-237
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: metrics
>    Affects Versions: 0.3.0
>         Environment: All
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>         Attachments: hadoop-metrics.patch
>
>
> I am starting to use Hadoop's shiny new Metrics API to publish performance (and other) Metrics of running jobs and other daemons.
> Which performance metrics are people interested in seeing ? If possible, please group them according to modules, such as map-reduce, dfs, general-cluster-related etc. I will follow this process:
> 1. collect this list
> 2. assess feasibility of obtaining metric
> 3. assign context/record/metrics names
> 4. seek approval for names
> 5. instrument the code.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 18 21:41:37 2006
Return-Path: 
 <hadoop-dev-return-2602-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52310 invoked from network); 18 Jul 2006 21:41:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2006 21:41:37 -0000
Received: (qmail 72244 invoked by uid 500); 18 Jul 2006 21:41:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72225 invoked by uid 500); 18 Jul 2006 21:41:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72162 invoked by uid 99); 18 Jul 2006 21:41:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 14:41:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 14:41:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 539CC41000C
	for <hadoop-dev@lucene.apache.org>; Tue, 18 Jul 2006 21:39:15 +0000 (GMT)
Message-ID: <21761680.1153258755340.JavaMail.jira@brutus>
Date: Tue, 18 Jul 2006 14:39:15 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-47) include records/second and
 bytes/second in  task reports
In-Reply-To: <579254540.1140560374384.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-47?page=comments#action_12421972 ] 
            
Milind Bhandarkar commented on HADOOP-47:
-----------------------------------------

Is this bug still relevant now that we have a fullfledged metrics API, and abovementioned metrics will be output to the configurable metrics collector (after applying the patch for hadoop-237) ?


> include records/second and bytes/second in  task reports
> --------------------------------------------------------
>
>                 Key: HADOOP-47
>                 URL: http://issues.apache.org/jira/browse/HADOOP-47
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>
> TaskReport should include fields for total records processed, total bytes processed and total seconds of task execution.  These should also be reported in the web ui, as bytes/second and records/second.  The job display could sum these to report total bytes/second and records/second for map and reduce.  Better yet would be a graph displaying the total rates over the course of the job...

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 18 21:46:25 2006
Return-Path: 
 <hadoop-dev-return-2603-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 53562 invoked from network); 18 Jul 2006 21:46:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2006 21:46:25 -0000
Received: (qmail 79258 invoked by uid 500); 18 Jul 2006 21:46:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 79108 invoked by uid 500); 18 Jul 2006 21:46:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 79099 invoked by uid 99); 18 Jul 2006 21:46:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 14:46:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 14:46:23 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 59A9A410009
	for <hadoop-dev@lucene.apache.org>; Tue, 18 Jul 2006 21:44:15 +0000 (GMT)
Message-ID: <12645719.1153259055364.JavaMail.jira@brutus>
Date: Tue, 18 Jul 2006 14:44:15 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-237) Standard set of Performance Metrics
 for Hadoop
In-Reply-To: <14919853.1148078609860.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-237?page=all ]

Milind Bhandarkar updated HADOOP-237:
-------------------------------------

    Attachment:     (was: hadoop-metrics.patch)

> Standard set of Performance Metrics for Hadoop
> ----------------------------------------------
>
>                 Key: HADOOP-237
>                 URL: http://issues.apache.org/jira/browse/HADOOP-237
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: metrics
>    Affects Versions: 0.3.0
>         Environment: All
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>
> I am starting to use Hadoop's shiny new Metrics API to publish performance (and other) Metrics of running jobs and other daemons.
> Which performance metrics are people interested in seeing ? If possible, please group them according to modules, such as map-reduce, dfs, general-cluster-related etc. I will follow this process:
> 1. collect this list
> 2. assess feasibility of obtaining metric
> 3. assign context/record/metrics names
> 4. seek approval for names
> 5. instrument the code.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 18 21:46:26 2006
Return-Path: 
 <hadoop-dev-return-2604-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 53613 invoked from network); 18 Jul 2006 21:46:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2006 21:46:26 -0000
Received: (qmail 79425 invoked by uid 500); 18 Jul 2006 21:46:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 79295 invoked by uid 500); 18 Jul 2006 21:46:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 79286 invoked by uid 99); 18 Jul 2006 21:46:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 14:46:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 14:46:25 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BEEDF41000B
	for <hadoop-dev@lucene.apache.org>; Tue, 18 Jul 2006 21:44:16 +0000 (GMT)
Message-ID: <22672260.1153259056779.JavaMail.jira@brutus>
Date: Tue, 18 Jul 2006 14:44:16 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-237) Standard set of Performance Metrics
 for Hadoop
In-Reply-To: <14919853.1148078609860.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-237?page=comments#action_12421973 ] 
            
Milind Bhandarkar commented on HADOOP-237:
------------------------------------------

sorry forgot to merge with trunk before diffing.

> Standard set of Performance Metrics for Hadoop
> ----------------------------------------------
>
>                 Key: HADOOP-237
>                 URL: http://issues.apache.org/jira/browse/HADOOP-237
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: metrics
>    Affects Versions: 0.3.0
>         Environment: All
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>
> I am starting to use Hadoop's shiny new Metrics API to publish performance (and other) Metrics of running jobs and other daemons.
> Which performance metrics are people interested in seeing ? If possible, please group them according to modules, such as map-reduce, dfs, general-cluster-related etc. I will follow this process:
> 1. collect this list
> 2. assess feasibility of obtaining metric
> 3. assign context/record/metrics names
> 4. seek approval for names
> 5. instrument the code.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 18 21:55:25 2006
Return-Path: 
 <hadoop-dev-return-2605-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 58453 invoked from network); 18 Jul 2006 21:55:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2006 21:55:25 -0000
Received: (qmail 2320 invoked by uid 500); 18 Jul 2006 21:55:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 2296 invoked by uid 500); 18 Jul 2006 21:55:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 2287 invoked by uid 99); 18 Jul 2006 21:55:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 14:55:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 14:55:24 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5EDD041000B
	for <hadoop-dev@lucene.apache.org>; Tue, 18 Jul 2006 21:53:15 +0000 (GMT)
Message-ID: <28006158.1153259595386.JavaMail.jira@brutus>
Date: Tue, 18 Jul 2006 14:53:15 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-237) Standard set of Performance Metrics
 for Hadoop
In-Reply-To: <14919853.1148078609860.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-237?page=all ]

Milind Bhandarkar updated HADOOP-237:
-------------------------------------

    Attachment: hadoop-metrics.patch

repatched after merging with trunk.

> Standard set of Performance Metrics for Hadoop
> ----------------------------------------------
>
>                 Key: HADOOP-237
>                 URL: http://issues.apache.org/jira/browse/HADOOP-237
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: metrics
>    Affects Versions: 0.3.0
>         Environment: All
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>         Attachments: hadoop-metrics.patch
>
>
> I am starting to use Hadoop's shiny new Metrics API to publish performance (and other) Metrics of running jobs and other daemons.
> Which performance metrics are people interested in seeing ? If possible, please group them according to modules, such as map-reduce, dfs, general-cluster-related etc. I will follow this process:
> 1. collect this list
> 2. assess feasibility of obtaining metric
> 3. assign context/record/metrics names
> 4. seek approval for names
> 5. instrument the code.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 18 23:22:23 2006
Return-Path: 
 <hadoop-dev-return-2606-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 88568 invoked from network); 18 Jul 2006 23:22:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2006 23:22:23 -0000
Received: (qmail 19956 invoked by uid 500); 18 Jul 2006 23:22:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 19930 invoked by uid 500); 18 Jul 2006 23:22:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 19921 invoked by uid 99); 18 Jul 2006 23:22:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 16:22:22 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.109.112.27] (HELO mrout1-b.corp.dcn.yahoo.com)
 (216.109.112.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 16:22:19 -0700
Received: from memberfamouslx (memberfamous-lx.corp.yahoo.com [172.21.103.73])
	by mrout1-b.corp.dcn.yahoo.com (8.13.6/8.13.6/y.out) with ESMTP id
 k6INLnBV003018
	for <hadoop-dev@lucene.apache.org>; Tue, 18 Jul 2006 16:21:49 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=from:to:subject:date:message-id:mime-version:content-type:
	x-mailer:x-mimeole:thread-index;
	b=fNfDj8CN9NQeu57VlW8fQ8Zr3qLvNnIANmDQjatOIq0TKOOTS+H1Att8/5E3/xHh
From: "Yoram Arnon" <yarnon@yahoo-inc.com>
To: <hadoop-dev@lucene.apache.org>
Subject: Job tracker SEGV
Date: Tue, 18 Jul 2006 16:21:49 -0700
Message-ID: <00c701c6aac0$f284f3c0$496715ac@ds.corp.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_00C8_01C6AA86.46261BC0"
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-Index: AcaqwPGnDXref0H+SUGjy7zOeibGkQ==
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_00C8_01C6AA86.46261BC0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

I've been seeing a few cases of job tracker segv recently. The JVM itself
SEGV'ed, it happened three times so far, on different machines running the
job tracker.
I'm using Java version 1.5.0_06, hadoop version 0.4.0.

Has anyone else seen this?
Any idea what may be causing it?

Yoram

------=_NextPart_000_00C8_01C6AA86.46261BC0--


From MAILER-DAEMON Wed Jul 19 00:11:25 2006
Return-Path: 
 <hadoop-dev-return-2607-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 2406 invoked from network); 19 Jul 2006 00:11:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 00:11:25 -0000
Received: (qmail 54294 invoked by uid 500); 19 Jul 2006 00:11:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 54265 invoked by uid 500); 19 Jul 2006 00:11:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 54256 invoked by uid 99); 19 Jul 2006 00:11:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 17:11:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 17:11:24 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D0D9A41000F
	for <hadoop-dev@lucene.apache.org>; Wed, 19 Jul 2006 00:09:15 +0000 (GMT)
Message-ID: <27343990.1153267755852.JavaMail.jira@brutus>
Date: Tue, 18 Jul 2006 17:09:15 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-54?page=comments#action_12422002 ] 
            
Owen O'Malley commented on HADOOP-54:
-------------------------------------

Ok, I talked with Eric about this.

The thought about BytesWritable was just about trying to get rid of the redundant lengths in the SequenceFile format. (Both the Writable object and the SequenceFile encode the object's length.) This redundancy is caused because Writable.readFields is not given the length and yet the SequenceFile wants to be able to know the length so that it can copy/skip keys and values during copy and sorting. Unfortunately, to remove the redundancy would require extending the Writable interface, which would break a lot of application code. (We could make an optional extension that provides a mechanism for getting the length out of the serialized form or copying the raw bytes of the proper length and allow Writable types to implement the sub-interface if they want to have smaller files.)

For now, I'd suggest mixing in the length in a zero compressed format. 

So inside the compressed key block would look like:
<key1-length><key1-bytes><key2-length><key2-bytes><key3-length><key3-bytes>

And the inside of the compressed value block would look like:
<value1-length><value1-bytes><value2-length><value2-bytes><value3-length><value3-bytes>

The blocks would look like:
<sync><num-records><compressed-key-bytes><compressed-value-bytes><compressed-keys-data><compressed-values-data>

With the blocks padding upto io.sequencefile.pad.percent to align to the DFS block boundary.

Does that sound reasonable?

> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Michel Tourn
>             Fix For: 0.5.0
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 19 01:25:24 2006
Return-Path: 
 <hadoop-dev-return-2608-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 24963 invoked from network); 19 Jul 2006 01:25:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 01:25:24 -0000
Received: (qmail 11896 invoked by uid 500); 19 Jul 2006 01:25:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 11865 invoked by uid 500); 19 Jul 2006 01:25:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 11856 invoked by uid 99); 19 Jul 2006 01:25:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 18:25:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 18:25:23 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B797C41000D
	for <hadoop-dev@lucene.apache.org>; Wed, 19 Jul 2006 01:23:14 +0000 (GMT)
Message-ID: <9816562.1153272194749.JavaMail.jira@brutus>
Date: Tue, 18 Jul 2006 18:23:14 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-286) copyFromLocal throws
 LeaseExpiredException
In-Reply-To: <19846443.1149699192499.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-286?page=comments#action_12422012 ] 
            
Konstantin Shvachko commented on HADOOP-286:
--------------------------------------------

It looks like the following scenario leads to this exception.
LEASE_PERIOD = 60 sec is a global constants defining for how long a lease is issued.
DFSClient.LeaseChecker renews this client leases every 30 sec = LEASE_PERIOD/2.
If the renewLease() fails then the client retries to renew every second.
One of the most popular reasons the renewLease() fails is because it timeouts SocketTimeoutException.
This happens when the namenode is busy, which is not unusual since we lock it for each operation.
The socket timeout is defined by the config parameter "ipc.client.timeout", which is set to 60 sec in
hadoop-default.xml That means that the renewLease() can last up to 60 seconds and the lease will
expire the next time the client tries to renew it, which could be up to 90 seconds after the lease was
created or renewed last time.
So there are 2 simple solutions to the problem:
1) to increase LEASE_PERIOD
2) to decrease ipc.client.timeout

A related problem is that DFSClient sends lease renew requests no matter what every 30 seconds 
or less. It looks like the DFSClient has enough information to send renew messages only if it really 
holds a lease. A simple solution would be avoid calling  renewLease() when 
DFSClient.pendingCreates is empty.
This could substantially decrease overall net traffic for map/reduce.



> copyFromLocal throws LeaseExpiredException
> ------------------------------------------
>
>                 Key: HADOOP-286
>                 URL: http://issues.apache.org/jira/browse/HADOOP-286
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.3.0
>         Environment: redhar linux
>            Reporter: Runping Qi
>
> Loading local files to dfs through hadoop dfs -copyFromLocal failed due to the following exception:
> copyFromLocal: org.apache.hadoop.dfs.LeaseExpiredException: No lease on output_crawled.1.txt
>         at org.apache.hadoop.dfs.FSNamesystem.getAdditionalBlock(FSNamesystem.java:414)
>         at org.apache.hadoop.dfs.NameNode.addBlock(NameNode.java:190)
>         at sun.reflect.GeneratedMethodAccessor9.invoke(Unknown Source)
>         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>         at java.lang.reflect.Method.invoke(Method.java:585)
>         at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:243)
>         at org.apache.hadoop.ipc.Server$Handler.run(Server.java:231)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 19 07:05:25 2006
Return-Path: 
 <hadoop-dev-return-2609-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 29557 invoked from network); 19 Jul 2006 07:05:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 07:05:25 -0000
Received: (qmail 11831 invoked by uid 500); 19 Jul 2006 07:05:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 11673 invoked by uid 500); 19 Jul 2006 07:05:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 11664 invoked by uid 99); 19 Jul 2006 07:05:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 00:05:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 00:05:24 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BD6E77141F1
	for <hadoop-dev@lucene.apache.org>; Wed, 19 Jul 2006 07:03:14 +0000 (GMT)
Message-ID: <1075988.1153292594773.JavaMail.jira@brutus>
Date: Wed, 19 Jul 2006 00:03:14 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-347) Implement HDFS content browsing
 interface
In-Reply-To: <17227613.1152182310090.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-347?page=all ]

Devaraj Das updated HADOOP-347:
-------------------------------

    Attachment: content_browsing.patch

Implemented this as discussed.

> Implement HDFS content browsing interface
> -----------------------------------------
>
>                 Key: HADOOP-347
>                 URL: http://issues.apache.org/jira/browse/HADOOP-347
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.1.0, 0.2.0, 0.1.1, 0.3.0, 0.4.0, 0.2.1, 0.3.1, 0.3.2
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>             Fix For: 0.5.0
>
>         Attachments: content_browsing.patch
>
>
> Implement HDFS content browsing interface over HTTP. Clients would connect to the NameNode and this would send a redirect to a random DataNode. The DataNode, via dfs client, would proxy to namenode for metadata browsing and to other datanodes for content. One can also view the local blocks on any DataNode. Head, Tail will be provided as shorthands for viewing the first block and the last block of a file. 
> For full file viewing, the data displayed per HTTP request will be a block with a PREV/NEXT link. The block size for viewing can be a configurable parameter (the user sets it via the web browser) to the HTTP server (e.g., 256 KB can be the default block size for viewing files).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 19 07:27:27 2006
Return-Path: 
 <hadoop-dev-return-2610-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 42791 invoked from network); 19 Jul 2006 07:27:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 07:27:27 -0000
Received: (qmail 49331 invoked by uid 500); 19 Jul 2006 07:27:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49193 invoked by uid 500); 19 Jul 2006 07:27:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49184 invoked by uid 99); 19 Jul 2006 07:27:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 00:27:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 00:27:26 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9A7BD7141E8
	for <hadoop-dev@lucene.apache.org>; Wed, 19 Jul 2006 07:25:16 +0000 (GMT)
Message-ID: <9370128.1153293916629.JavaMail.jira@brutus>
Date: Wed, 19 Jul 2006 00:25:16 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-321) DatanodeInfo refactoring
In-Reply-To: <20976373.1151024969902.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-321?page=all ]

Owen O'Malley updated HADOOP-321:
---------------------------------

    Attachment: DatanodeInfo_refactor5.patch

I've trivially updated Konstantin's patch to make it apply to the current sources.

I'm still not wild about having the DataNodeInfo send part of itself via RPC or being Comparable.  There is a lot of confusion still about what should be a DatanodeInfo versus a DatanodeID, but that was present in the original code, not the patch and indicates additional refactorings that are needed.

I ran both the unit tests and a distributed test and it was all good.

This patch gets rid of some of the redundant code and that is a good thing. I also like the comments saying what the types of the elements in the containers are. I'm looking forward to when we can declare all of the container types. *smile*

A few comments:
  1. A bunch of the routines have empty javadoc, which isn't useful at all. Although I suspect  those routines were just moved from somewhere else, it makes the patch look bad.
  2. Namenode.sendHeartbeat creates a throwaway DatanodeDescriptor, including its block set, just to do a lookup on the name. Is there a way to index that table on the DatanodeID instead?
  3. DatanodeID implements compareTo, but not equals or hashCode. Usually it is a good idea to define all of them.
  4. Why isn't DatanodeID implementing Writable?
  5. To write out strings, you don't need to create UTF8 from them, you just need to do:
      UTF8.writeString(out, name);
      UTF8.writeString(out, storageId);
   and reading looks like:
     name = UTF8.readString(in);
     storageId = UTF8.readString(in);
  It works either way, it is just a little easier to read the code with the helper functions.


> DatanodeInfo refactoring
> ------------------------
>
>                 Key: HADOOP-321
>                 URL: http://issues.apache.org/jira/browse/HADOOP-321
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.5.0
>
>         Attachments: DatanodeInfo_refactor.patch, DatanodeInfo_refactor3.patch, DatanodeInfo_refactor4-comp.patch, DatanodeInfo_refactor4.patch, DatanodeInfo_refactor5.patch
>
>
> I'm trying to refactor some name node classes, which seem to be similar.
> So DatanodeInfo is a public api now for purely external ( to name node) use.
> The name node class that stores information about data nodes including the
> set of its blocks is called DatanodeDescriptor.
> The DatanodeReport is removed since it was a variation of DatanodeInfo.
> Previously DatanodeInfo and DatanodeDescriptor were the same class, and
> DatanodeReport was used for reporting node statistics only.
> This is a preparation step for HADOOP-306.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 19 07:27:29 2006
Return-Path: 
 <hadoop-dev-return-2611-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 42838 invoked from network); 19 Jul 2006 07:27:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 07:27:29 -0000
Received: (qmail 49406 invoked by uid 500); 19 Jul 2006 07:27:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49380 invoked by uid 500); 19 Jul 2006 07:27:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49371 invoked by uid 99); 19 Jul 2006 07:27:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 00:27:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 00:27:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D8C407141F3
	for <hadoop-dev@lucene.apache.org>; Wed, 19 Jul 2006 07:25:18 +0000 (GMT)
Message-ID: <13511023.1153293918885.JavaMail.jira@brutus>
Date: Wed, 19 Jul 2006 00:25:18 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-54?page=comments#action_12422049 ] 
            
Doug Cutting commented on HADOOP-54:
------------------------------------

SequenceFile already has an API for reading and writing raw keys and values:

http://lucene.apache.org/hadoop/docs/api/org/apache/hadoop/io/SequenceFile.Reader.html#next(org.apache.hadoop.io.DataOutputBuffer)
http://lucene.apache.org/hadoop/docs/api/org/apache/hadoop/io/SequenceFile.Writer.html#append(byte[],%20int,%20int,%20int)

So it's easy to write an InputFormat or OutputFormat for entries that do not encode their own length.

Writable implementations must encode their length in order to be easily nestable: if a key contains a struct with string, int and long values, then the lenghts of the nested strings must be explicitly written.

If we're really worried about redundant lengths, we could add a RawWritable sub-interface that adds something like rawLength(), rawWrite(DataOutput), and rawRead(DataInput, int length).  (This is roughly what Owen referred to.)

I don't think we should worry about padding to DFS block boundaries in the first implementation, but rather leave that as a subsequent optimization.

I'm +1 for Owen's pro[osed format.

> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Michel Tourn
>             Fix For: 0.5.0
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 19 07:42:25 2006
Return-Path: 
 <hadoop-dev-return-2612-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 48809 invoked from network); 19 Jul 2006 07:42:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 07:42:25 -0000
Received: (qmail 72687 invoked by uid 500); 19 Jul 2006 07:42:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72661 invoked by uid 500); 19 Jul 2006 07:42:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72652 invoked by uid 99); 19 Jul 2006 07:42:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 00:42:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 00:42:24 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DD84F7141F5
	for <hadoop-dev@lucene.apache.org>; Wed, 19 Jul 2006 07:40:14 +0000 (GMT)
Message-ID: <22048249.1153294814904.JavaMail.jira@brutus>
Date: Wed, 19 Jul 2006 00:40:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-369) Added ability to copy all part-files
 into one output file
In-Reply-To: <6586655.1153240813983.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-369?page=comments#action_12422050 ] 
            
Doug Cutting commented on HADOOP-369:
-------------------------------------

I don't see why this needs to be a new generic FileSystem method.  Can't it simply be a FileUtil method?

Alternately, couldn't we just modify DFSShell.cat(String) to, when it's argument is a directory, recursively descend and copy all contained file content to standard output?  Then one could just 'bin/hadoop dfs cat foo > bar' to append all content under 'foo' into a local file 'bar'.  Would that work for you?

> Added ability to copy all part-files into one output file
> ---------------------------------------------------------
>
>                 Key: HADOOP-369
>                 URL: http://issues.apache.org/jira/browse/HADOOP-369
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Johan Oskarson
>            Priority: Trivial
>         Attachments: copymerge.patch
>
>
> Since we use the hadoop output in non-hadoop applications it's nice to be able to merge the part-files into one output file on the local filesystem.
> So I've added a dfsshell feature that streams from all files in a directory to one output file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 19 08:09:25 2006
Return-Path: 
 <hadoop-dev-return-2613-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 60225 invoked from network); 19 Jul 2006 08:09:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 08:09:25 -0000
Received: (qmail 98919 invoked by uid 500); 19 Jul 2006 08:09:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98759 invoked by uid 500); 19 Jul 2006 08:09:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98746 invoked by uid 99); 19 Jul 2006 08:09:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 01:09:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 01:09:24 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EFD41714204
	for <hadoop-dev@lucene.apache.org>; Wed, 19 Jul 2006 08:07:14 +0000 (GMT)
Message-ID: <29747703.1153296434979.JavaMail.jira@brutus>
Date: Wed, 19 Jul 2006 01:07:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-370) TaskTracker startup fails if any
 mapred.local.dir entries don't exist
In-Reply-To: <2837861.1153246273875.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-370?page=comments#action_12422053 ] 
            
Doug Cutting commented on HADOOP-370:
-------------------------------------

I think a better way to fix this is to change the checkLocalDirs method to return the list of valid, writable local directories.  Then enoughFreeSpace() should iterate over this list.  That will ensure that all writable local drives have enough space.  Does this make sense?

> TaskTracker startup fails if any mapred.local.dir entries don't exist
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-370
>                 URL: http://issues.apache.org/jira/browse/HADOOP-370
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>         Environment: ~30 node cluster, various size/number of disks, CPUs, memory
>            Reporter: Bryan Pendleton
>         Attachments: fix-freespace-tasktracker-failure.txt
>
>
> This appears to have been introduced with the "check for enough free space" before startup.
> It's debatable how best to fix this bug. I will submit a patch which ignores directories for which the DF utility fails. This is letting me continue operation on my cluster (where the number of drives varies, so there are entries in mapred.local.dir for drives that aren't on all cluster nodes), but a cleaner solution is probably better. I'd lean towards "check for existence", and ignore the dir if it doesn't  - but don't depend on DF to fail, since DF could fail for other reasons without meaning you're out of disk space. I argue that a TaskTracker should start up if *all* directories that *can be written to* in the list have enough space. Otherwise, a failed drive per cluster machine means no work ever gets done.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 19 08:09:28 2006
Return-Path: 
 <hadoop-dev-return-2614-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 60305 invoked from network); 19 Jul 2006 08:09:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 08:09:28 -0000
Received: (qmail 99189 invoked by uid 500); 19 Jul 2006 08:09:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 99145 invoked by uid 500); 19 Jul 2006 08:09:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 99118 invoked by uid 99); 19 Jul 2006 08:09:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 01:09:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 01:09:26 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5A3E571428D
	for <hadoop-dev@lucene.apache.org>; Wed, 19 Jul 2006 08:07:17 +0000 (GMT)
Message-ID: <9930990.1153296437367.JavaMail.jira@brutus>
Date: Wed, 19 Jul 2006 01:07:17 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-54?page=all ]

Arun C Murthy reassigned HADOOP-54:
-----------------------------------

    Assignee: Arun C Murthy  (was: Michel Tourn)

 +1 for Owen's proposal.

 An unrelated issue: the 'append' method in SequenceFile.Writer is passed 2 Writables: key and value. The Writable interface doesn't have a 'getLength' interface. This means one would have to write out the key/value to a temporary buffer to actually figure out it's 'length'. The lengths are particularly relevant here to ensure that the key/value pair can be put into the keyBuffer/valueBuffer without violating the 'configured' maxBufferSize...

 To get around this issue: how about making the 'configured' bufferSize the 'lower_bound' instead of the 'upper_bound'? This will ensure we can write out the key/value and then check the buffer size, and if need be go ahead and compress etc. This will save the construction of the temporary buffer for getting the key/value lengths. Related gain: it's far simpler with this scheme to deal with outlier/rouge keys/values which are larger than bufferSize itself.

 Logical next step: make this 'bufferSize' configurable per SequenceFile, this will let applications control it depending on the sizes of their keys/values. I propose to introduce a new constructor with this as an argument for SequenceFile.Writer. This will then be written out as a part of the file-header (along with compression details) and the SequenceFile.Reader can pick this up and read accordingly. (Of course there will be a system-wide default if unspecified per file).

 Thoughts?

thanks,
Arun

 

> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.5.0
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 19 08:17:27 2006
Return-Path: 
 <hadoop-dev-return-2615-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 63669 invoked from network); 19 Jul 2006 08:17:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 08:17:27 -0000
Received: (qmail 10820 invoked by uid 500); 19 Jul 2006 08:17:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 10798 invoked by uid 500); 19 Jul 2006 08:17:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 10789 invoked by uid 99); 19 Jul 2006 08:17:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 01:17:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 01:17:26 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A6E60714219
	for <hadoop-dev@lucene.apache.org>; Wed, 19 Jul 2006 08:15:16 +0000 (GMT)
Message-ID: <9879491.1153296916681.JavaMail.jira@brutus>
Date: Wed, 19 Jul 2006 01:15:16 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-371) ant tar should package contrib jars
In-Reply-To: <22441907.1153248734143.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-371?page=comments#action_12422055 ] 
            
Doug Cutting commented on HADOOP-371:
-------------------------------------

I was thinking we should include the contrib jar files and documentation.  The jar files and readme files could go in something like:

 contrib/
    streaming/
      streaming.jar
      readme.txt

at the top level in the tar file.

The javadoc could be built into the main javadoc tree, but in a separate section, like Lucene:

http://lucene.apache.org/java/docs/api/overview-summary.html

Does this sound reasonable?

> ant tar should package contrib jars
> -----------------------------------
>
>                 Key: HADOOP-371
>                 URL: http://issues.apache.org/jira/browse/HADOOP-371
>             Project: Hadoop
>          Issue Type: Improvement
>            Reporter: Michel Tourn
>         Attachments: build.tarcontrib.patch
>
>
> From Hadoop-356:
> >I note that the contrib packages are not included in distributions (the "tar" target).  
> >They probably should be.  Michel, would you like to modify "tar" to include the contrib code?  
> >This should be done in a separate bug.
> OK.
> This packaging is done in target deploy-contrib.
> So I can just add a dependency to the top-level tar target:
> <!-- Make release tarball(s)                                               -->
> <target name="tar" depends="package, deploy-contrib">

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 19 08:26:45 2006
Return-Path: 
 <hadoop-dev-return-2616-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 65979 invoked from network); 19 Jul 2006 08:26:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 08:26:45 -0000
Received: (qmail 18282 invoked by uid 500); 19 Jul 2006 08:26:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 18122 invoked by uid 500); 19 Jul 2006 08:26:44 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 18112 invoked by uid 99); 19 Jul 2006 08:26:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 01:26:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [209.10.110.95] (HELO londo.swishmail.com) (209.10.110.95)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 01:26:43 -0700
Received: (qmail 79031 invoked by uid 89); 19 Jul 2006 08:26:21 -0000
Received: from unknown (HELO ?172.17.73.107?) (128.214.173.238)
  by londo.swishmail.com with SMTP; 19 Jul 2006 08:26:21 -0000
Message-ID: <44BDECBC.6050503@apache.org>
Date: Wed, 19 Jul 2006 11:26:36 +0300
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.4 (X11/20060615)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: [jira] Resolved: (HADOOP-356) Build and test hadoopStreaming
 nightly
References: <16396054.1153219154675.JavaMail.jira@brutus>
 <8839D56A-FBCB-4BDD-A9EF-6F1E570916FA@yahoo-inc.com>
In-Reply-To: <8839D56A-FBCB-4BDD-A9EF-6F1E570916FA@yahoo-inc.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Eric Baldeschwieler wrote:
> Should we start to produce more than one tar, so that we don't push all 
> contribs to all nodes all the time?

The tarball is not pushed, it's what's released.  It should include 
pre-built binaries for everything, I think.

We should probably define the core set of files that need to be sync'd, 
and change the bin/hadoop-daemon.sh script to sync just those.  Perhaps 
this should be specified in a config file, conf/hadoop-rsync-include, 
and the rsync command line in bin/hadoop-daemon.sh could be changed to 
specify --include-from this file.  We might also specify an excludes file.

Doug

From MAILER-DAEMON Wed Jul 19 08:59:25 2006
Return-Path: 
 <hadoop-dev-return-2617-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76928 invoked from network); 19 Jul 2006 08:59:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 08:59:25 -0000
Received: (qmail 68281 invoked by uid 500); 19 Jul 2006 08:59:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68255 invoked by uid 500); 19 Jul 2006 08:59:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68243 invoked by uid 99); 19 Jul 2006 08:59:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 01:59:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 01:59:24 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 403B041000D
	for <hadoop-dev@lucene.apache.org>; Wed, 19 Jul 2006 08:57:15 +0000 (GMT)
Message-ID: <13891893.1153299435260.JavaMail.jira@brutus>
Date: Wed, 19 Jul 2006 01:57:15 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-237) Standard set of Performance Metrics
 for Hadoop
In-Reply-To: <14919853.1148078609860.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-237?page=comments#action_12422058 ] 
            
Doug Cutting commented on HADOOP-237:
-------------------------------------

Milind, sorry to be a stickler here, but I think this still needs a bit more work.

The MetricsUtil class should be in the metrics package and just be named Metrics.  The create() method should be renamed createRecord(). This would make canonical use look something like:

MetricsRecord record = Metrics.createRecord("dfs", "datanode");
...
Metrics.report(record, "bytes-read", bytesRead);

Also, the javadoc in this class should be improved.  It should reference the (very good) javadoc of MetricsRecord, MetricsContext, etc.  This will be most folks first point of contact with the metrics package.  Parameters and return types should be well documented (you can mostly cut and paste these from MetricsRecord).

> Standard set of Performance Metrics for Hadoop
> ----------------------------------------------
>
>                 Key: HADOOP-237
>                 URL: http://issues.apache.org/jira/browse/HADOOP-237
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: metrics
>    Affects Versions: 0.3.0
>         Environment: All
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>         Attachments: hadoop-metrics.patch
>
>
> I am starting to use Hadoop's shiny new Metrics API to publish performance (and other) Metrics of running jobs and other daemons.
> Which performance metrics are people interested in seeing ? If possible, please group them according to modules, such as map-reduce, dfs, general-cluster-related etc. I will follow this process:
> 1. collect this list
> 2. assess feasibility of obtaining metric
> 3. assign context/record/metrics names
> 4. seek approval for names
> 5. instrument the code.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 19 09:03:26 2006
Return-Path: 
 <hadoop-dev-return-2618-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 80209 invoked from network); 19 Jul 2006 09:03:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 09:03:26 -0000
Received: (qmail 74437 invoked by uid 500); 19 Jul 2006 09:03:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 74278 invoked by uid 500); 19 Jul 2006 09:03:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 74269 invoked by uid 99); 19 Jul 2006 09:03:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 02:03:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 02:03:25 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E428D41000D
	for <hadoop-dev@lucene.apache.org>; Wed, 19 Jul 2006 09:01:15 +0000 (GMT)
Message-ID: <25447653.1153299675931.JavaMail.jira@brutus>
Date: Wed, 19 Jul 2006 02:01:15 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-47) include records/second and
 bytes/second in  task reports
In-Reply-To: <579254540.1140560374384.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-47?page=all ]

Doug Cutting resolved HADOOP-47.
--------------------------------

    Resolution: Duplicate

> include records/second and bytes/second in  task reports
> --------------------------------------------------------
>
>                 Key: HADOOP-47
>                 URL: http://issues.apache.org/jira/browse/HADOOP-47
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>
> TaskReport should include fields for total records processed, total bytes processed and total seconds of task execution.  These should also be reported in the web ui, as bytes/second and records/second.  The job display could sum these to report total bytes/second and records/second for map and reduce.  Better yet would be a graph displaying the total rates over the course of the job...

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 19 09:36:27 2006
Return-Path: 
 <hadoop-dev-return-2619-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92480 invoked from network); 19 Jul 2006 09:36:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 09:36:27 -0000
Received: (qmail 32435 invoked by uid 500); 19 Jul 2006 09:36:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 32282 invoked by uid 500); 19 Jul 2006 09:36:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 32273 invoked by uid 99); 19 Jul 2006 09:36:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 02:36:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 02:36:26 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7E08E41000E
	for <hadoop-dev@lucene.apache.org>; Wed, 19 Jul 2006 09:34:16 +0000 (GMT)
Message-ID: <32597479.1153301656513.JavaMail.jira@brutus>
Date: Wed, 19 Jul 2006 02:34:16 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-54?page=comments#action_12422072 ] 
            
Arun C Murthy commented on HADOOP-54:
-------------------------------------

Actually we have an 'oops' here... afaics there isn't a way to even construct
  <key1-length><key1-bytes><key2-length><key2-bytes><key3-length><key3-bytes> 
  <value1-length><value1-bytes><value2-length><value2-bytes><value3-length><value3-bytes> 
without constructing a temporary object from the Writable key/value, since there isn't a way to figure out the key/value length at all.

I feel constructing a temporary object will be huge overhead i.e. introduce an extra copy from Writable to temp-buffer and then from Writable/tempBuffer to keyBuffer/valueBuffer for compression... 

Any way to do this without an extra copy?

-*-*-

One alternative I can think of to avoid the extra copy is slightly convoluted, though this still won't be able to construct Owen's proposal as-is. (Will look very similar to my older proposal)

Maintain 2 auxillary arrays which keep track of actual key/value lengths. The way to maintain lengths is to compute difference in size of keyBuffer/valBuffer before and after insertion of each key/value and then store that difference.

E.g. 

int oldKeyBufferLength = keyBuffer.length();
key.write(keyBuffer);
int newKeyBufferLength = keyBuffer.length();
keySizes.insert(newKeyBufferLength - oldKeyBufferLength); //save the last key size

// same for 'val'

if((newKeyBufferLength + newValueBufferLength) > minBufferSize) {   //lower_bound instead of 'higher_bound'

  // Compress both keyBuffer and valueBuffer
  // Write out keySizes array to disk in zero-compressed format
  // Write out valueSizes array to disk in zero-compressed format
  // Write out compressedKeyBufferSize in zero-compressed format
  // Write out compressed keyBuffer
  // Write out compressedValueBufferSize in zero-compressed format
  // Write out compressed valueBuffer
  // Reset keyBuffer, valueBuffer, keySizes and valueSizes

} else {
  // Done
  return;
}


-*-*-


Appreciate any inputs/alternatives/refinements...

thanks,
Arun

> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.5.0
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 19 09:43:25 2006
Return-Path: 
 <hadoop-dev-return-2620-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 95257 invoked from network); 19 Jul 2006 09:43:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 09:43:25 -0000
Received: (qmail 39663 invoked by uid 500); 19 Jul 2006 09:43:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 39497 invoked by uid 500); 19 Jul 2006 09:43:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 39488 invoked by uid 99); 19 Jul 2006 09:43:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 02:43:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 02:43:24 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EDCDB41000D
	for <hadoop-dev@lucene.apache.org>; Wed, 19 Jul 2006 09:41:14 +0000 (GMT)
Message-ID: <32944429.1153302074971.JavaMail.jira@brutus>
Date: Wed, 19 Jul 2006 02:41:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-347) Implement HDFS content browsing
 interface
In-Reply-To: <17227613.1152182310090.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-347?page=all ]

Doug Cutting resolved HADOOP-347.
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks!

> Implement HDFS content browsing interface
> -----------------------------------------
>
>                 Key: HADOOP-347
>                 URL: http://issues.apache.org/jira/browse/HADOOP-347
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.1.0, 0.2.0, 0.1.1, 0.3.0, 0.4.0, 0.2.1, 0.3.1, 0.3.2
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>             Fix For: 0.5.0
>
>         Attachments: content_browsing.patch
>
>
> Implement HDFS content browsing interface over HTTP. Clients would connect to the NameNode and this would send a redirect to a random DataNode. The DataNode, via dfs client, would proxy to namenode for metadata browsing and to other datanodes for content. One can also view the local blocks on any DataNode. Head, Tail will be provided as shorthands for viewing the first block and the last block of a file. 
> For full file viewing, the data displayed per HTTP request will be a block with a PREV/NEXT link. The block size for viewing can be a configurable parameter (the user sets it via the web browser) to the HTTP server (e.g., 256 KB can be the default block size for viewing files).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 19 10:06:28 2006
Return-Path: 
 <hadoop-dev-return-2621-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 3151 invoked from network); 19 Jul 2006 10:06:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 10:06:28 -0000
Received: (qmail 73034 invoked by uid 500); 19 Jul 2006 10:06:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72964 invoked by uid 500); 19 Jul 2006 10:06:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72899 invoked by uid 99); 19 Jul 2006 10:06:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 03:06:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 03:06:26 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B72DD410010
	for <hadoop-dev@lucene.apache.org>; Wed, 19 Jul 2006 10:04:16 +0000 (GMT)
Message-ID: <32582907.1153303456747.JavaMail.jira@brutus>
Date: Wed, 19 Jul 2006 03:04:16 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-54?page=comments#action_12422077 ] 
            
Doug Cutting commented on HADOOP-54:
------------------------------------

> Any way to do this without an extra copy?

There's no way to length-prefix things without knowing the length, and the length is only known after the value is serialized.  I doubt the extra copy will significantly affect overall write performance.

Note that folks who use the raw API, directly passing bytes rather than Writables, should not suffer the extra-copy penalty when adding items to a file.

> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.5.0
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 19 10:48:26 2006
Return-Path: 
 <hadoop-dev-return-2622-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 19239 invoked from network); 19 Jul 2006 10:48:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 10:48:26 -0000
Received: (qmail 59919 invoked by uid 500); 19 Jul 2006 10:48:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 59899 invoked by uid 500); 19 Jul 2006 10:48:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 59890 invoked by uid 99); 19 Jul 2006 10:48:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 03:48:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 03:48:24 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E93737141F4
	for <hadoop-dev@lucene.apache.org>; Wed, 19 Jul 2006 10:46:14 +0000 (GMT)
Message-ID: <19884348.1153305974952.JavaMail.jira@brutus>
Date: Wed, 19 Jul 2006 03:46:14 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-347) Implement HDFS content browsing
 interface
In-Reply-To: <17227613.1152182310090.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-347?page=comments#action_12422085 ] 
            
Devaraj Das commented on HADOOP-347:
------------------------------------

By the way, in order to use this, hit the namenode's jetty (default port 50070). You will see the links from there.

> Implement HDFS content browsing interface
> -----------------------------------------
>
>                 Key: HADOOP-347
>                 URL: http://issues.apache.org/jira/browse/HADOOP-347
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.1.0, 0.2.0, 0.1.1, 0.3.0, 0.4.0, 0.2.1, 0.3.1, 0.3.2
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>             Fix For: 0.5.0
>
>         Attachments: content_browsing.patch
>
>
> Implement HDFS content browsing interface over HTTP. Clients would connect to the NameNode and this would send a redirect to a random DataNode. The DataNode, via dfs client, would proxy to namenode for metadata browsing and to other datanodes for content. One can also view the local blocks on any DataNode. Head, Tail will be provided as shorthands for viewing the first block and the last block of a file. 
> For full file viewing, the data displayed per HTTP request will be a block with a PREV/NEXT link. The block size for viewing can be a configurable parameter (the user sets it via the web browser) to the HTTP server (e.g., 256 KB can be the default block size for viewing files).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 19 11:03:26 2006
Return-Path: 
 <hadoop-dev-return-2623-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 22501 invoked from network); 19 Jul 2006 11:03:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 11:03:26 -0000
Received: (qmail 86122 invoked by uid 500); 19 Jul 2006 11:03:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 85958 invoked by uid 500); 19 Jul 2006 11:03:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 85948 invoked by uid 99); 19 Jul 2006 11:03:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 04:03:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 04:03:25 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6C9D37141F4
	for <hadoop-dev@lucene.apache.org>; Wed, 19 Jul 2006 11:01:15 +0000 (GMT)
Message-ID: <442433.1153306875442.JavaMail.jira@brutus>
Date: Wed, 19 Jul 2006 04:01:15 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-351) Remove Jetty dependency
In-Reply-To: <8704461.1152224729846.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-351?page=all ]

Devaraj Das updated HADOOP-351:
-------------------------------

    Attachment: nio_socketstream.patch

Modified Server.java to remove Jetty dependency

> Remove Jetty dependency
> -----------------------
>
>                 Key: HADOOP-351
>                 URL: http://issues.apache.org/jira/browse/HADOOP-351
>             Project: Hadoop
>          Issue Type: Wish
>          Components: ipc
>            Reporter: Barry Kaplan
>         Assigned To: Devaraj Das
>         Attachments: nio_socketstream.patch
>
>
> Somewhat related to HADOOP-349, it would be nice to not have a Jetty dependency for those of us embedding Hadoop within our own web applications. In particular the Server object is using SocketChannelOutputStream from the Jetty code base. It seems to me that for an object like this it would be better to simply have a Hadoop version of a blocking output stream on an nio channel if necessary vs. using the Jetty version requiring a Hadoop user's to package yet another jar file (and all the complications that are associated with that).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 19 11:58:31 2006
Return-Path: 
 <hadoop-dev-return-2624-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 42232 invoked from network); 19 Jul 2006 11:58:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 11:58:31 -0000
Received: (qmail 6110 invoked by uid 500); 19 Jul 2006 11:58:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 6084 invoked by uid 500); 19 Jul 2006 11:58:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 6075 invoked by uid 99); 19 Jul 2006 11:58:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 04:58:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 04:58:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 548D47141F4
	for <hadoop-dev@lucene.apache.org>; Wed, 19 Jul 2006 11:56:15 +0000 (GMT)
Message-ID: <28426037.1153310175343.JavaMail.jira@brutus>
Date: Wed, 19 Jul 2006 04:56:15 -0700 (PDT)
From: "Anonymous (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-369) Added ability to copy all part-files
 into one output file
In-Reply-To: <6586655.1153240813983.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-369?page=all ]


    Attachment: copymerge.patch

> Added ability to copy all part-files into one output file
> ---------------------------------------------------------
>
>                 Key: HADOOP-369
>                 URL: http://issues.apache.org/jira/browse/HADOOP-369
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Johan Oskarson
>            Priority: Trivial
>         Attachments: copymerge.patch, copymerge.patch
>
>
> Since we use the hadoop output in non-hadoop applications it's nice to be able to merge the part-files into one output file on the local filesystem.
> So I've added a dfsshell feature that streams from all files in a directory to one output file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 19 12:00:28 2006
Return-Path: 
 <hadoop-dev-return-2625-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 42856 invoked from network); 19 Jul 2006 12:00:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 12:00:28 -0000
Received: (qmail 10095 invoked by uid 500); 19 Jul 2006 12:00:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 10071 invoked by uid 500); 19 Jul 2006 12:00:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 10062 invoked by uid 99); 19 Jul 2006 12:00:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 05:00:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 05:00:27 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B3ED841000E
	for <hadoop-dev@lucene.apache.org>; Wed, 19 Jul 2006 11:58:17 +0000 (GMT)
Message-ID: <26199722.1153310297734.JavaMail.jira@brutus>
Date: Wed, 19 Jul 2006 04:58:17 -0700 (PDT)
From: "Johan Oskarson (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-369) Added ability to copy all part-files
 into one output file
In-Reply-To: <6586655.1153240813983.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-369?page=all ]

Johan Oskarson updated HADOOP-369:
----------------------------------

    Attachment: dircat.patch

I've added two patches, one is the requested cat feature (cat whole directory)

However, a simple test shows that this is very very much slower then saving it through a filestream.
Why I do not know :)

So I've changed the copymerge patch as suggested and uploaded the new patch.

> Added ability to copy all part-files into one output file
> ---------------------------------------------------------
>
>                 Key: HADOOP-369
>                 URL: http://issues.apache.org/jira/browse/HADOOP-369
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Johan Oskarson
>            Priority: Trivial
>         Attachments: copymerge.patch, copymerge.patch, dircat.patch
>
>
> Since we use the hadoop output in non-hadoop applications it's nice to be able to merge the part-files into one output file on the local filesystem.
> So I've added a dfsshell feature that streams from all files in a directory to one output file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 19 12:15:31 2006
Return-Path: 
 <hadoop-dev-return-2626-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46864 invoked from network); 19 Jul 2006 12:15:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 12:15:31 -0000
Received: (qmail 40945 invoked by uid 500); 19 Jul 2006 12:15:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40917 invoked by uid 500); 19 Jul 2006 12:15:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 40899 invoked by uid 99); 19 Jul 2006 12:15:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 05:15:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 05:15:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 69C83714204
	for <hadoop-dev@lucene.apache.org>; Wed, 19 Jul 2006 12:13:15 +0000 (GMT)
Message-ID: <32673261.1153311195430.JavaMail.jira@brutus>
Date: Wed, 19 Jul 2006 05:13:15 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-351) Remove Jetty dependency
In-Reply-To: <8704461.1152224729846.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-351?page=all ]

Doug Cutting resolved HADOOP-351.
---------------------------------

    Fix Version/s: 0.5.0
       Resolution: Fixed

I just committed this.  Thanks!

> Remove Jetty dependency
> -----------------------
>
>                 Key: HADOOP-351
>                 URL: http://issues.apache.org/jira/browse/HADOOP-351
>             Project: Hadoop
>          Issue Type: Wish
>          Components: ipc
>            Reporter: Barry Kaplan
>         Assigned To: Devaraj Das
>             Fix For: 0.5.0
>
>         Attachments: nio_socketstream.patch
>
>
> Somewhat related to HADOOP-349, it would be nice to not have a Jetty dependency for those of us embedding Hadoop within our own web applications. In particular the Server object is using SocketChannelOutputStream from the Jetty code base. It seems to me that for an object like this it would be better to simply have a Hadoop version of a blocking output stream on an nio channel if necessary vs. using the Jetty version requiring a Hadoop user's to package yet another jar file (and all the complications that are associated with that).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 19 13:06:40 2006
Return-Path: 
 <hadoop-dev-return-2627-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 61426 invoked from network); 19 Jul 2006 13:06:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 13:06:40 -0000
Received: (qmail 36434 invoked by uid 500); 19 Jul 2006 13:06:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 36412 invoked by uid 500); 19 Jul 2006 13:06:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 36403 invoked by uid 99); 19 Jul 2006 13:06:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 06:06:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [84.96.21.10] (HELO trinity.anyware-tech.com) (84.96.21.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 06:06:36 -0700
Received: from localhost (localhost [127.0.0.1])
	by trinity.anyware-tech.com (Postfix) with ESMTP id 9B96040015B
	for <hadoop-dev@lucene.apache.org>; Wed, 19 Jul 2006 15:06:14 +0200 (CEST)
Received: from trinity.anyware-tech.com ([127.0.0.1])
	by localhost (trinity.anyware-tech.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 26769-01-3 for <hadoop-dev@lucene.apache.org>;
	Wed, 19 Jul 2006 15:06:02 +0200 (CEST)
Received: from [10.0.1.45] (cali.anyware [10.0.1.45])
	by trinity.anyware-tech.com (Postfix) with ESMTP id 64D6A40009F
	for <hadoop-dev@lucene.apache.org>; Wed, 19 Jul 2006 15:05:57 +0200 (CEST)
Message-ID: <44BE2E45.8090408@anyware-tech.com>
Date: Wed, 19 Jul 2006 15:06:13 +0200
From: Thomas FRIOL <thomas@anyware-tech.com>
User-Agent: Thunderbird 1.5.0.4 (X11/20060615)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Why part files are not merged ?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Scanned: Debian amavisd-new at anyware-tech.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi all,

Each reduce task produces one part file in the DFS. Why the job tracker 
does not merge them at the end of the job to produce only one file.
It seems to me that it could be better to process results.

I think there is certainly a reason for the actual behavior but I really 
need to get results of my map reduce job in a single file. Maybe someone 
can give me a clue to solve my problem.

Thanks for any help.

Thomas.

-- 
Thomas FRIOL
Dveloppeur Eclipse / Eclipse Developer
Solutions & Technologies
ANYWARE TECHNOLOGIES
Tl      : +33 (0)561 000 653
Portable : +33 (0)609 704 810
Fax      : +33 (0)561 005 146
www.anyware-tech.com


From MAILER-DAEMON Wed Jul 19 16:32:27 2006
Return-Path: 
 <hadoop-dev-return-2628-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84039 invoked from network); 19 Jul 2006 16:32:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 16:32:27 -0000
Received: (qmail 99910 invoked by uid 500); 19 Jul 2006 16:32:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 99878 invoked by uid 500); 19 Jul 2006 16:32:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 99868 invoked by uid 99); 19 Jul 2006 16:32:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 09:32:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 09:32:25 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C3FC071421B
	for <hadoop-dev@lucene.apache.org>; Wed, 19 Jul 2006 16:30:15 +0000 (GMT)
Message-ID: <5545438.1153326615800.JavaMail.jira@brutus>
Date: Wed, 19 Jul 2006 09:30:15 -0700 (PDT)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-54?page=comments#action_12422183 ] 
            
eric baldeschwieler commented on HADOOP-54:
-------------------------------------------

I think this is enough of an argument to return to a format with key lengths segregated though.  We proposed interleaved because we thought it would be simpler to code.  Since it clearly will not be, we might as sell segregate lengths.  This has the extra advantage that it will compress better (because we will be grouping like data together).

I think this brings us full circle back to arun's original proposal (but all wiser).  So I'm now proposing:

| sync-marker 
| numPairs (delta compressed int)
| KeyLenBlockCompressedLen (delta compressed int)
| KeyBlockCompressedLen  (delta compressed int)
| ValueLenBlockCompressedLen  (delta compressed int)
| ValueBlockCompressedLen  (delta compressed int)
| keyLengths... (gzipped & delta compressed)
| keys... (gzipped or custom compressed)
| valueLengths... (gzipped & delta compressed)
| values... (gzipped or custom compressed)

This will allow one to scan the keys and skip the values if desired.  It will yield pretty good compression.  Its not that hard to understand if well documented...

--

I like arun's suggestion of considering the target block size the minimum.  That will keep things simpler.

I suggest we proceed this way, unless anyone objects?


> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.5.0
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 19 16:59:26 2006
Return-Path: 
 <hadoop-dev-return-2629-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96947 invoked from network); 19 Jul 2006 16:59:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 16:59:26 -0000
Received: (qmail 61963 invoked by uid 500); 19 Jul 2006 16:59:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 61942 invoked by uid 500); 19 Jul 2006 16:59:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 61933 invoked by uid 99); 19 Jul 2006 16:59:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 09:59:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 09:59:24 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B9E897141F4
	for <hadoop-dev@lucene.apache.org>; Wed, 19 Jul 2006 16:57:14 +0000 (GMT)
Message-ID: <21351651.1153328234759.JavaMail.jira@brutus>
Date: Wed, 19 Jul 2006 09:57:14 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-347) Implement HDFS content browsing
 interface
In-Reply-To: <17227613.1152182310090.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-347?page=all ]

Devaraj Das updated HADOOP-347:
-------------------------------

    Attachment: fsnamesystem.patch

Fixed a problem whereby negative values of (randomly generated) array indices were not checked. This is an incremental patch over what has already been committed. Sorry for overlooking this.

> Implement HDFS content browsing interface
> -----------------------------------------
>
>                 Key: HADOOP-347
>                 URL: http://issues.apache.org/jira/browse/HADOOP-347
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.1.0, 0.2.0, 0.1.1, 0.3.0, 0.4.0, 0.2.1, 0.3.1, 0.3.2
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>             Fix For: 0.5.0
>
>         Attachments: content_browsing.patch, fsnamesystem.patch
>
>
> Implement HDFS content browsing interface over HTTP. Clients would connect to the NameNode and this would send a redirect to a random DataNode. The DataNode, via dfs client, would proxy to namenode for metadata browsing and to other datanodes for content. One can also view the local blocks on any DataNode. Head, Tail will be provided as shorthands for viewing the first block and the last block of a file. 
> For full file viewing, the data displayed per HTTP request will be a block with a PREV/NEXT link. The block size for viewing can be a configurable parameter (the user sets it via the web browser) to the HTTP server (e.g., 256 KB can be the default block size for viewing files).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 19 17:49:28 2006
Return-Path: 
 <hadoop-dev-return-2630-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20431 invoked from network); 19 Jul 2006 17:49:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 17:49:28 -0000
Received: (qmail 63280 invoked by uid 500); 19 Jul 2006 17:49:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63231 invoked by uid 500); 19 Jul 2006 17:49:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63191 invoked by uid 99); 19 Jul 2006 17:49:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 10:49:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 10:49:25 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C5AC8714219
	for <hadoop-dev@lucene.apache.org>; Wed, 19 Jul 2006 17:47:15 +0000 (GMT)
Message-ID: <10312016.1153331235807.JavaMail.jira@brutus>
Date: Wed, 19 Jul 2006 10:47:15 -0700 (PDT)
From: "Bryan Pendleton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-370) TaskTracker startup fails if any
 mapred.local.dir entries don't exist
In-Reply-To: <2837861.1153246273875.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-370?page=comments#action_12422206 ] 
            
Bryan Pendleton commented on HADOOP-370:
----------------------------------------

Yeah, that sounds like a better approach. I'd be happy to implement that in the patch instead, modulo a dangling issue:

Should "good dirs" (ie, the new return value for checkLocalDirs) be cached? Implication: after initialization, no further checking for writability of a directory, and the directory list can only get smaller during an instance of a daemon. The alternative is, as I'm seeing with my current patch, a lot of extraneous log output that isn't really valuable.


> TaskTracker startup fails if any mapred.local.dir entries don't exist
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-370
>                 URL: http://issues.apache.org/jira/browse/HADOOP-370
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>         Environment: ~30 node cluster, various size/number of disks, CPUs, memory
>            Reporter: Bryan Pendleton
>         Attachments: fix-freespace-tasktracker-failure.txt
>
>
> This appears to have been introduced with the "check for enough free space" before startup.
> It's debatable how best to fix this bug. I will submit a patch which ignores directories for which the DF utility fails. This is letting me continue operation on my cluster (where the number of drives varies, so there are entries in mapred.local.dir for drives that aren't on all cluster nodes), but a cleaner solution is probably better. I'd lean towards "check for existence", and ignore the dir if it doesn't  - but don't depend on DF to fail, since DF could fail for other reasons without meaning you're out of disk space. I argue that a TaskTracker should start up if *all* directories that *can be written to* in the list have enough space. Otherwise, a failed drive per cluster machine means no work ever gets done.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 19 17:57:59 2006
Return-Path: 
 <hadoop-dev-return-2631-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 24604 invoked from network); 19 Jul 2006 17:57:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 17:57:59 -0000
Received: (qmail 88565 invoked by uid 500); 19 Jul 2006 17:57:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 88542 invoked by uid 500); 19 Jul 2006 17:57:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88532 invoked by uid 99); 19 Jul 2006 17:57:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 10:57:58 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of bpendleton@gmail.com designates
 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 10:57:57 -0700
Received: by py-out-1112.google.com with SMTP id f25so726022pyf
        for <hadoop-dev@lucene.apache.org>;
 Wed, 19 Jul 2006 10:57:37 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=gBsw7DnBykZ48OUcezAc/FhivMSmJUZo82Bfe4yGj1unpJjc6CuMvLJViTJMDBHMLJHaoDbkEzVxMDoy/19Kj3DVu9sHRcfJDbL1COn7VX9U2whUWsHiPSENONeU/P8ORzGw789SjqIk5+nLhElybe+ub7RT5u84ILbsGyhKabo=
Received: by 10.35.109.2 with SMTP id l2mr1487935pym;
        Wed, 19 Jul 2006 10:57:36 -0700 (PDT)
Received: by 10.35.58.4 with HTTP; Wed, 19 Jul 2006 10:57:36 -0700 (PDT)
Message-ID: <1bf79d3e0607191057j52c54cc1v5e863e2ec6ce3146@mail.gmail.com>
Date: Wed, 19 Jul 2006 10:57:36 -0700
From: "Bryan A. Pendleton" <bp@geekdom.net>
Sender: bpendleton@gmail.com
To: hadoop-dev@lucene.apache.org
Subject: Re: Why part files are not merged ?
In-Reply-To: <44BE2E45.8090408@anyware-tech.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_Part_66818_20137521.1153331856349"
References: <44BE2E45.8090408@anyware-tech.com>
X-Google-Sender-Auth: d7b09e4acc8375b3
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_66818_20137521.1153331856349
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: base64
Content-Disposition: inline

VGhlIGltcGxpZWQgcmVhc29uIGlzIHRoYXQgaXQgcHV0cyBhIGJvdHRsZW5lY2sgb24gSS9PIC0g
dG8gd3JpdGUgb25lIGZpbGUKKHdpdGggY3VycmVudCBIREZTIHNlbWFudGljcyksIHRoZSBieXRl
cyBmb3IgdGhhdCBmaWxlIGFsbCBoYXZlIHRvIHBhc3MKdGhyb3VnaCBhIHNpbmdsZSBob3N0LiBT
bywgeW91IGNhbiBoYXZlIE4gcmVkdWNlcyB3cml0aW5nIHRvIEhERlMgaW4KcGFyYWxsZWwsIG9y
IHlvdSBjYW4gaGF2ZSBvbmUgb3V0cHV0IGZpbGUgd3JpdHRlbiBmcm9tIG9uZSBtYWNoaW5lLiBJ
dCBhbHNvCm1lYW5zLCBpbiB0aGUgY3VycmVudCBpbXBsZW1lbnRhdGlvbiwgdGhhdCB5b3UgbXVz
dCBoYXZlIGVudW9naCByb29tICh4MiBvcgp4MyBhdCB0aGlzIHBvaW50KSBmb3IgdGhhdCB3aG9s
ZSBvdXRwdXQgZmlsZSBvbiBhIHNpbmdsZSBkcml2ZSBvZiBhIHNpbmdsZQptYWNoaW5lLgoKVW5s
ZXNzIHlvdXIgb3V0cHV0IGlzIG5vdCBiZWluZyByZWFkIGZyb20gSmF2YSwgaXQncyBwcmV0dHkg
ZWFzeSB0byBtYWtlCnlvdXIgbmV4dCBwcm9jZXNzIHJlYWQgYWxsIG9mIHRoZSBvdXRwdXQgZmls
ZXMgaW4gcGFyYWxsZWwuIEkndmUgZXZlbiBkb25lCnRoaXMgd2hlbiBnZW5lcmF0aW5nIE1hcEZp
bGVzIGZyb20gam9icy4uLiB0aGVyZSBpcyBjb2RlIGluIHBsYWNlIHRvIG1ha2UKdGhpcyB3b3Jr
IGFscmVhZHkuIEFsdGVybmF0ZWx5LCB5b3UgY2FuIGZvcmNlIHRoZXJlIHRvIGJlIGEgc2luZ2xl
IHJlZHVjZXIKaW4gdGhlIGpvYiBzZXR0aW5ncy4KCk9uIDcvMTkvMDYsIFRob21hcyBGUklPTCA8
dGhvbWFzQGFueXdhcmUtdGVjaC5jb20+IHdyb3RlOgo+Cj4gSGkgYWxsLAo+Cj4gRWFjaCByZWR1
Y2UgdGFzayBwcm9kdWNlcyBvbmUgcGFydCBmaWxlIGluIHRoZSBERlMuIFdoeSB0aGUgam9iIHRy
YWNrZXIKPiBkb2VzIG5vdCBtZXJnZSB0aGVtIGF0IHRoZSBlbmQgb2YgdGhlIGpvYiB0byBwcm9k
dWNlIG9ubHkgb25lIGZpbGUuCj4gSXQgc2VlbXMgdG8gbWUgdGhhdCBpdCBjb3VsZCBiZSBiZXR0
ZXIgdG8gcHJvY2VzcyByZXN1bHRzLgo+Cj4gSSB0aGluayB0aGVyZSBpcyBjZXJ0YWlubHkgYSBy
ZWFzb24gZm9yIHRoZSBhY3R1YWwgYmVoYXZpb3IgYnV0IEkgcmVhbGx5Cj4gbmVlZCB0byBnZXQg
cmVzdWx0cyBvZiBteSBtYXAgcmVkdWNlIGpvYiBpbiBhIHNpbmdsZSBmaWxlLiBNYXliZSBzb21l
b25lCj4gY2FuIGdpdmUgbWUgYSBjbHVlIHRvIHNvbHZlIG15IHByb2JsZW0uCj4KPiBUaGFua3Mg
Zm9yIGFueSBoZWxwLgo+Cj4gVGhvbWFzLgo+Cj4gLS0KPiBUaG9tYXMgRlJJT0wKPiBEw6l2ZWxv
cHBldXIgRWNsaXBzZSAvIEVjbGlwc2UgRGV2ZWxvcGVyCj4gU29sdXRpb25zICYgVGVjaG5vbG9n
aWVzCj4gQU5ZV0FSRSBURUNITk9MT0dJRVMKPiBUw6lsICAgICAgOiArMzMgKDApNTYxIDAwMCA2
NTMKPiBQb3J0YWJsZSA6ICszMyAoMCk2MDkgNzA0IDgxMAo+IEZheCAgICAgIDogKzMzICgwKTU2
MSAwMDUgMTQ2Cj4gd3d3LmFueXdhcmUtdGVjaC5jb20KPgo+CgoKLS0gCkJyeWFuIEEuIFBlbmRs
ZXRvbgpQaDogKDg3NykgZ2Vlay0xLWJwCg==
------=_Part_66818_20137521.1153331856349--

From MAILER-DAEMON Wed Jul 19 18:05:29 2006
Return-Path: 
 <hadoop-dev-return-2632-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 28410 invoked from network); 19 Jul 2006 18:05:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 18:05:29 -0000
Received: (qmail 5504 invoked by uid 500); 19 Jul 2006 18:05:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 5471 invoked by uid 500); 19 Jul 2006 18:05:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 5417 invoked by uid 99); 19 Jul 2006 18:05:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 11:05:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 11:05:26 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E2D7B714283
	for <hadoop-dev@lucene.apache.org>; Wed, 19 Jul 2006 18:03:15 +0000 (GMT)
Message-ID: <23897633.1153332195926.JavaMail.jira@brutus>
Date: Wed, 19 Jul 2006 11:03:15 -0700 (PDT)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-372) should allow to specify different
 inputformat classes for different input dirs for Map/Reduce jobs
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

should allow to specify different inputformat classes for different input dirs for Map/Reduce jobs
--------------------------------------------------------------------------------------------------

                 Key: HADOOP-372
                 URL: http://issues.apache.org/jira/browse/HADOOP-372
             Project: Hadoop
          Issue Type: New Feature
          Components: mapred
    Affects Versions: 0.4.0
         Environment: all
            Reporter: Runping Qi


Right now, the user can specify multiple input directories for a map reduce job. 
However, the files under all the directories are assumed to be in the same format, 
with the same key/value classes. This proves to be  a serious limit in many situations. 
Here is an example. Suppose I have three simple tables: 
one has URLs and their rank values (page ranks), 
another has URLs and their classification values, 
and the third one has the URL meta data such as crawl status, last crawl time, etc. 
Suppose now I need a job to generate a list of URLs to be crawled next. 
The decision depends on the info in all the three tables.
Right now, there is no easy way to accomplish this.

However, this job can be done if the framework allows to specify different inputformats for different input dirs.
Suppose my three tables are in the following directory respectively: rankTable, classificationTable. and metaDataTable. 
If we extend JobConf class with the following method (as Owen suggested to me):
    addInputPath(aPath, anInputFormatClass, anInputKeyClass, anInputValueClass)
Then I can specify my job as follows:
    addInputPath(rankTable, SequenceFileInputFormat.class, UTF8.class, DoubleWritable.class)
    addInputPath(classificationTable, TextInputFormat.class, UTF8,class, UTF8.class)
    addInputPath(metaDataTable, SequenceFileInputFormat.class, UTF8.class, MyRecord.class)
If an input directory is added through the current API, it will have the same meaning as it is now. 
Thus this extension will not affect any applications that do not need this new feature.

It is relatively easy for the M/R framework to create an appropriate record reader for a map task based on the above information.
And that is the only change needed for supporting this extension.







-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 19 18:13:25 2006
Return-Path: 
 <hadoop-dev-return-2633-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31113 invoked from network); 19 Jul 2006 18:13:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 18:13:25 -0000
Received: (qmail 21697 invoked by uid 500); 19 Jul 2006 18:13:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 21675 invoked by uid 500); 19 Jul 2006 18:13:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 21666 invoked by uid 99); 19 Jul 2006 18:13:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 11:13:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 11:13:24 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B605A714204
	for <hadoop-dev@lucene.apache.org>; Wed, 19 Jul 2006 18:11:14 +0000 (GMT)
Message-ID: <29991983.1153332674743.JavaMail.jira@brutus>
Date: Wed, 19 Jul 2006 11:11:14 -0700 (PDT)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-371) ant tar should package contrib jars
In-Reply-To: <22441907.1153248734143.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-371?page=comments#action_12422217 ] 
            
Michel Tourn commented on HADOOP-371:
-------------------------------------

OK to keep docs and readme separate in the tarball package.

But I thought that the way you get all the code on the CLASSPATH in  bin/hadoop:
is by placing the contrib jar-s along with the main hadoop.jar..




> ant tar should package contrib jars
> -----------------------------------
>
>                 Key: HADOOP-371
>                 URL: http://issues.apache.org/jira/browse/HADOOP-371
>             Project: Hadoop
>          Issue Type: Improvement
>            Reporter: Michel Tourn
>         Attachments: build.tarcontrib.patch
>
>
> From Hadoop-356:
> >I note that the contrib packages are not included in distributions (the "tar" target).  
> >They probably should be.  Michel, would you like to modify "tar" to include the contrib code?  
> >This should be done in a separate bug.
> OK.
> This packaging is done in target deploy-contrib.
> So I can just add a dependency to the top-level tar target:
> <!-- Make release tarball(s)                                               -->
> <target name="tar" depends="package, deploy-contrib">

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 19 19:39:26 2006
Return-Path: 
 <hadoop-dev-return-2634-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67781 invoked from network); 19 Jul 2006 19:39:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 19:39:26 -0000
Received: (qmail 75391 invoked by uid 500); 19 Jul 2006 19:39:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75231 invoked by uid 500); 19 Jul 2006 19:39:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75222 invoked by uid 99); 19 Jul 2006 19:39:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 12:39:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 12:39:25 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 446897141F5
	for <hadoop-dev@lucene.apache.org>; Wed, 19 Jul 2006 19:37:15 +0000 (GMT)
Message-ID: <10433306.1153337835277.JavaMail.jira@brutus>
Date: Wed, 19 Jul 2006 12:37:15 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-237) Standard set of Performance Metrics
 for Hadoop
In-Reply-To: <14919853.1148078609860.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-237?page=all ]

Milind Bhandarkar updated HADOOP-237:
-------------------------------------

    Attachment:     (was: hadoop-metrics.patch)

> Standard set of Performance Metrics for Hadoop
> ----------------------------------------------
>
>                 Key: HADOOP-237
>                 URL: http://issues.apache.org/jira/browse/HADOOP-237
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: metrics
>    Affects Versions: 0.3.0
>         Environment: All
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>         Attachments: hadoop-metrics.patch
>
>
> I am starting to use Hadoop's shiny new Metrics API to publish performance (and other) Metrics of running jobs and other daemons.
> Which performance metrics are people interested in seeing ? If possible, please group them according to modules, such as map-reduce, dfs, general-cluster-related etc. I will follow this process:
> 1. collect this list
> 2. assess feasibility of obtaining metric
> 3. assign context/record/metrics names
> 4. seek approval for names
> 5. instrument the code.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 19 19:39:33 2006
Return-Path: 
 <hadoop-dev-return-2635-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67816 invoked from network); 19 Jul 2006 19:39:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 19:39:33 -0000
Received: (qmail 75439 invoked by uid 500); 19 Jul 2006 19:39:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75421 invoked by uid 500); 19 Jul 2006 19:39:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75412 invoked by uid 99); 19 Jul 2006 19:39:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 12:39:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 12:39:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C1CE5714283
	for <hadoop-dev@lucene.apache.org>; Wed, 19 Jul 2006 19:37:16 +0000 (GMT)
Message-ID: <28829010.1153337836791.JavaMail.jira@brutus>
Date: Wed, 19 Jul 2006 12:37:16 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-237) Standard set of Performance Metrics
 for Hadoop
In-Reply-To: <14919853.1148078609860.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-237?page=all ]

Milind Bhandarkar updated HADOOP-237:
-------------------------------------

    Attachment: hadoop-metrics.patch

Doug, I have incorporated the suggested changes, and attached the patch.

> Standard set of Performance Metrics for Hadoop
> ----------------------------------------------
>
>                 Key: HADOOP-237
>                 URL: http://issues.apache.org/jira/browse/HADOOP-237
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: metrics
>    Affects Versions: 0.3.0
>         Environment: All
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>         Attachments: hadoop-metrics.patch
>
>
> I am starting to use Hadoop's shiny new Metrics API to publish performance (and other) Metrics of running jobs and other daemons.
> Which performance metrics are people interested in seeing ? If possible, please group them according to modules, such as map-reduce, dfs, general-cluster-related etc. I will follow this process:
> 1. collect this list
> 2. assess feasibility of obtaining metric
> 3. assign context/record/metrics names
> 4. seek approval for names
> 5. instrument the code.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 19 21:22:30 2006
Return-Path: 
 <hadoop-dev-return-2636-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 6498 invoked from network); 19 Jul 2006 21:22:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 21:22:30 -0000
Received: (qmail 57604 invoked by uid 500); 19 Jul 2006 21:22:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 57566 invoked by uid 500); 19 Jul 2006 21:22:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 57555 invoked by uid 99); 19 Jul 2006 21:22:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 14:22:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 14:22:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 023D271421B
	for <hadoop-dev@lucene.apache.org>; Wed, 19 Jul 2006 21:20:18 +0000 (GMT)
Message-ID: <18976114.1153344018005.JavaMail.jira@brutus>
Date: Wed, 19 Jul 2006 14:20:18 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-155) Add a conf dir parameter to the
 scripts
In-Reply-To: <15786097.1145564465714.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-155?page=all ]

Mahadev konar reassigned HADOOP-155:
------------------------------------

    Assignee: Milind Bhandarkar  (was: Mahadev konar)

> Add a conf dir parameter to the scripts
> ---------------------------------------
>
>                 Key: HADOOP-155
>                 URL: http://issues.apache.org/jira/browse/HADOOP-155
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: conf
>    Affects Versions: 0.2.0
>            Reporter: Owen O'Malley
>         Assigned To: Milind Bhandarkar
>
> We'd like a conf_dir parameter on the startup scripts (ie. "-c <confdif>"). In particular, it would be nice if it propagated down from hadoop-daemons.sh to slaves.sh to hadoop-daemon.sh using the command line rather than using the ssh -o SendEnv=HADOOP_CONF_DIR, which is not supported in many environments.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 19 23:29:25 2006
Return-Path: 
 <hadoop-dev-return-2637-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 60800 invoked from network); 19 Jul 2006 23:29:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 23:29:25 -0000
Received: (qmail 87422 invoked by uid 500); 19 Jul 2006 23:29:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 87401 invoked by uid 500); 19 Jul 2006 23:29:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 87392 invoked by uid 99); 19 Jul 2006 23:29:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 16:29:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 16:29:24 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DA93741000B
	for <hadoop-dev@lucene.apache.org>; Wed, 19 Jul 2006 23:27:13 +0000 (GMT)
Message-ID: <19322325.1153351633892.JavaMail.jira@brutus>
Date: Wed, 19 Jul 2006 16:27:13 -0700 (PDT)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-373) Some calls to mkdirs do not check
 return value
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Some calls to mkdirs do not check return value
----------------------------------------------

                 Key: HADOOP-373
                 URL: http://issues.apache.org/jira/browse/HADOOP-373
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
            Reporter: Wendy Chien


Some calls to mkdirs do not check if mkdirs failed.  

Arun noticed this while looking at HADOOP-281.  Since this issue is actually a separate issue from the mkdirs implementation issue of HADOOP-281, I created a new bug for it.   

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Jul 20 09:36:31 2006
Return-Path: 
 <hadoop-dev-return-2638-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32208 invoked from network); 20 Jul 2006 09:36:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2006 09:36:31 -0000
Received: (qmail 23015 invoked by uid 500); 20 Jul 2006 09:36:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 22985 invoked by uid 500); 20 Jul 2006 09:36:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22976 invoked by uid 99); 20 Jul 2006 09:36:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 02:36:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 02:36:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 77A28410016
	for <hadoop-dev@lucene.apache.org>; Thu, 20 Jul 2006 09:34:18 +0000 (GMT)
Message-ID: <1537020.1153388058487.JavaMail.jira@brutus>
Date: Thu, 20 Jul 2006 02:34:18 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-54?page=comments#action_12422374 ] 
            
Doug Cutting commented on HADOOP-54:
------------------------------------

Re documentation: perhaps we should add file-format documentation to the javadoc as a part of this change.  This could look something like Lucene's file-formats documentation (except simpler).  That mixes a pseudo-formal BNF-like syntax with commentary:

http://lucene.apache.org/java/docs/fileformats.html

This should link to other javadoc to describe things like the zero-compressed int format.

Eric's proposal looks good to me.  I assume zero-compressed ints are meant most places he says 'delta compressed'.  Is that right?  It may make sense to delta compress the lists of key and value lengths, but it probably does not make sense to delta compress numPairs and the block lengths.

> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.5.0
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Jul 20 09:46:30 2006
Return-Path: 
 <hadoop-dev-return-2639-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 35552 invoked from network); 20 Jul 2006 09:46:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2006 09:46:30 -0000
Received: (qmail 35527 invoked by uid 500); 20 Jul 2006 09:46:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 35498 invoked by uid 500); 20 Jul 2006 09:46:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 35489 invoked by uid 99); 20 Jul 2006 09:46:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 02:46:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 02:46:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4667341000F
	for <hadoop-dev@lucene.apache.org>; Thu, 20 Jul 2006 09:44:18 +0000 (GMT)
Message-ID: <19573723.1153388658285.JavaMail.jira@brutus>
Date: Thu, 20 Jul 2006 02:44:18 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-370) TaskTracker startup fails if any
 mapred.local.dir entries don't exist
In-Reply-To: <2837861.1153246273875.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-370?page=comments#action_12422378 ] 
            
Doug Cutting commented on HADOOP-370:
-------------------------------------

Yes, let's cache the "good dirs".  If a drive goes offline or becomes unwritable while a node is running, then we should start emitting warnings, but we should not warn more than once for drives that are offline or unwritable at startup.

> TaskTracker startup fails if any mapred.local.dir entries don't exist
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-370
>                 URL: http://issues.apache.org/jira/browse/HADOOP-370
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>         Environment: ~30 node cluster, various size/number of disks, CPUs, memory
>            Reporter: Bryan Pendleton
>         Attachments: fix-freespace-tasktracker-failure.txt
>
>
> This appears to have been introduced with the "check for enough free space" before startup.
> It's debatable how best to fix this bug. I will submit a patch which ignores directories for which the DF utility fails. This is letting me continue operation on my cluster (where the number of drives varies, so there are entries in mapred.local.dir for drives that aren't on all cluster nodes), but a cleaner solution is probably better. I'd lean towards "check for existence", and ignore the dir if it doesn't  - but don't depend on DF to fail, since DF could fail for other reasons without meaning you're out of disk space. I argue that a TaskTracker should start up if *all* directories that *can be written to* in the list have enough space. Otherwise, a failed drive per cluster machine means no work ever gets done.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Jul 20 10:04:28 2006
Return-Path: 
 <hadoop-dev-return-2640-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 39931 invoked from network); 20 Jul 2006 10:04:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2006 10:04:28 -0000
Received: (qmail 57281 invoked by uid 500); 20 Jul 2006 10:04:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 57126 invoked by uid 500); 20 Jul 2006 10:04:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 57116 invoked by uid 99); 20 Jul 2006 10:04:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 03:04:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 03:04:26 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B65C741000C
	for <hadoop-dev@lucene.apache.org>; Thu, 20 Jul 2006 10:02:15 +0000 (GMT)
Message-ID: <27330380.1153389735744.JavaMail.jira@brutus>
Date: Thu, 20 Jul 2006 03:02:15 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-54?page=all ]

Arun C Murthy updated HADOOP-54:
--------------------------------

    Attachment: VIntCompressionResults.txt

Here's a test run analysing compression of VInts (exported from recordio).

Essentially we get almost 50% savings (either with zlib/gzip) of compressed-VInts v/s uncompressed raw integers on disk (4bytes per int) ... 

Sounds like a good reason to go ahead with Eric's proposal to compress not only keys/values but also keyLengthsBlock/valueLengthsBlock? I'll go ahead with this for now unless anyone objects...

thanks,
Arun



> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.5.0
>
>         Attachments: VIntCompressionResults.txt
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Jul 20 10:16:29 2006
Return-Path: 
 <hadoop-dev-return-2641-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43849 invoked from network); 20 Jul 2006 10:16:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2006 10:16:29 -0000
Received: (qmail 82828 invoked by uid 500); 20 Jul 2006 10:16:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 82805 invoked by uid 500); 20 Jul 2006 10:16:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 82776 invoked by uid 99); 20 Jul 2006 10:16:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 03:16:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 03:16:26 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B0A6341000D
	for <hadoop-dev@lucene.apache.org>; Thu, 20 Jul 2006 10:14:15 +0000 (GMT)
Message-ID: <11602785.1153390455721.JavaMail.jira@brutus>
Date: Thu, 20 Jul 2006 03:14:15 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-372) should allow to specify different
 inputformat classes for different input dirs for Map/Reduce jobs
In-Reply-To: <23897633.1153332195926.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-372?page=comments#action_12422385 ] 
            
Doug Cutting commented on HADOOP-372:
-------------------------------------

Can you provide more details?  Is the intent for the mapred.input.format.class property to become multivalued, a parallel list to mapred.input.dir, and when the latter is longer than the former, the first (or last?) input format is used for unmatched entries?  I can imagine how MapTask might create its keys, values and a RecordReader, but how would getSplits() and checkInputDirectories() work?

Another approach to implementing this is to write an InputFormat that wraps keys and/or values from files of different types in ObjectWritable.  Then map() methods unwrap, introspect and cast.  With your approach map methods still need to introspect and cache, this just adds the wrapper.

To eliminate the wrapper we'd need to move the getInputKeyClass() and getInputValueClass() methods to RecordReader.  These are only called in MapRunner.java, when a RecordReader is already available, so this would be an easy change, and the default implementation could be back-compatible, accessing the job.

That's a simpler approach, no?  Just add files with different keys and value types, and let the types in the files drive things rather than having to declare them up front.

> should allow to specify different inputformat classes for different input dirs for Map/Reduce jobs
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-372
>                 URL: http://issues.apache.org/jira/browse/HADOOP-372
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.4.0
>         Environment: all
>            Reporter: Runping Qi
>
> Right now, the user can specify multiple input directories for a map reduce job. 
> However, the files under all the directories are assumed to be in the same format, 
> with the same key/value classes. This proves to be  a serious limit in many situations. 
> Here is an example. Suppose I have three simple tables: 
> one has URLs and their rank values (page ranks), 
> another has URLs and their classification values, 
> and the third one has the URL meta data such as crawl status, last crawl time, etc. 
> Suppose now I need a job to generate a list of URLs to be crawled next. 
> The decision depends on the info in all the three tables.
> Right now, there is no easy way to accomplish this.
> However, this job can be done if the framework allows to specify different inputformats for different input dirs.
> Suppose my three tables are in the following directory respectively: rankTable, classificationTable. and metaDataTable. 
> If we extend JobConf class with the following method (as Owen suggested to me):
>     addInputPath(aPath, anInputFormatClass, anInputKeyClass, anInputValueClass)
> Then I can specify my job as follows:
>     addInputPath(rankTable, SequenceFileInputFormat.class, UTF8.class, DoubleWritable.class)
>     addInputPath(classificationTable, TextInputFormat.class, UTF8,class, UTF8.class)
>     addInputPath(metaDataTable, SequenceFileInputFormat.class, UTF8.class, MyRecord.class)
> If an input directory is added through the current API, it will have the same meaning as it is now. 
> Thus this extension will not affect any applications that do not need this new feature.
> It is relatively easy for the M/R framework to create an appropriate record reader for a map task based on the above information.
> And that is the only change needed for supporting this extension.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Jul 20 10:18:32 2006
Return-Path: 
 <hadoop-dev-return-2642-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 44365 invoked from network); 20 Jul 2006 10:18:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2006 10:18:32 -0000
Received: (qmail 85380 invoked by uid 500); 20 Jul 2006 10:18:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 85225 invoked by uid 500); 20 Jul 2006 10:18:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 85216 invoked by uid 99); 20 Jul 2006 10:18:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 03:18:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 03:18:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BD05141000B
	for <hadoop-dev@lucene.apache.org>; Thu, 20 Jul 2006 10:16:14 +0000 (GMT)
Message-ID: <28262134.1153390574771.JavaMail.jira@brutus>
Date: Thu, 20 Jul 2006 03:16:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-371) ant tar should package contrib jars
In-Reply-To: <22441907.1153248734143.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-371?page=comments#action_12422386 ] 
            
Doug Cutting commented on HADOOP-371:
-------------------------------------

> I thought that the way you get all the code on the CLASSPATH in bin/hadoop:
> is by placing the contrib jar-s along with the main hadoop.jar.

The contrib and example code should not be on the CLASSPATH by default, but rather should be run using the 'bin/hadoop jar ...' command.

> ant tar should package contrib jars
> -----------------------------------
>
>                 Key: HADOOP-371
>                 URL: http://issues.apache.org/jira/browse/HADOOP-371
>             Project: Hadoop
>          Issue Type: Improvement
>            Reporter: Michel Tourn
>         Attachments: build.tarcontrib.patch
>
>
> From Hadoop-356:
> >I note that the contrib packages are not included in distributions (the "tar" target).  
> >They probably should be.  Michel, would you like to modify "tar" to include the contrib code?  
> >This should be done in a separate bug.
> OK.
> This packaging is done in target deploy-contrib.
> So I can just add a dependency to the top-level tar target:
> <!-- Make release tarball(s)                                               -->
> <target name="tar" depends="package, deploy-contrib">

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Jul 20 10:34:32 2006
Return-Path: 
 <hadoop-dev-return-2643-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 47781 invoked from network); 20 Jul 2006 10:34:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2006 10:34:32 -0000
Received: (qmail 7742 invoked by uid 500); 20 Jul 2006 10:34:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 7705 invoked by uid 500); 20 Jul 2006 10:34:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 7696 invoked by uid 99); 20 Jul 2006 10:34:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 03:34:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 03:34:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 68A9D41000B
	for <hadoop-dev@lucene.apache.org>; Thu, 20 Jul 2006 10:32:15 +0000 (GMT)
Message-ID: <16551063.1153391535426.JavaMail.jira@brutus>
Date: Thu, 20 Jul 2006 03:32:15 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-237) Standard set of Performance Metrics
 for Hadoop
In-Reply-To: <14919853.1148078609860.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-237?page=all ]

Doug Cutting resolved HADOOP-237.
---------------------------------

    Fix Version/s: 0.5.0
       Resolution: Fixed

I just committed this.

It would be great to get some, e.g., Ganglia screenshots up on the wiki demoing this stuff.

An extra thanks to Milind for being patient and persistent on this one!


> Standard set of Performance Metrics for Hadoop
> ----------------------------------------------
>
>                 Key: HADOOP-237
>                 URL: http://issues.apache.org/jira/browse/HADOOP-237
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: metrics
>    Affects Versions: 0.3.0
>         Environment: All
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.5.0
>
>         Attachments: hadoop-metrics.patch
>
>
> I am starting to use Hadoop's shiny new Metrics API to publish performance (and other) Metrics of running jobs and other daemons.
> Which performance metrics are people interested in seeing ? If possible, please group them according to modules, such as map-reduce, dfs, general-cluster-related etc. I will follow this process:
> 1. collect this list
> 2. assess feasibility of obtaining metric
> 3. assign context/record/metrics names
> 4. seek approval for names
> 5. instrument the code.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Jul 20 10:43:28 2006
Return-Path: 
 <hadoop-dev-return-2644-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50268 invoked from network); 20 Jul 2006 10:43:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2006 10:43:28 -0000
Received: (qmail 27493 invoked by uid 500); 20 Jul 2006 10:43:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 27468 invoked by uid 500); 20 Jul 2006 10:43:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 27459 invoked by uid 99); 20 Jul 2006 10:43:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 03:43:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 03:43:27 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6F18741000C
	for <hadoop-dev@lucene.apache.org>; Thu, 20 Jul 2006 10:41:16 +0000 (GMT)
Message-ID: <26785112.1153392076452.JavaMail.jira@brutus>
Date: Thu, 20 Jul 2006 03:41:16 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-54?page=comments#action_12422393 ] 
            
Doug Cutting commented on HADOOP-54:
------------------------------------

Just to be clear, delta compression means something different to me than zero-compression.  The former represents a lists of integers with their differences, the latter elides leading zeros in integers.  They're not exclusive.  A sorted list of integers is smaller when delta compressed and zero-compressed.  A random list of integers is probably not helped by delta compression, but is helped by zero compression.  If values are in a narrow range, then delta compression may help.  Thus it may be useful for lists of key lengths and value lengths.

You provide some benchmarks showing the advantage of zero compression for random sequences.  Eric said delta compression, but I think he meant zero compression.  I agree that we should use zero compression everywhere.  The only question is if we should also use delta compression anywhere.


> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.5.0
>
>         Attachments: VIntCompressionResults.txt
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Jul 20 19:43:25 2006
Return-Path: 
 <hadoop-dev-return-2645-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37771 invoked from network); 20 Jul 2006 19:43:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2006 19:43:25 -0000
Received: (qmail 92210 invoked by uid 500); 20 Jul 2006 17:28:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 92072 invoked by uid 500); 20 Jul 2006 17:28:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 92041 invoked by uid 99); 20 Jul 2006 17:28:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 10:28:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 10:28:27 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B846441000C
	for <hadoop-dev@lucene.apache.org>; Thu, 20 Jul 2006 17:26:15 +0000 (GMT)
Message-ID: <8903709.1153416375752.JavaMail.jira@brutus>
Date: Thu, 20 Jul 2006 10:26:15 -0700 (PDT)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-54?page=comments#action_12422454 ] 
            
eric baldeschwieler commented on HADOOP-54:
-------------------------------------------

I meant zero compressed.  So we're all on the same page.

(Of course recording key & value lengths rather than offsets is delta compression, so we are actually doing both)


> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.5.0
>
>         Attachments: VIntCompressionResults.txt
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Jul 20 19:47:01 2006
Return-Path: 
 <hadoop-dev-return-2646-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43238 invoked from network); 20 Jul 2006 19:47:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2006 19:47:01 -0000
Received: (qmail 55038 invoked by uid 500); 20 Jul 2006 17:49:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55015 invoked by uid 500); 20 Jul 2006 17:49:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 54985 invoked by uid 99); 20 Jul 2006 17:49:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 10:49:39 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.126.228.149] (HELO rsmtp1.corp.yahoo.com)
 (207.126.228.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 10:49:38 -0700
Received: from [10.0.1.2] (snvvpn2-10-72-76-c192.corp.yahoo.com
 [10.72.76.192])
	(authenticated bits=0)
	by rsmtp1.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k6KHnBvv021837
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Thu, 20 Jul 2006 10:49:11 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=ccuFxpE6WZ/XSByP0KCq9P/2btBGe346YgnP9EFN9Kx/2siavwP2/2CC2mX7MxaI
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <9816562.1153272194749.JavaMail.jira@brutus>
References: <9816562.1153272194749.JavaMail.jira@brutus>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <7AADD231-FA67-45C0-AC86-E5689F58D850@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Eric Baldeschwieler <eric14@yahoo-inc.com>
Subject: Re: [jira] Commented: (HADOOP-286) copyFromLocal throws
 LeaseExpiredException
Date: Thu, 20 Jul 2006 10:49:10 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Why not significantly extend the lease period as well, to say 5  
minutes and have well behaved clients release the lease explicitly as  
soon as they can?

Clients could then try to renew starting at say 2.5 minutes and try  
every 30 seconds til 4.5 minutes have expired...

Seems like this would reduce overhead and have zero cost, since in  
general there is no conflict for these leases, right?

On Jul 18, 2006, at 6:23 PM, Konstantin Shvachko (JIRA) wrote:

>     [ http://issues.apache.org/jira/browse/HADOOP-286? 
> page=comments#action_12422012 ]
>
> Konstantin Shvachko commented on HADOOP-286:
> --------------------------------------------
>
> It looks like the following scenario leads to this exception.
> LEASE_PERIOD = 60 sec is a global constants defining for how long a  
> lease is issued.
> DFSClient.LeaseChecker renews this client leases every 30 sec =  
> LEASE_PERIOD/2.
> If the renewLease() fails then the client retries to renew every  
> second.
> One of the most popular reasons the renewLease() fails is because  
> it timeouts SocketTimeoutException.
> This happens when the namenode is busy, which is not unusual since  
> we lock it for each operation.
> The socket timeout is defined by the config parameter  
> "ipc.client.timeout", which is set to 60 sec in
> hadoop-default.xml That means that the renewLease() can last up to  
> 60 seconds and the lease will
> expire the next time the client tries to renew it, which could be  
> up to 90 seconds after the lease was
> created or renewed last time.
> So there are 2 simple solutions to the problem:
> 1) to increase LEASE_PERIOD
> 2) to decrease ipc.client.timeout
>
> A related problem is that DFSClient sends lease renew requests no  
> matter what every 30 seconds
> or less. It looks like the DFSClient has enough information to send  
> renew messages only if it really
> holds a lease. A simple solution would be avoid calling  renewLease 
> () when
> DFSClient.pendingCreates is empty.
> This could substantially decrease overall net traffic for map/reduce.
>
>
>
>> copyFromLocal throws LeaseExpiredException
>> ------------------------------------------
>>
>>                 Key: HADOOP-286
>>                 URL: http://issues.apache.org/jira/browse/HADOOP-286
>>             Project: Hadoop
>>          Issue Type: Bug
>>          Components: dfs
>>    Affects Versions: 0.3.0
>>         Environment: redhar linux
>>            Reporter: Runping Qi
>>
>> Loading local files to dfs through hadoop dfs -copyFromLocal  
>> failed due to the following exception:
>> copyFromLocal: org.apache.hadoop.dfs.LeaseExpiredException: No  
>> lease on output_crawled.1.txt
>>         at org.apache.hadoop.dfs.FSNamesystem.getAdditionalBlock 
>> (FSNamesystem.java:414)
>>         at org.apache.hadoop.dfs.NameNode.addBlock(NameNode.java:190)
>>         at sun.reflect.GeneratedMethodAccessor9.invoke(Unknown  
>> Source)
>>         at sun.reflect.DelegatingMethodAccessorImpl.invoke 
>> (DelegatingMethodAccessorImpl.java:25)
>>         at java.lang.reflect.Method.invoke(Method.java:585)
>>         at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:243)
>>         at org.apache.hadoop.ipc.Server$Handler.run(Server.java:231)
>
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the  
> administrators: http://issues.apache.org/jira/secure/ 
> Administrators.jspa
> -
> For more information on JIRA, see: http://www.atlassian.com/ 
> software/jira
>
>


From MAILER-DAEMON Thu Jul 20 19:48:27 2006
Return-Path: 
 <hadoop-dev-return-2647-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 45465 invoked from network); 20 Jul 2006 19:48:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2006 19:48:27 -0000
Received: (qmail 50778 invoked by uid 500); 20 Jul 2006 17:59:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 50760 invoked by uid 500); 20 Jul 2006 17:59:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 50718 invoked by uid 99); 20 Jul 2006 17:59:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 10:59:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 10:59:27 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E59C841000C
	for <hadoop-dev@lucene.apache.org>; Thu, 20 Jul 2006 17:57:15 +0000 (GMT)
Message-ID: <384025.1153418235938.JavaMail.jira@brutus>
Date: Thu, 20 Jul 2006 10:57:15 -0700 (PDT)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-281) dfs.FSDirectory.mkdirs can create
 sub-directories of a file!
In-Reply-To: <19818580.1149635189767.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-281?page=comments#action_12422458 ] 
            
eric baldeschwieler commented on HADOOP-281:
--------------------------------------------

Why not throw an exception on failure?  That seems like the more correct thing to do.  
Checking return codes for failure is so 20th century.

> dfs.FSDirectory.mkdirs can create sub-directories of a file!
> ------------------------------------------------------------
>
>                 Key: HADOOP-281
>                 URL: http://issues.apache.org/jira/browse/HADOOP-281
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.3.1
>            Reporter: Sameer Paranjpye
>             Fix For: 0.5.0
>
>         Attachments: addNode.patch, mkdirs.patch, TestDFSMkdirs.java
>
>
> dfs.FSDirectory.mkdirs will merrily adds children to a directory tree node without checking whether it represents a directory. So it is possible to create a subdirectories of a file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Jul 20 19:52:27 2006
Return-Path: 
 <hadoop-dev-return-2648-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 48943 invoked from network); 20 Jul 2006 19:52:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2006 19:52:27 -0000
Received: (qmail 55237 invoked by uid 500); 20 Jul 2006 18:17:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55104 invoked by uid 500); 20 Jul 2006 18:17:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55031 invoked by uid 99); 20 Jul 2006 18:17:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 11:17:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 11:17:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D993041000B
	for <hadoop-dev@lucene.apache.org>; Thu, 20 Jul 2006 18:15:13 +0000 (GMT)
Message-ID: <6262881.1153419313888.JavaMail.jira@brutus>
Date: Thu, 20 Jul 2006 11:15:13 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-374) native support for gzipped text files
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

native support for gzipped text files 
--------------------------------------

                 Key: HADOOP-374
                 URL: http://issues.apache.org/jira/browse/HADOOP-374
             Project: Hadoop
          Issue Type: New Feature
          Components: mapred
            Reporter: Yoram Arnon


in many cases it is convenient to store text files in dfs as gzip compressed files.
It would be good to have built in support for processing these files in a mapreduce job.

The getSplits implementation should return a single split per input file, ignoring the numSplits parameter.
One can probably subclass InputFormatBase, and the getSplits method can simply call listPaths() 
and then construct and return a single split per path returned.

The code for reading would look something like (courtesy of Vijay Murthy):

   public RecordReader getRecordReader(FileSystem fs, FileSplit split,
                                       JobConf job, Reporter reporter)
     throws IOException {
     final BufferedReader in =
       new BufferedReader(new InputStreamReader
         (new GZIPInputStream(fs.open(split.getPath()))));
     return new RecordReader() {
         long position;
         public synchronized boolean next(Writable key, Writable value)
           throws IOException {
           String line = in.readLine();
           if (line != null) {
             position += line.length();
             ((UTF8)value).set(line);
             return true;
           }
           return false;
         }
         public synchronized long getPos() throws IOException {
           return position;
         }
        public synchronized void close() throws IOException {
           in.close();
         }
       };
   }



-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Jul 20 19:55:18 2006
Return-Path: 
 <hadoop-dev-return-2649-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52830 invoked from network); 20 Jul 2006 19:55:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2006 19:55:18 -0000
Received: (qmail 86620 invoked by uid 500); 20 Jul 2006 18:38:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86574 invoked by uid 500); 20 Jul 2006 18:38:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86551 invoked by uid 99); 20 Jul 2006 18:38:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 11:38:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 11:38:26 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B2CEF41000B
	for <hadoop-dev@lucene.apache.org>; Thu, 20 Jul 2006 18:36:14 +0000 (GMT)
Message-ID: <9891001.1153420574729.JavaMail.jira@brutus>
Date: Thu, 20 Jul 2006 11:36:14 -0700 (PDT)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-372) should allow to specify different
 inputformat classes for different input dirs for Map/Reduce jobs
In-Reply-To: <23897633.1153332195926.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-372?page=comments#action_12422467 ] 
            
Runping Qi commented on HADOOP-372:
-----------------------------------


Doug,

My thought is to add a Map object to the JobConf class that keep track the explicit association between input path and the classes (inputformat, key and value). If there is no entry in the Map object for a Path, then the path is associated with the classes set through the current APIs (setInputFormatClass(), setInputKeyClass, setInputValueClass) (or default classes if they are not set). It will be convenient if the JobConf class provides APIs for getting/setting them:

    class getInputFormatClassForPath(Path p) 
    class getInputKeyClassForPath(Path p) 
    class getInputValueClassForPath(Path p) 

It is a good idea to move  the getInputKeyClass() and getInputValueClass() methods to RecordReader (and this should be more logical!).
This is easy to achieve since the implementation of the method  of InputFormat Interface 
               getRecordReader FileSystem fs, FileSplit split, JobConf job, Reporter reporter) 
has enough information to extract the key/value classes for the split.

It is also convenient to let Split class keep track for the inputformat, key, value class, so that we can get the right RecordReader for a given split.

In MapTask class, use  the following lines:
     final RecordReader rawIn =                  // open input
        split.getInputFormat().getRecordReader
        (FileSystem.get(job), split, job, reporter);
to replace
     final RecordReader rawIn =                  // open input
        job.getInputFormat().getRecordReader
        (FileSystem.get(job), split, job, reporter);

Finally, the the getSplits of InputFormatBase class should be changed to a static method, since it is independent of any concrete InputFormat implementation (and this is kind of necessary, since the exact inputformat will not be known prior to creating splits). The initTasks() method of 
JobInProgress class needs to make sure all the inputformat classes are loaded properly, or let getSplits() method to take care of it.

That should have covered most of the needed changes


> should allow to specify different inputformat classes for different input dirs for Map/Reduce jobs
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-372
>                 URL: http://issues.apache.org/jira/browse/HADOOP-372
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.4.0
>         Environment: all
>            Reporter: Runping Qi
>
> Right now, the user can specify multiple input directories for a map reduce job. 
> However, the files under all the directories are assumed to be in the same format, 
> with the same key/value classes. This proves to be  a serious limit in many situations. 
> Here is an example. Suppose I have three simple tables: 
> one has URLs and their rank values (page ranks), 
> another has URLs and their classification values, 
> and the third one has the URL meta data such as crawl status, last crawl time, etc. 
> Suppose now I need a job to generate a list of URLs to be crawled next. 
> The decision depends on the info in all the three tables.
> Right now, there is no easy way to accomplish this.
> However, this job can be done if the framework allows to specify different inputformats for different input dirs.
> Suppose my three tables are in the following directory respectively: rankTable, classificationTable. and metaDataTable. 
> If we extend JobConf class with the following method (as Owen suggested to me):
>     addInputPath(aPath, anInputFormatClass, anInputKeyClass, anInputValueClass)
> Then I can specify my job as follows:
>     addInputPath(rankTable, SequenceFileInputFormat.class, UTF8.class, DoubleWritable.class)
>     addInputPath(classificationTable, TextInputFormat.class, UTF8,class, UTF8.class)
>     addInputPath(metaDataTable, SequenceFileInputFormat.class, UTF8.class, MyRecord.class)
> If an input directory is added through the current API, it will have the same meaning as it is now. 
> Thus this extension will not affect any applications that do not need this new feature.
> It is relatively easy for the M/R framework to create an appropriate record reader for a map task based on the above information.
> And that is the only change needed for supporting this extension.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Jul 20 19:57:15 2006
Return-Path: 
 <hadoop-dev-return-2650-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 55772 invoked from network); 20 Jul 2006 19:57:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2006 19:57:15 -0000
Received: (qmail 65246 invoked by uid 500); 20 Jul 2006 18:54:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 65211 invoked by uid 500); 20 Jul 2006 18:54:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 65141 invoked by uid 99); 20 Jul 2006 18:54:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 11:54:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 11:54:27 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AA94F41000C
	for <hadoop-dev@lucene.apache.org>; Thu, 20 Jul 2006 18:52:15 +0000 (GMT)
Message-ID: <16381609.1153421535696.JavaMail.jira@brutus>
Date: Thu, 20 Jul 2006 11:52:15 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-54?page=comments#action_12422470 ] 
            
Arun C Murthy commented on HADOOP-54:
-------------------------------------

Sounds good... looks like we're all on the same page; I'll get going on this.

Appreciate both of you spending time... I'll also keep in mind Doug's thoughts on documenting the file-format for SequenceFile.

thanks!
Arun

> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.5.0
>
>         Attachments: VIntCompressionResults.txt
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Jul 20 19:59:47 2006
Return-Path: 
 <hadoop-dev-return-2651-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57916 invoked from network); 20 Jul 2006 19:59:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2006 19:59:47 -0000
Received: (qmail 87965 invoked by uid 500); 20 Jul 2006 19:08:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 87938 invoked by uid 500); 20 Jul 2006 19:08:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 87892 invoked by uid 99); 20 Jul 2006 19:08:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 12:08:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 12:08:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C5AD541000A
	for <hadoop-dev@lucene.apache.org>; Thu, 20 Jul 2006 19:06:14 +0000 (GMT)
Message-ID: <3419645.1153422374807.JavaMail.jira@brutus>
Date: Thu, 20 Jul 2006 12:06:14 -0700 (PDT)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-372) should allow to specify different
 inputformat classes for different input dirs for Map/Reduce jobs
In-Reply-To: <23897633.1153332195926.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-372?page=comments#action_12422473 ] 
            
Runping Qi commented on HADOOP-372:
-----------------------------------


Second thought about the stuff related to InputFormat after chatting with Owen. The getSplits should stay as non-static, but should take
a inputPathDir as a parameter. The initTasks should load all the 
classes and create an InputFormat object per class. For each inputPathDir, the initTasks should call the splits method against the corresponding InputFormat object, and finally union all the splits into one list.


> should allow to specify different inputformat classes for different input dirs for Map/Reduce jobs
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-372
>                 URL: http://issues.apache.org/jira/browse/HADOOP-372
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.4.0
>         Environment: all
>            Reporter: Runping Qi
>
> Right now, the user can specify multiple input directories for a map reduce job. 
> However, the files under all the directories are assumed to be in the same format, 
> with the same key/value classes. This proves to be  a serious limit in many situations. 
> Here is an example. Suppose I have three simple tables: 
> one has URLs and their rank values (page ranks), 
> another has URLs and their classification values, 
> and the third one has the URL meta data such as crawl status, last crawl time, etc. 
> Suppose now I need a job to generate a list of URLs to be crawled next. 
> The decision depends on the info in all the three tables.
> Right now, there is no easy way to accomplish this.
> However, this job can be done if the framework allows to specify different inputformats for different input dirs.
> Suppose my three tables are in the following directory respectively: rankTable, classificationTable. and metaDataTable. 
> If we extend JobConf class with the following method (as Owen suggested to me):
>     addInputPath(aPath, anInputFormatClass, anInputKeyClass, anInputValueClass)
> Then I can specify my job as follows:
>     addInputPath(rankTable, SequenceFileInputFormat.class, UTF8.class, DoubleWritable.class)
>     addInputPath(classificationTable, TextInputFormat.class, UTF8,class, UTF8.class)
>     addInputPath(metaDataTable, SequenceFileInputFormat.class, UTF8.class, MyRecord.class)
> If an input directory is added through the current API, it will have the same meaning as it is now. 
> Thus this extension will not affect any applications that do not need this new feature.
> It is relatively easy for the M/R framework to create an appropriate record reader for a map task based on the above information.
> And that is the only change needed for supporting this extension.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Jul 20 20:02:45 2006
Return-Path: 
 <hadoop-dev-return-2652-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 61165 invoked from network); 20 Jul 2006 20:02:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2006 20:02:45 -0000
Received: (qmail 74375 invoked by uid 500); 20 Jul 2006 19:20:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 74344 invoked by uid 500); 20 Jul 2006 19:20:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 74317 invoked by uid 99); 20 Jul 2006 19:20:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 12:20:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 12:20:26 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D5C0341000A
	for <hadoop-dev@lucene.apache.org>; Thu, 20 Jul 2006 19:18:14 +0000 (GMT)
Message-ID: <20042708.1153423094873.JavaMail.jira@brutus>
Date: Thu, 20 Jul 2006 12:18:14 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-344) TaskTracker passes incorrect file
 path to DF under cygwin
In-Reply-To: <3940552.1152137609862.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-344?page=comments#action_12422474 ] 
            
Konstantin Shvachko commented on HADOOP-344:
--------------------------------------------

This patch is getting stale.
Is there any reason for not committing this?
I'm getting FD related exceptions in my windows nightly build.


> TaskTracker passes incorrect file path to DF under cygwin
> ---------------------------------------------------------
>
>                 Key: HADOOP-344
>                 URL: http://issues.apache.org/jira/browse/HADOOP-344
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.4.0
>         Environment: Windows
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>         Attachments: TaskTrackerDF.patch
>
>
> The path that is passed is OS dependent. The File abstraction should be used in order to make it universal.
> I'm attaching a patch that does that.
> We might want to change the path parameter for DF. Making it File rather than String should prevent us from 
> bugs like that in the future.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Jul 20 21:16:30 2006
Return-Path: 
 <hadoop-dev-return-2653-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 98116 invoked from network); 20 Jul 2006 21:16:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2006 21:16:30 -0000
Received: (qmail 55349 invoked by uid 500); 20 Jul 2006 20:47:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55324 invoked by uid 500); 20 Jul 2006 20:47:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55311 invoked by uid 99); 20 Jul 2006 20:47:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 13:47:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 13:47:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B1FAC41000B
	for <hadoop-dev@lucene.apache.org>; Thu, 20 Jul 2006 20:45:14 +0000 (GMT)
Message-ID: <3813907.1153428314726.JavaMail.jira@brutus>
Date: Thu, 20 Jul 2006 13:45:14 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-281) dfs.FSDirectory.mkdirs can create
 sub-directories of a file!
In-Reply-To: <19818580.1149635189767.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-281?page=comments#action_12422485 ] 
            
Yoram Arnon commented on HADOOP-281:
------------------------------------

throwing an exception was suggested, but rejected in order not to change a public interface that may be (is) used by applications.

> dfs.FSDirectory.mkdirs can create sub-directories of a file!
> ------------------------------------------------------------
>
>                 Key: HADOOP-281
>                 URL: http://issues.apache.org/jira/browse/HADOOP-281
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.3.1
>            Reporter: Sameer Paranjpye
>             Fix For: 0.5.0
>
>         Attachments: addNode.patch, mkdirs.patch, TestDFSMkdirs.java
>
>
> dfs.FSDirectory.mkdirs will merrily adds children to a directory tree node without checking whether it represents a directory. So it is possible to create a subdirectories of a file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Jul 20 21:17:50 2006
Return-Path: 
 <hadoop-dev-return-2654-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99838 invoked from network); 20 Jul 2006 21:17:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2006 21:17:50 -0000
Received: (qmail 58666 invoked by uid 500); 20 Jul 2006 20:49:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58645 invoked by uid 500); 20 Jul 2006 20:49:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58636 invoked by uid 99); 20 Jul 2006 20:49:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 13:49:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 13:49:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 36BA641000A
	for <hadoop-dev@lucene.apache.org>; Thu, 20 Jul 2006 20:47:16 +0000 (GMT)
Message-ID: <11773522.1153428436221.JavaMail.jira@brutus>
Date: Thu, 20 Jul 2006 13:47:16 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-260) the start up scripts should take a
 command line parameter --config making it easy to run multiple hadoop
 installation on same machines
In-Reply-To: <32103939.1149014550880.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-260?page=comments#action_12422487 ] 
            
Milind Bhandarkar commented on HADOOP-260:
------------------------------------------

I have started looking at this issue. The original patch contains duplicate shell-script in all scripts. We could have separated it out as a function and included that file. However, in the meanwhile, the scripts have become portable across bourne-compatible shells, rather than being specific to bash. How do you propose we eliminate repeatition ?

> the start up scripts should take a command line parameter --config making it easy to run multiple hadoop installation on same machines
> --------------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-260
>                 URL: http://issues.apache.org/jira/browse/HADOOP-260
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.2.0
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>            Priority: Minor
>             Fix For: 0.5.0
>
>         Attachments: config.patch
>
>
> --config paramter would allow getting rid of SSH_OPTS.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Jul 20 21:58:19 2006
Return-Path: 
 <hadoop-dev-return-2655-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32462 invoked from network); 20 Jul 2006 21:58:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2006 21:58:19 -0000
Received: (qmail 3162 invoked by uid 500); 20 Jul 2006 21:57:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3082 invoked by uid 500); 20 Jul 2006 21:57:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 2976 invoked by uid 99); 20 Jul 2006 21:57:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 14:57:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 14:57:26 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BA5DE41000B
	for <hadoop-dev@lucene.apache.org>; Thu, 20 Jul 2006 21:55:14 +0000 (GMT)
Message-ID: <3240955.1153432514760.JavaMail.jira@brutus>
Date: Thu, 20 Jul 2006 14:55:14 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-281) dfs.FSDirectory.mkdirs can create
 sub-directories of a file!
In-Reply-To: <19818580.1149635189767.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-281?page=comments#action_12422504 ] 
            
Konstantin Shvachko commented on HADOOP-281:
--------------------------------------------

We can still return the correct boolean value to preserve public interface,
but throw an exception at the same time. The prototype is in place.
Or we can use a usual "trick" of deprecating the old mkdirs() , and define a
new one that is void.
Which mkdirs() is called by applications?
I believe mkdirs() is public since it is a part of the ClientProtocol interface.
There are other mkdirs() further in the NameNode data structure implementation.
Those should not be and are not called by anything outside the dfs project.
These mkdirs() don't need to be public at all, imo.


> dfs.FSDirectory.mkdirs can create sub-directories of a file!
> ------------------------------------------------------------
>
>                 Key: HADOOP-281
>                 URL: http://issues.apache.org/jira/browse/HADOOP-281
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.3.1
>            Reporter: Sameer Paranjpye
>             Fix For: 0.5.0
>
>         Attachments: addNode.patch, mkdirs.patch, TestDFSMkdirs.java
>
>
> dfs.FSDirectory.mkdirs will merrily adds children to a directory tree node without checking whether it represents a directory. So it is possible to create a subdirectories of a file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Jul 20 22:02:28 2006
Return-Path: 
 <hadoop-dev-return-2656-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 36900 invoked from network); 20 Jul 2006 22:02:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2006 22:02:28 -0000
Received: (qmail 28878 invoked by uid 500); 20 Jul 2006 22:02:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28864 invoked by uid 500); 20 Jul 2006 22:02:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28854 invoked by uid 99); 20 Jul 2006 22:02:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 15:02:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 15:02:26 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BA04D41000A
	for <hadoop-dev@lucene.apache.org>; Thu, 20 Jul 2006 22:00:14 +0000 (GMT)
Message-ID: <31197951.1153432814759.JavaMail.jira@brutus>
Date: Thu, 20 Jul 2006 15:00:14 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-286) copyFromLocal throws
 LeaseExpiredException
In-Reply-To: <19846443.1149699192499.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-286?page=all ]

Konstantin Shvachko updated HADOOP-286:
---------------------------------------

    Attachment: Lease.patch

This is a very simple patch that renews leases only when pendingCreates is not empty.
This prevents the client from sending lease renewal messages when the client
is not writing into dfs, say just reading or doing local stuff.
This should make the name node less busy.

I tried to change the ipc.client.timeout from 60 secs to 20 secs.
On my 3 node cluster everything worked fine.
On a large cluster the timeout was changed only for the DFSClient.
The LeaseExpiredException does not appear anymore.
But we need more statistics on that, especially with slower networks.
The ipc timeout is global for all ipc connections, so if we make it
smaller there is a risk that long lasting operations like block transfers
will start to timeout. I haven't seen it.
If anybody is willing to try 20 sec ipc timeout please post the results.
Failing early, and retrying might make things faster in general.

> copyFromLocal throws LeaseExpiredException
> ------------------------------------------
>
>                 Key: HADOOP-286
>                 URL: http://issues.apache.org/jira/browse/HADOOP-286
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.3.0
>         Environment: redhar linux
>            Reporter: Runping Qi
>         Attachments: Lease.patch
>
>
> Loading local files to dfs through hadoop dfs -copyFromLocal failed due to the following exception:
> copyFromLocal: org.apache.hadoop.dfs.LeaseExpiredException: No lease on output_crawled.1.txt
>         at org.apache.hadoop.dfs.FSNamesystem.getAdditionalBlock(FSNamesystem.java:414)
>         at org.apache.hadoop.dfs.NameNode.addBlock(NameNode.java:190)
>         at sun.reflect.GeneratedMethodAccessor9.invoke(Unknown Source)
>         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>         at java.lang.reflect.Method.invoke(Method.java:585)
>         at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:243)
>         at org.apache.hadoop.ipc.Server$Handler.run(Server.java:231)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Jul 20 22:23:17 2006
Return-Path: 
 <hadoop-dev-return-2657-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 45388 invoked from network); 20 Jul 2006 22:23:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2006 22:23:17 -0000
Received: (qmail 61574 invoked by uid 500); 20 Jul 2006 22:23:16 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 61546 invoked by uid 500); 20 Jul 2006 22:23:16 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 61537 invoked by uid 99); 20 Jul 2006 22:23:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 15:23:16 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.145.54.172] (HELO mrout2.yahoo.com) (216.145.54.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 15:23:14 -0700
Received: from [10.72.104.183] (enoughhot-lx.corp.yahoo.com [10.72.104.183])
	by mrout2.yahoo.com (8.13.6/8.13.6/y.out) with ESMTP id k6KMMYl1031779
	for <hadoop-dev@lucene.apache.org>; Thu, 20 Jul 2006 15:22:34 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=message-id:date:from:user-agent:x-accept-language:
	mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
	b=UuV/dCog08daH+GldmSCgCM/DgILy3C6oK5M+vrCBA4/9SflW0jKehPsSWsRvD58
Message-ID: <44C0022A.6060102@yahoo-inc.com>
Date: Thu, 20 Jul 2006 15:22:34 -0700
From: Konstantin Shvachko <shv@yahoo-inc.com>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: [jira] Commented: (HADOOP-286) copyFromLocal throws
 LeaseExpiredException
References: <9816562.1153272194749.JavaMail.jira@brutus>
 <7AADD231-FA67-45C0-AC86-E5689F58D850@yahoo-inc.com>
In-Reply-To: <7AADD231-FA67-45C0-AC86-E5689F58D850@yahoo-inc.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The problem with increasing the lease period is that in case of a task 
failure the task will retry,
and start creating the file it needs to create from scratch, which won't 
be possible since the file
under this name is still locked. So the task will need to wait 5 minutes 
instead of 1 to start the
retry (HADOOP-157). This is a slow down for map/reduce.


Eric Baldeschwieler wrote:

> Why not significantly extend the lease period as well, to say 5  
> minutes and have well behaved clients release the lease explicitly as  
> soon as they can?
>
> Clients could then try to renew starting at say 2.5 minutes and try  
> every 30 seconds til 4.5 minutes have expired...
>
> Seems like this would reduce overhead and have zero cost, since in  
> general there is no conflict for these leases, right?
>
> On Jul 18, 2006, at 6:23 PM, Konstantin Shvachko (JIRA) wrote:
>
>>     [ http://issues.apache.org/jira/browse/HADOOP-286? 
>> page=comments#action_12422012 ]
>>
>> Konstantin Shvachko commented on HADOOP-286:
>> --------------------------------------------
>>
>> It looks like the following scenario leads to this exception.
>> LEASE_PERIOD = 60 sec is a global constants defining for how long a  
>> lease is issued.
>> DFSClient.LeaseChecker renews this client leases every 30 sec =  
>> LEASE_PERIOD/2.
>> If the renewLease() fails then the client retries to renew every  
>> second.
>> One of the most popular reasons the renewLease() fails is because  it 
>> timeouts SocketTimeoutException.
>> This happens when the namenode is busy, which is not unusual since  
>> we lock it for each operation.
>> The socket timeout is defined by the config parameter  
>> "ipc.client.timeout", which is set to 60 sec in
>> hadoop-default.xml That means that the renewLease() can last up to  
>> 60 seconds and the lease will
>> expire the next time the client tries to renew it, which could be  up 
>> to 90 seconds after the lease was
>> created or renewed last time.
>> So there are 2 simple solutions to the problem:
>> 1) to increase LEASE_PERIOD
>> 2) to decrease ipc.client.timeout
>>
>> A related problem is that DFSClient sends lease renew requests no  
>> matter what every 30 seconds
>> or less. It looks like the DFSClient has enough information to send  
>> renew messages only if it really
>> holds a lease. A simple solution would be avoid calling  renewLease 
>> () when
>> DFSClient.pendingCreates is empty.
>> This could substantially decrease overall net traffic for map/reduce.
>>
>>
>>
>>> copyFromLocal throws LeaseExpiredException
>>> ------------------------------------------
>>>
>>>                 Key: HADOOP-286
>>>                 URL: http://issues.apache.org/jira/browse/HADOOP-286
>>>             Project: Hadoop
>>>          Issue Type: Bug
>>>          Components: dfs
>>>    Affects Versions: 0.3.0
>>>         Environment: redhar linux
>>>            Reporter: Runping Qi
>>>
>>> Loading local files to dfs through hadoop dfs -copyFromLocal  failed 
>>> due to the following exception:
>>> copyFromLocal: org.apache.hadoop.dfs.LeaseExpiredException: No  
>>> lease on output_crawled.1.txt
>>>         at org.apache.hadoop.dfs.FSNamesystem.getAdditionalBlock 
>>> (FSNamesystem.java:414)
>>>         at org.apache.hadoop.dfs.NameNode.addBlock(NameNode.java:190)
>>>         at sun.reflect.GeneratedMethodAccessor9.invoke(Unknown  Source)
>>>         at sun.reflect.DelegatingMethodAccessorImpl.invoke 
>>> (DelegatingMethodAccessorImpl.java:25)
>>>         at java.lang.reflect.Method.invoke(Method.java:585)
>>>         at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:243)
>>>         at org.apache.hadoop.ipc.Server$Handler.run(Server.java:231)
>>
>>
>> -- 
>> This message is automatically generated by JIRA.
>> -
>> If you think it was sent incorrectly contact one of the  
>> administrators: http://issues.apache.org/jira/secure/ 
>> Administrators.jspa
>> -
>> For more information on JIRA, see: http://www.atlassian.com/ 
>> software/jira
>>
>>
>
>
>


From MAILER-DAEMON Fri Jul 21 07:03:37 2006
Return-Path: 
 <hadoop-dev-return-2658-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91296 invoked from network); 21 Jul 2006 07:03:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 07:03:37 -0000
Received: (qmail 88959 invoked by uid 500); 21 Jul 2006 07:03:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 88877 invoked by uid 500); 21 Jul 2006 07:03:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88806 invoked by uid 99); 21 Jul 2006 07:03:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 00:03:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 00:03:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A815E41000E
	for <hadoop-dev@lucene.apache.org>; Fri, 21 Jul 2006 07:01:17 +0000 (GMT)
Message-ID: <9271527.1153465277685.JavaMail.jira@brutus>
Date: Fri, 21 Jul 2006 00:01:17 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-372) should allow to specify different
 inputformat classes for different input dirs for Map/Reduce jobs
In-Reply-To: <23897633.1153332195926.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-372?page=comments#action_12422565 ] 
            
Doug Cutting commented on HADOOP-372:
-------------------------------------

> My thought is to add a Map object to the JobConf class [ ...]

JobConf, underneath, is a Properties instance, mapping String->String.  Adding a map to it is a non-trivial extension to the configuration mechanism.

I didn't hear a response to my suggestion that we instead simply move the getInputKeyClass() and getInputValueClass() methods to RecordReader.  Would that not meet your needs?


> should allow to specify different inputformat classes for different input dirs for Map/Reduce jobs
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-372
>                 URL: http://issues.apache.org/jira/browse/HADOOP-372
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.4.0
>         Environment: all
>            Reporter: Runping Qi
>
> Right now, the user can specify multiple input directories for a map reduce job. 
> However, the files under all the directories are assumed to be in the same format, 
> with the same key/value classes. This proves to be  a serious limit in many situations. 
> Here is an example. Suppose I have three simple tables: 
> one has URLs and their rank values (page ranks), 
> another has URLs and their classification values, 
> and the third one has the URL meta data such as crawl status, last crawl time, etc. 
> Suppose now I need a job to generate a list of URLs to be crawled next. 
> The decision depends on the info in all the three tables.
> Right now, there is no easy way to accomplish this.
> However, this job can be done if the framework allows to specify different inputformats for different input dirs.
> Suppose my three tables are in the following directory respectively: rankTable, classificationTable. and metaDataTable. 
> If we extend JobConf class with the following method (as Owen suggested to me):
>     addInputPath(aPath, anInputFormatClass, anInputKeyClass, anInputValueClass)
> Then I can specify my job as follows:
>     addInputPath(rankTable, SequenceFileInputFormat.class, UTF8.class, DoubleWritable.class)
>     addInputPath(classificationTable, TextInputFormat.class, UTF8,class, UTF8.class)
>     addInputPath(metaDataTable, SequenceFileInputFormat.class, UTF8.class, MyRecord.class)
> If an input directory is added through the current API, it will have the same meaning as it is now. 
> Thus this extension will not affect any applications that do not need this new feature.
> It is relatively easy for the M/R framework to create an appropriate record reader for a map task based on the above information.
> And that is the only change needed for supporting this extension.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 21 07:13:29 2006
Return-Path: 
 <hadoop-dev-return-2659-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93386 invoked from network); 21 Jul 2006 07:13:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 07:13:29 -0000
Received: (qmail 10565 invoked by uid 500); 21 Jul 2006 07:13:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 10512 invoked by uid 500); 21 Jul 2006 07:13:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 10469 invoked by uid 99); 21 Jul 2006 07:13:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 00:13:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 00:13:27 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C263541000A
	for <hadoop-dev@lucene.apache.org>; Fri, 21 Jul 2006 07:11:14 +0000 (GMT)
Message-ID: <32009611.1153465874793.JavaMail.jira@brutus>
Date: Fri, 21 Jul 2006 00:11:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-344) TaskTracker passes incorrect file
 path to DF under cygwin
In-Reply-To: <3940552.1152137609862.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-344?page=comments#action_12422571 ] 
            
Doug Cutting commented on HADOOP-344:
-------------------------------------

Wouldn't it be better to change DF to do 'new File(path).getCanonicalPath()', rather than change the caller?

> TaskTracker passes incorrect file path to DF under cygwin
> ---------------------------------------------------------
>
>                 Key: HADOOP-344
>                 URL: http://issues.apache.org/jira/browse/HADOOP-344
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.4.0
>         Environment: Windows
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>         Attachments: TaskTrackerDF.patch
>
>
> The path that is passed is OS dependent. The File abstraction should be used in order to make it universal.
> I'm attaching a patch that does that.
> We might want to change the path parameter for DF. Making it File rather than String should prevent us from 
> bugs like that in the future.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 21 08:52:35 2006
Return-Path: 
 <hadoop-dev-return-2660-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 39376 invoked from network); 21 Jul 2006 08:52:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 08:52:35 -0000
Received: (qmail 3238 invoked by uid 500); 21 Jul 2006 08:52:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3199 invoked by uid 500); 21 Jul 2006 08:52:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3190 invoked by uid 99); 21 Jul 2006 08:52:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 01:52:35 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.126.228.150] (HELO rsmtp2.corp.yahoo.com)
 (207.126.228.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 01:52:34 -0700
Received: from [10.0.1.2] (snvvpn2-10-72-76-c90.corp.yahoo.com [10.72.76.90])
	(authenticated bits=0)
	by rsmtp2.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k6L8qA3n049868
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Fri, 21 Jul 2006 01:52:10 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=PPGc9fSbCsS5kZviYYilqE+RLyg3Jhb5jyGQWxAZueOtEyQBlrRHgdUNtK0Rlyb/
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <44C0022A.6060102@yahoo-inc.com>
References: <9816562.1153272194749.JavaMail.jira@brutus>
 <7AADD231-FA67-45C0-AC86-E5689F58D850@yahoo-inc.com>
 <44C0022A.6060102@yahoo-inc.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <331ED54F-9FA7-48FE-A604-017CC54DA524@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Eric Baldeschwieler <eric14@yahoo-inc.com>
Subject: Re: [jira] Commented: (HADOOP-286) copyFromLocal throws
 LeaseExpiredException
Date: Fri, 21 Jul 2006 01:52:09 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

humm...

but this needs to be addressed for speculative execution anyway.  So  
this argument doesn't apply to well designed code.

This doesn't prove we do need to make the change...

On Jul 20, 2006, at 3:22 PM, Konstantin Shvachko wrote:

> The problem with increasing the lease period is that in case of a  
> task failure the task will retry,
> and start creating the file it needs to create from scratch, which  
> won't be possible since the file
> under this name is still locked. So the task will need to wait 5  
> minutes instead of 1 to start the
> retry (HADOOP-157). This is a slow down for map/reduce.
>
>
> Eric Baldeschwieler wrote:
>
>> Why not significantly extend the lease period as well, to say 5   
>> minutes and have well behaved clients release the lease explicitly  
>> as  soon as they can?
>>
>> Clients could then try to renew starting at say 2.5 minutes and  
>> try  every 30 seconds til 4.5 minutes have expired...
>>
>> Seems like this would reduce overhead and have zero cost, since  
>> in  general there is no conflict for these leases, right?
>>
>> On Jul 18, 2006, at 6:23 PM, Konstantin Shvachko (JIRA) wrote:
>>
>>>     [ http://issues.apache.org/jira/browse/HADOOP-286?  
>>> page=comments#action_12422012 ]
>>>
>>> Konstantin Shvachko commented on HADOOP-286:
>>> --------------------------------------------
>>>
>>> It looks like the following scenario leads to this exception.
>>> LEASE_PERIOD = 60 sec is a global constants defining for how long  
>>> a  lease is issued.
>>> DFSClient.LeaseChecker renews this client leases every 30 sec =   
>>> LEASE_PERIOD/2.
>>> If the renewLease() fails then the client retries to renew every   
>>> second.
>>> One of the most popular reasons the renewLease() fails is  
>>> because  it timeouts SocketTimeoutException.
>>> This happens when the namenode is busy, which is not unusual  
>>> since  we lock it for each operation.
>>> The socket timeout is defined by the config parameter   
>>> "ipc.client.timeout", which is set to 60 sec in
>>> hadoop-default.xml That means that the renewLease() can last up  
>>> to  60 seconds and the lease will
>>> expire the next time the client tries to renew it, which could  
>>> be  up to 90 seconds after the lease was
>>> created or renewed last time.
>>> So there are 2 simple solutions to the problem:
>>> 1) to increase LEASE_PERIOD
>>> 2) to decrease ipc.client.timeout
>>>
>>> A related problem is that DFSClient sends lease renew requests  
>>> no  matter what every 30 seconds
>>> or less. It looks like the DFSClient has enough information to  
>>> send  renew messages only if it really
>>> holds a lease. A simple solution would be avoid calling   
>>> renewLease () when
>>> DFSClient.pendingCreates is empty.
>>> This could substantially decrease overall net traffic for map/ 
>>> reduce.
>>>
>>>
>>>
>>>> copyFromLocal throws LeaseExpiredException
>>>> ------------------------------------------
>>>>
>>>>                 Key: HADOOP-286
>>>>                 URL: http://issues.apache.org/jira/browse/ 
>>>> HADOOP-286
>>>>             Project: Hadoop
>>>>          Issue Type: Bug
>>>>          Components: dfs
>>>>    Affects Versions: 0.3.0
>>>>         Environment: redhar linux
>>>>            Reporter: Runping Qi
>>>>
>>>> Loading local files to dfs through hadoop dfs -copyFromLocal   
>>>> failed due to the following exception:
>>>> copyFromLocal: org.apache.hadoop.dfs.LeaseExpiredException: No   
>>>> lease on output_crawled.1.txt
>>>>         at org.apache.hadoop.dfs.FSNamesystem.getAdditionalBlock  
>>>> (FSNamesystem.java:414)
>>>>         at org.apache.hadoop.dfs.NameNode.addBlock(NameNode.java: 
>>>> 190)
>>>>         at sun.reflect.GeneratedMethodAccessor9.invoke(Unknown   
>>>> Source)
>>>>         at sun.reflect.DelegatingMethodAccessorImpl.invoke  
>>>> (DelegatingMethodAccessorImpl.java:25)
>>>>         at java.lang.reflect.Method.invoke(Method.java:585)
>>>>         at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:243)
>>>>         at org.apache.hadoop.ipc.Server$Handler.run(Server.java: 
>>>> 231)
>>>
>>>
>>> -- 
>>> This message is automatically generated by JIRA.
>>> -
>>> If you think it was sent incorrectly contact one of the   
>>> administrators: http://issues.apache.org/jira/secure/  
>>> Administrators.jspa
>>> -
>>> For more information on JIRA, see: http://www.atlassian.com/  
>>> software/jira
>>>
>>>
>>
>>
>>
>


From MAILER-DAEMON Fri Jul 21 10:13:29 2006
Return-Path: 
 <hadoop-dev-return-2661-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67816 invoked from network); 21 Jul 2006 10:13:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 10:13:29 -0000
Received: (qmail 89136 invoked by uid 500); 21 Jul 2006 10:13:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 89111 invoked by uid 500); 21 Jul 2006 10:13:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 89093 invoked by uid 99); 21 Jul 2006 10:13:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 03:13:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 03:13:27 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B622141000B
	for <hadoop-dev@lucene.apache.org>; Fri, 21 Jul 2006 10:11:14 +0000 (GMT)
Message-ID: <18325623.1153476674743.JavaMail.jira@brutus>
Date: Fri, 21 Jul 2006 03:11:14 -0700 (PDT)
From: "Johan Oskarson (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-347) Implement HDFS content browsing
 interface
In-Reply-To: <17227613.1152182310090.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-347?page=comments#action_12422603 ] 
            
Johan Oskarson commented on HADOOP-347:
---------------------------------------

This patch is causing problems for me, if a computer have a second dfs data dir in the config it doesn't start properly because of:

Exception in thread "main" java.io.IOException: Problem starting http server
        at org.apache.hadoop.mapred.StatusHttpServer.start(StatusHttpServer.java:182)
        at org.apache.hadoop.dfs.DataNode.<init>(DataNode.java:170)
        at org.apache.hadoop.dfs.DataNode.makeInstanceForDir(DataNode.java:1045)
        at org.apache.hadoop.dfs.DataNode.run(DataNode.java:999)
        at org.apache.hadoop.dfs.DataNode.runAndWait(DataNode.java:1015)
        at org.apache.hadoop.dfs.DataNode.main(DataNode.java:1066)
Caused by: org.mortbay.util.MultiException[java.net.BindException: Address already in use]
        at org.mortbay.http.HttpServer.doStart(HttpServer.java:731)
        at org.mortbay.util.Container.start(Container.java:72)
        at org.apache.hadoop.mapred.StatusHttpServer.start(StatusHttpServer.java:159)
        ... 5 more

I noticed there is code in the start method to pick a new port if the MultiException is thrown, however it doesn't seem to work.
For now I've just moved this.infoServer.start(); in DataNode.java up one line so the exception is caught and ignored, since I can't use the dfs web interface anyway (dfs nodes are all behind a gateway)

> Implement HDFS content browsing interface
> -----------------------------------------
>
>                 Key: HADOOP-347
>                 URL: http://issues.apache.org/jira/browse/HADOOP-347
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.1.0, 0.2.0, 0.1.1, 0.3.0, 0.4.0, 0.2.1, 0.3.1, 0.3.2
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>             Fix For: 0.5.0
>
>         Attachments: content_browsing.patch, fsnamesystem.patch
>
>
> Implement HDFS content browsing interface over HTTP. Clients would connect to the NameNode and this would send a redirect to a random DataNode. The DataNode, via dfs client, would proxy to namenode for metadata browsing and to other datanodes for content. One can also view the local blocks on any DataNode. Head, Tail will be provided as shorthands for viewing the first block and the last block of a file. 
> For full file viewing, the data displayed per HTTP request will be a block with a PREV/NEXT link. The block size for viewing can be a configurable parameter (the user sets it via the web browser) to the HTTP server (e.g., 256 KB can be the default block size for viewing files).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 21 10:39:29 2006
Return-Path: 
 <hadoop-dev-return-2662-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 81028 invoked from network); 21 Jul 2006 10:39:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 10:39:29 -0000
Received: (qmail 44595 invoked by uid 500); 21 Jul 2006 10:39:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 44455 invoked by uid 500); 21 Jul 2006 10:39:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 44445 invoked by uid 99); 21 Jul 2006 10:39:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 03:39:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 03:39:27 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D3E9B41000A
	for <hadoop-dev@lucene.apache.org>; Fri, 21 Jul 2006 10:37:14 +0000 (GMT)
Message-ID: <12431865.1153478234865.JavaMail.jira@brutus>
Date: Fri, 21 Jul 2006 03:37:14 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-347) Implement HDFS content browsing
 interface
In-Reply-To: <17227613.1152182310090.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-347?page=comments#action_12422608 ] 
            
Devaraj Das commented on HADOOP-347:
------------------------------------

Yeah this problem is there. Thanks for pointing it out. I will create a separate issue to handle multiple datanodes in a single machine.

> Implement HDFS content browsing interface
> -----------------------------------------
>
>                 Key: HADOOP-347
>                 URL: http://issues.apache.org/jira/browse/HADOOP-347
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.1.0, 0.2.0, 0.1.1, 0.3.0, 0.4.0, 0.2.1, 0.3.1, 0.3.2
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>             Fix For: 0.5.0
>
>         Attachments: content_browsing.patch, fsnamesystem.patch
>
>
> Implement HDFS content browsing interface over HTTP. Clients would connect to the NameNode and this would send a redirect to a random DataNode. The DataNode, via dfs client, would proxy to namenode for metadata browsing and to other datanodes for content. One can also view the local blocks on any DataNode. Head, Tail will be provided as shorthands for viewing the first block and the last block of a file. 
> For full file viewing, the data displayed per HTTP request will be a block with a PREV/NEXT link. The block size for viewing can be a configurable parameter (the user sets it via the web browser) to the HTTP server (e.g., 256 KB can be the default block size for viewing files).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 21 10:51:35 2006
Return-Path: 
 <hadoop-dev-return-2663-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84258 invoked from network); 21 Jul 2006 10:51:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 10:51:35 -0000
Received: (qmail 62657 invoked by uid 500); 21 Jul 2006 10:51:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62632 invoked by uid 500); 21 Jul 2006 10:51:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62621 invoked by uid 99); 21 Jul 2006 10:51:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 03:51:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 03:51:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DC9C4410011
	for <hadoop-dev@lucene.apache.org>; Fri, 21 Jul 2006 10:49:16 +0000 (GMT)
Message-ID: <28904462.1153478956900.JavaMail.jira@brutus>
Date: Fri, 21 Jul 2006 03:49:16 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-375) Introduce a way for datanodes to
 register their HTTP info ports with the NameNode
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Introduce a way for datanodes to register their HTTP info ports with the NameNode
---------------------------------------------------------------------------------

                 Key: HADOOP-375
                 URL: http://issues.apache.org/jira/browse/HADOOP-375
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
    Affects Versions: 0.5.0
            Reporter: Devaraj Das
         Assigned To: Devaraj Das


If we have multiple datanodes within a single machine the Jetty servers (other than the first one) won't be able to bind to the fixed HTTP port. So, one solution is to have the datanodes pick a free port (starting from a configured port value) and then inform namenode about it so that the namenode can then do redirects, etc.

Johan Oskarson reported this problem. 

If a computer have a second dfs data dir in the config it doesn't start properly because of:

Exception in thread "main" java.io.IOException: Problem starting http server
        at org.apache.hadoop.mapred.StatusHttpServer.start(StatusHttpServer.java:182)
        at org.apache.hadoop.dfs.DataNode.<init>(DataNode.java:170)
        at org.apache.hadoop.dfs.DataNode.makeInstanceForDir(DataNode.java:1045)
        at org.apache.hadoop.dfs.DataNode.run(DataNode.java:999)
        at org.apache.hadoop.dfs.DataNode.runAndWait(DataNode.java:1015)
        at org.apache.hadoop.dfs.DataNode.main(DataNode.java:1066)
Caused by: org.mortbay.util.MultiException[java.net.BindException: Address already in use]
        at org.mortbay.http.HttpServer.doStart(HttpServer.java:731)
        at org.mortbay.util.Container.start(Container.java:72)
        at org.apache.hadoop.mapred.StatusHttpServer.start(StatusHttpServer.java:159)
        ... 5 more


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 21 13:55:57 2006
Return-Path: 
 <hadoop-dev-return-2664-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51551 invoked from network); 21 Jul 2006 13:55:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 13:55:57 -0000
Received: (qmail 39820 invoked by uid 500); 21 Jul 2006 13:55:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 39767 invoked by uid 500); 21 Jul 2006 13:55:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 39733 invoked by uid 99); 21 Jul 2006 13:55:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 06:55:46 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of himars@gmail.com designates
 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 06:55:44 -0700
Received: by nf-out-0910.google.com with SMTP id b2so835855nfe
        for <hadoop-dev@lucene.apache.org>;
 Fri, 21 Jul 2006 06:55:22 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=uQDibHudqFH990AD4Aa7ERu9KxlTFcaK6ZBIyJI6xTKOqbUX5QNxBe0i0cFw8KDJFvjdKXGCPT0OOXARX9iR1LuxaJolu7PkEP24JGEZP5s2wD5ENipBIl2ifTFOGE0VbwUXSUp4c/2S29R7qJhZZSp00wjqHeLZppFXV8/vYso=
Received: by 10.48.80.20 with SMTP id d20mr642339nfb;
        Fri, 21 Jul 2006 06:55:22 -0700 (PDT)
Received: by 10.48.208.1 with HTTP; Fri, 21 Jul 2006 06:55:22 -0700 (PDT)
Message-ID: <1263a5c70607210655r63532002qb0e112b9795ae893@mail.gmail.com>
Date: Fri, 21 Jul 2006 21:55:22 +0800
From: "Jack Tang" <himars@gmail.com>
To: hadoop-dev@lucene.apache.org
Subject: Fwd: Distributed Matrix Computering on Hadoop
In-Reply-To: <1263a5c70607210224k116c6424gcba8acaad26b218f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <1263a5c70607210224k116c6424gcba8acaad26b218f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

U29ycnksIGl0IHNlZW1zIGkgcG9zdGVkIHRoZSB0aHJlYWQgaW4gd3JvbmcgbWFpbCBsaXN0LCBh
bmQgbm93IGkgY29ycmVjdCBpdC4KCi0tLS0tLS0tLS0gRm9yd2FyZGVkIG1lc3NhZ2UgLS0tLS0t
LS0tLQpGcm9tOiBKYWNrIFRhbmcgPGhpbWFyc0BnbWFpbC5jb20+CkRhdGU6IEp1bCAyMSwgMjAw
NiA1OjI0IFBNClN1YmplY3Q6IERpc3RyaWJ1dGVkIE1hdHJpeCBDb21wdXRlcmluZyBvbiBIYWRv
b3AKVG86IG51dGNoLWRldkBsdWNlbmUuYXBhY2hlLm9yZwoKCkhpIGxpc3QsCgpJIGFtIG5vdyBm
YWNpbmcgb25lIHByb2JsZW0gb24gc2NpZW50aWZpYyBjb21wdXRlcmluZy4KdGhlcmUgZXhpc3Qg
PiA1RyBkYXR1bSAobWFpbHkgbWF0cml4L3ZlY3RvcikgdGhhdCB3ZSBjb2xsZWN0ZWQgZm9yCnNv
bWUgc3VydmV5cy4gQW5kIG5vdyB3ZSBwbGFuIHRvIGRvIHNvbWUgZGF0YW1pbmluZyBvbiB0aGVz
ZS4gQW5kCmhvbmVzdGx5LCBJIGFtIG5vdCBldmVyeSB3ZWxsIGtub3cgSGFkb29wL01hcHJlZHVj
ZS4gIFRoZSBxdWVzdGlvbgpzZWVtcyBxdWl0ZSBzaW1wbGUgdG8geW91IGV4cGVydHM6IElzIGl0
IHBvc3NpYmxlIHRvIGRldmVsb3BlCmRpc3RyaWJ1dGVkIG1hdHJpeCBjb21wdXRlcmluZyBwYWNr
YWdlcyBvbiBIYWRvb3A/IGFuZCBhbnkgc3VnZ2VzdGlvbnMKYXJlIHdlbGNvbWUuCgpQLlM6IEkg
YWxzbyBmb3VuZCBCasO4cm4tT3ZlIEhlaW1zdW5kIGhhZCBkZXZlbG9wZWQgdGhlIEREUCBwYWNr
YWdlCmhlcmUgaHR0cDovL3d3dy5taS51aWIubm8vfmJqb3Jub2gvbXRqL2RtdC8uIEFuZCBkbyB5
b3UgdGhpbmsgaXMgaXQKd29ydGggdG8gaW1wbGVtZW50IG15IGlkZWE/CgpSZWdhcmRzCi9KYWNr
CgoKLS0gCktlZXAgRGlzY292ZXJpbmcgLi4uIC4uLgpDb3BlbmhhZ2VuIFNwaXJpdCA9CumrmOW6
pueahOaZuuWKm+a0u+WKqOOAgeWkp+iDhueahOa2iemZqeeyvuelnuOAgea3seWlpeeahOeglOep
tuWGheWuueS4juW/q+a0u+eahOS5kOWkqeS4u+S5ieeahOa3t+WQiOeJqe+8jgo=

From MAILER-DAEMON Fri Jul 21 14:53:30 2006
Return-Path: 
 <hadoop-dev-return-2665-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 74749 invoked from network); 21 Jul 2006 14:53:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 14:53:30 -0000
Received: (qmail 16944 invoked by uid 500); 21 Jul 2006 14:53:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 16914 invoked by uid 500); 21 Jul 2006 14:53:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 16905 invoked by uid 99); 21 Jul 2006 14:53:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 07:53:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 07:53:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AA4D741000D
	for <hadoop-dev@lucene.apache.org>; Fri, 21 Jul 2006 14:51:15 +0000 (GMT)
Message-ID: <10840803.1153493475695.JavaMail.jira@brutus>
Date: Fri, 21 Jul 2006 07:51:15 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-54?page=comments#action_12422661 ] 
            
Arun C Murthy commented on HADOOP-54:
-------------------------------------

Issues which I came across while implementing the above proposal...

1. The implementation of the public interface

  SequenceFile.Writer.append(byte[] data, int start, int length. int keyLength)

  as it exists today, does not honour 'deflateValues' i.e. it does not compress 'values' at all. I feel this is contrary to user's expectations since the other 'append' interface does compress values and breaks the abstraction of 'compressed' sequence files. I propose we remedy this now and add necessary support for the same here too. (I understand that it might be a break with existing behaviour, but I feel we should correct this right-away... we need to fix it some time or the other.). 

 I will also go ahead and add a 'rawAppend' public interface if the existing functionality (just write data to disc with heeding 'deflateValues') is deemed necessary.


2. I propose we add a public interface:
 
  void flush() throws IOException 

  to SequenceFile.Writer to let the user explictly compress and flush existing data in key/value buffers. 

 This api will also be used from existing 'close' (flush remaining data in buffers) and 'append' (flush buffers to dfs after they exceed the configured size) apis internally... the only point of contention is whether I should make this api 'public'.

3. Afaik I can't see a way to 'configure' the default 'minimum buffer size' since the SequenceFile class, as it exists, does not seem to have any access to a 'Configuration' object... 
  (... in my previous life Owen pointed out that making a 'comparator' class implement the 'Configurable' interface ensured that it's 'configure' api would be called by the framework; will this trick work again?!)

  I don't want to hardcode any values for 'minimum buffer size' nor does the idea of adding a new constructor with a 'Configuration' object as one of the params look very appealing... 

-*-*-

 Thoughts? 

> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.5.0
>
>         Attachments: VIntCompressionResults.txt
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 21 15:06:35 2006
Return-Path: 
 <hadoop-dev-return-2666-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 82691 invoked from network); 21 Jul 2006 15:06:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 15:06:35 -0000
Received: (qmail 52331 invoked by uid 500); 21 Jul 2006 15:06:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 52296 invoked by uid 500); 21 Jul 2006 15:06:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 52121 invoked by uid 99); 21 Jul 2006 15:06:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 08:06:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 08:06:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 86D33410011
	for <hadoop-dev@lucene.apache.org>; Fri, 21 Jul 2006 15:04:18 +0000 (GMT)
Message-ID: <24653995.1153494258549.JavaMail.jira@brutus>
Date: Fri, 21 Jul 2006 08:04:18 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-54?page=comments#action_12422665 ] 
            
Owen O'Malley commented on HADOOP-54:
-------------------------------------

The "raw" append/next interface for SequenceFile is intended to get the raw bytes from the file. Its intended use was for doing things like merging and sorting where the values don't need to be instantiated. So the lack of decompression was deliberate. However, in the switch to block compression, that doesn't make sense. In the new block compression reader and writer, just treat them as a key or value that has already been serialized for you.

> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.5.0
>
>         Attachments: VIntCompressionResults.txt
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 21 15:08:31 2006
Return-Path: 
 <hadoop-dev-return-2667-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84227 invoked from network); 21 Jul 2006 15:08:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 15:08:31 -0000
Received: (qmail 61945 invoked by uid 500); 21 Jul 2006 15:08:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 61914 invoked by uid 500); 21 Jul 2006 15:08:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 61905 invoked by uid 99); 21 Jul 2006 15:08:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 08:08:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 08:08:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2D58841000F
	for <hadoop-dev@lucene.apache.org>; Fri, 21 Jul 2006 15:06:17 +0000 (GMT)
Message-ID: <11366919.1153494377183.JavaMail.jira@brutus>
Date: Fri, 21 Jul 2006 08:06:17 -0700 (PDT)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-372) should allow to specify different
 inputformat classes for different input dirs for Map/Reduce jobs
In-Reply-To: <23897633.1153332195926.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-372?page=comments#action_12422668 ] 
            
Runping Qi commented on HADOOP-372:
-----------------------------------

Doug,

I did respond your suggestion in my previous comment (it is in the middle of the text, thus may be easy to overlook:):

>It is a good idea to move the getInputKeyClass() and getInputValueClass() methods to RecordReader (and >this should be more logical!). 
>This is easy to achieve since the implementation of the method of InputFormat Interface 
>              getRecordReader FileSystem fs, FileSplit split, JobConf job, Reporter reporter) 
>has enough information to extract the key/value classes for the split. 

I think String-->String mapping is enough for encoding the mapping from inputpathdirs to classes (same as how we do with the input key/value classes, except with different attribute names).


> should allow to specify different inputformat classes for different input dirs for Map/Reduce jobs
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-372
>                 URL: http://issues.apache.org/jira/browse/HADOOP-372
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.4.0
>         Environment: all
>            Reporter: Runping Qi
>
> Right now, the user can specify multiple input directories for a map reduce job. 
> However, the files under all the directories are assumed to be in the same format, 
> with the same key/value classes. This proves to be  a serious limit in many situations. 
> Here is an example. Suppose I have three simple tables: 
> one has URLs and their rank values (page ranks), 
> another has URLs and their classification values, 
> and the third one has the URL meta data such as crawl status, last crawl time, etc. 
> Suppose now I need a job to generate a list of URLs to be crawled next. 
> The decision depends on the info in all the three tables.
> Right now, there is no easy way to accomplish this.
> However, this job can be done if the framework allows to specify different inputformats for different input dirs.
> Suppose my three tables are in the following directory respectively: rankTable, classificationTable. and metaDataTable. 
> If we extend JobConf class with the following method (as Owen suggested to me):
>     addInputPath(aPath, anInputFormatClass, anInputKeyClass, anInputValueClass)
> Then I can specify my job as follows:
>     addInputPath(rankTable, SequenceFileInputFormat.class, UTF8.class, DoubleWritable.class)
>     addInputPath(classificationTable, TextInputFormat.class, UTF8,class, UTF8.class)
>     addInputPath(metaDataTable, SequenceFileInputFormat.class, UTF8.class, MyRecord.class)
> If an input directory is added through the current API, it will have the same meaning as it is now. 
> Thus this extension will not affect any applications that do not need this new feature.
> It is relatively easy for the M/R framework to create an appropriate record reader for a map task based on the above information.
> And that is the only change needed for supporting this extension.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 21 15:12:35 2006
Return-Path: 
 <hadoop-dev-return-2668-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85910 invoked from network); 21 Jul 2006 15:12:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 15:12:35 -0000
Received: (qmail 76543 invoked by uid 500); 21 Jul 2006 15:12:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 76523 invoked by uid 500); 21 Jul 2006 15:12:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 76514 invoked by uid 99); 21 Jul 2006 15:12:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 08:12:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 08:12:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 16582410010
	for <hadoop-dev@lucene.apache.org>; Fri, 21 Jul 2006 15:10:16 +0000 (GMT)
Message-ID: <10312720.1153494616088.JavaMail.jira@brutus>
Date: Fri, 21 Jul 2006 08:10:16 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-54?page=comments#action_12422673 ] 
            
Owen O'Malley commented on HADOOP-54:
-------------------------------------

One more thing, the "append" isn't appending bytes, but a preserialized key/value pair. The interface is a little unfortunate, because it forces the key and value to be in the same buffer. A more general interface would be something like:

append(byte[] key, int keyOffset, int keyLength, byte[] value, int valueOffset, int valueLength)

The advantage of that interface is that if the application has the key and value in different buffers they don't need to be copied into a single buffer before being copied to the SequenceFile.Writer's buffer.

> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.5.0
>
>         Attachments: VIntCompressionResults.txt
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 21 15:27:29 2006
Return-Path: 
 <hadoop-dev-return-2669-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 90964 invoked from network); 21 Jul 2006 15:27:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 15:27:29 -0000
Received: (qmail 16601 invoked by uid 500); 21 Jul 2006 15:27:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 16568 invoked by uid 500); 21 Jul 2006 15:27:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 16558 invoked by uid 99); 21 Jul 2006 15:27:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 08:27:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 08:27:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C534141000C
	for <hadoop-dev@lucene.apache.org>; Fri, 21 Jul 2006 15:25:14 +0000 (GMT)
Message-ID: <22192839.1153495514805.JavaMail.jira@brutus>
Date: Fri, 21 Jul 2006 08:25:14 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-375) Introduce a way for datanodes to
 register their HTTP info ports with the NameNode
In-Reply-To: <28904462.1153478956900.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-375?page=comments#action_12422677 ] 
            
Devaraj Das commented on HADOOP-375:
------------------------------------

The way I am thinking of doing this is to add a new field in DatanodeRegistration class called infoPort. The infoPort is set to the value that the jetty could bind to (after retrials if applicable). This becomes known to the namenode as a part of the registration process. The namenode puts the port in a (new) field of the DatanodeInfo object that it creates for every datanode. Later on, anyone wishing to contact the jetty on a specific datanode (say, for redirecting the user to a datanode containing a particular data block) can do so by looking at the port number obtained from the DatanodeInfo object (for e.g., LocatedBlock contains an array of DatanodeInfo objects where a given block can be found). Makes sense?

> Introduce a way for datanodes to register their HTTP info ports with the NameNode
> ---------------------------------------------------------------------------------
>
>                 Key: HADOOP-375
>                 URL: http://issues.apache.org/jira/browse/HADOOP-375
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>
> If we have multiple datanodes within a single machine the Jetty servers (other than the first one) won't be able to bind to the fixed HTTP port. So, one solution is to have the datanodes pick a free port (starting from a configured port value) and then inform namenode about it so that the namenode can then do redirects, etc.
> Johan Oskarson reported this problem. 
> If a computer have a second dfs data dir in the config it doesn't start properly because of:
> Exception in thread "main" java.io.IOException: Problem starting http server
>         at org.apache.hadoop.mapred.StatusHttpServer.start(StatusHttpServer.java:182)
>         at org.apache.hadoop.dfs.DataNode.<init>(DataNode.java:170)
>         at org.apache.hadoop.dfs.DataNode.makeInstanceForDir(DataNode.java:1045)
>         at org.apache.hadoop.dfs.DataNode.run(DataNode.java:999)
>         at org.apache.hadoop.dfs.DataNode.runAndWait(DataNode.java:1015)
>         at org.apache.hadoop.dfs.DataNode.main(DataNode.java:1066)
> Caused by: org.mortbay.util.MultiException[java.net.BindException: Address already in use]
>         at org.mortbay.http.HttpServer.doStart(HttpServer.java:731)
>         at org.mortbay.util.Container.start(Container.java:72)
>         at org.apache.hadoop.mapred.StatusHttpServer.start(StatusHttpServer.java:159)
>         ... 5 more

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 21 15:27:30 2006
Return-Path: 
 <hadoop-dev-return-2670-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91008 invoked from network); 21 Jul 2006 15:27:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 15:27:30 -0000
Received: (qmail 16922 invoked by uid 500); 21 Jul 2006 15:27:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 16765 invoked by uid 500); 21 Jul 2006 15:27:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 16752 invoked by uid 99); 21 Jul 2006 15:27:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 08:27:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 08:27:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6B8F241000F
	for <hadoop-dev@lucene.apache.org>; Fri, 21 Jul 2006 15:25:15 +0000 (GMT)
Message-ID: <27916429.1153495515437.JavaMail.jira@brutus>
Date: Fri, 21 Jul 2006 08:25:15 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-376) Datanode does not scan for an open
 http port
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Datanode does not scan for an open http port
--------------------------------------------

                 Key: HADOOP-376
                 URL: http://issues.apache.org/jira/browse/HADOOP-376
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
    Affects Versions: 0.5.0
            Reporter: Owen O'Malley
         Assigned To: Owen O'Malley
             Fix For: 0.5.0


The DataNode does not scan for an open http port. Only the singleton servers are allowed to have required port assignments.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 21 15:29:28 2006
Return-Path: 
 <hadoop-dev-return-2671-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91313 invoked from network); 21 Jul 2006 15:29:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 15:29:28 -0000
Received: (qmail 18729 invoked by uid 500); 21 Jul 2006 15:29:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 18703 invoked by uid 500); 21 Jul 2006 15:29:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 18694 invoked by uid 99); 21 Jul 2006 15:29:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 08:29:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 08:29:27 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B787541000C
	for <hadoop-dev@lucene.apache.org>; Fri, 21 Jul 2006 15:27:14 +0000 (GMT)
Message-ID: <22619108.1153495634749.JavaMail.jira@brutus>
Date: Fri, 21 Jul 2006 08:27:14 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-376) Datanode does not scan for an open
 http port
In-Reply-To: <27916429.1153495515437.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-376?page=all ]

Owen O'Malley updated HADOOP-376:
---------------------------------

    Attachment: datanode-http-port-scan.patch

This patch enables the port scan.

> Datanode does not scan for an open http port
> --------------------------------------------
>
>                 Key: HADOOP-376
>                 URL: http://issues.apache.org/jira/browse/HADOOP-376
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.5.0
>
>         Attachments: datanode-http-port-scan.patch
>
>
> The DataNode does not scan for an open http port. Only the singleton servers are allowed to have required port assignments.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 21 15:56:29 2006
Return-Path: 
 <hadoop-dev-return-2672-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 5836 invoked from network); 21 Jul 2006 15:56:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 15:56:29 -0000
Received: (qmail 76694 invoked by uid 500); 21 Jul 2006 15:56:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 76674 invoked by uid 500); 21 Jul 2006 15:56:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 76665 invoked by uid 99); 21 Jul 2006 15:56:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 08:56:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 08:56:27 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B49D841000A
	for <hadoop-dev@lucene.apache.org>; Fri, 21 Jul 2006 15:54:14 +0000 (GMT)
Message-ID: <21420788.1153497254737.JavaMail.jira@brutus>
Date: Fri, 21 Jul 2006 08:54:14 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-312) Connections should not be cached
In-Reply-To: <13061881.1150916131961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-312?page=all ]

Devaraj Das reassigned HADOOP-312:
----------------------------------

    Assignee: Devaraj Das

> Connections should not be cached
> --------------------------------
>
>                 Key: HADOOP-312
>                 URL: http://issues.apache.org/jira/browse/HADOOP-312
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: ipc
>    Affects Versions: 0.4.0
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: config_connection_cache.patch
>
>
> Servers and clients (client include datanodes, tasktrackers, DFSClients & tasks) should not cache connections or maybe cache them for very short periods of time. Clients should set up & tear down connections to the servers everytime they need to contact the servers (including the heartbeats). If connection is cached, then reuse the existing connection for a few subsequent transactions until the connection expires. The heartbeat interval should be more so that many more clients (order of  tens of thousands) can be accomodated within 1 heartbeat interval.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 21 16:31:29 2006
Return-Path: 
 <hadoop-dev-return-2673-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 19549 invoked from network); 21 Jul 2006 16:31:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 16:31:29 -0000
Received: (qmail 45286 invoked by uid 500); 21 Jul 2006 16:31:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 45130 invoked by uid 500); 21 Jul 2006 16:31:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 45120 invoked by uid 99); 21 Jul 2006 16:31:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 09:31:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 09:31:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3B34441000C
	for <hadoop-dev@lucene.apache.org>; Fri, 21 Jul 2006 16:29:15 +0000 (GMT)
Message-ID: <2381384.1153499355239.JavaMail.jira@brutus>
Date: Fri, 21 Jul 2006 09:29:15 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-362) tasks can get lost when reporting
 task completion to the JobTracker has an error
In-Reply-To: <22559656.1152744030813.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-362?page=comments#action_12422701 ] 
            
Devaraj Das commented on HADOOP-362:
------------------------------------

Discovered a minor problem with this patch which caused the status updates to never happen on the job status web page. The call to recomputeProgress for a particular task is conditioned on changedProgress which is true only when at least 0.01 units of progress (in the range 0.0 - 1.0) is seen since the last time progress was reported (by any tasktracker). Changing this figure to 0.00001 solved the problem.

> tasks can get lost when reporting task completion to the JobTracker has an error
> --------------------------------------------------------------------------------
>
>                 Key: HADOOP-362
>                 URL: http://issues.apache.org/jira/browse/HADOOP-362
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: lost-status-updates.patch
>
>
> Basically, the JobTracker used to lose some updates about successful map tasks and it would assume that the tasks are still running (the old progress report is what it used to display in the web page). Now this would cause the reduces to also wait for the map output and they would never receive the output. This would cause the job to appear as if it was hung.
>  
> The following piece of code sends the status of tasks to the JobTracker:
>  
>             synchronized (this) {
>                 for (Iterator it = runningTasks.values().iterator();
>                      it.hasNext(); ) {
>                     TaskInProgress tip = (TaskInProgress) it.next();
>                     TaskStatus status = tip.createStatus();
>                     taskReports.add(status);
>                     if (status.getRunState() != TaskStatus.RUNNING) {
>                         if (tip.getTask().isMapTask()) {
>                             mapTotal--;
>                         } else {
>                             reduceTotal--;
>                         }
>                         it.remove();
>                     }
>                 }
>             }
>  
>             //
>             // Xmit the heartbeat
>             //
>            
>             TaskTrackerStatus status =
>               new TaskTrackerStatus(taskTrackerName, localHostname,
>                                     httpPort, taskReports,
>                                     failures);
>             int resultCode = jobClient.emitHeartbeat(status, justStarted);
>  
>  
> Notice that the completed TIPs are removed from runningTasks data structure. Now, if the emitHeartBeat threw an exception (if it could not communicate with the JobTracker till the IPC timeout expires) then this update is lost. And the next time it sends the hearbeat this completed task's status is missing and hence the JobTracker doesn't know about this completed task. So, one solution to this is to remove the completed TIPs from runningTasks after emitHeartbeat returns. Here is how the new code would look like:
>  
>  
>             synchronized (this) {
>                 for (Iterator it = runningTasks.values().iterator();
>                      it.hasNext(); ) {
>                     TaskInProgress tip = (TaskInProgress) it.next();
>                     TaskStatus status = tip.createStatus();
>                     taskReports.add(status);
>                 }
>             }
>  
>             //
>             // Xmit the heartbeat
>             //
>  
>             TaskTrackerStatus status =
>               new TaskTrackerStatus(taskTrackerName, localHostname,
>                                     httpPort, taskReports,
>                                     failures);
>             int resultCode = jobClient.emitHeartbeat(status, justStarted);
>             synchronized (this) {
>                 for (Iterator it = runningTasks.values().iterator();
>                      it.hasNext(); ) {
>                     TaskInProgress tip = (TaskInProgress) it.next();
>                     if (tip.runstate != TaskStatus.RUNNING) {
>                         if (tip.getTask().isMapTask()) {
>                             mapTotal--;
>                         } else {
>                             reduceTotal--;
>                         }
>                         it.remove();
>                     }
>                 }
>             }
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 21 17:27:30 2006
Return-Path: 
 <hadoop-dev-return-2674-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57201 invoked from network); 21 Jul 2006 17:27:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 17:27:30 -0000
Received: (qmail 84372 invoked by uid 500); 21 Jul 2006 17:27:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 84343 invoked by uid 500); 21 Jul 2006 17:27:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 84334 invoked by uid 99); 21 Jul 2006 17:27:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 10:27:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 10:27:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D006F41000E
	for <hadoop-dev@lucene.apache.org>; Fri, 21 Jul 2006 17:25:15 +0000 (GMT)
Message-ID: <9575348.1153502715849.JavaMail.jira@brutus>
Date: Fri, 21 Jul 2006 10:25:15 -0700 (PDT)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-54?page=comments#action_12422716 ] 
            
eric baldeschwieler commented on HADOOP-54:
-------------------------------------------

Sounds like we better be careful here.  

This raw interface is presumably used mainly by the framework?  So we can probably change it without breaking the universe?

I think we should probably change it to deal with "serializedRef" objects or some other new type that points to the buffer and keeps the info on if the data is compressed (and with which class).

Otherwise application code is going to need to deal with tracking the state of each object and  finding the right compress/decompress calls to make.  A frequent scenario will be moving things from a perhaps block compressed file to an item compressed format for sorting.  That should be efficient if possible.

I like this approach because it makes what is going on very explicit, vs the current interface, which is obviously confusing.  The alternative seems to be copious documentation in the classes and all use cases and frequent discussions on the list...


> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.5.0
>
>         Attachments: VIntCompressionResults.txt
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 21 17:34:30 2006
Return-Path: 
 <hadoop-dev-return-2675-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 58989 invoked from network); 21 Jul 2006 17:34:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 17:34:30 -0000
Received: (qmail 1084 invoked by uid 500); 21 Jul 2006 17:34:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 1055 invoked by uid 500); 21 Jul 2006 17:34:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 1046 invoked by uid 99); 21 Jul 2006 17:34:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 10:34:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 10:34:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B34C641000D
	for <hadoop-dev@lucene.apache.org>; Fri, 21 Jul 2006 17:32:15 +0000 (GMT)
Message-ID: <27087817.1153503135731.JavaMail.jira@brutus>
Date: Fri, 21 Jul 2006 10:32:15 -0700 (PDT)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-54?page=comments#action_12422719 ] 
            
eric baldeschwieler commented on HADOOP-54:
-------------------------------------------

Arun, what does flush do exactly?  Does it create a block boundary?  I'd vote for not expanding the interface until we have a compelling use case.  Although I can see how this could arise.

PS.  I'm all for hardcoding a value of 2MB or something else sane for the block size.  Keeping things simple is often much more important than making everything configurable.  As long as the API lets you set the buffer size on creation, I'm happy.  My experience with such systems is at some point the number of configuration options becomes a weakness, not a strength.  Happy to be out voted on this point. (In this case)


> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.5.0
>
>         Attachments: VIntCompressionResults.txt
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 21 17:40:32 2006
Return-Path: 
 <hadoop-dev-return-2676-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 60914 invoked from network); 21 Jul 2006 17:40:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 17:40:32 -0000
Received: (qmail 13314 invoked by uid 500); 21 Jul 2006 17:40:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13286 invoked by uid 500); 21 Jul 2006 17:40:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13275 invoked by uid 99); 21 Jul 2006 17:40:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 10:40:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 10:40:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1BFE041000F
	for <hadoop-dev@lucene.apache.org>; Fri, 21 Jul 2006 17:38:18 +0000 (GMT)
Message-ID: <25708025.1153503498112.JavaMail.jira@brutus>
Date: Fri, 21 Jul 2006 10:38:18 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-54?page=comments#action_12422724 ] 
            
Owen O'Malley commented on HADOOP-54:
-------------------------------------

-1 on adding flush to the public api.

I just checked and the only users of SequenceFile.Writer.append(byte[], ...) in both Hadoop and Nutch are in SequenceFile itself. Once I have my RawSequenceInputFormat, it will also be a user of this interface.

> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.5.0
>
>         Attachments: VIntCompressionResults.txt
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 21 17:52:28 2006
Return-Path: 
 <hadoop-dev-return-2677-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 64258 invoked from network); 21 Jul 2006 17:52:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 17:52:28 -0000
Received: (qmail 34277 invoked by uid 500); 21 Jul 2006 17:52:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 34250 invoked by uid 500); 21 Jul 2006 17:52:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 34241 invoked by uid 99); 21 Jul 2006 17:52:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 10:52:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 10:52:27 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E957241000C
	for <hadoop-dev@lucene.apache.org>; Fri, 21 Jul 2006 17:50:13 +0000 (GMT)
Message-ID: <29286.1153504213953.JavaMail.jira@brutus>
Date: Fri, 21 Jul 2006 10:50:13 -0700 (PDT)
From: "Jean-Baptiste Quenot (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-377) Configuration does not handle URL
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Configuration does not handle URL
---------------------------------

                 Key: HADOOP-377
                 URL: http://issues.apache.org/jira/browse/HADOOP-377
             Project: Hadoop
          Issue Type: Bug
            Reporter: Jean-Baptiste Quenot
         Attachments: 20060721-hadoop-Configuration-URL

Current Configuration allows:

* <String> pointing to a resource in the classpath
* <Path> local path on the file system

The attached patch handles java.net.URL.  We use it to load hadoop-client.xml from a JAR.

Thanks in advance!

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 21 17:52:35 2006
Return-Path: 
 <hadoop-dev-return-2678-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 64385 invoked from network); 21 Jul 2006 17:52:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 17:52:35 -0000
Received: (qmail 34720 invoked by uid 500); 21 Jul 2006 17:52:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 34695 invoked by uid 500); 21 Jul 2006 17:52:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 34686 invoked by uid 99); 21 Jul 2006 17:52:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 10:52:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 10:52:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D0CDC410010
	for <hadoop-dev@lucene.apache.org>; Fri, 21 Jul 2006 17:50:15 +0000 (GMT)
Message-ID: <1721759.1153504215853.JavaMail.jira@brutus>
Date: Fri, 21 Jul 2006 10:50:15 -0700 (PDT)
From: "Jean-Baptiste Quenot (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-377) Configuration does not handle URL
In-Reply-To: <29286.1153504213953.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-377?page=all ]

Jean-Baptiste Quenot updated HADOOP-377:
----------------------------------------

    Attachment: 20060721-hadoop-Configuration-URL

Patch against hadoop 0.4.0

> Configuration does not handle URL
> ---------------------------------
>
>                 Key: HADOOP-377
>                 URL: http://issues.apache.org/jira/browse/HADOOP-377
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Jean-Baptiste Quenot
>         Attachments: 20060721-hadoop-Configuration-URL
>
>
> Current Configuration allows:
> * <String> pointing to a resource in the classpath
> * <Path> local path on the file system
> The attached patch handles java.net.URL.  We use it to load hadoop-client.xml from a JAR.
> Thanks in advance!

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 21 18:46:29 2006
Return-Path: 
 <hadoop-dev-return-2679-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 79707 invoked from network); 21 Jul 2006 18:46:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 18:46:29 -0000
Received: (qmail 62850 invoked by uid 500); 21 Jul 2006 18:46:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62827 invoked by uid 500); 21 Jul 2006 18:46:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62818 invoked by uid 99); 21 Jul 2006 18:46:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 11:46:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 11:46:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AF52741000A
	for <hadoop-dev@lucene.apache.org>; Fri, 21 Jul 2006 18:44:14 +0000 (GMT)
Message-ID: <2034871.1153507454715.JavaMail.jira@brutus>
Date: Fri, 21 Jul 2006 11:44:14 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-375) Introduce a way for datanodes to
 register their HTTP info ports with the NameNode
In-Reply-To: <28904462.1153478956900.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-375?page=comments#action_12422739 ] 
            
Yoram Arnon commented on HADOOP-375:
------------------------------------

it would be good to have a unit test for multiple datanodes in a machine

> Introduce a way for datanodes to register their HTTP info ports with the NameNode
> ---------------------------------------------------------------------------------
>
>                 Key: HADOOP-375
>                 URL: http://issues.apache.org/jira/browse/HADOOP-375
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>
> If we have multiple datanodes within a single machine the Jetty servers (other than the first one) won't be able to bind to the fixed HTTP port. So, one solution is to have the datanodes pick a free port (starting from a configured port value) and then inform namenode about it so that the namenode can then do redirects, etc.
> Johan Oskarson reported this problem. 
> If a computer have a second dfs data dir in the config it doesn't start properly because of:
> Exception in thread "main" java.io.IOException: Problem starting http server
>         at org.apache.hadoop.mapred.StatusHttpServer.start(StatusHttpServer.java:182)
>         at org.apache.hadoop.dfs.DataNode.<init>(DataNode.java:170)
>         at org.apache.hadoop.dfs.DataNode.makeInstanceForDir(DataNode.java:1045)
>         at org.apache.hadoop.dfs.DataNode.run(DataNode.java:999)
>         at org.apache.hadoop.dfs.DataNode.runAndWait(DataNode.java:1015)
>         at org.apache.hadoop.dfs.DataNode.main(DataNode.java:1066)
> Caused by: org.mortbay.util.MultiException[java.net.BindException: Address already in use]
>         at org.mortbay.http.HttpServer.doStart(HttpServer.java:731)
>         at org.mortbay.util.Container.start(Container.java:72)
>         at org.apache.hadoop.mapred.StatusHttpServer.start(StatusHttpServer.java:159)
>         ... 5 more

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 21 19:12:28 2006
Return-Path: 
 <hadoop-dev-return-2680-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 88660 invoked from network); 21 Jul 2006 19:12:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 19:12:28 -0000
Received: (qmail 24651 invoked by uid 500); 21 Jul 2006 19:12:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24630 invoked by uid 500); 21 Jul 2006 19:12:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24620 invoked by uid 99); 21 Jul 2006 19:12:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 12:12:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 12:12:27 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E9F8A41000C
	for <hadoop-dev@lucene.apache.org>; Fri, 21 Jul 2006 19:10:13 +0000 (GMT)
Message-ID: <12637676.1153509013955.JavaMail.jira@brutus>
Date: Fri, 21 Jul 2006 12:10:13 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-378) too many files are distributed to
 slaves nodes
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

too many files are distributed to slaves nodes
----------------------------------------------

                 Key: HADOOP-378
                 URL: http://issues.apache.org/jira/browse/HADOOP-378
             Project: Hadoop
          Issue Type: Bug
          Components: conf
            Reporter: Yoram Arnon
            Priority: Trivial


currently all the svn tree is sync'ed to the slaves on startup, excluding only .svn files.
that includes the example jar file, sources, and other files that are not required.
It would  be better to pick and choose the files that get sync'ed. It will improve sync times on startup, and can prevent some name conflicts, since all the jar files are also included in the classpath by the hadoop script.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 21 19:49:29 2006
Return-Path: 
 <hadoop-dev-return-2681-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 3201 invoked from network); 21 Jul 2006 19:49:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 19:49:29 -0000
Received: (qmail 79188 invoked by uid 500); 21 Jul 2006 19:49:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 79160 invoked by uid 500); 21 Jul 2006 19:49:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 79151 invoked by uid 99); 21 Jul 2006 19:49:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 12:49:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 12:49:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 028FB41000A
	for <hadoop-dev@lucene.apache.org>; Fri, 21 Jul 2006 19:47:15 +0000 (GMT)
Message-ID: <6920146.1153511235007.JavaMail.jira@brutus>
Date: Fri, 21 Jul 2006 12:47:15 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-344) TaskTracker passes incorrect file
 path to DF under cygwin
In-Reply-To: <3940552.1152137609862.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-344?page=comments#action_12422758 ] 
            
Konstantin Shvachko commented on HADOOP-344:
--------------------------------------------

This would also work. But there are 2 other places that already pass canonical paths.
So we will have to change these two callers in order to avoid repetitive parsing of already 
canonical paths. 

> TaskTracker passes incorrect file path to DF under cygwin
> ---------------------------------------------------------
>
>                 Key: HADOOP-344
>                 URL: http://issues.apache.org/jira/browse/HADOOP-344
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.4.0
>         Environment: Windows
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>         Attachments: TaskTrackerDF.patch
>
>
> The path that is passed is OS dependent. The File abstraction should be used in order to make it universal.
> I'm attaching a patch that does that.
> We might want to change the path parameter for DF. Making it File rather than String should prevent us from 
> bugs like that in the future.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 21 21:57:30 2006
Return-Path: 
 <hadoop-dev-return-2682-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 44023 invoked from network); 21 Jul 2006 21:57:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 21:57:30 -0000
Received: (qmail 16953 invoked by uid 500); 21 Jul 2006 21:57:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 16916 invoked by uid 500); 21 Jul 2006 21:57:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 16899 invoked by uid 99); 21 Jul 2006 21:57:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 14:57:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 14:57:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1707041000A
	for <hadoop-dev@lucene.apache.org>; Fri, 21 Jul 2006 21:55:15 +0000 (GMT)
Message-ID: <8859254.1153518915091.JavaMail.jira@brutus>
Date: Fri, 21 Jul 2006 14:55:15 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-260) the start up scripts should take a
 command line parameter --config making it easy to run multiple hadoop
 installation on same machines
In-Reply-To: <32103939.1149014550880.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-260?page=all ]

Milind Bhandarkar updated HADOOP-260:
-------------------------------------

    Attachment:     (was: config.patch)

> the start up scripts should take a command line parameter --config making it easy to run multiple hadoop installation on same machines
> --------------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-260
>                 URL: http://issues.apache.org/jira/browse/HADOOP-260
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.2.0
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>            Priority: Minor
>             Fix For: 0.5.0
>
>
> --config paramter would allow getting rid of SSH_OPTS.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 21 21:59:29 2006
Return-Path: 
 <hadoop-dev-return-2683-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 44531 invoked from network); 21 Jul 2006 21:59:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 21:59:29 -0000
Received: (qmail 19211 invoked by uid 500); 21 Jul 2006 21:59:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 19182 invoked by uid 500); 21 Jul 2006 21:59:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 19173 invoked by uid 99); 21 Jul 2006 21:59:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 14:59:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 14:59:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B652641000C
	for <hadoop-dev@lucene.apache.org>; Fri, 21 Jul 2006 21:57:14 +0000 (GMT)
Message-ID: <16816589.1153519034744.JavaMail.jira@brutus>
Date: Fri, 21 Jul 2006 14:57:14 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-260) the start up scripts should take a
 command line parameter --config making it easy to run multiple hadoop
 installation on same machines
In-Reply-To: <32103939.1149014550880.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-260?page=all ]

Milind Bhandarkar updated HADOOP-260:
-------------------------------------

    Attachment: hadoop-config.patch

Added a [--config confdir] optional parameter to all hadoop shell scripts. The scripts now use the portable source command to eliminate duplicate code.

> the start up scripts should take a command line parameter --config making it easy to run multiple hadoop installation on same machines
> --------------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-260
>                 URL: http://issues.apache.org/jira/browse/HADOOP-260
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.2.0
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>            Priority: Minor
>             Fix For: 0.5.0
>
>         Attachments: hadoop-config.patch
>
>
> --config paramter would allow getting rid of SSH_OPTS.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 21 22:49:28 2006
Return-Path: 
 <hadoop-dev-return-2684-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 55200 invoked from network); 21 Jul 2006 22:49:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 22:49:28 -0000
Received: (qmail 80828 invoked by uid 500); 21 Jul 2006 22:49:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 80810 invoked by uid 500); 21 Jul 2006 22:49:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 80800 invoked by uid 99); 21 Jul 2006 22:49:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 15:49:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 15:49:27 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DBC3D41000C
	for <hadoop-dev@lucene.apache.org>; Fri, 21 Jul 2006 22:47:13 +0000 (GMT)
Message-ID: <31809468.1153522033897.JavaMail.jira@brutus>
Date: Fri, 21 Jul 2006 15:47:13 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-379) provide progress feedback while the
 reducer is sorting
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

provide progress feedback while the reducer is sorting
------------------------------------------------------

                 Key: HADOOP-379
                 URL: http://issues.apache.org/jira/browse/HADOOP-379
             Project: Hadoop
          Issue Type: Improvement
            Reporter: Yoram Arnon


during the sort phase of reduce, the progress is stuck at 33%, like:
tip_0132_r_000000 0.33333334 reduce > sort 

For some jobs this takes a long time, during which it's not clear if the job is making any progress.
Some progress indication would be good.


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 21 22:51:40 2006
Return-Path: 
 <hadoop-dev-return-2685-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 55531 invoked from network); 21 Jul 2006 22:51:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 22:51:40 -0000
Received: (qmail 84570 invoked by uid 500); 21 Jul 2006 22:51:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 84415 invoked by uid 500); 21 Jul 2006 22:51:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 84406 invoked by uid 99); 21 Jul 2006 22:51:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 15:51:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 15:51:39 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5ADC041000C
	for <hadoop-dev@lucene.apache.org>; Fri, 21 Jul 2006 22:49:15 +0000 (GMT)
Message-ID: <29877874.1153522155369.JavaMail.jira@brutus>
Date: Fri, 21 Jul 2006 15:49:15 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-362) tasks can get lost when reporting
 task completion to the JobTracker has an error
In-Reply-To: <22559656.1152744030813.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-362?page=all ]

Owen O'Malley reassigned HADOOP-362:
------------------------------------

    Assignee: Owen O'Malley  (was: Devaraj Das)

> tasks can get lost when reporting task completion to the JobTracker has an error
> --------------------------------------------------------------------------------
>
>                 Key: HADOOP-362
>                 URL: http://issues.apache.org/jira/browse/HADOOP-362
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Devaraj Das
>         Assigned To: Owen O'Malley
>         Attachments: lost-status-updates.patch
>
>
> Basically, the JobTracker used to lose some updates about successful map tasks and it would assume that the tasks are still running (the old progress report is what it used to display in the web page). Now this would cause the reduces to also wait for the map output and they would never receive the output. This would cause the job to appear as if it was hung.
>  
> The following piece of code sends the status of tasks to the JobTracker:
>  
>             synchronized (this) {
>                 for (Iterator it = runningTasks.values().iterator();
>                      it.hasNext(); ) {
>                     TaskInProgress tip = (TaskInProgress) it.next();
>                     TaskStatus status = tip.createStatus();
>                     taskReports.add(status);
>                     if (status.getRunState() != TaskStatus.RUNNING) {
>                         if (tip.getTask().isMapTask()) {
>                             mapTotal--;
>                         } else {
>                             reduceTotal--;
>                         }
>                         it.remove();
>                     }
>                 }
>             }
>  
>             //
>             // Xmit the heartbeat
>             //
>            
>             TaskTrackerStatus status =
>               new TaskTrackerStatus(taskTrackerName, localHostname,
>                                     httpPort, taskReports,
>                                     failures);
>             int resultCode = jobClient.emitHeartbeat(status, justStarted);
>  
>  
> Notice that the completed TIPs are removed from runningTasks data structure. Now, if the emitHeartBeat threw an exception (if it could not communicate with the JobTracker till the IPC timeout expires) then this update is lost. And the next time it sends the hearbeat this completed task's status is missing and hence the JobTracker doesn't know about this completed task. So, one solution to this is to remove the completed TIPs from runningTasks after emitHeartbeat returns. Here is how the new code would look like:
>  
>  
>             synchronized (this) {
>                 for (Iterator it = runningTasks.values().iterator();
>                      it.hasNext(); ) {
>                     TaskInProgress tip = (TaskInProgress) it.next();
>                     TaskStatus status = tip.createStatus();
>                     taskReports.add(status);
>                 }
>             }
>  
>             //
>             // Xmit the heartbeat
>             //
>  
>             TaskTrackerStatus status =
>               new TaskTrackerStatus(taskTrackerName, localHostname,
>                                     httpPort, taskReports,
>                                     failures);
>             int resultCode = jobClient.emitHeartbeat(status, justStarted);
>             synchronized (this) {
>                 for (Iterator it = runningTasks.values().iterator();
>                      it.hasNext(); ) {
>                     TaskInProgress tip = (TaskInProgress) it.next();
>                     if (tip.runstate != TaskStatus.RUNNING) {
>                         if (tip.getTask().isMapTask()) {
>                             mapTotal--;
>                         } else {
>                             reduceTotal--;
>                         }
>                         it.remove();
>                     }
>                 }
>             }
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 21 23:06:30 2006
Return-Path: 
 <hadoop-dev-return-2686-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 58088 invoked from network); 21 Jul 2006 23:06:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 23:06:30 -0000
Received: (qmail 96418 invoked by uid 500); 21 Jul 2006 23:06:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 96263 invoked by uid 500); 21 Jul 2006 23:06:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 96254 invoked by uid 99); 21 Jul 2006 23:06:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 16:06:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 16:06:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 43F0741000C
	for <hadoop-dev@lucene.apache.org>; Fri, 21 Jul 2006 23:04:15 +0000 (GMT)
Message-ID: <26075721.1153523055275.JavaMail.jira@brutus>
Date: Fri, 21 Jul 2006 16:04:15 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-362) tasks can get lost when reporting
 task completion to the JobTracker has an error
In-Reply-To: <22559656.1152744030813.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-362?page=comments#action_12422786 ] 
            
Owen O'Malley commented on HADOOP-362:
--------------------------------------

There is a another aspect/cause of this that we just observed. What we saw was a large job with 5 maps that were not running (all maps were done) and yet all of the reduces were waiting for their output. Closer examination of the log showed that the maps had been logged as complete by the job tracker and were not being run anywhere. The TaskInProgress was showing 100% complete in the web ui. The Task details however was showing 50% and running.

My best guess as to the failure scenario is:

1. task tracker sends progress of (50%, RUNNING) for map_123 to job tracker
2. task tracker gets time out on progress message
3. map_123 finishes
4. task tracker send progress of (100%, SUCCEED) for map_123 to job tracker
5. the two messages are taken from the rpc queue and given to separate handler threads
6. the SUCCEED message thread gets the JobTracker lock and updates the status of the Task and TaskInProgress.
7. the RUNNING message thread gets the lock and updates the status of the Task
8. reduces ask for the map output and nothing is available

Therefore, we also need to make sure that Tasks are not allowed to move from SUCCEED or FAILED to RUNNING. That will solve _this_ problem. However, this represents a much deeper and pervasive problem that we will need to address that any two rpc calls from the _same_ thread can be executed in an arbitrary order.

> tasks can get lost when reporting task completion to the JobTracker has an error
> --------------------------------------------------------------------------------
>
>                 Key: HADOOP-362
>                 URL: http://issues.apache.org/jira/browse/HADOOP-362
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Devaraj Das
>         Assigned To: Owen O'Malley
>         Attachments: lost-status-updates.patch
>
>
> Basically, the JobTracker used to lose some updates about successful map tasks and it would assume that the tasks are still running (the old progress report is what it used to display in the web page). Now this would cause the reduces to also wait for the map output and they would never receive the output. This would cause the job to appear as if it was hung.
>  
> The following piece of code sends the status of tasks to the JobTracker:
>  
>             synchronized (this) {
>                 for (Iterator it = runningTasks.values().iterator();
>                      it.hasNext(); ) {
>                     TaskInProgress tip = (TaskInProgress) it.next();
>                     TaskStatus status = tip.createStatus();
>                     taskReports.add(status);
>                     if (status.getRunState() != TaskStatus.RUNNING) {
>                         if (tip.getTask().isMapTask()) {
>                             mapTotal--;
>                         } else {
>                             reduceTotal--;
>                         }
>                         it.remove();
>                     }
>                 }
>             }
>  
>             //
>             // Xmit the heartbeat
>             //
>            
>             TaskTrackerStatus status =
>               new TaskTrackerStatus(taskTrackerName, localHostname,
>                                     httpPort, taskReports,
>                                     failures);
>             int resultCode = jobClient.emitHeartbeat(status, justStarted);
>  
>  
> Notice that the completed TIPs are removed from runningTasks data structure. Now, if the emitHeartBeat threw an exception (if it could not communicate with the JobTracker till the IPC timeout expires) then this update is lost. And the next time it sends the hearbeat this completed task's status is missing and hence the JobTracker doesn't know about this completed task. So, one solution to this is to remove the completed TIPs from runningTasks after emitHeartbeat returns. Here is how the new code would look like:
>  
>  
>             synchronized (this) {
>                 for (Iterator it = runningTasks.values().iterator();
>                      it.hasNext(); ) {
>                     TaskInProgress tip = (TaskInProgress) it.next();
>                     TaskStatus status = tip.createStatus();
>                     taskReports.add(status);
>                 }
>             }
>  
>             //
>             // Xmit the heartbeat
>             //
>  
>             TaskTrackerStatus status =
>               new TaskTrackerStatus(taskTrackerName, localHostname,
>                                     httpPort, taskReports,
>                                     failures);
>             int resultCode = jobClient.emitHeartbeat(status, justStarted);
>             synchronized (this) {
>                 for (Iterator it = runningTasks.values().iterator();
>                      it.hasNext(); ) {
>                     TaskInProgress tip = (TaskInProgress) it.next();
>                     if (tip.runstate != TaskStatus.RUNNING) {
>                         if (tip.getTask().isMapTask()) {
>                             mapTotal--;
>                         } else {
>                             reduceTotal--;
>                         }
>                         it.remove();
>                     }
>                 }
>             }
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 21 23:22:29 2006
Return-Path: 
 <hadoop-dev-return-2687-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 61366 invoked from network); 21 Jul 2006 23:22:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 23:22:29 -0000
Received: (qmail 15110 invoked by uid 500); 21 Jul 2006 23:22:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15081 invoked by uid 500); 21 Jul 2006 23:22:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 15067 invoked by uid 99); 21 Jul 2006 23:22:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 16:22:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 16:22:27 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 07FA741000C
	for <hadoop-dev@lucene.apache.org>; Fri, 21 Jul 2006 23:20:14 +0000 (GMT)
Message-ID: <13577499.1153524014029.JavaMail.jira@brutus>
Date: Fri, 21 Jul 2006 16:20:14 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-380) The reduce tasks poll for mapoutputs
 in a loop
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The reduce tasks poll for mapoutputs in a loop
----------------------------------------------

                 Key: HADOOP-380
                 URL: http://issues.apache.org/jira/browse/HADOOP-380
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
            Reporter: Mahadev konar
         Assigned To: Mahadev konar
             Fix For: 0.5.0
         Attachments: polling.patch

The Reduce tasks poll for the mapoutputs in a loop. The polling thread should be sleeping for 5 seconds before polling again but there is a bug in updating the timestamps which make the reduce task poll in a loop without sleeping.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 21 23:22:30 2006
Return-Path: 
 <hadoop-dev-return-2688-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 61402 invoked from network); 21 Jul 2006 23:22:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 23:22:30 -0000
Received: (qmail 15289 invoked by uid 500); 21 Jul 2006 23:22:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15262 invoked by uid 500); 21 Jul 2006 23:22:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 15253 invoked by uid 99); 21 Jul 2006 23:22:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 16:22:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 16:22:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0BF4341000A
	for <hadoop-dev@lucene.apache.org>; Fri, 21 Jul 2006 23:20:15 +0000 (GMT)
Message-ID: <19244379.1153524015046.JavaMail.jira@brutus>
Date: Fri, 21 Jul 2006 16:20:15 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-380) The reduce tasks poll for mapoutputs
 in a loop
In-Reply-To: <13577499.1153524014029.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-380?page=all ]

Mahadev konar updated HADOOP-380:
---------------------------------

    Attachment: polling.patch

Just a one line change that fixes the lastpolltime.

> The reduce tasks poll for mapoutputs in a loop
> ----------------------------------------------
>
>                 Key: HADOOP-380
>                 URL: http://issues.apache.org/jira/browse/HADOOP-380
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>             Fix For: 0.5.0
>
>         Attachments: polling.patch
>
>
> The Reduce tasks poll for the mapoutputs in a loop. The polling thread should be sleeping for 5 seconds before polling again but there is a bug in updating the timestamps which make the reduce task poll in a loop without sleeping.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Jul 22 00:07:29 2006
Return-Path: 
 <hadoop-dev-return-2689-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 70821 invoked from network); 22 Jul 2006 00:07:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jul 2006 00:07:29 -0000
Received: (qmail 58476 invoked by uid 500); 22 Jul 2006 00:07:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58448 invoked by uid 500); 22 Jul 2006 00:07:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58439 invoked by uid 99); 22 Jul 2006 00:07:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 17:07:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 17:07:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2A10341000C
	for <hadoop-dev@lucene.apache.org>; Sat, 22 Jul 2006 00:05:14 +0000 (GMT)
Message-ID: <7228594.1153526714168.JavaMail.jira@brutus>
Date: Fri, 21 Jul 2006 17:05:14 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-381) keeping files for tasks that match
 regex on task id
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

keeping files for tasks that match regex on task id
---------------------------------------------------

                 Key: HADOOP-381
                 URL: http://issues.apache.org/jira/browse/HADOOP-381
             Project: Hadoop
          Issue Type: New Feature
          Components: mapred
    Affects Versions: 0.4.0
            Reporter: Owen O'Malley
         Assigned To: Owen O'Malley
             Fix For: 0.5.0


For debugging map/reduce jobs, if a single task is producing bad results, but *not* failing, it is hard to debug the problem. This patch lets you set a pattern for task ids that will keep their files from being deleted when the task and job complete. This allows the developer to run the task in the IsolationRunner under the debugger.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Jul 22 00:13:29 2006
Return-Path: 
 <hadoop-dev-return-2690-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 71565 invoked from network); 22 Jul 2006 00:13:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jul 2006 00:13:29 -0000
Received: (qmail 61394 invoked by uid 500); 22 Jul 2006 00:13:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 61371 invoked by uid 500); 22 Jul 2006 00:13:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 61350 invoked by uid 99); 22 Jul 2006 00:13:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 17:13:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 17:13:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B557341000C
	for <hadoop-dev@lucene.apache.org>; Sat, 22 Jul 2006 00:11:14 +0000 (GMT)
Message-ID: <16703842.1153527074740.JavaMail.jira@brutus>
Date: Fri, 21 Jul 2006 17:11:14 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-381) keeping files for tasks that match
 regex on task id
In-Reply-To: <7228594.1153526714168.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-381?page=all ]

Owen O'Malley updated HADOOP-381:
---------------------------------

    Attachment: keep-task-file-pattern.patch

1. adds the keep.failed.task.files and keep.task.files.pattern variables to hadoop-default.xml
2. adds set/getKeepTaskFilesPattern to JobConf
3. modifies the TaskTracker to keep the files at Task completion if the task name matches the regex.
4. adds a word count test to the junit tests.
5. adds a test to make sure that task trackers clean up normally
6. also checks that the keep.task.files.pattern keeps the directories
7. the mini-mr cluster keeps track of the local dir for each task tracker
8. the mini-mr cluster adds a waitUntilIdle() method that waits for the cluster to be stable
9. task tracker adds isIdle to test whether a given task tracker is idle
10. add the examples to the classpath for the junit tests

> keeping files for tasks that match regex on task id
> ---------------------------------------------------
>
>                 Key: HADOOP-381
>                 URL: http://issues.apache.org/jira/browse/HADOOP-381
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.4.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.5.0
>
>         Attachments: keep-task-file-pattern.patch
>
>
> For debugging map/reduce jobs, if a single task is producing bad results, but *not* failing, it is hard to debug the problem. This patch lets you set a pattern for task ids that will keep their files from being deleted when the task and job complete. This allows the developer to run the task in the IsolationRunner under the debugger.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Jul 22 11:37:31 2006
Return-Path: 
 <hadoop-dev-return-2691-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 95720 invoked from network); 22 Jul 2006 11:37:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jul 2006 11:37:31 -0000
Received: (qmail 11531 invoked by uid 500); 22 Jul 2006 11:37:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 11500 invoked by uid 500); 22 Jul 2006 11:37:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 11491 invoked by uid 99); 22 Jul 2006 11:37:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Jul 2006 04:37:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Jul 2006 04:37:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 415D341000A
	for <hadoop-dev@lucene.apache.org>; Sat, 22 Jul 2006 11:35:15 +0000 (GMT)
Message-ID: <5335943.1153568115265.JavaMail.jira@brutus>
Date: Sat, 22 Jul 2006 04:35:15 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-362) tasks can get lost when reporting
 task completion to the JobTracker has an error
In-Reply-To: <22559656.1152744030813.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-362?page=comments#action_12422822 ] 
            
Devaraj Das commented on HADOOP-362:
------------------------------------

Will timestamps help for the generic case? So the thread invoking the RPC timestamps the message and when the server handler pulls a job out of the queue for execution, it makes a note of the sender's timestamp. It then looks up a map from client address to client-timestamp and if the current call's timestamp happens to be older than the one found in the map, the server simply ignores that. This means that we don't guarantee  that all calls will be invoked at the server.
Additionally, we can have a flag that the client sets forcing the server to execute the call even if it violates the timeliness of the call. This may be required in the DFS operations where a client wants to, lets say, create a file (not absolutely sure whether this is a sensible use-case) but in general this may be helpful.
Both of the above can be implemented in the same lines as call-id is handled today (it is a part of each RPC call). In fact, the call-id itself can serve as the timestamp. Makes sense?

> tasks can get lost when reporting task completion to the JobTracker has an error
> --------------------------------------------------------------------------------
>
>                 Key: HADOOP-362
>                 URL: http://issues.apache.org/jira/browse/HADOOP-362
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Devaraj Das
>         Assigned To: Owen O'Malley
>         Attachments: lost-status-updates.patch
>
>
> Basically, the JobTracker used to lose some updates about successful map tasks and it would assume that the tasks are still running (the old progress report is what it used to display in the web page). Now this would cause the reduces to also wait for the map output and they would never receive the output. This would cause the job to appear as if it was hung.
>  
> The following piece of code sends the status of tasks to the JobTracker:
>  
>             synchronized (this) {
>                 for (Iterator it = runningTasks.values().iterator();
>                      it.hasNext(); ) {
>                     TaskInProgress tip = (TaskInProgress) it.next();
>                     TaskStatus status = tip.createStatus();
>                     taskReports.add(status);
>                     if (status.getRunState() != TaskStatus.RUNNING) {
>                         if (tip.getTask().isMapTask()) {
>                             mapTotal--;
>                         } else {
>                             reduceTotal--;
>                         }
>                         it.remove();
>                     }
>                 }
>             }
>  
>             //
>             // Xmit the heartbeat
>             //
>            
>             TaskTrackerStatus status =
>               new TaskTrackerStatus(taskTrackerName, localHostname,
>                                     httpPort, taskReports,
>                                     failures);
>             int resultCode = jobClient.emitHeartbeat(status, justStarted);
>  
>  
> Notice that the completed TIPs are removed from runningTasks data structure. Now, if the emitHeartBeat threw an exception (if it could not communicate with the JobTracker till the IPC timeout expires) then this update is lost. And the next time it sends the hearbeat this completed task's status is missing and hence the JobTracker doesn't know about this completed task. So, one solution to this is to remove the completed TIPs from runningTasks after emitHeartbeat returns. Here is how the new code would look like:
>  
>  
>             synchronized (this) {
>                 for (Iterator it = runningTasks.values().iterator();
>                      it.hasNext(); ) {
>                     TaskInProgress tip = (TaskInProgress) it.next();
>                     TaskStatus status = tip.createStatus();
>                     taskReports.add(status);
>                 }
>             }
>  
>             //
>             // Xmit the heartbeat
>             //
>  
>             TaskTrackerStatus status =
>               new TaskTrackerStatus(taskTrackerName, localHostname,
>                                     httpPort, taskReports,
>                                     failures);
>             int resultCode = jobClient.emitHeartbeat(status, justStarted);
>             synchronized (this) {
>                 for (Iterator it = runningTasks.values().iterator();
>                      it.hasNext(); ) {
>                     TaskInProgress tip = (TaskInProgress) it.next();
>                     if (tip.runstate != TaskStatus.RUNNING) {
>                         if (tip.getTask().isMapTask()) {
>                             mapTotal--;
>                         } else {
>                             reduceTotal--;
>                         }
>                         it.remove();
>                     }
>                 }
>             }
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sun Jul 23 18:09:33 2006
Return-Path: 
 <hadoop-dev-return-2692-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 41333 invoked from network); 23 Jul 2006 18:09:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Jul 2006 18:09:33 -0000
Received: (qmail 30488 invoked by uid 500); 23 Jul 2006 18:09:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 30462 invoked by uid 500); 23 Jul 2006 18:09:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 30437 invoked by uid 99); 23 Jul 2006 18:09:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Jul 2006 11:09:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Jul 2006 11:09:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B5CDF7141E4
	for <hadoop-dev@lucene.apache.org>; Sun, 23 Jul 2006 18:07:14 +0000 (GMT)
Message-ID: <26550996.1153678034742.JavaMail.jira@brutus>
Date: Sun, 23 Jul 2006 11:07:14 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-375) Introduce a way for datanodes to
 register their HTTP info ports with the NameNode
In-Reply-To: <28904462.1153478956900.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-375?page=all ]

Devaraj Das updated HADOOP-375:
-------------------------------

    Attachment: content_browsing.new.patch

Testcase for multiple datanodes is not included in this patch. Maybe, that should be a separate issue.

> Introduce a way for datanodes to register their HTTP info ports with the NameNode
> ---------------------------------------------------------------------------------
>
>                 Key: HADOOP-375
>                 URL: http://issues.apache.org/jira/browse/HADOOP-375
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: content_browsing.new.patch
>
>
> If we have multiple datanodes within a single machine the Jetty servers (other than the first one) won't be able to bind to the fixed HTTP port. So, one solution is to have the datanodes pick a free port (starting from a configured port value) and then inform namenode about it so that the namenode can then do redirects, etc.
> Johan Oskarson reported this problem. 
> If a computer have a second dfs data dir in the config it doesn't start properly because of:
> Exception in thread "main" java.io.IOException: Problem starting http server
>         at org.apache.hadoop.mapred.StatusHttpServer.start(StatusHttpServer.java:182)
>         at org.apache.hadoop.dfs.DataNode.<init>(DataNode.java:170)
>         at org.apache.hadoop.dfs.DataNode.makeInstanceForDir(DataNode.java:1045)
>         at org.apache.hadoop.dfs.DataNode.run(DataNode.java:999)
>         at org.apache.hadoop.dfs.DataNode.runAndWait(DataNode.java:1015)
>         at org.apache.hadoop.dfs.DataNode.main(DataNode.java:1066)
> Caused by: org.mortbay.util.MultiException[java.net.BindException: Address already in use]
>         at org.mortbay.http.HttpServer.doStart(HttpServer.java:731)
>         at org.mortbay.util.Container.start(Container.java:72)
>         at org.apache.hadoop.mapred.StatusHttpServer.start(StatusHttpServer.java:159)
>         ... 5 more

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 24 03:59:34 2006
Return-Path: 
 <hadoop-dev-return-2693-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 53291 invoked from network); 24 Jul 2006 03:59:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2006 03:59:34 -0000
Received: (qmail 12350 invoked by uid 500); 24 Jul 2006 03:59:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 12192 invoked by uid 500); 24 Jul 2006 03:59:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 12183 invoked by uid 99); 24 Jul 2006 03:59:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Jul 2006 20:59:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Jul 2006 20:59:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AB180410010
	for <hadoop-dev@lucene.apache.org>; Mon, 24 Jul 2006 03:57:15 +0000 (GMT)
Message-ID: <8376324.1153713435698.JavaMail.jira@brutus>
Date: Sun, 23 Jul 2006 20:57:15 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-54?page=comments#action_12422961 ] 
            
Arun C Murthy commented on HADOOP-54:
-------------------------------------

Rebuttals:

1. append

  I like Owen's idea about generalising the interface to:
  
  append(byte[] key, int keyOffset, int keyLength, byte[] value, int valueOffset, int valueLength) 

  with it's associated 'clarity' for user and advantage that it precludes an extra copy into a single buffer... couple of +1s and I'll take this path.

  @Owen: I understand that this interface currently appends a 'preserialized' key/value pair, but as you point out with 'compressed blocks' this gets worrisome in the long run (things like 'custom compression' will require 'serializedRef' like objects soon enough) ... 

 How about letting the user pass in the preserialized key/value and then we will still go ahead and honour 'deflateValues' in the append? Honouring 'compress' directives will ensure consistent behaviour with rest of apis (read: append(Writable key, Writable value) and also uncompress in the SequenceFile.Reader.next call will ensure the what-you-store-is-what-you-get contract.

 Otherwise a true 'rawAppend' will mean (especially in 'compressed blocks' context) that I will need to create a 'block' with a single key/value pair and write out to disk ...  

 Summarising: We can switch to the 'general' append interface and honour 'compress' directives in it... ensuring consistency & clarity. (I also volunteer to fix 'older' append calls in SequenceFile.java; Owen can then 

2. flush

  I should have worded things more carefully... I was looking to see if there is a compelling use case for this 'already'. 
  Looks like there isn't... I'll drop this. 
  
  (Adding a public 'flush' later is infinitely easier than adding now and removing later... :) )

  @Eric: Yep, the 'flush' does create a block boundary, it's used internally in 2 cases for now: (a) sizeof(keyBuffer+valueBuffer) exceeds minBlockSize (b) When the 'close' api is called.
    
3. configuration
 
  I concur with need to keep things simple... I'll just hardcode a 'sane' value for now. 
  (Yes, there is a way via the constructor to set the buffersize on creation.)

  (PS: I do hear bells in my head when I see, as it exists, SequenceFile.Reader gets a 'Configuration' object via the constructor and the 'symmetric' SequenceFile.Writer doesn't... but that's topic for another discussion.)


> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.5.0
>
>         Attachments: VIntCompressionResults.txt
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 24 08:36:35 2006
Return-Path: 
 <hadoop-dev-return-2694-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31587 invoked from network); 24 Jul 2006 08:36:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2006 08:36:35 -0000
Received: (qmail 78594 invoked by uid 500); 24 Jul 2006 08:36:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 78564 invoked by uid 500); 24 Jul 2006 08:36:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 78555 invoked by uid 99); 24 Jul 2006 08:36:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 01:36:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 01:36:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C3CD071428D
	for <hadoop-dev@lucene.apache.org>; Mon, 24 Jul 2006 08:34:15 +0000 (GMT)
Message-ID: <3692570.1153730055799.JavaMail.jira@brutus>
Date: Mon, 24 Jul 2006 01:34:15 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-54?page=comments#action_12422994 ] 
            
Doug Cutting commented on HADOOP-54:
------------------------------------

I suggest adding the binary append API suggested by Owen and deprecating the old binary append API, but making it work back-compatibly.  Thus it should accept pre-compressed (if compression is enabled) values, de-compress them, then call the new append method.  We should update all existing binary appends in Hadoop and prepare a patch for Nutch to do the same.  Then we should file a bug to remove the deprecated method in the next release.

We unfortunately lose the ability to move individual compressed values around.  If a mapper does not touch values, it would be best to only decompress values on reduce nodes, rather than decompress and recompress them on map nodes, since compression can be computationally expensive.  But I don't see how to avoid this if we want to compress multiple values together.  I think this argues that we might still permit the existing single-value compression, since that might be most efficient for large-valued files that are not touched during maps.

Also, please add a public SequenceFile.Writer() constructor that accepts a Configuration.  We should probably also deprecate the unconfigured constructor and remove it in the next release.  I agree with Eric that things can be over-configurable, but its easier to make them configurable in the code from the start, and only as-needed add them to hadoop-default.xml, so that folks who have not read the code can tweak them.

I also agree that flush should not be public.

> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.5.0
>
>         Attachments: VIntCompressionResults.txt
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 24 08:47:34 2006
Return-Path: 
 <hadoop-dev-return-2695-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 35127 invoked from network); 24 Jul 2006 08:47:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2006 08:47:34 -0000
Received: (qmail 95525 invoked by uid 500); 24 Jul 2006 08:47:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95370 invoked by uid 500); 24 Jul 2006 08:47:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95361 invoked by uid 99); 24 Jul 2006 08:47:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 01:47:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 01:47:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 88EB7714283
	for <hadoop-dev@lucene.apache.org>; Mon, 24 Jul 2006 08:45:15 +0000 (GMT)
Message-ID: <15271488.1153730715558.JavaMail.jira@brutus>
Date: Mon, 24 Jul 2006 01:45:15 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-372) should allow to specify different
 inputformat classes for different input dirs for Map/Reduce jobs
In-Reply-To: <23897633.1153332195926.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-372?page=comments#action_12422998 ] 
            
Doug Cutting commented on HADOOP-372:
-------------------------------------

>It is a good idea to move the getInputKeyClass() and getInputValueClass() methods to RecordReader

And would this change alone not resolve this issue for you?  You could intermix input files with different types in a job, and specify no input key or value classes.  The InputFormat would determine the types of the inputs.  For SequenceFiles, the types are named in the file, for text files they are fixed.  It would not allow you to, e.g., intermix text and SequenceFile inputs, but that's not what you've asked for here, and that could easily be achived through a dispatching InputFormat.

> should allow to specify different inputformat classes for different input dirs for Map/Reduce jobs
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-372
>                 URL: http://issues.apache.org/jira/browse/HADOOP-372
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.4.0
>         Environment: all
>            Reporter: Runping Qi
>
> Right now, the user can specify multiple input directories for a map reduce job. 
> However, the files under all the directories are assumed to be in the same format, 
> with the same key/value classes. This proves to be  a serious limit in many situations. 
> Here is an example. Suppose I have three simple tables: 
> one has URLs and their rank values (page ranks), 
> another has URLs and their classification values, 
> and the third one has the URL meta data such as crawl status, last crawl time, etc. 
> Suppose now I need a job to generate a list of URLs to be crawled next. 
> The decision depends on the info in all the three tables.
> Right now, there is no easy way to accomplish this.
> However, this job can be done if the framework allows to specify different inputformats for different input dirs.
> Suppose my three tables are in the following directory respectively: rankTable, classificationTable. and metaDataTable. 
> If we extend JobConf class with the following method (as Owen suggested to me):
>     addInputPath(aPath, anInputFormatClass, anInputKeyClass, anInputValueClass)
> Then I can specify my job as follows:
>     addInputPath(rankTable, SequenceFileInputFormat.class, UTF8.class, DoubleWritable.class)
>     addInputPath(classificationTable, TextInputFormat.class, UTF8,class, UTF8.class)
>     addInputPath(metaDataTable, SequenceFileInputFormat.class, UTF8.class, MyRecord.class)
> If an input directory is added through the current API, it will have the same meaning as it is now. 
> Thus this extension will not affect any applications that do not need this new feature.
> It is relatively easy for the M/R framework to create an appropriate record reader for a map task based on the above information.
> And that is the only change needed for supporting this extension.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 24 08:58:33 2006
Return-Path: 
 <hadoop-dev-return-2696-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37765 invoked from network); 24 Jul 2006 08:58:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2006 08:58:33 -0000
Received: (qmail 7399 invoked by uid 500); 24 Jul 2006 08:58:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 7228 invoked by uid 500); 24 Jul 2006 08:58:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 7218 invoked by uid 99); 24 Jul 2006 08:58:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 01:58:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 01:58:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BA8D1714283
	for <hadoop-dev@lucene.apache.org>; Mon, 24 Jul 2006 08:56:14 +0000 (GMT)
Message-ID: <28029031.1153731374761.JavaMail.jira@brutus>
Date: Mon, 24 Jul 2006 01:56:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-376) Datanode does not scan for an open
 http port
In-Reply-To: <27916429.1153495515437.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-376?page=all ]

Doug Cutting resolved HADOOP-376.
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Owen.

> Datanode does not scan for an open http port
> --------------------------------------------
>
>                 Key: HADOOP-376
>                 URL: http://issues.apache.org/jira/browse/HADOOP-376
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.5.0
>
>         Attachments: datanode-http-port-scan.patch
>
>
> The DataNode does not scan for an open http port. Only the singleton servers are allowed to have required port assignments.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 24 09:10:40 2006
Return-Path: 
 <hadoop-dev-return-2697-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 42159 invoked from network); 24 Jul 2006 09:10:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2006 09:10:40 -0000
Received: (qmail 29706 invoked by uid 500); 24 Jul 2006 09:10:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 29541 invoked by uid 500); 24 Jul 2006 09:10:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 29532 invoked by uid 99); 24 Jul 2006 09:10:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 02:10:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 02:10:38 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C92E67141F1
	for <hadoop-dev@lucene.apache.org>; Mon, 24 Jul 2006 09:08:15 +0000 (GMT)
Message-ID: <3446332.1153732095820.JavaMail.jira@brutus>
Date: Mon, 24 Jul 2006 02:08:15 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-377) Configuration does not handle URL
In-Reply-To: <29286.1153504213953.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-377?page=comments#action_12423006 ] 
            
Doug Cutting commented on HADOOP-377:
-------------------------------------

Can you say more about how you use this?  One can already name config files in jar files on the CLASSPATH, or at an absolute place in the filesystem.  Are you specifying a jar that's accessed from a jar not on the CLASSPATH?

> Configuration does not handle URL
> ---------------------------------
>
>                 Key: HADOOP-377
>                 URL: http://issues.apache.org/jira/browse/HADOOP-377
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Jean-Baptiste Quenot
>         Attachments: 20060721-hadoop-Configuration-URL
>
>
> Current Configuration allows:
> * <String> pointing to a resource in the classpath
> * <Path> local path on the file system
> The attached patch handles java.net.URL.  We use it to load hadoop-client.xml from a JAR.
> Thanks in advance!

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 24 09:12:33 2006
Return-Path: 
 <hadoop-dev-return-2698-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 42759 invoked from network); 24 Jul 2006 09:12:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2006 09:12:33 -0000
Received: (qmail 32020 invoked by uid 500); 24 Jul 2006 09:12:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 31935 invoked by uid 500); 24 Jul 2006 09:12:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31925 invoked by uid 99); 24 Jul 2006 09:12:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 02:12:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 02:12:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DAD007141F0
	for <hadoop-dev@lucene.apache.org>; Mon, 24 Jul 2006 09:10:14 +0000 (GMT)
Message-ID: <18001544.1153732214893.JavaMail.jira@brutus>
Date: Mon, 24 Jul 2006 02:10:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-344) TaskTracker passes incorrect file
 path to DF under cygwin
In-Reply-To: <3940552.1152137609862.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-344?page=comments#action_12423007 ] 
            
Doug Cutting commented on HADOOP-344:
-------------------------------------

> there are 2 other places that already pass canonical paths

Wouldn't it be better to change these?  That would minimize code replication, a good thing.

> TaskTracker passes incorrect file path to DF under cygwin
> ---------------------------------------------------------
>
>                 Key: HADOOP-344
>                 URL: http://issues.apache.org/jira/browse/HADOOP-344
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.4.0
>         Environment: Windows
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>         Attachments: TaskTrackerDF.patch
>
>
> The path that is passed is OS dependent. The File abstraction should be used in order to make it universal.
> I'm attaching a patch that does that.
> We might want to change the path parameter for DF. Making it File rather than String should prevent us from 
> bugs like that in the future.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 24 09:20:45 2006
Return-Path: 
 <hadoop-dev-return-2699-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 45941 invoked from network); 24 Jul 2006 09:20:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2006 09:20:45 -0000
Received: (qmail 50574 invoked by uid 500); 24 Jul 2006 09:20:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 50556 invoked by uid 500); 24 Jul 2006 09:20:44 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 50547 invoked by uid 99); 24 Jul 2006 09:20:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 02:20:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 02:20:43 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B0F3D714283
	for <hadoop-dev@lucene.apache.org>; Mon, 24 Jul 2006 09:18:20 +0000 (GMT)
Message-ID: <26725361.1153732700721.JavaMail.jira@brutus>
Date: Mon, 24 Jul 2006 02:18:20 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-260) the start up scripts should take a
 command line parameter --config making it easy to run multiple hadoop
 installation on same machines
In-Reply-To: <32103939.1149014550880.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-260?page=all ]

Doug Cutting resolved HADOOP-260.
---------------------------------

    Resolution: Fixed
      Assignee: Milind Bhandarkar  (was: Mahadev konar)

I just committed this.  Thanks, Milind!

> the start up scripts should take a command line parameter --config making it easy to run multiple hadoop installation on same machines
> --------------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-260
>                 URL: http://issues.apache.org/jira/browse/HADOOP-260
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.2.0
>            Reporter: Mahadev konar
>         Assigned To: Milind Bhandarkar
>            Priority: Minor
>             Fix For: 0.5.0
>
>         Attachments: hadoop-config.patch
>
>
> --config paramter would allow getting rid of SSH_OPTS.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 24 09:25:39 2006
Return-Path: 
 <hadoop-dev-return-2700-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 48388 invoked from network); 24 Jul 2006 09:25:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2006 09:25:39 -0000
Received: (qmail 58851 invoked by uid 500); 24 Jul 2006 09:25:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58825 invoked by uid 500); 24 Jul 2006 09:25:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58801 invoked by uid 99); 24 Jul 2006 09:25:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 02:25:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 02:25:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5C1FF7141F1
	for <hadoop-dev@lucene.apache.org>; Mon, 24 Jul 2006 09:23:15 +0000 (GMT)
Message-ID: <1755757.1153732995374.JavaMail.jira@brutus>
Date: Mon, 24 Jul 2006 02:23:15 -0700 (PDT)
From: "Jean-Baptiste Quenot (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-377) Configuration does not handle URL
In-Reply-To: <29286.1153504213953.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-377?page=comments#action_12423013 ] 
            
Jean-Baptiste Quenot commented on HADOOP-377:
---------------------------------------------

Here are the details: we use an abstraction class that returns either a File or an URL.  An URL is returned by getClass().getResource("hadoop-client.xml") so it would be great if Hadoop could handle that.

> Configuration does not handle URL
> ---------------------------------
>
>                 Key: HADOOP-377
>                 URL: http://issues.apache.org/jira/browse/HADOOP-377
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Jean-Baptiste Quenot
>         Attachments: 20060721-hadoop-Configuration-URL
>
>
> Current Configuration allows:
> * <String> pointing to a resource in the classpath
> * <Path> local path on the file system
> The attached patch handles java.net.URL.  We use it to load hadoop-client.xml from a JAR.
> Thanks in advance!

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 24 09:27:34 2006
Return-Path: 
 <hadoop-dev-return-2701-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 49028 invoked from network); 24 Jul 2006 09:27:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2006 09:27:34 -0000
Received: (qmail 63680 invoked by uid 500); 24 Jul 2006 09:27:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63655 invoked by uid 500); 24 Jul 2006 09:27:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63646 invoked by uid 99); 24 Jul 2006 09:27:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 02:27:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 02:27:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6F3AE71428E
	for <hadoop-dev@lucene.apache.org>; Mon, 24 Jul 2006 09:25:15 +0000 (GMT)
Message-ID: <27670768.1153733115453.JavaMail.jira@brutus>
Date: Mon, 24 Jul 2006 02:25:15 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-362) tasks can get lost when reporting
 task completion to the JobTracker has an error
In-Reply-To: <22559656.1152744030813.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-362?page=comments#action_12423014 ] 
            
Doug Cutting commented on HADOOP-362:
-------------------------------------

I worry about even relying on timestamps.  In general, in distributed systems, communications can arrive out of order, no?  So it is better to develop protocols that allow for this.

> tasks can get lost when reporting task completion to the JobTracker has an error
> --------------------------------------------------------------------------------
>
>                 Key: HADOOP-362
>                 URL: http://issues.apache.org/jira/browse/HADOOP-362
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Devaraj Das
>         Assigned To: Owen O'Malley
>         Attachments: lost-status-updates.patch
>
>
> Basically, the JobTracker used to lose some updates about successful map tasks and it would assume that the tasks are still running (the old progress report is what it used to display in the web page). Now this would cause the reduces to also wait for the map output and they would never receive the output. This would cause the job to appear as if it was hung.
>  
> The following piece of code sends the status of tasks to the JobTracker:
>  
>             synchronized (this) {
>                 for (Iterator it = runningTasks.values().iterator();
>                      it.hasNext(); ) {
>                     TaskInProgress tip = (TaskInProgress) it.next();
>                     TaskStatus status = tip.createStatus();
>                     taskReports.add(status);
>                     if (status.getRunState() != TaskStatus.RUNNING) {
>                         if (tip.getTask().isMapTask()) {
>                             mapTotal--;
>                         } else {
>                             reduceTotal--;
>                         }
>                         it.remove();
>                     }
>                 }
>             }
>  
>             //
>             // Xmit the heartbeat
>             //
>            
>             TaskTrackerStatus status =
>               new TaskTrackerStatus(taskTrackerName, localHostname,
>                                     httpPort, taskReports,
>                                     failures);
>             int resultCode = jobClient.emitHeartbeat(status, justStarted);
>  
>  
> Notice that the completed TIPs are removed from runningTasks data structure. Now, if the emitHeartBeat threw an exception (if it could not communicate with the JobTracker till the IPC timeout expires) then this update is lost. And the next time it sends the hearbeat this completed task's status is missing and hence the JobTracker doesn't know about this completed task. So, one solution to this is to remove the completed TIPs from runningTasks after emitHeartbeat returns. Here is how the new code would look like:
>  
>  
>             synchronized (this) {
>                 for (Iterator it = runningTasks.values().iterator();
>                      it.hasNext(); ) {
>                     TaskInProgress tip = (TaskInProgress) it.next();
>                     TaskStatus status = tip.createStatus();
>                     taskReports.add(status);
>                 }
>             }
>  
>             //
>             // Xmit the heartbeat
>             //
>  
>             TaskTrackerStatus status =
>               new TaskTrackerStatus(taskTrackerName, localHostname,
>                                     httpPort, taskReports,
>                                     failures);
>             int resultCode = jobClient.emitHeartbeat(status, justStarted);
>             synchronized (this) {
>                 for (Iterator it = runningTasks.values().iterator();
>                      it.hasNext(); ) {
>                     TaskInProgress tip = (TaskInProgress) it.next();
>                     if (tip.runstate != TaskStatus.RUNNING) {
>                         if (tip.getTask().isMapTask()) {
>                             mapTotal--;
>                         } else {
>                             reduceTotal--;
>                         }
>                         it.remove();
>                     }
>                 }
>             }
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 24 09:56:34 2006
Return-Path: 
 <hadoop-dev-return-2702-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 59433 invoked from network); 24 Jul 2006 09:56:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2006 09:56:34 -0000
Received: (qmail 1225 invoked by uid 500); 24 Jul 2006 09:56:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 1192 invoked by uid 500); 24 Jul 2006 09:56:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 1183 invoked by uid 99); 24 Jul 2006 09:56:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 02:56:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 02:56:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 41C7A7141F1
	for <hadoop-dev@lucene.apache.org>; Mon, 24 Jul 2006 09:54:15 +0000 (GMT)
Message-ID: <8354132.1153734855266.JavaMail.jira@brutus>
Date: Mon, 24 Jul 2006 02:54:15 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-362) tasks can get lost when reporting
 task completion to the JobTracker has an error
In-Reply-To: <22559656.1152744030813.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-362?page=comments#action_12423020 ] 
            
Devaraj Das commented on HADOOP-362:
------------------------------------

Yes, that's true. That's why in my proposal (the second part) I allow for this also - the sender of the RPC explicitly flags an RPC message that it should be executed no matter when it is considered for execution. That is, even if a message, m1, is received later than other messages that it sends after sending m1, the server should honor that and execute the RPC.
So basically, the client decides whether the server should ignore all (not-yet-executed) RPC requests sent before the current RPC request that the server is executing  OR  the server should execute all RPC requests.
We need to serialize the execution of RPC requests based on client addresses (to avoid the problem of multiple requests from the same client getting executed in parallel by different handler threads). This will avoid the race condition for cases like job status updates.
Yes, I agree that this we can implement the above in the protocol itself. I mean each protocol could have a flag signifying either  "execute all RPCs" or "ignore RPC requests with timestamps later than the current RPC's timestamp". 
Since in the RPC implementation in Hadoop, we have a single client for each protocol, this policy will work I think.

> tasks can get lost when reporting task completion to the JobTracker has an error
> --------------------------------------------------------------------------------
>
>                 Key: HADOOP-362
>                 URL: http://issues.apache.org/jira/browse/HADOOP-362
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Devaraj Das
>         Assigned To: Owen O'Malley
>         Attachments: lost-status-updates.patch
>
>
> Basically, the JobTracker used to lose some updates about successful map tasks and it would assume that the tasks are still running (the old progress report is what it used to display in the web page). Now this would cause the reduces to also wait for the map output and they would never receive the output. This would cause the job to appear as if it was hung.
>  
> The following piece of code sends the status of tasks to the JobTracker:
>  
>             synchronized (this) {
>                 for (Iterator it = runningTasks.values().iterator();
>                      it.hasNext(); ) {
>                     TaskInProgress tip = (TaskInProgress) it.next();
>                     TaskStatus status = tip.createStatus();
>                     taskReports.add(status);
>                     if (status.getRunState() != TaskStatus.RUNNING) {
>                         if (tip.getTask().isMapTask()) {
>                             mapTotal--;
>                         } else {
>                             reduceTotal--;
>                         }
>                         it.remove();
>                     }
>                 }
>             }
>  
>             //
>             // Xmit the heartbeat
>             //
>            
>             TaskTrackerStatus status =
>               new TaskTrackerStatus(taskTrackerName, localHostname,
>                                     httpPort, taskReports,
>                                     failures);
>             int resultCode = jobClient.emitHeartbeat(status, justStarted);
>  
>  
> Notice that the completed TIPs are removed from runningTasks data structure. Now, if the emitHeartBeat threw an exception (if it could not communicate with the JobTracker till the IPC timeout expires) then this update is lost. And the next time it sends the hearbeat this completed task's status is missing and hence the JobTracker doesn't know about this completed task. So, one solution to this is to remove the completed TIPs from runningTasks after emitHeartbeat returns. Here is how the new code would look like:
>  
>  
>             synchronized (this) {
>                 for (Iterator it = runningTasks.values().iterator();
>                      it.hasNext(); ) {
>                     TaskInProgress tip = (TaskInProgress) it.next();
>                     TaskStatus status = tip.createStatus();
>                     taskReports.add(status);
>                 }
>             }
>  
>             //
>             // Xmit the heartbeat
>             //
>  
>             TaskTrackerStatus status =
>               new TaskTrackerStatus(taskTrackerName, localHostname,
>                                     httpPort, taskReports,
>                                     failures);
>             int resultCode = jobClient.emitHeartbeat(status, justStarted);
>             synchronized (this) {
>                 for (Iterator it = runningTasks.values().iterator();
>                      it.hasNext(); ) {
>                     TaskInProgress tip = (TaskInProgress) it.next();
>                     if (tip.runstate != TaskStatus.RUNNING) {
>                         if (tip.getTask().isMapTask()) {
>                             mapTotal--;
>                         } else {
>                             reduceTotal--;
>                         }
>                         it.remove();
>                     }
>                 }
>             }
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 24 11:42:35 2006
Return-Path: 
 <hadoop-dev-return-2703-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 2966 invoked from network); 24 Jul 2006 11:42:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2006 11:42:35 -0000
Received: (qmail 89551 invoked by uid 500); 24 Jul 2006 11:42:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 89527 invoked by uid 500); 24 Jul 2006 11:42:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 89518 invoked by uid 99); 24 Jul 2006 11:42:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 04:42:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 04:42:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B32C671428D
	for <hadoop-dev@lucene.apache.org>; Mon, 24 Jul 2006 11:40:15 +0000 (GMT)
Message-ID: <27098167.1153741215731.JavaMail.jira@brutus>
Date: Mon, 24 Jul 2006 04:40:15 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-54?page=comments#action_12423037 ] 
            
Arun C Murthy commented on HADOOP-54:
-------------------------------------

> I suggest adding the binary append API suggested by Owen and deprecating the old binary append API, but making it work back-compatibly. Thus it should accept pre-compressed (if compression is enabled) values, de-compress them, then call the new append method. 

  My hunch is that we do not need to worry about 'pre-compressed' values since as of today both the 'raw' apis do not honour it... is this true?

  In-fact we could take the route in which 'append' compresses whatever data is passed along, thus possibly compressing data twice. With the 'symmetric' call to next (which decompresses) we give back the data which the user passed along in the first place... I did have a chat with Owen about this and we both felt this could work.

> We unfortunately lose the ability to move individual compressed values around. If a mapper does not touch values, it would be best to only decompress values on reduce nodes, rather than decompress and recompress them on map nodes, since compression can be computationally expensive.

  I can see a way around this if it really will make a difference...

  We can take the path that values are decompressed only 'on demand' i.e. a series of calls to SequenceFile.Reader.next(Writable key) does not need to decompress 'valBuffer' (or even valLengthsBuffer). Hence when we read a compressed 'block' we need not decompress values till we see a call to either SequenceFile.Reader.next(Writable key, Writable value) or SequenceFile.Reader.next(DataOutputBuffer buffer).

  Implementing this 'lazy decompression' of values is slightly more complex... worth it?

-*-*-

  PS:   

  1. SequenceFile.Reader.next(DataOutputBuffer buffer) should be changed to 
     SequenceFile.Reader.next(DataOutputBuffer keyBuffer, DataOutputBuffer valBuffer) similar to the 'raw' append api?

  2. Does it make sense to have compression configurable for both keys and values separately? i.e. let user specify (during creation) whether he preferes to compress 'keys' or 'values' or both? Overkill for now? Maybe makes sense once we move to custom compressors for each?


> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.5.0
>
>         Attachments: VIntCompressionResults.txt
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 24 15:56:37 2006
Return-Path: 
 <hadoop-dev-return-2704-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 5348 invoked from network); 24 Jul 2006 15:56:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2006 15:56:37 -0000
Received: (qmail 47324 invoked by uid 500); 24 Jul 2006 15:56:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47261 invoked by uid 500); 24 Jul 2006 15:56:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47226 invoked by uid 99); 24 Jul 2006 15:56:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 08:56:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 08:56:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 43ED57141F1
	for <hadoop-dev@lucene.apache.org>; Mon, 24 Jul 2006 15:54:15 +0000 (GMT)
Message-ID: <4911238.1153756455275.JavaMail.jira@brutus>
Date: Mon, 24 Jul 2006 08:54:15 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-362) tasks can get lost when reporting
 task completion to the JobTracker has an error
In-Reply-To: <22559656.1152744030813.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-362?page=comments#action_12423089 ] 
            
Owen O'Malley commented on HADOOP-362:
--------------------------------------

The issue isn't that messages get handled out of order, but that messages from a single thread are handled out of order. In theory there shouldn't be a second message from the same thread. However, as we observed, it is possible if the first call times out.

So you wouldn't want to have a global time stamp, just one per a thread on the client. Another approach would be to hash the client thread and only allow a single rpc handler thread to handle rpcs from a single client thread.

> tasks can get lost when reporting task completion to the JobTracker has an error
> --------------------------------------------------------------------------------
>
>                 Key: HADOOP-362
>                 URL: http://issues.apache.org/jira/browse/HADOOP-362
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Devaraj Das
>         Assigned To: Owen O'Malley
>         Attachments: lost-status-updates.patch
>
>
> Basically, the JobTracker used to lose some updates about successful map tasks and it would assume that the tasks are still running (the old progress report is what it used to display in the web page). Now this would cause the reduces to also wait for the map output and they would never receive the output. This would cause the job to appear as if it was hung.
>  
> The following piece of code sends the status of tasks to the JobTracker:
>  
>             synchronized (this) {
>                 for (Iterator it = runningTasks.values().iterator();
>                      it.hasNext(); ) {
>                     TaskInProgress tip = (TaskInProgress) it.next();
>                     TaskStatus status = tip.createStatus();
>                     taskReports.add(status);
>                     if (status.getRunState() != TaskStatus.RUNNING) {
>                         if (tip.getTask().isMapTask()) {
>                             mapTotal--;
>                         } else {
>                             reduceTotal--;
>                         }
>                         it.remove();
>                     }
>                 }
>             }
>  
>             //
>             // Xmit the heartbeat
>             //
>            
>             TaskTrackerStatus status =
>               new TaskTrackerStatus(taskTrackerName, localHostname,
>                                     httpPort, taskReports,
>                                     failures);
>             int resultCode = jobClient.emitHeartbeat(status, justStarted);
>  
>  
> Notice that the completed TIPs are removed from runningTasks data structure. Now, if the emitHeartBeat threw an exception (if it could not communicate with the JobTracker till the IPC timeout expires) then this update is lost. And the next time it sends the hearbeat this completed task's status is missing and hence the JobTracker doesn't know about this completed task. So, one solution to this is to remove the completed TIPs from runningTasks after emitHeartbeat returns. Here is how the new code would look like:
>  
>  
>             synchronized (this) {
>                 for (Iterator it = runningTasks.values().iterator();
>                      it.hasNext(); ) {
>                     TaskInProgress tip = (TaskInProgress) it.next();
>                     TaskStatus status = tip.createStatus();
>                     taskReports.add(status);
>                 }
>             }
>  
>             //
>             // Xmit the heartbeat
>             //
>  
>             TaskTrackerStatus status =
>               new TaskTrackerStatus(taskTrackerName, localHostname,
>                                     httpPort, taskReports,
>                                     failures);
>             int resultCode = jobClient.emitHeartbeat(status, justStarted);
>             synchronized (this) {
>                 for (Iterator it = runningTasks.values().iterator();
>                      it.hasNext(); ) {
>                     TaskInProgress tip = (TaskInProgress) it.next();
>                     if (tip.runstate != TaskStatus.RUNNING) {
>                         if (tip.getTask().isMapTask()) {
>                             mapTotal--;
>                         } else {
>                             reduceTotal--;
>                         }
>                         it.remove();
>                     }
>                 }
>             }
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 24 17:39:35 2006
Return-Path: 
 <hadoop-dev-return-2705-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 45859 invoked from network); 24 Jul 2006 17:39:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2006 17:39:35 -0000
Received: (qmail 47556 invoked by uid 500); 24 Jul 2006 17:39:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47523 invoked by uid 500); 24 Jul 2006 17:39:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47513 invoked by uid 99); 24 Jul 2006 17:39:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 10:39:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 10:39:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CFD687141E4
	for <hadoop-dev@lucene.apache.org>; Mon, 24 Jul 2006 17:37:14 +0000 (GMT)
Message-ID: <4945369.1153762634848.JavaMail.jira@brutus>
Date: Mon, 24 Jul 2006 10:37:14 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-375) Introduce a way for datanodes to
 register their HTTP info ports with the NameNode
In-Reply-To: <28904462.1153478956900.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-375?page=all ]

Devaraj Das updated HADOOP-375:
-------------------------------

    Attachment: content_browsing.new.patch

Since the patch to Hadoop-376 made this patch go out of sync, resubmitting it again with a one line change.

> Introduce a way for datanodes to register their HTTP info ports with the NameNode
> ---------------------------------------------------------------------------------
>
>                 Key: HADOOP-375
>                 URL: http://issues.apache.org/jira/browse/HADOOP-375
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: content_browsing.new.patch, content_browsing.new.patch
>
>
> If we have multiple datanodes within a single machine the Jetty servers (other than the first one) won't be able to bind to the fixed HTTP port. So, one solution is to have the datanodes pick a free port (starting from a configured port value) and then inform namenode about it so that the namenode can then do redirects, etc.
> Johan Oskarson reported this problem. 
> If a computer have a second dfs data dir in the config it doesn't start properly because of:
> Exception in thread "main" java.io.IOException: Problem starting http server
>         at org.apache.hadoop.mapred.StatusHttpServer.start(StatusHttpServer.java:182)
>         at org.apache.hadoop.dfs.DataNode.<init>(DataNode.java:170)
>         at org.apache.hadoop.dfs.DataNode.makeInstanceForDir(DataNode.java:1045)
>         at org.apache.hadoop.dfs.DataNode.run(DataNode.java:999)
>         at org.apache.hadoop.dfs.DataNode.runAndWait(DataNode.java:1015)
>         at org.apache.hadoop.dfs.DataNode.main(DataNode.java:1066)
> Caused by: org.mortbay.util.MultiException[java.net.BindException: Address already in use]
>         at org.mortbay.http.HttpServer.doStart(HttpServer.java:731)
>         at org.mortbay.util.Container.start(Container.java:72)
>         at org.apache.hadoop.mapred.StatusHttpServer.start(StatusHttpServer.java:159)
>         ... 5 more

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 24 17:56:35 2006
Return-Path: 
 <hadoop-dev-return-2706-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51111 invoked from network); 24 Jul 2006 17:56:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2006 17:56:35 -0000
Received: (qmail 90832 invoked by uid 500); 24 Jul 2006 17:56:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 90811 invoked by uid 500); 24 Jul 2006 17:56:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 90802 invoked by uid 99); 24 Jul 2006 17:56:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 10:56:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 10:56:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 206357141F1
	for <hadoop-dev@lucene.apache.org>; Mon, 24 Jul 2006 17:54:16 +0000 (GMT)
Message-ID: <13732384.1153763656130.JavaMail.jira@brutus>
Date: Mon, 24 Jul 2006 10:54:16 -0700 (PDT)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-54?page=comments#action_12423105 ] 
            
eric baldeschwieler commented on HADOOP-54:
-------------------------------------------

Folks...

I'm happy with everything on this thread now, except for the raw API as discussed.  Could folks please consider my suggestion in:

http://issues.apache.org/jira/browse/HADOOP-54#action_12422716

I think this addresses all the concerns about sometimes compressed  data and avoiding the loose of current functionality etc.  I also think that it removes a very dangerous ambiguity that the current & owen's version of raw API permit (what is raw? who can use it...).

Please let me know what you think of this....


> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.5.0
>
>         Attachments: VIntCompressionResults.txt
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 24 18:43:34 2006
Return-Path: 
 <hadoop-dev-return-2707-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 65865 invoked from network); 24 Jul 2006 18:43:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2006 18:43:34 -0000
Received: (qmail 95536 invoked by uid 500); 24 Jul 2006 18:43:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95378 invoked by uid 500); 24 Jul 2006 18:43:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95367 invoked by uid 99); 24 Jul 2006 18:43:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 11:43:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 11:43:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 71ECB71428D
	for <hadoop-dev@lucene.apache.org>; Mon, 24 Jul 2006 18:41:14 +0000 (GMT)
Message-ID: <30840044.1153766474463.JavaMail.jira@brutus>
Date: Mon, 24 Jul 2006 11:41:14 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-382) add a unit test for multiple datanodes
 in a machine
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

add a unit test for multiple datanodes in a machine
---------------------------------------------------

                 Key: HADOOP-382
                 URL: http://issues.apache.org/jira/browse/HADOOP-382
             Project: Hadoop
          Issue Type: Test
          Components: dfs
            Reporter: Yoram Arnon


recently we saw a bug present itself only when multiple data nodes are started on a single machine.
A unit test that starts multiple data nodes would expose such bugs before they happen in a real installation.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 24 20:23:35 2006
Return-Path: 
 <hadoop-dev-return-2708-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 13554 invoked from network); 24 Jul 2006 20:23:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2006 20:23:35 -0000
Received: (qmail 49602 invoked by uid 500); 24 Jul 2006 20:23:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49576 invoked by uid 500); 24 Jul 2006 20:23:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49567 invoked by uid 99); 24 Jul 2006 20:23:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 13:23:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 13:23:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 64746714294
	for <hadoop-dev@lucene.apache.org>; Mon, 24 Jul 2006 20:21:15 +0000 (GMT)
Message-ID: <31754785.1153772475408.JavaMail.jira@brutus>
Date: Mon, 24 Jul 2006 13:21:15 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-382) add a unit test for multiple
 datanodes in a machine
In-Reply-To: <30840044.1153766474463.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-382?page=all ]

Milind Bhandarkar reassigned HADOOP-382:
----------------------------------------

    Assignee: Milind Bhandarkar

> add a unit test for multiple datanodes in a machine
> ---------------------------------------------------
>
>                 Key: HADOOP-382
>                 URL: http://issues.apache.org/jira/browse/HADOOP-382
>             Project: Hadoop
>          Issue Type: Test
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: Milind Bhandarkar
>
> recently we saw a bug present itself only when multiple data nodes are started on a single machine.
> A unit test that starts multiple data nodes would expose such bugs before they happen in a real installation.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 24 20:52:34 2006
Return-Path: 
 <hadoop-dev-return-2709-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23899 invoked from network); 24 Jul 2006 20:52:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2006 20:52:34 -0000
Received: (qmail 38840 invoked by uid 500); 24 Jul 2006 20:52:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38735 invoked by uid 500); 24 Jul 2006 20:52:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38716 invoked by uid 99); 24 Jul 2006 20:52:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 13:52:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 13:52:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id ECAC27141F1
	for <hadoop-dev@lucene.apache.org>; Mon, 24 Jul 2006 20:50:13 +0000 (GMT)
Message-ID: <30818792.1153774213966.JavaMail.jira@brutus>
Date: Mon, 24 Jul 2006 13:50:13 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-383) unit tests fail on windows
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

unit tests fail on windows
--------------------------

                 Key: HADOOP-383
                 URL: http://issues.apache.org/jira/browse/HADOOP-383
             Project: Hadoop
          Issue Type: Bug
          Components: contrib/streaming
    Affects Versions: 0.5.0
            Reporter: Owen O'Malley
         Assigned To: Michel Tourn
             Fix For: 0.5.0


When I run the "ant test" target under Windows, I get the following exception in the logs for the streaming unit tests. The unit tests need to run under Windows, if it is going to be a supported platform. So we either need to remove the streaming unit tests or make them work.

Testsuite: org.apache.hadoop.streaming.TestStreaming
Tests run: 1, Failures: 1, Errors: 0, Time elapsed: 0.172 sec

Testcase: testCommandLine took 0.172 sec
        FAILED
java.lang.RuntimeException: Operating system Windows XP not supported by this class
        at org.apache.hadoop.streaming.Environment.<init>(Environment.java:47)
        at org.apache.hadoop.streaming.StreamJob.init(StreamJob.java:68)
        at org.apache.hadoop.streaming.StreamJob.go(StreamJob.java:55)
        at org.apache.hadoop.streaming.TestStreaming.testCommandLine(Unknown Source)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at junit.framework.TestCase.runTest(TestCase.java:154)
        at junit.framework.TestCase.runBare(TestCase.java:127)
        at junit.framework.TestResult$1.protect(TestResult.java:106)
        at junit.framework.TestResult.runProtected(TestResult.java:124)
        at junit.framework.TestResult.run(TestResult.java:109)
        at junit.framework.TestCase.run(TestCase.java:118)
        at junit.framework.TestSuite.runTest(TestSuite.java:208)
        at junit.framework.TestSuite.run(TestSuite.java:203)
        at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:2
97)
        at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.jav
a:672)
        at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:
567)



-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 24 21:35:35 2006
Return-Path: 
 <hadoop-dev-return-2710-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 36830 invoked from network); 24 Jul 2006 21:35:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2006 21:35:35 -0000
Received: (qmail 13698 invoked by uid 500); 24 Jul 2006 21:35:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13665 invoked by uid 500); 24 Jul 2006 21:35:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13656 invoked by uid 99); 24 Jul 2006 21:35:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 14:35:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 14:35:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D3DE77141F1
	for <hadoop-dev@lucene.apache.org>; Mon, 24 Jul 2006 21:33:15 +0000 (GMT)
Message-ID: <24881223.1153776795864.JavaMail.jira@brutus>
Date: Mon, 24 Jul 2006 14:33:15 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-54?page=comments#action_12423167 ] 
            
Owen O'Malley commented on HADOOP-54:
-------------------------------------

Eric, I don't see how to implement both block compression, which is a huge win, and access to a pre-decompression representation. Especially if what you want to do with the pre-decompression representation is sorting or merging. Therefore, I was (and am) proposing that the "raw" access is a little less raw and that the byte[] representation is always decompressed. Am I missing something? This is an semantic change to the "raw" SequenceFile API, but I think it is required to get block-level compression.

On a slight tangent, I think that the SequenceFile.Reader should not decompress the entire block but just enough to get the next key/value pair.

> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.5.0
>
>         Attachments: VIntCompressionResults.txt
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 24 21:46:33 2006
Return-Path: 
 <hadoop-dev-return-2711-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 38812 invoked from network); 24 Jul 2006 21:46:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2006 21:46:33 -0000
Received: (qmail 23627 invoked by uid 500); 24 Jul 2006 21:46:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23467 invoked by uid 500); 24 Jul 2006 21:46:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23458 invoked by uid 99); 24 Jul 2006 21:46:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 14:46:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 14:46:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 18A6F7141F0
	for <hadoop-dev@lucene.apache.org>; Mon, 24 Jul 2006 21:44:14 +0000 (GMT)
Message-ID: <14868747.1153777454097.JavaMail.jira@brutus>
Date: Mon, 24 Jul 2006 14:44:14 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-384) improved error messages for file
 checksum errors
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

improved error messages for file checksum errors
------------------------------------------------

                 Key: HADOOP-384
                 URL: http://issues.apache.org/jira/browse/HADOOP-384
             Project: Hadoop
          Issue Type: Bug
          Components: fs
    Affects Versions: 0.4.0
            Reporter: Owen O'Malley
         Assigned To: Owen O'Malley
            Priority: Minor
             Fix For: 0.5.0
         Attachments: checksum-err-detail.patch

Improves the messages on a couple of the failures we've been seeing to try and get enough information to identifiy the problem.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 24 21:46:34 2006
Return-Path: 
 <hadoop-dev-return-2712-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 38847 invoked from network); 24 Jul 2006 21:46:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2006 21:46:34 -0000
Received: (qmail 23813 invoked by uid 500); 24 Jul 2006 21:46:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23654 invoked by uid 500); 24 Jul 2006 21:46:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23645 invoked by uid 99); 24 Jul 2006 21:46:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 14:46:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 14:46:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1B1AF714283
	for <hadoop-dev@lucene.apache.org>; Mon, 24 Jul 2006 21:44:15 +0000 (GMT)
Message-ID: <31251303.1153777455108.JavaMail.jira@brutus>
Date: Mon, 24 Jul 2006 14:44:15 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-384) improved error messages for file
 checksum errors
In-Reply-To: <14868747.1153777454097.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-384?page=all ]

Owen O'Malley updated HADOOP-384:
---------------------------------

    Attachment: checksum-err-detail.patch

> improved error messages for file checksum errors
> ------------------------------------------------
>
>                 Key: HADOOP-384
>                 URL: http://issues.apache.org/jira/browse/HADOOP-384
>             Project: Hadoop
>          Issue Type: Bug
>          Components: fs
>    Affects Versions: 0.4.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>            Priority: Minor
>             Fix For: 0.5.0
>
>         Attachments: checksum-err-detail.patch
>
>
> Improves the messages on a couple of the failures we've been seeing to try and get enough information to identifiy the problem.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 24 22:00:34 2006
Return-Path: 
 <hadoop-dev-return-2713-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43533 invoked from network); 24 Jul 2006 22:00:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2006 22:00:34 -0000
Received: (qmail 44963 invoked by uid 500); 24 Jul 2006 22:00:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 44804 invoked by uid 500); 24 Jul 2006 22:00:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 44791 invoked by uid 99); 24 Jul 2006 22:00:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 15:00:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 15:00:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AFD937141E8
	for <hadoop-dev@lucene.apache.org>; Mon, 24 Jul 2006 21:58:14 +0000 (GMT)
Message-ID: <16884409.1153778294717.JavaMail.jira@brutus>
Date: Mon, 24 Jul 2006 14:58:14 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-344) TaskTracker passes incorrect file path
 to DF under cygwin
In-Reply-To: <3940552.1152137609862.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-344?page=all ]

Konstantin Shvachko updated HADOOP-344:
---------------------------------------

    Attachment: DFConstructor.patch

I did two variants.
- DFConstructor.patch converts path to the canonical form inside the DF constructor.
I also changed FSDataset() to just simply return the path without canonicalizing it.
- DFPath2File.patch changes the path parameter type from String to File.
I String version constructors are deprecated.
I like this version better for 2 reasons: it makes it clear for the callers what needs to
be passed, and it does less File to String conversions.


> TaskTracker passes incorrect file path to DF under cygwin
> ---------------------------------------------------------
>
>                 Key: HADOOP-344
>                 URL: http://issues.apache.org/jira/browse/HADOOP-344
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.4.0
>         Environment: Windows
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>         Attachments: DFConstructor.patch, TaskTrackerDF.patch
>
>
> The path that is passed is OS dependent. The File abstraction should be used in order to make it universal.
> I'm attaching a patch that does that.
> We might want to change the path parameter for DF. Making it File rather than String should prevent us from 
> bugs like that in the future.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 24 22:08:34 2006
Return-Path: 
 <hadoop-dev-return-2714-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 45864 invoked from network); 24 Jul 2006 22:08:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2006 22:08:34 -0000
Received: (qmail 61032 invoked by uid 500); 24 Jul 2006 22:08:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 60875 invoked by uid 500); 24 Jul 2006 22:08:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 60866 invoked by uid 99); 24 Jul 2006 22:08:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 15:08:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 15:08:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B44017141E8
	for <hadoop-dev@lucene.apache.org>; Mon, 24 Jul 2006 22:06:14 +0000 (GMT)
Message-ID: <13257209.1153778774735.JavaMail.jira@brutus>
Date: Mon, 24 Jul 2006 15:06:14 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-344) TaskTracker passes incorrect file path
 to DF under cygwin
In-Reply-To: <3940552.1152137609862.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-344?page=all ]

Konstantin Shvachko updated HADOOP-344:
---------------------------------------

    Attachment: DFPath2File.patch

> TaskTracker passes incorrect file path to DF under cygwin
> ---------------------------------------------------------
>
>                 Key: HADOOP-344
>                 URL: http://issues.apache.org/jira/browse/HADOOP-344
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.4.0
>         Environment: Windows
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>         Attachments: DFConstructor.patch, DFPath2File.patch, TaskTrackerDF.patch
>
>
> The path that is passed is OS dependent. The File abstraction should be used in order to make it universal.
> I'm attaching a patch that does that.
> We might want to change the path parameter for DF. Making it File rather than String should prevent us from 
> bugs like that in the future.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 24 22:23:35 2006
Return-Path: 
 <hadoop-dev-return-2715-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 49637 invoked from network); 24 Jul 2006 22:23:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2006 22:23:35 -0000
Received: (qmail 80439 invoked by uid 500); 24 Jul 2006 22:23:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 80413 invoked by uid 500); 24 Jul 2006 22:23:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 80404 invoked by uid 99); 24 Jul 2006 22:23:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 15:23:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 15:23:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 34E927141F0
	for <hadoop-dev@lucene.apache.org>; Mon, 24 Jul 2006 22:21:15 +0000 (GMT)
Message-ID: <14192252.1153779675214.JavaMail.jira@brutus>
Date: Mon, 24 Jul 2006 15:21:15 -0700 (PDT)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-383) unit tests fail on windows
In-Reply-To: <30818792.1153774213966.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-383?page=all ]

Michel Tourn updated HADOOP-383:
--------------------------------

    Attachment: winenv.patch

The Environment code used was a little out-of-date:
-      if (OS.equals("Windows NT")) {
+      if (OS.indexOf("Windows") > -1) {

With this patch,
I successfully ran ant test-contrib on Windows XP.


> unit tests fail on windows
> --------------------------
>
>                 Key: HADOOP-383
>                 URL: http://issues.apache.org/jira/browse/HADOOP-383
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>    Affects Versions: 0.5.0
>            Reporter: Owen O'Malley
>         Assigned To: Michel Tourn
>             Fix For: 0.5.0
>
>         Attachments: winenv.patch
>
>
> When I run the "ant test" target under Windows, I get the following exception in the logs for the streaming unit tests. The unit tests need to run under Windows, if it is going to be a supported platform. So we either need to remove the streaming unit tests or make them work.
> Testsuite: org.apache.hadoop.streaming.TestStreaming
> Tests run: 1, Failures: 1, Errors: 0, Time elapsed: 0.172 sec
> Testcase: testCommandLine took 0.172 sec
>         FAILED
> java.lang.RuntimeException: Operating system Windows XP not supported by this class
>         at org.apache.hadoop.streaming.Environment.<init>(Environment.java:47)
>         at org.apache.hadoop.streaming.StreamJob.init(StreamJob.java:68)
>         at org.apache.hadoop.streaming.StreamJob.go(StreamJob.java:55)
>         at org.apache.hadoop.streaming.TestStreaming.testCommandLine(Unknown Source)
>         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
>         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>         at java.lang.reflect.Method.invoke(Method.java:585)
>         at junit.framework.TestCase.runTest(TestCase.java:154)
>         at junit.framework.TestCase.runBare(TestCase.java:127)
>         at junit.framework.TestResult$1.protect(TestResult.java:106)
>         at junit.framework.TestResult.runProtected(TestResult.java:124)
>         at junit.framework.TestResult.run(TestResult.java:109)
>         at junit.framework.TestCase.run(TestCase.java:118)
>         at junit.framework.TestSuite.runTest(TestSuite.java:208)
>         at junit.framework.TestSuite.run(TestSuite.java:203)
>         at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:2
> 97)
>         at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.jav
> a:672)
>         at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:
> 567)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 25 00:40:34 2006
Return-Path: 
 <hadoop-dev-return-2716-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 83004 invoked from network); 25 Jul 2006 00:40:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 00:40:34 -0000
Received: (qmail 57742 invoked by uid 500); 25 Jul 2006 00:40:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 57712 invoked by uid 500); 25 Jul 2006 00:40:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 57698 invoked by uid 99); 25 Jul 2006 00:40:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 17:40:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 17:40:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EE98B7141F1
	for <hadoop-dev@lucene.apache.org>; Tue, 25 Jul 2006 00:38:13 +0000 (GMT)
Message-ID: <19912577.1153787893974.JavaMail.jira@brutus>
Date: Mon, 24 Jul 2006 17:38:13 -0700 (PDT)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-385) rcc does not generate correct Java
 code for the field of a record type
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

rcc does not generate correct Java code for the field of a record type
----------------------------------------------------------------------

                 Key: HADOOP-385
                 URL: http://issues.apache.org/jira/browse/HADOOP-385
             Project: Hadoop
          Issue Type: Bug
    Affects Versions: 0.4.0
            Reporter: Hairong Kuang
         Assigned To: Milind Bhandarkar


If  a field of a Jute record  is also a Jute record and the target language is Java, rcc does not generate correct field name, correct code for deserializing the field. The access modifier "private" of the validation method causes problem for validating nested records.

In addition, rcc can not handle the case when a comment started with "//" also contains the string "//".

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 25 02:33:35 2006
Return-Path: 
 <hadoop-dev-return-2718-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 13597 invoked from network); 25 Jul 2006 02:33:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 02:33:35 -0000
Received: (qmail 47441 invoked by uid 500); 25 Jul 2006 02:33:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47411 invoked by uid 500); 25 Jul 2006 02:33:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47402 invoked by uid 99); 25 Jul 2006 02:33:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 19:33:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 19:33:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B25C47141F1
	for <hadoop-dev@lucene.apache.org>; Tue, 25 Jul 2006 02:31:15 +0000 (GMT)
Message-ID: <33150354.1153794675728.JavaMail.jira@brutus>
Date: Mon, 24 Jul 2006 19:31:15 -0700 (PDT)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-54?page=comments#action_12423218 ] 
            
eric baldeschwieler commented on HADOOP-54:
-------------------------------------------

I completely agree that you should incrementally decompress.  The right answer might be just enough for the next entry or a small buffer,  should performance test that.

My point on raw is that you can return a reference tuple in an object:

   <raw bytes,is compressed flag, compressor class> used in a reference

Then you read the bytes, decompressed if they come from a block compressed or an uncompressed file, compressed if they come from an item compressed file.

Then you pass this reference to the target sequence file's raw write method.  The target then compresses or decompresses as needed.

Since you package all of this up behind an API, folks will not get confused into using this essentially internal API to do the wrong thing  and it will efficiently passed item compressed objects from one such stream to another if given the chance.

This may be worth considering, since sorts and merges may often operate on item compressed values and this will avoid a lot of spurious decompression/compression.

PS we probably should only bother doing this for values.


> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.5.0
>
>         Attachments: VIntCompressionResults.txt
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 25 02:33:04 2006
Return-Path: 
 <hadoop-dev-return-2717-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 13496 invoked from network); 25 Jul 2006 02:33:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 02:33:04 -0000
Received: (qmail 47114 invoked by uid 500); 25 Jul 2006 02:33:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47084 invoked by uid 500); 25 Jul 2006 02:33:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47075 invoked by uid 99); 25 Jul 2006 02:33:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 19:33:03 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.126.228.150] (HELO rsmtp2.corp.yahoo.com)
 (207.126.228.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 19:33:02 -0700
Received: from [10.0.1.2] ([172.21.179.131])
	(authenticated bits=0)
	by rsmtp2.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k6P2WV6n035553
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Mon, 24 Jul 2006 19:32:31 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=2yWdQG2EbWcEOSqJcMA9CHMTieBFeFwbB0doFTiplc0QlnD9pNyG4cyx28z81+2W
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <24881223.1153776795864.JavaMail.jira@brutus>
References: <24881223.1153776795864.JavaMail.jira@brutus>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <615A35F8-2445-4F87-B58B-41CCFF33191C@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Eric Baldeschwieler <eric14@yahoo-inc.com>
Subject: Re: [jira] Commented: (HADOOP-54) SequenceFile should compress
 blocks, not individual entries
Date: Mon, 24 Jul 2006 19:32:29 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I completely agree that you should incrementally decompress.  The  
right answer might be just enough for the next entry or a small  
buffer,  should performance test that.

My point on raw is that you can return a reference tuple in an object:

    <raw bytes,is compressed flag, compressor class> used in a reference

Then you read the bytes, decompressed if they come from a block  
compressed or an uncompressed file, compressed if they come from an  
item compressed file.

Then you pass this reference to the target sequence file's raw write  
method.  The target then compresses or decompresses as needed.

Since you package all of this up behind an API, folks will not get  
confused into using this essentially internal API to do the wrong  
thing  and it will efficiently passed item compressed objects from  
one such stream to another if given the chance.

This may be worth considering, since sorts and merges may often  
operate on item compressed values and this will avoid a lot of  
spurious decompression/compression.

PS we probably should only bother doing this for values.

On Jul 24, 2006, at 2:33 PM, Owen O'Malley (JIRA) wrote:

>     [ http://issues.apache.org/jira/browse/HADOOP-54? 
> page=comments#action_12423167 ]
>
> Owen O'Malley commented on HADOOP-54:
> -------------------------------------
>
> Eric, I don't see how to implement both block compression, which is  
> a huge win, and access to a pre-decompression representation.  
> Especially if what you want to do with the pre-decompression  
> representation is sorting or merging. Therefore, I was (and am)  
> proposing that the "raw" access is a little less raw and that the  
> byte[] representation is always decompressed. Am I missing  
> something? This is an semantic change to the "raw" SequenceFile  
> API, but I think it is required to get block-level compression.
>
> On a slight tangent, I think that the SequenceFile.Reader should  
> not decompress the entire block but just enough to get the next key/ 
> value pair.
>
>> SequenceFile should compress blocks, not individual entries
>> -----------------------------------------------------------
>>
>>                 Key: HADOOP-54
>>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>>             Project: Hadoop
>>          Issue Type: Improvement
>>          Components: io
>>    Affects Versions: 0.2.0
>>            Reporter: Doug Cutting
>>         Assigned To: Arun C Murthy
>>             Fix For: 0.5.0
>>
>>         Attachments: VIntCompressionResults.txt
>>
>>
>> SequenceFile will optionally compress individual values.  But both  
>> compression and performance would be much better if sequences of  
>> keys and values are compressed together.  Sync marks should only  
>> be placed between blocks.  This will require some changes to  
>> MapFile too, so that all file positions stored there are the  
>> positions of blocks, not entries within blocks.  Probably this can  
>> be accomplished by adding a getBlockStartPosition() method to  
>> SequenceFile.Writer.
>
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the  
> administrators: http://issues.apache.org/jira/secure/ 
> Administrators.jspa
> -
> For more information on JIRA, see: http://www.atlassian.com/ 
> software/jira
>
>


From MAILER-DAEMON Tue Jul 25 02:50:35 2006
Return-Path: 
 <hadoop-dev-return-2719-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 15507 invoked from network); 25 Jul 2006 02:50:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 02:50:35 -0000
Received: (qmail 54999 invoked by uid 500); 25 Jul 2006 02:50:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 54980 invoked by uid 500); 25 Jul 2006 02:50:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 54971 invoked by uid 99); 25 Jul 2006 02:50:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 19:50:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 19:50:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4AC2441000A
	for <hadoop-dev@lucene.apache.org>; Tue, 25 Jul 2006 02:48:15 +0000 (GMT)
Message-ID: <27452481.1153795695303.JavaMail.jira@brutus>
Date: Mon, 24 Jul 2006 19:48:15 -0700 (PDT)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-362) tasks can get lost when reporting
 task completion to the JobTracker has an error
In-Reply-To: <22559656.1152744030813.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-362?page=comments#action_12423221 ] 
            
eric baldeschwieler commented on HADOOP-362:
--------------------------------------------

+1 to the second idea (unique hashcode / client thread, forcing serialization the server via mapping it to the same thread ID)


> tasks can get lost when reporting task completion to the JobTracker has an error
> --------------------------------------------------------------------------------
>
>                 Key: HADOOP-362
>                 URL: http://issues.apache.org/jira/browse/HADOOP-362
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Devaraj Das
>         Assigned To: Owen O'Malley
>         Attachments: lost-status-updates.patch
>
>
> Basically, the JobTracker used to lose some updates about successful map tasks and it would assume that the tasks are still running (the old progress report is what it used to display in the web page). Now this would cause the reduces to also wait for the map output and they would never receive the output. This would cause the job to appear as if it was hung.
>  
> The following piece of code sends the status of tasks to the JobTracker:
>  
>             synchronized (this) {
>                 for (Iterator it = runningTasks.values().iterator();
>                      it.hasNext(); ) {
>                     TaskInProgress tip = (TaskInProgress) it.next();
>                     TaskStatus status = tip.createStatus();
>                     taskReports.add(status);
>                     if (status.getRunState() != TaskStatus.RUNNING) {
>                         if (tip.getTask().isMapTask()) {
>                             mapTotal--;
>                         } else {
>                             reduceTotal--;
>                         }
>                         it.remove();
>                     }
>                 }
>             }
>  
>             //
>             // Xmit the heartbeat
>             //
>            
>             TaskTrackerStatus status =
>               new TaskTrackerStatus(taskTrackerName, localHostname,
>                                     httpPort, taskReports,
>                                     failures);
>             int resultCode = jobClient.emitHeartbeat(status, justStarted);
>  
>  
> Notice that the completed TIPs are removed from runningTasks data structure. Now, if the emitHeartBeat threw an exception (if it could not communicate with the JobTracker till the IPC timeout expires) then this update is lost. And the next time it sends the hearbeat this completed task's status is missing and hence the JobTracker doesn't know about this completed task. So, one solution to this is to remove the completed TIPs from runningTasks after emitHeartbeat returns. Here is how the new code would look like:
>  
>  
>             synchronized (this) {
>                 for (Iterator it = runningTasks.values().iterator();
>                      it.hasNext(); ) {
>                     TaskInProgress tip = (TaskInProgress) it.next();
>                     TaskStatus status = tip.createStatus();
>                     taskReports.add(status);
>                 }
>             }
>  
>             //
>             // Xmit the heartbeat
>             //
>  
>             TaskTrackerStatus status =
>               new TaskTrackerStatus(taskTrackerName, localHostname,
>                                     httpPort, taskReports,
>                                     failures);
>             int resultCode = jobClient.emitHeartbeat(status, justStarted);
>             synchronized (this) {
>                 for (Iterator it = runningTasks.values().iterator();
>                      it.hasNext(); ) {
>                     TaskInProgress tip = (TaskInProgress) it.next();
>                     if (tip.runstate != TaskStatus.RUNNING) {
>                         if (tip.getTask().isMapTask()) {
>                             mapTotal--;
>                         } else {
>                             reduceTotal--;
>                         }
>                         it.remove();
>                     }
>                 }
>             }
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 25 04:31:36 2006
Return-Path: 
 <hadoop-dev-return-2720-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33456 invoked from network); 25 Jul 2006 04:31:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 04:31:36 -0000
Received: (qmail 26849 invoked by uid 500); 25 Jul 2006 04:31:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26821 invoked by uid 500); 25 Jul 2006 04:31:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26808 invoked by uid 99); 25 Jul 2006 04:31:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 21:31:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 21:31:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AFE1D714283
	for <hadoop-dev@lucene.apache.org>; Tue, 25 Jul 2006 04:29:15 +0000 (GMT)
Message-ID: <21146665.1153801755717.JavaMail.jira@brutus>
Date: Mon, 24 Jul 2006 21:29:15 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-54?page=comments#action_12423227 ] 
            
Owen O'Malley commented on HADOOP-54:
-------------------------------------

My point is that the raw bytes are useless except in their original context.

Say my value is compressed as the byte stream: 12, 34, 56, 78
If I'm merging 100 files, I can't write 12, 34, 56, 78 to the output file and expect it to work, because naturally the compressed bytes depend on the state of the compressor.

So your reference tuple, would need to be:

<raw bytes, compressor class, compressor state>

where the compressor state is some compressor specific data. In the case of gzip, it is the last 32k of decompressed byte or whatever.

And that assumes that no one ever tries to use a compression algorithm that uses partial bytes.

It looks to me like you'd add a lot of complexity for very little gain. You'd only win if you had large compressed values that you didn't really need to look at or use for anything. (For example, if you wanted to take a table that was url -> html document and generate the number of urls in each domain.) 

> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.5.0
>
>         Attachments: VIntCompressionResults.txt
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 25 04:50:36 2006
Return-Path: 
 <hadoop-dev-return-2721-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37072 invoked from network); 25 Jul 2006 04:50:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 04:50:36 -0000
Received: (qmail 46666 invoked by uid 500); 25 Jul 2006 04:50:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 46639 invoked by uid 500); 25 Jul 2006 04:50:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46630 invoked by uid 99); 25 Jul 2006 04:50:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 21:50:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 21:50:35 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 48E747141F1
	for <hadoop-dev@lucene.apache.org>; Tue, 25 Jul 2006 04:48:16 +0000 (GMT)
Message-ID: <31805225.1153802896294.JavaMail.jira@brutus>
Date: Mon, 24 Jul 2006 21:48:16 -0700 (PDT)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-54?page=comments#action_12423229 ] 
            
eric baldeschwieler commented on HADOOP-54:
-------------------------------------------

The point is that you can carry object compressed data through the system compressed.  Block compressed data clearly needs to be uncompressed.

In a lot of situations this makes block compression undesirable.  We don't want to loose an important current performance optimization to add block compression if we can avoid it.

> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.5.0
>
>         Attachments: VIntCompressionResults.txt
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 25 07:31:41 2006
Return-Path: 
 <hadoop-dev-return-2722-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 80747 invoked from network); 25 Jul 2006 07:31:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 07:31:41 -0000
Received: (qmail 16285 invoked by uid 500); 25 Jul 2006 07:31:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 16194 invoked by uid 500); 25 Jul 2006 07:31:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 16185 invoked by uid 99); 25 Jul 2006 07:31:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 00:31:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 00:31:39 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2345941000A
	for <hadoop-dev@lucene.apache.org>; Tue, 25 Jul 2006 07:29:15 +0000 (GMT)
Message-ID: <13742551.1153812555134.JavaMail.jira@brutus>
Date: Tue, 25 Jul 2006 00:29:15 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-367) Static blocks do not automatically
 run when a class is loaded in Java 5.0
In-Reply-To: <22771983.1153174453937.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-367?page=comments#action_12423251 ] 
            
Doug Cutting commented on HADOOP-367:
-------------------------------------

Will the setAccessable trick used in JobConf.newInstance() work here too?  I hope it is possible to have non-public classes as parameters in non-public RPC protocols.  For implementation flexibility we'd like to keep some protocols package-protected, so that our only back-compatibility burdens are public, client APIs.

> Static blocks do not automatically run when a class is loaded in Java 5.0
> -------------------------------------------------------------------------
>
>                 Key: HADOOP-367
>                 URL: http://issues.apache.org/jira/browse/HADOOP-367
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.4.0
>         Environment: Java 5.0
>            Reporter: Benjamin Reed
>
> There seems to be a change that happened between 1.4 and 1.5 with respect to static initializers. I can't find this documented, but I can reproduce with a very simple program. Basically, a static initializer is not called unless a static member/method of the class is accessed or an instance is created. This is actually what the JLS says, but until 1.5 the static initializers ran when the class was loaded. Note that this behavior only occurs when running with the 1.5 JRE AND compiling for 1.5.
> For many Writables this isn't an issue, so the fallback behavior of the WritableFactory works, but Block is package private, so loadEdits fails when called from org.apache.hadoop.io.ArrayWritable.readFields() yielding the following trace:
> Caused by: java.lang.RuntimeException: java.lang.IllegalAccessException: Class org.apache.hadoop.io.WritableFactories can not access a member of class org.apache.hadoop.dfs.Block with modifiers "public"
>         at org.apache.hadoop.io.WritableFactories.newInstance(WritableFactories.java:49)
>         at org.apache.hadoop.io.ArrayWritable.readFields(ArrayWritable.java:81)
>         at org.apache.hadoop.dfs.FSDirectory.loadFSEdits(FSDirectory.java:532)
>         at org.apache.hadoop.dfs.FSDirectory.loadFSImage(FSDirectory.java:470)
>         at org.apache.hadoop.dfs.FSDirectory.<init>(FSDirectory.java:307)
>         at org.apache.hadoop.dfs.FSNamesystem.<init>(FSNamesystem.java:177)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:91)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:84)
>         at org.apache.hadoop.dfs.NameNode.main(NameNode.java:491)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 25 07:42:35 2006
Return-Path: 
 <hadoop-dev-return-2723-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 83986 invoked from network); 25 Jul 2006 07:42:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 07:42:35 -0000
Received: (qmail 29733 invoked by uid 500); 25 Jul 2006 07:42:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 29571 invoked by uid 500); 25 Jul 2006 07:42:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 29562 invoked by uid 99); 25 Jul 2006 07:42:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 00:42:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 00:42:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C41AA71428E
	for <hadoop-dev@lucene.apache.org>; Tue, 25 Jul 2006 07:40:14 +0000 (GMT)
Message-ID: <4577297.1153813214800.JavaMail.jira@brutus>
Date: Tue, 25 Jul 2006 00:40:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-377) Configuration does not handle URL
In-Reply-To: <29286.1153504213953.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-377?page=comments#action_12423252 ] 
            
Doug Cutting commented on HADOOP-377:
-------------------------------------

So the URL is a reference to something on the CLASSPATH?  Couldn't you simply add the String "hadoop-client-xml", since that would do the same thing?

> Configuration does not handle URL
> ---------------------------------
>
>                 Key: HADOOP-377
>                 URL: http://issues.apache.org/jira/browse/HADOOP-377
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Jean-Baptiste Quenot
>         Attachments: 20060721-hadoop-Configuration-URL
>
>
> Current Configuration allows:
> * <String> pointing to a resource in the classpath
> * <Path> local path on the file system
> The attached patch handles java.net.URL.  We use it to load hadoop-client.xml from a JAR.
> Thanks in advance!

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 25 07:59:35 2006
Return-Path: 
 <hadoop-dev-return-2724-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 90846 invoked from network); 25 Jul 2006 07:59:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 07:59:35 -0000
Received: (qmail 56767 invoked by uid 500); 25 Jul 2006 07:59:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 56605 invoked by uid 500); 25 Jul 2006 07:59:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 56596 invoked by uid 99); 25 Jul 2006 07:59:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 00:59:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 00:59:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B8239714283
	for <hadoop-dev@lucene.apache.org>; Tue, 25 Jul 2006 07:57:14 +0000 (GMT)
Message-ID: <7004636.1153814234751.JavaMail.jira@brutus>
Date: Tue, 25 Jul 2006 00:57:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-381) keeping files for tasks that match
 regex on task id
In-Reply-To: <7228594.1153526714168.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-381?page=all ]

Doug Cutting resolved HADOOP-381.
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Owen!

> keeping files for tasks that match regex on task id
> ---------------------------------------------------
>
>                 Key: HADOOP-381
>                 URL: http://issues.apache.org/jira/browse/HADOOP-381
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.4.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.5.0
>
>         Attachments: keep-task-file-pattern.patch
>
>
> For debugging map/reduce jobs, if a single task is producing bad results, but *not* failing, it is hard to debug the problem. This patch lets you set a pattern for task ids that will keep their files from being deleted when the task and job complete. This allows the developer to run the task in the IsolationRunner under the debugger.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 25 08:15:35 2006
Return-Path: 
 <hadoop-dev-return-2725-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99397 invoked from network); 25 Jul 2006 08:15:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 08:15:35 -0000
Received: (qmail 71901 invoked by uid 500); 25 Jul 2006 08:15:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 71877 invoked by uid 500); 25 Jul 2006 08:15:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 71868 invoked by uid 99); 25 Jul 2006 08:15:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 01:15:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 01:15:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id ACF86714283
	for <hadoop-dev@lucene.apache.org>; Tue, 25 Jul 2006 08:13:14 +0000 (GMT)
Message-ID: <32218011.1153815194705.JavaMail.jira@brutus>
Date: Tue, 25 Jul 2006 01:13:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-375) Introduce a way for datanodes to
 register their HTTP info ports with the NameNode
In-Reply-To: <28904462.1153478956900.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-375?page=comments#action_12423263 ] 
            
Doug Cutting commented on HADOOP-375:
-------------------------------------

I'm confused by the 'started' field added to StatusHttpServer.  It is set at the end of the 'start' method.  Then in DataNode, you add the code:

         this.infoServer.start();
+        while (!this.infoServer.started()) {
+          try {
+            wait(1);
+          } catch (InterruptedException ie){}
+        }
+        infoPort = this.infoServer.getPort();

Won't started() always be true here?  Why the loop?  Why call wait(1)?  Wait() is used with notify(), and there are no calls to notify(), and a 1ms wait makes for a rather tight loop.  Did you mean Thread.sleep(1000)?



> Introduce a way for datanodes to register their HTTP info ports with the NameNode
> ---------------------------------------------------------------------------------
>
>                 Key: HADOOP-375
>                 URL: http://issues.apache.org/jira/browse/HADOOP-375
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: content_browsing.new.patch, content_browsing.new.patch
>
>
> If we have multiple datanodes within a single machine the Jetty servers (other than the first one) won't be able to bind to the fixed HTTP port. So, one solution is to have the datanodes pick a free port (starting from a configured port value) and then inform namenode about it so that the namenode can then do redirects, etc.
> Johan Oskarson reported this problem. 
> If a computer have a second dfs data dir in the config it doesn't start properly because of:
> Exception in thread "main" java.io.IOException: Problem starting http server
>         at org.apache.hadoop.mapred.StatusHttpServer.start(StatusHttpServer.java:182)
>         at org.apache.hadoop.dfs.DataNode.<init>(DataNode.java:170)
>         at org.apache.hadoop.dfs.DataNode.makeInstanceForDir(DataNode.java:1045)
>         at org.apache.hadoop.dfs.DataNode.run(DataNode.java:999)
>         at org.apache.hadoop.dfs.DataNode.runAndWait(DataNode.java:1015)
>         at org.apache.hadoop.dfs.DataNode.main(DataNode.java:1066)
> Caused by: org.mortbay.util.MultiException[java.net.BindException: Address already in use]
>         at org.mortbay.http.HttpServer.doStart(HttpServer.java:731)
>         at org.mortbay.util.Container.start(Container.java:72)
>         at org.apache.hadoop.mapred.StatusHttpServer.start(StatusHttpServer.java:159)
>         ... 5 more

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 25 08:29:36 2006
Return-Path: 
 <hadoop-dev-return-2726-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 2066 invoked from network); 25 Jul 2006 08:29:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 08:29:36 -0000
Received: (qmail 81901 invoked by uid 500); 25 Jul 2006 08:29:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 81743 invoked by uid 500); 25 Jul 2006 08:29:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 81734 invoked by uid 99); 25 Jul 2006 08:29:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 01:29:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 01:29:35 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C1E79714283
	for <hadoop-dev@lucene.apache.org>; Tue, 25 Jul 2006 08:27:15 +0000 (GMT)
Message-ID: <3829479.1153816035791.JavaMail.jira@brutus>
Date: Tue, 25 Jul 2006 01:27:15 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-384) improved error messages for file
 checksum errors
In-Reply-To: <14868747.1153777454097.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-384?page=all ]

Doug Cutting resolved HADOOP-384.
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Owen!

> improved error messages for file checksum errors
> ------------------------------------------------
>
>                 Key: HADOOP-384
>                 URL: http://issues.apache.org/jira/browse/HADOOP-384
>             Project: Hadoop
>          Issue Type: Bug
>          Components: fs
>    Affects Versions: 0.4.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>            Priority: Minor
>             Fix For: 0.5.0
>
>         Attachments: checksum-err-detail.patch
>
>
> Improves the messages on a couple of the failures we've been seeing to try and get enough information to identifiy the problem.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 25 08:35:45 2006
Return-Path: 
 <hadoop-dev-return-2727-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 3791 invoked from network); 25 Jul 2006 08:35:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 08:35:45 -0000
Received: (qmail 88752 invoked by uid 500); 25 Jul 2006 08:35:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 88708 invoked by uid 500); 25 Jul 2006 08:35:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88699 invoked by uid 99); 25 Jul 2006 08:35:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 01:35:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 01:35:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2A3A6714294
	for <hadoop-dev@lucene.apache.org>; Tue, 25 Jul 2006 08:33:16 +0000 (GMT)
Message-ID: <6575047.1153816396170.JavaMail.jira@brutus>
Date: Tue, 25 Jul 2006 01:33:16 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-375) Introduce a way for datanodes to
 register their HTTP info ports with the NameNode
In-Reply-To: <28904462.1153478956900.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-375?page=comments#action_12423268 ] 
            
Devaraj Das commented on HADOOP-375:
------------------------------------

The 'started' field is there to just make sure that we do getPort() only after the webserver starts up. Since the webserver starts in a new thread, we should wait before doing getPort() (to avoid timing issues). Note that 'started' is set to false in the field initialization in StatusHttpServer. 'started' is set to true only when the webserver has successfully started up (towards the end of the 'start' method in StatusHttpServer). Note that if there was an exception while starting the webserver, it would throw an exception and 'started' would not be touched. Only after the exceptions are handled (e.g. a new port is found, etc.) will 'started' be set to true (after it 'breaks' out of the outermost 'while' loop inside 'start' method).

The wait(1) is can be replaced with Thread.sleep(1). I meant that and no issues with replacing that. The loop seems tight but I expect the webserver to start soon enough that it actually makes this loop not that tight (but in any case it could be replaced by Thread.sleep(100) or something).

Makes sense?

> Introduce a way for datanodes to register their HTTP info ports with the NameNode
> ---------------------------------------------------------------------------------
>
>                 Key: HADOOP-375
>                 URL: http://issues.apache.org/jira/browse/HADOOP-375
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: content_browsing.new.patch, content_browsing.new.patch
>
>
> If we have multiple datanodes within a single machine the Jetty servers (other than the first one) won't be able to bind to the fixed HTTP port. So, one solution is to have the datanodes pick a free port (starting from a configured port value) and then inform namenode about it so that the namenode can then do redirects, etc.
> Johan Oskarson reported this problem. 
> If a computer have a second dfs data dir in the config it doesn't start properly because of:
> Exception in thread "main" java.io.IOException: Problem starting http server
>         at org.apache.hadoop.mapred.StatusHttpServer.start(StatusHttpServer.java:182)
>         at org.apache.hadoop.dfs.DataNode.<init>(DataNode.java:170)
>         at org.apache.hadoop.dfs.DataNode.makeInstanceForDir(DataNode.java:1045)
>         at org.apache.hadoop.dfs.DataNode.run(DataNode.java:999)
>         at org.apache.hadoop.dfs.DataNode.runAndWait(DataNode.java:1015)
>         at org.apache.hadoop.dfs.DataNode.main(DataNode.java:1066)
> Caused by: org.mortbay.util.MultiException[java.net.BindException: Address already in use]
>         at org.mortbay.http.HttpServer.doStart(HttpServer.java:731)
>         at org.mortbay.util.Container.start(Container.java:72)
>         at org.apache.hadoop.mapred.StatusHttpServer.start(StatusHttpServer.java:159)
>         ... 5 more

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 25 08:42:18 2006
Return-Path: 
 <hadoop-dev-return-2728-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 4911 invoked from network); 25 Jul 2006 08:42:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 08:42:18 -0000
Received: (qmail 92750 invoked by uid 500); 25 Jul 2006 08:42:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 92717 invoked by uid 500); 25 Jul 2006 08:42:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 92708 invoked by uid 99); 25 Jul 2006 08:42:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 01:42:17 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yichao.zhang@gmail.com
 designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 01:42:16 -0700
Received: by nf-out-0910.google.com with SMTP id o63so138549nfa
        for <hadoop-dev@lucene.apache.org>;
 Tue, 25 Jul 2006 01:41:55 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=MBtPxjGdfJdvd+4uS0D9qpbHqA3y0Td+ThKg7ZmVcbUiZvdHgIZDg0bwURaKUh7FRYi54rwdWHVeubNBZ6wQHbC6KMQCPw/xIYE4jBMAg+avaHri4GOd4cDdL9zBURxmUulrMwJ4YdxXS41U/uyRGz89OJx/ING8QOnncstlCQk=
Received: by 10.78.151.3 with SMTP id y3mr2161870hud;
        Tue, 25 Jul 2006 01:41:55 -0700 (PDT)
Received: by 10.78.153.6 with HTTP; Tue, 25 Jul 2006 01:41:55 -0700 (PDT)
Message-ID: <c1c2fd520607250141w4f54d6e2n19257781ca7bd9e@mail.gmail.com>
Date: Tue, 25 Jul 2006 16:41:55 +0800
From: yichao.zhang <yichao.zhang@gmail.com>
To: hadoop-dev@lucene.apache.org
Subject: Is there a way to start namenode, 2 datanodes on one box?
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_Part_200167_15398666.1153816915393"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_200167_15398666.1153816915393
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi
is there a way to start the name server and more than 1 data servers on just
one box. I have only one PC and want to test against dfs.
I have set up one name server and just one data server in psuedo-distributed
mode on my box in eclipse.
However it seems no way to add another data server even if I have 3 Ethernet
adapters, one is a real d-link card, the other 2 are Microsoft loop
adapters. so my box has three different ip. but the data server is
identified by machine name, so there is impossible to have 2 data servers on
a single box, is that right?  or is it possible to simply identify a data
node by its ip to solve this issue?
your 2 cents appreciated!

-Yichao

------=_Part_200167_15398666.1153816915393--

From MAILER-DAEMON Tue Jul 25 08:53:35 2006
Return-Path: 
 <hadoop-dev-return-2729-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8919 invoked from network); 25 Jul 2006 08:53:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 08:53:35 -0000
Received: (qmail 4765 invoked by uid 500); 25 Jul 2006 08:53:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 4607 invoked by uid 500); 25 Jul 2006 08:53:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 4597 invoked by uid 99); 25 Jul 2006 08:53:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 01:53:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 01:53:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BBA8B714283
	for <hadoop-dev@lucene.apache.org>; Tue, 25 Jul 2006 08:51:14 +0000 (GMT)
Message-ID: <17722451.1153817474766.JavaMail.jira@brutus>
Date: Tue, 25 Jul 2006 01:51:14 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-375) Introduce a way for datanodes to
 register their HTTP info ports with the NameNode
In-Reply-To: <28904462.1153478956900.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-375?page=comments#action_12423271 ] 
            
Devaraj Das commented on HADOOP-375:
------------------------------------

Some more points:
I think the timing issue requires to be handled when we allow for port roll-overs. The webserver may end up binding to a port other than the default port and unless the webserver starts up successfully, we won't be able to know which port it bound to. If we do a getPort() before the webserver starts up fully, then the port that is returned is the port value at which the webserver is currently *trying* to bind to (but it is not guaranteed that the attempt will be successful). 
If we don't allow port roll-overs (the last argument to StatusHttpServer's constructor is false), then the timing issue isn't there since getPort() will always (& supposed to) return the default port (in the absence of any exception).

> Introduce a way for datanodes to register their HTTP info ports with the NameNode
> ---------------------------------------------------------------------------------
>
>                 Key: HADOOP-375
>                 URL: http://issues.apache.org/jira/browse/HADOOP-375
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: content_browsing.new.patch, content_browsing.new.patch
>
>
> If we have multiple datanodes within a single machine the Jetty servers (other than the first one) won't be able to bind to the fixed HTTP port. So, one solution is to have the datanodes pick a free port (starting from a configured port value) and then inform namenode about it so that the namenode can then do redirects, etc.
> Johan Oskarson reported this problem. 
> If a computer have a second dfs data dir in the config it doesn't start properly because of:
> Exception in thread "main" java.io.IOException: Problem starting http server
>         at org.apache.hadoop.mapred.StatusHttpServer.start(StatusHttpServer.java:182)
>         at org.apache.hadoop.dfs.DataNode.<init>(DataNode.java:170)
>         at org.apache.hadoop.dfs.DataNode.makeInstanceForDir(DataNode.java:1045)
>         at org.apache.hadoop.dfs.DataNode.run(DataNode.java:999)
>         at org.apache.hadoop.dfs.DataNode.runAndWait(DataNode.java:1015)
>         at org.apache.hadoop.dfs.DataNode.main(DataNode.java:1066)
> Caused by: org.mortbay.util.MultiException[java.net.BindException: Address already in use]
>         at org.mortbay.http.HttpServer.doStart(HttpServer.java:731)
>         at org.mortbay.util.Container.start(Container.java:72)
>         at org.apache.hadoop.mapred.StatusHttpServer.start(StatusHttpServer.java:159)
>         ... 5 more

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 25 09:00:36 2006
Return-Path: 
 <hadoop-dev-return-2730-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 11275 invoked from network); 25 Jul 2006 09:00:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 09:00:36 -0000
Received: (qmail 15601 invoked by uid 500); 25 Jul 2006 09:00:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15444 invoked by uid 500); 25 Jul 2006 09:00:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 15414 invoked by uid 99); 25 Jul 2006 09:00:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 02:00:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 02:00:35 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1C4AE71428E
	for <hadoop-dev@lucene.apache.org>; Tue, 25 Jul 2006 08:58:16 +0000 (GMT)
Message-ID: <2287710.1153817896112.JavaMail.jira@brutus>
Date: Tue, 25 Jul 2006 01:58:16 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-54?page=comments#action_12423273 ] 
            
Arun C Murthy commented on HADOOP-54:
-------------------------------------

Regarding 'incremental decompress' in SequenceFile.Reader:

Maybe I'm miss something here - but isn't 1 decompress (of the whole block) followed by n reads of keys (or values) going to lead to the same amortized cost as m (where m < n) decompress and n reads? In that case I don't think the complexity of managing this complicated beast (maintaining status of how much is compressed, might have to decompress multiple times to get large values etc.) is worth it...


> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.5.0
>
>         Attachments: VIntCompressionResults.txt
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 25 09:02:40 2006
Return-Path: 
 <hadoop-dev-return-2731-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 11633 invoked from network); 25 Jul 2006 09:02:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 09:02:40 -0000
Received: (qmail 16439 invoked by uid 500); 25 Jul 2006 09:02:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 16279 invoked by uid 500); 25 Jul 2006 09:02:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 16270 invoked by uid 99); 25 Jul 2006 09:02:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 02:02:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 02:02:39 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0AF6A714219
	for <hadoop-dev@lucene.apache.org>; Tue, 25 Jul 2006 09:00:15 +0000 (GMT)
Message-ID: <31960073.1153818015042.JavaMail.jira@brutus>
Date: Tue, 25 Jul 2006 02:00:15 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-344) TaskTracker passes incorrect file
 path to DF under cygwin
In-Reply-To: <3940552.1152137609862.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-344?page=all ]

Doug Cutting resolved HADOOP-344.
---------------------------------

    Fix Version/s: 0.5.0
       Resolution: Fixed

I just committed this.  Thanks, Konstantin!

> TaskTracker passes incorrect file path to DF under cygwin
> ---------------------------------------------------------
>
>                 Key: HADOOP-344
>                 URL: http://issues.apache.org/jira/browse/HADOOP-344
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.4.0
>         Environment: Windows
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.5.0
>
>         Attachments: DFConstructor.patch, DFPath2File.patch, TaskTrackerDF.patch
>
>
> The path that is passed is OS dependent. The File abstraction should be used in order to make it universal.
> I'm attaching a patch that does that.
> We might want to change the path parameter for DF. Making it File rather than String should prevent us from 
> bugs like that in the future.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 25 09:08:38 2006
Return-Path: 
 <hadoop-dev-return-2732-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 13403 invoked from network); 25 Jul 2006 09:08:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 09:08:38 -0000
Received: (qmail 24124 invoked by uid 500); 25 Jul 2006 09:08:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23964 invoked by uid 500); 25 Jul 2006 09:08:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23955 invoked by uid 99); 25 Jul 2006 09:08:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 02:08:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 02:08:36 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2127A714283
	for <hadoop-dev@lucene.apache.org>; Tue, 25 Jul 2006 09:06:17 +0000 (GMT)
Message-ID: <16448072.1153818377132.JavaMail.jira@brutus>
Date: Tue, 25 Jul 2006 02:06:17 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-383) unit tests fail on windows
In-Reply-To: <30818792.1153774213966.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-383?page=all ]

Doug Cutting resolved HADOOP-383.
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Michel!

> unit tests fail on windows
> --------------------------
>
>                 Key: HADOOP-383
>                 URL: http://issues.apache.org/jira/browse/HADOOP-383
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>    Affects Versions: 0.5.0
>            Reporter: Owen O'Malley
>         Assigned To: Michel Tourn
>             Fix For: 0.5.0
>
>         Attachments: winenv.patch
>
>
> When I run the "ant test" target under Windows, I get the following exception in the logs for the streaming unit tests. The unit tests need to run under Windows, if it is going to be a supported platform. So we either need to remove the streaming unit tests or make them work.
> Testsuite: org.apache.hadoop.streaming.TestStreaming
> Tests run: 1, Failures: 1, Errors: 0, Time elapsed: 0.172 sec
> Testcase: testCommandLine took 0.172 sec
>         FAILED
> java.lang.RuntimeException: Operating system Windows XP not supported by this class
>         at org.apache.hadoop.streaming.Environment.<init>(Environment.java:47)
>         at org.apache.hadoop.streaming.StreamJob.init(StreamJob.java:68)
>         at org.apache.hadoop.streaming.StreamJob.go(StreamJob.java:55)
>         at org.apache.hadoop.streaming.TestStreaming.testCommandLine(Unknown Source)
>         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
>         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>         at java.lang.reflect.Method.invoke(Method.java:585)
>         at junit.framework.TestCase.runTest(TestCase.java:154)
>         at junit.framework.TestCase.runBare(TestCase.java:127)
>         at junit.framework.TestResult$1.protect(TestResult.java:106)
>         at junit.framework.TestResult.runProtected(TestResult.java:124)
>         at junit.framework.TestResult.run(TestResult.java:109)
>         at junit.framework.TestCase.run(TestCase.java:118)
>         at junit.framework.TestSuite.runTest(TestSuite.java:208)
>         at junit.framework.TestSuite.run(TestSuite.java:203)
>         at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:2
> 97)
>         at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.jav
> a:672)
>         at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:
> 567)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 25 09:16:47 2006
Return-Path: 
 <hadoop-dev-return-2733-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17713 invoked from network); 25 Jul 2006 09:16:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 09:16:47 -0000
Received: (qmail 39121 invoked by uid 500); 25 Jul 2006 09:16:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 39097 invoked by uid 500); 25 Jul 2006 09:16:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 39088 invoked by uid 99); 25 Jul 2006 09:16:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 02:16:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 02:16:45 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4EDD9714219
	for <hadoop-dev@lucene.apache.org>; Tue, 25 Jul 2006 09:14:21 +0000 (GMT)
Message-ID: <10579150.1153818861319.JavaMail.jira@brutus>
Date: Tue, 25 Jul 2006 02:14:21 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-375) Introduce a way for datanodes to
 register their HTTP info ports with the NameNode
In-Reply-To: <28904462.1153478956900.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-375?page=comments#action_12423278 ] 
            
Doug Cutting commented on HADOOP-375:
-------------------------------------

Perhaps I'm missing something, but I still don't see how this works.  The loop retrying ports is in StatusHttpServer().start().  When this method returns, the port is known.  There's nothing more to wait for, is there?

> Introduce a way for datanodes to register their HTTP info ports with the NameNode
> ---------------------------------------------------------------------------------
>
>                 Key: HADOOP-375
>                 URL: http://issues.apache.org/jira/browse/HADOOP-375
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: content_browsing.new.patch, content_browsing.new.patch
>
>
> If we have multiple datanodes within a single machine the Jetty servers (other than the first one) won't be able to bind to the fixed HTTP port. So, one solution is to have the datanodes pick a free port (starting from a configured port value) and then inform namenode about it so that the namenode can then do redirects, etc.
> Johan Oskarson reported this problem. 
> If a computer have a second dfs data dir in the config it doesn't start properly because of:
> Exception in thread "main" java.io.IOException: Problem starting http server
>         at org.apache.hadoop.mapred.StatusHttpServer.start(StatusHttpServer.java:182)
>         at org.apache.hadoop.dfs.DataNode.<init>(DataNode.java:170)
>         at org.apache.hadoop.dfs.DataNode.makeInstanceForDir(DataNode.java:1045)
>         at org.apache.hadoop.dfs.DataNode.run(DataNode.java:999)
>         at org.apache.hadoop.dfs.DataNode.runAndWait(DataNode.java:1015)
>         at org.apache.hadoop.dfs.DataNode.main(DataNode.java:1066)
> Caused by: org.mortbay.util.MultiException[java.net.BindException: Address already in use]
>         at org.mortbay.http.HttpServer.doStart(HttpServer.java:731)
>         at org.mortbay.util.Container.start(Container.java:72)
>         at org.apache.hadoop.mapred.StatusHttpServer.start(StatusHttpServer.java:159)
>         ... 5 more

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 25 09:25:40 2006
Return-Path: 
 <hadoop-dev-return-2734-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 19696 invoked from network); 25 Jul 2006 09:25:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 09:25:40 -0000
Received: (qmail 46923 invoked by uid 500); 25 Jul 2006 09:25:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 46896 invoked by uid 500); 25 Jul 2006 09:25:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46885 invoked by uid 99); 25 Jul 2006 09:25:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 02:25:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 02:25:39 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 55364714219
	for <hadoop-dev@lucene.apache.org>; Tue, 25 Jul 2006 09:23:15 +0000 (GMT)
Message-ID: <20045522.1153819395346.JavaMail.jira@brutus>
Date: Tue, 25 Jul 2006 02:23:15 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-380) The reduce tasks poll for mapoutputs
 in a loop
In-Reply-To: <13577499.1153524014029.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-380?page=all ]

Doug Cutting resolved HADOOP-380.
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Mahadev!

> The reduce tasks poll for mapoutputs in a loop
> ----------------------------------------------
>
>                 Key: HADOOP-380
>                 URL: http://issues.apache.org/jira/browse/HADOOP-380
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>             Fix For: 0.5.0
>
>         Attachments: polling.patch
>
>
> The Reduce tasks poll for the mapoutputs in a loop. The polling thread should be sleeping for 5 seconds before polling again but there is a bug in updating the timestamps which make the reduce task poll in a loop without sleeping.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 25 09:28:35 2006
Return-Path: 
 <hadoop-dev-return-2735-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20536 invoked from network); 25 Jul 2006 09:28:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 09:28:35 -0000
Received: (qmail 52379 invoked by uid 500); 25 Jul 2006 09:28:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 52223 invoked by uid 500); 25 Jul 2006 09:28:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 52214 invoked by uid 99); 25 Jul 2006 09:28:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 02:28:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 02:28:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AF80B714283
	for <hadoop-dev@lucene.apache.org>; Tue, 25 Jul 2006 09:26:14 +0000 (GMT)
Message-ID: <30398481.1153819574716.JavaMail.jira@brutus>
Date: Tue, 25 Jul 2006 02:26:14 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-375) Introduce a way for datanodes to
 register their HTTP info ports with the NameNode
In-Reply-To: <28904462.1153478956900.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-375?page=comments#action_12423283 ] 
            
Devaraj Das commented on HADOOP-375:
------------------------------------

Well!!! 
I seem to have had an impression that StatusHttpServer is started in a thread by itself!! (that start method led me astray) :-(
Really sorry about this. That part of the patch is not needed.

> Introduce a way for datanodes to register their HTTP info ports with the NameNode
> ---------------------------------------------------------------------------------
>
>                 Key: HADOOP-375
>                 URL: http://issues.apache.org/jira/browse/HADOOP-375
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: content_browsing.new.patch, content_browsing.new.patch
>
>
> If we have multiple datanodes within a single machine the Jetty servers (other than the first one) won't be able to bind to the fixed HTTP port. So, one solution is to have the datanodes pick a free port (starting from a configured port value) and then inform namenode about it so that the namenode can then do redirects, etc.
> Johan Oskarson reported this problem. 
> If a computer have a second dfs data dir in the config it doesn't start properly because of:
> Exception in thread "main" java.io.IOException: Problem starting http server
>         at org.apache.hadoop.mapred.StatusHttpServer.start(StatusHttpServer.java:182)
>         at org.apache.hadoop.dfs.DataNode.<init>(DataNode.java:170)
>         at org.apache.hadoop.dfs.DataNode.makeInstanceForDir(DataNode.java:1045)
>         at org.apache.hadoop.dfs.DataNode.run(DataNode.java:999)
>         at org.apache.hadoop.dfs.DataNode.runAndWait(DataNode.java:1015)
>         at org.apache.hadoop.dfs.DataNode.main(DataNode.java:1066)
> Caused by: org.mortbay.util.MultiException[java.net.BindException: Address already in use]
>         at org.mortbay.http.HttpServer.doStart(HttpServer.java:731)
>         at org.mortbay.util.Container.start(Container.java:72)
>         at org.apache.hadoop.mapred.StatusHttpServer.start(StatusHttpServer.java:159)
>         ... 5 more

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 25 09:29:36 2006
Return-Path: 
 <hadoop-dev-return-2736-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20710 invoked from network); 25 Jul 2006 09:29:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 09:29:36 -0000
Received: (qmail 52994 invoked by uid 500); 25 Jul 2006 09:29:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 52966 invoked by uid 500); 25 Jul 2006 09:29:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 52957 invoked by uid 99); 25 Jul 2006 09:29:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 02:29:35 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [202.46.19.91] (HELO mailsrv.bangalore.corp.yahoo.com)
 (202.46.19.91)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 02:29:34 -0700
Received: from ddaslaptop (ddas-laptop.bangalore.corp.yahoo.com
 [10.80.32.172])
	(authenticated bits=0)
	by mailsrv.bangalore.corp.yahoo.com (8.13.6/8.13.6/pop-in) with ESMTP id
 k6P9T6fe079176
	(version=TLSv1/SSLv3 cipher=RC4-MD5 bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Tue, 25 Jul 2006 14:59:06 +0530 (IST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=from:to:subject:date:message-id:mime-version:content-type:
	content-transfer-encoding:x-mailer:in-reply-to:x-mimeole:thread-index;
	b=sAQl7CY6swwUl6yGy2a2BIGAHYJtTx9Z7KapVihX6+IGl6wR7/u0aT3xANcy9X5R
From: "Devaraj Das" <ddas@yahoo-inc.com>
To: <hadoop-dev@lucene.apache.org>
Subject: RE: [jira] Commented: (HADOOP-375) Introduce a way for datanodes to
 register their HTTP info ports with the NameNode
Date: Tue, 25 Jul 2006 14:59:11 +0530
Message-ID: <04d001c6afcc$c9797fd0$ac20500a@ds.corp.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <10579150.1153818861319.JavaMail.jira@brutus>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-Index: AcavyxFLXcmsLta5TpuWr2TZq4cH9AAAX6dg
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Sorry Doug!!! So do you want me to send another patch with that stupid thing
removed?

-----Original Message-----
From: Doug Cutting (JIRA) [mailto:jira@apache.org] 
Sent: Tuesday, July 25, 2006 2:44 PM
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-375) Introduce a way for datanodes to
register their HTTP info ports with the NameNode

    [
http://issues.apache.org/jira/browse/HADOOP-375?page=comments#action_1242327
8 ] 
            
Doug Cutting commented on HADOOP-375:
-------------------------------------

Perhaps I'm missing something, but I still don't see how this works.  The
loop retrying ports is in StatusHttpServer().start().  When this method
returns, the port is known.  There's nothing more to wait for, is there?

> Introduce a way for datanodes to register their HTTP info ports with the
NameNode
>
----------------------------------------------------------------------------
-----
>
>                 Key: HADOOP-375
>                 URL: http://issues.apache.org/jira/browse/HADOOP-375
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: content_browsing.new.patch,
content_browsing.new.patch
>
>
> If we have multiple datanodes within a single machine the Jetty servers
(other than the first one) won't be able to bind to the fixed HTTP port. So,
one solution is to have the datanodes pick a free port (starting from a
configured port value) and then inform namenode about it so that the
namenode can then do redirects, etc.
> Johan Oskarson reported this problem. 
> If a computer have a second dfs data dir in the config it doesn't start
properly because of:
> Exception in thread "main" java.io.IOException: Problem starting http
server
>         at
org.apache.hadoop.mapred.StatusHttpServer.start(StatusHttpServer.java:182)
>         at org.apache.hadoop.dfs.DataNode.<init>(DataNode.java:170)
>         at
org.apache.hadoop.dfs.DataNode.makeInstanceForDir(DataNode.java:1045)
>         at org.apache.hadoop.dfs.DataNode.run(DataNode.java:999)
>         at org.apache.hadoop.dfs.DataNode.runAndWait(DataNode.java:1015)
>         at org.apache.hadoop.dfs.DataNode.main(DataNode.java:1066)
> Caused by: org.mortbay.util.MultiException[java.net.BindException: Address
already in use]
>         at org.mortbay.http.HttpServer.doStart(HttpServer.java:731)
>         at org.mortbay.util.Container.start(Container.java:72)
>         at
org.apache.hadoop.mapred.StatusHttpServer.start(StatusHttpServer.java:159)
>         ... 5 more

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        



From MAILER-DAEMON Tue Jul 25 09:37:58 2006
Return-Path: 
 <hadoop-dev-return-2737-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 22459 invoked from network); 25 Jul 2006 09:37:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 09:37:58 -0000
Received: (qmail 66559 invoked by uid 500); 25 Jul 2006 09:37:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66526 invoked by uid 500); 25 Jul 2006 09:37:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66512 invoked by uid 99); 25 Jul 2006 09:37:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 02:37:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [209.10.110.95] (HELO londo.swishmail.com) (209.10.110.95)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 02:37:56 -0700
Received: (qmail 43667 invoked by uid 89); 25 Jul 2006 09:37:35 -0000
Received: from unknown (HELO ?172.17.73.107?) (128.214.173.238)
  by londo.swishmail.com with SMTP; 25 Jul 2006 09:37:35 -0000
Message-ID: <44C5E676.1090204@apache.org>
Date: Tue, 25 Jul 2006 12:37:58 +0300
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.4 (X11/20060615)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: [jira] Commented: (HADOOP-375) Introduce a way for datanodes
 to register their HTTP info ports with the NameNode
References: <04d001c6afcc$c9797fd0$ac20500a@ds.corp.yahoo.com>
In-Reply-To: <04d001c6afcc$c9797fd0$ac20500a@ds.corp.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Devaraj Das wrote:
> So do you want me to send another patch with that stupid thing
> removed?

Please.

Thanks,

Doug

From MAILER-DAEMON Tue Jul 25 10:06:36 2006
Return-Path: 
 <hadoop-dev-return-2738-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 28880 invoked from network); 25 Jul 2006 10:06:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 10:06:36 -0000
Received: (qmail 4386 invoked by uid 500); 25 Jul 2006 10:06:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 4370 invoked by uid 500); 25 Jul 2006 10:06:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 4361 invoked by uid 99); 25 Jul 2006 10:06:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 03:06:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 03:06:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 17D5A71428E
	for <hadoop-dev@lucene.apache.org>; Tue, 25 Jul 2006 10:04:15 +0000 (GMT)
Message-ID: <2351779.1153821855095.JavaMail.jira@brutus>
Date: Tue, 25 Jul 2006 03:04:15 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-375) Introduce a way for datanodes to
 register their HTTP info ports with the NameNode
In-Reply-To: <28904462.1153478956900.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-375?page=all ]

Devaraj Das updated HADOOP-375:
-------------------------------

    Attachment: content_browsing.new.patch

Sorry for spamming the dev list with comments/mails on this issue. Hopefully, I won't make such blunders any more ..

> Introduce a way for datanodes to register their HTTP info ports with the NameNode
> ---------------------------------------------------------------------------------
>
>                 Key: HADOOP-375
>                 URL: http://issues.apache.org/jira/browse/HADOOP-375
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: content_browsing.new.patch, content_browsing.new.patch, content_browsing.new.patch
>
>
> If we have multiple datanodes within a single machine the Jetty servers (other than the first one) won't be able to bind to the fixed HTTP port. So, one solution is to have the datanodes pick a free port (starting from a configured port value) and then inform namenode about it so that the namenode can then do redirects, etc.
> Johan Oskarson reported this problem. 
> If a computer have a second dfs data dir in the config it doesn't start properly because of:
> Exception in thread "main" java.io.IOException: Problem starting http server
>         at org.apache.hadoop.mapred.StatusHttpServer.start(StatusHttpServer.java:182)
>         at org.apache.hadoop.dfs.DataNode.<init>(DataNode.java:170)
>         at org.apache.hadoop.dfs.DataNode.makeInstanceForDir(DataNode.java:1045)
>         at org.apache.hadoop.dfs.DataNode.run(DataNode.java:999)
>         at org.apache.hadoop.dfs.DataNode.runAndWait(DataNode.java:1015)
>         at org.apache.hadoop.dfs.DataNode.main(DataNode.java:1066)
> Caused by: org.mortbay.util.MultiException[java.net.BindException: Address already in use]
>         at org.mortbay.http.HttpServer.doStart(HttpServer.java:731)
>         at org.mortbay.util.Container.start(Container.java:72)
>         at org.apache.hadoop.mapred.StatusHttpServer.start(StatusHttpServer.java:159)
>         ... 5 more

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 25 10:51:39 2006
Return-Path: 
 <hadoop-dev-return-2739-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43518 invoked from network); 25 Jul 2006 10:51:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 10:51:39 -0000
Received: (qmail 79402 invoked by uid 500); 25 Jul 2006 10:51:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 79244 invoked by uid 500); 25 Jul 2006 10:51:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 79235 invoked by uid 99); 25 Jul 2006 10:51:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 03:51:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 03:51:38 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DD78E714283
	for <hadoop-dev@lucene.apache.org>; Tue, 25 Jul 2006 10:49:13 +0000 (GMT)
Message-ID: <7100173.1153824553904.JavaMail.jira@brutus>
Date: Tue, 25 Jul 2006 03:49:13 -0700 (PDT)
From: "Johan Oskarson (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-386) Periodically move blocks from full
 nodes to those with space
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Periodically move blocks from full nodes to those with space
------------------------------------------------------------

                 Key: HADOOP-386
                 URL: http://issues.apache.org/jira/browse/HADOOP-386
             Project: Hadoop
          Issue Type: New Feature
          Components: dfs
    Affects Versions: 0.4.0
            Reporter: Johan Oskarson


I'm still having *a lot* of problems with some nodes filling up quickly and others hardly being touched, mostly because of the hardware being
very different.

As someone suggested, there should be a thread that periodically checks the dfs for nodes with little or no free space and schedules blocks
to be moved off that node.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 25 10:53:37 2006
Return-Path: 
 <hadoop-dev-return-2740-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 44195 invoked from network); 25 Jul 2006 10:53:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 10:53:37 -0000
Received: (qmail 82310 invoked by uid 500); 25 Jul 2006 10:53:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 82282 invoked by uid 500); 25 Jul 2006 10:53:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 82273 invoked by uid 99); 25 Jul 2006 10:53:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 03:53:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 03:53:35 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E18DA71428E
	for <hadoop-dev@lucene.apache.org>; Tue, 25 Jul 2006 10:51:15 +0000 (GMT)
Message-ID: <14529449.1153824675921.JavaMail.jira@brutus>
Date: Tue, 25 Jul 2006 03:51:15 -0700 (PDT)
From: "Johan Oskarson (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-386) Periodically move blocks from full
 nodes to those with space
In-Reply-To: <7100173.1153824553904.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-386?page=comments#action_12423300 ] 
            
Johan Oskarson commented on HADOOP-386:
---------------------------------------

As a first step, one could make chooseExcessReplicates in FSNamesystem.java space-aware.
So that if a block are over replicated it is removed from the machine with least percentage free space.

That way, all we would have to do is to copy the block to one extra node with lots of space and the rest would solve itself.


> Periodically move blocks from full nodes to those with space
> ------------------------------------------------------------
>
>                 Key: HADOOP-386
>                 URL: http://issues.apache.org/jira/browse/HADOOP-386
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Johan Oskarson
>
> I'm still having *a lot* of problems with some nodes filling up quickly and others hardly being touched, mostly because of the hardware being
> very different.
> As someone suggested, there should be a thread that periodically checks the dfs for nodes with little or no free space and schedules blocks
> to be moved off that node.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 25 15:43:36 2006
Return-Path: 
 <hadoop-dev-return-2741-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50209 invoked from network); 25 Jul 2006 15:43:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 15:43:36 -0000
Received: (qmail 1397 invoked by uid 500); 25 Jul 2006 15:43:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 1369 invoked by uid 500); 25 Jul 2006 15:43:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 1360 invoked by uid 99); 25 Jul 2006 15:43:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 08:43:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 08:43:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E1A5A71428E
	for <hadoop-dev@lucene.apache.org>; Tue, 25 Jul 2006 15:41:14 +0000 (GMT)
Message-ID: <8529445.1153842074921.JavaMail.jira@brutus>
Date: Tue, 25 Jul 2006 08:41:14 -0700 (PDT)
From: "Bryan Pendleton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-386) Periodically move blocks from full
 nodes to those with space
In-Reply-To: <7100173.1153824553904.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-386?page=comments#action_12423370 ] 
            
Bryan Pendleton commented on HADOOP-386:
----------------------------------------

I suggest rather than "percent free space" we use the metric "absolute free space". This would improve interaction with the new code which lets a tasktracker withdraw from the workload when its space gets low.... and, especially, improve the odds that machines with much smaller drives can contribute productively. I have a few really old machines in my cluster, with 15gb drives. Running datanodes and tasktrackers on them makes them usually end up being (small) datanodes, and doing very little computation. The reverse would probably be more useful.

Another thing that would be nice would be to first consider rebalancing within local drives. It costs no network bandwidth to move files between local drives. Plus, you can add a new big drive to one of those old nodes I mention above, and have it become productive even more easily.

> Periodically move blocks from full nodes to those with space
> ------------------------------------------------------------
>
>                 Key: HADOOP-386
>                 URL: http://issues.apache.org/jira/browse/HADOOP-386
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Johan Oskarson
>
> I'm still having *a lot* of problems with some nodes filling up quickly and others hardly being touched, mostly because of the hardware being
> very different.
> As someone suggested, there should be a thread that periodically checks the dfs for nodes with little or no free space and schedules blocks
> to be moved off that node.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 25 16:10:53 2006
Return-Path: 
 <hadoop-dev-return-2742-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 62076 invoked from network); 25 Jul 2006 16:10:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 16:10:53 -0000
Received: (qmail 72131 invoked by uid 500); 25 Jul 2006 16:10:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 71926 invoked by uid 500); 25 Jul 2006 16:10:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 71867 invoked by uid 99); 25 Jul 2006 16:10:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 09:10:41 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of michael.cafarella@gmail.com
 designates 64.233.162.198 as permitted sender)
Received: from [64.233.162.198] (HELO nz-out-0102.google.com) (64.233.162.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 09:10:38 -0700
Received: by nz-out-0102.google.com with SMTP id s1so495563nze
        for <hadoop-dev@lucene.apache.org>;
 Tue, 25 Jul 2006 09:10:16 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=erimmRyO+UDYZ3XGCF1q7rkbyZwk87jDERWiM5W9DoldliV3S/IUeiNnMkInFW/UmrZC/knEu4q9djOH8iaEZm+NwJ1gzRYp3tqeFXQbi6DycUhExUBpqBPOqLCzUU2UGl6BiR2sHwzM7WoBwZGY9IM0csvIYaLRyHsBekcqIBs=
Received: by 10.65.219.3 with SMTP id w3mr5198498qbq;
        Tue, 25 Jul 2006 09:10:15 -0700 (PDT)
Received: by 10.65.252.6 with HTTP; Tue, 25 Jul 2006 09:10:15 -0700 (PDT)
Message-ID: <8a8b9f3f0607250910y6c651fffy16f7563455746756@mail.gmail.com>
Date: Tue, 25 Jul 2006 09:10:15 -0700
From: "Michael Cafarella" <michael.cafarella@gmail.com>
To: hadoop-dev@lucene.apache.org, hadoop-user@lucene.apache.org
Subject: SIGIR meetup?
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_Part_132755_20827032.1153843815339"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_132755_20827032.1153843815339
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi everyone,

Are you planning on coming to SIGIR in Seattle?  If enough people are,
perhaps we can
have a Nutch/Hadoop get-together.

I'm in Seattle, so if enough people say yes I'll look for a place to host
it.

Thanks,
--Mike C.

------=_Part_132755_20827032.1153843815339--

From MAILER-DAEMON Tue Jul 25 16:32:55 2006
Return-Path: 
 <hadoop-dev-return-2743-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 71841 invoked from network); 25 Jul 2006 16:32:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 16:32:55 -0000
Received: (qmail 32702 invoked by uid 500); 25 Jul 2006 16:32:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 32656 invoked by uid 500); 25 Jul 2006 16:32:44 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 32618 invoked by uid 99); 25 Jul 2006 16:32:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 09:32:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [80.64.182.137] (HELO mslinux.media-style.com) (80.64.182.137)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 09:32:41 -0700
Received: from localhost (localhost [127.0.0.1])
	by mslinux.media-style.com (Postfix) with ESMTP id 7CD2F14477F;
	Tue, 25 Jul 2006 18:32:18 +0200 (CEST)
Received: from mslinux.media-style.com ([127.0.0.1])
	by localhost (mslinux.media-style.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 28741-08; Tue, 25 Jul 2006 18:32:18 +0200 (CEST)
Received: from [192.168.50.3] (dsl017-055-128.sfo1.dsl.speakeasy.net
 [69.17.55.128])
	by mslinux.media-style.com (Postfix) with ESMTP id 8196714477D;
	Tue, 25 Jul 2006 18:32:17 +0200 (CEST)
In-Reply-To: <8a8b9f3f0607250910y6c651fffy16f7563455746756@mail.gmail.com>
References: <8a8b9f3f0607250910y6c651fffy16f7563455746756@mail.gmail.com>
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <5BAC922D-A473-491A-A794-218D96A541AE@media-style.com>
Cc: hadoop-user@lucene.apache.org
Content-Transfer-Encoding: 7bit
From: Stefan Groschupf <sg@media-style.com>
Subject: Re: SIGIR meetup?
Date: Tue, 25 Jul 2006 09:32:11 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at media-style.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,
"yes" -  that would be nice! :-)

Stefan


Am 25.07.2006 um 09:10 schrieb Michael Cafarella:

> Hi everyone,
>
> Are you planning on coming to SIGIR in Seattle?  If enough people are,
> perhaps we can
> have a Nutch/Hadoop get-together.
>
> I'm in Seattle, so if enough people say yes I'll look for a place  
> to host
> it.
>
> Thanks,
> --Mike C.


From MAILER-DAEMON Tue Jul 25 18:42:35 2006
Return-Path: 
 <hadoop-dev-return-2744-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 22531 invoked from network); 25 Jul 2006 18:42:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 18:42:35 -0000
Received: (qmail 39606 invoked by uid 500); 25 Jul 2006 18:42:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 39484 invoked by uid 500); 25 Jul 2006 18:42:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 39475 invoked by uid 99); 25 Jul 2006 18:42:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 11:42:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 11:42:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E1A5D41000E
	for <hadoop-dev@lucene.apache.org>; Tue, 25 Jul 2006 18:40:13 +0000 (GMT)
Message-ID: <26609588.1153852813921.JavaMail.jira@brutus>
Date: Tue, 25 Jul 2006 11:40:13 -0700 (PDT)
From: "Sami Siren (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-387) LocalJobRunner assigns duplicate
 mapid's
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

LocalJobRunner assigns duplicate mapid's
----------------------------------------

                 Key: HADOOP-387
                 URL: http://issues.apache.org/jira/browse/HADOOP-387
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.4.0
         Environment: xp, cygwin, jdk1.4.2_12
            Reporter: Sami Siren


While hunting down nutch issue NUTCH-266 i discovered that id's are generated with following fragment of code:

    private String newId() {
      return Integer.toString(Math.abs(new Random().nextInt()),36);
    }

and the related Javadoc:
"
public Random()

    Creates a new random number generator. Its seed is initialized to a value based on the current time:

         public Random() { this(System.currentTimeMillis()); }

    Two Random objects created within the same millisecond will have the same sequence of random numbers.

"

it appears that in this case there are more than one Random pobject generated at the same millisecond and id's are
no longer unique.


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 25 18:44:35 2006
Return-Path: 
 <hadoop-dev-return-2745-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23260 invoked from network); 25 Jul 2006 18:44:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 18:44:35 -0000
Received: (qmail 42507 invoked by uid 500); 25 Jul 2006 18:44:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 42346 invoked by uid 500); 25 Jul 2006 18:44:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 42337 invoked by uid 99); 25 Jul 2006 18:44:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 11:44:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 11:44:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C9B4B41000E
	for <hadoop-dev@lucene.apache.org>; Tue, 25 Jul 2006 18:42:14 +0000 (GMT)
Message-ID: <7903977.1153852934823.JavaMail.jira@brutus>
Date: Tue, 25 Jul 2006 11:42:14 -0700 (PDT)
From: "Sami Siren (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-387) LocalJobRunner assigns duplicate
 mapid's
In-Reply-To: <26609588.1153852813921.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-387?page=all ]

Sami Siren updated HADOOP-387:
------------------------------

    Attachment: hadoop-fix-dup-id-0.4.patch

fix for hadoop 0.4

> LocalJobRunner assigns duplicate mapid's
> ----------------------------------------
>
>                 Key: HADOOP-387
>                 URL: http://issues.apache.org/jira/browse/HADOOP-387
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.4.0
>         Environment: xp, cygwin, jdk1.4.2_12
>            Reporter: Sami Siren
>         Attachments: hadoop-fix-dup-id-0.4.patch, hadoop-fix-dup-id-trunk.patch
>
>
> While hunting down nutch issue NUTCH-266 i discovered that id's are generated with following fragment of code:
>     private String newId() {
>       return Integer.toString(Math.abs(new Random().nextInt()),36);
>     }
> and the related Javadoc:
> "
> public Random()
>     Creates a new random number generator. Its seed is initialized to a value based on the current time:
>          public Random() { this(System.currentTimeMillis()); }
>     Two Random objects created within the same millisecond will have the same sequence of random numbers.
> "
> it appears that in this case there are more than one Random pobject generated at the same millisecond and id's are
> no longer unique.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 25 18:44:37 2006
Return-Path: 
 <hadoop-dev-return-2746-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23297 invoked from network); 25 Jul 2006 18:44:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 18:44:37 -0000
Received: (qmail 42700 invoked by uid 500); 25 Jul 2006 18:44:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 42531 invoked by uid 500); 25 Jul 2006 18:44:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 42522 invoked by uid 99); 25 Jul 2006 18:44:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 11:44:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 11:44:35 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BB98941000F
	for <hadoop-dev@lucene.apache.org>; Tue, 25 Jul 2006 18:42:15 +0000 (GMT)
Message-ID: <11854111.1153852935766.JavaMail.jira@brutus>
Date: Tue, 25 Jul 2006 11:42:15 -0700 (PDT)
From: "Sami Siren (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-387) LocalJobRunner assigns duplicate
 mapid's
In-Reply-To: <26609588.1153852813921.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-387?page=all ]

Sami Siren updated HADOOP-387:
------------------------------

    Attachment: hadoop-fix-dup-id-trunk.patch

fix for trunk

> LocalJobRunner assigns duplicate mapid's
> ----------------------------------------
>
>                 Key: HADOOP-387
>                 URL: http://issues.apache.org/jira/browse/HADOOP-387
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.4.0
>         Environment: xp, cygwin, jdk1.4.2_12
>            Reporter: Sami Siren
>         Attachments: hadoop-fix-dup-id-0.4.patch, hadoop-fix-dup-id-trunk.patch
>
>
> While hunting down nutch issue NUTCH-266 i discovered that id's are generated with following fragment of code:
>     private String newId() {
>       return Integer.toString(Math.abs(new Random().nextInt()),36);
>     }
> and the related Javadoc:
> "
> public Random()
>     Creates a new random number generator. Its seed is initialized to a value based on the current time:
>          public Random() { this(System.currentTimeMillis()); }
>     Two Random objects created within the same millisecond will have the same sequence of random numbers.
> "
> it appears that in this case there are more than one Random pobject generated at the same millisecond and id's are
> no longer unique.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 25 18:46:36 2006
Return-Path: 
 <hadoop-dev-return-2747-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23977 invoked from network); 25 Jul 2006 18:46:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 18:46:36 -0000
Received: (qmail 46054 invoked by uid 500); 25 Jul 2006 18:46:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 46028 invoked by uid 500); 25 Jul 2006 18:46:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46019 invoked by uid 99); 25 Jul 2006 18:46:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 11:46:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 11:46:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C4B2C41000E
	for <hadoop-dev@lucene.apache.org>; Tue, 25 Jul 2006 18:44:14 +0000 (GMT)
Message-ID: <3973975.1153853054803.JavaMail.jira@brutus>
Date: Tue, 25 Jul 2006 11:44:14 -0700 (PDT)
From: "Sami Siren (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-387) LocalJobRunner assigns duplicate
 mapid's
In-Reply-To: <26609588.1153852813921.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-387?page=comments#action_12423405 ] 
            
Sami Siren commented on HADOOP-387:
-----------------------------------

One more note, there were couiple of other places in code where the random was used in the same way, perhaps someone with better understanding of the internals should check them out too.

> LocalJobRunner assigns duplicate mapid's
> ----------------------------------------
>
>                 Key: HADOOP-387
>                 URL: http://issues.apache.org/jira/browse/HADOOP-387
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.4.0
>         Environment: xp, cygwin, jdk1.4.2_12
>            Reporter: Sami Siren
>         Attachments: hadoop-fix-dup-id-0.4.patch, hadoop-fix-dup-id-trunk.patch
>
>
> While hunting down nutch issue NUTCH-266 i discovered that id's are generated with following fragment of code:
>     private String newId() {
>       return Integer.toString(Math.abs(new Random().nextInt()),36);
>     }
> and the related Javadoc:
> "
> public Random()
>     Creates a new random number generator. Its seed is initialized to a value based on the current time:
>          public Random() { this(System.currentTimeMillis()); }
>     Two Random objects created within the same millisecond will have the same sequence of random numbers.
> "
> it appears that in this case there are more than one Random pobject generated at the same millisecond and id's are
> no longer unique.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 25 19:10:37 2006
Return-Path: 
 <hadoop-dev-return-2748-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31055 invoked from network); 25 Jul 2006 19:10:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 19:10:37 -0000
Received: (qmail 93498 invoked by uid 500); 25 Jul 2006 19:10:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 93380 invoked by uid 500); 25 Jul 2006 19:10:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 93371 invoked by uid 99); 25 Jul 2006 19:10:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 12:10:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 12:10:36 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 002A5714294
	for <hadoop-dev@lucene.apache.org>; Tue, 25 Jul 2006 19:08:16 +0000 (GMT)
Message-ID: <24260634.1153854495998.JavaMail.jira@brutus>
Date: Tue, 25 Jul 2006 12:08:15 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-54?page=comments#action_12423414 ] 
            
Owen O'Malley commented on HADOOP-54:
-------------------------------------

Sorry for being dense. I missed the fact that you wanted to preserve key-value pair compression as an option.

I'd propose spliting the classes like:

SequenceFile.Writer  // uncompressed
SequenceFile.RecordCompressWriter  extends Writer
SequenceFile.BlockCompressWriter  extends Writer

They would have the current interface, with the following new functions:

  void append(byte[] key, int keyOffset, int keyLength, byte[] value, int valueOffset, int valueLength);
  boolean canAppendCompressed();
  void appendCompressed(byte[] key, int keyOffset, int keyLength, 
                                                 byte[] value, int valueOffset, int valueLength);

when we add custom compressors, we can add the compressor to the constructors.

 The Reader should have methods like:

   boolean next(DataOutputStream key, DataOutputStream value);
   boolean canReadCompressed();
   void readCompressed(DataOutputStream key, DataOutputStream value);

when we add custom compressors, we can add a getter for them like:
   StreamCompressor getCompressor();

As an implementation, I'd consider having SequenceFile.Reader be a bridge to the class that is doing the reading based on the how it is compressed.

Thoughts?

> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.5.0
>
>         Attachments: VIntCompressionResults.txt
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 25 19:31:59 2006
Return-Path: 
 <hadoop-dev-return-2749-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 42972 invoked from network); 25 Jul 2006 19:31:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 19:31:59 -0000
Received: (qmail 24159 invoked by uid 500); 25 Jul 2006 19:31:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24134 invoked by uid 500); 25 Jul 2006 19:31:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24112 invoked by uid 99); 25 Jul 2006 19:31:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 12:31:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 12:31:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5A4FE41000E
	for <hadoop-dev@lucene.apache.org>; Tue, 25 Jul 2006 19:29:15 +0000 (GMT)
Message-ID: <6927463.1153855755367.JavaMail.jira@brutus>
Date: Tue, 25 Jul 2006 12:29:15 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-385) rcc does not generate correct Java
 code for the field of a record type
In-Reply-To: <19912577.1153787893974.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-385?page=all ]

Milind Bhandarkar updated HADOOP-385:
-------------------------------------

    Attachment: hadoop-record.patch

Fixed bugs in code generation for embedded records.


> rcc does not generate correct Java code for the field of a record type
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-385
>                 URL: http://issues.apache.org/jira/browse/HADOOP-385
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.4.0
>            Reporter: Hairong Kuang
>         Assigned To: Milind Bhandarkar
>         Attachments: hadoop-record.patch
>
>
> If  a field of a Jute record  is also a Jute record and the target language is Java, rcc does not generate correct field name, correct code for deserializing the field. The access modifier "private" of the validation method causes problem for validating nested records.
> In addition, rcc can not handle the case when a comment started with "//" also contains the string "//".

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 25 20:12:39 2006
Return-Path: 
 <hadoop-dev-return-2750-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 54887 invoked from network); 25 Jul 2006 20:12:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 20:12:39 -0000
Received: (qmail 99902 invoked by uid 500); 25 Jul 2006 20:12:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 99844 invoked by uid 500); 25 Jul 2006 20:12:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 99768 invoked by uid 99); 25 Jul 2006 20:12:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 13:12:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 13:12:35 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C28CA41000A
	for <hadoop-dev@lucene.apache.org>; Tue, 25 Jul 2006 20:10:15 +0000 (GMT)
Message-ID: <12495301.1153858215794.JavaMail.jira@brutus>
Date: Tue, 25 Jul 2006 13:10:15 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-33) DF enhancement: performance and win XP
 support
In-Reply-To: <922804577.1139611475063.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-33?page=all ]

Konstantin Shvachko updated HADOOP-33:
--------------------------------------

    Attachment:     (was: DF.java)

> DF enhancement: performance and win XP support
> ----------------------------------------------
>
>                 Key: HADOOP-33
>                 URL: http://issues.apache.org/jira/browse/HADOOP-33
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: fs, dfs
>    Affects Versions: 0.1.0
>         Environment: Unix, Cygwin, Win XP
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>            Priority: Minor
>             Fix For: 0.1.0
>
>         Attachments: DF5.patch
>
>
> 1. DF is called twice for each heartbeat, which happens each 3 seconds.
> There is a simple fix for that in the attached patch.
> 2. cygwin is required to run df program in windows environment.
> There is a class org.apache.commons.io.FileSystemUtils, which can return disk free space
> for different OSs, but it does not have means to get disk capacity.
> In general in windows there is no efficient and uniform way to calculate disk capacity
> using a shell command.
> The choices are 'chkdsk' and 'defrag -a', but both of them are too slow to be called
> every 3 seconds.
> WinXP and 2003 server have a new tool called fsutil, which provides all necessary info.
> I implemented a call to fsutil in case df fails, and the OS is right.
> Other win versions should still run cygwin.
> I tested this fetaure for linux, winXP and cygwin.
> See attached patch.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 25 20:20:36 2006
Return-Path: 
 <hadoop-dev-return-2751-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57072 invoked from network); 25 Jul 2006 20:20:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 20:20:36 -0000
Received: (qmail 14416 invoked by uid 500); 25 Jul 2006 20:20:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14255 invoked by uid 500); 25 Jul 2006 20:20:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 14246 invoked by uid 99); 25 Jul 2006 20:20:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 13:20:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 13:20:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BCC0D41000A
	for <hadoop-dev@lucene.apache.org>; Tue, 25 Jul 2006 20:18:14 +0000 (GMT)
Message-ID: <2627613.1153858694770.JavaMail.jira@brutus>
Date: Tue, 25 Jul 2006 13:18:14 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-33) DF enhancement: performance and win XP
 support
In-Reply-To: <922804577.1139611475063.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-33?page=all ]

Konstantin Shvachko updated HADOOP-33:
--------------------------------------

    Attachment: DF.java

I'm updating the universal version of DF.java to reflect changes introduced by HADOOP-344.
DF is hadoop's only dependency on cygwin not counting the scripts.
In order to run it on windows XP (without cygwin) you need to replace DF.java with the
file attached.


> DF enhancement: performance and win XP support
> ----------------------------------------------
>
>                 Key: HADOOP-33
>                 URL: http://issues.apache.org/jira/browse/HADOOP-33
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: fs, dfs
>    Affects Versions: 0.1.0
>         Environment: Unix, Cygwin, Win XP
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>            Priority: Minor
>             Fix For: 0.1.0
>
>         Attachments: DF.java, DF5.patch
>
>
> 1. DF is called twice for each heartbeat, which happens each 3 seconds.
> There is a simple fix for that in the attached patch.
> 2. cygwin is required to run df program in windows environment.
> There is a class org.apache.commons.io.FileSystemUtils, which can return disk free space
> for different OSs, but it does not have means to get disk capacity.
> In general in windows there is no efficient and uniform way to calculate disk capacity
> using a shell command.
> The choices are 'chkdsk' and 'defrag -a', but both of them are too slow to be called
> every 3 seconds.
> WinXP and 2003 server have a new tool called fsutil, which provides all necessary info.
> I implemented a call to fsutil in case df fails, and the OS is right.
> Other win versions should still run cygwin.
> I tested this fetaure for linux, winXP and cygwin.
> See attached patch.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 25 20:54:39 2006
Return-Path: 
 <hadoop-dev-return-2752-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 66621 invoked from network); 25 Jul 2006 20:54:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 20:54:39 -0000
Received: (qmail 64869 invoked by uid 500); 25 Jul 2006 20:54:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64850 invoked by uid 500); 25 Jul 2006 20:54:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64820 invoked by uid 99); 25 Jul 2006 20:54:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 13:54:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 13:54:35 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3CAE1714283
	for <hadoop-dev@lucene.apache.org>; Tue, 25 Jul 2006 20:52:15 +0000 (GMT)
Message-ID: <8183040.1153860735246.JavaMail.jira@brutus>
Date: Tue, 25 Jul 2006 13:52:15 -0700 (PDT)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-302) class Text (replacement for class
 UTF8) was: HADOOP-136
In-Reply-To: <26017675.1150245149961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-302?page=all ]

Hairong Kuang updated HADOOP-302:
---------------------------------

    Attachment: VInt.patch

This patch extracts the zero-compress integer code in the hadoop record into hadoop io. It also adds functions for comparing serialized integers bytewise.

> class Text (replacement for class UTF8) was: HADOOP-136
> -------------------------------------------------------
>
>                 Key: HADOOP-302
>                 URL: http://issues.apache.org/jira/browse/HADOOP-302
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>            Reporter: Michel Tourn
>         Assigned To: Hairong Kuang
>         Attachments: VInt.patch
>
>
> Just to verify, which length-encoding scheme are we using for class Text (aka LargeUTF8) 
> a) The "UTF-8/Lucene" scheme? (highest bit of each byte is an extension bit, which I think is what Doug is describing in his last comment) or 
> b) the record-IO scheme in o.a.h.record.Utils.java:readInt 
> Either way, note that: 
> 1. UTF8.java and its successor Text.java need to read the length in two ways: 
>   1a. consume 1+ bytes from a DataInput and 
>   1b. parse the length within a byte array at a given offset 
> (1.b is used for the "WritableComparator optimized for UTF8 keys" ). 
> o.a.h.record.Utils only supports the DataInput mode. 
> It is not clear to me what is the best way to extend this Utils code when you need to support both reading modes 
> 2 Methods like UTF8's WritableComparator are to be low overhead, in partic. there should be no Object allocation. 
> For the byte array case, the varlen-reader utility needs to be extended to return both: 
>  the decoded length and the length of the encoded length. 
>  (so that the caller can do offset += encodedlength) 
>     
> 3. A String length does not need (small) negative integers. 
> 4. One advantage of a) is that it is standard (or at least well-known and natural) and there are no magic constants (like -120, -121 -124) 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 25 21:00:43 2006
Return-Path: 
 <hadoop-dev-return-2753-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68605 invoked from network); 25 Jul 2006 21:00:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 21:00:43 -0000
Received: (qmail 72030 invoked by uid 500); 25 Jul 2006 21:00:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72001 invoked by uid 500); 25 Jul 2006 21:00:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 71841 invoked by uid 99); 25 Jul 2006 21:00:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 14:00:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 14:00:37 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CA812714294
	for <hadoop-dev@lucene.apache.org>; Tue, 25 Jul 2006 20:58:16 +0000 (GMT)
Message-ID: <7986061.1153861096826.JavaMail.jira@brutus>
Date: Tue, 25 Jul 2006 13:58:16 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-211) logging improvements for Hadoop
In-Reply-To: <11693488.1147389488398.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-211?page=all ]

Sanjay Dahiya updated HADOOP-211:
---------------------------------

    Attachment: patch.txt

A patch for rolling hadoop logs from all nodes to a well defined directory structure in DFS. Log files can be optionally compressed with gzip or zip. Log files are rolled over after a default 10MB or at midnight. The files are rolled over in DFS at a configurable path in a directory structure e.g. - 
<archive path>/year/month/day/logfile_index.log.gz  

This patch depends on Log4J 1.3, so we may not want to commit it in main trunk yet. It can be used if one doesnt mind using log4j's XML configuration file format. Log4J's DailyRollingFileAppendr will be deperecated in future versions so we will have to use this inevitably. 

Please remember to upgrade the log4j.jar file to 1.3 version and remove the old version or this patch will not compile. 


> logging improvements for Hadoop
> -------------------------------
>
>                 Key: HADOOP-211
>                 URL: http://issues.apache.org/jira/browse/HADOOP-211
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.2.0
>            Reporter: Sameer Paranjpye
>         Assigned To: Sameer Paranjpye
>            Priority: Minor
>             Fix For: 0.3.0
>
>         Attachments: acl-log4j-II.patch.tgz, acl-log4j-webapps.patch, acl-log4j.patch, commons_logging_patch, patch.txt
>
>
> Here's a proposal for some impovements to the way Hadoop does logging. It advocates 3 
> broad changes to the way logging is currently done, these being:
> - The use of a uniform logging format by all Hadoop subsystems
> - The use of Apache commons logging as a facade above an underlying logging framework
> - The use of Log4J as the underlying logging framework instead of java.util.logging
> This is largely polishing work, but it seems like it would make log analysis and debugging
> easier in the short term. In the long term, it would future proof logging to the extent of
> allowing the logging framework used to change while requiring minimal code change. The 
> propos changes are motivated by the following requirements which we think Hadoops 
> logging should meet:
> - Hadoops logs should be amenable to analysis by tools like grep, sed, awk etc.
> - Log entries should be clearly annotated with a timestamp and a logging level
> - Log entries should be traceable to the subsystem from which they originated
> - The logging implementation should allow log entries to be annotated with source code 
> location information like classname, methodname, file and line number, without requiring
> code changes
> - It should be possible to change the logging implementation used without having to change
> thousands of lines of code
> - The mapping of loggers to destinations (files, directories, servers etc.) should be 
> specified and modifiable via configuration
> Uniform logging format:
> All Hadoop logs should have the following structure.
> <Header>\n
> <LogEntry>\n [<Exception>\n]
> .
> .
> .
> where the header line specifies the format of each log entry. The header line has the format:
> '# <Fieldname> <Fieldname>...\n'. 
> The default format of each log entry is: '# Timestamp Level LoggerName Message', where:
> - Timestamp is a date and time in the format MM/DD/YYYY:HH:MM:SS
> - Level is the logging level (FATAL, WARN, DEBUG, TRACE, etc.)
> - LoggerName is the short name of the logging subsystem from which the message originated e.g.
> fs.FSNamesystem, dfs.Datanode etc.
> - Message is the log message produced
> Why Apache commons logging and Log4J?
> Apache commons logging is a facade meant to be used as a wrapper around an underlying logging
> implementation. Bridges from Apache commons logging to popular logging implementations 
> (Java logging, Log4J, Avalon etc.) are implemented and available as part of the commons logging
> distribution. Implementing a bridge to an unsupported implementation is fairly striaghtforward
> and involves the implementation of subclasses of the commons logging LogFactory and Logger 
> classes. Using Apache commons logging and making all logging calls through it enables us to
> move to a different logging implementation by simply changing configuration in the best case.
> Even otherwise, it incurs minimal code churn overhead.
> Log4J offers a few benefits over java.util.logging that make it a more desirable choice for the
> logging back end.
> - Configuration Flexibility: The mapping of loggers to destinations (files, sockets etc.)
> can be completely specified in configuration. It is possible to do this with Java logging as
> well, however, configuration is a lot more restrictive. For instance, with Java logging all 
> log files must have names derived from the same pattern. For the namenode, log files could 
> be named with the pattern "%h/namenode%u.log" which would put log files in the user.home
> directory with names like namenode0.log etc. With Log4J it would be possible to configure
> the namenode to emit log files with different names, say heartbeats.log, namespace.log,
> clients.log etc. Configuration variables in Log4J can also have the values of system 
> properties embedded in them.
> - Takes wrappers into account: Log4J takes into account the possibility that an application
> may be invoking it via a wrapper, such as Apache commons logging. This is important because
> logging event objects must be able to infer the context of the logging call such as classname,
> methodname etc. Inferring context is a relatively expensive operation that involves creating
> an exception and examining the stack trace to find the frame just before the first frame 
> of the logging framework. It is therefore done lazily only when this information actually 
> needs to be logged. Log4J can be instructed to look for the frame corresponding to the wrapper
> class, Java logging cannot. In the case of Java logging this means that a) the bridge from 
> Apache commons logging is responsible for inferring the calling context and setting it in the 
> logging event and b) this inference has to be done on every logging call regardless of whether
> or not it is needed.
> - More handy features: Log4J has some handy features that Java logging doesn't. A couple
> of examples of these:
> a) Date based rolling of log files 
> b) Format control through configuration. Log4J has a PatternLayout class that can be 
> configured to generate logs with a user specified pattern. The logging format described
> above can be described as "%d{MM/dd/yyyy:HH:mm:SS} %c{2} %p %m". The format specifiers
> indicate that each log line should have the date and time followed by the logger name followed
> by the logging level or priority followed by the application generated message.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 25 21:06:39 2006
Return-Path: 
 <hadoop-dev-return-2754-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 70939 invoked from network); 25 Jul 2006 21:06:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 21:06:39 -0000
Received: (qmail 84272 invoked by uid 500); 25 Jul 2006 21:06:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 84235 invoked by uid 500); 25 Jul 2006 21:06:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 84185 invoked by uid 99); 25 Jul 2006 21:06:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 14:06:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 14:06:36 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4B12F714283
	for <hadoop-dev@lucene.apache.org>; Tue, 25 Jul 2006 21:04:16 +0000 (GMT)
Message-ID: <13878798.1153861456304.JavaMail.jira@brutus>
Date: Tue, 25 Jul 2006 14:04:16 -0700 (PDT)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-302) class Text (replacement for class
 UTF8) was: HADOOP-136
In-Reply-To: <26017675.1150245149961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-302?page=all ]

Hairong Kuang updated HADOOP-302:
---------------------------------

    Attachment: text.patch

This patch includes Text class which stores a string in the standard utf8 format, compares two strings bytewise in the utf8 order, and many other functions.

This patch also includes a Junit test for the Text class.

Many thanks to Addison Philip for his tim on the design discussion and code review. He also contributed quite a lot of code.

> class Text (replacement for class UTF8) was: HADOOP-136
> -------------------------------------------------------
>
>                 Key: HADOOP-302
>                 URL: http://issues.apache.org/jira/browse/HADOOP-302
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>            Reporter: Michel Tourn
>         Assigned To: Hairong Kuang
>         Attachments: text.patch, VInt.patch
>
>
> Just to verify, which length-encoding scheme are we using for class Text (aka LargeUTF8) 
> a) The "UTF-8/Lucene" scheme? (highest bit of each byte is an extension bit, which I think is what Doug is describing in his last comment) or 
> b) the record-IO scheme in o.a.h.record.Utils.java:readInt 
> Either way, note that: 
> 1. UTF8.java and its successor Text.java need to read the length in two ways: 
>   1a. consume 1+ bytes from a DataInput and 
>   1b. parse the length within a byte array at a given offset 
> (1.b is used for the "WritableComparator optimized for UTF8 keys" ). 
> o.a.h.record.Utils only supports the DataInput mode. 
> It is not clear to me what is the best way to extend this Utils code when you need to support both reading modes 
> 2 Methods like UTF8's WritableComparator are to be low overhead, in partic. there should be no Object allocation. 
> For the byte array case, the varlen-reader utility needs to be extended to return both: 
>  the decoded length and the length of the encoded length. 
>  (so that the caller can do offset += encodedlength) 
>     
> 3. A String length does not need (small) negative integers. 
> 4. One advantage of a) is that it is standard (or at least well-known and natural) and there are no magic constants (like -120, -121 -124) 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 25 21:12:36 2006
Return-Path: 
 <hadoop-dev-return-2755-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 73246 invoked from network); 25 Jul 2006 21:12:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 21:12:36 -0000
Received: (qmail 99212 invoked by uid 500); 25 Jul 2006 21:12:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 99045 invoked by uid 500); 25 Jul 2006 21:12:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 99031 invoked by uid 99); 25 Jul 2006 21:12:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 14:12:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 14:12:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EC3EB71428E
	for <hadoop-dev@lucene.apache.org>; Tue, 25 Jul 2006 21:10:13 +0000 (GMT)
Message-ID: <11938442.1153861813965.JavaMail.jira@brutus>
Date: Tue, 25 Jul 2006 14:10:13 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-388) the hadoop-daemons.sh fails with "no
 such file or directory" when used from a relative path
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

the hadoop-daemons.sh fails with "no such file or directory" when used from a relative path
-------------------------------------------------------------------------------------------

                 Key: HADOOP-388
                 URL: http://issues.apache.org/jira/browse/HADOOP-388
             Project: Hadoop
          Issue Type: Bug
    Affects Versions: 0.5.0
            Reporter: Owen O'Malley
         Assigned To: Owen O'Malley
             Fix For: 0.5.0


The new shell scripts fail with a relative directory:

% current/bin/hadoop-daemons.sh start datanode
node1: current/bin/..: No such file or directory
node2: current/bin/..: No such file or directory

The problem is that HADOOP_HOME is set to a relative directory and hadoop-daemons does a cd, breaking the other scripts.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 25 21:14:39 2006
Return-Path: 
 <hadoop-dev-return-2756-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 74442 invoked from network); 25 Jul 2006 21:14:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 21:14:39 -0000
Received: (qmail 7127 invoked by uid 500); 25 Jul 2006 21:14:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 7100 invoked by uid 500); 25 Jul 2006 21:14:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 7091 invoked by uid 99); 25 Jul 2006 21:14:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 14:14:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 14:14:35 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E9F1C714294
	for <hadoop-dev@lucene.apache.org>; Tue, 25 Jul 2006 21:12:14 +0000 (GMT)
Message-ID: <28509282.1153861934955.JavaMail.jira@brutus>
Date: Tue, 25 Jul 2006 14:12:14 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-388) the hadoop-daemons.sh fails with "no
 such file or directory" when used from a relative path
In-Reply-To: <11938442.1153861813965.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-388?page=all ]

Owen O'Malley updated HADOOP-388:
---------------------------------

    Attachment: absolute-dir.patch

This patch makes hadoop-config.sh create an absolute path name for HADOOP_HOME.

> the hadoop-daemons.sh fails with "no such file or directory" when used from a relative path
> -------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-388
>                 URL: http://issues.apache.org/jira/browse/HADOOP-388
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.5.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.5.0
>
>         Attachments: absolute-dir.patch
>
>
> The new shell scripts fail with a relative directory:
> % current/bin/hadoop-daemons.sh start datanode
> node1: current/bin/..: No such file or directory
> node2: current/bin/..: No such file or directory
> The problem is that HADOOP_HOME is set to a relative directory and hadoop-daemons does a cd, breaking the other scripts.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Jul 25 21:52:36 2006
Return-Path: 
 <hadoop-dev-return-2757-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 87508 invoked from network); 25 Jul 2006 21:52:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 21:52:36 -0000
Received: (qmail 73219 invoked by uid 500); 25 Jul 2006 21:52:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 73058 invoked by uid 500); 25 Jul 2006 21:52:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 73049 invoked by uid 99); 25 Jul 2006 21:52:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 14:52:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 14:52:35 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B3E6F71428E
	for <hadoop-dev@lucene.apache.org>; Tue, 25 Jul 2006 21:50:14 +0000 (GMT)
Message-ID: <5557516.1153864214734.JavaMail.jira@brutus>
Date: Tue, 25 Jul 2006 14:50:14 -0700 (PDT)
From: "Benjamin Reed (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-367) Static blocks do not automatically
 run when a class is loaded in Java 5.0
In-Reply-To: <22771983.1153174453937.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-367?page=comments#action_12423469 ] 
            
Benjamin Reed commented on HADOOP-367:
--------------------------------------

When would you call setAccessable? It would have to be outside of the class 
since nothing is initialized at class load time.

One option would be to put a public static getFactory() method on class that want this non-public behavior. 
Not only would that cause the static blocks to be run when called, but it would allow you 
to get rid of the factory table and just use reflection to call getFactory() 
on the class if there is one otherwise fall back to newInstance().

> Static blocks do not automatically run when a class is loaded in Java 5.0
> -------------------------------------------------------------------------
>
>                 Key: HADOOP-367
>                 URL: http://issues.apache.org/jira/browse/HADOOP-367
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.4.0
>         Environment: Java 5.0
>            Reporter: Benjamin Reed
>
> There seems to be a change that happened between 1.4 and 1.5 with respect to static initializers. I can't find this documented, but I can reproduce with a very simple program. Basically, a static initializer is not called unless a static member/method of the class is accessed or an instance is created. This is actually what the JLS says, but until 1.5 the static initializers ran when the class was loaded. Note that this behavior only occurs when running with the 1.5 JRE AND compiling for 1.5.
> For many Writables this isn't an issue, so the fallback behavior of the WritableFactory works, but Block is package private, so loadEdits fails when called from org.apache.hadoop.io.ArrayWritable.readFields() yielding the following trace:
> Caused by: java.lang.RuntimeException: java.lang.IllegalAccessException: Class org.apache.hadoop.io.WritableFactories can not access a member of class org.apache.hadoop.dfs.Block with modifiers "public"
>         at org.apache.hadoop.io.WritableFactories.newInstance(WritableFactories.java:49)
>         at org.apache.hadoop.io.ArrayWritable.readFields(ArrayWritable.java:81)
>         at org.apache.hadoop.dfs.FSDirectory.loadFSEdits(FSDirectory.java:532)
>         at org.apache.hadoop.dfs.FSDirectory.loadFSImage(FSDirectory.java:470)
>         at org.apache.hadoop.dfs.FSDirectory.<init>(FSDirectory.java:307)
>         at org.apache.hadoop.dfs.FSNamesystem.<init>(FSNamesystem.java:177)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:91)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:84)
>         at org.apache.hadoop.dfs.NameNode.main(NameNode.java:491)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 26 02:26:48 2006
Return-Path: 
 <hadoop-dev-return-2758-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 61879 invoked from network); 26 Jul 2006 02:26:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 02:26:48 -0000
Received: (qmail 69478 invoked by uid 500); 26 Jul 2006 02:26:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 69453 invoked by uid 500); 26 Jul 2006 02:26:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 69444 invoked by uid 99); 26 Jul 2006 02:26:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 19:26:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [80.64.182.137] (HELO mslinux.media-style.com) (80.64.182.137)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 19:26:45 -0700
Received: from localhost (localhost [127.0.0.1])
	by mslinux.media-style.com (Postfix) with ESMTP id 21BA3144783
	for <hadoop-dev@lucene.apache.org>; Wed, 26 Jul 2006 04:26:24 +0200 (CEST)
Received: from mslinux.media-style.com ([127.0.0.1])
	by localhost (mslinux.media-style.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 31949-09 for <hadoop-dev@lucene.apache.org>;
	Wed, 26 Jul 2006 04:26:23 +0200 (CEST)
Received: from [192.168.50.3] (dsl017-055-128.sfo1.dsl.speakeasy.net
 [69.17.55.128])
	by mslinux.media-style.com (Postfix) with ESMTP id 7112C144782
	for <hadoop-dev@lucene.apache.org>; Wed, 26 Jul 2006 04:26:23 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Transfer-Encoding: 7bit
Message-Id: <2DA4221F-9CDE-4CBB-8F49-F7A097F4683F@media-style.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: hadoop-dev@lucene.apache.org
From: Stefan Groschupf <sg@media-style.com>
Subject: tasks can't log bug?
Date: Tue, 25 Jul 2006 19:26:17 -0700
X-Mailer: Apple Mail (2.752.2)
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at media-style.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Hadoop developers,

I'm confused about the way logging works within map or reduce tasks.
Since tasks are launched in a new JVM  the java system properties  
"hadoop.log.dir" and "hadoop.log.file" are not passed to the new JVM.
This prevents the child process from logging properly. In fact you get:

  java.io.FileNotFoundException: / (Is a directory)
   at java.io.FileOutputStream.openAppend(Native Method)
   at java.io.FileOutputStream.<init>(FileOutputStream.java:177)
   at java.io.FileOutputStream.<init>(FileOutputStream.java:102)
   at org.apache.log4j.FileAppender.setFile(FileAppender.java:289)
   at org.apache.log4j.RollingFileAppender.setFile 
(RollingFileAppender.java:165)
   at org.apache.log4j.FileAppender.activateOptions(FileAppender.java: 
163)
   at org.apache.log4j.config.PropertySetter.activate 
(PropertySetter.java:256)
   at org.apache.log4j.config.PropertySetter.setProperties 
(PropertySetter.java:132)
   at org.apache.log4j.config.PropertySetter.setProperties 
(PropertySetter.java:96)
   at org.apache.log4j.PropertyConfigurator.parseAppender 
(PropertyConfigurator.java:654)
   at org.apache.log4j.PropertyConfigurator.parseCategory 
(PropertyConfigurator.java:612)
   at org.apache.log4j.PropertyConfigurator.configureRootCategory 
(PropertyConfigurator.j
2006-07-25 15:59:07,553 INFO  mapred.TaskTracker  
(TaskTracker.java:main(993)) - Child
   at org.apache.log4j.PropertyConfigurator.doConfigure 
(PropertyConfigurator.java:415)
   at org.apache.log4j.PropertyConfigurator.doConfigure 
(PropertyConfigurator.java:441)
   at org.apache.log4j.helpers.OptionConverter.selectAndConfigure 
(OptionConverter.java:4
   at org.apache.log4j.LogManager.<clinit>(LogManager.java:122)
   at org.apache.log4j.Logger.getLogger(Logger.java:104)
   at org.apache.commons.logging.impl.Log4JLogger.getLogger 
(Log4JLogger.java:229)
   at org.apache.commons.logging.impl.Log4JLogger.<init> 
(Log4JLogger.java:65)
   at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native  
Method)
   at sun.reflect.NativeConstructorAccessorImpl.newInstance 
(NativeConstructorAccessorImp
   at sun.reflect.DelegatingConstructorAccessorImpl.newInstance 
(DelegatingConstructorAcc
   at java.lang.reflect.Constructor.newInstance(Constructor.java:494)
   at org.apache.commons.logging.impl.LogFactoryImpl.newInstance 
(LogFactoryImpl.java:529
   at org.apache.commons.logging.impl.LogFactoryImpl.getInstance 
(LogFactoryImpl.java:235
   at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:370)
   at org.apache.hadoop.mapred.TaskTracker.<clinit>(TaskTracker.java:44)
   at org.apache.hadoop.mapred.TaskTracker$Child.main 
(TaskTracker.java:993)

We see several ways to solve this problem. First retrieve the  
properties "hadoop.log.dir" and "hadoop.log.file" from the mother JVM  
and then pass them to the child JVM as within the args parameter.
Second would be to  access the environment variables  
"$HADOOP_LOG_DIR" and "$HADOOP_LOGFILE" using System.getEnv (java 1.5).
Third there would be a more general solution. Taskrunner would  
resolve any environment variables it found in  
"mapred.child.java.opts" by lookup the value using System.getEnv().
Eg:
unix:
export MAX_MEMORY = 200
hadoop-site.xml:
<name>mapred.child.java.opts</name>
<value>-Xmx${MAX_MEMORY}</value>


Stefan




  

From MAILER-DAEMON Wed Jul 26 02:31:36 2006
Return-Path: 
 <hadoop-dev-return-2759-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 62335 invoked from network); 26 Jul 2006 02:31:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 02:31:36 -0000
Received: (qmail 73274 invoked by uid 500); 26 Jul 2006 02:31:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 73118 invoked by uid 500); 26 Jul 2006 02:31:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 73109 invoked by uid 99); 26 Jul 2006 02:31:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 19:31:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 19:31:35 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 32FFC714293
	for <hadoop-dev@lucene.apache.org>; Wed, 26 Jul 2006 02:29:15 +0000 (GMT)
Message-ID: <14184637.1153880955206.JavaMail.jira@brutus>
Date: Tue, 25 Jul 2006 19:29:15 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-335) factor out the namespace
 image/transaction log writing
In-Reply-To: <14300759.1151602229834.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-335?page=all ]

Konstantin Shvachko updated HADOOP-335:
---------------------------------------

    Attachment: FSImage_Refactor2.patch

- I synchronized the patch with the current trunk,
- and reversed indentation changes.


> factor out the namespace image/transaction log writing
> ------------------------------------------------------
>
>                 Key: HADOOP-335
>                 URL: http://issues.apache.org/jira/browse/HADOOP-335
>             Project: Hadoop
>          Issue Type: Improvement
>            Reporter: Owen O'Malley
>         Assigned To: Konstantin Shvachko
>         Attachments: FSImage_Refactor1.patch, FSImage_Refactor2.patch
>
>
> Factor the checkpoint/transaction log handling code out of FSNameSystem into its own class.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 26 05:57:38 2006
Return-Path: 
 <hadoop-dev-return-2760-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12318 invoked from network); 26 Jul 2006 05:57:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 05:57:38 -0000
Received: (qmail 68830 invoked by uid 500); 26 Jul 2006 05:57:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68673 invoked by uid 500); 26 Jul 2006 05:57:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68663 invoked by uid 99); 26 Jul 2006 05:57:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 22:57:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 22:57:36 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A9EEC71428E
	for <hadoop-dev@lucene.apache.org>; Wed, 26 Jul 2006 05:55:15 +0000 (GMT)
Message-ID: <10353332.1153893315693.JavaMail.jira@brutus>
Date: Tue, 25 Jul 2006 22:55:15 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-54?page=comments#action_12423530 ] 
            
Owen O'Malley commented on HADOOP-54:
-------------------------------------

Ok, after talking it over with Eric, here is what is hopefully a last pass at this.

All in SequenceFile:

public static class Writer {
  ... current stuff ...
  /**
   * Append an uncompressed representation of the key and a raw representation of the value as the
   * next record.
   */
  public void appendRaw(byte[] key, int keyOffset, int keyLength, RawValue value);
}

public static class RecordCompressWriter extends Writer {
   ... constructor and some overriding methods ...
}

public static class BlockCompressWriter extends Writer {
   ... constructor and some overriding methods ...
}

public static class Reader {
  ... current stuff ...
  /**
   * Read the next key into the key buffer and return the value as a RawValue.
   * @param key a buffer to store the uncompressed serialized key in as a sequence of bytes
   * @returns NULL if there are no more key/value pairs in the file
   */
  public RawValue readRaw(DataOutputStream key);
}

public static interface RawValue {

   // writes the uncompressed bytes to the outStream
   public void writeUncompressedBytes(DataOutputStream outStream);

   // is this raw value compressed (using zip)?
   public boolean canWriteCompressed();

   // write the (zip) compressed bytes. note that it will NOT compress the bytes if they are not 
   // already compressed
   // throws IllegalArgumentException if the value is not already compressed
   public void writeCompressedBytes(DataOutputStream outStream);

   // when we add custom compressors, we would add:
   public boolean canWriteCompressed(Class compressorClass);
   public void writeCompressedBytes(Class compressorClass, DataOutputStream outStream);
}


> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.5.0
>
>         Attachments: VIntCompressionResults.txt
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 26 06:43:45 2006
Return-Path: 
 <hadoop-dev-return-2761-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 27138 invoked from network); 26 Jul 2006 06:43:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 06:43:45 -0000
Received: (qmail 28759 invoked by uid 500); 26 Jul 2006 06:43:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28511 invoked by uid 500); 26 Jul 2006 06:43:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28478 invoked by uid 99); 26 Jul 2006 06:43:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 23:43:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 23:43:35 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D3686410009
	for <hadoop-dev@lucene.apache.org>; Wed, 26 Jul 2006 06:41:14 +0000 (GMT)
Message-ID: <8655781.1153896074863.JavaMail.jira@brutus>
Date: Tue, 25 Jul 2006 23:41:14 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-321) DatanodeInfo refactoring
In-Reply-To: <20976373.1151024969902.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-321?page=comments#action_12423545 ] 
            
Owen O'Malley commented on HADOOP-321:
--------------------------------------

I'm +1 for commiting this before it goes stale again.

> DatanodeInfo refactoring
> ------------------------
>
>                 Key: HADOOP-321
>                 URL: http://issues.apache.org/jira/browse/HADOOP-321
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.5.0
>
>         Attachments: DatanodeInfo_refactor.patch, DatanodeInfo_refactor3.patch, DatanodeInfo_refactor4-comp.patch, DatanodeInfo_refactor4.patch, DatanodeInfo_refactor5.patch
>
>
> I'm trying to refactor some name node classes, which seem to be similar.
> So DatanodeInfo is a public api now for purely external ( to name node) use.
> The name node class that stores information about data nodes including the
> set of its blocks is called DatanodeDescriptor.
> The DatanodeReport is removed since it was a variation of DatanodeInfo.
> Previously DatanodeInfo and DatanodeDescriptor were the same class, and
> DatanodeReport was used for reporting node statistics only.
> This is a preparation step for HADOOP-306.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 26 06:50:41 2006
Return-Path: 
 <hadoop-dev-return-2762-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 29347 invoked from network); 26 Jul 2006 06:50:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 06:50:41 -0000
Received: (qmail 39610 invoked by uid 500); 26 Jul 2006 06:50:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 39576 invoked by uid 500); 26 Jul 2006 06:50:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 39552 invoked by uid 99); 26 Jul 2006 06:50:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 23:50:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 23:50:36 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D8F2B410009
	for <hadoop-dev@lucene.apache.org>; Wed, 26 Jul 2006 06:48:15 +0000 (GMT)
Message-ID: <16207192.1153896495886.JavaMail.jira@brutus>
Date: Tue, 25 Jul 2006 23:48:15 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-312) Connections should not be cached
In-Reply-To: <13061881.1150916131961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-312?page=all ]

Devaraj Das updated HADOOP-312:
-------------------------------

    Attachment:     (was: config_connection_cache.patch)

> Connections should not be cached
> --------------------------------
>
>                 Key: HADOOP-312
>                 URL: http://issues.apache.org/jira/browse/HADOOP-312
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: ipc
>    Affects Versions: 0.4.0
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>
> Servers and clients (client include datanodes, tasktrackers, DFSClients & tasks) should not cache connections or maybe cache them for very short periods of time. Clients should set up & tear down connections to the servers everytime they need to contact the servers (including the heartbeats). If connection is cached, then reuse the existing connection for a few subsequent transactions until the connection expires. The heartbeat interval should be more so that many more clients (order of  tens of thousands) can be accomodated within 1 heartbeat interval.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 26 07:00:47 2006
Return-Path: 
 <hadoop-dev-return-2763-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33150 invoked from network); 26 Jul 2006 07:00:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 07:00:47 -0000
Received: (qmail 53738 invoked by uid 500); 26 Jul 2006 07:00:43 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53712 invoked by uid 500); 26 Jul 2006 07:00:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53645 invoked by uid 99); 26 Jul 2006 07:00:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 00:00:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 00:00:35 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CAEE441000A
	for <hadoop-dev@lucene.apache.org>; Wed, 26 Jul 2006 06:58:14 +0000 (GMT)
Message-ID: <10945895.1153897094828.JavaMail.jira@brutus>
Date: Tue, 25 Jul 2006 23:58:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-321) DatanodeInfo refactoring
In-Reply-To: <20976373.1151024969902.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-321?page=all ]

Doug Cutting resolved HADOOP-321.
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks!

> DatanodeInfo refactoring
> ------------------------
>
>                 Key: HADOOP-321
>                 URL: http://issues.apache.org/jira/browse/HADOOP-321
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.5.0
>
>         Attachments: DatanodeInfo_refactor.patch, DatanodeInfo_refactor3.patch, DatanodeInfo_refactor4-comp.patch, DatanodeInfo_refactor4.patch, DatanodeInfo_refactor5.patch
>
>
> I'm trying to refactor some name node classes, which seem to be similar.
> So DatanodeInfo is a public api now for purely external ( to name node) use.
> The name node class that stores information about data nodes including the
> set of its blocks is called DatanodeDescriptor.
> The DatanodeReport is removed since it was a variation of DatanodeInfo.
> Previously DatanodeInfo and DatanodeDescriptor were the same class, and
> DatanodeReport was used for reporting node statistics only.
> This is a preparation step for HADOOP-306.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 26 07:07:36 2006
Return-Path: 
 <hadoop-dev-return-2764-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34482 invoked from network); 26 Jul 2006 07:07:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 07:07:36 -0000
Received: (qmail 59290 invoked by uid 500); 26 Jul 2006 07:07:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 59271 invoked by uid 500); 26 Jul 2006 07:07:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 59261 invoked by uid 99); 26 Jul 2006 07:07:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 00:07:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 00:07:35 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C8FBF410009
	for <hadoop-dev@lucene.apache.org>; Wed, 26 Jul 2006 07:05:14 +0000 (GMT)
Message-ID: <20959675.1153897514820.JavaMail.jira@brutus>
Date: Wed, 26 Jul 2006 00:05:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-375) Introduce a way for datanodes to
 register their HTTP info ports with the NameNode
In-Reply-To: <28904462.1153478956900.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-375?page=comments#action_12423556 ] 
            
Doug Cutting commented on HADOOP-375:
-------------------------------------

Sorry, this has conflicts with HADOOP-321, which I just committed.  Can you please regenerate this?  Thanks.

> Introduce a way for datanodes to register their HTTP info ports with the NameNode
> ---------------------------------------------------------------------------------
>
>                 Key: HADOOP-375
>                 URL: http://issues.apache.org/jira/browse/HADOOP-375
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: content_browsing.new.patch, content_browsing.new.patch, content_browsing.new.patch
>
>
> If we have multiple datanodes within a single machine the Jetty servers (other than the first one) won't be able to bind to the fixed HTTP port. So, one solution is to have the datanodes pick a free port (starting from a configured port value) and then inform namenode about it so that the namenode can then do redirects, etc.
> Johan Oskarson reported this problem. 
> If a computer have a second dfs data dir in the config it doesn't start properly because of:
> Exception in thread "main" java.io.IOException: Problem starting http server
>         at org.apache.hadoop.mapred.StatusHttpServer.start(StatusHttpServer.java:182)
>         at org.apache.hadoop.dfs.DataNode.<init>(DataNode.java:170)
>         at org.apache.hadoop.dfs.DataNode.makeInstanceForDir(DataNode.java:1045)
>         at org.apache.hadoop.dfs.DataNode.run(DataNode.java:999)
>         at org.apache.hadoop.dfs.DataNode.runAndWait(DataNode.java:1015)
>         at org.apache.hadoop.dfs.DataNode.main(DataNode.java:1066)
> Caused by: org.mortbay.util.MultiException[java.net.BindException: Address already in use]
>         at org.mortbay.http.HttpServer.doStart(HttpServer.java:731)
>         at org.mortbay.util.Container.start(Container.java:72)
>         at org.apache.hadoop.mapred.StatusHttpServer.start(StatusHttpServer.java:159)
>         ... 5 more

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 26 07:28:40 2006
Return-Path: 
 <hadoop-dev-return-2765-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 45592 invoked from network); 26 Jul 2006 07:28:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 07:28:40 -0000
Received: (qmail 83277 invoked by uid 500); 26 Jul 2006 07:28:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 83246 invoked by uid 500); 26 Jul 2006 07:28:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 83237 invoked by uid 99); 26 Jul 2006 07:28:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 00:28:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 00:28:38 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BED9D41000D
	for <hadoop-dev@lucene.apache.org>; Wed, 26 Jul 2006 07:26:17 +0000 (GMT)
Message-ID: <21159976.1153898777779.JavaMail.jira@brutus>
Date: Wed, 26 Jul 2006 00:26:17 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-54?page=comments#action_12423560 ] 
            
Doug Cutting commented on HADOOP-54:
------------------------------------

I mostly have minor naming quibbles.

The Writer method should be named just 'next', not 'nextRaw'.

The new Writer subclasses should not be public, but rather should be created by a factory method.

The RawValue class might better be named 'ValueBytes', and it's methods can simply be called writeCompressed(), writeUncompressed(), etc.

Finally, a substantive remark: we should not allocate a new RawValue for each key read.  So the new Reader methods should be:

public ValueBytes createValueBytes();
public void next(DataOutputStream key, ValueBytes value);



> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.5.0
>
>         Attachments: VIntCompressionResults.txt
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 26 07:33:36 2006
Return-Path: 
 <hadoop-dev-return-2766-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46267 invoked from network); 26 Jul 2006 07:33:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 07:33:36 -0000
Received: (qmail 86712 invoked by uid 500); 26 Jul 2006 07:33:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86684 invoked by uid 500); 26 Jul 2006 07:33:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86675 invoked by uid 99); 26 Jul 2006 07:33:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 00:33:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 00:33:35 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C06CF41000D
	for <hadoop-dev@lucene.apache.org>; Wed, 26 Jul 2006 07:31:14 +0000 (GMT)
Message-ID: <31362649.1153899074785.JavaMail.jira@brutus>
Date: Wed, 26 Jul 2006 00:31:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-387) LocalJobRunner assigns duplicate
 mapid's
In-Reply-To: <26609588.1153852813921.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-387?page=all ]

Doug Cutting resolved HADOOP-387.
---------------------------------

    Fix Version/s: 0.5.0
       Resolution: Fixed

I just committed this.  Thanks, Sami!

> LocalJobRunner assigns duplicate mapid's
> ----------------------------------------
>
>                 Key: HADOOP-387
>                 URL: http://issues.apache.org/jira/browse/HADOOP-387
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.4.0
>         Environment: xp, cygwin, jdk1.4.2_12
>            Reporter: Sami Siren
>             Fix For: 0.5.0
>
>         Attachments: hadoop-fix-dup-id-0.4.patch, hadoop-fix-dup-id-trunk.patch
>
>
> While hunting down nutch issue NUTCH-266 i discovered that id's are generated with following fragment of code:
>     private String newId() {
>       return Integer.toString(Math.abs(new Random().nextInt()),36);
>     }
> and the related Javadoc:
> "
> public Random()
>     Creates a new random number generator. Its seed is initialized to a value based on the current time:
>          public Random() { this(System.currentTimeMillis()); }
>     Two Random objects created within the same millisecond will have the same sequence of random numbers.
> "
> it appears that in this case there are more than one Random pobject generated at the same millisecond and id's are
> no longer unique.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 26 07:42:43 2006
Return-Path: 
 <hadoop-dev-return-2767-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 47544 invoked from network); 26 Jul 2006 07:42:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 07:42:43 -0000
Received: (qmail 96036 invoked by uid 500); 26 Jul 2006 07:42:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 96010 invoked by uid 500); 26 Jul 2006 07:42:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 96001 invoked by uid 99); 26 Jul 2006 07:42:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 00:42:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 00:42:41 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 02694410009
	for <hadoop-dev@lucene.apache.org>; Wed, 26 Jul 2006 07:40:16 +0000 (GMT)
Message-ID: <16289326.1153899616006.JavaMail.jira@brutus>
Date: Wed, 26 Jul 2006 00:40:16 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-385) rcc does not generate correct Java
 code for the field of a record type
In-Reply-To: <19912577.1153787893974.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-385?page=all ]

Doug Cutting resolved HADOOP-385.
---------------------------------

    Fix Version/s: 0.5.0
       Resolution: Fixed

I just committed this.  Thanks, Milind!

> rcc does not generate correct Java code for the field of a record type
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-385
>                 URL: http://issues.apache.org/jira/browse/HADOOP-385
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.4.0
>            Reporter: Hairong Kuang
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.5.0
>
>         Attachments: hadoop-record.patch
>
>
> If  a field of a Jute record  is also a Jute record and the target language is Java, rcc does not generate correct field name, correct code for deserializing the field. The access modifier "private" of the validation method causes problem for validating nested records.
> In addition, rcc can not handle the case when a comment started with "//" also contains the string "//".

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 26 08:07:38 2006
Return-Path: 
 <hadoop-dev-return-2768-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 53302 invoked from network); 26 Jul 2006 08:07:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 08:07:38 -0000
Received: (qmail 34274 invoked by uid 500); 26 Jul 2006 08:07:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 34255 invoked by uid 500); 26 Jul 2006 08:07:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 34246 invoked by uid 99); 26 Jul 2006 08:07:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 01:07:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 01:07:37 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 413C5410009
	for <hadoop-dev@lucene.apache.org>; Wed, 26 Jul 2006 08:05:16 +0000 (GMT)
Message-ID: <2969502.1153901116264.JavaMail.jira@brutus>
Date: Wed, 26 Jul 2006 01:05:16 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-302) class Text (replacement for class
 UTF8) was: HADOOP-136
In-Reply-To: <26017675.1150245149961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-302?page=all ]

Doug Cutting resolved HADOOP-302.
---------------------------------

    Fix Version/s: 0.5.0
       Resolution: Fixed

I just committed this.  Thanks!

> class Text (replacement for class UTF8) was: HADOOP-136
> -------------------------------------------------------
>
>                 Key: HADOOP-302
>                 URL: http://issues.apache.org/jira/browse/HADOOP-302
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>            Reporter: Michel Tourn
>         Assigned To: Hairong Kuang
>             Fix For: 0.5.0
>
>         Attachments: text.patch, VInt.patch
>
>
> Just to verify, which length-encoding scheme are we using for class Text (aka LargeUTF8) 
> a) The "UTF-8/Lucene" scheme? (highest bit of each byte is an extension bit, which I think is what Doug is describing in his last comment) or 
> b) the record-IO scheme in o.a.h.record.Utils.java:readInt 
> Either way, note that: 
> 1. UTF8.java and its successor Text.java need to read the length in two ways: 
>   1a. consume 1+ bytes from a DataInput and 
>   1b. parse the length within a byte array at a given offset 
> (1.b is used for the "WritableComparator optimized for UTF8 keys" ). 
> o.a.h.record.Utils only supports the DataInput mode. 
> It is not clear to me what is the best way to extend this Utils code when you need to support both reading modes 
> 2 Methods like UTF8's WritableComparator are to be low overhead, in partic. there should be no Object allocation. 
> For the byte array case, the varlen-reader utility needs to be extended to return both: 
>  the decoded length and the length of the encoded length. 
>  (so that the caller can do offset += encodedlength) 
>     
> 3. A String length does not need (small) negative integers. 
> 4. One advantage of a) is that it is standard (or at least well-known and natural) and there are no magic constants (like -120, -121 -124) 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 26 08:13:37 2006
Return-Path: 
 <hadoop-dev-return-2769-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 55858 invoked from network); 26 Jul 2006 08:13:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 08:13:37 -0000
Received: (qmail 44019 invoked by uid 500); 26 Jul 2006 08:13:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 43881 invoked by uid 500); 26 Jul 2006 08:13:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 43872 invoked by uid 99); 26 Jul 2006 08:13:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 01:13:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 01:13:35 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BA05E41000D
	for <hadoop-dev@lucene.apache.org>; Wed, 26 Jul 2006 08:11:14 +0000 (GMT)
Message-ID: <19177348.1153901474759.JavaMail.jira@brutus>
Date: Wed, 26 Jul 2006 01:11:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-388) the hadoop-daemons.sh fails with "no
 such file or directory" when used from a relative path
In-Reply-To: <11938442.1153861813965.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-388?page=all ]

Doug Cutting resolved HADOOP-388.
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Owen.

> the hadoop-daemons.sh fails with "no such file or directory" when used from a relative path
> -------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-388
>                 URL: http://issues.apache.org/jira/browse/HADOOP-388
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.5.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.5.0
>
>         Attachments: absolute-dir.patch
>
>
> The new shell scripts fail with a relative directory:
> % current/bin/hadoop-daemons.sh start datanode
> node1: current/bin/..: No such file or directory
> node2: current/bin/..: No such file or directory
> The problem is that HADOOP_HOME is set to a relative directory and hadoop-daemons does a cd, breaking the other scripts.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 26 08:17:44 2006
Return-Path: 
 <hadoop-dev-return-2770-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 59388 invoked from network); 26 Jul 2006 08:17:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 08:17:44 -0000
Received: (qmail 52498 invoked by uid 500); 26 Jul 2006 08:17:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 52473 invoked by uid 500); 26 Jul 2006 08:17:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 52460 invoked by uid 99); 26 Jul 2006 08:17:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 01:17:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 01:17:35 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B29D041000D
	for <hadoop-dev@lucene.apache.org>; Wed, 26 Jul 2006 08:15:14 +0000 (GMT)
Message-ID: <15753731.1153901714729.JavaMail.jira@brutus>
Date: Wed, 26 Jul 2006 01:15:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-367) Static blocks do not automatically
 run when a class is loaded in Java 5.0
In-Reply-To: <22771983.1153174453937.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-367?page=comments#action_12423573 ] 
            
Doug Cutting commented on HADOOP-367:
-------------------------------------

I was thinking of a hack where we call setAccessible on the constructor before calling it, as is done in JobConf.  We'd bypass the factory altogether.

Your proposal (a public static getFactory method) is better.  Would you like to prepare a patch?

> Static blocks do not automatically run when a class is loaded in Java 5.0
> -------------------------------------------------------------------------
>
>                 Key: HADOOP-367
>                 URL: http://issues.apache.org/jira/browse/HADOOP-367
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.4.0
>         Environment: Java 5.0
>            Reporter: Benjamin Reed
>
> There seems to be a change that happened between 1.4 and 1.5 with respect to static initializers. I can't find this documented, but I can reproduce with a very simple program. Basically, a static initializer is not called unless a static member/method of the class is accessed or an instance is created. This is actually what the JLS says, but until 1.5 the static initializers ran when the class was loaded. Note that this behavior only occurs when running with the 1.5 JRE AND compiling for 1.5.
> For many Writables this isn't an issue, so the fallback behavior of the WritableFactory works, but Block is package private, so loadEdits fails when called from org.apache.hadoop.io.ArrayWritable.readFields() yielding the following trace:
> Caused by: java.lang.RuntimeException: java.lang.IllegalAccessException: Class org.apache.hadoop.io.WritableFactories can not access a member of class org.apache.hadoop.dfs.Block with modifiers "public"
>         at org.apache.hadoop.io.WritableFactories.newInstance(WritableFactories.java:49)
>         at org.apache.hadoop.io.ArrayWritable.readFields(ArrayWritable.java:81)
>         at org.apache.hadoop.dfs.FSDirectory.loadFSEdits(FSDirectory.java:532)
>         at org.apache.hadoop.dfs.FSDirectory.loadFSImage(FSDirectory.java:470)
>         at org.apache.hadoop.dfs.FSDirectory.<init>(FSDirectory.java:307)
>         at org.apache.hadoop.dfs.FSNamesystem.<init>(FSNamesystem.java:177)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:91)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:84)
>         at org.apache.hadoop.dfs.NameNode.main(NameNode.java:491)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 26 08:30:37 2006
Return-Path: 
 <hadoop-dev-return-2771-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 63732 invoked from network); 26 Jul 2006 08:30:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 08:30:37 -0000
Received: (qmail 72624 invoked by uid 500); 26 Jul 2006 08:30:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72545 invoked by uid 500); 26 Jul 2006 08:30:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72536 invoked by uid 99); 26 Jul 2006 08:30:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 01:30:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 01:30:36 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3926341000E
	for <hadoop-dev@lucene.apache.org>; Wed, 26 Jul 2006 08:28:15 +0000 (GMT)
Message-ID: <26753275.1153902495231.JavaMail.jira@brutus>
Date: Wed, 26 Jul 2006 01:28:15 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-335) factor out the namespace
 image/transaction log writing
In-Reply-To: <14300759.1151602229834.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-335?page=all ]

Doug Cutting resolved HADOOP-335.
---------------------------------

    Fix Version/s: 0.5.0
       Resolution: Fixed

I just committed this.  Thanks, Konstantin.

> factor out the namespace image/transaction log writing
> ------------------------------------------------------
>
>                 Key: HADOOP-335
>                 URL: http://issues.apache.org/jira/browse/HADOOP-335
>             Project: Hadoop
>          Issue Type: Improvement
>            Reporter: Owen O'Malley
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.5.0
>
>         Attachments: FSImage_Refactor1.patch, FSImage_Refactor2.patch
>
>
> Factor the checkpoint/transaction log handling code out of FSNameSystem into its own class.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 26 09:16:37 2006
Return-Path: 
 <hadoop-dev-return-2772-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76854 invoked from network); 26 Jul 2006 09:16:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 09:16:37 -0000
Received: (qmail 62159 invoked by uid 500); 26 Jul 2006 09:16:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62134 invoked by uid 500); 26 Jul 2006 09:16:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62125 invoked by uid 99); 26 Jul 2006 09:16:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 02:16:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 02:16:36 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1678C410009
	for <hadoop-dev@lucene.apache.org>; Wed, 26 Jul 2006 09:14:15 +0000 (GMT)
Message-ID: <18910108.1153905255023.JavaMail.jira@brutus>
Date: Wed, 26 Jul 2006 02:14:15 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-375) Introduce a way for datanodes to
 register their HTTP info ports with the NameNode
In-Reply-To: <28904462.1153478956900.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-375?page=all ]

Devaraj Das updated HADOOP-375:
-------------------------------

    Attachment: c.patch

Attached the modified patch

> Introduce a way for datanodes to register their HTTP info ports with the NameNode
> ---------------------------------------------------------------------------------
>
>                 Key: HADOOP-375
>                 URL: http://issues.apache.org/jira/browse/HADOOP-375
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: c.patch, content_browsing.new.patch, content_browsing.new.patch, content_browsing.new.patch
>
>
> If we have multiple datanodes within a single machine the Jetty servers (other than the first one) won't be able to bind to the fixed HTTP port. So, one solution is to have the datanodes pick a free port (starting from a configured port value) and then inform namenode about it so that the namenode can then do redirects, etc.
> Johan Oskarson reported this problem. 
> If a computer have a second dfs data dir in the config it doesn't start properly because of:
> Exception in thread "main" java.io.IOException: Problem starting http server
>         at org.apache.hadoop.mapred.StatusHttpServer.start(StatusHttpServer.java:182)
>         at org.apache.hadoop.dfs.DataNode.<init>(DataNode.java:170)
>         at org.apache.hadoop.dfs.DataNode.makeInstanceForDir(DataNode.java:1045)
>         at org.apache.hadoop.dfs.DataNode.run(DataNode.java:999)
>         at org.apache.hadoop.dfs.DataNode.runAndWait(DataNode.java:1015)
>         at org.apache.hadoop.dfs.DataNode.main(DataNode.java:1066)
> Caused by: org.mortbay.util.MultiException[java.net.BindException: Address already in use]
>         at org.mortbay.http.HttpServer.doStart(HttpServer.java:731)
>         at org.mortbay.util.Container.start(Container.java:72)
>         at org.apache.hadoop.mapred.StatusHttpServer.start(StatusHttpServer.java:159)
>         ... 5 more

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 26 09:33:38 2006
Return-Path: 
 <hadoop-dev-return-2773-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 82196 invoked from network); 26 Jul 2006 09:33:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 09:33:38 -0000
Received: (qmail 86258 invoked by uid 500); 26 Jul 2006 09:33:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86229 invoked by uid 500); 26 Jul 2006 09:33:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86219 invoked by uid 99); 26 Jul 2006 09:33:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 02:33:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 02:33:35 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C4B3541000A
	for <hadoop-dev@lucene.apache.org>; Wed, 26 Jul 2006 09:31:14 +0000 (GMT)
Message-ID: <15786286.1153906274803.JavaMail.jira@brutus>
Date: Wed, 26 Jul 2006 02:31:14 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-312) Connections should not be cached
In-Reply-To: <13061881.1150916131961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-312?page=all ]

Devaraj Das updated HADOOP-312:
-------------------------------

    Attachment: no_connection_caching.patch

Attached is the patch. This has been tested independently but it should be commited only after hadoop-362's patch gets commited. During my testing a few days back, I noticed that hadoop-362 surfaces (everytime, almost consistently) with this patch.

> Connections should not be cached
> --------------------------------
>
>                 Key: HADOOP-312
>                 URL: http://issues.apache.org/jira/browse/HADOOP-312
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: ipc
>    Affects Versions: 0.4.0
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: no_connection_caching.patch
>
>
> Servers and clients (client include datanodes, tasktrackers, DFSClients & tasks) should not cache connections or maybe cache them for very short periods of time. Clients should set up & tear down connections to the servers everytime they need to contact the servers (including the heartbeats). If connection is cached, then reuse the existing connection for a few subsequent transactions until the connection expires. The heartbeat interval should be more so that many more clients (order of  tens of thousands) can be accomodated within 1 heartbeat interval.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 26 09:43:37 2006
Return-Path: 
 <hadoop-dev-return-2774-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85965 invoked from network); 26 Jul 2006 09:43:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 09:43:37 -0000
Received: (qmail 1776 invoked by uid 500); 26 Jul 2006 09:43:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 1618 invoked by uid 500); 26 Jul 2006 09:43:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 1609 invoked by uid 99); 26 Jul 2006 09:43:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 02:43:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 02:43:36 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 377CF410009
	for <hadoop-dev@lucene.apache.org>; Wed, 26 Jul 2006 09:41:15 +0000 (GMT)
Message-ID: <13764734.1153906875224.JavaMail.jira@brutus>
Date: Wed, 26 Jul 2006 02:41:15 -0700 (PDT)
From: "Johan Oskarson (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-386) Periodically move blocks from full
 nodes to those with space
In-Reply-To: <7100173.1153824553904.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-386?page=all ]

Johan Oskarson updated HADOOP-386:
----------------------------------

    Attachment: excessRepSpaceAware.patch

This patch removes excess replicates from the machine with least absolute space first, as suggested by Bryan.

Would be helpful to have this, no matter what we decide when it comes to redistributing blocks to nodes with more free space.

> Periodically move blocks from full nodes to those with space
> ------------------------------------------------------------
>
>                 Key: HADOOP-386
>                 URL: http://issues.apache.org/jira/browse/HADOOP-386
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Johan Oskarson
>         Attachments: excessRepSpaceAware.patch
>
>
> I'm still having *a lot* of problems with some nodes filling up quickly and others hardly being touched, mostly because of the hardware being
> very different.
> As someone suggested, there should be a thread that periodically checks the dfs for nodes with little or no free space and schedules blocks
> to be moved off that node.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 26 12:16:37 2006
Return-Path: 
 <hadoop-dev-return-2775-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 44979 invoked from network); 26 Jul 2006 12:16:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 12:16:37 -0000
Received: (qmail 12580 invoked by uid 500); 26 Jul 2006 12:16:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 12545 invoked by uid 500); 26 Jul 2006 12:16:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 12536 invoked by uid 99); 26 Jul 2006 12:16:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 05:16:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 05:16:36 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B53DA410009
	for <hadoop-dev@lucene.apache.org>; Wed, 26 Jul 2006 12:14:14 +0000 (GMT)
Message-ID: <25315067.1153916054739.JavaMail.jira@brutus>
Date: Wed, 26 Jul 2006 05:14:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-375) Introduce a way for datanodes to
 register their HTTP info ports with the NameNode
In-Reply-To: <28904462.1153478956900.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-375?page=all ]

Doug Cutting resolved HADOOP-375.
---------------------------------

    Fix Version/s: 0.5.0
       Resolution: Fixed

I just committed this.  Thanks!

> Introduce a way for datanodes to register their HTTP info ports with the NameNode
> ---------------------------------------------------------------------------------
>
>                 Key: HADOOP-375
>                 URL: http://issues.apache.org/jira/browse/HADOOP-375
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>             Fix For: 0.5.0
>
>         Attachments: c.patch, content_browsing.new.patch, content_browsing.new.patch, content_browsing.new.patch
>
>
> If we have multiple datanodes within a single machine the Jetty servers (other than the first one) won't be able to bind to the fixed HTTP port. So, one solution is to have the datanodes pick a free port (starting from a configured port value) and then inform namenode about it so that the namenode can then do redirects, etc.
> Johan Oskarson reported this problem. 
> If a computer have a second dfs data dir in the config it doesn't start properly because of:
> Exception in thread "main" java.io.IOException: Problem starting http server
>         at org.apache.hadoop.mapred.StatusHttpServer.start(StatusHttpServer.java:182)
>         at org.apache.hadoop.dfs.DataNode.<init>(DataNode.java:170)
>         at org.apache.hadoop.dfs.DataNode.makeInstanceForDir(DataNode.java:1045)
>         at org.apache.hadoop.dfs.DataNode.run(DataNode.java:999)
>         at org.apache.hadoop.dfs.DataNode.runAndWait(DataNode.java:1015)
>         at org.apache.hadoop.dfs.DataNode.main(DataNode.java:1066)
> Caused by: org.mortbay.util.MultiException[java.net.BindException: Address already in use]
>         at org.mortbay.http.HttpServer.doStart(HttpServer.java:731)
>         at org.mortbay.util.Container.start(Container.java:72)
>         at org.apache.hadoop.mapred.StatusHttpServer.start(StatusHttpServer.java:159)
>         ... 5 more

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 26 12:28:37 2006
Return-Path: 
 <hadoop-dev-return-2776-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 48746 invoked from network); 26 Jul 2006 12:28:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 12:28:37 -0000
Received: (qmail 36827 invoked by uid 500); 26 Jul 2006 12:28:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 36805 invoked by uid 500); 26 Jul 2006 12:28:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 36796 invoked by uid 99); 26 Jul 2006 12:28:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 05:28:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 05:28:36 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 430CA41000A
	for <hadoop-dev@lucene.apache.org>; Wed, 26 Jul 2006 12:26:15 +0000 (GMT)
Message-ID: <9161322.1153916775272.JavaMail.jira@brutus>
Date: Wed, 26 Jul 2006 05:26:15 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-386) Periodically move blocks from full
 nodes to those with space
In-Reply-To: <7100173.1153824553904.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-386?page=all ]

Doug Cutting resolved HADOOP-386.
---------------------------------

    Fix Version/s: 0.5.0
       Resolution: Fixed

I just committed this.  Thanks, Johan.  This does not fully address the issue of this patch, so perhaps someone should start a new bugs for further aspects.

> Periodically move blocks from full nodes to those with space
> ------------------------------------------------------------
>
>                 Key: HADOOP-386
>                 URL: http://issues.apache.org/jira/browse/HADOOP-386
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Johan Oskarson
>             Fix For: 0.5.0
>
>         Attachments: excessRepSpaceAware.patch
>
>
> I'm still having *a lot* of problems with some nodes filling up quickly and others hardly being touched, mostly because of the hardware being
> very different.
> As someone suggested, there should be a thread that periodically checks the dfs for nodes with little or no free space and schedules blocks
> to be moved off that node.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 26 16:23:03 2006
Return-Path: 
 <hadoop-dev-return-2777-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40556 invoked from network); 26 Jul 2006 16:23:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 16:23:03 -0000
Received: (qmail 46053 invoked by uid 500); 26 Jul 2006 16:23:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 46006 invoked by uid 500); 26 Jul 2006 16:23:02 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Delivered-To: moderator for hadoop-dev@lucene.apache.org
Received: (qmail 40179 invoked by uid 99); 26 Jul 2006 14:30:16 -0000
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=RCVD_NUMERIC_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
User-Agent: Microsoft-Entourage/11.2.5.060620
Date: Wed, 26 Jul 2006 07:29:44 -0700
Subject: Latest snapshot has incorrect servlet-api?
From: Gian Lorenzo Thione <thione@powerset.com>
To: "hadoop-dev@lucene.apache.org" <hadoop-dev@lucene.apache.org>
Message-ID: <C0ECCA68.4A0A%thione@powerset.com>
Thread-Topic: Latest snapshot has incorrect servlet-api?
Thread-Index: Acawv/AYLr625hyzEduwpwAWy4jymA==
Mime-version: 1.0
Content-type: text/plain;
	charset="US-ASCII"
Content-transfer-encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi all,

After updating to the latest revision the builds break as it seems like
there's a mismatch between the servlet-api.jar library in the repository and
the one expected by the new DFS JspHelper class.

The one in the repository doesn't seem to include the package
javax.servlet.jsp

Or maybe I'm just missing something....

Lorenzo


From MAILER-DAEMON Wed Jul 26 17:24:52 2006
Return-Path: 
 <hadoop-dev-return-2778-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57374 invoked from network); 26 Jul 2006 17:24:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 17:24:52 -0000
Received: (qmail 84275 invoked by uid 500); 26 Jul 2006 17:24:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 84204 invoked by uid 500); 26 Jul 2006 17:24:48 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 84153 invoked by uid 99); 26 Jul 2006 17:24:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 10:24:48 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [202.46.19.91] (HELO mailsrv.bangalore.corp.yahoo.com)
 (202.46.19.91)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 10:24:47 -0700
Received: from ddaslaptop (vpn-client143.bangalore.corp.yahoo.com
 [172.24.96.143])
	(authenticated bits=0)
	by mailsrv.bangalore.corp.yahoo.com (8.13.6/8.13.6/pop-in) with ESMTP id
 k6QHOIGX058696
	(version=TLSv1/SSLv3 cipher=RC4-MD5 bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Wed, 26 Jul 2006 22:54:20 +0530 (IST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=from:to:subject:date:message-id:mime-version:content-type:
	content-transfer-encoding:x-mailer:x-mimeole:in-reply-to:thread-index;
	b=sm2cmFNlMXm7eDoA+dKSDHYYmb/toSJN4kTngsEoASpc65Amx9hXOI1C31RqbR2+
From: "Devaraj Das" <ddas@yahoo-inc.com>
To: <hadoop-dev@lucene.apache.org>
Subject: RE: Latest snapshot has incorrect servlet-api?
Date: Wed, 26 Jul 2006 22:54:18 +0530
Message-ID: <000e01c6b0d8$54b3c590$2201a8c0@ds.corp.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
In-reply-to: <C0ECCA68.4A0A%thione@powerset.com>
Thread-Index: Acawv/AYLr625hyzEduwpwAWy4jymAAFnO+A
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Please put $HADOOP_HOME/lib/jetty-ext/jsp-api.jar in your CLASSPATH
(javax.servlet.jsp.* is taken from there). Are you using some IDE for code
browsing/building? For eclipse, please add that JAR file in your
Project->Properties->Libraries if it is not already there.
Let me know if you need more help.

-----Original Message-----
From: Gian Lorenzo Thione [mailto:thione@powerset.com] 
Sent: Wednesday, July 26, 2006 8:00 PM
To: hadoop-dev@lucene.apache.org
Subject: Latest snapshot has incorrect servlet-api?

Hi all,

After updating to the latest revision the builds break as it seems like
there's a mismatch between the servlet-api.jar library in the repository and
the one expected by the new DFS JspHelper class.

The one in the repository doesn't seem to include the package
javax.servlet.jsp

Or maybe I'm just missing something....

Lorenzo



From MAILER-DAEMON Wed Jul 26 17:47:12 2006
Return-Path: 
 <hadoop-dev-return-2779-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 66001 invoked from network); 26 Jul 2006 17:47:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 17:47:12 -0000
Received: (qmail 32551 invoked by uid 500); 26 Jul 2006 17:47:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 32527 invoked by uid 500); 26 Jul 2006 17:47:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 32516 invoked by uid 99); 26 Jul 2006 17:47:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 10:47:12 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.126.228.149] (HELO rsmtp1.corp.yahoo.com)
 (207.126.228.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 10:47:10 -0700
Received: from [207.126.231.236] (eric14-mac.corp.yahoo.com [207.126.231.236])
	(authenticated bits=0)
	by rsmtp1.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k6QHkkhJ024621
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Wed, 26 Jul 2006 10:46:46 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=YQNEfIrgrQ75dpVm4ADEkavjuZTDkdItNDJpEv2gTUtZgXag6VGnTNsYV4b5uXqR
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <21159976.1153898777779.JavaMail.jira@brutus>
References: <21159976.1153898777779.JavaMail.jira@brutus>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <3C38DF4D-2F99-416A-8362-956D32C45774@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Eric Baldeschwieler <eric14@yahoo-inc.com>
Subject: Re: [jira] Commented: (HADOOP-54) SequenceFile should compress
 blocks, not individual entries
Date: Wed, 26 Jul 2006 10:46:45 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I'm happy with where this is going.

I'm wondering if we can not defined writeCompressed() to just do the  
right thing, rather then require the checks.  Since the right thing  
is well defined, if the "rawValue" is not correctly compressed, that  
can be done on the call, yes?

(I'm happy either way, just think about this as you code it, ok?)

On Jul 26, 2006, at 12:26 AM, Doug Cutting (JIRA) wrote:

>     [ http://issues.apache.org/jira/browse/HADOOP-54? 
> page=comments#action_12423560 ]
>
> Doug Cutting commented on HADOOP-54:
> ------------------------------------
>
> I mostly have minor naming quibbles.
>
> The Writer method should be named just 'next', not 'nextRaw'.
>
> The new Writer subclasses should not be public, but rather should  
> be created by a factory method.
>
> The RawValue class might better be named 'ValueBytes', and it's  
> methods can simply be called writeCompressed(), writeUncompressed 
> (), etc.
>
> Finally, a substantive remark: we should not allocate a new  
> RawValue for each key read.  So the new Reader methods should be:
>
> public ValueBytes createValueBytes();
> public void next(DataOutputStream key, ValueBytes value);
>
>
>
>> SequenceFile should compress blocks, not individual entries
>> -----------------------------------------------------------
>>
>>                 Key: HADOOP-54
>>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>>             Project: Hadoop
>>          Issue Type: Improvement
>>          Components: io
>>    Affects Versions: 0.2.0
>>            Reporter: Doug Cutting
>>         Assigned To: Arun C Murthy
>>             Fix For: 0.5.0
>>
>>         Attachments: VIntCompressionResults.txt
>>
>>
>> SequenceFile will optionally compress individual values.  But both  
>> compression and performance would be much better if sequences of  
>> keys and values are compressed together.  Sync marks should only  
>> be placed between blocks.  This will require some changes to  
>> MapFile too, so that all file positions stored there are the  
>> positions of blocks, not entries within blocks.  Probably this can  
>> be accomplished by adding a getBlockStartPosition() method to  
>> SequenceFile.Writer.
>
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the  
> administrators: http://issues.apache.org/jira/secure/ 
> Administrators.jspa
> -
> For more information on JIRA, see: http://www.atlassian.com/ 
> software/jira
>
>


From MAILER-DAEMON Wed Jul 26 18:54:36 2006
Return-Path: 
 <hadoop-dev-return-2780-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86624 invoked from network); 26 Jul 2006 18:54:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 18:54:36 -0000
Received: (qmail 48931 invoked by uid 500); 26 Jul 2006 18:54:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 48909 invoked by uid 500); 26 Jul 2006 18:54:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 48900 invoked by uid 99); 26 Jul 2006 18:54:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 11:54:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 11:54:35 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E1A3C41000A
	for <hadoop-dev@lucene.apache.org>; Wed, 26 Jul 2006 18:52:13 +0000 (GMT)
Message-ID: <20099246.1153939933921.JavaMail.jira@brutus>
Date: Wed, 26 Jul 2006 11:52:13 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-389) MiniMapReduce tests get stuck because
 of some timing issues with initialization of tasktrackers.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

MiniMapReduce tests get stuck because of some timing issues with initialization of tasktrackers.
------------------------------------------------------------------------------------------------

                 Key: HADOOP-389
                 URL: http://issues.apache.org/jira/browse/HADOOP-389
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
            Reporter: Mahadev konar
         Assigned To: Mahadev konar
         Attachments: testfix.patch

The MiniMapReduce tests sometimes calls shutdown before the tasktrackers have been initialized. This makes the TestMiniMRBringup run for ever. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 26 18:54:37 2006
Return-Path: 
 <hadoop-dev-return-2781-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86660 invoked from network); 26 Jul 2006 18:54:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 18:54:37 -0000
Received: (qmail 49253 invoked by uid 500); 26 Jul 2006 18:54:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49096 invoked by uid 500); 26 Jul 2006 18:54:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49087 invoked by uid 99); 26 Jul 2006 18:54:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 11:54:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 11:54:36 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DC826410009
	for <hadoop-dev@lucene.apache.org>; Wed, 26 Jul 2006 18:52:14 +0000 (GMT)
Message-ID: <23531956.1153939934900.JavaMail.jira@brutus>
Date: Wed, 26 Jul 2006 11:52:14 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-389) MiniMapReduce tests get stuck because
 of some timing issues with initialization of tasktrackers.
In-Reply-To: <20099246.1153939933921.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-389?page=all ]

Mahadev konar updated HADOOP-389:
---------------------------------

    Attachment: testfix.patch

This patch waits for the tasktrackers to be initialized before shutdown can be called. This patch also fixes a bug in build.xml where in a dependency has been introduced between compile-test-core and examples (in TestMiniMRWithDfs.java).

> MiniMapReduce tests get stuck because of some timing issues with initialization of tasktrackers.
> ------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-389
>                 URL: http://issues.apache.org/jira/browse/HADOOP-389
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>         Attachments: testfix.patch
>
>
> The MiniMapReduce tests sometimes calls shutdown before the tasktrackers have been initialized. This makes the TestMiniMRBringup run for ever. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 26 19:05:37 2006
Return-Path: 
 <hadoop-dev-return-2782-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 89443 invoked from network); 26 Jul 2006 19:05:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 19:05:37 -0000
Received: (qmail 73271 invoked by uid 500); 26 Jul 2006 19:05:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 73245 invoked by uid 500); 26 Jul 2006 19:05:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 73224 invoked by uid 99); 26 Jul 2006 19:05:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 12:05:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 12:05:35 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DB3A341000B
	for <hadoop-dev@lucene.apache.org>; Wed, 26 Jul 2006 19:03:13 +0000 (GMT)
Message-ID: <22378263.1153940593895.JavaMail.jira@brutus>
Date: Wed, 26 Jul 2006 12:03:13 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-390) compile-core-test target depends on
 compile-examples
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

compile-core-test target depends on compile-examples
----------------------------------------------------

                 Key: HADOOP-390
                 URL: http://issues.apache.org/jira/browse/HADOOP-390
             Project: Hadoop
          Issue Type: Bug
            Reporter: Konstantin Shvachko
         Assigned To: Konstantin Shvachko


Compiling with compile-core-test target returns the following error:
    [javac] hadoop\src\test\org\apache\hadoop\mapred\TestMiniMRWithDFS.java:28: package org.apache.hadoop.examples does not exist
    [javac] import org.apache.hadoop.examples.WordCount;
    [javac]                                   ^
This target should depend on the compile-examples target.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 26 19:08:37 2006
Return-Path: 
 <hadoop-dev-return-2783-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 90195 invoked from network); 26 Jul 2006 19:08:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 19:08:37 -0000
Received: (qmail 78549 invoked by uid 500); 26 Jul 2006 19:08:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 78526 invoked by uid 500); 26 Jul 2006 19:08:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 78517 invoked by uid 99); 26 Jul 2006 19:08:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 12:08:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 12:08:36 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C5310410009
	for <hadoop-dev@lucene.apache.org>; Wed, 26 Jul 2006 19:06:14 +0000 (GMT)
Message-ID: <22425663.1153940774805.JavaMail.jira@brutus>
Date: Wed, 26 Jul 2006 12:06:14 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-390) compile-core-test target depends on
 compile-examples
In-Reply-To: <22378263.1153940593895.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-390?page=all ]

Konstantin Shvachko updated HADOOP-390:
---------------------------------------

    Attachment: CompileCoreTest.patch

A modification of build.xml to fix the problem.


> compile-core-test target depends on compile-examples
> ----------------------------------------------------
>
>                 Key: HADOOP-390
>                 URL: http://issues.apache.org/jira/browse/HADOOP-390
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>         Attachments: CompileCoreTest.patch
>
>
> Compiling with compile-core-test target returns the following error:
>     [javac] hadoop\src\test\org\apache\hadoop\mapred\TestMiniMRWithDFS.java:28: package org.apache.hadoop.examples does not exist
>     [javac] import org.apache.hadoop.examples.WordCount;
>     [javac]                                   ^
> This target should depend on the compile-examples target.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 26 20:17:41 2006
Return-Path: 
 <hadoop-dev-return-2784-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 19759 invoked from network); 26 Jul 2006 20:17:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 20:17:41 -0000
Received: (qmail 4610 invoked by uid 500); 26 Jul 2006 20:17:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 4542 invoked by uid 500); 26 Jul 2006 20:17:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 4492 invoked by uid 99); 26 Jul 2006 20:17:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 13:17:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 13:17:36 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B326641000A
	for <hadoop-dev@lucene.apache.org>; Wed, 26 Jul 2006 20:15:14 +0000 (GMT)
Message-ID: <13225341.1153944914731.JavaMail.jira@brutus>
Date: Wed, 26 Jul 2006 13:15:14 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-390) compile-core-test target depends on
 compile-examples
In-Reply-To: <22378263.1153940593895.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-390?page=all ]

Owen O'Malley resolved HADOOP-390.
----------------------------------

    Fix Version/s: 0.5.0
       Resolution: Duplicate

This was fixed by the patch in HADOOP-389.

> compile-core-test target depends on compile-examples
> ----------------------------------------------------
>
>                 Key: HADOOP-390
>                 URL: http://issues.apache.org/jira/browse/HADOOP-390
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.5.0
>
>         Attachments: CompileCoreTest.patch
>
>
> Compiling with compile-core-test target returns the following error:
>     [javac] hadoop\src\test\org\apache\hadoop\mapred\TestMiniMRWithDFS.java:28: package org.apache.hadoop.examples does not exist
>     [javac] import org.apache.hadoop.examples.WordCount;
>     [javac]                                   ^
> This target should depend on the compile-examples target.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 26 20:52:39 2006
Return-Path: 
 <hadoop-dev-return-2785-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 29914 invoked from network); 26 Jul 2006 20:52:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 20:52:39 -0000
Received: (qmail 76657 invoked by uid 500); 26 Jul 2006 20:52:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 76495 invoked by uid 500); 26 Jul 2006 20:52:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 76486 invoked by uid 99); 26 Jul 2006 20:52:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 13:52:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 13:52:38 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 55A4041000E
	for <hadoop-dev@lucene.apache.org>; Wed, 26 Jul 2006 20:50:16 +0000 (GMT)
Message-ID: <21502093.1153947016348.JavaMail.jira@brutus>
Date: Wed, 26 Jul 2006 13:50:16 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-231) DFSShell Improvement wish list
In-Reply-To: <19513987.1147981445911.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-231?page=all ]

Owen O'Malley updated HADOOP-231:
---------------------------------

    Component/s:     (was: mapred)
                     (was: dfs)

> DFSShell Improvement wish list
> ------------------------------
>
>                 Key: HADOOP-231
>                 URL: http://issues.apache.org/jira/browse/HADOOP-231
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: util
>    Affects Versions: 0.3.0
>            Reporter: Konstantin Shvachko
>             Fix For: 0.5.0
>
>
> This is to discuss general DFSShell improvements, standardization, conventions, etc.
> Here are links to assorted ideas on this issue from previous issues.
> We need to generalize them at some point.
> HADOOP-59
> HADOOP-226
> HADOOP-222#action_12412326
> HADOOP-230

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 26 20:58:43 2006
Return-Path: 
 <hadoop-dev-return-2786-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32391 invoked from network); 26 Jul 2006 20:58:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 20:58:43 -0000
Received: (qmail 91132 invoked by uid 500); 26 Jul 2006 20:58:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 91103 invoked by uid 500); 26 Jul 2006 20:58:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 91083 invoked by uid 99); 26 Jul 2006 20:58:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 13:58:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 13:58:36 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DCAE0410009
	for <hadoop-dev@lucene.apache.org>; Wed, 26 Jul 2006 20:56:14 +0000 (GMT)
Message-ID: <26706475.1153947374901.JavaMail.jira@brutus>
Date: Wed, 26 Jul 2006 13:56:14 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-315) bobo Exception in TestRPC
In-Reply-To: <1381008.1151000129897.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-315?page=all ]

Owen O'Malley resolved HADOOP-315.
----------------------------------

    Resolution: Won't Fix

> bobo Exception in TestRPC
> -------------------------
>
>                 Key: HADOOP-315
>                 URL: http://issues.apache.org/jira/browse/HADOOP-315
>             Project: Hadoop
>          Issue Type: Bug
>          Components: ipc
>    Affects Versions: 0.3.2
>            Reporter: Konstantin Shvachko
>            Priority: Minor
>
> We are getting a bobo exceptions in TestRPC.
> It looks like the test should fail in this case after throwing bobo.
> By the way, does anybody know whether "bobo" means anything?
> error: java.io.IOException: bobo
> java.io.IOException: bobo
>     at org.apache.hadoop.ipc.TestRPC$TestImpl.error(TestRPC.java:84)
>     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
>     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>     at java.lang.reflect.Method.invoke(Method.java:585)
>     at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:243)
>     at org.apache.hadoop.ipc.Server$Handler.run(Server.java:467)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 26 21:30:38 2006
Return-Path: 
 <hadoop-dev-return-2787-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 42999 invoked from network); 26 Jul 2006 21:30:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 21:30:38 -0000
Received: (qmail 40524 invoked by uid 500); 26 Jul 2006 21:30:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40409 invoked by uid 500); 26 Jul 2006 21:30:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 40400 invoked by uid 99); 26 Jul 2006 21:30:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 14:30:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 14:30:36 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F36B241000A
	for <hadoop-dev@lucene.apache.org>; Wed, 26 Jul 2006 21:28:14 +0000 (GMT)
Message-ID: <718906.1153949294993.JavaMail.jira@brutus>
Date: Wed, 26 Jul 2006 14:28:14 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Work started: (HADOOP-330) Raw SequenceFile Input/Output
 formats
In-Reply-To: <19403257.1151517695021.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-330?page=all ]

Work on HADOOP-330 started by Owen O'Malley.

> Raw SequenceFile Input/Output formats
> -------------------------------------
>
>                 Key: HADOOP-330
>                 URL: http://issues.apache.org/jira/browse/HADOOP-330
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.3.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.5.0
>
>
> We'd like a raw input/output format for Map/Reduce that allows jobs to get the raw bytes for keys/values. This would allow things like the IdentityMap to be much faster because the values would not be decompressed/compressed or serialized/deserialized.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 26 21:30:44 2006
Return-Path: 
 <hadoop-dev-return-2790-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43125 invoked from network); 26 Jul 2006 21:30:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 21:30:44 -0000
Received: (qmail 41038 invoked by uid 500); 26 Jul 2006 21:30:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 41016 invoked by uid 500); 26 Jul 2006 21:30:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 41007 invoked by uid 99); 26 Jul 2006 21:30:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 14:30:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 14:30:43 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8603841000D
	for <hadoop-dev@lucene.apache.org>; Wed, 26 Jul 2006 21:28:16 +0000 (GMT)
Message-ID: <17349642.1153949296546.JavaMail.jira@brutus>
Date: Wed, 26 Jul 2006 14:28:16 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-389) MiniMapReduce tests get stuck because
 of some timing issues with initialization of tasktrackers.
In-Reply-To: <20099246.1153939933921.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-389?page=all ]

Sameer Paranjpye reassigned HADOOP-389:
---------------------------------------

    Assignee: Sameer Paranjpye  (was: Mahadev konar)

> MiniMapReduce tests get stuck because of some timing issues with initialization of tasktrackers.
> ------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-389
>                 URL: http://issues.apache.org/jira/browse/HADOOP-389
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Sameer Paranjpye
>         Attachments: testfix.patch
>
>
> The MiniMapReduce tests sometimes calls shutdown before the tasktrackers have been initialized. This makes the TestMiniMRBringup run for ever. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 26 21:30:41 2006
Return-Path: 
 <hadoop-dev-return-2788-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43034 invoked from network); 26 Jul 2006 21:30:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 21:30:41 -0000
Received: (qmail 40624 invoked by uid 500); 26 Jul 2006 21:30:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40600 invoked by uid 500); 26 Jul 2006 21:30:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 40591 invoked by uid 99); 26 Jul 2006 21:30:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 14:30:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 14:30:39 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E6D7341000E
	for <hadoop-dev@lucene.apache.org>; Wed, 26 Jul 2006 21:28:17 +0000 (GMT)
Message-ID: <12181129.1153949297943.JavaMail.jira@brutus>
Date: Wed, 26 Jul 2006 14:28:17 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Work started: (HADOOP-389) MiniMapReduce tests get stuck
 because of some timing issues with initialization of tasktrackers.
In-Reply-To: <20099246.1153939933921.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-389?page=all ]

Work on HADOOP-389 started by Sameer Paranjpye.

> MiniMapReduce tests get stuck because of some timing issues with initialization of tasktrackers.
> ------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-389
>                 URL: http://issues.apache.org/jira/browse/HADOOP-389
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Sameer Paranjpye
>         Attachments: testfix.patch
>
>
> The MiniMapReduce tests sometimes calls shutdown before the tasktrackers have been initialized. This makes the TestMiniMRBringup run for ever. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 26 21:30:42 2006
Return-Path: 
 <hadoop-dev-return-2789-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43089 invoked from network); 26 Jul 2006 21:30:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 21:30:42 -0000
Received: (qmail 40840 invoked by uid 500); 26 Jul 2006 21:30:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40813 invoked by uid 500); 26 Jul 2006 21:30:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 40804 invoked by uid 99); 26 Jul 2006 21:30:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 14:30:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 14:30:41 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5D4A8410010
	for <hadoop-dev@lucene.apache.org>; Wed, 26 Jul 2006 21:28:19 +0000 (GMT)
Message-ID: <29081827.1153949299379.JavaMail.jira@brutus>
Date: Wed, 26 Jul 2006 14:28:19 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-389) MiniMapReduce tests get stuck because
 of some timing issues with initialization of tasktrackers.
In-Reply-To: <20099246.1153939933921.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-389?page=all ]

Sameer Paranjpye reassigned HADOOP-389:
---------------------------------------

    Assignee: Mahadev konar  (was: Sameer Paranjpye)

> MiniMapReduce tests get stuck because of some timing issues with initialization of tasktrackers.
> ------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-389
>                 URL: http://issues.apache.org/jira/browse/HADOOP-389
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>         Attachments: testfix.patch
>
>
> The MiniMapReduce tests sometimes calls shutdown before the tasktrackers have been initialized. This makes the TestMiniMRBringup run for ever. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 26 21:47:38 2006
Return-Path: 
 <hadoop-dev-return-2791-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 48573 invoked from network); 26 Jul 2006 21:47:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 21:47:38 -0000
Received: (qmail 72178 invoked by uid 500); 26 Jul 2006 21:47:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72151 invoked by uid 500); 26 Jul 2006 21:47:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72141 invoked by uid 99); 26 Jul 2006 21:47:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 14:47:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 14:47:36 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C75F5410009
	for <hadoop-dev@lucene.apache.org>; Wed, 26 Jul 2006 21:45:14 +0000 (GMT)
Message-ID: <23453466.1153950314813.JavaMail.jira@brutus>
Date: Wed, 26 Jul 2006 14:45:14 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-389) MiniMapReduce tests get stuck because
 of some timing issues with initialization of tasktrackers.
In-Reply-To: <20099246.1153939933921.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-389?page=all ]

Konstantin Shvachko updated HADOOP-389:
---------------------------------------

    Attachment: MiniMRCluster.patch
                BuildXML.patch

I divided the original test into 2 independent patches.
MiniMRCluster.patch - is the MiniMR cluster part of the original patch.
BuildXML.patch - fixes some target dependencies in the ant script.
The original patch fixes the bug in build.xml but introduces unnecessary
dependencies on the compile targets.


> MiniMapReduce tests get stuck because of some timing issues with initialization of tasktrackers.
> ------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-389
>                 URL: http://issues.apache.org/jira/browse/HADOOP-389
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>         Attachments: BuildXML.patch, MiniMRCluster.patch, testfix.patch
>
>
> The MiniMapReduce tests sometimes calls shutdown before the tasktrackers have been initialized. This makes the TestMiniMRBringup run for ever. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 26 22:31:38 2006
Return-Path: 
 <hadoop-dev-return-2792-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 62700 invoked from network); 26 Jul 2006 22:31:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 22:31:38 -0000
Received: (qmail 30277 invoked by uid 500); 26 Jul 2006 22:31:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 30114 invoked by uid 500); 26 Jul 2006 22:31:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 30100 invoked by uid 99); 26 Jul 2006 22:31:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 15:31:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 15:31:36 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C751641000A
	for <hadoop-dev@lucene.apache.org>; Wed, 26 Jul 2006 22:29:14 +0000 (GMT)
Message-ID: <26122586.1153952954813.JavaMail.jira@brutus>
Date: Wed, 26 Jul 2006 15:29:14 -0700 (PDT)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-324) "IOException: No space left on
 device" is handled incorrectly
In-Reply-To: <18409093.1151369969863.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-324?page=comments#action_12423728 ] 
            
Wendy Chien commented on HADOOP-324:
------------------------------------

I'm fixing this issue by creating a new exception (DiskOutOfSpaceException) that extends IOException.  In DataNode:writeBlock, a DiskOutOFSpaceException is thrown if while opening local disk out, data.writeToBlock fails due to insufficient space and if while processing the incoming data, the amount we want to write (bytesRead) is greater than the remaining space in the data set.

This comment serves to claim this bug as mine and as an invitation for comments on this approach.   



> "IOException: No space left on device" is handled incorrectly
> -------------------------------------------------------------
>
>                 Key: HADOOP-324
>                 URL: http://issues.apache.org/jira/browse/HADOOP-324
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.3.2
>            Reporter: Konstantin Shvachko
>
> When a data node disk is almost full the name node still assigns blocks to the data node.
> By the time the data node actually tries to write that data to disk the disk may become full.
> Current implementation forces the data node to shutdown after that.
> The expected behavior is to report the block write failure and continue.
> The Exception looks as follows:
> java.io.IOException: No space left on device
> at java.io.FileOutputStream.writeBytes(Native Method)
> at java.io.FileOutputStream.write(FileOutputStream.java:260)
> at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
> at java.io.BufferedOutputStream.write(BufferedOutputStream.java:109)
> at java.io.DataOutputStream.write(DataOutputStream.java:90)
> at org.apache.hadoop.dfs.DataNode$DataXceiver.writeBlock(DataNode.java:623)
> at org.apache.hadoop.dfs.DataNode$DataXceiver.run(DataNode.java:410)
> at java.lang.Thread.run(Thread.java:595)
> 2006-06-26 08:26:04,751 INFO org.apache.hadoop.dfs.DataNode: Finishing DataNode in: /tmp/hadoop/dfs/data/data

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 26 23:48:39 2006
Return-Path: 
 <hadoop-dev-return-2793-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 82943 invoked from network); 26 Jul 2006 23:48:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 23:48:39 -0000
Received: (qmail 34028 invoked by uid 500); 26 Jul 2006 23:48:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 33859 invoked by uid 500); 26 Jul 2006 23:48:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 33849 invoked by uid 99); 26 Jul 2006 23:48:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 16:48:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 16:48:37 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5B21C41000A
	for <hadoop-dev@lucene.apache.org>; Wed, 26 Jul 2006 23:46:15 +0000 (GMT)
Message-ID: <11490548.1153957575370.JavaMail.jira@brutus>
Date: Wed, 26 Jul 2006 16:46:15 -0700 (PDT)
From: "Bryan Pendleton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-302) class Text (replacement for class
 UTF8) was: HADOOP-136
In-Reply-To: <26017675.1150245149961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-302?page=comments#action_12423739 ] 
            
Bryan Pendleton commented on HADOOP-302:
----------------------------------------

Started using this in my code... looks like there are still some bugs. Here's a testcase that shouldn't fail. (I have no idea how UTF works, or I'd try to offer an actual solution):

Index: hadoop/src/test/org/apache/hadoop/io/TestText.java
===================================================================
--- hadoop/src/test/org/apache/hadoop/io/TestText.java	(revision 425795)
+++ hadoop/src/test/org/apache/hadoop/io/TestText.java	(working copy)
@@ -87,7 +87,11 @@
 
 
   public void testCoding() throws Exception {
-    for (int i = 0; i < NUM_ITERATIONS; i++) {
+	  String badString = "Bad \t encoding \t testcase.";
+	  Text testCase = new Text(badString);
+	  assertTrue(badString.equals(testCase.toString()));
+
+	  for (int i = 0; i < NUM_ITERATIONS; i++) {
       try {
           // generate a random string
           String before;


> class Text (replacement for class UTF8) was: HADOOP-136
> -------------------------------------------------------
>
>                 Key: HADOOP-302
>                 URL: http://issues.apache.org/jira/browse/HADOOP-302
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>            Reporter: Michel Tourn
>         Assigned To: Hairong Kuang
>             Fix For: 0.5.0
>
>         Attachments: text.patch, VInt.patch
>
>
> Just to verify, which length-encoding scheme are we using for class Text (aka LargeUTF8) 
> a) The "UTF-8/Lucene" scheme? (highest bit of each byte is an extension bit, which I think is what Doug is describing in his last comment) or 
> b) the record-IO scheme in o.a.h.record.Utils.java:readInt 
> Either way, note that: 
> 1. UTF8.java and its successor Text.java need to read the length in two ways: 
>   1a. consume 1+ bytes from a DataInput and 
>   1b. parse the length within a byte array at a given offset 
> (1.b is used for the "WritableComparator optimized for UTF8 keys" ). 
> o.a.h.record.Utils only supports the DataInput mode. 
> It is not clear to me what is the best way to extend this Utils code when you need to support both reading modes 
> 2 Methods like UTF8's WritableComparator are to be low overhead, in partic. there should be no Object allocation. 
> For the byte array case, the varlen-reader utility needs to be extended to return both: 
>  the decoded length and the length of the encoded length. 
>  (so that the caller can do offset += encodedlength) 
>     
> 3. A String length does not need (small) negative integers. 
> 4. One advantage of a) is that it is standard (or at least well-known and natural) and there are no magic constants (like -120, -121 -124) 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Jul 26 23:50:38 2006
Return-Path: 
 <hadoop-dev-return-2794-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 83231 invoked from network); 26 Jul 2006 23:50:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 23:50:38 -0000
Received: (qmail 34365 invoked by uid 500); 26 Jul 2006 23:50:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 34339 invoked by uid 500); 26 Jul 2006 23:50:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 34330 invoked by uid 99); 26 Jul 2006 23:50:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 16:50:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 16:50:37 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 33703410009
	for <hadoop-dev@lucene.apache.org>; Wed, 26 Jul 2006 23:48:15 +0000 (GMT)
Message-ID: <33324621.1153957695208.JavaMail.jira@brutus>
Date: Wed, 26 Jul 2006 16:48:15 -0700 (PDT)
From: "Bryan Pendleton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-302) class Text (replacement for class
 UTF8) was: HADOOP-136
In-Reply-To: <26017675.1150245149961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-302?page=comments#action_12423740 ] 
            
Bryan Pendleton commented on HADOOP-302:
----------------------------------------

Whoops, forgot that inline patches are bad form. The point is, the encoding of "Bad \t encoding \t testcase" fails the verifyUTF check. It seems to have something to do with the double tabs.

> class Text (replacement for class UTF8) was: HADOOP-136
> -------------------------------------------------------
>
>                 Key: HADOOP-302
>                 URL: http://issues.apache.org/jira/browse/HADOOP-302
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>            Reporter: Michel Tourn
>         Assigned To: Hairong Kuang
>             Fix For: 0.5.0
>
>         Attachments: text.patch, VInt.patch
>
>
> Just to verify, which length-encoding scheme are we using for class Text (aka LargeUTF8) 
> a) The "UTF-8/Lucene" scheme? (highest bit of each byte is an extension bit, which I think is what Doug is describing in his last comment) or 
> b) the record-IO scheme in o.a.h.record.Utils.java:readInt 
> Either way, note that: 
> 1. UTF8.java and its successor Text.java need to read the length in two ways: 
>   1a. consume 1+ bytes from a DataInput and 
>   1b. parse the length within a byte array at a given offset 
> (1.b is used for the "WritableComparator optimized for UTF8 keys" ). 
> o.a.h.record.Utils only supports the DataInput mode. 
> It is not clear to me what is the best way to extend this Utils code when you need to support both reading modes 
> 2 Methods like UTF8's WritableComparator are to be low overhead, in partic. there should be no Object allocation. 
> For the byte array case, the varlen-reader utility needs to be extended to return both: 
>  the decoded length and the length of the encoded length. 
>  (so that the caller can do offset += encodedlength) 
>     
> 3. A String length does not need (small) negative integers. 
> 4. One advantage of a) is that it is standard (or at least well-known and natural) and there are no magic constants (like -120, -121 -124) 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Jul 27 00:31:40 2006
Return-Path: 
 <hadoop-dev-return-2795-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92223 invoked from network); 27 Jul 2006 00:31:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2006 00:31:40 -0000
Received: (qmail 67895 invoked by uid 500); 27 Jul 2006 00:31:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 67869 invoked by uid 500); 27 Jul 2006 00:31:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 67860 invoked by uid 99); 27 Jul 2006 00:31:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 17:31:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 17:31:38 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AA5CB41000E
	for <hadoop-dev@lucene.apache.org>; Thu, 27 Jul 2006 00:29:16 +0000 (GMT)
Message-ID: <10272755.1153960156695.JavaMail.jira@brutus>
Date: Wed, 26 Jul 2006 17:29:16 -0700 (PDT)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-302) class Text (replacement for class
 UTF8) was: HADOOP-136
In-Reply-To: <26017675.1150245149961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-302?page=all ]

Hairong Kuang updated HADOOP-302:
---------------------------------

    Attachment: textwrap.patch

Here is the patch that should fix Bryan's problem.

> class Text (replacement for class UTF8) was: HADOOP-136
> -------------------------------------------------------
>
>                 Key: HADOOP-302
>                 URL: http://issues.apache.org/jira/browse/HADOOP-302
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>            Reporter: Michel Tourn
>         Assigned To: Hairong Kuang
>             Fix For: 0.5.0
>
>         Attachments: text.patch, textwrap.patch, VInt.patch
>
>
> Just to verify, which length-encoding scheme are we using for class Text (aka LargeUTF8) 
> a) The "UTF-8/Lucene" scheme? (highest bit of each byte is an extension bit, which I think is what Doug is describing in his last comment) or 
> b) the record-IO scheme in o.a.h.record.Utils.java:readInt 
> Either way, note that: 
> 1. UTF8.java and its successor Text.java need to read the length in two ways: 
>   1a. consume 1+ bytes from a DataInput and 
>   1b. parse the length within a byte array at a given offset 
> (1.b is used for the "WritableComparator optimized for UTF8 keys" ). 
> o.a.h.record.Utils only supports the DataInput mode. 
> It is not clear to me what is the best way to extend this Utils code when you need to support both reading modes 
> 2 Methods like UTF8's WritableComparator are to be low overhead, in partic. there should be no Object allocation. 
> For the byte array case, the varlen-reader utility needs to be extended to return both: 
>  the decoded length and the length of the encoded length. 
>  (so that the caller can do offset += encodedlength) 
>     
> 3. A String length does not need (small) negative integers. 
> 4. One advantage of a) is that it is standard (or at least well-known and natural) and there are no magic constants (like -120, -121 -124) 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Jul 27 01:49:39 2006
Return-Path: 
 <hadoop-dev-return-2796-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10791 invoked from network); 27 Jul 2006 01:49:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2006 01:49:39 -0000
Received: (qmail 42063 invoked by uid 500); 27 Jul 2006 01:49:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 41754 invoked by uid 500); 27 Jul 2006 01:49:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 41745 invoked by uid 99); 27 Jul 2006 01:49:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 18:49:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 18:49:37 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0052941000D
	for <hadoop-dev@lucene.apache.org>; Thu, 27 Jul 2006 01:47:15 +0000 (GMT)
Message-ID: <14647120.1153964834998.JavaMail.jira@brutus>
Date: Wed, 26 Jul 2006 18:47:14 -0700 (PDT)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-391) test-contrib with spaces in classpath
 (Windows)
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

test-contrib with spaces in classpath (Windows)
-----------------------------------------------

                 Key: HADOOP-391
                 URL: http://issues.apache.org/jira/browse/HADOOP-391
             Project: Hadoop
          Issue Type: Bug
            Reporter: Michel Tourn
         Attachments: streaming.winspaces.patch

On Windows, ant test-contrib (streaming) with fail if classpath contains spaces.
-    vargs.add(System.getProperty("java.class.path"));
+    vargs.add("\"" + System.getProperty("java.class.path") + "\"");


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Jul 27 01:49:40 2006
Return-Path: 
 <hadoop-dev-return-2797-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10858 invoked from network); 27 Jul 2006 01:49:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2006 01:49:40 -0000
Received: (qmail 42266 invoked by uid 500); 27 Jul 2006 01:49:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 42105 invoked by uid 500); 27 Jul 2006 01:49:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 42090 invoked by uid 99); 27 Jul 2006 01:49:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 18:49:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 18:49:38 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 134A041000B
	for <hadoop-dev@lucene.apache.org>; Thu, 27 Jul 2006 01:47:16 +0000 (GMT)
Message-ID: <12694035.1153964836076.JavaMail.jira@brutus>
Date: Wed, 26 Jul 2006 18:47:16 -0700 (PDT)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-391) test-contrib with spaces in classpath
 (Windows)
In-Reply-To: <14647120.1153964834998.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-391?page=all ]

Michel Tourn updated HADOOP-391:
--------------------------------

    Attachment: streaming.winspaces.patch

> test-contrib with spaces in classpath (Windows)
> -----------------------------------------------
>
>                 Key: HADOOP-391
>                 URL: http://issues.apache.org/jira/browse/HADOOP-391
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Michel Tourn
>         Attachments: streaming.winspaces.patch
>
>
> On Windows, ant test-contrib (streaming) with fail if classpath contains spaces.
> -    vargs.add(System.getProperty("java.class.path"));
> +    vargs.add("\"" + System.getProperty("java.class.path") + "\"");

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Jul 27 03:16:40 2006
Return-Path: 
 <hadoop-dev-return-2798-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 25500 invoked from network); 27 Jul 2006 03:16:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2006 03:16:40 -0000
Received: (qmail 46983 invoked by uid 500); 27 Jul 2006 03:16:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 46919 invoked by uid 500); 27 Jul 2006 03:16:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46869 invoked by uid 99); 27 Jul 2006 03:16:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 20:16:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 20:16:37 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6A4B741000D
	for <hadoop-dev@lucene.apache.org>; Thu, 27 Jul 2006 03:14:15 +0000 (GMT)
Message-ID: <27073410.1153970055432.JavaMail.jira@brutus>
Date: Wed, 26 Jul 2006 20:14:15 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-32) Creating job with InputDir set to
 non-existant directory locks up jobtracker
In-Reply-To: <1357310343.1139555336530.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-32?page=all ]

Owen O'Malley resolved HADOOP-32.
---------------------------------

    Fix Version/s: 0.4.0
       Resolution: Duplicate
         Assignee: Owen O'Malley

This was fixed by 0.4.0 by the fix for HADOOP-278.

> Creating job with InputDir set to non-existant directory locks up jobtracker
> ----------------------------------------------------------------------------
>
>                 Key: HADOOP-32
>                 URL: http://issues.apache.org/jira/browse/HADOOP-32
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>         Environment: hadoop-trunk, running distributed map reduce
>            Reporter: Bryan Pendleton
>         Assigned To: Owen O'Malley
>             Fix For: 0.4.0
>
>
> This, in the very least, affects anything using the default listFiles() from InputFormatBase. If no files are enumerated, an exception is thrown... but the JobTracker keeps attempting to run listFiles() for this job. Trying to stop the job with hadoop job -kill job_name just results in timeouts, and further started jobs also don't progress. This happens every single time with, say, "wordcount", and a non-existent input path.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Jul 27 03:20:38 2006
Return-Path: 
 <hadoop-dev-return-2799-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 26374 invoked from network); 27 Jul 2006 03:20:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2006 03:20:38 -0000
Received: (qmail 49407 invoked by uid 500); 27 Jul 2006 03:20:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49240 invoked by uid 500); 27 Jul 2006 03:20:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49231 invoked by uid 99); 27 Jul 2006 03:20:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 20:20:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 20:20:37 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B3E1C41000A
	for <hadoop-dev@lucene.apache.org>; Thu, 27 Jul 2006 03:18:14 +0000 (GMT)
Message-ID: <1262117.1153970294734.JavaMail.jira@brutus>
Date: Wed, 26 Jul 2006 20:18:14 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-39) Job killed when backup tasks fail
In-Reply-To: <2079824794.1140051704684.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-39?page=comments#action_12423760 ] 
            
Owen O'Malley commented on HADOOP-39:
-------------------------------------

My goal with this would be to do the equivalent of "make -k" or a "best effort" job. It the option was set, the job would continue after a given TIP had failed 4 times, but that TIP would be abandoned.

> Job killed when backup tasks fail
> ---------------------------------
>
>                 Key: HADOOP-39
>                 URL: http://issues.apache.org/jira/browse/HADOOP-39
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Owen O'Malley
>
> I had a map job with side effects that meant that any speculative tasks would fail.
> Currently, the job tracker kills the job when the speculative task fails 4 times.
> It would be better to stop scheduling speculative tasks for that fragment, but let the job continue as long as one of the the instances of that fragment continue to run.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Jul 27 06:14:39 2006
Return-Path: 
 <hadoop-dev-return-2800-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 56758 invoked from network); 27 Jul 2006 06:14:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2006 06:14:39 -0000
Received: (qmail 82329 invoked by uid 500); 27 Jul 2006 06:14:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 82168 invoked by uid 500); 27 Jul 2006 06:14:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 82158 invoked by uid 99); 27 Jul 2006 06:14:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 23:14:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 23:14:37 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4F0EE41000A
	for <hadoop-dev@lucene.apache.org>; Thu, 27 Jul 2006 06:12:15 +0000 (GMT)
Message-ID: <21613773.1153980735321.JavaMail.jira@brutus>
Date: Wed, 26 Jul 2006 23:12:15 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-362) tasks can get lost when reporting task
 completion to the JobTracker has an error
In-Reply-To: <22559656.1152744030813.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-362?page=all ]

Owen O'Malley updated HADOOP-362:
---------------------------------

    Attachment: progress-update.patch

This patch makes the following changes:
1. Changes the diagnostic info from a Vector to a ArrayList.
2. Prevents tasks from moving from {FAILED,SUCCEEDED} to RUNNING
3. Only removes completed tasks from the runningTasks list after it is sure
     the job tracker got the finished message.
4. Don't set the job's progress meter to 100% when the job is complete to 
    avoid counting the final reduce's final progress update twice.
5. Pass the JobTrackerMetrics down into the procedures that actually decide
    when a task or job is finished to avoid double counting.
6. Rename some local variables to better reflect their values.

> tasks can get lost when reporting task completion to the JobTracker has an error
> --------------------------------------------------------------------------------
>
>                 Key: HADOOP-362
>                 URL: http://issues.apache.org/jira/browse/HADOOP-362
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Devaraj Das
>         Assigned To: Owen O'Malley
>         Attachments: lost-status-updates.patch, progress-update.patch
>
>
> Basically, the JobTracker used to lose some updates about successful map tasks and it would assume that the tasks are still running (the old progress report is what it used to display in the web page). Now this would cause the reduces to also wait for the map output and they would never receive the output. This would cause the job to appear as if it was hung.
>  
> The following piece of code sends the status of tasks to the JobTracker:
>  
>             synchronized (this) {
>                 for (Iterator it = runningTasks.values().iterator();
>                      it.hasNext(); ) {
>                     TaskInProgress tip = (TaskInProgress) it.next();
>                     TaskStatus status = tip.createStatus();
>                     taskReports.add(status);
>                     if (status.getRunState() != TaskStatus.RUNNING) {
>                         if (tip.getTask().isMapTask()) {
>                             mapTotal--;
>                         } else {
>                             reduceTotal--;
>                         }
>                         it.remove();
>                     }
>                 }
>             }
>  
>             //
>             // Xmit the heartbeat
>             //
>            
>             TaskTrackerStatus status =
>               new TaskTrackerStatus(taskTrackerName, localHostname,
>                                     httpPort, taskReports,
>                                     failures);
>             int resultCode = jobClient.emitHeartbeat(status, justStarted);
>  
>  
> Notice that the completed TIPs are removed from runningTasks data structure. Now, if the emitHeartBeat threw an exception (if it could not communicate with the JobTracker till the IPC timeout expires) then this update is lost. And the next time it sends the hearbeat this completed task's status is missing and hence the JobTracker doesn't know about this completed task. So, one solution to this is to remove the completed TIPs from runningTasks after emitHeartbeat returns. Here is how the new code would look like:
>  
>  
>             synchronized (this) {
>                 for (Iterator it = runningTasks.values().iterator();
>                      it.hasNext(); ) {
>                     TaskInProgress tip = (TaskInProgress) it.next();
>                     TaskStatus status = tip.createStatus();
>                     taskReports.add(status);
>                 }
>             }
>  
>             //
>             // Xmit the heartbeat
>             //
>  
>             TaskTrackerStatus status =
>               new TaskTrackerStatus(taskTrackerName, localHostname,
>                                     httpPort, taskReports,
>                                     failures);
>             int resultCode = jobClient.emitHeartbeat(status, justStarted);
>             synchronized (this) {
>                 for (Iterator it = runningTasks.values().iterator();
>                      it.hasNext(); ) {
>                     TaskInProgress tip = (TaskInProgress) it.next();
>                     if (tip.runstate != TaskStatus.RUNNING) {
>                         if (tip.getTask().isMapTask()) {
>                             mapTotal--;
>                         } else {
>                             reduceTotal--;
>                         }
>                         it.remove();
>                     }
>                 }
>             }
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Jul 27 08:26:40 2006
Return-Path: 
 <hadoop-dev-return-2801-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1876 invoked from network); 27 Jul 2006 08:26:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2006 08:26:40 -0000
Received: (qmail 63693 invoked by uid 500); 27 Jul 2006 08:26:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63627 invoked by uid 500); 27 Jul 2006 08:26:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63544 invoked by uid 99); 27 Jul 2006 08:26:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 01:26:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 01:26:36 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F1D3971428E
	for <hadoop-dev@lucene.apache.org>; Thu, 27 Jul 2006 08:24:13 +0000 (GMT)
Message-ID: <25536299.1153988653988.JavaMail.jira@brutus>
Date: Thu, 27 Jul 2006 01:24:13 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-392) Improve the UI for DFS content
 browsing
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Improve the UI for DFS content browsing
---------------------------------------

                 Key: HADOOP-392
                 URL: http://issues.apache.org/jira/browse/HADOOP-392
             Project: Hadoop
          Issue Type: Improvement
          Components: dfs
            Reporter: Devaraj Das
             Fix For: 0.5.0


A couple of improvements requested:

* change the title of the namenode page to include namenode
    Hadoop Administration
    -> Hadoop NameNode (<host>:<port>)

* Move all the info except the per node info from the dfshealth.jsp page to the home page.  No reason to make folks go through that page to get summary info or to find local logs.

* It would  be good if the health status information were sorted by node name, rather than the (random) order that -report returns

* Looking at an xml file copied to the dfs, can't view/tail it in the browser. Can download the file and view it locally.

* Viewing a java source file, the newlines don't come out right. Again, downloading and viewing locally is fine.

* When clicking on a file, it would be good to view its contents (or some subset of it) immediately, with the advanced options appearing at the bottom (block locations [just choose one], number of blocks view/tail/download/chunk size).

* Fix the filename problem (browser related) [e.g. /user/yarnon/build.xml gets translated to -user-yarnon-build.xml]




-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Jul 27 11:32:40 2006
Return-Path: 
 <hadoop-dev-return-2802-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50924 invoked from network); 27 Jul 2006 11:32:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2006 11:32:40 -0000
Received: (qmail 1129 invoked by uid 500); 27 Jul 2006 11:32:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 1101 invoked by uid 500); 27 Jul 2006 11:32:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 1091 invoked by uid 99); 27 Jul 2006 11:32:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 04:32:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 04:32:38 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C46D97141F0
	for <hadoop-dev@lucene.apache.org>; Thu, 27 Jul 2006 11:30:15 +0000 (GMT)
Message-ID: <12491445.1153999815802.JavaMail.jira@brutus>
Date: Thu, 27 Jul 2006 04:30:15 -0700 (PDT)
From: "Andrzej Bialecki  (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-287) Speed up SequenceFile sort with
 memory reduction
In-Reply-To: <30420683.1149716489884.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-287?page=comments#action_12423818 ] 
            
Andrzej Bialecki  commented on HADOOP-287:
------------------------------------------

What is the status of this patch? I'm running with relatively slow disks, and I could sure use a 30% improvement in sorting time ... ;)

> Speed up SequenceFile sort with memory reduction
> ------------------------------------------------
>
>                 Key: HADOOP-287
>                 URL: http://issues.apache.org/jira/browse/HADOOP-287
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.3.2
>            Reporter: Benjamin Reed
>         Assigned To: Doug Cutting
>         Attachments: zoom-sort.patch, zoom-sort.patch
>
>
> I replaced the merge sort with a quick sort and it yielded approx 30% improvement in sort time. It also reduced the memory requirement for sorting because the sort is done in place.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Jul 27 14:46:40 2006
Return-Path: 
 <hadoop-dev-return-2803-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 22566 invoked from network); 27 Jul 2006 14:46:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2006 14:46:40 -0000
Received: (qmail 93582 invoked by uid 500); 27 Jul 2006 14:46:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 93427 invoked by uid 500); 27 Jul 2006 14:46:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 93418 invoked by uid 99); 27 Jul 2006 14:46:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 07:46:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 07:46:39 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 62E3C7141F4
	for <hadoop-dev@lucene.apache.org>; Thu, 27 Jul 2006 14:44:16 +0000 (GMT)
Message-ID: <12946094.1154011456402.JavaMail.jira@brutus>
Date: Thu, 27 Jul 2006 07:44:16 -0700 (PDT)
From: "Benjamin Reed (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-287) Speed up SequenceFile sort with
 memory reduction
In-Reply-To: <30420683.1149716489884.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-287?page=comments#action_12423847 ] 
            
Benjamin Reed commented on HADOOP-287:
--------------------------------------

I have improved it a bit more. It now is guaranteed to only take logN stack space, and I eaked out a bit more performance. Unfortunately, the 30% improvement is for the in-memory sort. For your slow disks you need my other patch which reduces the number of times the data hits the disk. Unfortunately, that patch doesn't apply anymore. I have a newer version that removes one more full disk hit, so that should work even better. I'll try to create a patch for it today. (Unrelated changes break my patches and take a long time to reconcile...

> Speed up SequenceFile sort with memory reduction
> ------------------------------------------------
>
>                 Key: HADOOP-287
>                 URL: http://issues.apache.org/jira/browse/HADOOP-287
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.3.2
>            Reporter: Benjamin Reed
>         Assigned To: Doug Cutting
>         Attachments: s.patch, zoom-sort.patch, zoom-sort.patch
>
>
> I replaced the merge sort with a quick sort and it yielded approx 30% improvement in sort time. It also reduced the memory requirement for sorting because the sort is done in place.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Jul 27 14:46:49 2006
Return-Path: 
 <hadoop-dev-return-2804-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 22689 invoked from network); 27 Jul 2006 14:46:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2006 14:46:49 -0000
Received: (qmail 94598 invoked by uid 500); 27 Jul 2006 14:46:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94574 invoked by uid 500); 27 Jul 2006 14:46:44 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94565 invoked by uid 99); 27 Jul 2006 14:46:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 07:46:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 07:46:42 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 031D3714294
	for <hadoop-dev@lucene.apache.org>; Thu, 27 Jul 2006 14:44:19 +0000 (GMT)
Message-ID: <5383935.1154011459010.JavaMail.jira@brutus>
Date: Thu, 27 Jul 2006 07:44:19 -0700 (PDT)
From: "Benjamin Reed (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-287) Speed up SequenceFile sort with memory
 reduction
In-Reply-To: <30420683.1149716489884.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-287?page=all ]

Benjamin Reed updated HADOOP-287:
---------------------------------

    Attachment: s.patch

> Speed up SequenceFile sort with memory reduction
> ------------------------------------------------
>
>                 Key: HADOOP-287
>                 URL: http://issues.apache.org/jira/browse/HADOOP-287
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.3.2
>            Reporter: Benjamin Reed
>         Assigned To: Doug Cutting
>         Attachments: s.patch, zoom-sort.patch, zoom-sort.patch
>
>
> I replaced the merge sort with a quick sort and it yielded approx 30% improvement in sort time. It also reduced the memory requirement for sorting because the sort is done in place.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Jul 27 16:25:39 2006
Return-Path: 
 <hadoop-dev-return-2805-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 56242 invoked from network); 27 Jul 2006 16:25:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2006 16:25:39 -0000
Received: (qmail 43219 invoked by uid 500); 27 Jul 2006 16:25:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 43200 invoked by uid 500); 27 Jul 2006 16:25:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 43191 invoked by uid 99); 27 Jul 2006 16:25:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 09:25:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 09:25:38 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CDED67141F0
	for <hadoop-dev@lucene.apache.org>; Thu, 27 Jul 2006 16:23:14 +0000 (GMT)
Message-ID: <17461157.1154017394841.JavaMail.jira@brutus>
Date: Thu, 27 Jul 2006 09:23:14 -0700 (PDT)
From: "Benjamin Reed (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-367) Static blocks do not automatically run
 when a class is loaded in Java 5.0
In-Reply-To: <22771983.1153174453937.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-367?page=all ]

Benjamin Reed updated HADOOP-367:
---------------------------------

    Attachment: f.patch

Arg! It seems that public static methods on non-public classes cannot be called with reflection :( So I took a different approach that is simpler and less code. (This patch removes 132 lines and adds 18.)

I noticed that all of the factories simply created new objects. So now the WritableFactories.newInstance method finds the factory that corresponds to the package of the class and lets that factory create it. This means that there needs to be a WriteableFactory for each package that has Writables. This lowers the number of overall factories while adding one visible factory per package. It also simplifies the Writables since they don't need to worry about factories anymore.

> Static blocks do not automatically run when a class is loaded in Java 5.0
> -------------------------------------------------------------------------
>
>                 Key: HADOOP-367
>                 URL: http://issues.apache.org/jira/browse/HADOOP-367
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.4.0
>         Environment: Java 5.0
>            Reporter: Benjamin Reed
>         Attachments: f.patch
>
>
> There seems to be a change that happened between 1.4 and 1.5 with respect to static initializers. I can't find this documented, but I can reproduce with a very simple program. Basically, a static initializer is not called unless a static member/method of the class is accessed or an instance is created. This is actually what the JLS says, but until 1.5 the static initializers ran when the class was loaded. Note that this behavior only occurs when running with the 1.5 JRE AND compiling for 1.5.
> For many Writables this isn't an issue, so the fallback behavior of the WritableFactory works, but Block is package private, so loadEdits fails when called from org.apache.hadoop.io.ArrayWritable.readFields() yielding the following trace:
> Caused by: java.lang.RuntimeException: java.lang.IllegalAccessException: Class org.apache.hadoop.io.WritableFactories can not access a member of class org.apache.hadoop.dfs.Block with modifiers "public"
>         at org.apache.hadoop.io.WritableFactories.newInstance(WritableFactories.java:49)
>         at org.apache.hadoop.io.ArrayWritable.readFields(ArrayWritable.java:81)
>         at org.apache.hadoop.dfs.FSDirectory.loadFSEdits(FSDirectory.java:532)
>         at org.apache.hadoop.dfs.FSDirectory.loadFSImage(FSDirectory.java:470)
>         at org.apache.hadoop.dfs.FSDirectory.<init>(FSDirectory.java:307)
>         at org.apache.hadoop.dfs.FSNamesystem.<init>(FSNamesystem.java:177)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:91)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:84)
>         at org.apache.hadoop.dfs.NameNode.main(NameNode.java:491)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Jul 27 17:41:43 2006
Return-Path: 
 <hadoop-dev-return-2806-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85128 invoked from network); 27 Jul 2006 17:41:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2006 17:41:43 -0000
Received: (qmail 97977 invoked by uid 500); 27 Jul 2006 17:41:43 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97948 invoked by uid 500); 27 Jul 2006 17:41:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97934 invoked by uid 99); 27 Jul 2006 17:41:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 10:41:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 10:41:42 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1054371428E
	for <hadoop-dev@lucene.apache.org>; Thu, 27 Jul 2006 17:39:14 +0000 (GMT)
Message-ID: <15463316.1154021954064.JavaMail.jira@brutus>
Date: Thu, 27 Jul 2006 10:39:14 -0700 (PDT)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-393) The validateUTF function of class Text
 throws MalformedInputException for valid UTF8 code containing ascii chars
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The validateUTF function of class Text throws MalformedInputException for valid UTF8 code containing ascii chars
----------------------------------------------------------------------------------------------------------------

                 Key: HADOOP-393
                 URL: http://issues.apache.org/jira/browse/HADOOP-393
             Project: Hadoop
          Issue Type: Bug
          Components: io
    Affects Versions: 0.4.0
            Reporter: Hairong Kuang
         Assigned To: Hairong Kuang
             Fix For: 0.5.0


The validateUTF function does not handle ascii chars right therefore causing MIE exception to be thrown.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Jul 27 18:09:39 2006
Return-Path: 
 <hadoop-dev-return-2807-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93470 invoked from network); 27 Jul 2006 18:09:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2006 18:09:39 -0000
Received: (qmail 75521 invoked by uid 500); 27 Jul 2006 18:09:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75415 invoked by uid 500); 27 Jul 2006 18:09:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75406 invoked by uid 99); 27 Jul 2006 18:09:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 11:09:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 11:09:38 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BEF5A7141E3
	for <hadoop-dev@lucene.apache.org>; Thu, 27 Jul 2006 18:07:14 +0000 (GMT)
Message-ID: <1439613.1154023634779.JavaMail.jira@brutus>
Date: Thu, 27 Jul 2006 11:07:14 -0700 (PDT)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-393) The validateUTF function of class Text
 throws MalformedInputException for valid UTF8 code containing ascii chars
In-Reply-To: <15463316.1154021954064.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-393?page=all ]

Hairong Kuang updated HADOOP-393:
---------------------------------

    Attachment: textfix.patch

This patch fixes the validation problem.

I also changed the junit test TestText so it reports failure when any exception occurs.

Since issue 302 is closed, I included the patch to Bryan's problem to this patch. So we do not need to reopen issue 302.

Thank Bryan for being the first one that uses Text. Let me know if you have any other problem.

Hairong



> The validateUTF function of class Text throws MalformedInputException for valid UTF8 code containing ascii chars
> ----------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-393
>                 URL: http://issues.apache.org/jira/browse/HADOOP-393
>             Project: Hadoop
>          Issue Type: Bug
>          Components: io
>    Affects Versions: 0.4.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.5.0
>
>         Attachments: textfix.patch
>
>
> The validateUTF function does not handle ascii chars right therefore causing MIE exception to be thrown.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Jul 27 18:32:38 2006
Return-Path: 
 <hadoop-dev-return-2808-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99500 invoked from network); 27 Jul 2006 18:32:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2006 18:32:38 -0000
Received: (qmail 26792 invoked by uid 500); 27 Jul 2006 18:32:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26769 invoked by uid 500); 27 Jul 2006 18:32:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26759 invoked by uid 99); 27 Jul 2006 18:32:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 11:32:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 11:32:37 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DA3A47141F0
	for <hadoop-dev@lucene.apache.org>; Thu, 27 Jul 2006 18:30:13 +0000 (GMT)
Message-ID: <28678698.1154025013891.JavaMail.jira@brutus>
Date: Thu, 27 Jul 2006 11:30:13 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-394) MiniDFSCluster shudown order
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

MiniDFSCluster shudown order
----------------------------

                 Key: HADOOP-394
                 URL: http://issues.apache.org/jira/browse/HADOOP-394
             Project: Hadoop
          Issue Type: Improvement
          Components: dfs
    Affects Versions: 0.4.0
            Reporter: Konstantin Shvachko
         Assigned To: Konstantin Shvachko
            Priority: Minor


I propose to reverse the order of shutdown in MiniDFSCluster.
Currently it shutdowns the name node first and then the data node,
which causes the data node throwing unnecessary Exceptions in unit test.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Jul 27 18:34:39 2006
Return-Path: 
 <hadoop-dev-return-2809-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99715 invoked from network); 27 Jul 2006 18:34:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2006 18:34:39 -0000
Received: (qmail 28396 invoked by uid 500); 27 Jul 2006 18:34:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28238 invoked by uid 500); 27 Jul 2006 18:34:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28229 invoked by uid 99); 27 Jul 2006 18:34:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 11:34:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 11:34:38 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E4F907141F0
	for <hadoop-dev@lucene.apache.org>; Thu, 27 Jul 2006 18:32:14 +0000 (GMT)
Message-ID: <33381482.1154025134935.JavaMail.jira@brutus>
Date: Thu, 27 Jul 2006 11:32:14 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-394) MiniDFSCluster shudown order
In-Reply-To: <28678698.1154025013891.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-394?page=all ]

Konstantin Shvachko updated HADOOP-394:
---------------------------------------

    Attachment: MiniDFSClusterShutdownOrder.patch

With this patch the data node will shutdown before the name node.

> MiniDFSCluster shudown order
> ----------------------------
>
>                 Key: HADOOP-394
>                 URL: http://issues.apache.org/jira/browse/HADOOP-394
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>            Priority: Minor
>         Attachments: MiniDFSClusterShutdownOrder.patch
>
>
> I propose to reverse the order of shutdown in MiniDFSCluster.
> Currently it shutdowns the name node first and then the data node,
> which causes the data node throwing unnecessary Exceptions in unit test.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Jul 27 20:21:42 2006
Return-Path: 
 <hadoop-dev-return-2810-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 59563 invoked from network); 27 Jul 2006 20:21:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2006 20:21:42 -0000
Received: (qmail 20720 invoked by uid 500); 27 Jul 2006 20:21:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 20683 invoked by uid 500); 27 Jul 2006 20:21:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 20674 invoked by uid 99); 27 Jul 2006 20:21:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 13:21:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 13:21:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 119EE71429B
	for <hadoop-dev@lucene.apache.org>; Thu, 27 Jul 2006 20:19:17 +0000 (GMT)
Message-ID: <23602809.1154031557069.JavaMail.jira@brutus>
Date: Thu, 27 Jul 2006 13:19:17 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-372) should allow to specify different
 inputformat classes for different input dirs for Map/Reduce jobs
In-Reply-To: <23897633.1153332195926.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-372?page=comments#action_12423908 ] 
            
Owen O'Malley commented on HADOOP-372:
--------------------------------------

I like the idea of moving the getInput{Key,Value}Class to the RecordReader, since there is really no need for the user to specify it except as potential error checking.

The desire is to do joins across different kinds of tables. So if you have two tables that both contain urls, you could write a mapper for each table and generate the join via having the url being the map output key. I agree that you could implement it by using ObjectWritable to wrap all of the input types, but you'll end up using a lot of "instanceof" to figure out type dynamically and dispatching to the right kind of map.

I would propose being able to add input directories with specific processing chains:

JobConf conf = new JobConf();
conf.addInputPath(new Path("dir1");
conf.addInputPath(new Path("dir2");
conf.addInputPath(new Path("my-input"), MyInputFormat.class, MyMapper.class);
conf.addInputPath(new Path("other-input"), OtherInputFormat.class, OtherMapper.class);

So "dir1" and "dir2" would be processed with the default InputFormat and Mapper.
"my-input" would be processed with MyInputFormat and MyMapper and "other-input" would be processed with OtherInputFormat and OtherMapper.

This allows it to be backward compatible with a minimum of fuss for users that don't want to use multiple input sources.

Clearly, you would want to encode the class names with the paths when you were encoding the strings.

> should allow to specify different inputformat classes for different input dirs for Map/Reduce jobs
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-372
>                 URL: http://issues.apache.org/jira/browse/HADOOP-372
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.4.0
>         Environment: all
>            Reporter: Runping Qi
>
> Right now, the user can specify multiple input directories for a map reduce job. 
> However, the files under all the directories are assumed to be in the same format, 
> with the same key/value classes. This proves to be  a serious limit in many situations. 
> Here is an example. Suppose I have three simple tables: 
> one has URLs and their rank values (page ranks), 
> another has URLs and their classification values, 
> and the third one has the URL meta data such as crawl status, last crawl time, etc. 
> Suppose now I need a job to generate a list of URLs to be crawled next. 
> The decision depends on the info in all the three tables.
> Right now, there is no easy way to accomplish this.
> However, this job can be done if the framework allows to specify different inputformats for different input dirs.
> Suppose my three tables are in the following directory respectively: rankTable, classificationTable. and metaDataTable. 
> If we extend JobConf class with the following method (as Owen suggested to me):
>     addInputPath(aPath, anInputFormatClass, anInputKeyClass, anInputValueClass)
> Then I can specify my job as follows:
>     addInputPath(rankTable, SequenceFileInputFormat.class, UTF8.class, DoubleWritable.class)
>     addInputPath(classificationTable, TextInputFormat.class, UTF8,class, UTF8.class)
>     addInputPath(metaDataTable, SequenceFileInputFormat.class, UTF8.class, MyRecord.class)
> If an input directory is added through the current API, it will have the same meaning as it is now. 
> Thus this extension will not affect any applications that do not need this new feature.
> It is relatively easy for the M/R framework to create an appropriate record reader for a map task based on the above information.
> And that is the only change needed for supporting this extension.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Jul 27 22:42:38 2006
Return-Path: 
 <hadoop-dev-return-2811-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99617 invoked from network); 27 Jul 2006 22:42:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2006 22:42:38 -0000
Received: (qmail 5193 invoked by uid 500); 27 Jul 2006 22:42:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 5164 invoked by uid 500); 27 Jul 2006 22:42:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 5155 invoked by uid 99); 27 Jul 2006 22:42:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 15:42:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 15:42:37 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EA4FB41000B
	for <hadoop-dev@lucene.apache.org>; Thu, 27 Jul 2006 22:40:13 +0000 (GMT)
Message-ID: <20953780.1154040013956.JavaMail.jira@brutus>
Date: Thu, 27 Jul 2006 15:40:13 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-395) infoPort field should be a DatanodeID
 member
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

infoPort field should be a DatanodeID member
--------------------------------------------

                 Key: HADOOP-395
                 URL: http://issues.apache.org/jira/browse/HADOOP-395
             Project: Hadoop
          Issue Type: Improvement
    Affects Versions: 0.4.0
            Reporter: Konstantin Shvachko
         Assigned To: Devaraj Das
             Fix For: 0.5.0


I have a couple of comments on HADOOP-375. Sorry missed that discussion when the patch was under construction.
1) As it is done now infoPort is a member of two classes DatanodeInfo and DatanodeRegistration, which in fact have a
common base DatanodeID. It seems more logical to place infoPort into DatanodeID. This will let us handle the port
assignments inside the constructors rather than outside, and will prevent from unsafe "dynamic casts" like the one
found in FSNamesystem.gotHeartbeat( DatanodeID nodeID, ... )
            nodeinfo.infoPort = ((DatanodeRegistration)nodeID).infoPort;
2) Also, should we make infoPort short rather than integer?
Since it is a part of a heartbeat message we might want keeping it small.
3) Member getters should start with get<MemberName>
- public int infoPort() { return infoPort; }
+ public int getInfoPort() { return infoPort; }


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 28 04:40:42 2006
Return-Path: 
 <hadoop-dev-return-2812-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 89466 invoked from network); 28 Jul 2006 04:40:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2006 04:40:42 -0000
Received: (qmail 99711 invoked by uid 500); 28 Jul 2006 04:40:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 99682 invoked by uid 500); 28 Jul 2006 04:40:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 99673 invoked by uid 99); 28 Jul 2006 04:40:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 21:40:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 21:40:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C41137141F5
	for <hadoop-dev@lucene.apache.org>; Fri, 28 Jul 2006 04:38:16 +0000 (GMT)
Message-ID: <22464813.1154061496799.JavaMail.jira@brutus>
Date: Thu, 27 Jul 2006 21:38:16 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-396) Writable DatanodeID
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Writable DatanodeID
-------------------

                 Key: HADOOP-396
                 URL: http://issues.apache.org/jira/browse/HADOOP-396
             Project: Hadoop
          Issue Type: Improvement
          Components: dfs
    Affects Versions: 0.4.0
            Reporter: Konstantin Shvachko
         Assigned To: Konstantin Shvachko
             Fix For: 0.5.0
         Attachments: DatanodeID.patch

This patch implements Owen's comments to HADOOP-321. Namely,
- Namenode.sendHeartbeat does not create a throwaway DatanodeDescriptor. DatanodeID is sufficient in this case.
- DatanodeID is made Writable, and it also implements equals() and hashCode().
- DatanodeInfo is updated to call base class methods in its implementation of Writable interface.
- I changed the way strings are written/read using UTF8.writeString and UTF8.readString.
- Some comments are updated.


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 28 04:40:48 2006
Return-Path: 
 <hadoop-dev-return-2813-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 89544 invoked from network); 28 Jul 2006 04:40:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2006 04:40:48 -0000
Received: (qmail 99948 invoked by uid 500); 28 Jul 2006 04:40:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 99929 invoked by uid 500); 28 Jul 2006 04:40:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 99920 invoked by uid 99); 28 Jul 2006 04:40:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 21:40:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 21:40:47 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1E4137141F4
	for <hadoop-dev@lucene.apache.org>; Fri, 28 Jul 2006 04:38:18 +0000 (GMT)
Message-ID: <14130612.1154061498121.JavaMail.jira@brutus>
Date: Thu, 27 Jul 2006 21:38:18 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-396) Writable DatanodeID
In-Reply-To: <22464813.1154061496799.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-396?page=all ]

Konstantin Shvachko updated HADOOP-396:
---------------------------------------

    Attachment: DatanodeID.patch

> Writable DatanodeID
> -------------------
>
>                 Key: HADOOP-396
>                 URL: http://issues.apache.org/jira/browse/HADOOP-396
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.5.0
>
>         Attachments: DatanodeID.patch
>
>
> This patch implements Owen's comments to HADOOP-321. Namely,
> - Namenode.sendHeartbeat does not create a throwaway DatanodeDescriptor. DatanodeID is sufficient in this case.
> - DatanodeID is made Writable, and it also implements equals() and hashCode().
> - DatanodeInfo is updated to call base class methods in its implementation of Writable interface.
> - I changed the way strings are written/read using UTF8.writeString and UTF8.readString.
> - Some comments are updated.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 28 11:00:52 2006
Return-Path: 
 <hadoop-dev-return-2814-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 98586 invoked from network); 28 Jul 2006 11:00:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2006 11:00:52 -0000
Received: (qmail 14823 invoked by uid 500); 28 Jul 2006 11:00:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14782 invoked by uid 500); 28 Jul 2006 11:00:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 14584 invoked by uid 99); 28 Jul 2006 11:00:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 04:00:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 04:00:39 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6B50B41000A
	for <hadoop-dev@lucene.apache.org>; Fri, 28 Jul 2006 10:58:15 +0000 (GMT)
Message-ID: <2569995.1154084295436.JavaMail.jira@brutus>
Date: Fri, 28 Jul 2006 03:58:15 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-395) infoPort field should be a DatanodeID
 member
In-Reply-To: <20953780.1154040013956.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-395?page=all ]

Devaraj Das updated HADOOP-395:
-------------------------------

    Attachment: refactor_infoport.patch

Attached is the patch.

> infoPort field should be a DatanodeID member
> --------------------------------------------
>
>                 Key: HADOOP-395
>                 URL: http://issues.apache.org/jira/browse/HADOOP-395
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.4.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Devaraj Das
>             Fix For: 0.5.0
>
>         Attachments: refactor_infoport.patch
>
>
> I have a couple of comments on HADOOP-375. Sorry missed that discussion when the patch was under construction.
> 1) As it is done now infoPort is a member of two classes DatanodeInfo and DatanodeRegistration, which in fact have a
> common base DatanodeID. It seems more logical to place infoPort into DatanodeID. This will let us handle the port
> assignments inside the constructors rather than outside, and will prevent from unsafe "dynamic casts" like the one
> found in FSNamesystem.gotHeartbeat( DatanodeID nodeID, ... )
>             nodeinfo.infoPort = ((DatanodeRegistration)nodeID).infoPort;
> 2) Also, should we make infoPort short rather than integer?
> Since it is a part of a heartbeat message we might want keeping it small.
> 3) Member getters should start with get<MemberName>
> - public int infoPort() { return infoPort; }
> + public int getInfoPort() { return infoPort; }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 28 12:01:40 2006
Return-Path: 
 <hadoop-dev-return-2815-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16075 invoked from network); 28 Jul 2006 12:01:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2006 12:01:40 -0000
Received: (qmail 25905 invoked by uid 500); 28 Jul 2006 12:01:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 25873 invoked by uid 500); 28 Jul 2006 12:01:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 25864 invoked by uid 99); 28 Jul 2006 12:01:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 05:01:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 05:01:39 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B2257410009
	for <hadoop-dev@lucene.apache.org>; Fri, 28 Jul 2006 11:59:14 +0000 (GMT)
Message-ID: <15032921.1154087954727.JavaMail.jira@brutus>
Date: Fri, 28 Jul 2006 04:59:14 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-396) Writable DatanodeID
In-Reply-To: <22464813.1154061496799.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-396?page=comments#action_12424075 ] 
            
Devaraj Das commented on HADOOP-396:
------------------------------------

Shouldn't DatanodeRegistration's readFields/write methods invoke the DatanodeID's corresponding methods (like you did for DatanodeInfo) ?

> Writable DatanodeID
> -------------------
>
>                 Key: HADOOP-396
>                 URL: http://issues.apache.org/jira/browse/HADOOP-396
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.5.0
>
>         Attachments: DatanodeID.patch
>
>
> This patch implements Owen's comments to HADOOP-321. Namely,
> - Namenode.sendHeartbeat does not create a throwaway DatanodeDescriptor. DatanodeID is sufficient in this case.
> - DatanodeID is made Writable, and it also implements equals() and hashCode().
> - DatanodeInfo is updated to call base class methods in its implementation of Writable interface.
> - I changed the way strings are written/read using UTF8.writeString and UTF8.readString.
> - Some comments are updated.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 28 12:03:41 2006
Return-Path: 
 <hadoop-dev-return-2816-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16417 invoked from network); 28 Jul 2006 12:03:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2006 12:03:41 -0000
Received: (qmail 28356 invoked by uid 500); 28 Jul 2006 12:03:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28196 invoked by uid 500); 28 Jul 2006 12:03:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28187 invoked by uid 99); 28 Jul 2006 12:03:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 05:03:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 05:03:39 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 413DA41000A
	for <hadoop-dev@lucene.apache.org>; Fri, 28 Jul 2006 12:01:15 +0000 (GMT)
Message-ID: <3202850.1154088075264.JavaMail.jira@brutus>
Date: Fri, 28 Jul 2006 05:01:15 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-395) infoPort field should be a
 DatanodeID member
In-Reply-To: <20953780.1154040013956.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-395?page=comments#action_12424076 ] 
            
Devaraj Das commented on HADOOP-395:
------------------------------------

Noticed now that Konstantin's patch for Hadoop-396 will make this patch go stale. So I will submit another patch after Konstantin's patch is committed. Please don't commit this patch for now.

> infoPort field should be a DatanodeID member
> --------------------------------------------
>
>                 Key: HADOOP-395
>                 URL: http://issues.apache.org/jira/browse/HADOOP-395
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.4.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Devaraj Das
>             Fix For: 0.5.0
>
>         Attachments: refactor_infoport.patch
>
>
> I have a couple of comments on HADOOP-375. Sorry missed that discussion when the patch was under construction.
> 1) As it is done now infoPort is a member of two classes DatanodeInfo and DatanodeRegistration, which in fact have a
> common base DatanodeID. It seems more logical to place infoPort into DatanodeID. This will let us handle the port
> assignments inside the constructors rather than outside, and will prevent from unsafe "dynamic casts" like the one
> found in FSNamesystem.gotHeartbeat( DatanodeID nodeID, ... )
>             nodeinfo.infoPort = ((DatanodeRegistration)nodeID).infoPort;
> 2) Also, should we make infoPort short rather than integer?
> Since it is a part of a heartbeat message we might want keeping it small.
> 3) Member getters should start with get<MemberName>
> - public int infoPort() { return infoPort; }
> + public int getInfoPort() { return infoPort; }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 28 18:36:43 2006
Return-Path: 
 <hadoop-dev-return-2817-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 60556 invoked from network); 28 Jul 2006 18:36:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2006 18:36:43 -0000
Received: (qmail 33253 invoked by uid 500); 28 Jul 2006 18:36:43 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 33227 invoked by uid 500); 28 Jul 2006 18:36:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 33218 invoked by uid 99); 28 Jul 2006 18:36:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 11:36:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 11:36:42 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B9AF441000B
	for <hadoop-dev@lucene.apache.org>; Fri, 28 Jul 2006 18:34:15 +0000 (GMT)
Message-ID: <6832828.1154111655758.JavaMail.jira@brutus>
Date: Fri, 28 Jul 2006 11:34:15 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-54?page=comments#action_12424146 ] 
            
Owen O'Malley commented on HADOOP-54:
-------------------------------------

I'm not set on the name nextRaw, but I think the semantics are different enough that it deserves a different name, but whatever people want.

I think the 3 Writer classes should be public, because they are actually doing different things and will likely end up with different parameter lists on the constructors. I'd hate to make the factory take the super set of all parameters that any of the Writers want.

ValueBytes is fine.

I wasn't really intending to create a RawValue/ValueBytes for each iteration and your interface makes that clearer, so I like that. *smile*

> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.5.0
>
>         Attachments: VIntCompressionResults.txt
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 28 20:14:45 2006
Return-Path: 
 <hadoop-dev-return-2818-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 566 invoked from network); 28 Jul 2006 20:14:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2006 20:14:45 -0000
Received: (qmail 96986 invoked by uid 500); 28 Jul 2006 20:14:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 96928 invoked by uid 500); 28 Jul 2006 20:14:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 96815 invoked by uid 99); 28 Jul 2006 20:14:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 13:14:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 13:14:41 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D88FA410011
	for <hadoop-dev@lucene.apache.org>; Fri, 28 Jul 2006 20:12:15 +0000 (GMT)
Message-ID: <6710319.1154117535883.JavaMail.jira@brutus>
Date: Fri, 28 Jul 2006 13:12:15 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-397) c/c++ record io library does not use
 autoconf
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

c/c++ record io library does not use autoconf
---------------------------------------------

                 Key: HADOOP-397
                 URL: http://issues.apache.org/jira/browse/HADOOP-397
             Project: Hadoop
          Issue Type: Improvement
            Reporter: Owen O'Malley
         Assigned To: Sameer Paranjpye


It would be more convenient, if the C/C++ portion of record io used autoconf to configure the location of the required libraries and generate make files.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 28 20:24:45 2006
Return-Path: 
 <hadoop-dev-return-2820-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 3018 invoked from network); 28 Jul 2006 20:24:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2006 20:24:45 -0000
Received: (qmail 9124 invoked by uid 500); 28 Jul 2006 20:24:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9101 invoked by uid 500); 28 Jul 2006 20:24:44 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9092 invoked by uid 99); 28 Jul 2006 20:24:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 13:24:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 13:24:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E941141000A
	for <hadoop-dev@lucene.apache.org>; Fri, 28 Jul 2006 20:22:13 +0000 (GMT)
Message-ID: <17354608.1154118133952.JavaMail.jira@brutus>
Date: Fri, 28 Jul 2006 13:22:13 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-398) refactor the mapred package into small
 pieces
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

refactor the mapred package into small pieces
---------------------------------------------

                 Key: HADOOP-398
                 URL: http://issues.apache.org/jira/browse/HADOOP-398
             Project: Hadoop
          Issue Type: Improvement
          Components: mapred
    Affects Versions: 0.4.0
            Reporter: Owen O'Malley
         Assigned To: Owen O'Malley


The mapred package has gotten too big, so I propose changing it to split it into parts.

I propose the following splits:

org.apache.hadoop.mapred = client API
org.apache.hadoop.mapred.task = code for task tracker
org.apache.hadoop.mapred.job = code for job tracker
org.apache.hadoop.mapred.utils = non public code that is shared between the servers

Does anyone have any other divisions that would help?

I would make the classes sent through RPC public classes in the server's package.

Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 28 20:24:41 2006
Return-Path: 
 <hadoop-dev-return-2819-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 2982 invoked from network); 28 Jul 2006 20:24:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2006 20:24:41 -0000
Received: (qmail 8949 invoked by uid 500); 28 Jul 2006 20:24:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 8915 invoked by uid 500); 28 Jul 2006 20:24:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 8905 invoked by uid 99); 28 Jul 2006 20:24:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 13:24:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 13:24:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 60E9441000E
	for <hadoop-dev@lucene.apache.org>; Fri, 28 Jul 2006 20:22:15 +0000 (GMT)
Message-ID: <13495861.1154118135394.JavaMail.jira@brutus>
Date: Fri, 28 Jul 2006 13:22:15 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-397) c/c++ record io library does not use
 autoconf
In-Reply-To: <6710319.1154117535883.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-397?page=all ]

Owen O'Malley updated HADOOP-397:
---------------------------------

    Component/s: record

> c/c++ record io library does not use autoconf
> ---------------------------------------------
>
>                 Key: HADOOP-397
>                 URL: http://issues.apache.org/jira/browse/HADOOP-397
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: record
>            Reporter: Owen O'Malley
>         Assigned To: Sameer Paranjpye
>
> It would be more convenient, if the C/C++ portion of record io used autoconf to configure the location of the required libraries and generate make files.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 28 20:29:40 2006
Return-Path: 
 <hadoop-dev-return-2821-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 3900 invoked from network); 28 Jul 2006 20:29:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2006 20:29:40 -0000
Received: (qmail 15502 invoked by uid 500); 28 Jul 2006 20:29:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15335 invoked by uid 500); 28 Jul 2006 20:29:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 15326 invoked by uid 99); 28 Jul 2006 20:29:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 13:29:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 13:29:39 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F203B41000A
	for <hadoop-dev@lucene.apache.org>; Fri, 28 Jul 2006 20:27:13 +0000 (GMT)
Message-ID: <23542988.1154118433987.JavaMail.jira@brutus>
Date: Fri, 28 Jul 2006 13:27:13 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-399) the javadoc currently generates lot of
 warnings about bad fields
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

the javadoc currently generates lot of warnings about bad fields
----------------------------------------------------------------

                 Key: HADOOP-399
                 URL: http://issues.apache.org/jira/browse/HADOOP-399
             Project: Hadoop
          Issue Type: Bug
    Affects Versions: 0.4.0
            Reporter: Owen O'Malley
         Assigned To: Owen O'Malley
            Priority: Trivial


When building the "tar" target, I get the following warnings:

  [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/java/org/apache/hadoop/dfs/DFSck.java:475: warning - @return tag has no arguments.
  [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/java/org/apache/hadoop/dfs/DatanodeProtocol.java:46: warning - Tag @link: reference not found: DatanodeRegistration
  [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/java/org/apache/hadoop/dfs/DatanodeProtocol.java:46: warning - Tag @see: reference not found: FSNamesystem#registerDatanode(DatanodeRegistration)
  [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/java/org/apache/hadoop/io/BytesWritable.java:63: warning - @return tag has no arguments.
  [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/java/org/apache/hadoop/io/SequenceFile.java:252: warning - Tag @link: can't find Reader(FileSystem,Path,Configuration) in org.apache.hadoop.io.SequenceFile.Reader
  [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/java/org/apache/hadoop/io/SequenceFile.java:81: warning - Tag @link: can't find Writer(FileSystem,Path,Class,Class) in org.apache.hadoop.io.SequenceFile.Writer
  [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/java/org/apache/hadoop/io/Text.java:104: warning - @returns is an unknown tag.
  [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/java/org/apache/hadoop/io/Text.java:413: warning - @param argument "utf8:" is not a parameter name.
  [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/java/org/apache/hadoop/io/WritableUtils.java:338: warning - @param argument "i:" is not a parameter name.
  [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/java/org/apache/hadoop/mapred/JobConf.java:77: warning - @param argument "conf" is not a parameter name.
  [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/examples/org/apache/hadoop/examples/ExampleDriver.java:29: warning - Tag @author cannot be used in method documentation.  It can only be used in the following types of documentation: overview, package, class/interface.
  [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/examples/org/apache/hadoop/examples/ExampleDriver.java:29: warning - @date is an unknown tag.
  [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/examples/org/apache/hadoop/examples/PiBenchmark.java:62: warning - @param argument "value" is not a parameter name.
  [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/examples/org/apache/hadoop/examples/PiBenchmark.java:106: warning - @ is an unknown tag.


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 28 20:37:40 2006
Return-Path: 
 <hadoop-dev-return-2822-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 5206 invoked from network); 28 Jul 2006 20:37:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2006 20:37:40 -0000
Received: (qmail 27911 invoked by uid 500); 28 Jul 2006 20:37:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 27746 invoked by uid 500); 28 Jul 2006 20:37:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 27728 invoked by uid 99); 28 Jul 2006 20:37:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 13:37:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 13:37:39 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E7BB841000A
	for <hadoop-dev@lucene.apache.org>; Fri, 28 Jul 2006 20:35:13 +0000 (GMT)
Message-ID: <33242031.1154118913944.JavaMail.jira@brutus>
Date: Fri, 28 Jul 2006 13:35:13 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-400) the job tracker re-runs failed tasks
 on the same node
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

the job tracker re-runs failed tasks on the same node
-----------------------------------------------------

                 Key: HADOOP-400
                 URL: http://issues.apache.org/jira/browse/HADOOP-400
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.4.0
            Reporter: Owen O'Malley
         Assigned To: Owen O'Malley


The job tracker tries not to run tasks that have previously failed on a node on that node again, but it doesn't strictly prevent it.

I propose to change the rule so that when pollForNewTask is called by a TaskTracker, the JobTracker will only assign it a task that has failed on that TaskTracker, if and only if it has already failed on the entire cluster. Thus, for "normal" clusters with more than 4 TaskTrackers, you will be guaranteed that it will run on 4 different TaskTrackers. For small clusters, it will run on every TaskTracker in the cluster at least once.

Does that sound reasonable to everyone?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 28 20:52:41 2006
Return-Path: 
 <hadoop-dev-return-2823-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 7756 invoked from network); 28 Jul 2006 20:52:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2006 20:52:41 -0000
Received: (qmail 49389 invoked by uid 500); 28 Jul 2006 20:52:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49365 invoked by uid 500); 28 Jul 2006 20:52:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49356 invoked by uid 99); 28 Jul 2006 20:52:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 13:52:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 13:52:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0285141000A
	for <hadoop-dev@lucene.apache.org>; Fri, 28 Jul 2006 20:50:15 +0000 (GMT)
Message-ID: <25232101.1154119815007.JavaMail.jira@brutus>
Date: Fri, 28 Jul 2006 13:50:15 -0700 (PDT)
From: "Jean-Baptiste Quenot (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-377) Configuration does not handle URL
In-Reply-To: <29286.1153504213953.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-377?page=comments#action_12424166 ] 
            
Jean-Baptiste Quenot commented on HADOOP-377:
---------------------------------------------

You're right in this particular case I could do that.  But basically allowing to pass an URL is much more flexible: that way the config file can be in a JAR  or ZIP file (even outside of the classpath), at an HTTP(S) URL, etc.  The java.net.URL architecture even allows you to implement easily a custom protocol handler (this information is from http://java.sun.com/developer/onlineTraining/protocolhandlers/).

Another point: we are using Spring to instantiate the Hadoop configuration.  And in Spring you can specify custom editors for the properties you set.  We pass something like conf://hadoop-client.xml and this is resolved to a Spring Resource with a ResourceEditor (a custom editor that resolves to a org.springframework.core.io.Resource), which is holding either a File or an URL.  Creating a String editor to resolve a path is a bit awkward since a String is not a concept that is appropriate to represent a file location in the realm of OOP, it is just too generic.  An URL clearly represents the location of some piece of data, in our case the Hadoop Client configuration file.

To sum up, I think providing URL support to Hadoop's Configuration gives more choice to the end developer.

> Configuration does not handle URL
> ---------------------------------
>
>                 Key: HADOOP-377
>                 URL: http://issues.apache.org/jira/browse/HADOOP-377
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Jean-Baptiste Quenot
>         Attachments: 20060721-hadoop-Configuration-URL
>
>
> Current Configuration allows:
> * <String> pointing to a resource in the classpath
> * <Path> local path on the file system
> The attached patch handles java.net.URL.  We use it to load hadoop-client.xml from a JAR.
> Thanks in advance!

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 28 21:16:42 2006
Return-Path: 
 <hadoop-dev-return-2824-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12162 invoked from network); 28 Jul 2006 21:16:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2006 21:16:42 -0000
Received: (qmail 74593 invoked by uid 500); 28 Jul 2006 21:16:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 74421 invoked by uid 500); 28 Jul 2006 21:16:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 74411 invoked by uid 99); 28 Jul 2006 21:16:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 14:16:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 14:16:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A292741000B
	for <hadoop-dev@lucene.apache.org>; Fri, 28 Jul 2006 21:14:15 +0000 (GMT)
Message-ID: <26382501.1154121255663.JavaMail.jira@brutus>
Date: Fri, 28 Jul 2006 14:14:15 -0700 (PDT)
From: "Dick King (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-400) the job tracker re-runs failed tasks
 on the same node
In-Reply-To: <33242031.1154118913944.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-400?page=comments#action_12424170 ] 
            
Dick King commented on HADOOP-400:
----------------------------------

I do see one possible hole.  If a machine loses its TaskTracker, it gets a new one.  Can we arrange for the new TaskTracker to inherit the task failures from its predecessor?  That would be a bit hard ... but for this to work at all the tasks have to know what TaskTrackers they've flunked on.  All the TaskTracker has to know is who its predecessors are to refuse tasks that have flunked on its TaskTracker site [usually, on its machine].

-dk


> the job tracker re-runs failed tasks on the same node
> -----------------------------------------------------
>
>                 Key: HADOOP-400
>                 URL: http://issues.apache.org/jira/browse/HADOOP-400
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.4.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>
> The job tracker tries not to run tasks that have previously failed on a node on that node again, but it doesn't strictly prevent it.
> I propose to change the rule so that when pollForNewTask is called by a TaskTracker, the JobTracker will only assign it a task that has failed on that TaskTracker, if and only if it has already failed on the entire cluster. Thus, for "normal" clusters with more than 4 TaskTrackers, you will be guaranteed that it will run on 4 different TaskTrackers. For small clusters, it will run on every TaskTracker in the cluster at least once.
> Does that sound reasonable to everyone?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 28 23:06:47 2006
Return-Path: 
 <hadoop-dev-return-2825-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 42425 invoked from network); 28 Jul 2006 23:06:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2006 23:06:47 -0000
Received: (qmail 21217 invoked by uid 500); 28 Jul 2006 23:06:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 21189 invoked by uid 500); 28 Jul 2006 23:06:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 21180 invoked by uid 99); 28 Jul 2006 23:06:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 16:06:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 16:06:45 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7E0EC41000A
	for <hadoop-dev@lucene.apache.org>; Fri, 28 Jul 2006 23:04:20 +0000 (GMT)
Message-ID: <19999404.1154127860513.JavaMail.jira@brutus>
Date: Fri, 28 Jul 2006 16:04:20 -0700 (PDT)
From: "Marco Nicosia (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-401) JobTracker crashes Sun JVM
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

JobTracker crashes Sun JVM
--------------------------

                 Key: HADOOP-401
                 URL: http://issues.apache.org/jira/browse/HADOOP-401
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.4.0
         Environment: OS:Red Hat Enterprise Linux AS release 4 (Nahant Update 2)

uname:Linux 2.6.9-22.12.y1-64 #5 SMP Fri Nov 4 13:39:56 PST 2005 x86_64
libc:glibc 2.3.4 NPTL 2.3.4 
rlimit: STACK 10240k, CORE 0k, NPROC 32768, NOFILE 32768, AS infinity
load average:0.20 0.21 0.18

CPU:total 4 family 47, cmov, cx8, fxsr, mmx, sse, sse2, ht

Memory: 4k page, physical 988k(220k free), swap 3070k(3070k free)

vm_info: Java HotSpot(TM) Server VM (1.5.0_06-b05) for linux-x86, built on Nov 10 2005 10:56:33 by java_re with gcc 3.2.1-7a (J2SE release)

            Reporter: Marco Nicosia
            Priority: Minor


>>From our jobtacker's .out file:

#
# An unexpected error has been detected by HotSpot Virtual Machine:
#
#  SIGSEGV (0xb) at pc=0xf27bf825, pid=24028, tid=1856498608
#
# Java VM: Java HotSpot(TM) Server VM (1.5.0_06-b05 mixed mode)
# Problematic frame:
# J  org.mortbay.util.ByteArrayPool.getByteArray(I)[B
#
# An error report file with more information is saved as hs_err_pid24028.log
#
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
#

And the relevant parts of that hs_err_pid24028.log file:

#
# An unexpected error has been detected by HotSpot Virtual Machine:
#
#  SIGSEGV (0xb) at pc=0xf27bf825, pid=24028, tid=1856498608
#
# Java VM: Java HotSpot(TM) Server VM (1.5.0_06-b05 mixed mode)
# Problematic frame:
# J  org.mortbay.util.ByteArrayPool.getByteArray(I)[B
#

---------------  T H R E A D  ---------------

Current thread (0x086e0088):  JavaThread "SocketListener0-0" [_thread_in_Java, id=24112]

siginfo:si_signo=11, si_errno=0, si_code=2, si_addr=0x00022008

Registers:
EAX=0x00022000, EBX=0x75a0fac8, ECX=0x00000000, EDX=0x75b31258
ESP=0x6ea7ded0, EBP=0x6ea7df3c, ESI=0x71b6def5, EDI=0x00000402
EIP=0xf27bf825, CR2=0x00022008, EFLAGS=0x00010217

Top of Stack: (sp=0x6ea7ded0)
0x6ea7ded0:   71549561 6ea7def0 00002000 00000400
0x6ea7dee0:   339dc50d 086e0088 6ea7df3c 6ea7df50
0x6ea7def0:   00000000 71b6def5 7154d7c9 f2595a80
0x6ea7df00:   6ea7df3c 6ea7df50 7154d7d8 6ea7df14
0x6ea7df10:   6ea7df3c f2501a14 00002000 e57bd350
0x6ea7df20:   6ea7df20 71b6def5 6ea7df50 71b71798
0x6ea7df30:   00000000 71b6df80 6ea7df44 6ea7df78
0x6ea7df40:   f2501aeb 719431e8 00002000 e57bd2d0 

Instructions: (pc=0xf27bf825)
0xf27bf815:   8b 98 a4 00 00 00 8b 4b 20 89 4c 24 20 8b 41 08
0xf27bf825:   8b 70 08 8b de 4b 8b 4c 24 10 23 cb 89 4c 24 10 

Stack: [0x6e9fe000,0x6ea7f000),  sp=0x6ea7ded0,  free space=511k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
J  org.mortbay.util.ByteArrayPool.getByteArray(I)[B
j  org.mortbay.http.HttpInputStream.<init>(Ljava/io/InputStream;I)V+15
j  org.mortbay.http.HttpConnection.<init>(Lorg/mortbay/http/HttpListener;Ljava/net/InetAddress;Ljava/io/InputStream;Ljava/io/OutputStream;Ljava/lang/Object;)V+97
j  org.mortbay.http.SocketListener.createConnection(Ljava/net/Socket;)Lorg/mortbay/http/HttpConnection;+18
j  org.mortbay.http.SocketListener.handleConnection(Ljava/net/Socket;)V+2
j  org.mortbay.util.ThreadedServer.handle(Ljava/lang/Object;)V+19


---------------  P R O C E S S  ---------------

Java Threads: ( => current thread )
  0x086bb8a0 JavaThread "Thread-0" [_thread_blocked, id=24117]
  0x0859dd38 JavaThread "Thread-20" [_thread_blocked, id=24116]
  0x0859a8a8 JavaThread "Thread-19" [_thread_blocked, id=24115]
  0x0859a1f8 JavaThread "Thread-18" [_thread_blocked, id=24114]
  0x085d54d8 JavaThread "SocketListener0-1" [_thread_in_native, id=24113]
=>0x086e0088 JavaThread "SocketListener0-0" [_thread_in_Java, id=24112]

[...]

Heap
 PSYoungGen      total 21248K, used 19699K [0xe4640000, 0xe6a00000, 0xf2470000)
  eden space 19584K, 92% used [0xe4640000,0xe57def08,0xe5960000)
  from space 1664K, 99% used [0xe5960000,0xe5afe020,0xe5b00000)
  to   space 8384K, 0% used [0xe61d0000,0xe61d0000,0xe6a00000)
 PSOldGen        total 390080K, used 370693K [0x75470000, 0x8d160000, 0xe4640000)
  object space 390080K, 95% used [0x75470000,0x8be716e0,0x8d160000)
 PSPermGen       total 16384K, used 8080K [0x71470000, 0x72470000, 0x75470000)
  object space 16384K, 49% used [0x71470000,0x71c54298,0x72470000)

[...]

VM Arguments:
jvm_args: -Xmx2000m -Dhadoop.log.dir=/export/crawlspace/kryptonite/hadoop/current/../run2/log -Dhadoop.log.file=hadoop-crawler-jobtracker-kry1140.log -Dhadoop.home.dir=/export
/crawlspace/kryptonite/hadoop/current -Dhadoop.id.str=crawler -Dhadoop.root.logger=INFO,DRFA
java_command: org.apache.hadoop.mapred.JobTracker
Launcher Type: SUN_STANDARD

Environment Variables:
JAVA_HOME=/export/crawlspace/kryptonite/java/jdk
PATH=/usr/kerberos/bin:/usr/local/bin:/bin:/usr/bin:/usr/X11R6/bin:/export/crawlspace/kryptonite/hadoop/current/bin
LD_LIBRARY_PATH=/export/crawlspace/kryptonite/java/jdk1.5.0_06/jre/lib/i386/server:/export/crawlspace/kryptonite/java/jdk1.5.0_06/jre/lib/i386:/export/crawlspace/kryptonite/ja
va/jdk1.5.0_06/jre/../lib/i386
SHELL=/bin/tcsh
HOSTTYPE=x86_64-linux
OSTYPE=linux
MACHTYPE=x86_64



-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 28 23:23:47 2006
Return-Path: 
 <hadoop-dev-return-2826-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46551 invoked from network); 28 Jul 2006 23:23:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2006 23:23:47 -0000
Received: (qmail 49919 invoked by uid 500); 28 Jul 2006 23:23:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49860 invoked by uid 500); 28 Jul 2006 23:23:44 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49842 invoked by uid 99); 28 Jul 2006 23:23:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 16:23:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 16:23:43 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4B91C41000A
	for <hadoop-dev@lucene.apache.org>; Fri, 28 Jul 2006 23:21:18 +0000 (GMT)
Message-ID: <10640421.1154128878307.JavaMail.jira@brutus>
Date: Fri, 28 Jul 2006 16:21:18 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-401) JobTracker crashes Sun JVM
In-Reply-To: <19999404.1154127860513.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-401?page=all ]

Yoram Arnon updated HADOOP-401:
-------------------------------

    Description: 
>>From our jobtacker's .out file:

#
# An unexpected error has been detected by HotSpot Virtual Machine:
#
#  SIGSEGV (0xb) at pc=0xf27bf825, pid=24028, tid=1856498608
#
# Java VM: Java HotSpot(TM) Server VM (1.5.0_06-b05 mixed mode)
# Problematic frame:
# J  org.mortbay.util.ByteArrayPool.getByteArray(I)[B
#
# An error report file with more information is saved as hs_err_pid24028.log
#
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
#

And the relevant parts of that hs_err_pid24028.log file:

#
# An unexpected error has been detected by HotSpot Virtual Machine:
#
#  SIGSEGV (0xb) at pc=0xf27bf825, pid=24028, tid=1856498608
#
# Java VM: Java HotSpot(TM) Server VM (1.5.0_06-b05 mixed mode)
# Problematic frame:
# J  org.mortbay.util.ByteArrayPool.getByteArray(I)[B
#

---------------  T H R E A D  ---------------

Current thread (0x086e0088):  JavaThread "SocketListener0-0" [_thread_in_Java, id=24112]

siginfo:si_signo=11, si_errno=0, si_code=2, si_addr=0x00022008

Registers:
EAX=0x00022000, EBX=0x75a0fac8, ECX=0x00000000, EDX=0x75b31258
ESP=0x6ea7ded0, EBP=0x6ea7df3c, ESI=0x71b6def5, EDI=0x00000402
EIP=0xf27bf825, CR2=0x00022008, EFLAGS=0x00010217

Top of Stack: (sp=0x6ea7ded0)
0x6ea7ded0:   71549561 6ea7def0 00002000 00000400
0x6ea7dee0:   339dc50d 086e0088 6ea7df3c 6ea7df50
0x6ea7def0:   00000000 71b6def5 7154d7c9 f2595a80
0x6ea7df00:   6ea7df3c 6ea7df50 7154d7d8 6ea7df14
0x6ea7df10:   6ea7df3c f2501a14 00002000 e57bd350
0x6ea7df20:   6ea7df20 71b6def5 6ea7df50 71b71798
0x6ea7df30:   00000000 71b6df80 6ea7df44 6ea7df78
0x6ea7df40:   f2501aeb 719431e8 00002000 e57bd2d0 

Instructions: (pc=0xf27bf825)
0xf27bf815:   8b 98 a4 00 00 00 8b 4b 20 89 4c 24 20 8b 41 08
0xf27bf825:   8b 70 08 8b de 4b 8b 4c 24 10 23 cb 89 4c 24 10 

Stack: [0x6e9fe000,0x6ea7f000),  sp=0x6ea7ded0,  free space=511k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
J  org.mortbay.util.ByteArrayPool.getByteArray(I)[B
j  org.mortbay.http.HttpInputStream.<init>(Ljava/io/InputStream;I)V+15
j  org.mortbay.http.HttpConnection.<init>(Lorg/mortbay/http/HttpListener;Ljava/net/InetAddress;Ljava/io/InputStream;Ljava/io/OutputStream;Ljava/lang/Object;)V+97
j  org.mortbay.http.SocketListener.createConnection(Ljava/net/Socket;)Lorg/mortbay/http/HttpConnection;+18
j  org.mortbay.http.SocketListener.handleConnection(Ljava/net/Socket;)V+2
j  org.mortbay.util.ThreadedServer.handle(Ljava/lang/Object;)V+19


---------------  P R O C E S S  ---------------

Java Threads: ( => current thread )
  0x086bb8a0 JavaThread "Thread-0" [_thread_blocked, id=24117]
  0x0859dd38 JavaThread "Thread-20" [_thread_blocked, id=24116]
  0x0859a8a8 JavaThread "Thread-19" [_thread_blocked, id=24115]
  0x0859a1f8 JavaThread "Thread-18" [_thread_blocked, id=24114]
  0x085d54d8 JavaThread "SocketListener0-1" [_thread_in_native, id=24113]
=>0x086e0088 JavaThread "SocketListener0-0" [_thread_in_Java, id=24112]

[...]

Heap
 PSYoungGen      total 21248K, used 19699K [0xe4640000, 0xe6a00000, 0xf2470000)
  eden space 19584K, 92% used [0xe4640000,0xe57def08,0xe5960000)
  from space 1664K, 99% used [0xe5960000,0xe5afe020,0xe5b00000)
  to   space 8384K, 0% used [0xe61d0000,0xe61d0000,0xe6a00000)
 PSOldGen        total 390080K, used 370693K [0x75470000, 0x8d160000, 0xe4640000)
  object space 390080K, 95% used [0x75470000,0x8be716e0,0x8d160000)
 PSPermGen       total 16384K, used 8080K [0x71470000, 0x72470000, 0x75470000)
  object space 16384K, 49% used [0x71470000,0x71c54298,0x72470000)

[...]

VM Arguments:
jvm_args: -Xmx2000m -Dhadoop.log.dir=/export//current/../run2/log -Dhadoop.log.file=hadoop-crawler-jobtracker-kry1140.log -Dhadoop.home.dir=/export/current -Dhadoop.id.str=crawler -Dhadoop.root.logger=INFO,DRFA
java_command: org.apache.hadoop.mapred.JobTracker
Launcher Type: SUN_STANDARD

Environment Variables:
JAVA_HOME=/export//java/jdk
PATH=/usr/kerberos/bin:/usr/local/bin:/bin:/usr/bin:/usr/X11R6/bin:/export//current/bin
LD_LIBRARY_PATH=/export/crawlspace/kryptonite/java/jdk1.5.0_06/jre/lib/i386/server:/export//java/jdk1.5.0_06/jre/lib/i386:/export//java/jdk1.5.0_06/jre/../lib/i386
SHELL=/bin/tcsh
HOSTTYPE=x86_64-linux
OSTYPE=linux
MACHTYPE=x86_64



  was:
>>From our jobtacker's .out file:

#
# An unexpected error has been detected by HotSpot Virtual Machine:
#
#  SIGSEGV (0xb) at pc=0xf27bf825, pid=24028, tid=1856498608
#
# Java VM: Java HotSpot(TM) Server VM (1.5.0_06-b05 mixed mode)
# Problematic frame:
# J  org.mortbay.util.ByteArrayPool.getByteArray(I)[B
#
# An error report file with more information is saved as hs_err_pid24028.log
#
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
#

And the relevant parts of that hs_err_pid24028.log file:

#
# An unexpected error has been detected by HotSpot Virtual Machine:
#
#  SIGSEGV (0xb) at pc=0xf27bf825, pid=24028, tid=1856498608
#
# Java VM: Java HotSpot(TM) Server VM (1.5.0_06-b05 mixed mode)
# Problematic frame:
# J  org.mortbay.util.ByteArrayPool.getByteArray(I)[B
#

---------------  T H R E A D  ---------------

Current thread (0x086e0088):  JavaThread "SocketListener0-0" [_thread_in_Java, id=24112]

siginfo:si_signo=11, si_errno=0, si_code=2, si_addr=0x00022008

Registers:
EAX=0x00022000, EBX=0x75a0fac8, ECX=0x00000000, EDX=0x75b31258
ESP=0x6ea7ded0, EBP=0x6ea7df3c, ESI=0x71b6def5, EDI=0x00000402
EIP=0xf27bf825, CR2=0x00022008, EFLAGS=0x00010217

Top of Stack: (sp=0x6ea7ded0)
0x6ea7ded0:   71549561 6ea7def0 00002000 00000400
0x6ea7dee0:   339dc50d 086e0088 6ea7df3c 6ea7df50
0x6ea7def0:   00000000 71b6def5 7154d7c9 f2595a80
0x6ea7df00:   6ea7df3c 6ea7df50 7154d7d8 6ea7df14
0x6ea7df10:   6ea7df3c f2501a14 00002000 e57bd350
0x6ea7df20:   6ea7df20 71b6def5 6ea7df50 71b71798
0x6ea7df30:   00000000 71b6df80 6ea7df44 6ea7df78
0x6ea7df40:   f2501aeb 719431e8 00002000 e57bd2d0 

Instructions: (pc=0xf27bf825)
0xf27bf815:   8b 98 a4 00 00 00 8b 4b 20 89 4c 24 20 8b 41 08
0xf27bf825:   8b 70 08 8b de 4b 8b 4c 24 10 23 cb 89 4c 24 10 

Stack: [0x6e9fe000,0x6ea7f000),  sp=0x6ea7ded0,  free space=511k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
J  org.mortbay.util.ByteArrayPool.getByteArray(I)[B
j  org.mortbay.http.HttpInputStream.<init>(Ljava/io/InputStream;I)V+15
j  org.mortbay.http.HttpConnection.<init>(Lorg/mortbay/http/HttpListener;Ljava/net/InetAddress;Ljava/io/InputStream;Ljava/io/OutputStream;Ljava/lang/Object;)V+97
j  org.mortbay.http.SocketListener.createConnection(Ljava/net/Socket;)Lorg/mortbay/http/HttpConnection;+18
j  org.mortbay.http.SocketListener.handleConnection(Ljava/net/Socket;)V+2
j  org.mortbay.util.ThreadedServer.handle(Ljava/lang/Object;)V+19


---------------  P R O C E S S  ---------------

Java Threads: ( => current thread )
  0x086bb8a0 JavaThread "Thread-0" [_thread_blocked, id=24117]
  0x0859dd38 JavaThread "Thread-20" [_thread_blocked, id=24116]
  0x0859a8a8 JavaThread "Thread-19" [_thread_blocked, id=24115]
  0x0859a1f8 JavaThread "Thread-18" [_thread_blocked, id=24114]
  0x085d54d8 JavaThread "SocketListener0-1" [_thread_in_native, id=24113]
=>0x086e0088 JavaThread "SocketListener0-0" [_thread_in_Java, id=24112]

[...]

Heap
 PSYoungGen      total 21248K, used 19699K [0xe4640000, 0xe6a00000, 0xf2470000)
  eden space 19584K, 92% used [0xe4640000,0xe57def08,0xe5960000)
  from space 1664K, 99% used [0xe5960000,0xe5afe020,0xe5b00000)
  to   space 8384K, 0% used [0xe61d0000,0xe61d0000,0xe6a00000)
 PSOldGen        total 390080K, used 370693K [0x75470000, 0x8d160000, 0xe4640000)
  object space 390080K, 95% used [0x75470000,0x8be716e0,0x8d160000)
 PSPermGen       total 16384K, used 8080K [0x71470000, 0x72470000, 0x75470000)
  object space 16384K, 49% used [0x71470000,0x71c54298,0x72470000)

[...]

VM Arguments:
jvm_args: -Xmx2000m -Dhadoop.log.dir=/export/crawlspace/kryptonite/hadoop/current/../run2/log -Dhadoop.log.file=hadoop-crawler-jobtracker-kry1140.log -Dhadoop.home.dir=/export
/crawlspace/kryptonite/hadoop/current -Dhadoop.id.str=crawler -Dhadoop.root.logger=INFO,DRFA
java_command: org.apache.hadoop.mapred.JobTracker
Launcher Type: SUN_STANDARD

Environment Variables:
JAVA_HOME=/export/crawlspace/kryptonite/java/jdk
PATH=/usr/kerberos/bin:/usr/local/bin:/bin:/usr/bin:/usr/X11R6/bin:/export/crawlspace/kryptonite/hadoop/current/bin
LD_LIBRARY_PATH=/export/crawlspace/kryptonite/java/jdk1.5.0_06/jre/lib/i386/server:/export/crawlspace/kryptonite/java/jdk1.5.0_06/jre/lib/i386:/export/crawlspace/kryptonite/ja
va/jdk1.5.0_06/jre/../lib/i386
SHELL=/bin/tcsh
HOSTTYPE=x86_64-linux
OSTYPE=linux
MACHTYPE=x86_64




> JobTracker crashes Sun JVM
> --------------------------
>
>                 Key: HADOOP-401
>                 URL: http://issues.apache.org/jira/browse/HADOOP-401
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.4.0
>         Environment: OS:Red Hat Enterprise Linux AS release 4 (Nahant Update 2)
> uname:Linux 2.6.9-22.12.y1-64 #5 SMP Fri Nov 4 13:39:56 PST 2005 x86_64
> libc:glibc 2.3.4 NPTL 2.3.4 
> rlimit: STACK 10240k, CORE 0k, NPROC 32768, NOFILE 32768, AS infinity
> load average:0.20 0.21 0.18
> CPU:total 4 family 47, cmov, cx8, fxsr, mmx, sse, sse2, ht
> Memory: 4k page, physical 988k(220k free), swap 3070k(3070k free)
> vm_info: Java HotSpot(TM) Server VM (1.5.0_06-b05) for linux-x86, built on Nov 10 2005 10:56:33 by java_re with gcc 3.2.1-7a (J2SE release)
>            Reporter: Marco Nicosia
>            Priority: Minor
>
> From our jobtacker's .out file:
> #
> # An unexpected error has been detected by HotSpot Virtual Machine:
> #
> #  SIGSEGV (0xb) at pc=0xf27bf825, pid=24028, tid=1856498608
> #
> # Java VM: Java HotSpot(TM) Server VM (1.5.0_06-b05 mixed mode)
> # Problematic frame:
> # J  org.mortbay.util.ByteArrayPool.getByteArray(I)[B
> #
> # An error report file with more information is saved as hs_err_pid24028.log
> #
> # If you would like to submit a bug report, please visit:
> #   http://java.sun.com/webapps/bugreport/crash.jsp
> #
> And the relevant parts of that hs_err_pid24028.log file:
> #
> # An unexpected error has been detected by HotSpot Virtual Machine:
> #
> #  SIGSEGV (0xb) at pc=0xf27bf825, pid=24028, tid=1856498608
> #
> # Java VM: Java HotSpot(TM) Server VM (1.5.0_06-b05 mixed mode)
> # Problematic frame:
> # J  org.mortbay.util.ByteArrayPool.getByteArray(I)[B
> #
> ---------------  T H R E A D  ---------------
> Current thread (0x086e0088):  JavaThread "SocketListener0-0" [_thread_in_Java, id=24112]
> siginfo:si_signo=11, si_errno=0, si_code=2, si_addr=0x00022008
> Registers:
> EAX=0x00022000, EBX=0x75a0fac8, ECX=0x00000000, EDX=0x75b31258
> ESP=0x6ea7ded0, EBP=0x6ea7df3c, ESI=0x71b6def5, EDI=0x00000402
> EIP=0xf27bf825, CR2=0x00022008, EFLAGS=0x00010217
> Top of Stack: (sp=0x6ea7ded0)
> 0x6ea7ded0:   71549561 6ea7def0 00002000 00000400
> 0x6ea7dee0:   339dc50d 086e0088 6ea7df3c 6ea7df50
> 0x6ea7def0:   00000000 71b6def5 7154d7c9 f2595a80
> 0x6ea7df00:   6ea7df3c 6ea7df50 7154d7d8 6ea7df14
> 0x6ea7df10:   6ea7df3c f2501a14 00002000 e57bd350
> 0x6ea7df20:   6ea7df20 71b6def5 6ea7df50 71b71798
> 0x6ea7df30:   00000000 71b6df80 6ea7df44 6ea7df78
> 0x6ea7df40:   f2501aeb 719431e8 00002000 e57bd2d0 
> Instructions: (pc=0xf27bf825)
> 0xf27bf815:   8b 98 a4 00 00 00 8b 4b 20 89 4c 24 20 8b 41 08
> 0xf27bf825:   8b 70 08 8b de 4b 8b 4c 24 10 23 cb 89 4c 24 10 
> Stack: [0x6e9fe000,0x6ea7f000),  sp=0x6ea7ded0,  free space=511k
> Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
> J  org.mortbay.util.ByteArrayPool.getByteArray(I)[B
> j  org.mortbay.http.HttpInputStream.<init>(Ljava/io/InputStream;I)V+15
> j  org.mortbay.http.HttpConnection.<init>(Lorg/mortbay/http/HttpListener;Ljava/net/InetAddress;Ljava/io/InputStream;Ljava/io/OutputStream;Ljava/lang/Object;)V+97
> j  org.mortbay.http.SocketListener.createConnection(Ljava/net/Socket;)Lorg/mortbay/http/HttpConnection;+18
> j  org.mortbay.http.SocketListener.handleConnection(Ljava/net/Socket;)V+2
> j  org.mortbay.util.ThreadedServer.handle(Ljava/lang/Object;)V+19
> ---------------  P R O C E S S  ---------------
> Java Threads: ( => current thread )
>   0x086bb8a0 JavaThread "Thread-0" [_thread_blocked, id=24117]
>   0x0859dd38 JavaThread "Thread-20" [_thread_blocked, id=24116]
>   0x0859a8a8 JavaThread "Thread-19" [_thread_blocked, id=24115]
>   0x0859a1f8 JavaThread "Thread-18" [_thread_blocked, id=24114]
>   0x085d54d8 JavaThread "SocketListener0-1" [_thread_in_native, id=24113]
> =>0x086e0088 JavaThread "SocketListener0-0" [_thread_in_Java, id=24112]
> [...]
> Heap
>  PSYoungGen      total 21248K, used 19699K [0xe4640000, 0xe6a00000, 0xf2470000)
>   eden space 19584K, 92% used [0xe4640000,0xe57def08,0xe5960000)
>   from space 1664K, 99% used [0xe5960000,0xe5afe020,0xe5b00000)
>   to   space 8384K, 0% used [0xe61d0000,0xe61d0000,0xe6a00000)
>  PSOldGen        total 390080K, used 370693K [0x75470000, 0x8d160000, 0xe4640000)
>   object space 390080K, 95% used [0x75470000,0x8be716e0,0x8d160000)
>  PSPermGen       total 16384K, used 8080K [0x71470000, 0x72470000, 0x75470000)
>   object space 16384K, 49% used [0x71470000,0x71c54298,0x72470000)
> [...]
> VM Arguments:
> jvm_args: -Xmx2000m -Dhadoop.log.dir=/export//current/../run2/log -Dhadoop.log.file=hadoop-crawler-jobtracker-kry1140.log -Dhadoop.home.dir=/export/current -Dhadoop.id.str=crawler -Dhadoop.root.logger=INFO,DRFA
> java_command: org.apache.hadoop.mapred.JobTracker
> Launcher Type: SUN_STANDARD
> Environment Variables:
> JAVA_HOME=/export//java/jdk
> PATH=/usr/kerberos/bin:/usr/local/bin:/bin:/usr/bin:/usr/X11R6/bin:/export//current/bin
> LD_LIBRARY_PATH=/export/crawlspace/kryptonite/java/jdk1.5.0_06/jre/lib/i386/server:/export//java/jdk1.5.0_06/jre/lib/i386:/export//java/jdk1.5.0_06/jre/../lib/i386
> SHELL=/bin/tcsh
> HOSTTYPE=x86_64-linux
> OSTYPE=linux
> MACHTYPE=x86_64

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 28 23:25:46 2006
Return-Path: 
 <hadoop-dev-return-2827-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 47283 invoked from network); 28 Jul 2006 23:25:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2006 23:25:46 -0000
Received: (qmail 52458 invoked by uid 500); 28 Jul 2006 23:25:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 52425 invoked by uid 500); 28 Jul 2006 23:25:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 52415 invoked by uid 99); 28 Jul 2006 23:25:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 16:25:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 16:25:45 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 942C741000A
	for <hadoop-dev@lucene.apache.org>; Fri, 28 Jul 2006 23:23:19 +0000 (GMT)
Message-ID: <28884311.1154128999604.JavaMail.jira@brutus>
Date: Fri, 28 Jul 2006 16:23:19 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-401) JobTracker crashes Sun JVM
In-Reply-To: <19999404.1154127860513.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-401?page=all ]

Yoram Arnon updated HADOOP-401:
-------------------------------

    Description: 
>>From our jobtacker's .out file:

#
# An unexpected error has been detected by HotSpot Virtual Machine:
#
#  SIGSEGV (0xb) at pc=0xf27bf825, pid=24028, tid=1856498608
#
# Java VM: Java HotSpot(TM) Server VM (1.5.0_06-b05 mixed mode)
# Problematic frame:
# J  org.mortbay.util.ByteArrayPool.getByteArray(I)[B
#
# An error report file with more information is saved as hs_err_pid24028.log
#
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
#

And the relevant parts of that hs_err_pid24028.log file:

#
# An unexpected error has been detected by HotSpot Virtual Machine:
#
#  SIGSEGV (0xb) at pc=0xf27bf825, pid=24028, tid=1856498608
#
# Java VM: Java HotSpot(TM) Server VM (1.5.0_06-b05 mixed mode)
# Problematic frame:
# J  org.mortbay.util.ByteArrayPool.getByteArray(I)[B
#

---------------  T H R E A D  ---------------

Current thread (0x086e0088):  JavaThread "SocketListener0-0" [_thread_in_Java, id=24112]

siginfo:si_signo=11, si_errno=0, si_code=2, si_addr=0x00022008

Registers:
EAX=0x00022000, EBX=0x75a0fac8, ECX=0x00000000, EDX=0x75b31258
ESP=0x6ea7ded0, EBP=0x6ea7df3c, ESI=0x71b6def5, EDI=0x00000402
EIP=0xf27bf825, CR2=0x00022008, EFLAGS=0x00010217

Top of Stack: (sp=0x6ea7ded0)
0x6ea7ded0:   71549561 6ea7def0 00002000 00000400
0x6ea7dee0:   339dc50d 086e0088 6ea7df3c 6ea7df50
0x6ea7def0:   00000000 71b6def5 7154d7c9 f2595a80
0x6ea7df00:   6ea7df3c 6ea7df50 7154d7d8 6ea7df14
0x6ea7df10:   6ea7df3c f2501a14 00002000 e57bd350
0x6ea7df20:   6ea7df20 71b6def5 6ea7df50 71b71798
0x6ea7df30:   00000000 71b6df80 6ea7df44 6ea7df78
0x6ea7df40:   f2501aeb 719431e8 00002000 e57bd2d0 

Instructions: (pc=0xf27bf825)
0xf27bf815:   8b 98 a4 00 00 00 8b 4b 20 89 4c 24 20 8b 41 08
0xf27bf825:   8b 70 08 8b de 4b 8b 4c 24 10 23 cb 89 4c 24 10 

Stack: [0x6e9fe000,0x6ea7f000),  sp=0x6ea7ded0,  free space=511k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
J  org.mortbay.util.ByteArrayPool.getByteArray(I)[B
j  org.mortbay.http.HttpInputStream.<init>(Ljava/io/InputStream;I)V+15
j  org.mortbay.http.HttpConnection.<init>(Lorg/mortbay/http/HttpListener;Ljava/net/InetAddress;Ljava/io/InputStream;Ljava/io/OutputStream;Ljava/lang/Object;)V+97
j  org.mortbay.http.SocketListener.createConnection(Ljava/net/Socket;)Lorg/mortbay/http/HttpConnection;+18
j  org.mortbay.http.SocketListener.handleConnection(Ljava/net/Socket;)V+2
j  org.mortbay.util.ThreadedServer.handle(Ljava/lang/Object;)V+19


---------------  P R O C E S S  ---------------

Java Threads: ( => current thread )
  0x086bb8a0 JavaThread "Thread-0" [_thread_blocked, id=24117]
  0x0859dd38 JavaThread "Thread-20" [_thread_blocked, id=24116]
  0x0859a8a8 JavaThread "Thread-19" [_thread_blocked, id=24115]
  0x0859a1f8 JavaThread "Thread-18" [_thread_blocked, id=24114]
  0x085d54d8 JavaThread "SocketListener0-1" [_thread_in_native, id=24113]
=>0x086e0088 JavaThread "SocketListener0-0" [_thread_in_Java, id=24112]

[...]

Heap
 PSYoungGen      total 21248K, used 19699K [0xe4640000, 0xe6a00000, 0xf2470000)
  eden space 19584K, 92% used [0xe4640000,0xe57def08,0xe5960000)
  from space 1664K, 99% used [0xe5960000,0xe5afe020,0xe5b00000)
  to   space 8384K, 0% used [0xe61d0000,0xe61d0000,0xe6a00000)
 PSOldGen        total 390080K, used 370693K [0x75470000, 0x8d160000, 0xe4640000)
  object space 390080K, 95% used [0x75470000,0x8be716e0,0x8d160000)
 PSPermGen       total 16384K, used 8080K [0x71470000, 0x72470000, 0x75470000)
  object space 16384K, 49% used [0x71470000,0x71c54298,0x72470000)

[...]

VM Arguments:
jvm_args: -Xmx2000m -Dhadoop.log.dir=/export//current/../run2/log -Dhadoop.log.file=hadoop-jobtracker.log -Dhadoop.home.dir=/export/current -Dhadoop.id.str=crawler -Dhadoop.root.logger=INFO,DRFA
java_command: org.apache.hadoop.mapred.JobTracker
Launcher Type: SUN_STANDARD

Environment Variables:
JAVA_HOME=/export//java/jdk
PATH=/usr/kerberos/bin:/usr/local/bin:/bin:/usr/bin:/usr/X11R6/bin:/export//current/bin
LD_LIBRARY_PATH=/export/java/jdk1.5.0_06/jre/lib/i386/server:/export//java/jdk1.5.0_06/jre/lib/i386:/export//java/jdk1.5.0_06/jre/../lib/i386
SHELL=/bin/tcsh
HOSTTYPE=x86_64-linux
OSTYPE=linux
MACHTYPE=x86_64


  was:
>>From our jobtacker's .out file:

#
# An unexpected error has been detected by HotSpot Virtual Machine:
#
#  SIGSEGV (0xb) at pc=0xf27bf825, pid=24028, tid=1856498608
#
# Java VM: Java HotSpot(TM) Server VM (1.5.0_06-b05 mixed mode)
# Problematic frame:
# J  org.mortbay.util.ByteArrayPool.getByteArray(I)[B
#
# An error report file with more information is saved as hs_err_pid24028.log
#
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
#

And the relevant parts of that hs_err_pid24028.log file:

#
# An unexpected error has been detected by HotSpot Virtual Machine:
#
#  SIGSEGV (0xb) at pc=0xf27bf825, pid=24028, tid=1856498608
#
# Java VM: Java HotSpot(TM) Server VM (1.5.0_06-b05 mixed mode)
# Problematic frame:
# J  org.mortbay.util.ByteArrayPool.getByteArray(I)[B
#

---------------  T H R E A D  ---------------

Current thread (0x086e0088):  JavaThread "SocketListener0-0" [_thread_in_Java, id=24112]

siginfo:si_signo=11, si_errno=0, si_code=2, si_addr=0x00022008

Registers:
EAX=0x00022000, EBX=0x75a0fac8, ECX=0x00000000, EDX=0x75b31258
ESP=0x6ea7ded0, EBP=0x6ea7df3c, ESI=0x71b6def5, EDI=0x00000402
EIP=0xf27bf825, CR2=0x00022008, EFLAGS=0x00010217

Top of Stack: (sp=0x6ea7ded0)
0x6ea7ded0:   71549561 6ea7def0 00002000 00000400
0x6ea7dee0:   339dc50d 086e0088 6ea7df3c 6ea7df50
0x6ea7def0:   00000000 71b6def5 7154d7c9 f2595a80
0x6ea7df00:   6ea7df3c 6ea7df50 7154d7d8 6ea7df14
0x6ea7df10:   6ea7df3c f2501a14 00002000 e57bd350
0x6ea7df20:   6ea7df20 71b6def5 6ea7df50 71b71798
0x6ea7df30:   00000000 71b6df80 6ea7df44 6ea7df78
0x6ea7df40:   f2501aeb 719431e8 00002000 e57bd2d0 

Instructions: (pc=0xf27bf825)
0xf27bf815:   8b 98 a4 00 00 00 8b 4b 20 89 4c 24 20 8b 41 08
0xf27bf825:   8b 70 08 8b de 4b 8b 4c 24 10 23 cb 89 4c 24 10 

Stack: [0x6e9fe000,0x6ea7f000),  sp=0x6ea7ded0,  free space=511k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
J  org.mortbay.util.ByteArrayPool.getByteArray(I)[B
j  org.mortbay.http.HttpInputStream.<init>(Ljava/io/InputStream;I)V+15
j  org.mortbay.http.HttpConnection.<init>(Lorg/mortbay/http/HttpListener;Ljava/net/InetAddress;Ljava/io/InputStream;Ljava/io/OutputStream;Ljava/lang/Object;)V+97
j  org.mortbay.http.SocketListener.createConnection(Ljava/net/Socket;)Lorg/mortbay/http/HttpConnection;+18
j  org.mortbay.http.SocketListener.handleConnection(Ljava/net/Socket;)V+2
j  org.mortbay.util.ThreadedServer.handle(Ljava/lang/Object;)V+19


---------------  P R O C E S S  ---------------

Java Threads: ( => current thread )
  0x086bb8a0 JavaThread "Thread-0" [_thread_blocked, id=24117]
  0x0859dd38 JavaThread "Thread-20" [_thread_blocked, id=24116]
  0x0859a8a8 JavaThread "Thread-19" [_thread_blocked, id=24115]
  0x0859a1f8 JavaThread "Thread-18" [_thread_blocked, id=24114]
  0x085d54d8 JavaThread "SocketListener0-1" [_thread_in_native, id=24113]
=>0x086e0088 JavaThread "SocketListener0-0" [_thread_in_Java, id=24112]

[...]

Heap
 PSYoungGen      total 21248K, used 19699K [0xe4640000, 0xe6a00000, 0xf2470000)
  eden space 19584K, 92% used [0xe4640000,0xe57def08,0xe5960000)
  from space 1664K, 99% used [0xe5960000,0xe5afe020,0xe5b00000)
  to   space 8384K, 0% used [0xe61d0000,0xe61d0000,0xe6a00000)
 PSOldGen        total 390080K, used 370693K [0x75470000, 0x8d160000, 0xe4640000)
  object space 390080K, 95% used [0x75470000,0x8be716e0,0x8d160000)
 PSPermGen       total 16384K, used 8080K [0x71470000, 0x72470000, 0x75470000)
  object space 16384K, 49% used [0x71470000,0x71c54298,0x72470000)

[...]

VM Arguments:
jvm_args: -Xmx2000m -Dhadoop.log.dir=/export//current/../run2/log -Dhadoop.log.file=hadoop-crawler-jobtracker-kry1140.log -Dhadoop.home.dir=/export/current -Dhadoop.id.str=crawler -Dhadoop.root.logger=INFO,DRFA
java_command: org.apache.hadoop.mapred.JobTracker
Launcher Type: SUN_STANDARD

Environment Variables:
JAVA_HOME=/export//java/jdk
PATH=/usr/kerberos/bin:/usr/local/bin:/bin:/usr/bin:/usr/X11R6/bin:/export//current/bin
LD_LIBRARY_PATH=/export/crawlspace/kryptonite/java/jdk1.5.0_06/jre/lib/i386/server:/export//java/jdk1.5.0_06/jre/lib/i386:/export//java/jdk1.5.0_06/jre/../lib/i386
SHELL=/bin/tcsh
HOSTTYPE=x86_64-linux
OSTYPE=linux
MACHTYPE=x86_64




> JobTracker crashes Sun JVM
> --------------------------
>
>                 Key: HADOOP-401
>                 URL: http://issues.apache.org/jira/browse/HADOOP-401
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.4.0
>         Environment: OS:Red Hat Enterprise Linux AS release 4 (Nahant Update 2)
> uname:Linux 2.6.9-22.12.y1-64 #5 SMP Fri Nov 4 13:39:56 PST 2005 x86_64
> libc:glibc 2.3.4 NPTL 2.3.4 
> rlimit: STACK 10240k, CORE 0k, NPROC 32768, NOFILE 32768, AS infinity
> load average:0.20 0.21 0.18
> CPU:total 4 family 47, cmov, cx8, fxsr, mmx, sse, sse2, ht
> Memory: 4k page, physical 988k(220k free), swap 3070k(3070k free)
> vm_info: Java HotSpot(TM) Server VM (1.5.0_06-b05) for linux-x86, built on Nov 10 2005 10:56:33 by java_re with gcc 3.2.1-7a (J2SE release)
>            Reporter: Marco Nicosia
>            Priority: Minor
>
> From our jobtacker's .out file:
> #
> # An unexpected error has been detected by HotSpot Virtual Machine:
> #
> #  SIGSEGV (0xb) at pc=0xf27bf825, pid=24028, tid=1856498608
> #
> # Java VM: Java HotSpot(TM) Server VM (1.5.0_06-b05 mixed mode)
> # Problematic frame:
> # J  org.mortbay.util.ByteArrayPool.getByteArray(I)[B
> #
> # An error report file with more information is saved as hs_err_pid24028.log
> #
> # If you would like to submit a bug report, please visit:
> #   http://java.sun.com/webapps/bugreport/crash.jsp
> #
> And the relevant parts of that hs_err_pid24028.log file:
> #
> # An unexpected error has been detected by HotSpot Virtual Machine:
> #
> #  SIGSEGV (0xb) at pc=0xf27bf825, pid=24028, tid=1856498608
> #
> # Java VM: Java HotSpot(TM) Server VM (1.5.0_06-b05 mixed mode)
> # Problematic frame:
> # J  org.mortbay.util.ByteArrayPool.getByteArray(I)[B
> #
> ---------------  T H R E A D  ---------------
> Current thread (0x086e0088):  JavaThread "SocketListener0-0" [_thread_in_Java, id=24112]
> siginfo:si_signo=11, si_errno=0, si_code=2, si_addr=0x00022008
> Registers:
> EAX=0x00022000, EBX=0x75a0fac8, ECX=0x00000000, EDX=0x75b31258
> ESP=0x6ea7ded0, EBP=0x6ea7df3c, ESI=0x71b6def5, EDI=0x00000402
> EIP=0xf27bf825, CR2=0x00022008, EFLAGS=0x00010217
> Top of Stack: (sp=0x6ea7ded0)
> 0x6ea7ded0:   71549561 6ea7def0 00002000 00000400
> 0x6ea7dee0:   339dc50d 086e0088 6ea7df3c 6ea7df50
> 0x6ea7def0:   00000000 71b6def5 7154d7c9 f2595a80
> 0x6ea7df00:   6ea7df3c 6ea7df50 7154d7d8 6ea7df14
> 0x6ea7df10:   6ea7df3c f2501a14 00002000 e57bd350
> 0x6ea7df20:   6ea7df20 71b6def5 6ea7df50 71b71798
> 0x6ea7df30:   00000000 71b6df80 6ea7df44 6ea7df78
> 0x6ea7df40:   f2501aeb 719431e8 00002000 e57bd2d0 
> Instructions: (pc=0xf27bf825)
> 0xf27bf815:   8b 98 a4 00 00 00 8b 4b 20 89 4c 24 20 8b 41 08
> 0xf27bf825:   8b 70 08 8b de 4b 8b 4c 24 10 23 cb 89 4c 24 10 
> Stack: [0x6e9fe000,0x6ea7f000),  sp=0x6ea7ded0,  free space=511k
> Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
> J  org.mortbay.util.ByteArrayPool.getByteArray(I)[B
> j  org.mortbay.http.HttpInputStream.<init>(Ljava/io/InputStream;I)V+15
> j  org.mortbay.http.HttpConnection.<init>(Lorg/mortbay/http/HttpListener;Ljava/net/InetAddress;Ljava/io/InputStream;Ljava/io/OutputStream;Ljava/lang/Object;)V+97
> j  org.mortbay.http.SocketListener.createConnection(Ljava/net/Socket;)Lorg/mortbay/http/HttpConnection;+18
> j  org.mortbay.http.SocketListener.handleConnection(Ljava/net/Socket;)V+2
> j  org.mortbay.util.ThreadedServer.handle(Ljava/lang/Object;)V+19
> ---------------  P R O C E S S  ---------------
> Java Threads: ( => current thread )
>   0x086bb8a0 JavaThread "Thread-0" [_thread_blocked, id=24117]
>   0x0859dd38 JavaThread "Thread-20" [_thread_blocked, id=24116]
>   0x0859a8a8 JavaThread "Thread-19" [_thread_blocked, id=24115]
>   0x0859a1f8 JavaThread "Thread-18" [_thread_blocked, id=24114]
>   0x085d54d8 JavaThread "SocketListener0-1" [_thread_in_native, id=24113]
> =>0x086e0088 JavaThread "SocketListener0-0" [_thread_in_Java, id=24112]
> [...]
> Heap
>  PSYoungGen      total 21248K, used 19699K [0xe4640000, 0xe6a00000, 0xf2470000)
>   eden space 19584K, 92% used [0xe4640000,0xe57def08,0xe5960000)
>   from space 1664K, 99% used [0xe5960000,0xe5afe020,0xe5b00000)
>   to   space 8384K, 0% used [0xe61d0000,0xe61d0000,0xe6a00000)
>  PSOldGen        total 390080K, used 370693K [0x75470000, 0x8d160000, 0xe4640000)
>   object space 390080K, 95% used [0x75470000,0x8be716e0,0x8d160000)
>  PSPermGen       total 16384K, used 8080K [0x71470000, 0x72470000, 0x75470000)
>   object space 16384K, 49% used [0x71470000,0x71c54298,0x72470000)
> [...]
> VM Arguments:
> jvm_args: -Xmx2000m -Dhadoop.log.dir=/export//current/../run2/log -Dhadoop.log.file=hadoop-jobtracker.log -Dhadoop.home.dir=/export/current -Dhadoop.id.str=crawler -Dhadoop.root.logger=INFO,DRFA
> java_command: org.apache.hadoop.mapred.JobTracker
> Launcher Type: SUN_STANDARD
> Environment Variables:
> JAVA_HOME=/export//java/jdk
> PATH=/usr/kerberos/bin:/usr/local/bin:/bin:/usr/bin:/usr/X11R6/bin:/export//current/bin
> LD_LIBRARY_PATH=/export/java/jdk1.5.0_06/jre/lib/i386/server:/export//java/jdk1.5.0_06/jre/lib/i386:/export//java/jdk1.5.0_06/jre/../lib/i386
> SHELL=/bin/tcsh
> HOSTTYPE=x86_64-linux
> OSTYPE=linux
> MACHTYPE=x86_64

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 28 23:33:48 2006
Return-Path: 
 <hadoop-dev-return-2828-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 49144 invoked from network); 28 Jul 2006 23:33:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2006 23:33:48 -0000
Received: (qmail 65060 invoked by uid 500); 28 Jul 2006 23:33:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 65039 invoked by uid 500); 28 Jul 2006 23:33:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 65023 invoked by uid 99); 28 Jul 2006 23:33:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 16:33:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 16:33:46 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 35BC041000A
	for <hadoop-dev@lucene.apache.org>; Fri, 28 Jul 2006 23:31:21 +0000 (GMT)
Message-ID: <7098390.1154129481217.JavaMail.jira@brutus>
Date: Fri, 28 Jul 2006 16:31:21 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-396) Writable DatanodeID
In-Reply-To: <22464813.1154061496799.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-396?page=all ]

Konstantin Shvachko updated HADOOP-396:
---------------------------------------

    Attachment: DatanodeID2.patch

Yes, thank you Devaraj, I missed that.
I updated my patch to incorporate changes to the DatanodeID and derived classes
addressed by both issues HADOOP-395 and HADOOP-396.
In addition to what was said in these issues DatanodeID2.patch
- makes DatanodeRegistration call super.readFields/write for the Writable methods
- simplifies constructors
- removes redundant DataNode.infoPort, since DataNode.dnRegistration already contains it.
- upgrades ipc version for DatanodeProtocol and ClientProtocol, since protocol structures are affected by infoPort member.


> Writable DatanodeID
> -------------------
>
>                 Key: HADOOP-396
>                 URL: http://issues.apache.org/jira/browse/HADOOP-396
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.5.0
>
>         Attachments: DatanodeID.patch, DatanodeID2.patch
>
>
> This patch implements Owen's comments to HADOOP-321. Namely,
> - Namenode.sendHeartbeat does not create a throwaway DatanodeDescriptor. DatanodeID is sufficient in this case.
> - DatanodeID is made Writable, and it also implements equals() and hashCode().
> - DatanodeInfo is updated to call base class methods in its implementation of Writable interface.
> - I changed the way strings are written/read using UTF8.writeString and UTF8.readString.
> - Some comments are updated.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Jul 28 23:59:41 2006
Return-Path: 
 <hadoop-dev-return-2829-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 53799 invoked from network); 28 Jul 2006 23:59:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2006 23:59:41 -0000
Received: (qmail 93729 invoked by uid 500); 28 Jul 2006 23:59:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 93568 invoked by uid 500); 28 Jul 2006 23:59:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 93559 invoked by uid 99); 28 Jul 2006 23:59:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 16:59:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 16:59:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2FA7841000C
	for <hadoop-dev@lucene.apache.org>; Fri, 28 Jul 2006 23:57:15 +0000 (GMT)
Message-ID: <13440576.1154131035191.JavaMail.jira@brutus>
Date: Fri, 28 Jul 2006 16:57:15 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-402) TaskTracker should shutdown when it
 receives the VersionMismatch exception.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

TaskTracker should shutdown when it receives the VersionMismatch exception.
---------------------------------------------------------------------------

                 Key: HADOOP-402
                 URL: http://issues.apache.org/jira/browse/HADOOP-402
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.4.0
            Reporter: Konstantin Shvachko
             Fix For: 0.5.0


Like Datanodes TaskTracker should shutdown when it receives the VersionMismatch exception rather than
infinitely retrying to re-connect. The result will be the same.


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 31 03:32:46 2006
Return-Path: 
 <hadoop-dev-return-2830-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 60619 invoked from network); 31 Jul 2006 03:32:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2006 03:32:46 -0000
Received: (qmail 78970 invoked by uid 500); 31 Jul 2006 03:32:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 78947 invoked by uid 500); 31 Jul 2006 03:32:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 78938 invoked by uid 99); 31 Jul 2006 03:32:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Jul 2006 20:32:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Jul 2006 20:32:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BFD3541000B
	for <hadoop-dev@lucene.apache.org>; Mon, 31 Jul 2006 03:30:15 +0000 (GMT)
Message-ID: <15331179.1154316615783.JavaMail.jira@brutus>
Date: Sun, 30 Jul 2006 20:30:15 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-54?page=comments#action_12424470 ] 
            
Arun C Murthy commented on HADOOP-54:
-------------------------------------

Addendum:

I spoke to Owen to confirm that it makes sense to implement 'lazy decompression' of 'values' in block compressed files i.e. a series of calls to:
SequenceFile.Reader.next(Writable key)
will not decompress 'value' blocks until a call to either
SequenceFile.Reader.next(Writable key, Writable val) or
SequenceFile.Reader.getCurrentValue(Writable val)  {explained below}

Going along the same trajectory it makes sense to add a 'getCurrentValue' api to the Reader, enabling the user to look at the 'key' and only then decide if he wants to fetch the 'value' (lazy decompression of 'value' holds here too; with associated better performance).

Thoughts?



> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.5.0
>
>         Attachments: VIntCompressionResults.txt
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 31 04:34:48 2006
Return-Path: 
 <hadoop-dev-return-2831-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68515 invoked from network); 31 Jul 2006 04:34:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2006 04:34:48 -0000
Received: (qmail 13845 invoked by uid 500); 31 Jul 2006 04:34:48 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13804 invoked by uid 500); 31 Jul 2006 04:34:48 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13795 invoked by uid 99); 31 Jul 2006 04:34:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Jul 2006 21:34:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Jul 2006 21:34:47 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9BB1A41000A
	for <hadoop-dev@lucene.apache.org>; Mon, 31 Jul 2006 04:32:18 +0000 (GMT)
Message-ID: <12517564.1154320338634.JavaMail.jira@brutus>
Date: Sun, 30 Jul 2006 21:32:18 -0700 (PDT)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-54?page=comments#action_12424473 ] 
            
eric baldeschwieler commented on HADOOP-54:
-------------------------------------------

+1

> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.5.0
>
>         Attachments: VIntCompressionResults.txt
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 31 06:41:45 2006
Return-Path: 
 <hadoop-dev-return-2832-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 95265 invoked from network); 31 Jul 2006 06:41:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2006 06:41:45 -0000
Received: (qmail 51791 invoked by uid 500); 31 Jul 2006 06:41:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 51754 invoked by uid 500); 31 Jul 2006 06:41:44 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 51745 invoked by uid 99); 31 Jul 2006 06:41:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Jul 2006 23:41:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Jul 2006 23:41:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D36F341000A
	for <hadoop-dev@lucene.apache.org>; Mon, 31 Jul 2006 06:39:14 +0000 (GMT)
Message-ID: <14885688.1154327954863.JavaMail.jira@brutus>
Date: Sun, 30 Jul 2006 23:39:14 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-396) Writable DatanodeID
In-Reply-To: <22464813.1154061496799.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-396?page=comments#action_12424485 ] 
            
Devaraj Das commented on HADOOP-396:
------------------------------------

I think you missed removing the lines that stores the infoPort after DatanodeDescriptor is created in gotHeartBeat and registerDatanode from FSNameSystem.java. With your current patch we don't need to explicitly store the infoPort anymore.

> Writable DatanodeID
> -------------------
>
>                 Key: HADOOP-396
>                 URL: http://issues.apache.org/jira/browse/HADOOP-396
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.5.0
>
>         Attachments: DatanodeID.patch, DatanodeID2.patch
>
>
> This patch implements Owen's comments to HADOOP-321. Namely,
> - Namenode.sendHeartbeat does not create a throwaway DatanodeDescriptor. DatanodeID is sufficient in this case.
> - DatanodeID is made Writable, and it also implements equals() and hashCode().
> - DatanodeInfo is updated to call base class methods in its implementation of Writable interface.
> - I changed the way strings are written/read using UTF8.writeString and UTF8.readString.
> - Some comments are updated.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 31 16:15:47 2006
Return-Path: 
 <hadoop-dev-return-2833-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 11598 invoked from network); 31 Jul 2006 16:15:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2006 16:15:47 -0000
Received: (qmail 57553 invoked by uid 500); 31 Jul 2006 16:15:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 57394 invoked by uid 500); 31 Jul 2006 16:15:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 57374 invoked by uid 99); 31 Jul 2006 16:15:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 09:15:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 09:15:45 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D058641000E
	for <hadoop-dev@lucene.apache.org>; Mon, 31 Jul 2006 16:13:15 +0000 (GMT)
Message-ID: <15071137.1154362395850.JavaMail.jira@brutus>
Date: Mon, 31 Jul 2006 09:13:15 -0700 (PDT)
From: "paul sutter (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-54?page=comments#action_12424576 ] 
            
paul sutter commented on HADOOP-54:
-----------------------------------

+1

> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.5.0
>
>         Attachments: VIntCompressionResults.txt
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 31 17:32:50 2006
Return-Path: 
 <hadoop-dev-return-2834-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 47427 invoked from network); 31 Jul 2006 17:32:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2006 17:32:50 -0000
Received: (qmail 43861 invoked by uid 500); 31 Jul 2006 17:32:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 43836 invoked by uid 500); 31 Jul 2006 17:32:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 43827 invoked by uid 99); 31 Jul 2006 17:32:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 10:32:49 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of michael.cafarella@gmail.com
 designates 64.233.162.198 as permitted sender)
Received: from [64.233.162.198] (HELO nz-out-0102.google.com) (64.233.162.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 10:32:48 -0700
Received: by nz-out-0102.google.com with SMTP id 8so205212nzo
        for <hadoop-dev@lucene.apache.org>;
 Mon, 31 Jul 2006 10:32:27 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=WFlLKQf9PLxa9GoeasVlCwOXSizxgq3gW2AvjnQ77OnoUDUA58M9X+MmhHdI1h1uHqK3w8WXNeQbVNPVoLrfab8qM73WP+t35hf4ZCnAJ1zHS28QMN7hOn8KelzWeVah08Dg/5I6xMNuvIZ7zlxAWzUhAH4Z+j7dMCEa0su7cR4=
Received: by 10.65.83.18 with SMTP id k18mr2112167qbl;
        Mon, 31 Jul 2006 10:32:26 -0700 (PDT)
Received: by 10.65.252.12 with HTTP; Mon, 31 Jul 2006 10:32:26 -0700 (PDT)
Message-ID: <8a8b9f3f0607311032n31695cf7ye589f7e18b4974c2@mail.gmail.com>
Date: Mon, 31 Jul 2006 10:32:26 -0700
From: "Michael Cafarella" <michael.cafarella@gmail.com>
To: nutch-dev@lucene.apache.org, nutch-user@lucene.apache.org,
	nutch-general@lucene.apache.org, lucene-dev@lucene.apache.org,
	lucene-general@lucene.apache.org, lucene-user@lucene.apache.org,
	hadoop-dev@lucene.apache.org, hadoop-user@lucene.apache.org
Subject: Seattle, August 9, Lucene/Nutch/Hadoop Meetup
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_Part_19736_26912375.1154367146707"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_19736_26912375.1154367146707
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi everyone,

If you're in Seattle for SIGIR, come to this meeting of FOHLNs (Friends
Of Hadoop, Lucene and Nutch).  We'll talk about search and get something
to eat and drink.

Please RSVP via the Evite below so I can get a bigger venue if necessary.

http://www.evite.com/app/publicUrl/michael.cafarella@gmail.com/*nutchparty
*
It's Wednesday, August 9, at 7:00pm in Seattle.  The place is the BigTime
Brewery, a large (and reasonably priced) local brewery/restaurant.  Their
URL
is http://www.bigtimebrewery.com/

Hope to see you there!
--Mike

*
*

------=_Part_19736_26912375.1154367146707--

From MAILER-DAEMON Mon Jul 31 18:37:50 2006
Return-Path: 
 <hadoop-dev-return-2835-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77098 invoked from network); 31 Jul 2006 18:37:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2006 18:37:50 -0000
Received: (qmail 61298 invoked by uid 500); 31 Jul 2006 18:37:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 61258 invoked by uid 500); 31 Jul 2006 18:37:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 61227 invoked by uid 99); 31 Jul 2006 18:37:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 11:37:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 11:37:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D377E410009
	for <hadoop-dev@lucene.apache.org>; Mon, 31 Jul 2006 18:35:14 +0000 (GMT)
Message-ID: <23170742.1154370914863.JavaMail.jira@brutus>
Date: Mon, 31 Jul 2006 11:35:14 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-396) Writable DatanodeID
In-Reply-To: <22464813.1154061496799.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-396?page=all ]

Konstantin Shvachko updated HADOOP-396:
---------------------------------------

    Attachment: DatanodeID3.patch

I removed the two lines mentioned by Devaraj.

> Writable DatanodeID
> -------------------
>
>                 Key: HADOOP-396
>                 URL: http://issues.apache.org/jira/browse/HADOOP-396
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.5.0
>
>         Attachments: DatanodeID.patch, DatanodeID2.patch, DatanodeID3.patch
>
>
> This patch implements Owen's comments to HADOOP-321. Namely,
> - Namenode.sendHeartbeat does not create a throwaway DatanodeDescriptor. DatanodeID is sufficient in this case.
> - DatanodeID is made Writable, and it also implements equals() and hashCode().
> - DatanodeInfo is updated to call base class methods in its implementation of Writable interface.
> - I changed the way strings are written/read using UTF8.writeString and UTF8.readString.
> - Some comments are updated.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 31 19:31:47 2006
Return-Path: 
 <hadoop-dev-return-2836-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 6814 invoked from network); 31 Jul 2006 19:31:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2006 19:31:47 -0000
Received: (qmail 94565 invoked by uid 500); 31 Jul 2006 19:31:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94537 invoked by uid 500); 31 Jul 2006 19:31:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94528 invoked by uid 99); 31 Jul 2006 19:31:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 12:31:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 12:31:45 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 04C8F410009
	for <hadoop-dev@lucene.apache.org>; Mon, 31 Jul 2006 19:29:16 +0000 (GMT)
Message-ID: <27142493.1154374156017.JavaMail.jira@brutus>
Date: Mon, 31 Jul 2006 12:29:16 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-54?page=comments#action_12424620 ] 
            
Doug Cutting commented on HADOOP-54:
------------------------------------

+1

> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.5.0
>
>         Attachments: VIntCompressionResults.txt
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 31 19:45:47 2006
Return-Path: 
 <hadoop-dev-return-2837-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10357 invoked from network); 31 Jul 2006 19:45:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2006 19:45:47 -0000
Received: (qmail 22205 invoked by uid 500); 31 Jul 2006 19:45:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 22180 invoked by uid 500); 31 Jul 2006 19:45:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22171 invoked by uid 99); 31 Jul 2006 19:45:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 12:45:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 12:45:45 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DE9FF41000E
	for <hadoop-dev@lucene.apache.org>; Mon, 31 Jul 2006 19:43:15 +0000 (GMT)
Message-ID: <10105138.1154374995909.JavaMail.jira@brutus>
Date: Mon, 31 Jul 2006 12:43:15 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-54?page=comments#action_12424622 ] 
            
Owen O'Malley commented on HADOOP-54:
-------------------------------------

+1

Hairong is doing a patch today that will add next(key) and getCurrentValue(value) to Reader because she needed it for a patch she is working on. (She hasn't filed the jira yet, or I'd go ahead and link it.)

> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.5.0
>
>         Attachments: VIntCompressionResults.txt
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 31 19:47:46 2006
Return-Path: 
 <hadoop-dev-return-2838-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10892 invoked from network); 31 Jul 2006 19:47:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2006 19:47:46 -0000
Received: (qmail 25067 invoked by uid 500); 31 Jul 2006 19:47:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 25041 invoked by uid 500); 31 Jul 2006 19:47:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 25029 invoked by uid 99); 31 Jul 2006 19:47:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 12:47:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 12:47:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DD31A41000B
	for <hadoop-dev@lucene.apache.org>; Mon, 31 Jul 2006 19:45:14 +0000 (GMT)
Message-ID: <28018137.1154375114902.JavaMail.jira@brutus>
Date: Mon, 31 Jul 2006 12:45:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-389) MiniMapReduce tests get stuck because
 of some timing issues with initialization of tasktrackers.
In-Reply-To: <20099246.1153939933921.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-389?page=all ]

Doug Cutting resolved HADOOP-389.
---------------------------------

    Fix Version/s: 0.5.0
       Resolution: Fixed

I just committed this.  Thanks!

> MiniMapReduce tests get stuck because of some timing issues with initialization of tasktrackers.
> ------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-389
>                 URL: http://issues.apache.org/jira/browse/HADOOP-389
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>             Fix For: 0.5.0
>
>         Attachments: BuildXML.patch, MiniMRCluster.patch, testfix.patch
>
>
> The MiniMapReduce tests sometimes calls shutdown before the tasktrackers have been initialized. This makes the TestMiniMRBringup run for ever. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 31 19:58:46 2006
Return-Path: 
 <hadoop-dev-return-2839-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 15612 invoked from network); 31 Jul 2006 19:58:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2006 19:58:46 -0000
Received: (qmail 58498 invoked by uid 500); 31 Jul 2006 19:58:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58471 invoked by uid 500); 31 Jul 2006 19:58:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58462 invoked by uid 99); 31 Jul 2006 19:58:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 12:58:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 12:58:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C0069410009
	for <hadoop-dev@lucene.apache.org>; Mon, 31 Jul 2006 19:56:14 +0000 (GMT)
Message-ID: <25492629.1154375774783.JavaMail.jira@brutus>
Date: Mon, 31 Jul 2006 12:56:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-391) test-contrib with spaces in classpath
 (Windows)
In-Reply-To: <14647120.1153964834998.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-391?page=all ]

Doug Cutting resolved HADOOP-391.
---------------------------------

    Fix Version/s: 0.5.0
       Resolution: Fixed

I just committed this.  Thanks!

> test-contrib with spaces in classpath (Windows)
> -----------------------------------------------
>
>                 Key: HADOOP-391
>                 URL: http://issues.apache.org/jira/browse/HADOOP-391
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Michel Tourn
>             Fix For: 0.5.0
>
>         Attachments: streaming.winspaces.patch
>
>
> On Windows, ant test-contrib (streaming) with fail if classpath contains spaces.
> -    vargs.add(System.getProperty("java.class.path"));
> +    vargs.add("\"" + System.getProperty("java.class.path") + "\"");

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 31 20:09:46 2006
Return-Path: 
 <hadoop-dev-return-2840-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 19473 invoked from network); 31 Jul 2006 20:09:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2006 20:09:46 -0000
Received: (qmail 91667 invoked by uid 500); 31 Jul 2006 20:09:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 91640 invoked by uid 500); 31 Jul 2006 20:09:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 91631 invoked by uid 99); 31 Jul 2006 20:09:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 13:09:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 13:09:45 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 582B041000B
	for <hadoop-dev@lucene.apache.org>; Mon, 31 Jul 2006 20:07:15 +0000 (GMT)
Message-ID: <28689055.1154376435358.JavaMail.jira@brutus>
Date: Mon, 31 Jul 2006 13:07:15 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-362) tasks can get lost when reporting
 task completion to the JobTracker has an error
In-Reply-To: <22559656.1152744030813.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-362?page=all ]

Doug Cutting resolved HADOOP-362.
---------------------------------

    Fix Version/s: 0.5.0
       Resolution: Fixed

I just committed this.  Thanks, Owen!

> tasks can get lost when reporting task completion to the JobTracker has an error
> --------------------------------------------------------------------------------
>
>                 Key: HADOOP-362
>                 URL: http://issues.apache.org/jira/browse/HADOOP-362
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Devaraj Das
>         Assigned To: Owen O'Malley
>             Fix For: 0.5.0
>
>         Attachments: lost-status-updates.patch, progress-update.patch
>
>
> Basically, the JobTracker used to lose some updates about successful map tasks and it would assume that the tasks are still running (the old progress report is what it used to display in the web page). Now this would cause the reduces to also wait for the map output and they would never receive the output. This would cause the job to appear as if it was hung.
>  
> The following piece of code sends the status of tasks to the JobTracker:
>  
>             synchronized (this) {
>                 for (Iterator it = runningTasks.values().iterator();
>                      it.hasNext(); ) {
>                     TaskInProgress tip = (TaskInProgress) it.next();
>                     TaskStatus status = tip.createStatus();
>                     taskReports.add(status);
>                     if (status.getRunState() != TaskStatus.RUNNING) {
>                         if (tip.getTask().isMapTask()) {
>                             mapTotal--;
>                         } else {
>                             reduceTotal--;
>                         }
>                         it.remove();
>                     }
>                 }
>             }
>  
>             //
>             // Xmit the heartbeat
>             //
>            
>             TaskTrackerStatus status =
>               new TaskTrackerStatus(taskTrackerName, localHostname,
>                                     httpPort, taskReports,
>                                     failures);
>             int resultCode = jobClient.emitHeartbeat(status, justStarted);
>  
>  
> Notice that the completed TIPs are removed from runningTasks data structure. Now, if the emitHeartBeat threw an exception (if it could not communicate with the JobTracker till the IPC timeout expires) then this update is lost. And the next time it sends the hearbeat this completed task's status is missing and hence the JobTracker doesn't know about this completed task. So, one solution to this is to remove the completed TIPs from runningTasks after emitHeartbeat returns. Here is how the new code would look like:
>  
>  
>             synchronized (this) {
>                 for (Iterator it = runningTasks.values().iterator();
>                      it.hasNext(); ) {
>                     TaskInProgress tip = (TaskInProgress) it.next();
>                     TaskStatus status = tip.createStatus();
>                     taskReports.add(status);
>                 }
>             }
>  
>             //
>             // Xmit the heartbeat
>             //
>  
>             TaskTrackerStatus status =
>               new TaskTrackerStatus(taskTrackerName, localHostname,
>                                     httpPort, taskReports,
>                                     failures);
>             int resultCode = jobClient.emitHeartbeat(status, justStarted);
>             synchronized (this) {
>                 for (Iterator it = runningTasks.values().iterator();
>                      it.hasNext(); ) {
>                     TaskInProgress tip = (TaskInProgress) it.next();
>                     if (tip.runstate != TaskStatus.RUNNING) {
>                         if (tip.getTask().isMapTask()) {
>                             mapTotal--;
>                         } else {
>                             reduceTotal--;
>                         }
>                         it.remove();
>                     }
>                 }
>             }
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 31 20:22:46 2006
Return-Path: 
 <hadoop-dev-return-2841-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 22847 invoked from network); 31 Jul 2006 20:22:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2006 20:22:46 -0000
Received: (qmail 15812 invoked by uid 500); 31 Jul 2006 20:22:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15790 invoked by uid 500); 31 Jul 2006 20:22:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 15778 invoked by uid 99); 31 Jul 2006 20:22:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 13:22:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 13:22:45 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EA6FC41000B
	for <hadoop-dev@lucene.apache.org>; Mon, 31 Jul 2006 20:20:14 +0000 (GMT)
Message-ID: <17299466.1154377214957.JavaMail.jira@brutus>
Date: Mon, 31 Jul 2006 13:20:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-367) Static blocks do not automatically
 run when a class is loaded in Java 5.0
In-Reply-To: <22771983.1153174453937.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-367?page=all ]

Doug Cutting resolved HADOOP-367.
---------------------------------

    Fix Version/s: 0.5.0
       Resolution: Fixed

I just committed this, with one change.  Your patch mistakenly removed the 'in' field.

Thanks, Ben!

> Static blocks do not automatically run when a class is loaded in Java 5.0
> -------------------------------------------------------------------------
>
>                 Key: HADOOP-367
>                 URL: http://issues.apache.org/jira/browse/HADOOP-367
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.4.0
>         Environment: Java 5.0
>            Reporter: Benjamin Reed
>             Fix For: 0.5.0
>
>         Attachments: f.patch
>
>
> There seems to be a change that happened between 1.4 and 1.5 with respect to static initializers. I can't find this documented, but I can reproduce with a very simple program. Basically, a static initializer is not called unless a static member/method of the class is accessed or an instance is created. This is actually what the JLS says, but until 1.5 the static initializers ran when the class was loaded. Note that this behavior only occurs when running with the 1.5 JRE AND compiling for 1.5.
> For many Writables this isn't an issue, so the fallback behavior of the WritableFactory works, but Block is package private, so loadEdits fails when called from org.apache.hadoop.io.ArrayWritable.readFields() yielding the following trace:
> Caused by: java.lang.RuntimeException: java.lang.IllegalAccessException: Class org.apache.hadoop.io.WritableFactories can not access a member of class org.apache.hadoop.dfs.Block with modifiers "public"
>         at org.apache.hadoop.io.WritableFactories.newInstance(WritableFactories.java:49)
>         at org.apache.hadoop.io.ArrayWritable.readFields(ArrayWritable.java:81)
>         at org.apache.hadoop.dfs.FSDirectory.loadFSEdits(FSDirectory.java:532)
>         at org.apache.hadoop.dfs.FSDirectory.loadFSImage(FSDirectory.java:470)
>         at org.apache.hadoop.dfs.FSDirectory.<init>(FSDirectory.java:307)
>         at org.apache.hadoop.dfs.FSNamesystem.<init>(FSNamesystem.java:177)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:91)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:84)
>         at org.apache.hadoop.dfs.NameNode.main(NameNode.java:491)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 31 20:22:47 2006
Return-Path: 
 <hadoop-dev-return-2842-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 22880 invoked from network); 31 Jul 2006 20:22:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2006 20:22:47 -0000
Received: (qmail 15997 invoked by uid 500); 31 Jul 2006 20:22:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15974 invoked by uid 500); 31 Jul 2006 20:22:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 15965 invoked by uid 99); 31 Jul 2006 20:22:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 13:22:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 13:22:46 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F306A41000E
	for <hadoop-dev@lucene.apache.org>; Mon, 31 Jul 2006 20:20:15 +0000 (GMT)
Message-ID: <32492116.1154377215993.JavaMail.jira@brutus>
Date: Mon, 31 Jul 2006 13:20:15 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-367) Static blocks do not automatically run
 when a class is loaded in Java 5.0
In-Reply-To: <22771983.1153174453937.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-367?page=all ]

Doug Cutting updated HADOOP-367:
--------------------------------

    Comment: was deleted

> Static blocks do not automatically run when a class is loaded in Java 5.0
> -------------------------------------------------------------------------
>
>                 Key: HADOOP-367
>                 URL: http://issues.apache.org/jira/browse/HADOOP-367
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.4.0
>         Environment: Java 5.0
>            Reporter: Benjamin Reed
>             Fix For: 0.5.0
>
>         Attachments: f.patch
>
>
> There seems to be a change that happened between 1.4 and 1.5 with respect to static initializers. I can't find this documented, but I can reproduce with a very simple program. Basically, a static initializer is not called unless a static member/method of the class is accessed or an instance is created. This is actually what the JLS says, but until 1.5 the static initializers ran when the class was loaded. Note that this behavior only occurs when running with the 1.5 JRE AND compiling for 1.5.
> For many Writables this isn't an issue, so the fallback behavior of the WritableFactory works, but Block is package private, so loadEdits fails when called from org.apache.hadoop.io.ArrayWritable.readFields() yielding the following trace:
> Caused by: java.lang.RuntimeException: java.lang.IllegalAccessException: Class org.apache.hadoop.io.WritableFactories can not access a member of class org.apache.hadoop.dfs.Block with modifiers "public"
>         at org.apache.hadoop.io.WritableFactories.newInstance(WritableFactories.java:49)
>         at org.apache.hadoop.io.ArrayWritable.readFields(ArrayWritable.java:81)
>         at org.apache.hadoop.dfs.FSDirectory.loadFSEdits(FSDirectory.java:532)
>         at org.apache.hadoop.dfs.FSDirectory.loadFSImage(FSDirectory.java:470)
>         at org.apache.hadoop.dfs.FSDirectory.<init>(FSDirectory.java:307)
>         at org.apache.hadoop.dfs.FSNamesystem.<init>(FSNamesystem.java:177)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:91)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:84)
>         at org.apache.hadoop.dfs.NameNode.main(NameNode.java:491)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 31 20:22:49 2006
Return-Path: 
 <hadoop-dev-return-2843-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 22915 invoked from network); 31 Jul 2006 20:22:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2006 20:22:49 -0000
Received: (qmail 16182 invoked by uid 500); 31 Jul 2006 20:22:48 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 16159 invoked by uid 500); 31 Jul 2006 20:22:48 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 16150 invoked by uid 99); 31 Jul 2006 20:22:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 13:22:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 13:22:47 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 38392410010
	for <hadoop-dev@lucene.apache.org>; Mon, 31 Jul 2006 20:20:17 +0000 (GMT)
Message-ID: <2951795.1154377217228.JavaMail.jira@brutus>
Date: Mon, 31 Jul 2006 13:20:17 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Reopened: (HADOOP-367) Static blocks do not automatically
 run when a class is loaded in Java 5.0
In-Reply-To: <22771983.1153174453937.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-367?page=all ]

Doug Cutting reopened HADOOP-367:
---------------------------------

             
Oops.  Mistakenly resolved.

> Static blocks do not automatically run when a class is loaded in Java 5.0
> -------------------------------------------------------------------------
>
>                 Key: HADOOP-367
>                 URL: http://issues.apache.org/jira/browse/HADOOP-367
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.4.0
>         Environment: Java 5.0
>            Reporter: Benjamin Reed
>             Fix For: 0.5.0
>
>         Attachments: f.patch
>
>
> There seems to be a change that happened between 1.4 and 1.5 with respect to static initializers. I can't find this documented, but I can reproduce with a very simple program. Basically, a static initializer is not called unless a static member/method of the class is accessed or an instance is created. This is actually what the JLS says, but until 1.5 the static initializers ran when the class was loaded. Note that this behavior only occurs when running with the 1.5 JRE AND compiling for 1.5.
> For many Writables this isn't an issue, so the fallback behavior of the WritableFactory works, but Block is package private, so loadEdits fails when called from org.apache.hadoop.io.ArrayWritable.readFields() yielding the following trace:
> Caused by: java.lang.RuntimeException: java.lang.IllegalAccessException: Class org.apache.hadoop.io.WritableFactories can not access a member of class org.apache.hadoop.dfs.Block with modifiers "public"
>         at org.apache.hadoop.io.WritableFactories.newInstance(WritableFactories.java:49)
>         at org.apache.hadoop.io.ArrayWritable.readFields(ArrayWritable.java:81)
>         at org.apache.hadoop.dfs.FSDirectory.loadFSEdits(FSDirectory.java:532)
>         at org.apache.hadoop.dfs.FSDirectory.loadFSImage(FSDirectory.java:470)
>         at org.apache.hadoop.dfs.FSDirectory.<init>(FSDirectory.java:307)
>         at org.apache.hadoop.dfs.FSNamesystem.<init>(FSNamesystem.java:177)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:91)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:84)
>         at org.apache.hadoop.dfs.NameNode.main(NameNode.java:491)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 31 20:22:51 2006
Return-Path: 
 <hadoop-dev-return-2844-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 22955 invoked from network); 31 Jul 2006 20:22:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2006 20:22:51 -0000
Received: (qmail 16364 invoked by uid 500); 31 Jul 2006 20:22:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 16344 invoked by uid 500); 31 Jul 2006 20:22:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 16335 invoked by uid 99); 31 Jul 2006 20:22:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 13:22:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 13:22:49 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CF9B8410017
	for <hadoop-dev@lucene.apache.org>; Mon, 31 Jul 2006 20:20:19 +0000 (GMT)
Message-ID: <22655209.1154377219847.JavaMail.jira@brutus>
Date: Mon, 31 Jul 2006 13:20:19 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-287) Speed up SequenceFile sort with
 memory reduction
In-Reply-To: <30420683.1149716489884.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-287?page=all ]

Doug Cutting resolved HADOOP-287.
---------------------------------

    Fix Version/s: 0.5.0
       Resolution: Fixed

I just committed this, with one change. Your patch mistakenly removed the 'in' field.

Thanks, Ben! 

> Speed up SequenceFile sort with memory reduction
> ------------------------------------------------
>
>                 Key: HADOOP-287
>                 URL: http://issues.apache.org/jira/browse/HADOOP-287
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.3.2
>            Reporter: Benjamin Reed
>         Assigned To: Doug Cutting
>             Fix For: 0.5.0
>
>         Attachments: s.patch, zoom-sort.patch, zoom-sort.patch
>
>
> I replaced the merge sort with a quick sort and it yielded approx 30% improvement in sort time. It also reduced the memory requirement for sorting because the sort is done in place.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 31 21:04:51 2006
Return-Path: 
 <hadoop-dev-return-2845-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 39822 invoked from network); 31 Jul 2006 21:04:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2006 21:04:51 -0000
Received: (qmail 95123 invoked by uid 500); 31 Jul 2006 21:04:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95084 invoked by uid 500); 31 Jul 2006 21:04:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95053 invoked by uid 99); 31 Jul 2006 21:04:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 14:04:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 14:04:45 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7172C41000E
	for <hadoop-dev@lucene.apache.org>; Mon, 31 Jul 2006 21:02:15 +0000 (GMT)
Message-ID: <16540427.1154379735462.JavaMail.jira@brutus>
Date: Mon, 31 Jul 2006 14:02:15 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-367) Static blocks do not automatically
 run when a class is loaded in Java 5.0
In-Reply-To: <22771983.1153174453937.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-367?page=comments#action_12424652 ] 
            
Doug Cutting commented on HADOOP-367:
-------------------------------------

We might as well just use setAccessible.  Let's just add a static util method:

public Object newInstance(Class aClass);

This can can be implemented like JobConf.newInstance().  Then JobConf.newInstance() can call this, and we can replace all calls to WritableFactories.newInstance() with calls to this.  If we ever become worried about abuse of this method, we can restrict its use to particular, approved packages or somesuch.

This would be even less code!

> Static blocks do not automatically run when a class is loaded in Java 5.0
> -------------------------------------------------------------------------
>
>                 Key: HADOOP-367
>                 URL: http://issues.apache.org/jira/browse/HADOOP-367
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.4.0
>         Environment: Java 5.0
>            Reporter: Benjamin Reed
>             Fix For: 0.5.0
>
>         Attachments: f.patch
>
>
> There seems to be a change that happened between 1.4 and 1.5 with respect to static initializers. I can't find this documented, but I can reproduce with a very simple program. Basically, a static initializer is not called unless a static member/method of the class is accessed or an instance is created. This is actually what the JLS says, but until 1.5 the static initializers ran when the class was loaded. Note that this behavior only occurs when running with the 1.5 JRE AND compiling for 1.5.
> For many Writables this isn't an issue, so the fallback behavior of the WritableFactory works, but Block is package private, so loadEdits fails when called from org.apache.hadoop.io.ArrayWritable.readFields() yielding the following trace:
> Caused by: java.lang.RuntimeException: java.lang.IllegalAccessException: Class org.apache.hadoop.io.WritableFactories can not access a member of class org.apache.hadoop.dfs.Block with modifiers "public"
>         at org.apache.hadoop.io.WritableFactories.newInstance(WritableFactories.java:49)
>         at org.apache.hadoop.io.ArrayWritable.readFields(ArrayWritable.java:81)
>         at org.apache.hadoop.dfs.FSDirectory.loadFSEdits(FSDirectory.java:532)
>         at org.apache.hadoop.dfs.FSDirectory.loadFSImage(FSDirectory.java:470)
>         at org.apache.hadoop.dfs.FSDirectory.<init>(FSDirectory.java:307)
>         at org.apache.hadoop.dfs.FSNamesystem.<init>(FSNamesystem.java:177)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:91)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:84)
>         at org.apache.hadoop.dfs.NameNode.main(NameNode.java:491)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 31 21:06:46 2006
Return-Path: 
 <hadoop-dev-return-2846-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40624 invoked from network); 31 Jul 2006 21:06:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2006 21:06:46 -0000
Received: (qmail 98710 invoked by uid 500); 31 Jul 2006 21:06:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98680 invoked by uid 500); 31 Jul 2006 21:06:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98671 invoked by uid 99); 31 Jul 2006 21:06:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 14:06:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 14:06:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CC84A41000C
	for <hadoop-dev@lucene.apache.org>; Mon, 31 Jul 2006 21:04:14 +0000 (GMT)
Message-ID: <1293249.1154379854835.JavaMail.jira@brutus>
Date: Mon, 31 Jul 2006 14:04:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-393) The validateUTF function of class
 Text throws MalformedInputException for valid UTF8 code containing ascii
 chars
In-Reply-To: <15463316.1154021954064.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-393?page=all ]

Doug Cutting resolved HADOOP-393.
---------------------------------

    Resolution: Fixed

I committed this.  I reverted your previous patch, then applied this one.  Thanks!

> The validateUTF function of class Text throws MalformedInputException for valid UTF8 code containing ascii chars
> ----------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-393
>                 URL: http://issues.apache.org/jira/browse/HADOOP-393
>             Project: Hadoop
>          Issue Type: Bug
>          Components: io
>    Affects Versions: 0.4.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.5.0
>
>         Attachments: textfix.patch
>
>
> The validateUTF function does not handle ascii chars right therefore causing MIE exception to be thrown.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 31 21:52:52 2006
Return-Path: 
 <hadoop-dev-return-2847-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 59589 invoked from network); 31 Jul 2006 21:52:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2006 21:52:52 -0000
Received: (qmail 74326 invoked by uid 500); 31 Jul 2006 21:52:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 74307 invoked by uid 500); 31 Jul 2006 21:52:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 74297 invoked by uid 99); 31 Jul 2006 21:52:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 14:52:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 14:52:50 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6A04641000C
	for <hadoop-dev@lucene.apache.org>; Mon, 31 Jul 2006 21:50:15 +0000 (GMT)
Message-ID: <3171268.1154382615431.JavaMail.jira@brutus>
Date: Mon, 31 Jul 2006 14:50:15 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-372) should allow to specify different
 inputformat classes for different input dirs for Map/Reduce jobs
In-Reply-To: <23897633.1153332195926.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-372?page=comments#action_12424670 ] 
            
Doug Cutting commented on HADOOP-372:
-------------------------------------

It seems like a lot of work to avoid instanceof in one's map method.  We could instead add a method like:

Mapper getMapper(Class keyClass, Class valueClass);

I also still worry that a static split method won't provide enough flexibility.  If a job is asked to create N splits, how will these be apportioned to the different inputs?  By number of directories, files, bytes, or what?


> should allow to specify different inputformat classes for different input dirs for Map/Reduce jobs
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-372
>                 URL: http://issues.apache.org/jira/browse/HADOOP-372
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.4.0
>         Environment: all
>            Reporter: Runping Qi
>
> Right now, the user can specify multiple input directories for a map reduce job. 
> However, the files under all the directories are assumed to be in the same format, 
> with the same key/value classes. This proves to be  a serious limit in many situations. 
> Here is an example. Suppose I have three simple tables: 
> one has URLs and their rank values (page ranks), 
> another has URLs and their classification values, 
> and the third one has the URL meta data such as crawl status, last crawl time, etc. 
> Suppose now I need a job to generate a list of URLs to be crawled next. 
> The decision depends on the info in all the three tables.
> Right now, there is no easy way to accomplish this.
> However, this job can be done if the framework allows to specify different inputformats for different input dirs.
> Suppose my three tables are in the following directory respectively: rankTable, classificationTable. and metaDataTable. 
> If we extend JobConf class with the following method (as Owen suggested to me):
>     addInputPath(aPath, anInputFormatClass, anInputKeyClass, anInputValueClass)
> Then I can specify my job as follows:
>     addInputPath(rankTable, SequenceFileInputFormat.class, UTF8.class, DoubleWritable.class)
>     addInputPath(classificationTable, TextInputFormat.class, UTF8,class, UTF8.class)
>     addInputPath(metaDataTable, SequenceFileInputFormat.class, UTF8.class, MyRecord.class)
> If an input directory is added through the current API, it will have the same meaning as it is now. 
> Thus this extension will not affect any applications that do not need this new feature.
> It is relatively easy for the M/R framework to create an appropriate record reader for a map task based on the above information.
> And that is the only change needed for supporting this extension.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

